const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-Ds1QqMbI.js","assets/if-defined-BP0Z7xo2.js","assets/index-tVWjIwZT.js","assets/index-Bu7BsKGk.js","assets/ref-D3Fy5ByO.js","assets/index-q3KaQBlU.js","assets/index-DotWvnA0.js","assets/index-CqDTJqX2.js","assets/index-B4CiTuQS.js","assets/index-BovUWNRW.js","assets/index-B9KSfjv9.js","assets/index-1tRBAULa.js","assets/email-f1JS3tXv.js","assets/index-rZcMBiaa.js","assets/socials-Bv_u5cF8.js","assets/index-5hdgheVc.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-C-PIHUZl.js","assets/index-D4xMkMlF.js","assets/index-CoVQX4AA.js","assets/index-BZeXr6t-.js","assets/swaps-CKMCpzPf.js","assets/index-BrVdmWze.js","assets/index-S5QSNYS3.js","assets/index-DjNXt5dG.js","assets/send-Bjyre2Gf.js","assets/index-0KBxk_ij.js","assets/index-Dt7CY-W6.js","assets/receive-CJMn_HrH.js","assets/index-BY_rk9m1.js","assets/onramp-DfyTQg95.js","assets/index-BdplwF0V.js","assets/index-S2giTt7S.js","assets/index-DBs2renv.js","assets/transactions-C7WHkDzS.js","assets/index-D44a85Kf.js","assets/index-BLH4Dc6S.js","assets/index-Df_HI2kW.js","assets/index-Cw9bDr7T.js","assets/index-Dv1Af2Qf.js","assets/w3m-modal-B605XRDO.js"])))=>i.map(i=>d[i]);
var xk=t=>{throw TypeError(t)};var P1=(t,e,n)=>e.has(t)||xk("Cannot "+n);var W=(t,e,n)=>(P1(t,e,"read from private field"),n?n.call(t):e.get(t)),Xe=(t,e,n)=>e.has(t)?xk("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),xe=(t,e,n,r)=>(P1(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),_t=(t,e,n)=>(P1(t,e,"access private method"),n);var ub=(t,e,n,r)=>({set _(s){xe(t,e,s,n)},get _(){return W(t,e,r)}});function Sq(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function kU(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var DU={exports:{}},P_={},$U={exports:{}},Rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0=Symbol.for("react.element"),Aq=Symbol.for("react.portal"),Iq=Symbol.for("react.fragment"),Nq=Symbol.for("react.strict_mode"),xq=Symbol.for("react.profiler"),Tq=Symbol.for("react.provider"),Rq=Symbol.for("react.context"),Pq=Symbol.for("react.forward_ref"),Oq=Symbol.for("react.suspense"),kq=Symbol.for("react.memo"),Dq=Symbol.for("react.lazy"),Tk=Symbol.iterator;function $q(t){return t===null||typeof t!="object"?null:(t=Tk&&t[Tk]||t["@@iterator"],typeof t=="function"?t:null)}var MU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LU=Object.assign,UU={};function hg(t,e,n){this.props=t,this.context=e,this.refs=UU,this.updater=n||MU}hg.prototype.isReactComponent={};hg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function BU(){}BU.prototype=hg.prototype;function sR(t,e,n){this.props=t,this.context=e,this.refs=UU,this.updater=n||MU}var iR=sR.prototype=new BU;iR.constructor=sR;LU(iR,hg.prototype);iR.isPureReactComponent=!0;var Rk=Array.isArray,jU=Object.prototype.hasOwnProperty,oR={current:null},FU={key:!0,ref:!0,__self:!0,__source:!0};function WU(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jU.call(e,r)&&!FU.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:l0,type:t,key:i,ref:o,props:s,_owner:oR.current}}function Mq(t,e){return{$$typeof:l0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function aR(t){return typeof t=="object"&&t!==null&&t.$$typeof===l0}function Lq(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Pk=/\/+/g;function O1(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Lq(""+t.key):e.toString(36)}function vv(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case l0:case Aq:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+O1(o,0):r,Rk(s)?(n="",t!=null&&(n=t.replace(Pk,"$&/")+"/"),vv(s,e,n,"",function(l){return l})):s!=null&&(aR(s)&&(s=Mq(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pk,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Rk(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+O1(i,a);o+=vv(i,e,n,c,s)}else if(c=$q(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+O1(i,a++),o+=vv(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function db(t,e,n){if(t==null)return t;var r=[],s=0;return vv(t,r,"","",function(i){return e.call(n,i,s++)}),r}function Uq(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ds={current:null},Ev={transition:null},Bq={ReactCurrentDispatcher:Ds,ReactCurrentBatchConfig:Ev,ReactCurrentOwner:oR};function zU(){throw Error("act(...) is not supported in production builds of React.")}Rt.Children={map:db,forEach:function(t,e,n){db(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return db(t,function(){e++}),e},toArray:function(t){return db(t,function(e){return e})||[]},only:function(t){if(!aR(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Rt.Component=hg;Rt.Fragment=Iq;Rt.Profiler=xq;Rt.PureComponent=sR;Rt.StrictMode=Nq;Rt.Suspense=Oq;Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bq;Rt.act=zU;Rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=LU({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=oR.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)jU.call(e,c)&&!FU.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:l0,type:t.type,key:s,ref:i,props:r,_owner:o}};Rt.createContext=function(t){return t={$$typeof:Rq,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tq,_context:t},t.Consumer=t};Rt.createElement=WU;Rt.createFactory=function(t){var e=WU.bind(null,t);return e.type=t,e};Rt.createRef=function(){return{current:null}};Rt.forwardRef=function(t){return{$$typeof:Pq,render:t}};Rt.isValidElement=aR;Rt.lazy=function(t){return{$$typeof:Dq,_payload:{_status:-1,_result:t},_init:Uq}};Rt.memo=function(t,e){return{$$typeof:kq,type:t,compare:e===void 0?null:e}};Rt.startTransition=function(t){var e=Ev.transition;Ev.transition={};try{t()}finally{Ev.transition=e}};Rt.unstable_act=zU;Rt.useCallback=function(t,e){return Ds.current.useCallback(t,e)};Rt.useContext=function(t){return Ds.current.useContext(t)};Rt.useDebugValue=function(){};Rt.useDeferredValue=function(t){return Ds.current.useDeferredValue(t)};Rt.useEffect=function(t,e){return Ds.current.useEffect(t,e)};Rt.useId=function(){return Ds.current.useId()};Rt.useImperativeHandle=function(t,e,n){return Ds.current.useImperativeHandle(t,e,n)};Rt.useInsertionEffect=function(t,e){return Ds.current.useInsertionEffect(t,e)};Rt.useLayoutEffect=function(t,e){return Ds.current.useLayoutEffect(t,e)};Rt.useMemo=function(t,e){return Ds.current.useMemo(t,e)};Rt.useReducer=function(t,e,n){return Ds.current.useReducer(t,e,n)};Rt.useRef=function(t){return Ds.current.useRef(t)};Rt.useState=function(t){return Ds.current.useState(t)};Rt.useSyncExternalStore=function(t,e,n){return Ds.current.useSyncExternalStore(t,e,n)};Rt.useTransition=function(){return Ds.current.useTransition()};Rt.version="18.3.1";$U.exports=Rt;var O=$U.exports;const Di=Ah(O),jq=Sq({__proto__:null,default:Di},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fq=O,Wq=Symbol.for("react.element"),zq=Symbol.for("react.fragment"),Hq=Object.prototype.hasOwnProperty,qq=Fq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gq={key:!0,ref:!0,__self:!0,__source:!0};function HU(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Hq.call(e,r)&&!Gq.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Wq,type:t,key:i,ref:o,props:s,_owner:qq.current}}P_.Fragment=zq;P_.jsx=HU;P_.jsxs=HU;DU.exports=P_;var m=DU.exports,Ok={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ve=function(t,e){if(!t)throw fg(e)},fg=function(t){return new Error("Firebase Database ("+qU.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Vq=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},cR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(GU(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vq(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Kq;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Kq extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VU=function(t){const e=GU(t);return cR.encodeByteArray(e,!0)},sE=function(t){return VU(t).replace(/\./g,"")},vI=function(t){try{return cR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yq(t){return KU(void 0,t)}function KU(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Qq(n)||(t[n]=KU(t[n],e[n]));return t}function Qq(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zq(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq=()=>Zq().__FIREBASE_DEFAULTS__,Xq=()=>{if(typeof process>"u"||typeof Ok>"u")return;const t=Ok.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vI(t[1]);return e&&JSON.parse(e)},YU=()=>{try{return Jq()||Xq()||eG()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},tG=t=>{var e,n;return(n=(e=YU())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},nG=t=>{const e=tG(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},QU=()=>{var t;return(t=YU())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rG(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[sE(JSON.stringify(n)),sE(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sG(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sG())}function iG(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oG(){return qU.NODE_ADMIN===!0}function aG(){try{return typeof indexedDB=="object"}catch{return!1}}function cG(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG="FirebaseError";class u0 extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=lG,Object.setPrototypeOf(this,u0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,JU.prototype.create)}}class JU{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?uG(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new u0(s,a,r)}}function uG(t,e){return t.replace(dG,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const dG=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t){return JSON.parse(t)}function br(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=Ty(vI(i[0])||""),n=Ty(vI(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},hG=function(t){const e=XU(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},fG=function(t){const e=XU(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Tp(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function kk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function iE(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function EI(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Dk(i)&&Dk(o)){if(!EI(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Dk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pG(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function lR(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,ve(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},k_=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(t){return t&&t._delegate?t._delegate:t}class Ry{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new O_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bG(e))try{this.getOrInitializeService({instanceIdentifier:rd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=rd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rd){return this.instances.has(e)}getOptions(e=rd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wG(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rd){return this.component?this.component.multipleInstances?e:rd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wG(t){return t===rd?void 0:t}function bG(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yG(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Nn||(Nn={}));const EG={debug:Nn.DEBUG,verbose:Nn.VERBOSE,info:Nn.INFO,warn:Nn.WARN,error:Nn.ERROR,silent:Nn.SILENT},_G=Nn.INFO,CG={[Nn.DEBUG]:"log",[Nn.VERBOSE]:"log",[Nn.INFO]:"info",[Nn.WARN]:"warn",[Nn.ERROR]:"error"},SG=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=CG[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class e6{constructor(e){this.name=e,this._logLevel=_G,this._logHandler=SG,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Nn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EG[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Nn.DEBUG,...e),this._logHandler(this,Nn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Nn.VERBOSE,...e),this._logHandler(this,Nn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Nn.INFO,...e),this._logHandler(this,Nn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Nn.WARN,...e),this._logHandler(this,Nn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Nn.ERROR,...e),this._logHandler(this,Nn.ERROR,...e)}}const AG=(t,e)=>e.some(n=>t instanceof n);let $k,Mk;function IG(){return $k||($k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NG(){return Mk||(Mk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const t6=new WeakMap,_I=new WeakMap,n6=new WeakMap,k1=new WeakMap,uR=new WeakMap;function xG(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ru(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&t6.set(n,t)}).catch(()=>{}),uR.set(e,t),e}function TG(t){if(_I.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_I.set(t,e)}let CI={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _I.get(t);if(e==="objectStoreNames")return t.objectStoreNames||n6.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ru(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RG(t){CI=t(CI)}function PG(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(D1(this),e,...n);return n6.set(r,e.sort?e.sort():[e]),ru(r)}:NG().includes(t)?function(...e){return t.apply(D1(this),e),ru(t6.get(this))}:function(...e){return ru(t.apply(D1(this),e))}}function OG(t){return typeof t=="function"?PG(t):(t instanceof IDBTransaction&&TG(t),AG(t,IG())?new Proxy(t,CI):t)}function ru(t){if(t instanceof IDBRequest)return xG(t);if(k1.has(t))return k1.get(t);const e=OG(t);return e!==t&&(k1.set(t,e),uR.set(e,t)),e}const D1=t=>uR.get(t);function kG(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ru(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ru(o.result),c.oldVersion,c.newVersion,ru(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const DG=["get","getKey","getAll","getAllKeys","count"],$G=["put","add","delete","clear"],$1=new Map;function Lk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($1.get(e))return $1.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$G.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||DG.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return $1.set(e,i),i}RG(t=>({...t,get:(e,n,r)=>Lk(e,n)||t.get(e,n,r),has:(e,n)=>!!Lk(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LG(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LG(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const SI="@firebase/app",Uk="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new e6("@firebase/app"),UG="@firebase/app-compat",BG="@firebase/analytics-compat",jG="@firebase/analytics",FG="@firebase/app-check-compat",WG="@firebase/app-check",zG="@firebase/auth",HG="@firebase/auth-compat",qG="@firebase/database",GG="@firebase/data-connect",VG="@firebase/database-compat",KG="@firebase/functions",YG="@firebase/functions-compat",QG="@firebase/installations",ZG="@firebase/installations-compat",JG="@firebase/messaging",XG="@firebase/messaging-compat",eV="@firebase/performance",tV="@firebase/performance-compat",nV="@firebase/remote-config",rV="@firebase/remote-config-compat",sV="@firebase/storage",iV="@firebase/storage-compat",oV="@firebase/firestore",aV="@firebase/vertexai-preview",cV="@firebase/firestore-compat",lV="firebase",uV="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="[DEFAULT]",dV={[SI]:"fire-core",[UG]:"fire-core-compat",[jG]:"fire-analytics",[BG]:"fire-analytics-compat",[WG]:"fire-app-check",[FG]:"fire-app-check-compat",[zG]:"fire-auth",[HG]:"fire-auth-compat",[qG]:"fire-rtdb",[GG]:"fire-data-connect",[VG]:"fire-rtdb-compat",[KG]:"fire-fn",[YG]:"fire-fn-compat",[QG]:"fire-iid",[ZG]:"fire-iid-compat",[JG]:"fire-fcm",[XG]:"fire-fcm-compat",[eV]:"fire-perf",[tV]:"fire-perf-compat",[nV]:"fire-rc",[rV]:"fire-rc-compat",[sV]:"fire-gcs",[iV]:"fire-gcs-compat",[oV]:"fire-fst",[cV]:"fire-fst-compat",[aV]:"fire-vertex","fire-js":"fire-js",[lV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py=new Map,hV=new Map,II=new Map;function Bk(t,e){try{t.container.addComponent(e)}catch(n){Hc.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function oE(t){const e=t.name;if(II.has(e))return Hc.debug(`There were multiple attempts to register component ${e}.`),!1;II.set(e,t);for(const n of Py.values())Bk(n,t);for(const n of hV.values())Bk(n,t);return!0}function fV(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},su=new JU("app","Firebase",pV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ry("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw su.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=uV;function r6(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:AI,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw su.create("bad-app-name",{appName:String(s)});if(n||(n=QU()),!n)throw su.create("no-options");const i=Py.get(s);if(i){if(EI(n,i.options)&&EI(r,i.config))return i;throw su.create("duplicate-app",{appName:s})}const o=new vG(s);for(const c of II.values())o.addComponent(c);const a=new gV(n,r,o);return Py.set(s,a),a}function s6(t=AI){const e=Py.get(t);if(!e&&t===AI&&QU())return r6();if(!e)throw su.create("no-app",{appName:t});return e}function yV(){return Array.from(Py.values())}function ep(t,e,n){var r;let s=(r=dV[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hc.warn(a.join(" "));return}oE(new Ry(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="firebase-heartbeat-database",bV=1,Oy="firebase-heartbeat-store";let M1=null;function i6(){return M1||(M1=kG(wV,bV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oy)}catch(n){console.warn(n)}}}}).catch(t=>{throw su.create("idb-open",{originalErrorMessage:t.message})})),M1}async function vV(t){try{const n=(await i6()).transaction(Oy),r=await n.objectStore(Oy).get(o6(t));return await n.done,r}catch(e){if(e instanceof u0)Hc.warn(e.message);else{const n=su.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hc.warn(n.message)}}}async function jk(t,e){try{const r=(await i6()).transaction(Oy,"readwrite");await r.objectStore(Oy).put(e,o6(t)),await r.done}catch(n){if(n instanceof u0)Hc.warn(n.message);else{const r=su.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hc.warn(r.message)}}}function o6(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=1024,_V=30*24*60*60*1e3;class CV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=_V}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hc.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fk(),{heartbeatsToSend:r,unsentEntries:s}=SV(this._heartbeatsCache.heartbeats),i=sE(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hc.warn(n),""}}}function Fk(){return new Date().toISOString().substring(0,10)}function SV(t,e=EV){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Wk(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wk(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aG()?cG().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return jk(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wk(t){return sE(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){oE(new Ry("platform-logger",e=>new MG(e),"PRIVATE")),oE(new Ry("heartbeat",e=>new CV(e),"PRIVATE")),ep(SI,Uk,t),ep(SI,Uk,"esm2017"),ep("fire-js","")}IV("");var NV="firebase",xV="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ep(NV,xV,"app");var zk={};const Hk="@firebase/database",qk="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a6="";function TV(t){a6=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),br(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ty(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return el(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new RV(e)}}catch{}return new PV},yd=c6("localStorage"),OV=c6("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new e6("@firebase/database"),kV=function(){let t=1;return function(){return t++}}(),l6=function(t){const e=mG(t),n=new gG;n.update(e);const r=n.digest();return cR.encodeByteArray(r)},d0=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=d0.apply(null,r):typeof r=="object"?e+=br(r):e+=r,e+=" "}return e};let Zm=null,Gk=!0;const DV=function(t,e){ve(!0,"Can't turn on custom loggers persistently."),tp.logLevel=Nn.VERBOSE,Zm=tp.log.bind(tp)},fs=function(...t){if(Gk===!0&&(Gk=!1,Zm===null&&OV.get("logging_enabled")===!0&&DV()),Zm){const e=d0.apply(null,t);Zm(e)}},h0=function(t){return function(...e){fs(t,...e)}},NI=function(...t){const e="FIREBASE INTERNAL ERROR: "+d0(...t);tp.error(e)},qc=function(...t){const e=`FIREBASE FATAL ERROR: ${d0(...t)}`;throw tp.error(e),new Error(e)},ai=function(...t){const e="FIREBASE WARNING: "+d0(...t);tp.warn(e)},$V=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ai("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},u6=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},MV=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Rp="[MIN_NAME]",Yd="[MAX_NAME]",gg=function(t,e){if(t===e)return 0;if(t===Rp||e===Yd)return-1;if(e===Rp||t===Yd)return 1;{const n=Vk(t),r=Vk(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},LV=function(t,e){return t===e?0:t<e?-1:1},Zg=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+br(e))},dR=function(t){if(typeof t!="object"||t===null)return br(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=br(e[r]),n+=":",n+=dR(t[e[r]]);return n+="}",n},d6=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function fi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const h6=function(t){ve(!u6(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},UV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},BV=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function jV(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const FV=new RegExp("^-?(0*)\\d{1,10}$"),WV=-2147483648,zV=2147483647,Vk=function(t){if(FV.test(t)){const e=Number(t);if(e>=WV&&e<=zV)return e}return null},mg=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw ai("Exception was thrown by user callback.",n),e},Math.floor(0))}},HV=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Jm=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ai(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(fs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ai(e)}}class _v{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}_v.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR="5",f6="v",p6="s",g6="r",m6="f",y6=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,w6="ls",b6="p",xI="ac",v6="websocket",E6="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yd.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yd.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function VV(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function C6(t,e,n){ve(typeof e=="string","typeof type must == string"),ve(typeof n=="object","typeof params must == object");let r;if(e===v6)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===E6)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);VV(t)&&(n.ns=t.namespace);const s=[];return fi(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.counters_={}}incrementCounter(e,n=1){el(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Yq(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L1={},U1={};function fR(t){const e=t.toString();return L1[e]||(L1[e]=new KV),L1[e]}function YV(t,e){const n=t.toString();return U1[n]||(U1[n]=e()),U1[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&mg(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="start",ZV="close",JV="pLPCommand",XV="pRTLPCB",S6="id",A6="pw",I6="ser",eK="cb",tK="seg",nK="ts",rK="d",sK="dframe",N6=1870,x6=30,iK=N6-x6,oK=25e3,aK=3e4;class Mf{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=h0(e),this.stats_=fR(n),this.urlFn=c=>(this.appCheckToken&&(c[xI]=this.appCheckToken),C6(n,E6,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new QV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(aK)),MV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pR((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Kk)this.id=a,this.password=c;else if(o===ZV)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[Kk]="t",r[I6]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[eK]=this.scriptTagHolder.uniqueCallbackIdentifier),r[f6]=hR,this.transportSessionId&&(r[p6]=this.transportSessionId),this.lastSessionId&&(r[w6]=this.lastSessionId),this.applicationId&&(r[b6]=this.applicationId),this.appCheckToken&&(r[xI]=this.appCheckToken),typeof location<"u"&&location.hostname&&y6.test(location.hostname)&&(r[g6]=m6);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Mf.forceAllow_=!0}static forceDisallow(){Mf.forceDisallow_=!0}static isAvailable(){return Mf.forceAllow_?!0:!Mf.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!UV()&&!BV()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=br(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=VU(n),s=d6(r,iK);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[sK]="t",r[S6]=e,r[A6]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=br(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class pR{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=kV(),window[JV+this.uniqueCallbackIdentifier]=e,window[XV+this.uniqueCallbackIdentifier]=n,this.myIFrame=pR.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){fs("frame writing exception"),a.stack&&fs(a.stack),fs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||fs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[S6]=this.myID,e[A6]=this.myPW,e[I6]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+x6+r.length<=N6;){const o=this.pendingSegs.shift();r=r+"&"+tK+s+"="+o.seg+"&"+nK+s+"="+o.ts+"&"+rK+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(oK)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{fs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=16384,lK=45e3;let aE=null;typeof MozWebSocket<"u"?aE=MozWebSocket:typeof WebSocket<"u"&&(aE=WebSocket);class Go{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=h0(this.connId),this.stats_=fR(n),this.connURL=Go.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[f6]=hR,typeof location<"u"&&location.hostname&&y6.test(location.hostname)&&(o[g6]=m6),n&&(o[p6]=n),r&&(o[w6]=r),s&&(o[xI]=s),i&&(o[b6]=i),C6(e,v6,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yd.set("previous_websocket_failure",!0);try{let r;oG(),this.mySock=new aE(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Go.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&aE!==null&&!Go.forceDisallow_}static previouslyFailed(){return yd.isInMemoryStorage||yd.get("previous_websocket_failure")===!0}markConnectionHealthy(){yd.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Ty(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ve(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=br(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=d6(n,cK);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(lK))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Go.responsesRequiredToBeHealthy=2;Go.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Mf,Go]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Go&&Go.isAvailable();let r=n&&!Go.previouslyFailed();if(e.webSocketOnly&&(n||ai("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Go];else{const s=this.transports_=[];for(const i of ky.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);ky.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ky.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=6e4,dK=5e3,hK=10*1024,fK=100*1024,B1="t",Yk="d",pK="s",Qk="r",gK="e",Zk="o",Jk="a",Xk="n",e2="p",mK="h";class yK{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=h0("c:"+this.id+":"),this.transportManager_=new ky(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=Jm(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>fK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>hK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(B1 in e){const n=e[B1];n===Jk?this.upgradeIfSecondaryHealthy_():n===Qk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Zk&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Zg("t",e),r=Zg("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:e2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Jk,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Zg("t",e),r=Zg("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Zg(B1,e);if(Yk in e){const r=e[Yk];if(n===mK){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===Xk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pK?this.onConnectionShutdown_(r):n===Qk?this.onReset_(r):n===gK?NI("Server Error: "+r):n===Zk?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):NI("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),hR!==r&&ai("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Jm(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(uK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Jm(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:e2,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R6=class{constructor(e){this.allowedEvents_=e,this.listeners_={},ve(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){ve(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends R6{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ZU()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cE}getInitialEvent(e){return ve(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=32,n2=768;class En{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Vt(){return new En("")}function Nt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Iu(t){return t.pieces_.length-t.pieceNum_}function Tn(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new En(t.pieces_,e)}function P6(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function wK(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function O6(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function k6(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new En(e,0)}function vr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof En)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new En(n,0)}function Tt(t){return t.pieceNum_>=t.pieces_.length}function xs(t,e){const n=Nt(t),r=Nt(e);if(n===null)return e;if(n===r)return xs(Tn(t),Tn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gR(t,e){if(Iu(t)!==Iu(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Yo(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Iu(t)>Iu(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class bK{constructor(e,n){this.errorPrefix_=n,this.parts_=O6(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=k_(this.parts_[r]);D6(this)}}function vK(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=k_(e),D6(t)}function EK(t){const e=t.parts_.pop();t.byteLength_-=k_(e),t.parts_.length>0&&(t.byteLength_-=1)}function D6(t){if(t.byteLength_>n2)throw new Error(t.errorPrefix_+"has a key path longer than "+n2+" bytes ("+t.byteLength_+").");if(t.parts_.length>t2)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t2+") or object contains a cycle "+sd(t))}function sd(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR extends R6{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mR}getInitialEvent(e){return ve(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=1e3,_K=60*5*1e3,r2=30*1e3,CK=1.3,SK=3e4,AK="server_kill",s2=3;class Mc extends T6{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Mc.nextPersistentConnectionId_++,this.log_=h0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Jg,this.maxReconnectDelay_=_K,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mR.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cE.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(br(i)),ve(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new O_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ve(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Mc.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&el(e,"w")){const r=Tp(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();ai(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||fG(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=r2)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=hG(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),ve(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+br(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):NI("Unrecognized action received from server: "+br(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ve(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Jg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SK&&(this.reconnectDelay_=Jg),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*CK)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Mc.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){ve(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?fs("getToken() completed but was canceled"):(fs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new yK(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{ai(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(AK)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&ai(d),c())}}}interrupt(e){fs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kk(this.interruptReasons_)&&(this.reconnectDelay_=Jg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>dR(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new En(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){fs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=s2&&(this.reconnectDelay_=r2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){fs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=s2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+a6.replace(/\./g,"-")]=1,ZU()?e["framework.cordova"]=1:iG()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cE.getInstance().currentlyOnline();return kk(this.interruptReasons_)&&e}}Mc.nextPersistentConnectionId_=0;Mc.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new xt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new xt(Rp,e),s=new xt(Rp,n);return this.compare(r,s)!==0}minPost(){return xt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hb;class $6 extends D_{static get __EMPTY_NODE(){return hb}static set __EMPTY_NODE(e){hb=e}compare(e,n){return gg(e.name,n.name)}isDefinedOn(e){throw fg("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return xt.MIN}maxPost(){return new xt(Yd,hb)}makePost(e,n){return ve(typeof e=="string","KeyIndex indexValue must always be a string."),new xt(e,hb)}toString(){return".key"}}const np=new $6;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Rr{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Rr.RED,this.left=s??si.EMPTY_NODE,this.right=i??si.EMPTY_NODE}copy(e,n,r,s,i){return new Rr(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return si.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return si.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Rr.RED=!0;Rr.BLACK=!1;class IK{copy(e,n,r,s,i){return this}insert(e,n,r){return new Rr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class si{constructor(e,n=si.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new si(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rr.BLACK,null,null))}remove(e){return new si(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new fb(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new fb(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new fb(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new fb(this.root_,null,this.comparator_,!0,e)}}si.EMPTY_NODE=new IK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NK(t,e){return gg(t.name,e.name)}function yR(t,e){return gg(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TI;function xK(t){TI=t}const M6=function(t){return typeof t=="number"?"number:"+h6(t):"string:"+t},L6=function(t){if(t.isLeafNode()){const e=t.val();ve(typeof e=="string"||typeof e=="number"||typeof e=="object"&&el(e,".sv"),"Priority must be a string or number.")}else ve(t===TI||t.isEmpty(),"priority of unexpected type.");ve(t===TI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i2;class Tr{constructor(e,n=Tr.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ve(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),L6(this.priorityNode_)}static set __childrenNodeConstructor(e){i2=e}static get __childrenNodeConstructor(){return i2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Tr(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Tr.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Tt(e)?this:Nt(e)===".priority"?this.priorityNode_:Tr.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Tr.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Nt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(ve(r!==".priority"||Iu(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Tr.__childrenNodeConstructor.EMPTY_NODE.updateChild(Tn(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+M6(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=h6(this.value_):e+=this.value_,this.lazyHash_=l6(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Tr.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Tr.__childrenNodeConstructor?-1:(ve(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=Tr.VALUE_TYPE_ORDER.indexOf(n),i=Tr.VALUE_TYPE_ORDER.indexOf(r);return ve(s>=0,"Unknown leaf type: "+n),ve(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Tr.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U6,B6;function TK(t){U6=t}function RK(t){B6=t}class PK extends D_{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?gg(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return xt.MIN}maxPost(){return new xt(Yd,new Tr("[PRIORITY-POST]",B6))}makePost(e,n){const r=U6(e);return new xt(n,new Tr("[PRIORITY-POST]",r))}toString(){return".priority"}}const Jn=new PK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK=Math.log(2);class kK{constructor(e){const n=i=>parseInt(Math.log(i)/OK,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const lE=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new Rr(h,d.node,Rr.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),E=t[w],_=n?n(E):E;f(new Rr(_,E.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,Rr.BLACK):(h(w,Rr.BLACK),h(w,Rr.RED))}return u},o=new kK(t.length),a=i(o);return new si(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j1;const Jh={};class Pc{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return ve(Jh&&Jn,"ChildrenNode.ts has not been loaded"),j1=j1||new Pc({".priority":Jh},{".priority":Jn}),j1}get(e){const n=Tp(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof si?n:null}hasIndex(e){return el(this.indexSet_,e.toString())}addIndex(e,n){ve(e!==np,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(xt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=lE(r,e.getCompare()):a=Jh;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Pc(u,l)}addToIndexes(e,n){const r=iE(this.indexes_,(s,i)=>{const o=Tp(this.indexSet_,i);if(ve(o,"Missing index implementation for "+i),s===Jh)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(xt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),lE(a,o.getCompare())}else return Jh;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new xt(e.name,a))),c.insert(e,e.node)}});return new Pc(r,this.indexSet_)}removeFromIndexes(e,n){const r=iE(this.indexes_,s=>{if(s===Jh)return s;{const i=n.get(e.name);return i?s.remove(new xt(e.name,i)):s}});return new Pc(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg;class lt{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&L6(this.priorityNode_),this.children_.isEmpty()&&ve(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xg||(Xg=new lt(new si(yR),null,Pc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xg}updatePriority(e){return this.children_.isEmpty()?this:new lt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xg:n}}getChild(e){const n=Nt(e);return n===null?this:this.getImmediateChild(n).getChild(Tn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ve(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new xt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Xg:this.priorityNode_;return new lt(s,o,i)}}updateChild(e,n){const r=Nt(e);if(r===null)return n;{ve(Nt(e)!==".priority"||Iu(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Tn(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Jn,(o,a)=>{n[o]=a.val(e),r++,i&&lt.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+M6(this.getPriority().val())+":"),this.forEachChild(Jn,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":l6(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new xt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new xt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new xt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,xt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,xt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===f0?-1:0}withIndex(e){if(e===np||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new lt(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===np||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Jn),s=n.getIterator(Jn);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===np?null:this.indexMap_.get(e.toString())}}lt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class DK extends lt{constructor(){super(new si(yR),lt.EMPTY_NODE,Pc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lt.EMPTY_NODE}isEmpty(){return!1}}const f0=new DK;Object.defineProperties(xt,{MIN:{value:new xt(Rp,lt.EMPTY_NODE)},MAX:{value:new xt(Yd,f0)}});$6.__EMPTY_NODE=lt.EMPTY_NODE;Tr.__childrenNodeConstructor=lt;xK(f0);RK(f0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K=!0;function Or(t,e=null){if(t===null)return lt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ve(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Tr(n,Or(e))}if(!(t instanceof Array)&&$K){const n=[];let r=!1;if(fi(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=Or(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new xt(o,c)))}}),n.length===0)return lt.EMPTY_NODE;const i=lE(n,NK,o=>o.name,yR);if(r){const o=lE(n,Jn.getCompare());return new lt(i,Or(e),new Pc({".priority":o},{".priority":Jn}))}else return new lt(i,Or(e),Pc.Default)}else{let n=lt.EMPTY_NODE;return fi(t,(r,s)=>{if(el(t,r)&&r.substring(0,1)!=="."){const i=Or(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(Or(e))}}TK(Or);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK extends D_{constructor(e){super(),this.indexPath_=e,ve(!Tt(e)&&Nt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?gg(e.name,n.name):i}makePost(e,n){const r=Or(e),s=lt.EMPTY_NODE.updateChild(this.indexPath_,r);return new xt(n,s)}maxPost(){const e=lt.EMPTY_NODE.updateChild(this.indexPath_,f0);return new xt(Yd,e)}toString(){return O6(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK extends D_{compare(e,n){const r=e.node.compareTo(n.node);return r===0?gg(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return xt.MIN}maxPost(){return xt.MAX}makePost(e,n){const r=Or(e);return new xt(n,r)}toString(){return".value"}}const UK=new LK;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(t){return{type:"value",snapshotNode:t}}function Pp(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Dy(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function $y(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function BK(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){ve(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Dy(n,a)):ve(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Pp(n,r)):o.trackChildChange($y(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Jn,(s,i)=>{n.hasChild(s)||r.trackChildChange(Dy(s,i))}),n.isLeafNode()||n.forEachChild(Jn,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange($y(s,i,o))}else r.trackChildChange(Pp(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?lt.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e){this.indexedFilter_=new wR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=My.getStartPost_(e),this.endPost_=My.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new xt(n,r))||(r=lt.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=lt.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(lt.EMPTY_NODE);const i=this;return n.forEachChild(Jn,(o,a)=>{i.matches(new xt(o,a))||(s=s.updateImmediateChild(o,lt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jK{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new My(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new xt(n,r))||(r=lt.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=lt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=lt.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(lt.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,lt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;ve(a.numChildren()===this.limit_,"");const c=new xt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange($y(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(Dy(n,d));const g=a.updateImmediateChild(n,lt.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Pp(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(Dy(l.name,l.node)),i.trackChildChange(Pp(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,lt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ve(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ve(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rp}hasEnd(){return this.endSet_}getIndexEndValue(){return ve(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ve(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Yd}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ve(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Jn}copy(){const e=new bR;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function FK(t){return t.loadsAllData()?new wR(t.getIndex()):t.hasLimit()?new jK(t):new My(t)}function o2(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Jn?n="$priority":t.index_===UK?n="$value":t.index_===np?n="$key":(ve(t.index_ instanceof MK,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=br(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=br(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+br(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=br(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+br(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function a2(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Jn&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends T6{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=h0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ve(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=uE.getListenId_(e,r),a={};this.listens_[o]=a;const c=o2(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Tp(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=uE.getListenId_(e,n);delete this.listens_[r]}get(e){const n=o2(e._queryParams),r=e._path.toString(),s=new O_;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+pG(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Ty(a.responseText)}catch{ai("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&ai("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(){this.rootNode_=lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return{value:null,children:new Map}}function F6(t,e,n){if(Tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Nt(e);t.children.has(r)||t.children.set(r,dE());const s=t.children.get(r);e=Tn(e),F6(s,e,n)}}function RI(t,e,n){t.value!==null?n(e,t.value):zK(t,(r,s)=>{const i=new En(e.toString()+"/"+r);RI(s,i,n)})}function zK(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&fi(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=10*1e3,qK=30*1e3,GK=5*60*1e3;class VK{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new HK(e);const r=c2+(qK-c2)*Math.random();Jm(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;fi(e,(s,i)=>{i>0&&el(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),Jm(this.reportStats_.bind(this),Math.floor(Math.random()*2*GK))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qo;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Qo||(Qo={}));function W6(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vR(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ER(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Qo.ACK_USER_WRITE,this.source=W6()}operationForChild(e){if(Tt(this.path)){if(this.affectedTree.value!=null)return ve(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new En(e));return new hE(Vt(),n,this.revert)}}else return ve(Nt(this.path)===e,"operationForChild called for unrelated child."),new hE(Tn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,n){this.source=e,this.path=n,this.type=Qo.LISTEN_COMPLETE}operationForChild(e){return Tt(this.path)?new Ly(this.source,Vt()):new Ly(this.source,Tn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Qo.OVERWRITE}operationForChild(e){return Tt(this.path)?new Qd(this.source,Vt(),this.snap.getImmediateChild(e)):new Qd(this.source,Tn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Qo.MERGE}operationForChild(e){if(Tt(this.path)){const n=this.children.subtree(new En(e));return n.isEmpty()?null:n.value?new Qd(this.source,Vt(),n.value):new Uy(this.source,Vt(),n)}else return ve(Nt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Uy(this.source,Tn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Nt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function YK(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(BK(o.childName,o.snapshotNode))}),em(t,s,"child_removed",e,r,n),em(t,s,"child_added",e,r,n),em(t,s,"child_moved",i,r,n),em(t,s,"child_changed",e,r,n),em(t,s,"value",e,r,n),s}function em(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>ZK(t,a,c)),o.forEach(a=>{const c=QK(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function QK(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function ZK(t,e,n){if(e.childName==null||n.childName==null)throw fg("Should only compare child_ events.");const r=new xt(e.childName,e.snapshotNode),s=new xt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t,e){return{eventCache:t,serverCache:e}}function Xm(t,e,n,r){return $_(new Nu(e,n,r),t.serverCache)}function z6(t,e,n,r){return $_(t.eventCache,new Nu(e,n,r))}function fE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Zd(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F1;const JK=()=>(F1||(F1=new si(LV)),F1);class Dn{constructor(e,n=JK()){this.value=e,this.children=n}static fromObject(e){let n=new Dn(null);return fi(e,(r,s)=>{n=n.set(new En(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Vt(),value:this.value};if(Tt(e))return null;{const r=Nt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(Tn(e),n);return i!=null?{path:vr(new En(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Tt(e))return this;{const n=Nt(e),r=this.children.get(n);return r!==null?r.subtree(Tn(e)):new Dn(null)}}set(e,n){if(Tt(e))return new Dn(n,this.children);{const r=Nt(e),i=(this.children.get(r)||new Dn(null)).set(Tn(e),n),o=this.children.insert(r,i);return new Dn(this.value,o)}}remove(e){if(Tt(e))return this.children.isEmpty()?new Dn(null):new Dn(null,this.children);{const n=Nt(e),r=this.children.get(n);if(r){const s=r.remove(Tn(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Dn(null):new Dn(this.value,i)}else return this}}get(e){if(Tt(e))return this.value;{const n=Nt(e),r=this.children.get(n);return r?r.get(Tn(e)):null}}setTree(e,n){if(Tt(e))return n;{const r=Nt(e),i=(this.children.get(r)||new Dn(null)).setTree(Tn(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Dn(this.value,o)}}fold(e){return this.fold_(Vt(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(vr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Vt(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Tt(e))return null;{const i=Nt(e),o=this.children.get(i);return o?o.findOnPath_(Tn(e),vr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Vt(),n)}foreachOnPath_(e,n,r){if(Tt(e))return this;{this.value&&r(n,this.value);const s=Nt(e),i=this.children.get(s);return i?i.foreachOnPath_(Tn(e),vr(n,s),r):new Dn(null)}}foreach(e){this.foreach_(Vt(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(vr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.writeTree_=e}static empty(){return new Xo(new Dn(null))}}function ey(t,e,n){if(Tt(e))return new Xo(new Dn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=xs(s,e);return i=i.updateChild(o,n),new Xo(t.writeTree_.set(s,i))}else{const s=new Dn(n),i=t.writeTree_.setTree(e,s);return new Xo(i)}}}function l2(t,e,n){let r=t;return fi(n,(s,i)=>{r=ey(r,vr(e,s),i)}),r}function u2(t,e){if(Tt(e))return Xo.empty();{const n=t.writeTree_.setTree(e,new Dn(null));return new Xo(n)}}function PI(t,e){return Ih(t,e)!=null}function Ih(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(xs(n.path,e)):null}function d2(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Jn,(r,s)=>{e.push(new xt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new xt(r,s.value))}),e}function iu(t,e){if(Tt(e))return t;{const n=Ih(t,e);return n!=null?new Xo(new Dn(n)):new Xo(t.writeTree_.subtree(e))}}function OI(t){return t.writeTree_.isEmpty()}function Op(t,e){return H6(Vt(),t.writeTree_,e)}function H6(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(ve(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=H6(vr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(vr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(t,e){return K6(e,t)}function XK(t,e,n,r,s){ve(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=ey(t.visibleWrites,e,n)),t.lastWriteId=r}function eY(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function tY(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);ve(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&nY(a,r.path)?s=!1:Yo(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return rY(t),!0;if(r.snap)t.visibleWrites=u2(t.visibleWrites,r.path);else{const a=r.children;fi(a,c=>{t.visibleWrites=u2(t.visibleWrites,vr(r.path,c))})}return!0}else return!1}function nY(t,e){if(t.snap)return Yo(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Yo(vr(t.path,n),e))return!0;return!1}function rY(t){t.visibleWrites=q6(t.allWrites,sY,Vt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function sY(t){return t.visible}function q6(t,e,n){let r=Xo.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Yo(n,o)?(a=xs(n,o),r=ey(r,a,i.snap)):Yo(o,n)&&(a=xs(o,n),r=ey(r,Vt(),i.snap.getChild(a)));else if(i.children){if(Yo(n,o))a=xs(n,o),r=l2(r,a,i.children);else if(Yo(o,n))if(a=xs(o,n),Tt(a))r=l2(r,Vt(),i.children);else{const c=Tp(i.children,Nt(a));if(c){const l=c.getChild(Tn(a));r=ey(r,Vt(),l)}}}else throw fg("WriteRecord should have .snap or .children")}}return r}function G6(t,e,n,r,s){if(!r&&!s){const i=Ih(t.visibleWrites,e);if(i!=null)return i;{const o=iu(t.visibleWrites,e);if(OI(o))return n;if(n==null&&!PI(o,Vt()))return null;{const a=n||lt.EMPTY_NODE;return Op(o,a)}}}else{const i=iu(t.visibleWrites,e);if(!s&&OI(i))return n;if(!s&&n==null&&!PI(i,Vt()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Yo(l.path,e)||Yo(e,l.path))},a=q6(t.allWrites,o,e),c=n||lt.EMPTY_NODE;return Op(a,c)}}}function iY(t,e,n){let r=lt.EMPTY_NODE;const s=Ih(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Jn,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=iu(t.visibleWrites,e);return n.forEachChild(Jn,(o,a)=>{const c=Op(iu(i,new En(o)),a);r=r.updateImmediateChild(o,c)}),d2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=iu(t.visibleWrites,e);return d2(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function oY(t,e,n,r,s){ve(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=vr(e,n);if(PI(t.visibleWrites,i))return null;{const o=iu(t.visibleWrites,i);return OI(o)?s.getChild(n):Op(o,s.getChild(n))}}function aY(t,e,n,r){const s=vr(e,n),i=Ih(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=iu(t.visibleWrites,s);return Op(o,r.getNode().getImmediateChild(n))}else return null}function cY(t,e){return Ih(t.visibleWrites,e)}function lY(t,e,n,r,s,i,o){let a;const c=iu(t.visibleWrites,e),l=Ih(c,Vt());if(l!=null)a=l;else if(n!=null)a=Op(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function uY(){return{visibleWrites:Xo.empty(),allWrites:[],lastWriteId:-1}}function pE(t,e,n,r){return G6(t.writeTree,t.treePath,e,n,r)}function _R(t,e){return iY(t.writeTree,t.treePath,e)}function h2(t,e,n,r){return oY(t.writeTree,t.treePath,e,n,r)}function gE(t,e){return cY(t.writeTree,vr(t.treePath,e))}function dY(t,e,n,r,s,i){return lY(t.writeTree,t.treePath,e,n,r,s,i)}function CR(t,e,n){return aY(t.writeTree,t.treePath,e,n)}function V6(t,e){return K6(vr(t.treePath,e),t.writeTree)}function K6(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;ve(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ve(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,$y(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,Dy(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Pp(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,$y(r,e.snapshotNode,s.oldSnap));else throw fg("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fY{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Y6=new fY;class SR{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Nu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CR(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Zd(this.viewCache_),i=dY(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pY(t){return{filter:t}}function gY(t,e){ve(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ve(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function mY(t,e,n,r,s){const i=new hY;let o,a;if(n.type===Qo.OVERWRITE){const l=n;l.source.fromUser?o=kI(t,e,l.path,l.snap,r,s,i):(ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Tt(l.path),o=mE(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Qo.MERGE){const l=n;l.source.fromUser?o=wY(t,e,l.path,l.children,r,s,i):(ve(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=DI(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Qo.ACK_USER_WRITE){const l=n;l.revert?o=EY(t,e,l.path,r,s,i):o=bY(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Qo.LISTEN_COMPLETE)o=vY(t,e,n.path,r,i);else throw fg("Unknown operation type: "+n.type);const c=i.getChanges();return yY(e,o,c),{viewCache:o,changes:c}}function yY(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=fE(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(j6(fE(e)))}}function Q6(t,e,n,r,s,i){const o=e.eventCache;if(gE(r,n)!=null)return e;{let a,c;if(Tt(n))if(ve(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Zd(e),u=l instanceof lt?l:lt.EMPTY_NODE,d=_R(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=pE(r,Zd(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Nt(n);if(l===".priority"){ve(Iu(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=h2(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=Tn(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=h2(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=CR(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Xm(e,a,o.isFullyInitialized()||Tt(n),t.filter.filtersNodes())}}function mE(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Tt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Nt(n);if(!c.isCompleteForPath(n)&&Iu(n)>1)return e;const p=Tn(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,Y6,null)}const d=z6(e,l,c.isFullyInitialized()||Tt(n),u.filtersNodes()),h=new SR(s,d,i);return Q6(t,d,n,s,h,a)}function kI(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new SR(s,e,i);if(Tt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Xm(e,l,!0,t.filter.filtersNodes());else{const d=Nt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Xm(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=Tn(n),f=a.getNode().getImmediateChild(d);let p;if(Tt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?P6(h)===".priority"&&g.getChild(k6(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=lt.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Xm(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function f2(t,e){return t.eventCache.isCompleteForChild(e)}function wY(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=vr(n,c);f2(e,Nt(u))&&(a=kI(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=vr(n,c);f2(e,Nt(u))||(a=kI(t,a,u,l,s,i,o))}),a}function p2(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function DI(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Tt(n)?l=r:l=new Dn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=p2(t,f,h);c=mE(t,c,new En(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=p2(t,p,h);c=mE(t,c,new En(d),g,s,i,o,a)}}),c}function bY(t,e,n,r,s,i,o){if(gE(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Tt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return mE(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Tt(n)){let l=new Dn(null);return c.getNode().forEachChild(np,(u,d)=>{l=l.set(new En(u),d)}),DI(t,e,n,l,s,i,a,o)}else return e}else{let l=new Dn(null);return r.foreach((u,d)=>{const h=vr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),DI(t,e,n,l,s,i,a,o)}}function vY(t,e,n,r,s){const i=e.serverCache,o=z6(e,i.getNode(),i.isFullyInitialized()||Tt(n),i.isFiltered());return Q6(t,o,n,r,Y6,s)}function EY(t,e,n,r,s,i){let o;if(gE(r,n)!=null)return e;{const a=new SR(r,e,s),c=e.eventCache.getNode();let l;if(Tt(n)||Nt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=pE(r,Zd(e));else{const d=e.serverCache.getNode();ve(d instanceof lt,"serverChildren would be complete if leaf node"),u=_R(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Nt(n);let d=CR(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,Tn(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,lt.EMPTY_NODE,Tn(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pE(r,Zd(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||gE(r,Vt())!=null,Xm(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Y{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new wR(r.getIndex()),i=FK(r);this.processor_=pY(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(lt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(lt.EMPTY_NODE,a.getNode(),null),u=new Nu(c,o.isFullyInitialized(),s.filtersNodes()),d=new Nu(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=$_(d,u),this.eventGenerator_=new KK(this.query_)}get query(){return this.query_}}function CY(t){return t.viewCache_.serverCache.getNode()}function SY(t){return fE(t.viewCache_)}function AY(t,e){const n=Zd(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Tt(e)&&!n.getImmediateChild(Nt(e)).isEmpty())?n.getChild(e):null}function g2(t){return t.eventRegistrations_.length===0}function IY(t,e){t.eventRegistrations_.push(e)}function m2(t,e,n){const r=[];if(n){ve(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function y2(t,e,n,r){e.type===Qo.MERGE&&e.source.queryId!==null&&(ve(Zd(t.viewCache_),"We should always have a full cache before handling merges"),ve(fE(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=mY(t.processor_,s,e,n,r);return gY(t.processor_,i.viewCache),ve(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,Z6(t,i.changes,i.viewCache.eventCache.getNode(),null)}function NY(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Jn,(i,o)=>{r.push(Pp(i,o))}),n.isFullyInitialized()&&r.push(j6(n.getNode())),Z6(t,r,n.getNode(),e)}function Z6(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return YK(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yE;class J6{constructor(){this.views=new Map}}function xY(t){ve(!yE,"__referenceConstructor has already been defined"),yE=t}function TY(){return ve(yE,"Reference.ts has not been loaded"),yE}function RY(t){return t.views.size===0}function AR(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return ve(i!=null,"SyncTree gave us an op for an invalid query."),y2(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(y2(o,e,n,r));return i}}function X6(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=pE(n,s?r:null),c=!1;a?c=!0:r instanceof lt?(a=_R(n,r),c=!1):(a=lt.EMPTY_NODE,c=!1);const l=$_(new Nu(a,c,!1),new Nu(r,s,!1));return new _Y(e,l)}return o}function PY(t,e,n,r,s,i){const o=X6(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),IY(o,n),NY(o,n)}function OY(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=xu(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(m2(l,n,r)),g2(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(m2(c,n,r)),g2(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!xu(t)&&i.push(new(TY())(e._repo,e._path)),{removed:i,events:o}}function e8(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function ou(t,e){let n=null;for(const r of t.views.values())n=n||AY(r,e);return n}function t8(t,e){if(e._queryParams.loadsAllData())return L_(t);{const r=e._queryIdentifier;return t.views.get(r)}}function n8(t,e){return t8(t,e)!=null}function xu(t){return L_(t)!=null}function L_(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wE;function kY(t){ve(!wE,"__referenceConstructor has already been defined"),wE=t}function DY(){return ve(wE,"Reference.ts has not been loaded"),wE}let $Y=1;class w2{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Dn(null),this.pendingWriteTree_=uY(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function r8(t,e,n,r,s){return XK(t.pendingWriteTree_,e,n,r,s),s?g0(t,new Qd(W6(),e,n)):[]}function wd(t,e,n=!1){const r=eY(t.pendingWriteTree_,e);if(tY(t.pendingWriteTree_,e)){let i=new Dn(null);return r.snap!=null?i=i.set(Vt(),!0):fi(r.children,o=>{i=i.set(new En(o),!0)}),g0(t,new hE(r.path,i,n))}else return[]}function p0(t,e,n){return g0(t,new Qd(vR(),e,n))}function MY(t,e,n){const r=Dn.fromObject(n);return g0(t,new Uy(vR(),e,r))}function LY(t,e){return g0(t,new Ly(vR(),e))}function UY(t,e,n){const r=NR(t,n);if(r){const s=xR(r),i=s.path,o=s.queryId,a=xs(i,e),c=new Ly(ER(o),a);return TR(t,i,c)}else return[]}function bE(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||n8(o,e))){const c=OY(o,e,n,r);RY(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>xu(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=FY(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=a8(t,g);t.listenProvider_.startListening(ty(w),By(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(ty(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(U_(h));t.listenProvider_.stopListening(ty(h),f)}))}WY(t,l)}return a}function s8(t,e,n,r){const s=NR(t,r);if(s!=null){const i=xR(s),o=i.path,a=i.queryId,c=xs(o,e),l=new Qd(ER(a),c,n);return TR(t,o,l)}else return[]}function BY(t,e,n,r){const s=NR(t,r);if(s){const i=xR(s),o=i.path,a=i.queryId,c=xs(o,e),l=Dn.fromObject(n),u=new Uy(ER(a),c,l);return TR(t,o,u)}else return[]}function $I(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=xs(h,s);i=i||ou(f,p),o=o||xu(f)});let a=t.syncPointTree_.get(s);a?(o=o||xu(a),i=i||ou(a,Vt())):(a=new J6,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=lt.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=ou(p,Vt());g&&(i=i.updateImmediateChild(f,g))}));const l=n8(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=U_(e);ve(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=zY();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=M_(t.pendingWriteTree_,s);let d=PY(a,e,n,u,i,c);if(!l&&!o&&!r){const h=t8(a,e);d=d.concat(HY(t,e,h))}return d}function IR(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=xs(o,e),l=ou(a,c);if(l)return l});return G6(s,e,i,n,!0)}function jY(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=xs(l,n);r=r||ou(u,d)});let s=t.syncPointTree_.get(n);s?r=r||ou(s,Vt()):(s=new J6,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Nu(r,!0,!1):null,a=M_(t.pendingWriteTree_,e._path),c=X6(s,e,a,i?o.getNode():lt.EMPTY_NODE,i);return SY(c)}function g0(t,e){return i8(e,t.syncPointTree_,null,M_(t.pendingWriteTree_,Vt()))}function i8(t,e,n,r){if(Tt(t.path))return o8(t,e,n,r);{const s=e.get(Vt());n==null&&s!=null&&(n=ou(s,Vt()));let i=[];const o=Nt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=V6(r,o);i=i.concat(i8(a,c,l,u))}return s&&(i=i.concat(AR(s,t,r,n))),i}}function o8(t,e,n,r){const s=e.get(Vt());n==null&&s!=null&&(n=ou(s,Vt()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=V6(r,o),u=t.operationForChild(o);u&&(i=i.concat(o8(u,a,c,l)))}),s&&(i=i.concat(AR(s,t,r,n))),i}function a8(t,e){const n=e.query,r=By(t,n);return{hashFn:()=>(CY(e)||lt.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?UY(t,n._path,r):LY(t,n._path);{const i=jV(s,n);return bE(t,n,null,i)}}}}function By(t,e){const n=U_(e);return t.queryToTagMap.get(n)}function U_(t){return t._path.toString()+"$"+t._queryIdentifier}function NR(t,e){return t.tagToQueryMap.get(e)}function xR(t){const e=t.indexOf("$");return ve(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new En(t.substr(0,e))}}function TR(t,e,n){const r=t.syncPointTree_.get(e);ve(r,"Missing sync point for query tag that we're tracking");const s=M_(t.pendingWriteTree_,e);return AR(r,n,s,null)}function FY(t){return t.fold((e,n,r)=>{if(n&&xu(n))return[L_(n)];{let s=[];return n&&(s=e8(n)),fi(r,(i,o)=>{s=s.concat(o)}),s}})}function ty(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(DY())(t._repo,t._path):t}function WY(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=U_(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function zY(){return $Y++}function HY(t,e,n){const r=e._path,s=By(t,e),i=a8(t,n),o=t.listenProvider_.startListening(ty(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)ve(!xu(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Tt(l)&&u&&xu(u))return[L_(u).query];{let h=[];return u&&(h=h.concat(e8(u).map(f=>f.query))),fi(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(ty(u),By(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new RR(n)}node(){return this.node_}}class PR{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=vr(this.path_,e);return new PR(this.syncTree_,n)}node(){return IR(this.syncTree_,this.path_)}}const qY=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},b2=function(t,e,n){if(!t||typeof t!="object")return t;if(ve(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return GY(t[".sv"],e,n);if(typeof t[".sv"]=="object")return VY(t[".sv"],e);ve(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},GY=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ve(!1,"Unexpected server value: "+t)}},VY=function(t,e,n){t.hasOwnProperty("increment")||ve(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&ve(!1,"Unexpected increment value: "+r);const s=e.node();if(ve(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},KY=function(t,e,n,r){return OR(e,new PR(n,t),r)},c8=function(t,e,n){return OR(t,new RR(e),n)};function OR(t,e,n){const r=t.getPriority().val(),s=b2(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=b2(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new Tr(a,Or(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new Tr(s))),o.forEachChild(Jn,(a,c)=>{const l=OR(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function DR(t,e){let n=e instanceof En?e:new En(e),r=t,s=Nt(n);for(;s!==null;){const i=Tp(r.node.children,s)||{children:{},childCount:0};r=new kR(s,r,i),n=Tn(n),s=Nt(n)}return r}function yg(t){return t.node.value}function l8(t,e){t.node.value=e,MI(t)}function u8(t){return t.node.childCount>0}function YY(t){return yg(t)===void 0&&!u8(t)}function B_(t,e){fi(t.node.children,(n,r)=>{e(new kR(n,t,r))})}function d8(t,e,n,r){n&&e(t),B_(t,s=>{d8(s,e,!0)})}function QY(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function m0(t){return new En(t.parent===null?t.name:m0(t.parent)+"/"+t.name)}function MI(t){t.parent!==null&&ZY(t.parent,t.name,t)}function ZY(t,e,n){const r=YY(n),s=el(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,MI(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,MI(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JY=/[\[\].#$\/\u0000-\u001F\u007F]/,XY=/[\[\].#$\u0000-\u001F\u007F]/,W1=10*1024*1024,h8=function(t){return typeof t=="string"&&t.length!==0&&!JY.test(t)},f8=function(t){return typeof t=="string"&&t.length!==0&&!XY.test(t)},eQ=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),f8(t)},tQ=function(t,e,n,r){$R(lR(t,"value"),e,n)},$R=function(t,e,n){const r=n instanceof En?new bK(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+sd(r));if(typeof e=="function")throw new Error(t+"contains a function "+sd(r)+" with contents = "+e.toString());if(u6(e))throw new Error(t+"contains "+e.toString()+" "+sd(r));if(typeof e=="string"&&e.length>W1/3&&k_(e)>W1)throw new Error(t+"contains a string greater than "+W1+" utf8 bytes "+sd(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(fi(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!h8(o)))throw new Error(t+" contains an invalid key ("+o+") "+sd(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vK(r,o),$R(t,a,r),EK(r)}),s&&i)throw new Error(t+' contains ".value" child '+sd(r)+" in addition to actual children.")}},p8=function(t,e,n,r){if(!f8(n))throw new Error(lR(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},nQ=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),p8(t,e,n)},g8=function(t,e){if(Nt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},rQ=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!h8(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!eQ(n))throw new Error(lR(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function MR(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!gR(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function m8(t,e,n){MR(t,n),y8(t,r=>gR(r,e))}function Va(t,e,n){MR(t,n),y8(t,r=>Yo(r,e)||Yo(e,r))}function y8(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(iQ(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function iQ(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Zm&&fs("event: "+n.toString()),mg(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oQ="repo_interrupt",aQ=25;class cQ{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new sQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dE(),this.transactionQueueTree_=new kR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lQ(t,e,n){if(t.stats_=fR(t.repoInfo_),t.forceRestClient_||HV())t.server_=new uE(t.repoInfo_,(r,s,i,o)=>{v2(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>E2(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{br(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Mc(t.repoInfo_,e,(r,s,i,o)=>{v2(t,r,s,i,o)},r=>{E2(t,r)},r=>{dQ(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=YV(t.repoInfo_,()=>new VK(t.stats_,t.server_)),t.infoData_=new WK,t.infoSyncTree_=new w2({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=p0(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),UR(t,"connected",!1),t.serverSyncTree_=new w2({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Va(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function uQ(t){const n=t.infoData_.getNode(new En(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function LR(t){return qY({timestamp:uQ(t)})}function v2(t,e,n,r,s){t.dataUpdateCount++;const i=new En(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=iE(n,l=>Or(l));o=BY(t.serverSyncTree_,i,c,s)}else{const c=Or(n);o=s8(t.serverSyncTree_,i,c,s)}else if(r){const c=iE(n,l=>Or(l));o=MY(t.serverSyncTree_,i,c)}else{const c=Or(n);o=p0(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=F_(t,i)),Va(t.eventQueue_,a,o)}function E2(t,e){UR(t,"connected",e),e===!1&&pQ(t)}function dQ(t,e){fi(e,(n,r)=>{UR(t,n,r)})}function UR(t,e,n){const r=new En("/.info/"+e),s=Or(n);t.infoData_.updateSnapshot(r,s);const i=p0(t.infoSyncTree_,r,s);Va(t.eventQueue_,r,i)}function w8(t){return t.nextWriteId_++}function hQ(t,e,n){const r=jY(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=Or(s).withIndex(e._queryParams.getIndex());$I(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=p0(t.serverSyncTree_,e._path,i);else{const a=By(t.serverSyncTree_,e);o=s8(t.serverSyncTree_,e._path,i,a)}return Va(t.eventQueue_,e._path,o),bE(t.serverSyncTree_,e,n,null,!0),i},s=>(j_(t,"get for query "+br(e)+" failed: "+s),Promise.reject(new Error(s))))}function fQ(t,e,n,r,s){j_(t,"set",{path:e.toString(),value:n,priority:r});const i=LR(t),o=Or(n,r),a=IR(t.serverSyncTree_,e),c=c8(o,a,i),l=w8(t),u=r8(t.serverSyncTree_,e,c,l,!0);MR(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||ai("set at "+e+" failed: "+h);const g=wd(t.serverSyncTree_,l,!p);Va(t.eventQueue_,e,g),wQ(t,s,h,f)});const d=C8(t,e);F_(t,d),Va(t.eventQueue_,d,[])}function pQ(t){j_(t,"onDisconnectEvents");const e=LR(t),n=dE();RI(t.onDisconnect_,Vt(),(s,i)=>{const o=KY(s,i,t.serverSyncTree_,e);F6(n,s,o)});let r=[];RI(n,Vt(),(s,i)=>{r=r.concat(p0(t.serverSyncTree_,s,i));const o=C8(t,s);F_(t,o)}),t.onDisconnect_=dE(),Va(t.eventQueue_,Vt(),r)}function gQ(t,e,n){let r;Nt(e._path)===".info"?r=$I(t.infoSyncTree_,e,n):r=$I(t.serverSyncTree_,e,n),m8(t.eventQueue_,e._path,r)}function mQ(t,e,n){let r;Nt(e._path)===".info"?r=bE(t.infoSyncTree_,e,n):r=bE(t.serverSyncTree_,e,n),m8(t.eventQueue_,e._path,r)}function yQ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(oQ)}function j_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),fs(n,...e)}function wQ(t,e,n,r){e&&mg(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function b8(t,e,n){return IR(t.serverSyncTree_,e,n)||lt.EMPTY_NODE}function BR(t,e=t.transactionQueueTree_){if(e||W_(t,e),yg(e)){const n=E8(t,e);ve(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&bQ(t,m0(e),n)}else u8(e)&&B_(e,n=>{BR(t,n)})}function bQ(t,e,n){const r=n.map(l=>l.currentWriteId),s=b8(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];ve(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=xs(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{j_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(wd(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();W_(t,DR(t.transactionQueueTree_,e)),BR(t,t.transactionQueueTree_),Va(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)mg(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ai("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}F_(t,e)}},o)}function F_(t,e){const n=v8(t,e),r=m0(n),s=E8(t,n);return vQ(t,s,r),r}function vQ(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=xs(n,c.path);let u=!1,d;if(ve(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(wd(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=aQ)u=!0,d="maxretry",s=s.concat(wd(t.serverSyncTree_,c.currentWriteId,!0));else{const h=b8(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){$R("transaction failed: Data returned ",f,c.path);let p=Or(f);typeof f=="object"&&f!=null&&el(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=LR(t),b=c8(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=w8(t),o.splice(o.indexOf(w),1),s=s.concat(r8(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(wd(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(wd(t.serverSyncTree_,c.currentWriteId,!0))}Va(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}W_(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)mg(r[a]);BR(t,t.transactionQueueTree_)}function v8(t,e){let n,r=t.transactionQueueTree_;for(n=Nt(e);n!==null&&yg(r)===void 0;)r=DR(r,n),e=Tn(e),n=Nt(e);return r}function E8(t,e){const n=[];return _8(t,e,n),n.sort((r,s)=>r.order-s.order),n}function _8(t,e,n){const r=yg(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);B_(e,s=>{_8(t,s,n)})}function W_(t,e){const n=yg(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,l8(e,n.length>0?n:void 0)}B_(e,r=>{W_(t,r)})}function C8(t,e){const n=m0(v8(t,e)),r=DR(t.transactionQueueTree_,e);return QY(r,s=>{z1(t,s)}),z1(t,r),d8(r,s=>{z1(t,s)}),n}function z1(t,e){const n=yg(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ve(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(ve(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(wd(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?l8(e,void 0):n.length=i+1,Va(t.eventQueue_,m0(e),s);for(let o=0;o<r.length;o++)mg(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EQ(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function _Q(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ai(`Invalid query segment '${n}' in query '${t}'`)}return e}const _2=function(t,e){const n=CQ(t),r=n.namespace;n.domain==="firebase.com"&&qc(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&qc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||$V();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new _6(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new En(n.pathString)}},CQ=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=EQ(t.substring(u,d)));const h=_Q(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+br(this.snapshot.exportVal())}}class AQ{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S8{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ve(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Tt(this._path)?null:P6(this._path)}get ref(){return new tl(this._repo,this._path)}get _queryIdentifier(){const e=a2(this._queryParams),n=dR(e);return n==="{}"?"default":n}get _queryObject(){return a2(this._queryParams)}isEqual(e){if(e=pg(e),!(e instanceof jR))return!1;const n=this._repo===e._repo,r=gR(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+wK(this._path)}}class tl extends jR{constructor(e,n){super(e,n,new bR,!1)}get parent(){const e=k6(this._path);return e===null?null:new tl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class jy{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new En(e),r=LI(this.ref,e);return new jy(this._node.getChild(n),r,Jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new jy(s,LI(this.ref,r),Jn)))}hasChild(e){const n=new En(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function to(t,e){return t=pg(t),t._checkNotDeleted("ref"),e!==void 0?LI(t._root,e):t._root}function LI(t,e){return t=pg(t),Nt(t._path)===null?nQ("child","path",e):p8("child","path",e),new tl(t._repo,vr(t._path,e))}function IQ(t){return g8("remove",t._path),ny(t,null)}function ny(t,e){t=pg(t),g8("set",t._path),tQ("set",e,t._path);const n=new O_;return fQ(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function dd(t){t=pg(t);const e=new S8(()=>{}),n=new z_(e);return hQ(t._repo,t,n).then(r=>new jy(r,new tl(t._repo,t._path),t._queryParams.getIndex()))}class z_{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new SQ("value",this,new jy(e.snapshotNode,new tl(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new AQ(this,e,n):null}matches(e){return e instanceof z_?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function NQ(t,e,n,r,s){const i=new S8(n,void 0),o=new z_(i);return gQ(t._repo,t,o),()=>mQ(t._repo,t,o)}function C2(t,e,n,r){return NQ(t,"value",e)}xY(tl);kY(tl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xQ="FIREBASE_DATABASE_EMULATOR_HOST",UI={};let TQ=!1;function RQ(t,e,n,r){t.repoInfo_=new _6(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function PQ(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||qc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=_2(i,s),a=o.repoInfo,c;typeof process<"u"&&zk&&(c=zk[xQ]),c?(i=`http://${c}?ns=${a.namespace}`,o=_2(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new GV(t.name,t.options,e);rQ("Invalid Firebase Database URL",o),Tt(o.path)||qc("Database URL must point to the root of a Firebase Database (not including a child path).");const u=kQ(a,t,l,new qV(t.name,n));return new DQ(u,t)}function OQ(t,e){const n=UI[e];(!n||n[t.key]!==t)&&qc(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yQ(t),delete n[t.key]}function kQ(t,e,n,r){let s=UI[e.name];s||(s={},UI[e.name]=s);let i=s[t.toURLString()];return i&&qc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new cQ(t,TQ,n,r),s[t.toURLString()]=i,i}class DQ{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(lQ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new tl(this._repo,Vt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(OQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qc("Cannot call "+e+" on a deleted database.")}}function $Q(t=s6(),e){const n=fV(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=nG("database");r&&MQ(n,...r)}return n}function MQ(t,e,n,r={}){t=pg(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&qc("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&qc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new _v(_v.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:rG(r.mockUserToken,t.app.options.projectId);i=new _v(o)}RQ(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(t){TV(mV),oE(new Ry("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return PQ(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),ep(Hk,qk,t),ep(Hk,qk,"esm2017")}Mc.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Mc.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};LQ();const UQ={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},BQ=yV().length?s6():r6(UQ),vE=$Q(BQ);var BI={},A8={exports:{}},Fi={},I8={exports:{}},N8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,k){var j=R.length;R.push(k);e:for(;0<j;){var H=j-1>>>1,X=R[H];if(0<s(X,k))R[H]=k,R[j]=X,j=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var k=R[0],j=R.pop();if(j!==k){R[0]=j;e:for(var H=0,X=R.length,se=X>>>1;H<se;){var ne=2*(H+1)-1,ae=R[ne],ye=ne+1,Z=R[ye];if(0>s(ae,j))ye<X&&0>s(Z,ae)?(R[H]=Z,R[ye]=j,H=ye):(R[H]=ae,R[ne]=j,H=ne);else if(ye<X&&0>s(Z,j))R[H]=Z,R[ye]=j,H=ye;else break e}}return k}function s(R,k){var j=R.sortIndex-k.sortIndex;return j!==0?j:R.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(R){for(var k=n(l);k!==null;){if(k.callback===null)r(l);else if(k.startTime<=R)r(l),k.sortIndex=k.expirationTime,e(c,k);else break;k=n(l)}}function _(R){if(g=!1,E(R),!p)if(n(c)!==null)p=!0,x(C);else{var k=n(l);k!==null&&$(_,k.startTime-R)}}function C(R,k){p=!1,g&&(g=!1,y(N),N=-1),f=!0;var j=h;try{for(E(k),d=n(c);d!==null&&(!(d.expirationTime>k)||R&&!P());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var X=H(d.expirationTime<=k);k=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(c)&&r(c),E(k)}else r(c);d=n(c)}if(d!==null)var se=!0;else{var ne=n(l);ne!==null&&$(_,ne.startTime-k),se=!1}return se}finally{d=null,h=j,f=!1}}var I=!1,A=null,N=-1,S=5,D=-1;function P(){return!(t.unstable_now()-D<S)}function B(){if(A!==null){var R=t.unstable_now();D=R;var k=!0;try{k=A(!0,R)}finally{k?q():(I=!1,A=null)}}else I=!1}var q;if(typeof b=="function")q=function(){b(B)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,T=L.port2;L.port1.onmessage=B,q=function(){T.postMessage(null)}}else q=function(){w(B,0)};function x(R){A=R,I||(I=!0,q())}function $(R,k){N=w(function(){R(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,x(C))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var k=3;break;default:k=h}var j=h;h=k;try{return R()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,k){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var j=h;h=R;try{return k()}finally{h=j}},t.unstable_scheduleCallback=function(R,k,j){var H=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?H+j:H):j=H,R){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,R={id:u++,callback:k,priorityLevel:R,startTime:j,expirationTime:X,sortIndex:-1},j>H?(R.sortIndex=j,e(l,R),n(c)===null&&R===n(l)&&(g?(y(N),N=-1):g=!0,$(_,j-H))):(R.sortIndex=X,e(c,R),p||f||(p=!0,x(C))),R},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(R){var k=h;return function(){var j=h;h=k;try{return R.apply(this,arguments)}finally{h=j}}}})(N8);I8.exports=N8;var jQ=I8.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FQ=O,Ui=jQ;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x8=new Set,Fy={};function Nh(t,e){kp(t,e),kp(t+"Capture",e)}function kp(t,e){for(Fy[t]=e,t=0;t<e.length;t++)x8.add(e[t])}var Gc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jI=Object.prototype.hasOwnProperty,WQ=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S2={},A2={};function zQ(t){return jI.call(A2,t)?!0:jI.call(S2,t)?!1:WQ.test(t)?A2[t]=!0:(S2[t]=!0,!1)}function HQ(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function qQ(t,e,n,r){if(e===null||typeof e>"u"||HQ(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $s(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xr[t]=new $s(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xr[e]=new $s(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xr[t]=new $s(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xr[t]=new $s(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xr[t]=new $s(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xr[t]=new $s(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xr[t]=new $s(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xr[t]=new $s(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xr[t]=new $s(t,5,!1,t.toLowerCase(),null,!1,!1)});var FR=/[\-:]([a-z])/g;function WR(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(FR,WR);Xr[e]=new $s(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(FR,WR);Xr[e]=new $s(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(FR,WR);Xr[e]=new $s(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xr[t]=new $s(t,1,!1,t.toLowerCase(),null,!1,!1)});Xr.xlinkHref=new $s("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xr[t]=new $s(t,1,!1,t.toLowerCase(),null,!0,!0)});function zR(t,e,n,r){var s=Xr.hasOwnProperty(e)?Xr[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qQ(e,n,s,r)&&(n=null),r||s===null?zQ(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var nl=FQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pb=Symbol.for("react.element"),Lf=Symbol.for("react.portal"),Uf=Symbol.for("react.fragment"),HR=Symbol.for("react.strict_mode"),FI=Symbol.for("react.profiler"),T8=Symbol.for("react.provider"),R8=Symbol.for("react.context"),qR=Symbol.for("react.forward_ref"),WI=Symbol.for("react.suspense"),zI=Symbol.for("react.suspense_list"),GR=Symbol.for("react.memo"),Nl=Symbol.for("react.lazy"),P8=Symbol.for("react.offscreen"),I2=Symbol.iterator;function tm(t){return t===null||typeof t!="object"?null:(t=I2&&t[I2]||t["@@iterator"],typeof t=="function"?t:null)}var Gn=Object.assign,H1;function Dm(t){if(H1===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);H1=e&&e[1]||""}return`
`+H1+t}var q1=!1;function G1(t,e){if(!t||q1)return"";q1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{q1=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Dm(t):""}function GQ(t){switch(t.tag){case 5:return Dm(t.type);case 16:return Dm("Lazy");case 13:return Dm("Suspense");case 19:return Dm("SuspenseList");case 0:case 2:case 15:return t=G1(t.type,!1),t;case 11:return t=G1(t.type.render,!1),t;case 1:return t=G1(t.type,!0),t;default:return""}}function HI(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Uf:return"Fragment";case Lf:return"Portal";case FI:return"Profiler";case HR:return"StrictMode";case WI:return"Suspense";case zI:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R8:return(t.displayName||"Context")+".Consumer";case T8:return(t._context.displayName||"Context")+".Provider";case qR:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case GR:return e=t.displayName||null,e!==null?e:HI(t.type)||"Memo";case Nl:e=t._payload,t=t._init;try{return HI(t(e))}catch{}}return null}function VQ(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return HI(e);case 8:return e===HR?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Tu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O8(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KQ(t){var e=O8(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gb(t){t._valueTracker||(t._valueTracker=KQ(t))}function k8(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O8(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function EE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qI(t,e){var n=e.checked;return Gn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function N2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Tu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function D8(t,e){e=e.checked,e!=null&&zR(t,"checked",e,!1)}function GI(t,e){D8(t,e);var n=Tu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?VI(t,e.type,n):e.hasOwnProperty("defaultValue")&&VI(t,e.type,Tu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function x2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function VI(t,e,n){(e!=="number"||EE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $m=Array.isArray;function rp(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Tu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function KI(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Gn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function T2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if($m(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Tu(n)}}function $8(t,e){var n=Tu(e.value),r=Tu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function R2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function M8(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YI(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?M8(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mb,L8=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ry={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YQ=["Webkit","ms","Moz","O"];Object.keys(ry).forEach(function(t){YQ.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ry[e]=ry[t]})});function U8(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ry.hasOwnProperty(t)&&ry[t]?(""+e).trim():e+"px"}function B8(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U8(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var QQ=Gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QI(t,e){if(e){if(QQ[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function ZI(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JI=null;function VR(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var XI=null,sp=null,ip=null;function P2(t){if(t=b0(t)){if(typeof XI!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=K_(e),XI(t.stateNode,t.type,e))}}function j8(t){sp?ip?ip.push(t):ip=[t]:sp=t}function F8(){if(sp){var t=sp,e=ip;if(ip=sp=null,P2(t),e)for(t=0;t<e.length;t++)P2(e[t])}}function W8(t,e){return t(e)}function z8(){}var V1=!1;function H8(t,e,n){if(V1)return t(e,n);V1=!0;try{return W8(t,e,n)}finally{V1=!1,(sp!==null||ip!==null)&&(z8(),F8())}}function zy(t,e){var n=t.stateNode;if(n===null)return null;var r=K_(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var eN=!1;if(Gc)try{var nm={};Object.defineProperty(nm,"passive",{get:function(){eN=!0}}),window.addEventListener("test",nm,nm),window.removeEventListener("test",nm,nm)}catch{eN=!1}function ZQ(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var sy=!1,_E=null,CE=!1,tN=null,JQ={onError:function(t){sy=!0,_E=t}};function XQ(t,e,n,r,s,i,o,a,c){sy=!1,_E=null,ZQ.apply(JQ,arguments)}function eZ(t,e,n,r,s,i,o,a,c){if(XQ.apply(this,arguments),sy){if(sy){var l=_E;sy=!1,_E=null}else throw Error(ge(198));CE||(CE=!0,tN=l)}}function xh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function q8(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function O2(t){if(xh(t)!==t)throw Error(ge(188))}function tZ(t){var e=t.alternate;if(!e){if(e=xh(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return O2(s),t;if(i===r)return O2(s),e;i=i.sibling}throw Error(ge(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function G8(t){return t=tZ(t),t!==null?V8(t):null}function V8(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=V8(t);if(e!==null)return e;t=t.sibling}return null}var K8=Ui.unstable_scheduleCallback,k2=Ui.unstable_cancelCallback,nZ=Ui.unstable_shouldYield,rZ=Ui.unstable_requestPaint,nr=Ui.unstable_now,sZ=Ui.unstable_getCurrentPriorityLevel,KR=Ui.unstable_ImmediatePriority,Y8=Ui.unstable_UserBlockingPriority,SE=Ui.unstable_NormalPriority,iZ=Ui.unstable_LowPriority,Q8=Ui.unstable_IdlePriority,H_=null,ja=null;function oZ(t){if(ja&&typeof ja.onCommitFiberRoot=="function")try{ja.onCommitFiberRoot(H_,t,void 0,(t.current.flags&128)===128)}catch{}}var ea=Math.clz32?Math.clz32:lZ,aZ=Math.log,cZ=Math.LN2;function lZ(t){return t>>>=0,t===0?32:31-(aZ(t)/cZ|0)|0}var yb=64,wb=4194304;function Mm(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function AE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Mm(a):(i&=o,i!==0&&(r=Mm(i)))}else o=n&~s,o!==0?r=Mm(o):i!==0&&(r=Mm(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ea(e),s=1<<n,r|=t[n],e&=~s;return r}function uZ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dZ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ea(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=uZ(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function nN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z8(){var t=yb;return yb<<=1,!(yb&4194240)&&(yb=64),t}function K1(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function y0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ea(e),t[e]=n}function hZ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ea(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function YR(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ea(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ln=0;function J8(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X8,QR,eB,tB,nB,rN=!1,bb=[],au=null,cu=null,lu=null,Hy=new Map,qy=new Map,kl=[],fZ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D2(t,e){switch(t){case"focusin":case"focusout":au=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":lu=null;break;case"pointerover":case"pointerout":Hy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qy.delete(e.pointerId)}}function rm(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=b0(e),e!==null&&QR(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pZ(t,e,n,r,s){switch(e){case"focusin":return au=rm(au,t,e,n,r,s),!0;case"dragenter":return cu=rm(cu,t,e,n,r,s),!0;case"mouseover":return lu=rm(lu,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Hy.set(i,rm(Hy.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,qy.set(i,rm(qy.get(i)||null,t,e,n,r,s)),!0}return!1}function rB(t){var e=bd(t.target);if(e!==null){var n=xh(e);if(n!==null){if(e=n.tag,e===13){if(e=q8(n),e!==null){t.blockedOn=e,nB(t.priority,function(){eB(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cv(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sN(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);JI=r,n.target.dispatchEvent(r),JI=null}else return e=b0(n),e!==null&&QR(e),t.blockedOn=n,!1;e.shift()}return!0}function $2(t,e,n){Cv(t)&&n.delete(e)}function gZ(){rN=!1,au!==null&&Cv(au)&&(au=null),cu!==null&&Cv(cu)&&(cu=null),lu!==null&&Cv(lu)&&(lu=null),Hy.forEach($2),qy.forEach($2)}function sm(t,e){t.blockedOn===e&&(t.blockedOn=null,rN||(rN=!0,Ui.unstable_scheduleCallback(Ui.unstable_NormalPriority,gZ)))}function Gy(t){function e(s){return sm(s,t)}if(0<bb.length){sm(bb[0],t);for(var n=1;n<bb.length;n++){var r=bb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(au!==null&&sm(au,t),cu!==null&&sm(cu,t),lu!==null&&sm(lu,t),Hy.forEach(e),qy.forEach(e),n=0;n<kl.length;n++)r=kl[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kl.length&&(n=kl[0],n.blockedOn===null);)rB(n),n.blockedOn===null&&kl.shift()}var op=nl.ReactCurrentBatchConfig,IE=!0;function mZ(t,e,n,r){var s=ln,i=op.transition;op.transition=null;try{ln=1,ZR(t,e,n,r)}finally{ln=s,op.transition=i}}function yZ(t,e,n,r){var s=ln,i=op.transition;op.transition=null;try{ln=4,ZR(t,e,n,r)}finally{ln=s,op.transition=i}}function ZR(t,e,n,r){if(IE){var s=sN(t,e,n,r);if(s===null)sS(t,e,r,NE,n),D2(t,r);else if(pZ(s,t,e,n,r))r.stopPropagation();else if(D2(t,r),e&4&&-1<fZ.indexOf(t)){for(;s!==null;){var i=b0(s);if(i!==null&&X8(i),i=sN(t,e,n,r),i===null&&sS(t,e,r,NE,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else sS(t,e,r,null,n)}}var NE=null;function sN(t,e,n,r){if(NE=null,t=VR(r),t=bd(t),t!==null)if(e=xh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=q8(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return NE=t,null}function sB(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sZ()){case KR:return 1;case Y8:return 4;case SE:case iZ:return 16;case Q8:return 536870912;default:return 16}default:return 16}}var Kl=null,JR=null,Sv=null;function iB(){if(Sv)return Sv;var t,e=JR,n=e.length,r,s="value"in Kl?Kl.value:Kl.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Sv=s.slice(t,1<r?1-r:void 0)}function Av(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vb(){return!0}function M2(){return!1}function Wi(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vb:M2,this.isPropagationStopped=M2,this}return Gn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vb)},persist:function(){},isPersistent:vb}),e}var wg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XR=Wi(wg),w0=Gn({},wg,{view:0,detail:0}),wZ=Wi(w0),Y1,Q1,im,q_=Gn({},w0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:eP,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==im&&(im&&t.type==="mousemove"?(Y1=t.screenX-im.screenX,Q1=t.screenY-im.screenY):Q1=Y1=0,im=t),Y1)},movementY:function(t){return"movementY"in t?t.movementY:Q1}}),L2=Wi(q_),bZ=Gn({},q_,{dataTransfer:0}),vZ=Wi(bZ),EZ=Gn({},w0,{relatedTarget:0}),Z1=Wi(EZ),_Z=Gn({},wg,{animationName:0,elapsedTime:0,pseudoElement:0}),CZ=Wi(_Z),SZ=Gn({},wg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AZ=Wi(SZ),IZ=Gn({},wg,{data:0}),U2=Wi(IZ),NZ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xZ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TZ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RZ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TZ[t])?!!e[t]:!1}function eP(){return RZ}var PZ=Gn({},w0,{key:function(t){if(t.key){var e=NZ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Av(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xZ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:eP,charCode:function(t){return t.type==="keypress"?Av(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Av(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),OZ=Wi(PZ),kZ=Gn({},q_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B2=Wi(kZ),DZ=Gn({},w0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:eP}),$Z=Wi(DZ),MZ=Gn({},wg,{propertyName:0,elapsedTime:0,pseudoElement:0}),LZ=Wi(MZ),UZ=Gn({},q_,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BZ=Wi(UZ),jZ=[9,13,27,32],tP=Gc&&"CompositionEvent"in window,iy=null;Gc&&"documentMode"in document&&(iy=document.documentMode);var FZ=Gc&&"TextEvent"in window&&!iy,oB=Gc&&(!tP||iy&&8<iy&&11>=iy),j2=" ",F2=!1;function aB(t,e){switch(t){case"keyup":return jZ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bf=!1;function WZ(t,e){switch(t){case"compositionend":return cB(e);case"keypress":return e.which!==32?null:(F2=!0,j2);case"textInput":return t=e.data,t===j2&&F2?null:t;default:return null}}function zZ(t,e){if(Bf)return t==="compositionend"||!tP&&aB(t,e)?(t=iB(),Sv=JR=Kl=null,Bf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return oB&&e.locale!=="ko"?null:e.data;default:return null}}var HZ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!HZ[t.type]:e==="textarea"}function lB(t,e,n,r){j8(r),e=xE(e,"onChange"),0<e.length&&(n=new XR("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oy=null,Vy=null;function qZ(t){vB(t,0)}function G_(t){var e=Wf(t);if(k8(e))return t}function GZ(t,e){if(t==="change")return e}var uB=!1;if(Gc){var J1;if(Gc){var X1="oninput"in document;if(!X1){var z2=document.createElement("div");z2.setAttribute("oninput","return;"),X1=typeof z2.oninput=="function"}J1=X1}else J1=!1;uB=J1&&(!document.documentMode||9<document.documentMode)}function H2(){oy&&(oy.detachEvent("onpropertychange",dB),Vy=oy=null)}function dB(t){if(t.propertyName==="value"&&G_(Vy)){var e=[];lB(e,Vy,t,VR(t)),H8(qZ,e)}}function VZ(t,e,n){t==="focusin"?(H2(),oy=e,Vy=n,oy.attachEvent("onpropertychange",dB)):t==="focusout"&&H2()}function KZ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return G_(Vy)}function YZ(t,e){if(t==="click")return G_(e)}function QZ(t,e){if(t==="input"||t==="change")return G_(e)}function ZZ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sa=typeof Object.is=="function"?Object.is:ZZ;function Ky(t,e){if(sa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!jI.call(e,s)||!sa(t[s],e[s]))return!1}return!0}function q2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G2(t,e){var n=q2(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=q2(n)}}function hB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fB(){for(var t=window,e=EE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=EE(t.document)}return e}function nP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function JZ(t){var e=fB(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hB(n.ownerDocument.documentElement,n)){if(r!==null&&nP(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=G2(n,i);var o=G2(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var XZ=Gc&&"documentMode"in document&&11>=document.documentMode,jf=null,iN=null,ay=null,oN=!1;function V2(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oN||jf==null||jf!==EE(r)||(r=jf,"selectionStart"in r&&nP(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ay&&Ky(ay,r)||(ay=r,r=xE(iN,"onSelect"),0<r.length&&(e=new XR("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jf)))}function Eb(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ff={animationend:Eb("Animation","AnimationEnd"),animationiteration:Eb("Animation","AnimationIteration"),animationstart:Eb("Animation","AnimationStart"),transitionend:Eb("Transition","TransitionEnd")},eS={},pB={};Gc&&(pB=document.createElement("div").style,"AnimationEvent"in window||(delete Ff.animationend.animation,delete Ff.animationiteration.animation,delete Ff.animationstart.animation),"TransitionEvent"in window||delete Ff.transitionend.transition);function V_(t){if(eS[t])return eS[t];if(!Ff[t])return t;var e=Ff[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pB)return eS[t]=e[n];return t}var gB=V_("animationend"),mB=V_("animationiteration"),yB=V_("animationstart"),wB=V_("transitionend"),bB=new Map,K2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uu(t,e){bB.set(t,e),Nh(e,[t])}for(var tS=0;tS<K2.length;tS++){var nS=K2[tS],eJ=nS.toLowerCase(),tJ=nS[0].toUpperCase()+nS.slice(1);Uu(eJ,"on"+tJ)}Uu(gB,"onAnimationEnd");Uu(mB,"onAnimationIteration");Uu(yB,"onAnimationStart");Uu("dblclick","onDoubleClick");Uu("focusin","onFocus");Uu("focusout","onBlur");Uu(wB,"onTransitionEnd");kp("onMouseEnter",["mouseout","mouseover"]);kp("onMouseLeave",["mouseout","mouseover"]);kp("onPointerEnter",["pointerout","pointerover"]);kp("onPointerLeave",["pointerout","pointerover"]);Nh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nh("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lm));function Y2(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eZ(r,e,void 0,t),t.currentTarget=null}function vB(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Y2(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Y2(s,a,l),i=c}}}if(CE)throw t=tN,CE=!1,tN=null,t}function On(t,e){var n=e[dN];n===void 0&&(n=e[dN]=new Set);var r=t+"__bubble";n.has(r)||(EB(e,t,2,!1),n.add(r))}function rS(t,e,n){var r=0;e&&(r|=4),EB(n,t,r,e)}var _b="_reactListening"+Math.random().toString(36).slice(2);function Yy(t){if(!t[_b]){t[_b]=!0,x8.forEach(function(n){n!=="selectionchange"&&(nJ.has(n)||rS(n,!1,t),rS(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_b]||(e[_b]=!0,rS("selectionchange",!1,e))}}function EB(t,e,n,r){switch(sB(e)){case 1:var s=mZ;break;case 4:s=yZ;break;default:s=ZR}n=s.bind(null,e,n,t),s=void 0,!eN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function sS(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=bd(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}H8(function(){var l=i,u=VR(n),d=[];e:{var h=bB.get(t);if(h!==void 0){var f=XR,p=t;switch(t){case"keypress":if(Av(n)===0)break e;case"keydown":case"keyup":f=OZ;break;case"focusin":p="focus",f=Z1;break;case"focusout":p="blur",f=Z1;break;case"beforeblur":case"afterblur":f=Z1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=L2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=vZ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=$Z;break;case gB:case mB:case yB:f=CZ;break;case wB:f=LZ;break;case"scroll":f=wZ;break;case"wheel":f=BZ;break;case"copy":case"cut":case"paste":f=AZ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=B2}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,E;b!==null;){E=b;var _=E.stateNode;if(E.tag===5&&_!==null&&(E=_,y!==null&&(_=zy(b,y),_!=null&&g.push(Qy(b,_,E)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==JI&&(p=n.relatedTarget||n.fromElement)&&(bd(p)||p[Vc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?bd(p):null,p!==null&&(w=xh(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=L2,_="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=B2,_="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Wf(f),E=p==null?h:Wf(p),h=new g(_,b+"leave",f,n,u),h.target=w,h.relatedTarget=E,_=null,bd(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=E,g.relatedTarget=w,_=g),w=_,f&&p)t:{for(g=f,y=p,b=0,E=g;E;E=Xh(E))b++;for(E=0,_=y;_;_=Xh(_))E++;for(;0<b-E;)g=Xh(g),b--;for(;0<E-b;)y=Xh(y),E--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Xh(g),y=Xh(y)}g=null}else g=null;f!==null&&Q2(d,h,f,g,!1),p!==null&&w!==null&&Q2(d,w,p,g,!0)}}e:{if(h=l?Wf(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=GZ;else if(W2(h))if(uB)C=QZ;else{C=KZ;var I=VZ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=YZ);if(C&&(C=C(t,l))){lB(d,C,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&VI(h,"number",h.value)}switch(I=l?Wf(l):window,t){case"focusin":(W2(I)||I.contentEditable==="true")&&(jf=I,iN=l,ay=null);break;case"focusout":ay=iN=jf=null;break;case"mousedown":oN=!0;break;case"contextmenu":case"mouseup":case"dragend":oN=!1,V2(d,n,u);break;case"selectionchange":if(XZ)break;case"keydown":case"keyup":V2(d,n,u)}var A;if(tP)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Bf?aB(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(oB&&n.locale!=="ko"&&(Bf||N!=="onCompositionStart"?N==="onCompositionEnd"&&Bf&&(A=iB()):(Kl=u,JR="value"in Kl?Kl.value:Kl.textContent,Bf=!0)),I=xE(l,N),0<I.length&&(N=new U2(N,t,null,n,u),d.push({event:N,listeners:I}),A?N.data=A:(A=cB(n),A!==null&&(N.data=A)))),(A=FZ?WZ(t,n):zZ(t,n))&&(l=xE(l,"onBeforeInput"),0<l.length&&(u=new U2("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}vB(d,e)})}function Qy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xE(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=zy(t,n),i!=null&&r.unshift(Qy(t,i,s)),i=zy(t,e),i!=null&&r.push(Qy(t,i,s))),t=t.return}return r}function Xh(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Q2(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=zy(n,i),c!=null&&o.unshift(Qy(n,c,a))):s||(c=zy(n,i),c!=null&&o.push(Qy(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var rJ=/\r\n?/g,sJ=/\u0000|\uFFFD/g;function Z2(t){return(typeof t=="string"?t:""+t).replace(rJ,`
`).replace(sJ,"")}function Cb(t,e,n){if(e=Z2(e),Z2(t)!==e&&n)throw Error(ge(425))}function TE(){}var aN=null,cN=null;function lN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uN=typeof setTimeout=="function"?setTimeout:void 0,iJ=typeof clearTimeout=="function"?clearTimeout:void 0,J2=typeof Promise=="function"?Promise:void 0,oJ=typeof queueMicrotask=="function"?queueMicrotask:typeof J2<"u"?function(t){return J2.resolve(null).then(t).catch(aJ)}:uN;function aJ(t){setTimeout(function(){throw t})}function iS(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Gy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Gy(e)}function uu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function X2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var bg=Math.random().toString(36).slice(2),$a="__reactFiber$"+bg,Zy="__reactProps$"+bg,Vc="__reactContainer$"+bg,dN="__reactEvents$"+bg,cJ="__reactListeners$"+bg,lJ="__reactHandles$"+bg;function bd(t){var e=t[$a];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vc]||n[$a]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=X2(t);t!==null;){if(n=t[$a])return n;t=X2(t)}return e}t=n,n=t.parentNode}return null}function b0(t){return t=t[$a]||t[Vc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function K_(t){return t[Zy]||null}var hN=[],zf=-1;function Bu(t){return{current:t}}function $n(t){0>zf||(t.current=hN[zf],hN[zf]=null,zf--)}function Rn(t,e){zf++,hN[zf]=t.current,t.current=e}var Ru={},gs=Bu(Ru),ci=Bu(!1),Jd=Ru;function Dp(t,e){var n=t.type.contextTypes;if(!n)return Ru;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function li(t){return t=t.childContextTypes,t!=null}function RE(){$n(ci),$n(gs)}function eD(t,e,n){if(gs.current!==Ru)throw Error(ge(168));Rn(gs,e),Rn(ci,n)}function _B(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ge(108,VQ(t)||"Unknown",s));return Gn({},n,r)}function PE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ru,Jd=gs.current,Rn(gs,t),Rn(ci,ci.current),!0}function tD(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=_B(t,e,Jd),r.__reactInternalMemoizedMergedChildContext=t,$n(ci),$n(gs),Rn(gs,t)):$n(ci),Rn(ci,n)}var Sc=null,Y_=!1,oS=!1;function CB(t){Sc===null?Sc=[t]:Sc.push(t)}function uJ(t){Y_=!0,CB(t)}function ju(){if(!oS&&Sc!==null){oS=!0;var t=0,e=ln;try{var n=Sc;for(ln=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sc=null,Y_=!1}catch(s){throw Sc!==null&&(Sc=Sc.slice(t+1)),K8(KR,ju),s}finally{ln=e,oS=!1}}return null}var Hf=[],qf=0,OE=null,kE=0,lo=[],uo=0,Xd=null,Oc=1,kc="";function id(t,e){Hf[qf++]=kE,Hf[qf++]=OE,OE=t,kE=e}function SB(t,e,n){lo[uo++]=Oc,lo[uo++]=kc,lo[uo++]=Xd,Xd=t;var r=Oc;t=kc;var s=32-ea(r)-1;r&=~(1<<s),n+=1;var i=32-ea(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Oc=1<<32-ea(e)+s|n<<s|r,kc=i+t}else Oc=1<<i|n<<s|r,kc=t}function rP(t){t.return!==null&&(id(t,1),SB(t,1,0))}function sP(t){for(;t===OE;)OE=Hf[--qf],Hf[qf]=null,kE=Hf[--qf],Hf[qf]=null;for(;t===Xd;)Xd=lo[--uo],lo[uo]=null,kc=lo[--uo],lo[uo]=null,Oc=lo[--uo],lo[uo]=null}var $i=null,Oi=null,Bn=!1,zo=null;function AB(t,e){var n=ho(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nD(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$i=t,Oi=uu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$i=t,Oi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xd!==null?{id:Oc,overflow:kc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ho(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$i=t,Oi=null,!0):!1;default:return!1}}function fN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pN(t){if(Bn){var e=Oi;if(e){var n=e;if(!nD(t,e)){if(fN(t))throw Error(ge(418));e=uu(n.nextSibling);var r=$i;e&&nD(t,e)?AB(r,n):(t.flags=t.flags&-4097|2,Bn=!1,$i=t)}}else{if(fN(t))throw Error(ge(418));t.flags=t.flags&-4097|2,Bn=!1,$i=t}}}function rD(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$i=t}function Sb(t){if(t!==$i)return!1;if(!Bn)return rD(t),Bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lN(t.type,t.memoizedProps)),e&&(e=Oi)){if(fN(t))throw IB(),Error(ge(418));for(;e;)AB(t,e),e=uu(e.nextSibling)}if(rD(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Oi=uu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Oi=null}}else Oi=$i?uu(t.stateNode.nextSibling):null;return!0}function IB(){for(var t=Oi;t;)t=uu(t.nextSibling)}function $p(){Oi=$i=null,Bn=!1}function iP(t){zo===null?zo=[t]:zo.push(t)}var dJ=nl.ReactCurrentBatchConfig;function om(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function Ab(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sD(t){var e=t._init;return e(t._payload)}function NB(t){function e(y,b){if(t){var E=y.deletions;E===null?(y.deletions=[b],y.flags|=16):E.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=pu(y,b),y.index=0,y.sibling=null,y}function i(y,b,E){return y.index=E,t?(E=y.alternate,E!==null?(E=E.index,E<b?(y.flags|=2,b):E):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,E,_){return b===null||b.tag!==6?(b=fS(E,y.mode,_),b.return=y,b):(b=s(b,E),b.return=y,b)}function c(y,b,E,_){var C=E.type;return C===Uf?u(y,b,E.props.children,_,E.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Nl&&sD(C)===b.type)?(_=s(b,E.props),_.ref=om(y,b,E),_.return=y,_):(_=Ov(E.type,E.key,E.props,null,y.mode,_),_.ref=om(y,b,E),_.return=y,_)}function l(y,b,E,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=pS(E,y.mode,_),b.return=y,b):(b=s(b,E.children||[]),b.return=y,b)}function u(y,b,E,_,C){return b===null||b.tag!==7?(b=Fd(E,y.mode,_,C),b.return=y,b):(b=s(b,E),b.return=y,b)}function d(y,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=fS(""+b,y.mode,E),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case pb:return E=Ov(b.type,b.key,b.props,null,y.mode,E),E.ref=om(y,null,b),E.return=y,E;case Lf:return b=pS(b,y.mode,E),b.return=y,b;case Nl:var _=b._init;return d(y,_(b._payload),E)}if($m(b)||tm(b))return b=Fd(b,y.mode,E,null),b.return=y,b;Ab(y,b)}return null}function h(y,b,E,_){var C=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:a(y,b,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case pb:return E.key===C?c(y,b,E,_):null;case Lf:return E.key===C?l(y,b,E,_):null;case Nl:return C=E._init,h(y,b,C(E._payload),_)}if($m(E)||tm(E))return C!==null?null:u(y,b,E,_,null);Ab(y,E)}return null}function f(y,b,E,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(E)||null,a(b,y,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case pb:return y=y.get(_.key===null?E:_.key)||null,c(b,y,_,C);case Lf:return y=y.get(_.key===null?E:_.key)||null,l(b,y,_,C);case Nl:var I=_._init;return f(y,b,E,I(_._payload),C)}if($m(_)||tm(_))return y=y.get(E)||null,u(b,y,_,C,null);Ab(b,_)}return null}function p(y,b,E,_){for(var C=null,I=null,A=b,N=b=0,S=null;A!==null&&N<E.length;N++){A.index>N?(S=A,A=null):S=A.sibling;var D=h(y,A,E[N],_);if(D===null){A===null&&(A=S);break}t&&A&&D.alternate===null&&e(y,A),b=i(D,b,N),I===null?C=D:I.sibling=D,I=D,A=S}if(N===E.length)return n(y,A),Bn&&id(y,N),C;if(A===null){for(;N<E.length;N++)A=d(y,E[N],_),A!==null&&(b=i(A,b,N),I===null?C=A:I.sibling=A,I=A);return Bn&&id(y,N),C}for(A=r(y,A);N<E.length;N++)S=f(A,y,N,E[N],_),S!==null&&(t&&S.alternate!==null&&A.delete(S.key===null?N:S.key),b=i(S,b,N),I===null?C=S:I.sibling=S,I=S);return t&&A.forEach(function(P){return e(y,P)}),Bn&&id(y,N),C}function g(y,b,E,_){var C=tm(E);if(typeof C!="function")throw Error(ge(150));if(E=C.call(E),E==null)throw Error(ge(151));for(var I=C=null,A=b,N=b=0,S=null,D=E.next();A!==null&&!D.done;N++,D=E.next()){A.index>N?(S=A,A=null):S=A.sibling;var P=h(y,A,D.value,_);if(P===null){A===null&&(A=S);break}t&&A&&P.alternate===null&&e(y,A),b=i(P,b,N),I===null?C=P:I.sibling=P,I=P,A=S}if(D.done)return n(y,A),Bn&&id(y,N),C;if(A===null){for(;!D.done;N++,D=E.next())D=d(y,D.value,_),D!==null&&(b=i(D,b,N),I===null?C=D:I.sibling=D,I=D);return Bn&&id(y,N),C}for(A=r(y,A);!D.done;N++,D=E.next())D=f(A,y,N,D.value,_),D!==null&&(t&&D.alternate!==null&&A.delete(D.key===null?N:D.key),b=i(D,b,N),I===null?C=D:I.sibling=D,I=D);return t&&A.forEach(function(B){return e(y,B)}),Bn&&id(y,N),C}function w(y,b,E,_){if(typeof E=="object"&&E!==null&&E.type===Uf&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case pb:e:{for(var C=E.key,I=b;I!==null;){if(I.key===C){if(C=E.type,C===Uf){if(I.tag===7){n(y,I.sibling),b=s(I,E.props.children),b.return=y,y=b;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Nl&&sD(C)===I.type){n(y,I.sibling),b=s(I,E.props),b.ref=om(y,I,E),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}E.type===Uf?(b=Fd(E.props.children,y.mode,_,E.key),b.return=y,y=b):(_=Ov(E.type,E.key,E.props,null,y.mode,_),_.ref=om(y,b,E),_.return=y,y=_)}return o(y);case Lf:e:{for(I=E.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){n(y,b.sibling),b=s(b,E.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=pS(E,y.mode,_),b.return=y,y=b}return o(y);case Nl:return I=E._init,w(y,b,I(E._payload),_)}if($m(E))return p(y,b,E,_);if(tm(E))return g(y,b,E,_);Ab(y,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,E),b.return=y,y=b):(n(y,b),b=fS(E,y.mode,_),b.return=y,y=b),o(y)):n(y,b)}return w}var Mp=NB(!0),xB=NB(!1),DE=Bu(null),$E=null,Gf=null,oP=null;function aP(){oP=Gf=$E=null}function cP(t){var e=DE.current;$n(DE),t._currentValue=e}function gN(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ap(t,e){$E=t,oP=Gf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function go(t){var e=t._currentValue;if(oP!==t)if(t={context:t,memoizedValue:e,next:null},Gf===null){if($E===null)throw Error(ge(308));Gf=t,$E.dependencies={lanes:0,firstContext:t}}else Gf=Gf.next=t;return e}var vd=null;function lP(t){vd===null?vd=[t]:vd.push(t)}function TB(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,lP(e)):(n.next=s.next,s.next=n),e.interleaved=n,Kc(t,r)}function Kc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xl=!1;function uP(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lc(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function du(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Kc(t,n)}return s=r.interleaved,s===null?(e.next=e,lP(r)):(e.next=s.next,s.next=e),r.interleaved=e,Kc(t,n)}function Iv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,YR(t,n)}}function iD(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ME(t,e,n,r){var s=t.updateQueue;xl=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Gn({},d,h);break e;case 2:xl=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);th|=o,t.lanes=o,t.memoizedState=d}}function oD(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ge(191,s));s.call(r)}}}var v0={},Fa=Bu(v0),Jy=Bu(v0),Xy=Bu(v0);function Ed(t){if(t===v0)throw Error(ge(174));return t}function dP(t,e){switch(Rn(Xy,e),Rn(Jy,t),Rn(Fa,v0),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YI(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=YI(e,t)}$n(Fa),Rn(Fa,e)}function Lp(){$n(Fa),$n(Jy),$n(Xy)}function PB(t){Ed(Xy.current);var e=Ed(Fa.current),n=YI(e,t.type);e!==n&&(Rn(Jy,t),Rn(Fa,n))}function hP(t){Jy.current===t&&($n(Fa),$n(Jy))}var Wn=Bu(0);function LE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var aS=[];function fP(){for(var t=0;t<aS.length;t++)aS[t]._workInProgressVersionPrimary=null;aS.length=0}var Nv=nl.ReactCurrentDispatcher,cS=nl.ReactCurrentBatchConfig,eh=0,qn=null,mr=null,Pr=null,UE=!1,cy=!1,ew=0,hJ=0;function as(){throw Error(ge(321))}function pP(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sa(t[n],e[n]))return!1;return!0}function gP(t,e,n,r,s,i){if(eh=i,qn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nv.current=t===null||t.memoizedState===null?mJ:yJ,t=n(r,s),cy){i=0;do{if(cy=!1,ew=0,25<=i)throw Error(ge(301));i+=1,Pr=mr=null,e.updateQueue=null,Nv.current=wJ,t=n(r,s)}while(cy)}if(Nv.current=BE,e=mr!==null&&mr.next!==null,eh=0,Pr=mr=qn=null,UE=!1,e)throw Error(ge(300));return t}function mP(){var t=ew!==0;return ew=0,t}function Ca(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pr===null?qn.memoizedState=Pr=t:Pr=Pr.next=t,Pr}function mo(){if(mr===null){var t=qn.alternate;t=t!==null?t.memoizedState:null}else t=mr.next;var e=Pr===null?qn.memoizedState:Pr.next;if(e!==null)Pr=e,mr=t;else{if(t===null)throw Error(ge(310));mr=t,t={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Pr===null?qn.memoizedState=Pr=t:Pr=Pr.next=t}return Pr}function tw(t,e){return typeof e=="function"?e(t):e}function lS(t){var e=mo(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=mr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((eh&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,qn.lanes|=u,th|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,sa(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qn.lanes|=i,th|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function uS(t){var e=mo(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);sa(i,e.memoizedState)||(ii=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function OB(){}function kB(t,e){var n=qn,r=mo(),s=e(),i=!sa(r.memoizedState,s);if(i&&(r.memoizedState=s,ii=!0),r=r.queue,yP(MB.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Pr!==null&&Pr.memoizedState.tag&1){if(n.flags|=2048,nw(9,$B.bind(null,n,r,s,e),void 0,null),Ur===null)throw Error(ge(349));eh&30||DB(n,e,s)}return s}function DB(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qn.updateQueue,e===null?(e={lastEffect:null,stores:null},qn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $B(t,e,n,r){e.value=n,e.getSnapshot=r,LB(e)&&UB(t)}function MB(t,e,n){return n(function(){LB(e)&&UB(t)})}function LB(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sa(t,n)}catch{return!0}}function UB(t){var e=Kc(t,1);e!==null&&ta(e,t,1,-1)}function aD(t){var e=Ca();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tw,lastRenderedState:t},e.queue=t,t=t.dispatch=gJ.bind(null,qn,t),[e.memoizedState,t]}function nw(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qn.updateQueue,e===null?(e={lastEffect:null,stores:null},qn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BB(){return mo().memoizedState}function xv(t,e,n,r){var s=Ca();qn.flags|=t,s.memoizedState=nw(1|e,n,void 0,r===void 0?null:r)}function Q_(t,e,n,r){var s=mo();r=r===void 0?null:r;var i=void 0;if(mr!==null){var o=mr.memoizedState;if(i=o.destroy,r!==null&&pP(r,o.deps)){s.memoizedState=nw(e,n,i,r);return}}qn.flags|=t,s.memoizedState=nw(1|e,n,i,r)}function cD(t,e){return xv(8390656,8,t,e)}function yP(t,e){return Q_(2048,8,t,e)}function jB(t,e){return Q_(4,2,t,e)}function FB(t,e){return Q_(4,4,t,e)}function WB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zB(t,e,n){return n=n!=null?n.concat([t]):null,Q_(4,4,WB.bind(null,e,t),n)}function wP(){}function HB(t,e){var n=mo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pP(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qB(t,e){var n=mo();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&pP(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function GB(t,e,n){return eh&21?(sa(n,e)||(n=Z8(),qn.lanes|=n,th|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ii=!0),t.memoizedState=n)}function fJ(t,e){var n=ln;ln=n!==0&&4>n?n:4,t(!0);var r=cS.transition;cS.transition={};try{t(!1),e()}finally{ln=n,cS.transition=r}}function VB(){return mo().memoizedState}function pJ(t,e,n){var r=fu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KB(t))YB(e,n);else if(n=TB(t,e,n,r),n!==null){var s=Rs();ta(n,t,r,s),QB(n,e,r)}}function gJ(t,e,n){var r=fu(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KB(t))YB(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,sa(a,o)){var c=e.interleaved;c===null?(s.next=s,lP(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=TB(t,e,s,r),n!==null&&(s=Rs(),ta(n,t,r,s),QB(n,e,r))}}function KB(t){var e=t.alternate;return t===qn||e!==null&&e===qn}function YB(t,e){cy=UE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function QB(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,YR(t,n)}}var BE={readContext:go,useCallback:as,useContext:as,useEffect:as,useImperativeHandle:as,useInsertionEffect:as,useLayoutEffect:as,useMemo:as,useReducer:as,useRef:as,useState:as,useDebugValue:as,useDeferredValue:as,useTransition:as,useMutableSource:as,useSyncExternalStore:as,useId:as,unstable_isNewReconciler:!1},mJ={readContext:go,useCallback:function(t,e){return Ca().memoizedState=[t,e===void 0?null:e],t},useContext:go,useEffect:cD,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xv(4194308,4,WB.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xv(4194308,4,t,e)},useInsertionEffect:function(t,e){return xv(4,2,t,e)},useMemo:function(t,e){var n=Ca();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ca();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pJ.bind(null,qn,t),[r.memoizedState,t]},useRef:function(t){var e=Ca();return t={current:t},e.memoizedState=t},useState:aD,useDebugValue:wP,useDeferredValue:function(t){return Ca().memoizedState=t},useTransition:function(){var t=aD(!1),e=t[0];return t=fJ.bind(null,t[1]),Ca().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qn,s=Ca();if(Bn){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),Ur===null)throw Error(ge(349));eh&30||DB(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cD(MB.bind(null,r,i,t),[t]),r.flags|=2048,nw(9,$B.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ca(),e=Ur.identifierPrefix;if(Bn){var n=kc,r=Oc;n=(r&~(1<<32-ea(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ew++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=hJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yJ={readContext:go,useCallback:HB,useContext:go,useEffect:yP,useImperativeHandle:zB,useInsertionEffect:jB,useLayoutEffect:FB,useMemo:qB,useReducer:lS,useRef:BB,useState:function(){return lS(tw)},useDebugValue:wP,useDeferredValue:function(t){var e=mo();return GB(e,mr.memoizedState,t)},useTransition:function(){var t=lS(tw)[0],e=mo().memoizedState;return[t,e]},useMutableSource:OB,useSyncExternalStore:kB,useId:VB,unstable_isNewReconciler:!1},wJ={readContext:go,useCallback:HB,useContext:go,useEffect:yP,useImperativeHandle:zB,useInsertionEffect:jB,useLayoutEffect:FB,useMemo:qB,useReducer:uS,useRef:BB,useState:function(){return uS(tw)},useDebugValue:wP,useDeferredValue:function(t){var e=mo();return mr===null?e.memoizedState=t:GB(e,mr.memoizedState,t)},useTransition:function(){var t=uS(tw)[0],e=mo().memoizedState;return[t,e]},useMutableSource:OB,useSyncExternalStore:kB,useId:VB,unstable_isNewReconciler:!1};function Uo(t,e){if(t&&t.defaultProps){e=Gn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mN(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Gn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Z_={isMounted:function(t){return(t=t._reactInternals)?xh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Rs(),s=fu(t),i=Lc(r,s);i.payload=e,n!=null&&(i.callback=n),e=du(t,i,s),e!==null&&(ta(e,t,s,r),Iv(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Rs(),s=fu(t),i=Lc(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=du(t,i,s),e!==null&&(ta(e,t,s,r),Iv(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rs(),r=fu(t),s=Lc(n,r);s.tag=2,e!=null&&(s.callback=e),e=du(t,s,r),e!==null&&(ta(e,t,r,n),Iv(e,t,r))}};function lD(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ky(n,r)||!Ky(s,i):!0}function ZB(t,e,n){var r=!1,s=Ru,i=e.contextType;return typeof i=="object"&&i!==null?i=go(i):(s=li(e)?Jd:gs.current,r=e.contextTypes,i=(r=r!=null)?Dp(t,s):Ru),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Z_,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function uD(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Z_.enqueueReplaceState(e,e.state,null)}function yN(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},uP(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=go(i):(i=li(e)?Jd:gs.current,s.context=Dp(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mN(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Z_.enqueueReplaceState(s,s.state,null),ME(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Up(t,e){try{var n="",r=e;do n+=GQ(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function dS(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wN(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bJ=typeof WeakMap=="function"?WeakMap:Map;function JB(t,e,n){n=Lc(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){FE||(FE=!0,xN=r),wN(t,e)},n}function XB(t,e,n){n=Lc(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){wN(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wN(t,e),typeof r!="function"&&(hu===null?hu=new Set([this]):hu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dD(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bJ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=kJ.bind(null,t,e,n),e.then(t,t))}function hD(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fD(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Lc(-1,1),e.tag=2,du(n,e,1))),n.lanes|=1),t)}var vJ=nl.ReactCurrentOwner,ii=!1;function Ss(t,e,n,r){e.child=t===null?xB(e,null,n,r):Mp(e,t.child,n,r)}function pD(t,e,n,r,s){n=n.render;var i=e.ref;return ap(e,s),r=gP(t,e,n,r,i,s),n=mP(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yc(t,e,s)):(Bn&&n&&rP(e),e.flags|=1,Ss(t,e,r,s),e.child)}function gD(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!IP(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,e4(t,e,i,r,s)):(t=Ov(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ky,n(o,r)&&t.ref===e.ref)return Yc(t,e,s)}return e.flags|=1,t=pu(i,r),t.ref=e.ref,t.return=e,e.child=t}function e4(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ky(i,r)&&t.ref===e.ref)if(ii=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ii=!0);else return e.lanes=t.lanes,Yc(t,e,s)}return bN(t,e,n,r,s)}function t4(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(Kf,Ni),Ni|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Rn(Kf,Ni),Ni|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Rn(Kf,Ni),Ni|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Rn(Kf,Ni),Ni|=r;return Ss(t,e,s,n),e.child}function n4(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bN(t,e,n,r,s){var i=li(n)?Jd:gs.current;return i=Dp(e,i),ap(e,s),n=gP(t,e,n,r,i,s),r=mP(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yc(t,e,s)):(Bn&&r&&rP(e),e.flags|=1,Ss(t,e,n,s),e.child)}function mD(t,e,n,r,s){if(li(n)){var i=!0;PE(e)}else i=!1;if(ap(e,s),e.stateNode===null)Tv(t,e),ZB(e,n,r),yN(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=go(l):(l=li(n)?Jd:gs.current,l=Dp(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&uD(e,o,r,l),xl=!1;var h=e.memoizedState;o.state=h,ME(e,r,o,s),c=e.memoizedState,a!==r||h!==c||ci.current||xl?(typeof u=="function"&&(mN(e,n,u,r),c=e.memoizedState),(a=xl||lD(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RB(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Uo(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=go(c):(c=li(n)?Jd:gs.current,c=Dp(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&uD(e,o,r,c),xl=!1,h=e.memoizedState,o.state=h,ME(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||ci.current||xl?(typeof f=="function"&&(mN(e,n,f,r),p=e.memoizedState),(l=xl||lD(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return vN(t,e,n,r,i,s)}function vN(t,e,n,r,s,i){n4(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&tD(e,n,!1),Yc(t,e,i);r=e.stateNode,vJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Mp(e,t.child,null,i),e.child=Mp(e,null,a,i)):Ss(t,e,a,i),e.memoizedState=r.state,s&&tD(e,n,!0),e.child}function r4(t){var e=t.stateNode;e.pendingContext?eD(t,e.pendingContext,e.pendingContext!==e.context):e.context&&eD(t,e.context,!1),dP(t,e.containerInfo)}function yD(t,e,n,r,s){return $p(),iP(s),e.flags|=256,Ss(t,e,n,r),e.child}var EN={dehydrated:null,treeContext:null,retryLane:0};function _N(t){return{baseLanes:t,cachePool:null,transitions:null}}function s4(t,e,n){var r=e.pendingProps,s=Wn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Rn(Wn,s&1),t===null)return pN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=eC(o,r,0,null),t=Fd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_N(n),e.memoizedState=EN,t):bP(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return EJ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pu(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=pu(a,i):(i=Fd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_N(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=EN,r}return i=t.child,t=i.sibling,r=pu(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bP(t,e){return e=eC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ib(t,e,n,r){return r!==null&&iP(r),Mp(e,t.child,null,n),t=bP(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EJ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=dS(Error(ge(422))),Ib(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=eC({mode:"visible",children:r.children},s,0,null),i=Fd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Mp(e,t.child,null,o),e.child.memoizedState=_N(o),e.memoizedState=EN,i);if(!(e.mode&1))return Ib(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ge(419)),r=dS(i,r,void 0),Ib(t,e,o,r)}if(a=(o&t.childLanes)!==0,ii||a){if(r=Ur,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kc(t,s),ta(r,t,s,-1))}return AP(),r=dS(Error(ge(421))),Ib(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=DJ.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Oi=uu(s.nextSibling),$i=e,Bn=!0,zo=null,t!==null&&(lo[uo++]=Oc,lo[uo++]=kc,lo[uo++]=Xd,Oc=t.id,kc=t.overflow,Xd=e),e=bP(e,r.children),e.flags|=4096,e)}function wD(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gN(t.return,e,n)}function hS(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function i4(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ss(t,e,r.children,n),r=Wn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wD(t,n,e);else if(t.tag===19)wD(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Rn(Wn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&LE(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),hS(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&LE(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}hS(e,!0,n,null,i);break;case"together":hS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),th|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=pu(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pu(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _J(t,e,n){switch(e.tag){case 3:r4(e),$p();break;case 5:PB(e);break;case 1:li(e.type)&&PE(e);break;case 4:dP(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Rn(DE,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Rn(Wn,Wn.current&1),e.flags|=128,null):n&e.child.childLanes?s4(t,e,n):(Rn(Wn,Wn.current&1),t=Yc(t,e,n),t!==null?t.sibling:null);Rn(Wn,Wn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return i4(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Rn(Wn,Wn.current),r)break;return null;case 22:case 23:return e.lanes=0,t4(t,e,n)}return Yc(t,e,n)}var o4,CN,a4,c4;o4=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};CN=function(){};a4=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ed(Fa.current);var i=null;switch(n){case"input":s=qI(t,s),r=qI(t,r),i=[];break;case"select":s=Gn({},s,{value:void 0}),r=Gn({},r,{value:void 0}),i=[];break;case"textarea":s=KI(t,s),r=KI(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=TE)}QI(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Fy.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Fy.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&On("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};c4=function(t,e,n,r){n!==r&&(e.flags|=4)};function am(t,e){if(!Bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function cs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function CJ(t,e,n){var r=e.pendingProps;switch(sP(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cs(e),null;case 1:return li(e.type)&&RE(),cs(e),null;case 3:return r=e.stateNode,Lp(),$n(ci),$n(gs),fP(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sb(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zo!==null&&(PN(zo),zo=null))),CN(t,e),cs(e),null;case 5:hP(e);var s=Ed(Xy.current);if(n=e.type,t!==null&&e.stateNode!=null)a4(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return cs(e),null}if(t=Ed(Fa.current),Sb(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[$a]=e,r[Zy]=i,t=(e.mode&1)!==0,n){case"dialog":On("cancel",r),On("close",r);break;case"iframe":case"object":case"embed":On("load",r);break;case"video":case"audio":for(s=0;s<Lm.length;s++)On(Lm[s],r);break;case"source":On("error",r);break;case"img":case"image":case"link":On("error",r),On("load",r);break;case"details":On("toggle",r);break;case"input":N2(r,i),On("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},On("invalid",r);break;case"textarea":T2(r,i),On("invalid",r)}QI(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Cb(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Cb(r.textContent,a,t),s=["children",""+a]):Fy.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&On("scroll",r)}switch(n){case"input":gb(r),x2(r,i,!0);break;case"textarea":gb(r),R2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=TE)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=M8(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[$a]=e,t[Zy]=r,o4(t,e,!1,!1),e.stateNode=t;e:{switch(o=ZI(n,r),n){case"dialog":On("cancel",t),On("close",t),s=r;break;case"iframe":case"object":case"embed":On("load",t),s=r;break;case"video":case"audio":for(s=0;s<Lm.length;s++)On(Lm[s],t);s=r;break;case"source":On("error",t),s=r;break;case"img":case"image":case"link":On("error",t),On("load",t),s=r;break;case"details":On("toggle",t),s=r;break;case"input":N2(t,r),s=qI(t,r),On("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Gn({},r,{value:void 0}),On("invalid",t);break;case"textarea":T2(t,r),s=KI(t,r),On("invalid",t);break;default:s=r}QI(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?B8(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&L8(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wy(t,c):typeof c=="number"&&Wy(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Fy.hasOwnProperty(i)?c!=null&&i==="onScroll"&&On("scroll",t):c!=null&&zR(t,i,c,o))}switch(n){case"input":gb(t),x2(t,r,!1);break;case"textarea":gb(t),R2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Tu(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?rp(t,!!r.multiple,i,!1):r.defaultValue!=null&&rp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=TE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cs(e),null;case 6:if(t&&e.stateNode!=null)c4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=Ed(Xy.current),Ed(Fa.current),Sb(e)){if(r=e.stateNode,n=e.memoizedProps,r[$a]=e,(i=r.nodeValue!==n)&&(t=$i,t!==null))switch(t.tag){case 3:Cb(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cb(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$a]=e,e.stateNode=r}return cs(e),null;case 13:if($n(Wn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bn&&Oi!==null&&e.mode&1&&!(e.flags&128))IB(),$p(),e.flags|=98560,i=!1;else if(i=Sb(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ge(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ge(317));i[$a]=e}else $p(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cs(e),i=!1}else zo!==null&&(PN(zo),zo=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Wn.current&1?Er===0&&(Er=3):AP())),e.updateQueue!==null&&(e.flags|=4),cs(e),null);case 4:return Lp(),CN(t,e),t===null&&Yy(e.stateNode.containerInfo),cs(e),null;case 10:return cP(e.type._context),cs(e),null;case 17:return li(e.type)&&RE(),cs(e),null;case 19:if($n(Wn),i=e.memoizedState,i===null)return cs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)am(i,!1);else{if(Er!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=LE(t),o!==null){for(e.flags|=128,am(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Rn(Wn,Wn.current&1|2),e.child}t=t.sibling}i.tail!==null&&nr()>Bp&&(e.flags|=128,r=!0,am(i,!1),e.lanes=4194304)}else{if(!r)if(t=LE(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),am(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Bn)return cs(e),null}else 2*nr()-i.renderingStartTime>Bp&&n!==1073741824&&(e.flags|=128,r=!0,am(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=nr(),e.sibling=null,n=Wn.current,Rn(Wn,r?n&1|2:n&1),e):(cs(e),null);case 22:case 23:return SP(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ni&1073741824&&(cs(e),e.subtreeFlags&6&&(e.flags|=8192)):cs(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function SJ(t,e){switch(sP(e),e.tag){case 1:return li(e.type)&&RE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Lp(),$n(ci),$n(gs),fP(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hP(e),null;case 13:if($n(Wn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));$p()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return $n(Wn),null;case 4:return Lp(),null;case 10:return cP(e.type._context),null;case 22:case 23:return SP(),null;case 24:return null;default:return null}}var Nb=!1,ps=!1,AJ=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Vf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Zn(t,e,r)}else n.current=null}function SN(t,e,n){try{n()}catch(r){Zn(t,e,r)}}var bD=!1;function IJ(t,e){if(aN=IE,t=fB(),nP(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(cN={focusedElem:t,selectionRange:n},IE=!1,Ue=e;Ue!==null;)if(e=Ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ue=t;else for(;Ue!==null;){e=Ue;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:Uo(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(_){Zn(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Ue=t;break}Ue=e.return}return p=bD,bD=!1,p}function ly(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&SN(e,n,i)}s=s.next}while(s!==r)}}function J_(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function AN(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function l4(t){var e=t.alternate;e!==null&&(t.alternate=null,l4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$a],delete e[Zy],delete e[dN],delete e[cJ],delete e[lJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function u4(t){return t.tag===5||t.tag===3||t.tag===4}function vD(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||u4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function IN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=TE));else if(r!==4&&(t=t.child,t!==null))for(IN(t,e,n),t=t.sibling;t!==null;)IN(t,e,n),t=t.sibling}function NN(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(NN(t,e,n),t=t.sibling;t!==null;)NN(t,e,n),t=t.sibling}var Vr=null,Wo=!1;function al(t,e,n){for(n=n.child;n!==null;)d4(t,e,n),n=n.sibling}function d4(t,e,n){if(ja&&typeof ja.onCommitFiberUnmount=="function")try{ja.onCommitFiberUnmount(H_,n)}catch{}switch(n.tag){case 5:ps||Vf(n,e);case 6:var r=Vr,s=Wo;Vr=null,al(t,e,n),Vr=r,Wo=s,Vr!==null&&(Wo?(t=Vr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vr.removeChild(n.stateNode));break;case 18:Vr!==null&&(Wo?(t=Vr,n=n.stateNode,t.nodeType===8?iS(t.parentNode,n):t.nodeType===1&&iS(t,n),Gy(t)):iS(Vr,n.stateNode));break;case 4:r=Vr,s=Wo,Vr=n.stateNode.containerInfo,Wo=!0,al(t,e,n),Vr=r,Wo=s;break;case 0:case 11:case 14:case 15:if(!ps&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&SN(n,e,o),s=s.next}while(s!==r)}al(t,e,n);break;case 1:if(!ps&&(Vf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Zn(n,e,a)}al(t,e,n);break;case 21:al(t,e,n);break;case 22:n.mode&1?(ps=(r=ps)||n.memoizedState!==null,al(t,e,n),ps=r):al(t,e,n);break;default:al(t,e,n)}}function ED(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AJ),e.forEach(function(r){var s=$J.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ro(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Vr=a.stateNode,Wo=!1;break e;case 3:Vr=a.stateNode.containerInfo,Wo=!0;break e;case 4:Vr=a.stateNode.containerInfo,Wo=!0;break e}a=a.return}if(Vr===null)throw Error(ge(160));d4(i,o,s),Vr=null,Wo=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Zn(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)h4(e,t),e=e.sibling}function h4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ro(e,t),fa(t),r&4){try{ly(3,t,t.return),J_(3,t)}catch(g){Zn(t,t.return,g)}try{ly(5,t,t.return)}catch(g){Zn(t,t.return,g)}}break;case 1:Ro(e,t),fa(t),r&512&&n!==null&&Vf(n,n.return);break;case 5:if(Ro(e,t),fa(t),r&512&&n!==null&&Vf(n,n.return),t.flags&32){var s=t.stateNode;try{Wy(s,"")}catch(g){Zn(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&D8(s,i),ZI(a,o);var l=ZI(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?B8(s,d):u==="dangerouslySetInnerHTML"?L8(s,d):u==="children"?Wy(s,d):zR(s,u,d,l)}switch(a){case"input":GI(s,i);break;case"textarea":$8(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?rp(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?rp(s,!!i.multiple,i.defaultValue,!0):rp(s,!!i.multiple,i.multiple?[]:"",!1))}s[Zy]=i}catch(g){Zn(t,t.return,g)}}break;case 6:if(Ro(e,t),fa(t),r&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Zn(t,t.return,g)}}break;case 3:if(Ro(e,t),fa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gy(e.containerInfo)}catch(g){Zn(t,t.return,g)}break;case 4:Ro(e,t),fa(t);break;case 13:Ro(e,t),fa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(_P=nr())),r&4&&ED(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ps=(l=ps)||u,Ro(e,t),ps=l):Ro(e,t),fa(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ue=t,u=t.child;u!==null;){for(d=Ue=u;Ue!==null;){switch(h=Ue,f=h.child,h.tag){case 0:case 11:case 14:case 15:ly(4,h,h.return);break;case 1:Vf(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Zn(r,n,g)}}break;case 5:Vf(h,h.return);break;case 22:if(h.memoizedState!==null){CD(d);continue}}f!==null?(f.return=h,Ue=f):CD(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=U8("display",o))}catch(g){Zn(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Zn(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ro(e,t),fa(t),r&4&&ED(t);break;case 21:break;default:Ro(e,t),fa(t)}}function fa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(u4(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Wy(s,""),r.flags&=-33);var i=vD(t);NN(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=vD(t);IN(t,a,o);break;default:throw Error(ge(161))}}catch(c){Zn(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NJ(t,e,n){Ue=t,f4(t)}function f4(t,e,n){for(var r=(t.mode&1)!==0;Ue!==null;){var s=Ue,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Nb;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||ps;a=Nb;var l=ps;if(Nb=o,(ps=c)&&!l)for(Ue=s;Ue!==null;)o=Ue,c=o.child,o.tag===22&&o.memoizedState!==null?SD(s):c!==null?(c.return=o,Ue=c):SD(s);for(;i!==null;)Ue=i,f4(i),i=i.sibling;Ue=s,Nb=a,ps=l}_D(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ue=i):_D(t)}}function _D(t){for(;Ue!==null;){var e=Ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ps||J_(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ps)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Uo(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&oD(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}oD(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Gy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}ps||e.flags&512&&AN(e)}catch(h){Zn(e,e.return,h)}}if(e===t){Ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function CD(t){for(;Ue!==null;){var e=Ue;if(e===t){Ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ue=n;break}Ue=e.return}}function SD(t){for(;Ue!==null;){var e=Ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{J_(4,e)}catch(c){Zn(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Zn(e,s,c)}}var i=e.return;try{AN(e)}catch(c){Zn(e,i,c)}break;case 5:var o=e.return;try{AN(e)}catch(c){Zn(e,o,c)}}}catch(c){Zn(e,e.return,c)}if(e===t){Ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ue=a;break}Ue=e.return}}var xJ=Math.ceil,jE=nl.ReactCurrentDispatcher,vP=nl.ReactCurrentOwner,po=nl.ReactCurrentBatchConfig,jt=0,Ur=null,lr=null,Qr=0,Ni=0,Kf=Bu(0),Er=0,rw=null,th=0,X_=0,EP=0,uy=null,ni=null,_P=0,Bp=1/0,Cc=null,FE=!1,xN=null,hu=null,xb=!1,Yl=null,WE=0,dy=0,TN=null,Rv=-1,Pv=0;function Rs(){return jt&6?nr():Rv!==-1?Rv:Rv=nr()}function fu(t){return t.mode&1?jt&2&&Qr!==0?Qr&-Qr:dJ.transition!==null?(Pv===0&&(Pv=Z8()),Pv):(t=ln,t!==0||(t=window.event,t=t===void 0?16:sB(t.type)),t):1}function ta(t,e,n,r){if(50<dy)throw dy=0,TN=null,Error(ge(185));y0(t,n,r),(!(jt&2)||t!==Ur)&&(t===Ur&&(!(jt&2)&&(X_|=n),Er===4&&Dl(t,Qr)),ui(t,r),n===1&&jt===0&&!(e.mode&1)&&(Bp=nr()+500,Y_&&ju()))}function ui(t,e){var n=t.callbackNode;dZ(t,e);var r=AE(t,t===Ur?Qr:0);if(r===0)n!==null&&k2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&k2(n),e===1)t.tag===0?uJ(AD.bind(null,t)):CB(AD.bind(null,t)),oJ(function(){!(jt&6)&&ju()}),n=null;else{switch(J8(r)){case 1:n=KR;break;case 4:n=Y8;break;case 16:n=SE;break;case 536870912:n=Q8;break;default:n=SE}n=E4(n,p4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function p4(t,e){if(Rv=-1,Pv=0,jt&6)throw Error(ge(327));var n=t.callbackNode;if(cp()&&t.callbackNode!==n)return null;var r=AE(t,t===Ur?Qr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zE(t,r);else{e=r;var s=jt;jt|=2;var i=m4();(Ur!==t||Qr!==e)&&(Cc=null,Bp=nr()+500,jd(t,e));do try{PJ();break}catch(a){g4(t,a)}while(!0);aP(),jE.current=i,jt=s,lr!==null?e=0:(Ur=null,Qr=0,e=Er)}if(e!==0){if(e===2&&(s=nN(t),s!==0&&(r=s,e=RN(t,s))),e===1)throw n=rw,jd(t,0),Dl(t,r),ui(t,nr()),n;if(e===6)Dl(t,r);else{if(s=t.current.alternate,!(r&30)&&!TJ(s)&&(e=zE(t,r),e===2&&(i=nN(t),i!==0&&(r=i,e=RN(t,i))),e===1))throw n=rw,jd(t,0),Dl(t,r),ui(t,nr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:od(t,ni,Cc);break;case 3:if(Dl(t,r),(r&130023424)===r&&(e=_P+500-nr(),10<e)){if(AE(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Rs(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=uN(od.bind(null,t,ni,Cc),e);break}od(t,ni,Cc);break;case 4:if(Dl(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ea(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=nr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xJ(r/1960))-r,10<r){t.timeoutHandle=uN(od.bind(null,t,ni,Cc),r);break}od(t,ni,Cc);break;case 5:od(t,ni,Cc);break;default:throw Error(ge(329))}}}return ui(t,nr()),t.callbackNode===n?p4.bind(null,t):null}function RN(t,e){var n=uy;return t.current.memoizedState.isDehydrated&&(jd(t,e).flags|=256),t=zE(t,e),t!==2&&(e=ni,ni=n,e!==null&&PN(e)),t}function PN(t){ni===null?ni=t:ni.push.apply(ni,t)}function TJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sa(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dl(t,e){for(e&=~EP,e&=~X_,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ea(e),r=1<<n;t[n]=-1,e&=~r}}function AD(t){if(jt&6)throw Error(ge(327));cp();var e=AE(t,0);if(!(e&1))return ui(t,nr()),null;var n=zE(t,e);if(t.tag!==0&&n===2){var r=nN(t);r!==0&&(e=r,n=RN(t,r))}if(n===1)throw n=rw,jd(t,0),Dl(t,e),ui(t,nr()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,od(t,ni,Cc),ui(t,nr()),null}function CP(t,e){var n=jt;jt|=1;try{return t(e)}finally{jt=n,jt===0&&(Bp=nr()+500,Y_&&ju())}}function nh(t){Yl!==null&&Yl.tag===0&&!(jt&6)&&cp();var e=jt;jt|=1;var n=po.transition,r=ln;try{if(po.transition=null,ln=1,t)return t()}finally{ln=r,po.transition=n,jt=e,!(jt&6)&&ju()}}function SP(){Ni=Kf.current,$n(Kf)}function jd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iJ(n)),lr!==null)for(n=lr.return;n!==null;){var r=n;switch(sP(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&RE();break;case 3:Lp(),$n(ci),$n(gs),fP();break;case 5:hP(r);break;case 4:Lp();break;case 13:$n(Wn);break;case 19:$n(Wn);break;case 10:cP(r.type._context);break;case 22:case 23:SP()}n=n.return}if(Ur=t,lr=t=pu(t.current,null),Qr=Ni=e,Er=0,rw=null,EP=X_=th=0,ni=uy=null,vd!==null){for(e=0;e<vd.length;e++)if(n=vd[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}vd=null}return t}function g4(t,e){do{var n=lr;try{if(aP(),Nv.current=BE,UE){for(var r=qn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}UE=!1}if(eh=0,Pr=mr=qn=null,cy=!1,ew=0,vP.current=null,n===null||n.return===null){Er=1,rw=e,lr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Qr,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=hD(o);if(f!==null){f.flags&=-257,fD(f,o,a,i,e),f.mode&1&&dD(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){dD(i,l,e),AP();break e}c=Error(ge(426))}}else if(Bn&&a.mode&1){var w=hD(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),fD(w,o,a,i,e),iP(Up(c,a));break e}}i=c=Up(c,a),Er!==4&&(Er=2),uy===null?uy=[i]:uy.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=JB(i,c,e);iD(i,y);break e;case 1:a=c;var b=i.type,E=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(hu===null||!hu.has(E)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=XB(i,a,e);iD(i,_);break e}}i=i.return}while(i!==null)}w4(n)}catch(C){e=C,lr===n&&n!==null&&(lr=n=n.return);continue}break}while(!0)}function m4(){var t=jE.current;return jE.current=BE,t===null?BE:t}function AP(){(Er===0||Er===3||Er===2)&&(Er=4),Ur===null||!(th&268435455)&&!(X_&268435455)||Dl(Ur,Qr)}function zE(t,e){var n=jt;jt|=2;var r=m4();(Ur!==t||Qr!==e)&&(Cc=null,jd(t,e));do try{RJ();break}catch(s){g4(t,s)}while(!0);if(aP(),jt=n,jE.current=r,lr!==null)throw Error(ge(261));return Ur=null,Qr=0,Er}function RJ(){for(;lr!==null;)y4(lr)}function PJ(){for(;lr!==null&&!nZ();)y4(lr)}function y4(t){var e=v4(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,e===null?w4(t):lr=e,vP.current=null}function w4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=SJ(n,e),n!==null){n.flags&=32767,lr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Er=6,lr=null;return}}else if(n=CJ(n,e,Ni),n!==null){lr=n;return}if(e=e.sibling,e!==null){lr=e;return}lr=e=t}while(e!==null);Er===0&&(Er=5)}function od(t,e,n){var r=ln,s=po.transition;try{po.transition=null,ln=1,OJ(t,e,n,r)}finally{po.transition=s,ln=r}return null}function OJ(t,e,n,r){do cp();while(Yl!==null);if(jt&6)throw Error(ge(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(hZ(t,i),t===Ur&&(lr=Ur=null,Qr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xb||(xb=!0,E4(SE,function(){return cp(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=po.transition,po.transition=null;var o=ln;ln=1;var a=jt;jt|=4,vP.current=null,IJ(t,n),h4(n,t),JZ(cN),IE=!!aN,cN=aN=null,t.current=n,NJ(n),rZ(),jt=a,ln=o,po.transition=i}else t.current=n;if(xb&&(xb=!1,Yl=t,WE=s),i=t.pendingLanes,i===0&&(hu=null),oZ(n.stateNode),ui(t,nr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(FE)throw FE=!1,t=xN,xN=null,t;return WE&1&&t.tag!==0&&cp(),i=t.pendingLanes,i&1?t===TN?dy++:(dy=0,TN=t):dy=0,ju(),null}function cp(){if(Yl!==null){var t=J8(WE),e=po.transition,n=ln;try{if(po.transition=null,ln=16>t?16:t,Yl===null)var r=!1;else{if(t=Yl,Yl=null,WE=0,jt&6)throw Error(ge(331));var s=jt;for(jt|=4,Ue=t.current;Ue!==null;){var i=Ue,o=i.child;if(Ue.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ue=l;Ue!==null;){var u=Ue;switch(u.tag){case 0:case 11:case 15:ly(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ue=d;else for(;Ue!==null;){u=Ue;var h=u.sibling,f=u.return;if(l4(u),u===l){Ue=null;break}if(h!==null){h.return=f,Ue=h;break}Ue=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ue=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ue=o;else e:for(;Ue!==null;){if(i=Ue,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ly(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ue=y;break e}Ue=i.return}}var b=t.current;for(Ue=b;Ue!==null;){o=Ue;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Ue=E;else e:for(o=b;Ue!==null;){if(a=Ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:J_(9,a)}}catch(C){Zn(a,a.return,C)}if(a===o){Ue=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Ue=_;break e}Ue=a.return}}if(jt=s,ju(),ja&&typeof ja.onPostCommitFiberRoot=="function")try{ja.onPostCommitFiberRoot(H_,t)}catch{}r=!0}return r}finally{ln=n,po.transition=e}}return!1}function ID(t,e,n){e=Up(n,e),e=JB(t,e,1),t=du(t,e,1),e=Rs(),t!==null&&(y0(t,1,e),ui(t,e))}function Zn(t,e,n){if(t.tag===3)ID(t,t,n);else for(;e!==null;){if(e.tag===3){ID(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hu===null||!hu.has(r))){t=Up(n,t),t=XB(e,t,1),e=du(e,t,1),t=Rs(),e!==null&&(y0(e,1,t),ui(e,t));break}}e=e.return}}function kJ(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Rs(),t.pingedLanes|=t.suspendedLanes&n,Ur===t&&(Qr&n)===n&&(Er===4||Er===3&&(Qr&130023424)===Qr&&500>nr()-_P?jd(t,0):EP|=n),ui(t,e)}function b4(t,e){e===0&&(t.mode&1?(e=wb,wb<<=1,!(wb&130023424)&&(wb=4194304)):e=1);var n=Rs();t=Kc(t,e),t!==null&&(y0(t,e,n),ui(t,n))}function DJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),b4(t,n)}function $J(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),b4(t,n)}var v4;v4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ci.current)ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ii=!1,_J(t,e,n);ii=!!(t.flags&131072)}else ii=!1,Bn&&e.flags&1048576&&SB(e,kE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tv(t,e),t=e.pendingProps;var s=Dp(e,gs.current);ap(e,n),s=gP(null,e,r,t,s,n);var i=mP();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,li(r)?(i=!0,PE(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,uP(e),s.updater=Z_,e.stateNode=s,s._reactInternals=e,yN(e,r,t,n),e=vN(null,e,r,!0,i,n)):(e.tag=0,Bn&&i&&rP(e),Ss(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Tv(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=LJ(r),t=Uo(r,t),s){case 0:e=bN(null,e,r,t,n);break e;case 1:e=mD(null,e,r,t,n);break e;case 11:e=pD(null,e,r,t,n);break e;case 14:e=gD(null,e,r,Uo(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),bN(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),mD(t,e,r,s,n);case 3:e:{if(r4(e),t===null)throw Error(ge(387));r=e.pendingProps,i=e.memoizedState,s=i.element,RB(t,e),ME(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Up(Error(ge(423)),e),e=yD(t,e,r,n,s);break e}else if(r!==s){s=Up(Error(ge(424)),e),e=yD(t,e,r,n,s);break e}else for(Oi=uu(e.stateNode.containerInfo.firstChild),$i=e,Bn=!0,zo=null,n=xB(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($p(),r===s){e=Yc(t,e,n);break e}Ss(t,e,r,n)}e=e.child}return e;case 5:return PB(e),t===null&&pN(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,lN(r,s)?o=null:i!==null&&lN(r,i)&&(e.flags|=32),n4(t,e),Ss(t,e,o,n),e.child;case 6:return t===null&&pN(e),null;case 13:return s4(t,e,n);case 4:return dP(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Mp(e,null,r,n):Ss(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),pD(t,e,r,s,n);case 7:return Ss(t,e,e.pendingProps,n),e.child;case 8:return Ss(t,e,e.pendingProps.children,n),e.child;case 12:return Ss(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Rn(DE,r._currentValue),r._currentValue=o,i!==null)if(sa(i.value,o)){if(i.children===s.children&&!ci.current){e=Yc(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Lc(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),gN(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ge(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gN(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ss(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ap(e,n),s=go(s),r=r(s),e.flags|=1,Ss(t,e,r,n),e.child;case 14:return r=e.type,s=Uo(r,e.pendingProps),s=Uo(r.type,s),gD(t,e,r,s,n);case 15:return e4(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Uo(r,s),Tv(t,e),e.tag=1,li(r)?(t=!0,PE(e)):t=!1,ap(e,n),ZB(e,r,s),yN(e,r,s,n),vN(null,e,r,!0,t,n);case 19:return i4(t,e,n);case 22:return t4(t,e,n)}throw Error(ge(156,e.tag))};function E4(t,e){return K8(t,e)}function MJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ho(t,e,n,r){return new MJ(t,e,n,r)}function IP(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LJ(t){if(typeof t=="function")return IP(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qR)return 11;if(t===GR)return 14}return 2}function pu(t,e){var n=t.alternate;return n===null?(n=ho(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ov(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")IP(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Uf:return Fd(n.children,s,i,e);case HR:o=8,s|=8;break;case FI:return t=ho(12,n,e,s|2),t.elementType=FI,t.lanes=i,t;case WI:return t=ho(13,n,e,s),t.elementType=WI,t.lanes=i,t;case zI:return t=ho(19,n,e,s),t.elementType=zI,t.lanes=i,t;case P8:return eC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case T8:o=10;break e;case R8:o=9;break e;case qR:o=11;break e;case GR:o=14;break e;case Nl:o=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=ho(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fd(t,e,n,r){return t=ho(7,t,r,e),t.lanes=n,t}function eC(t,e,n,r){return t=ho(22,t,r,e),t.elementType=P8,t.lanes=n,t.stateNode={isHidden:!1},t}function fS(t,e,n){return t=ho(6,t,null,e),t.lanes=n,t}function pS(t,e,n){return e=ho(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function UJ(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K1(0),this.expirationTimes=K1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K1(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function NP(t,e,n,r,s,i,o,a,c){return t=new UJ(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=ho(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uP(i),t}function BJ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _4(t){if(!t)return Ru;t=t._reactInternals;e:{if(xh(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(li(n))return _B(t,n,e)}return e}function C4(t,e,n,r,s,i,o,a,c){return t=NP(n,r,!0,t,s,i,o,a,c),t.context=_4(null),n=t.current,r=Rs(),s=fu(n),i=Lc(r,s),i.callback=e??null,du(n,i,s),t.current.lanes=s,y0(t,s,r),ui(t,r),t}function tC(t,e,n,r){var s=e.current,i=Rs(),o=fu(s);return n=_4(n),e.context===null?e.context=n:e.pendingContext=n,e=Lc(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=du(s,e,o),t!==null&&(ta(t,s,o,i),Iv(t,s,o)),o}function HE(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ND(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xP(t,e){ND(t,e),(t=t.alternate)&&ND(t,e)}function jJ(){return null}var S4=typeof reportError=="function"?reportError:function(t){console.error(t)};function TP(t){this._internalRoot=t}nC.prototype.render=TP.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));tC(t,e,null,null)};nC.prototype.unmount=TP.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nh(function(){tC(null,t,null,null)}),e[Vc]=null}};function nC(t){this._internalRoot=t}nC.prototype.unstable_scheduleHydration=function(t){if(t){var e=tB();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kl.length&&e!==0&&e<kl[n].priority;n++);kl.splice(n,0,t),n===0&&rB(t)}};function RP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function rC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xD(){}function FJ(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=HE(o);i.call(l)}}var o=C4(e,r,t,0,null,!1,!1,"",xD);return t._reactRootContainer=o,t[Vc]=o.current,Yy(t.nodeType===8?t.parentNode:t),nh(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=HE(c);a.call(l)}}var c=NP(t,0,!1,null,null,!1,!1,"",xD);return t._reactRootContainer=c,t[Vc]=c.current,Yy(t.nodeType===8?t.parentNode:t),nh(function(){tC(e,c,n,r)}),c}function sC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=HE(o);a.call(c)}}tC(e,o,t,s)}else o=FJ(n,e,t,s,r);return HE(o)}X8=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mm(e.pendingLanes);n!==0&&(YR(e,n|1),ui(e,nr()),!(jt&6)&&(Bp=nr()+500,ju()))}break;case 13:nh(function(){var r=Kc(t,1);if(r!==null){var s=Rs();ta(r,t,1,s)}}),xP(t,1)}};QR=function(t){if(t.tag===13){var e=Kc(t,134217728);if(e!==null){var n=Rs();ta(e,t,134217728,n)}xP(t,134217728)}};eB=function(t){if(t.tag===13){var e=fu(t),n=Kc(t,e);if(n!==null){var r=Rs();ta(n,t,e,r)}xP(t,e)}};tB=function(){return ln};nB=function(t,e){var n=ln;try{return ln=t,e()}finally{ln=n}};XI=function(t,e,n){switch(e){case"input":if(GI(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=K_(r);if(!s)throw Error(ge(90));k8(r),GI(r,s)}}}break;case"textarea":$8(t,n);break;case"select":e=n.value,e!=null&&rp(t,!!n.multiple,e,!1)}};W8=CP;z8=nh;var WJ={usingClientEntryPoint:!1,Events:[b0,Wf,K_,j8,F8,CP]},cm={findFiberByHostInstance:bd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},zJ={bundleType:cm.bundleType,version:cm.version,rendererPackageName:cm.rendererPackageName,rendererConfig:cm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nl.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=G8(t),t===null?null:t.stateNode},findFiberByHostInstance:cm.findFiberByHostInstance||jJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tb.isDisabled&&Tb.supportsFiber)try{H_=Tb.inject(zJ),ja=Tb}catch{}}Fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WJ;Fi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!RP(e))throw Error(ge(200));return BJ(t,e,null,n)};Fi.createRoot=function(t,e){if(!RP(t))throw Error(ge(299));var n=!1,r="",s=S4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=NP(t,1,!1,null,null,n,!1,r,s),t[Vc]=e.current,Yy(t.nodeType===8?t.parentNode:t),new TP(e)};Fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=G8(e),t=t===null?null:t.stateNode,t};Fi.flushSync=function(t){return nh(t)};Fi.hydrate=function(t,e,n){if(!rC(e))throw Error(ge(200));return sC(null,t,e,!0,n)};Fi.hydrateRoot=function(t,e,n){if(!RP(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=S4;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=C4(e,null,t,1,n??null,s,!1,i,o),t[Vc]=e.current,Yy(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new nC(e)};Fi.render=function(t,e,n){if(!rC(e))throw Error(ge(200));return sC(null,t,e,!1,n)};Fi.unmountComponentAtNode=function(t){if(!rC(t))throw Error(ge(40));return t._reactRootContainer?(nh(function(){sC(null,null,t,!1,function(){t._reactRootContainer=null,t[Vc]=null})}),!0):!1};Fi.unstable_batchedUpdates=CP;Fi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!rC(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return sC(t,e,n,!1,r)};Fi.version="18.3.1-next-f1338f8080-20240426";function A4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(A4)}catch(t){console.error(t)}}A4(),A8.exports=Fi;var PP=A8.exports,TD=PP;BI.createRoot=TD.createRoot,BI.hydrateRoot=TD.hydrateRoot;const I4="2.31.7";let lm={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${I4}`},ue=class ON extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof ON?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ON&&n.cause.docsPath||n.docsPath,i=(a=lm.getDocsUrl)==null?void 0:a.call(lm,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...lm.version?[`Version: ${lm.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=I4}walk(e){return N4(this,e)}};function N4(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?N4(t.cause,e):e?null:t}let x4=class extends ue{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class HJ extends ue{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class qJ extends ue{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let GJ=class extends ue{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},T4=class extends ue{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},R4=class extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class RD extends ue{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function vg(t,{dir:e,size:n=32}={}){return typeof t=="string"?gu(t,{dir:e,size:n}):VJ(t,{dir:e,size:n})}function gu(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new R4({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function VJ(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new R4({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Ka(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Xn(t){return Ka(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function Wa(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const KJ=new TextEncoder;function Eg(t,e={}){return typeof t=="number"||typeof t=="bigint"?QJ(t,e):typeof t=="boolean"?YJ(t,e):Ka(t)?yo(t,e):Wd(t,e)}function YJ(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(_o(n,{size:e.size}),vg(n,{size:e.size})):n}const ac={zero:48,nine:57,A:65,F:70,a:97,f:102};function PD(t){if(t>=ac.zero&&t<=ac.nine)return t-ac.zero;if(t>=ac.A&&t<=ac.F)return t-(ac.A-10);if(t>=ac.a&&t<=ac.f)return t-(ac.a-10)}function yo(t,e={}){let n=t;e.size&&(_o(n,{size:e.size}),n=vg(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=PD(r.charCodeAt(a++)),l=PD(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new ue(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function QJ(t,e){const n=He(t,e);return yo(n)}function Wd(t,e={}){const n=KJ.encode(t);return typeof e.size=="number"?(_o(n,{size:e.size}),vg(n,{dir:"right",size:e.size})):n}function _o(t,{size:e}){if(Xn(t)>e)throw new GJ({givenSize:Xn(t),maxSize:e})}function Bi(t,e={}){const{signed:n}=e;e.size&&_o(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function ZJ(t,e={}){let n=t;if(e.size&&(_o(n,{size:e.size}),n=Wa(n)),Wa(n)==="0x00")return!1;if(Wa(n)==="0x01")return!0;throw new qJ(n)}function ia(t,e={}){return Number(Bi(t,e))}function P4(t,e={}){let n=yo(t);return e.size&&(_o(n,{size:e.size}),n=Wa(n,{dir:"right"})),new TextDecoder().decode(n)}const JJ=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function wo(t,e={}){return typeof t=="number"||typeof t=="bigint"?He(t,e):typeof t=="string"?jp(t,e):typeof t=="boolean"?O4(t,e):Sr(t,e)}function O4(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(_o(n,{size:e.size}),vg(n,{size:e.size})):n}function Sr(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=JJ[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(_o(r,{size:e.size}),vg(r,{dir:"right",size:e.size})):r}function He(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new x4({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?vg(a,{size:r}):a}const XJ=new TextEncoder;function jp(t,e={}){const n=XJ.encode(t);return Sr(n,e)}async function eX(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:He(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function oa(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new fX(t.type);return`${t.name}(${iC(t.inputs,{includeName:e})})`}function iC(t,{includeName:e=!1}={}){return t?t.map(n=>tX(n,{includeName:e})).join(e?", ":","):""}function tX(t,{includeName:e}){return t.type.startsWith("tuple")?`(${iC(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class nX extends ue{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class OD extends ue{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class k4 extends ue{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${iC(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class E0 extends ue{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class rX extends ue{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class sX extends ue{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Xn(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class iX extends ue{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class oX extends ue{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class kD extends ue{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class D4 extends ue{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class aX extends ue{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class $4 extends ue{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class DD extends ue{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Fp extends ue{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class M4 extends ue{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class cX extends ue{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class lX extends ue{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${oa(e.abiItem)}\`, and`,`\`${n.type}\` in \`${oa(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let uX=class extends ue{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class sw extends ue{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${iC(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class oC extends ue{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${oa(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class dX extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class hX extends ue{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let L4=class extends ue{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class fX extends ue{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function bo(t){return typeof t[0]=="string"?_g(t):pX(t)}function pX(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function _g(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let Pu=class extends ue{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},aC=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Rb=BigInt(2**32-1),$D=BigInt(32);function gX(t,e=!1){return e?{h:Number(t&Rb),l:Number(t>>$D&Rb)}:{h:Number(t>>$D&Rb)|0,l:Number(t&Rb)|0}}function mX(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=gX(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const yX=(t,e,n)=>t<<n|e>>>32-n,wX=(t,e,n)=>e<<n|t>>>32-n,bX=(t,e,n)=>e<<n-32|t>>>64-n,vX=(t,e,n)=>t<<n-32|e>>>64-n,ef=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function OP(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function iw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function aa(t,...e){if(!OP(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function EX(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");iw(t.outputLen),iw(t.blockLen)}function Wp(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function U4(t,e){aa(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function _X(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function zp(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function gS(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function pa(t,e){return t<<32-e|t>>>e}const CX=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function SX(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function AX(t){for(let e=0;e<t.length;e++)t[e]=SX(t[e]);return t}const MD=CX?t=>t:AX,B4=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",IX=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ow(t){if(aa(t),B4)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=IX[t[n]];return e}const cc={_0:48,_9:57,A:65,F:70,a:97,f:102};function LD(t){if(t>=cc._0&&t<=cc._9)return t-cc._0;if(t>=cc.A&&t<=cc.F)return t-(cc.A-10);if(t>=cc.a&&t<=cc.f)return t-(cc.a-10)}function kP(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(B4)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=LD(t.charCodeAt(i)),a=LD(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function NX(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function _0(t){return typeof t=="string"&&(t=NX(t)),aa(t),t}function _d(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];aa(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let DP=class{};function j4(t){const e=r=>t().update(_0(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function xX(t){const e=(r,s)=>t(s).update(_0(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function TX(t=32){if(ef&&typeof ef.getRandomValues=="function")return ef.getRandomValues(new Uint8Array(t));if(ef&&typeof ef.randomBytes=="function")return Uint8Array.from(ef.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const RX=BigInt(0),um=BigInt(1),PX=BigInt(2),OX=BigInt(7),kX=BigInt(256),DX=BigInt(113),F4=[],W4=[],z4=[];for(let t=0,e=um,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],F4.push(2*(5*r+n)),W4.push((t+1)*(t+2)/2%64);let s=RX;for(let i=0;i<7;i++)e=(e<<um^(e>>OX)*DX)%kX,e&PX&&(s^=um<<(um<<BigInt(i))-um);z4.push(s)}const H4=mX(z4,!0),$X=H4[0],MX=H4[1],UD=(t,e,n)=>n>32?bX(t,e,n):yX(t,e,n),BD=(t,e,n)=>n>32?vX(t,e,n):wX(t,e,n);function q4(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=UD(l,u,1)^n[a],h=BD(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=W4[o],c=UD(s,i,a),l=BD(s,i,a),u=F4[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=$X[r],t[1]^=MX[r]}zp(n)}let $P=class G4 extends DP{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,iw(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=_X(this.state)}clone(){return this._cloneInto()}keccak(){MD(this.state32),q4(this.state32,this.rounds),MD(this.state32),this.posOut=0,this.pos=0}update(e){Wp(this),e=_0(e),aa(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Wp(this,!1),aa(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return iw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(U4(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,zp(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new G4(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Fu=(t,e,n)=>j4(()=>new $P(e,t,n)),LX=Fu(6,144,224/8),UX=Fu(6,136,256/8),BX=Fu(6,104,384/8),jX=Fu(6,72,512/8),FX=Fu(1,144,224/8),MP=Fu(1,136,256/8),WX=Fu(1,104,384/8),zX=Fu(1,72,512/8),V4=(t,e,n)=>xX((r={})=>new $P(e,t,r.dkLen===void 0?n:r.dkLen,!0)),HX=V4(31,168,128/8),qX=V4(31,136,256/8),C5e=Object.freeze(Object.defineProperty({__proto__:null,Keccak:$P,keccakP:q4,keccak_224:FX,keccak_256:MP,keccak_384:WX,keccak_512:zX,sha3_224:LX,sha3_256:UX,sha3_384:BX,sha3_512:jX,shake128:HX,shake256:qX},Symbol.toStringTag,{value:"Module"}));function Yr(t,e){const n=e||"hex",r=MP(Ka(t,{strict:!1})?Eg(t):t);return n==="bytes"?r:wo(r)}const mS=new aC(8192);function C0(t,e){if(mS.has(`${t}.${e}`))return mS.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Yr(Wd(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return mS.set(`${t}.${e}`,i),i}function Dc(t,e){if(!vo(t,{strict:!1}))throw new Pu({address:t});return C0(t,e)}const GX=/^0x[a-fA-F0-9]{40}$/,yS=new aC(8192);function vo(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(yS.has(r))return yS.get(r);const s=GX.test(t)?t.toLowerCase()===t?!0:n?C0(t)===t:!0:!1;return yS.set(r,s),s}function Hp(t,e,n,{strict:r}={}){return Ka(t,{strict:!1})?qE(t,e,n,{strict:r}):Q4(t,e,n,{strict:r})}function K4(t,e){if(typeof e=="number"&&e>0&&e>Xn(t)-1)throw new T4({offset:e,position:"start",size:Xn(t)})}function Y4(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Xn(t)!==n-e)throw new T4({offset:n,position:"end",size:Xn(t)})}function Q4(t,e,n,{strict:r}={}){K4(t,e);const s=t.slice(e,n);return r&&Y4(s,e,n),s}function qE(t,e,n,{strict:r}={}){K4(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Y4(s,e,n),s}const VX=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Z4=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Wu(t,e){if(t.length!==e.length)throw new iX({expectedLength:t.length,givenLength:e.length});const n=KX({params:t,values:e}),r=UP(n);return r.length===0?"0x":r}function KX({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(LP({param:t[r],value:e[r]}));return n}function LP({param:t,value:e}){const n=BP(t.type);if(n){const[r,s]=n;return QX(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return tee(e,{param:t});if(t.type==="address")return YX(e);if(t.type==="bool")return JX(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=Z4.exec(t.type)??[];return XX(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return ZX(e,{param:t});if(t.type==="string")return eee(e);throw new dX(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function UP(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Xn(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(He(e+s,{size:32})),r.push(a),s+=Xn(a)):n.push(a)}return bo([...n,...r])}function YX(t){if(!vo(t))throw new Pu({address:t});return{dynamic:!1,encoded:gu(t.toLowerCase())}}function QX(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new L4(t);if(!r&&t.length!==e)throw new rX({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=LP({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=UP(i);if(r){const a=He(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?bo([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:bo(i.map(({encoded:o})=>o))}}function ZX(t,{param:e}){const[,n]=e.type.split("bytes"),r=Xn(t);if(!n){let s=t;return r%32!==0&&(s=gu(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:bo([gu(He(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new sX({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:gu(t,{dir:"right"})}}function JX(t){if(typeof t!="boolean")throw new ue(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:gu(O4(t))}}function XX(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new x4({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:He(t,{size:32,signed:e})}}function eee(t){const e=jp(t),n=Math.ceil(Xn(e)/32),r=[];for(let s=0;s<n;s++)r.push(gu(Hp(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:bo([gu(He(Xn(e),{size:32})),...r])}}function tee(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=LP({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?UP(r):bo(r.map(({encoded:s})=>s))}}function BP(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const wS="/docs/contract/encodeDeployData";function cC(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new nX({docsPath:wS});if(!("inputs"in s))throw new OD({docsPath:wS});if(!s.inputs||s.inputs.length===0)throw new OD({docsPath:wS});const i=Wu(s.inputs,n);return _g([r,i])}function er(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class Th extends ue{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class kv extends ue{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function nee(t){const e=Yr(`0x${t.substring(4)}`).substring(26);return C0(`0x${e}`)}const ree="modulepreload",see=function(t){return"/"+t},jD={},hs=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=see(c),c in jD)return;jD[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":ree,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function iee({hash:t,signature:e}){const n=Ka(t)?t:wo(t),{secp256k1:r}=await hs(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>_ie);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=FD(f);return new r.Signature(Bi(l),Bi(u)).addRecoveryBit(p)}const o=Ka(e)?e:wo(e);if(Xn(o)!==65)throw new Error("invalid signature length");const a=ia(`0x${o.slice(130)}`),c=FD(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function FD(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function J4({hash:t,signature:e}){return nee(await iee({hash:t,signature:e}))}class WD extends ue{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class X4 extends ue{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class oee extends ue{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const aee={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new oee({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new X4({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new WD({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new WD({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function jP(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(aee);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function cee(t,e="hex"){const n=ej(t),r=jP(new Uint8Array(n.length));return n.encode(r),e==="hex"?Sr(r.bytes):r.bytes}function ej(t){return Array.isArray(t)?lee(t.map(e=>ej(e))):uee(t)}function lee(t){const e=t.reduce((s,i)=>s+i.length,0),n=tj(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function uee(t){const e=typeof t=="string"?yo(t):t,n=tj(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function tj(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ue("Length is too large.")}function dee(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Yr(_g(["0x05",cee([e?He(e):"0x",s,n?He(n):"0x"])]));return r==="bytes"?yo(i):i}async function nj(t){const{authorization:e,signature:n}=t;return J4({hash:dee(e),signature:n??e})}class kN extends ue{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class hee extends ue{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class fee extends ue{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class rj extends ue{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function sj({chain:t,currentChainId:e}){if(!t)throw new fee;if(e!==t.id)throw new hee({chain:t,currentChainId:e})}const pee={gwei:9,wei:18},gee={ether:-9,wei:9},mee={ether:-18,gwei:-9};function Rh(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function di(t,e="wei"){return Rh(t,gee[e])}class Cd extends ue{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Cd,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Cd,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class GE extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${di(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(GE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class DN extends ue{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${di(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(DN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class $N extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty($N,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class MN extends ue{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(MN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class LN extends ue{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(LN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class UN extends ue{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(UN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class BN extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(BN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class jN extends ue{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(jN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class FN extends ue{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(FN,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class VE extends ue{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${di(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${di(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(VE,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class S0 extends ue{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function FP(t,e="wei"){return Rh(t,pee[e])}function A0(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class yee extends ue{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class wee extends ue{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",A0(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class bee extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=A0({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${FP(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${di(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${di(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${di(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ij extends ue{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class oj extends ue{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class vee extends ue{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const _r=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),Eee=t=>t,WP=t=>t;class hy extends ue{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${WP(o)}`,e&&`Request body: ${_r(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class zP extends ue{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${WP(r)}`,`Request body: ${_r(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class zD extends ue{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${WP(n)}`,`Request body: ${_r(e)}`],name:"TimeoutError"})}}const _ee=-1;class gi extends ue{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof zP?e.code:n??_ee}}class zi extends gi{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class aw extends gi{constructor(e){super(e,{code:aw.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(aw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class cw extends gi{constructor(e){super(e,{code:cw.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(cw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class lw extends gi{constructor(e,{method:n}={}){super(e,{code:lw.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(lw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class uw extends gi{constructor(e){super(e,{code:uw.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(uw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class rh extends gi{constructor(e){super(e,{code:rh.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(rh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class sh extends gi{constructor(e){super(e,{code:sh.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(sh,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class dw extends gi{constructor(e){super(e,{code:dw.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(dw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class mu extends gi{constructor(e){super(e,{code:mu.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(mu,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class qp extends gi{constructor(e){super(e,{code:qp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Sd extends gi{constructor(e,{method:n}={}){super(e,{code:Sd.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Sd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Gp extends gi{constructor(e){super(e,{code:Gp.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class hw extends gi{constructor(e){super(e,{code:hw.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class gr extends zi{constructor(e){super(e,{code:gr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(gr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class fw extends zi{constructor(e){super(e,{code:fw.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(fw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class pw extends zi{constructor(e,{method:n}={}){super(e,{code:pw.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(pw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class gw extends zi{constructor(e){super(e,{code:gw.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class mw extends zi{constructor(e){super(e,{code:mw.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(mw,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ya extends zi{constructor(e){super(e,{code:Ya.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ya,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Vp extends zi{constructor(e){super(e,{code:Vp.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Vp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class yw extends zi{constructor(e){super(e,{code:yw.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(yw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class ww extends zi{constructor(e){super(e,{code:ww.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(ww,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class bw extends zi{constructor(e){super(e,{code:bw.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(bw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class vw extends zi{constructor(e){super(e,{code:vw.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(vw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Ew extends zi{constructor(e){super(e,{code:Ew.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Ew,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Kp extends zi{constructor(e){super(e,{code:Kp.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Kp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Cee extends gi{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function lC(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ue?t.walk(s=>(s==null?void 0:s.code)===Cd.code):t;return r instanceof ue?new Cd({cause:t,message:r.details}):Cd.nodeMessage.test(n)?new Cd({cause:t,message:t.details}):GE.nodeMessage.test(n)?new GE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):DN.nodeMessage.test(n)?new DN({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):$N.nodeMessage.test(n)?new $N({cause:t,nonce:e==null?void 0:e.nonce}):MN.nodeMessage.test(n)?new MN({cause:t,nonce:e==null?void 0:e.nonce}):LN.nodeMessage.test(n)?new LN({cause:t,nonce:e==null?void 0:e.nonce}):UN.nodeMessage.test(n)?new UN({cause:t}):BN.nodeMessage.test(n)?new BN({cause:t,gas:e==null?void 0:e.gas}):jN.nodeMessage.test(n)?new jN({cause:t,gas:e==null?void 0:e.gas}):FN.nodeMessage.test(n)?new FN({cause:t}):VE.nodeMessage.test(n)?new VE({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new S0({cause:t})}function aj(t,{docsPath:e,...n}){const r=(()=>{const s=lC(t,n);return s instanceof S0?t:s})();return new bee(r,{docsPath:e,...n})}function uC(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const See={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Cg(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Aee(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>Sr(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=He(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=He(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=He(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=He(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=He(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=He(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=See[t.type]),typeof t.value<"u"&&(e.value=He(t.value)),e}function Aee(t){return t.map(e=>({address:e.address,r:e.r?He(BigInt(e.r)):e.r,s:e.s?He(BigInt(e.s)):e.s,chainId:He(e.chainId),nonce:He(e.nonce),...typeof e.yParity<"u"?{yParity:He(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:He(e.v)}:{}}))}function tt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const Iee=2n**256n-1n;function Ph(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?er(e):void 0;if(o&&!vo(o.address))throw new Pu({address:o.address});if(i&&!vo(i))throw new Pu({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new yee;if(r&&r>Iee)throw new GE({maxFeePerGas:r});if(s&&r&&s>r)throw new VE({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function Sg(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return ia(e)}class Nee extends ue{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class HP extends ue{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class xee extends ue{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${di(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class cj extends ue{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const lj={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function uj(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?ia(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?ia(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?lj[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Tee(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Tee(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function dj(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:uj(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Ba(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?He(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new cj({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||dj)(c)}async function qP(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Ree(t,e){return hj(t,e)}async function hj(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await tt(t,Ba,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Bi(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):tt(t,Ba,"getBlock")({}),tt(t,qP,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new HP;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Pee(t,e){return WN(t,e)}async function WN(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Nee;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await tt(t,Ba,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new HP;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await hj(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await tt(t,qP,"getGasPrice")({}))}}class Oee extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=A0({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${FP(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${di(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${di(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${di(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function kee(t,{docsPath:e,...n}){const r=(()=>{const s=lC(t,n);return s instanceof S0?t:s})();return new Oee(r,{docsPath:e,...n})}class Dee extends ue{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class $ee extends ue{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function HD(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function Mee(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=HD(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=HD(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function qD(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new RD({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new RD({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Lee(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=He(e)),n!==void 0&&(o.nonce=He(n)),r!==void 0&&(o.state=qD(r)),s!==void 0){if(o.state)throw new $ee;o.stateDiff=qD(s)}return o}function GP(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!vo(n,{strict:!1}))throw new Pu({address:n});if(e[n])throw new Dee({address:n});e[n]=Lee(r)}return e}async function VP(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?He(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function dC(t,e){var s,i,o;const{account:n=t.account}=e,r=n?er(n):void 0;try{let L=function(x){const{block:$,request:R,rpcStateOverride:k}=x;return t.request({method:"eth_estimateGas",params:k?[R,$??"latest",k]:$?[R,$]:[R]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,value:_,stateOverride:C,...I}=await I0(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?He(d):void 0)||h,S=GP(C),D=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await nj({authorization:c[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`")})})();Ph(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,q=(P||Cg)({...uC(I,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:D,value:_});let T=BigInt(await L({block:N,request:q,rpcStateOverride:S}));if(c){const x=await VP(t,{address:q.from}),$=await Promise.all(c.map(async R=>{const{address:k}=R,j=await L({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:k,value:He(x)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));T+=$.reduce((R,k)=>R+k,0n)}return T}catch(a){throw kee(a,{...e,account:r,chain:t.chain})}}async function KP(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?He(r):n]},{dedupe:!!r});return ia(s)}function fj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>yo(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>Sr(i))}function pj(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>yo(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>yo(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>Sr(o))}function Uee(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Bee(t,e,n){return t&e^~t&n}function jee(t,e,n){return t&e^t&n^e&n}class Fee extends DP{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=gS(this.buffer)}update(e){Wp(this),e=_0(e),aa(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=gS(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Wp(this),U4(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,zp(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Uee(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=gS(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const cl=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Wee=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ll=new Uint32Array(64);class zee extends Fee{constructor(e=32){super(64,e,8,!1),this.A=cl[0]|0,this.B=cl[1]|0,this.C=cl[2]|0,this.D=cl[3]|0,this.E=cl[4]|0,this.F=cl[5]|0,this.G=cl[6]|0,this.H=cl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)ll[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=ll[d-15],f=ll[d-2],p=pa(h,7)^pa(h,18)^h>>>3,g=pa(f,17)^pa(f,19)^f>>>10;ll[d]=g+ll[d-7]+p+ll[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=pa(a,6)^pa(a,11)^pa(a,25),f=u+h+Bee(a,c,l)+Wee[d]+ll[d]|0,g=(pa(r,2)^pa(r,13)^pa(r,22))+jee(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){zp(ll)}destroy(){this.set(0,0,0,0,0,0,0,0),zp(this.buffer)}}const gj=j4(()=>new zee),Hee=gj;function qee(t,e){return Hee(Ka(t,{strict:!1})?Eg(t):t)}function Gee(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=qee(e);return s.set([n],0),r==="bytes"?s:Sr(s)}function Vee(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(Gee({commitment:i,to:r,version:n}));return s}const GD=6,mj=32,YP=4096,yj=mj*YP,VD=yj*GD-1-1*YP*GD;class Kee extends ue{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Yee extends ue{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Qee(t){const e=typeof t.data=="string"?yo(t.data):t.data,n=Xn(e);if(!n)throw new Yee;if(n>VD)throw new Kee({maxSize:VD,size:n});const r=[];let s=!0,i=0;for(;s;){const o=jP(new Uint8Array(yj));let a=0;for(;a<YP;){const c=e.slice(i,i+(mj-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>Sr(o.bytes))}function Zee(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Qee({data:e}),i=t.commitments??fj({blobs:s,kzg:n,to:r}),o=t.proofs??pj({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Jee(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new wee({transaction:t})}const wj=["blobVersionedHashes","chainId","fees","gas","nonce","type"],KD=new Map;async function I0(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=wj,type:u}=e,d=n&&er(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await tt(t,Ba,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await tt(t,Sg,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await tt(t,KP,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=fj({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=Vee({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=pj({blobs:r,commitments:y,kzg:o}),E=Zee({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=E}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Jee(h)}catch{let y=KD.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",KD.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:E}=await WN(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<E)throw new xee({maxPriorityFeePerGas:E});h.maxPriorityFeePerGas=E,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new HP;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await WN(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await tt(t,dC,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Ph(h),delete h.parameters,h}async function QP(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const bS=new aC(128);async function N0(t,e){var b,E,_,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new Th({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?er(n):null;try{Ph(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await nj({authorization:i[0]}).catch(()=>{throw new ue("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let A;r!==null&&(A=await tt(t,Sg,"getChainId")({}),sj({currentChainId:A,chain:r}));const N=(_=(E=(b=t.chain)==null?void 0:b.formatters)==null?void 0:E.transactionRequest)==null?void 0:_.format,D=(N||Cg)({...uC(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:A,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:g}),P=bS.get(t.uid),B=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:B,params:[D]},{retryCount:0})}catch(q){if(P===!1)throw q;const L=q;if(L.name==="InvalidInputRpcError"||L.name==="InvalidParamsRpcError"||L.name==="MethodNotFoundRpcError"||L.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(T=>(bS.set(t.uid,!0),T)).catch(T=>{const x=T;throw x.name==="MethodNotFoundRpcError"||x.name==="MethodNotSupportedRpcError"?(bS.set(t.uid,!1),L):x});throw L}}if((y==null?void 0:y.type)==="local"){const A=await tt(t,I0,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...wj,"sidecars"],type:p,value:g,...w,to:I}),N=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await y.signTransaction(A,{serializer:N});return await tt(t,QP,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new kv({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new kv({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof kv?I:aj(I,{...e,account:y,chain:e.chain||void 0})}}function Xee(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=cC({abi:n,args:r,bytecode:s});return N0(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const zN=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],HN=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],bj=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],vj=[...bj,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],ete=[...bj,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],YD=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],QD=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],ZD=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function tte(t,e={}){typeof e.size<"u"&&_o(t,{size:e.size});const n=Sr(t,e);return Bi(n,e)}function nte(t,e={}){let n=t;if(typeof e.size<"u"&&(_o(n,{size:e.size}),n=Wa(n)),n.length>1||n[0]>1)throw new HJ(n);return!!n[0]}function Uc(t,e={}){typeof e.size<"u"&&_o(t,{size:e.size});const n=Sr(t,e);return ia(n,e)}function rte(t,e={}){let n=t;return typeof e.size<"u"&&(_o(n,{size:e.size}),n=Wa(n,{dir:"right"})),new TextDecoder().decode(n)}function x0(t,e){const n=typeof e=="string"?yo(e):e,r=jP(n);if(Xn(n)===0&&t.length>0)throw new E0;if(Xn(e)&&Xn(e)<32)throw new k4({data:typeof e=="string"?e:Sr(e),params:t,size:Xn(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=lp(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function lp(t,e,{staticPosition:n}){const r=BP(e.type);if(r){const[s,i]=r;return ite(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return lte(t,e,{staticPosition:n});if(e.type==="address")return ste(t);if(e.type==="bool")return ote(t);if(e.type.startsWith("bytes"))return ate(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return cte(t,e);if(e.type==="string")return ute(t,{staticPosition:n});throw new hX(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const JD=32,qN=32;function ste(t){const e=t.readBytes(32);return[C0(Sr(Q4(e,-20))),32]}function ite(t,e,{length:n,staticPosition:r}){if(!n){const o=Uc(t.readBytes(qN)),a=r+o,c=a+JD;t.setPosition(a);const l=Uc(t.readBytes(JD)),u=_w(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=lp(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(_w(e)){const o=Uc(t.readBytes(qN)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=lp(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=lp(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function ote(t){return[nte(t.readBytes(32),{size:32}),32]}function ate(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=Uc(t.readBytes(32));t.setPosition(n+o);const a=Uc(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[Sr(c),32]}return[Sr(t.readBytes(Number.parseInt(s),32)),32]}function cte(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?tte(s,{signed:n}):Uc(s,{signed:n}),32]}function lte(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(_w(e)){const o=Uc(t.readBytes(qN)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=lp(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=lp(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function ute(t,{staticPosition:e}){const n=Uc(t.readBytes(32)),r=e+n;t.setPosition(r);const s=Uc(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=rte(Wa(i));return t.setPosition(e+32),[o,32]}function _w(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(_w);const n=BP(t.type);return!!(n&&_w({...t,type:n[1]}))}const dte=t=>Yr(Eg(t));function hte(t){return dte(t)}const fte="1.0.8";let Hi=class GN extends Error{constructor(e,n={}){var o;const r=n.cause instanceof GN?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof GN&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${fte}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function rl(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const Ej=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,_j=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Cj=/^\(.+?\).*?$/,XD=/^tuple(?<array>(\[(\d*)\])*)$/;function VN(t){let e=t.type;if(XD.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=VN(i),s<n-1&&(e+=", ")}const r=rl(XD,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,VN({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function dm(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=VN(s),r!==n-1&&(e+=", ")}return e}function KE(t){var e;return t.type==="function"?`function ${t.name}(${dm(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${dm(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${dm(t.inputs)})`:t.type==="error"?`error ${t.name}(${dm(t.inputs)})`:t.type==="constructor"?`constructor(${dm(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const Sj=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function pte(t){return Sj.test(t)}function gte(t){return rl(Sj,t)}const Aj=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function mte(t){return Aj.test(t)}function yte(t){return rl(Aj,t)}const Ij=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function wte(t){return Ij.test(t)}function bte(t){return rl(Ij,t)}const Nj=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function ZP(t){return Nj.test(t)}function vte(t){return rl(Nj,t)}const xj=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Ete(t){return xj.test(t)}function _te(t){return rl(xj,t)}const Tj=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Cte(t){return Tj.test(t)}function Ste(t){return rl(Tj,t)}const Ate=/^receive\(\) external payable$/;function Ite(t){return Ate.test(t)}const Nte=new Set(["indexed"]),KN=new Set(["calldata","memory","storage"]);class xte extends Hi{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Tte extends Hi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Rte extends Hi{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Pte extends Hi{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Ote extends Hi{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class kte extends Hi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Dte extends Hi{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class $te extends Hi{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ag extends Hi{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Mte extends Hi{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Lte extends Hi{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Ute extends Hi{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Bte extends Hi{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function jte(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const vS=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function YN(t,e={}){if(wte(t))return Fte(t,e);if(mte(t))return Wte(t,e);if(pte(t))return zte(t,e);if(Ete(t))return Hte(t,e);if(Cte(t))return qte(t);if(Ite(t))return{type:"receive",stateMutability:"payable"};throw new Mte({signature:t})}function Fte(t,e={}){const n=bte(t);if(!n)throw new Ag({signature:t,type:"function"});const r=Vo(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(ih(r[a],{modifiers:KN,structs:e,type:"function"}));const o=[];if(n.returns){const a=Vo(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(ih(a[l],{modifiers:KN,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function Wte(t,e={}){const n=yte(t);if(!n)throw new Ag({signature:t,type:"event"});const r=Vo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ih(r[o],{modifiers:Nte,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function zte(t,e={}){const n=gte(t);if(!n)throw new Ag({signature:t,type:"error"});const r=Vo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ih(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Hte(t,e={}){const n=_te(t);if(!n)throw new Ag({signature:t,type:"constructor"});const r=Vo(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(ih(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function qte(t){const e=Ste(t);if(!e)throw new Ag({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Gte=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Vte=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Kte=/^u?int$/;function ih(t,e){var d,h;const n=jte(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(vS.has(n))return vS.get(n);const r=Cj.test(t),s=rl(r?Vte:Gte,t);if(!s)throw new Pte({param:t});if(s.name&&Qte(s.name))throw new Ote({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Vo(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(ih(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Kte.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!Rj(c))throw new Rte({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new kte({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(KN.has(s.modifier)&&!Zte(c,!!s.array))throw new Dte({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return vS.set(n,u),u}function Vo(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Vo(a,[...e,n.trim()]):Vo(a,e,`${n}${o}`,r);case"(":return Vo(a,e,`${n}${o}`,r+1);case")":return Vo(a,e,`${n}${o}`,r-1);default:return Vo(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new Bte({current:n,depth:r});return e.push(n.trim()),e}function Rj(t){return t==="address"||t==="bool"||t==="function"||t==="string"||Ej.test(t)||_j.test(t)}const Yte=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Qte(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||Ej.test(t)||_j.test(t)||Yte.test(t)}function Zte(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function Pj(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!ZP(a))continue;const c=vte(a);if(!c)throw new Ag({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=ih(p,{type:"struct"});u.push(g)}if(!u.length)throw new Lte({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=Oj(c,e)}return r}const Jte=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Oj(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(Cj.test(o.type))r.push(o);else{const c=rl(Jte,o.type);if(!(c!=null&&c.type))throw new $te({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new Ute({type:u});r.push({...o,type:`tuple${l??""}`,components:Oj(e[u]??[],e,new Set([...n,u]))})}else if(Rj(u))r.push(o);else throw new Tte({type:u})}}return r}function kj(t){const e=Pj(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];ZP(i)||n.push(YN(i,e))}return n}function e3(t){let e;if(typeof t=="string")e=YN(t);else{const n=Pj(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!ZP(i)){e=YN(i,n);break}}}if(!e)throw new xte({signature:t});return e}function Xte(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ue("Unable to normalize signature.");return s}const ene=t=>{const e=typeof t=="string"?t:KE(t);return Xte(e)};function Dj(t){return hte(ene(t))}const hC=Dj,T0=t=>Hp(Dj(t),0,4);function Oh(t){const{abi:e,args:n=[],name:r}=t,s=Ka(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?T0(a)===r:a.type==="event"?hC(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?QN(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=$j(a.inputs,o.inputs,n);if(l)throw new lX({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function QN(t,e){const n=typeof t,r=e.type;switch(r){case"address":return vo(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>QN(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>QN(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function $j(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return $j(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?vo(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?vo(n[r],{strict:!1}):!1)return o}}const ES="/docs/contract/decodeFunctionResult";function kh(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Oh({abi:e,args:n,name:r});if(!a)throw new Fp(r,{docsPath:ES});i=a}if(i.type!=="function")throw new Fp(void 0,{docsPath:ES});if(!i.outputs)throw new M4(i.name,{docsPath:ES});const o=x0(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const t3="/docs/contract/encodeFunctionData";function tne(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Oh({abi:e,args:n,name:r});if(!i)throw new Fp(r,{docsPath:t3});s=i}if(s.type!=="function")throw new Fp(void 0,{docsPath:t3});return{abi:[s],functionName:T0(oa(s))}}function Co(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:tne(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Wu(s.inputs,e??[]):void 0;return _g([i,o??"0x"])}function Ig({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new kN({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new kN({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const Mj={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Lj={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},nne={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function rne(t){const{abi:e,data:n}=t,r=Hp(n,0,4);if(r==="0x")throw new E0;const i=[...e||[],Lj,nne].find(o=>o.type==="error"&&r===T0(oa(o)));if(!i)throw new D4(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?x0(i.inputs,Hp(n,4)):void 0,errorName:i.name}}function Uj({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?_r(e[i]):e[i]}`).join(", ")})`}class Bj extends ue{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?er(n):void 0;let g=A0({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${FP(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${di(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${di(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${di(l)} gwei`,nonce:u});f&&(g+=`
${Mee(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class jj extends ue{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Oh({abi:n,args:r,name:o}),l=c?Uj({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?oa(c,{includeName:!0}):void 0,d=A0({address:s&&Eee(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class ZN extends ue{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=rne({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=Mj[f]}else{const f=u?oa(u,{includeName:!0}):void 0,p=u&&h?Uj({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof D4&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class sne extends ue{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class ine extends ue{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class fC extends ue{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function JP(t,e){var r,s,i,o,a,c;if(!(t instanceof ue))return!1;const n=t.walk(l=>l instanceof ZN);return n instanceof ZN?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===Mj[50]):!1}function one(t){const{abi:e,data:n}=t,r=Hp(n,0,4),s=e.find(i=>i.type==="function"&&r===T0(oa(i)));if(!s)throw new cX(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?x0(s.inputs,Hp(n,4)):void 0}}const _S="/docs/contract/encodeErrorResult";function n3(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Oh({abi:e,args:r,name:n});if(!c)throw new kD(n,{docsPath:_S});s=c}if(s.type!=="error")throw new kD(void 0,{docsPath:_S});const i=oa(s),o=T0(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new oX(s.name,{docsPath:_S});a=Wu(s.inputs,r)}return _g([o,a])}const CS="/docs/contract/encodeFunctionResult";function ane(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Oh({abi:e,name:n});if(!o)throw new Fp(n,{docsPath:CS});s=o}if(s.type!=="function")throw new Fp(void 0,{docsPath:CS});if(!s.outputs)throw new M4(s.name,{docsPath:CS});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new L4(r)})();return Wu(s.outputs,i)}const XP="x-batch-gateway:true";async function cne(t){const{data:e,ccipRequest:n}=t,{args:[r]}=one({abi:HN,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(XP)?await cne({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=lne(c)}})),ane({abi:HN,functionName:"query",result:[s,i]})}function lne(t){return t.name==="HttpRequestError"&&t.status?n3({abi:HN,errorName:"HttpError",args:[t.status,t.shortMessage]}):n3({abi:[Lj],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function Fj(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Ka(e)?e:null}function Dv(t){let e=new Uint8Array(32).fill(0);if(!t)return Sr(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=Fj(n[r]),i=s?Eg(s):Yr(Wd(n[r]),"bytes");e=Yr(bo([e,i]),"bytes")}return Sr(e)}function une(t){return`[${t.slice(2)}]`}function dne(t){const e=new Uint8Array(32).fill(0);return t?Fj(t)||Yr(Wd(t)):Sr(e)}function pC(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(Wd(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=Wd(s[i]);o.byteLength>255&&(o=Wd(une(dne(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const hne=3;function oh(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof fC?t:t instanceof ue?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof E0?new sne({functionName:i}):[hne,rh.code].includes(c)&&(l||u||d||h)?new ZN({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof zP?u:h??d}):t;return new jj(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const eO=BigInt(0),JN=BigInt(1);function YE(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Pb(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Wj(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?eO:BigInt("0x"+t)}function gC(t){return Wj(ow(t))}function zj(t){return aa(t),Wj(ow(Uint8Array.from(t).reverse()))}function tO(t,e){return kP(t.toString(16).padStart(e*2,"0"))}function Hj(t,e){return tO(t,e).reverse()}function so(t,e,n){let r;if(typeof e=="string")try{r=kP(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(OP(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const SS=t=>typeof t=="bigint"&&eO<=t;function fne(t,e,n){return SS(t)&&SS(e)&&SS(n)&&e<=t&&t<n}function pne(t,e,n,r){if(!fne(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function gne(t){let e;for(e=0;t>eO;t>>=JN,e+=1);return e}const mC=t=>(JN<<BigInt(t))-JN;function mne(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return _d(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function nO(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function r3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const yne="0.1.1";function wne(){return yne}let ir=class XN extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof XN){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof XN&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${wne()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return qj(this,e)}};function qj(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?qj(t.cause,e):e?null:t}const bne="#__bigint";function vne(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+bne:s,n)}function Ene(t,e){if(i3(t)>e)throw new Pne({givenSize:i3(t),maxSize:e})}const lc={zero:48,nine:57,A:65,F:70,a:97,f:102};function s3(t){if(t>=lc.zero&&t<=lc.nine)return t-lc.zero;if(t>=lc.A&&t<=lc.F)return t-(lc.A-10);if(t>=lc.a&&t<=lc.f)return t-(lc.a-10)}function _ne(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new One({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function rO(t,e){if(Eo(t)>e)throw new Lne({givenSize:Eo(t),maxSize:e})}function Cne(t,e){if(typeof e=="number"&&e>0&&e>Eo(t)-1)throw new Qj({offset:e,position:"start",size:Eo(t)})}function Sne(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Eo(t)!==n-e)throw new Qj({offset:n,position:"end",size:Eo(t)})}function Gj(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Une({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Ane=new TextEncoder;function Ine(t){return t instanceof Uint8Array?t:typeof t=="string"?xne(t):Nne(t)}function Nne(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function xne(t,e={}){const{size:n}=e;let r=t;n&&(rO(t,n),r=ch(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=s3(s.charCodeAt(c++)),u=s3(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new ir(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Tne(t,e={}){const{size:n}=e,r=Ane.encode(t);return typeof n=="number"?(Ene(r,n),Rne(r,n)):r}function Rne(t,e){return _ne(t,{dir:"right",size:e})}function i3(t){return t.length}let Pne=class extends ir{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},One=class extends ir{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const kne=new TextEncoder,Dne=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $ne(t,e={}){const{strict:n=!1}=e;if(!t)throw new o3(t);if(typeof t!="string")throw new o3(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new a3(t);if(!t.startsWith("0x"))throw new a3(t)}function Qa(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Vj(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(rO(n,e.size),ah(n,e.size)):n}function Kj(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Dne[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(rO(r,e.size),ch(r,e.size)):r}function Is(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new Yj({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ah(c,r):c}function sO(t,e={}){return Kj(kne.encode(t),e)}function ah(t,e){return Gj(t,{dir:"left",size:e})}function ch(t,e){return Gj(t,{dir:"right",size:e})}function iO(t,e,n,r={}){const{strict:s}=r;Cne(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Sne(i,e,n),i}function Eo(t){return Math.ceil((t.length-2)/2)}function Mne(t,e={}){const{strict:n=!1}=e;try{return $ne(t,{strict:n}),!0}catch{return!1}}let Yj=class extends ir{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class o3 extends ir{constructor(e){super(`Value \`${typeof e=="object"?vne(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class a3 extends ir{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Lne=class extends ir{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class Qj extends ir{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Une=class extends ir{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Bne(t){return{address:t.address,amount:Is(t.amount),index:Is(t.index),validatorIndex:Is(t.validatorIndex)}}function Zj(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Is(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Is(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Is(t.gasLimit)},...typeof t.number=="bigint"&&{number:Is(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Is(t.prevRandao)},...typeof t.time=="bigint"&&{time:Is(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Bne)}}}const jne="0x82ad56cb",Jj="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Fne="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Wne="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function Xj(t,{docsPath:e,...n}){const r=(()=>{const s=lC(t,n);return s instanceof S0?t:s})();return new Bj(r,{docsPath:e,...n})}function oO(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const AS=new Map;function eF({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>AS.delete(e),a=()=>c().map(({args:u})=>u),c=()=>AS.get(e)||[],l=u=>AS.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=oO();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function R0(t,e){var q,L,T,x;const{account:n=t.account,authorizationList:r,batch:s=!!((q=t.batch)!=null&&q.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:_,value:C,stateOverride:I,...A}=e,N=n?er(n):void 0;if(u&&(h||f))throw new ue("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&_)throw new ue("Cannot provide both `code` & `to` as parameters.");const S=u&&d,D=h&&f&&_&&d,P=S||D,B=S?qne({code:u,data:d}):D?Gne({data:d,factory:h,factoryData:f,to:_}):d;try{Ph(e);const R=(typeof i=="bigint"?He(i):void 0)||o,k=l?Zj(l):void 0,j=GP(I),H=(x=(T=(L=t.chain)==null?void 0:L.formatters)==null?void 0:T.transactionRequest)==null?void 0:x.format,se=(H||Cg)({...uC(A,{format:H}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:B,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:E,to:P?void 0:_,value:C});if(s&&zne({request:se})&&!j&&!k)try{return await Hne(t,{...se,blockNumber:i,blockTag:o})}catch(ye){if(!(ye instanceof rj)&&!(ye instanceof kN))throw ye}const ne=(()=>{const ye=[se,R];return j&&k?[...ye,j,k]:j?[...ye,j]:k?[...ye,{},k]:ye})(),ae=await t.request({method:"eth_call",params:ne});return ae==="0x"?{data:void 0}:{data:ae}}catch($){const R=Vne($),{offchainLookup:k,offchainLookupSignature:j}=await hs(async()=>{const{offchainLookup:H,offchainLookupSignature:X}=await import("./ccip-DM4xRn1N.js");return{offchainLookup:H,offchainLookupSignature:X}},[]);if(t.ccipRead!==!1&&(R==null?void 0:R.slice(0,10))===j&&_)return{data:await k(t,{data:R,to:_})};throw P&&(R==null?void 0:R.slice(0,10))==="0x101bb98d"?new ine({factory:h}):Xj($,{...e,account:N,chain:t.chain})}}function zne({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(jne)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Hne(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new rj;l=Ig({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?He(s):void 0)||i,{schedule:h}=eF({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:E})=>b+(E.length-2),0)>n*2},fn:async w=>{const y=w.map(_=>({allowFailure:!0,callData:_.data,target:_.to})),b=Co({abi:zN,args:[y],functionName:"aggregate3"}),E=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return kh({abi:zN,args:[y],functionName:"aggregate3",data:E||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new fC({data:f});return f==="0x"?{data:void 0}:{data:f}}function qne(t){const{code:e,data:n}=t;return cC({abi:kj(["constructor(bytes, bytes)"]),bytecode:Jj,args:[e,n]})}function Gne(t){const{data:e,factory:n,factoryData:r,to:s}=t;return cC({abi:kj(["constructor(address, bytes, address, bytes)"]),bytecode:Fne,args:[s,e,n,r]})}function Vne(t){var n;if(!(t instanceof ue))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Za(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Co({abi:n,args:s,functionName:i});try{const{data:c}=await tt(t,R0,"call")({...o,data:a,to:r});return kh({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw oh(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Kne(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Ig({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Co({abi:QD,functionName:"addr",...s!=null?{args:[Dv(i),BigInt(s)]}:{args:[Dv(i)]}}),h={address:l,abi:vj,functionName:"resolve",args:[wo(pC(i)),d,o??[XP]],blockNumber:n,blockTag:r},p=await tt(t,Za,"readContract")(h);if(p[0]==="0x")return null;const g=kh({abi:QD,args:s!=null?[Dv(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Wa(g)==="0x00"?null:g}catch(d){if(a)throw d;if(JP(d,"resolve"))return null;throw d}}class Yne extends ue{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class hm extends ue{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class aO extends ue{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Qne extends ue{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const Zne=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,Jne=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Xne=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,ere=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function tre(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function c3(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function tF({uri:t,gatewayUrls:e}){const n=Xne.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=c3(e==null?void 0:e.ipfs,"https://ipfs.io"),s=c3(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(Zne),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||Jne.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(ere,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new aO({uri:t})}function nF(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new Yne({data:t});return t.image||t.image_url||t.image_data}async function nre({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await cO({gatewayUrls:t,uri:nF(n)})}catch{throw new aO({uri:e})}}async function cO({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=tF({uri:e,gatewayUrls:t});if(r||await tre(n))return n;throw new aO({uri:e})}function rre(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new hm({reason:"Only EIP-155 supported"});if(!o)throw new hm({reason:"Chain ID not found"});if(!c)throw new hm({reason:"Contract address not found"});if(!s)throw new hm({reason:"Token ID not found"});if(!a)throw new hm({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function sre(t,{nft:e}){if(e.namespace==="erc721")return Za(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Za(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new Qne({namespace:e.namespace})}async function ire(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?ore(t,{gatewayUrls:e,record:n}):cO({uri:n,gatewayUrls:e})}async function ore(t,{gatewayUrls:e,record:n}){const r=rre(n),s=await sre(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=tF({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return cO({uri:nF(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),nre({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function rF(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Ig({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:vj,functionName:"resolve",args:[wo(pC(i)),Co({abi:YD,functionName:"text",args:[Dv(i),s]}),o??[XP]],blockNumber:n,blockTag:r},f=await tt(t,Za,"readContract")(d);if(f[0]==="0x")return null;const p=kh({abi:YD,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(JP(d,"resolve"))return null;throw d}}async function are(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await tt(t,rF,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await ire(t,{record:c,gatewayUrls:r})}catch{return null}}async function sF(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=Ig({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:ete,functionName:"reverse",args:[wo(pC(c))],blockNumber:n,blockTag:r},u=tt(t,Za,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(JP(l,"reverse"))return null;throw l}}async function cre(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Ig({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await tt(t,Za,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[wo(pC(s))],blockNumber:n,blockTag:r});return c}async function iF(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?er(n):void 0;try{Ph(e);const _=(typeof r=="bigint"?He(r):void 0)||s,C=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,A=(C||Cg)({...uC(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[A,_]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(E){throw Xj(E,{...e,account:g,chain:t.chain})}}function yC(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function lre(t){const e=yC(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class ure extends ue{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const l3="/docs/contract/encodeEventTopics";function P0(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Oh({abi:e,name:n});if(!l)throw new DD(n,{docsPath:l3});s=l}if(s.type!=="event")throw new DD(void 0,{docsPath:l3});const i=oa(s),o=hC(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>u3({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?u3({param:d,value:u[h]}):null))??[])}return[o,...a]}function u3({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Yr(Eg(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new ure(t.type);return Wu([t],[e])}async function oF(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=yC(t,{method:"eth_newFilter"}),u=i?P0({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?He(o):o,toBlock:typeof c=="bigint"?He(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function aF(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=yC(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>P0({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?He(i):i,toBlock:typeof a=="bigint"?He(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function cF(t){const e=yC(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function dre(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Co({abi:n,args:s,functionName:i});try{return await tt(t,dC,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?er(a.account):void 0;throw oh(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function hre(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const fre=new Map,pre=new Map;function gre(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,fre),r=e(t,pre);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function mre(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=gre(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const yre=t=>`blockNumber.${t}`;async function O0(t,{cacheTime:e=t.cacheTime}={}){const n=await mre(()=>t.request({method:"eth_blockNumber"}),{cacheKey:yre(t.uid),cacheTime:e});return BigInt(n)}async function wre(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?He(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),ia(i)}async function d3(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?He(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function wC(t,e){if(!vo(t,{strict:!1}))throw new Pu({address:t});if(!vo(e,{strict:!1}))throw new Pu({address:e});return t.toLowerCase()===e.toLowerCase()}const h3="/docs/contract/decodeEventLog";function lO(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new aX({docsPath:h3});const c=e.find(g=>g.type==="event"&&o===hC(oa(g)));if(!(c&&"name"in c)||c.type!=="event")throw new $4(o,{docsPath:h3});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new oC({abiItem:c,param:w});h[d?y:w.name||y]=bre({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=x0(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof k4||g instanceof X4?new sw({abiItem:c,data:n,params:p,size:Xn(n)}):g}else if(i)throw new sw({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function bre({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(x0([t],e)||[])[0]}function uO(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===hC(u));if(!c)return null;const l=lO({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!vre({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof $4)return null;if(c instanceof sw||c instanceof oC){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function vre(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?wC(o,a):i.type==="string"||i.type==="bytes"?Yr(Eg(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Qc(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function dO(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>P0({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?He(r):r,toBlock:typeof s=="bigint"?He(s):s}]});const f=h.map(p=>Qc(p));return u?uO({abi:u,args:a,logs:f,strict:l}):f}async function lF(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Oh({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return tt(t,dO,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class Ere extends ue{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function _re(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await tt(t,Za,"readContract")({abi:Cre,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Ere({address:n}):o}}const Cre=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Sre(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function Are(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?He(n):void 0,o=await t.request({method:"eth_feeHistory",params:[He(e),i||r,s]},{dedupe:!!i});return Sre(o)}async function bC(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Qc(i));return!("abi"in e)||!e.abi?s:uO({abi:e.abi,logs:s,strict:n})}async function Ire(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Qc(i));return e.abi?uO({abi:e.abi,logs:s,strict:n}):s}async function Nre(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?He(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function vC(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?He(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,He(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,He(i)]},{dedupe:!!a}),!c)throw new ij({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||uj)(c)}async function xre(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([tt(t,O0,"getBlockNumber")({}),e?tt(t,vC,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const uF={"0x0":"reverted","0x1":"success"};function Tre(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Qc(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?ia(t.transactionIndex):null,status:t.status?uF[t.status]:null,type:t.type?lj[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function ex(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new oj({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Tre)(n)}async function dF(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=Ig({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:E,address:_,args:C,functionName:I}=l[b];try{const A=Co({abi:E,args:C,functionName:I});p+=(A.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(A.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:A,target:_}]}catch(A){const N=oh(A,{abi:E,address:_,args:C,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:_}]}}const g=await Promise.allSettled(h.map(b=>tt(t,Za,"readContract")({abi:zN,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const E=g[b];if(E.status==="rejected"){if(!r)throw E.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:E.reason,result:void 0});continue}const _=E.value;for(let C=0;C<_.length;C++){const{returnData:I,success:A}=_[C],{callData:N}=h[b][C],{abi:S,address:D,functionName:P,args:B}=l[w.length];try{if(N==="0x")throw new E0;if(!A)throw new fC({data:I});const q=kh({abi:S,args:B,data:I,functionName:P});w.push(r?{result:q,status:"success"}:q)}catch(q){const L=oh(q,{abi:S,address:D,args:B,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw L;w.push({error:L,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new ue("multicall results mismatch");return w}async function tx(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?Zj(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?er(y.account):void 0,E=y.abi?Co(y):y.data,_={...y,data:y.dataSuffix?bo([E||"0x",y.dataSuffix]):E,from:y.from??(b==null?void 0:b.address)};return Ph(_),Cg(_)}),g=h.stateOverrides?GP(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?He(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...dj(h),calls:h.calls.map((p,g)=>{var D,P;const{abi:w,args:y,functionName:b,to:E}=s[f].calls[g],_=((D=p.error)==null?void 0:D.data)??p.returnData,C=BigInt(p.gasUsed),I=(P=p.logs)==null?void 0:P.map(B=>Qc(B)),A=p.status==="0x1"?"success":"failure",N=w&&A==="success"&&_!=="0x"?kh({abi:w,data:_,functionName:b}):null,S=(()=>{var q;if(A==="success")return;let B;if(((q=p.error)==null?void 0:q.data)==="0x"?B=new E0:p.error&&(B=new fC(p.error)),!!B)return oh(B,{abi:w??[],address:E??"0x",args:y,functionName:b??"<unknown>"})})();return{data:_,gasUsed:C,logs:I,status:A,...A==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=lC(l,{});throw u instanceof S0?l:u}}function hF(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=MP(Ine(t));return n==="Bytes"?r:Kj(r)}let Rre=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Pre={checksum:new Rre(8192)},IS=Pre.checksum,Ore=/^0x[a-fA-F0-9]{40}$/;function EC(t,e={}){const{strict:n=!0}=e;if(!Ore.test(t))throw new f3({address:t,cause:new Dre});if(n){if(t.toLowerCase()===t)return;if(kre(t)!==t)throw new f3({address:t,cause:new $re})}}function kre(t){if(IS.has(t))return IS.get(t);EC(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=hF(Tne(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return IS.set(t,s),s}function nx(t,e={}){const{strict:n=!0}=e??{};try{return EC(t,{strict:n}),!0}catch{return!1}}class f3 extends ir{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Dre extends ir{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class $re extends ir{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function rx(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new ir("Unable to normalize signature.");return s}function sx(t,e){const n=typeof t,r=e.type;switch(r){case"address":return nx(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>sx(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>sx(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function fF(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return fF(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?nx(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?nx(n[r],{strict:!1}):!1)return o}}function pF(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?e3(t):t;return{...r,...n?{hash:Yf(r)}:{}}}function Mre(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=Mne(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?gF(l)===iO(e,0,4):l.type==="event"?Yf(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new ix({name:e});if(o.length===1)return{...o[0],...s?{hash:Yf(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Yf(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?sx(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=fF(l.inputs,a.inputs,r);if(d)throw new Ure({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new ix({name:e});return{...c,...s?{hash:Yf(c)}:{}}}function gF(t){return iO(Yf(t),0,4)}function Lre(t){const e=typeof t=="string"?t:KE(t);return rx(e)}function Yf(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:hF(sO(Lre(t)))}class Ure extends ir{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${rx(KE(e.abiItem))}\`, and`,`\`${n.type}\` in \`${rx(KE(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class ix extends ir{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const Bre=/^(.*)\[([0-9]*)\]$/,jre=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,mF=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Fre({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(hO({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function hO({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=Yre(r.type);if(s){const[i,o]=s;return zre(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return Kre(n,{checksumAddress:t,parameter:r});if(r.type==="address")return Wre(n,{checksum:t});if(r.type==="bool")return qre(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=mF.exec(r.type)??[];return Gre(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return Hre(n,{type:r.type});if(r.type==="string")return Vre(n);throw new vF(r.type)}function fO(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Eo(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Is(e+s,{size:32})),r.push(a),s+=Eo(a)):n.push(a)}return Qa(...n,...r)}function Wre(t,e){const{checksum:n=!1}=e;return EC(t,{strict:n}),{dynamic:!1,encoded:ah(t.toLowerCase())}}function zre(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new Zre(t);if(!i&&t.length!==r)throw new Qre({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=hO({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=fO(a);if(i){const l=Is(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Qa(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Qa(...a.map(({encoded:c})=>c))}}function Hre(t,{type:e}){const[,n]=e.split("bytes"),r=Eo(t);if(!n){let s=t;return r%32!==0&&(s=ch(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Qa(ah(Is(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new wF({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:ch(t)}}function qre(t){if(typeof t!="boolean")throw new ir(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:ah(Vj(t))}}function Gre(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new Yj({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Is(t,{size:32,signed:e})}}function Vre(t){const e=sO(t),n=Math.ceil(Eo(e)/32),r=[];for(let s=0;s<n;s++)r.push(ch(iO(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Qa(ch(Is(Eo(e),{size:32})),...r)}}function Kre(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=hO({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?fO(i):Qa(...i.map(({encoded:o})=>o))}}function Yre(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function yF(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new bF({expectedLength:t.length,givenLength:e.length});const s=Fre({checksumAddress:r,parameters:t,values:e}),i=fO(s);return i.length===0?"0x":i}function ox(t,e){if(t.length!==e.length)throw new bF({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(ox.encode(s,i))}return Qa(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return EC(c),ah(c.toLowerCase(),s?32:0)}if(n==="string")return sO(r);if(n==="bytes")return r;if(n==="bool")return ah(Vj(r),s?32:1);const i=n.match(mF);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return Is(r,{size:s?32:d,signed:l==="int"})}const o=n.match(jre);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new wF({expectedSize:Number.parseInt(l),value:r});return ch(r,s?32:0)}const a=n.match(Bre);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Qa(...u)}throw new vF(n)}t.encode=e})(ox||(ox={}));class Qre extends ir{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class wF extends ir{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Eo(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class bF extends ir{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class Zre extends ir{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class vF extends ir{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function Jre(t,e){var s;const{bytecode:n,args:r}=e;return Qa(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?yF(t.inputs,r):"0x")}function Xre(t){return pF(t)}function ese(t,...e){const{overloads:n}=t,r=n?tse([t,...n],t.name,{args:e[0]}):t,s=nse(r),i=e.length>0?yF(r.inputs,e[0]):void 0;return i?Qa(s,i):s}function tf(t,e={}){return pF(t,e)}function tse(t,e,n){const r=Mre(t,e,n);if(r.type!=="function")throw new ix({name:e,type:"function"});return r}function nse(t){return gF(t)}const rse="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ga="0x0000000000000000000000000000000000000000",Ob=new aC(8192);function sse(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Ob.get(n))return Ob.get(n);const r=t().finally(()=>Ob.delete(n));return Ob.set(n,r),r}async function QE(t){return new Promise(e=>setTimeout(e,t))}function ZE(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await QE(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function ise(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Sd(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Sd(new Error("method not supported"),{method:l});const u=s?jp(`${c}.${_r(n)}`):void 0;return sse(()=>ZE(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case aw.code:throw new aw(f);case cw.code:throw new cw(f);case lw.code:throw new lw(f,{method:n.method});case uw.code:throw new uw(f);case rh.code:throw new rh(f);case sh.code:throw new sh(f);case dw.code:throw new dw(f);case mu.code:throw new mu(f);case qp.code:throw new qp(f);case Sd.code:throw new Sd(f,{method:n.method});case Gp.code:throw new Gp(f);case hw.code:throw new hw(f);case gr.code:throw new gr(f);case fw.code:throw new fw(f);case pw.code:throw new pw(f);case gw.code:throw new gw(f);case mw.code:throw new mw(f);case Ya.code:throw new Ya(f);case Vp.code:throw new Vp(f);case yw.code:throw new yw(f);case ww.code:throw new ww(f);case bw.code:throw new bw(f);case vw.code:throw new vw(f);case Ew.code:throw new Ew(f);case Kp.code:throw new Kp(f);case 5e3:throw new gr(f);default:throw h instanceof ue?h:new Cee(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof hy){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>ose(h)}),{enabled:s,id:u})}}function ose(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Gp.code||t.code===rh.code:t instanceof hy&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function ase(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function EF(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function cse(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const p3=cse();function lse(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await EF(async({signal:p})=>{const g={...a,body:Array.isArray(r)?_r(r.map(E=>({jsonrpc:"2.0",id:E.id??p3.take(),...E}))):_r({jsonrpc:"2.0",id:r.id??p3.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new zD({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new hy({body:r,details:_r(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof hy||h instanceof zD?h:new hy({body:r,cause:h,url:t})}}}}class use extends ue{constructor({domain:e}){super(`Invalid domain "${_r(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class dse extends ue{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class hse extends ue{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function fse(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:NF({domain:e}),...t.types};IF({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(pse({domain:e,types:s})),r!=="EIP712Domain"&&i.push(_F({data:n,primaryType:r,types:s})),Yr(bo(i))}function pse({domain:t,types:e}){return _F({data:t,primaryType:"EIP712Domain",types:e})}function _F({data:t,primaryType:e,types:n}){const r=CF({data:t,primaryType:e,types:n});return Yr(r)}function CF({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[gse({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=AF({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Wu(r,s)}function gse({primaryType:t,types:e}){const n=wo(mse({primaryType:t,types:e}));return Yr(n)}function mse({primaryType:t,types:e}){let n="";const r=SF({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function SF({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])SF({primaryType:i.type,types:e},n);return n}function AF({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Yr(CF({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Yr(r)];if(n==="string")return[{type:"bytes32"},Yr(wo(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>AF({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Yr(Wu(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function yse(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return _r({domain:o,message:a,primaryType:r,types:s})}function IF(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(Z4);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;He(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!vo(d))throw new Pu({address:d});const f=u.match(VX);if(f){const[g,w]=f;if(w&&Xn(d)!==Number.parseInt(w))throw new uX({expectedSize:Number.parseInt(w),givenSize:Xn(d)})}const p=s[u];p&&(wse(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new use({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new dse({primaryType:r,types:s})}function NF({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function wse(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new hse({type:t})}const bse=`Ethereum Signed Message:
`;function vse(t){const e=typeof t=="string"?jp(t):typeof t.raw=="string"?t.raw:Sr(t.raw),n=jp(`${bse}${Xn(e)}`);return bo([n,e])}function xF(t,e){return Yr(vse(t),e)}const TF="0x6492649264926492649264926492649264926492649264926492649264926492";function Ese(t){return qE(t,-32)===TF}function _se(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=_g([Wu([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),TF]);return s==="hex"?i:yo(i)}class Cse extends ue{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Sse(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new Cse({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const Ase="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Ise(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?er(e.account):void 0;if(o&&!l)throw new ue("`account` is required when `traceAssetChanges` is true");const u=l?Jre(Xre("constructor(bytes, bytes)"),{bytecode:Jj,args:[Ase,ese(tf("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async R=>{if(!R.data&&!R.abi)return;const{accessList:k}=await iF(t,{account:l.address,...R,data:R.abi?Co(R):R.data});return k.map(({address:j,storageKeys:H})=>H.length>0?j:null)})).then(R=>R.flat().filter(Boolean)):[],h=await tx(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((R,k)=>({abi:[tf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]}]:[],{calls:[...s,{}].map(R=>({...R,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((R,k)=>({abi:[tf("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:R,from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]},{calls:d.map((R,k)=>({to:R,abi:[tf("function decimals() returns (uint256)")],functionName:"decimals",from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]},{calls:d.map((R,k)=>({to:R,abi:[tf("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]},{calls:d.map((R,k)=>({to:R,abi:[tf("function symbol() returns (string)")],functionName:"symbol",from:ga,nonce:k})),stateOverrides:[{address:ga,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,E,_]=o?h:[],{calls:C,...I}=f,A=C.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],D=[...N,...S].map(R=>R.status==="success"?Bi(R.data):null),P=(w==null?void 0:w.calls)??[],B=(y==null?void 0:y.calls)??[],q=[...P,...B].map(R=>R.status==="success"?Bi(R.data):null),L=((b==null?void 0:b.calls)??[]).map(R=>R.status==="success"?R.result:null),T=((_==null?void 0:_.calls)??[]).map(R=>R.status==="success"?R.result:null),x=((E==null?void 0:E.calls)??[]).map(R=>R.status==="success"?R.result:null),$=[];for(const[R,k]of q.entries()){const j=D[R];if(typeof k!="bigint"||typeof j!="bigint")continue;const H=L[R-1],X=T[R-1],se=x[R-1],ne=R===0?{address:rse,decimals:18,symbol:"ETH"}:{address:d[R-1],decimals:se||H?Number(H??1):void 0,symbol:X??void 0};$.some(ae=>ae.token.address===ne.address)||$.push({token:ne,value:{pre:j,post:k,diff:k-j}})}return{assetChanges:$,block:I,results:A}}const NS=new Map,g3=new Map;let Nse=0;function Zc(t,e,n){const r=++Nse,s=()=>NS.get(t)||[],i=()=>{const u=s();NS.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=g3.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(NS.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&g3.set(t,l),o}function Ng(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await QE(c);const l=async()=>{s&&(await t({unpoll:i}),await QE(r),l())};l()})(),i}function xse(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=_r(["watchBlocks",t.uid,e,n,r,u,c]);return Zc(p,{onBlock:s,onError:i},g=>Ng(async()=>{var w;try{const y=await tt(t,Ba,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const E=await tt(t,Ba,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(E,d),d=E}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&tt(t,Ba,"getBlock")({blockTag:e,includeTransactions:u}).then(E=>{p&&g&&(s(E,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const E=t.transport.transports.find(_=>_.config.type==="webSocket"||_.config.type==="ipc");return E?E.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(E){var C;if(!p)return;const _=await tt(t,Ba,"getBlock")({blockNumber:(C=E.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(_,d),g=!1,d=_)},onError(E){i==null||i(E)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function RF(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=_r(["watchBlockNumber",t.uid,e,n,o]);return Zc(d,{onBlockNumber:r,onError:s},h=>Ng(async()=>{var f;try{const p=await tt(t,O0,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=_r(["watchBlockNumber",t.uid,e,n]);return Zc(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var E;if(!f)return;const b=Bi((E=y.result)==null?void 0:E.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function _C(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Tse(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=_r(["watchEvent",e,n,r,t.uid,s,u,o]);return Zc(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let E,_=!1;const C=Ng(async()=>{var I;if(!_){try{E=await tt(t,aF,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}_=!0;return}try{let A;if(E)A=await tt(t,bC,"getFilterChanges")({filter:E});else{const N=await tt(t,O0,"getBlockNumber")({});b&&b!==N?A=await tt(t,dO,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):A=[],b=N}if(A.length===0)return;if(r)y.onLogs(A);else for(const N of A)y.onLogs([N])}catch(A){E&&A instanceof sh&&(_=!1),(I=y.onError)==null||I.call(y,A)}},{emitOnBegin:!0,interval:u});return async()=>{E&&await tt(t,_C,"uninstallFilter")({filter:E}),C()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),E=i??(s?[s]:void 0);let _=[];E&&(_=[E.flatMap(A=>P0({abi:[A],eventName:A.name,args:n}))],s&&(_=_[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:_}],onData(I){var N;if(!w)return;const A=I.result;try{const{eventName:S,args:D}=lO({abi:E??[],data:A.data,topics:A.topics,strict:f}),P=Qc(A,{args:D,eventName:S});c([P])}catch(S){let D,P;if(S instanceof sw||S instanceof oC){if(d)return;D=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(q=>!("name"in q&&q.name))}const B=Qc(A,{args:P?[]:{},eventName:D});c([B])}},onError(I){a==null||a(I)}});y=C,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function PF(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=_r(["watchPendingTransactions",t.uid,e,i]);return Zc(l,{onTransactions:r,onError:n},u=>{let d;const h=Ng(async()=>{var f;try{if(!d)try{d=await tt(t,cF,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await tt(t,bC,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await tt(t,_C,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function Rse(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>C0(r))}async function Pse(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Ose(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?er(n):void 0,i=r?[s==null?void 0:s.address,[He(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const OF="0x5792579257925792579257925792579257925792579257925792579257925792",kF=He(0,{size:32});async function kse(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?er(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Co({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?bo([p,f.dataSuffix]):p,to:f.to,value:f.value?He(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:He(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Vp(new ue(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Kp(new ue(y,{details:y}))}const p=[];for(const y of d){const b=N0(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?Bi(y.value):void 0});p.push(b),o>0&&await new Promise(E=>setTimeout(E,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:kF);return{id:bo([...w,He(s.id,{size:32}),OF])}}throw aj(h,{...e,account:u,chain:e.chain})}}async function DF(t,e){async function n(u){if(u.endsWith(OF.slice(2))){const h=Wa(qE(u,-64,-32)),f=qE(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>kF.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:ia(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?ia(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Bi(u.blockNumber),gasUsed:Bi(u.gasUsed),status:uF[u.status]})))??[],statusCode:l,status:c,version:o}}async function Dse(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function $se(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=_r(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=oO();let u;const d=Zc(o,{resolve:c,reject:l},h=>{const f=Ng(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await DF(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Mse({id:n}))},i):void 0,await a}class Mse extends ue{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function Lse(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function Use(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?ia(t.nonce):void 0,storageProof:t.storageProof?Lse(t.storageProof):void 0}}async function Bse(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?He(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return Use(a)}async function $F(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=_r(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=oO(),b=a?setTimeout(()=>{p(),f(),y(new vee({hash:n}))},a):void 0;return f=Zc(c,{onReplaced:r,resolve:w,reject:y},E=>{p=tt(t,RF,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(_){const C=A=>{clearTimeout(b),p(),A(),f()};let I=_;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>E.resolve(d));return}if(l||(h=!0,await ZE(async()=>{l=await tt(t,vC,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await tt(t,ex,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;C(()=>E.resolve(d))}catch(A){if(A instanceof ij||A instanceof oj){if(!l){h=!1;return}try{u=l,h=!0;const N=await ZE(()=>tt(t,Ba,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof cj});h=!1;const S=N.transactions.find(({from:P,nonce:B})=>P===u.from&&B===u.nonce);if(!S||(d=await tt(t,ex,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let D="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?D="repriced":S.from===S.to&&S.value===0n&&(D="cancelled"),C(()=>{var P;(P=E.onReplaced)==null||P.call(E,{reason:D,replacedTransaction:u,transaction:S,transactionReceipt:d}),E.resolve(d)})}catch(N){C(()=>E.reject(N))}}else C(()=>E.reject(A))}}})}),g}async function jse(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Dc(n))}async function Fse(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function MF(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Th({docsPath:"/docs/eip7702/prepareAuthorization"});const i=er(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:er(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await tt(t,Sg,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await tt(t,KP,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&wC(o.address,i.address))&&(a.nonce+=1)),a}async function Wse(t,e){const{account:n=t.account}=e;if(!n)throw new Th({docsPath:"/docs/eip7702/signAuthorization"});const r=er(n);if(!r.signAuthorization)throw new kv({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await MF(t,e);return r.signAuthorization(s)}async function zse(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Th({docsPath:"/docs/actions/wallet/signTransaction"});const i=er(n);Ph({account:i,...e});const o=await tt(t,Sg,"getChainId")({});r!==null&&sj({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Cg;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:He(o),from:i.address}]},{retryCount:0})}async function LF(t,{account:e=t.account,message:n}){if(!e)throw new Th({docsPath:"/docs/actions/wallet/signMessage"});const r=er(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?jp(n):n.raw instanceof Uint8Array?wo(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function Hse(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Th({docsPath:"/docs/actions/wallet/signTypedData"});const o=er(n),a={EIP712Domain:NF({domain:r}),...e.types};if(IF({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=yse({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function qse(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?er(a.account):t.account,l=Co({abi:n,args:s,functionName:o});try{const{data:u}=await tt(t,R0,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=kh({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw oh(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function Gse(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:He(e)}]},{retryCount:0})}class UF extends DP{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,EX(e);const r=_0(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),zp(i)}update(e){return Wp(this),this.iHash.update(e),this}digestInto(e){Wp(this),aa(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const BF=(t,e,n)=>new UF(t,e).update(n).digest();BF.create=(t,e)=>new UF(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oi=BigInt(0),Ps=BigInt(1),Ad=BigInt(2),Vse=BigInt(3),jF=BigInt(4),FF=BigInt(5),WF=BigInt(8);function ao(t,e){const n=t%e;return n>=oi?n:e+n}function Ki(t,e,n){let r=t;for(;e-- >oi;)r*=r,r%=n;return r}function m3(t,e){if(t===oi)throw new Error("invert: expected non-zero number");if(e<=oi)throw new Error("invert: expected positive modulus, got "+e);let n=ao(t,e),r=e,s=oi,i=Ps;for(;n!==oi;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Ps)throw new Error("invert: does not exist");return ao(s,e)}function zF(t,e){const n=(t.ORDER+Ps)/jF,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function Kse(t,e){const n=(t.ORDER-FF)/WF,r=t.mul(e,Ad),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Ad),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function Yse(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Ps,n=0;for(;e%Ad===oi;)e/=Ad,n++;let r=Ad;const s=CC(t);for(;y3(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return zF;let i=s.pow(r,e);const o=(e+Ps)/Ad;return function(c,l){if(c.is0(l))return l;if(y3(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Ps<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function Qse(t){return t%jF===Vse?zF:t%WF===FF?Kse:Yse(t)}const Zse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Jse(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Zse.reduce((r,s)=>(r[s]="function",r),e);return nO(t,n),t}function Xse(t,e,n){if(n<oi)throw new Error("invalid exponent, negatives unsupported");if(n===oi)return t.ONE;if(n===Ps)return e;let r=t.ONE,s=e;for(;n>oi;)n&Ps&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ps;return r}function HF(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function y3(t,e){const n=(t.ORDER-Ps)/Ad,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function eie(t,e){e!==void 0&&iw(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function CC(t,e,n=!1,r={}){if(t<=oi)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=eie(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:mC(o),ZERO:oi,ONE:Ps,create:u=>ao(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return oi<=u&&u<t},is0:u=>u===oi,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ps)===Ps,neg:u=>ao(-u,t),eql:(u,d)=>u===d,sqr:u=>ao(u*u,t),add:(u,d)=>ao(u+d,t),sub:(u,d)=>ao(u-d,t),mul:(u,d)=>ao(u*d,t),pow:(u,d)=>Xse(l,u,d),div:(u,d)=>ao(u*m3(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>m3(u,t),sqrt:i||(u=>(c||(c=Qse(t)),c(l,u))),toBytes:u=>n?Hj(u,a):tO(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?zj(u):gC(u)},invertBatch:u=>HF(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function qF(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function GF(t){const e=qF(t);return e+Math.ceil(e/2)}function tie(t,e,n=!1){const r=t.length,s=qF(e),i=GF(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?zj(t):gC(t),a=ao(o,e-Ps)+Ps;return n?Hj(a,s):tO(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Yp=BigInt(0),Id=BigInt(1);function fy(t,e){const n=e.negate();return t?n:e}function nie(t,e,n){const r=o=>o.pz,s=HF(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function VF(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xS(t,e){VF(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=mC(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function w3(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Id);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function rie(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function sie(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const TS=new WeakMap,KF=new WeakMap;function RS(t){return KF.get(t)||1}function b3(t){if(t!==Yp)throw new Error("invalid wNAF")}function iie(t,e){return{constTimeNegate:fy,hasPrecomputes(n){return RS(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Yp;)r&Id&&(s=s.add(i)),i=i.double(),r>>=Id;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=xS(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=xS(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=w3(s,c,a);s=l,d?o=o.add(fy(f,r[p])):i=i.add(fy(h,r[u]))}return b3(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=xS(n,e);for(let a=0;a<o.windows&&s!==Yp;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=w3(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return b3(s),i},getPrecomputes(n,r,s){let i=TS.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),TS.set(r,i))),i},wNAFCached(n,r,s){const i=RS(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=RS(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){VF(r,e),KF.set(n,r),TS.delete(n)}}}function oie(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Yp||r>Yp;)n&Id&&(i=i.add(s)),r&Id&&(o=o.add(s)),s=s.double(),n>>=Id,r>>=Id;return{p1:i,p2:o}}function aie(t,e,n,r){rie(n,t),sie(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=gne(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=mC(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function v3(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Jse(e),e}else return CC(t)}function cie(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Yp))throw new Error(`CURVE.${a} must be positive bigint`)}const r=v3(e.p,n.Fp),s=v3(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function E3(t){t.lowS!==void 0&&YE("lowS",t.lowS),t.prehash!==void 0&&YE("prehash",t.prehash)}class lie extends Error{constructor(e=""){super(e)}}const Ac={Err:lie,_tlv:{encode:(t,e)=>{const{Err:n}=Ac;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Pb(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Pb(s.length/2|128):"";return Pb(t)+i+s+e},decode(t,e){const{Err:n}=Ac;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ac;if(t<py)throw new e("integer: negative integers are not allowed");let n=Pb(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ac;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return gC(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ac,s=so("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Ac,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},py=BigInt(0),gy=BigInt(1),uie=BigInt(2),kb=BigInt(3),die=BigInt(4);function hie(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function YF(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=so("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function fie(t,e={}){const{Fp:n,Fn:r}=cie("weierstrass",t,e),{h:s,n:i}=t;nO(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,D){const{x:P,y:B}=S.toAffine(),q=n.toBytes(P);if(YE("isCompressed",D),D){a();const L=!n.isOdd(B);return _d(QF(L),q)}else return _d(Uint8Array.of(4),q,n.toBytes(B))}function l(N){aa(N);const S=n.BYTES,D=S+1,P=2*S+1,B=N.length,q=N[0],L=N.subarray(1);if(B===D&&(q===2||q===3)){const T=n.fromBytes(L);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const x=h(T);let $;try{$=n.sqrt(x)}catch(j){const H=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+H)}a();const R=n.isOdd($);return(q&1)===1!==R&&($=n.neg($)),{x:T,y:$}}else if(B===P&&q===4){const T=n.fromBytes(L.subarray(S*0,S*1)),x=n.fromBytes(L.subarray(S*1,S*2));if(!f(T,x))throw new Error("bad point: is not on curve");return{x:T,y:x}}else throw new Error(`bad point: got length ${B}, expected compressed=${D} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=hie(n,t.a,t.b);function f(N,S){const D=n.sqr(S),P=h(N);return n.eql(D,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,kb),die),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,D=!1){if(!n.isValid(S)||D&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function y(N){if(!(N instanceof C))throw new Error("ProjectivePoint expected")}const b=r3((N,S)=>{const{px:D,py:P,pz:B}=N;if(n.eql(B,n.ONE))return{x:D,y:P};const q=N.is0();S==null&&(S=q?n.ONE:n.inv(B));const L=n.mul(D,S),T=n.mul(P,S),x=n.mul(B,S);if(q)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:L,y:T}}),E=r3(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:D}=N.toAffine();if(!n.isValid(S)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!f(S,D))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function _(N,S,D,P,B){return D=new C(n.mul(D.px,N),D.py,D.pz),S=fy(P,S),D=fy(B,D),S.add(D)}class C{constructor(S,D,P){this.px=w("x",S),this.py=w("y",D,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:D,y:P}=S||{};if(!S||!n.isValid(D)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(P)?C.ZERO:new C(D,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return nie(C,"pz",S)}static fromBytes(S){return aa(S),C.fromHex(S)}static fromHex(S){const D=C.fromAffine(d(so("pointHex",S)));return D.assertValidity(),D}static fromPrivateKey(S){const D=YF(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(D(S))}static msm(S,D){return aie(C,r,S,D)}precompute(S=8,D=!0){return A.setWindowSize(this,S),D||this.multiply(kb),this}_setWindowSize(S){this.precompute(S)}assertValidity(){E(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:D,py:P,pz:B}=this,{px:q,py:L,pz:T}=S,x=n.eql(n.mul(D,T),n.mul(q,B)),$=n.eql(n.mul(P,T),n.mul(L,B));return x&&$}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:D}=t,P=n.mul(D,kb),{px:B,py:q,pz:L}=this;let T=n.ZERO,x=n.ZERO,$=n.ZERO,R=n.mul(B,B),k=n.mul(q,q),j=n.mul(L,L),H=n.mul(B,q);return H=n.add(H,H),$=n.mul(B,L),$=n.add($,$),T=n.mul(S,$),x=n.mul(P,j),x=n.add(T,x),T=n.sub(k,x),x=n.add(k,x),x=n.mul(T,x),T=n.mul(H,T),$=n.mul(P,$),j=n.mul(S,j),H=n.sub(R,j),H=n.mul(S,H),H=n.add(H,$),$=n.add(R,R),R=n.add($,R),R=n.add(R,j),R=n.mul(R,H),x=n.add(x,R),j=n.mul(q,L),j=n.add(j,j),R=n.mul(j,H),T=n.sub(T,R),$=n.mul(j,k),$=n.add($,$),$=n.add($,$),new C(T,x,$)}add(S){y(S);const{px:D,py:P,pz:B}=this,{px:q,py:L,pz:T}=S;let x=n.ZERO,$=n.ZERO,R=n.ZERO;const k=t.a,j=n.mul(t.b,kb);let H=n.mul(D,q),X=n.mul(P,L),se=n.mul(B,T),ne=n.add(D,P),ae=n.add(q,L);ne=n.mul(ne,ae),ae=n.add(H,X),ne=n.sub(ne,ae),ae=n.add(D,B);let ye=n.add(q,T);return ae=n.mul(ae,ye),ye=n.add(H,se),ae=n.sub(ae,ye),ye=n.add(P,B),x=n.add(L,T),ye=n.mul(ye,x),x=n.add(X,se),ye=n.sub(ye,x),R=n.mul(k,ae),x=n.mul(j,se),R=n.add(x,R),x=n.sub(X,R),R=n.add(X,R),$=n.mul(x,R),X=n.add(H,H),X=n.add(X,H),se=n.mul(k,se),ae=n.mul(j,ae),X=n.add(X,se),se=n.sub(H,se),se=n.mul(k,se),ae=n.add(ae,se),H=n.mul(X,ae),$=n.add($,H),H=n.mul(ye,ae),x=n.mul(ne,x),x=n.sub(x,H),H=n.mul(ne,X),R=n.mul(ye,R),R=n.add(R,H),new C(x,$,R)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:D}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,B;const q=L=>A.wNAFCached(this,L,C.normalizeZ);if(D){const{k1neg:L,k1:T,k2neg:x,k2:$}=D.splitScalar(S),{p:R,f:k}=q(T),{p:j,f:H}=q($);B=k.add(H),P=_(D.beta,R,j,L,x)}else{const{p:L,f:T}=q(S);P=L,B=T}return C.normalizeZ([P,B])[0]}multiplyUnsafe(S){const{endo:D}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===py||P.is0())return C.ZERO;if(S===gy)return P;if(A.hasPrecomputes(this))return this.multiply(S);if(D){const{k1neg:B,k1:q,k2neg:L,k2:T}=D.splitScalar(S),{p1:x,p2:$}=oie(C,P,q,T);return _(D.beta,x,$,B,L)}else return A.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,D,P){const B=this.multiplyUnsafe(D).add(S.multiplyUnsafe(P));return B.is0()?void 0:B}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===gy?!0:S?S(C,this):A.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===gy?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return YE("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return ow(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const I=r.BITS,A=iie(C,e.endo?Math.ceil(I/2):I);return C}function QF(t){return Uint8Array.of(t?2:3)}function pie(t,e,n={}){nO(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||TX,s=e.hmac||((P,...B)=>BF(e.hash,P,_d(...B))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const B=a>>gy;return P>B}function u(P){return l(P)?o.neg(P):P}function d(P,B){if(!o.isValidNot0(B))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(B,q,L){d("r",B),d("s",q),this.r=B,this.s=q,L!=null&&(this.recovery=L),Object.freeze(this)}static fromCompact(B){const q=o.BYTES,L=so("compactSignature",B,q*2);return new h(o.fromBytes(L.subarray(0,q)),o.fromBytes(L.subarray(q,q*2)))}static fromDER(B){const{r:q,s:L}=Ac.toSig(so("DER",B));return new h(q,L)}assertValidity(){}addRecoveryBit(B){return new h(this.r,this.s,B)}recoverPublicKey(B){const q=i.ORDER,{r:L,s:T,recovery:x}=this;if(x==null||![0,1,2,3].includes(x))throw new Error("recovery id invalid");if(a*uie<q&&x>1)throw new Error("recovery id is ambiguous for h>1 curve");const R=x===2||x===3?L+a:L;if(!i.isValid(R))throw new Error("recovery id 2 or 3 invalid");const k=i.toBytes(R),j=t.fromHex(_d(QF((x&1)===0),k)),H=o.inv(R),X=E(so("msgHash",B)),se=o.create(-X*H),ne=o.create(T*H),ae=t.BASE.multiplyUnsafe(se).add(j.multiplyUnsafe(ne));if(ae.is0())throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(B){if(B==="compact")return _d(o.toBytes(this.r),o.toBytes(this.s));if(B==="der")return kP(Ac.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ow(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ow(this.toBytes("compact"))}}const f=YF(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return tie(r(GF(P)),P)},precompute(P=8,B=t.BASE){return B.precompute(P,!1)}};function g(P,B=!0){return t.fromPrivateKey(P).toBytes(B)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const q=so("key",P).length,L=i.BYTES,T=L+1,x=2*L+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return q===T||q===x}function y(P,B,q=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(B)===!1)throw new Error("second arg must be public key");return t.fromHex(B).multiply(f(P)).toBytes(q)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const B=gC(P),q=P.length*8-c;return q>0?B>>BigInt(q):B},E=e.bits2int_modN||function(P){return o.create(b(P))},_=mC(c);function C(P){return pne("num < 2^"+c,P,py,_),o.toBytes(P)}function I(P,B,q=A){if(["recovered","canonical"].some(ne=>ne in q))throw new Error("sign() legacy options not supported");const{hash:L}=e;let{lowS:T,prehash:x,extraEntropy:$}=q;T==null&&(T=!0),P=so("msgHash",P),E3(q),x&&(P=so("prehashed msgHash",L(P)));const R=E(P),k=f(B),j=[C(k),C(R)];if($!=null&&$!==!1){const ne=$===!0?r(i.BYTES):$;j.push(so("extraEntropy",ne))}const H=_d(...j),X=R;function se(ne){const ae=b(ne);if(!o.isValidNot0(ae))return;const ye=o.inv(ae),Z=t.BASE.multiply(ae).toAffine(),re=o.create(Z.x);if(re===py)return;const de=o.create(ye*o.create(X+re*k));if(de===py)return;let ee=(Z.x===re?0:2)|Number(Z.y&gy),he=de;return T&&l(de)&&(he=u(de),ee^=1),new h(re,he,ee)}return{seed:H,k2sig:se}}const A={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,B,q=A){const{seed:L,k2sig:T}=I(P,B,q);return mne(e.hash.outputLen,o.BYTES,s)(L,T)}t.BASE.precompute(8);function D(P,B,q,L=N){const T=P;B=so("msgHash",B),q=so("publicKey",q),E3(L);const{lowS:x,prehash:$,format:R}=L;if("strict"in L)throw new Error("options.strict was renamed to lowS");if(R!==void 0&&!["compact","der","js"].includes(R))throw new Error('format must be "compact", "der" or "js"');const k=typeof T=="string"||OP(T),j=!k&&!R&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!k&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let H,X;try{if(j)if(R===void 0||R==="js")H=new h(T.r,T.s);else throw new Error("invalid format");if(k){try{R!=="compact"&&(H=h.fromDER(T))}catch(he){if(!(he instanceof Ac.Err))throw he}!H&&R!=="der"&&(H=h.fromCompact(T))}X=t.fromHex(q)}catch{return!1}if(!H||x&&H.hasHighS())return!1;$&&(B=e.hash(B));const{r:se,s:ne}=H,ae=E(B),ye=o.inv(ne),Z=o.create(ae*ye),re=o.create(se*ye),de=t.BASE.multiplyUnsafe(Z).add(X.multiplyUnsafe(re));return de.is0()?!1:o.create(de.x)===se}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:D,utils:p,Point:t,Signature:h})}function gie(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=CC(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function mie(t){const{CURVE:e,curveOpts:n}=gie(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function yie(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function wie(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=mie(t),s=fie(e,n),i=pie(s,r,n);return yie(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bie(t,e){const n=r=>wie({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const JE={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const vie=BigInt(1),ax=BigInt(2),_3=(t,e)=>(t+e/ax)/e;function Eie(t){const e=JE.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Ki(u,n,e)*u%e,h=Ki(d,n,e)*u%e,f=Ki(h,ax,e)*l%e,p=Ki(f,s,e)*f%e,g=Ki(p,i,e)*p%e,w=Ki(g,a,e)*g%e,y=Ki(w,c,e)*w%e,b=Ki(y,a,e)*g%e,E=Ki(b,n,e)*u%e,_=Ki(E,o,e)*p%e,C=Ki(_,r,e)*l%e,I=Ki(C,ax,e);if(!cx.eql(cx.sqr(I),t))throw new Error("Cannot find square root");return I}const cx=CC(JE.p,void 0,void 0,{sqrt:Eie}),ZF=bie({...JE,Fp:cx,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=JE.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-vie*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=_3(i*t,e),c=_3(-r*t,e);let l=ao(t-a*n-c*s,e),u=ao(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},gj),_ie=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:ZF},Symbol.toStringTag,{value:"Module"}));function Cie({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new ZF.Signature(Bi(t),Bi(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:yo(o)}async function pO(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Ka(o)?o:typeof o=="object"&&"r"in o&&"s"in o?Cie(o):Sr(o),u=await(async()=>!r&&!s||Ese(l)?l:_se({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Co({abi:ZD,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:cC({abi:ZD,args:[n,i,u],bytecode:Wne}),...c},{data:g}=await tt(t,R0,"call")(p);return ZJ(g??"0x0")}catch(p){try{if(wC(Dc(n),await J4({hash:i,signature:o})))return!0}catch{}if(p instanceof Bj)return!1;throw p}}async function Sie(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=xF(n);return pO(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function Aie(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=fse({message:o,primaryType:a,types:c,domain:l});return pO(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function Iie(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function Nie(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=_r(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return Zc(y,{onLogs:l,onError:c},b=>{let E;a!==void 0&&(E=a-1n);let _,C=!1;const I=Ng(async()=>{var A;if(!C){try{_=await tt(t,oF,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let N;if(_)N=await tt(t,bC,"getFilterChanges")({filter:_});else{const S=await tt(t,O0,"getBlockNumber")({});E&&E<S?N=await tt(t,lF,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:E+1n,toBlock:S,strict:w}):N=[],E=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){_&&N instanceof sh&&(C=!1),(A=b.onError)==null||A.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{_&&await tt(t,_C,"uninstallFilter")({filter:_}),I()}})})():(()=>{const w=h??!1,y=_r(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,E=()=>b=!1;return Zc(y,{onLogs:l,onError:c},_=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),I=o?P0({abi:n,eventName:o,args:s}):[],{unsubscribe:A}=await C.subscribe({params:["logs",{address:r,topics:I}],onData(N){var D;if(!b)return;const S=N.result;try{const{eventName:P,args:B}=lO({abi:n,data:S.data,topics:S.topics,strict:h}),q=Qc(S,{args:B,eventName:P});_.onLogs([q])}catch(P){let B,q;if(P instanceof sw||P instanceof oC){if(h)return;B=P.abiItem.name,q=(D=P.abiItem.inputs)==null?void 0:D.some(T=>!("name"in T&&T.name))}const L=Qc(S,{args:q?[]:{},eventName:B});_.onLogs([L])}},onError(N){var S;(S=_.onError)==null||S.call(_,N)}});E=A,b||E()}catch(C){c==null||c(C)}})(),()=>E()))})()}async function JF(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Th({docsPath:"/docs/contract/writeContract"});const l=r?er(r):null,u=Co({abi:n,args:i,functionName:a});try{return await tt(t,N0,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw oh(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function Mi(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const $v="2.17.3",xie=()=>`@wagmi/core@${$v}`;var XF=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},XE,e9;let sl=class lx extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return xie()}constructor(e,n={}){var i;super(),XE.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof lx?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof lx&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return XF(this,XE,"m",e9).call(this,this,e)}};XE=new WeakSet,e9=function t(e,n){return n!=null&&n(e)?e:e.cause?XF(this,XE,"m",t).call(this,e.cause,n):e};class Cw extends sl{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class Tie extends sl{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class Rie extends sl{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class Pie extends sl{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class Oie extends sl{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class kie extends sl{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function Mv(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new Tie;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const ux=256;let Db=ux,$b;function t9(t=11){if(!$b||Db+t>ux*2){$b="",Db=0;for(let e=0;e<ux;e++)$b+=(256+Math.random()*256|0).toString(16).substring(1)}return $b.substring(Db,Db+++t)}function n9(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?er(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:t9()};function y(b){return E=>{const _=E(b);for(const I in w)delete _[I];const C={...b,..._};return Object.assign(C,{extend:y(C)})}}return Object.assign(w,{extend:y(w)})}function gO({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=t9();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:ise(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Die(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>gO({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function e_(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=$ie,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=gO({key:n,name:r,async request({method:g,params:w}){let y;const b=async(E=0)=>{const _=h[E]({...d,chain:c,retryCount:0,timeout:u});try{const C=await _.request({method:g,params:w});return f({method:g,params:w,response:C,transport:_,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:_,status:"error"}),i(C)||E===h.length-1||(y??(y=h.slice(E+1).some(I=>{const{include:A,exclude:N}=I({chain:c}).config.methods||{};return A?A.includes(g):N?!N.includes(g):!0})),!y))throw C;return b(E+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};Mie({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function $ie(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===qp.code||t.code===gr.code||Cd.nodeMessage.test(t.message)||t.code===5e3))}function Mie({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,E;try{await(r?r({transport:w}):w.request({method:"net_listening"})),E=1}catch{E=0}finally{b=Date.now()}return{latency:b-y,success:E}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(I=>I[w].latency),E=1-y.reduce((I,A)=>I+A,0)/y.length/f,_=u.map(I=>I[w].success),C=_.reduce((I,A)=>I+A,0)/_.length;return C===0?[0,w]:[l*E+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await QE(e),d()};d()}class Lie extends ue{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function Ql(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new Lie;const E=lse(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return gO({key:s,methods:i,name:o,async request({method:_,params:C}){const I={method:_,params:C},{schedule:A}=eF({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>E.request({body:P}),sort:(P,B)=>P.id-B.id}),N=async P=>n?A(P):[await E.request({body:P})],[{error:S,result:D}]=await N(I);if(u)return{error:S,result:D};if(S)throw new zP({body:I,error:S,url:b});return D},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function Uie(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(Bie))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(jie))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const Bie=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,jie=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Fie(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!vo(r.address,{strict:!1})||e&&!wC(r.address,e))return!1}catch{return!1}return!0}async function Wie(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=Uie(s);if(!u.address||!Fie({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=xF(s);return pO(t,{address:u.address,hash:h,signature:a,...l})}function zie(t){return{call:e=>R0(t,e),createAccessList:e=>iF(t,e),createBlockFilter:()=>lre(t),createContractEventFilter:e=>oF(t,e),createEventFilter:e=>aF(t,e),createPendingTransactionFilter:()=>cF(t),estimateContractGas:e=>dre(t,e),estimateGas:e=>dC(t,e),getBalance:e=>VP(t,e),getBlobBaseFee:()=>hre(t),getBlock:e=>Ba(t,e),getBlockNumber:e=>O0(t,e),getBlockTransactionCount:e=>wre(t,e),getBytecode:e=>d3(t,e),getChainId:()=>Sg(t),getCode:e=>d3(t,e),getContractEvents:e=>lF(t,e),getEip712Domain:e=>_re(t,e),getEnsAddress:e=>Kne(t,e),getEnsAvatar:e=>are(t,e),getEnsName:e=>sF(t,e),getEnsResolver:e=>cre(t,e),getEnsText:e=>rF(t,e),getFeeHistory:e=>Are(t,e),estimateFeesPerGas:e=>Pee(t,e),getFilterChanges:e=>bC(t,e),getFilterLogs:e=>Ire(t,e),getGasPrice:()=>qP(t),getLogs:e=>dO(t,e),getProof:e=>Bse(t,e),estimateMaxPriorityFeePerGas:e=>Ree(t,e),getStorageAt:e=>Nre(t,e),getTransaction:e=>vC(t,e),getTransactionConfirmations:e=>xre(t,e),getTransactionCount:e=>KP(t,e),getTransactionReceipt:e=>ex(t,e),multicall:e=>dF(t,e),prepareTransactionRequest:e=>I0(t,e),readContract:e=>Za(t,e),sendRawTransaction:e=>QP(t,e),simulate:e=>tx(t,e),simulateBlocks:e=>tx(t,e),simulateCalls:e=>Ise(t,e),simulateContract:e=>qse(t,e),verifyMessage:e=>Sie(t,e),verifySiweMessage:e=>Wie(t,e),verifyTypedData:e=>Aie(t,e),uninstallFilter:e=>_C(t,e),waitForTransactionReceipt:e=>$F(t,e),watchBlocks:e=>xse(t,e),watchBlockNumber:e=>RF(t,e),watchContractEvent:e=>Nie(t,e),watchEvent:e=>Tse(t,e),watchPendingTransactions:e=>PF(t,e)}}function Hie(t){return{addChain:e=>eX(t,e),deployContract:e=>Xee(t,e),getAddresses:()=>Rse(t),getCallsStatus:e=>DF(t,e),getCapabilities:e=>Ose(t,e),getChainId:()=>Sg(t),getPermissions:()=>Pse(t),prepareAuthorization:e=>MF(t,e),prepareTransactionRequest:e=>I0(t,e),requestAddresses:()=>jse(t),requestPermissions:e=>Fse(t,e),sendCalls:e=>kse(t,e),sendRawTransaction:e=>QP(t,e),sendTransaction:e=>N0(t,e),showCallsStatus:e=>Dse(t,e),signAuthorization:e=>Wse(t,e),signMessage:e=>LF(t,e),signTransaction:e=>zse(t,e),signTypedData:e=>Hse(t,e),switchChain:e=>Gse(t,e),waitForCallsStatus:e=>$se(t,e),watchAsset:e=>Iie(t,e),writeContract:e=>JF(t,e)}}async function k0(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new kie({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new Rie;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new Oie({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=er(e.account??n.accounts[0]);if(o&&(o.address=Dc(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new Pie({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return n9({account:o,chain:a,name:"Connector Client",transport:l=>Die(c)({...l,retryCount:0})})}async function dx(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function qie(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await k0(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Mi(o,dC,"estimateGas")({...s,account:i})}function r9(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(mee[t])}function up(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Gie(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Mi(o,dF,"multicall")({allowFailure:n,contracts:s,...i})}function s9(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Mi(s,Za,"readContract")(r)}async function Vie(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Gie(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof jj)throw c;const l=()=>o.map(u=>s9(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function Kie(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await C3(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await C3(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=P4(Wa(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Mi(c,VP,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Rh(u,r9(a)),symbol:d.nativeCurrency.symbol,value:u}}async function C3(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await Vie(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Rh(c??"0",r9(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function S3(t){return t.state.chainId}function lh(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!lh(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!lh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Yie(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let Mb=[];function Bo(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||lh(Mb,e)?Mb:(Mb=e,e)}let PS=[];function A3(t){const e=t.connectors;return lh(PS,e)?PS:(PS=e,e)}function Qie(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Mi(s,sF,"getEnsName")(r)}function hx(t,e={}){const n=Yie(t,e);return n==null?void 0:n.extend(zie)}async function Zie(t,e={}){return(await k0(t,e)).extend(Hie)}async function Jie(t,e){const{account:n,chainId:r,...s}=e,i=n??up(t).address,o=t.getClient({chainId:r});return Mi(o,I0,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let OS=!1;async function fx(t,e={}){var l,u;if(OS)return[];OS=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),OS=!1,a}async function Xie(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await k0(t,{account:n??void 0,chainId:r,connector:s}),await Mi(o,N0,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function eoe(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await k0(t,{account:n,connector:r}),Mi(i,LF,"signMessage")({...s,...n?{account:n}:{}})}class Tl extends sl{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class toe extends sl{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function I3(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new toe({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new Cw;return t.setState(a=>({...a,chainId:r})),i}function i9(t,e){const{onChange:n}=e;return t.subscribe(()=>up(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return lh(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function noe(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function o9(t,e){const{onChange:n}=e;return t.subscribe(()=>Bo(t),n,{equalityFn:lh})}function a9(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function roe(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Mi(l,PF,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function soe(t,e){const{onChange:n}=e;return t.subscribe(()=>hx(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function c9(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Mi(i,$F,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Mi(i,vC,"getTransaction")({hash:a.transactionHash}),d=await Mi(i,R0,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?P4(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function l9(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await k0(t,{account:n??void 0,chainId:r,connector:s}),await Mi(o,JF,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function R5e(t){return t}SC.type="injected";function SC(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...ioe[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:SC.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new Tl;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(_=>Dc(_)),h.length>0&&(h=await this.getAccounts())}catch(E){const _=E;if(_.code===gr.code)throw new gr(_);if(_.code===mu.code)throw _}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Dc(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let E=await this.getChainId();if(l&&E!==l){const _=await this.switchChain({chainId:l}).catch(C=>{if(C.code===gr.code)throw C;return{id:E}});E=(_==null?void 0:_.id)??E}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:E}}catch(E){const _=E;throw _.code===gr.code?new gr(_):_.code===mu.code?new mu(_):_}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Tl;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await EF(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Tl;return(await l.request({method:"eth_accounts"})).map(d=>Dc(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Tl;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=Lv(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Tl}return!!(await ZE(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new Tl;const h=c.chains.find(b=>b.id===u);if(!h)throw new Ya(new Cw);const f=new Promise(b=>{const E=_=>{"chainId"in _&&_.chainId===u&&(c.emitter.off("change",E),b())};c.emitter.on("change",E)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:He(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const E=b;if(E.code===4902||((g=(p=E==null?void 0:E.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:_,...C}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:_&&(I=[_.url,...Object.values(C).map(S=>S.url)]);let A;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?A=l.rpcUrls:A=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const N={blockExplorerUrls:I,chainId:He(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:A};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new gr(new Error("User rejected switch after adding network."))}),f]),h}catch(_){throw new gr(_)}throw E.code===gr.code?new gr(E):new Ya(E)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Dc(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const ioe={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:Lv(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return Lv(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:Lv(t,"isPhantom")}}};function Lv(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function ooe(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function aoe(){const t=new Set;let e=[];const n=()=>ooe(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const coe=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},loe=coe;function uoe(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const px=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return px(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return px(r)(n)}}}},doe=(t,e)=>(n,r,s)=>{let i={storage:uoe(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var E;return b((E=r())!=null?E:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return px(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var E;const[_,C]=b;if(f=i.merge(C,(E=r())!=null?E:h),n(f,!0),_)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},hoe=doe,N3=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},kS=t=>t?N3(t):N3;var u9={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,E;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(E=1,b=new Array(y-1);E<y;E++)b[E-1]=arguments[E];w.fn.apply(w.context,b)}else{var _=w.length,C;for(E=0;E<_;E++)switch(w[E].once&&this.removeListener(l,w[E].fn,void 0,!0),y){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,u);break;case 3:w[E].fn.call(w[E].context,u,d);break;case 4:w[E].fn.call(w[E].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];w[E].fn.apply(w[E].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(u9);var foe=u9.exports;const poe=Ah(foe);class goe{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new poe})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function moe(t){return new goe(t)}function yoe(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function x3(t,e){return t.slice(0,e).join(".")||"."}function T3(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function woe(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=T3(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=T3(s,c);if(u!==0)return r?e.call(this,a,c,x3(i,u)):`[ref=${x3(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function boe(t,e,n,r){return JSON.stringify(t,woe((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function voe(t){const{deserialize:e=yoe,key:n="wagmi",serialize:r=boe,storage:s=d9}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const d9={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Eoe(){const t=typeof window<"u"&&window.localStorage?window.localStorage:d9;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const gx=256;let Lb=gx,Ub;function _oe(t=11){if(!Ub||Lb+t>gx*2){Ub="",Lb=0;for(let e=0;e<gx;e++)Ub+=(256+Math.random()*256|0).toString(16).substring(1)}return Ub.substring(Lb,Lb+++t)}function Coe(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=voe({storage:Eoe()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?aoe():void 0,a=kS(()=>i.chains),c=kS(()=>{const C=[],I=new Set;for(const A of i.connectors??[]){const N=l(A);if(C.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const D of S)I.add(D)}}if(!s&&o){const A=o.getProviders();for(const N of A)I.has(N.info.rdns)||C.push(l(u(N)))}return C});function l(C){var N;const I=moe(_oe()),A={...C({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",E),(N=A.setup)==null||N.call(A),A}function u(C){const{info:I}=C,A=C.provider;return SC({target:{...I,id:I.rdns,provider:A}})}const d=new Map;function h(C={}){const I=C.chainId??w.getState().chainId,A=a.getState().find(S=>S.id===I);if(C.chainId&&!A)throw new Cw;{const S=d.get(w.getState().chainId);if(S&&!A)return S;if(!A)throw new Cw}{const S=d.get(I);if(S)return S}let N;if(i.client)N=i.client({chain:A});else{const S=A.id,D=a.getState().map(q=>q.id),P={},B=Object.entries(i);for(const[q,L]of B)if(!(q==="chains"||q==="client"||q==="connectors"||q==="transports"))if(typeof L=="object")if(S in L)P[q]=L[S];else{if(D.some(x=>x in L))continue;P[q]=L}else P[q]=L;N=n9({...P,chain:A,batch:P.batch??{multicall:!0},transport:q=>i.transports[S]({...q,connectors:c})})}return d.set(I,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";$v.startsWith(g)?p=Number.parseInt($v.replace(g,"")):p=Number.parseInt($v.split(".")[0]??"0");const w=kS(loe(n?hoe(f,{migrate(C,I){if(I===p)return C;const A=f(),N=y(C,A.chainId);return{...A,chainId:N}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([I,A])=>{const{id:N,name:S,type:D,uid:P}=A.connector;return[I,{...A,connector:{id:N,name:S,type:D,uid:P}}]})},chainId:C.chainId,current:C.current}},merge(C,I){typeof C=="object"&&C&&"status"in C&&delete C.status;const A=y(C,I.chainId);return{...I,...C,chainId:A}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(C,I){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(A=>A.id===C.chainId)?C.chainId:I}r&&w.subscribe(({connections:C,current:I})=>{var A;return I?(A=C.get(I))==null?void 0:A.chainId:void 0},C=>{if(a.getState().some(A=>A.id===C))return w.setState(A=>({...A,chainId:C??A.chainId}))}),o==null||o.subscribe(C=>{const I=new Set,A=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const D=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of D)A.add(P)}const N=[];for(const S of C){if(A.has(S.info.rdns))continue;const D=l(u(S));I.has(D.id)||N.push(D)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(C){w.setState(I=>{const A=I.connections.get(C.uid);return A?{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts??A.accounts,chainId:C.chainId??A.chainId,connector:A.connector})}:I})}function E(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const A=c.getState().find(N=>N.uid===C.uid);return A?(A.emitter.listenerCount("connect")&&A.emitter.off("connect",b),A.emitter.listenerCount("change")||A.emitter.on("change",b),A.emitter.listenerCount("disconnect")||A.emitter.on("disconnect",_),{...I,connections:new Map(I.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:A}),current:C.uid,status:"connected"}):I})}function _(C){w.setState(I=>{const A=I.connections.get(C.uid);if(A){const S=A.connector;S.emitter.listenerCount("change")&&A.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&A.connector.emitter.off("disconnect",_),S.emitter.listenerCount("connect")||A.connector.emitter.on("connect",E)}if(I.connections.delete(C.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const N=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let I;typeof C=="function"?I=C(w.getState()):I=C;const A=f();typeof I!="object"&&(I=A),Object.keys(A).some(S=>!(S in I))&&(I=A),w.setState(I,!0)},subscribe(C,I,A){return w.subscribe(C,I,A?{...A,fireImmediately:A.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const I=typeof C=="function"?C(a.getState()):C;if(I.length!==0)return a.setState(I,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:E,disconnect:_}}}}function Soe(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?fx(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function Aoe(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=Soe(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=O.useRef(!0);return O.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const h9=O.createContext(void 0);function Ioe(t){const{children:e,config:n}=t,r={value:n};return O.createElement(Aoe,t,O.createElement(h9.Provider,r,e))}const Noe="2.15.6",xoe=()=>`wagmi@${Noe}`;let Toe=class extends sl{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return xoe()}};class Roe extends Toe{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function So(t={}){const e=t.config??O.useContext(h9);if(!e)throw new Roe;return e}var f9={exports:{}},p9={},g9={exports:{}},m9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qp=O;function Poe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ooe=typeof Object.is=="function"?Object.is:Poe,koe=Qp.useState,Doe=Qp.useEffect,$oe=Qp.useLayoutEffect,Moe=Qp.useDebugValue;function Loe(t,e){var n=e(),r=koe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return $oe(function(){s.value=n,s.getSnapshot=e,DS(s)&&i({inst:s})},[t,n,e]),Doe(function(){return DS(s)&&i({inst:s}),t(function(){DS(s)&&i({inst:s})})},[t]),Moe(n),n}function DS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ooe(t,n)}catch{return!0}}function Uoe(t,e){return e()}var Boe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Uoe:Loe;m9.useSyncExternalStore=Qp.useSyncExternalStore!==void 0?Qp.useSyncExternalStore:Boe;g9.exports=m9;var y9=g9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC=O,joe=y9;function Foe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Woe=typeof Object.is=="function"?Object.is:Foe,zoe=joe.useSyncExternalStore,Hoe=AC.useRef,qoe=AC.useEffect,Goe=AC.useMemo,Voe=AC.useDebugValue;p9.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=Hoe(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=Goe(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Woe(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=zoe(t,i[0],i[1]);return qoe(function(){o.hasValue=!0,o.value=a},[a]),Voe(a),a};f9.exports=p9;var w9=f9.exports;const $S=t=>typeof t=="object"&&!Array.isArray(t);function Koe(t,e,n=e,r=lh){const s=O.useRef([]),i=w9.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if($S(o)&&$S(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return O.useMemo(()=>{if($S(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function D0(t={}){const e=So(t);return Koe(n=>i9(e,{onChange:n}),()=>up(e))}var xg=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uh=typeof window>"u"||"Deno"in globalThis;function As(){}function Yoe(t,e){return typeof t=="function"?t(e):t}function mx(t){return typeof t=="number"&&t>=0&&t!==1/0}function b9(t,e){return Math.max(t+(e||0)-Date.now(),0)}function yu(t,e){return typeof t=="function"?t(e):t}function co(t,e){return typeof t=="function"?t(e):t}function R3(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==mO(o,e.options))return!1}else if(!Sw(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function P3(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(dh(e.options.mutationKey)!==dh(i))return!1}else if(!Sw(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function mO(t,e){return((e==null?void 0:e.queryKeyHashFn)||dh)(t)}function dh(t){return JSON.stringify(t,(e,n)=>yx(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Sw(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Sw(t[n],e[n])):!1}function yO(t,e){if(t===e)return t;const n=O3(t)&&O3(e);if(n||yx(t)&&yx(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=yO(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function t_(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function O3(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function yx(t){if(!k3(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!k3(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function k3(t){return Object.prototype.toString.call(t)==="[object Object]"}function Qoe(t){return new Promise(e=>{setTimeout(e,t)})}function wx(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?yO(t,e):e}function Zoe(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Joe(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var wO=Symbol();function v9(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===wO?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function E9(t,e){return typeof t=="function"?t(...e):!!t}var Pd,Ul,yp,_U,Xoe=(_U=class extends xg{constructor(){super();Xe(this,Pd);Xe(this,Ul);Xe(this,yp);xe(this,yp,e=>{if(!uh&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){W(this,Ul)||this.setEventListener(W(this,yp))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Ul))==null||e.call(this),xe(this,Ul,void 0))}setEventListener(e){var n;xe(this,yp,e),(n=W(this,Ul))==null||n.call(this),xe(this,Ul,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){W(this,Pd)!==e&&(xe(this,Pd,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof W(this,Pd)=="boolean"?W(this,Pd):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Pd=new WeakMap,Ul=new WeakMap,yp=new WeakMap,_U),bO=new Xoe,wp,Bl,bp,CU,eae=(CU=class extends xg{constructor(){super();Xe(this,wp,!0);Xe(this,Bl);Xe(this,bp);xe(this,bp,e=>{if(!uh&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){W(this,Bl)||this.setEventListener(W(this,bp))}onUnsubscribe(){var e;this.hasListeners()||((e=W(this,Bl))==null||e.call(this),xe(this,Bl,void 0))}setEventListener(e){var n;xe(this,bp,e),(n=W(this,Bl))==null||n.call(this),xe(this,Bl,e(this.setOnline.bind(this)))}setOnline(e){W(this,wp)!==e&&(xe(this,wp,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return W(this,wp)}},wp=new WeakMap,Bl=new WeakMap,bp=new WeakMap,CU),n_=new eae;function bx(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function tae(t){return Math.min(1e3*2**t,3e4)}function _9(t){return(t??"online")==="online"?n_.isOnline():!0}var C9=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function MS(t){return t instanceof C9}function S9(t){let e=!1,n=0,r=!1,s;const i=bx(),o=g=>{var w;r||(h(new C9(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>bO.isFocused()&&(t.networkMode==="always"||n_.isOnline())&&t.canRun(),u=()=>_9(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(uh?0:3),E=t.retryDelay??tae,_=typeof E=="function"?E(n,y):E,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!C){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),Qoe(_).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var nae=t=>setTimeout(t,0);function rae(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=nae;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var wr=rae(),Od,SU,A9=(SU=class{constructor(){Xe(this,Od)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),mx(this.gcTime)&&xe(this,Od,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(uh?1/0:5*60*1e3))}clearGcTimeout(){W(this,Od)&&(clearTimeout(W(this,Od)),xe(this,Od,void 0))}},Od=new WeakMap,SU),vp,kd,io,Dd,ds,i0,$d,jo,Ec,AU,sae=(AU=class extends A9{constructor(e){super();Xe(this,jo);Xe(this,vp);Xe(this,kd);Xe(this,io);Xe(this,Dd);Xe(this,ds);Xe(this,i0);Xe(this,$d);xe(this,$d,!1),xe(this,i0,e.defaultOptions),this.setOptions(e.options),this.observers=[],xe(this,Dd,e.client),xe(this,io,W(this,Dd).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,xe(this,vp,iae(this.options)),this.state=e.state??W(this,vp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=W(this,ds))==null?void 0:e.promise}setOptions(e){this.options={...W(this,i0),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&W(this,io).remove(this)}setData(e,n){const r=wx(this.state.data,e,this.options);return _t(this,jo,Ec).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){_t(this,jo,Ec).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=W(this,ds))==null?void 0:r.promise;return(s=W(this,ds))==null||s.cancel(e),n?n.then(As).catch(As):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(W(this,vp))}isActive(){return this.observers.some(e=>co(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wO||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>yu(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!b9(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ds))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=W(this,ds))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),W(this,io).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(W(this,ds)&&(W(this,$d)?W(this,ds).cancel({revert:!0}):W(this,ds).cancelRetry()),this.scheduleGc()),W(this,io).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||_t(this,jo,Ec).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(W(this,ds))return W(this,ds).continueRetry(),W(this,ds).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(xe(this,$d,!0),r.signal)})},i=()=>{const h=v9(this.options,n),p=(()=>{const g={client:W(this,Dd),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return xe(this,$d,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:W(this,Dd),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),xe(this,kd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&_t(this,jo,Ec).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;MS(h)&&h.silent||_t(this,jo,Ec).call(this,{type:"error",error:h}),MS(h)||((p=(f=W(this,io).config).onError)==null||p.call(f,h,this),(w=(g=W(this,io).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return xe(this,ds,S9({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=W(this,io).config).onSuccess)==null||p.call(f,h,this),(w=(g=W(this,io).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{_t(this,jo,Ec).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{_t(this,jo,Ec).call(this,{type:"pause"})},onContinue:()=>{_t(this,jo,Ec).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),W(this,ds).start()}},vp=new WeakMap,kd=new WeakMap,io=new WeakMap,Dd=new WeakMap,ds=new WeakMap,i0=new WeakMap,$d=new WeakMap,jo=new WeakSet,Ec=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...I9(r.data,this.options),fetchMeta:e.meta??null};case"success":return xe(this,kd,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return MS(s)&&s.revert&&W(this,kd)?{...W(this,kd),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),wr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),W(this,io).notify({query:this,type:"updated",action:e})})},AU);function I9(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:_9(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function iae(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ia,IU,oae=(IU=class extends xg{constructor(e={}){super();Xe(this,Ia);this.config=e,xe(this,Ia,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??mO(s,n);let o=this.get(i);return o||(o=new sae({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){W(this,Ia).has(e.queryHash)||(W(this,Ia).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=W(this,Ia).get(e.queryHash);n&&(e.destroy(),n===e&&W(this,Ia).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){wr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return W(this,Ia).get(e)}getAll(){return[...W(this,Ia).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>R3(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>R3(e,r)):n}notify(e){wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){wr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){wr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ia=new WeakMap,IU),Na,_s,Md,xa,Sl,NU,aae=(NU=class extends A9{constructor(e){super();Xe(this,xa);Xe(this,Na);Xe(this,_s);Xe(this,Md);this.mutationId=e.mutationId,xe(this,_s,e.mutationCache),xe(this,Na,[]),this.state=e.state||N9(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){W(this,Na).includes(e)||(W(this,Na).push(e),this.clearGcTimeout(),W(this,_s).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){xe(this,Na,W(this,Na).filter(n=>n!==e)),this.scheduleGc(),W(this,_s).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){W(this,Na).length||(this.state.status==="pending"?this.scheduleGc():W(this,_s).remove(this))}continue(){var e;return((e=W(this,Md))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,E,_,C,I,A,N;const n=()=>{_t(this,xa,Sl).call(this,{type:"continue"})};xe(this,Md,S9({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,D)=>{_t(this,xa,Sl).call(this,{type:"failed",failureCount:S,error:D})},onPause:()=>{_t(this,xa,Sl).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>W(this,_s).canRun(this)}));const r=this.state.status==="pending",s=!W(this,Md).canStart();try{if(r)n();else{_t(this,xa,Sl).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=W(this,_s).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));D!==this.state.context&&_t(this,xa,Sl).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const S=await W(this,Md).start();return await((u=(l=W(this,_s).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=W(this,_s).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),_t(this,xa,Sl).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=W(this,_s).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((_=(E=this.options).onError)==null?void 0:_.call(E,S,e,this.state.context)),await((I=(C=W(this,_s).config).onSettled)==null?void 0:I.call(C,void 0,S,this.state.variables,this.state.context,this)),await((N=(A=this.options).onSettled)==null?void 0:N.call(A,void 0,S,e,this.state.context)),S}finally{_t(this,xa,Sl).call(this,{type:"error",error:S})}}finally{W(this,_s).runNext(this)}}},Na=new WeakMap,_s=new WeakMap,Md=new WeakMap,xa=new WeakSet,Sl=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),wr.batch(()=>{W(this,Na).forEach(r=>{r.onMutationUpdate(e)}),W(this,_s).notify({mutation:this,type:"updated",action:e})})},NU);function N9(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Nc,Fo,o0,xU,cae=(xU=class extends xg{constructor(e={}){super();Xe(this,Nc);Xe(this,Fo);Xe(this,o0);this.config=e,xe(this,Nc,new Set),xe(this,Fo,new Map),xe(this,o0,0)}build(e,n,r){const s=new aae({mutationCache:this,mutationId:++ub(this,o0)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){W(this,Nc).add(e);const n=Bb(e);if(typeof n=="string"){const r=W(this,Fo).get(n);r?r.push(e):W(this,Fo).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(W(this,Nc).delete(e)){const n=Bb(e);if(typeof n=="string"){const r=W(this,Fo).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&W(this,Fo).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Bb(e);if(typeof n=="string"){const r=W(this,Fo).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Bb(e);if(typeof n=="string"){const s=(r=W(this,Fo).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wr.batch(()=>{W(this,Nc).forEach(e=>{this.notify({type:"removed",mutation:e})}),W(this,Nc).clear(),W(this,Fo).clear()})}getAll(){return Array.from(W(this,Nc))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>P3(n,r))}findAll(e={}){return this.getAll().filter(n=>P3(e,n))}notify(e){wr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return wr.batch(()=>Promise.all(e.map(n=>n.continue().catch(As))))}},Nc=new WeakMap,Fo=new WeakMap,o0=new WeakMap,xU);function Bb(t){var e;return(e=t.options.scope)==null?void 0:e.id}function D3(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=v9(e.options,e.fetchOptions),b=async(E,_,C)=>{if(g)return Promise.reject();if(_==null&&E.pages.length)return Promise.resolve(E);const A=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:_,direction:C?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await y(A),{maxPages:S}=e.options,D=C?Joe:Zoe;return{pages:D(E.pages,N,S),pageParams:D(E.pageParams,_,S)}};if(s&&i.length){const E=s==="backward",_=E?lae:$3,C={pages:i,pageParams:o},I=_(r,C);a=await b(C,I,E)}else{const E=t??i.length;do{const _=c===0?o[0]??r.initialPageParam:$3(r,a);if(c>0&&_==null)break;a=await b(a,_),c++}while(c<E)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function $3(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function lae(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Qn,jl,Fl,Ep,_p,Wl,Cp,Sp,TU,uae=(TU=class{constructor(t={}){Xe(this,Qn);Xe(this,jl);Xe(this,Fl);Xe(this,Ep);Xe(this,_p);Xe(this,Wl);Xe(this,Cp);Xe(this,Sp);xe(this,Qn,t.queryCache||new oae),xe(this,jl,t.mutationCache||new cae),xe(this,Fl,t.defaultOptions||{}),xe(this,Ep,new Map),xe(this,_p,new Map),xe(this,Wl,0)}mount(){ub(this,Wl)._++,W(this,Wl)===1&&(xe(this,Cp,bO.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Qn).onFocus())})),xe(this,Sp,n_.subscribe(async t=>{t&&(await this.resumePausedMutations(),W(this,Qn).onOnline())})))}unmount(){var t,e;ub(this,Wl)._--,W(this,Wl)===0&&((t=W(this,Cp))==null||t.call(this),xe(this,Cp,void 0),(e=W(this,Sp))==null||e.call(this),xe(this,Sp,void 0))}isFetching(t){return W(this,Qn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return W(this,jl).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,Qn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=W(this,Qn).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(yu(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return W(this,Qn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=W(this,Qn).get(r.queryHash),i=s==null?void 0:s.state.data,o=Yoe(e,i);if(o!==void 0)return W(this,Qn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return wr.batch(()=>W(this,Qn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=W(this,Qn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=W(this,Qn);wr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=W(this,Qn);return wr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=wr.batch(()=>W(this,Qn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(As).catch(As)}invalidateQueries(t,e={}){return wr.batch(()=>(W(this,Qn).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=wr.batch(()=>W(this,Qn).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(As)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(As)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=W(this,Qn).build(this,e);return n.isStaleByTime(yu(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(As).catch(As)}fetchInfiniteQuery(t){return t.behavior=D3(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(As).catch(As)}ensureInfiniteQueryData(t){return t.behavior=D3(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return n_.isOnline()?W(this,jl).resumePausedMutations():Promise.resolve()}getQueryCache(){return W(this,Qn)}getMutationCache(){return W(this,jl)}getDefaultOptions(){return W(this,Fl)}setDefaultOptions(t){xe(this,Fl,t)}setQueryDefaults(t,e){W(this,Ep).set(dh(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...W(this,Ep).values()],n={};return e.forEach(r=>{Sw(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){W(this,_p).set(dh(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...W(this,_p).values()],n={};return e.forEach(r=>{Sw(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...W(this,Fl).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=mO(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===wO&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...W(this,Fl).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){W(this,Qn).clear(),W(this,jl).clear()}},Qn=new WeakMap,jl=new WeakMap,Fl=new WeakMap,Ep=new WeakMap,_p=new WeakMap,Wl=new WeakMap,Cp=new WeakMap,Sp=new WeakMap,TU),Qs,Dt,a0,Cs,Ld,Ap,zl,Hl,c0,Ip,Np,Ud,Bd,ql,xp,nn,Um,vx,Ex,_x,Cx,Sx,Ax,Ix,x9,RU,dae=(RU=class extends xg{constructor(e,n){super();Xe(this,nn);Xe(this,Qs);Xe(this,Dt);Xe(this,a0);Xe(this,Cs);Xe(this,Ld);Xe(this,Ap);Xe(this,zl);Xe(this,Hl);Xe(this,c0);Xe(this,Ip);Xe(this,Np);Xe(this,Ud);Xe(this,Bd);Xe(this,ql);Xe(this,xp,new Set);this.options=n,xe(this,Qs,e),xe(this,Hl,null),xe(this,zl,bx()),this.options.experimental_prefetchInRender||W(this,zl).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(W(this,Dt).addObserver(this),M3(W(this,Dt),this.options)?_t(this,nn,Um).call(this):this.updateResult(),_t(this,nn,Cx).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nx(W(this,Dt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nx(W(this,Dt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,_t(this,nn,Sx).call(this),_t(this,nn,Ax).call(this),W(this,Dt).removeObserver(this)}setOptions(e){const n=this.options,r=W(this,Dt);if(this.options=W(this,Qs).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof co(this.options.enabled,W(this,Dt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");_t(this,nn,Ix).call(this),W(this,Dt).setOptions(this.options),n._defaulted&&!t_(this.options,n)&&W(this,Qs).getQueryCache().notify({type:"observerOptionsUpdated",query:W(this,Dt),observer:this});const s=this.hasListeners();s&&L3(W(this,Dt),r,this.options,n)&&_t(this,nn,Um).call(this),this.updateResult(),s&&(W(this,Dt)!==r||co(this.options.enabled,W(this,Dt))!==co(n.enabled,W(this,Dt))||yu(this.options.staleTime,W(this,Dt))!==yu(n.staleTime,W(this,Dt)))&&_t(this,nn,vx).call(this);const i=_t(this,nn,Ex).call(this);s&&(W(this,Dt)!==r||co(this.options.enabled,W(this,Dt))!==co(n.enabled,W(this,Dt))||i!==W(this,ql))&&_t(this,nn,_x).call(this,i)}getOptimisticResult(e){const n=W(this,Qs).getQueryCache().build(W(this,Qs),e),r=this.createResult(n,e);return fae(this,r)&&(xe(this,Cs,r),xe(this,Ap,this.options),xe(this,Ld,W(this,Dt).state)),r}getCurrentResult(){return W(this,Cs)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){W(this,xp).add(e)}getCurrentQuery(){return W(this,Dt)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=W(this,Qs).defaultQueryOptions(e),r=W(this,Qs).getQueryCache().build(W(this,Qs),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return _t(this,nn,Um).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),W(this,Cs)))}createResult(e,n){var S;const r=W(this,Dt),s=this.options,i=W(this,Cs),o=W(this,Ld),a=W(this,Ap),l=e!==r?e.state:W(this,a0),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const D=this.hasListeners(),P=!D&&M3(e,n),B=D&&L3(e,r,n,s);(P||B)&&(d={...d,...I9(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let D;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,y=!0):D=typeof n.placeholderData=="function"?n.placeholderData((S=W(this,Np))==null?void 0:S.state.data,W(this,Np)):n.placeholderData,D!==void 0&&(w="success",f=wx(i==null?void 0:i.data,D,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===W(this,c0))f=W(this,Ip);else try{xe(this,c0,n.select),f=n.select(f),f=wx(i==null?void 0:i.data,f,n),xe(this,Ip,f),xe(this,Hl,null)}catch(D){xe(this,Hl,D)}W(this,Hl)&&(p=W(this,Hl),f=W(this,Ip),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",E=w==="pending",_=w==="error",C=E&&b,I=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:E,isSuccess:w==="success",isError:_,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!E,isLoadingError:_&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:_&&I,isStale:vO(e,n),refetch:this.refetch,promise:W(this,zl),isEnabled:co(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=q=>{N.status==="error"?q.reject(N.error):N.data!==void 0&&q.resolve(N.data)},P=()=>{const q=xe(this,zl,N.promise=bx());D(q)},B=W(this,zl);switch(B.status){case"pending":e.queryHash===r.queryHash&&D(B);break;case"fulfilled":(N.status==="error"||N.data!==B.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==B.reason)&&P();break}}return N}updateResult(){const e=W(this,Cs),n=this.createResult(W(this,Dt),this.options);if(xe(this,Ld,W(this,Dt).state),xe(this,Ap,this.options),W(this,Ld).data!==void 0&&xe(this,Np,W(this,Dt)),t_(n,e))return;xe(this,Cs,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!W(this,xp).size)return!0;const o=new Set(i??W(this,xp));return this.options.throwOnError&&o.add("error"),Object.keys(W(this,Cs)).some(a=>{const c=a;return W(this,Cs)[c]!==e[c]&&o.has(c)})};_t(this,nn,x9).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&_t(this,nn,Cx).call(this)}},Qs=new WeakMap,Dt=new WeakMap,a0=new WeakMap,Cs=new WeakMap,Ld=new WeakMap,Ap=new WeakMap,zl=new WeakMap,Hl=new WeakMap,c0=new WeakMap,Ip=new WeakMap,Np=new WeakMap,Ud=new WeakMap,Bd=new WeakMap,ql=new WeakMap,xp=new WeakMap,nn=new WeakSet,Um=function(e){_t(this,nn,Ix).call(this);let n=W(this,Dt).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(As)),n},vx=function(){_t(this,nn,Sx).call(this);const e=yu(this.options.staleTime,W(this,Dt));if(uh||W(this,Cs).isStale||!mx(e))return;const r=b9(W(this,Cs).dataUpdatedAt,e)+1;xe(this,Ud,setTimeout(()=>{W(this,Cs).isStale||this.updateResult()},r))},Ex=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(W(this,Dt)):this.options.refetchInterval)??!1},_x=function(e){_t(this,nn,Ax).call(this),xe(this,ql,e),!(uh||co(this.options.enabled,W(this,Dt))===!1||!mx(W(this,ql))||W(this,ql)===0)&&xe(this,Bd,setInterval(()=>{(this.options.refetchIntervalInBackground||bO.isFocused())&&_t(this,nn,Um).call(this)},W(this,ql)))},Cx=function(){_t(this,nn,vx).call(this),_t(this,nn,_x).call(this,_t(this,nn,Ex).call(this))},Sx=function(){W(this,Ud)&&(clearTimeout(W(this,Ud)),xe(this,Ud,void 0))},Ax=function(){W(this,Bd)&&(clearInterval(W(this,Bd)),xe(this,Bd,void 0))},Ix=function(){const e=W(this,Qs).getQueryCache().build(W(this,Qs),this.options);if(e===W(this,Dt))return;const n=W(this,Dt);xe(this,Dt,e),xe(this,a0,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},x9=function(e){wr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(W(this,Cs))}),W(this,Qs).getQueryCache().notify({query:W(this,Dt),type:"observerResultsUpdated"})})},RU);function hae(t,e){return co(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function M3(t,e){return hae(t,e)||t.state.data!==void 0&&Nx(t,e,e.refetchOnMount)}function Nx(t,e,n){if(co(e.enabled,t)!==!1&&yu(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&vO(t,e)}return!1}function L3(t,e,n,r){return(t!==e||co(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&vO(t,n)}function vO(t,e){return co(e.enabled,t)!==!1&&t.isStaleByTime(yu(e.staleTime,t))}function fae(t,e){return!t_(t.getCurrentResult(),e)}var Gl,Vl,Zs,xc,zc,Uv,xx,PU,pae=(PU=class extends xg{constructor(n,r){super();Xe(this,zc);Xe(this,Gl);Xe(this,Vl);Xe(this,Zs);Xe(this,xc);xe(this,Gl,n),this.setOptions(r),this.bindMethods(),_t(this,zc,Uv).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=W(this,Gl).defaultMutationOptions(n),t_(this.options,r)||W(this,Gl).getMutationCache().notify({type:"observerOptionsUpdated",mutation:W(this,Zs),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&dh(r.mutationKey)!==dh(this.options.mutationKey)?this.reset():((s=W(this,Zs))==null?void 0:s.state.status)==="pending"&&W(this,Zs).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=W(this,Zs))==null||n.removeObserver(this)}onMutationUpdate(n){_t(this,zc,Uv).call(this),_t(this,zc,xx).call(this,n)}getCurrentResult(){return W(this,Vl)}reset(){var n;(n=W(this,Zs))==null||n.removeObserver(this),xe(this,Zs,void 0),_t(this,zc,Uv).call(this),_t(this,zc,xx).call(this)}mutate(n,r){var s;return xe(this,xc,r),(s=W(this,Zs))==null||s.removeObserver(this),xe(this,Zs,W(this,Gl).getMutationCache().build(W(this,Gl),this.options)),W(this,Zs).addObserver(this),W(this,Zs).execute(n)}},Gl=new WeakMap,Vl=new WeakMap,Zs=new WeakMap,xc=new WeakMap,zc=new WeakSet,Uv=function(){var r;const n=((r=W(this,Zs))==null?void 0:r.state)??N9();xe(this,Vl,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},xx=function(n){wr.batch(()=>{var r,s,i,o,a,c,l,u;if(W(this,xc)&&this.hasListeners()){const d=W(this,Vl).variables,h=W(this,Vl).context;(n==null?void 0:n.type)==="success"?((s=(r=W(this,xc)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=W(this,xc)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=W(this,xc)).onError)==null||c.call(a,n.error,d,h),(u=(l=W(this,xc)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(W(this,Vl))})})},PU);function gae(t,e){return yO(t,e)}function mae(t){return JSON.stringify(t,(e,n)=>yae(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function yae(t){if(!U3(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!U3(n)||!n.hasOwnProperty("isPrototypeOf"))}function U3(t){return Object.prototype.toString.call(t)==="[object Object]"}function IC(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:E,enabled:_,notifyOnChangeProps:C,placeholderData:I,refetchInterval:A,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:D,refetchOnWindowFocus:P,retryOnMount:B,select:q,staleTime:L,suspense:T,throwOnError:x,config:$,connector:R,query:k,...j}=t;return j}function wae(t){return{mutationFn(e){return Mv(t,e)},mutationKey:["connect"]}}function bae(t){return{mutationFn(e){return dx(t,e)},mutationKey:["disconnect"]}}function vae(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return Qie(t,{...i,address:r})},queryKey:Eae(e)}}function Eae(t={}){return["ensName",IC(t)]}function _ae(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return Zie(t,{...o,connector:r})},queryKey:Cae(e)}}function Cae(t={}){const{connector:e,...n}=t;return["walletClient",{...IC(n),connectorUid:e==null?void 0:e.uid}]}function Sae(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return s9(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:Aae(e)}}function Aae(t={}){const{abi:e,...n}=t;return["readContract",IC(n)]}function Iae(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return c9(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:Nae(e)}}function Nae(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",IC(n)]}function xae(t){return{mutationFn(e){return l9(t,e)},mutationKey:["writeContract"]}}var T9=O.createContext(void 0),EO=t=>{const e=O.useContext(T9);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Tae=({client:t,children:e})=>(O.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(T9.Provider,{value:t,children:e})),R9=O.createContext(!1),Rae=()=>O.useContext(R9);R9.Provider;function Pae(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var Oae=O.createContext(Pae()),kae=()=>O.useContext(Oae),Dae=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},$ae=t=>{O.useEffect(()=>{t.clearReset()},[t])},Mae=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||E9(n,[t.error,r])),Lae=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Uae=(t,e)=>t.isLoading&&t.isFetching&&!e,Bae=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,B3=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function jae(t,e,n){var d,h,f,p,g;const r=Rae(),s=kae(),i=EO(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",Lae(o),Dae(o,s),$ae(s);const a=!i.getQueryCache().get(o.queryHash),[c]=O.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(O.useSyncExternalStore(O.useCallback(w=>{const y=u?c.subscribe(wr.batchCalls(w)):As;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),O.useEffect(()=>{c.setOptions(o)},[o,c]),Bae(o,l))throw B3(o,c,s);if(Mae({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!uh&&Uae(l,r)){const w=a?B3(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(As).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function Fae(t,e){return jae(t,dae)}function _O(t,e){const n=EO(),[r]=O.useState(()=>new pae(n,t));O.useEffect(()=>{r.setOptions(t)},[r,t]);const s=O.useSyncExternalStore(O.useCallback(o=>r.subscribe(wr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=O.useCallback((o,a)=>{r.mutate(o,a).catch(As)},[r]);if(s.error&&E9(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function NC(t){const e=Fae({...t,queryKeyHashFn:mae});return e.queryKey=t.queryKey,e}function xC(t={}){const e=So(t);return O.useSyncExternalStore(n=>noe(e,{onChange:n}),()=>S3(e),()=>S3(e))}function Wae(t={}){const e=So(t);return O.useSyncExternalStore(n=>a9(e,{onChange:n}),()=>A3(e),()=>A3(e))}function P9(t={}){const{mutation:e}=t,n=So(t),r=wae(n),{mutate:s,mutateAsync:i,...o}=_O({...e,...r});return O.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:Wae({config:n})}}function zae(t={}){const e=So(t);return O.useSyncExternalStore(n=>o9(e,{onChange:n}),()=>Bo(e),()=>Bo(e))}function O9(t={}){const{mutation:e}=t,n=So(t),r=bae(n),{mutate:s,mutateAsync:i,...o}=_O({...e,...r});return{...o,connectors:zae({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function k9(t={}){const{address:e,query:n={}}=t,r=So(t),s=xC({config:r}),i=vae(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return NC({...n,...i,enabled:o})}function Hae(t={}){const e=So(t);return w9.useSyncExternalStoreWithSelector(n=>soe(e,{onChange:n}),()=>hx(e,t),()=>hx(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function j3(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=So(t),a=xC({config:o}),c=Sae(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return NC({...s,...c,enabled:l,structuralSharing:s.structuralSharing??gae})}function D9(t={}){const{query:e={},...n}=t,r=So(n),s=EO(),{address:i,connector:o,status:a}=D0({config:r}),c=xC({config:r}),l=t.connector??o,{queryKey:u,...d}=_ae(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=O.useRef(i);return O.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),NC({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function LS(t={}){const{hash:e,query:n={}}=t,r=So(t),s=xC({config:r}),i=Iae(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return NC({...n,...i,enabled:o})}function US(t={}){const{mutation:e}=t,n=So(t),r=xae(n),{mutate:s,mutateAsync:i,...o}=_O({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const qae="_verified_lvyh0_1",CO={verified:qae},Gae=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:CO.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),Vae=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:CO.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Kae=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:CO.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function $9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=$9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function wu(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=$9(t))&&(r&&(r+=" "),r+=e);return r}const Yae="_root_98iqw_1",Qae="_article_98iqw_21",F3={root:Yae,article:Qae},SO=({className:t,children:e})=>m.jsx("div",{className:wu("react-tweet-theme",F3.root,t),children:m.jsx("article",{className:F3.article,children:e})}),M9=t=>m.jsx("img",{...t}),Zae="_header_nqq4j_1",Jae="_avatar_nqq4j_11",Xae="_avatarOverflow_nqq4j_16",ece="_avatarSquare_nqq4j_23",tce="_avatarShadow_nqq4j_26",nce="_author_nqq4j_37",rce="_authorLink_nqq4j_44",sce="_authorVerified_nqq4j_53",ice="_authorLinkText_nqq4j_56",oce="_authorMeta_nqq4j_63",ace="_authorFollow_nqq4j_66",cce="_username_nqq4j_69",lce="_follow_nqq4j_74",uce="_separator_nqq4j_82",dce="_brand_nqq4j_86",hce="_twitterIcon_nqq4j_90",jr={header:Zae,avatar:Jae,avatarOverflow:Xae,avatarSquare:ece,avatarShadow:tce,author:nce,authorLink:rce,authorVerified:sce,authorLinkText:ice,authorMeta:oce,authorFollow:ace,username:cce,follow:lce,separator:uce,brand:dce,twitterIcon:hce},fce="_verifiedOld_lcna5_1",pce="_verifiedBlue_lcna5_4",gce="_verifiedGovernment_lcna5_7",BS={verifiedOld:fce,verifiedBlue:pce,verifiedGovernment:gce},L9=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(Gae,{}),s=BS.verifiedBlue;if(n)switch(t.is_blue_verified||(s=BS.verifiedOld),t.verified_type){case"Government":r=m.jsx(Kae,{}),s=BS.verifiedGovernment;break;case"Business":r=m.jsx(Vae,{}),s=null;break}return n?m.jsx("div",{className:wu(e,s),children:r}):null},mce=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:M9,{user:s}=t;return m.jsxs("div",{className:jr.header,children:[m.jsxs("a",{href:t.url,className:jr.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:wu(jr.avatarOverflow,s.profile_image_shape==="Square"&&jr.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:jr.avatarOverflow,children:m.jsx("div",{className:jr.avatarShadow})})]}),m.jsxs("div",{className:jr.author,children:[m.jsxs("a",{href:t.url,className:jr.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:jr.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(L9,{user:s,className:jr.authorVerified})]}),m.jsxs("div",{className:jr.authorMeta,children:[m.jsx("a",{href:t.url,className:jr.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:jr.authorFollow,children:[m.jsx("span",{className:jr.separator,children:""}),m.jsx("a",{href:s.follow_url,className:jr.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:jr.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:jr.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},yce="_root_1ec15_1",wce={root:yce},bce=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:wce.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),vce="_root_eihfa_1",Ece={root:vce},_ce=({href:t,children:e})=>m.jsx("a",{href:t,className:Ece.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Cce="_root_1xq52_1",Sce={root:Cce},Ace=({tweet:t})=>m.jsx("p",{className:Sce.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(_ce,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),W3=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,U9=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Ice=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,Nce=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,xce=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Tce=t=>`https://x.com/hashtag/${t.text}`,Rce=t=>`https://x.com/search?q=%24${t.text}`,Pce=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,B9=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Oce=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},kce=t=>{const e=Oce(t);return e.length>1?e[1]:e[0]},Tx=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function z3(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return fm(n,"hashtag",t.entities.hashtags),fm(n,"mention",t.entities.user_mentions),fm(n,"url",t.entities.urls),fm(n,"symbol",t.entities.symbols),t.entities.media&&fm(n,"media",t.entities.media),Dce(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Tce(r),text:s});case"mention":return Object.assign(r,{href:U9(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:Rce(r),text:s});default:return Object.assign(r,{text:s})}})}function fm(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function Dce(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const $ce=t=>({...t,url:W3(t),user:{...t.user,url:U9(t),follow_url:xce(t)},like_url:Ice(t),reply_url:Nce(t),in_reply_to_url:t.in_reply_to_screen_name?Pce(t):void 0,entities:z3(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:W3(t.quoted_tweet),entities:z3(t.quoted_tweet)}:void 0}),Mce="_root_g9tkv_1",Lce="_rounded_g9tkv_6",Uce="_mediaWrapper_g9tkv_10",Bce="_grid2Columns_g9tkv_17",jce="_grid3_g9tkv_20",Fce="_grid2x2_g9tkv_23",Wce="_mediaContainer_g9tkv_26",zce="_mediaLink_g9tkv_34",Hce="_skeleton_g9tkv_38",qce="_image_g9tkv_43",Ci={root:Mce,rounded:Lce,mediaWrapper:Uce,grid2Columns:Bce,grid3:jce,grid2x2:Fce,mediaContainer:Wce,mediaLink:zce,skeleton:Hce,image:qce},Gce="_anchor_fp31d_1",Vce="_videoButton_fp31d_17",Kce="_videoButtonIcon_fp31d_35",Yce="_watchOnTwitter_fp31d_44",Qce="_viewReplies_fp31d_60",nf={anchor:Gce,videoButton:Vce,videoButtonIcon:Kce,watchOnTwitter:Yce,viewReplies:Qce},Zce=({tweet:t,media:e})=>{const[n,r]=O.useState(!0),[s,i]=O.useState(!1),[o,a]=O.useState(!1),c=kce(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:Ci.image,poster:B9(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:nf.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:nf.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:nf.watchOnTwitter,children:m.jsx("a",{href:t.url,className:nf.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:wu(nf.anchor,nf.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Jce=t=>m.jsx("img",{...t}),H3=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},j9=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Jce;return m.jsx("div",{className:wu(Ci.root,!n&&Ci.rounded),children:m.jsx("div",{className:wu(Ci.mediaWrapper,o>1&&Ci.grid2Columns,o===3&&Ci.grid3,o>4&&Ci.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(O.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:wu(Ci.mediaContainer,Ci.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Ci.skeleton,style:H3(l,o)}),m.jsx(c,{src:B9(l,"small"),alt:l.ext_alt_text||"Image",className:Ci.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:Ci.mediaContainer,children:[m.jsx("div",{className:Ci.skeleton,style:H3(l,o)}),m.jsx(Zce,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Xce={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},ele=new Intl.DateTimeFormat("en-US",Xce),tle=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},nle=t=>{const e=tle(ele.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},rle="_root_i24yn_1",sle={root:rle},ile=({tweet:t})=>{const e=new Date(t.created_at),n=nle(e);return m.jsx("a",{className:sle.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},ole="_info_19qcj_1",ale="_infoLink_19qcj_10",cle="_infoIcon_19qcj_30",jS={info:ole,infoLink:ale,infoIcon:cle},lle=({tweet:t})=>m.jsxs("div",{className:jS.info,children:[m.jsx(ile,{tweet:t}),m.jsx("a",{className:jS.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:jS.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),ule="_actions_n2anf_1",dle="_like_n2anf_13",hle="_reply_n2anf_14",fle="_copy_n2anf_15",ple="_likeIconWrapper_n2anf_27",gle="_likeCount_n2anf_30",mle="_replyIconWrapper_n2anf_35",yle="_copyIconWrapper_n2anf_36",wle="_likeIcon_n2anf_27",ble="_replyIcon_n2anf_35",vle="_copyIcon_n2anf_36",Ele="_replyText_n2anf_56",_le="_copyText_n2anf_57",Js={actions:ule,like:dle,reply:hle,copy:fle,likeIconWrapper:ple,likeCount:gle,replyIconWrapper:mle,copyIconWrapper:yle,likeIcon:wle,replyIcon:ble,copyIcon:vle,replyText:Ele,copyText:_le},Cle=({tweet:t})=>{const[e,n]=O.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return O.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:Js.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:Js.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:Js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:Js.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:Js.copyText,children:e?"Copied!":"Copy link"})]})},Sle=({tweet:t})=>{const e=Tx(t.favorite_count);return m.jsxs("div",{className:Js.actions,children:[m.jsxs("a",{className:Js.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:Js.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Js.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:Js.likeCount,children:e})]}),m.jsxs("a",{className:Js.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:Js.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:Js.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:Js.replyText,children:"Reply"})]}),m.jsx(Cle,{tweet:t})]})},Ale="_replies_1cutb_1",Ile="_link_1cutb_4",Nle="_text_1cutb_23",FS={replies:Ale,link:Ile,text:Nle},xle=({tweet:t})=>m.jsx("div",{className:FS.replies,children:m.jsx("a",{className:FS.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:FS.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${Tx(t.conversation_count)} reply`:`Read ${Tx(t.conversation_count)} replies`})})}),Tle="_root_q5799_1",Rle="_article_q5799_16",q3={root:Tle,article:Rle},Ple=({tweet:t,children:e})=>m.jsx("div",{className:q3.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:q3.article,children:e})}),Ole="_header_r31i5_1",kle="_avatar_r31i5_11",Dle="_avatarSquare_r31i5_17",$le="_author_r31i5_21",Mle="_authorText_r31i5_26",Lle="_username_r31i5_33",Ku={header:Ole,avatar:kle,avatarSquare:Dle,author:$le,authorText:Mle,username:Lle},Ule=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Ku.header,children:[m.jsx("a",{href:t.url,className:Ku.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:wu(Ku.avatarOverflow,e.profile_image_shape==="Square"&&Ku.avatarSquare),children:m.jsx(M9,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Ku.author,children:[m.jsx("div",{className:Ku.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(L9,{user:e}),m.jsx("div",{className:Ku.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},Ble="_root_175ot_1",jle={root:Ble},Fle=({tweet:t})=>m.jsx("p",{className:jle.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Wle=({tweet:t})=>{var e;return m.jsxs(Ple,{tweet:t,children:[m.jsx(Ule,{tweet:t}),m.jsx(Fle,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(j9,{quoted:!0,tweet:t}):null]})},zle=({tweet:t,components:e})=>{var n;const r=O.useMemo(()=>$ce(t),[t]);return m.jsxs(SO,{children:[m.jsx(mce,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(bce,{tweet:r}),m.jsx(Ace,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(j9,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(Wle,{tweet:r.quoted_tweet}),m.jsx(lle,{tweet:r}),m.jsx(Sle,{tweet:r}),m.jsx(xle,{tweet:r})]})},Hle="_root_16yxa_1",qle={root:Hle},Gle=t=>m.jsx(SO,{children:m.jsxs("div",{className:qle.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found"})]})}),Vle="_skeleton_oi7hr_1",Kle={skeleton:Vle},jb=({style:t})=>m.jsx("span",{className:Kle.skeleton,style:t}),Yle="_root_17qqv_1",Qle={root:Yle},Zle=()=>m.jsxs(SO,{className:Qle.root,children:[m.jsx(jb,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(jb,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(jb,{style:{height:"2rem"}}),m.jsx(jb,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]}),F9=0,W9=1,z9=2,G3=3;var V3=Object.prototype.hasOwnProperty;function Rx(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Rx(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(V3.call(t,n)&&++r&&!V3.call(e,n)||!(n in e)||!Rx(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Tc=new WeakMap,Zl=()=>{},Ns=Zl(),Px=Object,Bt=t=>t===Ns,Ma=t=>typeof t=="function",Ou=(t,e)=>({...t,...e}),H9=t=>Ma(t.then),WS={},Fb={},AO="undefined",$0=typeof window!=AO,Ox=typeof document!=AO,Jle=$0&&"Deno"in window,Xle=()=>$0&&typeof window.requestAnimationFrame!=AO,q9=(t,e)=>{const n=Tc.get(t);return[()=>!Bt(e)&&t.get(e)||WS,r=>{if(!Bt(e)){const s=t.get(e);e in Fb||(Fb[e]=s),n[5](e,Ou(s,r),s||WS)}},n[6],()=>!Bt(e)&&e in Fb?Fb[e]:!Bt(e)&&t.get(e)||WS]};let kx=!0;const eue=()=>kx,[Dx,$x]=$0&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Zl,Zl],tue=()=>{const t=Ox&&document.visibilityState;return Bt(t)||t!=="hidden"},nue=t=>(Ox&&document.addEventListener("visibilitychange",t),Dx("focus",t),()=>{Ox&&document.removeEventListener("visibilitychange",t),$x("focus",t)}),rue=t=>{const e=()=>{kx=!0,t()},n=()=>{kx=!1};return Dx("online",e),Dx("offline",n),()=>{$x("online",e),$x("offline",n)}},sue={isOnline:eue,isVisible:tue},iue={initFocus:nue,initReconnect:rue},K3=!Di.useId,Aw=!$0||Jle,oue=t=>Xle()?window.requestAnimationFrame(t):setTimeout(t,1),zS=Aw?O.useEffect:O.useLayoutEffect,HS=typeof navigator<"u"&&navigator.connection,Y3=!Aw&&HS&&(["slow-2g","2g"].includes(HS.effectiveType)||HS.saveData),Wb=new WeakMap,aue=t=>Px.prototype.toString.call(t),qS=(t,e)=>t===`[object ${e}]`;let cue=0;const Mx=t=>{const e=typeof t,n=aue(t),r=qS(n,"Date"),s=qS(n,"RegExp"),i=qS(n,"Object");let o,a;if(Px(t)===t&&!r&&!s){if(o=Wb.get(t),o)return o;if(o=++cue+"~",Wb.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Mx(t[a])+",";Wb.set(t,o)}if(i){o="#";const c=Px.keys(t).sort();for(;!Bt(a=c.pop());)Bt(t[a])||(o+=a+":"+Mx(t[a])+",");Wb.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},IO=t=>{if(Ma(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Mx(t):"",[t,e]};let lue=0;const Lx=()=>++lue;async function G9(...t){const[e,n,r,s]=t,i=Ou({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Ma(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=IO(h);if(!f)return;const[p,g]=q9(e,f),[w,y,b,E]=Tc.get(e),_=()=>{const L=w[f];return(Ma(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete E[f],L&&L[0])?L[0](z9).then(()=>p().data):p().data};if(t.length<3)return _();let C=r,I,A=!1;const N=Lx();y[f]=[N,0];const S=!Bt(c),D=p(),P=D.data,B=D._c,q=Bt(B)?P:B;if(S&&(c=Ma(c)?c(q,P):c,g({data:c,_c:q})),Ma(C))try{C=C(q)}catch(L){I=L,A=!0}if(C&&H9(C))if(C=await C.catch(L=>{I=L,A=!0}),N!==y[f][0]){if(A)throw I;return C}else A&&S&&l(I)&&(o=!0,g({data:q,_c:Ns}));if(o&&!A)if(Ma(o)){const L=o(C,q);g({data:L,error:Ns,_c:Ns})}else g({data:C,error:Ns,_c:Ns});if(y[f][1]=Lx(),Promise.resolve(_()).then(()=>{g({_c:Ns})}),A){if(u)throw I;return}return C}}const Q3=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},uue=(t,e)=>{if(!Tc.has(t)){const n=Ou(iue,e),r=Object.create(null),s=G9.bind(Ns,t);let i=Zl;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Tc.has(t)&&(Tc.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!Aw)){const u=n.initFocus(setTimeout.bind(Ns,Q3.bind(Ns,r,F9))),d=n.initReconnect(setTimeout.bind(Ns,Q3.bind(Ns,r,W9)));i=()=>{u&&u(),d&&d(),Tc.delete(t)}}};return l(),[t,s,l,i]}return[t,Tc.get(t)[4]]},due=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!Bt(i)&&o>i||setTimeout(r,a,s)},hue=Rx,[V9,fue]=uue(new Map),pue=Ou({onLoadingSlow:Zl,onSuccess:Zl,onError:Zl,onErrorRetry:due,onDiscarded:Zl,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Y3?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Y3?5e3:3e3,compare:hue,isPaused:()=>!1,cache:V9,mutate:fue,fallback:{}},sue),gue=(t,e)=>{const n=Ou(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Ou(s,o))}return n},mue=O.createContext({}),yue="$inf$",K9=$0&&window.__SWR_DEVTOOLS_USE__,wue=K9?window.__SWR_DEVTOOLS_USE__:[],bue=()=>{K9&&(window.__SWR_DEVTOOLS_REACT__=Di)},vue=t=>Ma(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Eue=()=>Ou(pue,O.useContext(mue)),_ue=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=IO(e),[,,,a]=Tc.get(V9);if(o.startsWith(yue))return n(...i);const c=a[o];return Bt(c)?n(...i):(delete a[o],c)}),r),Cue=wue.concat(_ue),Sue=t=>function(...n){const r=Eue(),[s,i,o]=vue(n),a=gue(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Cue);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Aue=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};bue();const GS=Di.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),VS={dedupe:!0},Iue=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Tc.get(r),[y,b]=IO(t),E=O.useRef(!1),_=O.useRef(!1),C=O.useRef(y),I=O.useRef(e),A=O.useRef(n),N=()=>A.current,S=()=>N().isVisible()&&N().isOnline(),[D,P,B,q]=q9(r,y),L=O.useRef({}).current,T=Bt(o)?Bt(n.fallback)?Ns:n.fallback[y]:o,x=(le,me)=>{for(const ze in L){const Ke=ze;if(Ke==="data"){if(!s(le[Ke],me[Ke])&&(!Bt(le[Ke])||!s(ae,me[Ke])))return!1}else if(me[Ke]!==le[Ke])return!1}return!0},$=O.useMemo(()=>{const le=!y||!e?!1:Bt(a)?N().isPaused()||i?!1:c!==!1:a,me=_n=>{const Un=Ou(_n);return delete Un._k,le?{isValidating:!0,isLoading:!0,...Un}:Un},ze=D(),Ke=q(),Yt=me(ze),rn=ze===Ke?Yt:me(Ke);let sn=Yt;return[()=>{const _n=me(D());return x(_n,sn)?(sn.data=_n.data,sn.isLoading=_n.isLoading,sn.isValidating=_n.isValidating,sn.error=_n.error,sn):(sn=_n,_n)},()=>rn]},[r,y]),R=y9.useSyncExternalStore(O.useCallback(le=>B(y,(me,ze)=>{x(ze,me)||le()}),[r,y]),$[0],$[1]),k=!E.current,j=f[y]&&f[y].length>0,H=R.data,X=Bt(H)?T&&H9(T)?GS(T):T:H,se=R.error,ne=O.useRef(X),ae=h?Bt(H)?Bt(ne.current)?X:ne.current:H:X,ye=j&&!Bt(se)?!1:k&&!Bt(a)?a:N().isPaused()?!1:i?Bt(X)?!1:c:Bt(X)||c,Z=!!(y&&e&&k&&ye),re=Bt(R.isValidating)?Z:R.isValidating,de=Bt(R.isLoading)?Z:R.isLoading,ee=O.useCallback(async le=>{const me=I.current;if(!y||!me||_.current||N().isPaused())return!1;let ze,Ke,Yt=!0;const rn=le||{},sn=!g[y]||!rn.dedupe,_n=()=>K3?!_.current&&y===C.current&&E.current:y===C.current,Un={isValidating:!1,isLoading:!1},or=()=>{P(Un)},ss=()=>{const Ft=g[y];Ft&&Ft[1]===Ke&&delete g[y]},To={isValidating:!0};Bt(D().data)&&(To.isLoading=!0);try{if(sn&&(P(To),n.loadingTimeout&&Bt(D().data)&&setTimeout(()=>{Yt&&_n()&&N().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[me(b),Lx()]),[ze,Ke]=g[y],ze=await ze,sn&&setTimeout(ss,n.dedupingInterval),!g[y]||g[y][1]!==Ke)return sn&&_n()&&N().onDiscarded(y),!1;Un.error=Ns;const Ft=p[y];if(!Bt(Ft)&&(Ke<=Ft[0]||Ke<=Ft[1]||Ft[1]===0))return or(),sn&&_n()&&N().onDiscarded(y),!1;const ur=D().data;Un.data=s(ur,ze)?ur:ze,sn&&_n()&&N().onSuccess(ze,y,n)}catch(Ft){ss();const ur=N(),{shouldRetryOnError:sc}=ur;ur.isPaused()||(Un.error=Ft,sn&&_n()&&(ur.onError(Ft,y,ur),(sc===!0||Ma(sc)&&sc(Ft))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&ur.onErrorRetry(Ft,y,ur,qh=>{const is=f[y];is&&is[0]&&is[0](G3,qh)},{retryCount:(rn.retryCount||0)+1,dedupe:!0})))}return Yt=!1,or(),!0},[y,r]),he=O.useCallback((...le)=>G9(r,C.current,...le),[]);if(zS(()=>{I.current=e,A.current=n,Bt(H)||(ne.current=H)}),zS(()=>{if(!y)return;const le=ee.bind(Ns,VS);let me=0;N().revalidateOnFocus&&(me=Date.now()+N().focusThrottleInterval);const Ke=Aue(y,f,(Yt,rn={})=>{if(Yt==F9){const sn=Date.now();N().revalidateOnFocus&&sn>me&&S()&&(me=sn+N().focusThrottleInterval,le())}else if(Yt==W9)N().revalidateOnReconnect&&S()&&le();else{if(Yt==z9)return ee();if(Yt==G3)return ee(rn)}});return _.current=!1,C.current=y,E.current=!0,P({_k:b}),ye&&(g[y]||(Bt(X)||Aw?le():oue(le))),()=>{_.current=!0,Ke()}},[y]),zS(()=>{let le;function me(){const Ke=Ma(l)?l(D().data):l;Ke&&le!==-1&&(le=setTimeout(ze,Ke))}function ze(){!D().error&&(u||N().isVisible())&&(d||N().isOnline())?ee(VS).then(me):me()}return me(),()=>{le&&(clearTimeout(le),le=-1)}},[l,u,d,y]),O.useDebugValue(ae),i&&Bt(X)&&y){if(!K3&&Aw)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,A.current=n,_.current=!1;const le=w[y];if(!Bt(le)){const me=he(le);GS(me)}if(Bt(se)){const me=ee(VS);Bt(ae)||(me.status="fulfilled",me.value=!0),GS(me)}else throw se}return{mutate:he,get data(){return L.data=!0,ae},get error(){return L.error=!0,se},get isValidating(){return L.isValidating=!0,re},get isLoading(){return L.isLoading=!0,de}}},Z3=Sue(Iue);class Nue extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const xue=Z3.default||Z3,Tue="https://react-tweet.vercel.app";async function Rue([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Nue({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const Pue=(t,e,n)=>{const{isLoading:r,data:s,error:i}=xue(()=>e||t?[e||t&&`${Tue}/api/tweet/${t}`,n]:null,Rue,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},Oue=({id:t,apiUrl:e,fallback:n=m.jsx(Zle,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=Pue(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Gle;return m.jsx(l,{error:i?i(a):a})}return m.jsx(zle,{tweet:o,components:r})};var TC={exports:{}},Y9={},Q9={exports:{}},kue="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Due=kue,$ue=Due;function Z9(){}function J9(){}J9.resetWarningCache=Z9;var Mue=function(){function t(r,s,i,o,a,c){if(c!==$ue){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:J9,resetWarningCache:Z9};return n.PropTypes=n,n};Q9.exports=Mue();var X9=Q9.exports,Ux={exports:{}};function e7(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=e7(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function J3(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=e7(t))&&(r&&(r+=" "),r+=e);return r}Ux.exports=J3,Ux.exports.clsx=J3;var Lue=Ux.exports,tr={},nc={};Object.defineProperty(nc,"__esModule",{value:!0});nc.dontSetMe=Wue;nc.findInArray=Uue;nc.int=Fue;nc.isFunction=Bue;nc.isNum=jue;function Uue(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Bue(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function jue(t){return typeof t=="number"&&!isNaN(t)}function Fue(t){return parseInt(t,10)}function Wue(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Dh={};Object.defineProperty(Dh,"__esModule",{value:!0});Dh.browserPrefixToKey=n7;Dh.browserPrefixToStyle=zue;Dh.default=void 0;Dh.getPrefix=t7;const KS=["Moz","Webkit","O","ms"];function t7(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<KS.length;s++)if(n7(t,KS[s])in e)return KS[s];return""}function n7(t,e){return e?`${e}${Hue(t)}`:t}function zue(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Hue(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Dh.default=t7();Object.defineProperty(tr,"__esModule",{value:!0});tr.addClassName=i7;tr.addEvent=Gue;tr.addUserSelectStyles=rde;tr.createCSSTransform=Xue;tr.createSVGTransform=ede;tr.getTouch=tde;tr.getTouchIdentifier=nde;tr.getTranslation=NO;tr.innerHeight=Que;tr.innerWidth=Zue;tr.matchesSelector=s7;tr.matchesSelectorAndParentsTo=que;tr.offsetXYFromParent=Jue;tr.outerHeight=Kue;tr.outerWidth=Yue;tr.removeClassName=o7;tr.removeEvent=Vue;tr.scheduleRemoveUserSelectStyles=sde;var Li=nc,X3=r7(Dh);function r7(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(r7=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let zb="";function s7(t,e){return zb||(zb=(0,Li.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Li.isFunction)(t[n])})),(0,Li.isFunction)(t[zb])?t[zb](e):!1}function que(t,e,n){let r=t;do{if(s7(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Gue(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Vue(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Kue(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Li.int)(n.borderTopWidth),e+=(0,Li.int)(n.borderBottomWidth),e}function Yue(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Li.int)(n.borderLeftWidth),e+=(0,Li.int)(n.borderRightWidth),e}function Que(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Li.int)(n.paddingTop),e-=(0,Li.int)(n.paddingBottom),e}function Zue(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Li.int)(n.paddingLeft),e-=(0,Li.int)(n.paddingRight),e}function Jue(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Xue(t,e){const n=NO(t,e,"px");return{[(0,X3.browserPrefixToKey)("transform",X3.default)]:n}}function ede(t,e){return NO(t,e,"")}function NO(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function tde(t,e){return t.targetTouches&&(0,Li.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Li.findInArray)(t.changedTouches,n=>e===n.identifier)}function nde(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function rde(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&i7(t.body,"react-draggable-transparent-selection")}function sde(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{e$(t)}):e$(t)}function e$(t){if(t)try{if(t.body&&o7(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function i7(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function o7(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var rc={};Object.defineProperty(rc,"__esModule",{value:!0});rc.canDragX=ade;rc.canDragY=cde;rc.createCoreData=ude;rc.createDraggableData=dde;rc.getBoundPosition=ide;rc.getControlPosition=lde;rc.snapToGrid=ode;var Si=nc,Qf=tr;function ide(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:hde(r);const s=xO(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Si.int)(u.paddingLeft)+(0,Si.int)(l.marginLeft),top:-s.offsetTop+(0,Si.int)(u.paddingTop)+(0,Si.int)(l.marginTop),right:(0,Qf.innerWidth)(c)-(0,Qf.outerWidth)(s)-s.offsetLeft+(0,Si.int)(u.paddingRight)-(0,Si.int)(l.marginRight),bottom:(0,Qf.innerHeight)(c)-(0,Qf.outerHeight)(s)-s.offsetTop+(0,Si.int)(u.paddingBottom)-(0,Si.int)(l.marginBottom)}}return(0,Si.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Si.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Si.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Si.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function ode(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function ade(t){return t.props.axis==="both"||t.props.axis==="x"}function cde(t){return t.props.axis==="both"||t.props.axis==="y"}function lde(t,e,n){const r=typeof e=="number"?(0,Qf.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=xO(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Qf.offsetXYFromParent)(r||t,i,n.props.scale)}function ude(t,e,n){const r=!(0,Si.isNum)(t.lastX),s=xO(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function dde(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function hde(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function xO(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var RC={},PC={};Object.defineProperty(PC,"__esModule",{value:!0});PC.default=fde;function fde(){}Object.defineProperty(RC,"__esModule",{value:!0});RC.default=void 0;var YS=a7(O),bs=TO(X9),pde=TO(PP),ls=tr,ul=rc,QS=nc,pm=TO(PC);function TO(t){return t&&t.__esModule?t:{default:t}}function a7(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(a7=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function Es(t,e,n){return(e=gde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gde(t){var e=mde(t,"string");return typeof e=="symbol"?e:e+""}function mde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const $o={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let dl=$o.mouse,OC=class extends YS.Component{constructor(){super(...arguments),Es(this,"dragging",!1),Es(this,"lastX",NaN),Es(this,"lastY",NaN),Es(this,"touchIdentifier",null),Es(this,"mounted",!1),Es(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ls.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ls.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ls.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,ul.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,ul.createCoreData)(this,o,a);(0,pm.default)("DraggableCore: handleDragStart: %j",c),(0,pm.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ls.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ls.addEvent)(r,dl.move,this.handleDrag),(0,ls.addEvent)(r,dl.stop,this.handleDragStop))}),Es(this,"handleDrag",e=>{const n=(0,ul.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,ul.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,ul.createCoreData)(this,r,s);if((0,pm.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),Es(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,ul.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,ul.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,ul.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ls.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,pm.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,pm.default)("DraggableCore: Removing handlers"),(0,ls.removeEvent)(a.ownerDocument,dl.move,this.handleDrag),(0,ls.removeEvent)(a.ownerDocument,dl.stop,this.handleDragStop))}),Es(this,"onMouseDown",e=>(dl=$o.mouse,this.handleDragStart(e))),Es(this,"onMouseUp",e=>(dl=$o.mouse,this.handleDragStop(e))),Es(this,"onTouchStart",e=>(dl=$o.touch,this.handleDragStart(e))),Es(this,"onTouchEnd",e=>(dl=$o.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ls.addEvent)(e,$o.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ls.removeEvent)(n,$o.mouse.move,this.handleDrag),(0,ls.removeEvent)(n,$o.touch.move,this.handleDrag),(0,ls.removeEvent)(n,$o.mouse.stop,this.handleDragStop),(0,ls.removeEvent)(n,$o.touch.stop,this.handleDragStop),(0,ls.removeEvent)(e,$o.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ls.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:pde.default.findDOMNode(this)}render(){return YS.cloneElement(YS.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};RC.default=OC;Es(OC,"displayName","DraggableCore");Es(OC,"propTypes",{allowAnyClick:bs.default.bool,allowMobileScroll:bs.default.bool,children:bs.default.node.isRequired,disabled:bs.default.bool,enableUserSelectHack:bs.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:bs.default.arrayOf(bs.default.number),handle:bs.default.string,cancel:bs.default.string,nodeRef:bs.default.object,onStart:bs.default.func,onDrag:bs.default.func,onStop:bs.default.func,onMouseDown:bs.default.func,scale:bs.default.number,className:QS.dontSetMe,style:QS.dontSetMe,transform:QS.dontSetMe});Es(OC,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(O),n=u(X9),r=u(PP),s=Lue,i=tr,o=rc,a=nc,c=u(RC),l=u(PC);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var E=new WeakMap,_=new WeakMap;return(d=function(C,I){if(!I&&C&&C.__esModule)return C;var A,N,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(A=I?_:E){if(A.has(C))return A.get(C);A.set(C,S)}for(const D in C)D!=="default"&&{}.hasOwnProperty.call(C,D)&&((N=(A=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,D))&&(N.get||N.set)?A(S,D,N):S[D]=C[D]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var E=arguments[b];for(var _ in E)({}).hasOwnProperty.call(E,_)&&(y[_]=E[_])}return y},h.apply(null,arguments)}function f(y,b,E){return(b=p(b))in y?Object.defineProperty(y,b,{value:E,enumerable:!0,configurable:!0,writable:!0}):y[b]=E,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var E=y[Symbol.toPrimitive];if(E!==void 0){var _=E.call(y,b);if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,E){let{position:_}=b,{prevPropsPosition:C}=E;return _&&(!C||_.x!==C.x||_.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:_,prevPropsPosition:C}),{x:_.x,y:_.y,prevPropsPosition:{..._}}):null}constructor(b){super(b),f(this,"onDragStart",(E,_)=>{if((0,l.default)("Draggable: onDragStart: %j",_),this.props.onStart(E,(0,o.createDraggableData)(this,_))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(E,_)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",_);const C=(0,o.createDraggableData)(this,_),I={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[D,P]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=D,I.y=P,I.slackX=this.state.slackX+(N-I.x),I.slackY=this.state.slackY+(S-I.y),C.x=I.x,C.y=I.y,C.deltaX=I.x-this.state.x,C.deltaY=I.y-this.state.y}if(this.props.onDrag(E,C)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(E,_)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,_))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",_);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;I.x=N,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,E;return((E=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:E.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:E,children:_,defaultPosition:C,defaultClassName:I,defaultClassNameDragging:A,defaultClassNameDragged:N,position:S,positionOffset:D,scale:P,...B}=this.props;let q={},L=null;const x=!!!S||this.state.dragging,$=S||C,R={x:(0,o.canDragX)(this)&&x?this.state.x:$.x,y:(0,o.canDragY)(this)&&x?this.state.y:$.y};this.state.isElementSVG?L=(0,i.createSVGTransform)(R,D):q=(0,i.createCSSTransform)(R,D);const k=(0,s.clsx)(_.props.className||"",I,{[A]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},B,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(_),{className:k,style:{..._.props.style,...q},transform:L}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Y9);const{default:c7,DraggableCore:yde}=Y9;TC.exports=c7;TC.exports.default=c7;TC.exports.DraggableCore=yde;var wde=TC.exports;const M0=Ah(wde);function Hn(){return Hn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hn.apply(null,arguments)}function l7(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var u7={exports:{}},dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Br=typeof Symbol=="function"&&Symbol.for,RO=Br?Symbol.for("react.element"):60103,PO=Br?Symbol.for("react.portal"):60106,kC=Br?Symbol.for("react.fragment"):60107,DC=Br?Symbol.for("react.strict_mode"):60108,$C=Br?Symbol.for("react.profiler"):60114,MC=Br?Symbol.for("react.provider"):60109,LC=Br?Symbol.for("react.context"):60110,OO=Br?Symbol.for("react.async_mode"):60111,UC=Br?Symbol.for("react.concurrent_mode"):60111,BC=Br?Symbol.for("react.forward_ref"):60112,jC=Br?Symbol.for("react.suspense"):60113,bde=Br?Symbol.for("react.suspense_list"):60120,FC=Br?Symbol.for("react.memo"):60115,WC=Br?Symbol.for("react.lazy"):60116,vde=Br?Symbol.for("react.block"):60121,Ede=Br?Symbol.for("react.fundamental"):60117,_de=Br?Symbol.for("react.responder"):60118,Cde=Br?Symbol.for("react.scope"):60119;function qi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case RO:switch(t=t.type,t){case OO:case UC:case kC:case $C:case DC:case jC:return t;default:switch(t=t&&t.$$typeof,t){case LC:case BC:case WC:case FC:case MC:return t;default:return e}}case PO:return e}}}function d7(t){return qi(t)===UC}dn.AsyncMode=OO;dn.ConcurrentMode=UC;dn.ContextConsumer=LC;dn.ContextProvider=MC;dn.Element=RO;dn.ForwardRef=BC;dn.Fragment=kC;dn.Lazy=WC;dn.Memo=FC;dn.Portal=PO;dn.Profiler=$C;dn.StrictMode=DC;dn.Suspense=jC;dn.isAsyncMode=function(t){return d7(t)||qi(t)===OO};dn.isConcurrentMode=d7;dn.isContextConsumer=function(t){return qi(t)===LC};dn.isContextProvider=function(t){return qi(t)===MC};dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===RO};dn.isForwardRef=function(t){return qi(t)===BC};dn.isFragment=function(t){return qi(t)===kC};dn.isLazy=function(t){return qi(t)===WC};dn.isMemo=function(t){return qi(t)===FC};dn.isPortal=function(t){return qi(t)===PO};dn.isProfiler=function(t){return qi(t)===$C};dn.isStrictMode=function(t){return qi(t)===DC};dn.isSuspense=function(t){return qi(t)===jC};dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kC||t===UC||t===$C||t===DC||t===jC||t===bde||typeof t=="object"&&t!==null&&(t.$$typeof===WC||t.$$typeof===FC||t.$$typeof===MC||t.$$typeof===LC||t.$$typeof===BC||t.$$typeof===Ede||t.$$typeof===_de||t.$$typeof===Cde||t.$$typeof===vde)};dn.typeOf=qi;u7.exports=dn;var Sde=u7.exports,kO=Sde,Ade={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ide={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Nde={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},h7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},DO={};DO[kO.ForwardRef]=Nde;DO[kO.Memo]=h7;function t$(t){return kO.isMemo(t)?h7:DO[t.$$typeof]||Ade}var xde=Object.defineProperty,Tde=Object.getOwnPropertyNames,n$=Object.getOwnPropertySymbols,Rde=Object.getOwnPropertyDescriptor,Pde=Object.getPrototypeOf,r$=Object.prototype;function f7(t,e,n){if(typeof e!="string"){if(r$){var r=Pde(e);r&&r!==r$&&f7(t,r,n)}var s=Tde(e);n$&&(s=s.concat(n$(e)));for(var i=t$(t),o=t$(e),a=0;a<s.length;++a){var c=s[a];if(!Ide[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Rde(e,c);try{xde(t,c,l)}catch{}}}}return t}var Ode=f7;const kde=Ah(Ode);var p7={};Object.defineProperty(p7,"__esModule",{value:!0});p7.default=Dde;function Dde(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function Hb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r_(){return r_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r_.apply(this,arguments)}function $de(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function hl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mde(t){var e=function(n){$de(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,Hb(hl(hl(i)),"cachedTheme",void 0),Hb(hl(hl(i)),"lastOuterTheme",void 0),Hb(hl(hl(i)),"lastTheme",void 0),Hb(hl(hl(i)),"renderProvider",function(l){var u=i.props.children;return Di.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?r_({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Di.createElement(t.Consumer,null,this.renderProvider):null},r}(Di.Component);return e}function Lde(t){return function(n){var r=Di.forwardRef(function(s,i){return Di.createElement(t.Consumer,null,function(o){return Di.createElement(n,r_({theme:o,ref:i},s))})});return kde(r,n),r}}function Ude(t){var e=function(){var r=Di.useContext(t);return r};return e}function Bde(t){return{context:t,withTheme:Lde(t),useTheme:Ude(t),ThemeProvider:Mde(t)}}var g7=O.createContext();Bde(g7);var s$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tg=(typeof window>"u"?"undefined":s$(window))==="object"&&(typeof document>"u"?"undefined":s$(document))==="object"&&document.nodeType===9;function Iw(t){"@babel/helpers - typeof";return Iw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Iw(t)}function jde(t,e){if(Iw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Iw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Fde(t){var e=jde(t,"string");return Iw(e)=="symbol"?e:e+""}function Wde(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fde(r.key),r)}}function $O(t,e,n){return e&&Wde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bx(t,e){return Bx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Bx(t,e)}function m7(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Bx(t,e)}function i$(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var zde={}.constructor;function jx(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(jx);if(t.constructor!==zde)return t;var e={};for(var n in t)e[n]=jx(t[n]);return e}function zC(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=jx(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var o$=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},zd=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=o$(e[r]," ");else n=o$(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Rg(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function gm(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Nw(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=Rg(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=gm(f+":"+u+zd(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=gm(g+":"+u+zd(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=gm(y+":"+u+zd(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),gm(""+t+u+"{"+r,o)+gm("}",o))}var Hde=/([[\].#*$><+~=|^:(),"'`\s])/g,a$=typeof CSS<"u"&&CSS.escape,MO=function(t){return a$?a$(t):t.replace(Hde,"\\$1")},y7=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),Fx=function(t){m7(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(i$(i$(o)),l),o.selectorText="."+MO(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=zd(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Hn({},s,{allowEmpty:!0}):s;return Nw(this.selectorText,this.style,a)},$O(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(y7),qde={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Fx(e,n,r)}},ZS={indent:1,children:!0},Gde=/@([\w-]+)/,Vde=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Gde);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new HC(Hn({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=ZS);var s=Rg(r),i=s.linebreak;if(r.indent==null&&(r.indent=ZS.indent),r.children==null&&(r.children=ZS.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Kde=/@container|@media|@supports\s+/,Yde={onCreateRule:function(e,n,r){return Kde.test(e)?new Vde(e,n,r):null}},JS={indent:1,children:!0},Qde=/@keyframes\s+([\w-]+)/,Wx=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Qde);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:MO(c(this,a)),this.rules=new HC(Hn({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Hn({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=JS);var s=Rg(r),i=s.linebreak;if(r.indent==null&&(r.indent=JS.indent),r.children==null&&(r.children=JS.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Zde=/@keyframes\s+/,Jde=/\$([\w-]+)/g,zx=function(e,n){return typeof e=="string"?e.replace(Jde,function(r,s){return s in n?n[s]:r}):e},c$=function(e,n,r){var s=e[n],i=zx(s,r);i!==s&&(e[n]=i)},Xde={onCreateRule:function(e,n,r){return typeof e=="string"&&Zde.test(e)?new Wx(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&c$(e,"animation-name",r.keyframes),"animation"in e&&c$(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return zx(e,s.keyframes);case"animation-name":return zx(e,s.keyframes);default:return e}}},ehe=function(t){m7(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Hn({},s,{allowEmpty:!0}):s;return Nw(this.key,this.style,a)},e}(y7),the={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new ehe(e,n,r):null}},nhe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=Rg(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Nw(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return Nw(this.at,this.style,r)},t}(),rhe=/@font-face/,she={onCreateRule:function(e,n,r){return rhe.test(e)?new nhe(e,n,r):null}},ihe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return Nw(this.key,this.style,r)},t}(),ohe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new ihe(e,n,r):null}},ahe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),che={"@charset":!0,"@import":!0,"@namespace":!0},lhe={onCreateRule:function(e,n,r){return e in che?new ahe(e,n,r):null}},l$=[qde,Yde,Xde,the,she,ohe,lhe],uhe={process:!0},u$={force:!0,process:!0},HC=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Hn({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+MO(this.classes[p]));var g=zC(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Hn({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Fx?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Wx&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Fx?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Wx&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=uhe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,u$)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,u$)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=Rg(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),w7=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Hn({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new HC(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),dhe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),hhe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=l7(s,["attached"]),a=Rg(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},$O(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),my=new hhe,Hx=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),qx="2f1acc6c3a606b082e5eef5e54414ffb";Hx[qx]==null&&(Hx[qx]=0);var d$=Hx[qx]++,h$=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+d$+a+n:c+i.key+"-"+d$+(a?"-"+a:"")+"-"+n};return r},b7=function(e){var n;return function(){return n||(n=e()),n}},fhe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},phe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=zd(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},ghe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},mhe=function(e,n){return e.selectorText=n,e.selectorText===n},v7=b7(function(){return document.querySelector("head")});function yhe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function whe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function bhe(t){for(var e=v7(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function vhe(t){var e=my.registry;if(e.length>0){var n=yhe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=whe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=bhe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function Ehe(t,e){var n=e.insertionPoint,r=vhe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}v7().appendChild(t)}var _he=b7(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),f$=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},p$=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Che=function(){var e=document.createElement("style");return e.textContent=`
`,e},She=function(){function t(n){this.getPropertyValue=fhe,this.setProperty=phe,this.removeProperty=ghe,this.setSelector=mhe,this.hasInsertedRules=!1,this.cssRules=[],n&&my.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Che(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=_he();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){Ehe(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=p$(i,s);if(a=f$(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=p$(i,s),d=f$(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof w7&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Ahe=0,Ihe=function(){function t(n){this.id=Ahe++,this.version="10.10.0",this.plugins=new dhe,this.options={id:{minify:!1},createGenerateId:h$,Renderer:Tg?She:null,plugins:[]},this.generateId=h$({minify:!1});for(var r=0;r<l$.length;r++)this.plugins.use(l$[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Hn({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=my.index===0?0:my.index+1);var a=new w7(r,Hn({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),my.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Hn({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=zC(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),E7=function(e){return new Ihe(e)},g$=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},$O(t,[{key:"size",get:function(){return this.length}}]),t}(),LO=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function _7(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=_7(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */E7();var C7=Date.now(),XS="fnValues"+C7,eA="fnStyle"+ ++C7,Nhe=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=zC(n,{},s);return i[eA]=r,i},onProcessStyle:function(n,r){if(XS in r||eA in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[XS]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[eA];a&&(o.style=a(n)||{});var c=o[XS];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function xhe(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Rf;typeof self<"u"?Rf=self:typeof window<"u"?Rf=window:typeof global<"u"?Rf=global:typeof module<"u"?Rf=module:Rf=Function("return this")();var m$=xhe(Rf),y$=function(e){return e&&e[m$]&&e===e[m$]()},The=function(e){return{onCreateRule:function(r,s,i){if(!y$(s))return null;var o=s,a=zC(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!y$(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},Rhe=/;\n/,Phe=function(e){for(var n={},r=e.split(Rhe),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},Ohe=function(e){typeof e.style=="string"&&(e.style=Phe(e.style))};function khe(){return{onProcessRule:Ohe}}var bu="@global",Gx="@global ",Dhe=function(){function t(n,r,s){this.type="global",this.at=bu,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new HC(Hn({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),$he=function(){function t(n,r,s){this.type="global",this.at=bu,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(Gx.length);this.rule=s.jss.createRule(i,r,Hn({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Mhe=/\s*,\s*/g;function S7(t,e){for(var n=t.split(Mhe),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Lhe(t,e){var n=t.options,r=t.style,s=r?r[bu]:null;if(s){for(var i in s)e.addRule(i,s[i],Hn({},n,{selector:S7(i,t.selector)}));delete r[bu]}}function Uhe(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,bu.length)!==bu)){var i=S7(s.substr(bu.length),t.selector);e.addRule(i,r[s],Hn({},n,{selector:i})),delete r[s]}}function Bhe(){function t(n,r,s){if(!n)return null;if(n===bu)return new Dhe(n,r,s);if(n[0]==="@"&&n.substr(0,Gx.length)===Gx)return new $he(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Lhe(n,r),Uhe(n,r))}return{onCreateRule:t,onProcessRule:e}}var Bv=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},tA="extendCurrValue"+Date.now();function jhe(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Nd(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Hn({},t,{extend:l}):t.extend[c];Nd(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Nd(t.extend.extend,e,n,r);continue}if(Bv(t.extend[d])){d in r||(r[d]={}),Nd(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Fhe(t,e,n,r){for(var s in t)if(s!=="extend"){if(Bv(r[s])&&Bv(t[s])){Nd(t[s],e,n,r[s]);continue}if(Bv(t[s])){r[s]=Nd(t[s],e,n);continue}r[s]=t[s]}}function Nd(t,e,n,r){return r===void 0&&(r={}),jhe(t,e,n,r),Fhe(t,e,n,r),r}function Whe(){function t(n,r,s){return"extend"in n?Nd(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[tA])s.prop(i,null);return s[tA]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[tA]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var w$=/\s*,\s*/g,zhe=/&/g,Hhe=/\$([\w-]+)/g;function qhe(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(w$),a=s.split(w$),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(zhe,u):u+" "+h}return c}function n(s,i,o){if(o)return Hn({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Hn({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Hhe,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Hn({},l,{selector:p})):c.addRule(g,s[d],Hn({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function Vx(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=Vx(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return Vx(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Ghe(){function t(e,n){return"composes"in e&&(Vx(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Vhe=/[A-Z]/g,Khe=/^ms-/,nA={};function Yhe(t){return"-"+t.toLowerCase()}function A7(t){if(nA.hasOwnProperty(t))return nA[t];var e=t.replace(Vhe,Yhe);return nA[t]=Khe.test(e)?"-"+e:e}function s_(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:A7(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(s_):e.fallbacks=s_(t.fallbacks)),e}function Qhe(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=s_(n[r]);return n}return s_(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=A7(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var oe=LO&&CSS?CSS.px:"px",qb=LO&&CSS?CSS.ms:"ms",rf=LO&&CSS?CSS.percent:"%",Zhe={"animation-delay":qb,"animation-duration":qb,"background-position":oe,"background-position-x":oe,"background-position-y":oe,"background-size":oe,border:oe,"border-bottom":oe,"border-bottom-left-radius":oe,"border-bottom-right-radius":oe,"border-bottom-width":oe,"border-left":oe,"border-left-width":oe,"border-radius":oe,"border-right":oe,"border-right-width":oe,"border-top":oe,"border-top-left-radius":oe,"border-top-right-radius":oe,"border-top-width":oe,"border-width":oe,"border-block":oe,"border-block-end":oe,"border-block-end-width":oe,"border-block-start":oe,"border-block-start-width":oe,"border-block-width":oe,"border-inline":oe,"border-inline-end":oe,"border-inline-end-width":oe,"border-inline-start":oe,"border-inline-start-width":oe,"border-inline-width":oe,"border-start-start-radius":oe,"border-start-end-radius":oe,"border-end-start-radius":oe,"border-end-end-radius":oe,margin:oe,"margin-bottom":oe,"margin-left":oe,"margin-right":oe,"margin-top":oe,"margin-block":oe,"margin-block-end":oe,"margin-block-start":oe,"margin-inline":oe,"margin-inline-end":oe,"margin-inline-start":oe,padding:oe,"padding-bottom":oe,"padding-left":oe,"padding-right":oe,"padding-top":oe,"padding-block":oe,"padding-block-end":oe,"padding-block-start":oe,"padding-inline":oe,"padding-inline-end":oe,"padding-inline-start":oe,"mask-position-x":oe,"mask-position-y":oe,"mask-size":oe,height:oe,width:oe,"min-height":oe,"max-height":oe,"min-width":oe,"max-width":oe,bottom:oe,left:oe,top:oe,right:oe,inset:oe,"inset-block":oe,"inset-block-end":oe,"inset-block-start":oe,"inset-inline":oe,"inset-inline-end":oe,"inset-inline-start":oe,"box-shadow":oe,"text-shadow":oe,"column-gap":oe,"column-rule":oe,"column-rule-width":oe,"column-width":oe,"font-size":oe,"font-size-delta":oe,"letter-spacing":oe,"text-decoration-thickness":oe,"text-indent":oe,"text-stroke":oe,"text-stroke-width":oe,"word-spacing":oe,motion:oe,"motion-offset":oe,outline:oe,"outline-offset":oe,"outline-width":oe,perspective:oe,"perspective-origin-x":rf,"perspective-origin-y":rf,"transform-origin":rf,"transform-origin-x":rf,"transform-origin-y":rf,"transform-origin-z":rf,"transition-delay":qb,"transition-duration":qb,"vertical-align":oe,"flex-basis":oe,"shape-margin":oe,size:oe,gap:oe,grid:oe,"grid-gap":oe,"row-gap":oe,"grid-row-gap":oe,"grid-column-gap":oe,"grid-template-rows":oe,"grid-template-columns":oe,"grid-auto-rows":oe,"grid-auto-columns":oe,"box-shadow-x":oe,"box-shadow-y":oe,"box-shadow-blur":oe,"box-shadow-spread":oe,"font-line-height":oe,"text-shadow-x":oe,"text-shadow-y":oe,"text-shadow-blur":oe};function I7(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Jhe=I7(Zhe);function yy(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=yy(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=yy(s,e[s],n);else for(var i in e)e[i]=yy(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Jhe[t];return o&&!(e===0&&o===oe)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Xhe(t){t===void 0&&(t={});var e=I7(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=yy(o,s[o],e);return s}function r(s,i){return yy(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var efe={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},tfe={position:!0,size:!0},Gb={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},rA={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function nfe(t,e,n){return t.map(function(r){return x7(r,e,n,!1,!0)})}function N7(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?N7(t[0],e,n,r):typeof t[0]=="object"?nfe(t,e,r):[t]}function x7(t,e,n,r,s){if(!(Gb[e]||rA[e]))return[];var i=[];if(rA[e]&&(t=rfe(t,n,rA[e],r)),Object.keys(t).length)for(var o in Gb[e]){if(t[o]){Array.isArray(t[o])?i.push(tfe[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}Gb[e][o]!=null&&i.push(Gb[e][o])}return!i.length||s?i:[i]}function rfe(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=xw((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function xw(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=xw(t.fallbacks[i],e,!0);continue}t[r]=N7(s,r,efe,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=xw(t.fallbacks,e,!0);continue}t[r]=x7(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function sfe(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=xw(e[r],n);return e}return xw(e,n)}return{onProcessStyle:t}}function Kx(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ife(t){if(Array.isArray(t))return Kx(t)}function ofe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function afe(t,e){if(t){if(typeof t=="string")return Kx(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kx(t,e):void 0}}function cfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lfe(t){return ife(t)||ofe(t)||afe(t)||cfe()}var Bm="",Yx="",T7="",R7="",ufe=Tg&&"ontouchstart"in document.documentElement;if(Tg){var sA={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},dfe=document.createElement("p"),iA=dfe.style,hfe="Transform";for(var oA in sA)if(oA+hfe in iA){Bm=oA,Yx=sA[oA];break}Bm==="Webkit"&&"msHyphens"in iA&&(Bm="ms",Yx=sA.ms,R7="edge"),Bm==="Webkit"&&"-apple-trailing-word"in iA&&(T7="apple")}var vt={js:Bm,css:Yx,vendor:T7,browser:R7,isTouch:ufe};function ffe(t){return t[1]==="-"||vt.js==="ms"?t:"@"+vt.css+"keyframes"+t.substr(10)}var pfe={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:vt.js==="ms"?"-webkit-"+e:vt.css+e}},gfe={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:vt.js==="Webkit"?vt.css+"print-"+e:e}},mfe=/[-\s]+(.)?/g;function yfe(t,e){return e?e.toUpperCase():""}function UO(t){return t.replace(mfe,yfe)}function ku(t){return UO("-"+t)}var wfe={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(vt.js==="Webkit"){var r="mask-image";if(UO(r)in n)return e;if(vt.js+ku(r)in n)return vt.css+e}return e}},bfe={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:vt.vendor==="apple"&&!vt.isTouch?vt.css+e:e}},vfe={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:vt.css+e}},Efe={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:vt.css+e}},_fe={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:vt.js==="Webkit"||vt.js==="ms"&&vt.browser!=="edge"?vt.css+e:e}},Cfe={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:vt.js==="Moz"||vt.js==="ms"||vt.vendor==="apple"?vt.css+e:e}},Sfe={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(vt.js==="Webkit"){var r="WebkitColumn"+ku(e);return r in n?vt.css+"column-"+e:!1}if(vt.js==="Moz"){var s="page"+ku(e);return s in n?"page-"+e:!1}return!1}},Afe={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(vt.js==="Moz")return e;var r=e.replace("-inline","");return vt.js+ku(r)in n?vt.css+r:!1}},Ife={supportedProperty:function(e,n){return UO(e)in n?e:!1}},Nfe={supportedProperty:function(e,n){var r=ku(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:vt.js+r in n?vt.css+e:vt.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},xfe={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:vt.js==="ms"?""+vt.css+e:e}},Tfe={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:vt.js==="ms"?vt.css+"scroll-chaining":e}},Rfe={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Pfe={supportedProperty:function(e,n){var r=Rfe[e];return r&&vt.js+ku(r)in n?vt.css+r:!1}},P7={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Ofe=Object.keys(P7),kfe=function(e){return vt.css+e},Dfe={supportedProperty:function(e,n,r){var s=r.multiple;if(Ofe.indexOf(e)>-1){var i=P7[e];if(!Array.isArray(i))return vt.js+ku(i)in n?vt.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(vt.js+ku(i[0])in n))return!1;return i.map(kfe)}return!1}},O7=[pfe,gfe,wfe,bfe,vfe,Efe,_fe,Cfe,Sfe,Afe,Ife,Nfe,xfe,Tfe,Pfe,Dfe],b$=O7.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),$fe=O7.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,lfe(e.noPrefill)),t},[]),jm,hd={};if(Tg){jm=document.createElement("p");var aA=window.getComputedStyle(document.documentElement,"");for(var cA in aA)isNaN(cA)||(hd[aA[cA]]=aA[cA]);$fe.forEach(function(t){return delete hd[t]})}function Qx(t,e){if(e===void 0&&(e={}),!jm)return t;if(hd[t]!=null)return hd[t];(t==="transition"||t==="transform")&&(e[t]=t in jm.style);for(var n=0;n<b$.length&&(hd[t]=b$[n](t,jm.style,e),!hd[t]);n++);try{jm.style[t]=""}catch{return!1}return hd[t]}var sf={},Mfe={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Lfe=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Al;function Ufe(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?Qx(e):", "+Qx(n);return r||e||n}Tg&&(Al=document.createElement("p"));function v$(t,e){var n=e;if(!Al||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(sf[r]!=null)return sf[r];try{Al.style[t]=n}catch{return sf[r]=!1,!1}if(Mfe[t])n=n.replace(Lfe,Ufe);else if(Al.style[t]===""&&(n=vt.css+n,n==="-ms-flex"&&(Al.style[t]="-ms-flexbox"),Al.style[t]=n,Al.style[t]===""))return sf[r]=!1,!1;return Al.style[t]="",sf[r]=n,sf[r]}function Bfe(){function t(s){if(s.type==="keyframes"){var i=s;i.at=ffe(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=Qx(i);c&&c!==i&&(a=!0);var l=!1,u=v$(c,zd(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return v$(i,zd(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function jfe(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Ffe=function(e){return e===void 0&&(e={}),{plugins:[Nhe(),The(e.observable),khe(),Bhe(),Whe(),qhe(),Ghe(),Qhe(),Xhe(e.defaultUnit),sfe(),Bfe(),jfe()]}},Wfe=Number.MIN_SAFE_INTEGER||-1e9,zfe=function(){return Wfe++},Hfe=O.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Tg}),E$=new Map,BO=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new g$),r[n];var s=E$.get(n);return s||(s=new g$,E$.set(n,s)),s},_$=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=BO(r,s);o.manage(i),r.registry&&r.registry.add(n)}},qfe=function(e){if(e.sheet){var n=BO(e.context,e.index);n.unmanage(e.theme)}},Gfe=E7(Ffe()),k7=new WeakMap,D7=function(e){return k7.get(e)},Vfe=function(e,n){k7.set(e,n)},Kfe=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Yfe(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Hn({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Qfe=function(e){if(!e.context.disableStylesGeneration){var n=BO(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Gfe,i=Kfe(e),o=_7(i),a=s.createStyleSheet(i,Yfe(e,o!==null));return Vfe(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Zfe=function(e,n){for(var r in n)e.deleteRule(n[r])},Jfe=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Xfe=function(e,n){var r=D7(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},epe=function(e,n){if(!n)return e.classes;var r=D7(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function C$(t){return t?O.useEffect:Di.useInsertionEffect||O.useLayoutEffect}var lA={},la=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?zfe():s,o=r.theming,a=r.name,c=l7(r,["index","theming","name"]),l=o&&o.context||g7,u=function(f){return typeof e=="function"&&(f||O.useContext(l))||lA},d={};return function(f){var p=O.useRef(!0),g=O.useContext(Hfe),w=u(f&&f.theme),y=O.useMemo(function(){var C=Qfe({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&_$({index:i,context:g,sheet:C,theme:w}),[C,C?Xfe(C,f):null]},[g,w]),b=y[0],E=y[1];C$(g.isSSR)(function(){b&&E&&!p.current&&Jfe(f,b,E)},[f]),C$(g.isSSR)(function(){return b&&_$({index:i,context:g,sheet:b,theme:w}),function(){b&&(qfe({index:i,context:g,sheet:b,theme:w}),E&&Zfe(b,E))}},[b]);var _=O.useMemo(function(){return b&&E?epe(b,E):d},[b,E]);return O.useDebugValue(_),O.useDebugValue(w===lA?"No theme":w),O.useEffect(function(){p.current=!1}),_}};const tpe=la({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function uA({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=tpe(),d=O.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(M0,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const npe=la({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function no({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=npe({isOpen:e}),u=O.useRef(null),d=()=>{r&&r(t)};return m.jsx(M0,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const dA=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],rpe=80,spe=80,ipe=10,ope=10,ape=10,cpe=10,lpe=({onIconClick:t})=>{const e=dA.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:ape+d*(rpe+ipe),y:cpe+u*(spe+ope)},u++,u>=4&&(u=0,d++)}),l},[r,s]=O.useState(n()),[i,o]=O.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(uA,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(no,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:dA.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(uA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(no,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:dA.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(uA,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},upe=la({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),dpe=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=O.useState(!1),[o,a]=O.useState(new Date),c=upe({isOpen:s});O.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function $7(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function jO(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function M7(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function FO(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function L7(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function U7(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=`https://api.opensea.io/api/v2/collection/${t}/nfts?chain=solana&limit=${e}&include_orders=true`;try{const i=await fetch(r,{headers:{"X-API-KEY":n}});if(!i.ok)throw new Error(`Failed to get OpenSea Solana NFTs: ${i.statusText}`);const o=await i.json();console.log("Solana collection response:",o),console.log("Sample NFT from response:",o.nfts[0]),console.log("Sample NFT owners:",(s=o.nfts[0])==null?void 0:s.owners),console.log("Sample NFT full structure:",JSON.stringify(o.nfts[0],null,2));const a=o.nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"SOL",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea Solana NFTs:",i),i}}async function hpe(t,e=50){var s;const n="030a5ee582f64b8ab3a598ab2b97d85f",r=[`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false`,`https://api.opensea.io/api/v2/chain/solana/account/${t}/nfts?limit=${e}&include_orders=false&include_metadata=true`];for(const i of r){console.log("Trying OpenSea endpoint:",i);try{const o=await fetch(i,{headers:{"X-API-KEY":n}});if(console.log("Response status:",o.status),!o.ok){const c=await o.text();console.error("API Error response:",c);continue}const a=await o.json();if(console.log("Raw API response:",a),console.log("Number of NFTs returned:",((s=a.nfts)==null?void 0:s.length)||0),a.nfts&&a.nfts.length>0){const c=a.nfts.map(l=>({id:l.identifier,address:l.contract,token_id:parseInt(l.identifier,10),attributes:JSON.stringify(l.traits||[]),name:l.name||`#${l.identifier}`,image_url:l.image_url,owner_of:t,block_minted:0,contract_type:"SOL",description:l.description||"",image:l.image_url,image_url_shrunk:l.image_url,animation_url:l.animation_url,metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:"",num_items:1,created_at:l.updated_at||new Date().toISOString(),updated_at:l.updated_at||new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}));return console.log("Transformed NFTs:",c.length),{page:1,pageSize:e,totalCount:c.length,totalPages:1,data:c}}}catch(o){console.error("Error with endpoint:",i,o);continue}}return console.log("All OpenSea endpoints failed, returning empty result"),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]}}const fpe=la({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),ppe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=fpe({isOpen:t}),i=O.useRef(null),[o,a]=O.useState([]),[c,l]=O.useState(!1),[u,d]=O.useState(!1),[h,f]=O.useState({}),[p,g]=O.useState(null),{data:w}=D9();O.useEffect(()=>{t&&r&&y()},[t,r]);const y=async()=>{l(!0),g(null);try{const I=await $7(r);a(I);const A={};I.forEach(N=>{A[N.id]=0}),f(A)}catch(I){g(I.message)}finally{l(!1)}},b=(I,A)=>{f(N=>({...N,[I]:Math.max(0,A)}))},E=async()=>{const I=Object.entries(h).filter(([,A])=>A>0).map(([A,N])=>({id:A,quantity:N}));if(I.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const A=await M7(r,I);if(console.log("Mint API result:",A),A.success&&A.mintTransaction){console.log("Got mint transaction:",A.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const N=await w.sendTransaction({to:A.mintTransaction.to,value:BigInt(A.mintTransaction.value),data:A.mintTransaction.data});console.log("Transaction sent successfully:",N),alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){console.error("Transaction sending failed:",N),g("Transaction failed: "+N.message)}}else throw new Error(A.message||"Could not retrieve minting transaction.")}catch(A){console.error("Minting failed:",A),g("Minting failed: "+A.message)}finally{d(!1)}},_=(I,A)=>`${parseFloat(I)} ${A}`,C=()=>{n&&n()};return t?m.jsx(M0,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:C,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(I=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:I.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",_(I.token_price,I.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",I.wallet_limit===4294967295?"Unlimited":I.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:I.wallet_limit===4294967295?999:I.wallet_limit,value:h[I.id]||0,onChange:A=>b(I.id,parseInt(A.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},I.id))]}),m.jsx("button",{onClick:()=>void E(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},gpe=la({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),mpe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},ype=({nft:t,onClose:e})=>{const n=gpe(),r=O.useRef(null),s=mpe(t.attributes);return m.jsx(M0,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx("img",{src:t.image_url,alt:t.name,className:n.detailImage}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},wpe=Symbol(),S$=Object.getPrototypeOf,Zx=new WeakMap,bpe=t=>t&&(Zx.has(t)?Zx.get(t):S$(t)===Object.prototype||S$(t)===Array.prototype),vpe=t=>bpe(t)&&t[wpe]||null,A$=(t,e=!0)=>{Zx.set(t,e)},i_={},hA=t=>typeof t=="object"&&t!==null,Rl=new WeakMap,Fm=new WeakSet,Epe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>hA(l)&&!Fm.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return A$(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(Fm.has(g))A$(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Rl.has(g)){const[b,E]=Rl.get(g);y.value=i(b,E(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!hA(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,D=++a[0])=>{d!==D&&(d=D,h.forEach(P=>P(S,D)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([D])=>{const P=D[1](S);P>d&&(d=P)})),d),w=S=>(D,P)=>{const B=[...D];B[1]=[S,...B[1]],f(B,P)},y=new Map,b=(S,D)=>{if((i_?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=D[3](w(S));y.set(S,[D,P])}else y.set(S,[D])},E=S=>{var D;const P=y.get(S);P&&(y.delete(S),(D=P[1])==null||D.call(P))},_=S=>(h.add(S),h.size===1&&y.forEach(([P,B],q)=>{if((i_?"production":void 0)!=="production"&&B)throw new Error("remove already exists");const L=P[3](w(q));y.set(q,[P,L])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,B],q)=>{B&&(B(),y.set(q,[P]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),A=e(C,{deleteProperty(S,D){const P=Reflect.get(S,D);E(D);const B=Reflect.deleteProperty(S,D);return B&&f(["delete",[D],P]),B},set(S,D,P,B){const q=Reflect.has(S,D),L=Reflect.get(S,D,B);if(q&&(t(L,P)||o.has(P)&&t(L,o.get(P))))return!0;E(D),hA(P)&&(P=vpe(P)||P);let T=P;if(P instanceof Promise)P.then(x=>{P.status="fulfilled",P.value=x,f(["resolve",[D],x])}).catch(x=>{P.status="rejected",P.reason=x,f(["reject",[D],x])});else{!Rl.has(P)&&n(P)&&(T=c(P));const x=!Fm.has(T)&&Rl.get(T);x&&b(D,x)}return Reflect.set(S,D,T,B),f(["set",[D],P,L]),!0}});o.set(l,A);const N=[C,g,i,_];return Rl.set(A,N),Reflect.ownKeys(l).forEach(S=>{const D=Object.getOwnPropertyDescriptor(l,S);"value"in D&&(A[S]=l[S],delete D.value,delete D.writable),Object.defineProperty(C,S,D)}),A})=>[c,Rl,Fm,t,e,n,r,s,i,o,a],[_pe]=Epe();function Mn(t={}){return _pe(t)}function ms(t,e,n){const r=Rl.get(t);(i_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function Tw(t,e){const n=Rl.get(t);(i_?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function hh(t){return Fm.add(t),t}function ws(t,e,n,r){let s=t[e];return ms(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function Cpe(t){const e=Mn({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var I$={};const ke={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof I$<"u"?I$.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},B7={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ke.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var Spe=20,Ape=1,fh=1e6,N$=1e6,Ipe=-7,Npe=21,xpe=!1,L0="[big.js] ",$h=L0+"Invalid ",qC=$h+"decimal places",Tpe=$h+"rounding mode",j7=L0+"Division by zero",un={},za=void 0,Rpe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function F7(){function t(e){var n=this;if(!(n instanceof t))return e===za?F7():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError($h+"value");e=e===0&&1/e<0?"-0":String(e)}Ppe(n,e)}n.constructor=t}return t.prototype=un,t.DP=Spe,t.RM=Ape,t.NE=Ipe,t.PE=Npe,t.strict=xpe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function Ppe(t,e){var n,r,s;if(!Rpe.test(e))throw Error($h+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function Mh(t,e,n,r){var s=t.c;if(n===za&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(Tpe);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==za))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==za||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Lh(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}un.abs=function(){var t=new this.constructor(this);return t.s=1,t};un.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};un.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>fh)throw Error(qC);if(!s[0])throw Error(j7);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],E=0,_=o+(y.e=e.e-t.e)+1;for(y.s=i,i=_<0?0:_,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[E++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==za)&&i--);return!b[0]&&E!=1&&(b.shift(),y.e--,_--),E>_&&Mh(y,_,n.RM,g[0]!==za),y};un.eq=function(t){return this.cmp(t)===0};un.gt=function(t){return this.cmp(t)>0};un.gte=function(t){return this.cmp(t)>-1};un.lt=function(t){return this.cmp(t)<0};un.lte=function(t){return this.cmp(t)<1};un.minus=un.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};un.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(j7);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};un.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};un.plus=un.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};un.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-N$||t>N$)throw Error($h+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};un.prec=function(t,e){if(t!==~~t||t<1||t>fh)throw Error($h+"precision");return Mh(new this.constructor(this),t,e)};un.round=function(t,e){if(t===za)t=0;else if(t!==~~t||t<-fh||t>fh)throw Error(qC);return Mh(new this.constructor(this),t+this.e+1,e)};un.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(L0+"No square root");i=Math.sqrt(+Lh(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return Mh(t,(s.DP-=4)+t.e+1,s.RM)};un.times=un.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};un.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==za){if(t!==~~t||t<0||t>fh)throw Error(qC);for(n=Mh(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Lh(n,!0,!!r)};un.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==za){if(t!==~~t||t<0||t>fh)throw Error(qC);for(n=Mh(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Lh(n,!1,!!r)};un[Symbol.for("nodejs.util.inspect.custom")]=un.toJSON=un.toString=function(){var t=this,e=t.constructor;return Lh(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};un.toNumber=function(){var t=+Lh(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(L0+"Imprecise conversion");return t};un.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==za){if(t!==~~t||t<1||t>fh)throw Error($h+"precision");for(n=Mh(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Lh(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};un.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(L0+"valueOf disallowed");return Lh(t,t.e<=e.NE||t.e>=e.PE,!0)};var La=F7();const Ope={bigNumber(t){return t?new La(t):new La(0)},multiply(t,e){if(t===void 0||e===void 0)return new La(0);const n=new La(t),r=new La(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},kpe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Dpe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],$pe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Mpe={getERC20Abi:t=>ke.USDT_CONTRACT_ADDRESSES.includes(t)?$pe:kpe,getSwapAbi:()=>Dpe},fl={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},yt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function fA(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const ft={setItem(t,e){Wm()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Wm())return localStorage.getItem(t)||void 0},removeItem(t){Wm()&&localStorage.removeItem(t)},clear(){Wm()&&localStorage.clear()}};function Wm(){return typeof window<"u"&&typeof localStorage<"u"}function $c(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var x$={};const pA=(typeof process<"u"&&typeof x$<"u"?x$.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",W7=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Lpe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",mn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:pA,SECURE_SITE_DASHBOARD:`${pA}/dashboard`,SECURE_SITE_FAVICON:`${pA}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},je={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=je.getActiveNamespace(),e=je.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{ft.setItem(yt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=ft.getItem(yt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{ft.removeItem(yt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{ft.setItem(yt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{ft.setItem(yt.ACTIVE_CAIP_NETWORK_ID,t),je.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{ft.removeItem(yt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=fA(t);ft.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=je.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),ft.setItem(yt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=ft.getItem(yt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=fA(t);ft.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return ft.getItem(yt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=fA(t);return ft.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{ft.setItem(yt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return ft.getItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{ft.removeItem(yt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return ft.getItem(yt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=ft.getItem(yt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{ft.setItem(yt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return ft.getItem(yt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=ft.getItem(yt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));ft.setItem(yt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=je.getConnectedNamespaces();e.includes(t)||(e.push(t),je.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=je.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),je.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return ft.getItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{ft.setItem(yt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{ft.removeItem(yt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=ft.getItem(yt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=je.getBalanceCache();ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=je.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=je.getBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=ft.getItem(yt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=je.getBalanceCache();ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=je.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),je.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=je.getNativeBalanceCache();e[t.caipAddress]=t,ft.setItem(yt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=ft.getItem(yt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=je.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;je.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=je.getEnsCache();e[t.address]=t,ft.setItem(yt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=je.getEnsCache();ft.setItem(yt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=ft.getItem(yt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=je.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;je.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=je.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},ft.setItem(yt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=je.getIdentityCache();ft.setItem(yt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{ft.removeItem(yt.PORTFOLIO_CACHE),ft.removeItem(yt.NATIVE_BALANCE_CACHE),ft.removeItem(yt.ENS_CACHE),ft.removeItem(yt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{ft.setItem(yt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=ft.getItem(yt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...je.getConnections(),[e]:t};ft.setItem(yt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=ft.getItem(yt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},Ze={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return Ze.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=mn.TEN_SEC_MS:!0},isAllowedRetry(t,e=mn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(Ze.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+mn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(Ze.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!Ze.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?je.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,Ze.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ke.W3M_API_URL},getBlockchainApiUrl(){return ke.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ke.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?mn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ke.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function mm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let U0=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await mm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await mm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await mm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await mm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await mm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const Upe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?mn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(Ze.isTelegram()){if(Ze.isIos())return t.filter(e=>e!=="google");if(Ze.isMac())return t.filter(e=>e!=="x");if(Ze.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},rt=Mn({features:mn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:mn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),pe={state:rt,subscribeKey(t,e){return ws(rt,t,e)},setOptions(t){Object.assign(rt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...rt.remoteFeatures,...t};rt.remoteFeatures=e,(n=rt.remoteFeatures)!=null&&n.socials&&(rt.remoteFeatures.socials=Upe.filterSocialsByPlatform(rt.remoteFeatures.socials))},setFeatures(t){if(!t)return;rt.features||(rt.features=mn.DEFAULT_FEATURES);const e={...rt.features,...t};rt.features=e},setProjectId(t){rt.projectId=t},setCustomRpcUrls(t){rt.customRpcUrls=t},setAllWallets(t){rt.allWallets=t},setIncludeWalletIds(t){rt.includeWalletIds=t},setExcludeWalletIds(t){rt.excludeWalletIds=t},setFeaturedWalletIds(t){rt.featuredWalletIds=t},setTokens(t){rt.tokens=t},setTermsConditionsUrl(t){rt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){rt.privacyPolicyUrl=t},setCustomWallets(t){rt.customWallets=t},setIsSiweEnabled(t){rt.isSiweEnabled=t},setIsUniversalProvider(t){rt.isUniversalProvider=t},setSdkVersion(t){rt.sdkVersion=t},setMetadata(t){rt.metadata=t},setDisableAppend(t){rt.disableAppend=t},setEIP6963Enabled(t){rt.enableEIP6963=t},setDebug(t){rt.debug=t},setEnableWalletConnect(t){rt.enableWalletConnect=t},setEnableWalletGuide(t){rt.enableWalletGuide=t},setEnableAuthLogger(t){rt.enableAuthLogger=t},setEnableWallets(t){rt.enableWallets=t},setPreferUniversalLinks(t){rt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){rt.hasMultipleAddresses=t},setSIWX(t){rt.siwx=t},setConnectMethodsOrder(t){rt.features={...rt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){rt.features={...rt.features,walletFeaturesOrder:t}},setSocialsOrder(t){rt.remoteFeatures={...rt.remoteFeatures,socials:t}},setCollapseWallets(t){rt.features={...rt.features,collapseWallets:t}},setEnableEmbedded(t){rt.enableEmbedded=t},setAllowUnsupportedChain(t){rt.allowUnsupportedChain=t},setManualWCControl(t){rt.manualWCControl=t},setEnableNetworkSwitch(t){rt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(rt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){rt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return rt.universalProviderConfigOverride},getSnapshot(){return Tw(rt)}},Bpe=Object.freeze({enabled:!0,events:[]}),jpe=new U0({baseUrl:Ze.getAnalyticsUrl(),clientId:null}),Fpe=5,Wpe=60*1e3,pl=Mn({...Bpe}),zpe={state:pl,subscribeKey(t,e){return ws(pl,t,e)},async sendError(t,e){if(!pl.enabled)return;const n=Date.now();if(pl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Wpe}).length>=Fpe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};pl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=pe.state;await jpe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:Ze.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){pl.enabled=!0},disable(){pl.enabled=!1},clearEvents(){pl.events=[]}};let Jx=class Xx extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Xx.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Xx):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function T$(t,e){const n=t instanceof Jx?t:new Jx(t instanceof Error?t.message:String(t),e,t);throw zpe.sendError(n,n.category),n}function Gi(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return T$(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return T$(a,e)}},n[r]=i}else n[r]=s}),n}const Ra={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Hpe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ra.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ra.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ra.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ra.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ke.CHAIN.SOLANA&&t===Ra.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ra.COINBASE.url}/dapp?cb_url=${r}`)}},wi=Mn({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),qpe={state:wi,subscribeNetworkImages(t){return ms(wi.networkImages,()=>t(wi.networkImages))},subscribeKey(t,e){return ws(wi,t,e)},subscribe(t){return ms(wi,()=>t(wi))},setWalletImage(t,e){wi.walletImages[t]=e},setNetworkImage(t,e){wi.networkImages[t]=e},setChainImage(t,e){wi.chainImages[t]=e},setConnectorImage(t,e){wi.connectorImages={...wi.connectorImages,[t]:e}},setTokenImage(t,e){wi.tokenImages[t]=e},setCurrencyImage(t,e){wi.currencyImages[t]=e}},Ho=Gi(qpe),Gpe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},gA=Mn({networkImagePromises:{}}),z7={async fetchWalletImage(t){if(t)return await Je._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(gA.networkImagePromises[t]||(gA.networkImagePromises[t]=Je._fetchNetworkImage(t)),await gA.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Ho.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Ho.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Ho.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Ho.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Ho.state.connectorImages[t.imageId]},getChainImage(t){return Ho.state.networkImages[Gpe[t]]}},gl=Mn({message:"",variant:"info",open:!1}),Vpe={state:gl,subscribeKey(t,e){return ws(gl,t,e)},open(t,e){const{debug:n}=pe.state,{shortMessage:r,longMessage:s}=t;n&&(gl.message=r,gl.variant=e,gl.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){gl.open=!1,gl.message="",gl.variant="info"}},Ua=Gi(Vpe),Kpe=Ze.getAnalyticsUrl(),Ype=new U0({baseUrl:Kpe,clientId:null}),Qpe=["MODAL_CREATED"],uc=Mn({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),jn={state:uc,subscribe(t){return ms(uc,()=>t(uc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Be.state.address;if(Qpe.includes(t.data.event)||typeof window>"u")return;await Ype.post({path:"/e",params:jn.getSdkProperties(),body:{eventId:Ze.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),uc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ke.HTTP_STATUS_CODES.FORBIDDEN&&!uc.reportedErrors.FORBIDDEN&&(Ua.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Wm()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),uc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;uc.timestamp=Date.now(),uc.data=t,(e=pe.state.features)!=null&&e.analytics&&jn._sendAnalyticsEvent(uc)}},Zpe=Ze.getApiUrl(),Bs=new U0({baseUrl:Zpe,clientId:null}),Jpe=40,R$=4,Xpe=20,wt=Mn({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Je={state:wt,subscribeKey(t,e){return ws(wt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=pe.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return pe.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Bs.baseUrl}/getWalletImage/${t}`,n=await Bs.getBlob({path:e,params:Je._getSdkProperties()});Ho.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Bs.baseUrl}/public/getAssetImage/${t}`,n=await Bs.getBlob({path:e,params:Je._getSdkProperties()});Ho.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Bs.baseUrl}/public/getAssetImage/${t}`,n=await Bs.getBlob({path:e,params:Je._getSdkProperties()});Ho.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Bs.baseUrl}/public/getCurrencyImage/${t}`,n=await Bs.getBlob({path:e,params:Je._getSdkProperties()});Ho.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Bs.baseUrl}/public/getTokenImage/${t}`,n=await Bs.getBlob({path:e,params:Je._getSdkProperties()});Ho.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return Ze.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ra.COINBASE.id?!0:U.state.activeChain==="solana"&&(n.id===Ra.SOLFLARE.id||n.id===Ra.PHANTOM.id)):t},async fetchProjectConfig(){return(await Bs.get({path:"/appkit/v1/config",params:Je._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Bs.get({path:"/projects/v1/origins",params:Je._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=U.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!z7.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Je._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Oe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Je._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Je._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Je._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Je._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ra).map(o=>o.id));const r=await Bs.get({path:"/getWallets",params:{...Je._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Je._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=pe.state;if(t!=null&&t.length){const e={...Je._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??R$,include:t},{data:n}=await Je.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Je._fetchWalletImage(i))),wt.featured=r,wt.allFeatured=r}},async fetchRecommendedWallets(){try{wt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=pe.state,r=[...e??[],...n??[]].filter(Boolean),s=U.getRequestedCaipNetworkIds().join(","),i={page:1,entries:R$,include:t,exclude:r,chains:s},{data:o,count:a}=await Je.fetchWallets(i),c=je.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Je._fetchWalletImage(d))),wt.recommended=o,wt.allRecommended=o,wt.count=a??0}catch{}finally{wt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=pe.state,s=U.getRequestedCaipNetworkIds().join(","),i=[...wt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Jpe,include:e,exclude:i,chains:s},{data:a,count:c}=await Je.fetchWallets(o),l=a.slice(0,Xpe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Je._fetchWalletImage(u))),wt.wallets=Ze.uniqueBy([...wt.wallets,...Je._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),wt.count=c>wt.count?c:wt.count,wt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Je.fetchWallets(e);n&&n.forEach(r=>{wt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=pe.state,s=U.getRequestedCaipNetworkIds().join(",");wt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Je.fetchWallets(i);jn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Je._fetchWalletImage(c)),Ze.wait(300)]),wt.search=Je._filterOutExtensions(o)},initPromise(t,e){const n=wt.promises[t];return n||(wt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Je.initPromise("connectorImages",Je.fetchConnectorImages),e&&Je.initPromise("featuredWallets",Je.fetchFeaturedWallets),n&&Je.initPromise("recommendedWallets",Je.fetchRecommendedWallets),r&&Je.initPromise("networkImages",Je.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=pe.state.features)!=null&&t.analytics&&Je.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Bs.get({path:"/getAnalyticsConfig",params:Je._getSdkProperties()});pe.setFeatures({analytics:t})}catch{pe.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=U.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){wt.filteredWallets=[]},setFilterByNamespace(t){if(!t){wt.featured=wt.allFeatured,wt.recommended=wt.allRecommended;return}const e=U.getRequestedCaipNetworkIds().join(",");wt.featured=wt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.recommended=wt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),wt.filteredWallets=wt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},hn=Mn({view:"Connect",history:["Connect"],transactionStack:[]}),ege={state:hn,subscribeKey(t,e){return ws(hn,t,e)},pushTransactionStack(t){hn.transactionStack.push(t)},popTransactionStack(t){const e=hn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),St.goBack();break;case"cancel":s==null||s(),St.goBack();break}},push(t,e){t!==hn.view&&(hn.view=t,hn.history.push(t),hn.data=e)},reset(t,e){hn.view=t,hn.history=[t],hn.data=e},replace(t,e){hn.history.at(-1)===t||(hn.view=t,hn.history[hn.history.length-1]=t,hn.data=e)},goBack(){var r;const t=U.state.activeCaipAddress,e=St.state.view==="ConnectingFarcaster",n=!t&&e;if(hn.history.length>1){hn.history.pop();const[s]=hn.history.slice(-1);s&&(t&&s==="Connect"?hn.view="Account":hn.view=s)}else $r.close();(r=hn.data)!=null&&r.wallet&&(hn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Be.setFarcasterUrl(void 0,U.state.activeChain);const a=Oe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=Tw(pe.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(hn.history.length>1){hn.history=hn.history.slice(0,t+1);const[e]=hn.history.slice(-1);e&&(hn.view=e)}},goBackOrCloseModal(){St.state.history.length>1?St.goBack():$r.close()}},St=Gi(ege),dc=Mn({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),eT={state:dc,subscribe(t){return ms(dc,()=>t(dc))},setThemeMode(t){dc.themeMode=t;try{const e=Oe.getAuthConnector();if(e){const n=eT.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:$c(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){dc.themeVariables={...dc.themeVariables,...t};try{const e=Oe.getAuthConnector();if(e){const n=eT.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:$c(dc.themeVariables,dc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return Tw(dc)}},Xs=Gi(eT),H7={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Wt=Mn({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...H7},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),tge={state:Wt,subscribe(t){return ms(Wt,()=>{t(Wt)})},subscribeKey(t,e){return ws(Wt,t,e)},initialize(t){t.forEach(e=>{const n=je.getConnectedConnectorId(e);n&&Oe.setConnectorId(n,e)})},setActiveConnector(t){t&&(Wt.activeConnector=hh(t))},setConnectors(t){t.filter(s=>!Wt.allConnectors.some(i=>i.id===s.id&&Oe.getConnectorName(i.name)===Oe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&Wt.allConnectors.push(hh(s))});const n=Oe.getEnabledNamespaces(),r=Oe.getEnabledConnectors(n);Wt.connectors=Oe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(Wt.filterByNamespaceMap).forEach(e=>{Wt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{Wt.filterByNamespaceMap[e]=!0}),Oe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){Wt.filterByNamespaceMap[t]=e,Oe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Oe.getEnabledNamespaces(),e=Oe.getEnabledConnectors(t),n=Oe.areAllNamespacesEnabled();Wt.connectors=Oe.mergeMultiChainConnectors(e),n?Je.clearFilterByNamespaces():Je.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(Wt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return Wt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(Wt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Oe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ke.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Oe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ke.CONNECTOR_ID.AUTH){const s=t,i=Tw(pe.state),o=Xs.getSnapshot().themeMode,a=Xs.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:$c(a,o)}),Oe.setConnectors([t])}else Oe.setConnectors([t])},getAuthConnector(t){var r;const e=t||U.state.activeChain,n=Wt.connectors.find(s=>s.id===ke.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return Wt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return Wt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return Wt.allConnectors.filter(r=>r.chain===U.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=Tw(pe.state),r=Xs.getSnapshot().themeMode,s=Xs.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:$c(s,r)})},getConnectorsByNamespace(t){const e=Wt.allConnectors.filter(n=>n.chain===t);return Oe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Oe.getConnector(t.id,t.rdns),n=U.state.activeChain;Hpe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?St.push("ConnectingExternal",{connector:e}):St.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Oe.getConnectorsByNamespace(t):Oe.mergeMultiChainConnectors(Wt.allConnectors)},setFilterByNamespace(t){Wt.filterByNamespace=t,Wt.connectors=Oe.getConnectors(t),Je.setFilterByNamespace(t)},setConnectorId(t,e){t&&(Wt.activeConnectorIds={...Wt.activeConnectorIds,[e]:t},je.setConnectedConnectorId(e,t))},removeConnectorId(t){Wt.activeConnectorIds={...Wt.activeConnectorIds,[t]:void 0},je.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return Wt.activeConnectorIds[t]},isConnected(t){return t?!!Wt.activeConnectorIds[t]:Object.values(Wt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){Wt.activeConnectorIds={...H7}}},Oe=Gi(tge);var Zp={};const nge="https://secure.walletconnect.org/sdk",rge=(typeof process<"u"&&typeof Zp<"u"?Zp.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||nge,sge=(typeof process<"u"&&typeof Zp<"u"?Zp.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",ige=(typeof process<"u"&&typeof Zp<"u"?Zp.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Le={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Zr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ad=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),hr=Mn({...ad}),oge={state:hr,subscribeKey(t,e){return ws(hr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=Ze.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){hr.message=ad.message,hr.variant=ad.variant,hr.svg=ad.svg,hr.open=ad.open,hr.autoClose=ad.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ad.autoClose}){hr.open?(hr.open=!1,setTimeout(()=>{hr.message=t,hr.variant=n,hr.svg=e,hr.open=!0,hr.autoClose=r},150)):(hr.message=t,hr.variant=n,hr.svg=e,hr.open=!0,hr.autoClose=r)}},Ko=oge,Cn=Mn({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),age={state:Cn,subscribe(t){return ms(Cn,()=>t(Cn))},setLastNetworkInView(t){Cn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Cn.loading=!0;try{const s=await it.fetchTransactions({account:t,cursor:Cn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=zm.filterSpamTransactions(s.data),o=zm.filterByConnectedChain(i),a=[...Cn.transactions,...o];Cn.loading=!1,e==="coinbase"?Cn.coinbaseTransactions=zm.groupTransactionsByYearAndMonth(Cn.coinbaseTransactions,s.data):(Cn.transactions=a,Cn.transactionsByYear=zm.groupTransactionsByYearAndMonth(Cn.transactionsByYear,o)),Cn.empty=a.length===0,Cn.next=s.next?s.next:void 0}catch{const i=U.state.activeChain;jn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:pe.state.projectId,cursor:Cn.next,isSmartAccount:((r=Be.state.preferredAccountTypes)==null?void 0:r[i])===Zr.ACCOUNT_TYPES.SMART_ACCOUNT}}),Ko.showError("Failed to fetch transactions"),Cn.loading=!1,Cn.empty=!0,Cn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Cn.next=void 0},resetTransactions(){Cn.transactions=[],Cn.transactionsByYear={},Cn.lastNetworkInView=void 0,Cn.loading=!1,Cn.empty=!1,Cn.next=void 0}},zm=Gi(age,"API_ERROR"),wn=Mn({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Yu;const cge={state:wn,subscribeKey(t,e){return ws(wn,t,e)},_getClient(){return wn._client},setClient(t){wn._client=hh(t)},async connectWalletConnect(){var t,e,n,r;if(Ze.isTelegram()||Ze.isSafari()&&Ze.isIos()){if(Yu){await Yu,Yu=void 0;return}if(!Ze.isPairingExpired(wn==null?void 0:wn.wcPairingExpiry)){const s=wn.wcUri;wn.wcUri=s;return}Yu=(e=(t=ot._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ot.state.status="connecting",await Yu,Yu=void 0,wn.wcPairingExpiry=void 0,ot.state.status="connected"}else await((r=(n=ot._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=ot._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&U.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=ot._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||U.state.activeChain;e&&Oe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;$r.setLoading(!0,U.state.activeChain);const n=Oe.getAuthConnector();n&&(Be.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),je.setPreferredAccountTypes(Be.state.preferredAccountTypes??{[e]:t}),await ot.reconnectExternal(n),$r.setLoading(!1,U.state.activeChain),jn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ot._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ot._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ot._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ot._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ot._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ot._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ot._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ot._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){wn.wcUri=void 0,wn.wcPairingExpiry=void 0,wn.wcLinking=void 0,wn.recentWallet=void 0,wn.status="disconnected",zm.resetTransactions(),je.deleteWalletConnectDeepLink()},resetUri(){wn.wcUri=void 0,wn.wcPairingExpiry=void 0,Yu=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ot.state;t&&je.setWalletConnectDeepLink(t),e&&je.setAppKitRecent(e),jn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=St.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){wn.wcBasic=t},setUri(t){wn.wcUri=t,wn.wcPairingExpiry=Ze.getPairingExpiry()},setWcLinking(t){wn.wcLinking=t},setWcError(t){wn.wcError=t,wn.buffering=!1},setRecentWallet(t){wn.recentWallet=t},setBuffering(t){wn.buffering=t},setStatus(t){wn.status=t},async disconnect(t){var e;try{await((e=ot._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new Jx("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){wn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Oe.state.activeConnectorIds[n]===t.connectorId){const i=U.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Be.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Oe.getConnector(t.connectorId);i?ot.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},ot=Gi(cge),of=Mn({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ha={state:of,subscribe(t){return ms(of,()=>t(of))},subscribeOpen(t){return ws(of,"open",t)},set(t){Object.assign(of,{...of,...t})}},mA={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Rh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},P$={async getMyTokensWithBalance(t){const e=Be.state.address,n=U.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await it.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=mA.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ot.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ot.walletGetAssets({account:t,chainFilter:[s]});return mA.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>mA.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:U.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},an=Mn({tokenBalances:[],loading:!1}),lge={state:an,subscribe(t){return ms(an,()=>t(an))},subscribeKey(t,e){return ws(an,t,e)},setToken(t){t&&(an.token=hh(t))},setTokenAmount(t){an.sendTokenAmount=t},setReceiverAddress(t){an.receiverAddress=t},setReceiverProfileImageUrl(t){an.receiverProfileImageUrl=t},setReceiverProfileName(t){an.receiverProfileName=t},setNetworkBalanceInUsd(t){an.networkBalanceInUSD=t},setLoading(t){an.loading=t},async sendToken(){var t;try{switch(Jt.setLoading(!0),(t=U.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Jt.sendEvmToken();return;case"solana":await Jt.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Jt.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=U.state.activeChain,e=(n=Be.state.preferredAccountTypes)==null?void 0:n[t];if(!Jt.state.sendTokenAmount||!Jt.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Jt.state.token)throw new Error("A token is required");(r=Jt.state.token)!=null&&r.address?(jn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Jt.state.token.address,amount:Jt.state.sendTokenAmount,network:((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Jt.sendERC20Token({receiverAddress:Jt.state.receiverAddress,tokenAddress:Jt.state.token.address,sendTokenAmount:Jt.state.sendTokenAmount,decimals:Jt.state.token.quantity.decimals})):(jn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:Jt.state.token.symbol||"",amount:Jt.state.sendTokenAmount,network:((i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Jt.sendNativeToken({receiverAddress:Jt.state.receiverAddress,sendTokenAmount:Jt.state.sendTokenAmount,decimals:Jt.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;an.loading=!0;const e=(i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=U.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=U.state.activeCaipAddress,s=r?Ze.getPlainAddress(r):void 0;if(an.lastRetry&&!Ze.isAllowedRetry(an.lastRetry,30*mn.ONE_SEC_MS))return an.loading=!1,[];try{if(s&&e&&n){const a=await P$.getMyTokensWithBalance();return an.tokenBalances=a,an.lastRetry=void 0,a}}catch(a){an.lastRetry=Date.now(),t==null||t(a),Ko.showError("Token Balance Unavailable")}finally{an.loading=!1}return[]},fetchNetworkBalance(){if(an.tokenBalances.length===0)return;const t=P$.mapBalancesToSwapTokens(an.tokenBalances);if(!t)return;const e=t.find(n=>n.address===U.getActiveNetworkTokenAddress());e&&(an.networkBalanceInUSD=e?Ope.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;St.pushTransactionStack({});const e=t.receiverAddress,n=Be.state.address,r=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ot.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),jn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Be.state.preferredAccountTypes)==null?void 0:i.eip155)===Zr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Jt.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=ot._getClient())==null||c.updateBalance("eip155"),Jt.resetSend()},async sendERC20Token(t){St.pushTransactionStack({onSuccess(){St.replace("Account")}});const e=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Be.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=Ze.getPlainAddress(t.tokenAddress);await ot.writeContract({fromAddress:Be.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Mpe.getERC20Abi(n),chainNamespace:"eip155"}),Jt.resetSend()}},async sendSolanaToken(){var t;if(!Jt.state.sendTokenAmount||!Jt.state.receiverAddress)throw new Error("An amount and receiver address are required");St.pushTransactionStack({onSuccess(){St.replace("Account")}}),await ot.sendTransaction({chainNamespace:"solana",to:Jt.state.receiverAddress,value:Jt.state.sendTokenAmount}),(t=ot._getClient())==null||t.updateBalance("solana"),Jt.resetSend()},resetSend(){an.token=void 0,an.sendTokenAmount=void 0,an.receiverAddress=void 0,an.receiverProfileImageUrl=void 0,an.receiverProfileName=void 0,an.loading=!1,an.tokenBalances=[]}},Jt=Gi(lge),yA={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},Vb={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ne=Mn({chains:Cpe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),uge={state:Ne,subscribe(t){return ms(Ne,()=>{t(Ne)})},subscribeKey(t,e){return ws(Ne,t,e)},subscribeChainProp(t,e,n){let r;return ms(Ne.chains,()=>{var i;const s=n||Ne.activeChain;if(s){const o=(i=Ne.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=je.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=pe.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ne.noAdapters=!0),Ne.noAdapters||(Ne.activeChain=a==null?void 0:a.namespace,Ne.activeCaipNetwork=i,U.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ne.activeChain&&Ha.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);U.state.chains.set(u,{namespace:u,networkState:Mn({...Vb,caipNetwork:d==null?void 0:d[0]}),accountState:Mn(yA),caipNetworks:d??[],...n}),U.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ne.activeChain===t){const r=Array.from(Ne.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&U.setActiveCaipNetwork(s)}}Ne.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Ne.chains.set(t.namespace,{namespace:t.namespace,networkState:{...Vb,caipNetwork:r[0]},accountState:yA,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),U.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ne.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ne.chains.set(t.chainNamespace,{...e,caipNetworks:r}),U.setRequestedCaipNetworks(r,t.chainNamespace),Oe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ne.chains.get(t);if(n){const o=((r=Ne.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&U.setActiveCaipNetwork(n.caipNetworks[0]),Ne.chains.set(t,{...n,caipNetworks:a}),U.setRequestedCaipNetworks(a||[],t),a.length===0&&Oe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ne.chains.get(t);n&&(n.networkState={...n.networkState||Vb,...e},Ne.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ne.chains.get(t);if(r){const s={...r.accountState||yA,...e};Ne.chains.set(t,{...r,accountState:s}),(Ne.chains.size===1||Ne.activeChain===t)&&(e.caipAddress&&(Ne.activeCaipAddress=e.caipAddress),Be.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ne.chains.get(t);if(n){const r={...n.networkState||Vb,...e};Ne.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){U.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Oe.removeConnectorId(n)},setActiveNamespace(t){var r,s;Ne.activeChain=t;const e=t?Ne.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ne.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ne.activeCaipNetwork=n,U.setChainNetworkData(t,{caipNetwork:n}),je.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Ha.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ne.activeChain!==t.chainNamespace&&U.setIsSwitchingNamespace(!0);const e=Ne.chains.get(t.chainNamespace);Ne.activeChain=t.chainNamespace,Ne.activeCaipNetwork=t,U.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ne.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ne.activeCaipAddress=void 0,U.setAccountProp("caipAddress",Ne.activeCaipAddress,t.chainNamespace),e&&Be.replaceState(e.accountState),Jt.resetSend(),Ha.set({activeChain:Ne.activeChain,selectedNetworkId:(i=Ne.activeCaipNetwork)==null?void 0:i.caipNetworkId}),je.setActiveCaipNetworkId(t.caipNetworkId),!U.checkIfSupportedNetwork(t.chainNamespace)&&pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&!ot.state.wcBasic&&U.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ne.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==U.state.activeChain,n=(s=U.getNetworkData(t))==null?void 0:s.caipNetwork,r=U.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await U.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=U.state.chains.get(U.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Ne.activeCaipNetwork)==null?void 0:o.id)})),r=U.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&$r.close()}catch{St.goBack()}jn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ne.activeChain,n=Ne.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ne.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ne.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ne.activeChain;if(e&&(n=e),!n)return;const r=(s=Ne.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ne.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ne.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return Ze.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ne.chains.forEach(e=>{const n=U.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){U.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=U.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Oe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ne.chains.forEach(e=>{const n=U.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Ne.activeCaipNetwork},getActiveCaipAddress(){return Ne.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ne.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=U.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());U.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ne.activeCaipNetwork,r=U.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ne.activeChain)return!0;const e=U.getRequestedCaipNetworks(Ne.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){U.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=B7.caipNetworkIdToNumber((r=Ne.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ne.activeChain;if(!e||!t)return!1;const n=U.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Ne.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Ne.activeCaipNetwork)==null?void 0:s.id)||1,n=mn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){$r.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ne.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&mn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){U.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Ne.activeCaipAddress=void 0,U.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Oe.removeConnectorId(e)},setIsSwitchingNamespace(t){Ne.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ne.chains.forEach(s=>{ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ne.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=U.state.chains.get(t))==null?void 0:e.accountState:Be.state},getNetworkData(t){var n;const e=t||Ne.activeChain;if(e)return(n=U.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=U.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Oe.state.filterByNamespace;return(t?[Ne.chains.get(t)]:Array.from(Ne.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?U.getRequestedCaipNetworks(t):U.getAllRequestedCaipNetworks()}},U=Gi(uge),dge={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},q7=Ze.getBlockchainApiUrl(),js=Mn({clientId:null,api:new U0({baseUrl:q7,clientId:null}),supportedChains:{http:[],ws:[]}}),it={state:js,async get(t){const{st:e,sv:n}=it.getSdkProperties(),r=pe.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return js.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=pe.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{js.supportedChains.http.length||await it.getSupportedNetworks()}catch{return!1}return js.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await it.get({path:"v1/supported-chains"});return js.supportedChains=t,t}catch{return js.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await it.isNetworkSupported(e))return{avatar:"",name:""};const r=je.getIdentityFromCacheForAddress(t);if(r)return r;const s=await it.get({path:`/v1/identity/${t}`,params:{sender:U.state.activeCaipAddress?Ze.getPlainAddress(U.state.activeCaipAddress):void 0}});return je.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await it.isNetworkSupported((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?it.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await it.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?it.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await it.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await it.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?js.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:pe.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await it.isNetworkSupported((r=U.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?it.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=it.getSdkProperties();if(!await it.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return it.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await it.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return js.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:mn.CONVERT_SLIPPAGE_TOLERANCE},projectId:pe.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((o=U.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return it.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=it.getSdkProperties();if(!await it.isNetworkSupported((l=U.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Ko.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=je.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await it.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return je.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await it.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await it.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/reverse/${t}`,params:{sender:Be.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await it.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await it.isNetworkSupported((i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?js.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await it.isNetworkSupported((a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await js.api.post({path:"/v1/generators/onrampurl",params:{projectId:pe.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await it.isNetworkSupported((e=U.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await it.get({path:"/v1/onramp/options"})}catch{return dge}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await it.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await js.api.post({path:"/v1/onramp/quote",params:{projectId:pe.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await it.isNetworkSupported((n=U.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?it.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await it.isNetworkSupported((s=U.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?js.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:pe.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){js.clientId=t,js.api=new U0({baseUrl:q7,clientId:t})}},Yi=Mn({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),hge={state:Yi,replaceState(t){t&&Object.assign(Yi,hh(t))},subscribe(t){return U.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return U.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){U.setAccountProp("status",t,e)},getCaipAddress(t){return U.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?Ze.getPlainAddress(t):void 0;e===U.state.activeChain&&(U.state.activeCaipAddress=t),U.setAccountProp("caipAddress",t,e),U.setAccountProp("address",n,e)},setBalance(t,e,n){U.setAccountProp("balance",t,n),U.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){U.setAccountProp("profileName",t,e)},setProfileImage(t,e){U.setAccountProp("profileImage",t,e)},setUser(t,e){U.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){U.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){U.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){U.setAccountProp("currentTab",t,U.state.activeChain)},setTokenBalance(t,e){t&&U.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){U.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){U.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=U.getAccountProp("addressLabels",n)||new Map;r.set(t,e),U.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=U.getAccountProp("addressLabels",e)||new Map;n.delete(t),U.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){U.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){U.setAccountProp("preferredAccountTypes",{...Yi.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){Yi.preferredAccountTypes=t},setSocialProvider(t,e){t&&U.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){U.setAccountProp("socialWindow",t?hh(t):void 0,e)},setFarcasterUrl(t,e){U.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Yi.balanceLoading=!0;const e=(i=U.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=U.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=U.state.activeCaipAddress,s=r?Ze.getPlainAddress(r):void 0;if(Yi.lastRetry&&!Ze.isAllowedRetry(Yi.lastRetry,30*mn.ONE_SEC_MS))return Yi.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await it.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Be.setTokenBalance(c,n),Yi.lastRetry=void 0,Yi.balanceLoading=!1,c}}catch(a){Yi.lastRetry=Date.now(),t==null||t(a),Ko.showError("Token Balance Unavailable")}finally{Yi.balanceLoading=!1}return[]},resetAccount(t){U.resetAccount(t)}},Be=Gi(hge),fge={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=U.state.activeCaipNetwork,r=St.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Be.getCaipAddress(U.state.activeChain),o=t.chainNamespace!==U.state.activeChain,a=Be.getCaipAddress(t.chainNamespace),l=Oe.getConnectorId(U.state.activeChain)===ke.CONNECTOR_ID.AUTH,u=ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?St.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?St.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):St.push("SwitchNetwork",{...r,network:t})}},Fs=Mn({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),pge={state:Fs,subscribe(t){return ms(Fs,()=>t(Fs))},subscribeKey(t,e){return ws(Fs,t,e)},async open(t){var o,a;const e=Be.state.status==="connected",n=t==null?void 0:t.namespace,r=U.state.activeChain,s=n&&n!==r,i=(o=U.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(ot.state.wcBasic?Je.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Je.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Oe.setFilterByNamespace(t==null?void 0:t.namespace),$r.setLoading(!0,n),n&&s){const c=((a=U.getNetworkData(n))==null?void 0:a.caipNetwork)||U.getRequestedCaipNetworks(n)[0];c&&fge.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=U.state.noAdapters;pe.state.manualWCControl||c&&!i?Ze.isMobile()?St.reset("AllWallets"):St.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?St.reset(t.view,t.data):i?St.reset("Account"):St.reset("Connect")}Fs.open=!0,Ha.set({open:!0}),jn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=pe.state.enableEmbedded,e=!!U.state.activeCaipAddress;Fs.open&&jn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Fs.open=!1,St.reset("Connect"),$r.clearLoading(),t?e?St.replace("Account"):St.push("Connect"):Ha.set({open:!1}),ot.resetUri()},setLoading(t,e){e&&Fs.loadingNamespaceMap.set(e,t),Fs.loading=t,Ha.set({loading:t})},clearLoading(){Fs.loadingNamespaceMap.clear(),Fs.loading=!1},shake(){Fs.shake||(Fs.shake=!0,setTimeout(()=>{Fs.shake=!1},500))}},$r=Gi(pge),wy={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},tT={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},gge={providers:W7,selectedProvider:null,error:null,purchaseCurrency:wy,paymentCurrency:tT,purchaseCurrencies:[wy],paymentCurrencies:[],quotesLoading:!1},Ut=Mn(gge),mge={state:Ut,subscribe(t){return ms(Ut,()=>t(Ut))},subscribeKey(t,e){return ws(Ut,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=U.state.activeChain===ke.CHAIN.SOLANA?"SOL":"USDC",n=Be.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",Lpe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",pe.state.projectId),Ut.selectedProvider={...t,url:r.toString()}}else Ut.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=W7.filter(r=>e.includes(r.name));Ut.providers=n}else Ut.providers=[]},setPurchaseCurrency(t){Ut.purchaseCurrency=t},setPaymentCurrency(t){Ut.paymentCurrency=t},setPurchaseAmount(t){nT.state.purchaseAmount=t},setPaymentAmount(t){nT.state.paymentAmount=t},async getAvailableCurrencies(){const t=await it.getOnrampOptions();Ut.purchaseCurrencies=t.purchaseCurrencies,Ut.paymentCurrencies=t.paymentCurrencies,Ut.paymentCurrency=t.paymentCurrencies[0]||tT,Ut.purchaseCurrency=t.purchaseCurrencies[0]||wy,await Je.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await Je.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;Ut.quotesLoading=!0;try{const n=await it.getOnrampQuote({purchaseCurrency:Ut.purchaseCurrency,paymentCurrency:Ut.paymentCurrency,amount:((t=Ut.paymentAmount)==null?void 0:t.toString())||"0",network:(e=Ut.purchaseCurrency)==null?void 0:e.symbol});return Ut.quotesLoading=!1,Ut.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return Ut.error=n.message,Ut.quotesLoading=!1,null}finally{Ut.quotesLoading=!1}},resetState(){Ut.selectedProvider=null,Ut.error=null,Ut.purchaseCurrency=wy,Ut.paymentCurrency=tT,Ut.purchaseCurrencies=[wy],Ut.paymentCurrencies=[],Ut.paymentAmount=void 0,Ut.purchaseAmount=void 0,Ut.quotesLoading=!1}},nT=Gi(mge),O$=2147483648,yge={convertEVMChainIdToCoinType(t){if(t>=O$)throw new Error("Invalid chainId");return(O$|t)>>>0}},Qi=Mn({suggestions:[],loading:!1}),wge={state:Qi,subscribe(t){return ms(Qi,()=>t(Qi))},subscribeKey(t,e){return ws(Qi,t,e)},async resolveName(t){var e,n;try{return await it.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await it.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Qi.loading=!0,Qi.suggestions=[];const e=await it.getEnsNameSuggestions(t);return Qi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Qi.suggestions}catch(e){const n=by.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Qi.loading=!1}},async getNamesForAddress(t){try{if(!U.state.activeCaipNetwork)return[];const n=je.getEnsFromCacheForAddress(t);if(n)return n;const r=await it.reverseLookupEnsName({address:t});return je.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=by.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=U.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Be.state.address,r=Oe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Qi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});St.pushTransactionStack({onCancel(){St.replace("RegisterAccountName")}});const i=await ot.signMessage(s);Qi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=yge.convertEVMChainIdToCoinType(Number(o));await it.registerEnsName({coinType:a,address:n,signature:i,message:s}),Be.setProfileName(t,e.chainNamespace),St.replace("RegisterAccountNameSuccess")}catch(s){const i=by.parseEnsApiError(s,`Error registering name ${t}`);throw St.replace("RegisterAccountName"),new Error(i)}finally{Qi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},by=Gi(wge);var WO={exports:{}},dp=typeof Reflect=="object"?Reflect:null,k$=dp&&typeof dp.apply=="function"?dp.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},jv;dp&&typeof dp.ownKeys=="function"?jv=dp.ownKeys:Object.getOwnPropertySymbols?jv=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:jv=function(e){return Object.getOwnPropertyNames(e)};function bge(t){console&&console.warn&&console.warn(t)}var G7=Number.isNaN||function(e){return e!==e};function yn(){yn.init.call(this)}WO.exports=yn;WO.exports.once=Cge;yn.EventEmitter=yn;yn.prototype._events=void 0;yn.prototype._eventsCount=0;yn.prototype._maxListeners=void 0;var D$=10;function GC(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(yn,"defaultMaxListeners",{enumerable:!0,get:function(){return D$},set:function(t){if(typeof t!="number"||t<0||G7(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");D$=t}});yn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};yn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||G7(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function V7(t){return t._maxListeners===void 0?yn.defaultMaxListeners:t._maxListeners}yn.prototype.getMaxListeners=function(){return V7(this)};yn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")k$(c,this,n);else for(var l=c.length,u=J7(c,l),r=0;r<l;++r)k$(u[r],this,n);return!0};function K7(t,e,n,r){var s,i,o;if(GC(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=V7(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,bge(a)}return t}yn.prototype.addListener=function(e,n){return K7(this,e,n,!1)};yn.prototype.on=yn.prototype.addListener;yn.prototype.prependListener=function(e,n){return K7(this,e,n,!0)};function vge(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Y7(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=vge.bind(r);return s.listener=n,r.wrapFn=s,s}yn.prototype.once=function(e,n){return GC(n),this.on(e,Y7(this,e,n)),this};yn.prototype.prependOnceListener=function(e,n){return GC(n),this.prependListener(e,Y7(this,e,n)),this};yn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(GC(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():Ege(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};yn.prototype.off=yn.prototype.removeListener;yn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function Q7(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?_ge(s):J7(s,s.length)}yn.prototype.listeners=function(e){return Q7(this,e,!0)};yn.prototype.rawListeners=function(e){return Q7(this,e,!1)};yn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Z7.call(t,e)};yn.prototype.listenerCount=Z7;function Z7(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}yn.prototype.eventNames=function(){return this._eventsCount>0?jv(this._events):[]};function J7(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function Ege(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function _ge(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Cge(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}X7(t,e,i,{once:!0}),e!=="error"&&Sge(t,s,{once:!0})})}function Sge(t,e,n){typeof t.on=="function"&&X7(t,"error",e,n)}function X7(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ao=WO.exports;const zO=Ah(Ao);var be={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var rT=function(t,e){return rT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},rT(t,e)};function Age(t,e){rT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var sT=function(){return sT=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sT.apply(this,arguments)};function Ige(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Nge(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function xge(t,e){return function(n,r){e(n,r,t)}}function Tge(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Rge(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Pge(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Oge(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function kge(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function iT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eW(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Dge(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(eW(arguments[e]));return t}function $ge(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function Rw(t){return this instanceof Rw?(this.v=t,this):new Rw(t)}function Mge(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof Rw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Lge(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:Rw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function Uge(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof iT=="function"?iT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Bge(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function jge(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Fge(t){return t&&t.__esModule?t:{default:t}}function Wge(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function zge(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Hge=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return sT},__asyncDelegator:Lge,__asyncGenerator:Mge,__asyncValues:Uge,__await:Rw,__awaiter:Rge,__classPrivateFieldGet:Wge,__classPrivateFieldSet:zge,__createBinding:Oge,__decorate:Nge,__exportStar:kge,__extends:Age,__generator:Pge,__importDefault:Fge,__importStar:jge,__makeTemplateObject:Bge,__metadata:Tge,__param:xge,__read:eW,__rest:Ige,__spread:Dge,__spreadArrays:$ge,__values:iT},Symbol.toStringTag,{value:"Module"})),VC=kU(Hge);var wA={},ym={},$$;function qge(){if($$)return ym;$$=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return ym.delay=t,ym}var Qu={},bA={},Zu={},M$;function Gge(){return M$||(M$=1,Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.ONE_THOUSAND=Zu.ONE_HUNDRED=void 0,Zu.ONE_HUNDRED=100,Zu.ONE_THOUSAND=1e3),Zu}var vA={},L$;function Vge(){return L$||(L$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(vA)),vA}var U$;function tW(){return U$||(U$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=VC;e.__exportStar(Gge(),t),e.__exportStar(Vge(),t)}(bA)),bA}var B$;function Kge(){if(B$)return Qu;B$=1,Object.defineProperty(Qu,"__esModule",{value:!0}),Qu.fromMiliseconds=Qu.toMiliseconds=void 0;const t=tW();function e(r){return r*t.ONE_THOUSAND}Qu.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Qu.fromMiliseconds=n,Qu}var j$;function Yge(){return j$||(j$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=VC;e.__exportStar(qge(),t),e.__exportStar(Kge(),t)}(wA)),wA}var af={},F$;function Qge(){if(F$)return af;F$=1,Object.defineProperty(af,"__esModule",{value:!0}),af.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return af.Watch=t,af.default=t,af}var EA={},wm={},W$;function Zge(){if(W$)return wm;W$=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.IWatch=void 0;class t{}return wm.IWatch=t,wm}var z$;function Jge(){return z$||(z$=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),VC.__exportStar(Zge(),t)}(EA)),EA}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=VC;e.__exportStar(Yge(),t),e.__exportStar(Qge(),t),e.__exportStar(Jge(),t),e.__exportStar(tW(),t)})(be);class Uh{}let Xge=class extends Uh{constructor(e){super()}};const H$=be.FIVE_SECONDS,Bh={pulse:"heartbeat_pulse"};let eme=class nW extends Xge{constructor(e){super(e),this.events=new Ao.EventEmitter,this.interval=H$,this.interval=(e==null?void 0:e.interval)||H$}static async init(e){const n=new nW(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),be.toMiliseconds(this.interval))}pulse(){this.events.emit(Bh.pulse)}};const tme=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,nme=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,rme=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function sme(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){ime(t);return}return e}function ime(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Kb(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!rme.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(tme.test(t)||nme.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,sme)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function jh(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function rW(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=jh(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let _A;function B0(){return _A||(_A=rW("keyval-store","keyval")),_A}function q$(t,e=B0()){return e("readonly",n=>jh(n.get(t)))}function ome(t,e,n=B0()){return n("readwrite",r=>(r.put(e,t),jh(r.transaction)))}function ame(t,e=B0()){return e("readwrite",n=>(n.delete(t),jh(n.transaction)))}function cme(t=B0()){return t("readwrite",e=>(e.clear(),jh(e.transaction)))}function lme(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},jh(t.transaction)}function ume(t=B0()){return t("readonly",e=>{if(e.getAllKeys)return jh(e.getAllKeys());const n=[];return lme(e,r=>n.push(r.key)).then(()=>n)})}const dme=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),hme=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function ph(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return hme(t)}catch{return t}}function Jc(t){return typeof t=="string"?t:dme(t)||""}function fme(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var pme=gme;function gme(t,e,n){var r=n&&n.stringify||fme,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const G$=pme;var Pf=qa;const Pw=Ame().console||{},mme={mapHttpRequest:Yb,mapHttpResponse:Yb,wrapRequestSerializer:CA,wrapResponseSerializer:CA,wrapErrorSerializer:CA,req:Yb,res:Yb,err:Eme};function yme(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function qa(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||Pw;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=yme(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=Ow),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:_me(t)};c.levels=qa.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Ow,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=oT());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,cf(l,c,"error","log"),cf(l,c,"fatal","error"),cf(l,c,"warn","error"),cf(l,c,"info","log"),cf(l,c,"debug","log"),cf(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,KC([p],b,y,this._stdErrSerialize)}function E(_){this._childLevel=(_._childLevel|0)+1,this.error=lf(_,p,"error"),this.fatal=lf(_,p,"fatal"),this.warn=lf(_,p,"warn"),this.info=lf(_,p,"info"),this.debug=lf(_,p,"debug"),this.trace=lf(_,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=oT([].concat(_._logEvent.bindings,p)))}return E.prototype=this,new E(this)}return c}qa.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};qa.stdSerializers=mme;qa.stdTimeFunctions=Object.assign({},{nullTime:sW,epochTime:iW,unixTime:Cme,isoTime:Sme});function cf(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?Ow:s[n]?s[n]:Pw[n]||Pw[r]||Ow,wme(t,e,n)}function wme(t,e,n){!t.transmit&&e[n]===Ow||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Pw?Pw:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&KC(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,bme(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=qa.levels.values[l],d=qa.levels.values[n];if(d<u)return;vme(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:qa.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function bme(t,e,n,r){t._serialize&&KC(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=qa.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?G$(s.shift(),s):void 0}else typeof i=="string"&&(i=G$(s.shift(),s));return i!==void 0&&(o.msg=i),o}function KC(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=qa.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function lf(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function vme(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;KC(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=oT(c)}function oT(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Eme(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function _me(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?sW:iW}function Yb(){return{}}function CA(t){return t}function Ow(){}function sW(){return!1}function iW(){return Date.now()}function Cme(){return Math.round(Date.now()/1e3)}function Sme(){return new Date(Date.now()).toISOString()}function Ame(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const j0=Ah(Pf),Ime={level:"info"},F0="custom_context",HO=1e3*1024;let Nme=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},V$=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Nme(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},oW=class{constructor(e,n=HO){this.level=e??"error",this.levelValue=Pf.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new V$(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Pf.levels.values.error?console.error(e):n===Pf.levels.values.warn?console.warn(e):n===Pf.levels.values.debug?console.debug(e):n===Pf.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Jc({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new V$(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Jc({extraMetadata:e})),new Blob(n,{type:"application/json"})}},xme=class{constructor(e,n=HO){this.baseChunkLogger=new oW(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},Tme=class{constructor(e,n=HO){this.baseChunkLogger=new oW(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Rme=Object.defineProperty,Pme=Object.defineProperties,Ome=Object.getOwnPropertyDescriptors,K$=Object.getOwnPropertySymbols,kme=Object.prototype.hasOwnProperty,Dme=Object.prototype.propertyIsEnumerable,Y$=(t,e,n)=>e in t?Rme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o_=(t,e)=>{for(var n in e||(e={}))kme.call(e,n)&&Y$(t,n,e[n]);if(K$)for(var n of K$(e))Dme.call(e,n)&&Y$(t,n,e[n]);return t},a_=(t,e)=>Pme(t,Ome(e));function Fh(t){return a_(o_({},t),{level:(t==null?void 0:t.level)||Ime.level})}function $me(t,e=F0){return t[e]||""}function Mme(t,e,n=F0){return t[n]=e,t}function mi(t,e=F0){let n="";return typeof t.bindings>"u"?n=$me(t,e):n=t.bindings().context||"",n}function Lme(t,e,n=F0){const r=mi(t,n);return r.trim()?`${r}/${e}`:e}function es(t,e,n=F0){const r=Lme(t,e,n),s=t.child({context:r});return Mme(s,r,n)}function Ume(t){var e,n;const r=new xme((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:j0(a_(o_({},t.opts),{level:"trace",browser:a_(o_({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function Bme(t){var e;const n=new Tme((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:j0(a_(o_({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function YC(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Ume(t):Bme(t)}function jme(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function aW(t,...e){if(!jme(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Q$(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Fme(t,e){aW(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const uf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SA=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Wme(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function cW(t){return typeof t=="string"&&(t=Wme(t)),aW(t),t}let zme=class{clone(){return this._cloneInto()}};function Hme(t){const e=r=>t().update(cW(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function lW(t=32){if(uf&&typeof uf.getRandomValues=="function")return uf.getRandomValues(new Uint8Array(t));if(uf&&typeof uf.randomBytes=="function")return uf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function qme(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Gme=class extends zme{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=SA(this.buffer)}update(e){Q$(this);const{view:n,buffer:r,blockLen:s}=this;e=cW(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=SA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Q$(this),Fme(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;qme(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=SA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const Qb=BigInt(2**32-1),aT=BigInt(32);function uW(t,e=!1){return e?{h:Number(t&Qb),l:Number(t>>aT&Qb)}:{h:Number(t>>aT&Qb)|0,l:Number(t&Qb)|0}}function Vme(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=uW(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Kme=(t,e)=>BigInt(t>>>0)<<aT|BigInt(e>>>0),Yme=(t,e,n)=>t>>>n,Qme=(t,e,n)=>t<<32-n|e>>>n,Zme=(t,e,n)=>t>>>n|e<<32-n,Jme=(t,e,n)=>t<<32-n|e>>>n,Xme=(t,e,n)=>t<<64-n|e>>>n-32,eye=(t,e,n)=>t>>>n-32|e<<64-n,tye=(t,e)=>e,nye=(t,e)=>t,rye=(t,e,n)=>t<<n|e>>>32-n,sye=(t,e,n)=>e<<n|t>>>32-n,iye=(t,e,n)=>e<<n-32|t>>>64-n,oye=(t,e,n)=>t<<n-32|e>>>64-n;function aye(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const cye=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),lye=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,uye=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),dye=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,hye=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),fye=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ct={fromBig:uW,split:Vme,toBig:Kme,shrSH:Yme,shrSL:Qme,rotrSH:Zme,rotrSL:Jme,rotrBH:Xme,rotrBL:eye,rotr32H:tye,rotr32L:nye,rotlSH:rye,rotlSL:sye,rotlBH:iye,rotlBL:oye,add:aye,add3L:cye,add3H:lye,add4L:uye,add4H:dye,add5H:fye,add5L:hye},[pye,gye]=Ct.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),ml=new Uint32Array(80),yl=new Uint32Array(80);let mye=class extends Gme{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let E=0;E<16;E++,n+=4)ml[E]=e.getUint32(n),yl[E]=e.getUint32(n+=4);for(let E=16;E<80;E++){const _=ml[E-15]|0,C=yl[E-15]|0,I=Ct.rotrSH(_,C,1)^Ct.rotrSH(_,C,8)^Ct.shrSH(_,C,7),A=Ct.rotrSL(_,C,1)^Ct.rotrSL(_,C,8)^Ct.shrSL(_,C,7),N=ml[E-2]|0,S=yl[E-2]|0,D=Ct.rotrSH(N,S,19)^Ct.rotrBH(N,S,61)^Ct.shrSH(N,S,6),P=Ct.rotrSL(N,S,19)^Ct.rotrBL(N,S,61)^Ct.shrSL(N,S,6),B=Ct.add4L(A,P,yl[E-7],yl[E-16]),q=Ct.add4H(B,I,D,ml[E-7],ml[E-16]);ml[E]=q|0,yl[E]=B|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let E=0;E<80;E++){const _=Ct.rotrSH(d,h,14)^Ct.rotrSH(d,h,18)^Ct.rotrBH(d,h,41),C=Ct.rotrSL(d,h,14)^Ct.rotrSL(d,h,18)^Ct.rotrBL(d,h,41),I=d&f^~d&g,A=h&p^~h&w,N=Ct.add5L(b,C,A,gye[E],yl[E]),S=Ct.add5H(N,y,_,I,pye[E],ml[E]),D=N|0,P=Ct.rotrSH(r,s,28)^Ct.rotrBH(r,s,34)^Ct.rotrBH(r,s,39),B=Ct.rotrSL(r,s,28)^Ct.rotrBL(r,s,34)^Ct.rotrBL(r,s,39),q=r&i^r&a^i&a,L=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ct.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Ct.add3L(D,B,L);r=Ct.add3H(T,S,P,q),s=T|0}({h:r,l:s}=Ct.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ct.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ct.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ct.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ct.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ct.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ct.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Ct.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){ml.fill(0),yl.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const yye=Hme(()=>new mye);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qO=BigInt(0),dW=BigInt(1),wye=BigInt(2);function GO(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function VO(t){if(!GO(t))throw new Error("Uint8Array expected")}function AA(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const bye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function KO(t){VO(t);let e="";for(let n=0;n<t.length;n++)e+=bye[t[n]];return e}function hW(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?qO:BigInt("0x"+t)}const hc={_0:48,_9:57,A:65,F:70,a:97,f:102};function Z$(t){if(t>=hc._0&&t<=hc._9)return t-hc._0;if(t>=hc.A&&t<=hc.F)return t-(hc.A-10);if(t>=hc.a&&t<=hc.f)return t-(hc.a-10)}function fW(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Z$(t.charCodeAt(i)),a=Z$(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function vye(t){return hW(KO(t))}function Fv(t){return VO(t),hW(KO(Uint8Array.from(t).reverse()))}function pW(t,e){return fW(t.toString(16).padStart(e*2,"0"))}function cT(t,e){return pW(t,e).reverse()}function fc(t,e,n){let r;if(typeof e=="string")try{r=fW(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(GO(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function J$(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];VO(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const IA=t=>typeof t=="bigint"&&qO<=t;function Eye(t,e,n){return IA(t)&&IA(e)&&IA(n)&&e<=t&&t<n}function bm(t,e,n,r){if(!Eye(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function _ye(t){let e;for(e=0;t>qO;t>>=dW,e+=1);return e}const Cye=t=>(wye<<BigInt(t-1))-dW,Sye={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||GO(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function YO(t,e,n={}){const r=(s,i,o)=>{const a=Sye[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function X$(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Mr=BigInt(0),rr=BigInt(1),fd=BigInt(2),Aye=BigInt(3),lT=BigInt(4),e5=BigInt(5),t5=BigInt(8);function yr(t,e){const n=t%e;return n>=Mr?n:e+n}function Iye(t,e,n){if(e<Mr)throw new Error("invalid exponent, negatives unsupported");if(n<=Mr)throw new Error("invalid modulus");if(n===rr)return Mr;let r=rr;for(;e>Mr;)e&rr&&(r=r*t%n),t=t*t%n,e>>=rr;return r}function ma(t,e,n){let r=t;for(;e-- >Mr;)r*=r,r%=n;return r}function n5(t,e){if(t===Mr)throw new Error("invert: expected non-zero number");if(e<=Mr)throw new Error("invert: expected positive modulus, got "+e);let n=yr(t,e),r=e,s=Mr,i=rr;for(;n!==Mr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==rr)throw new Error("invert: does not exist");return yr(s,e)}function Nye(t){const e=(t-rr)/fd;let n,r,s;for(n=t-rr,r=0;n%fd===Mr;n/=fd,r++);for(s=fd;s<t&&Iye(s,e,t)!==t-rr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+rr)/lT;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+rr)/fd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,rr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function xye(t){if(t%lT===Aye){const e=(t+rr)/lT;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%t5===e5){const e=(t-e5)/t5;return function(n,r){const s=n.mul(r,fd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,fd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Nye(t)}const Tye=(t,e)=>(yr(t,e)&rr)===rr,Rye=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Pye(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Rye.reduce((r,s)=>(r[s]="function",r),e);return YO(t,n)}function Oye(t,e,n){if(n<Mr)throw new Error("invalid exponent, negatives unsupported");if(n===Mr)return t.ONE;if(n===rr)return e;let r=t.ONE,s=e;for(;n>Mr;)n&rr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=rr;return r}function kye(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function gW(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function mW(t,e,n=!1,r={}){if(t<=Mr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=gW(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:Cye(s),ZERO:Mr,ONE:rr,create:c=>yr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Mr<=c&&c<t},is0:c=>c===Mr,isOdd:c=>(c&rr)===rr,neg:c=>yr(-c,t),eql:(c,l)=>c===l,sqr:c=>yr(c*c,t),add:(c,l)=>yr(c+l,t),sub:(c,l)=>yr(c-l,t),mul:(c,l)=>yr(c*l,t),pow:(c,l)=>Oye(a,c,l),div:(c,l)=>yr(c*n5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>n5(c,t),sqrt:r.sqrt||(c=>(o||(o=xye(t)),o(a,c))),invertBatch:c=>kye(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?cT(c,i):pW(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Fv(c):vye(c)}});return Object.freeze(a)}const r5=BigInt(0),Zb=BigInt(1);function NA(t,e){const n=e.negate();return t?n:e}function yW(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xA(t,e){yW(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Dye(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function $ye(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const TA=new WeakMap,wW=new WeakMap;function RA(t){return wW.get(t)||1}function Mye(t,e){return{constTimeNegate:NA,hasPrecomputes(n){return RA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>r5;)r&Zb&&(s=s.add(i)),i=i.double(),r>>=Zb;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=xA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=xA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=Zb);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(NA(y,r[g])):a=a.add(NA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=xA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===r5)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=Zb),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=TA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&TA.set(r,s(i))),i},wNAFCached(n,r,s){const i=RA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=RA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){yW(r,e),wW.set(n,r),TA.delete(n)}}}function Lye(t,e,n,r){if(Dye(n,t),$ye(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=_ye(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Uye(t){return Pye(t.Fp),YO(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gW(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Po=BigInt(0),Ws=BigInt(1),Jb=BigInt(2),Bye=BigInt(8),jye={zip215:!0};function Fye(t){const e=Uye(t);return YO(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Wye(t){const e=Fye(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=Jb<<BigInt(a*8)-Ws,u=n.create,d=mW(e.n,e.nBitLength),h=e.uvRatio||((T,x)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(x))}}catch{return{isValid:!1,value:Po}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,x,$)=>{if(AA("phflag",$),x.length||$)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,x){bm("coordinate "+T,x,Po,l)}function w(T){if(!(T instanceof E))throw new Error("ExtendedPoint expected")}const y=X$((T,x)=>{const{ex:$,ey:R,ez:k}=T,j=T.is0();x==null&&(x=j?Bye:n.inv(k));const H=u($*x),X=u(R*x),se=u(k*x);if(j)return{x:Po,y:Ws};if(se!==Ws)throw new Error("invZ was invalid");return{x:H,y:X}}),b=X$(T=>{const{a:x,d:$}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:R,ey:k,ez:j,et:H}=T,X=u(R*R),se=u(k*k),ne=u(j*j),ae=u(ne*ne),ye=u(X*x),Z=u(ne*u(ye+se)),re=u(ae+u($*u(X*se)));if(Z!==re)throw new Error("bad point: equation left != right (1)");const de=u(R*k),ee=u(j*H);if(de!==ee)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(x,$,R,k){this.ex=x,this.ey=$,this.ez=R,this.et=k,g("x",x),g("y",$),g("z",R),g("t",k),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof E)throw new Error("extended point not allowed");const{x:$,y:R}=x||{};return g("x",$),g("y",R),new E($,R,Ws,u($*R))}static normalizeZ(x){const $=n.invertBatch(x.map(R=>R.ez));return x.map((R,k)=>R.toAffine($[k])).map(E.fromAffine)}static msm(x,$){return Lye(E,d,x,$)}_setWindowSize(x){I.setWindowSize(this,x)}assertValidity(){b(this)}equals(x){w(x);const{ex:$,ey:R,ez:k}=this,{ex:j,ey:H,ez:X}=x,se=u($*X),ne=u(j*k),ae=u(R*X),ye=u(H*k);return se===ne&&ae===ye}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:x}=e,{ex:$,ey:R,ez:k}=this,j=u($*$),H=u(R*R),X=u(Jb*u(k*k)),se=u(x*j),ne=$+R,ae=u(u(ne*ne)-j-H),ye=se+H,Z=ye-X,re=se-H,de=u(ae*Z),ee=u(ye*re),he=u(ae*re),Ie=u(Z*ye);return new E(de,ee,Ie,he)}add(x){w(x);const{a:$,d:R}=e,{ex:k,ey:j,ez:H,et:X}=this,{ex:se,ey:ne,ez:ae,et:ye}=x;if($===BigInt(-1)){const sn=u((j-k)*(ne+se)),_n=u((j+k)*(ne-se)),Un=u(_n-sn);if(Un===Po)return this.double();const or=u(H*Jb*ye),ss=u(X*Jb*ae),To=ss+or,Ft=_n+sn,ur=ss-or,sc=u(To*Un),qh=u(Ft*ur),is=u(To*ur),Fg=u(Un*Ft);return new E(sc,qh,Fg,is)}const Z=u(k*se),re=u(j*ne),de=u(X*R*ye),ee=u(H*ae),he=u((k+j)*(se+ne)-Z-re),Ie=ee-de,le=ee+de,me=u(re-$*Z),ze=u(he*Ie),Ke=u(le*me),Yt=u(he*me),rn=u(Ie*le);return new E(ze,Ke,rn,Yt)}subtract(x){return this.add(x.negate())}wNAF(x){return I.wNAFCached(this,x,E.normalizeZ)}multiply(x){const $=x;bm("scalar",$,Ws,r);const{p:R,f:k}=this.wNAF($);return E.normalizeZ([R,k])[0]}multiplyUnsafe(x,$=E.ZERO){const R=x;return bm("scalar",R,Po,r),R===Po?C:this.is0()||R===Ws?this:I.wNAFCachedUnsafe(this,R,E.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(x){return y(this,x)}clearCofactor(){const{h:x}=e;return x===Ws?this:this.multiplyUnsafe(x)}static fromHex(x,$=!1){const{d:R,a:k}=e,j=n.BYTES;x=fc("pointHex",x,j),AA("zip215",$);const H=x.slice(),X=x[j-1];H[j-1]=X&-129;const se=Fv(H),ne=$?l:n.ORDER;bm("pointHex.y",se,Po,ne);const ae=u(se*se),ye=u(ae-Ws),Z=u(R*ae-k);let{isValid:re,value:de}=h(ye,Z);if(!re)throw new Error("Point.fromHex: invalid y coordinate");const ee=(de&Ws)===Ws,he=(X&128)!==0;if(!$&&de===Po&&he)throw new Error("Point.fromHex: x=0 and x_0=1");return he!==ee&&(de=u(-de)),E.fromAffine({x:de,y:se})}static fromPrivateKey(x){return S(x).point}toRawBytes(){const{x,y:$}=this.toAffine(),R=cT($,n.BYTES);return R[R.length-1]|=x&Ws?128:0,R}toHex(){return KO(this.toRawBytes())}}E.BASE=new E(e.Gx,e.Gy,Ws,u(e.Gx*e.Gy)),E.ZERO=new E(Po,Ws,Ws,Po);const{BASE:_,ZERO:C}=E,I=Mye(E,a*8);function A(T){return yr(T,r)}function N(T){return A(Fv(T))}function S(T){const x=n.BYTES;T=fc("private key",T,x);const $=fc("hashed private key",i(T),2*x),R=f($.slice(0,x)),k=$.slice(x,2*x),j=N(R),H=_.multiply(j),X=H.toRawBytes();return{head:R,prefix:k,scalar:j,point:H,pointBytes:X}}function D(T){return S(T).pointBytes}function P(T=new Uint8Array,...x){const $=J$(...x);return N(i(p($,fc("context",T),!!s)))}function B(T,x,$={}){T=fc("message",T),s&&(T=s(T));const{prefix:R,scalar:k,pointBytes:j}=S(x),H=P($.context,R,T),X=_.multiply(H).toRawBytes(),se=P($.context,X,j,T),ne=A(H+se*k);bm("signature.s",ne,Po,r);const ae=J$(X,cT(ne,n.BYTES));return fc("result",ae,n.BYTES*2)}const q=jye;function L(T,x,$,R=q){const{context:k,zip215:j}=R,H=n.BYTES;T=fc("signature",T,2*H),x=fc("message",x),$=fc("publicKey",$,H),j!==void 0&&AA("zip215",j),s&&(x=s(x));const X=Fv(T.slice(H,2*H));let se,ne,ae;try{se=E.fromHex($,j),ne=E.fromHex(T.slice(0,H),j),ae=_.multiplyUnsafe(X)}catch{return!1}if(!j&&se.isSmallOrder())return!1;const ye=P(k,ne.toRawBytes(),se.toRawBytes(),x);return ne.add(se.multiplyUnsafe(ye)).subtract(ae).clearCofactor().equals(E.ZERO)}return _._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:B,verify:L,ExtendedPoint:E,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,x=E.BASE){return x._setWindowSize(T),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);const QO=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),s5=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const zye=BigInt(1),i5=BigInt(2);BigInt(3);const Hye=BigInt(5),qye=BigInt(8);function Gye(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=QO,o=t*t%i*t%i,a=ma(o,i5,i)*o%i,c=ma(a,zye,i)*t%i,l=ma(c,Hye,i)*c%i,u=ma(l,e,i)*l%i,d=ma(u,n,i)*u%i,h=ma(d,r,i)*d%i,f=ma(h,s,i)*h%i,p=ma(f,s,i)*h%i,g=ma(p,e,i)*l%i;return{pow_p_5_8:ma(g,i5,i)*t%i,b2:o}}function Vye(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Kye(t,e){const n=QO,r=yr(e*e*e,n),s=yr(r*r*e,n),i=Gye(t*s).pow_p_5_8;let o=yr(t*r*i,n);const a=yr(e*o*o,n),c=o,l=yr(o*s5,n),u=a===t,d=a===yr(-t,n),h=a===yr(-t*s5,n);return u&&(o=c),(d||h)&&(o=l),Tye(o,n)&&(o=yr(-o,n)),{isValid:u||d,value:o}}const Yye=mW(QO,void 0,!0),Qye={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Yye,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:qye,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:yye,randomBytes:lW,adjustScalarBytes:Vye,uvRatio:Kye},bW=Wye(Qye),Zye="EdDSA",Jye="JWT",c_=".",QC="base64url",vW="utf8",EW="utf8",Xye=":",ewe="did",twe="key",o5="base58btc",nwe="z",rwe="K36",swe=32;function ZO(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function _W(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?ZO(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function CW(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=_W(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return ZO(n)}function iwe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=E-w;N!==E&&_[N]===0;)N++;for(var S=c.repeat(g);N<E;++N)S+=t.charAt(_[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var N=new Uint8Array(w+(b-A)),S=w;A!==b;)N[S++]=E[A++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var owe=iwe,awe=owe;const SW=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},cwe=t=>new TextEncoder().encode(t),lwe=t=>new TextDecoder().decode(t);let uwe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},dwe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return AW(this,e)}},hwe=class{constructor(e){this.decoders=e}or(e){return AW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const AW=(t,e)=>new hwe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let fwe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new uwe(e,n,r),this.decoder=new dwe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ZC=({name:t,prefix:e,encode:n,decode:r})=>new fwe(t,e,n,r),W0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=awe(n,e);return ZC({prefix:t,name:e,encode:r,decode:i=>SW(s(i))})},pwe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},gwe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ts=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ZC({prefix:e,name:t,encode(s){return gwe(s,r,n)},decode(s){return pwe(s,r,n,t)}}),mwe=ZC({prefix:"\0",name:"identity",encode:t=>lwe(t),decode:t=>cwe(t)});var ywe=Object.freeze({__proto__:null,identity:mwe});const wwe=ts({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var bwe=Object.freeze({__proto__:null,base2:wwe});const vwe=ts({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ewe=Object.freeze({__proto__:null,base8:vwe});const _we=W0({prefix:"9",name:"base10",alphabet:"0123456789"});var Cwe=Object.freeze({__proto__:null,base10:_we});const Swe=ts({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Awe=ts({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Iwe=Object.freeze({__proto__:null,base16:Swe,base16upper:Awe});const Nwe=ts({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xwe=ts({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Twe=ts({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Rwe=ts({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Pwe=ts({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Owe=ts({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),kwe=ts({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Dwe=ts({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),$we=ts({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Mwe=Object.freeze({__proto__:null,base32:Nwe,base32upper:xwe,base32pad:Twe,base32padupper:Rwe,base32hex:Pwe,base32hexupper:Owe,base32hexpad:kwe,base32hexpadupper:Dwe,base32z:$we});const Lwe=W0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Uwe=W0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Bwe=Object.freeze({__proto__:null,base36:Lwe,base36upper:Uwe});const jwe=W0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Fwe=W0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Wwe=Object.freeze({__proto__:null,base58btc:jwe,base58flickr:Fwe});const zwe=ts({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Hwe=ts({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qwe=ts({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Gwe=ts({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Vwe=Object.freeze({__proto__:null,base64:zwe,base64pad:Hwe,base64url:qwe,base64urlpad:Gwe});const IW=Array.from(""),Kwe=IW.reduce((t,e,n)=>(t[n]=e,t),[]),Ywe=IW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Qwe(t){return t.reduce((e,n)=>(e+=Kwe[n],e),"")}function Zwe(t){const e=[];for(const n of t){const r=Ywe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Jwe=ZC({prefix:"",name:"base256emoji",encode:Qwe,decode:Zwe});var Xwe=Object.freeze({__proto__:null,base256emoji:Jwe}),e0e=NW,a5=128,t0e=-128,n0e=Math.pow(2,31);function NW(t,e,n){e=e||[],n=n||0;for(var r=n;t>=n0e;)e[n++]=t&255|a5,t/=128;for(;t&t0e;)e[n++]=t&255|a5,t>>>=7;return e[n]=t|0,NW.bytes=n-r+1,e}var r0e=uT,s0e=128,c5=127;function uT(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw uT.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&c5)<<s:(o&c5)*Math.pow(2,s),s+=7}while(o>=s0e);return uT.bytes=i-r,n}var i0e=Math.pow(2,7),o0e=Math.pow(2,14),a0e=Math.pow(2,21),c0e=Math.pow(2,28),l0e=Math.pow(2,35),u0e=Math.pow(2,42),d0e=Math.pow(2,49),h0e=Math.pow(2,56),f0e=Math.pow(2,63),p0e=function(t){return t<i0e?1:t<o0e?2:t<a0e?3:t<c0e?4:t<l0e?5:t<u0e?6:t<d0e?7:t<h0e?8:t<f0e?9:10},g0e={encode:e0e,decode:r0e,encodingLength:p0e},xW=g0e;const l5=(t,e,n=0)=>(xW.encode(t,e,n),e),u5=t=>xW.encodingLength(t),dT=(t,e)=>{const n=e.byteLength,r=u5(t),s=r+u5(n),i=new Uint8Array(s+n);return l5(t,i,0),l5(n,i,r),i.set(e,s),new m0e(t,n,e,i)};let m0e=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const TW=({name:t,code:e,encode:n})=>new y0e(t,e,n);let y0e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?dT(this.code,n):n.then(r=>dT(this.code,r))}else throw Error("Unknown type, must be binary type")}};const RW=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),w0e=TW({name:"sha2-256",code:18,encode:RW("SHA-256")}),b0e=TW({name:"sha2-512",code:19,encode:RW("SHA-512")});var v0e=Object.freeze({__proto__:null,sha256:w0e,sha512:b0e});const PW=0,E0e="identity",OW=SW,_0e=t=>dT(PW,OW(t)),C0e={code:PW,name:E0e,encode:OW,digest:_0e};var S0e=Object.freeze({__proto__:null,identity:C0e});new TextEncoder,new TextDecoder;const d5={...ywe,...bwe,...Ewe,...Cwe,...Iwe,...Mwe,...Bwe,...Wwe,...Vwe,...Xwe};({...v0e,...S0e});function kW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const h5=kW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),PA=kW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=_W(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),DW={utf8:h5,"utf-8":h5,hex:d5.base16,latin1:PA,ascii:PA,binary:PA,...d5};function JC(t,e="utf8"){const n=DW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Pg(t,e="utf8"){const n=DW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?ZO(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function f5(t){return ph(JC(Pg(t,QC),vW))}function l_(t){return JC(Pg(Jc(t),vW),QC)}function $W(t){const e=Pg(rwe,o5),n=nwe+JC(CW([e,t]),o5);return[ewe,twe,n].join(Xye)}function A0e(t){return JC(t,QC)}function I0e(t){return Pg(t,QC)}function N0e(t){return Pg([l_(t.header),l_(t.payload)].join(c_),EW)}function x0e(t){return[l_(t.header),l_(t.payload),A0e(t.signature)].join(c_)}function hT(t){const e=t.split(c_),n=f5(e[0]),r=f5(e[1]),s=I0e(e[2]),i=Pg(e.slice(0,2).join(c_),EW);return{header:n,payload:r,signature:s,data:i}}function p5(t=lW(swe)){const e=bW.getPublicKey(t);return{secretKey:CW([t,e]),publicKey:e}}async function T0e(t,e,n,r,s=be.fromMiliseconds(Date.now())){const i={alg:Zye,typ:Jye},o=$W(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=N0e({header:i,payload:c}),u=bW.sign(l,r.secretKey.slice(0,32));return x0e({header:i,payload:c,signature:u})}var g5=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},R0e=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),P0e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),O0e=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),k0e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),D0e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),$0e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,M0e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,m5=3,L0e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",$0e]],y5=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function U0e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new D0e:typeof navigator<"u"?j0e(navigator.userAgent):W0e()}function B0e(t){return t!==""&&L0e.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function j0e(t){var e=B0e(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new k0e;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<m5&&(s=g5(g5([],s,!0),z0e(m5-s.length),!0)):s=[];var i=s.join("."),o=F0e(t),a=M0e.exec(t);return a&&a[1]?new O0e(n,i,o,a[1]):new R0e(n,i,o)}function F0e(t){for(var e=0,n=y5.length;e<n;e++){var r=y5[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function W0e(){var t=typeof process<"u"&&process.version;return t?new P0e(process.version.slice(1)):null}function z0e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var In={};Object.defineProperty(In,"__esModule",{value:!0});In.getLocalStorage=In.getLocalStorageOrThrow=In.getCrypto=In.getCryptoOrThrow=MW=In.getLocation=In.getLocationOrThrow=JO=In.getNavigator=In.getNavigatorOrThrow=gh=In.getDocument=In.getDocumentOrThrow=In.getFromWindowOrThrow=In.getFromWindow=void 0;function Wh(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}In.getFromWindow=Wh;function Og(t){const e=Wh(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}In.getFromWindowOrThrow=Og;function H0e(){return Og("document")}In.getDocumentOrThrow=H0e;function q0e(){return Wh("document")}var gh=In.getDocument=q0e;function G0e(){return Og("navigator")}In.getNavigatorOrThrow=G0e;function V0e(){return Wh("navigator")}var JO=In.getNavigator=V0e;function K0e(){return Og("location")}In.getLocationOrThrow=K0e;function Y0e(){return Wh("location")}var MW=In.getLocation=Y0e;function Q0e(){return Og("crypto")}In.getCryptoOrThrow=Q0e;function Z0e(){return Wh("crypto")}In.getCrypto=Z0e;function J0e(){return Og("localStorage")}In.getLocalStorageOrThrow=J0e;function X0e(){return Wh("localStorage")}In.getLocalStorage=X0e;var XO={};Object.defineProperty(XO,"__esModule",{value:!0});var LW=XO.getWindowMetadata=void 0;const w5=In;function ebe(){let t,e;try{t=w5.getDocumentOrThrow(),e=w5.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const E=b.join("/");y+=E+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}LW=XO.getWindowMetadata=ebe;function tbe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],E=0;for(let _=p-1;(b!==0||E<d)&&_!==-1;_--,E++)b+=256*g[_]>>>0,g[_]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=E,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let E=e[b];if(E===255)return;let _=0;for(let C=f-1;(E!==0||_<h)&&C!==-1;C--,_++)E+=n*p[C]>>>0,p[C]=E%256>>>0,E=E/256>>>0;if(E!==0)throw new Error("Non-zero carry");h=_,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var nbe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const UW=tbe(nbe);function BW(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function vy(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=BW(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function rbe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=E-w;N!==E&&_[N]===0;)N++;for(var S=c.repeat(g);N<E;++N)S+=t.charAt(_[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var N=new Uint8Array(w+(b-A)),S=w;A!==b;)N[S++]=E[A++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var sbe=rbe,ibe=sbe;const obe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},abe=t=>new TextEncoder().encode(t),cbe=t=>new TextDecoder().decode(t);class lbe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ube{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jW(this,e)}}class dbe{constructor(e){this.decoders=e}or(e){return jW(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jW=(t,e)=>new dbe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class hbe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new lbe(e,n,r),this.decoder=new ube(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const XC=({name:t,prefix:e,encode:n,decode:r})=>new hbe(t,e,n,r),z0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=ibe(n,e);return XC({prefix:t,name:e,encode:r,decode:i=>obe(s(i))})},fbe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},pbe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},ns=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>XC({prefix:e,name:t,encode(s){return pbe(s,r,n)},decode(s){return fbe(s,r,n,t)}}),gbe=XC({prefix:"\0",name:"identity",encode:t=>cbe(t),decode:t=>abe(t)}),mbe=Object.freeze(Object.defineProperty({__proto__:null,identity:gbe},Symbol.toStringTag,{value:"Module"})),ybe=ns({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),wbe=Object.freeze(Object.defineProperty({__proto__:null,base2:ybe},Symbol.toStringTag,{value:"Module"})),bbe=ns({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),vbe=Object.freeze(Object.defineProperty({__proto__:null,base8:bbe},Symbol.toStringTag,{value:"Module"})),Ebe=z0({prefix:"9",name:"base10",alphabet:"0123456789"}),_be=Object.freeze(Object.defineProperty({__proto__:null,base10:Ebe},Symbol.toStringTag,{value:"Module"})),Cbe=ns({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Sbe=ns({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Abe=Object.freeze(Object.defineProperty({__proto__:null,base16:Cbe,base16upper:Sbe},Symbol.toStringTag,{value:"Module"})),Ibe=ns({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Nbe=ns({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xbe=ns({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Tbe=ns({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rbe=ns({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Pbe=ns({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Obe=ns({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kbe=ns({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dbe=ns({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),$be=Object.freeze(Object.defineProperty({__proto__:null,base32:Ibe,base32hex:Rbe,base32hexpad:Obe,base32hexpadupper:kbe,base32hexupper:Pbe,base32pad:xbe,base32padupper:Tbe,base32upper:Nbe,base32z:Dbe},Symbol.toStringTag,{value:"Module"})),Mbe=z0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Lbe=z0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Ube=Object.freeze(Object.defineProperty({__proto__:null,base36:Mbe,base36upper:Lbe},Symbol.toStringTag,{value:"Module"})),Bbe=z0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),jbe=z0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Fbe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Bbe,base58flickr:jbe},Symbol.toStringTag,{value:"Module"})),Wbe=ns({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zbe=ns({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hbe=ns({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qbe=ns({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Gbe=Object.freeze(Object.defineProperty({__proto__:null,base64:Wbe,base64pad:zbe,base64url:Hbe,base64urlpad:qbe},Symbol.toStringTag,{value:"Module"})),FW=Array.from(""),Vbe=FW.reduce((t,e,n)=>(t[n]=e,t),[]),Kbe=FW.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Ybe(t){return t.reduce((e,n)=>(e+=Vbe[n],e),"")}function Qbe(t){const e=[];for(const n of t){const r=Kbe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Zbe=XC({prefix:"",name:"base256emoji",encode:Ybe,decode:Qbe}),Jbe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Zbe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const b5={...mbe,...wbe,...vbe,..._be,...Abe,...$be,...Ube,...Fbe,...Gbe,...Jbe};function WW(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const v5=WW("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),OA=WW("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=BW(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),zW={utf8:v5,"utf-8":v5,hex:b5.base16,latin1:OA,ascii:OA,binary:OA,...b5};function fo(t,e="utf8"){const n=zW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function hi(t,e="utf8"){const n=zW[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Xbe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},eve="PARSE_ERROR",tve="INVALID_REQUEST",nve="METHOD_NOT_FOUND",rve="INVALID_PARAMS",HW="INTERNAL_ERROR",ek="SERVER_ERROR",sve=[-32700,-32600,-32601,-32602,-32603],Ey={[eve]:{code:-32700,message:"Parse error"},[tve]:{code:-32600,message:"Invalid Request"},[nve]:{code:-32601,message:"Method not found"},[rve]:{code:-32602,message:"Invalid params"},[HW]:{code:-32603,message:"Internal error"},[ek]:{code:-32e3,message:"Server error"}},qW=ek;function ive(t){return sve.includes(t)}function E5(t){return Object.keys(Ey).includes(t)?Ey[t]:Ey[qW]}function ove(t){const e=Object.values(Ey).find(n=>n.code===t);return e||Ey[qW]}function GW(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var VW={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fT=function(t,e){return fT=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},fT(t,e)};function ave(t,e){fT(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var pT=function(){return pT=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pT.apply(this,arguments)};function cve(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function lve(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function uve(t,e){return function(n,r){e(n,r,t)}}function dve(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function hve(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function fve(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function pve(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function gve(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function gT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function KW(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function mve(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(KW(arguments[e]));return t}function yve(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function kw(t){return this instanceof kw?(this.v=t,this):new kw(t)}function wve(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof kw?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function bve(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:kw(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function vve(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gT=="function"?gT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function Eve(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function _ve(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function Cve(t){return t&&t.__esModule?t:{default:t}}function Sve(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Ave(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Ive=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pT},__asyncDelegator:bve,__asyncGenerator:wve,__asyncValues:vve,__await:kw,__awaiter:hve,__classPrivateFieldGet:Sve,__classPrivateFieldSet:Ave,__createBinding:pve,__decorate:lve,__exportStar:gve,__extends:ave,__generator:fve,__importDefault:Cve,__importStar:_ve,__makeTemplateObject:Eve,__metadata:dve,__param:uve,__read:KW,__rest:cve,__spread:mve,__spreadArrays:yve,__values:gT},Symbol.toStringTag,{value:"Module"})),Nve=kU(Ive);var pc={},_5;function xve(){if(_5)return pc;_5=1,Object.defineProperty(pc,"__esModule",{value:!0}),pc.isBrowserCryptoAvailable=pc.getSubtleCrypto=pc.getBrowerCrypto=void 0;function t(){return(Ta==null?void 0:Ta.crypto)||(Ta==null?void 0:Ta.msCrypto)||{}}pc.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}pc.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return pc.isBrowserCryptoAvailable=n,pc}var gc={},C5;function Tve(){if(C5)return gc;C5=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.isBrowser=gc.isNode=gc.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}gc.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}gc.isNode=e;function n(){return!t()&&!e()}return gc.isBrowser=n,gc}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nve;e.__exportStar(xve(),t),e.__exportStar(Tve(),t)})(VW);function Sa(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function xd(t=6){return BigInt(Sa(t))}function Jl(t,e,n){return{id:n||Sa(),jsonrpc:"2.0",method:t,params:e}}function e1(t,e){return{id:t,jsonrpc:"2.0",result:e}}function t1(t,e,n){return{id:t,jsonrpc:"2.0",error:Rve(e)}}function Rve(t,e){return typeof t>"u"?E5(HW):(typeof t=="string"&&(t=Object.assign(Object.assign({},E5(ek)),{message:t})),ive(t.code)&&(t=ove(t.code)),t)}let Pve=class{},Ove=class extends Pve{constructor(){super()}},kve=class extends Ove{constructor(e){super()}};const Dve="^https?:",$ve="^wss?:";function Mve(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function YW(t,e){const n=Mve(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function S5(t){return YW(t,Dve)}function A5(t){return YW(t,$ve)}function Lve(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function QW(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function tk(t){return QW(t)&&"method"in t}function n1(t){return QW(t)&&(Aa(t)||oo(t))}function Aa(t){return"result"in t}function oo(t){return"error"in t}let Io=class extends kve{constructor(e){super(e),this.events=new Ao.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Jl(e.method,e.params||[],e.id||xd().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{oo(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),n1(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Uve=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Bve=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",I5=t=>t.split("?")[0],N5=10,jve=Uve();let Fve=class{constructor(e){if(this.url=e,this.events=new Ao.EventEmitter,this.registering=!1,!A5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Jc(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!A5(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=VW.isReactNative()?void 0:{rejectUnauthorized:!Lve(e)},i=new jve(e,[],s);Bve()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?ph(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=t1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return GW(e,I5(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>N5&&this.events.setMaxListeners(N5)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${I5(this.url)}`));return this.events.emit("register_error",n),n}};var mT={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ta<"u"&&Ta,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Ta<"u"&&Ta||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var x={next:function(){var $=T.shift();return{done:$===void 0,value:$}}};return c.iterable&&(x[Symbol.iterator]=function(){return x}),x}function g(T){this.map={},T instanceof g?T.forEach(function(x,$){this.append($,x)},this):Array.isArray(T)?T.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(x){this.append(x,T[x])},this)}g.prototype.append=function(T,x){T=h(T),x=f(x);var $=this.map[T];this.map[T]=$?$+", "+x:x},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,x){this.map[h(T)]=f(x)},g.prototype.forEach=function(T,x){for(var $ in this.map)this.map.hasOwnProperty($)&&T.call(x,this.map[$],$,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(x,$){T.push($)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(x){T.push(x)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(x,$){T.push([$,x])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function y(T){return new Promise(function(x,$){T.onload=function(){x(T.result)},T.onerror=function(){$(T.error)}})}function b(T){var x=new FileReader,$=y(x);return x.readAsArrayBuffer(T),$}function E(T){var x=new FileReader,$=y(x),R=/charset=([A-Za-z0-9_-]+)/.exec(T.type),k=R?R[1]:"utf-8";return x.readAsText(T,k),$}function _(T){for(var x=new Uint8Array(T),$=new Array(x.length),R=0;R<x.length;R++)$[R]=String.fromCharCode(x[R]);return $.join("")}function C(T){if(T.slice)return T.slice(0);var x=new Uint8Array(T.byteLength);return x.set(new Uint8Array(T)),x.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=C(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=C(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=w(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return E(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var A=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(T){var x=T.toUpperCase();return A.indexOf(x)>-1?x:T}function S(T,x){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var $=x.body;if(T instanceof S){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,x.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!$&&T._bodyInit!=null&&($=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new g(x.headers)),this.method=N(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var k=/\?/;this.url+=(k.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function D(T){var x=new FormData;return T.trim().split("&").forEach(function($){if($){var R=$.split("="),k=R.shift().replace(/\+/g," "),j=R.join("=").replace(/\+/g," ");x.append(decodeURIComponent(k),decodeURIComponent(j))}}),x}function P(T){var x=new g,$=T.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var k=R.split(":"),j=k.shift().trim();if(j){var H=k.join(":").trim();try{x.append(j,H)}catch(X){console.warn("Response "+X.message)}}}),x}I.call(S.prototype);function B(T,x){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new g(x.headers),this.url=x.url||"",this._initBody(T)}I.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},B.error=function(){var T=new B(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var q=[301,302,303,307,308];B.redirect=function(T,x){if(q.indexOf(x)===-1)throw new RangeError("Invalid status code");return new B(null,{status:x,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(x,$){this.message=x,this.name=$;var R=Error(x);this.stack=R.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function L(T,x){return new Promise(function($,R){var k=new S(T,x);if(k.signal&&k.signal.aborted)return R(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function H(){j.abort()}j.onload=function(){var ne={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};k.url.indexOf("file://")===0&&(j.status<200||j.status>599)?ne.status=200:ne.status=j.status,ne.url="responseURL"in j?j.responseURL:ne.headers.get("X-Request-URL");var ae="response"in j?j.response:j.responseText;setTimeout(function(){$(new B(ae,ne))},0)},j.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){R(new o.DOMException("Aborted","AbortError"))},0)};function X(ne){try{return ne===""&&a.location.href?a.location.href:ne}catch{return ne}}if(j.open(k.method,X(k.url),!0),k.credentials==="include"?j.withCredentials=!0:k.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof g||a.Headers&&x.headers instanceof a.Headers)){var se=[];Object.getOwnPropertyNames(x.headers).forEach(function(ne){se.push(h(ne)),j.setRequestHeader(ne,f(x.headers[ne]))}),k.headers.forEach(function(ne,ae){se.indexOf(ae)===-1&&j.setRequestHeader(ae,ne)})}else k.headers.forEach(function(ne,ae){j.setRequestHeader(ae,ne)});k.signal&&(k.signal.addEventListener("abort",H),j.onreadystatechange=function(){j.readyState===4&&k.signal.removeEventListener("abort",H)}),j.send(typeof k._bodyInit>"u"?null:k._bodyInit)})}return L.polyfill=!0,a.fetch||(a.fetch=L,a.Headers=g,a.Request=S,a.Response=B),o.Headers=g,o.Request=S,o.Response=B,o.fetch=L,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(mT,mT.exports);var Wve=mT.exports;const x5=Ah(Wve);var zve=Object.defineProperty,Hve=Object.defineProperties,qve=Object.getOwnPropertyDescriptors,T5=Object.getOwnPropertySymbols,Gve=Object.prototype.hasOwnProperty,Vve=Object.prototype.propertyIsEnumerable,R5=(t,e,n)=>e in t?zve(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P5=(t,e)=>{for(var n in e||(e={}))Gve.call(e,n)&&R5(t,n,e[n]);if(T5)for(var n of T5(e))Vve.call(e,n)&&R5(t,n,e[n]);return t},O5=(t,e)=>Hve(t,qve(e));const Kve={Accept:"application/json","Content-Type":"application/json"},Yve="POST",k5={headers:Kve,method:Yve},D5=10;let ua=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Ao.EventEmitter,this.isAvailable=!1,this.registering=!1,!S5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Jc(e),r=await(await x5(this.url,O5(P5({},k5),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!S5(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Jc({id:1,jsonrpc:"2.0",method:"test",params:[]});await x5(e,O5(P5({},k5),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?ph(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=t1(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return GW(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>D5&&this.events.setMaxListeners(D5)}};const _y={getSIWX(){return pe.state.siwx},async initializeIfEnabled(){var i;const t=pe.state.siwx,e=U.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(U.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await $r.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),jn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ot._getClient())==null?void 0:i.disconnect().catch(console.error)),St.reset("Connect"),Ko.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=pe.state.siwx,e=Ze.getPlainAddress(U.getActiveCaipAddress()),n=U.getActiveCaipNetwork(),r=ot._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Oe.getConnectorId(n.chainNamespace)===ke.CONNECTOR_ID.AUTH&&St.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),$r.close(),jn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!$r.state.open||St.state.view==="ApproveTransaction")&&await $r.open({view:"SIWXSignMessage"}),i.isSmartAccount?Ko.showError("This application might not support Smart Accounts"):Ko.showError("Signature declined"),jn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await ot.disconnect():$r.close(),St.reset("Connect"),jn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=pe.state.siwx,e=Ze.getPlainAddress(U.getActiveCaipAddress()),n=U.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=St.state.view==="ApproveTransaction",r=St.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=_y.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=U.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Ko.showLoading("Authenticating...",{autoClose:!1}),Be.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),jn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:_y.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),jn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:_y.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Ko.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=U.state.activeChain;return{network:((e=U.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Be.state.preferredAccountTypes)==null?void 0:n[t])===Zr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function Xb(t,e){return Oe.getConnectorId(t)===e}function Qve(t){const e=Array.from(U.state.chains.keys());let n=[];return t?(n.push([t,U.state.chains.get(t)]),Xb(t,ke.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&Xb(r,ke.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,U.state.chains.get(r)])}):Xb(t,ke.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&Xb(r,ke.CONNECTOR_ID.AUTH)&&n.push([r,U.state.chains.get(r)])})):n=Array.from(U.state.chains.entries()),n}const ei={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},u_={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ke.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ke.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ke.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ke.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ke.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ke.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ke.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ke.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ke.CONNECTOR_ID.COINBASE]:"Coinbase",[ke.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ke.CONNECTOR_ID.LEDGER]:"Ledger",[ke.CONNECTOR_ID.SAFE]:"Safe"}},r1={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${ei.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},Zve=new AbortController,Pa={EmbeddedWalletAbortController:Zve,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${Jve()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function Jve(){return typeof window<"u"}const Xve={createLogger(t,e="error"){const n=Fh({level:e}),{logger:r}=YC({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},eEe="rpc.walletconnect.org";function $5(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const kA=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Of={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===eEe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ke.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ke.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return kA.includes(e)?$5(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:u_.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Of.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ql(a.url,a.config))}),kA.includes(t.caipNetworkId)&&r.push(Ql($5(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ql(a))}),e_(r)},extendWagmiTransports(t,e,n){if(kA.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return e_([n,Ql(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ke.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=je.getActiveCaipNetworkId(),n=U.getAllRequestedCaipNetworks(),r=Array.from(((c=U.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},d_={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},zs=Mn({providers:{...d_},providerIds:{...d_}}),pn={state:zs,subscribeKey(t,e){return ws(zs,t,e)},subscribe(t){return ms(zs,()=>{t(zs)})},subscribeProviders(t){return ms(zs.providers,()=>t(zs.providers))},setProvider(t,e){e&&(zs.providers[t]=hh(e))},getProvider(t){return zs.providers[t]},setProviderId(t,e){e&&(zs.providerIds[t]=e)},getProviderId(t){if(t)return zs.providerIds[t]},reset(){zs.providers={...d_},zs.providerIds={...d_}},resetChain(t){zs.providers[t]=void 0,zs.providerIds[t]=void 0}},M5={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},qr={set(t,e){Pi.isClient&&localStorage.setItem(`${Le.STORAGE_KEY}${t}`,e)},get(t){return Pi.isClient?localStorage.getItem(`${Le.STORAGE_KEY}${t}`):null},delete(t,e){Pi.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Le.STORAGE_KEY}${t}`))}},ev=30*1e3,Pi={checkIfAllowedToTriggerEmail(){const t=qr.get(Le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ev){const n=Math.ceil((ev-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=qr.get(Le.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<ev)return Math.ceil((ev-e)/1e3)}return 0},checkIfRequestExists(t){return Zr.NOT_SAFE_RPC_METHODS.includes(t.method)||Zr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(M5.transactionHash))||(t==null?void 0:t.match(M5.signedMessage)))?Le.RPC_RESPONSE_TYPE_TX:Le.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Zr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var Gt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(Gt||(Gt={}));var yT;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(yT||(yT={}));const Te=Gt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$l=t=>{switch(typeof t){case"undefined":return Te.undefined;case"string":return Te.string;case"number":return isNaN(t)?Te.nan:Te.number;case"boolean":return Te.boolean;case"function":return Te.function;case"bigint":return Te.bigint;case"symbol":return Te.symbol;case"object":return Array.isArray(t)?Te.array:t===null?Te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Te.promise:typeof Map<"u"&&t instanceof Map?Te.map:typeof Set<"u"&&t instanceof Set?Te.set:typeof Date<"u"&&t instanceof Date?Te.date:Te.object;default:return Te.unknown}},we=Gt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),tEe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class na extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Gt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}na.create=t=>new na(t);const Dw=(t,e)=>{let n;switch(t.code){case we.invalid_type:t.received===Te.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case we.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Gt.jsonStringifyReplacer)}`;break;case we.unrecognized_keys:n=`Unrecognized key(s) in object: ${Gt.joinValues(t.keys,", ")}`;break;case we.invalid_union:n="Invalid input";break;case we.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Gt.joinValues(t.options)}`;break;case we.invalid_enum_value:n=`Invalid enum value. Expected ${Gt.joinValues(t.options)}, received '${t.received}'`;break;case we.invalid_arguments:n="Invalid function arguments";break;case we.invalid_return_type:n="Invalid function return type";break;case we.invalid_date:n="Invalid date";break;case we.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Gt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case we.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case we.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case we.custom:n="Invalid input";break;case we.invalid_intersection_types:n="Intersection results could not be merged";break;case we.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case we.not_finite:n="Number must be finite";break;default:n=e.defaultError,Gt.assertNever(t)}return{message:n}};let ZW=Dw;function nEe(t){ZW=t}function h_(){return ZW}const f_=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},rEe=[];function Me(t,e){const n=f_({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,h_(),Dw].filter(r=>!!r)});t.common.issues.push(n)}class ys{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return mt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ys.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return mt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const mt=Object.freeze({status:"aborted"}),JW=t=>({status:"dirty",value:t}),ks=t=>({status:"valid",value:t}),wT=t=>t.status==="aborted",bT=t=>t.status==="dirty",$w=t=>t.status==="valid",p_=t=>typeof Promise<"u"&&t instanceof Promise;var et;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(et||(et={}));class Ja{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const L5=(t,e)=>{if($w(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new na(t.common.issues);return this._error=n,this._error}}};function Et(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class At{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return $l(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:$l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ys,ctx:{common:e.parent.common,data:e.data,parsedType:$l(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(p_(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$l(e)},i=this._parseSync({data:e,path:s.path,parent:s});return L5(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$l(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(p_(s)?s:Promise.resolve(s));return L5(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:we.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new ca({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Bc.create(this,this._def)}nullable(){return wh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ra.create(this,this._def)}promise(){return Xp.create(this,this._def)}or(e){return Bw.create([this,e],this._def)}and(e){return jw.create(this,e,this._def)}transform(e){return new ca({...Et(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new qw({...Et(this._def),innerType:this,defaultValue:n,typeName:ut.ZodDefault})}brand(){return new ez({typeName:ut.ZodBranded,type:this,...Et(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new w_({...Et(this._def),innerType:this,catchValue:n,typeName:ut.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return H0.create(this,e)}readonly(){return v_.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sEe=/^c[^\s-]{8,}$/i,iEe=/^[a-z][a-z0-9]*$/,oEe=/^[0-9A-HJKMNP-TV-Z]{26}$/,aEe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cEe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,lEe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let DA;const uEe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,dEe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,hEe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function fEe(t,e){return!!((e==="v4"||!e)&&uEe.test(t)||(e==="v6"||!e)&&dEe.test(t))}class Zo extends At{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Te.string){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.string,received:i.parsedType}),mt}const r=new ys;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Me(s,{code:we.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Me(s,{code:we.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")cEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"email",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")DA||(DA=new RegExp(lEe,"u")),DA.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"emoji",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")aEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"uuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")sEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")iEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"cuid2",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")oEe.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ulid",code:we.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Me(s,{validation:"url",code:we.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"regex",code:we.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?hEe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Me(s,{code:we.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?fEe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Me(s,{validation:"ip",code:we.invalid_string,message:i.message}),r.dirty()):Gt.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:we.invalid_string,...et.errToObj(r)})}_addCheck(e){return new Zo({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...et.errToObj(e)})}url(e){return this._addCheck({kind:"url",...et.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...et.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...et.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...et.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...et.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...et.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...et.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...et.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...et.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...et.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...et.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...et.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...et.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...et.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...et.errToObj(n)})}nonempty(e){return this.min(1,et.errToObj(e))}trim(){return new Zo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Zo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Zo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Zo.create=t=>{var e;return new Zo({checks:[],typeName:ut.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};function pEe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Du extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Te.number){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.number,received:i.parsedType}),mt}let r;const s=new ys;for(const i of this._def.checks)i.kind==="int"?Gt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:we.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?pEe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Me(r,{code:we.not_finite,message:i.message}),s.dirty()):Gt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,et.toString(n))}setLimit(e,n,r,s){return new Du({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(e){return new Du({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:et.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:et.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:et.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:et.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Gt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Du.create=t=>new Du({checks:[],typeName:ut.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class $u extends At{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Te.bigint){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.bigint,received:i.parsedType}),mt}let r;const s=new ys;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Me(r,{code:we.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):Gt.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,et.toString(n))}gt(e,n){return this.setLimit("min",e,!1,et.toString(n))}lte(e,n){return this.setLimit("max",e,!0,et.toString(n))}lt(e,n){return this.setLimit("max",e,!1,et.toString(n))}setLimit(e,n,r,s){return new $u({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:et.toString(s)}]})}_addCheck(e){return new $u({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:et.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:et.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:et.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:et.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:et.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$u.create=t=>{var e;return new $u({checks:[],typeName:ut.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Et(t)})};class Mw extends At{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Te.boolean){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.boolean,received:r.parsedType}),mt}return ks(e.data)}}Mw.create=t=>new Mw({typeName:ut.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Et(t)});class mh extends At{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Te.date){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_type,expected:Te.date,received:i.parsedType}),mt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Me(i,{code:we.invalid_date}),mt}const r=new ys;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Me(s,{code:we.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Gt.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new mh({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:et.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:et.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}mh.create=t=>new mh({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:ut.ZodDate,...Et(t)});class g_ extends At{_parse(e){if(this._getType(e)!==Te.symbol){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.symbol,received:r.parsedType}),mt}return ks(e.data)}}g_.create=t=>new g_({typeName:ut.ZodSymbol,...Et(t)});class Lw extends At{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.undefined,received:r.parsedType}),mt}return ks(e.data)}}Lw.create=t=>new Lw({typeName:ut.ZodUndefined,...Et(t)});class Uw extends At{_parse(e){if(this._getType(e)!==Te.null){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.null,received:r.parsedType}),mt}return ks(e.data)}}Uw.create=t=>new Uw({typeName:ut.ZodNull,...Et(t)});class Jp extends At{constructor(){super(...arguments),this._any=!0}_parse(e){return ks(e.data)}}Jp.create=t=>new Jp({typeName:ut.ZodAny,...Et(t)});class Hd extends At{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ks(e.data)}}Hd.create=t=>new Hd({typeName:ut.ZodUnknown,...Et(t)});class Xc extends At{_parse(e){const n=this._getOrReturnCtx(e);return Me(n,{code:we.invalid_type,expected:Te.never,received:n.parsedType}),mt}}Xc.create=t=>new Xc({typeName:ut.ZodNever,...Et(t)});class m_ extends At{_parse(e){if(this._getType(e)!==Te.undefined){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.void,received:r.parsedType}),mt}return ks(e.data)}}m_.create=t=>new m_({typeName:ut.ZodVoid,...Et(t)});class ra extends At{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Te.array)return Me(n,{code:we.invalid_type,expected:Te.array,received:n.parsedType}),mt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Me(n,{code:o?we.too_big:we.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Me(n,{code:we.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Me(n,{code:we.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Ja(n,o,n.path,a)))).then(o=>ys.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Ja(n,o,n.path,a)));return ys.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new ra({...this._def,minLength:{value:e,message:et.toString(n)}})}max(e,n){return new ra({...this._def,maxLength:{value:e,message:et.toString(n)}})}length(e,n){return new ra({...this._def,exactLength:{value:e,message:et.toString(n)}})}nonempty(e){return this.min(1,e)}}ra.create=(t,e)=>new ra({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,...Et(e)});function kf(t){if(t instanceof Fn){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Bc.create(kf(r))}return new Fn({...t._def,shape:()=>e})}else return t instanceof ra?new ra({...t._def,type:kf(t.element)}):t instanceof Bc?Bc.create(kf(t.unwrap())):t instanceof wh?wh.create(kf(t.unwrap())):t instanceof Xa?Xa.create(t.items.map(e=>kf(e))):t}class Fn extends At{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Gt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Te.object){const l=this._getOrReturnCtx(e);return Me(l,{code:we.invalid_type,expected:Te.object,received:l.parsedType}),mt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Xc&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ja(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Xc){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Me(s,{code:we.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ja(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ys.mergeObjectSync(r,l)):ys.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return et.errToObj,new Fn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=et.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new Fn({...this._def,unknownKeys:"strip"})}passthrough(){return new Fn({...this._def,unknownKeys:"passthrough"})}extend(e){return new Fn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Fn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ut.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Fn({...this._def,catchall:e})}pick(e){const n={};return Gt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Fn({...this._def,shape:()=>n})}omit(e){const n={};return Gt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Fn({...this._def,shape:()=>n})}deepPartial(){return kf(this)}partial(e){const n={};return Gt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Fn({...this._def,shape:()=>n})}required(e){const n={};return Gt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Bc;)i=i._def.innerType;n[r]=i}}),new Fn({...this._def,shape:()=>n})}keyof(){return XW(Gt.objectKeys(this.shape))}}Fn.create=(t,e)=>new Fn({shape:()=>t,unknownKeys:"strip",catchall:Xc.create(),typeName:ut.ZodObject,...Et(e)});Fn.strictCreate=(t,e)=>new Fn({shape:()=>t,unknownKeys:"strict",catchall:Xc.create(),typeName:ut.ZodObject,...Et(e)});Fn.lazycreate=(t,e)=>new Fn({shape:t,unknownKeys:"strip",catchall:Xc.create(),typeName:ut.ZodObject,...Et(e)});class Bw extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new na(a.ctx.common.issues));return Me(n,{code:we.invalid_union,unionErrors:o}),mt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new na(c));return Me(n,{code:we.invalid_union,unionErrors:a}),mt}}get options(){return this._def.options}}Bw.create=(t,e)=>new Bw({options:t,typeName:ut.ZodUnion,...Et(e)});const Wv=t=>t instanceof Ww?Wv(t.schema):t instanceof ca?Wv(t.innerType()):t instanceof zw?[t.value]:t instanceof Mu?t.options:t instanceof Hw?Object.keys(t.enum):t instanceof qw?Wv(t._def.innerType):t instanceof Lw?[void 0]:t instanceof Uw?[null]:null;class s1 extends At{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.object)return Me(n,{code:we.invalid_type,expected:Te.object,received:n.parsedType}),mt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Me(n,{code:we.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),mt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=Wv(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new s1({typeName:ut.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Et(r)})}}function vT(t,e){const n=$l(t),r=$l(e);if(t===e)return{valid:!0,data:t};if(n===Te.object&&r===Te.object){const s=Gt.objectKeys(e),i=Gt.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=vT(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Te.array&&r===Te.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=vT(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Te.date&&r===Te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class jw extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(wT(i)||wT(o))return mt;const a=vT(i.value,o.value);return a.valid?((bT(i)||bT(o))&&n.dirty(),{status:n.value,value:a.data}):(Me(r,{code:we.invalid_intersection_types}),mt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}jw.create=(t,e,n)=>new jw({left:t,right:e,typeName:ut.ZodIntersection,...Et(n)});class Xa extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.array)return Me(r,{code:we.invalid_type,expected:Te.array,received:r.parsedType}),mt;if(r.data.length<this._def.items.length)return Me(r,{code:we.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),mt;!this._def.rest&&r.data.length>this._def.items.length&&(Me(r,{code:we.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Ja(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ys.mergeArray(n,o)):ys.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Xa({...this._def,rest:e})}}Xa.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xa({items:t,typeName:ut.ZodTuple,rest:null,...Et(e)})};class Fw extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.object)return Me(r,{code:we.invalid_type,expected:Te.object,received:r.parsedType}),mt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Ja(r,a,r.path,a)),value:o._parse(new Ja(r,r.data[a],r.path,a))});return r.common.async?ys.mergeObjectAsync(n,s):ys.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof At?new Fw({keyType:e,valueType:n,typeName:ut.ZodRecord,...Et(r)}):new Fw({keyType:Zo.create(),valueType:e,typeName:ut.ZodRecord,...Et(n)})}}class y_ extends At{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.map)return Me(r,{code:we.invalid_type,expected:Te.map,received:r.parsedType}),mt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Ja(r,a,r.path,[l,"key"])),value:i._parse(new Ja(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return mt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}y_.create=(t,e,n)=>new y_({valueType:e,keyType:t,typeName:ut.ZodMap,...Et(n)});class yh extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Te.set)return Me(r,{code:we.invalid_type,expected:Te.set,received:r.parsedType}),mt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Me(r,{code:we.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Me(r,{code:we.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return mt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Ja(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new yh({...this._def,minSize:{value:e,message:et.toString(n)}})}max(e,n){return new yh({...this._def,maxSize:{value:e,message:et.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}yh.create=(t,e)=>new yh({valueType:t,minSize:null,maxSize:null,typeName:ut.ZodSet,...Et(e)});class hp extends At{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.function)return Me(n,{code:we.invalid_type,expected:Te.function,received:n.parsedType}),mt;function r(a,c){return f_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,h_(),Dw].filter(l=>!!l),issueData:{code:we.invalid_arguments,argumentsError:c}})}function s(a,c){return f_({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,h_(),Dw].filter(l=>!!l),issueData:{code:we.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Xp){const a=this;return ks(async function(...c){const l=new na([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return ks(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new na([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new na([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new hp({...this._def,args:Xa.create(e).rest(Hd.create())})}returns(e){return new hp({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new hp({args:e||Xa.create([]).rest(Hd.create()),returns:n||Hd.create(),typeName:ut.ZodFunction,...Et(r)})}}class Ww extends At{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ww.create=(t,e)=>new Ww({getter:t,typeName:ut.ZodLazy,...Et(e)});class zw extends At{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Me(n,{received:n.data,code:we.invalid_literal,expected:this._def.value}),mt}return{status:"valid",value:e.data}}get value(){return this._def.value}}zw.create=(t,e)=>new zw({value:t,typeName:ut.ZodLiteral,...Et(e)});function XW(t,e){return new Mu({values:t,typeName:ut.ZodEnum,...Et(e)})}class Mu extends At{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{expected:Gt.joinValues(r),received:n.parsedType,code:we.invalid_type}),mt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Me(n,{received:n.data,code:we.invalid_enum_value,options:r}),mt}return ks(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Mu.create(e)}exclude(e){return Mu.create(this.options.filter(n=>!e.includes(n)))}}Mu.create=XW;class Hw extends At{_parse(e){const n=Gt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Te.string&&r.parsedType!==Te.number){const s=Gt.objectValues(n);return Me(r,{expected:Gt.joinValues(s),received:r.parsedType,code:we.invalid_type}),mt}if(n.indexOf(e.data)===-1){const s=Gt.objectValues(n);return Me(r,{received:r.data,code:we.invalid_enum_value,options:s}),mt}return ks(e.data)}get enum(){return this._def.values}}Hw.create=(t,e)=>new Hw({values:t,typeName:ut.ZodNativeEnum,...Et(e)});class Xp extends At{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Te.promise&&n.common.async===!1)return Me(n,{code:we.invalid_type,expected:Te.promise,received:n.parsedType}),mt;const r=n.parsedType===Te.promise?n.data:Promise.resolve(n.data);return ks(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Xp.create=(t,e)=>new Xp({type:t,typeName:ut.ZodPromise,...Et(e)});class ca extends At{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Me(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?mt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$w(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>$w(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);Gt.assertNever(s)}}ca.create=(t,e,n)=>new ca({schema:t,typeName:ut.ZodEffects,effect:e,...Et(n)});ca.createWithPreprocess=(t,e,n)=>new ca({schema:e,effect:{type:"preprocess",transform:t},typeName:ut.ZodEffects,...Et(n)});class Bc extends At{_parse(e){return this._getType(e)===Te.undefined?ks(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bc.create=(t,e)=>new Bc({innerType:t,typeName:ut.ZodOptional,...Et(e)});class wh extends At{_parse(e){return this._getType(e)===Te.null?ks(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}wh.create=(t,e)=>new wh({innerType:t,typeName:ut.ZodNullable,...Et(e)});class qw extends At{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Te.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}qw.create=(t,e)=>new qw({innerType:t,typeName:ut.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Et(e)});class w_ extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return p_(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new na(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new na(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}w_.create=(t,e)=>new w_({innerType:t,typeName:ut.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Et(e)});class b_ extends At{_parse(e){if(this._getType(e)!==Te.nan){const r=this._getOrReturnCtx(e);return Me(r,{code:we.invalid_type,expected:Te.nan,received:r.parsedType}),mt}return{status:"valid",value:e.data}}}b_.create=t=>new b_({typeName:ut.ZodNaN,...Et(t)});const gEe=Symbol("zod_brand");class ez extends At{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class H0 extends At{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?mt:i.status==="dirty"?(n.dirty(),JW(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?mt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new H0({in:e,out:n,typeName:ut.ZodPipeline})}}class v_ extends At{_parse(e){const n=this._def.innerType._parse(e);return $w(n)&&(n.value=Object.freeze(n.value)),n}}v_.create=(t,e)=>new v_({innerType:t,typeName:ut.ZodReadonly,...Et(e)});const tz=(t,e={},n)=>t?Jp.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Jp.create(),mEe={object:Fn.lazycreate};var ut;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ut||(ut={}));const yEe=(t,e={message:`Input not instance of ${t.name}`})=>tz(n=>n instanceof t,e),nz=Zo.create,rz=Du.create,wEe=b_.create,bEe=$u.create,sz=Mw.create,vEe=mh.create,EEe=g_.create,_Ee=Lw.create,CEe=Uw.create,SEe=Jp.create,AEe=Hd.create,IEe=Xc.create,NEe=m_.create,xEe=ra.create,TEe=Fn.create,REe=Fn.strictCreate,PEe=Bw.create,OEe=s1.create,kEe=jw.create,DEe=Xa.create,$Ee=Fw.create,MEe=y_.create,LEe=yh.create,UEe=hp.create,BEe=Ww.create,jEe=zw.create,FEe=Mu.create,WEe=Hw.create,zEe=Xp.create,U5=ca.create,HEe=Bc.create,qEe=wh.create,GEe=ca.createWithPreprocess,VEe=H0.create,KEe=()=>nz().optional(),YEe=()=>rz().optional(),QEe=()=>sz().optional(),ZEe={string:t=>Zo.create({...t,coerce:!0}),number:t=>Du.create({...t,coerce:!0}),boolean:t=>Mw.create({...t,coerce:!0}),bigint:t=>$u.create({...t,coerce:!0}),date:t=>mh.create({...t,coerce:!0})},JEe=mt;var v=Object.freeze({__proto__:null,defaultErrorMap:Dw,setErrorMap:nEe,getErrorMap:h_,makeIssue:f_,EMPTY_PATH:rEe,addIssueToContext:Me,ParseStatus:ys,INVALID:mt,DIRTY:JW,OK:ks,isAborted:wT,isDirty:bT,isValid:$w,isAsync:p_,get util(){return Gt},get objectUtil(){return yT},ZodParsedType:Te,getParsedType:$l,ZodType:At,ZodString:Zo,ZodNumber:Du,ZodBigInt:$u,ZodBoolean:Mw,ZodDate:mh,ZodSymbol:g_,ZodUndefined:Lw,ZodNull:Uw,ZodAny:Jp,ZodUnknown:Hd,ZodNever:Xc,ZodVoid:m_,ZodArray:ra,ZodObject:Fn,ZodUnion:Bw,ZodDiscriminatedUnion:s1,ZodIntersection:jw,ZodTuple:Xa,ZodRecord:Fw,ZodMap:y_,ZodSet:yh,ZodFunction:hp,ZodLazy:Ww,ZodLiteral:zw,ZodEnum:Mu,ZodNativeEnum:Hw,ZodPromise:Xp,ZodEffects:ca,ZodTransformer:ca,ZodOptional:Bc,ZodNullable:wh,ZodDefault:qw,ZodCatch:w_,ZodNaN:b_,BRAND:gEe,ZodBranded:ez,ZodPipeline:H0,ZodReadonly:v_,custom:tz,Schema:At,ZodSchema:At,late:mEe,get ZodFirstPartyTypeKind(){return ut},coerce:ZEe,any:SEe,array:xEe,bigint:bEe,boolean:sz,date:vEe,discriminatedUnion:OEe,effect:U5,enum:FEe,function:UEe,instanceof:yEe,intersection:kEe,lazy:BEe,literal:jEe,map:MEe,nan:wEe,nativeEnum:WEe,never:IEe,null:CEe,nullable:qEe,number:rz,object:TEe,oboolean:QEe,onumber:YEe,optional:HEe,ostring:KEe,pipeline:VEe,preprocess:GEe,promise:zEe,record:$Ee,set:LEe,strictObject:REe,string:nz,symbol:EEe,transformer:U5,tuple:DEe,undefined:_Ee,union:PEe,unknown:AEe,void:NEe,NEVER:JEe,ZodIssueCode:we,quotelessJson:tEe,ZodError:na});const Vn=v.object({message:v.string()});function De(t){return v.literal(Le[t])}v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const XEe=v.object({chainId:v.string().or(v.number())}),e_e=v.object({email:v.string().email()}),t_e=v.object({otp:v.string()}),n_e=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number()))}),r_e=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string())}),s_e=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),i_e=v.object({email:v.string().email()}),o_e=v.object({otp:v.string()}),a_e=v.object({otp:v.string()}),c_e=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),l_e=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),u_e=v.object({type:v.string()}),d_e=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),h_e=v.object({url:v.string()}),f_e=v.object({userName:v.string()}),p_e=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([Zr.ACCOUNT_TYPES.EOA,Zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string())}),g_e=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),m_e=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([Zr.ACCOUNT_TYPES.EOA,Zr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string())}),y_e=v.object({uri:v.string()}),w_e=v.object({isConnected:v.boolean()}),b_e=v.object({chainId:v.string().or(v.number())}),v_e=v.object({chainId:v.string().or(v.number())}),E_e=v.object({newEmail:v.string().email()}),__e=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const C_e=v.object({version:v.string().optional()}),S_e=v.object({type:v.string(),address:v.string()}),A_e=v.any(),I_e=v.object({method:v.literal("eth_accounts")}),N_e=v.object({method:v.literal("eth_blockNumber")}),x_e=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),T_e=v.object({method:v.literal("eth_chainId")}),R_e=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),P_e=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),O_e=v.object({method:v.literal("eth_gasPrice")}),k_e=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),D_e=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),$_e=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),M_e=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),L_e=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),U_e=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),B_e=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),j_e=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),F_e=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),W_e=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),z_e=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),H_e=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),q_e=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),G_e=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),V_e=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),K_e=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),Y_e=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),Q_e=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),Z_e=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),J_e=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),X_e=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),eCe=v.object({method:v.literal("eth_newBlockFilter")}),tCe=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),nCe=v.object({method:v.literal("eth_newPendingTransactionFilter")}),rCe=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),sCe=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),iCe=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),B5=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),oCe=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),aCe=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),cCe=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),lCe=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),uCe=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),dCe=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),hCe=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),fCe=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),pCe=v.object({method:v.literal("wallet_getCapabilities")}),gCe=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),mCe=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),yCe=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),j5=v.object({token:v.string()}),$e=v.object({id:v.string().optional()}),vm={appEvent:$e.extend({type:De("APP_SWITCH_NETWORK"),payload:XEe}).or($e.extend({type:De("APP_CONNECT_EMAIL"),payload:e_e})).or($e.extend({type:De("APP_CONNECT_DEVICE")})).or($e.extend({type:De("APP_CONNECT_OTP"),payload:t_e})).or($e.extend({type:De("APP_CONNECT_SOCIAL"),payload:n_e})).or($e.extend({type:De("APP_GET_FARCASTER_URI")})).or($e.extend({type:De("APP_CONNECT_FARCASTER")})).or($e.extend({type:De("APP_GET_USER"),payload:v.optional(r_e)})).or($e.extend({type:De("APP_GET_SOCIAL_REDIRECT_URI"),payload:s_e})).or($e.extend({type:De("APP_SIGN_OUT")})).or($e.extend({type:De("APP_IS_CONNECTED"),payload:v.optional(j5)})).or($e.extend({type:De("APP_GET_CHAIN_ID")})).or($e.extend({type:De("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or($e.extend({type:De("APP_INIT_SMART_ACCOUNT")})).or($e.extend({type:De("APP_SET_PREFERRED_ACCOUNT"),payload:u_e})).or($e.extend({type:De("APP_RPC_REQUEST"),payload:B5.or(yCe).or(I_e).or(N_e).or(x_e).or(T_e).or(R_e).or(P_e).or(O_e).or(k_e).or(D_e).or($_e).or(M_e).or(L_e).or(U_e).or(B_e).or(j_e).or(F_e).or(W_e).or(z_e).or(H_e).or(q_e).or(G_e).or(V_e).or(K_e).or(Y_e).or(Q_e).or(Z_e).or(J_e).or(X_e).or(eCe).or(tCe).or(nCe).or(rCe).or(sCe).or(iCe).or(B5).or(oCe).or(aCe).or(cCe).or(lCe).or(uCe).or(dCe).or(fCe).or(hCe).or(pCe).or(gCe).or(mCe)})).or($e.extend({type:De("APP_UPDATE_EMAIL"),payload:i_e})).or($e.extend({type:De("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:o_e})).or($e.extend({type:De("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:a_e})).or($e.extend({type:De("APP_SYNC_THEME"),payload:c_e})).or($e.extend({type:De("APP_SYNC_DAPP_DATA"),payload:l_e})).or($e.extend({type:De("APP_RELOAD")})),frameEvent:$e.extend({type:De("FRAME_SWITCH_NETWORK_ERROR"),payload:Vn}).or($e.extend({type:De("FRAME_SWITCH_NETWORK_SUCCESS"),payload:v_e})).or($e.extend({type:De("FRAME_CONNECT_EMAIL_SUCCESS"),payload:d_e})).or($e.extend({type:De("FRAME_CONNECT_EMAIL_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:h_e})).or($e.extend({type:De("FRAME_GET_FARCASTER_URI_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:f_e})).or($e.extend({type:De("FRAME_CONNECT_FARCASTER_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_CONNECT_OTP_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_CONNECT_OTP_SUCCESS")})).or($e.extend({type:De("FRAME_CONNECT_DEVICE_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_CONNECT_DEVICE_SUCCESS")})).or($e.extend({type:De("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:p_e})).or($e.extend({type:De("FRAME_CONNECT_SOCIAL_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_GET_USER_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_GET_USER_SUCCESS"),payload:m_e})).or($e.extend({type:De("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:y_e})).or($e.extend({type:De("FRAME_SIGN_OUT_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_SIGN_OUT_SUCCESS")})).or($e.extend({type:De("FRAME_IS_CONNECTED_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_IS_CONNECTED_SUCCESS"),payload:w_e})).or($e.extend({type:De("FRAME_GET_CHAIN_ID_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_GET_CHAIN_ID_SUCCESS"),payload:b_e})).or($e.extend({type:De("FRAME_RPC_REQUEST_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_RPC_REQUEST_SUCCESS"),payload:A_e})).or($e.extend({type:De("FRAME_SESSION_UPDATE"),payload:j5})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_SUCCESS"),payload:g_e})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:E_e})).or($e.extend({type:De("FRAME_SYNC_THEME_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_SYNC_THEME_SUCCESS")})).or($e.extend({type:De("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or($e.extend({type:De("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:__e})).or($e.extend({type:De("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:S_e})).or($e.extend({type:De("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_READY"),payload:C_e})).or($e.extend({type:De("FRAME_RELOAD_ERROR"),payload:Vn})).or($e.extend({type:De("FRAME_RELOAD_SUCCESS")}))};function $A(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let wCe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=ke.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!$A(Le.FRAME_EVENT_KEY,l))return;const u=vm.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Pi.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Pi.isClient&&window.addEventListener("message",({data:o})=>{if(!$A(Le.FRAME_EVENT_KEY,o))return;const a=vm.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Pi.isClient&&window.addEventListener("message",({data:o})=>{if(!$A(Le.APP_EVENT_KEY,o))return;const a=vm.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Pi.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");vm.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Pi.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");vm.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Pi.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${rge}?projectId=${e}&chainId=${r}&version=${ige}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},bCe=class{constructor(e){var i;const n=Fh({level:sge}),{logger:r,chunkLoggerController:s}=YC({opts:n});this.logger=es(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},vCe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new bCe(e)),this.abortController=i,this.w3mFrame=new wCe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!qr.get(Le.EMAIL_LOGIN_USED_KEY)}getEmail(){return qr.get(Le.EMAIL)}getUsername(){return qr.get(Le.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Le.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Pi.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Le.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Le.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Le.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Le.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Le.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Le.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Le.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Le.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Le.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Le.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Le.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Le.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Le.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Le.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Le.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Le.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Le.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Le.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Le.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Le.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Zr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Le.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Le.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Le.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Zr.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Le.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Le.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Zr.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Le.APP_SYNC_DAPP_DATA,Le.APP_SYNC_THEME,Le.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Le.APP_CONNECT_EMAIL,Le.APP_CONNECT_DEVICE,Le.APP_CONNECT_OTP,Le.APP_CONNECT_SOCIAL,Le.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,E,_;w.id===u&&((E=y==null?void 0:(b=y.logger).info)==null||E.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){qr.set(Le.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){qr.set(Le.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&qr.set(Le.EMAIL,e),qr.set(Le.EMAIL_LOGIN_USED_KEY,"true"),qr.delete(Le.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){qr.delete(Le.EMAIL_LOGIN_USED_KEY),qr.delete(Le.EMAIL),qr.delete(Le.LAST_USED_CHAIN_KEY),qr.delete(Le.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&qr.set(Le.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=qr.get(Le.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){qr.set(Le.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},ECe=class zv{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return zv.instance||(zv.instance=new vCe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),zv.instance}};function _Ce(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Nr(t,...e){try{return _Ce(t(...e))}catch(n){return Promise.reject(n)}}function CCe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function SCe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Hv(t){if(CCe(t))return String(t);if(SCe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Hv(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const ET="base64:";function ACe(t){return typeof t=="string"?t:ET+xCe(t)}function ICe(t){return typeof t!="string"||!t.startsWith(ET)?t:NCe(t.slice(ET.length))}function NCe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function xCe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Ks(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function TCe(...t){return Ks(t.join(":"))}function tv(t){return t=Ks(t),t?t+":":""}function RCe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function PCe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const OCe="memory",kCe=()=>{const t=new Map;return{name:OCe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function DCe(t={}){const e={mounts:{"":t.driver||kCe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Ks(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await F5(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=Ks(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},E=n(w);f(E).items.push({key:w,value:y,relativeKey:E.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Ks(l);const{relativeKey:d,driver:h}=n(l);return Nr(h.hasItem,d,u)},getItem(l,u={}){l=Ks(l);const{relativeKey:d,driver:h}=n(l);return Nr(h.getItem,d,u).then(f=>Kb(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?Nr(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:TCe(d.base,f.key),value:Kb(f.value)}))):Promise.all(d.items.map(h=>Nr(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:Kb(f)})))))},getItemRaw(l,u={}){l=Ks(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?Nr(h.getItemRaw,d,u):Nr(h.getItem,d,u).then(f=>ICe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Ks(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await Nr(f.setItem,h,Hv(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return Nr(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:Hv(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>Nr(d.driver.setItem,h.relativeKey,Hv(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Ks(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await Nr(f.setItemRaw,h,u,d);else if(f.setItem)await Nr(f.setItem,h,ACe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Ks(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await Nr(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await Nr(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Ks(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await Nr(h.getMeta,d,u)),!u.nativeOnly){const p=await Nr(h.getItem,d+"$",u).then(g=>Kb(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=tv(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await Nr(y.driver.getKeys,y.relativeBase,u);for(const E of b){const _=y.mountpoint+Ks(E);h.some(C=>_.startsWith(C))||f.push(_)}h=[y.mountpoint,...h.filter(E=>!E.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||RCe(y,u.maxDepth))&&PCe(y,l))},async clear(l,u={}){l=tv(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return Nr(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>W5(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=tv(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(F5(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=tv(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await W5(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Ks(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Ks(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function F5(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function W5(t){typeof t.dispose=="function"&&await Nr(t.dispose)}const $Ce="idb-keyval";var MCe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=rW(t.dbName,t.storeName)),{name:$Ce,options:t,async hasItem(s){return!(typeof await q$(n(s),r)>"u")},async getItem(s){return await q$(n(s),r)??null},setItem(s,i){return ome(n(s),i,r)},removeItem(s){return ame(n(s),r)},getKeys(){return ume(r)},clear(){return cme(r)}}};const LCe="WALLET_CONNECT_V2_INDEXED_DB",UCe="keyvaluestorage";let BCe=class{constructor(){this.indexedDb=DCe({driver:MCe({dbName:LCe,storeName:UCe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Jc(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var MA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qv={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof MA<"u"&&MA.localStorage?qv.exports=MA.localStorage:typeof window<"u"&&window.localStorage?qv.exports=window.localStorage:qv.exports=new e})();function jCe(t){var e;return[t[0],ph((e=t[1])!=null?e:"")]}let FCe=class{constructor(){this.localStorage=qv.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(jCe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return ph(n)}async setItem(e,n){this.localStorage.setItem(e,Jc(n))}async removeItem(e){this.localStorage.removeItem(e)}};const WCe="wc_storage_version",z5=1,zCe=async(t,e,n)=>{const r=WCe,s=await e.getItem(r);if(s&&s>=z5){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,z5),n(e),HCe(t,o)},HCe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let qCe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new FCe;this.storage=e;try{const n=new BCe;zCe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var GCe=Object.defineProperty,VCe=(t,e,n)=>e in t?GCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H5=(t,e,n)=>VCe(t,typeof e!="symbol"?e+"":e,n);let KCe=class extends Uh{constructor(e){super(),this.opts=e,H5(this,"protocol","wc"),H5(this,"version",2)}};var YCe=Object.defineProperty,QCe=(t,e,n)=>e in t?YCe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ZCe=(t,e,n)=>QCe(t,e+"",n);let JCe=class extends Uh{constructor(e,n){super(),this.core=e,this.logger=n,ZCe(this,"records",new Map)}},XCe=class{constructor(e,n){this.logger=e,this.core=n}},e1e=class extends Uh{constructor(e,n){super(),this.relayer=e,this.logger=n}},t1e=class extends Uh{constructor(e){super()}},n1e=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},r1e=class extends Uh{constructor(e,n){super(),this.relayer=e,this.logger=n}},s1e=class extends Uh{constructor(e,n){super(),this.core=e,this.logger=n}},i1e=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},o1e=class{constructor(e,n){this.projectId=e,this.logger=n}},a1e=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var c1e=Object.defineProperty,l1e=(t,e,n)=>e in t?c1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q5=(t,e,n)=>l1e(t,typeof e!="symbol"?e+"":e,n);let u1e=class{constructor(e){this.opts=e,q5(this,"protocol","wc"),q5(this,"version",2)}},d1e=class{constructor(e){this.client=e}};function Gw(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function G5(t){return Gw(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const iz="2.23.2";let Em={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${iz}`};class bh extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof bh?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof bh&&n.cause.docsPath||n.docsPath,i=(a=Em.getDocsUrl)==null?void 0:a.call(Em,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Em.version?[`Version: ${Em.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=iz}walk(e){return oz(this,e)}}function oz(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?oz(t.cause,e):e?null:t}class az extends bh{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function kg(t,{dir:e,size:n=32}={}){return typeof t=="string"?h1e(t,{dir:e,size:n}):f1e(t,{dir:e,size:n})}function h1e(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new az({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function f1e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new az({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class p1e extends bh{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class g1e extends bh{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Dg(t,{size:e}){if(G5(t)>e)throw new g1e({givenSize:G5(t),maxSize:e})}function _T(t,e={}){const{signed:n}=e;e.size&&Dg(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function m1e(t,e={}){return Number(_T(t,e))}const y1e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function CT(t,e={}){return typeof t=="number"||typeof t=="bigint"?lz(t,e):typeof t=="string"?v1e(t,e):typeof t=="boolean"?w1e(t,e):cz(t,e)}function w1e(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Dg(n,{size:e.size}),kg(n,{size:e.size})):n}function cz(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=y1e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Dg(r,{size:e.size}),kg(r,{dir:"right",size:e.size})):r}function lz(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new p1e({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?kg(a,{size:r}):a}const b1e=new TextEncoder;function v1e(t,e={}){const n=b1e.encode(t);return cz(n,e)}const E1e=new TextEncoder;function _1e(t,e={}){return typeof t=="number"||typeof t=="bigint"?S1e(t,e):typeof t=="boolean"?C1e(t,e):Gw(t)?uz(t,e):dz(t,e)}function C1e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Dg(n,{size:e.size}),kg(n,{size:e.size})):n}const mc={zero:48,nine:57,A:65,F:70,a:97,f:102};function V5(t){if(t>=mc.zero&&t<=mc.nine)return t-mc.zero;if(t>=mc.A&&t<=mc.F)return t-(mc.A-10);if(t>=mc.a&&t<=mc.f)return t-(mc.a-10)}function uz(t,e={}){let n=t;e.size&&(Dg(n,{size:e.size}),n=kg(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=V5(r.charCodeAt(a++)),l=V5(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new bh(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function S1e(t,e){const n=lz(t,e);return uz(n)}function dz(t,e={}){const n=E1e.encode(t);return typeof e.size=="number"?(Dg(n,{size:e.size}),kg(n,{dir:"right",size:e.size})):n}function E_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function A1e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function i1(t,...e){if(!A1e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function EMe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");E_(t.outputLen),E_(t.blockLen)}function K5(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function I1e(t,e){i1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const nv=BigInt(2**32-1),Y5=BigInt(32);function N1e(t,e=!1){return e?{h:Number(t&nv),l:Number(t>>Y5&nv)}:{h:Number(t>>Y5&nv)|0,l:Number(t&nv)|0}}function x1e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=N1e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const T1e=(t,e,n)=>t<<n|e>>>32-n,R1e=(t,e,n)=>e<<n|t>>>32-n,P1e=(t,e,n)=>e<<n-32|t>>>64-n,O1e=(t,e,n)=>t<<n-32|e>>>64-n,df=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function k1e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function _Me(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function CMe(t,e){return t<<32-e|t>>>e}const Q5=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function D1e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Z5(t){for(let e=0;e<t.length;e++)t[e]=D1e(t[e])}function $1e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function hz(t){return typeof t=="string"&&(t=$1e(t)),i1(t),t}function SMe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];i1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}class M1e{clone(){return this._cloneInto()}}function L1e(t){const e=r=>t().update(hz(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function AMe(t=32){if(df&&typeof df.getRandomValues=="function")return df.getRandomValues(new Uint8Array(t));if(df&&typeof df.randomBytes=="function")return df.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const fz=[],pz=[],gz=[],U1e=BigInt(0),_m=BigInt(1),B1e=BigInt(2),j1e=BigInt(7),F1e=BigInt(256),W1e=BigInt(113);for(let t=0,e=_m,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],fz.push(2*(5*r+n)),pz.push((t+1)*(t+2)/2%64);let s=U1e;for(let i=0;i<7;i++)e=(e<<_m^(e>>j1e)*W1e)%F1e,e&B1e&&(s^=_m<<(_m<<BigInt(i))-_m);gz.push(s)}const[z1e,H1e]=x1e(gz,!0),J5=(t,e,n)=>n>32?P1e(t,e,n):T1e(t,e,n),X5=(t,e,n)=>n>32?O1e(t,e,n):R1e(t,e,n);function q1e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=J5(l,u,1)^n[a],h=X5(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=pz[o],c=J5(s,i,a),l=X5(s,i,a),u=fz[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=z1e[r],t[1]^=H1e[r]}n.fill(0)}class nk extends M1e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,E_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=k1e(this.state)}keccak(){Q5||Z5(this.state32),q1e(this.state32,this.rounds),Q5||Z5(this.state32),this.posOut=0,this.pos=0}update(e){K5(this);const{blockLen:n,state:r}=this;e=hz(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){K5(this,!1),i1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return E_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(I1e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new nk(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const G1e=(t,e,n)=>L1e(()=>new nk(e,t,n)),V1e=G1e(1,136,256/8);function mz(t,e){const n=e||"hex",r=V1e(Gw(t,{strict:!1})?_1e(t):t);return n==="bytes"?r:CT(r)}class K1e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const LA=new K1e(8192);function Y1e(t,e){if(LA.has(`${t}.${e}`))return LA.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=mz(dz(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return LA.set(`${t}.${e}`,i),i}function Q1e(t){const e=mz(`0x${t.substring(4)}`).substring(26);return Y1e(`0x${e}`)}async function Z1e({hash:t,signature:e}){const n=Gw(t)?t:CT(t),{secp256k1:r}=await hs(async()=>{const{secp256k1:o}=await import("./secp256k1-BGmqwPQZ.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=eM(f);return new r.Signature(_T(l),_T(u)).addRecoveryBit(p)}const o=Gw(e)?e:CT(e),a=m1e(`0x${o.slice(130)}`),c=eM(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function eM(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function J1e({hash:t,signature:e}){return Q1e(await Z1e({hash:t,signature:e}))}var X1e={};const eSe=":";function fp(t){const[e,n]=t.split(eSe);return{namespace:e,reference:n}}function yz(t,e){return t.includes(":")?[t]:e.chains||[]}var tSe=Object.defineProperty,nSe=Object.defineProperties,rSe=Object.getOwnPropertyDescriptors,tM=Object.getOwnPropertySymbols,sSe=Object.prototype.hasOwnProperty,iSe=Object.prototype.propertyIsEnumerable,nM=(t,e,n)=>e in t?tSe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rM=(t,e)=>{for(var n in e||(e={}))sSe.call(e,n)&&nM(t,n,e[n]);if(tM)for(var n of tM(e))iSe.call(e,n)&&nM(t,n,e[n]);return t},oSe=(t,e)=>nSe(t,rSe(e));const aSe="ReactNative",ki={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},cSe="js";function __(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function zu(){return!gh()&&!!JO()&&navigator.product===aSe}function lSe(){return zu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function uSe(){return zu()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function $g(){return!__()&&!!JO()&&!!gh()}function q0(){return zu()?ki.reactNative:__()?ki.node:$g()?ki.browser:ki.unknown}function sM(){var t;try{return zu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function dSe(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function hSe(t){var e,n;const r=wz();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),oSe(rM(rM({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function wz(){return LW()||{name:"",description:"",url:"",icons:[""]}}function fSe(){if(q0()===ki.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=U0e();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function pSe(){var t;const e=q0();return e===ki.browser?[e,((t=MW())==null?void 0:t.host)||"unknown"].join(":"):e}function bz(t,e,n){const r=fSe(),s=pSe();return[[t,e].join("-"),[cSe,n].join("-"),r,s].join("/")}function gSe({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=bz(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=dSe(l[1]||"",d);return l[0]+"?"+h}function Td(t,e){return t.filter(n=>e.includes(n)).length===t.length}function ST(t){return Object.fromEntries(t.entries())}function AT(t){return new Map(Object.entries(t))}function cd(t=be.FIVE_MINUTES,e){const n=be.toMiliseconds(t||be.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Xl(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function vz(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function mSe(t){return vz("topic",t)}function ySe(t){return vz("id",t)}function Ez(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function pr(t,e){return be.fromMiliseconds(Date.now()+be.toMiliseconds(t))}function Pl(t){return Date.now()>=be.toMiliseconds(t)}function tn(t,e){return`${t}${e?`:${e}`:""}`}function Ga(t=[],e=[]){return[...new Set([...t,...e])]}async function wSe({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=bSe(i,t,e),a=q0();if(a===ki.browser){if(!((r=gh())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}vSe(o)}else a===ki.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function bSe(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${SSe(r,!0)}`}else s=`${s}/wc?${r}`;return s}function vSe(t){let e="_self";CSe()?e="_top":(_Se()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function ESe(t,e){let n="";try{if($g()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function iM(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function oM(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function rk(){return typeof process<"u"&&X1e.IS_VITEST==="true"}function _Se(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function CSe(){try{return window.self!==window.top}catch{return!1}}function SSe(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function _z(t){return Buffer.from(t,"base64").toString("utf-8")}function ASe(t){return new Promise(e=>setTimeout(e,t))}function Vw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ISe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function G0(t,...e){if(!ISe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function sk(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vw(t.outputLen),Vw(t.blockLen)}function eg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Cz(t,e){G0(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const rv=BigInt(2**32-1),aM=BigInt(32);function NSe(t,e=!1){return e?{h:Number(t&rv),l:Number(t>>aM&rv)}:{h:Number(t>>aM&rv)|0,l:Number(t&rv)|0}}function xSe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=NSe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const TSe=(t,e,n)=>t<<n|e>>>32-n,RSe=(t,e,n)=>e<<n|t>>>32-n,PSe=(t,e,n)=>e<<n-32|t>>>64-n,OSe=(t,e,n)=>t<<n-32|e>>>64-n,hf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function kSe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function UA(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ya(t,e){return t<<32-e|t>>>e}const cM=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function DSe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function lM(t){for(let e=0;e<t.length;e++)t[e]=DSe(t[e])}function $Se(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function tg(t){return typeof t=="string"&&(t=$Se(t)),G0(t),t}function MSe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];G0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let ik=class{clone(){return this._cloneInto()}};function Sz(t){const e=r=>t().update(tg(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Mg(t=32){if(hf&&typeof hf.getRandomValues=="function")return hf.getRandomValues(new Uint8Array(t));if(hf&&typeof hf.randomBytes=="function")return hf.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const Az=[],Iz=[],Nz=[],LSe=BigInt(0),Cm=BigInt(1),USe=BigInt(2),BSe=BigInt(7),jSe=BigInt(256),FSe=BigInt(113);for(let t=0,e=Cm,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Az.push(2*(5*r+n)),Iz.push((t+1)*(t+2)/2%64);let s=LSe;for(let i=0;i<7;i++)e=(e<<Cm^(e>>BSe)*FSe)%jSe,e&USe&&(s^=Cm<<(Cm<<BigInt(i))-Cm);Nz.push(s)}const[WSe,zSe]=xSe(Nz,!0),uM=(t,e,n)=>n>32?PSe(t,e,n):TSe(t,e,n),dM=(t,e,n)=>n>32?OSe(t,e,n):RSe(t,e,n);function HSe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=uM(l,u,1)^n[a],h=dM(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Iz[o],c=uM(s,i,a),l=dM(s,i,a),u=Az[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=WSe[r],t[1]^=zSe[r]}n.fill(0)}let qSe=class xz extends ik{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Vw(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=kSe(this.state)}keccak(){cM||lM(this.state32),HSe(this.state32,this.rounds),cM||lM(this.state32),this.posOut=0,this.pos=0}update(e){eg(this);const{blockLen:n,state:r}=this;e=tg(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){eg(this,!1),G0(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Vw(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Cz(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new xz(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const GSe=(t,e,n)=>Sz(()=>new qSe(e,t,n)),VSe=GSe(1,136,256/8),KSe="https://rpc.walletconnect.org/v1";function Tz(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(VSe(n)).toString("hex")}async function YSe(t,e,n,r,s,i){switch(n.t){case"eip191":return await QSe(t,e,n.s);case"eip1271":return await ZSe(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function QSe(t,e,n){return(await J1e({hash:Tz(e),signature:n})).toLowerCase()===t.toLowerCase()}async function ZSe(t,e,n,r,s,i){const o=fp(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=Tz(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||KSe}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:JSe(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function JSe(){return Date.now()+Math.floor(Math.random()*1e3)}function XSe(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return UW.encode(i)}var eAe=Object.defineProperty,tAe=Object.defineProperties,nAe=Object.getOwnPropertyDescriptors,hM=Object.getOwnPropertySymbols,rAe=Object.prototype.hasOwnProperty,sAe=Object.prototype.propertyIsEnumerable,fM=(t,e,n)=>e in t?eAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iAe=(t,e)=>{for(var n in e||(e={}))rAe.call(e,n)&&fM(t,n,e[n]);if(hM)for(var n of hM(e))sAe.call(e,n)&&fM(t,n,e[n]);return t},oAe=(t,e)=>tAe(t,nAe(e));const aAe="did:pkh:",ok=t=>t==null?void 0:t.split(":"),cAe=t=>{const e=t&&ok(t);if(e)return t.includes(aAe)?e[3]:e[1]},IT=t=>{const e=t&&ok(t);if(e)return e[2]+":"+e[3]},C_=t=>{const e=t&&ok(t);if(e)return e.pop()};async function pM(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=Rz(s,s.iss),o=C_(s.iss);return await YSe(o,i,r,IT(s.iss),n)}const Rz=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=C_(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${cAe(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=Gv(t.resources);if(p){const g=Kw(p);s=yAe(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function lAe(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function uAe(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function vh(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function dAe(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:hAe(e,n,r)}}}function hAe(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function Pz(t){return vh(t),`urn:recap:${lAe(t).replace(/=/g,"")}`}function Kw(t){const e=uAe(t.replace("urn:recap:",""));return vh(e),e}function fAe(t,e,n){const r=dAe(t,e,n);return Pz(r)}function pAe(t){return t&&t.includes("urn:recap:")}function gAe(t,e){const n=Kw(t),r=Kw(e),s=mAe(n,r);return Pz(s)}function mAe(t,e){vh(t),vh(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=oAe(iAe({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function yAe(t="",e){vh(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function gM(t){var e;const n=Kw(t);vh(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function mM(t){const e=Kw(t);vh(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function Gv(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return pAe(e)?e:void 0}function BA(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Oz(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ri(t,...e){if(!Oz(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function yM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function wAe(t,e){Ri(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function wM(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const vu=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),bAe=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),vAe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!vAe)throw new Error("Non little-endian hardware is not supported");function EAe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function NT(t){if(typeof t=="string")t=EAe(t);else if(Oz(t))t=xT(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function _Ae(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function CAe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const SAe=(t,e)=>{function n(r,...s){if(Ri(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Ri(l):Ri(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Ri(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Ri(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ri(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Ri(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function bM(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!AAe(e))throw new Error("invalid output, must be aligned");return e}function vM(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function AAe(t){return t.byteOffset%4===0}function xT(t){return Uint8Array.from(t)}function ng(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const kz=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),IAe=kz("expand 16-byte k"),NAe=kz("expand 32-byte k"),xAe=vu(IAe),TAe=vu(NAe);function zt(t,e){return t<<e|t>>>32-e}function TT(t){return t.byteOffset%4===0}const sv=64,RAe=16,Dz=2**32-1,EM=new Uint32Array;function PAe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(sv),u=vu(l),d=TT(s)&&TT(i),h=d?vu(s):EM,f=d?vu(i):EM;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=Dz)throw new Error("arx: counter overflow");const g=Math.min(sv,c-p);if(d&&g===sv){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<RAe;y++)b=w+y,f[b]=h[b]^u[y];p+=sv;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function OAe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=_Ae({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return BA(s),BA(o),wM(i),wM(n),(a,c,l,u,d=0)=>{Ri(a),Ri(c),Ri(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Ri(u),BA(d),d<0||d>=Dz)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=xT(a)),w=TAe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=xAe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);TT(c)||f.push(c=xT(c));const y=vu(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,vu(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const _=new Uint8Array(12);_.set(c,i?0:12-c.length),c=_,f.push(c)}const E=vu(c);return PAe(t,w,y,E,l,u,d,o),ng(...f),u}}const Fr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class kAe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=NT(e),Ri(e,32);const n=Fr(e,0),r=Fr(e,2),s=Fr(e,4),i=Fr(e,6),o=Fr(e,8),a=Fr(e,10),c=Fr(e,12),l=Fr(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Fr(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Fr(e,n+0),b=Fr(e,n+2),E=Fr(e,n+4),_=Fr(e,n+6),C=Fr(e,n+8),I=Fr(e,n+10),A=Fr(e,n+12),N=Fr(e,n+14);let S=i[0]+(y&8191),D=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|E<<6)&8191),B=i[3]+((E>>>7|_<<9)&8191),q=i[4]+((_>>>4|C<<12)&8191),L=i[5]+(C>>>1&8191),T=i[6]+((C>>>14|I<<2)&8191),x=i[7]+((I>>>11|A<<5)&8191),$=i[8]+((A>>>8|N<<8)&8191),R=i[9]+(N>>>5|s),k=0,j=k+S*a+D*(5*w)+P*(5*g)+B*(5*p)+q*(5*f);k=j>>>13,j&=8191,j+=L*(5*h)+T*(5*d)+x*(5*u)+$*(5*l)+R*(5*c),k+=j>>>13,j&=8191;let H=k+S*c+D*a+P*(5*w)+B*(5*g)+q*(5*p);k=H>>>13,H&=8191,H+=L*(5*f)+T*(5*h)+x*(5*d)+$*(5*u)+R*(5*l),k+=H>>>13,H&=8191;let X=k+S*l+D*c+P*a+B*(5*w)+q*(5*g);k=X>>>13,X&=8191,X+=L*(5*p)+T*(5*f)+x*(5*h)+$*(5*d)+R*(5*u),k+=X>>>13,X&=8191;let se=k+S*u+D*l+P*c+B*a+q*(5*w);k=se>>>13,se&=8191,se+=L*(5*g)+T*(5*p)+x*(5*f)+$*(5*h)+R*(5*d),k+=se>>>13,se&=8191;let ne=k+S*d+D*u+P*l+B*c+q*a;k=ne>>>13,ne&=8191,ne+=L*(5*w)+T*(5*g)+x*(5*p)+$*(5*f)+R*(5*h),k+=ne>>>13,ne&=8191;let ae=k+S*h+D*d+P*u+B*l+q*c;k=ae>>>13,ae&=8191,ae+=L*a+T*(5*w)+x*(5*g)+$*(5*p)+R*(5*f),k+=ae>>>13,ae&=8191;let ye=k+S*f+D*h+P*d+B*u+q*l;k=ye>>>13,ye&=8191,ye+=L*c+T*a+x*(5*w)+$*(5*g)+R*(5*p),k+=ye>>>13,ye&=8191;let Z=k+S*p+D*f+P*h+B*d+q*u;k=Z>>>13,Z&=8191,Z+=L*l+T*c+x*a+$*(5*w)+R*(5*g),k+=Z>>>13,Z&=8191;let re=k+S*g+D*p+P*f+B*h+q*d;k=re>>>13,re&=8191,re+=L*u+T*l+x*c+$*a+R*(5*w),k+=re>>>13,re&=8191;let de=k+S*w+D*g+P*p+B*f+q*h;k=de>>>13,de&=8191,de+=L*d+T*u+x*l+$*c+R*a,k+=de>>>13,de&=8191,k=(k<<2)+k|0,k=k+j|0,j=k&8191,k=k>>>13,H+=k,i[0]=j,i[1]=H,i[2]=X,i[3]=se,i[4]=ne,i[5]=ae,i[6]=ye,i[7]=Z,i[8]=re,i[9]=de}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;ng(r)}update(e){yM(this);const{buffer:n,blockLen:r}=this;e=NT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){ng(this.h,this.r,this.buffer,this.pad)}digestInto(e){yM(this),wAe(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function DAe(t){const e=(r,s)=>t(s).update(NT(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const $Ae=DAe(t=>new kAe(t));function MAe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,E=n[0],_=n[1],C=n[2],I=o,A=a,N=c,S=l,D=u,P=d,B=h,q=f,L=p,T=g,x=w,$=y,R=b,k=E,j=_,H=C;for(let se=0;se<i;se+=2)I=I+D|0,R=zt(R^I,16),L=L+R|0,D=zt(D^L,12),I=I+D|0,R=zt(R^I,8),L=L+R|0,D=zt(D^L,7),A=A+P|0,k=zt(k^A,16),T=T+k|0,P=zt(P^T,12),A=A+P|0,k=zt(k^A,8),T=T+k|0,P=zt(P^T,7),N=N+B|0,j=zt(j^N,16),x=x+j|0,B=zt(B^x,12),N=N+B|0,j=zt(j^N,8),x=x+j|0,B=zt(B^x,7),S=S+q|0,H=zt(H^S,16),$=$+H|0,q=zt(q^$,12),S=S+q|0,H=zt(H^S,8),$=$+H|0,q=zt(q^$,7),I=I+P|0,H=zt(H^I,16),x=x+H|0,P=zt(P^x,12),I=I+P|0,H=zt(H^I,8),x=x+H|0,P=zt(P^x,7),A=A+B|0,R=zt(R^A,16),$=$+R|0,B=zt(B^$,12),A=A+B|0,R=zt(R^A,8),$=$+R|0,B=zt(B^$,7),N=N+q|0,k=zt(k^N,16),L=L+k|0,q=zt(q^L,12),N=N+q|0,k=zt(k^N,8),L=L+k|0,q=zt(q^L,7),S=S+D|0,j=zt(j^S,16),T=T+j|0,D=zt(D^T,12),S=S+D|0,j=zt(j^S,8),T=T+j|0,D=zt(D^T,7);let X=0;r[X++]=o+I|0,r[X++]=a+A|0,r[X++]=c+N|0,r[X++]=l+S|0,r[X++]=u+D|0,r[X++]=d+P|0,r[X++]=h+B|0,r[X++]=f+q|0,r[X++]=p+L|0,r[X++]=g+T|0,r[X++]=w+x|0,r[X++]=y+$|0,r[X++]=b+R|0,r[X++]=E+k|0,r[X++]=_+j|0,r[X++]=C+H|0}const LAe=OAe(MAe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),UAe=new Uint8Array(16),_M=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(UAe.subarray(n))},BAe=new Uint8Array(32);function CM(t,e,n,r,s){const i=t(e,n,BAe),o=$Ae.create(i);s&&_M(o,s),_M(o,r);const a=new Uint8Array(16),c=bAe(a);vM(c,0,BigInt(s?s.length:0),!0),vM(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return ng(i,a),l}const jAe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=bM(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=CM(t,e,n,a,r);return i.set(c,o),ng(c),i},decrypt(s,i){i=bM(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=CM(t,e,n,o,r);if(!CAe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),ng(c),i}}),$z=SAe({blockSize:64,nonceLength:12,tagLength:16},jAe(LAe));let Mz=class extends ik{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,sk(e);const r=tg(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return eg(this),this.iHash.update(e),this}digestInto(e){eg(this),G0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const o1=(t,e,n)=>new Mz(t,e).update(n).digest();o1.create=(t,e)=>new Mz(t,e);function FAe(t,e,n){return sk(t),n===void 0&&(n=new Uint8Array(t.outputLen)),o1(t,tg(n),tg(e))}const jA=new Uint8Array([0]),SM=new Uint8Array;function WAe(t,e,n,r=32){if(sk(t),Vw(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=SM);const i=new Uint8Array(s*t.outputLen),o=o1.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)jA[0]=l+1,a.update(l===0?SM:c).update(n).update(jA).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),jA.fill(0),i.slice(0,r)}const zAe=(t,e,n,r,s)=>WAe(t,FAe(t,e,n),r,s);function HAe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function qAe(t,e,n){return t&e^~t&n}function GAe(t,e,n){return t&e^t&n^e&n}let VAe=class extends ik{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=UA(this.buffer)}update(e){eg(this);const{view:n,buffer:r,blockLen:s}=this;e=tg(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=UA(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){eg(this),Cz(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;HAe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=UA(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const KAe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),wl=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bl=new Uint32Array(64);class YAe extends VAe{constructor(){super(64,32,8,!1),this.A=wl[0]|0,this.B=wl[1]|0,this.C=wl[2]|0,this.D=wl[3]|0,this.E=wl[4]|0,this.F=wl[5]|0,this.G=wl[6]|0,this.H=wl[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)bl[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=bl[d-15],f=bl[d-2],p=ya(h,7)^ya(h,18)^h>>>3,g=ya(f,17)^ya(f,19)^f>>>10;bl[d]=g+bl[d-7]+p+bl[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ya(a,6)^ya(a,11)^ya(a,25),f=u+h+qAe(a,c,l)+KAe[d]+bl[d]|0,p=(ya(r,2)^ya(r,13)^ya(r,22))+GAe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){bl.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const V0=Sz(()=>new YAe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const a1=BigInt(0),c1=BigInt(1),QAe=BigInt(2);function Eh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function K0(t){if(!Eh(t))throw new Error("Uint8Array expected")}function rg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const ZAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function sg(t){K0(t);let e="";for(let n=0;n<t.length;n++)e+=ZAe[t[n]];return e}function Zf(t){const e=t.toString(16);return e.length&1?"0"+e:e}function ak(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?a1:BigInt("0x"+t)}const yc={_0:48,_9:57,A:65,F:70,a:97,f:102};function AM(t){if(t>=yc._0&&t<=yc._9)return t-yc._0;if(t>=yc.A&&t<=yc.F)return t-(yc.A-10);if(t>=yc.a&&t<=yc.f)return t-(yc.a-10)}function ig(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=AM(t.charCodeAt(i)),a=AM(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function qd(t){return ak(sg(t))}function Yw(t){return K0(t),ak(sg(Uint8Array.from(t).reverse()))}function og(t,e){return ig(t.toString(16).padStart(e*2,"0"))}function l1(t,e){return og(t,e).reverse()}function JAe(t){return ig(Zf(t))}function xi(t,e,n){let r;if(typeof e=="string")try{r=ig(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Eh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function Qw(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];K0(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function XAe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function eIe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const FA=t=>typeof t=="bigint"&&a1<=t;function u1(t,e,n){return FA(t)&&FA(e)&&FA(n)&&e<=t&&t<n}function jc(t,e,n,r){if(!u1(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function Lz(t){let e;for(e=0;t>a1;t>>=c1,e+=1);return e}function tIe(t,e){return t>>BigInt(e)&c1}function nIe(t,e,n){return t|(n?c1:a1)<<BigInt(e)}const ck=t=>(QAe<<BigInt(t-1))-c1,WA=t=>new Uint8Array(t),IM=t=>Uint8Array.from(t);function Uz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=WA(t),s=WA(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=WA())=>{s=a(IM([0]),u),r=a(),u.length!==0&&(s=a(IM([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return Qw(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const rIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Eh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Lg(t,e,n={}){const r=(s,i,o)=>{const a=rIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const sIe=()=>{throw new Error("not implemented")};function RT(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var iIe=Object.freeze({__proto__:null,isBytes:Eh,abytes:K0,abool:rg,bytesToHex:sg,numberToHexUnpadded:Zf,hexToNumber:ak,hexToBytes:ig,bytesToNumberBE:qd,bytesToNumberLE:Yw,numberToBytesBE:og,numberToBytesLE:l1,numberToVarBytesBE:JAe,ensureBytes:xi,concatBytes:Qw,equalBytes:XAe,utf8ToBytes:eIe,inRange:u1,aInRange:jc,bitLen:Lz,bitGet:tIe,bitSet:nIe,bitMask:ck,createHmacDrbg:Uz,validateObject:Lg,notImplemented:sIe,memoized:RT});const Lr=BigInt(0),sr=BigInt(1),pd=BigInt(2),oIe=BigInt(3),PT=BigInt(4),NM=BigInt(5),xM=BigInt(8);function ti(t,e){const n=t%e;return n>=Lr?n:e+n}function Bz(t,e,n){if(e<Lr)throw new Error("invalid exponent, negatives unsupported");if(n<=Lr)throw new Error("invalid modulus");if(n===sr)return Lr;let r=sr;for(;e>Lr;)e&sr&&(r=r*t%n),t=t*t%n,e>>=sr;return r}function Mo(t,e,n){let r=t;for(;e-- >Lr;)r*=r,r%=n;return r}function OT(t,e){if(t===Lr)throw new Error("invert: expected non-zero number");if(e<=Lr)throw new Error("invert: expected positive modulus, got "+e);let n=ti(t,e),r=e,s=Lr,i=sr;for(;n!==Lr;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==sr)throw new Error("invert: does not exist");return ti(s,e)}function aIe(t){const e=(t-sr)/pd;let n,r,s;for(n=t-sr,r=0;n%pd===Lr;n/=pd,r++);for(s=pd;s<t&&Bz(s,e,t)!==t-sr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+sr)/PT;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+sr)/pd;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,sr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function cIe(t){if(t%PT===oIe){const e=(t+sr)/PT;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%xM===NM){const e=(t-NM)/xM;return function(n,r){const s=n.mul(r,pd),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,pd),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return aIe(t)}const lIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lIe.reduce((r,s)=>(r[s]="function",r),e);return Lg(t,n)}function dIe(t,e,n){if(n<Lr)throw new Error("invalid exponent, negatives unsupported");if(n===Lr)return t.ONE;if(n===sr)return e;let r=t.ONE,s=e;for(;n>Lr;)n&sr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=sr;return r}function hIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function jz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Fz(t,e,n=!1,r={}){if(t<=Lr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=jz(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:ck(s),ZERO:Lr,ONE:sr,create:c=>ti(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Lr<=c&&c<t},is0:c=>c===Lr,isOdd:c=>(c&sr)===sr,neg:c=>ti(-c,t),eql:(c,l)=>c===l,sqr:c=>ti(c*c,t),add:(c,l)=>ti(c+l,t),sub:(c,l)=>ti(c-l,t),mul:(c,l)=>ti(c*l,t),pow:(c,l)=>dIe(a,c,l),div:(c,l)=>ti(c*OT(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>OT(c,t),sqrt:r.sqrt||(c=>(o||(o=cIe(t)),o(a,c))),invertBatch:c=>hIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?l1(c,i):og(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?Yw(c):qd(c)}});return Object.freeze(a)}function Wz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function zz(t){const e=Wz(t);return e+Math.ceil(e/2)}function fIe(t,e,n=!1){const r=t.length,s=Wz(e),i=zz(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?Yw(t):qd(t),a=ti(o,e-sr)+sr;return n?l1(a,s):og(a,s)}const TM=BigInt(0),iv=BigInt(1);function zA(t,e){const n=e.negate();return t?n:e}function Hz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function HA(t,e){Hz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function pIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function gIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const qA=new WeakMap,qz=new WeakMap;function GA(t){return qz.get(t)||1}function mIe(t,e){return{constTimeNegate:zA,hasPrecomputes(n){return GA(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>TM;)r&iv&&(s=s.add(i)),i=i.double(),r>>=iv;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=HA(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=HA(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=iv);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(zA(y,r[g])):a=a.add(zA(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=HA(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===TM)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=iv),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=qA.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&qA.set(r,s(i))),i},wNAFCached(n,r,s){const i=GA(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=GA(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){Hz(r,e),qz.set(n,r),qA.delete(n)}}}function yIe(t,e,n,r){if(pIe(n,t),gIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=Lz(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function Gz(t){return uIe(t.Fp),Lg(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...jz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const ff=BigInt(0),VA=BigInt(1);function wIe(t){return Lg(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function bIe(t){const e=wIe(t),{P:n}=e,r=b=>ti(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>Bz(b,n-BigInt(2),n));function l(b,E,_){const C=r(b*(E-_));return E=r(E-C),_=r(_+C),[E,_]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,E){jc("u",b,ff,n),jc("scalar",E,ff,n);const _=E,C=b;let I=VA,A=ff,N=b,S=VA,D=ff,P;for(let q=BigInt(s-1);q>=ff;q--){const L=_>>q&VA;D^=L,P=l(D,I,N),I=P[0],N=P[1],P=l(D,A,S),A=P[0],S=P[1],D=L;const T=I+A,x=r(T*T),$=I-A,R=r($*$),k=x-R,j=N+S,H=N-S,X=r(H*T),se=r(j*$),ne=X+se,ae=X-se;N=r(ne*ne),S=r(C*r(ae*ae)),I=r(x*R),A=r(k*(x+r(u*k)))}P=l(D,I,N),I=P[0],N=P[1],P=l(D,A,S),A=P[0],S=P[1];const B=c(A);return r(I*B)}function h(b){return l1(r(b),i)}function f(b){const E=xi("u coordinate",b,i);return o===32&&(E[31]&=127),Yw(E)}function p(b){const E=xi("scalar",b),_=E.length;if(_!==i&&_!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+_)}return Yw(a(E))}function g(b,E){const _=f(E),C=p(b),I=d(_,C);if(I===ff)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,E)=>g(b,E),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const kT=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const vIe=BigInt(1),RM=BigInt(2),EIe=BigInt(3),_Ie=BigInt(5);BigInt(8);function CIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=kT,o=t*t%i*t%i,a=Mo(o,RM,i)*o%i,c=Mo(a,vIe,i)*t%i,l=Mo(c,_Ie,i)*c%i,u=Mo(l,e,i)*l%i,d=Mo(u,n,i)*u%i,h=Mo(d,r,i)*d%i,f=Mo(h,s,i)*h%i,p=Mo(f,s,i)*h%i,g=Mo(p,e,i)*l%i;return{pow_p_5_8:Mo(g,RM,i)*t%i,b2:o}}function SIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const DT=bIe({P:kT,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=kT,{pow_p_5_8:n,b2:r}=CIe(t);return ti(Mo(n,EIe,e)*r,e)},adjustScalarBytes:SIe,randomBytes:Mg});function PM(t){t.lowS!==void 0&&rg("lowS",t.lowS),t.prehash!==void 0&&rg("prehash",t.prehash)}function AIe(t){const e=Gz(t);Lg(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:IIe,hexToBytes:NIe}=iIe;class xIe extends Error{constructor(e=""){super(e)}}const Ic={Err:xIe,_tlv:{encode:(t,e)=>{const{Err:n}=Ic;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Zf(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Zf(s.length/2|128):"";return Zf(t)+i+s+e},decode(t,e){const{Err:n}=Ic;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Ic;if(t<Rc)throw new e("integer: negative integers are not allowed");let n=Zf(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Ic;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return IIe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Ic,s=typeof t=="string"?NIe(t):t;K0(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Ic,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Rc=BigInt(0),xr=BigInt(1);BigInt(2);const OM=BigInt(3);BigInt(4);function TIe(t){const e=AIe(t),{Fp:n}=e,r=Fz(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return Qw(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),E=n.mul(b,g);return n.add(n.add(E,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return u1(g,xr,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:E}=e;if(w&&typeof g!="bigint"){if(Eh(g)&&(g=sg(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let _;try{_=typeof g=="bigint"?g:qd(xi("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(_=ti(_,E)),jc("private key",_,xr,E),_}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=RT((g,w)=>{const{px:y,py:b,pz:E}=g;if(n.eql(E,n.ONE))return{x:y,y:b};const _=g.is0();w==null&&(w=_?n.ONE:n.inv(E));const C=n.mul(y,w),I=n.mul(b,w),A=n.mul(E,w);if(_)return{x:n.ZERO,y:n.ZERO};if(!n.eql(A,n.ONE))throw new Error("invZ was invalid");return{x:C,y:I}}),d=RT(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),E=o(w);if(!n.eql(b,E))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const E=_=>n.eql(_,n.ZERO);return E(y)&&E(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,E)=>b.toAffine(y[E])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(xi("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return yIe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:E}=this,{px:_,py:C,pz:I}=w,A=n.eql(n.mul(y,I),n.mul(_,E)),N=n.eql(n.mul(b,I),n.mul(C,E));return A&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,OM),{px:E,py:_,pz:C}=this;let I=n.ZERO,A=n.ZERO,N=n.ZERO,S=n.mul(E,E),D=n.mul(_,_),P=n.mul(C,C),B=n.mul(E,_);return B=n.add(B,B),N=n.mul(E,C),N=n.add(N,N),I=n.mul(w,N),A=n.mul(b,P),A=n.add(I,A),I=n.sub(D,A),A=n.add(D,A),A=n.mul(I,A),I=n.mul(B,I),N=n.mul(b,N),P=n.mul(w,P),B=n.sub(S,P),B=n.mul(w,B),B=n.add(B,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,B),A=n.add(A,S),P=n.mul(_,C),P=n.add(P,P),S=n.mul(P,B),I=n.sub(I,S),N=n.mul(P,D),N=n.add(N,N),N=n.add(N,N),new h(I,A,N)}add(w){l(w);const{px:y,py:b,pz:E}=this,{px:_,py:C,pz:I}=w;let A=n.ZERO,N=n.ZERO,S=n.ZERO;const D=e.a,P=n.mul(e.b,OM);let B=n.mul(y,_),q=n.mul(b,C),L=n.mul(E,I),T=n.add(y,b),x=n.add(_,C);T=n.mul(T,x),x=n.add(B,q),T=n.sub(T,x),x=n.add(y,E);let $=n.add(_,I);return x=n.mul(x,$),$=n.add(B,L),x=n.sub(x,$),$=n.add(b,E),A=n.add(C,I),$=n.mul($,A),A=n.add(q,L),$=n.sub($,A),S=n.mul(D,x),A=n.mul(P,L),S=n.add(A,S),A=n.sub(q,S),S=n.add(q,S),N=n.mul(A,S),q=n.add(B,B),q=n.add(q,B),L=n.mul(D,L),x=n.mul(P,x),q=n.add(q,L),L=n.sub(B,L),L=n.mul(D,L),x=n.add(x,L),B=n.mul(q,x),N=n.add(N,B),B=n.mul($,x),A=n.mul(T,A),A=n.sub(A,B),B=n.mul(T,q),S=n.mul($,S),S=n.add(S,B),new h(A,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;jc("scalar",w,Rc,b);const E=h.ZERO;if(w===Rc)return E;if(this.is0()||w===xr)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:_,k1:C,k2neg:I,k2:A}=y.splitScalar(w),N=E,S=E,D=this;for(;C>Rc||A>Rc;)C&xr&&(N=N.add(D)),A&xr&&(S=S.add(D)),D=D.double(),C>>=xr,A>>=xr;return _&&(N=N.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:y,n:b}=e;jc("scalar",w,xr,b);let E,_;if(y){const{k1neg:C,k1:I,k2neg:A,k2:N}=y.splitScalar(w);let{p:S,f:D}=this.wNAF(I),{p:P,f:B}=this.wNAF(N);S=p.constTimeNegate(C,S),P=p.constTimeNegate(A,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),E=S.add(P),_=D.add(B)}else{const{p:C,f:I}=this.wNAF(w);E=C,_=I}return h.normalizeZ([E,_])[0]}multiplyAndAddUnsafe(w,y,b){const E=h.BASE,_=(I,A)=>A===Rc||A===xr||!I.equals(E)?I.multiplyUnsafe(A):I.multiply(A),C=_(this,y).add(_(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===xr)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===xr?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return rg("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return rg("isCompressed",w),sg(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=mIe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function RIe(t){const e=Gz(t);return Lg(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function PIe(t){const e=RIe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(L){return ti(L,r)}function a(L){return OT(L,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=TIe({...e,toBytes(L,T,x){const $=T.toAffine(),R=n.toBytes($.x),k=Qw;return rg("isCompressed",x),x?k(Uint8Array.from([T.hasEvenY()?2:3]),R):k(Uint8Array.from([4]),R,n.toBytes($.y))},fromBytes(L){const T=L.length,x=L[0],$=L.subarray(1);if(T===s&&(x===2||x===3)){const R=qd($);if(!u1(R,xr,n.ORDER))throw new Error("Point is not on curve");const k=u(R);let j;try{j=n.sqrt(k)}catch(X){const se=X instanceof Error?": "+X.message:"";throw new Error("Point is not on curve"+se)}const H=(j&xr)===xr;return(x&1)===1!==H&&(j=n.neg(j)),{x:R,y:j}}else if(T===i&&x===4){const R=n.fromBytes($.subarray(0,n.BYTES)),k=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:R,y:k}}else{const R=s,k=i;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+k+", got "+T)}}}),h=L=>sg(og(L,e.nByteLength));function f(L){const T=r>>xr;return L>T}function p(L){return f(L)?o(-L):L}const g=(L,T,x)=>qd(L.slice(T,x));class w{constructor(T,x,$){this.r=T,this.s=x,this.recovery=$,this.assertValidity()}static fromCompact(T){const x=e.nByteLength;return T=xi("compactSignature",T,x*2),new w(g(T,0,x),g(T,x,2*x))}static fromDER(T){const{r:x,s:$}=Ic.toSig(xi("DER",T));return new w(x,$)}assertValidity(){jc("r",this.r,xr,r),jc("s",this.s,xr,r)}addRecoveryBit(T){return new w(this.r,this.s,T)}recoverPublicKey(T){const{r:x,s:$,recovery:R}=this,k=I(xi("msgHash",T));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const j=R===2||R===3?x+e.n:x;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const H=R&1?"03":"02",X=c.fromHex(H+h(j)),se=a(j),ne=o(-k*se),ae=o($*se),ye=c.BASE.multiplyAndAddUnsafe(X,ne,ae);if(!ye)throw new Error("point at infinify");return ye.assertValidity(),ye}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return ig(this.toDERHex())}toDERHex(){return Ic.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return ig(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(L){try{return l(L),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const L=zz(e.n);return fIe(e.randomBytes(L),e.n)},precompute(L=8,T=c.BASE){return T._setWindowSize(L),T.multiply(BigInt(3)),T}};function b(L,T=!0){return c.fromPrivateKey(L).toRawBytes(T)}function E(L){const T=Eh(L),x=typeof L=="string",$=(T||x)&&L.length;return T?$===s||$===i:x?$===2*s||$===2*i:L instanceof c}function _(L,T,x=!0){if(E(L))throw new Error("first arg must be private key");if(!E(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(L)).toRawBytes(x)}const C=e.bits2int||function(L){if(L.length>8192)throw new Error("input is too large");const T=qd(L),x=L.length*8-e.nBitLength;return x>0?T>>BigInt(x):T},I=e.bits2int_modN||function(L){return o(C(L))},A=ck(e.nBitLength);function N(L){return jc("num < 2^"+e.nBitLength,L,Rc,A),og(L,e.nByteLength)}function S(L,T,x=D){if(["recovered","canonical"].some(re=>re in x))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:R}=e;let{lowS:k,prehash:j,extraEntropy:H}=x;k==null&&(k=!0),L=xi("msgHash",L),PM(x),j&&(L=xi("prehashed msgHash",$(L)));const X=I(L),se=l(T),ne=[N(se),N(X)];if(H!=null&&H!==!1){const re=H===!0?R(n.BYTES):H;ne.push(xi("extraEntropy",re))}const ae=Qw(...ne),ye=X;function Z(re){const de=C(re);if(!d(de))return;const ee=a(de),he=c.BASE.multiply(de).toAffine(),Ie=o(he.x);if(Ie===Rc)return;const le=o(ee*o(ye+Ie*se));if(le===Rc)return;let me=(he.x===Ie?0:2)|Number(he.y&xr),ze=le;return k&&f(le)&&(ze=p(le),me^=1),new w(Ie,ze,me)}return{seed:ae,k2sig:Z}}const D={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function B(L,T,x=D){const{seed:$,k2sig:R}=S(L,T,x),k=e;return Uz(k.hash.outputLen,k.nByteLength,k.hmac)($,R)}c.BASE._setWindowSize(8);function q(L,T,x,$=P){var le;const R=L;T=xi("msgHash",T),x=xi("publicKey",x);const{lowS:k,prehash:j,format:H}=$;if(PM($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(H!==void 0&&H!=="compact"&&H!=="der")throw new Error("format must be compact or der");const X=typeof R=="string"||Eh(R),se=!X&&!H&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!X&&!se)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ne,ae;try{if(se&&(ne=new w(R.r,R.s)),X){try{H!=="compact"&&(ne=w.fromDER(R))}catch(me){if(!(me instanceof Ic.Err))throw me}!ne&&H!=="der"&&(ne=w.fromCompact(R))}ae=c.fromHex(x)}catch{return!1}if(!ne||k&&ne.hasHighS())return!1;j&&(T=e.hash(T));const{r:ye,s:Z}=ne,re=I(T),de=a(Z),ee=o(re*de),he=o(ye*de),Ie=(le=c.BASE.multiplyAndAddUnsafe(ae,ee,he))==null?void 0:le.toAffine();return Ie?o(Ie.x)===ye:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:_,sign:B,verify:q,ProjectivePoint:c,Signature:w,utils:y}}function OIe(t){return{hash:t,hmac:(e,...n)=>o1(t,e,MSe(...n)),randomBytes:Mg}}function kIe(t,e){const n=r=>PIe({...t,...OIe(r)});return{...n(e),create:n}}const Vz=Fz(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),DIe=Vz.create(BigInt("-3")),$Ie=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),MIe=kIe({a:DIe,b:$Ie,Fp:Vz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},V0),Kz="base10",Os="base16",Jo="base64pad",Ml="base64url",Y0="utf8",Yz=0,Fc=1,Q0=2,LIe=0,kM=1,Cy=12,lk=32;function UIe(){const t=DT.utils.randomPrivateKey(),e=DT.getPublicKey(t);return{privateKey:hi(t,Os),publicKey:hi(e,Os)}}function $T(){const t=Mg(lk);return hi(t,Os)}function BIe(t,e){const n=DT.getSharedSecret(fo(t,Os),fo(e,Os)),r=zAe(V0,n,void 0,void 0,lk);return hi(r,Os)}function Vv(t){const e=V0(fo(t,Os));return hi(e,Os)}function Oa(t){const e=V0(fo(t,Y0));return hi(e,Os)}function Qz(t){return fo(`${t}`,Kz)}function _h(t){return Number(hi(t,Kz))}function Zz(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Jz(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function jIe(t){const e=Qz(typeof t.type<"u"?t.type:Yz);if(_h(e)===Fc&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?fo(t.senderPublicKey,Os):void 0,r=typeof t.iv<"u"?fo(t.iv,Os):Mg(Cy),s=fo(t.symKey,Os),i=$z(s,r).encrypt(fo(t.message,Y0)),o=Xz({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Ml?Zz(o):o}function FIe(t){const e=fo(t.symKey,Os),{sealed:n,iv:r}=Zw({encoded:t.encoded,encoding:t.encoding}),s=$z(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return hi(s,Y0)}function WIe(t,e){const n=Qz(Q0),r=Mg(Cy),s=fo(t,Y0),i=Xz({type:n,sealed:s,iv:r});return e===Ml?Zz(i):i}function zIe(t,e){const{sealed:n}=Zw({encoded:t,encoding:e});return hi(n,Y0)}function Xz(t){if(_h(t.type)===Q0)return hi(vy([t.type,t.sealed]),Jo);if(_h(t.type)===Fc){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return hi(vy([t.type,t.senderPublicKey,t.iv,t.sealed]),Jo)}return hi(vy([t.type,t.iv,t.sealed]),Jo)}function Zw(t){const e=(t.encoding||Jo)===Ml?Jz(t.encoded):t.encoded,n=fo(e,Jo),r=n.slice(LIe,kM),s=kM;if(_h(r)===Fc){const c=s+lk,l=c+Cy,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(_h(r)===Q0){const c=n.slice(s),l=Mg(Cy);return{type:r,sealed:c,iv:l}}const i=s+Cy,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function HIe(t,e){const n=Zw({encoded:t,encoding:e==null?void 0:e.encoding});return eH({type:_h(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?hi(n.senderPublicKey,Os):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function eH(t){const e=(t==null?void 0:t.type)||Yz;if(e===Fc){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function DM(t){return t.type===Fc&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function $M(t){return t.type===Q0}function qIe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return vy([new Uint8Array([4]),e,n])}function GIe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(Jz(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=V0(c),u=qIe(e);if(!MIe.verify(vy([o,a]),l,u))throw new Error("Invalid signature");return hT(t).payload}const VIe="irn";function S_(t){return(t==null?void 0:t.relay)||{protocol:VIe}}function Hm(t){const e=Xbe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function KIe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function MM(t){if(!t.includes("wc:")){const l=_z(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:YIe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:KIe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function YIe(t){return t.startsWith("//")?t.substring(2):t}function QIe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function LM(t){const e=new URLSearchParams,n=QIe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function ov(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var ZIe=Object.defineProperty,JIe=Object.defineProperties,XIe=Object.getOwnPropertyDescriptors,UM=Object.getOwnPropertySymbols,eNe=Object.prototype.hasOwnProperty,tNe=Object.prototype.propertyIsEnumerable,BM=(t,e,n)=>e in t?ZIe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nNe=(t,e)=>{for(var n in e||(e={}))eNe.call(e,n)&&BM(t,n,e[n]);if(UM)for(var n of UM(e))tNe.call(e,n)&&BM(t,n,e[n]);return t},rNe=(t,e)=>JIe(t,XIe(e));function Ug(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function sNe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ug(n.accounts))}),e}function iNe(t,e){const n=[];return Object.values(t).forEach(r=>{Ug(r.accounts).includes(e)&&n.push(...r.methods)}),n}function oNe(t,e){const n=[];return Object.values(t).forEach(r=>{Ug(r.accounts).includes(e)&&n.push(...r.events)}),n}function d1(t){return t.includes(":")}function Jf(t){return d1(t)?t.split(":")[0]:t}function jM(t){var e,n,r;const s={};if(!_u(t))return s;for(const[i,o]of Object.entries(t)){const a=d1(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Jf(i);s[u]=rNe(nNe({},s[u]),{chains:Ga(a,(e=s[u])==null?void 0:e.chains),methods:Ga(c,(n=s[u])==null?void 0:n.methods),events:Ga(l,(r=s[u])==null?void 0:r.events)})}return s}function aNe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function FM(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=aNe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Ga(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function cNe(t,e){var n,r,s,i,o,a;const c=jM(t),l=jM(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Ga((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Ga((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Ga((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const lNe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},uNe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ee(t,e){const{message:n,code:r}=uNe[t];return{message:e?`${n} ${e}`:n,code:r}}function gn(t,e){const{message:n,code:r}=lNe[t];return{message:e?`${n} ${e}`:n,code:r}}function Eu(t,e){return!!Array.isArray(t)}function _u(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Kr(t){return typeof t>"u"}function cr(t,e){return e&&Kr(t)?!0:typeof t=="string"&&!!t.trim().length}function uk(t,e){return e&&Kr(t)?!0:typeof t=="number"&&!isNaN(t)}function dNe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Td(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Ug(a),d=n[o];(!Td(yz(o,d),u)||!Td(d.methods,c)||!Td(d.events,l))&&(i=!1)}),i):!1}function A_(t){return cr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function hNe(t){if(cr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&A_(n)}}return!1}function fNe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(cr(t,!1)){if(e(t))return!0;const n=_z(t);return e(n)}}catch{}return!1}function pNe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function gNe(t){return t==null?void 0:t.topic}function mNe(t,e){let n=null;return cr(t==null?void 0:t.publicKey,!1)||(n=Ee("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function WM(t){let e=!0;return Eu(t)?t.length&&(e=t.every(n=>cr(n,!1))):e=!1,e}function yNe(t,e,n){let r=null;return Eu(e)&&e.length?e.forEach(s=>{r||A_(s)||(r=gn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):A_(t)||(r=gn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function wNe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=yNe(s,yz(s,i),`${e} ${n}`);o&&(r=o)}),r}function bNe(t,e){let n=null;return Eu(t)?t.forEach(r=>{n||hNe(r)||(n=gn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=gn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function vNe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=bNe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function ENe(t,e){let n=null;return WM(t==null?void 0:t.methods)?WM(t==null?void 0:t.events)||(n=gn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=gn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function tH(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=ENe(r,`${e}, namespace`);s&&(n=s)}),n}function _Ne(t,e,n){let r=null;if(t&&_u(t)){const s=tH(t,e);s&&(r=s);const i=wNe(t,e,n);i&&(r=i)}else r=Ee("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function KA(t,e){let n=null;if(t&&_u(t)){const r=tH(t,e);r&&(n=r);const s=vNe(t,e);s&&(n=s)}else n=Ee("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function nH(t){return cr(t.protocol,!0)}function CNe(t,e){let n=!1;return t?t&&Eu(t)&&t.length&&t.forEach(r=>{n=nH(r)}):n=!0,n}function SNe(t){return typeof t=="number"}function Ys(t){return typeof t<"u"&&typeof t!==null}function ANe(t){return!(!t||typeof t!="object"||!t.code||!uk(t.code,!1)||!t.message||!cr(t.message,!1))}function INe(t){return!(Kr(t)||!cr(t.method,!1))}function NNe(t){return!(Kr(t)||Kr(t.result)&&Kr(t.error)||!uk(t.id,!1)||!cr(t.jsonrpc,!1))}function xNe(t){return!(Kr(t)||!cr(t.name,!1))}function zM(t,e){return!(!A_(e)||!sNe(t).includes(e))}function TNe(t,e,n){return cr(n,!1)?iNe(t,e).includes(n):!1}function RNe(t,e,n){return cr(n,!1)?oNe(t,e).includes(n):!1}function HM(t,e,n){let r=null;const s=PNe(t),i=ONe(e),o=Object.keys(s),a=Object.keys(i),c=qM(Object.keys(t)),l=qM(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Td(o,a)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Ug(e[d].accounts);h.includes(d)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Td(s[d].methods,i[d].methods)?Td(s[d].events,i[d].events)||(r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Ee("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function PNe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function qM(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function ONe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Ug(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function kNe(t,e){return uk(t,!1)&&t<=e.max&&t>=e.min}function GM(){const t=q0();return new Promise(e=>{switch(t){case ki.browser:e(DNe());break;case ki.reactNative:e($Ne());break;case ki.node:e(MNe());break;default:e(!0)}})}function DNe(){return $g()&&(navigator==null?void 0:navigator.onLine)}async function $Ne(){if(zu()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function MNe(){return!0}function LNe(t){switch(q0()){case ki.browser:UNe(t);break;case ki.reactNative:BNe(t);break}}function UNe(t){!zu()&&$g()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function BNe(t){zu()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function jNe(){var t;return $g()&&gh()?((t=gh())==null?void 0:t.visibilityState)==="visible":!0}const YA={};class Sm{static get(e){return YA[e]}static set(e,n){YA[e]=n}static delete(e){delete YA[e]}}var FNe={};const rH="wc",sH=2,MT="core",ec=`${rH}@2:${MT}:`,WNe={logger:"error"},zNe={database:":memory:"},HNe="crypto",VM="client_ed25519_seed",qNe=be.ONE_DAY,GNe="keychain",VNe="0.3",KNe="messages",YNe="0.3",KM=be.SIX_HOURS,QNe="publisher",iH="irn",ZNe="error",oH="wss://relay.walletconnect.org",JNe="relayer",kr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},XNe="_subscription",Zi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},exe=.1,LT="2.21.0",kn={link_mode:"link_mode",relay:"relay"},Kv={inbound:"inbound",outbound:"outbound"},txe="0.3",nxe="WALLETCONNECT_CLIENT_ID",YM="WALLETCONNECT_LINK_MODE_APPS",Ii={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},rxe="subscription",sxe="0.3",ixe="pairing",oxe="0.3",Am={wc_pairingDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:be.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:be.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:be.ONE_DAY,prompt:!1,tag:0},res:{ttl:be.ONE_DAY,prompt:!1,tag:0}}},gd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Oo={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},axe="history",cxe="0.3",lxe="expirer",ro={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},uxe="0.3",dxe="verify-api",hxe="https://verify.walletconnect.com",aH="https://verify.walletconnect.org",Sy=aH,fxe=`${Sy}/v3`,pxe=[hxe,aH],gxe="echo",mxe="https://echo.walletconnect.com",_a={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},_c={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},ko={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Ju={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Xu={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Im={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},yxe=.1,wxe="event-client",bxe=86400,vxe="https://pulse.walletconnect.org/batch";function Exe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var E=(b-y)*u+1>>>0,_=new Uint8Array(E);y!==b;){for(var C=p[y],I=0,A=E-1;(C!==0||I<w)&&A!==-1;A--,I++)C+=256*_[A]>>>0,_[A]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=E-w;N!==E&&_[N]===0;)N++;for(var S=c.repeat(g);N<E;++N)S+=t.charAt(_[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,E=new Uint8Array(b);p[g];){var _=n[p.charCodeAt(g)];if(_===255)return;for(var C=0,I=b-1;(_!==0||C<y)&&I!==-1;I--,C++)_+=a*E[I]>>>0,E[I]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var A=b-y;A!==b&&E[A]===0;)A++;for(var N=new Uint8Array(w+(b-A)),S=w;A!==b;)N[S++]=E[A++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var _xe=Exe,Cxe=_xe;const cH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Sxe=t=>new TextEncoder().encode(t),Axe=t=>new TextDecoder().decode(t);class Ixe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Nxe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return lH(this,e)}}class xxe{constructor(e){this.decoders=e}or(e){return lH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const lH=(t,e)=>new xxe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Txe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Ixe(e,n,r),this.decoder=new Nxe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const h1=({name:t,prefix:e,encode:n,decode:r})=>new Txe(t,e,n,r),Z0=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=Cxe(n,e);return h1({prefix:t,name:e,encode:r,decode:i=>cH(s(i))})},Rxe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},Pxe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},rs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>h1({prefix:e,name:t,encode(s){return Pxe(s,r,n)},decode(s){return Rxe(s,r,n,t)}}),Oxe=h1({prefix:"\0",name:"identity",encode:t=>Axe(t),decode:t=>Sxe(t)});var kxe=Object.freeze({__proto__:null,identity:Oxe});const Dxe=rs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $xe=Object.freeze({__proto__:null,base2:Dxe});const Mxe=rs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Lxe=Object.freeze({__proto__:null,base8:Mxe});const Uxe=Z0({prefix:"9",name:"base10",alphabet:"0123456789"});var Bxe=Object.freeze({__proto__:null,base10:Uxe});const jxe=rs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fxe=rs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Wxe=Object.freeze({__proto__:null,base16:jxe,base16upper:Fxe});const zxe=rs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Hxe=rs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),qxe=rs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Gxe=rs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Vxe=rs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Kxe=rs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yxe=rs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Qxe=rs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Zxe=rs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Jxe=Object.freeze({__proto__:null,base32:zxe,base32upper:Hxe,base32pad:qxe,base32padupper:Gxe,base32hex:Vxe,base32hexupper:Kxe,base32hexpad:Yxe,base32hexpadupper:Qxe,base32z:Zxe});const Xxe=Z0({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),eTe=Z0({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var tTe=Object.freeze({__proto__:null,base36:Xxe,base36upper:eTe});const nTe=Z0({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),rTe=Z0({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var sTe=Object.freeze({__proto__:null,base58btc:nTe,base58flickr:rTe});const iTe=rs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),oTe=rs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),aTe=rs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cTe=rs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lTe=Object.freeze({__proto__:null,base64:iTe,base64pad:oTe,base64url:aTe,base64urlpad:cTe});const uH=Array.from(""),uTe=uH.reduce((t,e,n)=>(t[n]=e,t),[]),dTe=uH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function hTe(t){return t.reduce((e,n)=>(e+=uTe[n],e),"")}function fTe(t){const e=[];for(const n of t){const r=dTe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const pTe=h1({prefix:"",name:"base256emoji",encode:hTe,decode:fTe});var gTe=Object.freeze({__proto__:null,base256emoji:pTe}),mTe=dH,QM=128,yTe=-128,wTe=Math.pow(2,31);function dH(t,e,n){e=e||[],n=n||0;for(var r=n;t>=wTe;)e[n++]=t&255|QM,t/=128;for(;t&yTe;)e[n++]=t&255|QM,t>>>=7;return e[n]=t|0,dH.bytes=n-r+1,e}var bTe=UT,vTe=128,ZM=127;function UT(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw UT.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&ZM)<<s:(o&ZM)*Math.pow(2,s),s+=7}while(o>=vTe);return UT.bytes=i-r,n}var ETe=Math.pow(2,7),_Te=Math.pow(2,14),CTe=Math.pow(2,21),STe=Math.pow(2,28),ATe=Math.pow(2,35),ITe=Math.pow(2,42),NTe=Math.pow(2,49),xTe=Math.pow(2,56),TTe=Math.pow(2,63),RTe=function(t){return t<ETe?1:t<_Te?2:t<CTe?3:t<STe?4:t<ATe?5:t<ITe?6:t<NTe?7:t<xTe?8:t<TTe?9:10},PTe={encode:mTe,decode:bTe,encodingLength:RTe},hH=PTe;const JM=(t,e,n=0)=>(hH.encode(t,e,n),e),XM=t=>hH.encodingLength(t),BT=(t,e)=>{const n=e.byteLength,r=XM(t),s=r+XM(n),i=new Uint8Array(s+n);return JM(t,i,0),JM(n,i,r),i.set(e,s),new OTe(t,n,e,i)};class OTe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const fH=({name:t,code:e,encode:n})=>new kTe(t,e,n);class kTe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?BT(this.code,n):n.then(r=>BT(this.code,r))}else throw Error("Unknown type, must be binary type")}}const pH=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),DTe=fH({name:"sha2-256",code:18,encode:pH("SHA-256")}),$Te=fH({name:"sha2-512",code:19,encode:pH("SHA-512")});var MTe=Object.freeze({__proto__:null,sha256:DTe,sha512:$Te});const gH=0,LTe="identity",mH=cH,UTe=t=>BT(gH,mH(t)),BTe={code:gH,name:LTe,encode:mH,digest:UTe};var jTe=Object.freeze({__proto__:null,identity:BTe});new TextEncoder,new TextDecoder;const eL={...kxe,...$xe,...Lxe,...Bxe,...Wxe,...Jxe,...tTe,...sTe,...lTe,...gTe};({...MTe,...jTe});function FTe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function yH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const tL=yH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),QA=yH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=FTe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),WTe={utf8:tL,"utf-8":tL,hex:eL.base16,latin1:QA,ascii:QA,binary:QA,...eL};function zTe(t,e="utf8"){const n=WTe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var HTe=Object.defineProperty,qTe=(t,e,n)=>e in t?HTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wa=(t,e,n)=>qTe(t,typeof e!="symbol"?e+"":e,n);class GTe{constructor(e,n){this.core=e,this.logger=n,wa(this,"keychain",new Map),wa(this,"name",GNe),wa(this,"version",VNe),wa(this,"initialized",!1),wa(this,"storagePrefix",ec),wa(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),wa(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),wa(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),wa(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Ee("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),wa(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=es(n,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,ST(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?AT(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var VTe=Object.defineProperty,KTe=(t,e,n)=>e in t?VTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wr=(t,e,n)=>KTe(t,typeof e!="symbol"?e+"":e,n);class YTe{constructor(e,n,r){this.core=e,this.logger=n,Wr(this,"name",HNe),Wr(this,"keychain"),Wr(this,"randomSessionIdentifier",$T()),Wr(this,"initialized",!1),Wr(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Wr(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Wr(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=p5(s);return $W(i.publicKey)}),Wr(this,"generateKeyPair",()=>{this.isInitialized();const s=UIe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Wr(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=p5(i),a=this.randomSessionIdentifier;return await T0e(a,s,qNe,o)}),Wr(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=BIe(a,i);return this.setSymKey(c,o)}),Wr(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||Vv(s);return await this.keychain.set(o,s),o}),Wr(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Wr(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Wr(this,"encode",async(s,i,o)=>{this.isInitialized();const a=eH(o),c=Jc(i);if($M(a))return WIe(c,o==null?void 0:o.encoding);if(DM(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return jIe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Wr(this,"decode",async(s,i,o)=>{this.isInitialized();const a=HIe(i,o);if($M(a)){const c=zIe(i,o==null?void 0:o.encoding);return ph(c)}if(DM(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=FIe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return ph(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Wr(this,"getPayloadType",(s,i=Jo)=>{const o=Zw({encoded:s,encoding:i});return _h(o.type)}),Wr(this,"getPayloadSenderPublicKey",(s,i=Jo)=>{const o=Zw({encoded:s,encoding:i});return o.senderPublicKey?hi(o.senderPublicKey,Os):void 0}),this.core=e,this.logger=es(n,this.name),this.keychain=r||new GTe(this.core,this.logger)}get context(){return mi(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(VM)}catch{e=$T(),await this.keychain.set(VM,e)}return zTe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var QTe=Object.defineProperty,ZTe=Object.defineProperties,JTe=Object.getOwnPropertyDescriptors,nL=Object.getOwnPropertySymbols,XTe=Object.prototype.hasOwnProperty,eRe=Object.prototype.propertyIsEnumerable,jT=(t,e,n)=>e in t?QTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tRe=(t,e)=>{for(var n in e||(e={}))XTe.call(e,n)&&jT(t,n,e[n]);if(nL)for(var n of nL(e))eRe.call(e,n)&&jT(t,n,e[n]);return t},nRe=(t,e)=>ZTe(t,JTe(e)),bi=(t,e,n)=>jT(t,typeof e!="symbol"?e+"":e,n);class rRe extends XCe{constructor(e,n){super(e,n),this.logger=e,this.core=n,bi(this,"messages",new Map),bi(this,"messagesWithoutClientAck",new Map),bi(this,"name",KNe),bi(this,"version",YNe),bi(this,"initialized",!1),bi(this,"storagePrefix",ec),bi(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),bi(this,"set",async(r,s,i)=>{this.isInitialized();const o=Oa(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===Kv.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,nRe(tRe({},c),{[o]:s}))}return await this.persist(),o}),bi(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),bi(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),bi(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Oa(s);return typeof i[o]<"u"}),bi(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Oa(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),bi(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=es(e,this.name),this.core=n}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,ST(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,ST(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?AT(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?AT(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var sRe=Object.defineProperty,iRe=Object.defineProperties,oRe=Object.getOwnPropertyDescriptors,rL=Object.getOwnPropertySymbols,aRe=Object.prototype.hasOwnProperty,cRe=Object.prototype.propertyIsEnumerable,FT=(t,e,n)=>e in t?sRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,av=(t,e)=>{for(var n in e||(e={}))aRe.call(e,n)&&FT(t,n,e[n]);if(rL)for(var n of rL(e))cRe.call(e,n)&&FT(t,n,e[n]);return t},ZA=(t,e)=>iRe(t,oRe(e)),Do=(t,e,n)=>FT(t,typeof e!="symbol"?e+"":e,n);class lRe extends e1e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Do(this,"events",new Ao.EventEmitter),Do(this,"name",QNe),Do(this,"queue",new Map),Do(this,"publishTimeout",be.toMiliseconds(be.ONE_MINUTE)),Do(this,"initialPublishTimeout",be.toMiliseconds(be.ONE_SECOND*15)),Do(this,"needsTransportRestart",!1),Do(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||KM,c=S_(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||xd().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(kr.publish,w),g(h))};this.relayer.events.on(kr.publish,w);const y=Xl(new Promise((b,E)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(_=>{this.logger.warn(_,_==null?void 0:_.message),E(_)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(kr.publish,w)}catch(b){this.queue.set(d,ZA(av({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Xl(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Do(this,"on",(r,s)=>{this.events.on(r,s)}),Do(this,"once",(r,s)=>{this.events.once(r,s)}),Do(this,"off",(r,s)=>{this.events.off(r,s)}),Do(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=es(n,this.name),this.registerEventListeners()}get context(){return mi(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=KM,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Hm(S_().protocol).publish,params:av({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Kr((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Kr((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(kr.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,ZA(av({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(ZA(av({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Bh.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(kr.connection_stalled);return}this.checkQueue()}),this.relayer.on(kr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var uRe=Object.defineProperty,dRe=(t,e,n)=>e in t?uRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pf=(t,e,n)=>dRe(t,typeof e!="symbol"?e+"":e,n);class hRe{constructor(){pf(this,"map",new Map),pf(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),pf(this,"get",e=>this.map.get(e)||[]),pf(this,"exists",(e,n)=>this.get(e).includes(n)),pf(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),pf(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var fRe=Object.defineProperty,pRe=Object.defineProperties,gRe=Object.getOwnPropertyDescriptors,sL=Object.getOwnPropertySymbols,mRe=Object.prototype.hasOwnProperty,yRe=Object.prototype.propertyIsEnumerable,WT=(t,e,n)=>e in t?fRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nm=(t,e)=>{for(var n in e||(e={}))mRe.call(e,n)&&WT(t,n,e[n]);if(sL)for(var n of sL(e))yRe.call(e,n)&&WT(t,n,e[n]);return t},JA=(t,e)=>pRe(t,gRe(e)),bn=(t,e,n)=>WT(t,typeof e!="symbol"?e+"":e,n);class wRe extends r1e{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,bn(this,"subscriptions",new Map),bn(this,"topicMap",new hRe),bn(this,"events",new Ao.EventEmitter),bn(this,"name",rxe),bn(this,"version",sxe),bn(this,"pending",new Map),bn(this,"cached",[]),bn(this,"initialized",!1),bn(this,"storagePrefix",ec),bn(this,"subscribeTimeout",be.toMiliseconds(be.ONE_MINUTE)),bn(this,"initialSubscribeTimeout",be.toMiliseconds(be.ONE_SECOND*15)),bn(this,"clientId"),bn(this,"batchSubscribeTopicsLimit",500),bn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),bn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=S_(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),bn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),bn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),bn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),bn(this,"on",(r,s)=>{this.events.on(r,s)}),bn(this,"once",(r,s)=>{this.events.once(r,s)}),bn(this,"off",(r,s)=>{this.events.off(r,s)}),bn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),bn(this,"start",async()=>{await this.onConnect()}),bn(this,"stop",async()=>{await this.onDisconnect()}),bn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),bn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),bn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Bh.pulse,async()=>{await this.checkPending()}),this.events.on(Ii.created,async r=>{const s=Ii.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ii.deleted,async r=>{const s=Ii.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=es(n,this.name),this.clientId=""}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=S_(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=gn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===kn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Hm(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===kn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},be.toMiliseconds(be.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ii.created,d),u(h.id))};this.events.on(Ii.created,d);try{const h=await Xl(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ii.created,d),u(h)}catch{}}),l=await Xl(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kr.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Hm(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Xl(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(kr.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Hm(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Xl(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(kr.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Hm(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,JA(Nm({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Nm({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Nm({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ii.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ii.deleted,JA(Nm({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ii.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ii.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>JA(Nm({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await ASe(be.toMiliseconds(be.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Oa(e+await this.getClientId())}}var bRe=Object.defineProperty,iL=Object.getOwnPropertySymbols,vRe=Object.prototype.hasOwnProperty,ERe=Object.prototype.propertyIsEnumerable,zT=(t,e,n)=>e in t?bRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oL=(t,e)=>{for(var n in e||(e={}))vRe.call(e,n)&&zT(t,n,e[n]);if(iL)for(var n of iL(e))ERe.call(e,n)&&zT(t,n,e[n]);return t},Ht=(t,e,n)=>zT(t,typeof e!="symbol"?e+"":e,n);class _Re extends t1e{constructor(e){super(e),Ht(this,"protocol","wc"),Ht(this,"version",2),Ht(this,"core"),Ht(this,"logger"),Ht(this,"events",new Ao.EventEmitter),Ht(this,"provider"),Ht(this,"messages"),Ht(this,"subscriber"),Ht(this,"publisher"),Ht(this,"name",JNe),Ht(this,"transportExplicitlyClosed",!1),Ht(this,"initialized",!1),Ht(this,"connectionAttemptInProgress",!1),Ht(this,"relayUrl"),Ht(this,"projectId"),Ht(this,"packageName"),Ht(this,"bundleId"),Ht(this,"hasExperiencedNetworkDisruption",!1),Ht(this,"pingTimeout"),Ht(this,"heartBeatTimeout",be.toMiliseconds(be.THIRTY_SECONDS+be.FIVE_SECONDS)),Ht(this,"reconnectTimeout"),Ht(this,"connectPromise"),Ht(this,"reconnectInProgress",!1),Ht(this,"requestsInFlight",[]),Ht(this,"connectTimeout",be.toMiliseconds(be.ONE_SECOND*15)),Ht(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||xd().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),Ht(this,"resetPingTimeout",()=>{__()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),Ht(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Ht(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(kr.connect)}),Ht(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Ht(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(kr.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Ht(this,"registerProviderListeners",()=>{this.provider.on(Zi.payload,this.onPayloadHandler),this.provider.on(Zi.connect,this.onConnectHandler),this.provider.on(Zi.disconnect,this.onDisconnectHandler),this.provider.on(Zi.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?es(e.logger,this.name):j0(Fh({level:e.logger||ZNe})),this.messages=new rRe(this.logger,e.core),this.subscriber=new wRe(this,this.logger),this.publisher=new lRe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||oH,this.projectId=e.projectId,lSe()?this.packageName=sM():uSe()&&(this.bundleId=sM()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return mi(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:kn.relay},Kv.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ii.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ii.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,oL({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Xl(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await GM())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=pr(be.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(kr.message,e),await this.recordMessageEvent(e,Kv.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zi.disconnect,i),await Xl(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Zi.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Zi.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Zi.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,be.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(__())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Io(new Fve(gSe({sdkVersion:LT,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),tk(e)){if(!e.method.endsWith(XNe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:kn.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(oL({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else n1(e)&&this.events.emit(kr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Kv.inbound),this.events.emit(kr.message,e))}async acknowledgePayload(e){const n=e1(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Zi.payload,this.onPayloadHandler),this.provider.off(Zi.connect,this.onConnectHandler),this.provider.off(Zi.disconnect,this.onDisconnectHandler),this.provider.off(Zi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await GM();LNe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Bh.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&jNe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(kr.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},be.toMiliseconds(exe)))))}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function CRe(){}function aL(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function cL(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function lL(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const SRe="[object RegExp]",ARe="[object String]",IRe="[object Number]",NRe="[object Boolean]",uL="[object Arguments]",xRe="[object Symbol]",TRe="[object Date]",RRe="[object Map]",PRe="[object Set]",ORe="[object Array]",kRe="[object Function]",DRe="[object ArrayBuffer]",XA="[object Object]",$Re="[object Error]",MRe="[object DataView]",LRe="[object Uint8Array]",URe="[object Uint8ClampedArray]",BRe="[object Uint16Array]",jRe="[object Uint32Array]",FRe="[object BigUint64Array]",WRe="[object Int8Array]",zRe="[object Int16Array]",HRe="[object Int32Array]",qRe="[object BigInt64Array]",GRe="[object Float32Array]",VRe="[object Float64Array]";function KRe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function YRe(t,e,n){return qm(t,e,void 0,void 0,void 0,void 0,n)}function qm(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Ay(t,e,i,o)}return Ay(t,e,i,o)}function Ay(t,e,n,r){if(Object.is(t,e))return!0;let s=lL(t),i=lL(e);if(s===uL&&(s=XA),i===uL&&(i=XA),s!==i)return!1;switch(s){case ARe:return t.toString()===e.toString();case IRe:{const c=t.valueOf(),l=e.valueOf();return KRe(c,l)}case NRe:case TRe:case xRe:return Object.is(t.valueOf(),e.valueOf());case SRe:return t.source===e.source&&t.flags===e.flags;case kRe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case RRe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!qm(l,e.get(c),c,t,e,n,r))return!1;return!0}case PRe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>qm(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case ORe:case LRe:case URe:case BRe:case jRe:case FRe:case WRe:case zRe:case HRe:case qRe:case GRe:case VRe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!qm(t[c],e[c],c,t,e,n,r))return!1;return!0}case DRe:return t.byteLength!==e.byteLength?!1:Ay(new Uint8Array(t),new Uint8Array(e),n,r);case MRe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Ay(new Uint8Array(t),new Uint8Array(e),n,r);case $Re:return t.name===e.name&&t.message===e.message;case XA:{if(!(Ay(t.constructor,e.constructor,n,r)||aL(t)&&aL(e)))return!1;const c=[...Object.keys(t),...cL(t)],l=[...Object.keys(e),...cL(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!qm(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function QRe(t,e){return YRe(t,e,CRe)}var ZRe=Object.defineProperty,dL=Object.getOwnPropertySymbols,JRe=Object.prototype.hasOwnProperty,XRe=Object.prototype.propertyIsEnumerable,HT=(t,e,n)=>e in t?ZRe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hL=(t,e)=>{for(var n in e||(e={}))JRe.call(e,n)&&HT(t,n,e[n]);if(dL)for(var n of dL(e))XRe.call(e,n)&&HT(t,n,e[n]);return t},Hs=(t,e,n)=>HT(t,typeof e!="symbol"?e+"":e,n);class zh extends n1e{constructor(e,n,r,s=ec,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Hs(this,"map",new Map),Hs(this,"version",txe),Hs(this,"cached",[]),Hs(this,"initialized",!1),Hs(this,"getKey"),Hs(this,"storagePrefix",ec),Hs(this,"recentlyDeleted",[]),Hs(this,"recentlyDeletedLimit",200),Hs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Kr(o)?this.map.set(this.getKey(o),o):pNe(o)?this.map.set(o.id,o):gNe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Hs(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Hs(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Hs(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>QRe(a[c],o[c]))):this.values)),Hs(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=hL(hL({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Hs(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=es(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ePe=Object.defineProperty,tPe=(t,e,n)=>e in t?ePe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ot=(t,e,n)=>tPe(t,typeof e!="symbol"?e+"":e,n);class nPe{constructor(e,n){this.core=e,this.logger=n,Ot(this,"name",ixe),Ot(this,"version",oxe),Ot(this,"events",new zO),Ot(this,"pairings"),Ot(this,"initialized",!1),Ot(this,"storagePrefix",ec),Ot(this,"ignoredPayloadTypes",[Fc]),Ot(this,"registeredMethods",[]),Ot(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Ot(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Ot(this,"create",async r=>{this.isInitialized();const s=$T(),i=await this.core.crypto.setSymKey(s),o=pr(be.FIVE_MINUTES),a={protocol:iH},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=LM({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(gd.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),Ot(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[_a.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=MM(r.uri);s.props.properties.topic=i,s.addTrace(_a.pairing_uri_validation_success),s.addTrace(_a.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(_a.existing_pairing),u.active)throw s.setError(_c.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(_a.pairing_not_expired)}const d=c||pr(be.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(_a.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(gd.create,h),s.addTrace(_a.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(_a.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(_c.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(_c.subscribe_pairing_topic_failure),f}return s.addTrace(_a.subscribe_pairing_topic_success),h}),Ot(this,"activate",async({topic:r})=>{this.isInitialized();const s=pr(be.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),Ot(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=cd();this.events.once(tn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),Ot(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),Ot(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),Ot(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Ot(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",gn("USER_DISCONNECTED")),await this.deletePairing(s))}),Ot(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return LM({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),Ot(this,"sendRequest",async(r,s,i)=>{const o=Jl(s,i),a=await this.core.crypto.encode(r,o),c=Am[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),Ot(this,"sendResult",async(r,s,i)=>{const o=e1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Am[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ot(this,"sendError",async(r,s,i)=>{const o=t1(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Am[c]?Am[c].res:Am.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),Ot(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,gn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),Ot(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Pl(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),Ot(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),Ot(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),Ot(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(gd.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ot(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{Aa(s)?this.events.emit(tn("pairing_ping",i),{}):oo(s)&&this.events.emit(tn("pairing_ping",i),{error:s.error})},500)}),Ot(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(gd.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Ot(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=gn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),Ot(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(gn("WC_METHOD_UNSUPPORTED",r))}),Ot(this,"isValidPair",(r,s)=>{var i;if(!Ys(r)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(_c.malformed_pairing_uri),new Error(a)}if(!fNe(r.uri)){const{message:a}=Ee("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(_c.malformed_pairing_uri),new Error(a)}const o=MM(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(_c.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Ee("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(_c.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&be.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(_c.pairing_expired);const{message:a}=Ee("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),Ot(this,"isValidPing",async r=>{if(!Ys(r)){const{message:i}=Ee("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ot(this,"isValidDisconnect",async r=>{if(!Ys(r)){const{message:i}=Ee("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),Ot(this,"isValidPairingTopic",async r=>{if(!cr(r,!1)){const{message:s}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Pl(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Ee("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=es(n,this.name),this.pairings=new zh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return mi(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kr.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==kn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);tk(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):n1(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(ro.expired,async e=>{const{topic:n}=Ez(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(gd.expire,{topic:n}))})}}var rPe=Object.defineProperty,sPe=(t,e,n)=>e in t?rPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zr=(t,e,n)=>sPe(t,typeof e!="symbol"?e+"":e,n);class iPe extends JCe{constructor(e,n){super(e,n),this.core=e,this.logger=n,zr(this,"records",new Map),zr(this,"events",new Ao.EventEmitter),zr(this,"name",axe),zr(this,"version",cxe),zr(this,"cached",[]),zr(this,"initialized",!1),zr(this,"storagePrefix",ec),zr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),zr(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:pr(be.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Oo.created,o)}),zr(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=oo(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Oo.updated,s))}),zr(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),zr(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Oo.deleted,i)}}),this.persist()}),zr(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),zr(this,"on",(r,s)=>{this.events.on(r,s)}),zr(this,"once",(r,s)=>{this.events.once(r,s)}),zr(this,"off",(r,s)=>{this.events.off(r,s)}),zr(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=es(n,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Jl(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Oo.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Oo.created,e=>{const n=Oo.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Oo.updated,e=>{const n=Oo.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Oo.deleted,e=>{const n=Oo.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Bh.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{be.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Oo.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var oPe=Object.defineProperty,aPe=(t,e,n)=>e in t?oPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,us=(t,e,n)=>aPe(t,typeof e!="symbol"?e+"":e,n);class cPe extends s1e{constructor(e,n){super(e,n),this.core=e,this.logger=n,us(this,"expirations",new Map),us(this,"events",new Ao.EventEmitter),us(this,"name",lxe),us(this,"version",uxe),us(this,"cached",[]),us(this,"initialized",!1),us(this,"storagePrefix",ec),us(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),us(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),us(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(ro.created,{target:i,expiration:o})}),us(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),us(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(ro.deleted,{target:s,expiration:i})}}),us(this,"on",(r,s)=>{this.events.on(r,s)}),us(this,"once",(r,s)=>{this.events.once(r,s)}),us(this,"off",(r,s)=>{this.events.off(r,s)}),us(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=es(n,this.name)}get context(){return mi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return mSe(e);if(typeof e=="number")return ySe(e);const{message:n}=Ee("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(ro.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ee("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;be.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(ro.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Bh.pulse,()=>this.checkExpirations()),this.events.on(ro.created,e=>{const n=ro.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ro.expired,e=>{const n=ro.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(ro.deleted,e=>{const n=ro.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}}var lPe=Object.defineProperty,uPe=(t,e,n)=>e in t?lPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ar=(t,e,n)=>uPe(t,typeof e!="symbol"?e+"":e,n);class dPe extends i1e{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,ar(this,"name",dxe),ar(this,"abortController"),ar(this,"isDevEnv"),ar(this,"verifyUrlV3",fxe),ar(this,"storagePrefix",ec),ar(this,"version",sH),ar(this,"publicKey"),ar(this,"fetchPromise"),ar(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&be.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),ar(this,"register",async s=>{if(!$g()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=gh(),u=this.startAbortTimer(be.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(hT(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),ar(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(hT(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),ar(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(be.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),ar(this,"getVerifyUrl",s=>{let i=s||Sy;return pxe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Sy}`),i=Sy),i}),ar(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(be.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),ar(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),ar(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),ar(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),ar(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),ar(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),ar(this,"validateAttestation",(s,i)=>{const o=GIe(s,i.publicKey),a={hasExpired:be.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=es(n,this.name),this.abortController=new AbortController,this.isDevEnv=rk(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return mi(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),be.toMiliseconds(e))}}var hPe=Object.defineProperty,fPe=(t,e,n)=>e in t?hPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fL=(t,e,n)=>fPe(t,typeof e!="symbol"?e+"":e,n);class pPe extends o1e{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,fL(this,"context",gxe),fL(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${mxe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=es(n,this.context)}}var gPe=Object.defineProperty,pL=Object.getOwnPropertySymbols,mPe=Object.prototype.hasOwnProperty,yPe=Object.prototype.propertyIsEnumerable,qT=(t,e,n)=>e in t?gPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xm=(t,e)=>{for(var n in e||(e={}))mPe.call(e,n)&&qT(t,n,e[n]);if(pL)for(var n of pL(e))yPe.call(e,n)&&qT(t,n,e[n]);return t},Ar=(t,e,n)=>qT(t,typeof e!="symbol"?e+"":e,n);class wPe extends a1e{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,Ar(this,"context",wxe),Ar(this,"storagePrefix",ec),Ar(this,"storageVersion",yxe),Ar(this,"events",new Map),Ar(this,"shouldPersist",!1),Ar(this,"init",async()=>{if(!rk())try{const s={eventId:oM(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:bz(this.core.relayer.protocol,this.core.relayer.version,LT)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),Ar(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=oM(),u=this.core.projectId||"",d=Date.now(),h=xm({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),Ar(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return xm(xm({},a),this.setMethods(a.eventId))}),Ar(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),Ar(this,"setEventListeners",()=>{this.core.heartbeat.on(Bh.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{be.fromMiliseconds(Date.now())-be.fromMiliseconds(s.timestamp)>bxe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),Ar(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),Ar(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),Ar(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Ar(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,xm(xm({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),Ar(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),Ar(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${vxe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${LT}${i}`,{method:"POST",body:JSON.stringify(s)})}),Ar(this,"getAppDomain",()=>wz().url),this.logger=es(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var bPe=Object.defineProperty,gL=Object.getOwnPropertySymbols,vPe=Object.prototype.hasOwnProperty,EPe=Object.prototype.propertyIsEnumerable,GT=(t,e,n)=>e in t?bPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mL=(t,e)=>{for(var n in e||(e={}))vPe.call(e,n)&&GT(t,n,e[n]);if(gL)for(var n of gL(e))EPe.call(e,n)&&GT(t,n,e[n]);return t},Sn=(t,e,n)=>GT(t,typeof e!="symbol"?e+"":e,n);let _Pe=class wH extends KCe{constructor(e){var n;super(e),Sn(this,"protocol",rH),Sn(this,"version",sH),Sn(this,"name",MT),Sn(this,"relayUrl"),Sn(this,"projectId"),Sn(this,"customStoragePrefix"),Sn(this,"events",new Ao.EventEmitter),Sn(this,"logger"),Sn(this,"heartbeat"),Sn(this,"relayer"),Sn(this,"crypto"),Sn(this,"storage"),Sn(this,"history"),Sn(this,"expirer"),Sn(this,"pairing"),Sn(this,"verify"),Sn(this,"echoClient"),Sn(this,"linkModeSupportedApps"),Sn(this,"eventClient"),Sn(this,"initialized",!1),Sn(this,"logChunkController"),Sn(this,"on",(a,c)=>this.events.on(a,c)),Sn(this,"once",(a,c)=>this.events.once(a,c)),Sn(this,"off",(a,c)=>this.events.off(a,c)),Sn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Sn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:kn.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||oH,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Fh({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:WNe.logger,name:MT}),{logger:i,chunkLoggerController:o}=YC({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=es(i,this.name),this.heartbeat=new eme,this.crypto=new YTe(this,this.logger,e==null?void 0:e.keychain),this.history=new iPe(this,this.logger),this.expirer=new cPe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new qCe(mL(mL({},zNe),e==null?void 0:e.storageOptions)),this.relayer=new _Re({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new nPe(this,this.logger),this.verify=new dPe(this,this.logger,this.storage),this.echoClient=new pPe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new wPe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new wH(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(nxe,r),n}get context(){return mi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(YM,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(YM)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&FNe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const CPe=_Pe,bH="wc",vH=2,EH="client",dk=`${bH}@${vH}:${EH}:`,eI={name:EH,logger:"error"},yL="WALLETCONNECT_DEEPLINK_CHOICE",SPe="proposal",wL="Proposal expired",APe="session",gf=be.SEVEN_DAYS,IPe="engine",Ir={wc_sessionPropose:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1104},res:{ttl:be.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1106},res:{ttl:be.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:be.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1112},res:{ttl:be.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:be.ONE_DAY,prompt:!1,tag:1114},res:{ttl:be.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:be.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:be.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:be.FIVE_MINUTES,prompt:!1,tag:1119}}},tI={min:be.FIVE_MINUTES,max:be.SEVEN_DAYS},ba={idle:"IDLE",active:"ACTIVE"},bL={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},NPe="request",xPe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],TPe="wc",RPe="auth",PPe="authKeys",OPe="pairingTopics",kPe="requests",f1=`${TPe}@${1.5}:${RPe}:`,Yv=`${f1}:PUB_KEY`;var DPe=Object.defineProperty,$Pe=Object.defineProperties,MPe=Object.getOwnPropertyDescriptors,vL=Object.getOwnPropertySymbols,LPe=Object.prototype.hasOwnProperty,UPe=Object.prototype.propertyIsEnumerable,VT=(t,e,n)=>e in t?DPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vn=(t,e)=>{for(var n in e||(e={}))LPe.call(e,n)&&VT(t,n,e[n]);if(vL)for(var n of vL(e))UPe.call(e,n)&&VT(t,n,e[n]);return t},vs=(t,e)=>$Pe(t,MPe(e)),fe=(t,e,n)=>VT(t,typeof e!="symbol"?e+"":e,n);class BPe extends d1e{constructor(e){super(e),fe(this,"name",IPe),fe(this,"events",new zO),fe(this,"initialized",!1),fe(this,"requestQueue",{state:ba.idle,queue:[]}),fe(this,"sessionRequestQueue",{state:ba.idle,queue:[]}),fe(this,"requestQueueDelay",be.ONE_SECOND),fe(this,"expectedPairingMethodMap",new Map),fe(this,"recentlyDeletedMap",new Map),fe(this,"recentlyDeletedLimit",200),fe(this,"relayMessageCache",[]),fe(this,"pendingSessions",new Map),fe(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Ir)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay)))}),fe(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=vs(vn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=cNe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:A}=await this.client.core.pairing.create();u=I,d=A}if(!u){const{message:I}=Ee("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=Ir.wc_sessionPropose.req.ttl||be.FIVE_MINUTES,g=pr(p),w=vs(vn(vn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:iH}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:Sa()}),y=tn("session_connect",w.id),{reject:b,resolve:E,done:_}=cd(p,wL),C=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:wL,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:I,session:A})=>{this.client.events.off("proposal_expire",C),I?b(I):A&&E(A)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:_}}),fe(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),fe(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[ko.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Ju.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Ju.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Ju.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:ko.session_approve_started,properties:{topic:p,trace:[ko.session_approve_started,ko.session_namespaces_validation_success]}}));const E=await this.client.core.crypto.generateKeyPair(),_=g.publicKey,C=await this.client.core.crypto.generateSharedKey(E,_),I=vn(vn(vn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:E,metadata:this.client.metadata},expiry:pr(gf)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),A=kn.relay;b.addTrace(ko.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:A})}catch(S){throw b.setError(Ju.subscribe_session_topic_failure),S}b.addTrace(ko.subscribe_session_topic_success);const N=vs(vn({},I),{topic:C,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:E,transportType:kn.relay});await this.client.session.set(C,N),b.addTrace(ko.store_session);try{b.addTrace(ko.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Ju.session_settle_publish_failure),S}),b.addTrace(ko.session_settle_publish_success),b.addTrace(ko.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:E},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Ju.session_approve_publish_failure),S}),b.addTrace(ko.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,gn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,gn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,pr(gf)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),fe(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:Ir.wc_sessionPropose.reject}),await this.client.proposal.delete(r,gn("USER_DISCONNECTED")))}),fe(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=cd(),c=Sa(),l=xd().toString(),u=this.client.session.get(r).namespaces;return this.events.once(tn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),fe(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=Sa(),{done:i,resolve:o,reject:a}=cd();return this.events.once(tn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,pr(gf)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),fe(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=Ir.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===kn.relay&&await this.confirmOnlineStateOrThrow();const c=Sa(),l=xd().toString(),{done:u,resolve:d,reject:h}=cd(o,"Request expired. Please try again.");this.events.once(tn("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:vs(vn({},s),{expiryTimestamp:pr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:vs(vn({},s),{expiryTimestamp:pr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(vn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const E=await ESe(this.client.core.storage,yL);await wSe({id:c,topic:i,wcDeepLink:E})}y()}),u()]).then(y=>y[2])}),fe(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===kn.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);Aa(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):oo(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),fe(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=Sa(),i=xd().toString(),{done:o,resolve:a,reject:c}=cd();this.events.once(tn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),fe(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=xd().toString(),a=Sa();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),fe(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:gn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Ee("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),fe(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>dNe(r,n)))),fe(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),fe(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?kn.link_mode:kn.relay;o===kn.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:E}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:E}});const _=await this.client.core.crypto.generateKeyPair(),C=Vv(_);if(await Promise.all([this.client.auth.authKeys.set(Yv,{responseTopic:C,publicKey:_}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:k}=fp(a[0]);let j=fAe(k,"request",g);Gv(y)&&(j=gAe(j,y.pop())),y.push(j)}const I=w&&w>Ir.wc_sessionAuthenticate.req.ttl?w:Ir.wc_sessionAuthenticate.req.ttl,A={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:pr(I)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:_,metadata:this.client.metadata},expiryTimestamp:pr(Ir.wc_sessionPropose.req.ttl),id:Sa()},{done:D,resolve:P,reject:B}=cd(I,"Request expired"),q=Sa(),L=tn("session_connect",S.id),T=tn("session_request",q),x=async({error:k,session:j})=>{this.events.off(T,$),k?B(k):j&&P({session:j})},$=async k=>{var j,H,X;if(await this.deletePendingAuthRequest(q,{message:"fulfilled",code:0}),k.error){const de=gn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return k.error.code===de.code?void 0:(this.events.off(L,x),B(k.error.message))}await this.deleteProposal(S.id),this.events.off(L,x);const{cacaos:se,responder:ne}=k.result,ae=[],ye=[];for(const de of se){await pM({cacao:de,projectId:this.client.core.projectId})||(this.client.logger.error(de,"Signature verification failed"),B(gn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:ee}=de,he=Gv(ee.resources),Ie=[IT(ee.iss)],le=C_(ee.iss);if(he){const me=gM(he),ze=mM(he);ae.push(...me),Ie.push(...ze)}for(const me of Ie)ye.push(`${me}:${le}`)}const Z=await this.client.core.crypto.generateSharedKey(_,ne.publicKey);let re;ae.length>0&&(re={topic:Z,acknowledged:!0,self:{publicKey:_,metadata:this.client.metadata},peer:ne,controller:ne.publicKey,expiry:pr(gf),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:FM([...new Set(ae)],[...new Set(ye)]),transportType:o},await this.client.core.relayer.subscribe(Z,{transportType:o}),await this.client.session.set(Z,re),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:ne.metadata}),re=this.client.session.get(Z)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(H=ne.metadata.redirect)!=null&&H.linkMode&&(X=ne.metadata.redirect)!=null&&X.universal&&r&&(this.client.core.addLinkModeSupportedApp(ne.metadata.redirect.universal),this.client.session.update(Z,{transportType:kn.link_mode})),P({auths:se,session:re})};this.events.once(L,x),this.events.once(T,$);let R;try{if(i){const k=Jl("wc_sessionAuthenticate",A,q);this.client.core.history.set(b,k);const j=await this.client.core.crypto.encode("",k,{type:Q0,encoding:Ml});R=ov(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:A,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:q}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:Ir.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(k){throw this.events.off(L,x),this.events.off(T,$),k}return await this.setProposal(S.id,S),await this.setAuthRequest(q,{request:vs(vn({},A),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:R??E,response:D}}),fe(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Xu.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Im.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Im.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||kn.relay;a===kn.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=Vv(c),d={type:Fc,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await pM({cacao:w,projectId:this.client.core.projectId})){i.setError(Im.invalid_cacao);const C=gn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(Xu.cacaos_verified);const{p:y}=w,b=Gv(y.resources),E=[IT(y.iss)],_=C_(y.iss);if(b){const C=gM(b),I=mM(b);h.push(...C),E.push(...I)}for(const C of E)f.push(`${C}:${_}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Xu.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:pr(gf),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:FM([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Xu.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Im.subscribe_authenticated_session_topic_failure),w}i.addTrace(Xu.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Xu.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Xu.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Im.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),fe(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===kn.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=Vv(o),l={type:Fc,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:Ir.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,gn("USER_DISCONNECTED"))}),fe(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return Rz(r,s)}),fe(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),fe(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),fe(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,gn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(yL).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,gn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ba.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),fe(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Ju.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,gn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),fe(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ba.idle,this.client.events.emit("session_request_expire",{id:n}))}),fe(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),fe(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),fe(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,pr(Ir.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),fe(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=kn.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),fe(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||pr(Ir.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),fe(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Jl(s,i,c);let f;const p=!!u;try{const y=p?Ml:Jo;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(xPe.includes(s)){const y=Oa(JSON.stringify(h)),b=Oa(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=Ir[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=ov(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=Ir[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=vs(vn({},d),{correlationId:h.id}),l?(y.internal=vs(vn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),fe(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=e1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?Ml:Jo;u=await this.client.core.crypto.encode(s,l,vs(vn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=ov(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=Ir[p].res;g.tvf=vs(vn({},f),{correlationId:r}),o?(g.internal=vs(vn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),fe(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=t1(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?Ml:Jo;u=await this.client.core.crypto.encode(s,l,vs(vn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=ov(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||Ir[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),fe(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Pl(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Pl(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),fe(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),fe(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),fe(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ba.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ba.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ba.idle}),fe(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),fe(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),fe(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Ee("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),fe(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),fe(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(_c.proposal_listener_not_found)),this.isValidConnect(vn({},s.params));const u=a.expiryTimestamp||pr(Ir.wc_sessionPropose.req.ttl),d=vn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Oa(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(_a.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:Ir.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),fe(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(Aa(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(oo(r)){await this.client.proposal.delete(i,gn("USER_DISCONNECTED"));const o=tn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),fe(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=vs(vn(vn(vn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:kn.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(tn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;Aa(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(tn("session_approve",s),{})):oo(r)&&(await this.client.session.delete(n,gn("USER_DISCONNECTED")),this.events.emit(tn("session_approve",s),{error:r.error}))}),fe(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=Sm.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:gn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(vn({topic:n},s));try{Sm.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Sm.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),fe(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=tn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Aa(r)?this.events.emit(tn("session_update",s),{}):oo(r)&&this.events.emit(tn("session_update",s),{error:r.error})}),fe(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,pr(gf)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=tn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Aa(r)?this.events.emit(tn("session_extend",s),{}):oo(r)&&this.events.emit(tn("session_extend",s),{error:r.error})}),fe(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),fe(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=tn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);Aa(r)?this.events.emit(tn("session_ping",s),{}):oo(r)&&this.events.emit(tn("session_ping",s),{error:r.error})},500)}),fe(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(kr.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:gn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),fe(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(vn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Oa(JSON.stringify(Jl("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===kn.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),fe(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=tn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);Aa(r)?this.events.emit(tn("session_request",s),{result:r.result}):oo(r)&&this.events.emit(tn("session_request",s),{error:r.error})}),fe(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=Sm.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(vn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),Sm.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),fe(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),Aa(r)?this.events.emit(tn("session_request",s),{result:r.result}):oo(r)&&this.events.emit(tn("session_request",s),{error:r.error})}),fe(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Oa(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===kn.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Fc,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:Ir.wc_sessionAuthenticate.autoReject,appLink:h})}}),fe(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),fe(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ba.idle,this.processSessionRequestQueue()},be.toMiliseconds(this.requestQueueDelay))}),fe(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=tn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(tn("session_request",i.request.id),{error:r})})}),fe(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ba.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ba.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),fe(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),fe(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Jl("wc_sessionPropose",vs(vn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),fe(this,"isValidConnect",async n=>{if(!Ys(n)){const{message:l}=Ee("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Kr(r)||await this.isValidPairingTopic(r),!CNe(c)){const{message:l}=Ee("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Kr(s)&&_u(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Kr(i)&&_u(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Kr(o)||this.validateSessionProps(o,"sessionProperties"),!Kr(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),fe(this,"validateNamespaces",(n,r)=>{const s=_Ne(n,"connect()",r);if(s)throw new Error(s.message)}),fe(this,"isValidApprove",async n=>{if(!Ys(n))throw new Error(Ee("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=KA(s,"approve()");if(l)throw new Error(l.message);const u=HM(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!cr(i,!0)){const{message:d}=Ee("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Kr(o)||this.validateSessionProps(o,"sessionProperties"),!Kr(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),fe(this,"isValidReject",async n=>{if(!Ys(n)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!ANe(s)){const{message:i}=Ee("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),fe(this,"isValidSessionSettleRequest",n=>{if(!Ys(n)){const{message:l}=Ee("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!nH(r)){const{message:l}=Ee("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=mNe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=KA(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Pl(o)){const{message:l}=Ee("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),fe(this,"isValidUpdate",async n=>{if(!Ys(n)){const{message:c}=Ee("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=KA(s,"update()");if(o)throw new Error(o.message);const a=HM(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),fe(this,"isValidExtend",async n=>{if(!Ys(n)){const{message:s}=Ee("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),fe(this,"isValidRequest",async n=>{if(!Ys(n)){const{message:c}=Ee("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!zM(a,i)){const{message:c}=Ee("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!INe(s)){const{message:c}=Ee("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!TNe(a,i,s.method)){const{message:c}=Ee("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!kNe(o,tI)){const{message:c}=Ee("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${tI.min} and ${tI.max}`);throw new Error(c)}}),fe(this,"isValidRespond",async n=>{var r;if(!Ys(n)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!NNe(i)){const{message:o}=Ee("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),fe(this,"isValidPing",async n=>{if(!Ys(n)){const{message:s}=Ee("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidEmit",async n=>{if(!Ys(n)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!zM(o,i)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!xNe(s)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!RNe(o,i,s.name)){const{message:a}=Ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),fe(this,"isValidDisconnect",async n=>{if(!Ys(n)){const{message:s}=Ee("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),fe(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!cr(s,!1))throw new Error("uri is required parameter");if(!cr(i,!1))throw new Error("domain is required parameter");if(!cr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>fp(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=fp(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),fe(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||Sy,validation:"UNKNOWN",origin:o.url||""}};try{if(a===kn.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),fe(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Ee("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),fe(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),fe(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),fe(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Ee("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),fe(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==kn.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),fe(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),fe(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=iM(n,"topic")||"",s=decodeURIComponent(iM(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:kn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),fe(this,"registerLinkModeListeners",async()=>{var n;if(rk()||zu()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),fe(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(bL).includes(s.method)}),fe(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return vs(vn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),fe(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),fe(this,"extractTxHashesFromResult",(n,r)=>{try{const s=bL[n];if(typeof r=="string")return[r];const i=r[s.key];if(Eu(i))return n==="solana_signAllTransactions"?i.map(o=>XSe(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ee("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(kr.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Yv)?this.client.auth.authKeys.get(Yv):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===kn.link_mode?Ml:Jo});tk(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Oa(r)})):n1(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(ro.expired,async e=>{const{topic:n,id:r}=Ez(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ee("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ee("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(gd.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(gd.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!cr(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Pl(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ee("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!cr(e,!1)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Pl(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ee("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ee("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(cr(e,!1)){const{message:n}=Ee("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ee("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!SNe(e)){const{message:n}=Ee("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ee("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Pl(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ee("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class jPe extends zh{constructor(e,n){super(e,n,SPe,dk),this.core=e,this.logger=n}}let FPe=class extends zh{constructor(e,n){super(e,n,APe,dk),this.core=e,this.logger=n}};class WPe extends zh{constructor(e,n){super(e,n,NPe,dk,r=>r.id),this.core=e,this.logger=n}}class zPe extends zh{constructor(e,n){super(e,n,PPe,f1,()=>Yv),this.core=e,this.logger=n}}class HPe extends zh{constructor(e,n){super(e,n,OPe,f1),this.core=e,this.logger=n}}class qPe extends zh{constructor(e,n){super(e,n,kPe,f1,r=>r.id),this.core=e,this.logger=n}}var GPe=Object.defineProperty,VPe=(t,e,n)=>e in t?GPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nI=(t,e,n)=>VPe(t,typeof e!="symbol"?e+"":e,n);class KPe{constructor(e,n){this.core=e,this.logger=n,nI(this,"authKeys"),nI(this,"pairingTopics"),nI(this,"requests"),this.authKeys=new zPe(this.core,this.logger),this.pairingTopics=new HPe(this.core,this.logger),this.requests=new qPe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var YPe=Object.defineProperty,QPe=(t,e,n)=>e in t?YPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kt=(t,e,n)=>QPe(t,typeof e!="symbol"?e+"":e,n);let ZPe=class _H extends u1e{constructor(e){super(e),kt(this,"protocol",bH),kt(this,"version",vH),kt(this,"name",eI.name),kt(this,"metadata"),kt(this,"core"),kt(this,"logger"),kt(this,"events",new Ao.EventEmitter),kt(this,"engine"),kt(this,"session"),kt(this,"proposal"),kt(this,"pendingRequest"),kt(this,"auth"),kt(this,"signConfig"),kt(this,"on",(r,s)=>this.events.on(r,s)),kt(this,"once",(r,s)=>this.events.once(r,s)),kt(this,"off",(r,s)=>this.events.off(r,s)),kt(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),kt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),kt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),kt(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),kt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),kt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||eI.name,this.metadata=hSe(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:j0(Fh({level:(e==null?void 0:e.logger)||eI.logger}));this.core=(e==null?void 0:e.core)||new CPe(e),this.logger=es(n,this.name),this.session=new FPe(this.core,this.logger),this.proposal=new jPe(this.core,this.logger),this.pendingRequest=new WPe(this.core,this.logger),this.engine=new BPe(this),this.auth=new KPe(this.core,this.logger)}static async init(e){const n=new _H(e);return await n.initialize(),n}get context(){return mi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},be.toMiliseconds(be.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const EL="error",JPe="wss://relay.walletconnect.org",XPe="wc",eOe="universal_provider",cv=`${XPe}@2:${eOe}:`,CH="https://rpc.walletconnect.org/v1/",Df="generic",tOe=`${CH}bundler`,No={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function nOe(){}function hk(t){return t==null||typeof t!="object"&&typeof t!="function"}function fk(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function rOe(t){if(hk(t))return t;if(Array.isArray(t)||fk(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function _L(t){return typeof t=="object"&&t!==null}function SH(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function AH(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const sOe="[object RegExp]",IH="[object String]",NH="[object Number]",xH="[object Boolean]",TH="[object Arguments]",iOe="[object Symbol]",oOe="[object Date]",aOe="[object Map]",cOe="[object Set]",lOe="[object Array]",uOe="[object ArrayBuffer]",dOe="[object Object]",hOe="[object DataView]",fOe="[object Uint8Array]",pOe="[object Uint8ClampedArray]",gOe="[object Uint16Array]",mOe="[object Uint32Array]",yOe="[object Int8Array]",wOe="[object Int16Array]",bOe="[object Int32Array]",vOe="[object Float32Array]",EOe="[object Float64Array]";function _Oe(t,e){return Xf(t,void 0,t,new Map,e)}function Xf(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(hk(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Xf(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Xf(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Xf(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(fk(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Xf(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),md(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),md(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),md(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,md(o,t,n,r,s),o}if(typeof t=="object"&&COe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),md(o,t,n,r,s),o}return t}function md(t,e,n=t,r,s){const i=[...Object.keys(e),...SH(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Xf(e[a],a,n,r,s))}}function COe(t){switch(AH(t)){case TH:case lOe:case uOe:case hOe:case xH:case oOe:case vOe:case EOe:case yOe:case wOe:case bOe:case aOe:case NH:case dOe:case sOe:case cOe:case IH:case iOe:case fOe:case pOe:case gOe:case mOe:return!0;default:return!1}}function SOe(t,e){return _Oe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case NH:case IH:case xH:{const o=new t.constructor(t==null?void 0:t.valueOf());return md(o,t),o}case TH:{const o={};return md(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function CL(t){return SOe(t)}function SL(t){return t!==null&&typeof t=="object"&&AH(t)==="[object Arguments]"}function AOe(t){return fk(t)}function IOe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function NOe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=KT(s,o,r,new Map)}return s}function KT(t,e,n,r){if(hk(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return rOe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...SH(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(SL(a)&&(a={...a}),SL(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=CL(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||_L(c)&&_L(a)?t[o]=KT(c,a,n,r):c==null&&IOe(a)?t[o]=KT({},a,n,r):c==null&&AOe(a)?t[o]=CL(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function xOe(t,...e){return NOe(t,...e,nOe)}var TOe=Object.defineProperty,ROe=Object.defineProperties,POe=Object.getOwnPropertyDescriptors,AL=Object.getOwnPropertySymbols,OOe=Object.prototype.hasOwnProperty,kOe=Object.prototype.propertyIsEnumerable,IL=(t,e,n)=>e in t?TOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lv=(t,e)=>{for(var n in e||(e={}))OOe.call(e,n)&&IL(t,n,e[n]);if(AL)for(var n of AL(e))kOe.call(e,n)&&IL(t,n,e[n]);return t},DOe=(t,e)=>ROe(t,POe(e));function ji(t,e,n){var r;const s=fp(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${CH}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Hh(t){return t.includes(":")?t.split(":")[1]:t}function RH(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function $Oe(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function uv(t={},e={}){const n=NL(t),r=NL(e);return xOe(n,r)}function NL(t){var e,n,r,s,i;const o={};if(!_u(t))return o;for(const[a,c]of Object.entries(t)){const l=d1(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Jf(a);o[f]=DOe(lv(lv({},o[f]),c),{chains:Ga(l,(e=o[f])==null?void 0:e.chains),methods:Ga(u,(n=o[f])==null?void 0:n.methods),events:Ga(d,(r=o[f])==null?void 0:r.events)}),(_u(h)||_u(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=lv(lv({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function xL(t){return t.includes(":")?t.split(":")[2]:t}function TL(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=d1(n)?[n]:r.chains?r.chains:RH(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function rI(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const PH={},Kt=t=>PH[t],sI=(t,e)=>{PH[t]=e};var MOe=Object.defineProperty,LOe=(t,e,n)=>e in t?MOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mf=(t,e,n)=>LOe(t,typeof e!="symbol"?e+"":e,n);class UOe{constructor(e){mf(this,"name","polkadot"),mf(this,"client"),mf(this,"httpProviders"),mf(this,"events"),mf(this,"namespace"),mf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Hh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}}var BOe=Object.defineProperty,jOe=Object.defineProperties,FOe=Object.getOwnPropertyDescriptors,RL=Object.getOwnPropertySymbols,WOe=Object.prototype.hasOwnProperty,zOe=Object.prototype.propertyIsEnumerable,YT=(t,e,n)=>e in t?BOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PL=(t,e)=>{for(var n in e||(e={}))WOe.call(e,n)&&YT(t,n,e[n]);if(RL)for(var n of RL(e))zOe.call(e,n)&&YT(t,n,e[n]);return t},OL=(t,e)=>jOe(t,FOe(e)),yf=(t,e,n)=>YT(t,typeof e!="symbol"?e+"":e,n);class HOe{constructor(e){yf(this,"name","eip155"),yf(this,"client"),yf(this,"chainId"),yf(this,"namespace"),yf(this,"httpProviders"),yf(this,"events"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||ji(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Hh(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:OL(PL({},u.sessionProperties||{}),{capabilities:OL(PL({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Jl("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${tOe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var qOe=Object.defineProperty,GOe=(t,e,n)=>e in t?qOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wf=(t,e,n)=>GOe(t,typeof e!="symbol"?e+"":e,n);class VOe{constructor(e){wf(this,"name","solana"),wf(this,"client"),wf(this,"httpProviders"),wf(this,"events"),wf(this,"namespace"),wf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Hh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}}var KOe=Object.defineProperty,YOe=(t,e,n)=>e in t?KOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bf=(t,e,n)=>YOe(t,typeof e!="symbol"?e+"":e,n);class QOe{constructor(e){bf(this,"name","cosmos"),bf(this,"client"),bf(this,"httpProviders"),bf(this,"events"),bf(this,"namespace"),bf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Hh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}}var ZOe=Object.defineProperty,JOe=(t,e,n)=>e in t?ZOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vf=(t,e,n)=>JOe(t,typeof e!="symbol"?e+"":e,n);class XOe{constructor(e){vf(this,"name","algorand"),vf(this,"client"),vf(this,"httpProviders"),vf(this,"events"),vf(this,"namespace"),vf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||ji(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Io(new ua(r,Kt("disableProviderPing")))}}var eke=Object.defineProperty,tke=(t,e,n)=>e in t?eke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ef=(t,e,n)=>tke(t,typeof e!="symbol"?e+"":e,n);class nke{constructor(e){Ef(this,"name","cip34"),Ef(this,"client"),Ef(this,"httpProviders"),Ef(this,"events"),Ef(this,"namespace"),Ef(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Hh(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}}var rke=Object.defineProperty,ske=(t,e,n)=>e in t?rke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_f=(t,e,n)=>ske(t,typeof e!="symbol"?e+"":e,n);class ike{constructor(e){_f(this,"name","elrond"),_f(this,"client"),_f(this,"httpProviders"),_f(this,"events"),_f(this,"namespace"),_f(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Hh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}}var oke=Object.defineProperty,ake=(t,e,n)=>e in t?oke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e,n)=>ake(t,typeof e!="symbol"?e+"":e,n);class cke{constructor(e){Cf(this,"name","multiversx"),Cf(this,"client"),Cf(this,"httpProviders"),Cf(this,"events"),Cf(this,"namespace"),Cf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Hh(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}}var lke=Object.defineProperty,uke=(t,e,n)=>e in t?lke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sf=(t,e,n)=>uke(t,typeof e!="symbol"?e+"":e,n);class dke{constructor(e){Sf(this,"name","near"),Sf(this,"client"),Sf(this,"httpProviders"),Sf(this,"events"),Sf(this,"namespace"),Sf(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ji(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace);return typeof r>"u"?void 0:new Io(new ua(r,Kt("disableProviderPing")))}}var hke=Object.defineProperty,fke=(t,e,n)=>e in t?hke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Af=(t,e,n)=>fke(t,typeof e!="symbol"?e+"":e,n);class pke{constructor(e){Af(this,"name","tezos"),Af(this,"client"),Af(this,"httpProviders"),Af(this,"events"),Af(this,"namespace"),Af(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ji(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace);return typeof r>"u"?void 0:new Io(new ua(r))}}var gke=Object.defineProperty,mke=(t,e,n)=>e in t?gke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,If=(t,e,n)=>mke(t,typeof e!="symbol"?e+"":e,n);class yke{constructor(e){If(this,"name",Df),If(this,"client"),If(this,"httpProviders"),If(this,"events"),If(this,"namespace"),If(this,"chainId"),this.namespace=e.namespace,this.events=Kt("events"),this.client=Kt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(No.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=fp(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ji(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Io(new ua(r,Kt("disableProviderPing")))}}var wke=Object.defineProperty,bke=Object.defineProperties,vke=Object.getOwnPropertyDescriptors,kL=Object.getOwnPropertySymbols,Eke=Object.prototype.hasOwnProperty,_ke=Object.prototype.propertyIsEnumerable,QT=(t,e,n)=>e in t?wke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dv=(t,e)=>{for(var n in e||(e={}))Eke.call(e,n)&&QT(t,n,e[n]);if(kL)for(var n of kL(e))_ke.call(e,n)&&QT(t,n,e[n]);return t},iI=(t,e)=>bke(t,vke(e)),Ji=(t,e,n)=>QT(t,typeof e!="symbol"?e+"":e,n);let Cke=class OH{constructor(e){Ji(this,"client"),Ji(this,"namespaces"),Ji(this,"optionalNamespaces"),Ji(this,"sessionProperties"),Ji(this,"scopedProperties"),Ji(this,"events",new zO),Ji(this,"rpcProviders",{}),Ji(this,"session"),Ji(this,"providerOpts"),Ji(this,"logger"),Ji(this,"uri"),Ji(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:j0(Fh({level:(e==null?void 0:e.logger)||EL})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new OH(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:dv({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,e1(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:gn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=TL(this.session.namespaces);this.namespaces=uv(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=TL(s.namespaces);return this.namespaces=uv(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Df?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(Eu(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await ZPe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||EL,relayUrl:this.providerOpts.relayUrl||JPe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Jf(n)))];sI("client",this.client),sI("events",this.events),sI("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=$Oe(n,this.session),s=RH(r),i=uv(this.namespaces,this.optionalNamespaces),o=iI(dv({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new HOe({namespace:o});break;case"algorand":this.rpcProviders[n]=new XOe({namespace:o});break;case"solana":this.rpcProviders[n]=new VOe({namespace:o});break;case"cosmos":this.rpcProviders[n]=new QOe({namespace:o});break;case"polkadot":this.rpcProviders[n]=new UOe({namespace:o});break;case"cip34":this.rpcProviders[n]=new nke({namespace:o});break;case"elrond":this.rpcProviders[n]=new ike({namespace:o});break;case"multiversx":this.rpcProviders[n]=new cke({namespace:o});break;case"near":this.rpcProviders[n]=new dke({namespace:o});break;case"tezos":this.rpcProviders[n]=new pke({namespace:o});break;default:this.rpcProviders[Df]?this.rpcProviders[Df].updateNamespace(o):this.rpcProviders[Df]=new yke({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&Eu(o)&&this.events.emit("accountsChanged",o.map(xL))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Jf(o),l=rI(o)!==rI(a)?`${c}:${rI(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=iI(dv({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",iI(dv({},gn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(No.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Df]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=uv(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Jf(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Jf(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(xL);if(!Eu(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${cv}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${cv}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${cv}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(cv)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var DL={};const Ske={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof DL<"u"?DL.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},ZT={filterOutDuplicatesByRDNS(t){const e=pe.state.enableEIP6963?Oe.state.connectors:[],n=je.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&Ze.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Oe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=je.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Oe.state,{featuredWalletIds:n}=pe.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=pe.state.features)==null?void 0:c.connectMethodsOrder),r=e||Oe.state.connectors;if(n)return n;const{injected:s,announced:i}=Qv.getConnectorsByType(r,Je.state.recommended,Je.state.featured),o=s.filter(Qv.showConnector),a=i.filter(Qv.showConnector);return o.length||a.length?["wallet","email","social"]:Ske.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Je.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Je.state.excludedWallets.some(r=>r1.isLowerCaseMatch(r.name,t.name));return e||n}},Qv={getConnectorsByType(t,e,n){const{customWallets:r}=pe.state,s=je.getRecentWallets(),i=ZT.filterOutDuplicateWallets(e),o=ZT.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Je.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Je.state.excludedWallets.some(i=>r1.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!Ze.isMobile()||Ze.isMobile()&&!e&&!ot.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(U.state.chains.values()).some(n=>Oe.getConnectorId(n.namespace)===ke.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=pe.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=Qv.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:pe.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:E})=>E===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zv=globalThis,pk=Zv.ShadowRoot&&(Zv.ShadyCSS===void 0||Zv.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,gk=Symbol(),$L=new WeakMap;let kH=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==gk)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(pk&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=$L.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&$L.set(n,e))}return e}toString(){return this.cssText}};const eo=t=>new kH(typeof t=="string"?t:t+"",void 0,gk),Wc=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new kH(n,t,gk)},Ake=(t,e)=>{if(pk)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=Zv.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},ML=pk?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return eo(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Ike,defineProperty:Nke,getOwnPropertyDescriptor:xke,getOwnPropertyNames:Tke,getOwnPropertySymbols:Rke,getPrototypeOf:Pke}=Object,Cu=globalThis,LL=Cu.trustedTypes,Oke=LL?LL.emptyScript:"",oI=Cu.reactiveElementPolyfillSupport,Iy=(t,e)=>t,JT={toAttribute(t,e){switch(e){case Boolean:t=t?Oke:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},DH=(t,e)=>!Ike(t,e),UL={attribute:!0,type:String,converter:JT,reflect:!1,useDefault:!1,hasChanged:DH};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Cu.litPropertyMetadata??(Cu.litPropertyMetadata=new WeakMap);let $f=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=UL){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Nke(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=xke(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??UL}static _$Ei(){if(this.hasOwnProperty(Iy("elementProperties")))return;const e=Pke(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Iy("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Iy("properties"))){const n=this.properties,r=[...Tke(n),...Rke(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(ML(s))}else e!==void 0&&n.push(ML(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return Ake(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:JT).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:JT;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??DH)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};$f.elementStyles=[],$f.shadowRootOptions={mode:"open"},$f[Iy("elementProperties")]=new Map,$f[Iy("finalized")]=new Map,oI==null||oI({ReactiveElement:$f}),(Cu.reactiveElementVersions??(Cu.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ny=globalThis,I_=Ny.trustedTypes,BL=I_?I_.createPolicy("lit-html",{createHTML:t=>t}):void 0,$H="$lit$",Ll=`lit$${Math.random().toFixed(9).slice(2)}$`,MH="?"+Ll,kke=`<${MH}>`,Ch=document,Jw=()=>Ch.createComment(""),Xw=t=>t===null||typeof t!="object"&&typeof t!="function",mk=Array.isArray,Dke=t=>mk(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",aI=`[ 	
\f\r]`,Tm=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,jL=/-->/g,FL=/>/g,ed=RegExp(`>|${aI}(?:([^\\s"'>=/]+)(${aI}*=${aI}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),WL=/'/g,zL=/"/g,LH=/^(?:script|style|textarea|title)$/i,UH=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),OMe=UH(1),kMe=UH(2),ag=Symbol.for("lit-noChange"),Dr=Symbol.for("lit-nothing"),HL=new WeakMap,Rd=Ch.createTreeWalker(Ch,129);function BH(t,e){if(!mk(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return BL!==void 0?BL.createHTML(e):e}const $ke=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Tm;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Tm?u[1]==="!--"?o=jL:u[1]!==void 0?o=FL:u[2]!==void 0?(LH.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=ed):u[3]!==void 0&&(o=ed):o===ed?u[0]===">"?(o=s??Tm,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?ed:u[3]==='"'?zL:WL):o===zL||o===WL?o=ed:o===jL||o===FL?o=Tm:(o=ed,s=void 0);const f=o===ed&&t[a+1].startsWith("/>")?" ":"";i+=o===Tm?c+kke:d>=0?(r.push(l),c.slice(0,d)+$H+c.slice(d)+Ll+f):c+Ll+(d===-2?a:f)}return[BH(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class e0{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=$ke(e,n);if(this.el=e0.createElement(l,r),Rd.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Rd.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith($H)){const h=u[o++],f=s.getAttribute(d).split(Ll),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?Lke:p[1]==="?"?Uke:p[1]==="@"?Bke:p1}),s.removeAttribute(d)}else d.startsWith(Ll)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(LH.test(s.tagName)){const d=s.textContent.split(Ll),h=d.length-1;if(h>0){s.textContent=I_?I_.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],Jw()),Rd.nextNode(),c.push({type:2,index:++i});s.append(d[h],Jw())}}}else if(s.nodeType===8)if(s.data===MH)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(Ll,d+1))!==-1;)c.push({type:7,index:i}),d+=Ll.length-1}i++}}static createElement(e,n){const r=Ch.createElement("template");return r.innerHTML=e,r}}function cg(t,e,n=t,r){var o,a;if(e===ag)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=Xw(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=cg(t,s._$AS(t,e.values),s,r)),e}class Mke{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Ch).importNode(n,!0);Rd.currentNode=s;let i=Rd.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new J0(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new jke(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Rd.nextNode(),o++)}return Rd.currentNode=Ch,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class J0{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Dr,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=cg(this,e,n),Xw(e)?e===Dr||e==null||e===""?(this._$AH!==Dr&&this._$AR(),this._$AH=Dr):e!==this._$AH&&e!==ag&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):Dke(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Dr&&Xw(this._$AH)?this._$AA.nextSibling.data=e:this.T(Ch.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=e0.createElement(BH(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new Mke(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=HL.get(e.strings);return n===void 0&&HL.set(e.strings,n=new e0(e)),n}k(e){mk(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new J0(this.O(Jw()),this.O(Jw()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class p1{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Dr,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Dr}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=cg(this,e,n,0),o=!Xw(e)||e!==this._$AH&&e!==ag,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=cg(this,a[r+c],n,c),l===ag&&(l=this._$AH[c]),o||(o=!Xw(l)||l!==this._$AH[c]),l===Dr?e=Dr:e!==Dr&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Dr?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Lke extends p1{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Dr?void 0:e}}class Uke extends p1{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Dr)}}class Bke extends p1{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=cg(this,e,n,0)??Dr)===ag)return;const r=this._$AH,s=e===Dr&&r!==Dr||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Dr&&(r===Dr||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class jke{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){cg(this,e)}}const cI=Ny.litHtmlPolyfillSupport;cI==null||cI(e0,J0),(Ny.litHtmlVersions??(Ny.litHtmlVersions=[])).push("3.3.1");const Fke=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new J0(e.insertBefore(Jw(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Gd=globalThis;let Jv=class extends $f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Fke(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return ag}};var OU;Jv._$litElement$=!0,Jv.finalized=!0,(OU=Gd.litElementHydrateSupport)==null||OU.call(Gd,{LitElement:Jv});const lI=Gd.litElementPolyfillSupport;lI==null||lI({LitElement:Jv});(Gd.litElementVersions??(Gd.litElementVersions=[])).push("4.2.1");let xy,Su,Au;function $Me(t,e){xy=document.createElement("style"),Su=document.createElement("style"),Au=document.createElement("style"),xy.textContent=pp(t).core.cssText,Su.textContent=pp(t).dark.cssText,Au.textContent=pp(t).light.cssText,document.head.appendChild(xy),document.head.appendChild(Su),document.head.appendChild(Au),jH(e)}function jH(t){Su&&Au&&(t==="light"?(Su.removeAttribute("media"),Au.media="enabled"):(Au.removeAttribute("media"),Su.media="enabled"))}function Wke(t){xy&&Su&&Au&&(xy.textContent=pp(t).core.cssText,Su.textContent=pp(t).dark.cssText,Au.textContent=pp(t).light.cssText)}function pp(t){return{core:Wc`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${eo(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${eo((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${eo((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${eo((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${eo((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Wc`
      :root {
        --w3m-color-mix: ${eo((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${eo($c(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${eo($c(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Wc`
      :root {
        --w3m-color-mix: ${eo((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${eo($c(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${eo($c(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const MMe=Wc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,LMe=Wc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,UMe=Wc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Gm={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},FH=ase({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function X0(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const qL=X0({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),GL=X0({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});X0({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});X0({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});X0({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const zke={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Xv={getMethodsByChainNamespace(t){return zke[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case qL.caipNetworkId:u.chains.push(qL.deprecatedCaipNetworkId);break;case GL.caipNetworkId:u.chains.push(GL.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await by.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let WH=class{constructor({provider:e,namespace:n}){this.id=ke.CONNECTOR_ID.WALLET_CONNECT,this.name=u_.ConnectorNamesMap[ke.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=u_.ConnectorImageIds[ke.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=U.getCaipNetworks.bind(U),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=pe.state.universalProviderConfigOverride,s=Xv.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return _y.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Hke})}};const Hke=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let qke=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>U.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:ke.CONNECTOR_ID.AUTH,type:"AUTH",name:ke.CONNECTOR_NAMES.AUTH,provider:e,imageId:u_.ConnectorImageIds[ke.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Be.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Be.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof WH);if(!e)throw new Error("WalletConnectConnector not found");return e}};class Gke extends qke{setUniversalProvider(e){this.addConnector(new WH({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>Ze.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&mn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Be.state.balanceLoading&&e.chainId===((c=U.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Be.state.balance||"0.00",symbol:Be.state.balanceSymbol||""};const s=(await Be.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=U.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===ke.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:UW.encode(new TextEncoder().encode(r)),pubkey:s}},(a=U.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=U.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===ke.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:wo(n.id)}]}))}catch(u){if(u.code===Gm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Gm.ERROR_INVALID_CHAIN_ID||u.code===Gm.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Gm.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:wo(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const Vke=["email","socials","swaps","onramp","activity","reownBranding"],hv={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?mn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?mn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?mn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?mn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},Kke={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=hv[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=hv[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return hv[t].processApi(e)},processFallbackFeature(t,e){return hv[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await Je.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?mn.DEFAULT_REMOTE_FEATURES:mn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of Vke){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),mn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Ua.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class Yke{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=U.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=U.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=U.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return U.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>U.getCaipNetworks(n),this.getActiveChainNamespace=()=>U.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{U.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>U.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>U.state.activeChain===n||!n?U.state.activeCaipAddress:U.getAccountProp("caipAddress",n),this.setClientId=n=>{it.setClientId(n)},this.getProvider=n=>pn.getProvider(n),this.getProviderType=n=>pn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Be.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Be.setCaipAddress(n,r),n&&pe.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Be.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Be.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Be.setProfileImage(n,r)},this.setUser=(n,r)=>{Be.setUser(n,r)},this.resetAccount=n=>{Be.resetAccount(n)},this.setCaipNetwork=n=>{U.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{U.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Be.setAllAccounts(n,r),pe.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Be.setStatus(n,r),Oe.isConnected()?je.setConnectionStatus("connected"):je.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>U.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Oe.state.allConnectors,...n];Oe.setConnectors(r)},this.setConnections=(n,r)=>{ot.setConnections(n,r)},this.fetchIdentity=n=>it.fetchIdentity(n),this.getReownName=n=>by.getNamesForAddress(n),this.getConnectors=()=>Oe.getConnectors(),this.getConnectorImage=n=>z7.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=pn.getProviderId(r),i=n?{...n,type:s}:void 0;Be.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!U.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Be.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Be.removeAddressLabel(n,r)},this.getAddress=n=>U.state.activeChain===n||!n?Be.state.address:U.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>U.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{U.resetNetwork(n)},this.addConnector=n=>{Oe.addConnector(n)},this.resetWcConnection=()=>{ot.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Be.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Be.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{U.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Be.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{pe.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await Kke.fetchRemoteFeatures(e),pe.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&nT.setOnrampProviders(this.remoteFeatures.onramp),((n=pe.state.remoteFeatures)!=null&&n.email||Array.isArray((r=pe.state.remoteFeatures)==null?void 0:r.socials)&&((s=pe.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await Je.fetchAllowedOrigins();if(e&&Ze.isClient()){const n=window.location.origin;Xv.isOriginAllowed(n,e,Gm.DEFAULT_ALLOWED_ANCESTORS)||Ua.open(Pa.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Ua.open(Pa.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,jn.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Xs.setThemeMode(e.themeMode),e.themeVariables&&Xs.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");U.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&U.setActiveCaipNetwork(n)}initializeConnectionController(e){ot.setWcBasic(e.basic??!1)}initializeConnectorController(){Oe.initialize(this.chainNamespaces)}initializeProjectSettings(e){pe.setProjectId(e.projectId),pe.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;pe.setDebug(e.debug!==!1),pe.setEnableWalletConnect(e.enableWalletConnect!==!1),pe.setEnableWalletGuide(e.enableWalletGuide!==!1),pe.setEnableWallets(e.enableWallets!==!1),pe.setEIP6963Enabled(e.enableEIP6963!==!1),pe.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),pe.setEnableAuthLogger(e.enableAuthLogger!==!1),pe.setCustomRpcUrls(e.customRpcUrls),pe.setEnableEmbedded(e.enableEmbedded),pe.setAllWallets(e.allWallets),pe.setIncludeWalletIds(e.includeWalletIds),pe.setExcludeWalletIds(e.excludeWalletIds),pe.setFeaturedWalletIds(e.featuredWalletIds),pe.setTokens(e.tokens),pe.setTermsConditionsUrl(e.termsConditionsUrl),pe.setPrivacyPolicyUrl(e.privacyPolicyUrl),pe.setCustomWallets(e.customWallets),pe.setFeatures(e.features),pe.setAllowUnsupportedChain(e.allowUnsupportedChain),pe.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),pe.setPreferUniversalLinks(e.experimental_preferUniversalLinks),pe.setDefaultAccountTypes(e.defaultAccountTypes);const n=je.getPreferredAccountTypes()||{},r={...pe.state.defaultAccountTypes,...n};Be.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),pe.setMetadata(e.metadata),pe.setDisableAppend(e.disableAppend),pe.setEnableEmbedded(e.enableEmbedded),pe.setSIWX(e.siwx),!e.projectId){Ua.open(Pa.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===ke.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");pe.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return Ze.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Of.getUnsupportedNetwork(`${n}:${e}`);U.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Of.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Of.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Of.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Of.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=pn.getProvider(e),s=pn.getProviderId(e),{caipAddress:i}=U.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),je.removeConnectedNamespace(e),pn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Oe.removeConnectorId(e),U.resetAccount(e),U.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=U.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),je.setConnectedNamespaces([...U.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Oe.setConnectorId(ei.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,E,_;const c=U.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(I=>I.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((_=(E=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:E.http)==null?void 0:_[0])});if(!h)return;je.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Be.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=U.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),je.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=Qve(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Jt.resetSend(),ot.resetWcConnection(),await _y.clearSessions(),Oe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));je.deleteConnectedSocialProvider(),jn.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(U.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Be.state.address,provider:pn.getProvider(U.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(mn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(U.state.activeChain),s=pn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===ke.CHAIN.EVM){const n=this.getAdapter(U.state.activeChain),r=pn.getProvider(U.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Be.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:U.state.activeChain}),Be.state.profileImage||!1},getEnsAddress:async e=>await Xv.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(U.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=pn.getProvider(U.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(U.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(U.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(U.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(U.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(U.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(U.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Be.state.address||this.updateNativeBalance(Be.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},ot.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(pn.getProviderId(U.state.activeChain)===ei.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=pn.getProvider(n),i=pn.getProviderId(n);if(e.chainNamespace===U.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===ei.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=fl.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new Gke({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=je.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(je.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=U.state.activeChain===e,c=U.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Be.state.address,i=U.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=U.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=U.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=U.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===ke.CHAIN.EVM&&Ze.isSafeApp()&&Oe.setConnectorId(ke.CONNECTOR_ID.SAFE,e);const n=Oe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case ke.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case ke.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Oe.getConnectorId(e),s=this.getCaipNetwork(e),o=Oe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([Ze.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=U.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=fl.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=fl.validateCaipAddress(o),{chainId:f,address:p}=fl.parseCaipAddress(h);if(pn.setProviderId(n,ei.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&U.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==ke.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:U.state.activeCaipNetwork});pn.setProvider(n,g)}else pn.setProvider(n,this.universalProvider);Oe.setConnectorId(ke.CONNECTOR_ID.WALLET_CONNECT,n),je.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await U.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=fl.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>Ze.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){pn.setProviderId(s,e),pn.setProvider(s,n),Oe.setConnectorId(r,s)}async syncAllAccounts(e){const n=Oe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===U.state.activeChain,r=U.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=je.getActiveNetworkProps(),c=i||a,l=((d=U.state.activeCaipNetwork)==null?void 0:d.name)===ke.UNSUPPORTED_NETWORK_NAME,u=U.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(E=>{var _;return((_=fl.parseCaipNetworkId(E))==null?void 0:_.chainId)===c.toString()}),b=w.find(E=>{var _;return((_=fl.parseCaipNetworkId(E))==null?void 0:_.chainNamespace)===o});f=this.getCaipNetworks().find(E=>E.caipNetworkId===y),p=this.getCaipNetworks().find(E=>E.caipNetworkId===b||"deprecatedCaipNetworkId"in E&&E.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===U.state.activeChain?pe.state.enableNetworkSwitch&&!pe.state.allowUnsupportedChain&&((h=U.state.activeCaipNetwork)==null?void 0:h.name)===ke.UNSUPPORTED_NETWORK_NAME?U.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),r1.isLowerCaseMatch(s,Be.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Oe.getConnectorId(e),r=pn.getProviderId(e);if(r===ei.CONNECTOR_TYPE_ANNOUNCED||r===ei.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===ei.CONNECTOR_TYPE_WALLET_CONNECT){const i=pn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===ke.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===ke.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!B7.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=U.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=Xve.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};pe.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await Cke.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{ot.setUri(e)}),this.universalProvider.on("connect",ot.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),ot.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(Xv.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&Ze.isCaipAddress(r[0])&&this.syncAccount(fl.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&Ze.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){jn.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Pa.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Pa.ALERT_ERRORS[o];a&&(Ua.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&ot.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return $r.open({...e,data:{swap:e.arguments}})}return $r.open(e)}async close(){await this.injectModalUi(),$r.close()}setLoading(e,n){$r.setLoading(e,n)}async disconnect(e){await ot.disconnect(e)}getSIWX(){return pe.state.siwx}getError(){return""}getChainId(){var e;return(e=U.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Ua.open(Pa.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await U.switchActiveNetwork(n)}getWalletProvider(){return U.state.activeChain?pn.state.providers[U.state.activeChain]:null}getWalletProviderType(){return pn.getProviderId(U.state.activeChain)}subscribeProviders(e){return pn.subscribeProviders(e)}getThemeMode(){return Xs.state.themeMode}getThemeVariables(){return Xs.state.themeVariables}setThemeMode(e){Xs.setThemeMode(e),jH(Xs.state.themeMode)}setTermsConditionsUrl(e){pe.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){pe.setPrivacyPolicyUrl(e)}setThemeVariables(e){Xs.setThemeVariables(e),Wke(Xs.state.themeVariables)}subscribeTheme(e){return Xs.subscribe(e)}getWalletInfo(){return Be.state.connectedWalletInfo}getAccount(e){var o;const n=Oe.getAuthConnector(e),r=U.getAccountData(e),s=U.state.activeChain,i=je.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:Ze.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===ke.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:je.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?U.subscribeChainProp("accountState",r,n):U.subscribe(r),Oe.subscribe(r)}subscribeNetwork(e){return U.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Be.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Be.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){U.subscribeKey("activeCaipNetwork",e)}getState(){return Ha.state}subscribeState(e){return Ha.subscribe(e)}showErrorMessage(e){Ko.showError(e)}showSuccessMessage(e){Ko.showSuccess(e)}getEvent(){return{...jn.state}}subscribeEvents(e){return jn.subscribe(e)}replace(e){St.replace(e)}redirect(e){St.push(e)}popTransactionStack(e){St.popTransactionStack(e)}isOpen(){return $r.state.open}isTransactionStackEmpty(){return St.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){pe.setFeatures(e)}updateRemoteFeatures(e){pe.setRemoteFeatures(e)}updateOptions(e){const r={...pe.state||{},...e};pe.setOptions(r)}setConnectMethodsOrder(e){pe.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){pe.setWalletFeaturesOrder(e)}setCollapseWallets(e){pe.setCollapseWallets(e)}setSocialsOrder(e){pe.setSocialsOrder(e)}getConnectMethodsOrder(){return ZT.getConnectOrderMethod(pe.state.features,Oe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||U.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&U.removeNetwork(e,n)}}let VL=!1;class Qke extends Yke{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Pi.checkIfRequestExists(n)?Pi.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Zr.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Zr.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Pi.checkIfRequestIsSafe(r),i=Be.state.address,o=U.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=U.state.activeChain;Oe.getConnectorId(n)===ke.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=U.state.activeChain,s=r===ke.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=pe.state.defaultAccountTypes[r],o=(l=Be.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;r1.isLowerCaseMatch(n.address,Be.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Be.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>Ze.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[Ze.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Be.state.user||{},username:n},U.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,U.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,U.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Be.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Xs.getSnapshot(),l=pe.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:$c(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:ke.CONNECTOR_ID.AUTH,info:{name:ke.CONNECTOR_ID.AUTH},type:ei.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=U.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Oe.getConnectorId(n)===ke.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),je.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!Ze.isTelegram())return;const r=je.getTelegramSocialProvider();if(!r||!Ze.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Be.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Oe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await ot.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),je.setConnectedSocialProvider(r),je.removeTelegramSocialProvider(),jn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=ECe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Pa.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Ua.open(Pa.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Ua.open(Pa.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Ua.open(Pa.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Ha.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&Je.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=U.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=pn.getProvider(r),u=pn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=pn.getProviderId(n)===ei.CONNECTOR_TYPE_AUTH,u=pn.getProviderId(r),d=u===ei.CONNECTOR_TYPE_AUTH,h=ke.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(U.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:ke.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:ei.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===ei.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ha.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==ke.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=pn.getProviderId(e);if(n===ei.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=je.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(Ze.isClient()&&!VL)try{const e={...mn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),Ze.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!pe.state.disableAppend&&!pe.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}VL=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!Ze.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(hs(()=>import("./embedded-wallet-Ds1QqMbI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(hs(()=>import("./email-f1JS3tXv.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(hs(()=>import("./socials-Bv_u5cF8.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(hs(()=>import("./swaps-CKMCpzPf.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(hs(()=>import("./send-Bjyre2Gf.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(hs(()=>import("./receive-CJMn_HrH.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(hs(()=>import("./onramp-DfyTQg95.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(hs(()=>import("./transactions-C7WHkDzS.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(hs(()=>import("./index-BLH4Dc6S.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,hs(()=>import("./index-Cw9bDr7T.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),hs(()=>import("./w3m-modal-B605XRDO.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Il;function Zke(t){t&&(Il=t)}function g1(){if(!Il)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Il==null?void 0:Il.open(n))}async function e(){await(Il==null?void 0:Il.close())}return{open:t,close:e}}const Jke="1.7.8";let fv;function Xke(t){return fv||(fv=new Qke({...t,sdkVersion:Ze.generateSdkVersion(t.adapters??[],"react",Jke)}),Zke(fv)),fv}const e2e=la({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),KL=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],t2e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=e2e({isOpen:t}),{open:i}=g1(),o=O.useRef(null),[a,c]=O.useState([]),[l,u]=O.useState(!0),[d,h]=O.useState(null),[f,p]=O.useState("all"),[g,w]=O.useState(1),[y,b]=O.useState(1),[E,_]=O.useState(0),[C,I]=O.useState(null),[A,N]=O.useState(KL[0]),[S,D]=O.useState(!1),[P,B]=O.useState(null),q=O.useCallback(async()=>{var k,j;try{if((k=window.solana)!=null&&k.isPhantom){const H=await window.solana.connect();B(H.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const H=await window.solflare.connect();B(H.publicKey.toString());return}i()}catch(H){console.error("Failed to connect Solana wallet:",H),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}D(!1)},[i]);O.useEffect(()=>{var k,j;(k=window.solana)!=null&&k.publicKey?B(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&B(window.solflare.publicKey.toString())},[]),O.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let H,X=f==="owned"&&r||void 0;if(A.api==="opensea-solana"){if(f==="owned"&&!P){D(!0),u(!1);return}X=P||void 0,H=await U7(A.slug,50),console.log("Fetched Solana NFTs from collection:",H.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(j=H.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",H.data.map(ne=>({name:ne.name,owners:ne.owners,owner_of:ne.owner_of}))),H.data.some(ne=>ne.owners&&ne.owners.length>0)?(H.data=H.data.filter(ne=>{const ae=ne.owners.some(ye=>ye.owner_of&&ye.owner_of.toLowerCase()===P.toLowerCase());return ae&&console.log("Found owned NFT:",ne.name),ae}),console.log("NFTs after filtering:",H.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else A.api==="opensea"?H=await FO(A.slug,50,X):H=await jO(A.slug,g,50,X);c(H.data),b(H.totalPages),_(H.totalCount)}catch(H){H instanceof Error?h(H.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,A,P]),O.useEffect(()=>{S&&q()},[S,q]);const L=k=>new Date(k).toLocaleDateString(),T=k=>A.api==="opensea-solana"&&(!k.owners||k.owners.length===0)?"Owner data unavailable":k.owners.length>0?`${k.owners[0].owner_of.substring(0,6)}...`:"N/A",x=()=>{n&&n()},$=async k=>{if(A.api==="opensea"&&A.chain)try{const j=await L7(A.chain,k.address,k.token_id.toString()),H={...k,attributes:JSON.stringify(j.traits||[])};I(H)}catch(j){console.error("Failed to fetch full NFT details",j),I(k)}else I(k)},R=k=>{N(k),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(M0,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:x,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsx("div",{className:s.collectionSelector,children:KL.map(k=>m.jsx("button",{className:`${s.collectionButton} ${A.slug===k.slug?"active":""}`,onClick:()=>R(k),children:k.name},k.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),A.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{q()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),A.api==="opensea-solana"&&!P&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${E} total)`,f==="recent"&&`Recently minted NFTs by ${A.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${A.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(k=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(k)},children:[m.jsx("div",{style:{width:"100%",height:"150px",backgroundImage:`url(${k.image_url})`,backgroundSize:"cover",backgroundPosition:"center",marginBottom:"10px",border:"1px solid #ccc"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",k.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(k)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",L(k.created_at)]})]},k.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(k=>Math.max(1,k-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(k=>Math.min(y,k+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&m.jsx(ype,{nft:C,onClose:()=>I(null)})]}):null};var pv,n2e=new Uint8Array(16);function r2e(){if(!pv&&(pv=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pv))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pv(n2e)}const s2e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function i2e(t){return typeof t=="string"&&s2e.test(t)}var Hr=[];for(var uI=0;uI<256;++uI)Hr.push((uI+256).toString(16).substr(1));function o2e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Hr[t[e+0]]+Hr[t[e+1]]+Hr[t[e+2]]+Hr[t[e+3]]+"-"+Hr[t[e+4]]+Hr[t[e+5]]+"-"+Hr[t[e+6]]+Hr[t[e+7]]+"-"+Hr[t[e+8]]+Hr[t[e+9]]+"-"+Hr[t[e+10]]+Hr[t[e+11]]+Hr[t[e+12]]+Hr[t[e+13]]+Hr[t[e+14]]+Hr[t[e+15]]).toLowerCase();if(!i2e(n))throw TypeError("Stringified UUID is invalid");return n}function a2e(t,e,n){t=t||{};var r=t.random||(t.rng||r2e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,o2e(r)}const c2e=la({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),l2e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],u2e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],vi=500;function zH(){const t=c2e(),e=O.useRef(null),[n,r]=O.useState(null),[s,i]=O.useState(""),[o,a]=O.useState(""),[c,l]=O.useState(36),[u,d]=O.useState(36),[h,f]=O.useState(!1),[p,g]=O.useState(!1),[w,y]=O.useState(!1),[b,E]=O.useState(!1),[_,C]=O.useState(!1),[I,A]=O.useState([]),[N,S]=O.useState(null),D=O.useRef(null),[P,B]=O.useState(null),q=async Z=>{const re=Z.getContext("2d");if(!re)return;re.clearRect(0,0,Z.width,Z.height),n?await new Promise(ee=>{const he=new window.Image;he.crossOrigin="anonymous",he.onload=()=>{const Ie=Math.min(Z.width/he.width,Z.height/he.height),le=(Z.width-he.width*Ie)/2,me=(Z.height-he.height*Ie)/2;re.drawImage(he,le,me,he.width*Ie,he.height*Ie),ee()},he.onerror=()=>ee(),he.src=n}):(re.fillStyle="#333",re.fillRect(0,0,Z.width,Z.height)),(ee=>{ee.textAlign="center",ee.strokeStyle="black",ee.lineWidth=3,ee.fillStyle="white";const he=(Ie,le)=>{const me=Ie.toUpperCase().split(" "),ze=[];let Ke=me[0];for(let Yt=1;Yt<me.length;Yt++){const rn=me[Yt];ee.measureText(Ke+" "+rn).width<le?Ke+=" "+rn:(ze.push(Ke),Ke=rn)}return ze.push(Ke),ze};s&&(ee.font=`${c}px Impact`,he(s,vi-20).forEach((le,me)=>{const ze=c+me*c*1.2;ee.strokeText(le,vi/2,ze),ee.fillText(le,vi/2,ze)})),o&&(ee.font=`${u}px Impact`,he(o,vi-20).reverse().forEach((le,me)=>{const ze=vi-u*1.2*(me+1);ee.strokeText(le,vi/2,ze),ee.fillText(le,vi/2,ze)}))})(re),await Promise.all(I.map(ee=>new Promise(he=>{const Ie=new window.Image;Ie.src=ee.src,Ie.onload=()=>{re.save(),re.translate(ee.x,ee.y),re.rotate(ee.rotation*Math.PI/180),re.scale(ee.scale,ee.scale),re.drawImage(Ie,-40,-40,80,80),re.restore(),he()},Ie.onerror=()=>he()})));try{h&&L(Z),p&&T(Z),w&&x(Z)}catch(ee){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ee),f(!1),g(!1),y(!1)}},L=Z=>{const re=Z.getContext("2d");if(!re)return;const de=re.getImageData(0,0,Z.width,Z.height),ee=de.data;for(let he=0;he<ee.length;he+=4){const Ie=ee[he],le=ee[he+1],me=ee[he+2],ze=(Ie+le+me)/3,Ke=1.8;ee[he]=Math.min(255,ze+(Ie-ze)*Ke),ee[he+1]=Math.min(255,ze+(le-ze)*Ke*.7),ee[he+2]=Math.min(255,ze+(me-ze)*Ke*.4);const Yt=1.3;ee[he]=Math.min(255,Math.max(0,ee[he]*Yt)),ee[he+1]=Math.min(255,Math.max(0,ee[he+1]*Yt)),ee[he+2]=Math.min(255,Math.max(0,ee[he+2]*Yt))}re.putImageData(de,0,0)},T=Z=>{const re=Z.getContext("2d");if(!re)return;const de=4,he=re.getImageData(0,0,Z.width,Z.height).data,Ie=new Uint8ClampedArray(he);for(let le=0;le<Z.height;le+=de)for(let me=0;me<Z.width;me+=de){const ze=(le*Z.width+me)*4,Ke=he[ze],Yt=he[ze+1],rn=he[ze+2],sn=he[ze+3];for(let _n=0;_n<de&&le+_n<Z.height;_n++)for(let Un=0;Un<de&&me+Un<Z.width;Un++){const or=((le+_n)*Z.width+(me+Un))*4;Ie[or]=Ke,Ie[or+1]=Yt,Ie[or+2]=rn,Ie[or+3]=sn}}re.putImageData(new ImageData(Ie,Z.width,Z.height),0,0)},x=Z=>{const re=Z.getContext("2d");if(!re)return;const de=re.getImageData(0,0,Z.width,Z.height),ee=de.data;for(let he=0;he<ee.length;he+=4){const Ie=(Math.random()-.5)*50;ee[he]=Math.max(0,Math.min(255,ee[he]+Ie)),ee[he+1]=Math.max(0,Math.min(255,ee[he+1]+Ie)),ee[he+2]=Math.max(0,Math.min(255,ee[he+2]+Ie))}re.putImageData(de,0,0)};O.useEffect(()=>{e.current&&q(e.current)},[q]);const $=Z=>{var de;const re=(de=Z.target.files)==null?void 0:de[0];re&&r(URL.createObjectURL(re))},R=()=>{r(null),i(""),a(""),l(36),d(36),f(!1),g(!1),y(!1)},k=async()=>{const Z=e.current;if(!Z)return;await q(Z);const re=document.createElement("a");re.download="meme.png",re.href=Z.toDataURL("image/png"),document.body.appendChild(re),re.click(),document.body.removeChild(re)},j=async Z=>{C(!0),E(!1);try{console.log("Fetching NFTs for collection:",Z);let re;if(Z.api==="opensea"){console.log("Using OpenSea API for:",Z.slug);const de=await FO(Z.slug,50);re=de.data,console.log("OpenSea response:",de)}else if(Z.api==="opensea-solana"){console.log("Using OpenSea Solana API for:",Z.slug);const de=await U7(Z.slug,50);re=de.data,console.log("OpenSea Solana response:",de)}else{console.log("Using Scatter API for:",Z.slug);const de=await jO(Z.slug,1,50);re=de.data,console.log("Scatter response:",de)}if(re&&re.length>0){const de=re[Math.floor(Math.random()*re.length)],ee=de.image||de.image_url||de.image_url_shrunk;console.log("Selected NFT:",de),console.log("Image URL:",ee),r(ee)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(re){console.error("Error fetching NFTs:",re),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},H=Z=>{const re={id:a2e(),src:Z,x:80,y:80,scale:1,rotation:0};A(de=>de.length>=2||de.some(ee=>ee.src===Z&&!ee.id.startsWith("upload-"))?de:[...de,re]),B(re.id)},X=Z=>{var de;const re=(de=Z.target.files)==null?void 0:de[0];if(re){const ee=URL.createObjectURL(re);H(ee)}},se=(Z,re,de)=>{A(ee=>ee.map(he=>{if(he.id!==Z)return he;let Ie=he.x+re/1.2,le=he.y+de/1.2;const me=40*he.scale,ze=40*he.scale;return Ie=Math.max(me,Math.min(vi-me,Ie)),le=Math.max(ze,Math.min(vi-ze,le)),{...he,x:Ie,y:le}}))},ne=(Z,re,de,ee,he)=>{A(Ie=>Ie.map(le=>{if(le.id!==Z)return le;const me=le.x,ze=le.y,Ke=Math.atan2(he-ze,ee-me)*180/Math.PI;return{...le,rotation:de+(Ke-re)*.5}}))},ae=Z=>{A(re=>re.filter(de=>de.id!==Z))},ye=(Z,re)=>{A(de=>de.map(ee=>ee.id===Z?{...ee,scale:Math.max(.2,ee.scale*(1+(re-1)*.2))}:ee))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>E(Z=>!Z),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:l2e.map(Z=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{j(Z)},children:Z.name},Z.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:$})]}),_&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:Z=>i(Z.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:Z=>l(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:Z=>a(Z.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:Z=>d(Number(Z.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(Z=>!Z),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(Z=>!Z),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(Z=>!Z),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[u2e.map((Z,re)=>m.jsx("img",{src:Z,alt:`sticker${re+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>H(Z)},Z)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:D,onChange:X})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:k,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:R,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:vi,height:vi,className:t.canvas})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:vi,height:vi,pointerEvents:"none"},children:I.map(Z=>P===Z.id?m.jsxs("div",{style:{position:"absolute",left:Z.x,top:Z.y,width:80*Z.scale,height:80*Z.scale,transform:`rotate(${Z.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:re=>{S(Z.id),re.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:re=>{N===Z.id&&re.buttons===1&&se(Z.id,re.movementX,re.movementY)},children:[m.jsx("img",{src:Z.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:re=>{var Ke;re.stopPropagation();const de=(Ke=re.currentTarget.parentElement)==null?void 0:Ke.getBoundingClientRect(),ee=de?de.left+de.width/2:0,he=de?de.top+de.height/2:0,Ie=Math.atan2(re.clientY-he,re.clientX-ee)*180/Math.PI,le=Z.rotation,me=Yt=>{ne(Z.id,Ie,le,Yt.clientX,Yt.clientY)},ze=()=>{window.removeEventListener("mousemove",me),window.removeEventListener("mouseup",ze)};window.addEventListener("mousemove",me),window.addEventListener("mouseup",ze)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:re=>{re.stopPropagation();const de=re.clientX,ee=Ie=>{const le=(Ie.clientX-de)/80;ye(Z.id,1+le)},he=()=>{window.removeEventListener("mousemove",ee),window.removeEventListener("mouseup",he)};window.addEventListener("mousemove",ee),window.addEventListener("mouseup",he)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>ae(Z.id),children:""}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>B(null),children:"Place"})]},Z.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function t0(){return t0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t0.apply(this,arguments)}var eu;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(eu||(eu={}));const YL="popstate";function d2e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return XT("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qH(s)}return f2e(e,n,null,t)}function Cr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function HH(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h2e(){return Math.random().toString(36).substr(2,8)}function QL(t,e){return{usr:t.state,key:t.key,idx:e}}function XT(t,e,n,r){return n===void 0&&(n=null),t0({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bg(e):e,{state:n,key:e&&e.key||r||h2e()})}function qH(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bg(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function f2e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=eu.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(t0({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=eu.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=eu.Push;let b=XT(g.location,w,y);l=u()+1;let E=QL(b,l),_=g.createHref(b);try{o.pushState(E,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(_)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=eu.Replace;let b=XT(g.location,w,y);l=u();let E=QL(b,l),_=g.createHref(b);o.replaceState(E,"",_),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:qH(w);return b=b.replace(/ $/,"%20"),Cr(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(YL,d),c=w,()=>{s.removeEventListener(YL,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var ZL;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ZL||(ZL={}));function p2e(t,e,n){return n===void 0&&(n="/"),g2e(t,e,n)}function g2e(t,e,n,r){let s=typeof e=="string"?Bg(e):e,i=KH(s.pathname||"/",n);if(i==null)return null;let o=GH(t);m2e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=x2e(i);a=A2e(o[c],l)}return a}function GH(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Cr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Vd([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Cr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),GH(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:C2e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of VH(i.path))s(i,o,c)}),e}function VH(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=VH(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function m2e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S2e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const y2e=/^:[\w-]+$/,w2e=3,b2e=2,v2e=1,E2e=10,_2e=-2,JL=t=>t==="*";function C2e(t,e){let n=t.split("/"),r=n.length;return n.some(JL)&&(r+=_2e),e&&(r+=b2e),n.filter(s=>!JL(s)).reduce((s,i)=>s+(y2e.test(i)?w2e:i===""?v2e:E2e),r)}function S2e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function A2e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=I2e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Vd([i,d.pathname]),pathnameBase:D2e(Vd([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Vd([i,d.pathnameBase]))}return o}function I2e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=N2e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function N2e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),HH(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function x2e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return HH(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function KH(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function T2e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bg(t):t;return{pathname:n?n.startsWith("/")?n:R2e(n,e):e,search:$2e(r),hash:M2e(s)}}function R2e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function dI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function P2e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function O2e(t,e){let n=P2e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function k2e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bg(t):(s=t0({},t),Cr(!s.pathname||!s.pathname.includes("?"),dI("?","pathname","search",s)),Cr(!s.pathname||!s.pathname.includes("#"),dI("#","pathname","hash",s)),Cr(!s.search||!s.search.includes("#"),dI("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=T2e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Vd=t=>t.join("/").replace(/\/\/+/g,"/"),D2e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$2e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,M2e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function L2e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YH=["post","put","patch","delete"];new Set(YH);const U2e=["get",...YH];new Set(U2e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function n0(){return n0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n0.apply(this,arguments)}const yk=O.createContext(null),B2e=O.createContext(null),m1=O.createContext(null),y1=O.createContext(null),jg=O.createContext({outlet:null,matches:[],isDataRoute:!1}),QH=O.createContext(null);function w1(){return O.useContext(y1)!=null}function ZH(){return w1()||Cr(!1),O.useContext(y1).location}function JH(t){O.useContext(m1).static||O.useLayoutEffect(t)}function j2e(){let{isDataRoute:t}=O.useContext(jg);return t?X2e():F2e()}function F2e(){w1()||Cr(!1);let t=O.useContext(yk),{basename:e,future:n,navigator:r}=O.useContext(m1),{matches:s}=O.useContext(jg),{pathname:i}=ZH(),o=JSON.stringify(O2e(s,n.v7_relativeSplatPath)),a=O.useRef(!1);return JH(()=>{a.current=!0}),O.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=k2e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Vd([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function W2e(t,e){return z2e(t,e)}function z2e(t,e,n,r){w1()||Cr(!1);let{navigator:s}=O.useContext(m1),{matches:i}=O.useContext(jg),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=ZH(),u;if(e){var d;let w=typeof e=="string"?Bg(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Cr(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=p2e(t,{pathname:f}),g=K2e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Vd([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Vd([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?O.createElement(y1.Provider,{value:{location:n0({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:eu.Pop}},g):g}function H2e(){let t=J2e(),e=L2e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const q2e=O.createElement(H2e,null);class G2e extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(jg.Provider,{value:this.props.routeContext},O.createElement(QH.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function V2e(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(yk);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(jg.Provider,{value:e},r)}function K2e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Cr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||q2e,c&&(l<0&&h===0?(eDe("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let E;return f?E=g:p?E=w:d.route.Component?E=O.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,O.createElement(V2e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?O.createElement(G2e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var XH=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(XH||{}),eq=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(eq||{});function Y2e(t){let e=O.useContext(yk);return e||Cr(!1),e}function Q2e(t){let e=O.useContext(B2e);return e||Cr(!1),e}function Z2e(t){let e=O.useContext(jg);return e||Cr(!1),e}function tq(t){let e=Z2e(),n=e.matches[e.matches.length-1];return n.route.id||Cr(!1),n.route.id}function J2e(){var t;let e=O.useContext(QH),n=Q2e(),r=tq();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function X2e(){let{router:t}=Y2e(XH.UseNavigateStable),e=tq(eq.UseNavigateStable),n=O.useRef(!1);return JH(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,n0({fromRouteId:e},i)))},[t,e])}const XL={};function eDe(t,e,n){XL[t]||(XL[t]=!0)}function tDe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function eE(t){Cr(!1)}function nDe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=eu.Pop,navigator:i,static:o=!1,future:a}=t;w1()&&Cr(!1);let c=e.replace(/^\/*/,"/"),l=O.useMemo(()=>({basename:c,navigator:i,static:o,future:n0({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Bg(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=O.useMemo(()=>{let w=KH(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:O.createElement(m1.Provider,{value:l},O.createElement(y1.Provider,{children:n,value:g}))}function rDe(t){let{children:e,location:n}=t;return W2e(eR(e),n)}new Promise(()=>{});function eR(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,eR(r.props.children,i));return}r.type!==eE&&Cr(!1),!r.props.index||!r.props.children||Cr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=eR(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const sDe="6";try{window.__reactRouterVersion=sDe}catch{}const iDe="startTransition",eU=jq[iDe];function oDe(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=d2e({window:s,v5Compat:!0}));let o=i.current,[a,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=O.useCallback(d=>{l&&eU?eU(()=>c(d)):c(d)},[c,l]);return O.useLayoutEffect(()=>o.listen(u),[o,u]),O.useEffect(()=>tDe(r),[r]),O.createElement(nDe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var tU;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(tU||(tU={}));var nU;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(nU||(nU={}));const aDe=la({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function cDe(){const t=aDe(),{open:e}=g1(),{address:n,isConnected:r}=D0(),{isPending:s}=P9(),{disconnect:i}=O9(),{data:o}=k9({address:n}),[a,c]=O.useState("pixelawbs-popup"),[l,u]=O.useState(new Set),[d,h]=O.useState(!1),[f,p]=O.useState(!1),[g,w]=O.useState(!1),[y,b]=O.useState(!1),E=j2e(),_=O.useRef(null);O.useEffect(()=>{if(a==="halloween-popup"&&_.current){const x=_.current.querySelector("script[data-tiktok-embed]");x&&x.remove();const $=document.createElement("script");$.src="https://www.tiktok.com/embed.js",$.async=!0,$.setAttribute("data-tiktok-embed","true"),_.current.appendChild($)}},[a]);const C=(x,$,R)=>{if(x==="url"&&R)window.open(R,"_blank");else if(x==="popup"&&$)c($),u(k=>{const j=new Set(k);return j.delete($),j}),document.body.offsetWidth;else if(x==="wallet")r?i():e();else if(x==="mint"){if(!n){alert("Please connect your wallet first!");return}h(!0)}else x==="nft-gallery"?p(!0):x==="meme-generator"?w(!0):x==="chess"&&(r?(b(!0),setTimeout(()=>{b(!1),E("/chess")},1500)):e().then(()=>{const k=()=>{window.ethereum&&window.ethereum.selectedAddress?(b(!0),setTimeout(()=>{b(!1),E("/chess")},1500)):setTimeout(k,200)};k()}))},I=()=>c(null),A=x=>{u($=>new Set($).add(x)),c(null)},N=x=>{x==="mint-popup"?h(!0):x==="nft-gallery-popup"?p(!0):x==="meme-generator-popup"?w(!0):c(x),u($=>{const R=new Set($);return R.delete(x),R})},S=()=>h(!1),D=()=>p(!1),P=()=>w(!1),B=()=>{h(!1),u(x=>new Set(x).add("mint-popup"))},q=()=>{p(!1),u(x=>new Set(x).add("nft-gallery-popup"))},L=()=>{w(!1),u(x=>new Set(x).add("meme-generator-popup"))},T=m.jsxs("div",{onClick:()=>{r?i():e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?"Connecting...":r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[y&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("img",{src:"/images/blueknight.png",alt:"Booting Chess...",style:{width:120,height:120,marginBottom:32}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(lpe,{onIconClick:C}),m.jsx(dpe,{minimizedWindows:Array.from(l),onRestoreWindow:N,walletButton:T,connectionStatus:{connected:r,address:n,ens:o||void 0}}),m.jsxs(no,{id:"chat-popup",isOpen:a==="chat-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"purity-popup",isOpen:a==="purity-popup",onClose:I,onMinimize:A,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"lawbstarz-popup",isOpen:a==="lawbstarz-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"lawbstation-popup",isOpen:a==="lawbstation-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(no,{id:"nexus-popup",isOpen:a==="nexus-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(no,{id:"lawbsters-popup",isOpen:a==="lawbsters-popup",onClose:I,onMinimize:A,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(Oue,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(no,{id:"pixelawbs-popup",isOpen:a==="pixelawbs-popup",onClose:I,onMinimize:A,children:(()=>{const x=$=>{$.preventDefault(),c(null),h(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:x,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(no,{id:"halloween-popup",isOpen:a==="halloween-popup",onClose:I,onMinimize:A,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:_,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),m.jsxs(no,{id:"lawb-popup",isOpen:a==="lawb-popup",onClose:I,onMinimize:A,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(ppe,{isOpen:d,onClose:S,onMinimize:B,walletAddress:n||""}),m.jsx(t2e,{isOpen:f,onClose:D,onMinimize:q,walletAddress:n}),m.jsx(no,{id:"meme-generator-popup",isOpen:g,onClose:P,onMinimize:L,children:m.jsx(zH,{})})]})}const lDe=la({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),rU=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],uDe=({onBack:t,walletAddress:e})=>{const n=lDe(),{open:r}=g1(),[s,i]=O.useState([]),[o,a]=O.useState(!0),[c,l]=O.useState(null),[u,d]=O.useState(rU[0]),[h,f]=O.useState(!1),[p,g]=O.useState(null),[w,y]=O.useState("all"),[b,E]=O.useState(null),_=O.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const D=await window.solana.connect();g(D.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const D=await window.solflare.connect();g(D.publicKey.toString());return}r()}catch(D){console.error("Failed to connect Solana wallet:",D),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);O.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),O.useEffect(()=>{(async()=>{a(!0);try{let S,D=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}D=p,S=await hpe(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await FO(u.slug,100,D):S=await jO(u.slug,1,100,D);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(B=>B.owners&&B.owners.length>0)?S.data=S.data.filter(B=>B.owners.some(L=>L.owner_of&&L.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),E("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),O.useEffect(()=>{h&&_()},[h,_]);const C=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await L7(u.chain,N.address,N.token_id.toString()),D={...N,attributes:JSON.stringify(S.traits||[])};l(D)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},I=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:N.map((S,D)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},D))})]})},A=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:rU.map(N=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{_()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void C(N),children:[m.jsx("img",{src:S,alt:N.name,onError:D=>{D.currentTarget.src!==N.image_url&&N.image_url?D.currentTarget.src=N.image_url:D.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?D.currentTarget.src=N.image_url_shrunk:D.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:N.name})]},N.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?I():A()})]})},dDe=la({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),Lo=({isOpen:t,onClose:e,title:n,children:r})=>{const s=dDe();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),m.jsx("div",{className:s.content,children:r})]})}):null},hDe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=O.useState([]),[i,o]=O.useState(!1),[a,c]=O.useState(!1),[l,u]=O.useState({}),[d,h]=O.useState(null),{data:f}=D9();O.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const _=await $7(n);s(_);const C={};_.forEach(I=>{C[I.id]=0}),u(C)}catch(_){h(_.message)}finally{o(!1)}},g=(_,C)=>{u(I=>({...I,[_]:Math.max(0,C)}))},w=async()=>{const _=Object.entries(l).filter(([,C])=>C>0).map(([C,I])=>({id:C,quantity:I}));if(_.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await M7(n,_);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const I=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${I}`),e()}catch(I){h("Transaction failed: "+I.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},y=(_,C)=>`${parseFloat(_)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},E={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(Lo,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:E,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(_=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:_.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(_.token_price,_.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",_.wallet_limit===4294967295?"Unlimited":_.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:_.wallet_limit===4294967295?void 0:_.wallet_limit,value:l[_.id]||"",onChange:C=>g(_.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},_.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},fDe=la({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),pDe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],gDe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],mDe=()=>{const t=fDe(),{open:e}=g1(),{address:n,isConnected:r}=D0(),{isPending:s}=P9(),{disconnect:i}=O9(),{data:o}=k9({address:n}),[a,c]=O.useState("main"),[l,u]=O.useState(!1),[d,h]=O.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=O.useState(!1),[g,w]=O.useState(!1),[y,b]=O.useState(!1),[E,_]=O.useState(!1),[C,I]=O.useState(!1),[A,N]=O.useState(!1),[S,D]=O.useState(!1),[P,B]=O.useState(!1),[q,L]=O.useState(!1),[T,x]=O.useState(!1),[$,R]=O.useState(!1),[k,j]=O.useState(!1),H=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>_(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],X=ae=>{ae.disabled||ae.action()};if(O.useEffect(()=>{const ae=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ae)},[]),O.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(uDe,{onBack:()=>c("main"),walletAddress:n||void 0});function se({open:ae,onClose:ye,title:Z,nfts:re}){const de=ee=>{switch(ee){case"lawbsters":N(!0);break;case"lawbstarz":D(!0);break;case"pixelawbs":B(!0);break;case"halloween":L(!0);break;case"lawbstation":x(!0);break;case"nexus":R(!0);break}};return m.jsx(Lo,{isOpen:ae,onClose:ye,title:Z,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:re.map(ee=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>de(ee.id),children:[m.jsx("img",{src:ee.image,alt:ee.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:ee.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:ee.description})]},ee.id))})})}function ne({open:ae,onClose:ye}){return ae?m.jsxs(Lo,{isOpen:ae,onClose:ye,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, a wormhole is available via ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:H.map(ae=>m.jsxs("div",{className:t.icon,onClick:()=>X(ae),children:[m.jsx("img",{src:ae.icon,alt:ae.label}),m.jsx("span",{children:ae.label})]},ae.label))}),l&&m.jsxs(Lo,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ae=>ae.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(hDe,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(se,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:pDe}),m.jsx(se,{open:E,onClose:()=>_(!1),title:"SOL NFTS FOLDER",nfts:gDe}),m.jsx(ne,{open:C,onClose:()=>I(!1)}),m.jsxs(Lo,{isOpen:A,onClose:()=>N(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Lo,{isOpen:S,onClose:()=>D(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Lo,{isOpen:P,onClose:()=>B(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{B(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(Lo,{isOpen:q,onClose:()=>L(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(Lo,{isOpen:T,onClose:()=>x(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Lo,{isOpen:$,onClose:()=>R(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(Lo,{isOpen:k,onClose:()=>j(!1),title:"Meme Generator",children:m.jsx(zH,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function yDe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=O.useState(e(t));function s(){r(e(t))}return O.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const wDe=Symbol(),sU=Object.getPrototypeOf,tR=new WeakMap,bDe=t=>t&&(tR.has(t)?tR.get(t):sU(t)===Object.prototype||sU(t)===Array.prototype),vDe=t=>bDe(t)&&t[wDe]||null,iU=(t,e=!0)=>{tR.set(t,e)},N_={},wk=t=>typeof t=="object"&&t!==null,EDe=t=>wk(t)&&!eb.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),nq=(t,e)=>{const n=nR.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return iU(r,!0),nR.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(eb.has(i))iU(i,!1);else if(Lu.has(i)){const[c,l]=Lu.get(i);a.value=nq(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},_De=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(oU(l,o)||r0.has(o)&&oU(l,r0.get(o))))return!0;n(i),wk(o)&&(o=vDe(o)||o);const u=!Lu.has(o)&&SDe(o)?Ln(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Lu=new WeakMap,eb=new WeakSet,nR=new WeakMap,Vm=[1,1],r0=new WeakMap;let oU=Object.is,CDe=(t,e)=>new Proxy(t,e),SDe=EDe,ADe=nq,IDe=_De;function Ln(t={}){if(!wk(t))throw new Error("object required");const e=r0.get(t);if(e)return e;let n=Vm[0];const r=new Set,s=(w,y=++Vm[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=Vm[1];const o=(w=++Vm[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const E=[...y];E[1]=[w,...E[1]],s(E,b)},c=new Map,l=(w,y)=>{const b=!eb.has(y)&&Lu.get(y);if(b){if((N_?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const E=b[2](a(w));c.set(w,[b,E])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,E],_)=>{if((N_?"production":void 0)!=="production"&&E)throw new Error("remove already exists");const C=b[2](a(_));c.set(_,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,E],_)=>{E&&(E(),c.set(_,[b]))})});let h=!0;const f=IDe(()=>h,l,u,s),p=CDe(t,f);r0.set(t,p);const g=[t,o,d];return Lu.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function pi(t,e,n){const r=Lu.get(t);(N_?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function s0(t){const e=Lu.get(t);(N_?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return ADe(n,r())}function lg(t){return eb.add(t),t}function NDe(){return{proxyStateMap:Lu,refSet:eb,snapCache:nR,versionHolder:Vm,proxyCache:r0}}function Ms(t,e,n,r){let s=t[e];return pi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:xDe,snapCache:TDe}=NDe(),gv=t=>xDe.has(t);function RDe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=TDe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return gv(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!gv(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!gv(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!gv(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=Ln(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var aU={};const ce={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof aU<"u"?aU.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},x_={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=ce.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},PDe={bigNumber(t){return t?new La(t):new La(0)},multiply(t,e){if(t===void 0||e===void 0)return new La(0);const n=new La(t),r=new La(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},ODe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],kDe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],DDe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],$De={getERC20Abi:t=>ce.USDT_CONTRACT_ADDRESSES.includes(t)?DDe:ODe,getSwapAbi:()=>kDe},tu={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},ht={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function hI(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const at={setItem(t,e){Km()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Km())return localStorage.getItem(t)||void 0},removeItem(t){Km()&&localStorage.removeItem(t)},clear(){Km()&&localStorage.clear()}};function Km(){return typeof window<"u"&&typeof localStorage<"u"}function T_(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Ts={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[ce.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},We={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=We.getActiveNamespace(),e=We.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{at.setItem(ht.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=at.getItem(ht.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{at.removeItem(ht.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{at.setItem(ht.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{at.setItem(ht.ACTIVE_CAIP_NETWORK_ID,t),We.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return at.getItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{at.removeItem(ht.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=hI(t);at.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=We.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),at.setItem(ht.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=at.getItem(ht.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=hI(t);at.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return at.getItem(ht.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=hI(t);return at.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{at.setItem(ht.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return at.getItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{at.removeItem(ht.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return at.getItem(ht.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=at.getItem(ht.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{at.setItem(ht.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return at.getItem(ht.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=at.getItem(ht.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));at.setItem(ht.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=We.getConnectedNamespaces();e.includes(t)||(e.push(t),We.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=We.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),We.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return at.getItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{at.setItem(ht.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{at.removeItem(ht.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=at.getItem(ht.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=We.getBalanceCache();at.setItem(ht.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=We.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;We.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=We.getBalanceCache();e[t.caipAddress]=t,at.setItem(ht.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=at.getItem(ht.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=We.getBalanceCache();at.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=We.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),We.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=We.getNativeBalanceCache();e[t.caipAddress]=t,at.setItem(ht.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=at.getItem(ht.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=We.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;We.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=We.getEnsCache();e[t.address]=t,at.setItem(ht.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=We.getEnsCache();at.setItem(ht.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=at.getItem(ht.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=We.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;We.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=We.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},at.setItem(ht.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=We.getIdentityCache();at.setItem(ht.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{at.removeItem(ht.PORTFOLIO_CACHE),at.removeItem(ht.NATIVE_BALANCE_CACHE),at.removeItem(ht.ENS_CACHE),at.removeItem(ht.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{at.setItem(ht.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=at.getItem(ht.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=We.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===ce.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};at.setItem(ht.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=at.getItem(ht.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=We.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),at.setItem(ht.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=at.getItem(ht.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=We.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),at.setItem(ht.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=We.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),at.setItem(ht.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(We.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},nt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return nt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Ts.TEN_SEC_MS:!0},isAllowedRetry(t,e=Ts.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(nt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Ts.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(nt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!nt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?We.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,nt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return ce.W3M_API_URL},getBlockchainApiUrl(){return ce.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return ce.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Ts.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in ce.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Rm(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class tb{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Rm(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Rm(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Rm(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Rm(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Rm(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const MDe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Ts.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(nt.isTelegram()){if(nt.isIos())return t.filter(e=>e!=="google");if(nt.isMac())return t.filter(e=>e!=="x");if(nt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},st=Ln({features:Ts.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Ts.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),gt={state:st,subscribeKey(t,e){return Ms(st,t,e)},setOptions(t){Object.assign(st,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...st.remoteFeatures,...t};st.remoteFeatures=e,(n=st.remoteFeatures)!=null&&n.socials&&(st.remoteFeatures.socials=MDe.filterSocialsByPlatform(st.remoteFeatures.socials))},setFeatures(t){if(!t)return;st.features||(st.features=Ts.DEFAULT_FEATURES);const e={...st.features,...t};st.features=e},setProjectId(t){st.projectId=t},setCustomRpcUrls(t){st.customRpcUrls=t},setAllWallets(t){st.allWallets=t},setIncludeWalletIds(t){st.includeWalletIds=t},setExcludeWalletIds(t){st.excludeWalletIds=t},setFeaturedWalletIds(t){st.featuredWalletIds=t},setTokens(t){st.tokens=t},setTermsConditionsUrl(t){st.termsConditionsUrl=t},setPrivacyPolicyUrl(t){st.privacyPolicyUrl=t},setCustomWallets(t){st.customWallets=t},setIsSiweEnabled(t){st.isSiweEnabled=t},setIsUniversalProvider(t){st.isUniversalProvider=t},setSdkVersion(t){st.sdkVersion=t},setMetadata(t){st.metadata=t},setDisableAppend(t){st.disableAppend=t},setEIP6963Enabled(t){st.enableEIP6963=t},setDebug(t){st.debug=t},setEnableWalletConnect(t){st.enableWalletConnect=t},setEnableWalletGuide(t){st.enableWalletGuide=t},setEnableAuthLogger(t){st.enableAuthLogger=t},setEnableWallets(t){st.enableWallets=t},setPreferUniversalLinks(t){st.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Ts.SIWX_DEFAULTS))t[e]??(t[e]=n);st.siwx=t},setConnectMethodsOrder(t){st.features={...st.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){st.features={...st.features,walletFeaturesOrder:t}},setSocialsOrder(t){st.remoteFeatures={...st.remoteFeatures,socials:t}},setCollapseWallets(t){st.features={...st.features,collapseWallets:t}},setEnableEmbedded(t){st.enableEmbedded=t},setAllowUnsupportedChain(t){st.allowUnsupportedChain=t},setManualWCControl(t){st.manualWCControl=t},setEnableNetworkSwitch(t){st.enableNetworkSwitch=t},setEnableReconnect(t){st.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(st.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){st.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return st.universalProviderConfigOverride},getSnapshot(){return s0(st)}},LDe=Object.freeze({enabled:!0,events:[]}),UDe=new tb({baseUrl:nt.getAnalyticsUrl(),clientId:null}),BDe=5,jDe=60*1e3,vl=Ln({...LDe}),FDe={state:vl,subscribeKey(t,e){return Ms(vl,t,e)},async sendError(t,e){if(!vl.enabled)return;const n=Date.now();if(vl.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<jDe}).length>=BDe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};vl.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=gt.state;await UDe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){vl.enabled=!0},disable(){vl.enabled=!1},clearEvents(){vl.events=[]}};class ug extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,ug.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,ug):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function cU(t,e){const n=t instanceof ug?t:new ug(t instanceof Error?t.message:String(t),e,t);throw FDe.sendError(n,n.category),n}function xo(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return cU(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return cU(a,e)}},n[r]=i}else n[r]=s}),n}var dg={};const WDe="https://secure.walletconnect.org/sdk",zDe=(typeof process<"u"&&typeof dg<"u"?dg.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||WDe,HDe=(typeof process<"u"&&typeof dg<"u"?dg.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",qDe=(typeof process<"u"&&typeof dg<"u"?dg.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Fe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Jr={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ka={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},GDe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ka.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ka.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ka.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ka.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===ce.CHAIN.SOLANA&&t===ka.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ka.COINBASE.url}/dapp?cb_url=${r}`)}},Ei=Ln({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),VDe={state:Ei,subscribeNetworkImages(t){return pi(Ei.networkImages,()=>t(Ei.networkImages))},subscribeKey(t,e){return Ms(Ei,t,e)},subscribe(t){return pi(Ei,()=>t(Ei))},setWalletImage(t,e){Ei.walletImages[t]=e},setNetworkImage(t,e){Ei.networkImages[t]=e},setChainImage(t,e){Ei.chainImages[t]=e},setConnectorImage(t,e){Ei.connectorImages={...Ei.connectorImages,[t]:e}},setTokenImage(t,e){Ei.tokenImages[t]=e},setCurrencyImage(t,e){Ei.currencyImages[t]=e}},qo=xo(VDe),KDe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},fI=Ln({networkImagePromises:{}}),YDe={async fetchWalletImage(t){if(t)return await ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(fI.networkImagePromises[t]||(fI.networkImagePromises[t]=ct._fetchNetworkImage(t)),await fI.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return qo.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return qo.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return qo.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return qo.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return qo.state.connectorImages[t.imageId]},getChainImage(t){return qo.state.networkImages[KDe[t]]}},El=Ln({message:"",variant:"info",open:!1}),QDe={state:El,subscribeKey(t,e){return Ms(El,t,e)},open(t,e){const{debug:n}=gt.state,{shortMessage:r,longMessage:s}=t;n&&(El.message=r,El.variant=e,El.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){El.open=!1,El.message="",El.variant="info"}},ld=xo(QDe),ZDe=nt.getAnalyticsUrl(),JDe=new tb({baseUrl:ZDe,clientId:null}),XDe=["MODAL_CREATED"],wc=Ln({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),zn={state:wc,subscribe(t){return pi(wc,()=>t(wc))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Xt.state.address;if(XDe.includes(t.data.event)||typeof window>"u")return;await JDe.post({path:"/e",params:zn.getSdkProperties(),body:{eventId:nt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),wc.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===ce.HTTP_STATUS_CODES.FORBIDDEN&&!wc.reportedErrors.FORBIDDEN&&(ld.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Km()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),wc.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;wc.timestamp=Date.now(),wc.data=t,(e=gt.state.features)!=null&&e.analytics&&zn._sendAnalyticsEvent(wc)}},e3e=nt.getApiUrl(),qs=new tb({baseUrl:e3e,clientId:null}),t3e=40,lU=4,n3e=20,bt=Ln({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ct={state:bt,subscribeKey(t,e){return Ms(bt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=gt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return gt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${qs.baseUrl}/getWalletImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});qo.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${qs.baseUrl}/public/getAssetImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});qo.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${qs.baseUrl}/public/getAssetImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});qo.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${qs.baseUrl}/public/getCurrencyImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});qo.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${qs.baseUrl}/public/getTokenImage/${t}`,n=await qs.getBlob({path:e,params:ct._getSdkProperties()});qo.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return nt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ka.COINBASE.id?!0:V.state.activeChain==="solana"&&(n.id===ka.SOLFLARE.id||n.id===ka.PHANTOM.id)):t},async fetchProjectConfig(){return(await qs.get({path:"/appkit/v1/config",params:ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await qs.get({path:"/projects/v1/origins",params:ct._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===ce.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=ce.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=V.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!YDe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Ye.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ka).map(o=>o.id));const r=await qs.get({path:"/getWallets",params:{...ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=gt.state;if(t!=null&&t.length){const e={...ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??lU,include:t},{data:n}=await ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ct._fetchWalletImage(i))),bt.featured=r,bt.allFeatured=r}},async fetchRecommendedWallets(){try{bt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=gt.state,r=[...e??[],...n??[]].filter(Boolean),s=V.getRequestedCaipNetworkIds().join(","),i={page:1,entries:lU,include:t,exclude:r,chains:s},{data:o,count:a}=await ct.fetchWallets(i),c=We.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ct._fetchWalletImage(d))),bt.recommended=o,bt.allRecommended=o,bt.count=a??0}catch{}finally{bt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=gt.state,s=V.getRequestedCaipNetworkIds().join(","),i=[...bt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:t3e,include:e,exclude:i,chains:s},{data:a,count:c}=await ct.fetchWallets(o),l=a.slice(0,n3e).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ct._fetchWalletImage(u))),bt.wallets=nt.uniqueBy([...bt.wallets,...ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),bt.count=c>bt.count?c:bt.count,bt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ct.fetchWallets(e);n&&n.forEach(r=>{bt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=gt.state,s=V.getRequestedCaipNetworkIds().join(",");bt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ct.fetchWallets(i);zn.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ct._fetchWalletImage(c)),nt.wait(300)]),bt.search=ct._filterOutExtensions(o)},initPromise(t,e){const n=bt.promises[t];return n||(bt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ct.initPromise("connectorImages",ct.fetchConnectorImages),e&&ct.initPromise("featuredWallets",ct.fetchFeaturedWallets),n&&ct.initPromise("recommendedWallets",ct.fetchRecommendedWallets),r&&ct.initPromise("networkImages",ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=gt.state.features)!=null&&t.analytics&&ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await qs.get({path:"/getAnalyticsConfig",params:ct._getSdkProperties()});gt.setFeatures({analytics:t})}catch{gt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){bt.featured=bt.allFeatured,bt.recommended=bt.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");bt.featured=bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.recommended=bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.filteredWallets=bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){bt.filteredWallets=[]},setFilterByNamespace(t){if(!t){bt.featured=bt.allFeatured,bt.recommended=bt.allRecommended;return}const e=V.getRequestedCaipNetworkIds().join(",");bt.featured=bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.recommended=bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),bt.filteredWallets=bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},fn=Ln({view:"Connect",history:["Connect"],transactionStack:[]}),r3e={state:fn,subscribeKey(t,e){return Ms(fn,t,e)},pushTransactionStack(t){fn.transactionStack.push(t)},popTransactionStack(t){const e=fn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),pt.goBack();break;case"cancel":s==null||s(),pt.goBack();break}},push(t,e){t!==fn.view&&(fn.view=t,fn.history.push(t),fn.data=e)},reset(t,e){fn.view=t,fn.history=[t],fn.data=e},replace(t,e){fn.history.at(-1)===t||(fn.view=t,fn.history[fn.history.length-1]=t,fn.data=e)},goBack(){var r;const t=V.state.activeCaipAddress,e=pt.state.view==="ConnectingFarcaster",n=!t&&e;if(fn.history.length>1){fn.history.pop();const[s]=fn.history.slice(-1);s&&(t&&s==="Connect"?fn.view="Account":fn.view=s)}else xn.close();(r=fn.data)!=null&&r.wallet&&(fn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Xt.setFarcasterUrl(void 0,V.state.activeChain);const a=Ye.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=s0(gt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(fn.history.length>1){fn.history=fn.history.slice(0,t+1);const[e]=fn.history.slice(-1);e&&(fn.view=e)}},goBackOrCloseModal(){pt.state.history.length>1?pt.goBack():xn.close()}},pt=xo(r3e),bc=Ln({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),rR={state:bc,subscribe(t){return pi(bc,()=>t(bc))},setThemeMode(t){bc.themeMode=t;try{const e=Ye.getAuthConnector();if(e){const n=rR.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:T_(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){bc.themeVariables={...bc.themeVariables,...t};try{const e=Ye.getAuthConnector();if(e){const n=rR.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:T_(bc.themeVariables,bc.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return s0(bc)}},mv=xo(rR),rq={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},qt=Ln({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...rq},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),s3e={state:qt,subscribe(t){return pi(qt,()=>{t(qt)})},subscribeKey(t,e){return Ms(qt,t,e)},initialize(t){t.forEach(e=>{const n=We.getConnectedConnectorId(e);n&&Ye.setConnectorId(n,e)})},setActiveConnector(t){t&&(qt.activeConnector=lg(t))},setConnectors(t){t.filter(s=>!qt.allConnectors.some(i=>i.id===s.id&&Ye.getConnectorName(i.name)===Ye.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&qt.allConnectors.push(lg(s))});const n=Ye.getEnabledNamespaces(),r=Ye.getEnabledConnectors(n);qt.connectors=Ye.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(qt.filterByNamespaceMap).forEach(e=>{qt.filterByNamespaceMap[e]=!1}),t.forEach(e=>{qt.filterByNamespaceMap[e]=!0}),Ye.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){qt.filterByNamespaceMap[t]=e,Ye.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Ye.getEnabledNamespaces(),e=Ye.getEnabledConnectors(t),n=Ye.areAllNamespacesEnabled();qt.connectors=Ye.mergeMultiChainConnectors(e),n?ct.clearFilterByNamespaces():ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(qt.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return qt.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(qt.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Ye.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===ce.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Ye.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===ce.CONNECTOR_ID.AUTH){const s=t,i=s0(gt.state),o=mv.getSnapshot().themeMode,a=mv.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:T_(a,o)}),Ye.setConnectors([t])}else Ye.setConnectors([t])},getAuthConnector(t){var r;const e=t||V.state.activeChain,n=qt.connectors.find(s=>s.id===ce.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return qt.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return qt.allConnectors.find(e=>e.id===t)},getConnector(t,e){return qt.allConnectors.filter(r=>r.chain===V.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=s0(gt.state),r=mv.getSnapshot().themeMode,s=mv.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:T_(s,r)})},getConnectorsByNamespace(t){const e=qt.allConnectors.filter(n=>n.chain===t);return Ye.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&tc(t)===Jr.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=Ye.getConnector(t.id,t.rdns);GDe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,V.state.activeChain),e?pt.push("ConnectingExternal",{connector:e}):pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Ye.getConnectorsByNamespace(t):Ye.mergeMultiChainConnectors(qt.allConnectors)},setFilterByNamespace(t){qt.filterByNamespace=t,qt.connectors=Ye.getConnectors(t),ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(qt.activeConnectorIds={...qt.activeConnectorIds,[e]:t},We.setConnectedConnectorId(e,t))},removeConnectorId(t){qt.activeConnectorIds={...qt.activeConnectorIds,[t]:void 0},We.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return qt.activeConnectorIds[t]},isConnected(t){return t?!!qt.activeConnectorIds[t]:Object.values(qt.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){qt.activeConnectorIds={...rq}}},Ye=xo(s3e),i3e=1e3,Pm={checkNamespaceConnectorId(t,e){return Ye.getConnectorId(t)===e},isSocialProvider(t){return Ts.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&Ye.setActiveConnector(e),s==null||s(nt.isMobile()&&t),r){const l=xn.subscribeKey("open",u=>{u||(pt.state.view!==r&&pt.replace(r),l(),a(new Error("Modal closed")))})}const c=V.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&xn.close(),c(),o(tu.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=V.subscribeKey("activeCaipAddress",s=>{s&&(xn.close(),r(),e(tu.parseCaipAddress(s)))});Ve.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=Xt.state.socialWindow,i=Xt.state.socialProvider,o=!1,a=null;const c=V.subscribeKey("activeCaipAddress",l=>{l&&(e&&xn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===ce.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=Ye.getAuthConnector();if(g&&!o){s&&(s.close(),Xt.setSocialWindow(void 0,V.state.activeChain),s=Xt.state.socialWindow),o=!0;const w=f.data.resultUri;i&&zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=V.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){We.setConnectedSocialProvider(i),await Ve.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=V.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(tu.parseCaipAddress(b)),zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(Xt.setSocialProvider(t,V.state.activeChain),i=Xt.state.socialProvider,zn.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=xn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=Ye.getAuthConnector();if(p&&!Xt.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();Xt.setFarcasterUrl(g,V.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=Ye.getAuthConnector();a=nt.returnOpenHref(`${ce.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){Xt.setSocialWindow(a,V.state.activeChain),s=Xt.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=xn.subscribeKey("open",c=>{c||(pt.state.view!==e&&pt.replace(e),a(),i(new Error("Modal closed")))})}const o=V.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&xn.close(),o(),s(tu.parseCaipAddress(a)))})})},async updateEmail(){const t=We.getConnectedConnectorId(V.state.activeChain),e=Ye.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==ce.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(xn.close(),clearInterval(i),o(),r({email:a}))},i3e),o=xn.subscribeKey("open",a=>{a||(pt.state.view!=="Connect"&&pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return V.checkIfSmartAccountEnabled()&&tc(t)===Jr.ACCOUNT_TYPES.EOA}};function sq(){var r,s;const t=((r=V.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=V.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Ts.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function tc(t){var n;return(n=V.getAccountData(t))==null?void 0:n.preferredAccountType}const iq={getConnectionStatus(t,e){const n=Ye.state.activeConnectorIds[e],r=Ve.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=gt.state.remoteFeatures)!=null&&a.multiWallet),n=Ye.state.activeConnectorIds[t],r=Ve.getConnections(t),i=(Ve.state.recentConnections.get(t)??[]).filter(c=>Ye.getConnectorById(c.connectorId)),o=iq.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},ud=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),fr=Ln({...ud}),o3e={state:fr,subscribeKey(t,e){return Ms(fr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=nt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){fr.message=ud.message,fr.variant=ud.variant,fr.svg=ud.svg,fr.open=ud.open,fr.autoClose=ud.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ud.autoClose}){fr.open?(fr.open=!1,setTimeout(()=>{fr.message=t,fr.variant=n,fr.svg=e,fr.open=!0,fr.autoClose=r},150)):(fr.message=t,fr.variant=n,fr.svg=e,fr.open=!0,fr.autoClose=r)}},nu=o3e,An=Ln({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),a3e={state:An,subscribe(t){return pi(An,()=>t(An))},setLastNetworkInView(t){An.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");An.loading=!0;try{const r=await dt.fetchTransactions({account:t,cursor:An.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Ym.filterSpamTransactions(r.data),i=Ym.filterByConnectedChain(s),o=[...An.transactions,...i];An.loading=!1,e==="coinbase"?An.coinbaseTransactions=Ym.groupTransactionsByYearAndMonth(An.coinbaseTransactions,r.data):(An.transactions=o,An.transactionsByYear=Ym.groupTransactionsByYearAndMonth(An.transactionsByYear,i)),An.empty=o.length===0,An.next=r.next?r.next:void 0}catch{const s=V.state.activeChain;zn.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:gt.state.projectId,cursor:An.next,isSmartAccount:tc(s)===Jr.ACCOUNT_TYPES.SMART_ACCOUNT}}),nu.showError("Failed to fetch transactions"),An.loading=!1,An.empty=!0,An.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){An.next=void 0},resetTransactions(){An.transactions=[],An.transactionsByYear={},An.lastNetworkInView=void 0,An.loading=!1,An.empty=!1,An.next=void 0}},Ym=xo(a3e,"API_ERROR"),$t=Ln({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let td;const c3e={state:$t,subscribe(t){return pi($t,()=>t($t))},subscribeKey(t,e){return Ms($t,t,e)},_getClient(){return $t._client},setClient(t){$t._client=lg(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);Ve.syncStorageConnections(e)},syncStorageConnections(t){const e=We.getConnections(),n=t??Array.from(V.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map($t.recentConnections);i.set(r,s),$t.recentConnections=i}},getConnections(t){return t?$t.connections.get(t)??[]:[]},hasAnyConnection(t){const e=Ve.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(nt.isTelegram()||nt.isSafari()&&nt.isIos()){if(td){await td,td=void 0;return}if(!nt.isPairingExpired($t==null?void 0:$t.wcPairingExpiry)){const s=$t.wcUri;$t.wcUri=s;return}td=(e=(t=Ve._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),Ve.state.status="connecting",await td,td=void 0,$t.wcPairingExpiry=void 0,Ve.state.status="connected"}else await((r=(n=Ve._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=Ve._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&V.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=Ve._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||V.state.activeChain;e&&Ye.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;xn.setLoading(!0,V.state.activeChain);const n=Ye.getAuthConnector();n&&(Xt.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),We.setPreferredAccountTypes(Object.entries(V.state.chains).reduce((s,[i,o])=>{const a=i,c=tc(a);return c!==void 0&&(s[a]=c),s},{})),await Ve.reconnectExternal(n),xn.setLoading(!1,V.state.activeChain),zn.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=Ve._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=Ve._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=Ve._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=Ve._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=Ve._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=Ve._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=Ve._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=Ve._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=Ve._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=Ve._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=Ve._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=Ve._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){$t.wcUri=void 0,$t.wcPairingExpiry=void 0,$t.wcLinking=void 0,$t.recentWallet=void 0,$t.status="disconnected",Ym.resetTransactions(),We.deleteWalletConnectDeepLink()},resetUri(){$t.wcUri=void 0,$t.wcPairingExpiry=void 0,td=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=Ve.state;t&&We.setWalletConnectDeepLink(t),e&&We.setAppKitRecent(e),zn.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){$t.wcBasic=t},setUri(t){$t.wcUri=t,$t.wcPairingExpiry=nt.getPairingExpiry()},setWcLinking(t){$t.wcLinking=t},setWcError(t){$t.wcError=t,$t.buffering=!1},setRecentWallet(t){$t.recentWallet=t},setBuffering(t){$t.buffering=t},setStatus(t){$t.status=t},setIsSwitchingConnection(t){$t.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=Ve._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new ug("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map($t.connections);n.set(e,t),$t.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=Xt.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Pm.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await Ve.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=Ye.getConnectorById(t.connectorId),s=t.connectorId===ce.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await Ve.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await Ve.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=Ye.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===ce.CONNECTOR_ID.AUTH,a=t.connectorId===ce.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Pm.isSocialProvider(i)){const{address:d}=await Pm.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){xn.open({view:"ConnectingFarcaster"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await Pm.connectEmail({closeModalOnConnect:r,onOpen(){xn.open({view:"EmailLogin"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Pm.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){xn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){pt.replace("ProfileWallets")}});c=d}else{const d=await Ve.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await Ve.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=Xt.getCaipAddress(n);if(o){const{address:c}=tu.parseCaipAddress(o);i=c}const a=iq.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await Ve.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await Ve.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},Ve=xo(c3e),Nf=Ln({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),gp={state:Nf,subscribe(t){return pi(Nf,()=>t(Nf))},subscribeOpen(t){return Ms(Nf,"open",t)},set(t){Object.assign(Nf,{...Nf,...t})}},l3e={async getTokenList(){var r;const t=V.state.activeCaipNetwork,e=await dt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=V.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(Ve==null?void 0:Ve.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await dt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await dt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=Ve.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await bk.getMyTokensWithBalance(t);return Xt.setTokenBalance(e,V.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:sq(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},cn=Ln({tokenBalances:[],loading:!1}),u3e={state:cn,subscribe(t){return pi(cn,()=>t(cn))},subscribeKey(t,e){return Ms(cn,t,e)},setToken(t){t&&(cn.token=lg(t))},setTokenAmount(t){cn.sendTokenAmount=t},setReceiverAddress(t){cn.receiverAddress=t},setReceiverProfileImageUrl(t){cn.receiverProfileImageUrl=t},setReceiverProfileName(t){cn.receiverProfileName=t},setNetworkBalanceInUsd(t){cn.networkBalanceInUSD=t},setLoading(t){cn.loading=t},async sendToken(){var t;try{switch(en.setLoading(!0),(t=V.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await en.sendEvmToken();return;case"solana":await en.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{en.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=V.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=tc(t);if(!en.state.sendTokenAmount||!en.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!en.state.token)throw new Error("A token is required");(n=en.state.token)!=null&&n.address?(zn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Jr.ACCOUNT_TYPES.SMART_ACCOUNT,token:en.state.token.address,amount:en.state.sendTokenAmount,network:((r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await en.sendERC20Token({receiverAddress:en.state.receiverAddress,tokenAddress:en.state.token.address,sendTokenAmount:en.state.sendTokenAmount,decimals:en.state.token.quantity.decimals})):(zn.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Jr.ACCOUNT_TYPES.SMART_ACCOUNT,token:en.state.token.symbol||"",amount:en.state.sendTokenAmount,network:((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await en.sendNativeToken({receiverAddress:en.state.receiverAddress,sendTokenAmount:en.state.sendTokenAmount,decimals:en.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;cn.loading=!0;const e=(i=V.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=V.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=V.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(cn.lastRetry&&!nt.isAllowedRetry(cn.lastRetry,30*Ts.ONE_SEC_MS))return cn.loading=!1,[];try{if(s&&e&&n){const a=await bk.getMyTokensWithBalance();return cn.tokenBalances=a,cn.lastRetry=void 0,a}}catch(a){cn.lastRetry=Date.now(),t==null||t(a),nu.showError("Token Balance Unavailable")}finally{cn.loading=!1}return[]},fetchNetworkBalance(){if(cn.tokenBalances.length===0)return;const t=l3e.mapBalancesToSwapTokens(cn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===sq());e&&(cn.networkBalanceInUSD=e?PDe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;pt.pushTransactionStack({});const e=t.receiverAddress,n=Xt.state.address,r=Ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await Ve.sendTransaction({chainNamespace:ce.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),zn.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:tc("eip155")===Jr.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=en.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=Ve._getClient())==null||a.updateBalance("eip155"),en.resetSend()},async sendERC20Token(t){pt.pushTransactionStack({onSuccess(){pt.replace("Account")}});const e=Ve.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Xt.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=nt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await Ve.writeContract({fromAddress:Xt.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:$De.getERC20Abi(n),chainNamespace:ce.CHAIN.EVM}),en.resetSend()}},async sendSolanaToken(){var t;if(!en.state.sendTokenAmount||!en.state.receiverAddress)throw new Error("An amount and receiver address are required");pt.pushTransactionStack({onSuccess(){pt.replace("Account")}}),await Ve.sendTransaction({chainNamespace:"solana",to:en.state.receiverAddress,value:en.state.sendTokenAmount}),(t=Ve._getClient())==null||t.updateBalance("solana"),en.resetSend()},resetSend(){cn.token=void 0,cn.sendTokenAmount=void 0,cn.receiverAddress=void 0,cn.receiverProfileImageUrl=void 0,cn.receiverProfileName=void 0,cn.loading=!1,cn.tokenBalances=[]}},en=xo(u3e),pI={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},yv={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Ae=Ln({chains:RDe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),d3e={state:Ae,subscribe(t){return pi(Ae,()=>{t(Ae)})},subscribeKey(t,e){return Ms(Ae,t,e)},subscribeChainProp(t,e,n){let r;return pi(Ae.chains,()=>{var i;const s=n||Ae.activeChain;if(s){const o=(i=Ae.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=We.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=gt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Ae.noAdapters=!0),Ae.noAdapters||(Ae.activeChain=a==null?void 0:a.namespace,Ae.activeCaipNetwork=i,V.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Ae.activeChain&&gp.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=We.getPreferredAccountTypes()||{},f={...gt.state.defaultAccountTypes,...h};V.state.chains.set(u,{namespace:u,networkState:Ln({...yv,caipNetwork:d==null?void 0:d[0]}),accountState:Ln({...pI,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),V.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Ae.activeChain===t){const r=Array.from(Ae.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&V.setActiveCaipNetwork(s)}}Ae.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Ae.chains.set(t.namespace,{namespace:t.namespace,networkState:{...yv,caipNetwork:r[0]},accountState:pI,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),V.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Ae.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Ae.chains.set(t.chainNamespace,{...e,caipNetworks:r}),V.setRequestedCaipNetworks(r,t.chainNamespace),Ye.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Ae.chains.get(t);if(n){const o=((r=Ae.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&V.setActiveCaipNetwork(n.caipNetworks[0]),Ae.chains.set(t,{...n,caipNetworks:a}),V.setRequestedCaipNetworks(a||[],t),a.length===0&&Ye.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Ae.chains.get(t);n&&(n.networkState={...n.networkState||yv,...e},Ae.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Ae.chains.get(t);if(r){const s={...r.accountState||pI,...e};Ae.chains.set(t,{...r,accountState:s}),(Ae.chains.size===1||Ae.activeChain===t)&&(e.caipAddress&&(Ae.activeCaipAddress=e.caipAddress),Xt.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Ae.chains.get(t);if(n){const r={...n.networkState||yv,...e};Ae.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){V.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Ae.activeChain=t;const e=t?Ae.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Ae.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Ae.activeCaipNetwork=n,V.setChainNetworkData(t,{caipNetwork:n}),We.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),gp.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Ae.activeChain!==t.chainNamespace&&V.setIsSwitchingNamespace(!0);const e=Ae.chains.get(t.chainNamespace);Ae.activeChain=t.chainNamespace,Ae.activeCaipNetwork=t,V.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Ae.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Ae.activeCaipAddress=void 0,V.setAccountProp("caipAddress",Ae.activeCaipAddress,t.chainNamespace),e&&Xt.replaceState(e.accountState),en.resetSend(),gp.set({activeChain:Ae.activeChain,selectedNetworkId:(i=Ae.activeCaipNetwork)==null?void 0:i.caipNetworkId}),We.setActiveCaipNetworkId(t.caipNetworkId),!V.checkIfSupportedNetwork(t.chainNamespace)&&gt.state.enableNetworkSwitch&&!gt.state.allowUnsupportedChain&&!Ve.state.wcBasic&&V.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Ae.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==V.state.activeChain,n=(s=V.getNetworkData(t))==null?void 0:s.caipNetwork,r=V.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await V.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=V.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=V.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Ae.activeCaipNetwork)==null?void 0:a.id)})),s=V.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&xn.close()}catch{pt.goBack()}zn.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Ae.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Ae.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Ae.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Ae.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Ae.activeChain;if(e&&(n=e),!n)return;const r=(s=Ae.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Ae.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Ae.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return nt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Ae.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=V.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){V.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=V.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Ye.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Ae.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=V.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Ae.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Ae.activeCaipNetwork},getActiveCaipAddress(){return Ae.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Ae.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=V.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());V.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Ae.activeCaipNetwork,r=V.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Ae.activeChain)return!0;const e=V.getRequestedCaipNetworks(Ae.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){V.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=x_.caipNetworkIdToNumber((r=Ae.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Ae.activeChain;if(!e||!t)return!1;const n=V.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){xn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Ae.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Ts.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){V.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=V.getAccountProp("preferredAccountType",e);Ae.activeCaipAddress=void 0,V.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),Ye.removeConnectorId(e)},setIsSwitchingNamespace(t){Ae.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Ae.chains.forEach(s=>{ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Ae.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=V.state.chains.get(t))==null?void 0:e.accountState:Xt.state},getNetworkData(t){var n;const e=t||Ae.activeChain;if(e)return(n=V.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=V.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Ye.state.filterByNamespace;return(t?[Ae.chains.get(t)]:Array.from(Ae.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?V.getRequestedCaipNetworks(t):V.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Ae.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Ae.lastConnectedSIWECaipNetwork}},V=xo(d3e),h3e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},oq=nt.getBlockchainApiUrl(),Gs=Ln({clientId:null,api:new tb({baseUrl:oq,clientId:null}),supportedChains:{http:[],ws:[]}}),dt={state:Gs,async get(t){const{st:e,sv:n}=dt.getSdkProperties(),r=gt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Gs.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=gt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Gs.supportedChains.http.length||await dt.getSupportedNetworks()}catch{return!1}return Gs.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await dt.get({path:"v1/supported-chains"});return Gs.supportedChains=t,t}catch{return Gs.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await dt.isNetworkSupported(e))return{avatar:"",name:""};const r=We.getIdentityFromCacheForAddress(t);if(r)return r;const s=await dt.get({path:`/v1/identity/${t}`,params:{sender:V.state.activeCaipAddress?nt.getPlainAddress(V.state.activeCaipAddress):void 0}});return We.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await dt.isNetworkSupported((a=V.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?dt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await dt.isNetworkSupported((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?dt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Gs.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:gt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await dt.isNetworkSupported((r=V.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?dt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=dt.getSdkProperties();if(!await dt.isNetworkSupported((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return dt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await dt.isNetworkSupported((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Gs.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Ts.CONVERT_SLIPPAGE_TOLERANCE},projectId:gt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((o=V.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return dt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=dt.getSdkProperties();if(!await dt.isNetworkSupported((l=V.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return nu.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=We.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await dt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return We.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Xt.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await dt.isNetworkSupported((i=V.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Gs.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await dt.isNetworkSupported((a=V.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Gs.api.post({path:"/v1/generators/onrampurl",params:{projectId:gt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await dt.isNetworkSupported((e=V.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await dt.get({path:"/v1/onramp/options"})}catch{return h3e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await dt.isNetworkSupported((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Gs.api.post({path:"/v1/onramp/quote",params:{projectId:gt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await dt.isNetworkSupported((n=V.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?dt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await dt.isNetworkSupported((s=V.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Gs.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:gt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Gs.clientId=t,Gs.api=new tb({baseUrl:oq,clientId:t})}},gI={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Rh(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},bk={async getMyTokensWithBalance(t){const e=Xt.state.address,n=V.state.activeCaipNetwork,r=Ye.getConnectorId("eip155")===ce.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=We.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===ce.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await dt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=gI.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await Ve.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await Ve.walletGetAssets({account:t,chainFilter:[s]});if(!gI.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>gI.createBalance(l,e.caipNetworkId));return We.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},va=Ln({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),f3e={state:va,replaceState(t){t&&Object.assign(va,lg(t))},subscribe(t){return V.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return V.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){V.setAccountProp("status",t,e)},getCaipAddress(t){return V.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?nt.getPlainAddress(t):void 0;e===V.state.activeChain&&(V.state.activeCaipAddress=t),V.setAccountProp("caipAddress",t,e),V.setAccountProp("address",n,e)},setBalance(t,e,n){V.setAccountProp("balance",t,n),V.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){V.setAccountProp("profileName",t,e)},setProfileImage(t,e){V.setAccountProp("profileImage",t,e)},setUser(t,e){V.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){V.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){V.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){V.setAccountProp("currentTab",t,V.state.activeChain)},setTokenBalance(t,e){t&&V.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){V.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=V.getAccountProp("addressLabels",n)||new Map;r.set(t,e),V.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=V.getAccountProp("addressLabels",e)||new Map;n.delete(t),V.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){V.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){V.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&V.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){V.setAccountProp("socialWindow",t?lg(t):void 0,e)},setFarcasterUrl(t,e){V.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;va.balanceLoading=!0;const e=(i=V.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=V.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=V.state.activeCaipAddress,s=r?nt.getPlainAddress(r):void 0;if(va.lastRetry&&!nt.isAllowedRetry(va.lastRetry,30*Ts.ONE_SEC_MS))return va.balanceLoading=!1,[];try{if(s&&e&&n){const a=await bk.getMyTokensWithBalance();return Xt.setTokenBalance(a,n),va.lastRetry=void 0,va.balanceLoading=!1,a}}catch(a){va.lastRetry=Date.now(),t==null||t(a),nu.showError("Token Balance Unavailable")}finally{va.balanceLoading=!1}return[]},resetAccount(t){V.resetAccount(t)}},Xt=xo(f3e),p3e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=V.state.activeCaipNetwork,r=pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Xt.getCaipAddress(V.state.activeChain),o=t.chainNamespace!==V.state.activeChain,a=Xt.getCaipAddress(t.chainNamespace),l=Ye.getConnectorId(V.state.activeChain)===ce.CONNECTOR_ID.AUTH,u=ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):pt.push("SwitchNetwork",{...r,network:t})}},Vs=Ln({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),g3e={state:Vs,subscribe(t){return pi(Vs,()=>t(Vs))},subscribeKey(t,e){return Ms(Vs,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=V.state.activeChain,r=e&&e!==n,s=(i=V.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(Ve.state.wcBasic?ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ct.prefetch(),Ye.setFilterByNamespace(t==null?void 0:t.namespace),xn.setLoading(!0,e),e&&r){const a=((o=V.getNetworkData(e))==null?void 0:o.caipNetwork)||V.getRequestedCaipNetworks(e)[0];a&&p3e.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=V.state.noAdapters;gt.state.manualWCControl||a&&!s?nt.isMobile()?pt.reset("AllWallets"):pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?pt.reset(t.view,t.data):s?pt.reset("Account"):pt.reset("Connect")}Vs.open=!0,gp.set({open:!0}),zn.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=gt.state.enableEmbedded,e=!!V.state.activeCaipAddress;Vs.open&&zn.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Vs.open=!1,pt.reset("Connect"),xn.clearLoading(),t?e?pt.replace("Account"):pt.push("Connect"):gp.set({open:!1}),Ve.resetUri()},setLoading(t,e){e&&Vs.loadingNamespaceMap.set(e,t),Vs.loading=t,gp.set({loading:t})},clearLoading(){Vs.loadingNamespaceMap.clear(),Vs.loading=!1},shake(){Vs.shake||(Vs.shake=!0,setTimeout(()=>{Vs.shake=!1},500))}},xn=xo(g3e),uU=2147483648,m3e={convertEVMChainIdToCoinType(t){if(t>=uU)throw new Error("Invalid chainId");return(uU|t)>>>0}},Xi=Ln({suggestions:[],loading:!1}),y3e={state:Xi,subscribe(t){return pi(Xi,()=>t(Xi))},subscribeKey(t,e){return Ms(Xi,t,e)},async resolveName(t){var e,n;try{return await dt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await dt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Xi.loading=!0,Xi.suggestions=[];const e=await dt.getEnsNameSuggestions(t);return Xi.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Xi.suggestions}catch(e){const n=tE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Xi.loading=!1}},async getNamesForAddress(t){try{if(!V.state.activeCaipNetwork)return[];const n=We.getEnsFromCacheForAddress(t);if(n)return n;const r=await dt.reverseLookupEnsName({address:t});return We.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=tE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=V.state.activeCaipNetwork,n=Xt.state.address,r=Ye.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Xi.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});pt.pushTransactionStack({onCancel(){pt.replace("RegisterAccountName")}});const i=await Ve.signMessage(s);Xi.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=m3e.convertEVMChainIdToCoinType(Number(o));await dt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Xt.setProfileName(t,e.chainNamespace),pt.replace("RegisterAccountNameSuccess")}catch(s){const i=tE.parseEnsApiError(s,`Error registering name ${t}`);throw pt.replace("RegisterAccountName"),new Error(i)}finally{Xi.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},tE=xo(y3e);let nd=null;const Ol={getSIWX(){return gt.state.siwx},async initializeIfEnabled(){var i;const t=gt.state.siwx,e=V.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(V.checkIfSupportedNetwork(n))try{if(nd&&await nd,(await t.getSessions(`${n}:${r}`,s)).length)return;await xn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=Ve._getClient())==null?void 0:i.disconnect().catch(console.error)),pt.reset("Connect"),nu.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=gt.state.siwx,e=nt.getPlainAddress(V.getActiveCaipAddress()),n=V.getActiveCaipNetwork(),r=Ve._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Ye.getConnectorId(n.chainNamespace)===ce.CONNECTOR_ID.AUTH&&pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),V.setLastConnectedSIWECaipNetwork(n),xn.close(),zn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!xn.state.open||pt.state.view==="ApproveTransaction")&&await xn.open({view:"SIWXSignMessage"}),nu.showError("Error signing message"),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=V.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,nt.getPlainAddress(V.getActiveCaipAddress())||""));s&&s.length>0?await V.switchActiveNetwork(r):await Ve.disconnect()}else await Ve.disconnect()}else xn.close();xn.close(),zn.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=V.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,nt.getPlainAddress(V.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=gt.state.siwx,e=nt.getPlainAddress(V.getActiveCaipAddress()),n=V.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=pt.state.view==="ApproveTransaction",r=pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Ol.getSIWX();if(!i||!s.includes(ce.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=V.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Ol.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(nd)return nd;const r=Ol.getSIWX();return r?(nd=r.addSession({data:t,message:e,signature:n}).finally(()=>{nd=null}),nd):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Ol.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=V.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(nu.showLoading("Authenticating...",{autoClose:!1}),Xt.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),zn.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Ol.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),zn.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Ol.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{nu.hide()}}return!0},getSIWXEventProperties(){var e;const t=V.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=V.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:tc(t)===Jr.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},Ai={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:ce.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Ti={ConnectorExplorerIds:{[ce.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[ce.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[ce.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[ce.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[Ai.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[Ai.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[Ai.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[Ai.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[Ai.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[Ai.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[Ai.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[Ai.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[Ai.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[Ai.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[Ai.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[ce.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[ce.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[ce.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[ce.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[ce.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[ce.CONNECTOR_ID.INJECTED]:"Browser Wallet",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[ce.CONNECTOR_ID.COINBASE]:"Coinbase",[ce.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[ce.CONNECTOR_ID.LEDGER]:"Ledger",[ce.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[ce.CONNECTOR_ID.INJECTED]:"INJECTED",[ce.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[ce.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[ce.CONNECTOR_ID.AUTH]:"AUTH",[Ai.CONNECTOR_TYPE_AUTH]:"AUTH"}},ri={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Ai.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=V.state.activeChain;return ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>Ye.getConnectorId(e)===ce.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},w3e=new AbortController,_l={EmbeddedWalletAbortController:w3e,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},b3e="rpc.walletconnect.org";function dU(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const mI=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Qm={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===b3e}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:ce.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${ce.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return mI.includes(e)?dU(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Ti.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Qm.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ql(a.url,a.config))}),mI.includes(t.caipNetworkId)&&r.push(Ql(dU(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ql(a))}),e_(r)},extendWagmiTransports(t,e,n){if(mI.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return e_([n,Ql(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:ce.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=We.getActiveCaipNetworkId(),n=V.getAllRequestedCaipNetworks(),r=Array.from(((c=V.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},hU={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Gr={set(t,e){Da.isClient&&localStorage.setItem(`${Fe.STORAGE_KEY}${t}`,e)},get(t){return Da.isClient?localStorage.getItem(`${Fe.STORAGE_KEY}${t}`):null},delete(t,e){Da.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Fe.STORAGE_KEY}${t}`))}},wv=30*1e3,Da={checkIfAllowedToTriggerEmail(){const t=Gr.get(Fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<wv){const n=Math.ceil((wv-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Gr.get(Fe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<wv)return Math.ceil((wv-e)/1e3)}return 0},checkIfRequestExists(t){return Jr.NOT_SAFE_RPC_METHODS.includes(t.method)||Jr.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(hU.transactionHash))||(t==null?void 0:t.match(hU.signedMessage)))?Fe.RPC_RESPONSE_TYPE_TX:Fe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Jr.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Kn=v.object({message:v.string()});function Re(t){return v.literal(Fe[t])}const b1=v.object({serializedMessage:v.string().optional(),accountAddress:v.string(),chainId:v.string(),notBefore:v.string().optional(),domain:v.string(),uri:v.string(),version:v.string(),nonce:v.string(),statement:v.string().optional(),resources:v.array(v.string()).optional(),requestId:v.string().optional(),issuedAt:v.string().optional(),expirationTime:v.string().optional()});v.object({accessList:v.array(v.string()),blockHash:v.string().nullable(),blockNumber:v.string().nullable(),chainId:v.string().or(v.number()),from:v.string(),gas:v.string(),hash:v.string(),input:v.string().nullable(),maxFeePerGas:v.string(),maxPriorityFeePerGas:v.string(),nonce:v.string(),r:v.string(),s:v.string(),to:v.string(),transactionIndex:v.string().nullable(),type:v.string(),v:v.string(),value:v.string()});const v3e=v.object({chainId:v.string().or(v.number()),rpcUrl:v.optional(v.string())}),E3e=v.object({email:v.string().email()}),_3e=v.object({otp:v.string()}),C3e=v.object({uri:v.string(),preferredAccountType:v.optional(v.string()),chainId:v.optional(v.string().or(v.number())),siwxMessage:v.optional(b1),rpcUrl:v.optional(v.string())}),S3e=v.object({chainId:v.optional(v.string().or(v.number())),preferredAccountType:v.optional(v.string()),socialUri:v.optional(v.string()),siwxMessage:v.optional(b1),rpcUrl:v.optional(v.string())}),A3e=v.object({provider:v.enum(["google","github","apple","facebook","x","discord"])}),I3e=v.object({email:v.string().email()}),N3e=v.object({otp:v.string()}),x3e=v.object({otp:v.string()}),T3e=v.object({themeMode:v.optional(v.enum(["light","dark"])),themeVariables:v.optional(v.record(v.string(),v.string().or(v.number()))),w3mThemeVariables:v.optional(v.record(v.string(),v.string()))}),R3e=v.object({metadata:v.object({name:v.string(),description:v.string(),url:v.string(),icons:v.array(v.string())}).optional(),sdkVersion:v.string().optional(),sdkType:v.string().optional(),projectId:v.string()}),P3e=v.object({type:v.string()}),O3e=v.object({action:v.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),k3e=v.object({url:v.string()}),D3e=v.object({userName:v.string()}),$3e=v.object({email:v.string().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),accounts:v.array(v.object({address:v.string(),type:v.enum([Jr.ACCOUNT_TYPES.EOA,Jr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:v.string().optional().nullable(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(b1)}),M3e=v.object({action:v.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),L3e=v.object({email:v.string().email().optional().nullable(),address:v.string(),chainId:v.string().or(v.number()),smartAccountDeployed:v.optional(v.boolean()),accounts:v.array(v.object({address:v.string(),type:v.enum([Jr.ACCOUNT_TYPES.EOA,Jr.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:v.optional(v.string()),signature:v.string().optional(),message:v.string().optional(),siwxMessage:v.optional(b1)}),U3e=v.object({uri:v.string()}),B3e=v.object({isConnected:v.boolean()}),j3e=v.object({chainId:v.string().or(v.number())}),F3e=v.object({chainId:v.string().or(v.number())}),W3e=v.object({newEmail:v.string().email()}),z3e=v.object({smartAccountEnabledNetworks:v.array(v.number())});v.object({address:v.string(),isDeployed:v.boolean()});const H3e=v.object({version:v.string().optional()}),q3e=v.object({type:v.string(),address:v.string()}),G3e=v.any(),V3e=v.object({method:v.literal("eth_accounts")}),K3e=v.object({method:v.literal("eth_blockNumber")}),Y3e=v.object({method:v.literal("eth_call"),params:v.array(v.any())}),Q3e=v.object({method:v.literal("eth_chainId")}),Z3e=v.object({method:v.literal("eth_estimateGas"),params:v.array(v.any())}),J3e=v.object({method:v.literal("eth_feeHistory"),params:v.array(v.any())}),X3e=v.object({method:v.literal("eth_gasPrice")}),e$e=v.object({method:v.literal("eth_getAccount"),params:v.array(v.any())}),t$e=v.object({method:v.literal("eth_getBalance"),params:v.array(v.any())}),n$e=v.object({method:v.literal("eth_getBlockByHash"),params:v.array(v.any())}),r$e=v.object({method:v.literal("eth_getBlockByNumber"),params:v.array(v.any())}),s$e=v.object({method:v.literal("eth_getBlockReceipts"),params:v.array(v.any())}),i$e=v.object({method:v.literal("eth_getBlockTransactionCountByHash"),params:v.array(v.any())}),o$e=v.object({method:v.literal("eth_getBlockTransactionCountByNumber"),params:v.array(v.any())}),a$e=v.object({method:v.literal("eth_getCode"),params:v.array(v.any())}),c$e=v.object({method:v.literal("eth_getFilterChanges"),params:v.array(v.any())}),l$e=v.object({method:v.literal("eth_getFilterLogs"),params:v.array(v.any())}),u$e=v.object({method:v.literal("eth_getLogs"),params:v.array(v.any())}),d$e=v.object({method:v.literal("eth_getProof"),params:v.array(v.any())}),h$e=v.object({method:v.literal("eth_getStorageAt"),params:v.array(v.any())}),f$e=v.object({method:v.literal("eth_getTransactionByBlockHashAndIndex"),params:v.array(v.any())}),p$e=v.object({method:v.literal("eth_getTransactionByBlockNumberAndIndex"),params:v.array(v.any())}),g$e=v.object({method:v.literal("eth_getTransactionByHash"),params:v.array(v.any())}),m$e=v.object({method:v.literal("eth_getTransactionCount"),params:v.array(v.any())}),y$e=v.object({method:v.literal("eth_getTransactionReceipt"),params:v.array(v.any())}),w$e=v.object({method:v.literal("eth_getUncleCountByBlockHash"),params:v.array(v.any())}),b$e=v.object({method:v.literal("eth_getUncleCountByBlockNumber"),params:v.array(v.any())}),v$e=v.object({method:v.literal("eth_maxPriorityFeePerGas")}),E$e=v.object({method:v.literal("eth_newBlockFilter")}),_$e=v.object({method:v.literal("eth_newFilter"),params:v.array(v.any())}),C$e=v.object({method:v.literal("eth_newPendingTransactionFilter")}),S$e=v.object({method:v.literal("eth_sendRawTransaction"),params:v.array(v.any())}),A$e=v.object({method:v.literal("eth_syncing"),params:v.array(v.any())}),I$e=v.object({method:v.literal("eth_uninstallFilter"),params:v.array(v.any())}),fU=v.object({method:v.literal("personal_sign"),params:v.array(v.any())}),N$e=v.object({method:v.literal("eth_signTypedData_v4"),params:v.array(v.any())}),x$e=v.object({method:v.literal("eth_sendTransaction"),params:v.array(v.any())}),T$e=v.object({method:v.literal("solana_signMessage"),params:v.object({message:v.string(),pubkey:v.string()})}),R$e=v.object({method:v.literal("solana_signTransaction"),params:v.object({transaction:v.string()})}),P$e=v.object({method:v.literal("solana_signAllTransactions"),params:v.object({transactions:v.array(v.string())})}),O$e=v.object({method:v.literal("solana_signAndSendTransaction"),params:v.object({transaction:v.string(),options:v.object({skipPreflight:v.boolean().optional(),preflightCommitment:v.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:v.number().optional(),minContextSlot:v.number().optional()}).optional()})}),k$e=v.object({method:v.literal("wallet_sendCalls"),params:v.array(v.object({chainId:v.string().or(v.number()).optional(),from:v.string().optional(),version:v.string().optional(),capabilities:v.any().optional(),calls:v.array(v.object({to:v.string().startsWith("0x"),data:v.string().startsWith("0x").optional(),value:v.string().optional()}))}))}),D$e=v.object({method:v.literal("wallet_getCallsStatus"),params:v.array(v.string())}),$$e=v.object({method:v.literal("wallet_getCapabilities"),params:v.array(v.string().or(v.number()).optional()).optional()}),M$e=v.object({method:v.literal("wallet_grantPermissions"),params:v.array(v.any())}),L$e=v.object({method:v.literal("wallet_revokePermissions"),params:v.any()}),U$e=v.object({method:v.literal("wallet_getAssets"),params:v.any()}),pU=v.object({token:v.string()}),Pe=v.object({id:v.string().optional()}),Om={appEvent:Pe.extend({type:Re("APP_SWITCH_NETWORK"),payload:v3e}).or(Pe.extend({type:Re("APP_CONNECT_EMAIL"),payload:E3e})).or(Pe.extend({type:Re("APP_CONNECT_DEVICE")})).or(Pe.extend({type:Re("APP_CONNECT_OTP"),payload:_3e})).or(Pe.extend({type:Re("APP_CONNECT_SOCIAL"),payload:C3e})).or(Pe.extend({type:Re("APP_GET_FARCASTER_URI")})).or(Pe.extend({type:Re("APP_CONNECT_FARCASTER")})).or(Pe.extend({type:Re("APP_GET_USER"),payload:v.optional(S3e)})).or(Pe.extend({type:Re("APP_GET_SOCIAL_REDIRECT_URI"),payload:A3e})).or(Pe.extend({type:Re("APP_SIGN_OUT")})).or(Pe.extend({type:Re("APP_IS_CONNECTED"),payload:v.optional(pU)})).or(Pe.extend({type:Re("APP_GET_CHAIN_ID")})).or(Pe.extend({type:Re("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Pe.extend({type:Re("APP_INIT_SMART_ACCOUNT")})).or(Pe.extend({type:Re("APP_SET_PREFERRED_ACCOUNT"),payload:P3e})).or(Pe.extend({type:Re("APP_RPC_REQUEST"),payload:fU.or(U$e).or(V3e).or(K3e).or(Y3e).or(Q3e).or(Z3e).or(J3e).or(X3e).or(e$e).or(t$e).or(n$e).or(r$e).or(s$e).or(i$e).or(o$e).or(a$e).or(c$e).or(l$e).or(u$e).or(d$e).or(h$e).or(f$e).or(p$e).or(g$e).or(m$e).or(y$e).or(w$e).or(b$e).or(v$e).or(E$e).or(_$e).or(C$e).or(S$e).or(A$e).or(I$e).or(fU).or(N$e).or(x$e).or(T$e).or(R$e).or(P$e).or(O$e).or(D$e).or(k$e).or($$e).or(M$e).or(L$e).and(v.object({chainId:v.string().or(v.number()).optional(),chainNamespace:v.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:v.string().optional()}))})).or(Pe.extend({type:Re("APP_UPDATE_EMAIL"),payload:I3e})).or(Pe.extend({type:Re("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:N3e})).or(Pe.extend({type:Re("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:x3e})).or(Pe.extend({type:Re("APP_SYNC_THEME"),payload:T3e})).or(Pe.extend({type:Re("APP_SYNC_DAPP_DATA"),payload:R3e})).or(Pe.extend({type:Re("APP_RELOAD")})).or(Pe.extend({type:Re("APP_RPC_ABORT")})),frameEvent:Pe.extend({type:Re("FRAME_SWITCH_NETWORK_ERROR"),payload:Kn}).or(Pe.extend({type:Re("FRAME_SWITCH_NETWORK_SUCCESS"),payload:F3e})).or(Pe.extend({type:Re("FRAME_CONNECT_EMAIL_SUCCESS"),payload:O3e})).or(Pe.extend({type:Re("FRAME_CONNECT_EMAIL_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:k3e})).or(Pe.extend({type:Re("FRAME_GET_FARCASTER_URI_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:D3e})).or(Pe.extend({type:Re("FRAME_CONNECT_FARCASTER_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_OTP_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_OTP_SUCCESS")})).or(Pe.extend({type:Re("FRAME_CONNECT_DEVICE_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Pe.extend({type:Re("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:$3e})).or(Pe.extend({type:Re("FRAME_CONNECT_SOCIAL_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_USER_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_USER_SUCCESS"),payload:L3e})).or(Pe.extend({type:Re("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:U3e})).or(Pe.extend({type:Re("FRAME_SIGN_OUT_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SIGN_OUT_SUCCESS")})).or(Pe.extend({type:Re("FRAME_IS_CONNECTED_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_IS_CONNECTED_SUCCESS"),payload:B3e})).or(Pe.extend({type:Re("FRAME_GET_CHAIN_ID_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_GET_CHAIN_ID_SUCCESS"),payload:j3e})).or(Pe.extend({type:Re("FRAME_RPC_REQUEST_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_RPC_REQUEST_SUCCESS"),payload:G3e})).or(Pe.extend({type:Re("FRAME_SESSION_UPDATE"),payload:pU})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_SUCCESS"),payload:M3e})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:W3e})).or(Pe.extend({type:Re("FRAME_SYNC_THEME_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SYNC_THEME_SUCCESS")})).or(Pe.extend({type:Re("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Pe.extend({type:Re("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:z3e})).or(Pe.extend({type:Re("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:q3e})).or(Pe.extend({type:Re("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_READY"),payload:H3e})).or(Pe.extend({type:Re("FRAME_RELOAD_ERROR"),payload:Kn})).or(Pe.extend({type:Re("FRAME_RELOAD_SUCCESS")}))};function yI(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function B$e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=ce.BLOCKCHAIN_API_RPC_URL}){const i=new URL(zDe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class j$e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=ce.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!yI(Fe.FRAME_EVENT_KEY,u))return;const d=Om.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Da.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Da.isClient&&window.addEventListener("message",({data:a})=>{if(!yI(Fe.FRAME_EVENT_KEY,a))return;const c=Om.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Da.isClient&&window.addEventListener("message",({data:a})=>{if(!yI(Fe.APP_EVENT_KEY,a))return;const c=Om.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Da.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Om.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Da.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Om.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Da.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=B$e({projectId:e,chainId:r,version:qDe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class F$e{constructor(e){var i;const n=Fh({level:HDe}),{logger:r,chunkLoggerController:s}=YC({opts:n});this.logger=es(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class W$e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new F$e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new j$e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Gr.get(Fe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Gr.get(Fe.EMAIL)}getUsername(){return Gr.get(Fe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Fe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Da.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Fe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Fe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Fe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Fe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Fe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Fe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Fe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Fe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Fe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Fe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Fe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Fe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Fe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Fe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Fe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Fe.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Fe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Fe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Fe.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Fe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Jr.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Fe.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Fe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Fe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Fe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Jr.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Jr.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Fe.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Fe.APP_SYNC_DAPP_DATA,Fe.APP_SYNC_THEME,Fe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Fe.APP_CONNECT_EMAIL,Fe.APP_CONNECT_DEVICE,Fe.APP_CONNECT_OTP,Fe.APP_CONNECT_SOCIAL,Fe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,E,_;w.id===u&&((E=y==null?void 0:(b=y.logger).info)==null||E.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((_=w.payload)==null?void 0:_.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Gr.set(Fe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Gr.set(Fe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Gr.set(Fe.EMAIL,e),Gr.set(Fe.EMAIL_LOGIN_USED_KEY,"true"),Gr.delete(Fe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Gr.delete(Fe.EMAIL_LOGIN_USED_KEY),Gr.delete(Fe.EMAIL),Gr.delete(Fe.LAST_USED_CHAIN_KEY),Gr.delete(Fe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Gr.set(Fe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Gr.get(Fe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Gr.set(Fe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=tu.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class mp{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return mp.instance||(mp.instance=new W$e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),mp.instance}}const z$e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},gU={filterOutDuplicatesByRDNS(t){const e=gt.state.enableEIP6963?Ye.state.connectors:[],n=We.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&nt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=Ye.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=We.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Ye.state,{featuredWalletIds:n}=gt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=gt.state.features)==null?void 0:c.connectMethodsOrder),r=e||Ye.state.connectors;if(n)return n;const{injected:s,announced:i}=nE.getConnectorsByType(r,ct.state.recommended,ct.state.featured),o=s.filter(nE.showConnector),a=i.filter(nE.showConnector);return o.length||a.length?["wallet","email","social"]:z$e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ct.state.excludedWallets.some(r=>ri.isLowerCaseMatch(r.name,t.name));return e||n}},nE={getConnectorsByType(t,e,n){const{customWallets:r}=gt.state,s=We.getRecentWallets(),i=gU.filterOutDuplicateWallets(e),o=gU.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ct.state.excludedWallets.some(i=>ri.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!nt.isMobile()||nt.isMobile()&&!e&&!Ve.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(V.state.chains.values()).some(n=>Ye.getConnectorId(n.namespace)===ce.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=gt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:gt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!nt.isMobile())return{accounts:[],chainId:void 0};if(t.id===ce.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Wc`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Wc`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Wc`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const rE={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([rE.getAddresses(t),rE.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:rE.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Ti.NetworkImageIds[e.id]]}]})}},xf={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function nb(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const mU=nb({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),yU=nb({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});nb({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});nb({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});nb({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const H$e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Kd={getMethodsByChainNamespace(t){return H$e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case mU.caipNetworkId:u.chains.push(mU.deprecatedCaipNetworkId);break;case yU.caipNetworkId:u.chains.push(yU.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await tE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Kd.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Kd.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>nt.isCaipAddress(d)).map(d=>tu.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>tu.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class q$e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case ce.CHAIN.EVM:await this.syncEVMConnections(e);break;case ce.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case ce.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ce.CONNECTOR_ID.WALLET_CONNECT){const c=Kd.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await nE.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==ce.CONNECTOR_ID.AUTH&&a.id!==ce.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===ce.CONNECTOR_ID.WALLET_CONNECT){const c=Kd.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===ce.CONNECTOR_ID.WALLET_CONNECT){const b=Kd.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(E=>({address:E.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>nt.createAccount(ce.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:ce.CHAIN.BITCOIN,publicKey:((h=u[xf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[xf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[xf.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:ce.CHAIN.BITCOIN,publicKey:((g=u[xf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[xf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[xf.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>ri.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>ri.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>ri.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>ri.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>ri.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class aq{constructor({provider:e,namespace:n}){this.id=ce.CONNECTOR_ID.WALLET_CONNECT,this.name=Ti.ConnectorNamesMap[ce.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Ti.ConnectorImageIds[ce.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=V.getCaipNetworks.bind(V),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=gt.state.universalProviderConfigOverride,s=Kd.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Ol.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:G$e})}}const G$e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],V$e=[ce.CONNECTOR_ID.AUTH,ce.CONNECTOR_ID.WALLET_CONNECT];class K$e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>V.getCaipNetworks(n),this.getConnectorId=n=>Ye.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new q$e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:ce.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:ce.CONNECTOR_ID.AUTH,type:"AUTH",name:ce.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ti.ConnectorImageIds[ce.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!ri.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){Xt.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=tc(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof aq);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=nt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=nt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=nt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&ri.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=nt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),ri.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?rE.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),ri.isLowerCaseMatch(this.getConnectorId(ce.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(V$e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function Y$e(t){let e=[],n,r;function s(a){return x_.parseEvmChainId(a)||1}function i(){var a;return n||(n=mp.getInstance({projectId:t.options.projectId,chainId:(a=V.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ld.open(_l.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ld.open(_l.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ld.open(_l.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:_l.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>V.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=x_.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=tc("eip155"),{address:d,chainId:h,accounts:f}=await Ol.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:ce.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:ce.CONNECTOR_ID.AUTH,name:ce.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:ce.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=mp.getInstance({projectId:t.options.projectId,chainId:(c=V.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:_l.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ld.open(_l.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ld.open(_l.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ld.open(_l.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>V.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=V.state.activeChain===ce.CHAIN.EVM;if(ce.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>Ye.getConnectorId(h)===ce.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Ya(new Error("chain not found on connector."));const d=await this.getProvider(),h=tc("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Ya(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Dc)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}vk.type="walletConnect";function vk(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:vk.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=V.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Tl;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=gt.state.universalProviderConfigOverride;if(!w.session||y){const S=Kd.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(D=>Number(D.id)))}const E=await this.getAccounts(),_=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=C==null?void 0:C.some(S=>Number(S.split(":")[1])===_);let A=1;I?A=_:C!=null&&C[0]&&(A=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${A}`),{accounts:E,chainId:A}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new gr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[ce.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(E=>E.split(":")[2]))??[],p=new Set;return f.filter(E=>{const _=E==null?void 0:E.toLowerCase();return p.has(_)?!1:(p.add(_),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=We.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=We.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(E=>E.id===w);b&&b.chainNamespace===ce.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(ce.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[ce.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=V.getCaipNetworks().find(E=>E.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new Tl;const p=V.getCaipNetworks().find(E=>E.id===h);if(!p)throw new Ya(new Cw);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:He(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const E=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...E,h]),{...p,id:p.id}}catch(E){const _=E;if(/(?:user rejected)/iu.test(_.message))throw new gr(_);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],A={blockExplorerUrls:C,chainId:He(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[A]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(C){throw new gr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Dc(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(V.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[ce.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const km=Ln({pendingTransactions:0}),wU={state:km,subscribeKey(t,e){return Ms(km,t,e)},increase(t){km[t]+=1},decrease(t){km[t]-=1},reset(t){km[t]=0}};function Q$e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Z$e(t){if(nt.isSafeApp()){const{safe:e}=await hs(async()=>{const{safe:n}=await import("./index-Ww1Qis_C.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function J$e(t){try{const{coinbaseWallet:e}=await hs(async()=>{const{coinbaseWallet:n}=await import("./index-Ww1Qis_C.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const X$e={enable:!1,pollingInterval:3e4};class e5e extends K$e{constructor(e){const n=Qm.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=ce.CHAIN.EVM,this.adapterType=ce.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...X$e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===ce.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>nt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=up(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>nt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=up(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===ce.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Qm.getCaipNetworkId(s);i?n[s.id]=Qm.extendWagmiTransports(s,e.projectId,i):n[s.id]=Qm.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=Coe({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=roe(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),wU.increase("pendingTransactions")}});const e=wU.subscribeKey("pendingTransactions",n=>{var r;n>=ce.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){i9(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),o9(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===ce.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:We.getConnectedSocialProvider(),username:We.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await J$e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Z$e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(vk(e,n)),e.enableEIP6963!==!1&&r.push(SC({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(Y$e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Ti.ConnectorNamesMap[r.id]??r.name,imageId:Ti.ConnectorImageIds[r.id],type:Ti.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===ce.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await eoe(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=up(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await Jie(this.wagmiConfig,s);const i=await Xie(this.wagmiConfig,s);return await c9(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(x_.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await l9(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await qie(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return Sse(e.value,e.decimals)}formatUnits(e){return Rh(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===ce.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===ce.CONNECTOR_ID.AUTH||e.id===ce.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Ti.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Ti.ConnectorNamesMap[e.id]??e.name,imageId:Ti.ConnectorImageIds[e.id],type:Ti.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===ce.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){a9(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=Bo(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(nt.isSafeApp()&&n===ce.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await Mv(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await Mv(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await I3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===ce.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,E)=>ri.isLowerCaseMatch(b,r)?-1:ri.isLowerCaseMatch(E,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await Mv(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await fx(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=We.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await Kie(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});We.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=Bo(this.wagmiConfig).find(i=>ri.isLowerCaseMatch(i.connector.id,e.id));return await dx(this.wagmiConfig,{connector:n}),gt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=Bo(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await dx(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await I3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=Bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=Q$e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=Bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=Bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=Bo(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:ce.CONNECTOR_ID.AUTH,type:"AUTH",name:ce.CONNECTOR_NAMES.AUTH,provider:e,imageId:Ti.ConnectorImageIds[ce.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=Bo(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(V.state.activeChain==="eip155")return;fx(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new aq({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const cq={id:1992,name:"Sanko Testnet",network:"sanko",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://sanko-scan.caldera.xyz"}}},lq="7c65f27254d6ddd24cf7eedf2685c4fb",t5e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},uq=new e5e({networks:[FH,cq],projectId:lq,ssr:!1});Xke({adapters:[uq],networks:[FH,cq],projectId:lq,metadata:t5e,features:{analytics:!1}});const dq=()=>{if(!vE)throw new Error("[FIREBASE] Database not initialized");return vE},Sh=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,R_=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;const n=new Date().toISOString(),r=dq(),s=to(r,`leaderboard/${t}`),i=await dd(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await ny(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Sh(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},n5e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Sh(e),redPlayer:Sh(n)}),await R_(e,t==="blue"?"win":t==="red"?"loss":"draw"),await R_(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},hq=async(t=20)=>{try{const e=dq(),n=to(e,"leaderboard"),r=await dd(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Ea=()=>{if(!vE)throw new Error("[FIREBASE] Database not initialized");return vE},_i={async getGame(t){try{const e=Ea(),n=to(e,`chess_games/${t}`),r=await dd(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Ea(),r=to(n,`chess_games/${t}`);await ny(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Ea(),r=to(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=C2(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Ea(),r=to(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await ny(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await dd(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Ea(),e=to(t,"chess_games"),n=await dd(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Ea(),e=to(t,"chess_games"),n=await dd(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Ea(),n=to(e,`chess_games/${t}`);await IQ(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Ea(),n=to(e,`leaderboard/${t.username}`);await ny(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Ea(),e=to(t,"leaderboard"),n=await dd(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Ea(),n=to(e,"leaderboard");return C2(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},Tf=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"createGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"}],vc="0x3112AF5728520F52FD1C6710dD7bD52285a68e47",Yn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},wI={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},Cl=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],r5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function s5e(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}const fq=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=D0(),[i,o]=O.useState(""),[a,c]=O.useState(""),[l,u]=O.useState(!1),[d,h]=O.useState(!1),[f,p]=O.useState(!1),[g,w]=O.useState(!1),{writeContract:y,isPending:b,data:E}=US(),{writeContract:_,isPending:C,data:I}=US(),{writeContract:A,isPending:N,data:S}=US(),D=Hae(),{isLoading:P}=LS({hash:E}),{isLoading:B}=LS({hash:I}),{isLoading:q}=LS({hash:S}),{data:L}=j3({address:vc,abi:Tf,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:T}=j3({address:vc,abi:Tf,functionName:"games",args:L?[L]:void 0,query:{enabled:!!L&&L!=="0x000000000000"}}),[x,$]=O.useState(""),R=async()=>{if(!r||!x||!le){console.error("[CLAIM] Missing required data for claiming winnings");return}try{p(!0),console.log("[CLAIM] Claiming winnings for game:",x,"Player:",le,"Address:",r);const M=await _i.getGame(x);if(!M){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",M);let G=null;if(M.winner&&(M.blue_player||M.red_player)&&(G=M.winner==="blue"?M.blue_player:M.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:M.winner,winnerAddress:G})),!G&&T)if(M.winner&&(M.winner==="blue"||M.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let Q,ie,Ge,Ce,Qe,Lt;if(Array.isArray(T))[Q,ie,Ge,Ce,Qe,Lt]=T;else{console.error("[CLAIM] Unexpected contract data format:",T),alert("Failed to verify winner. Please try again.");return}G=M.winner==="blue"?Q:ie,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:M.winner,winnerAddress:G,player1:Q,player2:ie})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",T);let Q,ie,Ge,Ce,Qe,Lt;if(Array.isArray(T))[Q,ie,Ge,Ce,Qe,Lt]=T;else{console.error("[CLAIM] Unexpected contract data format:",T),alert("Failed to verify winner. Please try again.");return}const Pt=String(Ce);if(Pt.startsWith("0x"))G=Pt;else if(Pt==="blue"||Pt==="red")G=Pt==="blue"?Q:ie;else if(Pt==="1"||Pt==="2")G=Pt==="1"?Q:ie;else{console.error("[CLAIM] Unknown winner format:",Ce,"as string:",Pt),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:Ce,winnerAddress:G,player1:Q,player2:ie,winnerType:typeof Ce,winnerValue:Ce,address:r,addressType:typeof r})}if(!G){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:G,address:r,playerColor:le,winnerAddressType:typeof G,addressType:typeof r,addressesMatch:G===r,winnerAddressLength:G==null?void 0:G.length,addressLength:r==null?void 0:r.length}),G!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:G,address:r,playerColor:le}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let F=M.invite_code;if(!F&&T){console.log("[CLAIM] Using invite code from contract data");let Q,ie,Ge,Ce,Qe,Lt;if(Array.isArray(T))[Q,ie,Ge,Ce,Qe,Lt]=T,F=Qe;else{console.error("[CLAIM] Unexpected contract data format for invite code:",T),alert("Failed to get invite code. Please try again.");return}}if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",F),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:F,winner:G,functionName:"endGame",inviteCodeSource:M.invite_code?"Firebase":"Contract"}),A({address:vc,abi:Tf,functionName:"endGame",args:[F,G]}),console.log("[CLAIM] Contract call initiated successfully"),N?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:N,endGameHash:S})}catch(M){console.error("[CLAIM] Error claiming winnings:",M),alert("Failed to claim winnings. Please try again.")}finally{p(!1)}},[k,j]=O.useState(Cl),[H,X]=O.useState("blue"),[se,ne]=O.useState(null),[ae,ye]=O.useState([]),[Z,re]=O.useState([]),[de,ee]=O.useState("Waiting for opponent..."),[he,Ie]=O.useState(Yn.LOBBY),[le,me]=O.useState(null),[ze,Ke]=O.useState(null),[Yt,rn]=O.useState(0),[sn,_n]=O.useState([]),[Un,or]=O.useState(!1),[ss,To]=O.useState(null),[Ft,ur]=O.useState(null),[sc,qh]=O.useState(""),[is,Fg]=O.useState(0),[v1,rb]=O.useState(!1),[Wg,sb]=O.useState(!1),[Gh,ic]=O.useState(!1),[on,Vh]=O.useState(null),[zg,Vi]=O.useState(!1),[ib,E1]=O.useState(!0),[Kh,Hg]=O.useState(null),[Ls,ob]=O.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[_1,C1]=O.useState([]),[il,da]=O.useState(null),Us=O.useRef(null),oc=O.useRef(null),ab=O.useRef(r);O.useEffect(()=>{ab.current=r},[r]),O.useEffect(()=>{I&&!B&&Ft&&(console.log("[CONTRACT] Join transaction confirmed:",I),r===Ft.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),me("red"),Ke(Ft.gameData.blue_player)),_i.updateGame(Ft.inviteCode,{...Ft.gameData,red_player:Ft.address,game_state:"active"}).then(()=>{Ie(Yn.ACTIVE),ee("Game started!"),ol(Ft.inviteCode),ur(null)}).catch(M=>{console.error("Error updating game in database:",M),ee("Joined game on contract but failed to update database"),ur(null)}))},[I,B,Ft,r]),O.useEffect(()=>{S&&!q&&(console.log("[CLAIM] End game transaction confirmed:",S),ee("Winnings claimed successfully! Transaction hash: "+S.slice(0,10)+"..."),p(!1))},[S,q]),O.useEffect(()=>{N===!1&&f&&!S&&(console.log("[CLAIM] End game transaction rejected or failed"),ee("Claim transaction was rejected. Please try again."),p(!1))},[N,f,S]),O.useEffect(()=>{E&&!P&&ss&&!x&&(console.log("[CONTRACT] Create game transaction confirmed:",E),_i.createGame(ss).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),$(ss.invite_code),me("blue"),rn(is),Ie(Yn.WAITING),ee("Waiting for opponent to join..."),ol(ss.invite_code),setTimeout(()=>{Qh()},1e3),To(null),or(!1)}).catch(M=>{console.error("[FIREBASE] Error creating game after transaction:",M),ee("Transaction confirmed but failed to create game in database"),To(null),or(!1)}))},[E,P,ss,is]),O.useEffect(()=>{b===!1&&ss&&!E&&(console.log("[CONTRACT] Create game transaction rejected or failed"),ee("Transaction was rejected. Please try again."),To(null),or(!1))},[b,ss,E]),O.useEffect(()=>{C===!1&&Ft&&!I&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",C),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",Ft),console.log("[CONTRACT] Rejection details - joinGameHash:",I),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",L),ee("Transaction was rejected. Please try again."),$(""),me(null),rn(0),Ke(null),Ie(Yn.LOBBY),ee(""),ur(null))},[C,Ft,I,r,L]),O.useEffect(()=>{r&&L!==void 0&&(g||(L!=="0x000000000000"&&T||L==="0x000000000000")&&S1())},[r,L,T,g]),O.useEffect(()=>{w(!1)},[r]),O.useEffect(()=>()=>{T1(),Us.current&&Us.current(),oc.current&&clearTimeout(oc.current)},[]);const S1=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),L&&L!=="0x000000000000"&&!T){console.log("[GAME_STATE] Waiting for contract data...");return}if(L&&L!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",L),T)){let F,Q,ie,Ge,Ce,Qe;if(Array.isArray(T))[F,Q,ie,Ge,Ce,Qe]=T;else{console.error("[GAME_STATE] Unexpected contract data format:",T);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:F,player2:Q,isActive:ie,winner:Ge,inviteCode:Ce,wagerAmount:Qe}),!Ce){console.error("[GAME_STATE] Invalid invite code:",Ce);return}const Lt=F===r?"blue":"red",Pt=F===r?Q:F;console.log("[GAME_STATE] Player is",Lt,"opponent is",Pt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",F),console.log("[DEBUG] - player2 (red):",Q),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",F===r),console.log("[DEBUG] - player2 === address:",Q===r);const It=await _i.getGame(Ce);if(It){if(console.log("[GAME_STATE] Found game in Firebase:",It),$(Ce),me(Lt),rn(parseFloat(It.bet_amount)),Ke(Pt),It.game_state==="waiting")Ie(Yn.WAITING),ee("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(It.game_state==="active"||It.game_state==="test_update"){if(Ie(Yn.ACTIVE),ee("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",It.game_state,")"),It.board){const dr=It.board;j(yi(dr)),X(It.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",It.game_state,"- treating as active"),Ie(Yn.ACTIVE),ee("Game in progress"),It.board){const dr=It.board;j(yi(dr)),X(It.current_player||"blue")}ol(Ce),w(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",he),console.log("[GAME_STATE] Game state from Firebase:",It.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const dr={invite_code:Ce,game_title:`Game ${Ce.slice(-6)}`,bet_amount:Qe?Qe.toString():"0",blue_player:F,red_player:Q,game_state:ie?"active":"waiting",board:{positions:qu(Cl),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:vc,is_public:!0};if(await _i.createGame(dr),console.log("[GAME_STATE] Successfully synced game to Firebase:",dr),$(Ce),me(Lt),rn(parseFloat(dr.bet_amount)),Ke(Pt),ie?(Ie(Yn.ACTIVE),ee("Game in progress")):(Ie(Yn.WAITING),ee("Waiting for opponent to join...")),dr.board){const Cq=dr.board;j(yi(Cq)),X(dr.current_player||"blue")}ol(Ce),w(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const G=(await _i.getActiveGames()).filter(F=>F.chain==="sanko"&&(F.blue_player===r||F.red_player===r)&&["waiting","active"].includes(F.game_state));if(G&&G.length>0){const F=G[0];if(console.log("[GAME_STATE] Found active game in Firebase:",F),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",F.blue_player),console.log("[DEBUG] - red_player:",F.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",F.blue_player===r),console.log("[DEBUG] - red_player === address:",F.red_player===r),$(F.invite_code),me(F.blue_player===r?"blue":"red"),rn(parseFloat(F.bet_amount)),Ke(F.blue_player===r?F.red_player:F.blue_player),F.game_state==="waiting")Ie(Yn.WAITING),ee("Waiting for opponent to join...");else if(F.game_state==="active"||F.game_state==="test_update"){if(Ie(Yn.ACTIVE),ee("Game in progress"),F.board){const Q=F.board;j(yi(Q)),X(F.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",F.game_state,"- treating as active"),Ie(Yn.ACTIVE),ee("Game in progress"),F.board){const Q=F.board;j(yi(Q)),X(F.current_player||"blue")}ol(F.invite_code),w(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Ie(Yn.LOBBY),or(!1),w(!0)}catch(M){console.error("[GAME_STATE] Error in checkPlayerGameState:",M)}},ha=()=>{rb(!v1),v1?(document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")):(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"))},Yh=async()=>{try{const M=await hq(20);C1(M)}catch(M){console.error("Error loading leaderboard:",M)}},qg=async M=>{if(console.log("[SCORE] updateScore called with:",M,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Sh(r)),await R_(r,M)?console.log("[SCORE] Successfully updated score for:",Sh(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(G){console.error("[SCORE] Error updating score:",G)}},Hu=async(M,G,F)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:M,bluePlayer:G,redPlayer:F}),!G||!F){console.error("[SCORE] Missing player addresses from contract");return}await n5e(M,G,F)?(console.log("[SCORE] Successfully updated both players scores"),await Yh()):console.error("[SCORE] Failed to update both players scores")}catch(Q){console.error("[SCORE] Error updating both players scores:",Q)}},Qh=async()=>{try{const M=await _i.getOpenGames();console.log("[FIREBASE] Loaded open games:",M),await A1(M),_n(M)}catch(M){console.error("Error loading open games:",M)}},A1=async M=>{if(console.log("[CLEANUP] Checking for ghost games..."),!D){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const G of M)try{const F=G.invite_code;if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",G.invite_code,F);continue}const Q=await D.readContract({address:vc,abi:Tf,functionName:"games",args:[F]});(!Q||Array.isArray(Q)&&Q[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",G.invite_code,"- removing from Firebase"),await _i.deleteGame(G.invite_code),console.log("[CLEANUP] Ghost game removed:",G.invite_code))}catch(F){console.error("[CLEANUP] Error checking game:",G.invite_code,F)}},I1=async()=>{if(!(!r||is<=0)){or(!0);try{const M=s5e();$(M);const G={invite_code:M,game_title:`Chess Game ${M.slice(-6)}`,bet_amount:is.toString(),blue_player:r,game_state:"waiting",board:{positions:qu(Cl),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:vc,is_public:!0,created_at:new Date().toISOString()};y({address:vc,abi:Tf,functionName:"createGame",args:[M],value:BigInt(Math.floor(is*1e18))}),To(G),ee("Creating game... Please confirm transaction in your wallet.")}catch(M){console.error("Error creating game:",M),ee("Failed to create game. Please try again.")}finally{or(!1)}}},N1=async M=>{if(r)try{const G=await _i.getGame(M);if(!G||G.game_state!=="waiting"){ee("Game not found or already full");return}const F=parseFloat(G.bet_amount);if($(M),me("red"),rn(F),Ke(G.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:M,playerColor:"red",wagerAmount:F,opponent:G.blue_player,address:r}),r===G.blue_player){console.error("[JOIN] Player cannot join their own game"),ee("You cannot join your own game");return}if(L&&L!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",L),ee("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const Q=await window.ethereum.request({method:"eth_chainId"}),ie=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",Q),console.log("[JOIN] Wallet state check - connectedAccounts:",ie),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(Q){console.error("[JOIN] Error checking wallet state:",Q)}console.log("[JOIN] Contract call parameters - contractAddress:",vc),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[M]),console.log("[JOIN] Contract call parameters - value:",BigInt(Math.floor(F*1e18))),console.log("[JOIN] Contract call parameters - valueInEth:",F),ee("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),_({address:vc,abi:Tf,functionName:"joinGame",args:[M],value:BigInt(Math.floor(F*1e18))}),console.log("[JOIN] writeJoinGame called, setting pending data..."),ur({inviteCode:M,gameData:G,address:r}),console.log("[JOIN] Pending data set")},500)}catch(G){console.error("[JOIN] Error joining game:",G),ee("Failed to join game. Please try again."),$(""),me(null),rn(0),Ke(null)}},[Ek,_k]=O.useState(null),[Ck,x1]=O.useState(""),[Sk,Ak]=O.useState(!0),T1=()=>{console.log("[FIREBASE] No fallback to stop")},ol=M=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",M),Us.current&&(console.log("[FIREBASE] Removing existing subscription"),Us.current());const G=_i.subscribeToGame(M,F=>{const Q=ab.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",Q),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",F),console.log("[DEBUG] Blue player from Firebase:",F==null?void 0:F.blue_player),console.log("[DEBUG] Red player from Firebase:",F==null?void 0:F.red_player),console.log("[DEBUG] Blue player type:",typeof(F==null?void 0:F.blue_player)),console.log("[DEBUG] Red player type:",typeof(F==null?void 0:F.red_player)),console.log("[DEBUG] Current address type:",typeof Q),console.log("[DEBUG] Current playerColor state:",le),console.log("[DEBUG] Pending join game data:",!!Ft),!F){console.log("[DEBUG] No game data received");return}if(Ft&&Q===Ft.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",le),F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&Ke(F.blue_player===Q?F.red_player:F.blue_player);else if(Q&&F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const ie=Q.toLowerCase()===F.blue_player.toLowerCase(),Ge=Q.toLowerCase()===F.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",ie),console.log("[DEBUG] Red player match:",Ge),console.log("[DEBUG] Blue comparison:",`${Q.toLowerCase()} === ${F.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${Q.toLowerCase()} === ${F.red_player.toLowerCase()}`),ie?(console.log("[DEBUG] Setting player color to BLUE"),me("blue"),Ke(F.red_player)):Ge?(console.log("[DEBUG] Setting player color to RED"),me("red"),Ke(F.blue_player)):(console.log("[DEBUG] No address match found - setting playerColor to null"),me(null),Ke(null))}else console.log("[DEBUG] Missing player data or red player is zero address - preserving existing playerColor"),console.log("[DEBUG] - currentAddress:",!!Q),console.log("[DEBUG] - blue_player:",!!F.blue_player),console.log("[DEBUG] - red_player:",F==null?void 0:F.red_player),console.log("[DEBUG] - Current playerColor state:",le),F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&Ke(F.blue_player===Q?F.red_player:F.blue_player);console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),F.bet_amount&&!isNaN(parseFloat(F.bet_amount))?rn(parseFloat(F.bet_amount)):rn(0),F.board&&j(yi(F.board)),F.current_player&&X(F.current_player),F.game_state==="active"?(Ie(Yn.ACTIVE),ee("Game in progress")):F.game_state==="finished"?(Ie(Yn.FINISHED),ee("Game finished")):F.game_state==="waiting"&&(Ie(Yn.WAITING),ee("Waiting for opponent to join..."))});Us.current=G,console.log("[FIREBASE] Firebase subscription setup complete for game:",M)};O.useEffect(()=>(x&&ol(x),()=>{Us.current&&Us.current()}),[x,r]),O.useEffect(()=>{if(T&&!le&&r){console.log("[FALLBACK] Setting playerColor from contract data");let M,G,F,Q,ie,Ge;if(Array.isArray(T))[M,G,F,Q,ie,Ge]=T;else{console.error("[FALLBACK] Unexpected contract data format:",T);return}const Ce=M===r?"blue":"red",Qe=M===r?G:M;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",M),console.log("[FALLBACK] - player2 (red):",G),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ce),console.log("[FALLBACK] - opponent:",Qe),console.log("[FALLBACK] - inviteCode from contract:",ie),me(Ce),Ke(Qe),!x&&ie&&(console.log("[FALLBACK] Setting missing inviteCode:",ie),$(ie))}},[T,le,r,x]);const qu=M=>{const G={};return M.forEach((F,Q)=>{F.forEach((ie,Ge)=>{G[`${Q}_${Ge}`]=ie})}),G},yi=M=>{if(!M||!M.positions)return console.warn("[BOARD] No board data available, using initial board"),Cl;if(console.log("[BOARD] Attempting to reconstruct board from:",M),console.log("[BOARD] Positions type:",typeof M.positions),console.log("[BOARD] Positions is array:",Array.isArray(M.positions)),console.log("[BOARD] Positions value:",M.positions),typeof M.positions=="object"&&!Array.isArray(M.positions)){const G=M.positions,F=M.rows||8,Q=M.cols||8,ie=Array(F).fill(null).map(()=>Array(Q).fill(null));for(let Ge=0;Ge<F;Ge++)for(let Ce=0;Ce<Q;Ce++){const Qe=`${Ge}_${Ce}`;ie[Ge][Ce]=G[Qe]||null}return console.log("[BOARD] Reconstructed from flat structure:",ie),ie}return Array.isArray(M.positions)?(console.log("[BOARD] Found array structure, length:",M.positions.length),M.positions.length===8?M.positions.every((F,Q)=>{const ie=Array.isArray(F)&&F.length===8;return ie||console.warn(`[BOARD] Row ${Q} is invalid:`,F,"Type:",typeof F,"Length:",F==null?void 0:F.length),ie})?(console.log("[BOARD] Using legacy array structure"),M.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),Cl):(console.warn("[BOARD] Array has wrong length:",M.positions.length,"expected 8"),Cl)):(console.warn("[BOARD] Unknown board structure, using initial board:",M),Cl)},Gg=M=>`${M.slice(0,6)}...${M.slice(-4)}`,os=M=>M&&M===M.toUpperCase()?"red":"blue",Vg=(M,G)=>M>=0&&M<8&&G>=0&&G<8,Gu=(M,G)=>{const F=G==="red"?"K":"k";let Q=-1,ie=-1;for(let Ce=0;Ce<8;Ce++){for(let Qe=0;Qe<8;Qe++)if(M[Ce][Qe]===F){Q=Ce,ie=Qe;break}if(Q!==-1)break}return Q===-1?!1:cb(Q,ie,G==="red"?"blue":"red",M)},cb=(M,G,F,Q)=>{if(!Q||!Array.isArray(Q)||Q.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",Q),!1;for(let ie=0;ie<8;ie++){if(!Q[ie]||!Array.isArray(Q[ie])||Q[ie].length!==8)return console.warn("[SAFETY] Invalid board row structure:",Q[ie]),!1;for(let Ge=0;Ge<8;Ge++){const Ce=Q[ie][Ge];if(Ce&&os(Ce)===F&&J(Ce,ie,Ge,M,G,!1,F,Q,!0))return!0}}return!1},lb=(M,G,F,Q,ie,Ge=k)=>{const Ce=Ge[M][G];if(!Ce)return!1;const Qe=Ge.map(Lt=>[...Lt]);return Qe[F][Q]=Ce,Qe[M][G]=null,Gu(Qe,ie)},Kg=(M,G,F,Q,ie,Ge)=>{const Ce=M==="blue"?-1:1,Qe=M==="blue"?6:1;if(!Vg(Q,ie)||M==="blue"&&Q>=G||M==="red"&&Q<=G)return!1;if(F===ie&&Q===G+Ce)return Ge[Q][ie]===null;if(F===ie&&G===Qe&&Q===G+2*Ce)return Ge[G+Ce][F]===null&&Ge[Q][ie]===null;if(Math.abs(F-ie)===1&&Q===G+Ce){const Lt=Ge[Q][ie];if(Lt!==null&&os(Lt)!==M)return!0;if(Lt===null&&Ls.lastPawnDoubleMove){const{row:Pt,col:It}=Ls.lastPawnDoubleMove;if(Pt===G&&It===ie){const dr=Ge[G][ie];if(dr&&dr.toLowerCase()==="p"&&os(dr)!==M)return!0}}}return!1},Zh=(M,G,F,Q,ie)=>M===F||G===Q,R1=(M,G,F,Q)=>{const ie=Math.abs(M-F),Ge=Math.abs(G-Q);return ie===2&&Ge===1||ie===1&&Ge===2},Vu=(M,G,F,Q,ie)=>Math.abs(M-F)===Math.abs(G-Q),z=(M,G,F,Q,ie)=>Zh(M,G,F,Q)||Vu(M,G,F,Q),K=(M,G,F,Q,ie)=>{const Ge=Math.abs(G-Q),Ce=Math.abs(F-ie);if(Ge<=1&&Ce<=1)return!0;if(Ge===0&&Ce===2){if(M==="blue"&&!Ls.blueKingMoved){if(ie===6&&!Ls.blueRooksMove.right||ie===2&&!Ls.blueRooksMove.left)return!0}else if(M==="red"&&!Ls.redKingMoved&&(ie===6&&!Ls.redRooksMove.right||ie===2&&!Ls.redRooksMove.left))return!0}return!1},te=(M,G,F,Q,ie)=>{const Ge=M===F?0:(F-M)/Math.abs(F-M),Ce=G===Q?0:(Q-G)/Math.abs(Q-G);let Qe=M+Ge,Lt=G+Ce;for(;Qe!==F||Lt!==Q;){if(ie[Qe][Lt]!==null)return!1;Qe+=Ge,Lt+=Ce}return!0},J=(M,G,F,Q,ie,Ge=!0,Ce=os(M),Qe=k,Lt=!1)=>{if(!M||!Vg(Q,ie))return!1;const Pt=Qe[Q][ie];if(Pt&&os(Pt)===Ce)return!1;let It=!1;switch(M.toUpperCase()){case"P":It=Kg(Ce,G,F,Q,ie,Qe);break;case"R":It=Zh(G,F,Q,ie)&&te(G,F,Q,ie,Qe);break;case"N":It=R1(G,F,Q,ie);break;case"B":It=Vu(G,F,Q,ie)&&te(G,F,Q,ie,Qe);break;case"Q":It=z(G,F,Q,ie)&&te(G,F,Q,ie,Qe);break;case"K":It=K(Ce,G,F,Q,ie);break}return!(!It||Ge&&lb(G,F,Q,ie,Ce,Qe))},Y=(M,G=k,F=H)=>{const Q=[],ie=G[M.row][M.col];if(!ie||os(ie)!==F)return Q;const Ge=ie.toLowerCase();if(Ge==="p"){const Ce=F==="blue"?-1:1,Qe=F==="blue"?6:1,Lt=M.row+Ce;if(Lt>=0&&Lt<8&&J(ie,M.row,M.col,Lt,M.col,!0,F,G,!0)&&Q.push({row:Lt,col:M.col}),M.row===Qe){const Pt=M.row+2*Ce;Pt>=0&&Pt<8&&J(ie,M.row,M.col,Pt,M.col,!0,F,G,!0)&&Q.push({row:Pt,col:M.col})}for(const Pt of[-1,1]){const It=M.col+Pt,dr=M.row+Ce;It>=0&&It<8&&dr>=0&&dr<8&&J(ie,M.row,M.col,dr,It,!0,F,G,!0)&&Q.push({row:dr,col:It})}}else if(Ge==="n"){const Ce=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Qe,Lt]of Ce){const Pt=M.row+Qe,It=M.col+Lt;Pt>=0&&Pt<8&&It>=0&&It<8&&J(ie,M.row,M.col,Pt,It,!0,F,G,!0)&&Q.push({row:Pt,col:It})}}else for(let Ce=0;Ce<8;Ce++)for(let Qe=0;Qe<8;Qe++)J(ie,M.row,M.col,Ce,Qe,!0,F,G,!0)&&Q.push({row:Ce,col:Qe});return Q},_e=(M,G=k)=>{if(!Gu(G,M))return!1;for(let F=0;F<8;F++)for(let Q=0;Q<8;Q++){const ie=G[F][Q];if(ie&&os(ie)===M&&Y({row:F,col:Q},G,M).length>0)return!1}return!0},Se=(M,G=k)=>{if(Gu(G,M))return!1;for(let F=0;F<8;F++)for(let Q=0;Q<8;Q++){const ie=G[F][Q];if(ie&&os(ie)===M&&Y({row:F,col:Q},G,M).length>0)return!1}return!0},qe=(M,G)=>{if(console.log("[CLICK] Square clicked:",{row:M,col:G}),console.log("[CLICK] Game mode:",he,"Player color:",le),console.log("[CLICK] Current player:",H,"Player color:",le),he!==Yn.ACTIVE||!le){console.log("[CLICK] Game not active or no player color");return}const F=k[M][G],Q=F?os(F):null;if(console.log("[CLICK] Piece at square:",F,"Piece color:",Q),H!==le){console.log("[CLICK] Not player's turn. Current:",H,"Player:",le);return}if(F&&Q===le){ne({row:M,col:G});const ie=Y({row:M,col:G});ye(ie);return}if(se&&ae.some(ie=>ie.row===M&&ie.col===G)){Mt(se,{row:M,col:G}),ne(null),ye([]);return}ne(null),ye([])},Mt=async(M,G)=>{if(!le||H!==le)return;const F=k[M.row][M.col];if(F){if(console.log("[PROMOTION] Checking pawn promotion:",{piece:F,pieceUpperCase:F.toUpperCase(),playerColor:le,toRow:G.row,isPawn:F.toUpperCase()==="P",redPromotion:le==="red"&&G.row===0,bluePromotion:le==="blue"&&G.row===7,showPromotion:Gh,promotionMove:on}),F.toUpperCase()==="P"&&(le==="red"&&G.row===0||le==="blue"&&G.row===7)){console.log("[PROMOTION] Showing promotion dialog for piece:",F,"at position:",G),Vh({from:M,to:G}),ic(!0);return}await Qt(M,G)}},Qt=async(M,G,F="q")=>{if(!le||H!==le||!k[M.row][M.col])return;const Ge=k[G.row][G.col]!==null;if(Qg(Ge?"capture":"move"),Ge){Hg({row:G.row,col:G.col,show:!0}),setTimeout(()=>{Pn(M,G,F),Hg(null)},500);return}Pn(M,G,F)},Pn=async(M,G,F="q")=>{if(!le||H!==le)return;const Q=k[M.row][M.col];if(!Q)return;const ie=k.map(Pt=>[...Pt]);let Ge=Q;Q.toUpperCase()==="P"&&(le==="red"&&G.row===0||le==="blue"&&G.row===7)&&(Ge=le==="red"?F.toUpperCase():F.toLowerCase()),Yg(ie,M,G,Q),ie[G.row][G.col]=Ge,ie[M.row][M.col]=null,pq(M,G,Q);const Ce=H==="blue"?"red":"blue";Gu(ie,Ce)&&Qg("check");let Qe="active",Lt=null;_e(Ce,ie)?(Qe="finished",Lt=H,ee(`${H==="red"?"Red":"Blue"} wins by checkmate!`),Qg("checkmate"),Zt(),console.log("[SCORE] Updating scores - Winner:",H,"Loser:",Ce),console.log("[SCORE] Contract game data:",T),console.log("[SCORE] Player game invite code:",L),T&&T.length>=2?(console.log("[SCORE] Using contract data for both players update"),await Hu(H,T[0],T[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await qg(H===le?"win":"loss"),await Yh()),Lt===le&&(console.log("[CONTRACT] Triggering automatic payout for winner:",Lt),setTimeout(()=>{R()},2e3))):Se(Ce,ie)&&(Qe="finished",ee("Game ended in stalemate"),console.log("[SCORE] Updating scores for draw"),await qg("draw"));try{if(!x){console.error("[BUG] inviteCode is missing when trying to update game!"),ee("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",x,"gameData:",{board:{positions:ie},current_player:Ce,game_state:Qe,winner:Lt,last_move:{from:M,to:G}});const It={...await _i.getGame(x),board:{positions:qu(ie),rows:8,cols:8},current_player:Ce,game_state:Qe,winner:Lt,last_move:{from:M,to:G}};console.log("[FIREBASE] Storing data in Firebase:",It),await _i.updateGame(x,It),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Pt){console.error("[DATABASE] Error updating game:",Pt)}j(ie),X(Ce),da({from:M,to:G}),ic(!1),Vh(null)},Zt=()=>{Vi(!0),Qg("victory"),oc.current&&clearTimeout(oc.current),oc.current=setTimeout(()=>{Vi(!1)},5e3)},Yg=(M,G,F,Q)=>{Q.toLowerCase()==="k"&&Math.abs(G.col-F.col)===2&&(F.col===6?(M[G.row][7]=null,M[G.row][5]=os(Q)==="blue"?"r":"R"):F.col===2&&(M[G.row][0]=null,M[G.row][3]=os(Q)==="blue"?"r":"R")),Q.toLowerCase()==="p"&&Math.abs(G.col-F.col)===1&&M[F.row][F.col]===null&&Ls.lastPawnDoubleMove&&Ls.lastPawnDoubleMove.row===G.row&&Ls.lastPawnDoubleMove.col===F.col&&(M[G.row][F.col]=null)},pq=(M,G,F)=>{const Q={...Ls};F.toLowerCase()==="k"?os(F)==="blue"?Q.blueKingMoved=!0:Q.redKingMoved=!0:F.toLowerCase()==="r"&&(os(F)==="blue"?(M.col===0&&(Q.blueRooksMove.left=!0),M.col===7&&(Q.blueRooksMove.right=!0)):(M.col===0&&(Q.redRooksMove.left=!0),M.col===7&&(Q.redRooksMove.right=!0))),F.toLowerCase()==="p"&&Math.abs(M.row-G.row)===2?Q.lastPawnDoubleMove={row:G.row,col:G.col}:Q.lastPawnDoubleMove=null,ob(Q)},Qg=M=>{if(ib)try{const G=new Audio(`/images/${M}.mp3`);G.volume=.3,G.play().catch(F=>console.warn("Audio play failed:",F))}catch(G){console.warn("Sound play failed:",G)}},gq=async()=>{if(x)try{console.log("[RESET] Resetting corrupted game data for:",x);const M={board:{positions:qu(Cl),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await _i.updateGame(x,M),console.log("[RESET] Successfully reset game data"),ee("Game reset successfully. You can now make moves.")}catch(M){console.error("[RESET] Error resetting game data:",M),ee("Failed to reset game. Please try again.")}},Ik=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(M){console.error("Error checking stuck games:",M)}},mq=(M,G)=>{if(!k||!Array.isArray(k)||k.length!==8||!k[M]||!Array.isArray(k[M])||k[M].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:M,col:G,board:k}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${M}-${G}`);const F=k[M][G],Q=(se==null?void 0:se.row)===M&&(se==null?void 0:se.col)===G,ie=ae.some(Qe=>Qe.row===M&&Qe.col===G),Ge=il&&(il.from.row===M&&il.from.col===G||il.to.row===M&&il.to.col===G),Ce=F&&F.toUpperCase()==="K"&&Gu(k,os(F));return m.jsxs("div",{className:`square ${Q?"selected":""} ${ie?"legal-move":""} ${Ge?"last-move":""} ${Ce?"square-in-check":""}`,onClick:()=>qe(M,G),children:[F&&m.jsx("div",{className:"piece",style:{backgroundImage:wI[F]?`url(${wI[F]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ie&&m.jsx("div",{className:"legal-move-indicator"})]},`${M}-${G}`)},yq=()=>{if(console.log("[PROMOTION] Rendering promotion dialog:",{showPromotion:Gh,promotionMove:on,playerColor:le}),!Gh||!on)return console.log("[PROMOTION] Not showing dialog - conditions not met"),null;const M=le==="red"?["Q","R","B","N"]:["q","r","b","n"];return console.log("[PROMOTION] Promotion pieces for",le,":",M),m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:M.map(G=>m.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",G),Qt(on.from,on.to,G.toLowerCase()),ic(!1),Vh(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:wI[G],alt:G,style:{width:"40px",height:"40px"}})},G))})]})})},wq=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:r5e.map(M=>m.jsxs("div",{className:"piece-gallery-item",children:[m.jsx("img",{src:M.img,alt:M.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:M.name}),m.jsx("div",{className:"piece-gallery-desc",children:M.desc})]},M.key))})]}),Nk=()=>m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"Multiplayer Chess Lobby"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",children:["Connected: ",Gg(r)]}),m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsx("h3",{children:"Open Games"}),m.jsxs("div",{className:"games-list",children:[sn.map(M=>m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:M.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",parseFloat(M.bet_amount)," tDMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",Gg(M.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>N1(M.invite_code),children:"Join Game"})]},M.invite_code)),sn.length===0&&m.jsx("div",{className:"no-games",children:"No open games available"})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:()=>or(!0),disabled:Un,children:"Create New Game"}),m.jsx("button",{className:"resume-btn",onClick:Ik,style:{marginTop:"10px",background:"rgba(0, 255, 0, 0.1)",border:"2px solid #00ff00",color:"#00ff00",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"Check for Active Games"}),m.jsx("button",{onClick:Qh,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"})]}),Un&&m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsxs("div",{className:"form-group",children:[m.jsx("label",{children:"Wager (tDMT):"}),m.jsx("input",{type:"number",value:is,onChange:M=>Fg(Number(M.target.value)),placeholder:"0.1",min:"0",step:"0.1"})]}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:I1,disabled:is<=0,children:"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>or(!1),children:"Cancel"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),bq=()=>m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:x})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",Yt," tDMT"]}),m.jsx("p",{children:"Share this invite code with your opponent"})]})]}),vq=()=>m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:" Multiplayer Chess"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{onClick:ha,className:"theme-toggle-btn",title:"Toggle Dark Mode",children:""}),e&&m.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),m.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("div",{className:"game-status-section",children:[m.jsx("span",{className:`status ${de.includes("Check")?"check-status":""}`,children:de}),m.jsxs("span",{className:`current-player ${H==="red"?"red-turn":"blue-turn"}`,children:["Current: ",H==="red"?" Red":" Blue"]})]}),m.jsxs("div",{className:"game-details-section",children:[m.jsxs("span",{className:"wager-display",children:[" ",Yt," tDMT"]}),ze&&m.jsxs("span",{className:"opponent-info",children:["vs ",Gg(ze)]})]}),he===Yn.FINISHED&&m.jsx("button",{onClick:R,disabled:f,className:"claim-winnings-btn",children:f?" Claiming...":" Claim Winnings"})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsx("div",{className:"left-sidebar",children:m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:Z.slice().reverse().map((M,G)=>m.jsx("div",{className:"move",children:M},Z.length-1-G))})]})}),m.jsxs("div",{className:"center-area",children:[m.jsxs("div",{className:"chessboard-container",children:[m.jsx("div",{className:"chessboard",children:Array.from({length:8},(M,G)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(F,Q)=>mq(G,Q))},G))}),Kh&&Kh.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Kh.row*12.5}%`,left:`${Kh.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:m.jsx("div",{className:"explosion-effect",children:""})})]}),m.jsxs("div",{className:"game-controls",children:[m.jsxs("div",{className:"control-section",children:[m.jsx("button",{onClick:()=>sb(!Wg),className:"gallery-toggle-btn",children:Wg?" Hide Gallery":" Show Gallery"}),de.includes("corrupted")&&m.jsx("button",{className:"reset-game-btn",onClick:gq,children:" Reset Game"})]}),m.jsx("div",{className:"settings-section",children:m.jsxs("div",{className:"sound-controls",children:[m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:ib,onChange:M=>E1(M.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Sound Effects"})]}),m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:zg,onChange:M=>Vi(M.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),d&&m.jsx("button",{className:"claim-winnings-btn",onClick:R,disabled:f||N||q,children:f||N||q?" Claiming...":" Claim Winnings"})]})]}),m.jsx("div",{className:"right-sidebar",children:m.jsxs("div",{className:"leaderboard",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"#"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:_1.map((M,G)=>m.jsxs("tr",{children:[m.jsx("td",{children:G+1}),m.jsx("td",{children:M.username}),m.jsx("td",{children:M.wins}),m.jsx("td",{children:M.losses}),m.jsx("td",{children:M.draws}),m.jsx("td",{children:M.points})]},M.username))})]})})]})})]}),Wg&&m.jsx("div",{className:"piece-gallery-panel",children:wq()}),yq(),zg&&m.jsx("div",{className:"victory-celebration",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("h2",{children:" Victory! "}),m.jsx("p",{children:"Congratulations on your win!"})]})})]}),Eq=()=>null;O.useEffect(()=>{Yh(),Qh(),Ik();const M=setInterval(Qh,5e3);return()=>{clearInterval(M),Us.current&&Us.current(),oc.current&&clearTimeout(oc.current)}},[]),console.log("[RENDER] Current game mode:",he,"Game ID:",x);const _q=(()=>{switch(he){case Yn.LOBBY:return Nk();case Yn.WAITING:return bq();case Yn.ACTIVE:case Yn.FINISHED:return vq();default:return Nk()}})();return m.jsxs(m.Fragment,{children:[_q,Eq()]})},bI={AI:"ai"},bv={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},bU=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],i5e=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],o5e=()=>{const[t,e]=O.useState(!1),n=O.useRef(null),r=O.useRef(!1);O.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=O.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=O.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},a5e=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!1),s=O.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=O.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},c5e=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r}=D0(),[s,i]=O.useState(bI.AI),[o,a]=O.useState(()=>JSON.parse(JSON.stringify(bU))),[c,l]=O.useState("blue"),[u,d]=O.useState(null),[h,f]=O.useState("active"),[p,g]=O.useState("hard"),[w,y]=O.useState("Connect wallet to play"),[b,E]=O.useState([]),[_,C]=O.useState([]),[I,A]=O.useState([]),[N,S]=O.useState(null),[D,P]=O.useState(!1),[B,q]=O.useState(!1),[L,T]=O.useState(null),[x,$]=O.useState(null),[R]=O.useState(""),[k]=O.useState(.1),[j,H]=O.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),X=O.useRef(null),se=O.useRef(!1),ne=O.useRef(o),ae=O.useRef(null),ye=O.useRef(null),Z=O.useRef(!1),re=O.useRef(!1),[de,ee]=O.useState(!1),[he,Ie]=O.useState(!1),[le,me]=O.useState(!1),[ze,Ke]=O.useState(()=>typeof window<"u"&&window.localStorage?window.localStorage.getItem("lawb_chess_dark_mode")==="true":!1),Yt=()=>{Ke(z=>(typeof window<"u"&&window.localStorage&&window.localStorage.setItem("lawb_chess_dark_mode",String(!z)),!z))},{stockfishReady:rn}=o5e(),{getOpeningData:sn}=a5e(),[_n,Un]=O.useState("loading"),[or,ss]=O.useState(!1),[To,Ft]=O.useState([]),[ur,sc]=O.useState(!1),[qh,is]=O.useState("/images/chessboard1.png"),[Fg,v1]=O.useState(!0),[rb,Wg]=O.useState(!1),sb=()=>{const z=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*z.length),te=z[K];return console.log("[DEBUG] Random chessboard selected:",te,"(index:",K,")"),te};O.useEffect(()=>{if(rn)Un("ready");else{const z=window.setTimeout(()=>{rn||(Un("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(z)}},[rn]),O.useEffect(()=>{ne.current=o},[o]),O.useEffect(()=>{r?y("Select game mode"):(y("Connect wallet to play"),P(!1))},[r]),O.useEffect(()=>(!X.current&&typeof Worker<"u"&&(X.current=new Worker("/aiWorker.js"),X.current.onmessage=z=>{console.log("[DEBUG] AI worker response received:",z.data);const{move:K,nodes:te}=z.data;K&&se.current&&h==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",te,"nodes"),se.current=!1,ye.current&&(window.clearTimeout(ye.current),ye.current=null),ae.current&&ae.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},X.current.onerror=z=>{console.error("[DEBUG] AI worker error:",z),y("AI worker error - using fallback mode"),se.current=!1}),()=>{X.current&&(X.current.terminate(),X.current=null),ye.current&&(window.clearTimeout(ye.current),ye.current=null)}),[]),O.useEffect(()=>{Gh()},[]);const Gh=async()=>{try{const z=await hq(20);C(z),console.log("Leaderboard data loaded:",z)}catch(z){y("Failed to load leaderboard"),console.error("Leaderboard error:",z)}},ic=async z=>{if(console.log("[DEBUG] updateScore called with:",z),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Sh(r)),await R_(r,z)?(console.log("[DEBUG] Successfully updated score for:",Sh(r)),await Gh()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},on=z=>z&&z===z.toUpperCase()?"red":"blue",Vh=(z,K)=>z>=0&&z<8&&K>=0&&K<8,zg=(z,K)=>`${String.fromCharCode(97+K)}${8-z}`,Vi=(z,K)=>{const te=K==="blue"?"k":"K";let J=null;for(let Se=0;Se<8;Se++){for(let qe=0;qe<8;qe++)if(z[Se][qe]===te){J={row:Se,col:qe};break}if(J)break}if(!J)return console.log(`King not found for ${K}`),!1;const Y=K==="blue"?"red":"blue",_e=ib(J.row,J.col,Y,z);return console.log(`${K} king at ${J.row},${J.col} under attack: ${_e}`),_e},ib=(z,K,te,J)=>{for(let Y=0;Y<8;Y++)for(let _e=0;_e<8;_e++){const Se=J[Y][_e];if(Se&&on(Se)===te&&da(Se,Y,_e,z,K,!1,te,J,!0))return!0}return!1},E1=(z,K,te,J,Y,_e=o)=>{const Se=_e.map(Mt=>[...Mt]),qe=Se[z][K];return Se[te][J]=qe,Se[z][K]=null,Vi(Se,Y)},Kh=(z,K,te,J,Y,_e)=>{const Se=z==="blue"?-1:1,qe=z==="blue"?6:1;if(!Vh(J,Y)||z==="blue"&&J>=K||z==="red"&&J<=K)return!1;const Mt=Math.abs(J-K),Qt=Math.abs(Y-te);if((Mt===1&&Qt===0||Mt===2&&Qt===0&&K===qe||Mt===1&&Qt===1)&&Mt<=2&&Qt<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:z,from:`${K},${te}`,to:`${J},${Y}`}),te===Y&&J===K+Se)return _e[J][Y]===null;if(te===Y&&K===qe&&J===K+2*Se)return _e[K+Se][te]===null&&_e[J][Y]===null;if(Math.abs(te-Y)===1&&J===K+Se){const Zt=_e[J][Y];return Zt!==null&&on(Zt)!==z}if(Math.abs(te-Y)===1&&J===K+Se){const Zt=_e[K][Y];if(Zt&&on(Zt)!==z&&Zt.toLowerCase()==="p"&&j.lastPawnDoubleMove&&j.lastPawnDoubleMove.row===K&&j.lastPawnDoubleMove.col===Y)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},Hg=(z,K,te,J,Y)=>z!==te&&K!==J?!1:il(z,K,te,J,Y),Ls=(z,K,te,J)=>{const Y=Math.abs(z-te),_e=Math.abs(K-J);return Y===2&&_e===1||Y===1&&_e===2},ob=(z,K,te,J,Y)=>Math.abs(z-te)!==Math.abs(K-J)?!1:il(z,K,te,J,Y),_1=(z,K,te,J,Y)=>Hg(z,K,te,J,Y)||ob(z,K,te,J,Y),C1=(z,K,te,J,Y)=>{const _e=Math.abs(K-J),Se=Math.abs(te-Y);if(_e<=1&&Se<=1)return!0;if(_e===0&&Se===2){if(z==="blue"&&!j.blueKingMoved){if(Y===6&&!j.blueRooksMove.right||Y===2&&!j.blueRooksMove.left)return!0}else if(z==="red"&&!j.redKingMoved&&(Y===6&&!j.redRooksMove.right||Y===2&&!j.redRooksMove.left))return!0}return!1},il=(z,K,te,J,Y)=>{const _e=z===te?0:(te-z)/Math.abs(te-z),Se=K===J?0:(J-K)/Math.abs(J-K);let qe=z+_e,Mt=K+Se;for(;qe!==te||Mt!==J;){if(Y[qe][Mt]!==null)return!1;qe+=_e,Mt+=Se}return!0},da=(z,K,te,J,Y,_e=!0,Se=on(z),qe=o,Mt=!1)=>{if(!Vh(J,Y))return Mt||console.log("[ILLEGAL MOVE] Out of board:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y}),!1;const Qt=qe[J][Y];if(Qt&&on(Qt)===Se)return Mt||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y}),!1;const Pn=z.toLowerCase();let Zt=!1;switch(Pn){case"p":Zt=Kh(Se,K,te,J,Y,qe);break;case"r":Zt=Hg(K,te,J,Y,qe);break;case"n":Zt=Ls(K,te,J,Y);break;case"b":Zt=ob(K,te,J,Y,qe);break;case"q":Zt=_1(K,te,J,Y,qe);break;case"k":Zt=C1(Se,K,te,J,Y);break}return Zt?Zt&&_e&&E1(K,te,J,Y,Se,qe)?(Mt||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y}),!1):Zt:(Mt||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:z,startRow:K,startCol:te,endRow:J,endCol:Y,playerColor:Se,pieceType:Pn,targetPiece:qe[J][Y],targetPieceColor:qe[J][Y]?on(qe[J][Y]):null}),!1)},Us=(z,K=o,te=c)=>{const J=[],Y=K[z.row][z.col];if(!Y||on(Y)!==te)return J;const _e=Y.toLowerCase();if(_e==="p"){const Se=te==="blue"?-1:1,qe=te==="blue"?6:1,Mt=z.row+Se;if(Mt>=0&&Mt<8&&da(Y,z.row,z.col,Mt,z.col,!0,te,K,!0)&&J.push({row:Mt,col:z.col}),z.row===qe){const Qt=z.row+2*Se;Qt>=0&&Qt<8&&da(Y,z.row,z.col,Qt,z.col,!0,te,K,!0)&&J.push({row:Qt,col:z.col})}for(const Qt of[-1,1]){const Pn=z.col+Qt,Zt=z.row+Se;Pn>=0&&Pn<8&&Zt>=0&&Zt<8&&da(Y,z.row,z.col,Zt,Pn,!0,te,K,!0)&&J.push({row:Zt,col:Pn})}}else if(_e==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[qe,Mt]of Se){const Qt=z.row+qe,Pn=z.col+Mt;Qt>=0&&Qt<8&&Pn>=0&&Pn<8&&da(Y,z.row,z.col,Qt,Pn,!0,te,K,!0)&&J.push({row:Qt,col:Pn})}}else for(let Se=0;Se<8;Se++)for(let qe=0;qe<8;qe++)da(Y,z.row,z.col,Se,qe,!0,te,K,!0)&&J.push({row:Se,col:qe});return J},oc=(z,K=o)=>{if(!Vi(K,z))return!1;for(let te=0;te<8;te++)for(let J=0;J<8;J++){const Y=K[te][J];if(Y&&on(Y)===z&&Us({row:te,col:J},K,z).length>0)return!1}return!0},ab=(z,K=o)=>{if(Vi(K,z))return!1;for(let te=0;te<8;te++)for(let J=0;J<8;J++){const Y=K[te][J];if(Y&&on(Y)===z&&Us({row:te,col:J},K,z).length>0)return!1}return!0},S1=(z,K)=>{if(h!=="active"||se.current)return;const te=o[z][K],J=te?on(te):null;if(u&&I.some(Y=>Y.row===z&&Y.col===K)){ha(u,{row:z,col:K});return}if(te&&J===c){const Y=Us({row:z,col:K});d({row:z,col:K}),A(Y);return}d(null),A([])},ha=(z,K,te=!1)=>{const J=o[z.row][z.col];if(console.log("[MOVE ATTEMPT]",{from:z,to:K,piece:J,isAIMove:te,board:JSON.parse(JSON.stringify(o)),moveHistory:b}),!!J){if(J.toLowerCase()==="p"&&(on(J)==="blue"&&K.row===0||on(J)==="red"&&K.row===7)){T({from:z,to:K}),q(!0);return}qu(z,K,"q",te)}};ae.current=ha;const Yh=O.useCallback((z,K,te=!1)=>{sc(!0);const J=o.map(Se=>[...Se]),Y=J[z.row][z.col];if(!Y)return;J[K.row][K.col]=Y,J[z.row][z.col]=null,Ak(J,z,K,Y);const _e=T1(z,K);if(E(Se=>{const qe=[...Se,_e];return console.log("[MOVE HISTORY UPDATED]",qe),qe}),S({from:z,to:K}),d(null),A([]),b.length<10&&!te){const Se=vU(J,c==="blue"?"red":"blue");sn(Se).then(qe=>{qe&&qe.moves&&qe.moves.length>0&&(Ft(qe.moves.slice(0,3)),ss(!0),setTimeout(()=>ss(!1),5e3))})}ol(z,K,Y),l(Se=>{const qe=Se==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",qe),qg(J,qe),qe}),qg(J,c==="blue"?"red":"blue"),a(J),se.current=!1,Z.current=!1,re.current=!1,sc(!1)},[o,c,b,sn]);O.useEffect(()=>{if(!se.current&&s==="ai"&&c==="red"&&!Z.current&&!ur)if(se.current=!0,p==="easy")setTimeout(()=>{const z=Hu(o);z?ha(z.from,z.to,!0):se.current=!1},600);else{y("AI is calculating...");const z=vU(o,c);if(re.current)return;re.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:z,difficulty:p,movetime:3e3})}).then(te=>{if(te.ok)return te.json();throw new Error("API call failed")}).then(te=>{console.log("[DEBUG] Stockfish API response:",te);const J=te.bestmove||te.move;if(J&&J!=="(none)"&&J.length===4){const Y=J.charCodeAt(0)-97,_e=parseInt(J[1]),Se=J.charCodeAt(2)-97,qe=parseInt(J[3]),Mt=8-_e,Qt=8-qe;if(console.log("[DEBUG] Parsed move:",{fromCol:Y,fromRowStockfish:_e,toCol:Se,toRowStockfish:qe,fromRow:Mt,toRow:Qt}),Y>=0&&Y<8&&Mt>=0&&Mt<8&&Se>=0&&Se<8&&Qt>=0&&Qt<8){const Pn={from:{row:Mt,col:Y},to:{row:Qt,col:Se}},Zt=o[Mt][Y];if(console.log("[DEBUG] Move validation:",{piece:Zt,moveObj:Pn,isValid:Zt&&on(Zt)==="red"&&da(Zt,Mt,Y,Qt,Se,!0,"red",o)}),Zt&&on(Zt)==="red"&&da(Zt,Mt,Y,Qt,Se,!0,"red",o))console.log("[DEBUG] Executing Stockfish move:",Pn),ha(Pn.from,Pn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Yg=Hu(o);Yg&&ha(Yg.from,Yg.to,!0),se.current=!1,re.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Pn=Hu(o);Pn&&ha(Pn.from,Pn.to,!0),se.current=!1,re.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const Y=Hu(o);Y&&ha(Y.from,Y.to,!0),se.current=!1,re.current=!1}}).catch(te=>{console.error("[DEBUG] Stockfish API error:",te),y("AI error. Falling back to random moves.");const J=Hu(o);J&&ha(J.from,J.to,!0),se.current=!1,re.current=!1})}},[c,s,p,o,j,rn]);const qg=(z,K)=>{console.log("Checking game end for player:",K);const te=z.some(Y=>Y.some(_e=>_e==="k")),J=z.some(Y=>Y.some(_e=>_e==="K"));if(!te)return console.log("[GAME END] KING CAPTURED - Red wins!"),f("checkmate"),y("King captured! Red wins!"),ic("loss"),me(!0),setTimeout(()=>me(!1),3e3),"checkmate";if(!J)return console.log("[GAME END] KING CAPTURED - Blue wins!"),f("checkmate"),y("King captured! You win!"),ic("win"),me(!0),setTimeout(()=>me(!1),3e3),"checkmate";if(console.log("Is king in check:",Vi(z,K)),oc(K,z)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(z)),moveHistory:b}),f("checkmate");const Y=K==="blue"?"red":"blue";return Y==="blue"?(y("Checkmate! You win!"),yi("checkmate"),Vg(!0),Gg(),ic("win"),me(!0),setTimeout(()=>me(!1),3e3)):(y(`Checkmate! ${Y==="red"?"AI":"Opponent"} wins!`),yi("checkmate"),cb(!0),ic("loss"),me(!0),setTimeout(()=>me(!1),3e3)),"checkmate"}return ab(K,z)?(console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(z)),moveHistory:b}),f("stalemate"),y("Stalemate! Game is a draw."),ic("draw"),me(!0),setTimeout(()=>me(!1),3e3),"stalemate"):(Vi(z,K)?(console.log("CHECK detected!"),yi("check"),y(`${K==="blue"?"Blue":"Red"} is in check!`)):y("Your turn"),null)},Hu=z=>{const K=[];for(let Y=0;Y<8;Y++)for(let _e=0;_e<8;_e++){const Se=z[Y][_e];Se&&on(Se)==="red"&&K.push({row:Y,col:_e})}for(let Y=K.length-1;Y>0;Y--){const _e=Math.floor(Math.random()*(Y+1));[K[Y],K[_e]]=[K[_e],K[Y]]}const te=[],J=[];for(const Y of K){const _e=Us(Y,z,"red");for(const Se of _e){const qe=z[Se.row][Se.col];if(qe&&on(qe)==="blue"){const Qt={p:100,n:320,b:330,r:500,q:900,k:2e4}[qe.toLowerCase()]||0;te.push({from:Y,to:Se,value:Qt})}else J.push({from:Y,to:Se})}}if(te.length>0&&Math.random()<.3){te.sort((Y,_e)=>Y.value-_e.value);for(const Y of te){const _e=z.map(qe=>[...qe]),Se=_e[Y.from.row][Y.from.col];if(_e[Y.to.row][Y.to.col]=Se,_e[Y.from.row][Y.from.col]=null,!Vi(_e,"red"))return{from:Y.from,to:Y.to}}}for(const Y of J){const _e=z.map(qe=>[...qe]),Se=_e[Y.from.row][Y.from.col];if(_e[Y.to.row][Y.to.col]=Se,_e[Y.from.row][Y.from.col]=null,!Vi(_e,"red"))return Y}te.sort((Y,_e)=>Y.value-_e.value);for(const Y of te){const _e=z.map(qe=>[...qe]),Se=_e[Y.from.row][Y.from.col];if(_e[Y.to.row][Y.to.col]=Se,_e[Y.from.row][Y.from.col]=null,!Vi(_e,"red"))return{from:Y.from,to:Y.to}}return null},Qh=()=>{a(JSON.parse(JSON.stringify(bU))),l("blue"),d(null),f("active"),E([]),A([]),S(null),P(!1),y("Select game mode"),H({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),is(sb()),se.current&&(se.current=!1)},A1=()=>{if(R1(),console.log("[DEBUG] startGame called, difficulty:",p,"gameMode:",s),s==="online"){P(!1),ee(!1);return}P(!0),ee(!1),y("Game started! Your turn");const z=sb();is(z),console.log("[DEBUG] Game started with chessboard:",z)},I1=z=>`${z.slice(0,6)}...${z.slice(-4)}`,N1=(z,K)=>{const te=o[z][K],J=(u==null?void 0:u.row)===z&&(u==null?void 0:u.col)===K,Y=I.some(Se=>Se.row===z&&Se.col===K),_e=N&&(N.from.row===z&&N.from.col===K||N.to.row===z&&N.to.col===K);return m.jsxs("div",{className:`square ${J?"selected":""} ${Y?"legal-move":""} ${_e?"last-move":""}`,onClick:()=>S1(z,K),children:[te&&m.jsx("div",{className:"piece",style:{backgroundImage:bv[te]?`url(${bv[te]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),Y&&m.jsx("div",{className:"legal-move-indicator"})]},`${z}-${K}`)},Ek=()=>{if(!B||!L)return null;const z=c==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:z.map(K=>m.jsx("div",{className:"promotion-piece",onClick:()=>{qu(L.from,L.to,K),q(!1),T(null)},style:{backgroundImage:bv[K]?`url(${bv[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[_k,Ck]=O.useState(null),x1=(z=!1,K="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${z?" piece-gallery-sm":""}`,children:[m.jsx("h3",{children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:i5e.map(te=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>Ck(te.key),children:[m.jsx("img",{src:te.img,alt:te.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:te.name}),_k===te.key&&m.jsx("div",{className:"piece-gallery-desc",children:te.desc})]},te.key))}),m.jsx("div",{className:"piece-gallery-tip",children:K})]}),Sk=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"#fff",borderRadius:12,padding:"32px 24px",boxShadow:"0 4px 32px rgba(0,0,0,0.12)",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#0a2a7a",marginBottom:16},children:"Start a New Game"}),m.jsxs("p",{style:{fontSize:"1.1rem",color:"#333",marginBottom:24},children:["Challenge the LawbBot AI to a chess match.",m.jsx("br",{}),"Good luck, have fun!"]}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${p==="easy"?" selected":""}`,style:{background:p==="easy"?"#44c0ff":"#eee",color:p==="easy"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="easy"?"0 2px 8px #44c0ff44":"none"},onClick:()=>g("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${p==="hard"?" selected":""}`,style:{background:p==="hard"?"#0a2a7a":"#eee",color:p==="hard"?"#fff":"#333",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:8,border:"none",cursor:"pointer",letterSpacing:1,boxShadow:p==="hard"?"0 2px 8px #0a2a7a44":"none"},onClick:()=>g("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{A1()},style:{background:"linear-gradient(90deg, #0a2a7a 0%, #44c0ff 100%)",color:"white",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:8,boxShadow:"0 2px 12px rgba(0,0,0,0.08)",border:"none",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),Ak=(z,K,te,J)=>{if(J.toLowerCase()==="p"&&(on(J)==="blue"&&te.row===0||on(J)==="red"&&te.row===7)){const Y=on(J)==="blue"?"q":"Q";z[te.row][te.col]=Y}J.toLowerCase()==="k"&&Math.abs(K.col-te.col)===2&&(te.col===6?(z[K.row][7]=null,z[K.row][5]=on(J)==="blue"?"r":"R"):te.col===2&&(z[K.row][0]=null,z[K.row][3]=on(J)==="blue"?"r":"R"))},T1=(z,K,te,J)=>{const Y=zg(z.row,z.col),_e=zg(K.row,K.col);return`${Y}-${_e}`},ol=(z,K,te)=>{const J={...j};te.toLowerCase()==="k"?on(te)==="blue"?J.blueKingMoved=!0:J.redKingMoved=!0:te.toLowerCase()==="r"&&(on(te)==="blue"?(z.col===0&&(J.blueRooksMove.left=!0),z.col===7&&(J.blueRooksMove.right=!0)):(z.col===0&&(J.redRooksMove.left=!0),z.col===7&&(J.redRooksMove.right=!0))),te.toLowerCase()==="p"&&Math.abs(z.row-K.row)===2?J.lastPawnDoubleMove={row:K.row,col:K.col}:J.lastPawnDoubleMove=null,H(J)},qu=(z,K,te="q",J=!1)=>{o[z.row][z.col];const _e=o[K.row][K.col]!==null;if(yi(_e?"capture":"move"),_e){$({row:K.row,col:K.col,show:!0}),setTimeout(()=>{Yh(z,K,J),$(null)},500);return}Yh(z,K,J)},yi=z=>{if(!Fg)return;let K="";switch(z){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},Gg=()=>{if(rb){yi("victory");for(let z=0;z<50;z++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},z*100);setTimeout(()=>Wg(!1),5e3)}},[os,Vg]=O.useState(!1),[Gu,cb]=O.useState(!1),lb=()=>{Vg(!1),cb(!1)},Kg=()=>{lb(),Qh()},Zh=()=>{lb(),P(!1)},R1=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Vu=s==="online";return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${ze?" chess-dark-mode":""}`,children:[!n&&m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Lawb Chess"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{className:"dark-mode-toggle",onClick:Yt,title:ze?"Switch to light mode":"Switch to dark mode","aria-label":ze?"Switch to light mode":"Switch to dark mode",children:ze?"":""}),e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(_)&&_.slice(0,8).map((z,K)=>{if(typeof z=="object"&&z!==null&&"username"in z&&"wins"in z&&"losses"in z&&"draws"in z&&"points"in z){const te=z;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:I1(te.username)}),m.jsx("td",{children:te.points})]},te.username)}return null})})]})})]}),D&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:b.slice().reverse().map((z,K)=>m.jsx("li",{children:z},b.length-1-K))})]})]}),m.jsxs("div",{className:"center-area",children:[D&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:c==="blue"?"current-blue":"current-red",children:[c==="blue"?"Blue":"Red"," to move"]}),s===bI.AI&&m.jsxs("span",{className:"mode-play",children:[p==="easy"?"Easy":"Hard"," AI"]}),Vu&&m.jsxs("span",{className:"wager-display",children:["Wager: ",k," ETH"]})]}),D?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${qh})`},children:[Array.from({length:8},(z,K)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(te,J)=>N1(K,J))},K)),x&&x.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${x.row*12.5}%`,left:`${x.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsx("button",{onClick:Kg,children:"New Game"}),m.jsx("button",{onClick:Zh,children:"Menu"}),m.jsx("button",{onClick:()=>Ie(!0),children:"Pieces"})]})]}):de?Sk():Vu?m.jsx(fq,{onClose:t,onMinimize:e,fullscreen:n}):m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${s==="ai"?"selected":""}`,onClick:()=>i("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${Vu?"selected":""}`,onClick:()=>i("online"),children:"PvP"})]}),s===bI.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>ee(!0),children:"Start Game"}),Vu&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with ETH wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Chess:"})," Capture your opponent's king. Each piece moves uniquely - pawns forward, knights in L-shapes, bishops diagonally, rooks horizontally/vertically, queens in all directions, kings one square at a time."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Multiplayer:"})," Connect your wallet to play PvP games with ETH wagers. Win games to claim your opponent's wager and climb the leaderboard."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"AI Mode:"})," Practice against our LawbBot AI. Choose Easy or Hard difficulty. Wins earn points on the leaderboard."]})]})]})]})]}),m.jsx("div",{className:"right-sidebar",children:m.jsx("div",{className:"piece-gallery-panel",children:x1(!0)})})]}),he&&m.jsx("div",{className:"gallery-modal-overlay",onClick:()=>Ie(!1),children:m.jsxs("div",{className:"gallery-modal",onClick:z=>z.stopPropagation(),children:[m.jsx("button",{className:"close-modal-btn",onClick:()=>Ie(!1),children:""}),x1(!1)]})}),Ek(),le&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),os&&rb&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:Kg,children:"New Game"}),m.jsx("button",{onClick:Zh,children:"Back to Menu"})]})]}),Gu&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"blood-overlay",children:[0,1,2,3,4,5].map(z=>m.jsx("div",{className:"blood-drip",style:{left:`${10+z*14}%`,animationDelay:`${.5+z*.3}s`,background:"linear-gradient(to bottom, #a80000 0%, #d10000 80%, #5a0000 100%)",width:`${14+Math.random()*10}px`,height:`${50+Math.random()*30}px`,opacity:.85+Math.random()*.1}},z))}),m.jsxs("div",{className:"defeat-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)",pointerEvents:"none"},children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24,pointerEvents:"none"},children:[m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Kg,children:"New Game"}),m.jsx("button",{style:{pointerEvents:"auto",zIndex:3e3},onClick:Zh,children:"Back to Menu"})]})]})]})]})};function vU(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const EU=()=>{const[t,e]=O.useState("singleplayer");return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(c5e,{onClose:()=>{}}):m.jsx(fq,{onClose:()=>{},onMinimize:()=>{},fullscreen:!1})})})},l5e=new uae,u5e=typeof window<"u"&&window.location.hostname.startsWith("chess."),d5e=()=>yDe("(max-width: 768px)")?m.jsx(mDe,{}):m.jsx(cDe,{});BI.createRoot(document.getElementById("root")).render(m.jsx(Di.StrictMode,{children:m.jsx(Ioe,{config:uq.wagmiConfig,children:m.jsx(Tae,{client:l5e,children:m.jsx(oDe,{children:m.jsx(rDe,{children:u5e?m.jsx(eE,{path:"/*",element:m.jsx(EU,{})}):m.jsxs(m.Fragment,{children:[m.jsx(eE,{path:"/",element:m.jsx(d5e,{})}),m.jsx(eE,{path:"/chess",element:m.jsx(EU,{})})]})})})})})}));export{$Me as $,Be as A,it as B,Oe as C,Je as D,by as E,nT as F,zm as G,Ho as H,Mpe as I,pn as J,UMe as K,ZT as L,$r as M,Ope as N,pe as O,fl as P,Qv as Q,St as R,Ko as S,Xs as T,fge as U,_y as V,Zr as W,kMe as X,Dr as Y,Ah as Z,Ta as _,Jv as a,DH as a0,JT as a1,ag as a2,hs as a3,R5e as a4,Dc as a5,Ya as a6,Cw as a7,He as a8,gr as a9,kU as aA,C5e as aB,ow as aC,Hee as aD,poe as aE,Ao as aF,Co as aG,xF as aH,fse as aI,Tl as aa,EF as ab,SC as ac,ue as ad,WP as ae,_r as af,rne as ag,wC as ah,XP as ai,cne as aj,R0 as ak,bo as al,Wu as am,hy as an,Ka as ao,M1e as ap,_Me as aq,K5 as ar,hz as as,I1e as at,L1e as au,CMe as av,EMe as aw,i1 as ax,AMe as ay,SMe as az,mn as b,ke as c,Ze as d,U as e,jn as f,$c as g,LMe as h,Wc as i,Pi as j,ot as k,ei as l,vCe as m,Ua as n,Ske as o,je as p,Pa as q,MMe as r,Jt as s,z7 as t,Mn as u,P$ as v,Gi as w,OMe as x,ws as y,ms as z};
