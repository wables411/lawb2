const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-C6B3zXXo.js","assets/if-defined-Bu9tsVLA.js","assets/index-BvOU0h0t.js","assets/index-DUBKwcXr.js","assets/ref-D6OjWcjW.js","assets/index-CvCdC8RG.js","assets/index-oifVWAi7.js","assets/index-qqvLO71u.js","assets/index-CS5fhKoX.js","assets/index-B57x356r.js","assets/index-B8sLXmaU.js","assets/index-DC6F8u3D.js","assets/email-DQxUczvn.js","assets/index-Dh5ToXYe.js","assets/socials-DPLnjtr_.js","assets/index-B5LZpt0f.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-1Wtuhf0h.js","assets/index-C94MIXTz.js","assets/index-CwzZBht8.js","assets/index-rjSr0410.js","assets/swaps-DY7WVY-j.js","assets/index-Crs2NlUt.js","assets/index-DHCaMHPs.js","assets/index-CuM_zvlI.js","assets/send-0JSlMDzR.js","assets/index-BY8aXBPf.js","assets/index-B1VIyASW.js","assets/receive--D9YneG3.js","assets/index-k0NcgXKz.js","assets/onramp-33ztcSpT.js","assets/index-CEJs4N9X.js","assets/index-DT_ZEVpQ.js","assets/index-q6GHjPiS.js","assets/transactions-j6R2U9Nk.js","assets/index-Deh51sf0.js","assets/index-CE0H0jdI.js","assets/index-_Na1VbGQ.js","assets/index-Cvk25p5s.js","assets/index-CGtabEsF.js","assets/w3m-modal-BM8RfG5p.js"])))=>i.map(i=>d[i]);
var sre=Object.defineProperty;var Y$=t=>{throw TypeError(t)};var ire=(t,e,n)=>e in t?sre(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var te=(t,e,n)=>ire(t,typeof e!="symbol"?e+"":e,n),vR=(t,e,n)=>e.has(t)||Y$("Cannot "+n);var C=(t,e,n)=>(vR(t,e,"read from private field"),n?n.call(t):e.get(t)),Q=(t,e,n)=>e.has(t)?Y$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(vR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>(vR(t,e,"access private method"),n);var Sd=(t,e,n,r)=>({set _(s){L(t,e,s,n)},get _(){return C(t,e,r)}});function ore(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Sl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dz(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var hz={exports:{}},oN={},fz={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_=Symbol.for("react.element"),are=Symbol.for("react.portal"),cre=Symbol.for("react.fragment"),lre=Symbol.for("react.strict_mode"),ure=Symbol.for("react.profiler"),dre=Symbol.for("react.provider"),hre=Symbol.for("react.context"),fre=Symbol.for("react.forward_ref"),pre=Symbol.for("react.suspense"),gre=Symbol.for("react.memo"),mre=Symbol.for("react.lazy"),Q$=Symbol.iterator;function yre(t){return t===null||typeof t!="object"?null:(t=Q$&&t[Q$]||t["@@iterator"],typeof t=="function"?t:null)}var pz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gz=Object.assign,mz={};function eb(t,e,n){this.props=t,this.context=e,this.refs=mz,this.updater=n||pz}eb.prototype.isReactComponent={};eb.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eb.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yz(){}yz.prototype=eb.prototype;function H5(t,e,n){this.props=t,this.context=e,this.refs=mz,this.updater=n||pz}var G5=H5.prototype=new yz;G5.constructor=H5;gz(G5,eb.prototype);G5.isPureReactComponent=!0;var J$=Array.isArray,wz=Object.prototype.hasOwnProperty,q5={current:null},bz={key:!0,ref:!0,__self:!0,__source:!0};function vz(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)wz.call(e,r)&&!bz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:$_,type:t,key:i,ref:o,props:s,_owner:q5.current}}function wre(t,e){return{$$typeof:$_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function V5(t){return typeof t=="object"&&t!==null&&t.$$typeof===$_}function bre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Z$=/\/+/g;function ER(t,e){return typeof t=="object"&&t!==null&&t.key!=null?bre(""+t.key):e.toString(36)}function gS(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $_:case are:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+ER(o,0):r,J$(s)?(n="",t!=null&&(n=t.replace(Z$,"$&/")+"/"),gS(s,e,n,"",function(l){return l})):s!=null&&(V5(s)&&(s=wre(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Z$,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",J$(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+ER(i,a);o+=gS(i,e,n,c,s)}else if(c=yre(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+ER(i,a++),o+=gS(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Q1(t,e,n){if(t==null)return t;var r=[],s=0;return gS(t,r,"","",function(i){return e.call(n,i,s++)}),r}function vre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bi={current:null},mS={transition:null},Ere={ReactCurrentDispatcher:Bi,ReactCurrentBatchConfig:mS,ReactCurrentOwner:q5};function Ez(){throw Error("act(...) is not supported in production builds of React.")}Zt.Children={map:Q1,forEach:function(t,e,n){Q1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Q1(t,function(){e++}),e},toArray:function(t){return Q1(t,function(e){return e})||[]},only:function(t){if(!V5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Zt.Component=eb;Zt.Fragment=cre;Zt.Profiler=ure;Zt.PureComponent=H5;Zt.StrictMode=lre;Zt.Suspense=pre;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ere;Zt.act=Ez;Zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=gz({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=q5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)wz.call(e,c)&&!bz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:$_,type:t.type,key:s,ref:i,props:r,_owner:o}};Zt.createContext=function(t){return t={$$typeof:hre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:dre,_context:t},t.Consumer=t};Zt.createElement=vz;Zt.createFactory=function(t){var e=vz.bind(null,t);return e.type=t,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(t){return{$$typeof:fre,render:t}};Zt.isValidElement=V5;Zt.lazy=function(t){return{$$typeof:mre,_payload:{_status:-1,_result:t},_init:vre}};Zt.memo=function(t,e){return{$$typeof:gre,type:t,compare:e===void 0?null:e}};Zt.startTransition=function(t){var e=mS.transition;mS.transition={};try{t()}finally{mS.transition=e}};Zt.unstable_act=Ez;Zt.useCallback=function(t,e){return Bi.current.useCallback(t,e)};Zt.useContext=function(t){return Bi.current.useContext(t)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(t){return Bi.current.useDeferredValue(t)};Zt.useEffect=function(t,e){return Bi.current.useEffect(t,e)};Zt.useId=function(){return Bi.current.useId()};Zt.useImperativeHandle=function(t,e,n){return Bi.current.useImperativeHandle(t,e,n)};Zt.useInsertionEffect=function(t,e){return Bi.current.useInsertionEffect(t,e)};Zt.useLayoutEffect=function(t,e){return Bi.current.useLayoutEffect(t,e)};Zt.useMemo=function(t,e){return Bi.current.useMemo(t,e)};Zt.useReducer=function(t,e,n){return Bi.current.useReducer(t,e,n)};Zt.useRef=function(t){return Bi.current.useRef(t)};Zt.useState=function(t){return Bi.current.useState(t)};Zt.useSyncExternalStore=function(t,e,n){return Bi.current.useSyncExternalStore(t,e,n)};Zt.useTransition=function(){return Bi.current.useTransition()};Zt.version="18.3.1";fz.exports=Zt;var D=fz.exports;const Xo=nm(D),Cre=ore({__proto__:null,default:Xo},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _re=D,Are=Symbol.for("react.element"),Sre=Symbol.for("react.fragment"),xre=Object.prototype.hasOwnProperty,Ire=_re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Nre={key:!0,ref:!0,__self:!0,__source:!0};function Cz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xre.call(e,r)&&!Nre.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Are,type:t,key:i,ref:o,props:s,_owner:Ire.current}}oN.Fragment=Sre;oN.jsx=Cz;oN.jsxs=Cz;hz.exports=oN;var m=hz.exports,X$={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie=function(t,e){if(!t)throw tb(e)},tb=function(t){return new Error("Firebase Database ("+_z.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Tre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},K5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Az(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Tre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new Rre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Rre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Sz=function(t){const e=Az(t);return K5.encodeByteArray(e,!0)},lx=function(t){return Sz(t).replace(/\./g,"")},A2=function(t){try{return K5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pre(t){return xz(void 0,t)}function xz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Ore(n)||(t[n]=xz(t[n],e[n]));return t}function Ore(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dre=()=>kre().__FIREBASE_DEFAULTS__,Mre=()=>{if(typeof process>"u"||typeof X$>"u")return;const t=X$.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Lre=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&A2(t[1]);return e&&JSON.parse(e)},Iz=()=>{try{return Dre()||Mre()||Lre()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ure=t=>{var e,n;return(n=(e=Iz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$re=t=>{const e=Ure(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Nz=()=>{var t;return(t=Iz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bre(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lx(JSON.stringify(n)),lx(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Tz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fre())}function jre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wre(){return _z.NODE_ADMIN===!0}function zre(){try{return typeof indexedDB=="object"}catch{return!1}}function Hre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gre="FirebaseError";class F_ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Gre,Object.setPrototypeOf(this,F_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rz.prototype.create)}}class Rz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qre(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new F_(s,a,r)}}function qre(t,e){return t.replace(Vre,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Vre=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ME(t){return JSON.parse(t)}function ss(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=ME(A2(i[0])||""),n=ME(A2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Kre=function(t){const e=Pz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Yre=function(t){const e=Pz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function aw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function eB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ux(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function S2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(tB(i)&&tB(o)){if(!S2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function tB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qre(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function aN(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zre=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ie(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},cN=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(t){return t&&t._delegate?t._delegate:t}class LE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new B_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tse(e))try{this.getOrInitializeService({instanceIdentifier:ep})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ep){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ep){return this.instances.has(e)}getOptions(e=ep){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ese(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ep){return this.component?this.component.multipleInstances?e:ep:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ese(t){return t===ep?void 0:t}function tse(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nse{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Xre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(er||(er={}));const rse={debug:er.DEBUG,verbose:er.VERBOSE,info:er.INFO,warn:er.WARN,error:er.ERROR,silent:er.SILENT},sse=er.INFO,ise={[er.DEBUG]:"log",[er.VERBOSE]:"log",[er.INFO]:"info",[er.WARN]:"warn",[er.ERROR]:"error"},ose=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ise[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Oz{constructor(e){this.name=e,this._logLevel=sse,this._logHandler=ose,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,er.DEBUG,...e),this._logHandler(this,er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,er.VERBOSE,...e),this._logHandler(this,er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,er.INFO,...e),this._logHandler(this,er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,er.WARN,...e),this._logHandler(this,er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,er.ERROR,...e),this._logHandler(this,er.ERROR,...e)}}const ase=(t,e)=>e.some(n=>t instanceof n);let nB,rB;function cse(){return nB||(nB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lse(){return rB||(rB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kz=new WeakMap,x2=new WeakMap,Dz=new WeakMap,CR=new WeakMap,Y5=new WeakMap;function use(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Hh(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&kz.set(n,t)}).catch(()=>{}),Y5.set(e,t),e}function dse(t){if(x2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});x2.set(t,e)}let I2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return x2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hh(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hse(t){I2=t(I2)}function fse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(_R(this),e,...n);return Dz.set(r,e.sort?e.sort():[e]),Hh(r)}:lse().includes(t)?function(...e){return t.apply(_R(this),e),Hh(kz.get(this))}:function(...e){return Hh(t.apply(_R(this),e))}}function pse(t){return typeof t=="function"?fse(t):(t instanceof IDBTransaction&&dse(t),ase(t,cse())?new Proxy(t,I2):t)}function Hh(t){if(t instanceof IDBRequest)return use(t);if(CR.has(t))return CR.get(t);const e=pse(t);return e!==t&&(CR.set(t,e),Y5.set(e,t)),e}const _R=t=>Y5.get(t);function gse(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Hh(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Hh(o.result),c.oldVersion,c.newVersion,Hh(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const mse=["get","getKey","getAll","getAllKeys","count"],yse=["put","add","delete","clear"],AR=new Map;function sB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(AR.get(e))return AR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=yse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mse.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return AR.set(e,i),i}hse(t=>({...t,get:(e,n,r)=>sB(e,n)||t.get(e,n,r),has:(e,n)=>!!sB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const N2="@firebase/app",iB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Oz("@firebase/app"),vse="@firebase/app-compat",Ese="@firebase/analytics-compat",Cse="@firebase/analytics",_se="@firebase/app-check-compat",Ase="@firebase/app-check",Sse="@firebase/auth",xse="@firebase/auth-compat",Ise="@firebase/database",Nse="@firebase/data-connect",Tse="@firebase/database-compat",Rse="@firebase/functions",Pse="@firebase/functions-compat",Ose="@firebase/installations",kse="@firebase/installations-compat",Dse="@firebase/messaging",Mse="@firebase/messaging-compat",Lse="@firebase/performance",Use="@firebase/performance-compat",$se="@firebase/remote-config",Bse="@firebase/remote-config-compat",Fse="@firebase/storage",jse="@firebase/storage-compat",Wse="@firebase/firestore",zse="@firebase/vertexai-preview",Hse="@firebase/firestore-compat",Gse="firebase",qse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="[DEFAULT]",Vse={[N2]:"fire-core",[vse]:"fire-core-compat",[Cse]:"fire-analytics",[Ese]:"fire-analytics-compat",[Ase]:"fire-app-check",[_se]:"fire-app-check-compat",[Sse]:"fire-auth",[xse]:"fire-auth-compat",[Ise]:"fire-rtdb",[Nse]:"fire-data-connect",[Tse]:"fire-rtdb-compat",[Rse]:"fire-fn",[Pse]:"fire-fn-compat",[Ose]:"fire-iid",[kse]:"fire-iid-compat",[Dse]:"fire-fcm",[Mse]:"fire-fcm-compat",[Lse]:"fire-perf",[Use]:"fire-perf-compat",[$se]:"fire-rc",[Bse]:"fire-rc-compat",[Fse]:"fire-gcs",[jse]:"fire-gcs-compat",[Wse]:"fire-fst",[Hse]:"fire-fst-compat",[zse]:"fire-vertex","fire-js":"fire-js",[Gse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE=new Map,Kse=new Map,R2=new Map;function oB(t,e){try{t.container.addComponent(e)}catch(n){cd.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dx(t){const e=t.name;if(R2.has(e))return cd.debug(`There were multiple attempts to register component ${e}.`),!1;R2.set(e,t);for(const n of UE.values())oB(n,t);for(const n of Kse.values())oB(n,t);return!0}function Yse(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gh=new Rz("app","Firebase",Qse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new LE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zse=qse;function Mz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:T2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Gh.create("bad-app-name",{appName:String(s)});if(n||(n=Nz()),!n)throw Gh.create("no-options");const i=UE.get(s);if(i){if(S2(n,i.options)&&S2(r,i.config))return i;throw Gh.create("duplicate-app",{appName:s})}const o=new nse(s);for(const c of R2.values())o.addComponent(c);const a=new Jse(n,r,o);return UE.set(s,a),a}function Lz(t=T2){const e=UE.get(t);if(!e&&t===T2&&Nz())return Mz();if(!e)throw Gh.create("no-app",{appName:t});return e}function Xse(){return Array.from(UE.values())}function Wy(t,e,n){var r;let s=(r=Vse[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cd.warn(a.join(" "));return}dx(new LE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eie="firebase-heartbeat-database",tie=1,$E="firebase-heartbeat-store";let SR=null;function Uz(){return SR||(SR=gse(eie,tie,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($E)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gh.create("idb-open",{originalErrorMessage:t.message})})),SR}async function nie(t){try{const n=(await Uz()).transaction($E),r=await n.objectStore($E).get($z(t));return await n.done,r}catch(e){if(e instanceof F_)cd.warn(e.message);else{const n=Gh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cd.warn(n.message)}}}async function aB(t,e){try{const r=(await Uz()).transaction($E,"readwrite");await r.objectStore($E).put(e,$z(t)),await r.done}catch(n){if(n instanceof F_)cd.warn(n.message);else{const r=Gh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cd.warn(r.message)}}}function $z(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rie=1024,sie=30*24*60*60*1e3;class iie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new aie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=sie}),this._storage.overwrite(this._heartbeatsCache))}catch(r){cd.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=cB(),{heartbeatsToSend:r,unsentEntries:s}=oie(this._heartbeatsCache.heartbeats),i=lx(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return cd.warn(n),""}}}function cB(){return new Date().toISOString().substring(0,10)}function oie(t,e=rie){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),lB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),lB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class aie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zre()?Hre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nie(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return aB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function lB(t){return lx(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cie(t){dx(new LE("platform-logger",e=>new wse(e),"PRIVATE")),dx(new LE("heartbeat",e=>new iie(e),"PRIVATE")),Wy(N2,iB,t),Wy(N2,iB,"esm2017"),Wy("fire-js","")}cie("");var lie="firebase",uie="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wy(lie,uie,"app");var uB={};const dB="@firebase/database",hB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bz="";function die(t){Bz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ss(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ME(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fie{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return tu(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new hie(e)}}catch{}return new fie},vp=Fz("localStorage"),pie=Fz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=new Oz("@firebase/database"),gie=function(){let t=1;return function(){return t++}}(),jz=function(t){const e=Zre(t),n=new Jre;n.update(e);const r=n.digest();return K5.encodeByteArray(r)},j_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=j_.apply(null,r):typeof r=="object"?e+=ss(r):e+=r,e+=" "}return e};let eE=null,fB=!0;const mie=function(t,e){Ie(!0,"Can't turn on custom loggers persistently."),zy.logLevel=er.VERBOSE,eE=zy.log.bind(zy)},Bs=function(...t){if(fB===!0&&(fB=!1,eE===null&&pie.get("logging_enabled")===!0&&mie()),eE){const e=j_.apply(null,t);eE(e)}},W_=function(t){return function(...e){Bs(t,...e)}},P2=function(...t){const e="FIREBASE INTERNAL ERROR: "+j_(...t);zy.error(e)},ld=function(...t){const e=`FIREBASE FATAL ERROR: ${j_(...t)}`;throw zy.error(e),new Error(e)},Di=function(...t){const e="FIREBASE WARNING: "+j_(...t);zy.warn(e)},yie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Di("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Q5=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},wie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},cw="[MIN_NAME]",Cg="[MAX_NAME]",rm=function(t,e){if(t===e)return 0;if(t===cw||e===Cg)return-1;if(e===cw||t===Cg)return 1;{const n=pB(t),r=pB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},bie=function(t,e){return t===e?0:t<e?-1:1},Hb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ss(e))},J5=function(t){if(typeof t!="object"||t===null)return ss(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ss(e[r]),n+=":",n+=J5(t[e[r]]);return n+="}",n},Wz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function Vs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const zz=function(t){Ie(!Q5(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},vie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Eie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Cie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const _ie=new RegExp("^-?(0*)\\d{1,10}$"),Aie=-2147483648,Sie=2147483647,pB=function(t){if(_ie.test(t)){const e=Number(t);if(e>=Aie&&e<=Sie)return e}return null},rb=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Di("Exception was thrown by user callback.",n),e},Math.floor(0))}},xie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},tE=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Di(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Bs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Di(e)}}class yS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}yS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5="5",Hz="v",Gz="s",qz="r",Vz="f",Kz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Yz="ls",Qz="p",O2="ac",Jz="websocket",Zz="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Tie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function eH(t,e,n){Ie(typeof e=="string","typeof type must == string"),Ie(typeof n=="object","typeof params must == object");let r;if(e===Jz)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Zz)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Tie(t)&&(n.ns=t.namespace);const s=[];return Vs(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rie{constructor(){this.counters_={}}incrementCounter(e,n=1){tu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Pre(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={},IR={};function X5(t){const e=t.toString();return xR[e]||(xR[e]=new Rie),xR[e]}function Pie(t,e){const n=t.toString();return IR[n]||(IR[n]=e()),IR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&rb(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gB="start",kie="close",Die="pLPCommand",Mie="pRTLPCB",tH="id",nH="pw",rH="ser",Lie="cb",Uie="seg",$ie="ts",Bie="d",Fie="dframe",sH=1870,iH=30,jie=sH-iH,Wie=25e3,zie=3e4;class by{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=W_(e),this.stats_=X5(n),this.urlFn=c=>(this.appCheckToken&&(c[O2]=this.appCheckToken),eH(n,Zz,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Oie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(zie)),wie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new eM((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gB)this.id=a,this.password=c;else if(o===kie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[gB]="t",r[rH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Lie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Hz]=Z5,this.transportSessionId&&(r[Gz]=this.transportSessionId),this.lastSessionId&&(r[Yz]=this.lastSessionId),this.applicationId&&(r[Qz]=this.applicationId),this.appCheckToken&&(r[O2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Kz.test(location.hostname)&&(r[qz]=Vz);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){by.forceAllow_=!0}static forceDisallow(){by.forceDisallow_=!0}static isAvailable(){return by.forceAllow_?!0:!by.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!vie()&&!Eie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ss(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Sz(n),s=Wz(r,jie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Fie]="t",r[tH]=e,r[nH]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ss(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class eM{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=gie(),window[Die+this.uniqueCallbackIdentifier]=e,window[Mie+this.uniqueCallbackIdentifier]=n,this.myIFrame=eM.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Bs("frame writing exception"),a.stack&&Bs(a.stack),Bs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Bs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[tH]=this.myID,e[nH]=this.myPW,e[rH]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+iH+r.length<=sH;){const o=this.pendingSegs.shift();r=r+"&"+Uie+s+"="+o.seg+"&"+$ie+s+"="+o.ts+"&"+Bie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Wie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Bs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hie=16384,Gie=45e3;let hx=null;typeof MozWebSocket<"u"?hx=MozWebSocket:typeof WebSocket<"u"&&(hx=WebSocket);class Pc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=W_(this.connId),this.stats_=X5(n),this.connURL=Pc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Hz]=Z5,typeof location<"u"&&location.hostname&&Kz.test(location.hostname)&&(o[qz]=Vz),n&&(o[Gz]=n),r&&(o[Yz]=r),s&&(o[O2]=s),i&&(o[Qz]=i),eH(e,Jz,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vp.set("previous_websocket_failure",!0);try{let r;Wre(),this.mySock=new hx(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Pc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&hx!==null&&!Pc.forceDisallow_}static previouslyFailed(){return vp.isInMemoryStorage||vp.get("previous_websocket_failure")===!0}markConnectionHealthy(){vp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=ME(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ss(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Wz(n,Hie);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Gie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Pc.responsesRequiredToBeHealthy=2;Pc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[by,Pc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Pc&&Pc.isAvailable();let r=n&&!Pc.previouslyFailed();if(e.webSocketOnly&&(n||Di("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Pc];else{const s=this.transports_=[];for(const i of BE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);BE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}BE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qie=6e4,Vie=5e3,Kie=10*1024,Yie=100*1024,NR="t",mB="d",Qie="s",yB="r",Jie="e",wB="o",bB="a",vB="n",EB="p",Zie="h";class Xie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=W_("c:"+this.id+":"),this.transportManager_=new BE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=tE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Kie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(NR in e){const n=e[NR];n===bB?this.upgradeIfSecondaryHealthy_():n===yB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===wB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Hb("t",e),r=Hb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:EB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:bB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:vB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Hb("t",e),r=Hb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Hb(NR,e);if(mB in e){const r=e[mB];if(n===Zie){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===vB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Qie?this.onConnectionShutdown_(r):n===yB?this.onReset_(r):n===Jie?P2("Server Error: "+r):n===wB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):P2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Z5!==r&&Di("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),tE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(qie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:EB,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aH=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ie(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends aH{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Tz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fx}getInitialEvent(e){return Ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=32,_B=768;class jn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function vn(){return new jn("")}function qt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function gf(t){return t.pieces_.length-t.pieceNum_}function nr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new jn(t.pieces_,e)}function tM(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function eoe(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function FE(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function cH(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new jn(e,0)}function Tr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof jn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new jn(n,0)}function Jt(t){return t.pieceNum_>=t.pieces_.length}function Ti(t,e){const n=qt(t),r=qt(e);if(n===null)return e;if(n===r)return Ti(nr(t),nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function toe(t,e){const n=FE(t,0),r=FE(e,0);for(let s=0;s<n.length&&s<r.length;s++){const i=rm(n[s],r[s]);if(i!==0)return i}return n.length===r.length?0:n.length<r.length?-1:1}function nM(t,e){if(gf(t)!==gf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function La(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(gf(t)>gf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class noe{constructor(e,n){this.errorPrefix_=n,this.parts_=FE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=cN(this.parts_[r]);lH(this)}}function roe(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=cN(e),lH(t)}function soe(t){const e=t.parts_.pop();t.byteLength_-=cN(e),t.parts_.length>0&&(t.byteLength_-=1)}function lH(t){if(t.byteLength_>_B)throw new Error(t.errorPrefix_+"has a key path longer than "+_B+" bytes ("+t.byteLength_+").");if(t.parts_.length>CB)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+CB+") or object contains a cycle "+tp(t))}function tp(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM extends aH{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new rM}getInitialEvent(e){return Ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=1e3,ioe=60*5*1e3,AB=30*1e3,ooe=1.3,aoe=3e4,coe="server_kill",SB=3;class Zu extends oH{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Zu.nextPersistentConnectionId_++,this.log_=W_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gb,this.maxReconnectDelay_=ioe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");rM.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&fx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ss(i)),Ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new B_,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ie(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Zu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&tu(e,"w")){const r=aw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Di(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Yre(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=AB)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Kre(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ss(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):P2("Unrecognized action received from server: "+ss(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Gb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>aoe&&(this.reconnectDelay_=Gb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ooe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Zu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ie(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Bs("getToken() completed but was canceled"):(Bs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Xie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Di(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(coe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Di(d),c())}}}interrupt(e){Bs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Bs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],eB(this.interruptReasons_)&&(this.reconnectDelay_=Gb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>J5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new jn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Bs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=SB&&(this.reconnectDelay_=AB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Bs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=SB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Bz.replace(/\./g,"-")]=1,Tz()?e["framework.cordova"]=1:jre()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fx.getInstance().currentlyOnline();return eB(this.interruptReasons_)&&e}}Zu.nextPersistentConnectionId_=0;Zu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Vt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Vt(cw,e),s=new Vt(cw,n);return this.compare(r,s)!==0}minPost(){return Vt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let J1;class uH extends lN{static get __EMPTY_NODE(){return J1}static set __EMPTY_NODE(e){J1=e}compare(e,n){return rm(e.name,n.name)}isDefinedOn(e){throw tb("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Vt.MIN}maxPost(){return new Vt(Cg,J1)}makePost(e,n){return Ie(typeof e=="string","KeyIndex indexValue must always be a string."),new Vt(e,J1)}toString(){return".key"}}const Hy=new uH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ys{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ys.RED,this.left=s??mo.EMPTY_NODE,this.right=i??mo.EMPTY_NODE}copy(e,n,r,s,i){return new ys(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return mo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return mo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ys.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ys.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ys.RED=!0;ys.BLACK=!1;class loe{copy(e,n,r,s,i){return this}insert(e,n,r){return new ys(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class mo{constructor(e,n=mo.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new mo(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ys.BLACK,null,null))}remove(e){return new mo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ys.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Z1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Z1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Z1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Z1(this.root_,null,this.comparator_,!0,e)}}mo.EMPTY_NODE=new loe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uoe(t,e){return rm(t.name,e.name)}function sM(t,e){return rm(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k2;function doe(t){k2=t}const dH=function(t){return typeof t=="number"?"number:"+zz(t):"string:"+t},hH=function(t){if(t.isLeafNode()){const e=t.val();Ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&tu(e,".sv"),"Priority must be a string or number.")}else Ie(t===k2||t.isEmpty(),"priority of unexpected type.");Ie(t===k2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xB;class ms{constructor(e,n=ms.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hH(this.priorityNode_)}static set __childrenNodeConstructor(e){xB=e}static get __childrenNodeConstructor(){return xB}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ms(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ms.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:qt(e)===".priority"?this.priorityNode_:ms.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ms.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=qt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ie(r!==".priority"||gf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ms.__childrenNodeConstructor.EMPTY_NODE.updateChild(nr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+dH(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=zz(this.value_):e+=this.value_,this.lazyHash_=jz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ms.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ms.__childrenNodeConstructor?-1:(Ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=ms.VALUE_TYPE_ORDER.indexOf(n),i=ms.VALUE_TYPE_ORDER.indexOf(r);return Ie(s>=0,"Unknown leaf type: "+n),Ie(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ms.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fH,pH;function hoe(t){fH=t}function foe(t){pH=t}class poe extends lN{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?rm(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Vt.MIN}maxPost(){return new Vt(Cg,new ms("[PRIORITY-POST]",pH))}makePost(e,n){const r=fH(e);return new Vt(n,new ms("[PRIORITY-POST]",r))}toString(){return".priority"}}const Rr=new poe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const goe=Math.log(2);class moe{constructor(e){const n=i=>parseInt(Math.log(i)/goe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const px=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ys(h,d.node,ys.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new ys(h,d.node,ys.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),v=t[w],A=n?n(v):v;f(new ys(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,ys.BLACK):(h(w,ys.BLACK),h(w,ys.RED))}return u},o=new moe(t.length),a=i(o);return new mo(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TR;const Om={};class qu{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ie(Om&&Rr,"ChildrenNode.ts has not been loaded"),TR=TR||new qu({".priority":Om},{".priority":Rr}),TR}get(e){const n=aw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof mo?n:null}hasIndex(e){return tu(this.indexSet_,e.toString())}addIndex(e,n){Ie(e!==Hy,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Vt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=px(r,e.getCompare()):a=Om;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new qu(u,l)}addToIndexes(e,n){const r=ux(this.indexes_,(s,i)=>{const o=aw(this.indexSet_,i);if(Ie(o,"Missing index implementation for "+i),s===Om)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Vt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),px(a,o.getCompare())}else return Om;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Vt(e.name,a))),c.insert(e,e.node)}});return new qu(r,this.indexSet_)}removeFromIndexes(e,n){const r=ux(this.indexes_,s=>{if(s===Om)return s;{const i=n.get(e.name);return i?s.remove(new Vt(e.name,i)):s}});return new qu(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qb;class Et{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&hH(this.priorityNode_),this.children_.isEmpty()&&Ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qb||(qb=new Et(new mo(sM),null,qu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qb}updatePriority(e){return this.children_.isEmpty()?this:new Et(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?qb:n}}getChild(e){const n=qt(e);return n===null?this:this.getImmediateChild(n).getChild(nr(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ie(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Vt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?qb:this.priorityNode_;return new Et(s,o,i)}}updateChild(e,n){const r=qt(e);if(r===null)return n;{Ie(qt(e)!==".priority"||gf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(nr(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Rr,(o,a)=>{n[o]=a.val(e),r++,i&&Et.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+dH(this.getPriority().val())+":"),this.forEachChild(Rr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":jz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Vt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Vt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Vt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Vt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Vt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===z_?-1:0}withIndex(e){if(e===Hy||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Et(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Hy||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Rr),s=n.getIterator(Rr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===Hy?null:this.indexMap_.get(e.toString())}}Et.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class yoe extends Et{constructor(){super(new mo(sM),Et.EMPTY_NODE,qu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Et.EMPTY_NODE}isEmpty(){return!1}}const z_=new yoe;Object.defineProperties(Vt,{MIN:{value:new Vt(cw,Et.EMPTY_NODE)},MAX:{value:new Vt(Cg,z_)}});uH.__EMPTY_NODE=Et.EMPTY_NODE;ms.__childrenNodeConstructor=Et;doe(z_);foe(z_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const woe=!0;function ns(t,e=null){if(t===null)return Et.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ms(n,ns(e))}if(!(t instanceof Array)&&woe){const n=[];let r=!1;if(Vs(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ns(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Vt(o,c)))}}),n.length===0)return Et.EMPTY_NODE;const i=px(n,uoe,o=>o.name,sM);if(r){const o=px(n,Rr.getCompare());return new Et(i,ns(e),new qu({".priority":o},{".priority":Rr}))}else return new Et(i,ns(e),qu.Default)}else{let n=Et.EMPTY_NODE;return Vs(t,(r,s)=>{if(tu(t,r)&&r.substring(0,1)!=="."){const i=ns(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ns(e))}}hoe(ns);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class boe extends lN{constructor(e){super(),this.indexPath_=e,Ie(!Jt(e)&&qt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?rm(e.name,n.name):i}makePost(e,n){const r=ns(e),s=Et.EMPTY_NODE.updateChild(this.indexPath_,r);return new Vt(n,s)}maxPost(){const e=Et.EMPTY_NODE.updateChild(this.indexPath_,z_);return new Vt(Cg,e)}toString(){return FE(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class voe extends lN{compare(e,n){const r=e.node.compareTo(n.node);return r===0?rm(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Vt.MIN}maxPost(){return Vt.MAX}makePost(e,n){const r=ns(e);return new Vt(n,r)}toString(){return".value"}}const Eoe=new voe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(t){return{type:"value",snapshotNode:t}}function lw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function jE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function WE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Coe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ie(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(jE(n,a)):Ie(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(lw(n,r)):o.trackChildChange(WE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Rr,(s,i)=>{n.hasChild(s)||r.trackChildChange(jE(s,i))}),n.isLeafNode()||n.forEachChild(Rr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(WE(s,i,o))}else r.trackChildChange(lw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Et.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.indexedFilter_=new iM(e.getIndex()),this.index_=e.getIndex(),this.startPost_=zE.getStartPost_(e),this.endPost_=zE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Vt(n,r))||(r=Et.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Et.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Et.EMPTY_NODE);const i=this;return n.forEachChild(Rr,(o,a)=>{i.matches(new Vt(o,a))||(s=s.updateImmediateChild(o,Et.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _oe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new zE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Vt(n,r))||(r=Et.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Et.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Et.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Et.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,Et.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ie(a.numChildren()===this.limit_,"");const c=new Vt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(WE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(jE(n,d));const g=a.updateImmediateChild(n,Et.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(lw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(jE(l.name,l.node)),i.trackChildChange(lw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,Et.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Cg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rr}copy(){const e=new oM;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Aoe(t){return t.loadsAllData()?new iM(t.getIndex()):t.hasLimit()?new _oe(t):new zE(t)}function IB(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Rr?n="$priority":t.index_===Eoe?n="$value":t.index_===Hy?n="$key":(Ie(t.index_ instanceof boe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ss(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ss(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ss(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ss(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ss(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function NB(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Rr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx extends oH{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=W_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=gx.getListenId_(e,r),a={};this.listens_[o]=a;const c=IB(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),aw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=gx.getListenId_(e,n);delete this.listens_[r]}get(e){const n=IB(e._queryParams),r=e._path.toString(),s=new B_;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qre(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ME(a.responseText)}catch{Di("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Di("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Soe{constructor(){this.rootNode_=Et.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){return{value:null,children:new Map}}function mH(t,e,n){if(Jt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=qt(e);t.children.has(r)||t.children.set(r,mx());const s=t.children.get(r);e=nr(e),mH(s,e,n)}}function D2(t,e,n){t.value!==null?n(e,t.value):xoe(t,(r,s)=>{const i=new jn(e.toString()+"/"+r);D2(s,i,n)})}function xoe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ioe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Vs(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=10*1e3,Noe=30*1e3,Toe=5*60*1e3;class Roe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Ioe(e);const r=TB+(Noe-TB)*Math.random();tE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Vs(e,(s,i)=>{i>0&&tu(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),tE(this.reportStats_.bind(this),Math.floor(Math.random()*2*Toe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mc;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Mc||(Mc={}));function aM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function cM(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lM(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Mc.ACK_USER_WRITE,this.source=aM()}operationForChild(e){if(Jt(this.path)){if(this.affectedTree.value!=null)return Ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new jn(e));return new yx(vn(),n,this.revert)}}else return Ie(qt(this.path)===e,"operationForChild called for unrelated child."),new yx(nr(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n){this.source=e,this.path=n,this.type=Mc.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new HE(this.source,vn()):new HE(this.source,nr(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Mc.OVERWRITE}operationForChild(e){return Jt(this.path)?new _g(this.source,vn(),this.snap.getImmediateChild(e)):new _g(this.source,nr(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Mc.MERGE}operationForChild(e){if(Jt(this.path)){const n=this.children.subtree(new jn(e));return n.isEmpty()?null:n.value?new _g(this.source,vn(),n.value):new uw(this.source,vn(),n)}else return Ie(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new uw(this.source,nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const n=qt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Poe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ooe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(Coe(o.childName,o.snapshotNode))}),Vb(t,s,"child_removed",e,r,n),Vb(t,s,"child_added",e,r,n),Vb(t,s,"child_moved",i,r,n),Vb(t,s,"child_changed",e,r,n),Vb(t,s,"value",e,r,n),s}function Vb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Doe(t,a,c)),o.forEach(a=>{const c=koe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function koe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Doe(t,e,n){if(e.childName==null||n.childName==null)throw tb("Should only compare child_ events.");const r=new Vt(e.childName,e.snapshotNode),s=new Vt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t,e){return{eventCache:t,serverCache:e}}function nE(t,e,n,r){return uN(new mf(e,n,r),t.serverCache)}function yH(t,e,n,r){return uN(t.eventCache,new mf(e,n,r))}function wx(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ag(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RR;const Moe=()=>(RR||(RR=new mo(bie)),RR);class Zn{constructor(e,n=Moe()){this.value=e,this.children=n}static fromObject(e){let n=new Zn(null);return Vs(e,(r,s)=>{n=n.set(new jn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:vn(),value:this.value};if(Jt(e))return null;{const r=qt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(nr(e),n);return i!=null?{path:Tr(new jn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const n=qt(e),r=this.children.get(n);return r!==null?r.subtree(nr(e)):new Zn(null)}}set(e,n){if(Jt(e))return new Zn(n,this.children);{const r=qt(e),i=(this.children.get(r)||new Zn(null)).set(nr(e),n),o=this.children.insert(r,i);return new Zn(this.value,o)}}remove(e){if(Jt(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const n=qt(e),r=this.children.get(n);if(r){const s=r.remove(nr(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new Zn(null):new Zn(this.value,i)}else return this}}get(e){if(Jt(e))return this.value;{const n=qt(e),r=this.children.get(n);return r?r.get(nr(e)):null}}setTree(e,n){if(Jt(e))return n;{const r=qt(e),i=(this.children.get(r)||new Zn(null)).setTree(nr(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new Zn(this.value,o)}}fold(e){return this.fold_(vn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Tr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,vn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Jt(e))return null;{const i=qt(e),o=this.children.get(i);return o?o.findOnPath_(nr(e),Tr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,vn(),n)}foreachOnPath_(e,n,r){if(Jt(e))return this;{this.value&&r(n,this.value);const s=qt(e),i=this.children.get(s);return i?i.foreachOnPath_(nr(e),Tr(n,s),r):new Zn(null)}}foreach(e){this.foreach_(vn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Tr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e){this.writeTree_=e}static empty(){return new $c(new Zn(null))}}function rE(t,e,n){if(Jt(e))return new $c(new Zn(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Ti(s,e);return i=i.updateChild(o,n),new $c(t.writeTree_.set(s,i))}else{const s=new Zn(n),i=t.writeTree_.setTree(e,s);return new $c(i)}}}function M2(t,e,n){let r=t;return Vs(n,(s,i)=>{r=rE(r,Tr(e,s),i)}),r}function RB(t,e){if(Jt(e))return $c.empty();{const n=t.writeTree_.setTree(e,new Zn(null));return new $c(n)}}function L2(t,e){return sm(t,e)!=null}function sm(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ti(n.path,e)):null}function PB(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Rr,(r,s)=>{e.push(new Vt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Vt(r,s.value))}),e}function qh(t,e){if(Jt(e))return t;{const n=sm(t,e);return n!=null?new $c(new Zn(n)):new $c(t.writeTree_.subtree(e))}}function U2(t){return t.writeTree_.isEmpty()}function dw(t,e){return wH(vn(),t.writeTree_,e)}function wH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ie(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=wH(Tr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Tr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e){return CH(e,t)}function Loe(t,e,n,r,s){Ie(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=rE(t.visibleWrites,e,n)),t.lastWriteId=r}function Uoe(t,e,n,r){Ie(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=M2(t.visibleWrites,e,n),t.lastWriteId=r}function $oe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Boe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ie(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Foe(a,r.path)?s=!1:La(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return joe(t),!0;if(r.snap)t.visibleWrites=RB(t.visibleWrites,r.path);else{const a=r.children;Vs(a,c=>{t.visibleWrites=RB(t.visibleWrites,Tr(r.path,c))})}return!0}else return!1}function Foe(t,e){if(t.snap)return La(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&La(Tr(t.path,n),e))return!0;return!1}function joe(t){t.visibleWrites=bH(t.allWrites,Woe,vn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Woe(t){return t.visible}function bH(t,e,n){let r=$c.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)La(n,o)?(a=Ti(n,o),r=rE(r,a,i.snap)):La(o,n)&&(a=Ti(o,n),r=rE(r,vn(),i.snap.getChild(a)));else if(i.children){if(La(n,o))a=Ti(n,o),r=M2(r,a,i.children);else if(La(o,n))if(a=Ti(o,n),Jt(a))r=M2(r,vn(),i.children);else{const c=aw(i.children,qt(a));if(c){const l=c.getChild(nr(a));r=rE(r,vn(),l)}}}else throw tb("WriteRecord should have .snap or .children")}}return r}function vH(t,e,n,r,s){if(!r&&!s){const i=sm(t.visibleWrites,e);if(i!=null)return i;{const o=qh(t.visibleWrites,e);if(U2(o))return n;if(n==null&&!L2(o,vn()))return null;{const a=n||Et.EMPTY_NODE;return dw(o,a)}}}else{const i=qh(t.visibleWrites,e);if(!s&&U2(i))return n;if(!s&&n==null&&!L2(i,vn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(La(l.path,e)||La(e,l.path))},a=bH(t.allWrites,o,e),c=n||Et.EMPTY_NODE;return dw(a,c)}}}function zoe(t,e,n){let r=Et.EMPTY_NODE;const s=sm(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Rr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=qh(t.visibleWrites,e);return n.forEachChild(Rr,(o,a)=>{const c=dw(qh(i,new jn(o)),a);r=r.updateImmediateChild(o,c)}),PB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=qh(t.visibleWrites,e);return PB(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Hoe(t,e,n,r,s){Ie(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Tr(e,n);if(L2(t.visibleWrites,i))return null;{const o=qh(t.visibleWrites,i);return U2(o)?s.getChild(n):dw(o,s.getChild(n))}}function Goe(t,e,n,r){const s=Tr(e,n),i=sm(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=qh(t.visibleWrites,s);return dw(o,r.getNode().getImmediateChild(n))}else return null}function qoe(t,e){return sm(t.visibleWrites,e)}function Voe(t,e,n,r,s,i,o){let a;const c=qh(t.visibleWrites,e),l=sm(c,vn());if(l!=null)a=l;else if(n!=null)a=dw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Koe(){return{visibleWrites:$c.empty(),allWrites:[],lastWriteId:-1}}function bx(t,e,n,r){return vH(t.writeTree,t.treePath,e,n,r)}function uM(t,e){return zoe(t.writeTree,t.treePath,e)}function OB(t,e,n,r){return Hoe(t.writeTree,t.treePath,e,n,r)}function vx(t,e){return qoe(t.writeTree,Tr(t.treePath,e))}function Yoe(t,e,n,r,s,i){return Voe(t.writeTree,t.treePath,e,n,r,s,i)}function dM(t,e,n){return Goe(t.writeTree,t.treePath,e,n)}function EH(t,e){return CH(Tr(t.treePath,e),t.writeTree)}function CH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qoe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ie(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ie(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,WE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,jE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,lw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,WE(r,e.snapshotNode,s.oldSnap));else throw tb("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Joe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const _H=new Joe;class hM{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new mf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return dM(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ag(this.viewCache_),i=Yoe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zoe(t){return{filter:t}}function Xoe(t,e){Ie(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ie(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function eae(t,e,n,r,s){const i=new Qoe;let o,a;if(n.type===Mc.OVERWRITE){const l=n;l.source.fromUser?o=$2(t,e,l.path,l.snap,r,s,i):(Ie(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Jt(l.path),o=Ex(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===Mc.MERGE){const l=n;l.source.fromUser?o=nae(t,e,l.path,l.children,r,s,i):(Ie(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=B2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===Mc.ACK_USER_WRITE){const l=n;l.revert?o=iae(t,e,l.path,r,s,i):o=rae(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===Mc.LISTEN_COMPLETE)o=sae(t,e,n.path,r,i);else throw tb("Unknown operation type: "+n.type);const c=i.getChanges();return tae(e,o,c),{viewCache:o,changes:c}}function tae(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=wx(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(gH(wx(e)))}}function AH(t,e,n,r,s,i){const o=e.eventCache;if(vx(r,n)!=null)return e;{let a,c;if(Jt(n))if(Ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Ag(e),u=l instanceof Et?l:Et.EMPTY_NODE,d=uM(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=bx(r,Ag(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=qt(n);if(l===".priority"){Ie(gf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=OB(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=nr(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=OB(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=dM(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return nE(e,a,o.isFullyInitialized()||Jt(n),t.filter.filtersNodes())}}function Ex(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Jt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=qt(n);if(!c.isCompleteForPath(n)&&gf(n)>1)return e;const p=nr(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,_H,null)}const d=yH(e,l,c.isFullyInitialized()||Jt(n),u.filtersNodes()),h=new hM(s,d,i);return AH(t,d,n,s,h,a)}function $2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new hM(s,e,i);if(Jt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=nE(e,l,!0,t.filter.filtersNodes());else{const d=qt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=nE(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=nr(n),f=a.getNode().getImmediateChild(d);let p;if(Jt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?tM(h)===".priority"&&g.getChild(cH(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=Et.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=nE(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function kB(t,e){return t.eventCache.isCompleteForChild(e)}function nae(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Tr(n,c);kB(e,qt(u))&&(a=$2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Tr(n,c);kB(e,qt(u))||(a=$2(t,a,u,l,s,i,o))}),a}function DB(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function B2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Jt(n)?l=r:l=new Zn(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=DB(t,f,h);c=Ex(t,c,new jn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=DB(t,p,h);c=Ex(t,c,new jn(d),g,s,i,o,a)}}),c}function rae(t,e,n,r,s,i,o){if(vx(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Jt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ex(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Jt(n)){let l=new Zn(null);return c.getNode().forEachChild(Hy,(u,d)=>{l=l.set(new jn(u),d)}),B2(t,e,n,l,s,i,a,o)}else return e}else{let l=new Zn(null);return r.foreach((u,d)=>{const h=Tr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),B2(t,e,n,l,s,i,a,o)}}function sae(t,e,n,r,s){const i=e.serverCache,o=yH(e,i.getNode(),i.isFullyInitialized()||Jt(n),i.isFiltered());return AH(t,o,n,r,_H,s)}function iae(t,e,n,r,s,i){let o;if(vx(r,n)!=null)return e;{const a=new hM(r,e,s),c=e.eventCache.getNode();let l;if(Jt(n)||qt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=bx(r,Ag(e));else{const d=e.serverCache.getNode();Ie(d instanceof Et,"serverChildren would be complete if leaf node"),u=uM(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=qt(n);let d=dM(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,nr(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Et.EMPTY_NODE,nr(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=bx(r,Ag(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||vx(r,vn())!=null,nE(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oae{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new iM(r.getIndex()),i=Aoe(r);this.processor_=Zoe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(Et.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(Et.EMPTY_NODE,a.getNode(),null),u=new mf(c,o.isFullyInitialized(),s.filtersNodes()),d=new mf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=uN(d,u),this.eventGenerator_=new Poe(this.query_)}get query(){return this.query_}}function aae(t){return t.viewCache_.serverCache.getNode()}function cae(t){return wx(t.viewCache_)}function lae(t,e){const n=Ag(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Jt(e)&&!n.getImmediateChild(qt(e)).isEmpty())?n.getChild(e):null}function MB(t){return t.eventRegistrations_.length===0}function uae(t,e){t.eventRegistrations_.push(e)}function LB(t,e,n){const r=[];if(n){Ie(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function UB(t,e,n,r){e.type===Mc.MERGE&&e.source.queryId!==null&&(Ie(Ag(t.viewCache_),"We should always have a full cache before handling merges"),Ie(wx(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=eae(t.processor_,s,e,n,r);return Xoe(t.processor_,i.viewCache),Ie(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,SH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function dae(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Rr,(i,o)=>{r.push(lw(i,o))}),n.isFullyInitialized()&&r.push(gH(n.getNode())),SH(t,r,n.getNode(),e)}function SH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Ooe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cx;class xH{constructor(){this.views=new Map}}function hae(t){Ie(!Cx,"__referenceConstructor has already been defined"),Cx=t}function fae(){return Ie(Cx,"Reference.ts has not been loaded"),Cx}function pae(t){return t.views.size===0}function fM(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ie(i!=null,"SyncTree gave us an op for an invalid query."),UB(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(UB(o,e,n,r));return i}}function IH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=bx(n,s?r:null),c=!1;a?c=!0:r instanceof Et?(a=uM(n,r),c=!1):(a=Et.EMPTY_NODE,c=!1);const l=uN(new mf(a,c,!1),new mf(r,s,!1));return new oae(e,l)}return o}function gae(t,e,n,r,s,i){const o=IH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),uae(o,n),dae(o,n)}function mae(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=yf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(LB(l,n,r)),MB(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(LB(c,n,r)),MB(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!yf(t)&&i.push(new(fae())(e._repo,e._path)),{removed:i,events:o}}function NH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Vh(t,e){let n=null;for(const r of t.views.values())n=n||lae(r,e);return n}function TH(t,e){if(e._queryParams.loadsAllData())return hN(t);{const r=e._queryIdentifier;return t.views.get(r)}}function RH(t,e){return TH(t,e)!=null}function yf(t){return hN(t)!=null}function hN(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _x;function yae(t){Ie(!_x,"__referenceConstructor has already been defined"),_x=t}function wae(){return Ie(_x,"Reference.ts has not been loaded"),_x}let bae=1;class $B{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=Koe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function PH(t,e,n,r,s){return Loe(t.pendingWriteTree_,e,n,r,s),s?sb(t,new _g(aM(),e,n)):[]}function vae(t,e,n,r){Uoe(t.pendingWriteTree_,e,n,r);const s=Zn.fromObject(n);return sb(t,new uw(aM(),e,s))}function Dh(t,e,n=!1){const r=$oe(t.pendingWriteTree_,e);if(Boe(t.pendingWriteTree_,e)){let i=new Zn(null);return r.snap!=null?i=i.set(vn(),!0):Vs(r.children,o=>{i=i.set(new jn(o),!0)}),sb(t,new yx(r.path,i,n))}else return[]}function H_(t,e,n){return sb(t,new _g(cM(),e,n))}function Eae(t,e,n){const r=Zn.fromObject(n);return sb(t,new uw(cM(),e,r))}function Cae(t,e){return sb(t,new HE(cM(),e))}function _ae(t,e,n){const r=gM(t,n);if(r){const s=mM(r),i=s.path,o=s.queryId,a=Ti(i,e),c=new HE(lM(o),a);return yM(t,i,c)}else return[]}function Ax(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||RH(o,e))){const c=mae(o,e,n,r);pae(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>yf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=xae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=MH(t,g);t.listenProvider_.startListening(sE(w),GE(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(sE(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(fN(h));t.listenProvider_.stopListening(sE(h),f)}))}Iae(t,l)}return a}function OH(t,e,n,r){const s=gM(t,r);if(s!=null){const i=mM(s),o=i.path,a=i.queryId,c=Ti(o,e),l=new _g(lM(a),c,n);return yM(t,o,l)}else return[]}function Aae(t,e,n,r){const s=gM(t,r);if(s){const i=mM(s),o=i.path,a=i.queryId,c=Ti(o,e),l=Zn.fromObject(n),u=new uw(lM(a),c,l);return yM(t,o,u)}else return[]}function F2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=Ti(h,s);i=i||Vh(f,p),o=o||yf(f)});let a=t.syncPointTree_.get(s);a?(o=o||yf(a),i=i||Vh(a,vn())):(a=new xH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=Et.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Vh(p,vn());g&&(i=i.updateImmediateChild(f,g))}));const l=RH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=fN(e);Ie(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Nae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=dN(t.pendingWriteTree_,s);let d=gae(a,e,n,u,i,c);if(!l&&!o&&!r){const h=TH(a,e);d=d.concat(Tae(t,e,h))}return d}function pM(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ti(o,e),l=Vh(a,c);if(l)return l});return vH(s,e,i,n,!0)}function Sae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Ti(l,n);r=r||Vh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Vh(s,vn()):(s=new xH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new mf(r,!0,!1):null,a=dN(t.pendingWriteTree_,e._path),c=IH(s,e,a,i?o.getNode():Et.EMPTY_NODE,i);return cae(c)}function sb(t,e){return kH(e,t.syncPointTree_,null,dN(t.pendingWriteTree_,vn()))}function kH(t,e,n,r){if(Jt(t.path))return DH(t,e,n,r);{const s=e.get(vn());n==null&&s!=null&&(n=Vh(s,vn()));let i=[];const o=qt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=EH(r,o);i=i.concat(kH(a,c,l,u))}return s&&(i=i.concat(fM(s,t,r,n))),i}}function DH(t,e,n,r){const s=e.get(vn());n==null&&s!=null&&(n=Vh(s,vn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=EH(r,o),u=t.operationForChild(o);u&&(i=i.concat(DH(u,a,c,l)))}),s&&(i=i.concat(fM(s,t,r,n))),i}function MH(t,e){const n=e.query,r=GE(t,n);return{hashFn:()=>(aae(e)||Et.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?_ae(t,n._path,r):Cae(t,n._path);{const i=Cie(s,n);return Ax(t,n,null,i)}}}}function GE(t,e){const n=fN(e);return t.queryToTagMap.get(n)}function fN(t){return t._path.toString()+"$"+t._queryIdentifier}function gM(t,e){return t.tagToQueryMap.get(e)}function mM(t){const e=t.indexOf("$");return Ie(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new jn(t.substr(0,e))}}function yM(t,e,n){const r=t.syncPointTree_.get(e);Ie(r,"Missing sync point for query tag that we're tracking");const s=dN(t.pendingWriteTree_,e);return fM(r,n,s,null)}function xae(t){return t.fold((e,n,r)=>{if(n&&yf(n))return[hN(n)];{let s=[];return n&&(s=NH(n)),Vs(r,(i,o)=>{s=s.concat(o)}),s}})}function sE(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(wae())(t._repo,t._path):t}function Iae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=fN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Nae(){return bae++}function Tae(t,e,n){const r=e._path,s=GE(t,e),i=MH(t,n),o=t.listenProvider_.startListening(sE(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ie(!yf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Jt(l)&&u&&yf(u))return[hN(u).query];{let h=[];return u&&(h=h.concat(NH(u).map(f=>f.query))),Vs(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(sE(u),GE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new wM(n)}node(){return this.node_}}class bM{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Tr(this.path_,e);return new bM(this.syncTree_,n)}node(){return pM(this.syncTree_,this.path_)}}const Rae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},BB=function(t,e,n){if(!t||typeof t!="object")return t;if(Ie(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Pae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Oae(t[".sv"],e);Ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Pae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ie(!1,"Unexpected server value: "+t)}},Oae=function(t,e,n){t.hasOwnProperty("increment")||Ie(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ie(!1,"Unexpected increment value: "+r);const s=e.node();if(Ie(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},LH=function(t,e,n,r){return vM(e,new bM(n,t),r)},UH=function(t,e,n){return vM(t,new wM(e),n)};function vM(t,e,n){const r=t.getPriority().val(),s=BB(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=BB(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new ms(a,ns(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new ms(s))),o.forEachChild(Rr,(a,c)=>{const l=vM(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function CM(t,e){let n=e instanceof jn?e:new jn(e),r=t,s=qt(n);for(;s!==null;){const i=aw(r.node.children,s)||{children:{},childCount:0};r=new EM(s,r,i),n=nr(n),s=qt(n)}return r}function ib(t){return t.node.value}function $H(t,e){t.node.value=e,j2(t)}function BH(t){return t.node.childCount>0}function kae(t){return ib(t)===void 0&&!BH(t)}function pN(t,e){Vs(t.node.children,(n,r)=>{e(new EM(n,t,r))})}function FH(t,e,n,r){n&&e(t),pN(t,s=>{FH(s,e,!0)})}function Dae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function G_(t){return new jn(t.parent===null?t.name:G_(t.parent)+"/"+t.name)}function j2(t){t.parent!==null&&Mae(t.parent,t.name,t)}function Mae(t,e,n){const r=kae(n),s=tu(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,j2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,j2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lae=/[\[\].#$\/\u0000-\u001F\u007F]/,Uae=/[\[\].#$\u0000-\u001F\u007F]/,PR=10*1024*1024,_M=function(t){return typeof t=="string"&&t.length!==0&&!Lae.test(t)},jH=function(t){return typeof t=="string"&&t.length!==0&&!Uae.test(t)},$ae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),jH(t)},Bae=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Q5(t)||t&&typeof t=="object"&&tu(t,".sv")},Fae=function(t,e,n,r){gN(aN(t,"value"),e,n)},gN=function(t,e,n){const r=n instanceof jn?new noe(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+tp(r));if(typeof e=="function")throw new Error(t+"contains a function "+tp(r)+" with contents = "+e.toString());if(Q5(e))throw new Error(t+"contains "+e.toString()+" "+tp(r));if(typeof e=="string"&&e.length>PR/3&&cN(e)>PR)throw new Error(t+"contains a string greater than "+PR+" utf8 bytes "+tp(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(Vs(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!_M(o)))throw new Error(t+" contains an invalid key ("+o+") "+tp(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);roe(r,o),gN(t,a,r),soe(r)}),s&&i)throw new Error(t+' contains ".value" child '+tp(r)+" in addition to actual children.")}},jae=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const i=FE(r);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!_M(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(toe);let s=null;for(n=0;n<e.length;n++){if(r=e[n],s!==null&&La(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},Wae=function(t,e,n,r){const s=aN(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(s+" must be an object containing the children to replace.");const i=[];Vs(e,(o,a)=>{const c=new jn(o);if(gN(s,a,Tr(n,c)),tM(c)===".priority"&&!Bae(a))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),jae(s,i)},WH=function(t,e,n,r){if(!jH(n))throw new Error(aN(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},zae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),WH(t,e,n)},zH=function(t,e){if(qt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Hae=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_M(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!$ae(n))throw new Error(aN(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function mN(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!nM(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function HH(t,e,n){mN(t,n),GH(t,r=>nM(r,e))}function ja(t,e,n){mN(t,n),GH(t,r=>La(r,e)||La(e,r))}function GH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(qae(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function qae(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();eE&&Bs("event: "+n.toString()),rb(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae="repo_interrupt",Kae=25;class Yae{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mx(),this.transactionQueueTree_=new EM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Qae(t,e,n){if(t.stats_=X5(t.repoInfo_),t.forceRestClient_||xie())t.server_=new gx(t.repoInfo_,(r,s,i,o)=>{FB(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>jB(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ss(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Zu(t.repoInfo_,e,(r,s,i,o)=>{FB(t,r,s,i,o)},r=>{jB(t,r)},r=>{Zae(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Pie(t.repoInfo_,()=>new Roe(t.stats_,t.server_)),t.infoData_=new Soe,t.infoSyncTree_=new $B({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=H_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),AM(t,"connected",!1),t.serverSyncTree_=new $B({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);ja(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Jae(t){const n=t.infoData_.getNode(new jn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function yN(t){return Rae({timestamp:Jae(t)})}function FB(t,e,n,r,s){t.dataUpdateCount++;const i=new jn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=ux(n,l=>ns(l));o=Aae(t.serverSyncTree_,i,c,s)}else{const c=ns(n);o=OH(t.serverSyncTree_,i,c,s)}else if(r){const c=ux(n,l=>ns(l));o=Eae(t.serverSyncTree_,i,c)}else{const c=ns(n);o=H_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=hw(t,i)),ja(t.eventQueue_,a,o)}function jB(t,e){AM(t,"connected",e),e===!1&&nce(t)}function Zae(t,e){Vs(e,(n,r)=>{AM(t,n,r)})}function AM(t,e,n){const r=new jn("/.info/"+e),s=ns(n);t.infoData_.updateSnapshot(r,s);const i=H_(t.infoSyncTree_,r,s);ja(t.eventQueue_,r,i)}function SM(t){return t.nextWriteId_++}function Xae(t,e,n){const r=Sae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ns(s).withIndex(e._queryParams.getIndex());F2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=H_(t.serverSyncTree_,e._path,i);else{const a=GE(t.serverSyncTree_,e);o=OH(t.serverSyncTree_,e._path,i,a)}return ja(t.eventQueue_,e._path,o),Ax(t.serverSyncTree_,e,n,null,!0),i},s=>(q_(t,"get for query "+ss(e)+" failed: "+s),Promise.reject(new Error(s))))}function ece(t,e,n,r,s){q_(t,"set",{path:e.toString(),value:n,priority:r});const i=yN(t),o=ns(n,r),a=pM(t.serverSyncTree_,e),c=UH(o,a,i),l=SM(t),u=PH(t.serverSyncTree_,e,c,l,!0);mN(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Di("set at "+e+" failed: "+h);const g=Dh(t.serverSyncTree_,l,!p);ja(t.eventQueue_,e,g),W2(t,s,h,f)});const d=IM(t,e);hw(t,d),ja(t.eventQueue_,d,[])}function tce(t,e,n,r){q_(t,"update",{path:e.toString(),value:n});let s=!0;const i=yN(t),o={};if(Vs(n,(a,c)=>{s=!1,o[a]=LH(Tr(e,a),ns(c),t.serverSyncTree_,i)}),s)Bs("update() called with empty data.  Don't do anything."),W2(t,r,"ok",void 0);else{const a=SM(t),c=vae(t.serverSyncTree_,e,o,a);mN(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{const d=l==="ok";d||Di("update at "+e+" failed: "+l);const h=Dh(t.serverSyncTree_,a,!d),f=h.length>0?hw(t,e):e;ja(t.eventQueue_,f,h),W2(t,r,l,u)}),Vs(n,l=>{const u=IM(t,Tr(e,l));hw(t,u)}),ja(t.eventQueue_,e,[])}}function nce(t){q_(t,"onDisconnectEvents");const e=yN(t),n=mx();D2(t.onDisconnect_,vn(),(s,i)=>{const o=LH(s,i,t.serverSyncTree_,e);mH(n,s,o)});let r=[];D2(n,vn(),(s,i)=>{r=r.concat(H_(t.serverSyncTree_,s,i));const o=IM(t,s);hw(t,o)}),t.onDisconnect_=mx(),ja(t.eventQueue_,vn(),r)}function rce(t,e,n){let r;qt(e._path)===".info"?r=F2(t.infoSyncTree_,e,n):r=F2(t.serverSyncTree_,e,n),HH(t.eventQueue_,e._path,r)}function sce(t,e,n){let r;qt(e._path)===".info"?r=Ax(t.infoSyncTree_,e,n):r=Ax(t.serverSyncTree_,e,n),HH(t.eventQueue_,e._path,r)}function ice(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Vae)}function q_(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Bs(n,...e)}function W2(t,e,n,r){e&&rb(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function qH(t,e,n){return pM(t.serverSyncTree_,e,n)||Et.EMPTY_NODE}function xM(t,e=t.transactionQueueTree_){if(e||wN(t,e),ib(e)){const n=KH(t,e);Ie(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&oce(t,G_(e),n)}else BH(e)&&pN(e,n=>{xM(t,n)})}function oce(t,e,n){const r=n.map(l=>l.currentWriteId),s=qH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ie(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ti(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{q_(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Dh(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();wN(t,CM(t.transactionQueueTree_,e)),xM(t,t.transactionQueueTree_),ja(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)rb(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Di("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}hw(t,e)}},o)}function hw(t,e){const n=VH(t,e),r=G_(n),s=KH(t,n);return ace(t,s,r),r}function ace(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Ti(n,c.path);let u=!1,d;if(Ie(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(Dh(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Kae)u=!0,d="maxretry",s=s.concat(Dh(t.serverSyncTree_,c.currentWriteId,!0));else{const h=qH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){gN("transaction failed: Data returned ",f,c.path);let p=ns(f);typeof f=="object"&&f!=null&&tu(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=yN(t),b=UH(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=SM(t),o.splice(o.indexOf(w),1),s=s.concat(PH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(Dh(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(Dh(t.serverSyncTree_,c.currentWriteId,!0))}ja(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}wN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)rb(r[a]);xM(t,t.transactionQueueTree_)}function VH(t,e){let n,r=t.transactionQueueTree_;for(n=qt(e);n!==null&&ib(r)===void 0;)r=CM(r,n),e=nr(e),n=qt(e);return r}function KH(t,e){const n=[];return YH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function YH(t,e,n){const r=ib(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);pN(e,s=>{YH(t,s,n)})}function wN(t,e){const n=ib(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,$H(e,n.length>0?n:void 0)}pN(e,r=>{wN(t,r)})}function IM(t,e){const n=G_(VH(t,e)),r=CM(t.transactionQueueTree_,e);return Dae(r,s=>{OR(t,s)}),OR(t,r),FH(r,s=>{OR(t,s)}),n}function OR(t,e){const n=ib(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ie(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ie(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Dh(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?$H(e,void 0):n.length=i+1,ja(t.eventQueue_,G_(e),s);for(let o=0;o<r.length;o++)rb(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cce(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function lce(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Di(`Invalid query segment '${n}' in query '${t}'`)}return e}const WB=function(t,e){const n=uce(t),r=n.namespace;n.domain==="firebase.com"&&ld(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ld("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||yie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Xz(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new jn(n.pathString)}},uce=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=cce(t.substring(u,d)));const h=lce(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dce{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ss(this.snapshot.exportVal())}}class hce{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ie(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Jt(this._path)?null:tM(this._path)}get ref(){return new vd(this._repo,this._path)}get _queryIdentifier(){const e=NB(this._queryParams),n=J5(e);return n==="{}"?"default":n}get _queryObject(){return NB(this._queryParams)}isEqual(e){if(e=nb(e),!(e instanceof NM))return!1;const n=this._repo===e._repo,r=nM(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+eoe(this._path)}}class vd extends NM{constructor(e,n){super(e,n,new oM,!1)}get parent(){const e=cH(this._path);return e===null?null:new vd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new jn(e),r=z2(this.ref,e);return new qE(this._node.getChild(n),r,Rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new qE(s,z2(this.ref,r),Rr)))}hasChild(e){const n=new jn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function to(t,e){return t=nb(t),t._checkNotDeleted("ref"),e!==void 0?z2(t._root,e):t._root}function z2(t,e){return t=nb(t),qt(t._path)===null?zae("child","path",e):WH("child","path",e),new vd(t._repo,Tr(t._path,e))}function JH(t){return zH("remove",t._path),iE(t,null)}function iE(t,e){t=nb(t),zH("set",t._path),Fae("set",e,t._path);const n=new B_;return ece(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function fce(t,e){Wae("update",e,t._path);const n=new B_;return tce(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function lp(t){t=nb(t);const e=new QH(()=>{}),n=new bN(e);return Xae(t._repo,t,n).then(r=>new qE(r,new vd(t._repo,t._path),t._queryParams.getIndex()))}class bN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new dce("value",this,new qE(e.snapshotNode,new vd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new hce(this,e,n):null}matches(e){return e instanceof bN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function pce(t,e,n,r,s){const i=new QH(n,void 0),o=new bN(i);return rce(t._repo,t,o),()=>sce(t._repo,t,o)}function zB(t,e,n,r){return pce(t,"value",e)}hae(vd);yae(vd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gce="FIREBASE_DATABASE_EMULATOR_HOST",H2={};let mce=!1;function yce(t,e,n,r){t.repoInfo_=new Xz(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function wce(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||ld("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=WB(i,s),a=o.repoInfo,c;typeof process<"u"&&uB&&(c=uB[gce]),c?(i=`http://${c}?ns=${a.namespace}`,o=WB(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Nie(t.name,t.options,e);Hae("Invalid Firebase Database URL",o),Jt(o.path)||ld("Database URL must point to the root of a Firebase Database (not including a child path).");const u=vce(a,t,l,new Iie(t.name,n));return new Ece(u,t)}function bce(t,e){const n=H2[e];(!n||n[t.key]!==t)&&ld(`Database ${e}(${t.repoInfo_}) has already been deleted.`),ice(t),delete n[t.key]}function vce(t,e,n,r){let s=H2[e.name];s||(s={},H2[e.name]=s);let i=s[t.toURLString()];return i&&ld("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Yae(t,mce,n,r),s[t.toURLString()]=i,i}class Ece{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Qae(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vd(this._repo,vn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(bce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ld("Cannot call "+e+" on a deleted database.")}}function Cce(t=Lz(),e){const n=Yse(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=$re("database");r&&_ce(n,...r)}return n}function _ce(t,e,n,r={}){t=nb(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&ld("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&ld('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new yS(yS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Bre(r.mockUserToken,t.app.options.projectId);i=new yS(o)}yce(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ace(t){die(Zse),dx(new LE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return wce(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Wy(dB,hB,t),Wy(dB,hB,"esm2017")}Zu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Zu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Ace();const Sce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},xce=Xse().length?Lz():Mz(Sce),Sx=Cce(xce);var G2={},ZH={exports:{}},oa={},XH={exports:{}},eG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var j=k.length;k.push(M);e:for(;0<j;){var K=j-1>>>1,ne=k[K];if(0<s(ne,M))k[K]=M,k[j]=ne,j=K;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],j=k.pop();if(j!==M){k[0]=j;e:for(var K=0,ne=k.length,le=ne>>>1;K<le;){var oe=2*(K+1)-1,ae=k[oe],ue=oe+1,Xe=k[ue];if(0>s(ae,j))ue<ne&&0>s(Xe,ae)?(k[K]=Xe,k[ue]=j,K=ue):(k[K]=ae,k[oe]=j,K=oe);else if(ue<ne&&0>s(Xe,j))k[K]=Xe,k[ue]=j,K=ue;else break e}}return M}function s(k,M){var j=k.sortIndex-M.sortIndex;return j!==0?j:k.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(k){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=k)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(k){if(g=!1,v(k),!p)if(n(c)!==null)p=!0,R(_);else{var M=n(l);M!==null&&$(A,M.startTime-k)}}function _(k,M){p=!1,g&&(g=!1,y(N),N=-1),f=!0;var j=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||k&&!P());){var K=d.callback;if(typeof K=="function"){d.callback=null,h=d.priorityLevel;var ne=K(d.expirationTime<=M);M=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var le=!0;else{var oe=n(l);oe!==null&&$(A,oe.startTime-M),le=!1}return le}finally{d=null,h=j,f=!1}}var I=!1,x=null,N=-1,S=5,O=-1;function P(){return!(t.unstable_now()-O<S)}function F(){if(x!==null){var k=t.unstable_now();O=k;var M=!0;try{M=x(!0,k)}finally{M?G():(I=!1,x=null)}}else I=!1}var G;if(typeof b=="function")G=function(){b(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,T=B.port2;B.port1.onmessage=F,G=function(){T.postMessage(null)}}else G=function(){w(F,0)};function R(k){x=k,I||(I=!0,G())}function $(k,M){N=w(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(_))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var j=h;h=M;try{return k()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var j=h;h=k;try{return M()}finally{h=j}},t.unstable_scheduleCallback=function(k,M,j){var K=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?K+j:K):j=K,k){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=j+ne,k={id:u++,callback:M,priorityLevel:k,startTime:j,expirationTime:ne,sortIndex:-1},j>K?(k.sortIndex=j,e(l,k),n(c)===null&&k===n(l)&&(g?(y(N),N=-1):g=!0,$(A,j-K))):(k.sortIndex=ne,e(c,k),p||f||(p=!0,R(_))),k},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(k){var M=h;return function(){var j=h;h=M;try{return k.apply(this,arguments)}finally{h=j}}}})(eG);XH.exports=eG;var Ice=XH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nce=D,ra=Ice;function Ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tG=new Set,VE={};function im(t,e){fw(t,e),fw(t+"Capture",e)}function fw(t,e){for(VE[t]=e,t=0;t<e.length;t++)tG.add(e[t])}var ud=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),q2=Object.prototype.hasOwnProperty,Tce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,HB={},GB={};function Rce(t){return q2.call(GB,t)?!0:q2.call(HB,t)?!1:Tce.test(t)?GB[t]=!0:(HB[t]=!0,!1)}function Pce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Oce(t,e,n,r){if(e===null||typeof e>"u"||Pce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fi(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ks={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ks[t]=new Fi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ks[e]=new Fi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ks[t]=new Fi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ks[t]=new Fi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ks[t]=new Fi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ks[t]=new Fi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ks[t]=new Fi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ks[t]=new Fi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ks[t]=new Fi(t,5,!1,t.toLowerCase(),null,!1,!1)});var TM=/[\-:]([a-z])/g;function RM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(TM,RM);Ks[e]=new Fi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(TM,RM);Ks[e]=new Fi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(TM,RM);Ks[e]=new Fi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ks[t]=new Fi(t,1,!1,t.toLowerCase(),null,!1,!1)});Ks.xlinkHref=new Fi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ks[t]=new Fi(t,1,!1,t.toLowerCase(),null,!0,!0)});function PM(t,e,n,r){var s=Ks.hasOwnProperty(e)?Ks[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Oce(e,n,s,r)&&(n=null),r||s===null?Rce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ed=Nce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X1=Symbol.for("react.element"),vy=Symbol.for("react.portal"),Ey=Symbol.for("react.fragment"),OM=Symbol.for("react.strict_mode"),V2=Symbol.for("react.profiler"),nG=Symbol.for("react.provider"),rG=Symbol.for("react.context"),kM=Symbol.for("react.forward_ref"),K2=Symbol.for("react.suspense"),Y2=Symbol.for("react.suspense_list"),DM=Symbol.for("react.memo"),Qd=Symbol.for("react.lazy"),sG=Symbol.for("react.offscreen"),qB=Symbol.iterator;function Kb(t){return t===null||typeof t!="object"?null:(t=qB&&t[qB]||t["@@iterator"],typeof t=="function"?t:null)}var Cr=Object.assign,kR;function Tv(t){if(kR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kR=e&&e[1]||""}return`
`+kR+t}var DR=!1;function MR(t,e){if(!t||DR)return"";DR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{DR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tv(t):""}function kce(t){switch(t.tag){case 5:return Tv(t.type);case 16:return Tv("Lazy");case 13:return Tv("Suspense");case 19:return Tv("SuspenseList");case 0:case 2:case 15:return t=MR(t.type,!1),t;case 11:return t=MR(t.type.render,!1),t;case 1:return t=MR(t.type,!0),t;default:return""}}function Q2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ey:return"Fragment";case vy:return"Portal";case V2:return"Profiler";case OM:return"StrictMode";case K2:return"Suspense";case Y2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rG:return(t.displayName||"Context")+".Consumer";case nG:return(t._context.displayName||"Context")+".Provider";case kM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case DM:return e=t.displayName||null,e!==null?e:Q2(t.type)||"Memo";case Qd:e=t._payload,t=t._init;try{return Q2(t(e))}catch{}}return null}function Dce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q2(e);case 8:return e===OM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function iG(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Mce(t){var e=iG(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eA(t){t._valueTracker||(t._valueTracker=Mce(t))}function oG(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=iG(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function xx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function J2(t,e){var n=e.checked;return Cr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function VB(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aG(t,e){e=e.checked,e!=null&&PM(t,"checked",e,!1)}function Z2(t,e){aG(t,e);var n=wf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?X2(t,e.type,n):e.hasOwnProperty("defaultValue")&&X2(t,e.type,wf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function KB(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function X2(t,e,n){(e!=="number"||xx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rv=Array.isArray;function Gy(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ek(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Cr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function YB(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ce(92));if(Rv(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wf(n)}}function cG(t,e){var n=wf(e.value),r=wf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function QB(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tk(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tA,uG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tA=tA||document.createElement("div"),tA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function KE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lce=["Webkit","ms","Moz","O"];Object.keys(oE).forEach(function(t){Lce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oE[e]=oE[t]})});function dG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oE.hasOwnProperty(t)&&oE[t]?(""+e).trim():e+"px"}function hG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Uce=Cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nk(t,e){if(e){if(Uce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function rk(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sk=null;function MM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ik=null,qy=null,Vy=null;function JB(t){if(t=Y_(t)){if(typeof ik!="function")throw Error(Ce(280));var e=t.stateNode;e&&(e=AN(e),ik(t.stateNode,t.type,e))}}function fG(t){qy?Vy?Vy.push(t):Vy=[t]:qy=t}function pG(){if(qy){var t=qy,e=Vy;if(Vy=qy=null,JB(t),e)for(t=0;t<e.length;t++)JB(e[t])}}function gG(t,e){return t(e)}function mG(){}var LR=!1;function yG(t,e,n){if(LR)return t(e,n);LR=!0;try{return gG(t,e,n)}finally{LR=!1,(qy!==null||Vy!==null)&&(mG(),pG())}}function YE(t,e){var n=t.stateNode;if(n===null)return null;var r=AN(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ce(231,e,typeof n));return n}var ok=!1;if(ud)try{var Yb={};Object.defineProperty(Yb,"passive",{get:function(){ok=!0}}),window.addEventListener("test",Yb,Yb),window.removeEventListener("test",Yb,Yb)}catch{ok=!1}function $ce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var aE=!1,Ix=null,Nx=!1,ak=null,Bce={onError:function(t){aE=!0,Ix=t}};function Fce(t,e,n,r,s,i,o,a,c){aE=!1,Ix=null,$ce.apply(Bce,arguments)}function jce(t,e,n,r,s,i,o,a,c){if(Fce.apply(this,arguments),aE){if(aE){var l=Ix;aE=!1,Ix=null}else throw Error(Ce(198));Nx||(Nx=!0,ak=l)}}function om(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function wG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ZB(t){if(om(t)!==t)throw Error(Ce(188))}function Wce(t){var e=t.alternate;if(!e){if(e=om(t),e===null)throw Error(Ce(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ZB(s),t;if(i===r)return ZB(s),e;i=i.sibling}throw Error(Ce(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==r)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?t:e}function bG(t){return t=Wce(t),t!==null?vG(t):null}function vG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=vG(t);if(e!==null)return e;t=t.sibling}return null}var EG=ra.unstable_scheduleCallback,XB=ra.unstable_cancelCallback,zce=ra.unstable_shouldYield,Hce=ra.unstable_requestPaint,Lr=ra.unstable_now,Gce=ra.unstable_getCurrentPriorityLevel,LM=ra.unstable_ImmediatePriority,CG=ra.unstable_UserBlockingPriority,Tx=ra.unstable_NormalPriority,qce=ra.unstable_LowPriority,_G=ra.unstable_IdlePriority,vN=null,Bl=null;function Vce(t){if(Bl&&typeof Bl.onCommitFiberRoot=="function")try{Bl.onCommitFiberRoot(vN,t,void 0,(t.current.flags&128)===128)}catch{}}var Bc=Math.clz32?Math.clz32:Qce,Kce=Math.log,Yce=Math.LN2;function Qce(t){return t>>>=0,t===0?32:31-(Kce(t)/Yce|0)|0}var nA=64,rA=4194304;function Pv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Pv(a):(i&=o,i!==0&&(r=Pv(i)))}else o=n&~s,o!==0?r=Pv(o):i!==0&&(r=Pv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bc(e),s=1<<n,r|=t[n],e&=~s;return r}function Jce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zce(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Bc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Jce(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function ck(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function AG(){var t=nA;return nA<<=1,!(nA&4194240)&&(nA=64),t}function UR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function V_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bc(e),t[e]=n}function Xce(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Bc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function UM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var On=0;function SG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xG,$M,IG,NG,TG,lk=!1,sA=[],Kh=null,Yh=null,Qh=null,QE=new Map,JE=new Map,nh=[],ele="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e6(t,e){switch(t){case"focusin":case"focusout":Kh=null;break;case"dragenter":case"dragleave":Yh=null;break;case"mouseover":case"mouseout":Qh=null;break;case"pointerover":case"pointerout":QE.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":JE.delete(e.pointerId)}}function Qb(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Y_(e),e!==null&&$M(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function tle(t,e,n,r,s){switch(e){case"focusin":return Kh=Qb(Kh,t,e,n,r,s),!0;case"dragenter":return Yh=Qb(Yh,t,e,n,r,s),!0;case"mouseover":return Qh=Qb(Qh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return QE.set(i,Qb(QE.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,JE.set(i,Qb(JE.get(i)||null,t,e,n,r,s)),!0}return!1}function RG(t){var e=Ep(t.target);if(e!==null){var n=om(e);if(n!==null){if(e=n.tag,e===13){if(e=wG(n),e!==null){t.blockedOn=e,TG(t.priority,function(){IG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=uk(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sk=r,n.target.dispatchEvent(r),sk=null}else return e=Y_(n),e!==null&&$M(e),t.blockedOn=n,!1;e.shift()}return!0}function t6(t,e,n){wS(t)&&n.delete(e)}function nle(){lk=!1,Kh!==null&&wS(Kh)&&(Kh=null),Yh!==null&&wS(Yh)&&(Yh=null),Qh!==null&&wS(Qh)&&(Qh=null),QE.forEach(t6),JE.forEach(t6)}function Jb(t,e){t.blockedOn===e&&(t.blockedOn=null,lk||(lk=!0,ra.unstable_scheduleCallback(ra.unstable_NormalPriority,nle)))}function ZE(t){function e(s){return Jb(s,t)}if(0<sA.length){Jb(sA[0],t);for(var n=1;n<sA.length;n++){var r=sA[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kh!==null&&Jb(Kh,t),Yh!==null&&Jb(Yh,t),Qh!==null&&Jb(Qh,t),QE.forEach(e),JE.forEach(e),n=0;n<nh.length;n++)r=nh[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nh.length&&(n=nh[0],n.blockedOn===null);)RG(n),n.blockedOn===null&&nh.shift()}var Ky=Ed.ReactCurrentBatchConfig,Px=!0;function rle(t,e,n,r){var s=On,i=Ky.transition;Ky.transition=null;try{On=1,BM(t,e,n,r)}finally{On=s,Ky.transition=i}}function sle(t,e,n,r){var s=On,i=Ky.transition;Ky.transition=null;try{On=4,BM(t,e,n,r)}finally{On=s,Ky.transition=i}}function BM(t,e,n,r){if(Px){var s=uk(t,e,n,r);if(s===null)VR(t,e,r,Ox,n),e6(t,r);else if(tle(s,t,e,n,r))r.stopPropagation();else if(e6(t,r),e&4&&-1<ele.indexOf(t)){for(;s!==null;){var i=Y_(s);if(i!==null&&xG(i),i=uk(t,e,n,r),i===null&&VR(t,e,r,Ox,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else VR(t,e,r,null,n)}}var Ox=null;function uk(t,e,n,r){if(Ox=null,t=MM(r),t=Ep(t),t!==null)if(e=om(t),e===null)t=null;else if(n=e.tag,n===13){if(t=wG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ox=t,null}function PG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Gce()){case LM:return 1;case CG:return 4;case Tx:case qce:return 16;case _G:return 536870912;default:return 16}default:return 16}}var Mh=null,FM=null,bS=null;function OG(){if(bS)return bS;var t,e=FM,n=e.length,r,s="value"in Mh?Mh.value:Mh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return bS=s.slice(t,1<r?1-r:void 0)}function vS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function iA(){return!0}function n6(){return!1}function aa(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?iA:n6,this.isPropagationStopped=n6,this}return Cr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iA)},persist:function(){},isPersistent:iA}),e}var ob={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jM=aa(ob),K_=Cr({},ob,{view:0,detail:0}),ile=aa(K_),$R,BR,Zb,EN=Cr({},K_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:WM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Zb&&(Zb&&t.type==="mousemove"?($R=t.screenX-Zb.screenX,BR=t.screenY-Zb.screenY):BR=$R=0,Zb=t),$R)},movementY:function(t){return"movementY"in t?t.movementY:BR}}),r6=aa(EN),ole=Cr({},EN,{dataTransfer:0}),ale=aa(ole),cle=Cr({},K_,{relatedTarget:0}),FR=aa(cle),lle=Cr({},ob,{animationName:0,elapsedTime:0,pseudoElement:0}),ule=aa(lle),dle=Cr({},ob,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),hle=aa(dle),fle=Cr({},ob,{data:0}),s6=aa(fle),ple={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gle={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mle={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yle(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mle[t])?!!e[t]:!1}function WM(){return yle}var wle=Cr({},K_,{key:function(t){if(t.key){var e=ple[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gle[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:WM,charCode:function(t){return t.type==="keypress"?vS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ble=aa(wle),vle=Cr({},EN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i6=aa(vle),Ele=Cr({},K_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:WM}),Cle=aa(Ele),_le=Cr({},ob,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ale=aa(_le),Sle=Cr({},EN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xle=aa(Sle),Ile=[9,13,27,32],zM=ud&&"CompositionEvent"in window,cE=null;ud&&"documentMode"in document&&(cE=document.documentMode);var Nle=ud&&"TextEvent"in window&&!cE,kG=ud&&(!zM||cE&&8<cE&&11>=cE),o6=" ",a6=!1;function DG(t,e){switch(t){case"keyup":return Ile.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function MG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cy=!1;function Tle(t,e){switch(t){case"compositionend":return MG(e);case"keypress":return e.which!==32?null:(a6=!0,o6);case"textInput":return t=e.data,t===o6&&a6?null:t;default:return null}}function Rle(t,e){if(Cy)return t==="compositionend"||!zM&&DG(t,e)?(t=OG(),bS=FM=Mh=null,Cy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return kG&&e.locale!=="ko"?null:e.data;default:return null}}var Ple={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c6(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ple[t.type]:e==="textarea"}function LG(t,e,n,r){fG(r),e=kx(e,"onChange"),0<e.length&&(n=new jM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var lE=null,XE=null;function Ole(t){VG(t,0)}function CN(t){var e=Sy(t);if(oG(e))return t}function kle(t,e){if(t==="change")return e}var UG=!1;if(ud){var jR;if(ud){var WR="oninput"in document;if(!WR){var l6=document.createElement("div");l6.setAttribute("oninput","return;"),WR=typeof l6.oninput=="function"}jR=WR}else jR=!1;UG=jR&&(!document.documentMode||9<document.documentMode)}function u6(){lE&&(lE.detachEvent("onpropertychange",$G),XE=lE=null)}function $G(t){if(t.propertyName==="value"&&CN(XE)){var e=[];LG(e,XE,t,MM(t)),yG(Ole,e)}}function Dle(t,e,n){t==="focusin"?(u6(),lE=e,XE=n,lE.attachEvent("onpropertychange",$G)):t==="focusout"&&u6()}function Mle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return CN(XE)}function Lle(t,e){if(t==="click")return CN(e)}function Ule(t,e){if(t==="input"||t==="change")return CN(e)}function $le(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zc=typeof Object.is=="function"?Object.is:$le;function eC(t,e){if(zc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!q2.call(e,s)||!zc(t[s],e[s]))return!1}return!0}function d6(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h6(t,e){var n=d6(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=d6(n)}}function BG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function FG(){for(var t=window,e=xx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xx(t.document)}return e}function HM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Ble(t){var e=FG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BG(n.ownerDocument.documentElement,n)){if(r!==null&&HM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=h6(n,i);var o=h6(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fle=ud&&"documentMode"in document&&11>=document.documentMode,_y=null,dk=null,uE=null,hk=!1;function f6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hk||_y==null||_y!==xx(r)||(r=_y,"selectionStart"in r&&HM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),uE&&eC(uE,r)||(uE=r,r=kx(dk,"onSelect"),0<r.length&&(e=new jM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=_y)))}function oA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ay={animationend:oA("Animation","AnimationEnd"),animationiteration:oA("Animation","AnimationIteration"),animationstart:oA("Animation","AnimationStart"),transitionend:oA("Transition","TransitionEnd")},zR={},jG={};ud&&(jG=document.createElement("div").style,"AnimationEvent"in window||(delete Ay.animationend.animation,delete Ay.animationiteration.animation,delete Ay.animationstart.animation),"TransitionEvent"in window||delete Ay.transitionend.transition);function _N(t){if(zR[t])return zR[t];if(!Ay[t])return t;var e=Ay[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jG)return zR[t]=e[n];return t}var WG=_N("animationend"),zG=_N("animationiteration"),HG=_N("animationstart"),GG=_N("transitionend"),qG=new Map,p6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Of(t,e){qG.set(t,e),im(e,[t])}for(var HR=0;HR<p6.length;HR++){var GR=p6[HR],jle=GR.toLowerCase(),Wle=GR[0].toUpperCase()+GR.slice(1);Of(jle,"on"+Wle)}Of(WG,"onAnimationEnd");Of(zG,"onAnimationIteration");Of(HG,"onAnimationStart");Of("dblclick","onDoubleClick");Of("focusin","onFocus");Of("focusout","onBlur");Of(GG,"onTransitionEnd");fw("onMouseEnter",["mouseout","mouseover"]);fw("onMouseLeave",["mouseout","mouseover"]);fw("onPointerEnter",["pointerout","pointerover"]);fw("onPointerLeave",["pointerout","pointerover"]);im("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));im("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));im("onBeforeInput",["compositionend","keypress","textInput","paste"]);im("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));im("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));im("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ov="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zle=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ov));function g6(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jce(r,e,void 0,t),t.currentTarget=null}function VG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;g6(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;g6(s,a,l),i=c}}}if(Nx)throw t=ak,Nx=!1,ak=null,t}function or(t,e){var n=e[yk];n===void 0&&(n=e[yk]=new Set);var r=t+"__bubble";n.has(r)||(KG(e,t,2,!1),n.add(r))}function qR(t,e,n){var r=0;e&&(r|=4),KG(n,t,r,e)}var aA="_reactListening"+Math.random().toString(36).slice(2);function tC(t){if(!t[aA]){t[aA]=!0,tG.forEach(function(n){n!=="selectionchange"&&(zle.has(n)||qR(n,!1,t),qR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[aA]||(e[aA]=!0,qR("selectionchange",!1,e))}}function KG(t,e,n,r){switch(PG(e)){case 1:var s=rle;break;case 4:s=sle;break;default:s=BM}n=s.bind(null,e,n,t),s=void 0,!ok||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function VR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ep(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}yG(function(){var l=i,u=MM(n),d=[];e:{var h=qG.get(t);if(h!==void 0){var f=jM,p=t;switch(t){case"keypress":if(vS(n)===0)break e;case"keydown":case"keyup":f=ble;break;case"focusin":p="focus",f=FR;break;case"focusout":p="blur",f=FR;break;case"beforeblur":case"afterblur":f=FR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=r6;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=ale;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Cle;break;case WG:case zG:case HG:f=ule;break;case GG:f=Ale;break;case"scroll":f=ile;break;case"wheel":f=xle;break;case"copy":case"cut":case"paste":f=hle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=i6}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,y!==null&&(A=YE(b,y),A!=null&&g.push(nC(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==sk&&(p=n.relatedTarget||n.fromElement)&&(Ep(p)||p[dd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Ep(p):null,p!==null&&(w=om(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=r6,A="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=i6,A="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:Sy(f),v=p==null?h:Sy(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,Ep(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=km(v))b++;for(v=0,A=y;A;A=km(A))v++;for(;0<b-v;)g=km(g),b--;for(;0<v-b;)y=km(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=km(g),y=km(y)}g=null}else g=null;f!==null&&m6(d,h,f,g,!1),p!==null&&w!==null&&m6(d,w,p,g,!0)}}e:{if(h=l?Sy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=kle;else if(c6(h))if(UG)_=Ule;else{_=Mle;var I=Dle}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Lle);if(_&&(_=_(t,l))){LG(d,_,n,u);break e}I&&I(t,h,l),t==="focusout"&&(I=h._wrapperState)&&I.controlled&&h.type==="number"&&X2(h,"number",h.value)}switch(I=l?Sy(l):window,t){case"focusin":(c6(I)||I.contentEditable==="true")&&(_y=I,dk=l,uE=null);break;case"focusout":uE=dk=_y=null;break;case"mousedown":hk=!0;break;case"contextmenu":case"mouseup":case"dragend":hk=!1,f6(d,n,u);break;case"selectionchange":if(Fle)break;case"keydown":case"keyup":f6(d,n,u)}var x;if(zM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Cy?DG(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(kG&&n.locale!=="ko"&&(Cy||N!=="onCompositionStart"?N==="onCompositionEnd"&&Cy&&(x=OG()):(Mh=u,FM="value"in Mh?Mh.value:Mh.textContent,Cy=!0)),I=kx(l,N),0<I.length&&(N=new s6(N,t,null,n,u),d.push({event:N,listeners:I}),x?N.data=x:(x=MG(n),x!==null&&(N.data=x)))),(x=Nle?Tle(t,n):Rle(t,n))&&(l=kx(l,"onBeforeInput"),0<l.length&&(u=new s6("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}VG(d,e)})}function nC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function kx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=YE(t,n),i!=null&&r.unshift(nC(t,i,s)),i=YE(t,e),i!=null&&r.push(nC(t,i,s))),t=t.return}return r}function km(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function m6(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=YE(n,i),c!=null&&o.unshift(nC(n,c,a))):s||(c=YE(n,i),c!=null&&o.push(nC(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Hle=/\r\n?/g,Gle=/\u0000|\uFFFD/g;function y6(t){return(typeof t=="string"?t:""+t).replace(Hle,`
`).replace(Gle,"")}function cA(t,e,n){if(e=y6(e),y6(t)!==e&&n)throw Error(Ce(425))}function Dx(){}var fk=null,pk=null;function gk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var mk=typeof setTimeout=="function"?setTimeout:void 0,qle=typeof clearTimeout=="function"?clearTimeout:void 0,w6=typeof Promise=="function"?Promise:void 0,Vle=typeof queueMicrotask=="function"?queueMicrotask:typeof w6<"u"?function(t){return w6.resolve(null).then(t).catch(Kle)}:mk;function Kle(t){setTimeout(function(){throw t})}function KR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ZE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ZE(e)}function Jh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function b6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ab=Math.random().toString(36).slice(2),Pl="__reactFiber$"+ab,rC="__reactProps$"+ab,dd="__reactContainer$"+ab,yk="__reactEvents$"+ab,Yle="__reactListeners$"+ab,Qle="__reactHandles$"+ab;function Ep(t){var e=t[Pl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dd]||n[Pl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=b6(t);t!==null;){if(n=t[Pl])return n;t=b6(t)}return e}t=n,n=t.parentNode}return null}function Y_(t){return t=t[Pl]||t[dd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ce(33))}function AN(t){return t[rC]||null}var wk=[],xy=-1;function kf(t){return{current:t}}function cr(t){0>xy||(t.current=wk[xy],wk[xy]=null,xy--)}function rr(t,e){xy++,wk[xy]=t.current,t.current=e}var bf={},di=kf(bf),bo=kf(!1),Sg=bf;function pw(t,e){var n=t.type.contextTypes;if(!n)return bf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function vo(t){return t=t.childContextTypes,t!=null}function Mx(){cr(bo),cr(di)}function v6(t,e,n){if(di.current!==bf)throw Error(Ce(168));rr(di,e),rr(bo,n)}function YG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ce(108,Dce(t)||"Unknown",s));return Cr({},n,r)}function Lx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||bf,Sg=di.current,rr(di,t),rr(bo,bo.current),!0}function E6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ce(169));n?(t=YG(t,e,Sg),r.__reactInternalMemoizedMergedChildContext=t,cr(bo),cr(di),rr(di,t)):cr(bo),rr(bo,n)}var xu=null,SN=!1,YR=!1;function QG(t){xu===null?xu=[t]:xu.push(t)}function Jle(t){SN=!0,QG(t)}function Df(){if(!YR&&xu!==null){YR=!0;var t=0,e=On;try{var n=xu;for(On=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xu=null,SN=!1}catch(s){throw xu!==null&&(xu=xu.slice(t+1)),EG(LM,Df),s}finally{On=e,YR=!1}}return null}var Iy=[],Ny=0,Ux=null,$x=0,Da=[],Ma=0,xg=null,Vu=1,Ku="";function np(t,e){Iy[Ny++]=$x,Iy[Ny++]=Ux,Ux=t,$x=e}function JG(t,e,n){Da[Ma++]=Vu,Da[Ma++]=Ku,Da[Ma++]=xg,xg=t;var r=Vu;t=Ku;var s=32-Bc(r)-1;r&=~(1<<s),n+=1;var i=32-Bc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vu=1<<32-Bc(e)+s|n<<s|r,Ku=i+t}else Vu=1<<i|n<<s|r,Ku=t}function GM(t){t.return!==null&&(np(t,1),JG(t,1,0))}function qM(t){for(;t===Ux;)Ux=Iy[--Ny],Iy[Ny]=null,$x=Iy[--Ny],Iy[Ny]=null;for(;t===xg;)xg=Da[--Ma],Da[Ma]=null,Ku=Da[--Ma],Da[Ma]=null,Vu=Da[--Ma],Da[Ma]=null}var ea=null,Qo=null,pr=!1,Ic=null;function ZG(t,e){var n=Ua(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function C6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ea=t,Qo=Jh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ea=t,Qo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xg!==null?{id:Vu,overflow:Ku}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ua(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ea=t,Qo=null,!0):!1;default:return!1}}function bk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function vk(t){if(pr){var e=Qo;if(e){var n=e;if(!C6(t,e)){if(bk(t))throw Error(Ce(418));e=Jh(n.nextSibling);var r=ea;e&&C6(t,e)?ZG(r,n):(t.flags=t.flags&-4097|2,pr=!1,ea=t)}}else{if(bk(t))throw Error(Ce(418));t.flags=t.flags&-4097|2,pr=!1,ea=t}}}function _6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ea=t}function lA(t){if(t!==ea)return!1;if(!pr)return _6(t),pr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gk(t.type,t.memoizedProps)),e&&(e=Qo)){if(bk(t))throw XG(),Error(Ce(418));for(;e;)ZG(t,e),e=Jh(e.nextSibling)}if(_6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qo=Jh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qo=null}}else Qo=ea?Jh(t.stateNode.nextSibling):null;return!0}function XG(){for(var t=Qo;t;)t=Jh(t.nextSibling)}function gw(){Qo=ea=null,pr=!1}function VM(t){Ic===null?Ic=[t]:Ic.push(t)}var Zle=Ed.ReactCurrentBatchConfig;function Xb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var r=n.stateNode}if(!r)throw Error(Ce(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,t))}return t}function uA(t,e){throw t=Object.prototype.toString.call(e),Error(Ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function A6(t){var e=t._init;return e(t._payload)}function eq(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=tf(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,A){return b===null||b.tag!==6?(b=nP(v,y.mode,A),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,A){var _=v.type;return _===Ey?u(y,b,v.props.children,A,v.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qd&&A6(_)===b.type)?(A=s(b,v.props),A.ref=Xb(y,b,v),A.return=y,A):(A=IS(v.type,v.key,v.props,null,y.mode,A),A.ref=Xb(y,b,v),A.return=y,A)}function l(y,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=rP(v,y.mode,A),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,A,_){return b===null||b.tag!==7?(b=hg(v,y.mode,A,_),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=nP(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case X1:return v=IS(b.type,b.key,b.props,null,y.mode,v),v.ref=Xb(y,null,b),v.return=y,v;case vy:return b=rP(b,y.mode,v),b.return=y,b;case Qd:var A=b._init;return d(y,A(b._payload),v)}if(Rv(b)||Kb(b))return b=hg(b,y.mode,v,null),b.return=y,b;uA(y,b)}return null}function h(y,b,v,A){var _=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:a(y,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case X1:return v.key===_?c(y,b,v,A):null;case vy:return v.key===_?l(y,b,v,A):null;case Qd:return _=v._init,h(y,b,_(v._payload),A)}if(Rv(v)||Kb(v))return _!==null?null:u(y,b,v,A,null);uA(y,v)}return null}function f(y,b,v,A,_){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(v)||null,a(b,y,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case X1:return y=y.get(A.key===null?v:A.key)||null,c(b,y,A,_);case vy:return y=y.get(A.key===null?v:A.key)||null,l(b,y,A,_);case Qd:var I=A._init;return f(y,b,v,I(A._payload),_)}if(Rv(A)||Kb(A))return y=y.get(v)||null,u(b,y,A,_,null);uA(b,A)}return null}function p(y,b,v,A){for(var _=null,I=null,x=b,N=b=0,S=null;x!==null&&N<v.length;N++){x.index>N?(S=x,x=null):S=x.sibling;var O=h(y,x,v[N],A);if(O===null){x===null&&(x=S);break}t&&x&&O.alternate===null&&e(y,x),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O,x=S}if(N===v.length)return n(y,x),pr&&np(y,N),_;if(x===null){for(;N<v.length;N++)x=d(y,v[N],A),x!==null&&(b=i(x,b,N),I===null?_=x:I.sibling=x,I=x);return pr&&np(y,N),_}for(x=r(y,x);N<v.length;N++)S=f(x,y,N,v[N],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?N:S.key),b=i(S,b,N),I===null?_=S:I.sibling=S,I=S);return t&&x.forEach(function(P){return e(y,P)}),pr&&np(y,N),_}function g(y,b,v,A){var _=Kb(v);if(typeof _!="function")throw Error(Ce(150));if(v=_.call(v),v==null)throw Error(Ce(151));for(var I=_=null,x=b,N=b=0,S=null,O=v.next();x!==null&&!O.done;N++,O=v.next()){x.index>N?(S=x,x=null):S=x.sibling;var P=h(y,x,O.value,A);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(y,x),b=i(P,b,N),I===null?_=P:I.sibling=P,I=P,x=S}if(O.done)return n(y,x),pr&&np(y,N),_;if(x===null){for(;!O.done;N++,O=v.next())O=d(y,O.value,A),O!==null&&(b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return pr&&np(y,N),_}for(x=r(y,x);!O.done;N++,O=v.next())O=f(x,y,N,O.value,A),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?N:O.key),b=i(O,b,N),I===null?_=O:I.sibling=O,I=O);return t&&x.forEach(function(F){return e(y,F)}),pr&&np(y,N),_}function w(y,b,v,A){if(typeof v=="object"&&v!==null&&v.type===Ey&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case X1:e:{for(var _=v.key,I=b;I!==null;){if(I.key===_){if(_=v.type,_===Ey){if(I.tag===7){n(y,I.sibling),b=s(I,v.props.children),b.return=y,y=b;break e}}else if(I.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qd&&A6(_)===I.type){n(y,I.sibling),b=s(I,v.props),b.ref=Xb(y,I,v),b.return=y,y=b;break e}n(y,I);break}else e(y,I);I=I.sibling}v.type===Ey?(b=hg(v.props.children,y.mode,A,v.key),b.return=y,y=b):(A=IS(v.type,v.key,v.props,null,y.mode,A),A.ref=Xb(y,b,v),A.return=y,y=A)}return o(y);case vy:e:{for(I=v.key;b!==null;){if(b.key===I)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=rP(v,y.mode,A),b.return=y,y=b}return o(y);case Qd:return I=v._init,w(y,b,I(v._payload),A)}if(Rv(v))return p(y,b,v,A);if(Kb(v))return g(y,b,v,A);uA(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=nP(v,y.mode,A),b.return=y,y=b),o(y)):n(y,b)}return w}var mw=eq(!0),tq=eq(!1),Bx=kf(null),Fx=null,Ty=null,KM=null;function YM(){KM=Ty=Fx=null}function QM(t){var e=Bx.current;cr(Bx),t._currentValue=e}function Ek(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Yy(t,e){Fx=t,KM=Ty=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yo=!0),t.firstContext=null)}function Wa(t){var e=t._currentValue;if(KM!==t)if(t={context:t,memoizedValue:e,next:null},Ty===null){if(Fx===null)throw Error(Ce(308));Ty=t,Fx.dependencies={lanes:0,firstContext:t}}else Ty=Ty.next=t;return e}var Cp=null;function JM(t){Cp===null?Cp=[t]:Cp.push(t)}function nq(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,JM(e)):(n.next=s.next,s.next=n),e.interleaved=n,hd(t,r)}function hd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Jd=!1;function ZM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rq(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,hd(t,n)}return s=r.interleaved,s===null?(e.next=e,JM(r)):(e.next=s.next,s.next=e),r.interleaved=e,hd(t,n)}function ES(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,UM(t,n)}}function S6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jx(t,e,n,r){var s=t.updateQueue;Jd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Cr({},d,h);break e;case 2:Jd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ng|=o,t.lanes=o,t.memoizedState=d}}function x6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ce(191,s));s.call(r)}}}var Q_={},Fl=kf(Q_),sC=kf(Q_),iC=kf(Q_);function _p(t){if(t===Q_)throw Error(Ce(174));return t}function XM(t,e){switch(rr(iC,e),rr(sC,t),rr(Fl,Q_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tk(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=tk(e,t)}cr(Fl),rr(Fl,e)}function yw(){cr(Fl),cr(sC),cr(iC)}function sq(t){_p(iC.current);var e=_p(Fl.current),n=tk(e,t.type);e!==n&&(rr(sC,t),rr(Fl,n))}function eL(t){sC.current===t&&(cr(Fl),cr(sC))}var yr=kf(0);function Wx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var QR=[];function tL(){for(var t=0;t<QR.length;t++)QR[t]._workInProgressVersionPrimary=null;QR.length=0}var CS=Ed.ReactCurrentDispatcher,JR=Ed.ReactCurrentBatchConfig,Ig=0,Er=null,es=null,ws=null,zx=!1,dE=!1,oC=0,Xle=0;function Xs(){throw Error(Ce(321))}function nL(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zc(t[n],e[n]))return!1;return!0}function rL(t,e,n,r,s,i){if(Ig=i,Er=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,CS.current=t===null||t.memoizedState===null?rue:sue,t=n(r,s),dE){i=0;do{if(dE=!1,oC=0,25<=i)throw Error(Ce(301));i+=1,ws=es=null,e.updateQueue=null,CS.current=iue,t=n(r,s)}while(dE)}if(CS.current=Hx,e=es!==null&&es.next!==null,Ig=0,ws=es=Er=null,zx=!1,e)throw Error(Ce(300));return t}function sL(){var t=oC!==0;return oC=0,t}function ll(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ws===null?Er.memoizedState=ws=t:ws=ws.next=t,ws}function za(){if(es===null){var t=Er.alternate;t=t!==null?t.memoizedState:null}else t=es.next;var e=ws===null?Er.memoizedState:ws.next;if(e!==null)ws=e,es=t;else{if(t===null)throw Error(Ce(310));es=t,t={memoizedState:es.memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},ws===null?Er.memoizedState=ws=t:ws=ws.next=t}return ws}function aC(t,e){return typeof e=="function"?e(t):e}function ZR(t){var e=za(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=es,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Ig&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Er.lanes|=u,Ng|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,zc(r,e.memoizedState)||(yo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Er.lanes|=i,Ng|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function XR(t){var e=za(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);zc(i,e.memoizedState)||(yo=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function iq(){}function oq(t,e){var n=Er,r=za(),s=e(),i=!zc(r.memoizedState,s);if(i&&(r.memoizedState=s,yo=!0),r=r.queue,iL(lq.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ws!==null&&ws.memoizedState.tag&1){if(n.flags|=2048,cC(9,cq.bind(null,n,r,s,e),void 0,null),xs===null)throw Error(Ce(349));Ig&30||aq(n,e,s)}return s}function aq(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Er.updateQueue,e===null?(e={lastEffect:null,stores:null},Er.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cq(t,e,n,r){e.value=n,e.getSnapshot=r,uq(e)&&dq(t)}function lq(t,e,n){return n(function(){uq(e)&&dq(t)})}function uq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zc(t,n)}catch{return!0}}function dq(t){var e=hd(t,1);e!==null&&Fc(e,t,1,-1)}function I6(t){var e=ll();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:aC,lastRenderedState:t},e.queue=t,t=t.dispatch=nue.bind(null,Er,t),[e.memoizedState,t]}function cC(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Er.updateQueue,e===null?(e={lastEffect:null,stores:null},Er.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function hq(){return za().memoizedState}function _S(t,e,n,r){var s=ll();Er.flags|=t,s.memoizedState=cC(1|e,n,void 0,r===void 0?null:r)}function xN(t,e,n,r){var s=za();r=r===void 0?null:r;var i=void 0;if(es!==null){var o=es.memoizedState;if(i=o.destroy,r!==null&&nL(r,o.deps)){s.memoizedState=cC(e,n,i,r);return}}Er.flags|=t,s.memoizedState=cC(1|e,n,i,r)}function N6(t,e){return _S(8390656,8,t,e)}function iL(t,e){return xN(2048,8,t,e)}function fq(t,e){return xN(4,2,t,e)}function pq(t,e){return xN(4,4,t,e)}function gq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mq(t,e,n){return n=n!=null?n.concat([t]):null,xN(4,4,gq.bind(null,e,t),n)}function oL(){}function yq(t,e){var n=za();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nL(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function wq(t,e){var n=za();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nL(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bq(t,e,n){return Ig&21?(zc(n,e)||(n=AG(),Er.lanes|=n,Ng|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yo=!0),t.memoizedState=n)}function eue(t,e){var n=On;On=n!==0&&4>n?n:4,t(!0);var r=JR.transition;JR.transition={};try{t(!1),e()}finally{On=n,JR.transition=r}}function vq(){return za().memoizedState}function tue(t,e,n){var r=ef(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Eq(t))Cq(e,n);else if(n=nq(t,e,n,r),n!==null){var s=Mi();Fc(n,t,r,s),_q(n,e,r)}}function nue(t,e,n){var r=ef(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Eq(t))Cq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,zc(a,o)){var c=e.interleaved;c===null?(s.next=s,JM(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=nq(t,e,s,r),n!==null&&(s=Mi(),Fc(n,t,r,s),_q(n,e,r))}}function Eq(t){var e=t.alternate;return t===Er||e!==null&&e===Er}function Cq(t,e){dE=zx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _q(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,UM(t,n)}}var Hx={readContext:Wa,useCallback:Xs,useContext:Xs,useEffect:Xs,useImperativeHandle:Xs,useInsertionEffect:Xs,useLayoutEffect:Xs,useMemo:Xs,useReducer:Xs,useRef:Xs,useState:Xs,useDebugValue:Xs,useDeferredValue:Xs,useTransition:Xs,useMutableSource:Xs,useSyncExternalStore:Xs,useId:Xs,unstable_isNewReconciler:!1},rue={readContext:Wa,useCallback:function(t,e){return ll().memoizedState=[t,e===void 0?null:e],t},useContext:Wa,useEffect:N6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_S(4194308,4,gq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _S(4194308,4,t,e)},useInsertionEffect:function(t,e){return _S(4,2,t,e)},useMemo:function(t,e){var n=ll();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ll();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tue.bind(null,Er,t),[r.memoizedState,t]},useRef:function(t){var e=ll();return t={current:t},e.memoizedState=t},useState:I6,useDebugValue:oL,useDeferredValue:function(t){return ll().memoizedState=t},useTransition:function(){var t=I6(!1),e=t[0];return t=eue.bind(null,t[1]),ll().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Er,s=ll();if(pr){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=e(),xs===null)throw Error(Ce(349));Ig&30||aq(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,N6(lq.bind(null,r,i,t),[t]),r.flags|=2048,cC(9,cq.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ll(),e=xs.identifierPrefix;if(pr){var n=Ku,r=Vu;n=(r&~(1<<32-Bc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oC++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Xle++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},sue={readContext:Wa,useCallback:yq,useContext:Wa,useEffect:iL,useImperativeHandle:mq,useInsertionEffect:fq,useLayoutEffect:pq,useMemo:wq,useReducer:ZR,useRef:hq,useState:function(){return ZR(aC)},useDebugValue:oL,useDeferredValue:function(t){var e=za();return bq(e,es.memoizedState,t)},useTransition:function(){var t=ZR(aC)[0],e=za().memoizedState;return[t,e]},useMutableSource:iq,useSyncExternalStore:oq,useId:vq,unstable_isNewReconciler:!1},iue={readContext:Wa,useCallback:yq,useContext:Wa,useEffect:iL,useImperativeHandle:mq,useInsertionEffect:fq,useLayoutEffect:pq,useMemo:wq,useReducer:XR,useRef:hq,useState:function(){return XR(aC)},useDebugValue:oL,useDeferredValue:function(t){var e=za();return es===null?e.memoizedState=t:bq(e,es.memoizedState,t)},useTransition:function(){var t=XR(aC)[0],e=za().memoizedState;return[t,e]},useMutableSource:iq,useSyncExternalStore:oq,useId:vq,unstable_isNewReconciler:!1};function mc(t,e){if(t&&t.defaultProps){e=Cr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ck(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var IN={isMounted:function(t){return(t=t._reactInternals)?om(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mi(),s=ef(t),i=Xu(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zh(t,i,s),e!==null&&(Fc(e,t,s,r),ES(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mi(),s=ef(t),i=Xu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zh(t,i,s),e!==null&&(Fc(e,t,s,r),ES(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mi(),r=ef(t),s=Xu(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zh(t,s,r),e!==null&&(Fc(e,t,r,n),ES(e,t,r))}};function T6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!eC(n,r)||!eC(s,i):!0}function Aq(t,e,n){var r=!1,s=bf,i=e.contextType;return typeof i=="object"&&i!==null?i=Wa(i):(s=vo(e)?Sg:di.current,r=e.contextTypes,i=(r=r!=null)?pw(t,s):bf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=IN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function R6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&IN.enqueueReplaceState(e,e.state,null)}function _k(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ZM(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wa(i):(i=vo(e)?Sg:di.current,s.context=pw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ck(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&IN.enqueueReplaceState(s,s.state,null),jx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ww(t,e){try{var n="",r=e;do n+=kce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function eP(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ak(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oue=typeof WeakMap=="function"?WeakMap:Map;function Sq(t,e,n){n=Xu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){qx||(qx=!0,Dk=r),Ak(t,e)},n}function xq(t,e,n){n=Xu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Ak(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ak(t,e),typeof r!="function"&&(Xh===null?Xh=new Set([this]):Xh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function P6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oue;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=vue.bind(null,t,e,n),e.then(t,t))}function O6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function k6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xu(-1,1),e.tag=2,Zh(n,e,1))),n.lanes|=1),t)}var aue=Ed.ReactCurrentOwner,yo=!1;function _i(t,e,n,r){e.child=t===null?tq(e,null,n,r):mw(e,t.child,n,r)}function D6(t,e,n,r,s){n=n.render;var i=e.ref;return Yy(e,s),r=rL(t,e,n,r,i,s),n=sL(),t!==null&&!yo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fd(t,e,s)):(pr&&n&&GM(e),e.flags|=1,_i(t,e,r,s),e.child)}function M6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Iq(t,e,i,r,s)):(t=IS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:eC,n(o,r)&&t.ref===e.ref)return fd(t,e,s)}return e.flags|=1,t=tf(i,r),t.ref=e.ref,t.return=e,e.child=t}function Iq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(eC(i,r)&&t.ref===e.ref)if(yo=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(yo=!0);else return e.lanes=t.lanes,fd(t,e,s)}return Sk(t,e,n,r,s)}function Nq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(Py,Go),Go|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rr(Py,Go),Go|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,rr(Py,Go),Go|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,rr(Py,Go),Go|=r;return _i(t,e,s,n),e.child}function Tq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sk(t,e,n,r,s){var i=vo(n)?Sg:di.current;return i=pw(e,i),Yy(e,s),n=rL(t,e,n,r,i,s),r=sL(),t!==null&&!yo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fd(t,e,s)):(pr&&r&&GM(e),e.flags|=1,_i(t,e,n,s),e.child)}function L6(t,e,n,r,s){if(vo(n)){var i=!0;Lx(e)}else i=!1;if(Yy(e,s),e.stateNode===null)AS(t,e),Aq(e,n,r),_k(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Wa(l):(l=vo(n)?Sg:di.current,l=pw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&R6(e,o,r,l),Jd=!1;var h=e.memoizedState;o.state=h,jx(e,r,o,s),c=e.memoizedState,a!==r||h!==c||bo.current||Jd?(typeof u=="function"&&(Ck(e,n,u,r),c=e.memoizedState),(a=Jd||T6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,rq(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:mc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wa(c):(c=vo(n)?Sg:di.current,c=pw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&R6(e,o,r,c),Jd=!1,h=e.memoizedState,o.state=h,jx(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||bo.current||Jd?(typeof f=="function"&&(Ck(e,n,f,r),p=e.memoizedState),(l=Jd||T6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return xk(t,e,n,r,i,s)}function xk(t,e,n,r,s,i){Tq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&E6(e,n,!1),fd(t,e,i);r=e.stateNode,aue.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=mw(e,t.child,null,i),e.child=mw(e,null,a,i)):_i(t,e,a,i),e.memoizedState=r.state,s&&E6(e,n,!0),e.child}function Rq(t){var e=t.stateNode;e.pendingContext?v6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&v6(t,e.context,!1),XM(t,e.containerInfo)}function U6(t,e,n,r,s){return gw(),VM(s),e.flags|=256,_i(t,e,n,r),e.child}var Ik={dehydrated:null,treeContext:null,retryLane:0};function Nk(t){return{baseLanes:t,cachePool:null,transitions:null}}function Pq(t,e,n){var r=e.pendingProps,s=yr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rr(yr,s&1),t===null)return vk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=RN(o,r,0,null),t=hg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Nk(n),e.memoizedState=Ik,t):aL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return cue(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=tf(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=tf(a,i):(i=hg(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Nk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ik,r}return i=t.child,t=i.sibling,r=tf(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function aL(t,e){return e=RN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function dA(t,e,n,r){return r!==null&&VM(r),mw(e,t.child,null,n),t=aL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function cue(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=eP(Error(Ce(422))),dA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=RN({mode:"visible",children:r.children},s,0,null),i=hg(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&mw(e,t.child,null,o),e.child.memoizedState=Nk(o),e.memoizedState=Ik,i);if(!(e.mode&1))return dA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ce(419)),r=eP(i,r,void 0),dA(t,e,o,r)}if(a=(o&t.childLanes)!==0,yo||a){if(r=xs,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hd(t,s),Fc(r,t,s,-1))}return fL(),r=eP(Error(Ce(421))),dA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Eue.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Qo=Jh(s.nextSibling),ea=e,pr=!0,Ic=null,t!==null&&(Da[Ma++]=Vu,Da[Ma++]=Ku,Da[Ma++]=xg,Vu=t.id,Ku=t.overflow,xg=e),e=aL(e,r.children),e.flags|=4096,e)}function $6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ek(t.return,e,n)}function tP(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Oq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_i(t,e,r.children,n),r=yr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$6(t,n,e);else if(t.tag===19)$6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rr(yr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Wx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),tP(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}tP(e,!0,n,null,i);break;case"together":tP(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function AS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fd(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ng|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ce(153));if(e.child!==null){for(t=e.child,n=tf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=tf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lue(t,e,n){switch(e.tag){case 3:Rq(e),gw();break;case 5:sq(e);break;case 1:vo(e.type)&&Lx(e);break;case 4:XM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;rr(Bx,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rr(yr,yr.current&1),e.flags|=128,null):n&e.child.childLanes?Pq(t,e,n):(rr(yr,yr.current&1),t=fd(t,e,n),t!==null?t.sibling:null);rr(yr,yr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Oq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rr(yr,yr.current),r)break;return null;case 22:case 23:return e.lanes=0,Nq(t,e,n)}return fd(t,e,n)}var kq,Tk,Dq,Mq;kq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tk=function(){};Dq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,_p(Fl.current);var i=null;switch(n){case"input":s=J2(t,s),r=J2(t,r),i=[];break;case"select":s=Cr({},s,{value:void 0}),r=Cr({},r,{value:void 0}),i=[];break;case"textarea":s=ek(t,s),r=ek(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dx)}nk(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(VE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(VE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&or("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};Mq=function(t,e,n,r){n!==r&&(e.flags|=4)};function ev(t,e){if(!pr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ei(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uue(t,e,n){var r=e.pendingProps;switch(qM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(e),null;case 1:return vo(e.type)&&Mx(),ei(e),null;case 3:return r=e.stateNode,yw(),cr(bo),cr(di),tL(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ic!==null&&(Uk(Ic),Ic=null))),Tk(t,e),ei(e),null;case 5:eL(e);var s=_p(iC.current);if(n=e.type,t!==null&&e.stateNode!=null)Dq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ce(166));return ei(e),null}if(t=_p(Fl.current),lA(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Pl]=e,r[rC]=i,t=(e.mode&1)!==0,n){case"dialog":or("cancel",r),or("close",r);break;case"iframe":case"object":case"embed":or("load",r);break;case"video":case"audio":for(s=0;s<Ov.length;s++)or(Ov[s],r);break;case"source":or("error",r);break;case"img":case"image":case"link":or("error",r),or("load",r);break;case"details":or("toggle",r);break;case"input":VB(r,i),or("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},or("invalid",r);break;case"textarea":YB(r,i),or("invalid",r)}nk(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&cA(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&cA(r.textContent,a,t),s=["children",""+a]):VE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&or("scroll",r)}switch(n){case"input":eA(r),KB(r,i,!0);break;case"textarea":eA(r),QB(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Dx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pl]=e,t[rC]=r,kq(t,e,!1,!1),e.stateNode=t;e:{switch(o=rk(n,r),n){case"dialog":or("cancel",t),or("close",t),s=r;break;case"iframe":case"object":case"embed":or("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ov.length;s++)or(Ov[s],t);s=r;break;case"source":or("error",t),s=r;break;case"img":case"image":case"link":or("error",t),or("load",t),s=r;break;case"details":or("toggle",t),s=r;break;case"input":VB(t,r),s=J2(t,r),or("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Cr({},r,{value:void 0}),or("invalid",t);break;case"textarea":YB(t,r),s=ek(t,r),or("invalid",t);break;default:s=r}nk(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?hG(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&uG(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&KE(t,c):typeof c=="number"&&KE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(VE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&or("scroll",t):c!=null&&PM(t,i,c,o))}switch(n){case"input":eA(t),KB(t,r,!1);break;case"textarea":eA(t),QB(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Gy(t,!!r.multiple,i,!1):r.defaultValue!=null&&Gy(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Dx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ei(e),null;case 6:if(t&&e.stateNode!=null)Mq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ce(166));if(n=_p(iC.current),_p(Fl.current),lA(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pl]=e,(i=r.nodeValue!==n)&&(t=ea,t!==null))switch(t.tag){case 3:cA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cA(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pl]=e,e.stateNode=r}return ei(e),null;case 13:if(cr(yr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pr&&Qo!==null&&e.mode&1&&!(e.flags&128))XG(),gw(),e.flags|=98560,i=!1;else if(i=lA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ce(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ce(317));i[Pl]=e}else gw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ei(e),i=!1}else Ic!==null&&(Uk(Ic),Ic=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||yr.current&1?is===0&&(is=3):fL())),e.updateQueue!==null&&(e.flags|=4),ei(e),null);case 4:return yw(),Tk(t,e),t===null&&tC(e.stateNode.containerInfo),ei(e),null;case 10:return QM(e.type._context),ei(e),null;case 17:return vo(e.type)&&Mx(),ei(e),null;case 19:if(cr(yr),i=e.memoizedState,i===null)return ei(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ev(i,!1);else{if(is!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wx(t),o!==null){for(e.flags|=128,ev(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rr(yr,yr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Lr()>bw&&(e.flags|=128,r=!0,ev(i,!1),e.lanes=4194304)}else{if(!r)if(t=Wx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ev(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pr)return ei(e),null}else 2*Lr()-i.renderingStartTime>bw&&n!==1073741824&&(e.flags|=128,r=!0,ev(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Lr(),e.sibling=null,n=yr.current,rr(yr,r?n&1|2:n&1),e):(ei(e),null);case 22:case 23:return hL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Go&1073741824&&(ei(e),e.subtreeFlags&6&&(e.flags|=8192)):ei(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function due(t,e){switch(qM(e),e.tag){case 1:return vo(e.type)&&Mx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yw(),cr(bo),cr(di),tL(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eL(e),null;case 13:if(cr(yr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));gw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return cr(yr),null;case 4:return yw(),null;case 10:return QM(e.type._context),null;case 22:case 23:return hL(),null;case 24:return null;default:return null}}var hA=!1,li=!1,hue=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Ry(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nr(t,e,r)}else n.current=null}function Rk(t,e,n){try{n()}catch(r){Nr(t,e,r)}}var B6=!1;function fue(t,e){if(fk=Px,t=FG(),HM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(pk={focusedElem:t,selectionRange:n},Px=!1,Ve=e;Ve!==null;)if(e=Ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ve=t;else for(;Ve!==null;){e=Ve;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:mc(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(A){Nr(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}return p=B6,B6=!1,p}function hE(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Rk(e,n,i)}s=s.next}while(s!==r)}}function NN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Pk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lq(t){var e=t.alternate;e!==null&&(t.alternate=null,Lq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pl],delete e[rC],delete e[yk],delete e[Yle],delete e[Qle])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uq(t){return t.tag===5||t.tag===3||t.tag===4}function F6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ok(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dx));else if(r!==4&&(t=t.child,t!==null))for(Ok(t,e,n),t=t.sibling;t!==null;)Ok(t,e,n),t=t.sibling}function kk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kk(t,e,n),t=t.sibling;t!==null;)kk(t,e,n),t=t.sibling}var Us=null,xc=!1;function xd(t,e,n){for(n=n.child;n!==null;)$q(t,e,n),n=n.sibling}function $q(t,e,n){if(Bl&&typeof Bl.onCommitFiberUnmount=="function")try{Bl.onCommitFiberUnmount(vN,n)}catch{}switch(n.tag){case 5:li||Ry(n,e);case 6:var r=Us,s=xc;Us=null,xd(t,e,n),Us=r,xc=s,Us!==null&&(xc?(t=Us,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Us.removeChild(n.stateNode));break;case 18:Us!==null&&(xc?(t=Us,n=n.stateNode,t.nodeType===8?KR(t.parentNode,n):t.nodeType===1&&KR(t,n),ZE(t)):KR(Us,n.stateNode));break;case 4:r=Us,s=xc,Us=n.stateNode.containerInfo,xc=!0,xd(t,e,n),Us=r,xc=s;break;case 0:case 11:case 14:case 15:if(!li&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Rk(n,e,o),s=s.next}while(s!==r)}xd(t,e,n);break;case 1:if(!li&&(Ry(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nr(n,e,a)}xd(t,e,n);break;case 21:xd(t,e,n);break;case 22:n.mode&1?(li=(r=li)||n.memoizedState!==null,xd(t,e,n),li=r):xd(t,e,n);break;default:xd(t,e,n)}}function j6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new hue),e.forEach(function(r){var s=Cue.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function oc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Us=a.stateNode,xc=!1;break e;case 3:Us=a.stateNode.containerInfo,xc=!0;break e;case 4:Us=a.stateNode.containerInfo,xc=!0;break e}a=a.return}if(Us===null)throw Error(Ce(160));$q(i,o,s),Us=null,xc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Nr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Bq(e,t),e=e.sibling}function Bq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oc(e,t),Xc(t),r&4){try{hE(3,t,t.return),NN(3,t)}catch(g){Nr(t,t.return,g)}try{hE(5,t,t.return)}catch(g){Nr(t,t.return,g)}}break;case 1:oc(e,t),Xc(t),r&512&&n!==null&&Ry(n,n.return);break;case 5:if(oc(e,t),Xc(t),r&512&&n!==null&&Ry(n,n.return),t.flags&32){var s=t.stateNode;try{KE(s,"")}catch(g){Nr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&aG(s,i),rk(a,o);var l=rk(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?hG(s,d):u==="dangerouslySetInnerHTML"?uG(s,d):u==="children"?KE(s,d):PM(s,u,d,l)}switch(a){case"input":Z2(s,i);break;case"textarea":cG(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Gy(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Gy(s,!!i.multiple,i.defaultValue,!0):Gy(s,!!i.multiple,i.multiple?[]:"",!1))}s[rC]=i}catch(g){Nr(t,t.return,g)}}break;case 6:if(oc(e,t),Xc(t),r&4){if(t.stateNode===null)throw Error(Ce(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Nr(t,t.return,g)}}break;case 3:if(oc(e,t),Xc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ZE(e.containerInfo)}catch(g){Nr(t,t.return,g)}break;case 4:oc(e,t),Xc(t);break;case 13:oc(e,t),Xc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(uL=Lr())),r&4&&j6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(li=(l=li)||u,oc(e,t),li=l):oc(e,t),Xc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ve=t,u=t.child;u!==null;){for(d=Ve=u;Ve!==null;){switch(h=Ve,f=h.child,h.tag){case 0:case 11:case 14:case 15:hE(4,h,h.return);break;case 1:Ry(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Nr(r,n,g)}}break;case 5:Ry(h,h.return);break;case 22:if(h.memoizedState!==null){z6(d);continue}}f!==null?(f.return=h,Ve=f):z6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=dG("display",o))}catch(g){Nr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Nr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:oc(e,t),Xc(t),r&4&&j6(t);break;case 21:break;default:oc(e,t),Xc(t)}}function Xc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Uq(n)){var r=n;break e}n=n.return}throw Error(Ce(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(KE(s,""),r.flags&=-33);var i=F6(t);kk(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=F6(t);Ok(t,a,o);break;default:throw Error(Ce(161))}}catch(c){Nr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pue(t,e,n){Ve=t,Fq(t)}function Fq(t,e,n){for(var r=(t.mode&1)!==0;Ve!==null;){var s=Ve,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||li;a=hA;var l=li;if(hA=o,(li=c)&&!l)for(Ve=s;Ve!==null;)o=Ve,c=o.child,o.tag===22&&o.memoizedState!==null?H6(s):c!==null?(c.return=o,Ve=c):H6(s);for(;i!==null;)Ve=i,Fq(i),i=i.sibling;Ve=s,hA=a,li=l}W6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ve=i):W6(t)}}function W6(t){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||NN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!li)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:mc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&x6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}x6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&ZE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}li||e.flags&512&&Pk(e)}catch(h){Nr(e,e.return,h)}}if(e===t){Ve=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function z6(t){for(;Ve!==null;){var e=Ve;if(e===t){Ve=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ve=n;break}Ve=e.return}}function H6(t){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{NN(4,e)}catch(c){Nr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Nr(e,s,c)}}var i=e.return;try{Pk(e)}catch(c){Nr(e,i,c)}break;case 5:var o=e.return;try{Pk(e)}catch(c){Nr(e,o,c)}}}catch(c){Nr(e,e.return,c)}if(e===t){Ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ve=a;break}Ve=e.return}}var gue=Math.ceil,Gx=Ed.ReactCurrentDispatcher,cL=Ed.ReactCurrentOwner,Fa=Ed.ReactCurrentBatchConfig,fn=0,xs=null,Gr=null,zs=0,Go=0,Py=kf(0),is=0,lC=null,Ng=0,TN=0,lL=0,fE=null,fo=null,uL=0,bw=1/0,_u=null,qx=!1,Dk=null,Xh=null,fA=!1,Lh=null,Vx=0,pE=0,Mk=null,SS=-1,xS=0;function Mi(){return fn&6?Lr():SS!==-1?SS:SS=Lr()}function ef(t){return t.mode&1?fn&2&&zs!==0?zs&-zs:Zle.transition!==null?(xS===0&&(xS=AG()),xS):(t=On,t!==0||(t=window.event,t=t===void 0?16:PG(t.type)),t):1}function Fc(t,e,n,r){if(50<pE)throw pE=0,Mk=null,Error(Ce(185));V_(t,n,r),(!(fn&2)||t!==xs)&&(t===xs&&(!(fn&2)&&(TN|=n),is===4&&rh(t,zs)),Eo(t,r),n===1&&fn===0&&!(e.mode&1)&&(bw=Lr()+500,SN&&Df()))}function Eo(t,e){var n=t.callbackNode;Zce(t,e);var r=Rx(t,t===xs?zs:0);if(r===0)n!==null&&XB(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&XB(n),e===1)t.tag===0?Jle(G6.bind(null,t)):QG(G6.bind(null,t)),Vle(function(){!(fn&6)&&Df()}),n=null;else{switch(SG(r)){case 1:n=LM;break;case 4:n=CG;break;case 16:n=Tx;break;case 536870912:n=_G;break;default:n=Tx}n=Kq(n,jq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jq(t,e){if(SS=-1,xS=0,fn&6)throw Error(Ce(327));var n=t.callbackNode;if(Qy()&&t.callbackNode!==n)return null;var r=Rx(t,t===xs?zs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Kx(t,r);else{e=r;var s=fn;fn|=2;var i=zq();(xs!==t||zs!==e)&&(_u=null,bw=Lr()+500,dg(t,e));do try{wue();break}catch(a){Wq(t,a)}while(!0);YM(),Gx.current=i,fn=s,Gr!==null?e=0:(xs=null,zs=0,e=is)}if(e!==0){if(e===2&&(s=ck(t),s!==0&&(r=s,e=Lk(t,s))),e===1)throw n=lC,dg(t,0),rh(t,r),Eo(t,Lr()),n;if(e===6)rh(t,r);else{if(s=t.current.alternate,!(r&30)&&!mue(s)&&(e=Kx(t,r),e===2&&(i=ck(t),i!==0&&(r=i,e=Lk(t,i))),e===1))throw n=lC,dg(t,0),rh(t,r),Eo(t,Lr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ce(345));case 2:rp(t,fo,_u);break;case 3:if(rh(t,r),(r&130023424)===r&&(e=uL+500-Lr(),10<e)){if(Rx(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Mi(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=mk(rp.bind(null,t,fo,_u),e);break}rp(t,fo,_u);break;case 4:if(rh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Bc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Lr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gue(r/1960))-r,10<r){t.timeoutHandle=mk(rp.bind(null,t,fo,_u),r);break}rp(t,fo,_u);break;case 5:rp(t,fo,_u);break;default:throw Error(Ce(329))}}}return Eo(t,Lr()),t.callbackNode===n?jq.bind(null,t):null}function Lk(t,e){var n=fE;return t.current.memoizedState.isDehydrated&&(dg(t,e).flags|=256),t=Kx(t,e),t!==2&&(e=fo,fo=n,e!==null&&Uk(e)),t}function Uk(t){fo===null?fo=t:fo.push.apply(fo,t)}function mue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!zc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rh(t,e){for(e&=~lL,e&=~TN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bc(e),r=1<<n;t[n]=-1,e&=~r}}function G6(t){if(fn&6)throw Error(Ce(327));Qy();var e=Rx(t,0);if(!(e&1))return Eo(t,Lr()),null;var n=Kx(t,e);if(t.tag!==0&&n===2){var r=ck(t);r!==0&&(e=r,n=Lk(t,r))}if(n===1)throw n=lC,dg(t,0),rh(t,e),Eo(t,Lr()),n;if(n===6)throw Error(Ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rp(t,fo,_u),Eo(t,Lr()),null}function dL(t,e){var n=fn;fn|=1;try{return t(e)}finally{fn=n,fn===0&&(bw=Lr()+500,SN&&Df())}}function Tg(t){Lh!==null&&Lh.tag===0&&!(fn&6)&&Qy();var e=fn;fn|=1;var n=Fa.transition,r=On;try{if(Fa.transition=null,On=1,t)return t()}finally{On=r,Fa.transition=n,fn=e,!(fn&6)&&Df()}}function hL(){Go=Py.current,cr(Py)}function dg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qle(n)),Gr!==null)for(n=Gr.return;n!==null;){var r=n;switch(qM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mx();break;case 3:yw(),cr(bo),cr(di),tL();break;case 5:eL(r);break;case 4:yw();break;case 13:cr(yr);break;case 19:cr(yr);break;case 10:QM(r.type._context);break;case 22:case 23:hL()}n=n.return}if(xs=t,Gr=t=tf(t.current,null),zs=Go=e,is=0,lC=null,lL=TN=Ng=0,fo=fE=null,Cp!==null){for(e=0;e<Cp.length;e++)if(n=Cp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Cp=null}return t}function Wq(t,e){do{var n=Gr;try{if(YM(),CS.current=Hx,zx){for(var r=Er.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zx=!1}if(Ig=0,ws=es=Er=null,dE=!1,oC=0,cL.current=null,n===null||n.return===null){is=1,lC=e,Gr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=zs,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=O6(o);if(f!==null){f.flags&=-257,k6(f,o,a,i,e),f.mode&1&&P6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){P6(i,l,e),fL();break e}c=Error(Ce(426))}}else if(pr&&a.mode&1){var w=O6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),k6(w,o,a,i,e),VM(ww(c,a));break e}}i=c=ww(c,a),is!==4&&(is=2),fE===null?fE=[i]:fE.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=Sq(i,c,e);S6(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Xh===null||!Xh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=xq(i,a,e);S6(i,A);break e}}i=i.return}while(i!==null)}Gq(n)}catch(_){e=_,Gr===n&&n!==null&&(Gr=n=n.return);continue}break}while(!0)}function zq(){var t=Gx.current;return Gx.current=Hx,t===null?Hx:t}function fL(){(is===0||is===3||is===2)&&(is=4),xs===null||!(Ng&268435455)&&!(TN&268435455)||rh(xs,zs)}function Kx(t,e){var n=fn;fn|=2;var r=zq();(xs!==t||zs!==e)&&(_u=null,dg(t,e));do try{yue();break}catch(s){Wq(t,s)}while(!0);if(YM(),fn=n,Gx.current=r,Gr!==null)throw Error(Ce(261));return xs=null,zs=0,is}function yue(){for(;Gr!==null;)Hq(Gr)}function wue(){for(;Gr!==null&&!zce();)Hq(Gr)}function Hq(t){var e=Vq(t.alternate,t,Go);t.memoizedProps=t.pendingProps,e===null?Gq(t):Gr=e,cL.current=null}function Gq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=due(n,e),n!==null){n.flags&=32767,Gr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{is=6,Gr=null;return}}else if(n=uue(n,e,Go),n!==null){Gr=n;return}if(e=e.sibling,e!==null){Gr=e;return}Gr=e=t}while(e!==null);is===0&&(is=5)}function rp(t,e,n){var r=On,s=Fa.transition;try{Fa.transition=null,On=1,bue(t,e,n,r)}finally{Fa.transition=s,On=r}return null}function bue(t,e,n,r){do Qy();while(Lh!==null);if(fn&6)throw Error(Ce(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ce(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Xce(t,i),t===xs&&(Gr=xs=null,zs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fA||(fA=!0,Kq(Tx,function(){return Qy(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Fa.transition,Fa.transition=null;var o=On;On=1;var a=fn;fn|=4,cL.current=null,fue(t,n),Bq(n,t),Ble(pk),Px=!!fk,pk=fk=null,t.current=n,pue(n),Hce(),fn=a,On=o,Fa.transition=i}else t.current=n;if(fA&&(fA=!1,Lh=t,Vx=s),i=t.pendingLanes,i===0&&(Xh=null),Vce(n.stateNode),Eo(t,Lr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(qx)throw qx=!1,t=Dk,Dk=null,t;return Vx&1&&t.tag!==0&&Qy(),i=t.pendingLanes,i&1?t===Mk?pE++:(pE=0,Mk=t):pE=0,Df(),null}function Qy(){if(Lh!==null){var t=SG(Vx),e=Fa.transition,n=On;try{if(Fa.transition=null,On=16>t?16:t,Lh===null)var r=!1;else{if(t=Lh,Lh=null,Vx=0,fn&6)throw Error(Ce(331));var s=fn;for(fn|=4,Ve=t.current;Ve!==null;){var i=Ve,o=i.child;if(Ve.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ve=l;Ve!==null;){var u=Ve;switch(u.tag){case 0:case 11:case 15:hE(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ve=d;else for(;Ve!==null;){u=Ve;var h=u.sibling,f=u.return;if(Lq(u),u===l){Ve=null;break}if(h!==null){h.return=f,Ve=h;break}Ve=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ve=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ve=o;else e:for(;Ve!==null;){if(i=Ve,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hE(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ve=y;break e}Ve=i.return}}var b=t.current;for(Ve=b;Ve!==null;){o=Ve;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ve=v;else e:for(o=b;Ve!==null;){if(a=Ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:NN(9,a)}}catch(_){Nr(a,a.return,_)}if(a===o){Ve=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ve=A;break e}Ve=a.return}}if(fn=s,Df(),Bl&&typeof Bl.onPostCommitFiberRoot=="function")try{Bl.onPostCommitFiberRoot(vN,t)}catch{}r=!0}return r}finally{On=n,Fa.transition=e}}return!1}function q6(t,e,n){e=ww(n,e),e=Sq(t,e,1),t=Zh(t,e,1),e=Mi(),t!==null&&(V_(t,1,e),Eo(t,e))}function Nr(t,e,n){if(t.tag===3)q6(t,t,n);else for(;e!==null;){if(e.tag===3){q6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xh===null||!Xh.has(r))){t=ww(n,t),t=xq(e,t,1),e=Zh(e,t,1),t=Mi(),e!==null&&(V_(e,1,t),Eo(e,t));break}}e=e.return}}function vue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mi(),t.pingedLanes|=t.suspendedLanes&n,xs===t&&(zs&n)===n&&(is===4||is===3&&(zs&130023424)===zs&&500>Lr()-uL?dg(t,0):lL|=n),Eo(t,e)}function qq(t,e){e===0&&(t.mode&1?(e=rA,rA<<=1,!(rA&130023424)&&(rA=4194304)):e=1);var n=Mi();t=hd(t,e),t!==null&&(V_(t,e,n),Eo(t,n))}function Eue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),qq(t,n)}function Cue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ce(314))}r!==null&&r.delete(e),qq(t,n)}var Vq;Vq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bo.current)yo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yo=!1,lue(t,e,n);yo=!!(t.flags&131072)}else yo=!1,pr&&e.flags&1048576&&JG(e,$x,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;AS(t,e),t=e.pendingProps;var s=pw(e,di.current);Yy(e,n),s=rL(null,e,r,t,s,n);var i=sL();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vo(r)?(i=!0,Lx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ZM(e),s.updater=IN,e.stateNode=s,s._reactInternals=e,_k(e,r,t,n),e=xk(null,e,r,!0,i,n)):(e.tag=0,pr&&i&&GM(e),_i(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(AS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Aue(r),t=mc(r,t),s){case 0:e=Sk(null,e,r,t,n);break e;case 1:e=L6(null,e,r,t,n);break e;case 11:e=D6(null,e,r,t,n);break e;case 14:e=M6(null,e,r,mc(r.type,t),n);break e}throw Error(Ce(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mc(r,s),Sk(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mc(r,s),L6(t,e,r,s,n);case 3:e:{if(Rq(e),t===null)throw Error(Ce(387));r=e.pendingProps,i=e.memoizedState,s=i.element,rq(t,e),jx(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ww(Error(Ce(423)),e),e=U6(t,e,r,n,s);break e}else if(r!==s){s=ww(Error(Ce(424)),e),e=U6(t,e,r,n,s);break e}else for(Qo=Jh(e.stateNode.containerInfo.firstChild),ea=e,pr=!0,Ic=null,n=tq(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gw(),r===s){e=fd(t,e,n);break e}_i(t,e,r,n)}e=e.child}return e;case 5:return sq(e),t===null&&vk(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gk(r,s)?o=null:i!==null&&gk(r,i)&&(e.flags|=32),Tq(t,e),_i(t,e,o,n),e.child;case 6:return t===null&&vk(e),null;case 13:return Pq(t,e,n);case 4:return XM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=mw(e,null,r,n):_i(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mc(r,s),D6(t,e,r,s,n);case 7:return _i(t,e,e.pendingProps,n),e.child;case 8:return _i(t,e,e.pendingProps.children,n),e.child;case 12:return _i(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,rr(Bx,r._currentValue),r._currentValue=o,i!==null)if(zc(i.value,o)){if(i.children===s.children&&!bo.current){e=fd(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Xu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ek(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ek(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_i(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Yy(e,n),s=Wa(s),r=r(s),e.flags|=1,_i(t,e,r,n),e.child;case 14:return r=e.type,s=mc(r,e.pendingProps),s=mc(r.type,s),M6(t,e,r,s,n);case 15:return Iq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:mc(r,s),AS(t,e),e.tag=1,vo(r)?(t=!0,Lx(e)):t=!1,Yy(e,n),Aq(e,r,s),_k(e,r,s,n),xk(null,e,r,!0,t,n);case 19:return Oq(t,e,n);case 22:return Nq(t,e,n)}throw Error(Ce(156,e.tag))};function Kq(t,e){return EG(t,e)}function _ue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ua(t,e,n,r){return new _ue(t,e,n,r)}function pL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Aue(t){if(typeof t=="function")return pL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===kM)return 11;if(t===DM)return 14}return 2}function tf(t,e){var n=t.alternate;return n===null?(n=Ua(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function IS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")pL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ey:return hg(n.children,s,i,e);case OM:o=8,s|=8;break;case V2:return t=Ua(12,n,e,s|2),t.elementType=V2,t.lanes=i,t;case K2:return t=Ua(13,n,e,s),t.elementType=K2,t.lanes=i,t;case Y2:return t=Ua(19,n,e,s),t.elementType=Y2,t.lanes=i,t;case sG:return RN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nG:o=10;break e;case rG:o=9;break e;case kM:o=11;break e;case DM:o=14;break e;case Qd:o=16,r=null;break e}throw Error(Ce(130,t==null?t:typeof t,""))}return e=Ua(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function hg(t,e,n,r){return t=Ua(7,t,r,e),t.lanes=n,t}function RN(t,e,n,r){return t=Ua(22,t,r,e),t.elementType=sG,t.lanes=n,t.stateNode={isHidden:!1},t}function nP(t,e,n){return t=Ua(6,t,null,e),t.lanes=n,t}function rP(t,e,n){return e=Ua(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Sue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=UR(0),this.expirationTimes=UR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=UR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gL(t,e,n,r,s,i,o,a,c){return t=new Sue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ua(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ZM(i),t}function xue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yq(t){if(!t)return bf;t=t._reactInternals;e:{if(om(t)!==t||t.tag!==1)throw Error(Ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(t.tag===1){var n=t.type;if(vo(n))return YG(t,n,e)}return e}function Qq(t,e,n,r,s,i,o,a,c){return t=gL(n,r,!0,t,s,i,o,a,c),t.context=Yq(null),n=t.current,r=Mi(),s=ef(n),i=Xu(r,s),i.callback=e??null,Zh(n,i,s),t.current.lanes=s,V_(t,s,r),Eo(t,r),t}function PN(t,e,n,r){var s=e.current,i=Mi(),o=ef(s);return n=Yq(n),e.context===null?e.context=n:e.pendingContext=n,e=Xu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zh(s,e,o),t!==null&&(Fc(t,s,o,i),ES(t,s,o)),o}function Yx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mL(t,e){V6(t,e),(t=t.alternate)&&V6(t,e)}function Iue(){return null}var Jq=typeof reportError=="function"?reportError:function(t){console.error(t)};function yL(t){this._internalRoot=t}ON.prototype.render=yL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ce(409));PN(t,e,null,null)};ON.prototype.unmount=yL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Tg(function(){PN(null,t,null,null)}),e[dd]=null}};function ON(t){this._internalRoot=t}ON.prototype.unstable_scheduleHydration=function(t){if(t){var e=NG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nh.length&&e!==0&&e<nh[n].priority;n++);nh.splice(n,0,t),n===0&&RG(t)}};function wL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function K6(){}function Nue(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Yx(o);i.call(l)}}var o=Qq(e,r,t,0,null,!1,!1,"",K6);return t._reactRootContainer=o,t[dd]=o.current,tC(t.nodeType===8?t.parentNode:t),Tg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Yx(c);a.call(l)}}var c=gL(t,0,!1,null,null,!1,!1,"",K6);return t._reactRootContainer=c,t[dd]=c.current,tC(t.nodeType===8?t.parentNode:t),Tg(function(){PN(e,c,n,r)}),c}function DN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Yx(o);a.call(c)}}PN(e,o,t,s)}else o=Nue(n,e,t,s,r);return Yx(o)}xG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pv(e.pendingLanes);n!==0&&(UM(e,n|1),Eo(e,Lr()),!(fn&6)&&(bw=Lr()+500,Df()))}break;case 13:Tg(function(){var r=hd(t,1);if(r!==null){var s=Mi();Fc(r,t,1,s)}}),mL(t,1)}};$M=function(t){if(t.tag===13){var e=hd(t,134217728);if(e!==null){var n=Mi();Fc(e,t,134217728,n)}mL(t,134217728)}};IG=function(t){if(t.tag===13){var e=ef(t),n=hd(t,e);if(n!==null){var r=Mi();Fc(n,t,e,r)}mL(t,e)}};NG=function(){return On};TG=function(t,e){var n=On;try{return On=t,e()}finally{On=n}};ik=function(t,e,n){switch(e){case"input":if(Z2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=AN(r);if(!s)throw Error(Ce(90));oG(r),Z2(r,s)}}}break;case"textarea":cG(t,n);break;case"select":e=n.value,e!=null&&Gy(t,!!n.multiple,e,!1)}};gG=dL;mG=Tg;var Tue={usingClientEntryPoint:!1,Events:[Y_,Sy,AN,fG,pG,dL]},tv={findFiberByHostInstance:Ep,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rue={bundleType:tv.bundleType,version:tv.version,rendererPackageName:tv.rendererPackageName,rendererConfig:tv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ed.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bG(t),t===null?null:t.stateNode},findFiberByHostInstance:tv.findFiberByHostInstance||Iue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pA.isDisabled&&pA.supportsFiber)try{vN=pA.inject(Rue),Bl=pA}catch{}}oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tue;oa.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wL(e))throw Error(Ce(200));return xue(t,e,null,n)};oa.createRoot=function(t,e){if(!wL(t))throw Error(Ce(299));var n=!1,r="",s=Jq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gL(t,1,!1,null,null,n,!1,r,s),t[dd]=e.current,tC(t.nodeType===8?t.parentNode:t),new yL(e)};oa.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ce(188)):(t=Object.keys(t).join(","),Error(Ce(268,t)));return t=bG(e),t=t===null?null:t.stateNode,t};oa.flushSync=function(t){return Tg(t)};oa.hydrate=function(t,e,n){if(!kN(e))throw Error(Ce(200));return DN(null,t,e,!0,n)};oa.hydrateRoot=function(t,e,n){if(!wL(t))throw Error(Ce(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Jq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Qq(e,null,t,1,n??null,s,!1,i,o),t[dd]=e.current,tC(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ON(e)};oa.render=function(t,e,n){if(!kN(e))throw Error(Ce(200));return DN(null,t,e,!1,n)};oa.unmountComponentAtNode=function(t){if(!kN(t))throw Error(Ce(40));return t._reactRootContainer?(Tg(function(){DN(null,null,t,!1,function(){t._reactRootContainer=null,t[dd]=null})}),!0):!1};oa.unstable_batchedUpdates=dL;oa.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kN(n))throw Error(Ce(200));if(t==null||t._reactInternals===void 0)throw Error(Ce(38));return DN(t,e,n,!1,r)};oa.version="18.3.1-next-f1338f8080-20240426";function Zq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zq)}catch(t){console.error(t)}}Zq(),ZH.exports=oa;var bL=ZH.exports,Y6=bL;G2.createRoot=Y6.createRoot,G2.hydrateRoot=Y6.hydrateRoot;const Pue="_verified_lvyh0_1",vL={verified:Pue},Oue=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:vL.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),kue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:vL.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Due=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:vL.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function Xq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Xq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nf(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Xq(t))&&(r&&(r+=" "),r+=e);return r}const Mue="_root_98iqw_1",Lue="_article_98iqw_21",Q6={root:Mue,article:Lue},EL=({className:t,children:e})=>m.jsx("div",{className:nf("react-tweet-theme",Q6.root,t),children:m.jsx("article",{className:Q6.article,children:e})}),eV=t=>m.jsx("img",{...t}),Uue="_header_nqq4j_1",$ue="_avatar_nqq4j_11",Bue="_avatarOverflow_nqq4j_16",Fue="_avatarSquare_nqq4j_23",jue="_avatarShadow_nqq4j_26",Wue="_author_nqq4j_37",zue="_authorLink_nqq4j_44",Hue="_authorVerified_nqq4j_53",Gue="_authorLinkText_nqq4j_56",que="_authorMeta_nqq4j_63",Vue="_authorFollow_nqq4j_66",Kue="_username_nqq4j_69",Yue="_follow_nqq4j_74",Que="_separator_nqq4j_82",Jue="_brand_nqq4j_86",Zue="_twitterIcon_nqq4j_90",Ts={header:Uue,avatar:$ue,avatarOverflow:Bue,avatarSquare:Fue,avatarShadow:jue,author:Wue,authorLink:zue,authorVerified:Hue,authorLinkText:Gue,authorMeta:que,authorFollow:Vue,username:Kue,follow:Yue,separator:Que,brand:Jue,twitterIcon:Zue},Xue="_verifiedOld_lcna5_1",ede="_verifiedBlue_lcna5_4",tde="_verifiedGovernment_lcna5_7",sP={verifiedOld:Xue,verifiedBlue:ede,verifiedGovernment:tde},tV=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(Oue,{}),s=sP.verifiedBlue;if(n)switch(t.is_blue_verified||(s=sP.verifiedOld),t.verified_type){case"Government":r=m.jsx(Due,{}),s=sP.verifiedGovernment;break;case"Business":r=m.jsx(kue,{}),s=null;break}return n?m.jsx("div",{className:nf(e,s),children:r}):null},nde=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:eV,{user:s}=t;return m.jsxs("div",{className:Ts.header,children:[m.jsxs("a",{href:t.url,className:Ts.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:nf(Ts.avatarOverflow,s.profile_image_shape==="Square"&&Ts.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Ts.avatarOverflow,children:m.jsx("div",{className:Ts.avatarShadow})})]}),m.jsxs("div",{className:Ts.author,children:[m.jsxs("a",{href:t.url,className:Ts.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Ts.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(tV,{user:s,className:Ts.authorVerified})]}),m.jsxs("div",{className:Ts.authorMeta,children:[m.jsx("a",{href:t.url,className:Ts.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Ts.authorFollow,children:[m.jsx("span",{className:Ts.separator,children:"·"}),m.jsx("a",{href:s.follow_url,className:Ts.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Ts.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Ts.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},rde="_root_1ec15_1",sde={root:rde},ide=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:sde.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),ode="_root_eihfa_1",ade={root:ode},cde=({href:t,children:e})=>m.jsx("a",{href:t,className:ade.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),lde="_root_1xq52_1",ude={root:lde},dde=({tweet:t})=>m.jsx("p",{className:ude.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(cde,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),J6=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,nV=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,hde=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,fde=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,pde=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,gde=t=>`https://x.com/hashtag/${t.text}`,mde=t=>`https://x.com/search?q=%24${t.text}`,yde=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,rV=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},wde=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},bde=t=>{const e=wde(t);return e.length>1?e[1]:e[0]},$k=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function Z6(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return nv(n,"hashtag",t.entities.hashtags),nv(n,"mention",t.entities.user_mentions),nv(n,"url",t.entities.urls),nv(n,"symbol",t.entities.symbols),t.entities.media&&nv(n,"media",t.entities.media),vde(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:gde(r),text:s});case"mention":return Object.assign(r,{href:nV(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:mde(r),text:s});default:return Object.assign(r,{text:s})}})}function nv(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function vde(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const Ede=t=>({...t,url:J6(t),user:{...t.user,url:nV(t),follow_url:pde(t)},like_url:hde(t),reply_url:fde(t),in_reply_to_url:t.in_reply_to_screen_name?yde(t):void 0,entities:Z6(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:J6(t.quoted_tweet),entities:Z6(t.quoted_tweet)}:void 0}),Cde="_root_g9tkv_1",_de="_rounded_g9tkv_6",Ade="_mediaWrapper_g9tkv_10",Sde="_grid2Columns_g9tkv_17",xde="_grid3_g9tkv_20",Ide="_grid2x2_g9tkv_23",Nde="_mediaContainer_g9tkv_26",Tde="_mediaLink_g9tkv_34",Rde="_skeleton_g9tkv_38",Pde="_image_g9tkv_43",Mo={root:Cde,rounded:_de,mediaWrapper:Ade,grid2Columns:Sde,grid3:xde,grid2x2:Ide,mediaContainer:Nde,mediaLink:Tde,skeleton:Rde,image:Pde},Ode="_anchor_fp31d_1",kde="_videoButton_fp31d_17",Dde="_videoButtonIcon_fp31d_35",Mde="_watchOnTwitter_fp31d_44",Lde="_viewReplies_fp31d_60",Dm={anchor:Ode,videoButton:kde,videoButtonIcon:Dde,watchOnTwitter:Mde,viewReplies:Lde},Ude=({tweet:t,media:e})=>{const[n,r]=D.useState(!0),[s,i]=D.useState(!1),[o,a]=D.useState(!1),c=bde(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:Mo.image,poster:rV(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Dm.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Dm.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Dm.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Dm.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:nf(Dm.anchor,Dm.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},$de=t=>m.jsx("img",{...t}),X6=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},sV=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:$de;return m.jsx("div",{className:nf(Mo.root,!n&&Mo.rounded),children:m.jsx("div",{className:nf(Mo.mediaWrapper,o>1&&Mo.grid2Columns,o===3&&Mo.grid3,o>4&&Mo.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(D.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:nf(Mo.mediaContainer,Mo.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Mo.skeleton,style:X6(l,o)}),m.jsx(c,{src:rV(l,"small"),alt:l.ext_alt_text||"Image",className:Mo.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:Mo.mediaContainer,children:[m.jsx("div",{className:Mo.skeleton,style:X6(l,o)}),m.jsx(Ude,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Bde={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Fde=new Intl.DateTimeFormat("en-US",Bde),jde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Wde=t=>{const e=jde(Fde.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n} · ${r}`},zde="_root_i24yn_1",Hde={root:zde},Gde=({tweet:t})=>{const e=new Date(t.created_at),n=Wde(e);return m.jsx("a",{className:Hde.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},qde="_info_19qcj_1",Vde="_infoLink_19qcj_10",Kde="_infoIcon_19qcj_30",iP={info:qde,infoLink:Vde,infoIcon:Kde},Yde=({tweet:t})=>m.jsxs("div",{className:iP.info,children:[m.jsx(Gde,{tweet:t}),m.jsx("a",{className:iP.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:iP.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Qde="_actions_n2anf_1",Jde="_like_n2anf_13",Zde="_reply_n2anf_14",Xde="_copy_n2anf_15",ehe="_likeIconWrapper_n2anf_27",the="_likeCount_n2anf_30",nhe="_replyIconWrapper_n2anf_35",rhe="_copyIconWrapper_n2anf_36",she="_likeIcon_n2anf_27",ihe="_replyIcon_n2anf_35",ohe="_copyIcon_n2anf_36",ahe="_replyText_n2anf_56",che="_copyText_n2anf_57",ao={actions:Qde,like:Jde,reply:Zde,copy:Xde,likeIconWrapper:ehe,likeCount:the,replyIconWrapper:nhe,copyIconWrapper:rhe,likeIcon:she,replyIcon:ihe,copyIcon:ohe,replyText:ahe,copyText:che},lhe=({tweet:t})=>{const[e,n]=D.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return D.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:ao.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:ao.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:ao.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:ao.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:ao.copyText,children:e?"Copied!":"Copy link"})]})},uhe=({tweet:t})=>{const e=$k(t.favorite_count);return m.jsxs("div",{className:ao.actions,children:[m.jsxs("a",{className:ao.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:ao.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:ao.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:ao.likeCount,children:e})]}),m.jsxs("a",{className:ao.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:ao.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:ao.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:ao.replyText,children:"Reply"})]}),m.jsx(lhe,{tweet:t})]})},dhe="_replies_1cutb_1",hhe="_link_1cutb_4",fhe="_text_1cutb_23",oP={replies:dhe,link:hhe,text:fhe},phe=({tweet:t})=>m.jsx("div",{className:oP.replies,children:m.jsx("a",{className:oP.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:oP.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${$k(t.conversation_count)} reply`:`Read ${$k(t.conversation_count)} replies`})})}),ghe="_root_q5799_1",mhe="_article_q5799_16",e8={root:ghe,article:mhe},yhe=({tweet:t,children:e})=>m.jsx("div",{className:e8.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:e8.article,children:e})}),whe="_header_r31i5_1",bhe="_avatar_r31i5_11",vhe="_avatarSquare_r31i5_17",Ehe="_author_r31i5_21",Che="_authorText_r31i5_26",_he="_username_r31i5_33",Hf={header:whe,avatar:bhe,avatarSquare:vhe,author:Ehe,authorText:Che,username:_he},Ahe=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:Hf.header,children:[m.jsx("a",{href:t.url,className:Hf.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:nf(Hf.avatarOverflow,e.profile_image_shape==="Square"&&Hf.avatarSquare),children:m.jsx(eV,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:Hf.author,children:[m.jsx("div",{className:Hf.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(tV,{user:e}),m.jsx("div",{className:Hf.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},She="_root_175ot_1",xhe={root:She},Ihe=({tweet:t})=>m.jsx("p",{className:xhe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),Nhe=({tweet:t})=>{var e;return m.jsxs(yhe,{tweet:t,children:[m.jsx(Ahe,{tweet:t}),m.jsx(Ihe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(sV,{quoted:!0,tweet:t}):null]})},The=({tweet:t,components:e})=>{var n;const r=D.useMemo(()=>Ede(t),[t]);return m.jsxs(EL,{children:[m.jsx(nde,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(ide,{tweet:r}),m.jsx(dde,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(sV,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(Nhe,{tweet:r.quoted_tweet}),m.jsx(Yde,{tweet:r}),m.jsx(uhe,{tweet:r}),m.jsx(phe,{tweet:r})]})},Rhe="_root_16yxa_1",Phe={root:Rhe},Ohe=t=>m.jsx(EL,{children:m.jsxs("div",{className:Phe.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found…"})]})}),khe="_skeleton_oi7hr_1",Dhe={skeleton:khe},gA=({style:t})=>m.jsx("span",{className:Dhe.skeleton,style:t}),Mhe="_root_17qqv_1",Lhe={root:Mhe},Uhe=()=>m.jsxs(EL,{className:Lhe.root,children:[m.jsx(gA,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(gA,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(gA,{style:{height:"2rem"}}),m.jsx(gA,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var iV={exports:{}},oV={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw=D;function $he(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Bhe=typeof Object.is=="function"?Object.is:$he,Fhe=vw.useState,jhe=vw.useEffect,Whe=vw.useLayoutEffect,zhe=vw.useDebugValue;function Hhe(t,e){var n=e(),r=Fhe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Whe(function(){s.value=n,s.getSnapshot=e,aP(s)&&i({inst:s})},[t,n,e]),jhe(function(){return aP(s)&&i({inst:s}),t(function(){aP(s)&&i({inst:s})})},[t]),zhe(n),n}function aP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Bhe(t,n)}catch{return!0}}function Ghe(t,e){return e()}var qhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ghe:Hhe;oV.useSyncExternalStore=vw.useSyncExternalStore!==void 0?vw.useSyncExternalStore:qhe;iV.exports=oV;var aV=iV.exports;const cV=0,lV=1,uV=2,t8=3;var n8=Object.prototype.hasOwnProperty;function Bk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Bk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(n8.call(t,n)&&++r&&!n8.call(e,n)||!(n in e)||!Bk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const zu=new WeakMap,Uh=()=>{},xi=Uh(),Fk=Object,hn=t=>t===xi,Ol=t=>typeof t=="function",vf=(t,e)=>({...t,...e}),dV=t=>Ol(t.then),cP={},mA={},CL="undefined",J_=typeof window!=CL,jk=typeof document!=CL,Vhe=J_&&"Deno"in window,Khe=()=>J_&&typeof window.requestAnimationFrame!=CL,hV=(t,e)=>{const n=zu.get(t);return[()=>!hn(e)&&t.get(e)||cP,r=>{if(!hn(e)){const s=t.get(e);e in mA||(mA[e]=s),n[5](e,vf(s,r),s||cP)}},n[6],()=>!hn(e)&&e in mA?mA[e]:!hn(e)&&t.get(e)||cP]};let Wk=!0;const Yhe=()=>Wk,[zk,Hk]=J_&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Uh,Uh],Qhe=()=>{const t=jk&&document.visibilityState;return hn(t)||t!=="hidden"},Jhe=t=>(jk&&document.addEventListener("visibilitychange",t),zk("focus",t),()=>{jk&&document.removeEventListener("visibilitychange",t),Hk("focus",t)}),Zhe=t=>{const e=()=>{Wk=!0,t()},n=()=>{Wk=!1};return zk("online",e),zk("offline",n),()=>{Hk("online",e),Hk("offline",n)}},Xhe={isOnline:Yhe,isVisible:Qhe},efe={initFocus:Jhe,initReconnect:Zhe},r8=!Xo.useId,uC=!J_||Vhe,tfe=t=>Khe()?window.requestAnimationFrame(t):setTimeout(t,1),lP=uC?D.useEffect:D.useLayoutEffect,uP=typeof navigator<"u"&&navigator.connection,s8=!uC&&uP&&(["slow-2g","2g"].includes(uP.effectiveType)||uP.saveData),yA=new WeakMap,nfe=t=>Fk.prototype.toString.call(t),dP=(t,e)=>t===`[object ${e}]`;let rfe=0;const Gk=t=>{const e=typeof t,n=nfe(t),r=dP(n,"Date"),s=dP(n,"RegExp"),i=dP(n,"Object");let o,a;if(Fk(t)===t&&!r&&!s){if(o=yA.get(t),o)return o;if(o=++rfe+"~",yA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Gk(t[a])+",";yA.set(t,o)}if(i){o="#";const c=Fk.keys(t).sort();for(;!hn(a=c.pop());)hn(t[a])||(o+=a+":"+Gk(t[a])+",");yA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},_L=t=>{if(Ol(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Gk(t):"",[t,e]};let sfe=0;const qk=()=>++sfe;async function fV(...t){const[e,n,r,s]=t,i=vf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Ol(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=_L(h);if(!f)return;const[p,g]=hV(e,f),[w,y,b,v]=zu.get(e),A=()=>{const B=w[f];return(Ol(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],B&&B[0])?B[0](uV).then(()=>p().data):p().data};if(t.length<3)return A();let _=r,I,x=!1;const N=qk();y[f]=[N,0];const S=!hn(c),O=p(),P=O.data,F=O._c,G=hn(F)?P:F;if(S&&(c=Ol(c)?c(G,P):c,g({data:c,_c:G})),Ol(_))try{_=_(G)}catch(B){I=B,x=!0}if(_&&dV(_))if(_=await _.catch(B=>{I=B,x=!0}),N!==y[f][0]){if(x)throw I;return _}else x&&S&&l(I)&&(o=!0,g({data:G,_c:xi}));if(o&&!x)if(Ol(o)){const B=o(_,G);g({data:B,error:xi,_c:xi})}else g({data:_,error:xi,_c:xi});if(y[f][1]=qk(),Promise.resolve(A()).then(()=>{g({_c:xi})}),x){if(u)throw I;return}return _}}const i8=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},ife=(t,e)=>{if(!zu.has(t)){const n=vf(efe,e),r=Object.create(null),s=fV.bind(xi,t);let i=Uh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!zu.has(t)&&(zu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!uC)){const u=n.initFocus(setTimeout.bind(xi,i8.bind(xi,r,cV))),d=n.initReconnect(setTimeout.bind(xi,i8.bind(xi,r,lV)));i=()=>{u&&u(),d&&d(),zu.delete(t)}}};return l(),[t,s,l,i]}return[t,zu.get(t)[4]]},ofe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!hn(i)&&o>i||setTimeout(r,a,s)},afe=Bk,[pV,cfe]=ife(new Map),lfe=vf({onLoadingSlow:Uh,onSuccess:Uh,onError:Uh,onErrorRetry:ofe,onDiscarded:Uh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:s8?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:s8?5e3:3e3,compare:afe,isPaused:()=>!1,cache:pV,mutate:cfe,fallback:{}},Xhe),ufe=(t,e)=>{const n=vf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=vf(s,o))}return n},dfe=D.createContext({}),hfe="$inf$",gV=J_&&window.__SWR_DEVTOOLS_USE__,ffe=gV?window.__SWR_DEVTOOLS_USE__:[],pfe=()=>{gV&&(window.__SWR_DEVTOOLS_REACT__=Xo)},gfe=t=>Ol(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],mfe=()=>vf(lfe,D.useContext(dfe)),yfe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=_L(e),[,,,a]=zu.get(pV);if(o.startsWith(hfe))return n(...i);const c=a[o];return hn(c)?n(...i):(delete a[o],c)}),r),wfe=ffe.concat(yfe),bfe=t=>function(...n){const r=mfe(),[s,i,o]=gfe(n),a=ufe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(wfe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},vfe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};pfe();const hP=Xo.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),fP={dedupe:!0},Efe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=zu.get(r),[y,b]=_L(t),v=D.useRef(!1),A=D.useRef(!1),_=D.useRef(y),I=D.useRef(e),x=D.useRef(n),N=()=>x.current,S=()=>N().isVisible()&&N().isOnline(),[O,P,F,G]=hV(r,y),B=D.useRef({}).current,T=hn(o)?hn(n.fallback)?xi:n.fallback[y]:o,R=(X,ce)=>{for(const Ee in B){const ge=Ee;if(ge==="data"){if(!s(X[ge],ce[ge])&&(!hn(X[ge])||!s(ae,ce[ge])))return!1}else if(ce[ge]!==X[ge])return!1}return!0},$=D.useMemo(()=>{const X=!y||!e?!1:hn(a)?N().isPaused()||i?!1:c!==!1:a,ce=St=>{const _t=vf(St);return delete _t._k,X?{isValidating:!0,isLoading:!0,..._t}:_t},Ee=O(),ge=G(),be=ce(Ee),Ze=Ee===ge?be:ce(ge);let st=be;return[()=>{const St=ce(O());return R(St,st)?(st.data=St.data,st.isLoading=St.isLoading,st.isValidating=St.isValidating,st.error=St.error,st):(st=St,St)},()=>Ze]},[r,y]),k=aV.useSyncExternalStore(D.useCallback(X=>F(y,(ce,Ee)=>{R(Ee,ce)||X()}),[r,y]),$[0],$[1]),M=!v.current,j=f[y]&&f[y].length>0,K=k.data,ne=hn(K)?T&&dV(T)?hP(T):T:K,le=k.error,oe=D.useRef(ne),ae=h?hn(K)?hn(oe.current)?ne:oe.current:K:ne,ue=j&&!hn(le)?!1:M&&!hn(a)?a:N().isPaused()?!1:i?hn(ne)?!1:c:hn(ne)||c,Xe=!!(y&&e&&M&&ue),xe=hn(k.isValidating)?Xe:k.isValidating,Me=hn(k.isLoading)?Xe:k.isLoading,rt=D.useCallback(async X=>{const ce=I.current;if(!y||!ce||A.current||N().isPaused())return!1;let Ee,ge,be=!0;const Ze=X||{},st=!g[y]||!Ze.dedupe,St=()=>r8?!A.current&&y===_.current&&v.current:y===_.current,_t={isValidating:!1,isLoading:!1},Kn=()=>{P(_t)},kt=()=>{const Ft=g[y];Ft&&Ft[1]===ge&&delete g[y]},jr={isValidating:!0};hn(O().data)&&(jr.isLoading=!0);try{if(st&&(P(jr),n.loadingTimeout&&hn(O().data)&&setTimeout(()=>{be&&St()&&N().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[ce(b),qk()]),[Ee,ge]=g[y],Ee=await Ee,st&&setTimeout(kt,n.dedupingInterval),!g[y]||g[y][1]!==ge)return st&&St()&&N().onDiscarded(y),!1;_t.error=xi;const Ft=p[y];if(!hn(Ft)&&(ge<=Ft[0]||ge<=Ft[1]||Ft[1]===0))return Kn(),st&&St()&&N().onDiscarded(y),!1;const zn=O().data;_t.data=s(zn,Ee)?zn:Ee,st&&St()&&N().onSuccess(Ee,y,n)}catch(Ft){kt();const zn=N(),{shouldRetryOnError:_r}=zn;zn.isPaused()||(_t.error=Ft,st&&St()&&(zn.onError(Ft,y,zn),(_r===!0||Ol(_r)&&_r(Ft))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&zn.onErrorRetry(Ft,y,zn,zi=>{const Zc=f[y];Zc&&Zc[0]&&Zc[0](t8,zi)},{retryCount:(Ze.retryCount||0)+1,dedupe:!0})))}return be=!1,Kn(),!0},[y,r]),Rt=D.useCallback((...X)=>fV(r,_.current,...X),[]);if(lP(()=>{I.current=e,x.current=n,hn(K)||(oe.current=K)}),lP(()=>{if(!y)return;const X=rt.bind(xi,fP);let ce=0;N().revalidateOnFocus&&(ce=Date.now()+N().focusThrottleInterval);const ge=vfe(y,f,(be,Ze={})=>{if(be==cV){const st=Date.now();N().revalidateOnFocus&&st>ce&&S()&&(ce=st+N().focusThrottleInterval,X())}else if(be==lV)N().revalidateOnReconnect&&S()&&X();else{if(be==uV)return rt();if(be==t8)return rt(Ze)}});return A.current=!1,_.current=y,v.current=!0,P({_k:b}),ue&&(g[y]||(hn(ne)||uC?X():tfe(X))),()=>{A.current=!0,ge()}},[y]),lP(()=>{let X;function ce(){const ge=Ol(l)?l(O().data):l;ge&&X!==-1&&(X=setTimeout(Ee,ge))}function Ee(){!O().error&&(u||N().isVisible())&&(d||N().isOnline())?rt(fP).then(ce):ce()}return ce(),()=>{X&&(clearTimeout(X),X=-1)}},[l,u,d,y]),D.useDebugValue(ae),i&&hn(ne)&&y){if(!r8&&uC)throw new Error("Fallback data is required when using Suspense in SSR.");I.current=e,x.current=n,A.current=!1;const X=w[y];if(!hn(X)){const ce=Rt(X);hP(ce)}if(hn(le)){const ce=rt(fP);hn(ae)||(ce.status="fulfilled",ce.value=!0),hP(ce)}else throw le}return{mutate:Rt,get data(){return B.data=!0,ae},get error(){return B.error=!0,le},get isValidating(){return B.isValidating=!0,xe},get isLoading(){return B.isLoading=!0,Me}}},o8=bfe(Efe);class Cfe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const _fe=o8.default||o8,Afe="https://react-tweet.vercel.app";async function Sfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new Cfe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const xfe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=_fe(()=>e||t?[e||t&&`${Afe}/api/tweet/${t}`,n]:null,Sfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},Ife=({id:t,apiUrl:e,fallback:n=m.jsx(Uhe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=xfe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Ohe;return m.jsx(l,{error:i?i(a):a})}return m.jsx(The,{tweet:o,components:r})};var MN={exports:{}},mV={},yV={exports:{}},Nfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Tfe=Nfe,Rfe=Tfe;function wV(){}function bV(){}bV.resetWarningCache=wV;var Pfe=function(){function t(r,s,i,o,a,c){if(c!==Rfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:bV,resetWarningCache:wV};return n.PropTypes=n,n};yV.exports=Pfe();var vV=yV.exports,Vk={exports:{}};function EV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=EV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function a8(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=EV(t))&&(r&&(r+=" "),r+=e);return r}Vk.exports=a8,Vk.exports.clsx=a8;var Ofe=Vk.exports,Dr={},nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.dontSetMe=Ufe;nu.findInArray=kfe;nu.int=Lfe;nu.isFunction=Dfe;nu.isNum=Mfe;function kfe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Dfe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Mfe(t){return typeof t=="number"&&!isNaN(t)}function Lfe(t){return parseInt(t,10)}function Ufe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var am={};Object.defineProperty(am,"__esModule",{value:!0});am.browserPrefixToKey=_V;am.browserPrefixToStyle=$fe;am.default=void 0;am.getPrefix=CV;const pP=["Moz","Webkit","O","ms"];function CV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<pP.length;s++)if(_V(t,pP[s])in e)return pP[s];return""}function _V(t,e){return e?`${e}${Bfe(t)}`:t}function $fe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Bfe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}am.default=CV();Object.defineProperty(Dr,"__esModule",{value:!0});Dr.addClassName=xV;Dr.addEvent=jfe;Dr.addUserSelectStyles=Zfe;Dr.createCSSTransform=Kfe;Dr.createSVGTransform=Yfe;Dr.getTouch=Qfe;Dr.getTouchIdentifier=Jfe;Dr.getTranslation=AL;Dr.innerHeight=Gfe;Dr.innerWidth=qfe;Dr.matchesSelector=SV;Dr.matchesSelectorAndParentsTo=Ffe;Dr.offsetXYFromParent=Vfe;Dr.outerHeight=zfe;Dr.outerWidth=Hfe;Dr.removeClassName=IV;Dr.removeEvent=Wfe;Dr.scheduleRemoveUserSelectStyles=Xfe;var ta=nu,c8=AV(am);function AV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(AV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let wA="";function SV(t,e){return wA||(wA=(0,ta.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,ta.isFunction)(t[n])})),(0,ta.isFunction)(t[wA])?t[wA](e):!1}function Ffe(t,e,n){let r=t;do{if(SV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function jfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Wfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function zfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ta.int)(n.borderTopWidth),e+=(0,ta.int)(n.borderBottomWidth),e}function Hfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,ta.int)(n.borderLeftWidth),e+=(0,ta.int)(n.borderRightWidth),e}function Gfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ta.int)(n.paddingTop),e-=(0,ta.int)(n.paddingBottom),e}function qfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,ta.int)(n.paddingLeft),e-=(0,ta.int)(n.paddingRight),e}function Vfe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Kfe(t,e){const n=AL(t,e,"px");return{[(0,c8.browserPrefixToKey)("transform",c8.default)]:n}}function Yfe(t,e){return AL(t,e,"")}function AL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Qfe(t,e){return t.targetTouches&&(0,ta.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,ta.findInArray)(t.changedTouches,n=>e===n.identifier)}function Jfe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Zfe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&xV(t.body,"react-draggable-transparent-selection")}function Xfe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{l8(t)}):l8(t)}function l8(t){if(t)try{if(t.body&&IV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function xV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function IV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var ru={};Object.defineProperty(ru,"__esModule",{value:!0});ru.canDragX=npe;ru.canDragY=rpe;ru.createCoreData=ipe;ru.createDraggableData=ope;ru.getBoundPosition=epe;ru.getControlPosition=spe;ru.snapToGrid=tpe;var Lo=nu,Oy=Dr;function epe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:ape(r);const s=SL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,Lo.int)(u.paddingLeft)+(0,Lo.int)(l.marginLeft),top:-s.offsetTop+(0,Lo.int)(u.paddingTop)+(0,Lo.int)(l.marginTop),right:(0,Oy.innerWidth)(c)-(0,Oy.outerWidth)(s)-s.offsetLeft+(0,Lo.int)(u.paddingRight)-(0,Lo.int)(l.marginRight),bottom:(0,Oy.innerHeight)(c)-(0,Oy.outerHeight)(s)-s.offsetTop+(0,Lo.int)(u.paddingBottom)-(0,Lo.int)(l.marginBottom)}}return(0,Lo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,Lo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,Lo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,Lo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function tpe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function npe(t){return t.props.axis==="both"||t.props.axis==="x"}function rpe(t){return t.props.axis==="both"||t.props.axis==="y"}function spe(t,e,n){const r=typeof e=="number"?(0,Oy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=SL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Oy.offsetXYFromParent)(r||t,i,n.props.scale)}function ipe(t,e,n){const r=!(0,Lo.isNum)(t.lastX),s=SL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function ope(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function ape(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function SL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var LN={},UN={};Object.defineProperty(UN,"__esModule",{value:!0});UN.default=cpe;function cpe(){}Object.defineProperty(LN,"__esModule",{value:!0});LN.default=void 0;var gP=NV(D),mi=xL(vV),lpe=xL(bL),ti=Dr,Id=ru,mP=nu,rv=xL(UN);function xL(t){return t&&t.__esModule?t:{default:t}}function NV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(NV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function bi(t,e,n){return(e=upe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function upe(t){var e=dpe(t,"string");return typeof e=="symbol"?e:e+""}function dpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const hc={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Nd=hc.mouse,$N=class extends gP.Component{constructor(){super(...arguments),bi(this,"dragging",!1),bi(this,"lastX",NaN),bi(this,"lastY",NaN),bi(this,"touchIdentifier",null),bi(this,"mounted",!1),bi(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ti.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ti.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ti.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Id.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Id.createCoreData)(this,o,a);(0,rv.default)("DraggableCore: handleDragStart: %j",c),(0,rv.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ti.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ti.addEvent)(r,Nd.move,this.handleDrag),(0,ti.addEvent)(r,Nd.stop,this.handleDragStop))}),bi(this,"handleDrag",e=>{const n=(0,Id.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Id.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Id.createCoreData)(this,r,s);if((0,rv.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),bi(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Id.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Id.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Id.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ti.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,rv.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,rv.default)("DraggableCore: Removing handlers"),(0,ti.removeEvent)(a.ownerDocument,Nd.move,this.handleDrag),(0,ti.removeEvent)(a.ownerDocument,Nd.stop,this.handleDragStop))}),bi(this,"onMouseDown",e=>(Nd=hc.mouse,this.handleDragStart(e))),bi(this,"onMouseUp",e=>(Nd=hc.mouse,this.handleDragStop(e))),bi(this,"onTouchStart",e=>(Nd=hc.touch,this.handleDragStart(e))),bi(this,"onTouchEnd",e=>(Nd=hc.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ti.addEvent)(e,hc.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ti.removeEvent)(n,hc.mouse.move,this.handleDrag),(0,ti.removeEvent)(n,hc.touch.move,this.handleDrag),(0,ti.removeEvent)(n,hc.mouse.stop,this.handleDragStop),(0,ti.removeEvent)(n,hc.touch.stop,this.handleDragStop),(0,ti.removeEvent)(e,hc.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ti.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:lpe.default.findDOMNode(this)}render(){return gP.cloneElement(gP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};LN.default=$N;bi($N,"displayName","DraggableCore");bi($N,"propTypes",{allowAnyClick:mi.default.bool,allowMobileScroll:mi.default.bool,children:mi.default.node.isRequired,disabled:mi.default.bool,enableUserSelectHack:mi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:mi.default.arrayOf(mi.default.number),handle:mi.default.string,cancel:mi.default.string,nodeRef:mi.default.object,onStart:mi.default.func,onDrag:mi.default.func,onStop:mi.default.func,onMouseDown:mi.default.func,scale:mi.default.number,className:mP.dontSetMe,style:mP.dontSetMe,transform:mP.dontSetMe});bi($N,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(D),n=u(vV),r=u(bL),s=Ofe,i=Dr,o=ru,a=nu,c=u(LN),l=u(UN);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(_,I){if(!I&&_&&_.__esModule)return _;var x,N,S={__proto__:null,default:_};if(_===null||typeof _!="object"&&typeof _!="function")return S;if(x=I?A:v){if(x.has(_))return x.get(_);x.set(_,S)}for(const O in _)O!=="default"&&{}.hasOwnProperty.call(_,O)&&((N=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(_,O))&&(N.get||N.set)?x(S,O,N):S[O]=_[O]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(y[A]=v[A])}return y},h.apply(null,arguments)}function f(y,b,v){return(b=p(b))in y?Object.defineProperty(y,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[b]=v,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var A=v.call(y,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:_}=v;return A&&(!_||A.x!==_.x||A.y!==_.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:_}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const _=(0,o.createDraggableData)(this,A),I={x:_.x,y:_.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=I;I.x+=this.state.slackX,I.y+=this.state.slackY;const[O,P]=(0,o.getBoundPosition)(this,I.x,I.y);I.x=O,I.y=P,I.slackX=this.state.slackX+(N-I.x),I.slackY=this.state.slackY+(S-I.y),_.x=I.x,_.y=I.y,_.deltaX=I.x-this.state.x,_.deltaY=I.y-this.state.y}if(this.props.onDrag(v,_)===!1)return!1;this.setState(I)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const I={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;I.x=N,I.y=S}this.setState(I)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:_,defaultClassName:I,defaultClassNameDragging:x,defaultClassNameDragged:N,position:S,positionOffset:O,scale:P,...F}=this.props;let G={},B=null;const R=!!!S||this.state.dragging,$=S||_,k={x:(0,o.canDragX)(this)&&R?this.state.x:$.x,y:(0,o.canDragY)(this)&&R?this.state.y:$.y};this.state.isElementSVG?B=(0,i.createSVGTransform)(k,O):G=(0,i.createCSSTransform)(k,O);const M=(0,s.clsx)(A.props.className||"",I,{[x]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},F,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...G},transform:B}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(mV);const{default:TV,DraggableCore:hpe}=mV;MN.exports=TV;MN.exports.default=TV;MN.exports.DraggableCore=hpe;var fpe=MN.exports;const Z_=nm(fpe);function vr(){return vr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vr.apply(null,arguments)}function RV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var PV={exports:{}},Dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=typeof Symbol=="function"&&Symbol.for,IL=Is?Symbol.for("react.element"):60103,NL=Is?Symbol.for("react.portal"):60106,BN=Is?Symbol.for("react.fragment"):60107,FN=Is?Symbol.for("react.strict_mode"):60108,jN=Is?Symbol.for("react.profiler"):60114,WN=Is?Symbol.for("react.provider"):60109,zN=Is?Symbol.for("react.context"):60110,TL=Is?Symbol.for("react.async_mode"):60111,HN=Is?Symbol.for("react.concurrent_mode"):60111,GN=Is?Symbol.for("react.forward_ref"):60112,qN=Is?Symbol.for("react.suspense"):60113,ppe=Is?Symbol.for("react.suspense_list"):60120,VN=Is?Symbol.for("react.memo"):60115,KN=Is?Symbol.for("react.lazy"):60116,gpe=Is?Symbol.for("react.block"):60121,mpe=Is?Symbol.for("react.fundamental"):60117,ype=Is?Symbol.for("react.responder"):60118,wpe=Is?Symbol.for("react.scope"):60119;function ca(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case IL:switch(t=t.type,t){case TL:case HN:case BN:case jN:case FN:case qN:return t;default:switch(t=t&&t.$$typeof,t){case zN:case GN:case KN:case VN:case WN:return t;default:return e}}case NL:return e}}}function OV(t){return ca(t)===HN}Dn.AsyncMode=TL;Dn.ConcurrentMode=HN;Dn.ContextConsumer=zN;Dn.ContextProvider=WN;Dn.Element=IL;Dn.ForwardRef=GN;Dn.Fragment=BN;Dn.Lazy=KN;Dn.Memo=VN;Dn.Portal=NL;Dn.Profiler=jN;Dn.StrictMode=FN;Dn.Suspense=qN;Dn.isAsyncMode=function(t){return OV(t)||ca(t)===TL};Dn.isConcurrentMode=OV;Dn.isContextConsumer=function(t){return ca(t)===zN};Dn.isContextProvider=function(t){return ca(t)===WN};Dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===IL};Dn.isForwardRef=function(t){return ca(t)===GN};Dn.isFragment=function(t){return ca(t)===BN};Dn.isLazy=function(t){return ca(t)===KN};Dn.isMemo=function(t){return ca(t)===VN};Dn.isPortal=function(t){return ca(t)===NL};Dn.isProfiler=function(t){return ca(t)===jN};Dn.isStrictMode=function(t){return ca(t)===FN};Dn.isSuspense=function(t){return ca(t)===qN};Dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===BN||t===HN||t===jN||t===FN||t===qN||t===ppe||typeof t=="object"&&t!==null&&(t.$$typeof===KN||t.$$typeof===VN||t.$$typeof===WN||t.$$typeof===zN||t.$$typeof===GN||t.$$typeof===mpe||t.$$typeof===ype||t.$$typeof===wpe||t.$$typeof===gpe)};Dn.typeOf=ca;PV.exports=Dn;var bpe=PV.exports,RL=bpe,vpe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Epe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Cpe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},PL={};PL[RL.ForwardRef]=Cpe;PL[RL.Memo]=kV;function u8(t){return RL.isMemo(t)?kV:PL[t.$$typeof]||vpe}var _pe=Object.defineProperty,Ape=Object.getOwnPropertyNames,d8=Object.getOwnPropertySymbols,Spe=Object.getOwnPropertyDescriptor,xpe=Object.getPrototypeOf,h8=Object.prototype;function DV(t,e,n){if(typeof e!="string"){if(h8){var r=xpe(e);r&&r!==h8&&DV(t,r,n)}var s=Ape(e);d8&&(s=s.concat(d8(e)));for(var i=u8(t),o=u8(e),a=0;a<s.length;++a){var c=s[a];if(!Epe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=Spe(e,c);try{_pe(t,c,l)}catch{}}}}return t}var Ipe=DV;const Npe=nm(Ipe);var MV={};Object.defineProperty(MV,"__esModule",{value:!0});MV.default=Tpe;function Tpe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function bA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qx(){return Qx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qx.apply(this,arguments)}function Rpe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Td(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ppe(t){var e=function(n){Rpe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,bA(Td(Td(i)),"cachedTheme",void 0),bA(Td(Td(i)),"lastOuterTheme",void 0),bA(Td(Td(i)),"lastTheme",void 0),bA(Td(Td(i)),"renderProvider",function(l){var u=i.props.children;return Xo.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?Qx({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Xo.createElement(t.Consumer,null,this.renderProvider):null},r}(Xo.Component);return e}function Ope(t){return function(n){var r=Xo.forwardRef(function(s,i){return Xo.createElement(t.Consumer,null,function(o){return Xo.createElement(n,Qx({theme:o,ref:i},s))})});return Npe(r,n),r}}function kpe(t){var e=function(){var r=Xo.useContext(t);return r};return e}function Dpe(t){return{context:t,withTheme:Ope(t),useTheme:kpe(t),ThemeProvider:Ppe(t)}}var LV=D.createContext();Dpe(LV);var f8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cb=(typeof window>"u"?"undefined":f8(window))==="object"&&(typeof document>"u"?"undefined":f8(document))==="object"&&document.nodeType===9;function dC(t){"@babel/helpers - typeof";return dC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dC(t)}function Mpe(t,e){if(dC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Lpe(t){var e=Mpe(t,"string");return dC(e)=="symbol"?e:e+""}function Upe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lpe(r.key),r)}}function OL(t,e,n){return e&&Upe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kk(t,e){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Kk(t,e)}function UV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Kk(t,e)}function p8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var $pe={}.constructor;function Yk(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Yk);if(t.constructor!==$pe)return t;var e={};for(var n in t)e[n]=Yk(t[n]);return e}function YN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Yk(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var g8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},fg=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=g8(e[r]," ");else n=g8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function lb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function sv(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function hC(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=lb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=sv(f+":"+u+fg(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=sv(g+":"+u+fg(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=sv(y+":"+u+fg(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),sv(""+t+u+"{"+r,o)+sv("}",o))}var Bpe=/([[\].#*$><+~=|^:(),"'`\s])/g,m8=typeof CSS<"u"&&CSS.escape,kL=function(t){return m8?m8(t):t.replace(Bpe,"\\$1")},$V=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),Qk=function(t){UV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(p8(p8(o)),l),o.selectorText="."+kL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=fg(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?vr({},s,{allowEmpty:!0}):s;return hC(this.selectorText,this.style,a)},OL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}($V),Fpe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Qk(e,n,r)}},yP={indent:1,children:!0},jpe=/@([\w-]+)/,Wpe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(jpe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new QN(vr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=yP);var s=lb(r),i=s.linebreak;if(r.indent==null&&(r.indent=yP.indent),r.children==null&&(r.children=yP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),zpe=/@container|@media|@supports\s+/,Hpe={onCreateRule:function(e,n,r){return zpe.test(e)?new Wpe(e,n,r):null}},wP={indent:1,children:!0},Gpe=/@keyframes\s+([\w-]+)/,Jk=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Gpe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:kL(c(this,a)),this.rules=new QN(vr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],vr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=wP);var s=lb(r),i=s.linebreak;if(r.indent==null&&(r.indent=wP.indent),r.children==null&&(r.children=wP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),qpe=/@keyframes\s+/,Vpe=/\$([\w-]+)/g,Zk=function(e,n){return typeof e=="string"?e.replace(Vpe,function(r,s){return s in n?n[s]:r}):e},y8=function(e,n,r){var s=e[n],i=Zk(s,r);i!==s&&(e[n]=i)},Kpe={onCreateRule:function(e,n,r){return typeof e=="string"&&qpe.test(e)?new Jk(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&y8(e,"animation-name",r.keyframes),"animation"in e&&y8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return Zk(e,s.keyframes);case"animation-name":return Zk(e,s.keyframes);default:return e}}},Ype=function(t){UV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?vr({},s,{allowEmpty:!0}):s;return hC(this.key,this.style,a)},e}($V),Qpe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Ype(e,n,r):null}},Jpe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=lb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=hC(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return hC(this.at,this.style,r)},t}(),Zpe=/@font-face/,Xpe={onCreateRule:function(e,n,r){return Zpe.test(e)?new Jpe(e,n,r):null}},ege=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return hC(this.key,this.style,r)},t}(),tge={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new ege(e,n,r):null}},nge=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),rge={"@charset":!0,"@import":!0,"@namespace":!0},sge={onCreateRule:function(e,n,r){return e in rge?new nge(e,n,r):null}},w8=[Fpe,Hpe,Kpe,Qpe,Xpe,tge,sge],ige={process:!0},b8={force:!0,process:!0},QN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=vr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+kL(this.classes[p]));var g=YN(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=vr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Qk?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Jk&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Qk?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Jk&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=ige);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,b8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,b8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=lb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),BV=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=vr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new QN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),oge=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),age=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=RV(s,["attached"]),a=lb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},OL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),gE=new age,Xk=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),eD="2f1acc6c3a606b082e5eef5e54414ffb";Xk[eD]==null&&(Xk[eD]=0);var v8=Xk[eD]++,E8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+v8+a+n:c+i.key+"-"+v8+(a?"-"+a:"")+"-"+n};return r},FV=function(e){var n;return function(){return n||(n=e()),n}},cge=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},lge=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=fg(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},uge=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},dge=function(e,n){return e.selectorText=n,e.selectorText===n},jV=FV(function(){return document.querySelector("head")});function hge(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function fge(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function pge(t){for(var e=jV(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function gge(t){var e=gE.registry;if(e.length>0){var n=hge(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=fge(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=pge(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function mge(t,e){var n=e.insertionPoint,r=gge(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}jV().appendChild(t)}var yge=FV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),C8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},_8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},wge=function(){var e=document.createElement("style");return e.textContent=`
`,e},bge=function(){function t(n){this.getPropertyValue=cge,this.setProperty=lge,this.removeProperty=uge,this.setSelector=dge,this.hasInsertedRules=!1,this.cssRules=[],n&&gE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||wge(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=yge();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){mge(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=_8(i,s);if(a=C8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=_8(i,s),d=C8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof BV&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),vge=0,Ege=function(){function t(n){this.id=vge++,this.version="10.10.0",this.plugins=new oge,this.options={id:{minify:!1},createGenerateId:E8,Renderer:cb?bge:null,plugins:[]},this.generateId=E8({minify:!1});for(var r=0;r<w8.length;r++)this.plugins.use(w8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=vr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=gE.index===0?0:gE.index+1);var a=new BV(r,vr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),gE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=vr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=YN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),WV=function(e){return new Ege(e)},A8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},OL(t,[{key:"size",get:function(){return this.length}}]),t}(),DL=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function zV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=zV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */WV();var HV=Date.now(),bP="fnValues"+HV,vP="fnStyle"+ ++HV,Cge=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=YN(n,{},s);return i[vP]=r,i},onProcessStyle:function(n,r){if(bP in r||vP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[bP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[vP];a&&(o.style=a(n)||{});var c=o[bP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function _ge(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var uy;typeof self<"u"?uy=self:typeof window<"u"?uy=window:typeof global<"u"?uy=global:typeof module<"u"?uy=module:uy=Function("return this")();var S8=_ge(uy),x8=function(e){return e&&e[S8]&&e===e[S8]()},Age=function(e){return{onCreateRule:function(r,s,i){if(!x8(s))return null;var o=s,a=YN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!x8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},Sge=/;\n/,xge=function(e){for(var n={},r=e.split(Sge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},Ige=function(e){typeof e.style=="string"&&(e.style=xge(e.style))};function Nge(){return{onProcessRule:Ige}}var rf="@global",tD="@global ",Tge=function(){function t(n,r,s){this.type="global",this.at=rf,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new QN(vr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),Rge=function(){function t(n,r,s){this.type="global",this.at=rf,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(tD.length);this.rule=s.jss.createRule(i,r,vr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Pge=/\s*,\s*/g;function GV(t,e){for(var n=t.split(Pge),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Oge(t,e){var n=t.options,r=t.style,s=r?r[rf]:null;if(s){for(var i in s)e.addRule(i,s[i],vr({},n,{selector:GV(i,t.selector)}));delete r[rf]}}function kge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,rf.length)!==rf)){var i=GV(s.substr(rf.length),t.selector);e.addRule(i,r[s],vr({},n,{selector:i})),delete r[s]}}function Dge(){function t(n,r,s){if(!n)return null;if(n===rf)return new Tge(n,r,s);if(n[0]==="@"&&n.substr(0,tD.length)===tD)return new Rge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Oge(n,r),kge(n,r))}return{onCreateRule:t,onProcessRule:e}}var NS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},EP="extendCurrValue"+Date.now();function Mge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Ap(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?vr({},t,{extend:l}):t.extend[c];Ap(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Ap(t.extend.extend,e,n,r);continue}if(NS(t.extend[d])){d in r||(r[d]={}),Ap(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function Lge(t,e,n,r){for(var s in t)if(s!=="extend"){if(NS(r[s])&&NS(t[s])){Ap(t[s],e,n,r[s]);continue}if(NS(t[s])){r[s]=Ap(t[s],e,n);continue}r[s]=t[s]}}function Ap(t,e,n,r){return r===void 0&&(r={}),Mge(t,e,n,r),Lge(t,e,n,r),r}function Uge(){function t(n,r,s){return"extend"in n?Ap(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[EP])s.prop(i,null);return s[EP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[EP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var I8=/\s*,\s*/g,$ge=/&/g,Bge=/\$([\w-]+)/g;function Fge(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(I8),a=s.split(I8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace($ge,u):u+" "+h}return c}function n(s,i,o){if(o)return vr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=vr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Bge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],vr({},l,{selector:p})):c.addRule(g,s[d],vr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function nD(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=nD(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return nD(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function jge(){function t(e,n){return"composes"in e&&(nD(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Wge=/[A-Z]/g,zge=/^ms-/,CP={};function Hge(t){return"-"+t.toLowerCase()}function qV(t){if(CP.hasOwnProperty(t))return CP[t];var e=t.replace(Wge,Hge);return CP[t]=zge.test(e)?"-"+e:e}function Jx(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:qV(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Jx):e.fallbacks=Jx(t.fallbacks)),e}function Gge(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Jx(n[r]);return n}return Jx(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=qV(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var de=DL&&CSS?CSS.px:"px",vA=DL&&CSS?CSS.ms:"ms",Mm=DL&&CSS?CSS.percent:"%",qge={"animation-delay":vA,"animation-duration":vA,"background-position":de,"background-position-x":de,"background-position-y":de,"background-size":de,border:de,"border-bottom":de,"border-bottom-left-radius":de,"border-bottom-right-radius":de,"border-bottom-width":de,"border-left":de,"border-left-width":de,"border-radius":de,"border-right":de,"border-right-width":de,"border-top":de,"border-top-left-radius":de,"border-top-right-radius":de,"border-top-width":de,"border-width":de,"border-block":de,"border-block-end":de,"border-block-end-width":de,"border-block-start":de,"border-block-start-width":de,"border-block-width":de,"border-inline":de,"border-inline-end":de,"border-inline-end-width":de,"border-inline-start":de,"border-inline-start-width":de,"border-inline-width":de,"border-start-start-radius":de,"border-start-end-radius":de,"border-end-start-radius":de,"border-end-end-radius":de,margin:de,"margin-bottom":de,"margin-left":de,"margin-right":de,"margin-top":de,"margin-block":de,"margin-block-end":de,"margin-block-start":de,"margin-inline":de,"margin-inline-end":de,"margin-inline-start":de,padding:de,"padding-bottom":de,"padding-left":de,"padding-right":de,"padding-top":de,"padding-block":de,"padding-block-end":de,"padding-block-start":de,"padding-inline":de,"padding-inline-end":de,"padding-inline-start":de,"mask-position-x":de,"mask-position-y":de,"mask-size":de,height:de,width:de,"min-height":de,"max-height":de,"min-width":de,"max-width":de,bottom:de,left:de,top:de,right:de,inset:de,"inset-block":de,"inset-block-end":de,"inset-block-start":de,"inset-inline":de,"inset-inline-end":de,"inset-inline-start":de,"box-shadow":de,"text-shadow":de,"column-gap":de,"column-rule":de,"column-rule-width":de,"column-width":de,"font-size":de,"font-size-delta":de,"letter-spacing":de,"text-decoration-thickness":de,"text-indent":de,"text-stroke":de,"text-stroke-width":de,"word-spacing":de,motion:de,"motion-offset":de,outline:de,"outline-offset":de,"outline-width":de,perspective:de,"perspective-origin-x":Mm,"perspective-origin-y":Mm,"transform-origin":Mm,"transform-origin-x":Mm,"transform-origin-y":Mm,"transform-origin-z":Mm,"transition-delay":vA,"transition-duration":vA,"vertical-align":de,"flex-basis":de,"shape-margin":de,size:de,gap:de,grid:de,"grid-gap":de,"row-gap":de,"grid-row-gap":de,"grid-column-gap":de,"grid-template-rows":de,"grid-template-columns":de,"grid-auto-rows":de,"grid-auto-columns":de,"box-shadow-x":de,"box-shadow-y":de,"box-shadow-blur":de,"box-shadow-spread":de,"font-line-height":de,"text-shadow-x":de,"text-shadow-y":de,"text-shadow-blur":de};function VV(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Vge=VV(qge);function mE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=mE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=mE(s,e[s],n);else for(var i in e)e[i]=mE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Vge[t];return o&&!(e===0&&o===de)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Kge(t){t===void 0&&(t={});var e=VV(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=mE(o,s[o],e);return s}function r(s,i){return mE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Yge={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Qge={position:!0,size:!0},EA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},_P={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function Jge(t,e,n){return t.map(function(r){return YV(r,e,n,!1,!0)})}function KV(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?KV(t[0],e,n,r):typeof t[0]=="object"?Jge(t,e,r):[t]}function YV(t,e,n,r,s){if(!(EA[e]||_P[e]))return[];var i=[];if(_P[e]&&(t=Zge(t,n,_P[e],r)),Object.keys(t).length)for(var o in EA[e]){if(t[o]){Array.isArray(t[o])?i.push(Qge[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}EA[e][o]!=null&&i.push(EA[e][o])}return!i.length||s?i:[i]}function Zge(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=fC((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function fC(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=fC(t.fallbacks[i],e,!0);continue}t[r]=KV(s,r,Yge,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=fC(t.fallbacks,e,!0);continue}t[r]=YV(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Xge(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=fC(e[r],n);return e}return fC(e,n)}return{onProcessStyle:t}}function rD(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function eme(t){if(Array.isArray(t))return rD(t)}function tme(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nme(t,e){if(t){if(typeof t=="string")return rD(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rD(t,e):void 0}}function rme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sme(t){return eme(t)||tme(t)||nme(t)||rme()}var kv="",sD="",QV="",JV="",ime=cb&&"ontouchstart"in document.documentElement;if(cb){var AP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},ome=document.createElement("p"),SP=ome.style,ame="Transform";for(var xP in AP)if(xP+ame in SP){kv=xP,sD=AP[xP];break}kv==="Webkit"&&"msHyphens"in SP&&(kv="ms",sD=AP.ms,JV="edge"),kv==="Webkit"&&"-apple-trailing-word"in SP&&(QV="apple")}var $t={js:kv,css:sD,vendor:QV,browser:JV,isTouch:ime};function cme(t){return t[1]==="-"||$t.js==="ms"?t:"@"+$t.css+"keyframes"+t.substr(10)}var lme={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:$t.js==="ms"?"-webkit-"+e:$t.css+e}},ume={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:$t.js==="Webkit"?$t.css+"print-"+e:e}},dme=/[-\s]+(.)?/g;function hme(t,e){return e?e.toUpperCase():""}function ML(t){return t.replace(dme,hme)}function Ef(t){return ML("-"+t)}var fme={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if($t.js==="Webkit"){var r="mask-image";if(ML(r)in n)return e;if($t.js+Ef(r)in n)return $t.css+e}return e}},pme={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:$t.vendor==="apple"&&!$t.isTouch?$t.css+e:e}},gme={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:$t.css+e}},mme={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:$t.css+e}},yme={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:$t.js==="Webkit"||$t.js==="ms"&&$t.browser!=="edge"?$t.css+e:e}},wme={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:$t.js==="Moz"||$t.js==="ms"||$t.vendor==="apple"?$t.css+e:e}},bme={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if($t.js==="Webkit"){var r="WebkitColumn"+Ef(e);return r in n?$t.css+"column-"+e:!1}if($t.js==="Moz"){var s="page"+Ef(e);return s in n?"page-"+e:!1}return!1}},vme={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if($t.js==="Moz")return e;var r=e.replace("-inline","");return $t.js+Ef(r)in n?$t.css+r:!1}},Eme={supportedProperty:function(e,n){return ML(e)in n?e:!1}},Cme={supportedProperty:function(e,n){var r=Ef(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:$t.js+r in n?$t.css+e:$t.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},_me={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:$t.js==="ms"?""+$t.css+e:e}},Ame={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:$t.js==="ms"?$t.css+"scroll-chaining":e}},Sme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},xme={supportedProperty:function(e,n){var r=Sme[e];return r&&$t.js+Ef(r)in n?$t.css+r:!1}},ZV={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Ime=Object.keys(ZV),Nme=function(e){return $t.css+e},Tme={supportedProperty:function(e,n,r){var s=r.multiple;if(Ime.indexOf(e)>-1){var i=ZV[e];if(!Array.isArray(i))return $t.js+Ef(i)in n?$t.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!($t.js+Ef(i[0])in n))return!1;return i.map(Nme)}return!1}},XV=[lme,ume,fme,pme,gme,mme,yme,wme,bme,vme,Eme,Cme,_me,Ame,xme,Tme],N8=XV.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),Rme=XV.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,sme(e.noPrefill)),t},[]),Dv,up={};if(cb){Dv=document.createElement("p");var IP=window.getComputedStyle(document.documentElement,"");for(var NP in IP)isNaN(NP)||(up[IP[NP]]=IP[NP]);Rme.forEach(function(t){return delete up[t]})}function iD(t,e){if(e===void 0&&(e={}),!Dv)return t;if(up[t]!=null)return up[t];(t==="transition"||t==="transform")&&(e[t]=t in Dv.style);for(var n=0;n<N8.length&&(up[t]=N8[n](t,Dv.style,e),!up[t]);n++);try{Dv.style[t]=""}catch{return!1}return up[t]}var Lm={},Pme={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Ome=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,qd;function kme(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?iD(e):", "+iD(n);return r||e||n}cb&&(qd=document.createElement("p"));function T8(t,e){var n=e;if(!qd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Lm[r]!=null)return Lm[r];try{qd.style[t]=n}catch{return Lm[r]=!1,!1}if(Pme[t])n=n.replace(Ome,kme);else if(qd.style[t]===""&&(n=$t.css+n,n==="-ms-flex"&&(qd.style[t]="-ms-flexbox"),qd.style[t]=n,qd.style[t]===""))return Lm[r]=!1,!1;return qd.style[t]="",Lm[r]=n,Lm[r]}function Dme(){function t(s){if(s.type==="keyframes"){var i=s;i.at=cme(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=iD(i);c&&c!==i&&(a=!0);var l=!1,u=T8(c,fg(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return T8(i,fg(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Mme(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var Lme=function(e){return e===void 0&&(e={}),{plugins:[Cge(),Age(e.observable),Nge(),Dge(),Uge(),Fge(),jge(),Gge(),Kge(e.defaultUnit),Xge(),Dme(),Mme()]}},Ume=Number.MIN_SAFE_INTEGER||-1e9,$me=function(){return Ume++},Bme=D.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!cb}),R8=new Map,LL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new A8),r[n];var s=R8.get(n);return s||(s=new A8,R8.set(n,s)),s},P8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=LL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Fme=function(e){if(e.sheet){var n=LL(e.context,e.index);n.unmanage(e.theme)}},jme=WV(Lme()),eK=new WeakMap,tK=function(e){return eK.get(e)},Wme=function(e,n){eK.set(e,n)},zme=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Hme(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",vr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Gme=function(e){if(!e.context.disableStylesGeneration){var n=LL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||jme,i=zme(e),o=zV(i),a=s.createStyleSheet(i,Hme(e,o!==null));return Wme(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},qme=function(e,n){for(var r in n)e.deleteRule(n[r])},Vme=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Kme=function(e,n){var r=tK(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Yme=function(e,n){if(!n)return e.classes;var r=tK(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function O8(t){return t?D.useEffect:Xo.useInsertionEffect||D.useLayoutEffect}var TP={},Yc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?$me():s,o=r.theming,a=r.name,c=RV(r,["index","theming","name"]),l=o&&o.context||LV,u=function(f){return typeof e=="function"&&(f||D.useContext(l))||TP},d={};return function(f){var p=D.useRef(!0),g=D.useContext(Bme),w=u(f&&f.theme),y=D.useMemo(function(){var _=Gme({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return _&&g.isSSR&&P8({index:i,context:g,sheet:_,theme:w}),[_,_?Kme(_,f):null]},[g,w]),b=y[0],v=y[1];O8(g.isSSR)(function(){b&&v&&!p.current&&Vme(f,b,v)},[f]),O8(g.isSSR)(function(){return b&&P8({index:i,context:g,sheet:b,theme:w}),function(){b&&(Fme({index:i,context:g,sheet:b,theme:w}),v&&qme(b,v))}},[b]);var A=D.useMemo(function(){return b&&v?Yme(b,v):d},[b,v]);return D.useDebugValue(A),D.useDebugValue(w===TP?"No theme":w),D.useEffect(function(){p.current=!1}),A}};const Qme=Yc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function RP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Qme(),d=D.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(Z_,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const Jme=Yc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function va({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=Jme({isOpen:e}),u=D.useRef(null),d=()=>{r&&r(t)};return m.jsx(Z_,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const PP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Zme=80,Xme=80,eye=10,tye=10,nye=10,rye=10,sye=({onIconClick:t})=>{const e=PP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:nye+d*(Zme+eye),y:rye+u*(Xme+tye)},u++,u>=4&&(u=0,d++)}),l},[r,s]=D.useState(n()),[i,o]=D.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(RP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(va,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:PP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(RP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(va,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:PP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(RP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},iye=Yc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),oye=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=D.useState(!1),[o,a]=D.useState(new Date),c=iye({isOpen:s});D.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function nK(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function UL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function rK(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function $L(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function sK(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function iK(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,G,B,T,R,$,k,M,j,K,ne,le,oe;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(B=(G=u.content)==null?void 0:G.files)==null?void 0:B[0])==null?void 0:T.uri)||(($=(R=u.content)==null?void 0:R.metadata)==null?void 0:$.image)||"",image_url_shrunk:((j=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:j.uri)||((ne=(K=u.content)==null?void 0:K.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function aye(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,y,b,v,A,_,I,x,N,S,O,P,F,G,B,T,R,$,k,M,j,K,ne,le,oe,ae,ue;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(_=u.mint)==null?void 0:_.slice(0,8)}`,image_url:((N=(x=(I=u.content)==null?void 0:I.files)==null?void 0:x[0])==null?void 0:N.uri)||((O=(S=u.content)==null?void 0:S.metadata)==null?void 0:O.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:((F=(P=u.content)==null?void 0:P.metadata)==null?void 0:F.description)||"",image:((T=(B=(G=u.content)==null?void 0:G.files)==null?void 0:B[0])==null?void 0:T.uri)||(($=(R=u.content)==null?void 0:R.metadata)==null?void 0:$.image)||"",image_url_shrunk:((j=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:j.uri)||((ne=(K=u.content)==null?void 0:K.metadata)==null?void 0:ne.image)||"",animation_url:((oe=(le=u.content)==null?void 0:le.metadata)==null?void 0:oe.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ue=(ae=u.grouping)==null?void 0:ae.find(Xe=>Xe.group_key==="collection"))==null?void 0:ue.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const oK="2.32.0";let iv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${oK}`},pe=class oD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof oD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof oD&&n.cause.docsPath||n.docsPath,i=(a=iv.getDocsUrl)==null?void 0:a.call(iv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...iv.version?[`Version: ${iv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=oK}walk(e){return aK(this,e)}};function aK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?aK(t.cause,e):e?null:t}let cK=class extends pe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class cye extends pe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class lye extends pe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let uye=class extends pe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}},lK=class extends pe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},uK=class extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class k8 extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function ub(t,{dir:e,size:n=32}={}){return typeof t=="string"?sf(t,{dir:e,size:n}):dye(t,{dir:e,size:n})}function sf(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new uK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function dye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new uK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}function Vl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Pr(t){return Vl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}function jl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const hye=new TextEncoder;function db(t,e={}){return typeof t=="number"||typeof t=="bigint"?pye(t,e):typeof t=="boolean"?fye(t,e):Vl(t)?Ha(t,e):pg(t,e)}function fye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Ya(n,{size:e.size}),ub(n,{size:e.size})):n}const au={zero:48,nine:57,A:65,F:70,a:97,f:102};function D8(t){if(t>=au.zero&&t<=au.nine)return t-au.zero;if(t>=au.A&&t<=au.F)return t-(au.A-10);if(t>=au.a&&t<=au.f)return t-(au.a-10)}function Ha(t,e={}){let n=t;e.size&&(Ya(n,{size:e.size}),n=ub(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=D8(r.charCodeAt(a++)),l=D8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function pye(t,e){const n=tt(t,e);return Ha(n)}function pg(t,e={}){const n=hye.encode(t);return typeof e.size=="number"?(Ya(n,{size:e.size}),ub(n,{dir:"right",size:e.size})):n}function Ya(t,{size:e}){if(Pr(t)>e)throw new uye({givenSize:Pr(t),maxSize:e})}function sa(t,e={}){const{signed:n}=e;e.size&&Ya(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function gye(t,e={}){let n=t;if(e.size&&(Ya(n,{size:e.size}),n=jl(n)),jl(n)==="0x00")return!1;if(jl(n)==="0x01")return!0;throw new lye(n)}function Hc(t,e={}){return Number(sa(t,e))}function dK(t,e={}){let n=Ha(t);return e.size&&(Ya(n,{size:e.size}),n=jl(n,{dir:"right"})),new TextDecoder().decode(n)}const mye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ga(t,e={}){return typeof t=="number"||typeof t=="bigint"?tt(t,e):typeof t=="string"?Ew(t,e):typeof t=="boolean"?hK(t,e):ls(t,e)}function hK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ya(n,{size:e.size}),ub(n,{size:e.size})):n}function ls(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=mye[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Ya(r,{size:e.size}),ub(r,{dir:"right",size:e.size})):r}function tt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new cK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?ub(a,{size:r}):a}const yye=new TextEncoder;function Ew(t,e={}){const n=yye.encode(t);return ls(n,e)}async function wye(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:tt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function Gc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new Pye(t.type);return`${t.name}(${JN(t.inputs,{includeName:e})})`}function JN(t,{includeName:e=!1}={}){return t?t.map(n=>bye(n,{includeName:e})).join(e?", ":","):""}function bye(t,{includeName:e}){return t.type.startsWith("tuple")?`(${JN(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}class vye extends pe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class M8 extends pe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class fK extends pe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${JN(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class X_ extends pe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Eye extends pe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Cye extends pe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Pr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class _ye extends pe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Aye extends pe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class L8 extends pe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class pK extends pe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class Sye extends pe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class gK extends pe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class U8 extends pe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Cw extends pe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class mK extends pe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class xye extends pe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class Iye extends pe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Gc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Gc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Nye=class extends pe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class pC extends pe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${JN(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class ZN extends pe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Gc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class Tye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class Rye extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let yK=class extends pe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class Pye extends pe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}function qa(t){return typeof t[0]=="string"?hb(t):Oye(t)}function Oye(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function hb(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}let Cf=class extends pe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},XN=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const CA=BigInt(2**32-1),$8=BigInt(32);function kye(t,e=!1){return e?{h:Number(t&CA),l:Number(t>>$8&CA)}:{h:Number(t>>$8&CA)|0,l:Number(t&CA)|0}}function Dye(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=kye(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Mye=(t,e,n)=>t<<n|e>>>32-n,Lye=(t,e,n)=>e<<n|t>>>32-n,Uye=(t,e,n)=>e<<n-32|t>>>64-n,$ye=(t,e,n)=>t<<n-32|e>>>64-n,Um=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function BL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function gC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function qc(t,...e){if(!BL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Bye(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");gC(t.outputLen),gC(t.blockLen)}function _w(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function wK(t,e){qc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Fye(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Aw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function OP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function el(t,e){return t<<32-e|t>>>e}const jye=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Wye(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function zye(t){for(let e=0;e<t.length;e++)t[e]=Wye(t[e]);return t}const B8=jye?t=>t:zye,bK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Hye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function mC(t){if(qc(t),bK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=Hye[t[n]];return e}const cu={_0:48,_9:57,A:65,F:70,a:97,f:102};function F8(t){if(t>=cu._0&&t<=cu._9)return t-cu._0;if(t>=cu.A&&t<=cu.F)return t-(cu.A-10);if(t>=cu.a&&t<=cu.f)return t-(cu.a-10)}function FL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(bK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=F8(t.charCodeAt(i)),a=F8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Gye(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function e1(t){return typeof t=="string"&&(t=Gye(t)),qc(t),t}function Sp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];qc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let jL=class{};function vK(t){const e=r=>t().update(e1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function qye(t){const e=(r,s)=>t(s).update(e1(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function Vye(t=32){if(Um&&typeof Um.getRandomValues=="function")return Um.getRandomValues(new Uint8Array(t));if(Um&&typeof Um.randomBytes=="function")return Uint8Array.from(Um.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const Kye=BigInt(0),ov=BigInt(1),Yye=BigInt(2),Qye=BigInt(7),Jye=BigInt(256),Zye=BigInt(113),EK=[],CK=[],_K=[];for(let t=0,e=ov,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],EK.push(2*(5*r+n)),CK.push((t+1)*(t+2)/2%64);let s=Kye;for(let i=0;i<7;i++)e=(e<<ov^(e>>Qye)*Zye)%Jye,e&Yye&&(s^=ov<<(ov<<BigInt(i))-ov);_K.push(s)}const AK=Dye(_K,!0),Xye=AK[0],e0e=AK[1],j8=(t,e,n)=>n>32?Uye(t,e,n):Mye(t,e,n),W8=(t,e,n)=>n>32?$ye(t,e,n):Lye(t,e,n);function SK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=j8(l,u,1)^n[a],h=W8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=CK[o],c=j8(s,i,a),l=W8(s,i,a),u=EK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Xye[r],t[1]^=e0e[r]}Aw(n)}let WL=class xK extends jL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,gC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Fye(this.state)}clone(){return this._cloneInto()}keccak(){B8(this.state32),SK(this.state32,this.rounds),B8(this.state32),this.posOut=0,this.pos=0}update(e){_w(this),e=e1(e),qc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){_w(this,!1),qc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return gC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(wK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Aw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new xK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Mf=(t,e,n)=>vK(()=>new WL(e,t,n)),t0e=Mf(6,144,224/8),n0e=Mf(6,136,256/8),r0e=Mf(6,104,384/8),s0e=Mf(6,72,512/8),i0e=Mf(1,144,224/8),zL=Mf(1,136,256/8),o0e=Mf(1,104,384/8),a0e=Mf(1,72,512/8),IK=(t,e,n)=>qye((r={})=>new WL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),c0e=IK(31,168,128/8),l0e=IK(31,136,256/8),dVe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:WL,keccakP:SK,keccak_224:i0e,keccak_256:zL,keccak_384:o0e,keccak_512:a0e,sha3_224:t0e,sha3_256:n0e,sha3_384:r0e,sha3_512:s0e,shake128:c0e,shake256:l0e},Symbol.toStringTag,{value:"Module"}));function Ws(t,e){const n=e||"hex",r=zL(Vl(t,{strict:!1})?db(t):t);return n==="bytes"?r:Ga(r)}const kP=new XN(8192);function t1(t,e){if(kP.has(`${t}.${e}`))return kP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Ws(pg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return kP.set(`${t}.${e}`,i),i}function Yu(t,e){if(!Va(t,{strict:!1}))throw new Cf({address:t});return t1(t,e)}const u0e=/^0x[a-fA-F0-9]{40}$/,DP=new XN(8192);function Va(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(DP.has(r))return DP.get(r);const s=u0e.test(t)?t.toLowerCase()===t?!0:n?t1(t)===t:!0:!1;return DP.set(r,s),s}function Sw(t,e,n,{strict:r}={}){return Vl(t,{strict:!1})?Zx(t,e,n,{strict:r}):RK(t,e,n,{strict:r})}function NK(t,e){if(typeof e=="number"&&e>0&&e>Pr(t)-1)throw new lK({offset:e,position:"start",size:Pr(t)})}function TK(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Pr(t)!==n-e)throw new lK({offset:n,position:"end",size:Pr(t)})}function RK(t,e,n,{strict:r}={}){NK(t,e);const s=t.slice(e,n);return r&&TK(s,e,n),s}function Zx(t,e,n,{strict:r}={}){NK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&TK(s,e,n),s}const d0e=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,PK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Lf(t,e){if(t.length!==e.length)throw new _ye({expectedLength:t.length,givenLength:e.length});const n=h0e({params:t,values:e}),r=GL(n);return r.length===0?"0x":r}function h0e({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(HL({param:t[r],value:e[r]}));return n}function HL({param:t,value:e}){const n=qL(t.type);if(n){const[r,s]=n;return p0e(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return b0e(e,{param:t});if(t.type==="address")return f0e(e);if(t.type==="bool")return m0e(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=PK.exec(t.type)??[];return y0e(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return g0e(e,{param:t});if(t.type==="string")return w0e(e);throw new Tye(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function GL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Pr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(tt(e+s,{size:32})),r.push(a),s+=Pr(a)):n.push(a)}return qa([...n,...r])}function f0e(t){if(!Va(t))throw new Cf({address:t});return{dynamic:!1,encoded:sf(t.toLowerCase())}}function p0e(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new yK(t);if(!r&&t.length!==e)throw new Eye({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=HL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=GL(i);if(r){const a=tt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?qa([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:qa(i.map(({encoded:o})=>o))}}function g0e(t,{param:e}){const[,n]=e.type.split("bytes"),r=Pr(t);if(!n){let s=t;return r%32!==0&&(s=sf(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:qa([sf(tt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Cye({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:sf(t,{dir:"right"})}}function m0e(t){if(typeof t!="boolean")throw new pe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:sf(hK(t))}}function y0e(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new cK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:tt(t,{size:32,signed:e})}}function w0e(t){const e=Ew(t),n=Math.ceil(Pr(e)/32),r=[];for(let s=0;s<n;s++)r.push(sf(Sw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:qa([sf(tt(Pr(e),{size:32})),...r])}}function b0e(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=HL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?GL(r):qa(r.map(({encoded:s})=>s))}}function qL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const MP="/docs/contract/encodeDeployData";function eT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new vye({docsPath:MP});if(!("inputs"in s))throw new M8({docsPath:MP});if(!s.inputs||s.inputs.length===0)throw new M8({docsPath:MP});const i=Lf(s.inputs,n);return hb([r,i])}function kr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}class cm extends pe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class TS extends pe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function v0e(t){const e=Ws(`0x${t.substring(4)}`).substring(26);return t1(`0x${e}`)}const E0e="modulepreload",C0e=function(t){return"/"+t},z8={},ci=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=C0e(c),c in z8)return;z8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":E0e,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function _0e({hash:t,signature:e}){const n=Vl(t)?t:Ga(t),{secp256k1:r}=await ci(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>BCe);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=H8(f);return new r.Signature(sa(l),sa(u)).addRecoveryBit(p)}const o=Vl(e)?e:Ga(e);if(Pr(o)!==65)throw new Error("invalid signature length");const a=Hc(`0x${o.slice(130)}`),c=H8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function H8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function OK({hash:t,signature:e}){return v0e(await _0e({hash:t,signature:e}))}class G8 extends pe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class kK extends pe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class A0e extends pe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const S0e={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new A0e({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new kK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new G8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new G8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function VL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(S0e);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function x0e(t,e="hex"){const n=DK(t),r=VL(new Uint8Array(n.length));return n.encode(r),e==="hex"?ls(r.bytes):r.bytes}function DK(t){return Array.isArray(t)?I0e(t.map(e=>DK(e))):N0e(t)}function I0e(t){const e=t.reduce((s,i)=>s+i.length,0),n=MK(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function N0e(t){const e=typeof t=="string"?Ha(t):t,n=MK(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function MK(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new pe("Length is too large.")}function T0e(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Ws(hb(["0x05",x0e([e?tt(e):"0x",s,n?tt(n):"0x"])]));return r==="bytes"?Ha(i):i}async function LK(t){const{authorization:e,signature:n}=t;return OK({hash:T0e(e),signature:n??e})}class aD extends pe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class R0e extends pe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id} – ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id} – ${e.name}`],name:"ChainMismatchError"})}}class P0e extends pe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class UK extends pe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}function $K({chain:t,currentChainId:e}){if(!t)throw new P0e;if(e!==t.id)throw new R0e({chain:t,currentChainId:e})}const O0e={gwei:9,wei:18},k0e={ether:-9,wei:9},D0e={ether:-18,gwei:-9};function lm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Co(t,e="wei"){return lm(t,k0e[e])}class xp extends pe{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(xp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(xp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Xx extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Co(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Xx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class cD extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Co(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(cD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class lD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(lD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class uD extends pe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(uD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class dD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(dD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class hD extends pe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(hD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class fD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(fD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class pD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(pD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class gD extends pe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(gD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class eI extends pe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Co(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Co(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(eI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class n1 extends pe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function KL(t,e="wei"){return lm(t,O0e[e])}function r1(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class M0e extends pe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class L0e extends pe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",r1(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class U0e extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=r1({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${KL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Co(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class BK extends pe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class FK extends pe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class $0e extends pe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const as=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n),B0e=t=>t,YL=t=>t;class yE extends pe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${YL(o)}`,e&&`Request body: ${as(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class QL extends pe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${YL(r)}`,`Request body: ${as(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class q8 extends pe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${YL(n)}`,`Request body: ${as(e)}`],name:"TimeoutError"})}}const F0e=-1;class Io extends pe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof QL?e.code:n??F0e}}class la extends Io{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class yC extends Io{constructor(e){super(e,{code:yC.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(yC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class wC extends Io{constructor(e){super(e,{code:wC.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(wC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class bC extends Io{constructor(e,{method:n}={}){super(e,{code:bC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(bC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class vC extends Io{constructor(e){super(e,{code:vC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(vC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Rg extends Io{constructor(e){super(e,{code:Rg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Rg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Pg extends Io{constructor(e){super(e,{code:Pg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Pg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class EC extends Io{constructor(e){super(e,{code:EC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(EC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class of extends Io{constructor(e){super(e,{code:of.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(of,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class xw extends Io{constructor(e){super(e,{code:xw.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(xw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ip extends Io{constructor(e,{method:n}={}){super(e,{code:Ip.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Iw extends Io{constructor(e){super(e,{code:Iw.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Iw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class CC extends Io{constructor(e){super(e,{code:CC.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(CC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Xr extends la{constructor(e){super(e,{code:Xr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Xr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class _C extends la{constructor(e){super(e,{code:_C.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(_C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class AC extends la{constructor(e,{method:n}={}){super(e,{code:AC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(AC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class SC extends la{constructor(e){super(e,{code:SC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(SC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class xC extends la{constructor(e){super(e,{code:xC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(xC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Kl extends la{constructor(e){super(e,{code:Kl.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Kl,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Nw extends la{constructor(e){super(e,{code:Nw.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Nw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class IC extends la{constructor(e){super(e,{code:IC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(IC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class NC extends la{constructor(e){super(e,{code:NC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(NC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class TC extends la{constructor(e){super(e,{code:TC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(TC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class RC extends la{constructor(e){super(e,{code:RC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(RC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class PC extends la{constructor(e){super(e,{code:PC.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(PC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Tw extends la{constructor(e){super(e,{code:Tw.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Tw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class j0e extends Io{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}function tT(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof pe?t.walk(s=>(s==null?void 0:s.code)===xp.code):t;return r instanceof pe?new xp({cause:t,message:r.details}):xp.nodeMessage.test(n)?new xp({cause:t,message:t.details}):Xx.nodeMessage.test(n)?new Xx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):cD.nodeMessage.test(n)?new cD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):lD.nodeMessage.test(n)?new lD({cause:t,nonce:e==null?void 0:e.nonce}):uD.nodeMessage.test(n)?new uD({cause:t,nonce:e==null?void 0:e.nonce}):dD.nodeMessage.test(n)?new dD({cause:t,nonce:e==null?void 0:e.nonce}):hD.nodeMessage.test(n)?new hD({cause:t}):fD.nodeMessage.test(n)?new fD({cause:t,gas:e==null?void 0:e.gas}):pD.nodeMessage.test(n)?new pD({cause:t,gas:e==null?void 0:e.gas}):gD.nodeMessage.test(n)?new gD({cause:t}):eI.nodeMessage.test(n)?new eI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new n1({cause:t})}function jK(t,{docsPath:e,...n}){const r=(()=>{const s=tT(t,n);return s instanceof n1?t:s})();return new U0e(r,{docsPath:e,...n})}function nT(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const W0e={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function fb(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=z0e(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>ls(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=tt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=tt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=tt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=tt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=tt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=tt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=W0e[t.type]),typeof t.value<"u"&&(e.value=tt(t.value)),e}function z0e(t){return t.map(e=>({address:e.address,r:e.r?tt(BigInt(e.r)):e.r,s:e.s?tt(BigInt(e.s)):e.s,chainId:tt(e.chainId),nonce:tt(e.nonce),...typeof e.yParity<"u"?{yParity:tt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:tt(e.v)}:{}}))}function dt(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const H0e=2n**256n-1n;function um(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?kr(e):void 0;if(o&&!Va(o.address))throw new Cf({address:o.address});if(i&&!Va(i))throw new Cf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new M0e;if(r&&r>H0e)throw new Xx({maxFeePerGas:r});if(s&&r&&s>r)throw new eI({maxFeePerGas:r,maxPriorityFeePerGas:s})}async function pb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Hc(e)}class G0e extends pe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class JL extends pe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class q0e extends pe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Co(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class WK extends pe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const zK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function HK(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Hc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Hc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?zK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=V0e(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function V0e(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function GK(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:HK(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Ul(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?tt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new WK({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||GK)(c)}async function ZL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function K0e(t,e){return qK(t,e)}async function qK(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await dt(t,Ul,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return sa(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):dt(t,Ul,"getBlock")({}),dt(t,ZL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new JL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Y0e(t,e){return mD(t,e)}async function mD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new G0e;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await dt(t,Ul,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new JL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await qK(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await dt(t,ZL,"getGasPrice")({}))}}class Q0e extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=r1({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${KL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Co(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}function J0e(t,{docsPath:e,...n}){const r=(()=>{const s=tT(t,n);return s instanceof n1?t:s})();return new Q0e(r,{docsPath:e,...n})}class Z0e extends pe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class X0e extends pe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function V8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function ewe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=V8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=V8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function K8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new k8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new k8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function twe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=tt(e)),n!==void 0&&(o.nonce=tt(n)),r!==void 0&&(o.state=K8(r)),s!==void 0){if(o.state)throw new X0e;o.stateDiff=K8(s)}return o}function XL(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Va(n,{strict:!1}))throw new Cf({address:n});if(e[n])throw new Z0e({address:n});e[n]=twe(r)}return e}async function eU(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?tt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function rT(t,e){var s,i,o;const{account:n=t.account}=e,r=n?kr(n):void 0;try{let B=function(R){const{block:$,request:k,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[k,$??"latest",M]:$?[k,$]:[k]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:_,...I}=await s1(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?tt(d):void 0)||h,S=XL(_),O=await(async()=>{if(I.to)return I.to;if(c&&c.length>0)return await LK({authorization:c[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`")})})();um(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(P||fb)({...nT(I,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O,value:A});let T=BigInt(await B({block:N,request:G,rpcStateOverride:S}));if(c){const R=await eU(t,{address:G.from}),$=await Promise.all(c.map(async k=>{const{address:M}=k,j=await B({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:tt(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));T+=$.reduce((k,M)=>k+M,0n)}return T}catch(a){throw J0e(a,{...e,account:r,chain:t.chain})}}async function tU(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?tt(r):n]},{dedupe:!!r});return Hc(s)}function VK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ha(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>ls(i))}function KK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ha(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ha(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>ls(o))}function nwe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function rwe(t,e,n){return t&e^~t&n}function swe(t,e,n){return t&e^t&n^e&n}class iwe extends jL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=OP(this.buffer)}update(e){_w(this),e=e1(e),qc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=OP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){_w(this),wK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,Aw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;nwe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=OP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Rd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),owe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pd=new Uint32Array(64);let awe=class extends iwe{constructor(e=32){super(64,e,8,!1),this.A=Rd[0]|0,this.B=Rd[1]|0,this.C=Rd[2]|0,this.D=Rd[3]|0,this.E=Rd[4]|0,this.F=Rd[5]|0,this.G=Rd[6]|0,this.H=Rd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Pd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Pd[d-15],f=Pd[d-2],p=el(h,7)^el(h,18)^h>>>3,g=el(f,17)^el(f,19)^f>>>10;Pd[d]=g+Pd[d-7]+p+Pd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=el(a,6)^el(a,11)^el(a,25),f=u+h+rwe(a,c,l)+owe[d]+Pd[d]|0,g=(el(r,2)^el(r,13)^el(r,22))+swe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Aw(Pd)}destroy(){this.set(0,0,0,0,0,0,0,0),Aw(this.buffer)}};const YK=vK(()=>new awe),cwe=YK;function lwe(t,e){return cwe(Vl(t,{strict:!1})?db(t):t)}function uwe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=lwe(e);return s.set([n],0),r==="bytes"?s:ls(s)}function dwe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(uwe({commitment:i,to:r,version:n}));return s}const Y8=6,QK=32,nU=4096,JK=QK*nU,Q8=JK*Y8-1-1*nU*Y8;class hwe extends pe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class fwe extends pe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function pwe(t){const e=typeof t.data=="string"?Ha(t.data):t.data,n=Pr(e);if(!n)throw new fwe;if(n>Q8)throw new hwe({maxSize:Q8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=VL(new Uint8Array(JK));let a=0;for(;a<nU;){const c=e.slice(i,i+(QK-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>ls(o.bytes))}function gwe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??pwe({data:e}),i=t.commitments??VK({blobs:s,kzg:n,to:r}),o=t.proofs??KK({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function mwe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new L0e({transaction:t})}const ZK=["blobVersionedHashes","chainId","fees","gas","nonce","type"],J8=new Map;async function s1(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=ZK,type:u}=e,d=n&&kr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await dt(t,Ul,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await dt(t,pb,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await dt(t,tU,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=VK({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=dwe({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=KK({blobs:r,commitments:y,kzg:o}),v=gwe({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=mwe(h)}catch{let y=J8.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",J8.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await mD(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new q0e({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new JL;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await mD(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await dt(t,rT,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),um(h),delete h.parameters,h}async function rU(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const LP=new XN(128);async function i1(t,e){var b,v,A,_;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new cm({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?kr(n):null;try{um(e);const I=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await LK({authorization:i[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let x;r!==null&&(x=await dt(t,pb,"getChainId")({}),$K({currentChainId:x,chain:r}));const N=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,O=(N||fb)({...nT(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:I,type:p,value:g}),P=LP.get(t.uid),F=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:F,params:[O]},{retryCount:0})}catch(G){if(P===!1)throw G;const B=G;if(B.name==="InvalidInputRpcError"||B.name==="InvalidParamsRpcError"||B.name==="MethodNotFoundRpcError"||B.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[O]},{retryCount:0}).then(T=>(LP.set(t.uid,!0),T)).catch(T=>{const R=T;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(LP.set(t.uid,!1),B):R});throw B}}if((y==null?void 0:y.type)==="local"){const x=await dt(t,s1,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...ZK,"sidecars"],type:p,value:g,...w,to:I}),N=(_=r==null?void 0:r.serializers)==null?void 0:_.transaction,S=await y.signTransaction(x,{serializer:N});return await dt(t,rU,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new TS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new TS({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(I){throw I instanceof TS?I:jK(I,{...e,account:y,chain:e.chain||void 0})}}function ywe(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=eT({abi:n,args:r,bytecode:s});return i1(t,{...i,...i.authorizationList?{to:null}:{},data:o})}const yD=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],wD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],XK=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],eY=[...XK,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],wwe=[...XK,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Z8=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],X8=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],e4=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}];function bwe(t,e={}){typeof e.size<"u"&&Ya(t,{size:e.size});const n=ls(t,e);return sa(n,e)}function vwe(t,e={}){let n=t;if(typeof e.size<"u"&&(Ya(n,{size:e.size}),n=jl(n)),n.length>1||n[0]>1)throw new cye(n);return!!n[0]}function ed(t,e={}){typeof e.size<"u"&&Ya(t,{size:e.size});const n=ls(t,e);return Hc(n,e)}function Ewe(t,e={}){let n=t;return typeof e.size<"u"&&(Ya(n,{size:e.size}),n=jl(n,{dir:"right"})),new TextDecoder().decode(n)}function o1(t,e){const n=typeof e=="string"?Ha(e):e,r=VL(n);if(Pr(n)===0&&t.length>0)throw new X_;if(Pr(e)&&Pr(e)<32)throw new fK({data:typeof e=="string"?e:ls(e),params:t,size:Pr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=Jy(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function Jy(t,e,{staticPosition:n}){const r=qL(e.type);if(r){const[s,i]=r;return _we(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Iwe(t,e,{staticPosition:n});if(e.type==="address")return Cwe(t);if(e.type==="bool")return Awe(t);if(e.type.startsWith("bytes"))return Swe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return xwe(t,e);if(e.type==="string")return Nwe(t,{staticPosition:n});throw new Rye(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const t4=32,bD=32;function Cwe(t){const e=t.readBytes(32);return[t1(ls(RK(e,-20))),32]}function _we(t,e,{length:n,staticPosition:r}){if(!n){const o=ed(t.readBytes(bD)),a=r+o,c=a+t4;t.setPosition(a);const l=ed(t.readBytes(t4)),u=OC(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=Jy(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(OC(e)){const o=ed(t.readBytes(bD)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=Jy(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=Jy(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Awe(t){return[vwe(t.readBytes(32),{size:32}),32]}function Swe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=ed(t.readBytes(32));t.setPosition(n+o);const a=ed(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[ls(c),32]}return[ls(t.readBytes(Number.parseInt(s),32)),32]}function xwe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?bwe(s,{signed:n}):ed(s,{signed:n}),32]}function Iwe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(OC(e)){const o=ed(t.readBytes(bD)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=Jy(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=Jy(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Nwe(t,{staticPosition:e}){const n=ed(t.readBytes(32)),r=e+n;t.setPosition(r);const s=ed(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Ewe(jl(i));return t.setPosition(e+32),[o,32]}function OC(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(OC);const n=qL(t.type);return!!(n&&OC({...t,type:n[1]}))}const Twe=t=>Ws(db(t));function Rwe(t){return Twe(t)}const Pwe="1.0.8";let ua=class vD extends Error{constructor(e,n={}){var o;const r=n.cause instanceof vD?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof vD&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Pwe}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Cd(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const tY=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nY=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,rY=/^\(.+?\).*?$/,n4=/^tuple(?<array>(\[(\d*)\])*)$/;function ED(t){let e=t.type;if(n4.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=ED(i),s<n-1&&(e+=", ")}const r=Cd(n4,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,ED({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function av(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=ED(s),r!==n-1&&(e+=", ")}return e}function tI(t){var e;return t.type==="function"?`function ${t.name}(${av(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${av(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${av(t.inputs)})`:t.type==="error"?`error ${t.name}(${av(t.inputs)})`:t.type==="constructor"?`constructor(${av(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const sY=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Owe(t){return sY.test(t)}function kwe(t){return Cd(sY,t)}const iY=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Dwe(t){return iY.test(t)}function Mwe(t){return Cd(iY,t)}const oY=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Lwe(t){return oY.test(t)}function Uwe(t){return Cd(oY,t)}const aY=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function sU(t){return aY.test(t)}function $we(t){return Cd(aY,t)}const cY=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Bwe(t){return cY.test(t)}function Fwe(t){return Cd(cY,t)}const lY=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function jwe(t){return lY.test(t)}function Wwe(t){return Cd(lY,t)}const zwe=/^receive\(\) external payable$/;function Hwe(t){return zwe.test(t)}const Gwe=new Set(["indexed"]),CD=new Set(["calldata","memory","storage"]);class qwe extends ua{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Vwe extends ua{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Kwe extends ua{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Ywe extends ua{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Qwe extends ua{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Jwe extends ua{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Zwe extends ua{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Xwe extends ua{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class gb extends ua{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class ebe extends ua{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class tbe extends ua{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class nbe extends ua{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class rbe extends ua{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function sbe(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const UP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function _D(t,e={}){if(Lwe(t))return ibe(t,e);if(Dwe(t))return obe(t,e);if(Owe(t))return abe(t,e);if(Bwe(t))return cbe(t,e);if(jwe(t))return lbe(t);if(Hwe(t))return{type:"receive",stateMutability:"payable"};throw new ebe({signature:t})}function ibe(t,e={}){const n=Uwe(t);if(!n)throw new gb({signature:t,type:"function"});const r=Oc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Og(r[a],{modifiers:CD,structs:e,type:"function"}));const o=[];if(n.returns){const a=Oc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Og(a[l],{modifiers:CD,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function obe(t,e={}){const n=Mwe(t);if(!n)throw new gb({signature:t,type:"event"});const r=Oc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Og(r[o],{modifiers:Gwe,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function abe(t,e={}){const n=kwe(t);if(!n)throw new gb({signature:t,type:"error"});const r=Oc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Og(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function cbe(t,e={}){const n=Fwe(t);if(!n)throw new gb({signature:t,type:"constructor"});const r=Oc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Og(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function lbe(t){const e=Wwe(t);if(!e)throw new gb({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const ube=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,dbe=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,hbe=/^u?int$/;function Og(t,e){var d,h;const n=sbe(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(UP.has(n))return UP.get(n);const r=rY.test(t),s=Cd(r?dbe:ube,t);if(!s)throw new Ywe({param:t});if(s.name&&pbe(s.name))throw new Qwe({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Oc(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Og(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(hbe.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!uY(c))throw new Kwe({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new Jwe({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(CD.has(s.modifier)&&!gbe(c,!!s.array))throw new Zwe({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return UP.set(n,u),u}function Oc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Oc(a,[...e,n.trim()]):Oc(a,e,`${n}${o}`,r);case"(":return Oc(a,e,`${n}${o}`,r+1);case")":return Oc(a,e,`${n}${o}`,r-1);default:return Oc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new rbe({current:n,depth:r});return e.push(n.trim()),e}function uY(t){return t==="address"||t==="bool"||t==="function"||t==="string"||tY.test(t)||nY.test(t)}const fbe=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function pbe(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||tY.test(t)||nY.test(t)||fbe.test(t)}function gbe(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function dY(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!sU(a))continue;const c=$we(a);if(!c)throw new gb({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Og(p,{type:"struct"});u.push(g)}if(!u.length)throw new tbe({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=hY(c,e)}return r}const mbe=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function hY(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(rY.test(o.type))r.push(o);else{const c=Cd(mbe,o.type);if(!(c!=null&&c.type))throw new Xwe({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new nbe({type:u});r.push({...o,type:`tuple${l??""}`,components:hY(e[u]??[],e,new Set([...n,u]))})}else if(uY(u))r.push(o);else throw new Vwe({type:u})}}return r}function fY(t){const e=dY(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];sU(i)||n.push(_D(i,e))}return n}function r4(t){let e;if(typeof t=="string")e=_D(t);else{const n=dY(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!sU(i)){e=_D(i,n);break}}}if(!e)throw new qwe({signature:t});return e}function ybe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new pe("Unable to normalize signature.");return s}const wbe=t=>{const e=typeof t=="string"?t:tI(t);return ybe(e)};function pY(t){return Rwe(wbe(t))}const sT=pY,a1=t=>Sw(pY(t),0,4);function dm(t){const{abi:e,args:n=[],name:r}=t,s=Vl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?a1(a)===r:a.type==="event"?sT(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?AD(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=gY(a.inputs,o.inputs,n);if(l)throw new Iye({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function AD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Va(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>AD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>AD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function gY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return gY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Va(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Va(n[r],{strict:!1}):!1)return o}}const $P="/docs/contract/decodeFunctionResult";function hm(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=dm({abi:e,args:n,name:r});if(!a)throw new Cw(r,{docsPath:$P});i=a}if(i.type!=="function")throw new Cw(void 0,{docsPath:$P});if(!i.outputs)throw new mK(i.name,{docsPath:$P});const o=o1(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}const s4="/docs/contract/encodeFunctionData";function bbe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=dm({abi:e,args:n,name:r});if(!i)throw new Cw(r,{docsPath:s4});s=i}if(s.type!=="function")throw new Cw(void 0,{docsPath:s4});return{abi:[s],functionName:a1(Gc(s))}}function Qa(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:bbe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Lf(s.inputs,e??[]):void 0;return hb([i,o??"0x"])}function mb({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new aD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new aD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}const mY={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},yY={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},vbe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Ebe(t){const{abi:e,data:n}=t,r=Sw(n,0,4);if(r==="0x")throw new X_;const i=[...e||[],yY,vbe].find(o=>o.type==="error"&&r===a1(Gc(o)));if(!i)throw new pK(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?o1(i.inputs,Sw(n,4)):void 0,errorName:i.name}}function wY({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?as(e[i]):e[i]}`).join(", ")})`}class bY extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?kr(n):void 0;let g=r1({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${KL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Co(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Co(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Co(l)} gwei`,nonce:u});f&&(g+=`
${ewe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class vY extends pe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=dm({abi:n,args:r,name:o}),l=c?wY({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Gc(c,{includeName:!0}):void 0,d=r1({address:s&&B0e(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class SD extends pe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Ebe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=mY[f]}else{const f=u?Gc(u,{includeName:!0}):void 0,p=u&&h?wY({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof pK&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Cbe extends pe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class _be extends pe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class iT extends pe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}function iU(t,e){var r,s,i,o,a,c;if(!(t instanceof pe))return!1;const n=t.walk(l=>l instanceof SD);return n instanceof SD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===mY[50]):!1}function Abe(t){const{abi:e,data:n}=t,r=Sw(n,0,4),s=e.find(i=>i.type==="function"&&r===a1(Gc(i)));if(!s)throw new xye(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?o1(s.inputs,Sw(n,4)):void 0}}const BP="/docs/contract/encodeErrorResult";function i4(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=dm({abi:e,args:r,name:n});if(!c)throw new L8(n,{docsPath:BP});s=c}if(s.type!=="error")throw new L8(void 0,{docsPath:BP});const i=Gc(s),o=a1(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new Aye(s.name,{docsPath:BP});a=Lf(s.inputs,r)}return hb([o,a])}const FP="/docs/contract/encodeFunctionResult";function Sbe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=dm({abi:e,name:n});if(!o)throw new Cw(n,{docsPath:FP});s=o}if(s.type!=="function")throw new Cw(void 0,{docsPath:FP});if(!s.outputs)throw new mK(s.name,{docsPath:FP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new yK(r)})();return Lf(s.outputs,i)}const oU="x-batch-gateway:true";async function xbe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=Abe({abi:wD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(oU)?await xbe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=Ibe(c)}})),Sbe({abi:wD,functionName:"query",result:[s,i]})}function Ibe(t){return t.name==="HttpRequestError"&&t.status?i4({abi:wD,errorName:"HttpError",args:[t.status,t.shortMessage]}):i4({abi:[yY],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function EY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Vl(e)?e:null}function RS(t){let e=new Uint8Array(32).fill(0);if(!t)return ls(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=EY(n[r]),i=s?db(s):Ws(pg(n[r]),"bytes");e=Ws(qa([e,i]),"bytes")}return ls(e)}function Nbe(t){return`[${t.slice(2)}]`}function Tbe(t){const e=new Uint8Array(32).fill(0);return t?EY(t)||Ws(pg(t)):ls(e)}function oT(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(pg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=pg(s[i]);o.byteLength>255&&(o=pg(Nbe(Tbe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}const Rbe=3;function kg(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof iT?t:t instanceof pe?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof X_?new Cbe({functionName:i}):[Rbe,Rg.code].includes(c)&&(l||u||d||h)?new SD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof QL?u:h??d}):t;return new vY(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aU=BigInt(0),xD=BigInt(1);function nI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function _A(t){const e=t.toString(16);return e.length&1?"0"+e:e}function CY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?aU:BigInt("0x"+t)}function aT(t){return CY(mC(t))}function _Y(t){return qc(t),CY(mC(Uint8Array.from(t).reverse()))}function cU(t,e){return FL(t.toString(16).padStart(e*2,"0"))}function AY(t,e){return cU(t,e).reverse()}function Aa(t,e,n){let r;if(typeof e=="string")try{r=FL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(BL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const jP=t=>typeof t=="bigint"&&aU<=t;function Pbe(t,e,n){return jP(t)&&jP(e)&&jP(n)&&e<=t&&t<n}function Obe(t,e,n,r){if(!Pbe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function kbe(t){let e;for(e=0;t>aU;t>>=xD,e+=1);return e}const cT=t=>(xD<<BigInt(t))-xD;function Dbe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Sp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function lU(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function o4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Mbe="0.1.1";function Lbe(){return Mbe}let Fr=class ID extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof ID){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof ID&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Lbe()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return SY(this,e)}};function SY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?SY(t.cause,e):e?null:t}const Ube="#__bigint";function $be(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+Ube:s,n)}function Bbe(t,e){if(c4(t)>e)throw new Ybe({givenSize:c4(t),maxSize:e})}const lu={zero:48,nine:57,A:65,F:70,a:97,f:102};function a4(t){if(t>=lu.zero&&t<=lu.nine)return t-lu.zero;if(t>=lu.A&&t<=lu.F)return t-(lu.A-10);if(t>=lu.a&&t<=lu.f)return t-(lu.a-10)}function Fbe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Qbe({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function uU(t,e){if(Ka(t)>e)throw new tve({givenSize:Ka(t),maxSize:e})}function jbe(t,e){if(typeof e=="number"&&e>0&&e>Ka(t)-1)throw new RY({offset:e,position:"start",size:Ka(t)})}function Wbe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ka(t)!==n-e)throw new RY({offset:n,position:"end",size:Ka(t)})}function xY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new nve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const zbe=new TextEncoder;function Hbe(t){return t instanceof Uint8Array?t:typeof t=="string"?qbe(t):Gbe(t)}function Gbe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function qbe(t,e={}){const{size:n}=e;let r=t;n&&(uU(t,n),r=Mg(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=a4(s.charCodeAt(c++)),u=a4(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Fr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function Vbe(t,e={}){const{size:n}=e,r=zbe.encode(t);return typeof n=="number"?(Bbe(r,n),Kbe(r,n)):r}function Kbe(t,e){return Fbe(t,{dir:"right",size:e})}function c4(t){return t.length}let Ybe=class extends Fr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Qbe=class extends Fr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Jbe=new TextEncoder,Zbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Xbe(t,e={}){const{strict:n=!1}=e;if(!t)throw new l4(t);if(typeof t!="string")throw new l4(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new u4(t);if(!t.startsWith("0x"))throw new u4(t)}function Yl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function IY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(uU(n,e.size),Dg(n,e.size)):n}function NY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Zbe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(uU(r,e.size),Mg(r,e.size)):r}function Ii(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new TY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Dg(c,r):c}function dU(t,e={}){return NY(Jbe.encode(t),e)}function Dg(t,e){return xY(t,{dir:"left",size:e})}function Mg(t,e){return xY(t,{dir:"right",size:e})}function hU(t,e,n,r={}){const{strict:s}=r;jbe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Wbe(i,e,n),i}function Ka(t){return Math.ceil((t.length-2)/2)}function eve(t,e={}){const{strict:n=!1}=e;try{return Xbe(t,{strict:n}),!0}catch{return!1}}let TY=class extends Fr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class l4 extends Fr{constructor(e){super(`Value \`${typeof e=="object"?$be(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class u4 extends Fr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let tve=class extends Fr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class RY extends Fr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let nve=class extends Fr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function rve(t){return{address:t.address,amount:Ii(t.amount),index:Ii(t.index),validatorIndex:Ii(t.validatorIndex)}}function PY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Ii(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Ii(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Ii(t.gasLimit)},...typeof t.number=="bigint"&&{number:Ii(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Ii(t.prevRandao)},...typeof t.time=="bigint"&&{time:Ii(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(rve)}}}const sve="0x82ad56cb",OY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",ive="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",ove="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";function kY(t,{docsPath:e,...n}){const r=(()=>{const s=tT(t,n);return s instanceof n1?t:s})();return new bY(r,{docsPath:e,...n})}function fU(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const WP=new Map;function DY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>WP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>WP.get(e)||[],l=u=>WP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=fU();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function c1(t,e){var G,B,T,R;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:A,value:_,stateOverride:I,...x}=e,N=n?kr(n):void 0;if(u&&(h||f))throw new pe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new pe("Cannot provide both `code` & `to` as parameters.");const S=u&&d,O=h&&f&&A&&d,P=S||O,F=S?lve({code:u,data:d}):O?uve({data:d,factory:h,factoryData:f,to:A}):d;try{um(e);const k=(typeof i=="bigint"?tt(i):void 0)||o,M=l?PY(l):void 0,j=XL(I),K=(R=(T=(B=t.chain)==null?void 0:B.formatters)==null?void 0:T.transactionRequest)==null?void 0:R.format,le=(K||fb)({...nT(x,{format:K}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:F,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:A,value:_});if(s&&ave({request:le})&&!j&&!M)try{return await cve(t,{...le,blockNumber:i,blockTag:o})}catch(ue){if(!(ue instanceof UK)&&!(ue instanceof aD))throw ue}const oe=(()=>{const ue=[le,k];return j&&M?[...ue,j,M]:j?[...ue,j]:M?[...ue,{},M]:ue})(),ae=await t.request({method:"eth_call",params:oe});return ae==="0x"?{data:void 0}:{data:ae}}catch($){const k=dve($),{offchainLookup:M,offchainLookupSignature:j}=await ci(async()=>{const{offchainLookup:K,offchainLookupSignature:ne}=await import("./ccip-BdtIuUU4.js");return{offchainLookup:K,offchainLookupSignature:ne}},[]);if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===j&&A)return{data:await M(t,{data:k,to:A})};throw P&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new _be({factory:h}):kY($,{...e,account:N,chain:t.chain})}}function ave({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(sve)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function cve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new UK;l=mb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?tt(s):void 0)||i,{schedule:h}=DY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=Qa({abi:yD,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return hm({abi:yD,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new iT({data:f});return f==="0x"?{data:void 0}:{data:f}}function lve(t){const{code:e,data:n}=t;return eT({abi:fY(["constructor(bytes, bytes)"]),bytecode:OY,args:[e,n]})}function uve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return eT({abi:fY(["constructor(address, bytes, address, bytes)"]),bytecode:ive,args:[s,e,n,r]})}function dve(t){var n;if(!(t instanceof pe))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function Ql(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Qa({abi:n,args:s,functionName:i});try{const{data:c}=await dt(t,c1,"call")({...o,data:a,to:r});return hm({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw kg(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function hve(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return mb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Qa({abi:X8,functionName:"addr",...s!=null?{args:[RS(i),BigInt(s)]}:{args:[RS(i)]}}),h={address:l,abi:eY,functionName:"resolve",args:[Ga(oT(i)),d,o??[oU]],blockNumber:n,blockTag:r},p=await dt(t,Ql,"readContract")(h);if(p[0]==="0x")return null;const g=hm({abi:X8,args:s!=null?[RS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||jl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(iU(d,"resolve"))return null;throw d}}class fve extends pe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class cv extends pe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class pU extends pe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class pve extends pe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const gve=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,mve=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,yve=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,wve=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function bve(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function d4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function MY({uri:t,gatewayUrls:e}){const n=yve.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=d4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=d4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(gve),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||mve.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(wve,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new pU({uri:t})}function LY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new fve({data:t});return t.image||t.image_url||t.image_data}async function vve({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await gU({gatewayUrls:t,uri:LY(n)})}catch{throw new pU({uri:e})}}async function gU({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=MY({uri:e,gatewayUrls:t});if(r||await bve(n))return n;throw new pU({uri:e})}function Eve(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new cv({reason:"Only EIP-155 supported"});if(!o)throw new cv({reason:"Chain ID not found"});if(!c)throw new cv({reason:"Contract address not found"});if(!s)throw new cv({reason:"Token ID not found"});if(!a)throw new cv({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function Cve(t,{nft:e}){if(e.namespace==="erc721")return Ql(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return Ql(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new pve({namespace:e.namespace})}async function _ve(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?Ave(t,{gatewayUrls:e,record:n}):gU({uri:n,gatewayUrls:e})}async function Ave(t,{gatewayUrls:e,record:n}){const r=Eve(n),s=await Cve(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=MY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return gU({uri:LY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),vve({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function UY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return mb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:eY,functionName:"resolve",args:[Ga(oT(i)),Qa({abi:Z8,functionName:"text",args:[RS(i),s]}),o??[oU]],blockNumber:n,blockTag:r},f=await dt(t,Ql,"readContract")(d);if(f[0]==="0x")return null;const p=hm({abi:Z8,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(iU(d,"resolve"))return null;throw d}}async function Sve(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await dt(t,UY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await _ve(t,{record:c,gatewayUrls:r})}catch{return null}}async function $Y(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=mb({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:wwe,functionName:"reverse",args:[Ga(oT(c))],blockNumber:n,blockTag:r},u=dt(t,Ql,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(iU(l,"reverse"))return null;throw l}}async function xve(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return mb({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await dt(t,Ql,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ga(oT(s))],blockNumber:n,blockTag:r});return c}async function BY(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?kr(n):void 0;try{um(e);const A=(typeof r=="bigint"?tt(r):void 0)||s,_=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,x=(_||fb)({...nT(p,{format:_}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(v){throw kY(v,{...e,account:g,chain:t.chain})}}function lT(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function Ive(t){const e=lT(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}class Nve extends pe{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}const h4="/docs/contract/encodeEventTopics";function l1(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=dm({abi:e,name:n});if(!l)throw new U8(n,{docsPath:h4});s=l}if(s.type!=="event")throw new U8(void 0,{docsPath:h4});const i=Gc(s),o=sT(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>f4({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?f4({param:d,value:u[h]}):null))??[])}return[o,...a]}function f4({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Ws(db(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new Nve(t.type);return Lf([t],[e])}async function FY(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=lT(t,{method:"eth_newFilter"}),u=i?l1({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?tt(o):o,toBlock:typeof c=="bigint"?tt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}async function jY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=lT(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>l1({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?tt(i):i,toBlock:typeof a=="bigint"?tt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function WY(t){const e=lT(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function Tve(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Qa({abi:n,args:s,functionName:i});try{return await dt(t,rT,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?kr(a.account):void 0;throw kg(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}async function Rve(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}const Pve=new Map,Ove=new Map;function kve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Pve),r=e(t,Ove);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Dve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=kve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const Mve=t=>`blockNumber.${t}`;async function u1(t,{cacheTime:e=t.cacheTime}={}){const n=await Dve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:Mve(t.uid),cacheTime:e});return BigInt(n)}async function Lve(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?tt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Hc(i)}async function p4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?tt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}function uT(t,e){if(!Va(t,{strict:!1}))throw new Cf({address:t});if(!Va(e,{strict:!1}))throw new Cf({address:e});return t.toLowerCase()===e.toLowerCase()}const g4="/docs/contract/decodeEventLog";function mU(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new Sye({docsPath:g4});const c=e.find(g=>g.type==="event"&&o===sT(Gc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new gK(o,{docsPath:g4});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new ZN({abiItem:c,param:w});h[d?y:w.name||y]=Uve({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=o1(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof fK||g instanceof kK?new pC({abiItem:c,data:n,params:p,size:Pr(n)}):g}else if(i)throw new pC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Uve({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(o1([t],e)||[])[0]}function yU(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===sT(u));if(!c)return null;const l=mU({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!$ve({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof gK)return null;if(c instanceof pC||c instanceof ZN){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function $ve(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?uT(o,a):i.type==="string"||i.type==="bytes"?Ws(db(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function pd(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function wU(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>l1({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?tt(r):r,toBlock:typeof s=="bigint"?tt(s):s}]});const f=h.map(p=>pd(p));return u?yU({abi:u,args:a,logs:f,strict:l}):f}async function zY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?dm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return dt(t,wU,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}class Bve extends pe{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function Fve(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await dt(t,Ql,"readContract")({abi:jve,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new Bve({address:n}):o}}const jve=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function Wve(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function zve(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?tt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[tt(e),i||r,s]},{dedupe:!!i});return Wve(o)}async function dT(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>pd(i));return!("abi"in e)||!e.abi?s:yU({abi:e.abi,logs:s,strict:n})}async function Hve(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>pd(i));return e.abi?yU({abi:e.abi,logs:s,strict:n}):s}async function Gve(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?tt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function hT(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?tt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,tt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,tt(i)]},{dedupe:!!a}),!c)throw new BK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||HK)(c)}async function qve(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([dt(t,u1,"getBlockNumber")({}),e?dt(t,hT,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}const HY={"0x0":"reverted","0x1":"success"};function Vve(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>pd(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Hc(t.transactionIndex):null,status:t.status?HY[t.status]:null,type:t.type?zK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}async function ND(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new FK({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Vve)(n)}async function GY(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=mb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:_,functionName:I}=l[b];try{const x=Qa({abi:v,args:_,functionName:I});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const N=kg(x,{abi:v,address:A,args:_,docsPath:"/docs/contract/multicall",functionName:I,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>dt(t,Ql,"readContract")({abi:yD,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let _=0;_<h[b].length;_++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let _=0;_<A.length;_++){const{returnData:I,success:x}=A[_],{callData:N}=h[b][_],{abi:S,address:O,functionName:P,args:F}=l[w.length];try{if(N==="0x")throw new X_;if(!x)throw new iT({data:I});const G=hm({abi:S,args:F,data:I,functionName:P});w.push(r?{result:G,status:"success"}:G)}catch(G){const B=kg(G,{abi:S,address:O,args:F,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw B;w.push({error:B,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new pe("multicall results mismatch");return w}async function TD(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?PY(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?kr(y.account):void 0,v=y.abi?Qa(y):y.data,A={...y,data:y.dataSuffix?qa([v||"0x",y.dataSuffix]):v,from:y.from??(b==null?void 0:b.address)};return um(A),fb(A)}),g=h.stateOverrides?XL(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?tt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...GK(h),calls:h.calls.map((p,g)=>{var O,P;const{abi:w,args:y,functionName:b,to:v}=s[f].calls[g],A=((O=p.error)==null?void 0:O.data)??p.returnData,_=BigInt(p.gasUsed),I=(P=p.logs)==null?void 0:P.map(F=>pd(F)),x=p.status==="0x1"?"success":"failure",N=w&&x==="success"&&A!=="0x"?hm({abi:w,data:A,functionName:b}):null,S=(()=>{var G;if(x==="success")return;let F;if(((G=p.error)==null?void 0:G.data)==="0x"?F=new X_:p.error&&(F=new iT(p.error)),!!F)return kg(F,{abi:w??[],address:v??"0x",args:y,functionName:b??"<unknown>"})})();return{data:A,gasUsed:_,logs:I,status:x,...x==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=tT(l,{});throw u instanceof n1?l:u}}function qY(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=zL(Hbe(t));return n==="Bytes"?r:NY(r)}let Kve=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const Yve={checksum:new Kve(8192)},zP=Yve.checksum,Qve=/^0x[a-fA-F0-9]{40}$/;function fT(t,e={}){const{strict:n=!0}=e;if(!Qve.test(t))throw new m4({address:t,cause:new Zve});if(n){if(t.toLowerCase()===t)return;if(Jve(t)!==t)throw new m4({address:t,cause:new Xve})}}function Jve(t){if(zP.has(t))return zP.get(t);fT(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=qY(Vbe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return zP.set(t,s),s}function RD(t,e={}){const{strict:n=!0}=e??{};try{return fT(t,{strict:n}),!0}catch{return!1}}class m4 extends Fr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Zve extends Fr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Xve extends Fr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function PD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Fr("Unable to normalize signature.");return s}function OD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return RD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>OD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>OD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function VY(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return VY(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?RD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?RD(n[r],{strict:!1}):!1)return o}}function KY(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?r4(t):t;return{...r,...n?{hash:ky(r)}:{}}}function eEe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=eve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?YY(l)===hU(e,0,4):l.type==="event"?ky(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new kD({name:e});if(o.length===1)return{...o[0],...s?{hash:ky(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:ky(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?OD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=VY(l.inputs,a.inputs,r);if(d)throw new nEe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new kD({name:e});return{...c,...s?{hash:ky(c)}:{}}}function YY(t){return hU(ky(t),0,4)}function tEe(t){const e=typeof t=="string"?t:tI(t);return PD(e)}function ky(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:qY(dU(tEe(t)))}class nEe extends Fr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${PD(tI(e.abiItem))}\`, and`,`\`${n.type}\` in \`${PD(tI(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class kD extends Fr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const rEe=/^(.*)\[([0-9]*)\]$/,sEe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,QY=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function iEe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(bU({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function bU({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=fEe(r.type);if(s){const[i,o]=s;return aEe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return hEe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return oEe(n,{checksum:t});if(r.type==="bool")return lEe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=QY.exec(r.type)??[];return uEe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return cEe(n,{type:r.type});if(r.type==="string")return dEe(n);throw new eQ(r.type)}function vU(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ka(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(Ii(e+s,{size:32})),r.push(a),s+=Ka(a)):n.push(a)}return Yl(...n,...r)}function oEe(t,e){const{checksum:n=!1}=e;return fT(t,{strict:n}),{dynamic:!1,encoded:Dg(t.toLowerCase())}}function aEe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new gEe(t);if(!i&&t.length!==r)throw new pEe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=bU({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=vU(a);if(i){const l=Ii(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Yl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Yl(...a.map(({encoded:c})=>c))}}function cEe(t,{type:e}){const[,n]=e.split("bytes"),r=Ka(t);if(!n){let s=t;return r%32!==0&&(s=Mg(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Yl(Dg(Ii(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new ZY({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Mg(t)}}function lEe(t){if(typeof t!="boolean")throw new Fr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Dg(IY(t))}}function uEe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new TY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Ii(t,{size:32,signed:e})}}function dEe(t){const e=dU(t),n=Math.ceil(Ka(e)/32),r=[];for(let s=0;s<n;s++)r.push(Mg(hU(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Yl(Mg(Ii(Ka(e),{size:32})),...r)}}function hEe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=bU({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?vU(i):Yl(...i.map(({encoded:o})=>o))}}function fEe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function JY(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new XY({expectedLength:t.length,givenLength:e.length});const s=iEe({checksumAddress:r,parameters:t,values:e}),i=vU(s);return i.length===0?"0x":i}function DD(t,e){if(t.length!==e.length)throw new XY({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(DD.encode(s,i))}return Yl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return fT(c),Dg(c.toLowerCase(),s?32:0)}if(n==="string")return dU(r);if(n==="bytes")return r;if(n==="bool")return Dg(IY(r),s?32:1);const i=n.match(QY);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return Ii(r,{size:s?32:d,signed:l==="int"})}const o=n.match(sEe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new ZY({expectedSize:Number.parseInt(l),value:r});return Mg(r,s?32:0)}const a=n.match(rEe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Yl(...u)}throw new eQ(n)}t.encode=e})(DD||(DD={}));class pEe extends Fr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class ZY extends Fr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ka(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class XY extends Fr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class gEe extends Fr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class eQ extends Fr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function mEe(t,e){var s;const{bytecode:n,args:r}=e;return Yl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?JY(t.inputs,r):"0x")}function yEe(t){return KY(t)}function wEe(t,...e){const{overloads:n}=t,r=n?bEe([t,...n],t.name,{args:e[0]}):t,s=vEe(r),i=e.length>0?JY(r.inputs,e[0]):void 0;return i?Yl(s,i):s}function $m(t,e={}){return KY(t,e)}function bEe(t,e,n){const r=eEe(t,e,n);if(r.type!=="function")throw new kD({name:e,type:"function"});return r}function vEe(t){return YY(t)}const EEe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",tl="0x0000000000000000000000000000000000000000",AA=new XN(8192);function CEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(AA.get(n))return AA.get(n);const r=t().finally(()=>AA.delete(n));return AA.set(n,r),r}async function rI(t){return new Promise(e=>setTimeout(e,t))}function sI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await rI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function _Ee(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Ip(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Ip(new Error("method not supported"),{method:l});const u=s?Ew(`${c}.${as(n)}`):void 0;return CEe(()=>sI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case yC.code:throw new yC(f);case wC.code:throw new wC(f);case bC.code:throw new bC(f,{method:n.method});case vC.code:throw new vC(f);case Rg.code:throw new Rg(f);case Pg.code:throw new Pg(f);case EC.code:throw new EC(f);case of.code:throw new of(f);case xw.code:throw new xw(f);case Ip.code:throw new Ip(f,{method:n.method});case Iw.code:throw new Iw(f);case CC.code:throw new CC(f);case Xr.code:throw new Xr(f);case _C.code:throw new _C(f);case AC.code:throw new AC(f);case SC.code:throw new SC(f);case xC.code:throw new xC(f);case Kl.code:throw new Kl(f);case Nw.code:throw new Nw(f);case IC.code:throw new IC(f);case NC.code:throw new NC(f);case TC.code:throw new TC(f);case RC.code:throw new RC(f);case PC.code:throw new PC(f);case Tw.code:throw new Tw(f);case 5e3:throw new Xr(f);default:throw h instanceof pe?h:new j0e(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof yE){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>AEe(h)}),{enabled:s,id:u})}}function AEe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Iw.code||t.code===Rg.code:t instanceof yE&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function tQ(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}function nQ(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function SEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const y4=SEe();function xEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await nQ(async({signal:p})=>{const g={...a,body:Array.isArray(r)?as(r.map(v=>({jsonrpc:"2.0",id:v.id??y4.take(),...v}))):as({jsonrpc:"2.0",id:r.id??y4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new q8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new yE({body:r,details:as(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof yE||h instanceof q8?h:new yE({body:r,cause:h,url:t})}}}}class IEe extends pe{constructor({domain:e}){super(`Invalid domain "${as(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class NEe extends pe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class TEe extends pe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function REe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:cQ({domain:e}),...t.types};aQ({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(PEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(rQ({data:n,primaryType:r,types:s})),Ws(qa(i))}function PEe({domain:t,types:e}){return rQ({data:t,primaryType:"EIP712Domain",types:e})}function rQ({data:t,primaryType:e,types:n}){const r=sQ({data:t,primaryType:e,types:n});return Ws(r)}function sQ({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[OEe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=oQ({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Lf(r,s)}function OEe({primaryType:t,types:e}){const n=Ga(kEe({primaryType:t,types:e}));return Ws(n)}function kEe({primaryType:t,types:e}){let n="";const r=iQ({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function iQ({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])iQ({primaryType:i.type,types:e},n);return n}function oQ({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Ws(sQ({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Ws(r)];if(n==="string")return[{type:"bytes32"},Ws(Ga(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>oQ({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Ws(Lf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function DEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return as({domain:o,message:a,primaryType:r,types:s})}function aQ(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(PK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;tt(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Va(d))throw new Cf({address:d});const f=u.match(d0e);if(f){const[g,w]=f;if(w&&Pr(d)!==Number.parseInt(w))throw new Nye({expectedSize:Number.parseInt(w),givenSize:Pr(d)})}const p=s[u];p&&(MEe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new IEe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new NEe({primaryType:r,types:s})}function cQ({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function MEe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new TEe({type:t})}const LEe=`Ethereum Signed Message:
`;function UEe(t){const e=typeof t=="string"?Ew(t):typeof t.raw=="string"?t.raw:ls(t.raw),n=Ew(`${LEe}${Pr(e)}`);return qa([n,e])}function lQ(t,e){return Ws(UEe(t),e)}const uQ="0x6492649264926492649264926492649264926492649264926492649264926492";function $Ee(t){return Zx(t,-32)===uQ}function BEe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=hb([Lf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),uQ]);return s==="hex"?i:Ha(i)}class FEe extends pe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function jEe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new FEe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}const WEe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function zEe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?kr(e.account):void 0;if(o&&!l)throw new pe("`account` is required when `traceAssetChanges` is true");const u=l?mEe(yEe("constructor(bytes, bytes)"),{bytecode:OY,args:[WEe,wEe($m("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async k=>{if(!k.data&&!k.abi)return;const{accessList:M}=await BY(t,{account:l.address,...k,data:k.abi?Qa(k):k.data});return M.map(({address:j,storageKeys:K})=>K.length>0?j:null)})).then(k=>k.flat().filter(Boolean)):[],h=await TD(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((k,M)=>({abi:[$m("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:tl,nonce:M})),stateOverrides:[{address:tl,nonce:0}]}]:[],{calls:[...s,{}].map(k=>({...k,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((k,M)=>({abi:[$m("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:tl,nonce:M})),stateOverrides:[{address:tl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[$m("function decimals() returns (uint256)")],functionName:"decimals",from:tl,nonce:M})),stateOverrides:[{address:tl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[$m("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:tl,nonce:M})),stateOverrides:[{address:tl,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[$m("function symbol() returns (string)")],functionName:"symbol",from:tl,nonce:M})),stateOverrides:[{address:tl,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,v,A]=o?h:[],{calls:_,...I}=f,x=_.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],O=[...N,...S].map(k=>k.status==="success"?sa(k.data):null),P=(w==null?void 0:w.calls)??[],F=(y==null?void 0:y.calls)??[],G=[...P,...F].map(k=>k.status==="success"?sa(k.data):null),B=((b==null?void 0:b.calls)??[]).map(k=>k.status==="success"?k.result:null),T=((A==null?void 0:A.calls)??[]).map(k=>k.status==="success"?k.result:null),R=((v==null?void 0:v.calls)??[]).map(k=>k.status==="success"?k.result:null),$=[];for(const[k,M]of G.entries()){const j=O[k];if(typeof M!="bigint"||typeof j!="bigint")continue;const K=B[k-1],ne=T[k-1],le=R[k-1],oe=k===0?{address:EEe,decimals:18,symbol:"ETH"}:{address:d[k-1],decimals:le||K?Number(K??1):void 0,symbol:ne??void 0};$.some(ae=>ae.token.address===oe.address)||$.push({token:oe,value:{pre:j,post:M,diff:M-j}})}return{assetChanges:$,block:I,results:x}}const HP=new Map,w4=new Map;let HEe=0;function gd(t,e,n){const r=++HEe,s=()=>HP.get(t)||[],i=()=>{const u=s();HP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=w4.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(HP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&w4.set(t,l),o}function yb(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await rI(c);const l=async()=>{s&&(await t({unpoll:i}),await rI(r),l())};l()})(),i}function GEe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=as(["watchBlocks",t.uid,e,n,r,u,c]);return gd(p,{onBlock:s,onError:i},g=>yb(async()=>{var w;try{const y=await dt(t,Ul,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const v=await dt(t,Ul,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&dt(t,Ul,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(v){var _;if(!p)return;const A=await dt(t,Ul,"getBlock")({blockNumber:(_=v.result)==null?void 0:_.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function dQ(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=as(["watchBlockNumber",t.uid,e,n,o]);return gd(d,{onBlockNumber:r,onError:s},h=>yb(async()=>{var f;try{const p=await dt(t,u1,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=as(["watchBlockNumber",t.uid,e,n]);return gd(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=sa((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function pT(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function qEe(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=as(["watchEvent",e,n,r,t.uid,s,u,o]);return gd(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const _=yb(async()=>{var I;if(!A){try{v=await dt(t,jY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await dt(t,dT,"getFilterChanges")({filter:v});else{const N=await dt(t,u1,"getBlockNumber")({});b&&b!==N?x=await dt(t,wU,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):x=[],b=N}if(x.length===0)return;if(r)y.onLogs(x);else for(const N of x)y.onLogs([N])}catch(x){v&&x instanceof Pg&&(A=!1),(I=y.onError)==null||I.call(y,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await dt(t,pT,"uninstallFilter")({filter:v}),_()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return I?I.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>l1({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:_}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(I){var N;if(!w)return;const x=I.result;try{const{eventName:S,args:O}=mU({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=pd(x,{args:O,eventName:S});c([P])}catch(S){let O,P;if(S instanceof pC||S instanceof ZN){if(d)return;O=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(G=>!("name"in G&&G.name))}const F=pd(x,{args:P?[]:{},eventName:O});c([F])}},onError(I){a==null||a(I)}});y=_,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function hQ(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=as(["watchPendingTransactions",t.uid,e,i]);return gd(l,{onTransactions:r,onError:n},u=>{let d;const h=yb(async()=>{var f;try{if(!d)try{d=await dt(t,WY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await dt(t,dT,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await dt(t,pT,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}async function VEe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>t1(r))}async function KEe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function YEe(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?kr(n):void 0,i=r?[s==null?void 0:s.address,[tt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}const fQ="0x5792579257925792579257925792579257925792579257925792579257925792",pQ=tt(0,{size:32});async function QEe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?kr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Qa({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?qa([p,f.dataSuffix]):p,to:f.to,value:f.value?tt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:tt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Nw(new pe(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new Tw(new pe(y,{details:y}))}const p=[];for(const y of d){const b=i1(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?sa(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:pQ);return{id:qa([...w,tt(s.id,{size:32}),fQ])}}throw jK(h,{...e,account:u,chain:e.chain})}}async function gQ(t,e){async function n(u){if(u.endsWith(fQ.slice(2))){const h=jl(Zx(u,-64,-32)),f=Zx(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>pQ.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Hc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Hc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:sa(u.blockNumber),gasUsed:sa(u.gasUsed),status:HY[u.status]})))??[],statusCode:l,status:c,version:o}}async function JEe(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function ZEe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=as(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=fU();let u;const d=gd(o,{resolve:c,reject:l},h=>{const f=yb(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await gQ(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new XEe({id:n}))},i):void 0,await a}class XEe extends pe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function eCe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function tCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Hc(t.nonce):void 0,storageProof:t.storageProof?eCe(t.storageProof):void 0}}async function nCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?tt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return tCe(a)}async function mQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=as(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=fU(),b=a?setTimeout(()=>{p(),f(),y(new $0e({hash:n}))},a):void 0;return f=gd(c,{onReplaced:r,resolve:w,reject:y},v=>{p=dt(t,dQ,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const _=x=>{clearTimeout(b),p(),x(),f()};let I=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d));return}if(l||(h=!0,await sI(async()=>{l=await dt(t,hT,"getTransaction")({hash:n}),l.blockNumber&&(I=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await dt(t,ND,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e))return;_(()=>v.resolve(d))}catch(x){if(x instanceof BK||x instanceof FK){if(!l){h=!1;return}try{u=l,h=!0;const N=await sI(()=>dt(t,Ul,"getBlock")({blockNumber:I,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof WK});h=!1;const S=N.transactions.find(({from:P,nonce:F})=>P===u.from&&F===u.nonce);if(!S||(d=await dt(t,ND,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||I-d.blockNumber+1n<e)))return;let O="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?O="repriced":S.from===S.to&&S.value===0n&&(O="cancelled"),_(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:O,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){_(()=>v.reject(N))}}else _(()=>v.reject(x))}}})}),g}async function rCe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Yu(n))}async function sCe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function yQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/prepareAuthorization"});const i=kr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:kr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await dt(t,pb,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await dt(t,tU,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&uT(o.address,i.address))&&(a.nonce+=1)),a}async function iCe(t,e){const{account:n=t.account}=e;if(!n)throw new cm({docsPath:"/docs/eip7702/signAuthorization"});const r=kr(n);if(!r.signAuthorization)throw new TS({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await yQ(t,e);return r.signAuthorization(s)}async function oCe(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTransaction"});const i=kr(n);um({account:i,...e});const o=await dt(t,pb,"getChainId")({});r!==null&&$K({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||fb;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:tt(o),from:i.address}]},{retryCount:0})}async function wQ(t,{account:e=t.account,message:n}){if(!e)throw new cm({docsPath:"/docs/actions/wallet/signMessage"});const r=kr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?Ew(n):n.raw instanceof Uint8Array?Ga(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function aCe(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new cm({docsPath:"/docs/actions/wallet/signTypedData"});const o=kr(n),a={EIP712Domain:cQ({domain:r}),...e.types};if(aQ({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=DEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function cCe(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?kr(a.account):t.account,l=Qa({abi:n,args:s,functionName:o});try{const{data:u}=await dt(t,c1,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=hm({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw kg(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}async function lCe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(e)}]},{retryCount:0})}let bQ=class extends jL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Bye(e);const r=e1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Aw(i)}update(e){return _w(this),this.iHash.update(e),this}digestInto(e){_w(this),qc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const vQ=(t,e,n)=>new bQ(t,e).update(n).digest();vQ.create=(t,e)=>new bQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const wo=BigInt(0),Li=BigInt(1),Np=BigInt(2),uCe=BigInt(3),EQ=BigInt(4),CQ=BigInt(5),_Q=BigInt(8);function Oa(t,e){const n=t%e;return n>=wo?n:e+n}function ha(t,e,n){let r=t;for(;e-- >wo;)r*=r,r%=n;return r}function b4(t,e){if(t===wo)throw new Error("invert: expected non-zero number");if(e<=wo)throw new Error("invert: expected positive modulus, got "+e);let n=Oa(t,e),r=e,s=wo,i=Li;for(;n!==wo;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Li)throw new Error("invert: does not exist");return Oa(s,e)}function AQ(t,e){const n=(t.ORDER+Li)/EQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function dCe(t,e){const n=(t.ORDER-CQ)/_Q,r=t.mul(e,Np),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Np),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function hCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Li,n=0;for(;e%Np===wo;)e/=Np,n++;let r=Np;const s=gT(t);for(;v4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return AQ;let i=s.pow(r,e);const o=(e+Li)/Np;return function(c,l){if(c.is0(l))return l;if(v4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Li<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function fCe(t){return t%EQ===uCe?AQ:t%_Q===CQ?dCe:hCe(t)}const pCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function gCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=pCe.reduce((r,s)=>(r[s]="function",r),e);return lU(t,n),t}function mCe(t,e,n){if(n<wo)throw new Error("invalid exponent, negatives unsupported");if(n===wo)return t.ONE;if(n===Li)return e;let r=t.ONE,s=e;for(;n>wo;)n&Li&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Li;return r}function SQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function v4(t,e){const n=(t.ORDER-Li)/Np,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function yCe(t,e){e!==void 0&&gC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function gT(t,e,n=!1,r={}){if(t<=wo)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=yCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:cT(o),ZERO:wo,ONE:Li,create:u=>Oa(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return wo<=u&&u<t},is0:u=>u===wo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Li)===Li,neg:u=>Oa(-u,t),eql:(u,d)=>u===d,sqr:u=>Oa(u*u,t),add:(u,d)=>Oa(u+d,t),sub:(u,d)=>Oa(u-d,t),mul:(u,d)=>Oa(u*d,t),pow:(u,d)=>mCe(l,u,d),div:(u,d)=>Oa(u*b4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>b4(u,t),sqrt:i||(u=>(c||(c=fCe(t)),c(l,u))),toBytes:u=>n?AY(u,a):cU(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?_Y(u):aT(u)},invertBatch:u=>SQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function xQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function IQ(t){const e=xQ(t);return e+Math.ceil(e/2)}function wCe(t,e,n=!1){const r=t.length,s=xQ(e),i=IQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?_Y(t):aT(t),a=Oa(o,e-Li)+Li;return n?AY(a,s):cU(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Rw=BigInt(0),Tp=BigInt(1);function wE(t,e){const n=e.negate();return t?n:e}function bCe(t,e,n){const r=o=>o.pz,s=SQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function NQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function GP(t,e){NQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=cT(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function E4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Tp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function vCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ECe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const qP=new WeakMap,TQ=new WeakMap;function VP(t){return TQ.get(t)||1}function C4(t){if(t!==Rw)throw new Error("invalid wNAF")}function CCe(t,e){return{constTimeNegate:wE,hasPrecomputes(n){return VP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Rw;)r&Tp&&(s=s.add(i)),i=i.double(),r>>=Tp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=GP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=GP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=E4(s,c,a);s=l,d?o=o.add(wE(f,r[p])):i=i.add(wE(h,r[u]))}return C4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=GP(n,e);for(let a=0;a<o.windows&&s!==Rw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=E4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return C4(s),i},getPrecomputes(n,r,s){let i=qP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),qP.set(r,i))),i},wNAFCached(n,r,s){const i=VP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=VP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){NQ(r,e),TQ.set(n,r),qP.delete(n)}}}function _Ce(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Rw||r>Rw;)n&Tp&&(i=i.add(s)),r&Tp&&(o=o.add(s)),s=s.double(),n>>=Tp,r>>=Tp;return{p1:i,p2:o}}function ACe(t,e,n,r){vCe(n,t),ECe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=kbe(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=cT(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function _4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return gCe(e),e}else return gT(t)}function SCe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Rw))throw new Error(`CURVE.${a} must be positive bigint`)}const r=_4(e.p,n.Fp),s=_4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function A4(t){t.lowS!==void 0&&nI("lowS",t.lowS),t.prehash!==void 0&&nI("prehash",t.prehash)}class xCe extends Error{constructor(e=""){super(e)}}const Iu={Err:xCe,_tlv:{encode:(t,e)=>{const{Err:n}=Iu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=_A(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?_A(s.length/2|128):"";return _A(t)+i+s+e},decode(t,e){const{Err:n}=Iu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Iu;if(t<bE)throw new e("integer: negative integers are not allowed");let n=_A(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Iu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return aT(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Iu,s=Aa("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Iu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},bE=BigInt(0),vE=BigInt(1),ICe=BigInt(2),SA=BigInt(3),NCe=BigInt(4);function TCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function RQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Aa("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function RCe(t,e={}){const{Fp:n,Fn:r}=SCe("weierstrass",t,e),{h:s,n:i}=t;lU(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,O){const{x:P,y:F}=S.toAffine(),G=n.toBytes(P);if(nI("isCompressed",O),O){a();const B=!n.isOdd(F);return Sp(PQ(B),G)}else return Sp(Uint8Array.of(4),G,n.toBytes(F))}function l(N){qc(N);const S=n.BYTES,O=S+1,P=2*S+1,F=N.length,G=N[0],B=N.subarray(1);if(F===O&&(G===2||G===3)){const T=n.fromBytes(B);if(!n.isValid(T))throw new Error("bad point: is not on curve, wrong x");const R=h(T);let $;try{$=n.sqrt(R)}catch(j){const K=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}a();const k=n.isOdd($);return(G&1)===1!==k&&($=n.neg($)),{x:T,y:$}}else if(F===P&&G===4){const T=n.fromBytes(B.subarray(S*0,S*1)),R=n.fromBytes(B.subarray(S*1,S*2));if(!f(T,R))throw new Error("bad point: is not on curve");return{x:T,y:R}}else throw new Error(`bad point: got length ${F}, expected compressed=${O} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=TCe(n,t.a,t.b);function f(N,S){const O=n.sqr(S),P=h(N);return n.eql(O,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,SA),NCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,O=!1){if(!n.isValid(S)||O&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function y(N){if(!(N instanceof _))throw new Error("ProjectivePoint expected")}const b=o4((N,S)=>{const{px:O,py:P,pz:F}=N;if(n.eql(F,n.ONE))return{x:O,y:P};const G=N.is0();S==null&&(S=G?n.ONE:n.inv(F));const B=n.mul(O,S),T=n.mul(P,S),R=n.mul(F,S);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:B,y:T}}),v=o4(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:O}=N.toAffine();if(!n.isValid(S)||!n.isValid(O))throw new Error("bad point: x or y not field elements");if(!f(S,O))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(N,S,O,P,F){return O=new _(n.mul(O.px,N),O.py,O.pz),S=wE(P,S),O=wE(F,O),S.add(O)}class _{constructor(S,O,P){this.px=w("x",S),this.py=w("y",O,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:O,y:P}=S||{};if(!S||!n.isValid(O)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof _)throw new Error("projective point not allowed");return n.is0(O)&&n.is0(P)?_.ZERO:new _(O,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return bCe(_,"pz",S)}static fromBytes(S){return qc(S),_.fromHex(S)}static fromHex(S){const O=_.fromAffine(d(Aa("pointHex",S)));return O.assertValidity(),O}static fromPrivateKey(S){const O=RQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return _.BASE.multiply(O(S))}static msm(S,O){return ACe(_,r,S,O)}precompute(S=8,O=!0){return x.setWindowSize(this,S),O||this.multiply(SA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:O,py:P,pz:F}=this,{px:G,py:B,pz:T}=S,R=n.eql(n.mul(O,T),n.mul(G,F)),$=n.eql(n.mul(P,T),n.mul(B,F));return R&&$}negate(){return new _(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:O}=t,P=n.mul(O,SA),{px:F,py:G,pz:B}=this;let T=n.ZERO,R=n.ZERO,$=n.ZERO,k=n.mul(F,F),M=n.mul(G,G),j=n.mul(B,B),K=n.mul(F,G);return K=n.add(K,K),$=n.mul(F,B),$=n.add($,$),T=n.mul(S,$),R=n.mul(P,j),R=n.add(T,R),T=n.sub(M,R),R=n.add(M,R),R=n.mul(T,R),T=n.mul(K,T),$=n.mul(P,$),j=n.mul(S,j),K=n.sub(k,j),K=n.mul(S,K),K=n.add(K,$),$=n.add(k,k),k=n.add($,k),k=n.add(k,j),k=n.mul(k,K),R=n.add(R,k),j=n.mul(G,B),j=n.add(j,j),k=n.mul(j,K),T=n.sub(T,k),$=n.mul(j,M),$=n.add($,$),$=n.add($,$),new _(T,R,$)}add(S){y(S);const{px:O,py:P,pz:F}=this,{px:G,py:B,pz:T}=S;let R=n.ZERO,$=n.ZERO,k=n.ZERO;const M=t.a,j=n.mul(t.b,SA);let K=n.mul(O,G),ne=n.mul(P,B),le=n.mul(F,T),oe=n.add(O,P),ae=n.add(G,B);oe=n.mul(oe,ae),ae=n.add(K,ne),oe=n.sub(oe,ae),ae=n.add(O,F);let ue=n.add(G,T);return ae=n.mul(ae,ue),ue=n.add(K,le),ae=n.sub(ae,ue),ue=n.add(P,F),R=n.add(B,T),ue=n.mul(ue,R),R=n.add(ne,le),ue=n.sub(ue,R),k=n.mul(M,ae),R=n.mul(j,le),k=n.add(R,k),R=n.sub(ne,k),k=n.add(ne,k),$=n.mul(R,k),ne=n.add(K,K),ne=n.add(ne,K),le=n.mul(M,le),ae=n.mul(j,ae),ne=n.add(ne,le),le=n.sub(K,le),le=n.mul(M,le),ae=n.add(ae,le),K=n.mul(ne,ae),$=n.add($,K),K=n.mul(ue,ae),R=n.mul(oe,R),R=n.sub(R,K),K=n.mul(oe,ne),k=n.mul(ue,k),k=n.add(k,K),new _(R,$,k)}subtract(S){return this.add(S.negate())}is0(){return this.equals(_.ZERO)}multiply(S){const{endo:O}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,F;const G=B=>x.wNAFCached(this,B,_.normalizeZ);if(O){const{k1neg:B,k1:T,k2neg:R,k2:$}=O.splitScalar(S),{p:k,f:M}=G(T),{p:j,f:K}=G($);F=M.add(K),P=A(O.beta,k,j,B,R)}else{const{p:B,f:T}=G(S);P=B,F=T}return _.normalizeZ([P,F])[0]}multiplyUnsafe(S){const{endo:O}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===bE||P.is0())return _.ZERO;if(S===vE)return P;if(x.hasPrecomputes(this))return this.multiply(S);if(O){const{k1neg:F,k1:G,k2neg:B,k2:T}=O.splitScalar(S),{p1:R,p2:$}=_Ce(_,P,G,T);return A(O.beta,R,$,F,B)}else return x.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,O,P){const F=this.multiplyUnsafe(O).add(S.multiplyUnsafe(P));return F.is0()?void 0:F}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===vE?!0:S?S(_,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===vE?this:S?S(_,this):this.multiplyUnsafe(s)}toBytes(S=!0){return nI("isCompressed",S),this.assertValidity(),u(_,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return mC(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(t.Gx,t.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=r;const I=r.BITS,x=CCe(_,e.endo?Math.ceil(I/2):I);return _}function PQ(t){return Uint8Array.of(t?2:3)}function PCe(t,e,n={}){lU(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||Vye,s=e.hmac||((P,...F)=>vQ(e.hash,P,Sp(...F))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const F=a>>vE;return P>F}function u(P){return l(P)?o.neg(P):P}function d(P,F){if(!o.isValidNot0(F))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor(F,G,B){d("r",F),d("s",G),this.r=F,this.s=G,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(F){const G=o.BYTES,B=Aa("compactSignature",F,G*2);return new h(o.fromBytes(B.subarray(0,G)),o.fromBytes(B.subarray(G,G*2)))}static fromDER(F){const{r:G,s:B}=Iu.toSig(Aa("DER",F));return new h(G,B)}assertValidity(){}addRecoveryBit(F){return new h(this.r,this.s,F)}recoverPublicKey(F){const G=i.ORDER,{r:B,s:T,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*ICe<G&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=R===2||R===3?B+a:B;if(!i.isValid(k))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(k),j=t.fromHex(Sp(PQ((R&1)===0),M)),K=o.inv(k),ne=v(Aa("msgHash",F)),le=o.create(-ne*K),oe=o.create(T*K),ae=t.BASE.multiplyUnsafe(le).add(j.multiplyUnsafe(oe));if(ae.is0())throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes(F){if(F==="compact")return Sp(o.toBytes(this.r),o.toBytes(this.s));if(F==="der")return FL(Iu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return mC(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return mC(this.toBytes("compact"))}}const f=RQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return wCe(r(IQ(P)),P)},precompute(P=8,F=t.BASE){return F.precompute(P,!1)}};function g(P,F=!0){return t.fromPrivateKey(P).toBytes(F)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const G=Aa("key",P).length,B=i.BYTES,T=B+1,R=2*B+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===T))return G===T||G===R}function y(P,F,G=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w(F)===!1)throw new Error("second arg must be public key");return t.fromHex(F).multiply(f(P)).toBytes(G)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const F=aT(P),G=P.length*8-c;return G>0?F>>BigInt(G):F},v=e.bits2int_modN||function(P){return o.create(b(P))},A=cT(c);function _(P){return Obe("num < 2^"+c,P,bE,A),o.toBytes(P)}function I(P,F,G=x){if(["recovered","canonical"].some(oe=>oe in G))throw new Error("sign() legacy options not supported");const{hash:B}=e;let{lowS:T,prehash:R,extraEntropy:$}=G;T==null&&(T=!0),P=Aa("msgHash",P),A4(G),R&&(P=Aa("prehashed msgHash",B(P)));const k=v(P),M=f(F),j=[_(M),_(k)];if($!=null&&$!==!1){const oe=$===!0?r(i.BYTES):$;j.push(Aa("extraEntropy",oe))}const K=Sp(...j),ne=k;function le(oe){const ae=b(oe);if(!o.isValidNot0(ae))return;const ue=o.inv(ae),Xe=t.BASE.multiply(ae).toAffine(),xe=o.create(Xe.x);if(xe===bE)return;const Me=o.create(ue*o.create(ne+xe*M));if(Me===bE)return;let rt=(Xe.x===xe?0:2)|Number(Xe.y&vE),Rt=Me;return T&&l(Me)&&(Rt=u(Me),rt^=1),new h(xe,Rt,rt)}return{seed:K,k2sig:le}}const x={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,F,G=x){const{seed:B,k2sig:T}=I(P,F,G);return Dbe(e.hash.outputLen,o.BYTES,s)(B,T)}t.BASE.precompute(8);function O(P,F,G,B=N){const T=P;F=Aa("msgHash",F),G=Aa("publicKey",G),A4(B);const{lowS:R,prehash:$,format:k}=B;if("strict"in B)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&!["compact","der","js"].includes(k))throw new Error('format must be "compact", "der" or "js"');const M=typeof T=="string"||BL(T),j=!M&&!k&&typeof T=="object"&&T!==null&&typeof T.r=="bigint"&&typeof T.s=="bigint";if(!M&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let K,ne;try{if(j)if(k===void 0||k==="js")K=new h(T.r,T.s);else throw new Error("invalid format");if(M){try{k!=="compact"&&(K=h.fromDER(T))}catch(Rt){if(!(Rt instanceof Iu.Err))throw Rt}!K&&k!=="der"&&(K=h.fromCompact(T))}ne=t.fromHex(G)}catch{return!1}if(!K||R&&K.hasHighS())return!1;$&&(F=e.hash(F));const{r:le,s:oe}=K,ae=v(F),ue=o.inv(oe),Xe=o.create(ae*ue),xe=o.create(le*ue),Me=t.BASE.multiplyUnsafe(Xe).add(ne.multiplyUnsafe(xe));return Me.is0()?!1:o.create(Me.x)===le}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:O,utils:p,Point:t,Signature:h})}function OCe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=gT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function kCe(t){const{CURVE:e,curveOpts:n}=OCe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function DCe(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function MCe(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=kCe(t),s=RCe(e,n),i=PCe(s,r,n);return DCe(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function LCe(t,e){const n=r=>MCe({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const UCe=BigInt(1),MD=BigInt(2),S4=(t,e)=>(t+e/MD)/e;function $Ce(t){const e=iI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ha(u,n,e)*u%e,h=ha(d,n,e)*u%e,f=ha(h,MD,e)*l%e,p=ha(f,s,e)*f%e,g=ha(p,i,e)*p%e,w=ha(g,a,e)*g%e,y=ha(w,c,e)*w%e,b=ha(y,a,e)*g%e,v=ha(b,n,e)*u%e,A=ha(v,o,e)*p%e,_=ha(A,r,e)*l%e,I=ha(_,MD,e);if(!LD.eql(LD.sqr(I),t))throw new Error("Cannot find square root");return I}const LD=gT(iI.p,void 0,void 0,{sqrt:$Ce}),OQ=LCe({...iI,Fp:LD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=iI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-UCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=S4(i*t,e),c=S4(-r*t,e);let l=Oa(t-a*n-c*s,e),u=Oa(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},YK),BCe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:OQ},Symbol.toStringTag,{value:"Module"}));function FCe({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new OQ.Signature(sa(t),sa(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ha(o)}async function EU(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Vl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?FCe(o):ls(o),u=await(async()=>!r&&!s||$Ee(l)?l:BEe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Qa({abi:e4,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:eT({abi:e4,args:[n,i,u],bytecode:ove}),...c},{data:g}=await dt(t,c1,"call")(p);return gye(g??"0x0")}catch(p){try{if(uT(Yu(n),await OK({hash:i,signature:o})))return!0}catch{}if(p instanceof bY)return!1;throw p}}async function jCe(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=lQ(n);return EU(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function WCe(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=REe({message:o,primaryType:a,types:c,domain:l});return EU(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}async function zCe(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function HCe(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=as(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return gd(y,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,_=!1;const I=yb(async()=>{var x;if(!_){try{A=await dt(t,FY,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}_=!0;return}try{let N;if(A)N=await dt(t,dT,"getFilterChanges")({filter:A});else{const S=await dt(t,u1,"getBlockNumber")({});v&&v<S?N=await dt(t,zY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):N=[],v=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){A&&N instanceof Pg&&(_=!1),(x=b.onError)==null||x.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await dt(t,pT,"uninstallFilter")({filter:A}),I()}})})():(()=>{const w=h??!1,y=as(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return gd(y,{onLogs:l,onError:c},A=>((async()=>{try{const _=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),I=o?l1({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await _.subscribe({params:["logs",{address:r,topics:I}],onData(N){var O;if(!b)return;const S=N.result;try{const{eventName:P,args:F}=mU({abi:n,data:S.data,topics:S.topics,strict:h}),G=pd(S,{args:F,eventName:P});A.onLogs([G])}catch(P){let F,G;if(P instanceof pC||P instanceof ZN){if(h)return;F=P.abiItem.name,G=(O=P.abiItem.inputs)==null?void 0:O.some(T=>!("name"in T&&T.name))}const B=pd(S,{args:G?[]:{},eventName:F});A.onLogs([B])}},onError(N){var S;(S=A.onError)==null||S.call(A,N)}});v=x,b||v()}catch(_){c==null||c(_)}})(),()=>v()))})()}async function kQ(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new cm({docsPath:"/docs/contract/writeContract"});const l=r?kr(r):null,u=Qa({abi:n,args:i,functionName:a});try{return await dt(t,i1,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw kg(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}function na(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const PS="2.17.3",GCe=()=>`@wagmi/core@${PS}`;var DQ=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},oI,MQ;let _d=class UD extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return GCe()}constructor(e,n={}){var i;super(),oI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof UD?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof UD&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return DQ(this,oI,"m",MQ).call(this,this,e)}};oI=new WeakSet,MQ=function t(e,n){return n!=null&&n(e)?e:e.cause?DQ(this,oI,"m",t).call(this,e.cause,n):e};class kC extends _d{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class qCe extends _d{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class VCe extends _d{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class KCe extends _d{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class YCe extends _d{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class QCe extends _d{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function OS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new qCe;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}const $D=256;let xA=$D,IA;function LQ(t=11){if(!IA||xA+t>$D*2){IA="",xA=0;for(let e=0;e<$D;e++)IA+=(256+Math.random()*256|0).toString(16).substring(1)}return IA.substring(xA,xA+++t)}function UQ(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?kr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:LQ()};function y(b){return v=>{const A=v(b);for(const I in w)delete A[I];const _={...b,...A};return Object.assign(_,{extend:y(_)})}}return Object.assign(w,{extend:y(w)})}function CU({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=LQ();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:_Ee(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function JCe(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>CU({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function aI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=ZCe,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=CU({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const _=await A.request({method:g,params:w});return f({method:g,params:w,response:_,transport:A,status:"success"}),_}catch(_){if(f({error:_,method:g,params:w,transport:A,status:"error"}),i(_)||v===h.length-1||(y??(y=h.slice(v+1).some(I=>{const{include:x,exclude:N}=I({chain:c}).config.methods||{};return x?x.includes(g):N?!N.includes(g):!0})),!y))throw _;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};XCe({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function ZCe(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===xw.code||t.code===Xr.code||xp.nodeMessage.test(t.message)||t.code===5e3))}function XCe({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(I=>I[w].latency),v=1-y.reduce((I,x)=>I+x,0)/y.length/f,A=u.map(I=>I[w].success),_=A.reduce((I,x)=>I+x,0)/A.length;return _===0?[0,w]:[l*v+c*_,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await rI(e),d()};d()}class e_e extends pe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function $a(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new e_e;const v=xEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return CU({key:s,methods:i,name:o,async request({method:A,params:_}){const I={method:A,params:_},{schedule:x}=DY({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,F)=>P.id-F.id}),N=async P=>n?x(P):[await v.request({body:P})],[{error:S,result:O}]=await N(I);if(u)return{error:S,result:O};if(S)throw new QL({body:I,error:S,url:b});return O},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function t_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(n_e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(r_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const n_e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,r_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function s_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Va(r.address,{strict:!1})||e&&!uT(r.address,e))return!1}catch{return!1}return!0}async function i_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=t_e(s);if(!u.address||!s_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=lQ(s);return EU(t,{address:u.address,hash:h,signature:a,...l})}function o_e(t){return{call:e=>c1(t,e),createAccessList:e=>BY(t,e),createBlockFilter:()=>Ive(t),createContractEventFilter:e=>FY(t,e),createEventFilter:e=>jY(t,e),createPendingTransactionFilter:()=>WY(t),estimateContractGas:e=>Tve(t,e),estimateGas:e=>rT(t,e),getBalance:e=>eU(t,e),getBlobBaseFee:()=>Rve(t),getBlock:e=>Ul(t,e),getBlockNumber:e=>u1(t,e),getBlockTransactionCount:e=>Lve(t,e),getBytecode:e=>p4(t,e),getChainId:()=>pb(t),getCode:e=>p4(t,e),getContractEvents:e=>zY(t,e),getEip712Domain:e=>Fve(t,e),getEnsAddress:e=>hve(t,e),getEnsAvatar:e=>Sve(t,e),getEnsName:e=>$Y(t,e),getEnsResolver:e=>xve(t,e),getEnsText:e=>UY(t,e),getFeeHistory:e=>zve(t,e),estimateFeesPerGas:e=>Y0e(t,e),getFilterChanges:e=>dT(t,e),getFilterLogs:e=>Hve(t,e),getGasPrice:()=>ZL(t),getLogs:e=>wU(t,e),getProof:e=>nCe(t,e),estimateMaxPriorityFeePerGas:e=>K0e(t,e),getStorageAt:e=>Gve(t,e),getTransaction:e=>hT(t,e),getTransactionConfirmations:e=>qve(t,e),getTransactionCount:e=>tU(t,e),getTransactionReceipt:e=>ND(t,e),multicall:e=>GY(t,e),prepareTransactionRequest:e=>s1(t,e),readContract:e=>Ql(t,e),sendRawTransaction:e=>rU(t,e),simulate:e=>TD(t,e),simulateBlocks:e=>TD(t,e),simulateCalls:e=>zEe(t,e),simulateContract:e=>cCe(t,e),verifyMessage:e=>jCe(t,e),verifySiweMessage:e=>i_e(t,e),verifyTypedData:e=>WCe(t,e),uninstallFilter:e=>pT(t,e),waitForTransactionReceipt:e=>mQ(t,e),watchBlocks:e=>GEe(t,e),watchBlockNumber:e=>dQ(t,e),watchContractEvent:e=>HCe(t,e),watchEvent:e=>qEe(t,e),watchPendingTransactions:e=>hQ(t,e)}}function a_e(t){return{addChain:e=>wye(t,e),deployContract:e=>ywe(t,e),getAddresses:()=>VEe(t),getCallsStatus:e=>gQ(t,e),getCapabilities:e=>YEe(t,e),getChainId:()=>pb(t),getPermissions:()=>KEe(t),prepareAuthorization:e=>yQ(t,e),prepareTransactionRequest:e=>s1(t,e),requestAddresses:()=>rCe(t),requestPermissions:e=>sCe(t,e),sendCalls:e=>QEe(t,e),sendRawTransaction:e=>rU(t,e),sendTransaction:e=>i1(t,e),showCallsStatus:e=>JEe(t,e),signAuthorization:e=>iCe(t,e),signMessage:e=>wQ(t,e),signTransaction:e=>oCe(t,e),signTypedData:e=>aCe(t,e),switchChain:e=>lCe(t,e),waitForCallsStatus:e=>ZEe(t,e),watchAsset:e=>zCe(t,e),writeContract:e=>kQ(t,e)}}async function d1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new QCe({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new VCe;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new YCe({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=kr(e.account??n.accounts[0]);if(o&&(o.address=Yu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new KCe({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return UQ({account:o,chain:a,name:"Connector Client",transport:l=>JCe(c)({...l,retryCount:0})})}async function BD(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function c_e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await d1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return na(o,rT,"estimateGas")({...s,account:i})}function $Q(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(D0e[t])}function Zy(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function l_e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return na(o,GY,"multicall")({allowFailure:n,contracts:s,...i})}function BQ(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return na(s,Ql,"readContract")(r)}async function u_e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>l_e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof vY)throw c;const l=()=>o.map(u=>BQ(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function FQ(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await x4(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await x4(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=dK(jl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await na(c,eU,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:lm(u,$Q(a)),symbol:d.nativeCurrency.symbol,value:u}}async function x4(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await u_e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=lm(c??"0",$Q(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function I4(t){return t.state.chainId}function _f(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!_f(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!_f(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let KP=[];function N4(t){const e=t.chains;return _f(KP,e)?KP:(KP=e,e)}function d_e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let NA=[];function yc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||_f(NA,e)?NA:(NA=e,e)}let YP=[];function T4(t){const e=t.connectors;return _f(YP,e)?YP:(YP=e,e)}function h_e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return na(s,$Y,"getEnsName")(r)}function FD(t,e={}){const n=d_e(t,e);return n==null?void 0:n.extend(o_e)}async function f_e(t,e={}){return(await d1(t,e)).extend(a_e)}async function p_e(t,e){const{account:n,chainId:r,...s}=e,i=n??Zy(t).address,o=t.getClient({chainId:r});return na(o,s1,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let QP=!1;async function jD(t,e={}){var l,u;if(QP)return[];QP=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),QP=!1,a}async function g_e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await d1(t,{account:n??void 0,chainId:r,connector:s}),await na(o,i1,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function m_e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await d1(t,{account:n,connector:r}),na(i,wQ,"signMessage")({...s,...n?{account:n}:{}})}class Zd extends _d{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class y_e extends _d{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function WD(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new y_e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new kC;return t.setState(a=>({...a,chainId:r})),i}function jQ(t,e){const{onChange:n}=e;return t.subscribe(()=>Zy(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return _f(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function w_e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function WQ(t,e){const{onChange:n}=e;return t.subscribe(()=>yc(t),n,{equalityFn:_f})}function zQ(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function b_e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=na(l,hQ,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function v_e(t,e){const{onChange:n}=e;return t.subscribe(()=>FD(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function HQ(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await na(i,mQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await na(i,hT,"getTransaction")({hash:a.transactionHash}),d=await na(i,c1,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?dK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function GQ(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await d1(t,{account:n??void 0,chainId:r,connector:s}),await na(o,kQ,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function vVe(t){return t}mT.type="injected";function mT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...E_e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:mT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new Zd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>Yu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Xr.code)throw new Xr(A);if(A.code===of.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(_=>Yu(_))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(_=>{if(_.code===Xr.code)throw _;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Xr.code?new Xr(A):A.code===of.code?new of(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Zd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await nQ(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Zd;return(await l.request({method:"eth_accounts"})).map(d=>Yu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Zd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=kS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new Zd}return!!(await sI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new Zd;const h=c.chains.find(b=>b.id===u);if(!h)throw new Kl(new kC);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,..._}=h.blockExplorers??{};let I;l!=null&&l.blockExplorerUrls?I=l.blockExplorerUrls:A&&(I=[A.url,...Object.values(_).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const N={blockExplorerUrls:I,chainId:tt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Xr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Xr(A)}throw v.code===Xr.code?new Xr(v):new Kl(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Yu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const E_e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:kS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return kS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:kS(t,"isPhantom")}}};function kS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function C_e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function __e(){const t=new Set;let e=[];const n=()=>C_e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const A_e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},S_e=A_e;function x_e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const zD=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return zD(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return zD(r)(n)}}}},I_e=(t,e)=>(n,r,s)=>{let i={storage:x_e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return zD(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,_]=b;if(f=i.merge(_,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},N_e=I_e,R4=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},JP=t=>t?R4(t):R4;var qQ={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,_;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(qQ);var T_e=qQ.exports;const R_e=nm(T_e);class P_e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new R_e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function O_e(t){return new P_e(t)}function k_e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function P4(t,e){return t.slice(0,e).join(".")||"."}function O4(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function D_e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=O4(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=O4(s,c);if(u!==0)return r?e.call(this,a,c,P4(i,u)):`[ref=${P4(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function M_e(t,e,n,r){return JSON.stringify(t,D_e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function L_e(t){const{deserialize:e=k_e,key:n="wagmi",serialize:r=M_e,storage:s=VQ}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const VQ={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function U_e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:VQ;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const HD=256;let TA=HD,RA;function $_e(t=11){if(!RA||TA+t>HD*2){RA="",TA=0;for(let e=0;e<HD;e++)RA+=(256+Math.random()*256|0).toString(16).substring(1)}return RA.substring(TA,TA+++t)}function KQ(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=L_e({storage:U_e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?__e():void 0,a=JP(()=>i.chains),c=JP(()=>{const _=[],I=new Set;for(const x of i.connectors??[]){const N=l(x);if(_.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const O of S)I.add(O)}}if(!s&&o){const x=o.getProviders();for(const N of x)I.has(N.info.rdns)||_.push(l(u(N)))}return _});function l(_){var N;const I=O_e($_e()),x={..._({emitter:I,chains:a.getState(),storage:n,transports:i.transports}),emitter:I,uid:I.uid};return I.on("connect",v),(N=x.setup)==null||N.call(x),x}function u(_){const{info:I}=_,x=_.provider;return mT({target:{...I,id:I.rdns,provider:x}})}const d=new Map;function h(_={}){const I=_.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===I);if(_.chainId&&!x)throw new kC;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new kC}{const S=d.get(I);if(S)return S}let N;if(i.client)N=i.client({chain:x});else{const S=x.id,O=a.getState().map(G=>G.id),P={},F=Object.entries(i);for(const[G,B]of F)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof B=="object")if(S in B)P[G]=B[S];else{if(O.some(R=>R in B))continue;P[G]=B}else P[G]=B;N=UQ({...P,chain:x,batch:P.batch??{multicall:!0},transport:G=>i.transports[S]({...G,connectors:c})})}return d.set(I,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";PS.startsWith(g)?p=Number.parseInt(PS.replace(g,"")):p=Number.parseInt(PS.split(".")[0]??"0");const w=JP(S_e(n?N_e(f,{migrate(_,I){if(I===p)return _;const x=f(),N=y(_,x.chainId);return{...x,chainId:N}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([I,x])=>{const{id:N,name:S,type:O,uid:P}=x.connector;return[I,{...x,connector:{id:N,name:S,type:O,uid:P}}]})},chainId:_.chainId,current:_.current}},merge(_,I){typeof _=="object"&&_&&"status"in _&&delete _.status;const x=y(_,I.chainId);return{...I,..._,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(_,I){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(x=>x.id===_.chainId)?_.chainId:I}r&&w.subscribe(({connections:_,current:I})=>{var x;return I?(x=_.get(I))==null?void 0:x.chainId:void 0},_=>{if(a.getState().some(x=>x.id===_))return w.setState(x=>({...x,chainId:_??x.chainId}))}),o==null||o.subscribe(_=>{const I=new Set,x=new Set;for(const S of c.getState())if(I.add(S.id),S.rdns){const O=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of O)x.add(P)}const N=[];for(const S of _){if(x.has(S.info.rdns))continue;const O=l(u(S));I.has(O.id)||N.push(O)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(_){w.setState(I=>{const x=I.connections.get(_.uid);return x?{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts??x.accounts,chainId:_.chainId??x.chainId,connector:x.connector})}:I})}function v(_){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(I=>{const x=c.getState().find(N=>N.uid===_.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...I,connections:new Map(I.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:x}),current:_.uid,status:"connected"}):I})}function A(_){w.setState(I=>{const x=I.connections.get(_.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(I.connections.delete(_.uid),I.connections.size===0)return{...I,connections:new Map,current:null,status:"disconnected"};const N=I.connections.values().next().value;return{...I,connections:new Map(I.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(_){let I;typeof _=="function"?I=_(w.getState()):I=_;const x=f();typeof I!="object"&&(I=x),Object.keys(x).some(S=>!(S in I))&&(I=x),w.setState(I,!0)},subscribe(_,I,x){return w.subscribe(_,I,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(_){const I=typeof _=="function"?_(a.getState()):_;if(I.length!==0)return a.setState(I,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:A}}}}function B_e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?jD(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function F_e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=B_e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=D.useRef(!0);return D.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const YQ=D.createContext(void 0);function j_e(t){const{children:e,config:n}=t,r={value:n};return D.createElement(F_e,t,D.createElement(YQ.Provider,r,e))}const W_e="2.15.6",z_e=()=>`wagmi@${W_e}`;let H_e=class extends _d{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return z_e()}};class G_e extends H_e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function ji(t={}){const e=t.config??D.useContext(YQ);if(!e)throw new G_e;return e}function q_e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var QQ={exports:{}},JQ={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT=D,V_e=aV;function K_e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Y_e=typeof Object.is=="function"?Object.is:K_e,Q_e=V_e.useSyncExternalStore,J_e=yT.useRef,Z_e=yT.useEffect,X_e=yT.useMemo,e1e=yT.useDebugValue;JQ.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=J_e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=X_e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,Y_e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=Q_e(t,i[0],i[1]);return Z_e(function(){o.hasValue=!0,o.value=a},[a]),e1e(a),a};QQ.exports=JQ;var ZQ=QQ.exports;const ZP=t=>typeof t=="object"&&!Array.isArray(t);function t1e(t,e,n=e,r=_f){const s=D.useRef([]),i=ZQ.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(ZP(o)&&ZP(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return D.useMemo(()=>{if(ZP(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function wb(t={}){const e=ji(t);return t1e(n=>jQ(e,{onChange:n}),()=>Zy(e))}var bb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Lg=typeof window>"u"||"Deno"in globalThis;function Si(){}function n1e(t,e){return typeof t=="function"?t(e):t}function GD(t){return typeof t=="number"&&t>=0&&t!==1/0}function XQ(t,e){return Math.max(t+(e||0)-Date.now(),0)}function af(t,e){return typeof t=="function"?t(e):t}function ka(t,e){return typeof t=="function"?t(e):t}function k4(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==_U(o,e.options))return!1}else if(!DC(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function D4(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Ug(e.options.mutationKey)!==Ug(i))return!1}else if(!DC(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function _U(t,e){return((e==null?void 0:e.queryKeyHashFn)||Ug)(t)}function Ug(t){return JSON.stringify(t,(e,n)=>qD(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function DC(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>DC(t[n],e[n])):!1}function AU(t,e){if(t===e)return t;const n=M4(t)&&M4(e);if(n||qD(t)&&qD(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=AU(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function cI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function M4(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function qD(t){if(!L4(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!L4(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function L4(t){return Object.prototype.toString.call(t)==="[object Object]"}function r1e(t){return new Promise(e=>{setTimeout(e,t)})}function VD(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?AU(t,e):e}function s1e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function i1e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var SU=Symbol();function eJ(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===SU?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function tJ(t,e){return typeof t=="function"?t(...e):!!t}var Lp,ah,l0,XW,o1e=(XW=class extends bb{constructor(){super();Q(this,Lp);Q(this,ah);Q(this,l0);L(this,l0,e=>{if(!Lg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){C(this,ah)||this.setEventListener(C(this,l0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,ah))==null||e.call(this),L(this,ah,void 0))}setEventListener(e){var n;L(this,l0,e),(n=C(this,ah))==null||n.call(this),L(this,ah,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){C(this,Lp)!==e&&(L(this,Lp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof C(this,Lp)=="boolean"?C(this,Lp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Lp=new WeakMap,ah=new WeakMap,l0=new WeakMap,XW),xU=new o1e,u0,ch,d0,ez,a1e=(ez=class extends bb{constructor(){super();Q(this,u0,!0);Q(this,ch);Q(this,d0);L(this,d0,e=>{if(!Lg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){C(this,ch)||this.setEventListener(C(this,d0))}onUnsubscribe(){var e;this.hasListeners()||((e=C(this,ch))==null||e.call(this),L(this,ch,void 0))}setEventListener(e){var n;L(this,d0,e),(n=C(this,ch))==null||n.call(this),L(this,ch,e(this.setOnline.bind(this)))}setOnline(e){C(this,u0)!==e&&(L(this,u0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return C(this,u0)}},u0=new WeakMap,ch=new WeakMap,d0=new WeakMap,ez),lI=new a1e;function KD(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function c1e(t){return Math.min(1e3*2**t,3e4)}function nJ(t){return(t??"online")==="online"?lI.isOnline():!0}var rJ=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function XP(t){return t instanceof rJ}function sJ(t){let e=!1,n=0,r=!1,s;const i=KD(),o=g=>{var w;r||(h(new rJ(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>xU.isFocused()&&(t.networkMode==="always"||lI.isOnline())&&t.canRun(),u=()=>nJ(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var I;if(r)return;const b=t.retry??(Lg?0:3),v=t.retryDelay??c1e,A=typeof v=="function"?v(n,y):v,_=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!_){h(y);return}n++,(I=t.onFail)==null||I.call(t,n,y),r1e(A).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var l1e=t=>setTimeout(t,0);function u1e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=l1e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var rs=u1e(),Up,tz,iJ=(tz=class{constructor(){Q(this,Up)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),GD(this.gcTime)&&L(this,Up,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Lg?1/0:5*60*1e3))}clearGcTimeout(){C(this,Up)&&(clearTimeout(C(this,Up)),L(this,Up,void 0))}},Up=new WeakMap,tz),h0,$p,Sa,Bp,si,C_,Fp,bc,Eu,nz,d1e=(nz=class extends iJ{constructor(e){super();Q(this,bc);Q(this,h0);Q(this,$p);Q(this,Sa);Q(this,Bp);Q(this,si);Q(this,C_);Q(this,Fp);L(this,Fp,!1),L(this,C_,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,Bp,e.client),L(this,Sa,C(this,Bp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,h0,h1e(this.options)),this.state=e.state??C(this,h0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=C(this,si))==null?void 0:e.promise}setOptions(e){this.options={...C(this,C_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&C(this,Sa).remove(this)}setData(e,n){const r=VD(this.state.data,e,this.options);return he(this,bc,Eu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){he(this,bc,Eu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=C(this,si))==null?void 0:r.promise;return(s=C(this,si))==null||s.cancel(e),n?n.then(Si).catch(Si):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(C(this,h0))}isActive(){return this.observers.some(e=>ka(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===SU||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>af(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!XQ(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,si))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=C(this,si))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),C(this,Sa).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(C(this,si)&&(C(this,Fp)?C(this,si).cancel({revert:!0}):C(this,si).cancelRetry()),this.scheduleGc()),C(this,Sa).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,bc,Eu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(C(this,si))return C(this,si).continueRetry(),C(this,si).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(L(this,Fp,!0),r.signal)})},i=()=>{const h=eJ(this.options,n),p=(()=>{const g={client:C(this,Bp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return L(this,Fp,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:C(this,Bp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),L(this,$p,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&he(this,bc,Eu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;XP(h)&&h.silent||he(this,bc,Eu).call(this,{type:"error",error:h}),XP(h)||((p=(f=C(this,Sa).config).onError)==null||p.call(f,h,this),(w=(g=C(this,Sa).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return L(this,si,sJ({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=C(this,Sa).config).onSuccess)==null||p.call(f,h,this),(w=(g=C(this,Sa).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{he(this,bc,Eu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{he(this,bc,Eu).call(this,{type:"pause"})},onContinue:()=>{he(this,bc,Eu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),C(this,si).start()}},h0=new WeakMap,$p=new WeakMap,Sa=new WeakMap,Bp=new WeakMap,si=new WeakMap,C_=new WeakMap,Fp=new WeakMap,bc=new WeakSet,Eu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...oJ(r.data,this.options),fetchMeta:e.meta??null};case"success":return L(this,$p,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return XP(s)&&s.revert&&C(this,$p)?{...C(this,$p),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),rs.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),C(this,Sa).notify({query:this,type:"updated",action:e})})},nz);function oJ(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:nJ(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function h1e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var fl,rz,f1e=(rz=class extends bb{constructor(e={}){super();Q(this,fl);this.config=e,L(this,fl,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??_U(s,n);let o=this.get(i);return o||(o=new d1e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){C(this,fl).has(e.queryHash)||(C(this,fl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=C(this,fl).get(e.queryHash);n&&(e.destroy(),n===e&&C(this,fl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return C(this,fl).get(e)}getAll(){return[...C(this,fl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>k4(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>k4(e,r)):n}notify(e){rs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){rs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},fl=new WeakMap,rz),pl,vi,jp,gl,Vd,sz,p1e=(sz=class extends iJ{constructor(e){super();Q(this,gl);Q(this,pl);Q(this,vi);Q(this,jp);this.mutationId=e.mutationId,L(this,vi,e.mutationCache),L(this,pl,[]),this.state=e.state||aJ(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){C(this,pl).includes(e)||(C(this,pl).push(e),this.clearGcTimeout(),C(this,vi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,pl,C(this,pl).filter(n=>n!==e)),this.scheduleGc(),C(this,vi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){C(this,pl).length||(this.state.status==="pending"?this.scheduleGc():C(this,vi).remove(this))}continue(){var e;return((e=C(this,jp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,A,_,I,x,N;const n=()=>{he(this,gl,Vd).call(this,{type:"continue"})};L(this,jp,sJ({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,O)=>{he(this,gl,Vd).call(this,{type:"failed",failureCount:S,error:O})},onPause:()=>{he(this,gl,Vd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>C(this,vi).canRun(this)}));const r=this.state.status==="pending",s=!C(this,jp).canStart();try{if(r)n();else{he(this,gl,Vd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=C(this,vi).config).onMutate)==null?void 0:o.call(i,e,this));const O=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));O!==this.state.context&&he(this,gl,Vd).call(this,{type:"pending",context:O,variables:e,isPaused:s})}const S=await C(this,jp).start();return await((u=(l=C(this,vi).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=C(this,vi).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),he(this,gl,Vd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=C(this,vi).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((I=(_=C(this,vi).config).onSettled)==null?void 0:I.call(_,void 0,S,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,S,e,this.state.context)),S}finally{he(this,gl,Vd).call(this,{type:"error",error:S})}}finally{C(this,vi).runNext(this)}}},pl=new WeakMap,vi=new WeakMap,jp=new WeakMap,gl=new WeakSet,Vd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),rs.batch(()=>{C(this,pl).forEach(r=>{r.onMutationUpdate(e)}),C(this,vi).notify({mutation:this,type:"updated",action:e})})},sz);function aJ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ru,vc,__,iz,g1e=(iz=class extends bb{constructor(e={}){super();Q(this,Ru);Q(this,vc);Q(this,__);this.config=e,L(this,Ru,new Set),L(this,vc,new Map),L(this,__,0)}build(e,n,r){const s=new p1e({mutationCache:this,mutationId:++Sd(this,__)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){C(this,Ru).add(e);const n=PA(e);if(typeof n=="string"){const r=C(this,vc).get(n);r?r.push(e):C(this,vc).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(C(this,Ru).delete(e)){const n=PA(e);if(typeof n=="string"){const r=C(this,vc).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&C(this,vc).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=PA(e);if(typeof n=="string"){const r=C(this,vc).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=PA(e);if(typeof n=="string"){const s=(r=C(this,vc).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){rs.batch(()=>{C(this,Ru).forEach(e=>{this.notify({type:"removed",mutation:e})}),C(this,Ru).clear(),C(this,vc).clear()})}getAll(){return Array.from(C(this,Ru))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>D4(n,r))}findAll(e={}){return this.getAll().filter(n=>D4(e,n))}notify(e){rs.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return rs.batch(()=>Promise.all(e.map(n=>n.continue().catch(Si))))}},Ru=new WeakMap,vc=new WeakMap,__=new WeakMap,iz);function PA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function U4(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=eJ(e.options,e.fetchOptions),b=async(v,A,_)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:_?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await y(x),{maxPages:S}=e.options,O=_?i1e:s1e;return{pages:O(v.pages,N,S),pageParams:O(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?m1e:$4,_={pages:i,pageParams:o},I=A(r,_);a=await b(_,I,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:$4(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function $4(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function m1e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var xr,lh,uh,f0,p0,dh,g0,m0,oz,y1e=(oz=class{constructor(t={}){Q(this,xr);Q(this,lh);Q(this,uh);Q(this,f0);Q(this,p0);Q(this,dh);Q(this,g0);Q(this,m0);L(this,xr,t.queryCache||new f1e),L(this,lh,t.mutationCache||new g1e),L(this,uh,t.defaultOptions||{}),L(this,f0,new Map),L(this,p0,new Map),L(this,dh,0)}mount(){Sd(this,dh)._++,C(this,dh)===1&&(L(this,g0,xU.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,xr).onFocus())})),L(this,m0,lI.subscribe(async t=>{t&&(await this.resumePausedMutations(),C(this,xr).onOnline())})))}unmount(){var t,e;Sd(this,dh)._--,C(this,dh)===0&&((t=C(this,g0))==null||t.call(this),L(this,g0,void 0),(e=C(this,m0))==null||e.call(this),L(this,m0,void 0))}isFetching(t){return C(this,xr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return C(this,lh).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,xr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=C(this,xr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(af(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return C(this,xr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=C(this,xr).get(r.queryHash),i=s==null?void 0:s.state.data,o=n1e(e,i);if(o!==void 0)return C(this,xr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return rs.batch(()=>C(this,xr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=C(this,xr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=C(this,xr);rs.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=C(this,xr);return rs.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=rs.batch(()=>C(this,xr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Si).catch(Si)}invalidateQueries(t,e={}){return rs.batch(()=>(C(this,xr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=rs.batch(()=>C(this,xr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Si)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Si)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=C(this,xr).build(this,e);return n.isStaleByTime(af(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Si).catch(Si)}fetchInfiniteQuery(t){return t.behavior=U4(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Si).catch(Si)}ensureInfiniteQueryData(t){return t.behavior=U4(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return lI.isOnline()?C(this,lh).resumePausedMutations():Promise.resolve()}getQueryCache(){return C(this,xr)}getMutationCache(){return C(this,lh)}getDefaultOptions(){return C(this,uh)}setDefaultOptions(t){L(this,uh,t)}setQueryDefaults(t,e){C(this,f0).set(Ug(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...C(this,f0).values()],n={};return e.forEach(r=>{DC(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){C(this,p0).set(Ug(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...C(this,p0).values()],n={};return e.forEach(r=>{DC(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...C(this,uh).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_U(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===SU&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...C(this,uh).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){C(this,xr).clear(),C(this,lh).clear()}},xr=new WeakMap,lh=new WeakMap,uh=new WeakMap,f0=new WeakMap,p0=new WeakMap,dh=new WeakMap,g0=new WeakMap,m0=new WeakMap,oz),ro,nn,A_,Ei,Wp,y0,hh,fh,S_,w0,b0,zp,Hp,ph,v0,In,Mv,YD,QD,JD,ZD,XD,e3,t3,cJ,az,w1e=(az=class extends bb{constructor(e,n){super();Q(this,In);Q(this,ro);Q(this,nn);Q(this,A_);Q(this,Ei);Q(this,Wp);Q(this,y0);Q(this,hh);Q(this,fh);Q(this,S_);Q(this,w0);Q(this,b0);Q(this,zp);Q(this,Hp);Q(this,ph);Q(this,v0,new Set);this.options=n,L(this,ro,e),L(this,fh,null),L(this,hh,KD()),this.options.experimental_prefetchInRender||C(this,hh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(C(this,nn).addObserver(this),B4(C(this,nn),this.options)?he(this,In,Mv).call(this):this.updateResult(),he(this,In,ZD).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return n3(C(this,nn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return n3(C(this,nn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,In,XD).call(this),he(this,In,e3).call(this),C(this,nn).removeObserver(this)}setOptions(e){const n=this.options,r=C(this,nn);if(this.options=C(this,ro).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ka(this.options.enabled,C(this,nn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,In,t3).call(this),C(this,nn).setOptions(this.options),n._defaulted&&!cI(this.options,n)&&C(this,ro).getQueryCache().notify({type:"observerOptionsUpdated",query:C(this,nn),observer:this});const s=this.hasListeners();s&&F4(C(this,nn),r,this.options,n)&&he(this,In,Mv).call(this),this.updateResult(),s&&(C(this,nn)!==r||ka(this.options.enabled,C(this,nn))!==ka(n.enabled,C(this,nn))||af(this.options.staleTime,C(this,nn))!==af(n.staleTime,C(this,nn)))&&he(this,In,YD).call(this);const i=he(this,In,QD).call(this);s&&(C(this,nn)!==r||ka(this.options.enabled,C(this,nn))!==ka(n.enabled,C(this,nn))||i!==C(this,ph))&&he(this,In,JD).call(this,i)}getOptimisticResult(e){const n=C(this,ro).getQueryCache().build(C(this,ro),e),r=this.createResult(n,e);return v1e(this,r)&&(L(this,Ei,r),L(this,y0,this.options),L(this,Wp,C(this,nn).state)),r}getCurrentResult(){return C(this,Ei)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){C(this,v0).add(e)}getCurrentQuery(){return C(this,nn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=C(this,ro).defaultQueryOptions(e),r=C(this,ro).getQueryCache().build(C(this,ro),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,In,Mv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),C(this,Ei)))}createResult(e,n){var S;const r=C(this,nn),s=this.options,i=C(this,Ei),o=C(this,Wp),a=C(this,y0),l=e!==r?e.state:C(this,A_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const O=this.hasListeners(),P=!O&&B4(e,n),F=O&&F4(e,r,n,s);(P||F)&&(d={...d,...oJ(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let O;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(O=i.data,y=!0):O=typeof n.placeholderData=="function"?n.placeholderData((S=C(this,b0))==null?void 0:S.state.data,C(this,b0)):n.placeholderData,O!==void 0&&(w="success",f=VD(i==null?void 0:i.data,O,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===C(this,S_))f=C(this,w0);else try{L(this,S_,n.select),f=n.select(f),f=VD(i==null?void 0:i.data,f,n),L(this,w0,f),L(this,fh,null)}catch(O){L(this,fh,O)}C(this,fh)&&(p=C(this,fh),f=C(this,w0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",_=v&&b,I=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:_,isLoading:_,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!I,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&I,isStale:IU(e,n),refetch:this.refetch,promise:C(this,hh),isEnabled:ka(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const O=G=>{N.status==="error"?G.reject(N.error):N.data!==void 0&&G.resolve(N.data)},P=()=>{const G=L(this,hh,N.promise=KD());O(G)},F=C(this,hh);switch(F.status){case"pending":e.queryHash===r.queryHash&&O(F);break;case"fulfilled":(N.status==="error"||N.data!==F.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==F.reason)&&P();break}}return N}updateResult(){const e=C(this,Ei),n=this.createResult(C(this,nn),this.options);if(L(this,Wp,C(this,nn).state),L(this,y0,this.options),C(this,Wp).data!==void 0&&L(this,b0,C(this,nn)),cI(n,e))return;L(this,Ei,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!C(this,v0).size)return!0;const o=new Set(i??C(this,v0));return this.options.throwOnError&&o.add("error"),Object.keys(C(this,Ei)).some(a=>{const c=a;return C(this,Ei)[c]!==e[c]&&o.has(c)})};he(this,In,cJ).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,In,ZD).call(this)}},ro=new WeakMap,nn=new WeakMap,A_=new WeakMap,Ei=new WeakMap,Wp=new WeakMap,y0=new WeakMap,hh=new WeakMap,fh=new WeakMap,S_=new WeakMap,w0=new WeakMap,b0=new WeakMap,zp=new WeakMap,Hp=new WeakMap,ph=new WeakMap,v0=new WeakMap,In=new WeakSet,Mv=function(e){he(this,In,t3).call(this);let n=C(this,nn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Si)),n},YD=function(){he(this,In,XD).call(this);const e=af(this.options.staleTime,C(this,nn));if(Lg||C(this,Ei).isStale||!GD(e))return;const r=XQ(C(this,Ei).dataUpdatedAt,e)+1;L(this,zp,setTimeout(()=>{C(this,Ei).isStale||this.updateResult()},r))},QD=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(C(this,nn)):this.options.refetchInterval)??!1},JD=function(e){he(this,In,e3).call(this),L(this,ph,e),!(Lg||ka(this.options.enabled,C(this,nn))===!1||!GD(C(this,ph))||C(this,ph)===0)&&L(this,Hp,setInterval(()=>{(this.options.refetchIntervalInBackground||xU.isFocused())&&he(this,In,Mv).call(this)},C(this,ph)))},ZD=function(){he(this,In,YD).call(this),he(this,In,JD).call(this,he(this,In,QD).call(this))},XD=function(){C(this,zp)&&(clearTimeout(C(this,zp)),L(this,zp,void 0))},e3=function(){C(this,Hp)&&(clearInterval(C(this,Hp)),L(this,Hp,void 0))},t3=function(){const e=C(this,ro).getQueryCache().build(C(this,ro),this.options);if(e===C(this,nn))return;const n=C(this,nn);L(this,nn,e),L(this,A_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},cJ=function(e){rs.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(C(this,Ei))}),C(this,ro).getQueryCache().notify({query:C(this,nn),type:"observerResultsUpdated"})})},az);function b1e(t,e){return ka(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function B4(t,e){return b1e(t,e)||t.state.data!==void 0&&n3(t,e,e.refetchOnMount)}function n3(t,e,n){if(ka(e.enabled,t)!==!1&&af(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&IU(t,e)}return!1}function F4(t,e,n,r){return(t!==e||ka(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&IU(t,n)}function IU(t,e){return ka(e.enabled,t)!==!1&&t.isStaleByTime(af(e.staleTime,t))}function v1e(t,e){return!cI(t.getCurrentResult(),e)}var gh,mh,so,Pu,ad,DS,r3,cz,E1e=(cz=class extends bb{constructor(n,r){super();Q(this,ad);Q(this,gh);Q(this,mh);Q(this,so);Q(this,Pu);L(this,gh,n),this.setOptions(r),this.bindMethods(),he(this,ad,DS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=C(this,gh).defaultMutationOptions(n),cI(this.options,r)||C(this,gh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:C(this,so),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ug(r.mutationKey)!==Ug(this.options.mutationKey)?this.reset():((s=C(this,so))==null?void 0:s.state.status)==="pending"&&C(this,so).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=C(this,so))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,ad,DS).call(this),he(this,ad,r3).call(this,n)}getCurrentResult(){return C(this,mh)}reset(){var n;(n=C(this,so))==null||n.removeObserver(this),L(this,so,void 0),he(this,ad,DS).call(this),he(this,ad,r3).call(this)}mutate(n,r){var s;return L(this,Pu,r),(s=C(this,so))==null||s.removeObserver(this),L(this,so,C(this,gh).getMutationCache().build(C(this,gh),this.options)),C(this,so).addObserver(this),C(this,so).execute(n)}},gh=new WeakMap,mh=new WeakMap,so=new WeakMap,Pu=new WeakMap,ad=new WeakSet,DS=function(){var r;const n=((r=C(this,so))==null?void 0:r.state)??aJ();L(this,mh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},r3=function(n){rs.batch(()=>{var r,s,i,o,a,c,l,u;if(C(this,Pu)&&this.hasListeners()){const d=C(this,mh).variables,h=C(this,mh).context;(n==null?void 0:n.type)==="success"?((s=(r=C(this,Pu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=C(this,Pu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=C(this,Pu)).onError)==null||c.call(a,n.error,d,h),(u=(l=C(this,Pu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(C(this,mh))})})},cz);function C1e(t,e){return AU(t,e)}function _1e(t){return JSON.stringify(t,(e,n)=>A1e(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function A1e(t){if(!j4(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!j4(n)||!n.hasOwnProperty("isPrototypeOf"))}function j4(t){return Object.prototype.toString.call(t)==="[object Object]"}function h1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:_,placeholderData:I,refetchInterval:x,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:O,refetchOnWindowFocus:P,retryOnMount:F,select:G,staleTime:B,suspense:T,throwOnError:R,config:$,connector:k,query:M,...j}=t;return j}function S1e(t){return{mutationFn(e){return OS(t,e)},mutationKey:["connect"]}}function x1e(t){return{mutationFn(e){return BD(t,e)},mutationKey:["disconnect"]}}function I1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await FQ(t,{...i,address:r})??null},queryKey:N1e(e)}}function N1e(t={}){return["balance",h1(t)]}function T1e(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return h_e(t,{...i,address:r})},queryKey:R1e(e)}}function R1e(t={}){return["ensName",h1(t)]}function P1e(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return f_e(t,{...o,connector:r})},queryKey:O1e(e)}}function O1e(t={}){const{connector:e,...n}=t;return["walletClient",{...h1(n),connectorUid:e==null?void 0:e.uid}]}function k1e(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return BQ(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:D1e(e)}}function D1e(t={}){const{abi:e,...n}=t;return["readContract",h1(n)]}function M1e(t){return{mutationFn(e){return WD(t,e)},mutationKey:["switchChain"]}}function L1e(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return HQ(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:U1e(e)}}function U1e(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",h1(n)]}function $1e(t){return{mutationFn(e){return GQ(t,e)},mutationKey:["writeContract"]}}var lJ=D.createContext(void 0),NU=t=>{const e=D.useContext(lJ);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},B1e=({client:t,children:e})=>(D.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(lJ.Provider,{value:t,children:e})),uJ=D.createContext(!1),F1e=()=>D.useContext(uJ);uJ.Provider;function j1e(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var W1e=D.createContext(j1e()),z1e=()=>D.useContext(W1e),H1e=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},G1e=t=>{D.useEffect(()=>{t.clearReset()},[t])},q1e=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||tJ(n,[t.error,r])),V1e=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},K1e=(t,e)=>t.isLoading&&t.isFetching&&!e,Y1e=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,W4=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function Q1e(t,e,n){var d,h,f,p,g;const r=F1e(),s=z1e(),i=NU(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",V1e(o),H1e(o,s),G1e(s);const a=!i.getQueryCache().get(o.queryHash),[c]=D.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(w=>{const y=u?c.subscribe(rs.batchCalls(w)):Si;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),D.useEffect(()=>{c.setOptions(o)},[o,c]),Y1e(o,l))throw W4(o,c,s);if(q1e({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Lg&&K1e(l,r)){const w=a?W4(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Si).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function J1e(t,e){return Q1e(t,w1e)}function wT(t,e){const n=NU(),[r]=D.useState(()=>new E1e(n,t));D.useEffect(()=>{r.setOptions(t)},[r,t]);const s=D.useSyncExternalStore(D.useCallback(o=>r.subscribe(rs.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=D.useCallback((o,a)=>{r.mutate(o,a).catch(Si)},[r]);if(s.error&&tJ(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function f1(t){const e=J1e({...t,queryKeyHashFn:_1e});return e.queryKey=t.queryKey,e}function Ja(t={}){const e=ji(t);return D.useSyncExternalStore(n=>w_e(e,{onChange:n}),()=>I4(e),()=>I4(e))}function Z1e(t={}){const{address:e,query:n={}}=t,r=ji(t),s=Ja({config:r}),i=I1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return f1({...n,...i,enabled:o})}function X1e(t={}){const e=ji(t);return D.useSyncExternalStore(n=>q_e(e,{onChange:n}),()=>N4(e),()=>N4(e))}function eAe(t={}){const e=ji(t);return D.useSyncExternalStore(n=>zQ(e,{onChange:n}),()=>T4(e),()=>T4(e))}function tAe(t={}){const{mutation:e}=t,n=ji(t),r=S1e(n),{mutate:s,mutateAsync:i,...o}=wT({...e,...r});return D.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:eAe({config:n})}}function nAe(t={}){const e=ji(t);return D.useSyncExternalStore(n=>WQ(e,{onChange:n}),()=>yc(e),()=>yc(e))}function rAe(t={}){const{mutation:e}=t,n=ji(t),r=x1e(n),{mutate:s,mutateAsync:i,...o}=wT({...e,...r});return{...o,connectors:nAe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function sAe(t={}){const{address:e,query:n={}}=t,r=ji(t),s=Ja({config:r}),i=T1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return f1({...n,...i,enabled:o})}function iAe(t={}){const e=ji(t);return ZQ.useSyncExternalStoreWithSelector(n=>v_e(e,{onChange:n}),()=>FD(e,t),()=>FD(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function EE(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=ji(t),a=Ja({config:o}),c=k1e(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return f1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??C1e})}function TU(t={}){const{mutation:e}=t,n=ji(t),r=M1e(n),{mutate:s,mutateAsync:i,...o}=wT({...e,...r});return{...o,chains:X1e({config:n}),switchChain:s,switchChainAsync:i}}function oAe(t={}){const{query:e={},...n}=t,r=ji(n),s=NU(),{address:i,connector:o,status:a}=wb({config:r}),c=Ja({config:r}),l=t.connector??o,{queryKey:u,...d}=P1e(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=D.useRef(i);return D.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),f1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function Lv(t={}){const{hash:e,query:n={}}=t,r=ji(t),s=Ja({config:r}),i=L1e(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return f1({...n,...i,enabled:o})}function Uv(t={}){const{mutation:e}=t,n=ji(t),r=$1e(n),{mutate:s,mutateAsync:i,...o}=wT({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const uI=tQ({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),Jo=tQ({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}}),aAe=Yc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),cAe=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=aAe({isOpen:t}),i=D.useRef(null),[o,a]=D.useState([]),[c,l]=D.useState(!1),[u,d]=D.useState(!1),[h,f]=D.useState({}),[p,g]=D.useState(null),[w,y]=D.useState(null),b=Ja(),{switchChain:v}=TU();D.useEffect(()=>{t&&r&&A()},[t,r]);const A=async()=>{if(l(!0),g(null),b!==Jo.id){g(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${b}`),l(!1);return}try{const S=await nK(r);a(S);const O={};S.forEach(P=>{O[P.id]=0}),f(O)}catch(S){g(S.message)}finally{l(!1)}},_=(S,O)=>{f(P=>({...P,[S]:Math.max(0,O)}))},I=async()=>{const S=Object.entries(h).filter(([,O])=>O>0).map(([O,P])=>({id:O,quantity:P}));if(S.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}if(b!==Jo.id){g("Please switch to Ethereum mainnet to mint Pixelawbs");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const O=await rK(r,S);if(console.log("Mint API result:",O),O.success&&O.mintTransaction){console.log("Got mint transaction:",O.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const P=await w.sendTransaction({to:O.mintTransaction.to,value:BigInt(O.mintTransaction.value),data:O.mintTransaction.data});console.log("Transaction sent successfully:",P),alert(`NFT Minted Successfully: Transaction Hash - ${P}`),e()}catch(P){console.error("Transaction sending failed:",P),g("Transaction failed: "+P.message)}}else throw new Error(O.message||"Could not retrieve minting transaction.")}catch(O){console.error("Minting failed:",O),g("Minting failed: "+O.message)}finally{d(!1)}},x=(S,O)=>`${parseFloat(S)} ${O}`,N=()=>{n&&n()};return t?m.jsx(Z_,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsxs("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:[p,b!==Jo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>v({chainId:Jo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(S=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:S.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",x(S.token_price,S.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",S.wallet_limit===4294967295?"Unlimited":S.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:S.wallet_limit===4294967295?999:S.wallet_limit,value:h[S.id]||0,onChange:O=>_(S.id,parseInt(O.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},S.id))]}),m.jsx("button",{onClick:()=>void I(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},dJ=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",hJ=({src:t,alt:e,style:n})=>{const[r,s]=D.useState(t),[i,o]=D.useState(!1),[a,c]=D.useState(0);D.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?m.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):m.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},lAe=Yc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),uAe=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},dAe=({nft:t,onClose:e})=>{const n=lAe(),r=D.useRef(null),s=uAe(t.attributes);return m.jsx(Z_,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx(hJ,{src:dJ(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},hAe=Symbol(),z4=Object.getPrototypeOf,s3=new WeakMap,fAe=t=>t&&(s3.has(t)?s3.get(t):z4(t)===Object.prototype||z4(t)===Array.prototype),pAe=t=>fAe(t)&&t[hAe]||null,H4=(t,e=!0)=>{s3.set(t,e)},dI={},eO=t=>typeof t=="object"&&t!==null,Xd=new WeakMap,$v=new WeakSet,gAe=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>eO(l)&&!$v.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return H4(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if($v.has(g))H4(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(Xd.has(g)){const[b,v]=Xd.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!eO(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,O=++a[0])=>{d!==O&&(d=O,h.forEach(P=>P(S,O)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([O])=>{const P=O[1](S);P>d&&(d=P)})),d),w=S=>(O,P)=>{const F=[...O];F[1]=[S,...F[1]],f(F,P)},y=new Map,b=(S,O)=>{if((dI?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const P=O[3](w(S));y.set(S,[O,P])}else y.set(S,[O])},v=S=>{var O;const P=y.get(S);P&&(y.delete(S),(O=P[1])==null||O.call(P))},A=S=>(h.add(S),h.size===1&&y.forEach(([P,F],G)=>{if((dI?"production":void 0)!=="production"&&F)throw new Error("remove already exists");const B=P[3](w(G));y.set(G,[P,B])}),()=>{h.delete(S),h.size===0&&y.forEach(([P,F],G)=>{F&&(F(),y.set(G,[P]))})}),_=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(_,{deleteProperty(S,O){const P=Reflect.get(S,O);v(O);const F=Reflect.deleteProperty(S,O);return F&&f(["delete",[O],P]),F},set(S,O,P,F){const G=Reflect.has(S,O),B=Reflect.get(S,O,F);if(G&&(t(B,P)||o.has(P)&&t(B,o.get(P))))return!0;v(O),eO(P)&&(P=pAe(P)||P);let T=P;if(P instanceof Promise)P.then(R=>{P.status="fulfilled",P.value=R,f(["resolve",[O],R])}).catch(R=>{P.status="rejected",P.reason=R,f(["reject",[O],R])});else{!Xd.has(P)&&n(P)&&(T=c(P));const R=!$v.has(T)&&Xd.get(T);R&&b(O,R)}return Reflect.set(S,O,T,F),f(["set",[O],P,B]),!0}});o.set(l,x);const N=[_,g,i,A];return Xd.set(x,N),Reflect.ownKeys(l).forEach(S=>{const O=Object.getOwnPropertyDescriptor(l,S);"value"in O&&(x[S]=l[S],delete O.value,delete O.writable),Object.defineProperty(_,S,O)}),x})=>[c,Xd,$v,t,e,n,r,s,i,o,a],[mAe]=gAe();function lr(t={}){return mAe(t)}function hi(t,e,n){const r=Xd.get(t);(dI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function MC(t,e){const n=Xd.get(t);(dI?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function $g(t){return $v.add(t),t}function pi(t,e,n,r){let s=t[e];return hi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function yAe(t){const e=lr({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var G4={};const je={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof G4<"u"?G4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},fJ={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=je.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var wAe=20,bAe=1,Bg=1e6,q4=1e6,vAe=-7,EAe=21,CAe=!1,p1="[big.js] ",fm=p1+"Invalid ",bT=fm+"decimal places",_Ae=fm+"rounding mode",pJ=p1+"Division by zero",kn={},Wl=void 0,AAe=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function gJ(){function t(e){var n=this;if(!(n instanceof t))return e===Wl?gJ():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(fm+"value");e=e===0&&1/e<0?"-0":String(e)}SAe(n,e)}n.constructor=t}return t.prototype=kn,t.DP=wAe,t.RM=bAe,t.NE=vAe,t.PE=EAe,t.strict=CAe,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function SAe(t,e){var n,r,s;if(!AAe.test(e))throw Error(fm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function pm(t,e,n,r){var s=t.c;if(n===Wl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(_Ae);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Wl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Wl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function gm(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}kn.abs=function(){var t=new this.constructor(this);return t.s=1,t};kn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};kn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Bg)throw Error(bT);if(!s[0])throw Error(pJ);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,A=o+(y.e=e.e-t.e)+1;for(y.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Wl)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,A--),v>A&&pm(y,A,n.RM,g[0]!==Wl),y};kn.eq=function(t){return this.cmp(t)===0};kn.gt=function(t){return this.cmp(t)>0};kn.gte=function(t){return this.cmp(t)>-1};kn.lt=function(t){return this.cmp(t)<0};kn.lte=function(t){return this.cmp(t)<1};kn.minus=kn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};kn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(pJ);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};kn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};kn.plus=kn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};kn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-q4||t>q4)throw Error(fm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};kn.prec=function(t,e){if(t!==~~t||t<1||t>Bg)throw Error(fm+"precision");return pm(new this.constructor(this),t,e)};kn.round=function(t,e){if(t===Wl)t=0;else if(t!==~~t||t<-Bg||t>Bg)throw Error(bT);return pm(new this.constructor(this),t+this.e+1,e)};kn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(p1+"No square root");i=Math.sqrt(+gm(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return pm(t,(s.DP-=4)+t.e+1,s.RM)};kn.times=kn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};kn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Wl){if(t!==~~t||t<0||t>Bg)throw Error(bT);for(n=pm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return gm(n,!0,!!r)};kn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Wl){if(t!==~~t||t<0||t>Bg)throw Error(bT);for(n=pm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return gm(n,!1,!!r)};kn[Symbol.for("nodejs.util.inspect.custom")]=kn.toJSON=kn.toString=function(){var t=this,e=t.constructor;return gm(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};kn.toNumber=function(){var t=+gm(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(p1+"Imprecise conversion");return t};kn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Wl){if(t!==~~t||t<1||t>Bg)throw Error(fm+"precision");for(n=pm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return gm(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};kn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(p1+"valueOf disallowed");return gm(t,t.e<=e.NE||t.e>=e.PE,!0)};var kl=gJ();const xAe={bigNumber(t){return t?new kl(t):new kl(0)},multiply(t,e){if(t===void 0||e===void 0)return new kl(0);const n=new kl(t),r=new kl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},IAe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],NAe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],TAe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],RAe={getERC20Abi:t=>je.USDT_CONTRACT_ADDRESSES.includes(t)?TAe:IAe,getSwapAbi:()=>NAe},Od={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Mt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function tO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Nt={setItem(t,e){Bv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Bv())return localStorage.getItem(t)||void 0},removeItem(t){Bv()&&localStorage.removeItem(t)},clear(){Bv()&&localStorage.clear()}};function Bv(){return typeof window<"u"&&typeof localStorage<"u"}function Qu(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var V4={};const nO=(typeof process<"u"&&typeof V4<"u"?V4.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",mJ=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],PAe="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Bn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:nO,SECURE_SITE_DASHBOARD:`${nO}/dashboard`,SECURE_SITE_FAVICON:`${nO}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ye={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ye.getActiveNamespace(),e=Ye.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Nt.setItem(Mt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Nt.getItem(Mt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Nt.removeItem(Mt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Nt.setItem(Mt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Nt.setItem(Mt.ACTIVE_CAIP_NETWORK_ID,t),Ye.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Nt.getItem(Mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Nt.removeItem(Mt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=tO(t);Nt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ye.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Nt.setItem(Mt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Nt.getItem(Mt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=tO(t);Nt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Nt.getItem(Mt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=tO(t);return Nt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Nt.setItem(Mt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Nt.getItem(Mt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Nt.removeItem(Mt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Nt.getItem(Mt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Nt.getItem(Mt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Nt.setItem(Mt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Nt.getItem(Mt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Nt.getItem(Mt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Nt.setItem(Mt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ye.getConnectedNamespaces();e.includes(t)||(e.push(t),Ye.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ye.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ye.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Nt.getItem(Mt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Nt.setItem(Mt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Nt.removeItem(Mt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Nt.getItem(Mt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ye.getBalanceCache();Nt.setItem(Mt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ye.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ye.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ye.getBalanceCache();e[t.caipAddress]=t,Nt.setItem(Mt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Nt.getItem(Mt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ye.getBalanceCache();Nt.setItem(Mt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ye.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ye.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ye.getNativeBalanceCache();e[t.caipAddress]=t,Nt.setItem(Mt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Nt.getItem(Mt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ye.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ye.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ye.getEnsCache();e[t.address]=t,Nt.setItem(Mt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ye.getEnsCache();Nt.setItem(Mt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Nt.getItem(Mt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ye.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ye.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ye.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Nt.setItem(Mt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ye.getIdentityCache();Nt.setItem(Mt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Nt.removeItem(Mt.PORTFOLIO_CACHE),Nt.removeItem(Mt.NATIVE_BALANCE_CACHE),Nt.removeItem(Mt.ENS_CACHE),Nt.removeItem(Mt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Nt.setItem(Mt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Nt.getItem(Mt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Ye.getConnections(),[e]:t};Nt.setItem(Mt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Nt.getItem(Mt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ct={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ct.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Bn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Bn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ct.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Bn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ct.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ct.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ye.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ct.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return je.W3M_API_URL},getBlockchainApiUrl(){return je.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return je.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Bn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in je.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function lv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let g1=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await lv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await lv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await lv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const OAe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Bn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ct.isTelegram()){if(ct.isIos())return t.filter(e=>e!=="google");if(ct.isMac())return t.filter(e=>e!=="x");if(ct.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},ft=lr({features:Bn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Bn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),we={state:ft,subscribeKey(t,e){return pi(ft,t,e)},setOptions(t){Object.assign(ft,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...ft.remoteFeatures,...t};ft.remoteFeatures=e,(n=ft.remoteFeatures)!=null&&n.socials&&(ft.remoteFeatures.socials=OAe.filterSocialsByPlatform(ft.remoteFeatures.socials))},setFeatures(t){if(!t)return;ft.features||(ft.features=Bn.DEFAULT_FEATURES);const e={...ft.features,...t};ft.features=e},setProjectId(t){ft.projectId=t},setCustomRpcUrls(t){ft.customRpcUrls=t},setAllWallets(t){ft.allWallets=t},setIncludeWalletIds(t){ft.includeWalletIds=t},setExcludeWalletIds(t){ft.excludeWalletIds=t},setFeaturedWalletIds(t){ft.featuredWalletIds=t},setTokens(t){ft.tokens=t},setTermsConditionsUrl(t){ft.termsConditionsUrl=t},setPrivacyPolicyUrl(t){ft.privacyPolicyUrl=t},setCustomWallets(t){ft.customWallets=t},setIsSiweEnabled(t){ft.isSiweEnabled=t},setIsUniversalProvider(t){ft.isUniversalProvider=t},setSdkVersion(t){ft.sdkVersion=t},setMetadata(t){ft.metadata=t},setDisableAppend(t){ft.disableAppend=t},setEIP6963Enabled(t){ft.enableEIP6963=t},setDebug(t){ft.debug=t},setEnableWalletConnect(t){ft.enableWalletConnect=t},setEnableWalletGuide(t){ft.enableWalletGuide=t},setEnableAuthLogger(t){ft.enableAuthLogger=t},setEnableWallets(t){ft.enableWallets=t},setPreferUniversalLinks(t){ft.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){ft.hasMultipleAddresses=t},setSIWX(t){ft.siwx=t},setConnectMethodsOrder(t){ft.features={...ft.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){ft.features={...ft.features,walletFeaturesOrder:t}},setSocialsOrder(t){ft.remoteFeatures={...ft.remoteFeatures,socials:t}},setCollapseWallets(t){ft.features={...ft.features,collapseWallets:t}},setEnableEmbedded(t){ft.enableEmbedded=t},setAllowUnsupportedChain(t){ft.allowUnsupportedChain=t},setManualWCControl(t){ft.manualWCControl=t},setEnableNetworkSwitch(t){ft.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(ft.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){ft.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return ft.universalProviderConfigOverride},getSnapshot(){return MC(ft)}},kAe=Object.freeze({enabled:!0,events:[]}),DAe=new g1({baseUrl:ct.getAnalyticsUrl(),clientId:null}),MAe=5,LAe=60*1e3,kd=lr({...kAe}),UAe={state:kd,subscribeKey(t,e){return pi(kd,t,e)},async sendError(t,e){if(!kd.enabled)return;const n=Date.now();if(kd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<LAe}).length>=MAe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};kd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=we.state;await DAe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ct.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){kd.enabled=!0},disable(){kd.enabled=!1},clearEvents(){kd.events=[]}};let i3=class o3 extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,o3.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,o3):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function K4(t,e){const n=t instanceof i3?t:new i3(t instanceof Error?t.message:String(t),e,t);throw UAe.sendError(n,n.category),n}function da(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return K4(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return K4(a,e)}},n[r]=i}else n[r]=s}),n}const xl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},$Ae={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===xl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${xl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===xl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${xl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===je.CHAIN.SOLANA&&t===xl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${xl.COINBASE.url}/dapp?cb_url=${r}`)}},Po=lr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),BAe={state:Po,subscribeNetworkImages(t){return hi(Po.networkImages,()=>t(Po.networkImages))},subscribeKey(t,e){return pi(Po,t,e)},subscribe(t){return hi(Po,()=>t(Po))},setWalletImage(t,e){Po.walletImages[t]=e},setNetworkImage(t,e){Po.networkImages[t]=e},setChainImage(t,e){Po.chainImages[t]=e},setConnectorImage(t,e){Po.connectorImages={...Po.connectorImages,[t]:e}},setTokenImage(t,e){Po.tokenImages[t]=e},setCurrencyImage(t,e){Po.currencyImages[t]=e}},Nc=da(BAe),FAe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},rO=lr({networkImagePromises:{}}),yJ={async fetchWalletImage(t){if(t)return await lt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(rO.networkImagePromises[t]||(rO.networkImagePromises[t]=lt._fetchNetworkImage(t)),await rO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Nc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Nc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Nc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Nc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Nc.state.connectorImages[t.imageId]},getChainImage(t){return Nc.state.networkImages[FAe[t]]}},Dd=lr({message:"",variant:"info",open:!1}),jAe={state:Dd,subscribeKey(t,e){return pi(Dd,t,e)},open(t,e){const{debug:n}=we.state,{shortMessage:r,longMessage:s}=t;n&&(Dd.message=r,Dd.variant=e,Dd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Dd.open=!1,Dd.message="",Dd.variant="info"}},Dl=da(jAe),WAe=ct.getAnalyticsUrl(),zAe=new g1({baseUrl:WAe,clientId:null}),HAe=["MODAL_CREATED"],uu=lr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),gr={state:uu,subscribe(t){return hi(uu,()=>t(uu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=we.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ke.state.address;if(HAe.includes(t.data.event)||typeof window>"u")return;await zAe.post({path:"/e",params:gr.getSdkProperties(),body:{eventId:ct.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),uu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===je.HTTP_STATUS_CODES.FORBIDDEN&&!uu.reportedErrors.FORBIDDEN&&(Dl.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Bv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),uu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;uu.timestamp=Date.now(),uu.data=t,(e=we.state.features)!=null&&e.analytics&&gr._sendAnalyticsEvent(uu)}},GAe=ct.getApiUrl(),Gi=new g1({baseUrl:GAe,clientId:null}),qAe=40,Y4=4,VAe=20,Lt=lr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),lt={state:Lt,subscribeKey(t,e){return pi(Lt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=we.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return we.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Gi.baseUrl}/getWalletImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Nc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Gi.baseUrl}/public/getAssetImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Nc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Gi.baseUrl}/public/getAssetImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Nc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Gi.baseUrl}/public/getCurrencyImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Nc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Gi.baseUrl}/public/getTokenImage/${t}`,n=await Gi.getBlob({path:e,params:lt._getSdkProperties()});Nc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ct.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===xl.COINBASE.id?!0:H.state.activeChain==="solana"&&(n.id===xl.SOLFLARE.id||n.id===xl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Gi.get({path:"/appkit/v1/config",params:lt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Gi.get({path:"/projects/v1/origins",params:lt._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=H.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!yJ.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>lt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Fe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>lt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>lt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>lt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];lt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(xl).map(o=>o.id));const r=await Gi.get({path:"/getWallets",params:{...lt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:lt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=we.state;if(t!=null&&t.length){const e={...lt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??Y4,include:t},{data:n}=await lt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>lt._fetchWalletImage(i))),Lt.featured=r,Lt.allFeatured=r}},async fetchRecommendedWallets(){try{Lt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=we.state,r=[...e??[],...n??[]].filter(Boolean),s=H.getRequestedCaipNetworkIds().join(","),i={page:1,entries:Y4,include:t,exclude:r,chains:s},{data:o,count:a}=await lt.fetchWallets(i),c=Ye.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>lt._fetchWalletImage(d))),Lt.recommended=o,Lt.allRecommended=o,Lt.count=a??0}catch{}finally{Lt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=we.state,s=H.getRequestedCaipNetworkIds().join(","),i=[...Lt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:qAe,include:e,exclude:i,chains:s},{data:a,count:c}=await lt.fetchWallets(o),l=a.slice(0,VAe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>lt._fetchWalletImage(u))),Lt.wallets=ct.uniqueBy([...Lt.wallets,...lt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Lt.count=c>Lt.count?c:Lt.count,Lt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await lt.fetchWallets(e);n&&n.forEach(r=>{Lt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=we.state,s=H.getRequestedCaipNetworkIds().join(",");Lt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await lt.fetchWallets(i);gr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>lt._fetchWalletImage(c)),ct.wait(300)]),Lt.search=lt._filterOutExtensions(o)},initPromise(t,e){const n=Lt.promises[t];return n||(Lt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&lt.initPromise("connectorImages",lt.fetchConnectorImages),e&&lt.initPromise("featuredWallets",lt.fetchFeaturedWallets),n&&lt.initPromise("recommendedWallets",lt.fetchRecommendedWallets),r&&lt.initPromise("networkImages",lt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=we.state.features)!=null&&t.analytics&&lt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Gi.get({path:"/getAnalyticsConfig",params:lt._getSdkProperties()});we.setFeatures({analytics:t})}catch{we.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Lt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Mn=lr({view:"Connect",history:["Connect"],transactionStack:[]}),KAe={state:Mn,subscribeKey(t,e){return pi(Mn,t,e)},pushTransactionStack(t){Mn.transactionStack.push(t)},popTransactionStack(t){const e=Mn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),zt.goBack();break;case"cancel":s==null||s(),zt.goBack();break}},push(t,e){t!==Mn.view&&(Mn.view=t,Mn.history.push(t),Mn.data=e)},reset(t,e){Mn.view=t,Mn.history=[t],Mn.data=e},replace(t,e){Mn.history.at(-1)===t||(Mn.view=t,Mn.history[Mn.history.length-1]=t,Mn.data=e)},goBack(){var r;const t=H.state.activeCaipAddress,e=zt.state.view==="ConnectingFarcaster",n=!t&&e;if(Mn.history.length>1){Mn.history.pop();const[s]=Mn.history.slice(-1);s&&(t&&s==="Connect"?Mn.view="Account":Mn.view=s)}else Cs.close();(r=Mn.data)!=null&&r.wallet&&(Mn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ke.setFarcasterUrl(void 0,H.state.activeChain);const a=Fe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=MC(we.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Mn.history.length>1){Mn.history=Mn.history.slice(0,t+1);const[e]=Mn.history.slice(-1);e&&(Mn.view=e)}},goBackOrCloseModal(){zt.state.history.length>1?zt.goBack():Cs.close()}},zt=da(KAe),du=lr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),a3={state:du,subscribe(t){return hi(du,()=>t(du))},setThemeMode(t){du.themeMode=t;try{const e=Fe.getAuthConnector();if(e){const n=a3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:Qu(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){du.themeVariables={...du.themeVariables,...t};try{const e=Fe.getAuthConnector();if(e){const n=a3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:Qu(du.themeVariables,du.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return MC(du)}},co=da(a3),wJ={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},pn=lr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...wJ},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),YAe={state:pn,subscribe(t){return hi(pn,()=>{t(pn)})},subscribeKey(t,e){return pi(pn,t,e)},initialize(t){t.forEach(e=>{const n=Ye.getConnectedConnectorId(e);n&&Fe.setConnectorId(n,e)})},setActiveConnector(t){t&&(pn.activeConnector=$g(t))},setConnectors(t){t.filter(s=>!pn.allConnectors.some(i=>i.id===s.id&&Fe.getConnectorName(i.name)===Fe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&pn.allConnectors.push($g(s))});const n=Fe.getEnabledNamespaces(),r=Fe.getEnabledConnectors(n);pn.connectors=Fe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(pn.filterByNamespaceMap).forEach(e=>{pn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{pn.filterByNamespaceMap[e]=!0}),Fe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){pn.filterByNamespaceMap[t]=e,Fe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Fe.getEnabledNamespaces(),e=Fe.getEnabledConnectors(t),n=Fe.areAllNamespacesEnabled();pn.connectors=Fe.mergeMultiChainConnectors(e),n?lt.clearFilterByNamespaces():lt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(pn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return pn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(pn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Fe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===je.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Fe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===je.CONNECTOR_ID.AUTH){const s=t,i=MC(we.state),o=co.getSnapshot().themeMode,a=co.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:Qu(a,o)}),Fe.setConnectors([t])}else Fe.setConnectors([t])},getAuthConnector(t){var r;const e=t||H.state.activeChain,n=pn.connectors.find(s=>s.id===je.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return pn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return pn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return pn.allConnectors.filter(r=>r.chain===H.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=MC(we.state),r=co.getSnapshot().themeMode,s=co.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:Qu(s,r)})},getConnectorsByNamespace(t){const e=pn.allConnectors.filter(n=>n.chain===t);return Fe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Fe.getConnector(t.id,t.rdns),n=H.state.activeChain;$Ae.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?zt.push("ConnectingExternal",{connector:e}):zt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Fe.getConnectorsByNamespace(t):Fe.mergeMultiChainConnectors(pn.allConnectors)},setFilterByNamespace(t){pn.filterByNamespace=t,pn.connectors=Fe.getConnectors(t),lt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(pn.activeConnectorIds={...pn.activeConnectorIds,[e]:t},Ye.setConnectedConnectorId(e,t))},removeConnectorId(t){pn.activeConnectorIds={...pn.activeConnectorIds,[t]:void 0},Ye.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return pn.activeConnectorIds[t]},isConnected(t){return t?!!pn.activeConnectorIds[t]:Object.values(pn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){pn.activeConnectorIds={...wJ}}},Fe=da(YAe);var Pw={};const QAe="https://secure.walletconnect.org/sdk",JAe=(typeof process<"u"&&typeof Pw<"u"?Pw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||QAe,ZAe=(typeof process<"u"&&typeof Pw<"u"?Pw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",XAe=(typeof process<"u"&&typeof Pw<"u"?Pw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",qe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Hs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},sp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Yr=lr({...sp}),eSe={state:Yr,subscribeKey(t,e){return pi(Yr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ct.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Yr.message=sp.message,Yr.variant=sp.variant,Yr.svg=sp.svg,Yr.open=sp.open,Yr.autoClose=sp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=sp.autoClose}){Yr.open?(Yr.open=!1,setTimeout(()=>{Yr.message=t,Yr.variant=n,Yr.svg=e,Yr.open=!0,Yr.autoClose=r},150)):(Yr.message=t,Yr.variant=n,Yr.svg=e,Yr.open=!0,Yr.autoClose=r)}},kc=eSe,Yn=lr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),tSe={state:Yn,subscribe(t){return hi(Yn,()=>t(Yn))},setLastNetworkInView(t){Yn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Yn.loading=!0;try{const s=await gt.fetchTransactions({account:t,cursor:Yn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Fv.filterSpamTransactions(s.data),o=Fv.filterByConnectedChain(i),a=[...Yn.transactions,...o];Yn.loading=!1,e==="coinbase"?Yn.coinbaseTransactions=Fv.groupTransactionsByYearAndMonth(Yn.coinbaseTransactions,s.data):(Yn.transactions=a,Yn.transactionsByYear=Fv.groupTransactionsByYearAndMonth(Yn.transactionsByYear,o)),Yn.empty=a.length===0,Yn.next=s.next?s.next:void 0}catch{const i=H.state.activeChain;gr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:we.state.projectId,cursor:Yn.next,isSmartAccount:((r=Ke.state.preferredAccountTypes)==null?void 0:r[i])===Hs.ACCOUNT_TYPES.SMART_ACCOUNT}}),kc.showError("Failed to fetch transactions"),Yn.loading=!1,Yn.empty=!0,Yn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Yn.next=void 0},resetTransactions(){Yn.transactions=[],Yn.transactionsByYear={},Yn.lastNetworkInView=void 0,Yn.loading=!1,Yn.empty=!1,Yn.next=void 0}},Fv=da(tSe,"API_ERROR"),Gn=lr({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let Gf;const nSe={state:Gn,subscribeKey(t,e){return pi(Gn,t,e)},_getClient(){return Gn._client},setClient(t){Gn._client=$g(t)},async connectWalletConnect(){var t,e,n,r;if(ct.isTelegram()||ct.isSafari()&&ct.isIos()){if(Gf){await Gf,Gf=void 0;return}if(!ct.isPairingExpired(Gn==null?void 0:Gn.wcPairingExpiry)){const s=Gn.wcUri;Gn.wcUri=s;return}Gf=(e=(t=mt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),mt.state.status="connecting",await Gf,Gf=void 0,Gn.wcPairingExpiry=void 0,mt.state.status="connected"}else await((r=(n=mt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=mt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&H.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=mt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||H.state.activeChain;e&&Fe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Cs.setLoading(!0,H.state.activeChain);const n=Fe.getAuthConnector();n&&(Ke.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ye.setPreferredAccountTypes(Ke.state.preferredAccountTypes??{[e]:t}),await mt.reconnectExternal(n),Cs.setLoading(!1,H.state.activeChain),gr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=mt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=mt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=mt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=mt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=mt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=mt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=mt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=mt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=mt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=mt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=mt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=mt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Gn.wcUri=void 0,Gn.wcPairingExpiry=void 0,Gn.wcLinking=void 0,Gn.recentWallet=void 0,Gn.status="disconnected",Fv.resetTransactions(),Ye.deleteWalletConnectDeepLink()},resetUri(){Gn.wcUri=void 0,Gn.wcPairingExpiry=void 0,Gf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=mt.state;t&&Ye.setWalletConnectDeepLink(t),e&&Ye.setAppKitRecent(e),gr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=zt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Gn.wcBasic=t},setUri(t){Gn.wcUri=t,Gn.wcPairingExpiry=ct.getPairingExpiry()},setWcLinking(t){Gn.wcLinking=t},setWcError(t){Gn.wcError=t,Gn.buffering=!1},setRecentWallet(t){Gn.recentWallet=t},setBuffering(t){Gn.buffering=t},setStatus(t){Gn.status=t},async disconnect(t){var e;try{await((e=mt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new i3("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Gn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Fe.state.activeConnectorIds[n]===t.connectorId){const i=H.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ke.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Fe.getConnector(t.connectorId);i?mt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},mt=da(nSe),Bm=lr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),zl={state:Bm,subscribe(t){return hi(Bm,()=>t(Bm))},subscribeOpen(t){return pi(Bm,"open",t)},set(t){Object.assign(Bm,{...Bm,...t})}},sO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return lm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},Q4={async getMyTokensWithBalance(t){const e=Ke.state.address,n=H.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await gt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=sO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await mt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await mt.walletGetAssets({account:t,chainFilter:[s]});return sO.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>sO.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:H.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rn=lr({tokenBalances:[],loading:!1}),rSe={state:Rn,subscribe(t){return hi(Rn,()=>t(Rn))},subscribeKey(t,e){return pi(Rn,t,e)},setToken(t){t&&(Rn.token=$g(t))},setTokenAmount(t){Rn.sendTokenAmount=t},setReceiverAddress(t){Rn.receiverAddress=t},setReceiverProfileImageUrl(t){Rn.receiverProfileImageUrl=t},setReceiverProfileName(t){Rn.receiverProfileName=t},setNetworkBalanceInUsd(t){Rn.networkBalanceInUSD=t},setLoading(t){Rn.loading=t},async sendToken(){var t;try{switch(Cn.setLoading(!0),(t=H.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await Cn.sendEvmToken();return;case"solana":await Cn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{Cn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=H.state.activeChain,e=(n=Ke.state.preferredAccountTypes)==null?void 0:n[t];if(!Cn.state.sendTokenAmount||!Cn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!Cn.state.token)throw new Error("A token is required");(r=Cn.state.token)!=null&&r.address?(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Cn.state.token.address,amount:Cn.state.sendTokenAmount,network:((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await Cn.sendERC20Token({receiverAddress:Cn.state.receiverAddress,tokenAddress:Cn.state.token.address,sendTokenAmount:Cn.state.sendTokenAmount,decimals:Cn.state.token.quantity.decimals})):(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:Cn.state.token.symbol||"",amount:Cn.state.sendTokenAmount,network:((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await Cn.sendNativeToken({receiverAddress:Cn.state.receiverAddress,sendTokenAmount:Cn.state.sendTokenAmount,decimals:Cn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rn.loading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?ct.getPlainAddress(r):void 0;if(Rn.lastRetry&&!ct.isAllowedRetry(Rn.lastRetry,30*Bn.ONE_SEC_MS))return Rn.loading=!1,[];try{if(s&&e&&n){const a=await Q4.getMyTokensWithBalance();return Rn.tokenBalances=a,Rn.lastRetry=void 0,a}}catch(a){Rn.lastRetry=Date.now(),t==null||t(a),kc.showError("Token Balance Unavailable")}finally{Rn.loading=!1}return[]},fetchNetworkBalance(){if(Rn.tokenBalances.length===0)return;const t=Q4.mapBalancesToSwapTokens(Rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===H.getActiveNetworkTokenAddress());e&&(Rn.networkBalanceInUSD=e?xAe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;zt.pushTransactionStack({});const e=t.receiverAddress,n=Ke.state.address,r=mt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await mt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),gr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ke.state.preferredAccountTypes)==null?void 0:i.eip155)===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=Cn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=mt._getClient())==null||c.updateBalance("eip155"),Cn.resetSend()},async sendERC20Token(t){zt.pushTransactionStack({onSuccess(){zt.replace("Account")}});const e=mt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ke.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ct.getPlainAddress(t.tokenAddress);await mt.writeContract({fromAddress:Ke.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:RAe.getERC20Abi(n),chainNamespace:"eip155"}),Cn.resetSend()}},async sendSolanaToken(){var t;if(!Cn.state.sendTokenAmount||!Cn.state.receiverAddress)throw new Error("An amount and receiver address are required");zt.pushTransactionStack({onSuccess(){zt.replace("Account")}}),await mt.sendTransaction({chainNamespace:"solana",to:Cn.state.receiverAddress,value:Cn.state.sendTokenAmount}),(t=mt._getClient())==null||t.updateBalance("solana"),Cn.resetSend()},resetSend(){Rn.token=void 0,Rn.sendTokenAmount=void 0,Rn.receiverAddress=void 0,Rn.receiverProfileImageUrl=void 0,Rn.receiverProfileName=void 0,Rn.loading=!1,Rn.tokenBalances=[]}},Cn=da(rSe),iO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},OA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},ke=lr({chains:yAe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),sSe={state:ke,subscribe(t){return hi(ke,()=>{t(ke)})},subscribeKey(t,e){return pi(ke,t,e)},subscribeChainProp(t,e,n){let r;return hi(ke.chains,()=>{var i;const s=n||ke.activeChain;if(s){const o=(i=ke.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ye.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=we.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(ke.noAdapters=!0),ke.noAdapters||(ke.activeChain=a==null?void 0:a.namespace,ke.activeCaipNetwork=i,H.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),ke.activeChain&&zl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);H.state.chains.set(u,{namespace:u,networkState:lr({...OA,caipNetwork:d==null?void 0:d[0]}),accountState:lr(iO),caipNetworks:d??[],...n}),H.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(ke.activeChain===t){const r=Array.from(ke.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&H.setActiveCaipNetwork(s)}}ke.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){ke.chains.set(t.namespace,{namespace:t.namespace,networkState:{...OA,caipNetwork:r[0]},accountState:iO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),H.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=ke.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),ke.chains.set(t.chainNamespace,{...e,caipNetworks:r}),H.setRequestedCaipNetworks(r,t.chainNamespace),Fe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=ke.chains.get(t);if(n){const o=((r=ke.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&H.setActiveCaipNetwork(n.caipNetworks[0]),ke.chains.set(t,{...n,caipNetworks:a}),H.setRequestedCaipNetworks(a||[],t),a.length===0&&Fe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=ke.chains.get(t);n&&(n.networkState={...n.networkState||OA,...e},ke.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=ke.chains.get(t);if(r){const s={...r.accountState||iO,...e};ke.chains.set(t,{...r,accountState:s}),(ke.chains.size===1||ke.activeChain===t)&&(e.caipAddress&&(ke.activeCaipAddress=e.caipAddress),Ke.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=ke.chains.get(t);if(n){const r={...n.networkState||OA,...e};ke.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){H.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Fe.removeConnectorId(n)},setActiveNamespace(t){var r,s;ke.activeChain=t;const e=t?ke.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(ke.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,ke.activeCaipNetwork=n,H.setChainNetworkData(t,{caipNetwork:n}),Ye.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),zl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;ke.activeChain!==t.chainNamespace&&H.setIsSwitchingNamespace(!0);const e=ke.chains.get(t.chainNamespace);ke.activeChain=t.chainNamespace,ke.activeCaipNetwork=t,H.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?ke.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:ke.activeCaipAddress=void 0,H.setAccountProp("caipAddress",ke.activeCaipAddress,t.chainNamespace),e&&Ke.replaceState(e.accountState),Cn.resetSend(),zl.set({activeChain:ke.activeChain,selectedNetworkId:(i=ke.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ye.setActiveCaipNetworkId(t.caipNetworkId),!H.checkIfSupportedNetwork(t.chainNamespace)&&we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&!mt.state.wcBasic&&H.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=ke.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==H.state.activeChain,n=(s=H.getNetworkData(t))==null?void 0:s.caipNetwork,r=H.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await H.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=H.state.chains.get(H.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=ke.activeCaipNetwork)==null?void 0:o.id)})),r=H.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Cs.close()}catch{zt.goBack()}gr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||ke.activeChain,n=ke.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||ke.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=ke.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=ke.activeChain;if(e&&(n=e),!n)return;const r=(s=ke.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=ke.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=ke.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ct.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return ke.chains.forEach(e=>{const n=H.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){H.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=H.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Fe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return ke.chains.forEach(e=>{const n=H.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return ke.activeCaipNetwork},getActiveCaipAddress(){return ke.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=ke.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=H.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());H.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||ke.activeCaipNetwork,r=H.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!ke.activeChain)return!0;const e=H.getRequestedCaipNetworks(ke.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){H.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=fJ.caipNetworkIdToNumber((r=ke.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=ke.activeChain;if(!e||!t)return!1;const n=H.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=ke.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=ke.activeCaipNetwork)==null?void 0:s.id)||1,n=Bn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Cs.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=ke.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Bn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){H.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");ke.activeCaipAddress=void 0,H.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Fe.removeConnectorId(e)},setIsSwitchingNamespace(t){ke.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(ke.chains.forEach(s=>{je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=ke.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=H.state.chains.get(t))==null?void 0:e.accountState:Ke.state},getNetworkData(t){var n;const e=t||ke.activeChain;if(e)return(n=H.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=H.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Fe.state.filterByNamespace;return(t?[ke.chains.get(t)]:Array.from(ke.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?H.getRequestedCaipNetworks(t):H.getAllRequestedCaipNetworks()}},H=da(sSe),iSe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},bJ=ct.getBlockchainApiUrl(),qi=lr({clientId:null,api:new g1({baseUrl:bJ,clientId:null}),supportedChains:{http:[],ws:[]}}),gt={state:qi,async get(t){const{st:e,sv:n}=gt.getSdkProperties(),r=we.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return qi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=we.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{qi.supportedChains.http.length||await gt.getSupportedNetworks()}catch{return!1}return qi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await gt.get({path:"v1/supported-chains"});return qi.supportedChains=t,t}catch{return qi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await gt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ye.getIdentityFromCacheForAddress(t);if(r)return r;const s=await gt.get({path:`/v1/identity/${t}`,params:{sender:H.state.activeCaipAddress?ct.getPlainAddress(H.state.activeCaipAddress):void 0}});return Ye.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await gt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?gt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await gt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?gt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await gt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?gt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await gt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?qi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:we.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await gt.isNetworkSupported((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?gt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=gt.getSdkProperties();if(!await gt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return gt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await gt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return qi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Bn.CONVERT_SLIPPAGE_TOLERANCE},projectId:we.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=gt.getSdkProperties();if(!await gt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return gt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=gt.getSdkProperties();if(!await gt.isNetworkSupported((l=H.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return kc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ye.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await gt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ye.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await gt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?gt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await gt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?gt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ke.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await gt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?gt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await gt.isNetworkSupported((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?qi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await gt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await qi.api.post({path:"/v1/generators/onrampurl",params:{projectId:we.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await gt.isNetworkSupported((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await gt.get({path:"/v1/onramp/options"})}catch{return iSe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await gt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await qi.api.post({path:"/v1/onramp/quote",params:{projectId:we.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await gt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?gt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await gt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?qi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:we.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){qi.clientId=t,qi.api=new g1({baseUrl:bJ,clientId:t})}},fa=lr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),oSe={state:fa,replaceState(t){t&&Object.assign(fa,$g(t))},subscribe(t){return H.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return H.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){H.setAccountProp("status",t,e)},getCaipAddress(t){return H.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ct.getPlainAddress(t):void 0;e===H.state.activeChain&&(H.state.activeCaipAddress=t),H.setAccountProp("caipAddress",t,e),H.setAccountProp("address",n,e)},setBalance(t,e,n){H.setAccountProp("balance",t,n),H.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){H.setAccountProp("profileName",t,e)},setProfileImage(t,e){H.setAccountProp("profileImage",t,e)},setUser(t,e){H.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){H.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){H.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){H.setAccountProp("currentTab",t,H.state.activeChain)},setTokenBalance(t,e){t&&H.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){H.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){H.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=H.getAccountProp("addressLabels",n)||new Map;r.set(t,e),H.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=H.getAccountProp("addressLabels",e)||new Map;n.delete(t),H.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){H.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){H.setAccountProp("preferredAccountTypes",{...fa.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){fa.preferredAccountTypes=t},setSocialProvider(t,e){t&&H.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){H.setAccountProp("socialWindow",t?$g(t):void 0,e)},setFarcasterUrl(t,e){H.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;fa.balanceLoading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?ct.getPlainAddress(r):void 0;if(fa.lastRetry&&!ct.isAllowedRetry(fa.lastRetry,30*Bn.ONE_SEC_MS))return fa.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await gt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ke.setTokenBalance(c,n),fa.lastRetry=void 0,fa.balanceLoading=!1,c}}catch(a){fa.lastRetry=Date.now(),t==null||t(a),kc.showError("Token Balance Unavailable")}finally{fa.balanceLoading=!1}return[]},resetAccount(t){H.resetAccount(t)}},Ke=da(oSe),aSe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=H.state.activeCaipNetwork,r=zt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ke.getCaipAddress(H.state.activeChain),o=t.chainNamespace!==H.state.activeChain,a=Ke.getCaipAddress(t.chainNamespace),l=Fe.getConnectorId(H.state.activeChain)===je.CONNECTOR_ID.AUTH,u=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?zt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?zt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):zt.push("SwitchNetwork",{...r,network:t})}},Vi=lr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),cSe={state:Vi,subscribe(t){return hi(Vi,()=>t(Vi))},subscribeKey(t,e){return pi(Vi,t,e)},async open(t){var o,a;const e=Ke.state.status==="connected",n=t==null?void 0:t.namespace,r=H.state.activeChain,s=n&&n!==r,i=(o=H.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(mt.state.wcBasic?lt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await lt.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Fe.setFilterByNamespace(t==null?void 0:t.namespace),Cs.setLoading(!0,n),n&&s){const c=((a=H.getNetworkData(n))==null?void 0:a.caipNetwork)||H.getRequestedCaipNetworks(n)[0];c&&aSe.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=H.state.noAdapters;we.state.manualWCControl||c&&!i?ct.isMobile()?zt.reset("AllWallets"):zt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?zt.reset(t.view,t.data):i?zt.reset("Account"):zt.reset("Connect")}Vi.open=!0,zl.set({open:!0}),gr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=we.state.enableEmbedded,e=!!H.state.activeCaipAddress;Vi.open&&gr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Vi.open=!1,zt.reset("Connect"),Cs.clearLoading(),t?e?zt.replace("Account"):zt.push("Connect"):zl.set({open:!1}),mt.resetUri()},setLoading(t,e){e&&Vi.loadingNamespaceMap.set(e,t),Vi.loading=t,zl.set({loading:t})},clearLoading(){Vi.loadingNamespaceMap.clear(),Vi.loading=!1},shake(){Vi.shake||(Vi.shake=!0,setTimeout(()=>{Vi.shake=!1},500))}},Cs=da(cSe),CE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},c3={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},lSe={providers:mJ,selectedProvider:null,error:null,purchaseCurrency:CE,paymentCurrency:c3,purchaseCurrencies:[CE],paymentCurrencies:[],quotesLoading:!1},un=lr(lSe),uSe={state:un,subscribe(t){return hi(un,()=>t(un))},subscribeKey(t,e){return pi(un,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=H.state.activeChain===je.CHAIN.SOLANA?"SOL":"USDC",n=Ke.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",PAe),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",we.state.projectId),un.selectedProvider={...t,url:r.toString()}}else un.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=mJ.filter(r=>e.includes(r.name));un.providers=n}else un.providers=[]},setPurchaseCurrency(t){un.purchaseCurrency=t},setPaymentCurrency(t){un.paymentCurrency=t},setPurchaseAmount(t){l3.state.purchaseAmount=t},setPaymentAmount(t){l3.state.paymentAmount=t},async getAvailableCurrencies(){const t=await gt.getOnrampOptions();un.purchaseCurrencies=t.purchaseCurrencies,un.paymentCurrencies=t.paymentCurrencies,un.paymentCurrency=t.paymentCurrencies[0]||c3,un.purchaseCurrency=t.purchaseCurrencies[0]||CE,await lt.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await lt.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;un.quotesLoading=!0;try{const n=await gt.getOnrampQuote({purchaseCurrency:un.purchaseCurrency,paymentCurrency:un.paymentCurrency,amount:((t=un.paymentAmount)==null?void 0:t.toString())||"0",network:(e=un.purchaseCurrency)==null?void 0:e.symbol});return un.quotesLoading=!1,un.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return un.error=n.message,un.quotesLoading=!1,null}finally{un.quotesLoading=!1}},resetState(){un.selectedProvider=null,un.error=null,un.purchaseCurrency=CE,un.paymentCurrency=c3,un.purchaseCurrencies=[CE],un.paymentCurrencies=[],un.paymentAmount=void 0,un.purchaseAmount=void 0,un.quotesLoading=!1}},l3=da(uSe),J4=2147483648,dSe={convertEVMChainIdToCoinType(t){if(t>=J4)throw new Error("Invalid chainId");return(J4|t)>>>0}},pa=lr({suggestions:[],loading:!1}),hSe={state:pa,subscribe(t){return hi(pa,()=>t(pa))},subscribeKey(t,e){return pi(pa,t,e)},async resolveName(t){var e,n;try{return await gt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await gt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{pa.loading=!0,pa.suggestions=[];const e=await gt.getEnsNameSuggestions(t);return pa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],pa.suggestions}catch(e){const n=_E.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{pa.loading=!1}},async getNamesForAddress(t){try{if(!H.state.activeCaipNetwork)return[];const n=Ye.getEnsFromCacheForAddress(t);if(n)return n;const r=await gt.reverseLookupEnsName({address:t});return Ye.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=_E.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=H.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ke.state.address,r=Fe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");pa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});zt.pushTransactionStack({onCancel(){zt.replace("RegisterAccountName")}});const i=await mt.signMessage(s);pa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=dSe.convertEVMChainIdToCoinType(Number(o));await gt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ke.setProfileName(t,e.chainNamespace),zt.replace("RegisterAccountNameSuccess")}catch(s){const i=_E.parseEnsApiError(s,`Error registering name ${t}`);throw zt.replace("RegisterAccountName"),new Error(i)}finally{pa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},_E=da(hSe);var RU={exports:{}},Xy=typeof Reflect=="object"?Reflect:null,Z4=Xy&&typeof Xy.apply=="function"?Xy.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},MS;Xy&&typeof Xy.ownKeys=="function"?MS=Xy.ownKeys:Object.getOwnPropertySymbols?MS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:MS=function(e){return Object.getOwnPropertyNames(e)};function fSe(t){console&&console.warn&&console.warn(t)}var vJ=Number.isNaN||function(e){return e!==e};function Wn(){Wn.init.call(this)}RU.exports=Wn;RU.exports.once=ySe;Wn.EventEmitter=Wn;Wn.prototype._events=void 0;Wn.prototype._eventsCount=0;Wn.prototype._maxListeners=void 0;var X4=10;function vT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Wn,"defaultMaxListeners",{enumerable:!0,get:function(){return X4},set:function(t){if(typeof t!="number"||t<0||vJ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");X4=t}});Wn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Wn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||vJ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function EJ(t){return t._maxListeners===void 0?Wn.defaultMaxListeners:t._maxListeners}Wn.prototype.getMaxListeners=function(){return EJ(this)};Wn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")Z4(c,this,n);else for(var l=c.length,u=xJ(c,l),r=0;r<l;++r)Z4(u[r],this,n);return!0};function CJ(t,e,n,r){var s,i,o;if(vT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=EJ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,fSe(a)}return t}Wn.prototype.addListener=function(e,n){return CJ(this,e,n,!1)};Wn.prototype.on=Wn.prototype.addListener;Wn.prototype.prependListener=function(e,n){return CJ(this,e,n,!0)};function pSe(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _J(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=pSe.bind(r);return s.listener=n,r.wrapFn=s,s}Wn.prototype.once=function(e,n){return vT(n),this.on(e,_J(this,e,n)),this};Wn.prototype.prependOnceListener=function(e,n){return vT(n),this.prependListener(e,_J(this,e,n)),this};Wn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(vT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():gSe(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Wn.prototype.off=Wn.prototype.removeListener;Wn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function AJ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?mSe(s):xJ(s,s.length)}Wn.prototype.listeners=function(e){return AJ(this,e,!0)};Wn.prototype.rawListeners=function(e){return AJ(this,e,!1)};Wn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):SJ.call(t,e)};Wn.prototype.listenerCount=SJ;function SJ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Wn.prototype.eventNames=function(){return this._eventsCount>0?MS(this._events):[]};function xJ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function gSe(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function mSe(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function ySe(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}IJ(t,e,i,{once:!0}),e!=="error"&&wSe(t,s,{once:!0})})}function wSe(t,e,n){typeof t.on=="function"&&IJ(t,"error",e,n)}function IJ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Za=RU.exports;const PU=nm(Za);var Te={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var u3=function(t,e){return u3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},u3(t,e)};function bSe(t,e){u3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var d3=function(){return d3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d3.apply(this,arguments)};function vSe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function ESe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function CSe(t,e){return function(n,r){e(n,r,t)}}function _Se(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ASe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function SSe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function xSe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function ISe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function h3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function NJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function NSe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(NJ(arguments[e]));return t}function TSe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function LC(t){return this instanceof LC?(this.v=t,this):new LC(t)}function RSe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof LC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function PSe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:LC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function OSe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof h3=="function"?h3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function kSe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function DSe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function MSe(t){return t&&t.__esModule?t:{default:t}}function LSe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function USe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const $Se=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return d3},__asyncDelegator:PSe,__asyncGenerator:RSe,__asyncValues:OSe,__await:LC,__awaiter:ASe,__classPrivateFieldGet:LSe,__classPrivateFieldSet:USe,__createBinding:xSe,__decorate:ESe,__exportStar:ISe,__extends:bSe,__generator:SSe,__importDefault:MSe,__importStar:DSe,__makeTemplateObject:kSe,__metadata:_Se,__param:CSe,__read:NJ,__rest:vSe,__spread:NSe,__spreadArrays:TSe,__values:h3},Symbol.toStringTag,{value:"Module"})),ET=dz($Se);var oO={},uv={},eF;function BSe(){if(eF)return uv;eF=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return uv.delay=t,uv}var qf={},aO={},Vf={},tF;function FSe(){return tF||(tF=1,Object.defineProperty(Vf,"__esModule",{value:!0}),Vf.ONE_THOUSAND=Vf.ONE_HUNDRED=void 0,Vf.ONE_HUNDRED=100,Vf.ONE_THOUSAND=1e3),Vf}var cO={},nF;function jSe(){return nF||(nF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(cO)),cO}var rF;function TJ(){return rF||(rF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ET;e.__exportStar(FSe(),t),e.__exportStar(jSe(),t)}(aO)),aO}var sF;function WSe(){if(sF)return qf;sF=1,Object.defineProperty(qf,"__esModule",{value:!0}),qf.fromMiliseconds=qf.toMiliseconds=void 0;const t=TJ();function e(r){return r*t.ONE_THOUSAND}qf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return qf.fromMiliseconds=n,qf}var iF;function zSe(){return iF||(iF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ET;e.__exportStar(BSe(),t),e.__exportStar(WSe(),t)}(oO)),oO}var Fm={},oF;function HSe(){if(oF)return Fm;oF=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Fm.Watch=t,Fm.default=t,Fm}var lO={},dv={},aF;function GSe(){if(aF)return dv;aF=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.IWatch=void 0;class t{}return dv.IWatch=t,dv}var cF;function qSe(){return cF||(cF=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),ET.__exportStar(GSe(),t)}(lO)),lO}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=ET;e.__exportStar(zSe(),t),e.__exportStar(HSe(),t),e.__exportStar(qSe(),t),e.__exportStar(TJ(),t)})(Te);class mm{}let VSe=class extends mm{constructor(e){super()}};const lF=Te.FIVE_SECONDS,ym={pulse:"heartbeat_pulse"};let KSe=class RJ extends VSe{constructor(e){super(e),this.events=new Za.EventEmitter,this.interval=lF,this.interval=(e==null?void 0:e.interval)||lF}static async init(e){const n=new RJ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),Te.toMiliseconds(this.interval))}pulse(){this.events.emit(ym.pulse)}};const YSe=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,QSe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JSe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ZSe(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){XSe(t);return}return e}function XSe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function kA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!JSe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(YSe.test(t)||QSe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,ZSe)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function wm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function PJ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=wm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let uO;function m1(){return uO||(uO=PJ("keyval-store","keyval")),uO}function uF(t,e=m1()){return e("readonly",n=>wm(n.get(t)))}function exe(t,e,n=m1()){return n("readwrite",r=>(r.put(e,t),wm(r.transaction)))}function txe(t,e=m1()){return e("readwrite",n=>(n.delete(t),wm(n.transaction)))}function nxe(t=m1()){return t("readwrite",e=>(e.clear(),wm(e.transaction)))}function rxe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},wm(t.transaction)}function sxe(t=m1()){return t("readonly",e=>{if(e.getAllKeys)return wm(e.getAllKeys());const n=[];return rxe(e,r=>n.push(r.key)).then(()=>n)})}const ixe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),oxe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Fg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return oxe(t)}catch{return t}}function md(t){return typeof t=="string"?t:ixe(t)||""}function axe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var cxe=lxe;function lxe(t,e,n){var r=n&&n.stringify||axe,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const dF=cxe;var dy=Hl;const UC=bxe().console||{},uxe={mapHttpRequest:DA,mapHttpResponse:DA,wrapRequestSerializer:dO,wrapResponseSerializer:dO,wrapErrorSerializer:dO,req:DA,res:DA,err:gxe};function dxe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Hl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||UC;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=dxe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=$C),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:mxe(t)};c.levels=Hl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=$C,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=f3());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,jm(l,c,"error","log"),jm(l,c,"fatal","error"),jm(l,c,"warn","error"),jm(l,c,"info","log"),jm(l,c,"debug","log"),jm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,CT([p],b,y,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Wm(A,p,"error"),this.fatal=Wm(A,p,"fatal"),this.warn=Wm(A,p,"warn"),this.info=Wm(A,p,"info"),this.debug=Wm(A,p,"debug"),this.trace=Wm(A,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=f3([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Hl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Hl.stdSerializers=uxe;Hl.stdTimeFunctions=Object.assign({},{nullTime:OJ,epochTime:kJ,unixTime:yxe,isoTime:wxe});function jm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?$C:s[n]?s[n]:UC[n]||UC[r]||$C,hxe(t,e,n)}function hxe(t,e,n){!t.transmit&&e[n]===$C||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===UC?UC:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&CT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,fxe(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Hl.levels.values[l],d=Hl.levels.values[n];if(d<u)return;pxe(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Hl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function fxe(t,e,n,r){t._serialize&&CT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Hl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?dF(s.shift(),s):void 0}else typeof i=="string"&&(i=dF(s.shift(),s));return i!==void 0&&(o.msg=i),o}function CT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Hl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Wm(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function pxe(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;CT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=f3(c)}function f3(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function gxe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function mxe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?OJ:kJ}function DA(){return{}}function dO(t){return t}function $C(){}function OJ(){return!1}function kJ(){return Date.now()}function yxe(){return Math.round(Date.now()/1e3)}function wxe(){return new Date(Date.now()).toISOString()}function bxe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const y1=nm(dy),vxe={level:"info"},w1="custom_context",OU=1e3*1024;let Exe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},hF=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Exe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},DJ=class{constructor(e,n=OU){this.level=e??"error",this.levelValue=dy.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new hF(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===dy.levels.values.error?console.error(e):n===dy.levels.values.warn?console.warn(e):n===dy.levels.values.debug?console.debug(e):n===dy.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(md({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new hF(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(md({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Cxe=class{constructor(e,n=OU){this.baseChunkLogger=new DJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},_xe=class{constructor(e,n=OU){this.baseChunkLogger=new DJ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Axe=Object.defineProperty,Sxe=Object.defineProperties,xxe=Object.getOwnPropertyDescriptors,fF=Object.getOwnPropertySymbols,Ixe=Object.prototype.hasOwnProperty,Nxe=Object.prototype.propertyIsEnumerable,pF=(t,e,n)=>e in t?Axe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hI=(t,e)=>{for(var n in e||(e={}))Ixe.call(e,n)&&pF(t,n,e[n]);if(fF)for(var n of fF(e))Nxe.call(e,n)&&pF(t,n,e[n]);return t},fI=(t,e)=>Sxe(t,xxe(e));function bm(t){return fI(hI({},t),{level:(t==null?void 0:t.level)||vxe.level})}function Txe(t,e=w1){return t[e]||""}function Rxe(t,e,n=w1){return t[n]=e,t}function No(t,e=w1){let n="";return typeof t.bindings>"u"?n=Txe(t,e):n=t.bindings().context||"",n}function Pxe(t,e,n=w1){const r=No(t,n);return r.trim()?`${r}/${e}`:e}function Ys(t,e,n=w1){const r=Pxe(t,e,n),s=t.child({context:r});return Rxe(s,r,n)}function Oxe(t){var e,n;const r=new Cxe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:y1(fI(hI({},t.opts),{level:"trace",browser:fI(hI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function kxe(t){var e;const n=new _xe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:y1(fI(hI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function _T(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Oxe(t):kxe(t)}function Dxe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function MJ(t,...e){if(!Dxe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function gF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Mxe(t,e){MJ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function Lxe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function LJ(t){return typeof t=="string"&&(t=Lxe(t)),MJ(t),t}let Uxe=class{clone(){return this._cloneInto()}};function $xe(t){const e=r=>t().update(LJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function UJ(t=32){if(zm&&typeof zm.getRandomValues=="function")return zm.getRandomValues(new Uint8Array(t));if(zm&&typeof zm.randomBytes=="function")return zm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Bxe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let Fxe=class extends Uxe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=hO(this.buffer)}update(e){gF(this);const{view:n,buffer:r,blockLen:s}=this;e=LJ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=hO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gF(this),Mxe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Bxe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=hO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const MA=BigInt(2**32-1),p3=BigInt(32);function $J(t,e=!1){return e?{h:Number(t&MA),l:Number(t>>p3&MA)}:{h:Number(t>>p3&MA)|0,l:Number(t&MA)|0}}function jxe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=$J(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Wxe=(t,e)=>BigInt(t>>>0)<<p3|BigInt(e>>>0),zxe=(t,e,n)=>t>>>n,Hxe=(t,e,n)=>t<<32-n|e>>>n,Gxe=(t,e,n)=>t>>>n|e<<32-n,qxe=(t,e,n)=>t<<32-n|e>>>n,Vxe=(t,e,n)=>t<<64-n|e>>>n-32,Kxe=(t,e,n)=>t>>>n-32|e<<64-n,Yxe=(t,e)=>e,Qxe=(t,e)=>t,Jxe=(t,e,n)=>t<<n|e>>>32-n,Zxe=(t,e,n)=>e<<n|t>>>32-n,Xxe=(t,e,n)=>e<<n-32|t>>>64-n,eIe=(t,e,n)=>t<<n-32|e>>>64-n;function tIe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const nIe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),rIe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,sIe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),iIe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,oIe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),aIe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,jt={fromBig:$J,split:jxe,toBig:Wxe,shrSH:zxe,shrSL:Hxe,rotrSH:Gxe,rotrSL:qxe,rotrBH:Vxe,rotrBL:Kxe,rotr32H:Yxe,rotr32L:Qxe,rotlSH:Jxe,rotlSL:Zxe,rotlBH:Xxe,rotlBL:eIe,add:tIe,add3L:nIe,add3H:rIe,add4L:sIe,add4H:iIe,add5H:aIe,add5L:oIe},[cIe,lIe]=jt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Md=new Uint32Array(80),Ld=new Uint32Array(80);let uIe=class extends Fxe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Md[v]=e.getUint32(n),Ld[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Md[v-15]|0,_=Ld[v-15]|0,I=jt.rotrSH(A,_,1)^jt.rotrSH(A,_,8)^jt.shrSH(A,_,7),x=jt.rotrSL(A,_,1)^jt.rotrSL(A,_,8)^jt.shrSL(A,_,7),N=Md[v-2]|0,S=Ld[v-2]|0,O=jt.rotrSH(N,S,19)^jt.rotrBH(N,S,61)^jt.shrSH(N,S,6),P=jt.rotrSL(N,S,19)^jt.rotrBL(N,S,61)^jt.shrSL(N,S,6),F=jt.add4L(x,P,Ld[v-7],Ld[v-16]),G=jt.add4H(F,I,O,Md[v-7],Md[v-16]);Md[v]=G|0,Ld[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=jt.rotrSH(d,h,14)^jt.rotrSH(d,h,18)^jt.rotrBH(d,h,41),_=jt.rotrSL(d,h,14)^jt.rotrSL(d,h,18)^jt.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=jt.add5L(b,_,x,lIe[v],Ld[v]),S=jt.add5H(N,y,A,I,cIe[v],Md[v]),O=N|0,P=jt.rotrSH(r,s,28)^jt.rotrBH(r,s,34)^jt.rotrBH(r,s,39),F=jt.rotrSL(r,s,28)^jt.rotrBL(r,s,34)^jt.rotrBL(r,s,39),G=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=jt.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=jt.add3L(O,F,B);r=jt.add3H(T,S,P,G),s=T|0}({h:r,l:s}=jt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=jt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=jt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=jt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=jt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=jt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=jt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=jt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Md.fill(0),Ld.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const dIe=$xe(()=>new uIe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const kU=BigInt(0),BJ=BigInt(1),hIe=BigInt(2);function DU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function MU(t){if(!DU(t))throw new Error("Uint8Array expected")}function fO(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const fIe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function LU(t){MU(t);let e="";for(let n=0;n<t.length;n++)e+=fIe[t[n]];return e}function FJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?kU:BigInt("0x"+t)}const hu={_0:48,_9:57,A:65,F:70,a:97,f:102};function mF(t){if(t>=hu._0&&t<=hu._9)return t-hu._0;if(t>=hu.A&&t<=hu.F)return t-(hu.A-10);if(t>=hu.a&&t<=hu.f)return t-(hu.a-10)}function jJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=mF(t.charCodeAt(i)),a=mF(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function pIe(t){return FJ(LU(t))}function LS(t){return MU(t),FJ(LU(Uint8Array.from(t).reverse()))}function WJ(t,e){return jJ(t.toString(16).padStart(e*2,"0"))}function g3(t,e){return WJ(t,e).reverse()}function fu(t,e,n){let r;if(typeof e=="string")try{r=jJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(DU(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function yF(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];MU(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const pO=t=>typeof t=="bigint"&&kU<=t;function gIe(t,e,n){return pO(t)&&pO(e)&&pO(n)&&e<=t&&t<n}function hv(t,e,n,r){if(!gIe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function mIe(t){let e;for(e=0;t>kU;t>>=BJ,e+=1);return e}const yIe=t=>(hIe<<BigInt(t-1))-BJ,wIe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||DU(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function UU(t,e,n={}){const r=(s,i,o)=>{const a=wIe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function wF(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const _s=BigInt(0),Ur=BigInt(1),dp=BigInt(2),bIe=BigInt(3),m3=BigInt(4),bF=BigInt(5),vF=BigInt(8);function ts(t,e){const n=t%e;return n>=_s?n:e+n}function vIe(t,e,n){if(e<_s)throw new Error("invalid exponent, negatives unsupported");if(n<=_s)throw new Error("invalid modulus");if(n===Ur)return _s;let r=Ur;for(;e>_s;)e&Ur&&(r=r*t%n),t=t*t%n,e>>=Ur;return r}function nl(t,e,n){let r=t;for(;e-- >_s;)r*=r,r%=n;return r}function EF(t,e){if(t===_s)throw new Error("invert: expected non-zero number");if(e<=_s)throw new Error("invert: expected positive modulus, got "+e);let n=ts(t,e),r=e,s=_s,i=Ur;for(;n!==_s;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Ur)throw new Error("invert: does not exist");return ts(s,e)}function EIe(t){const e=(t-Ur)/dp;let n,r,s;for(n=t-Ur,r=0;n%dp===_s;n/=dp,r++);for(s=dp;s<t&&vIe(s,e,t)!==t-Ur;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Ur)/m3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Ur)/dp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Ur<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function CIe(t){if(t%m3===bIe){const e=(t+Ur)/m3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%vF===bF){const e=(t-bF)/vF;return function(n,r){const s=n.mul(r,dp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,dp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return EIe(t)}const _Ie=(t,e)=>(ts(t,e)&Ur)===Ur,AIe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function SIe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=AIe.reduce((r,s)=>(r[s]="function",r),e);return UU(t,n)}function xIe(t,e,n){if(n<_s)throw new Error("invalid exponent, negatives unsupported");if(n===_s)return t.ONE;if(n===Ur)return e;let r=t.ONE,s=e;for(;n>_s;)n&Ur&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ur;return r}function IIe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function zJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function HJ(t,e,n=!1,r={}){if(t<=_s)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=zJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:yIe(s),ZERO:_s,ONE:Ur,create:c=>ts(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return _s<=c&&c<t},is0:c=>c===_s,isOdd:c=>(c&Ur)===Ur,neg:c=>ts(-c,t),eql:(c,l)=>c===l,sqr:c=>ts(c*c,t),add:(c,l)=>ts(c+l,t),sub:(c,l)=>ts(c-l,t),mul:(c,l)=>ts(c*l,t),pow:(c,l)=>xIe(a,c,l),div:(c,l)=>ts(c*EF(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>EF(c,t),sqrt:r.sqrt||(c=>(o||(o=CIe(t)),o(a,c))),invertBatch:c=>IIe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?g3(c,i):WJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?LS(c):pIe(c)}});return Object.freeze(a)}const CF=BigInt(0),LA=BigInt(1);function gO(t,e){const n=e.negate();return t?n:e}function GJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function mO(t,e){GJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function NIe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function TIe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const yO=new WeakMap,qJ=new WeakMap;function wO(t){return qJ.get(t)||1}function RIe(t,e){return{constTimeNegate:gO,hasPrecomputes(n){return wO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>CF;)r&LA&&(s=s.add(i)),i=i.double(),r>>=LA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=mO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=mO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=LA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(gO(y,r[g])):a=a.add(gO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=mO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===CF)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=LA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=yO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&yO.set(r,s(i))),i},wNAFCached(n,r,s){const i=wO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=wO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){GJ(r,e),qJ.set(n,r),yO.delete(n)}}}function PIe(t,e,n,r){if(NIe(n,t),TIe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=mIe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function OIe(t){return SIe(t.Fp),UU(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...zJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const ac=BigInt(0),Ki=BigInt(1),UA=BigInt(2),kIe=BigInt(8),DIe={zip215:!0};function MIe(t){const e=OIe(t);return UU(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function LIe(t){const e=MIe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=UA<<BigInt(a*8)-Ki,u=n.create,d=HJ(e.n,e.nBitLength),h=e.uvRatio||((T,R)=>{try{return{isValid:!0,value:n.sqrt(T*n.inv(R))}}catch{return{isValid:!1,value:ac}}}),f=e.adjustScalarBytes||(T=>T),p=e.domain||((T,R,$)=>{if(fO("phflag",$),R.length||$)throw new Error("Contexts/pre-hash are not supported");return T});function g(T,R){hv("coordinate "+T,R,ac,l)}function w(T){if(!(T instanceof v))throw new Error("ExtendedPoint expected")}const y=wF((T,R)=>{const{ex:$,ey:k,ez:M}=T,j=T.is0();R==null&&(R=j?kIe:n.inv(M));const K=u($*R),ne=u(k*R),le=u(M*R);if(j)return{x:ac,y:Ki};if(le!==Ki)throw new Error("invZ was invalid");return{x:K,y:ne}}),b=wF(T=>{const{a:R,d:$}=e;if(T.is0())throw new Error("bad point: ZERO");const{ex:k,ey:M,ez:j,et:K}=T,ne=u(k*k),le=u(M*M),oe=u(j*j),ae=u(oe*oe),ue=u(ne*R),Xe=u(oe*u(ue+le)),xe=u(ae+u($*u(ne*le)));if(Xe!==xe)throw new Error("bad point: equation left != right (1)");const Me=u(k*M),rt=u(j*K);if(Me!==rt)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,$,k,M){this.ex=R,this.ey=$,this.ez=k,this.et=M,g("x",R),g("y",$),g("z",k),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:$,y:k}=R||{};return g("x",$),g("y",k),new v($,k,Ki,u($*k))}static normalizeZ(R){const $=n.invertBatch(R.map(k=>k.ez));return R.map((k,M)=>k.toAffine($[M])).map(v.fromAffine)}static msm(R,$){return PIe(v,d,R,$)}_setWindowSize(R){I.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:$,ey:k,ez:M}=this,{ex:j,ey:K,ez:ne}=R,le=u($*ne),oe=u(j*M),ae=u(k*ne),ue=u(K*M);return le===oe&&ae===ue}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:$,ey:k,ez:M}=this,j=u($*$),K=u(k*k),ne=u(UA*u(M*M)),le=u(R*j),oe=$+k,ae=u(u(oe*oe)-j-K),ue=le+K,Xe=ue-ne,xe=le-K,Me=u(ae*Xe),rt=u(ue*xe),Rt=u(ae*xe),Xt=u(Xe*ue);return new v(Me,rt,Xt,Rt)}add(R){w(R);const{a:$,d:k}=e,{ex:M,ey:j,ez:K,et:ne}=this,{ex:le,ey:oe,ez:ae,et:ue}=R;if($===BigInt(-1)){const st=u((j-M)*(oe+le)),St=u((j+M)*(oe-le)),_t=u(St-st);if(_t===ac)return this.double();const Kn=u(K*UA*ue),kt=u(ne*UA*ae),jr=kt+Kn,Ft=St+st,zn=kt-Kn,_r=u(jr*_t),zi=u(Ft*zn),Zc=u(jr*zn),Bf=u(_t*Ft);return new v(_r,zi,Bf,Zc)}const Xe=u(M*le),xe=u(j*oe),Me=u(ne*k*ue),rt=u(K*ae),Rt=u((M+j)*(le+oe)-Xe-xe),Xt=rt-Me,X=rt+Me,ce=u(xe-$*Xe),Ee=u(Rt*Xt),ge=u(X*ce),be=u(Rt*ce),Ze=u(Xt*X);return new v(Ee,ge,Ze,be)}subtract(R){return this.add(R.negate())}wNAF(R){return I.wNAFCached(this,R,v.normalizeZ)}multiply(R){const $=R;hv("scalar",$,Ki,r);const{p:k,f:M}=this.wNAF($);return v.normalizeZ([k,M])[0]}multiplyUnsafe(R,$=v.ZERO){const k=R;return hv("scalar",k,ac,r),k===ac?_:this.is0()||k===Ki?this:I.wNAFCachedUnsafe(this,k,v.normalizeZ,$)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return I.unsafeLadder(this,r).is0()}toAffine(R){return y(this,R)}clearCofactor(){const{h:R}=e;return R===Ki?this:this.multiplyUnsafe(R)}static fromHex(R,$=!1){const{d:k,a:M}=e,j=n.BYTES;R=fu("pointHex",R,j),fO("zip215",$);const K=R.slice(),ne=R[j-1];K[j-1]=ne&-129;const le=LS(K),oe=$?l:n.ORDER;hv("pointHex.y",le,ac,oe);const ae=u(le*le),ue=u(ae-Ki),Xe=u(k*ae-M);let{isValid:xe,value:Me}=h(ue,Xe);if(!xe)throw new Error("Point.fromHex: invalid y coordinate");const rt=(Me&Ki)===Ki,Rt=(ne&128)!==0;if(!$&&Me===ac&&Rt)throw new Error("Point.fromHex: x=0 and x_0=1");return Rt!==rt&&(Me=u(-Me)),v.fromAffine({x:Me,y:le})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:$}=this.toAffine(),k=g3($,n.BYTES);return k[k.length-1]|=R&Ki?128:0,k}toHex(){return LU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Ki,u(e.Gx*e.Gy)),v.ZERO=new v(ac,Ki,Ki,ac);const{BASE:A,ZERO:_}=v,I=RIe(v,a*8);function x(T){return ts(T,r)}function N(T){return x(LS(T))}function S(T){const R=n.BYTES;T=fu("private key",T,R);const $=fu("hashed private key",i(T),2*R),k=f($.slice(0,R)),M=$.slice(R,2*R),j=N(k),K=A.multiply(j),ne=K.toRawBytes();return{head:k,prefix:M,scalar:j,point:K,pointBytes:ne}}function O(T){return S(T).pointBytes}function P(T=new Uint8Array,...R){const $=yF(...R);return N(i(p($,fu("context",T),!!s)))}function F(T,R,$={}){T=fu("message",T),s&&(T=s(T));const{prefix:k,scalar:M,pointBytes:j}=S(R),K=P($.context,k,T),ne=A.multiply(K).toRawBytes(),le=P($.context,ne,j,T),oe=x(K+le*M);hv("signature.s",oe,ac,r);const ae=yF(ne,g3(oe,n.BYTES));return fu("result",ae,n.BYTES*2)}const G=DIe;function B(T,R,$,k=G){const{context:M,zip215:j}=k,K=n.BYTES;T=fu("signature",T,2*K),R=fu("message",R),$=fu("publicKey",$,K),j!==void 0&&fO("zip215",j),s&&(R=s(R));const ne=LS(T.slice(K,2*K));let le,oe,ae;try{le=v.fromHex($,j),oe=v.fromHex(T.slice(0,K),j),ae=A.multiplyUnsafe(ne)}catch{return!1}if(!j&&le.isSmallOrder())return!1;const ue=P(M,oe.toRawBytes(),le.toRawBytes(),R);return oe.add(le.multiplyUnsafe(ue)).subtract(ae).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:O,sign:F,verify:B,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(T=8,R=v.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const $U=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),_F=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const UIe=BigInt(1),AF=BigInt(2);BigInt(3);const $Ie=BigInt(5),BIe=BigInt(8);function FIe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=$U,o=t*t%i*t%i,a=nl(o,AF,i)*o%i,c=nl(a,UIe,i)*t%i,l=nl(c,$Ie,i)*c%i,u=nl(l,e,i)*l%i,d=nl(u,n,i)*u%i,h=nl(d,r,i)*d%i,f=nl(h,s,i)*h%i,p=nl(f,s,i)*h%i,g=nl(p,e,i)*l%i;return{pow_p_5_8:nl(g,AF,i)*t%i,b2:o}}function jIe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function WIe(t,e){const n=$U,r=ts(e*e*e,n),s=ts(r*r*e,n),i=FIe(t*s).pow_p_5_8;let o=ts(t*r*i,n);const a=ts(e*o*o,n),c=o,l=ts(o*_F,n),u=a===t,d=a===ts(-t,n),h=a===ts(-t*_F,n);return u&&(o=c),(d||h)&&(o=l),_Ie(o,n)&&(o=ts(-o,n)),{isValid:u||d,value:o}}const zIe=HJ($U,void 0,!0),HIe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:zIe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BIe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:dIe,randomBytes:UJ,adjustScalarBytes:jIe,uvRatio:WIe},VJ=LIe(HIe),GIe="EdDSA",qIe="JWT",pI=".",AT="base64url",KJ="utf8",YJ="utf8",VIe=":",KIe="did",YIe="key",SF="base58btc",QIe="z",JIe="K36",ZIe=32;function BU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function QJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?BU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function JJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=QJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return BU(n)}function XIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var eNe=XIe,tNe=eNe;const ZJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},nNe=t=>new TextEncoder().encode(t),rNe=t=>new TextDecoder().decode(t);let sNe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},iNe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return XJ(this,e)}},oNe=class{constructor(e){this.decoders=e}or(e){return XJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const XJ=(t,e)=>new oNe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let aNe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new sNe(e,n,r),this.decoder=new iNe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ST=({name:t,prefix:e,encode:n,decode:r})=>new aNe(t,e,n,r),b1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=tNe(n,e);return ST({prefix:t,name:e,encode:r,decode:i=>ZJ(s(i))})},cNe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},lNe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Qs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ST({prefix:e,name:t,encode(s){return lNe(s,r,n)},decode(s){return cNe(s,r,n,t)}}),uNe=ST({prefix:"\0",name:"identity",encode:t=>rNe(t),decode:t=>nNe(t)});var dNe=Object.freeze({__proto__:null,identity:uNe});const hNe=Qs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var fNe=Object.freeze({__proto__:null,base2:hNe});const pNe=Qs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var gNe=Object.freeze({__proto__:null,base8:pNe});const mNe=b1({prefix:"9",name:"base10",alphabet:"0123456789"});var yNe=Object.freeze({__proto__:null,base10:mNe});const wNe=Qs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),bNe=Qs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var vNe=Object.freeze({__proto__:null,base16:wNe,base16upper:bNe});const ENe=Qs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),CNe=Qs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_Ne=Qs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ANe=Qs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),SNe=Qs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),xNe=Qs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),INe=Qs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),NNe=Qs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),TNe=Qs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var RNe=Object.freeze({__proto__:null,base32:ENe,base32upper:CNe,base32pad:_Ne,base32padupper:ANe,base32hex:SNe,base32hexupper:xNe,base32hexpad:INe,base32hexpadupper:NNe,base32z:TNe});const PNe=b1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ONe=b1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var kNe=Object.freeze({__proto__:null,base36:PNe,base36upper:ONe});const DNe=b1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),MNe=b1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var LNe=Object.freeze({__proto__:null,base58btc:DNe,base58flickr:MNe});const UNe=Qs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$Ne=Qs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),BNe=Qs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FNe=Qs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var jNe=Object.freeze({__proto__:null,base64:UNe,base64pad:$Ne,base64url:BNe,base64urlpad:FNe});const eZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),WNe=eZ.reduce((t,e,n)=>(t[n]=e,t),[]),zNe=eZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function HNe(t){return t.reduce((e,n)=>(e+=WNe[n],e),"")}function GNe(t){const e=[];for(const n of t){const r=zNe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const qNe=ST({prefix:"🚀",name:"base256emoji",encode:HNe,decode:GNe});var VNe=Object.freeze({__proto__:null,base256emoji:qNe}),KNe=tZ,xF=128,YNe=-128,QNe=Math.pow(2,31);function tZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=QNe;)e[n++]=t&255|xF,t/=128;for(;t&YNe;)e[n++]=t&255|xF,t>>>=7;return e[n]=t|0,tZ.bytes=n-r+1,e}var JNe=y3,ZNe=128,IF=127;function y3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw y3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&IF)<<s:(o&IF)*Math.pow(2,s),s+=7}while(o>=ZNe);return y3.bytes=i-r,n}var XNe=Math.pow(2,7),eTe=Math.pow(2,14),tTe=Math.pow(2,21),nTe=Math.pow(2,28),rTe=Math.pow(2,35),sTe=Math.pow(2,42),iTe=Math.pow(2,49),oTe=Math.pow(2,56),aTe=Math.pow(2,63),cTe=function(t){return t<XNe?1:t<eTe?2:t<tTe?3:t<nTe?4:t<rTe?5:t<sTe?6:t<iTe?7:t<oTe?8:t<aTe?9:10},lTe={encode:KNe,decode:JNe,encodingLength:cTe},nZ=lTe;const NF=(t,e,n=0)=>(nZ.encode(t,e,n),e),TF=t=>nZ.encodingLength(t),w3=(t,e)=>{const n=e.byteLength,r=TF(t),s=r+TF(n),i=new Uint8Array(s+n);return NF(t,i,0),NF(n,i,r),i.set(e,s),new uTe(t,n,e,i)};let uTe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const rZ=({name:t,code:e,encode:n})=>new dTe(t,e,n);let dTe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?w3(this.code,n):n.then(r=>w3(this.code,r))}else throw Error("Unknown type, must be binary type")}};const sZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),hTe=rZ({name:"sha2-256",code:18,encode:sZ("SHA-256")}),fTe=rZ({name:"sha2-512",code:19,encode:sZ("SHA-512")});var pTe=Object.freeze({__proto__:null,sha256:hTe,sha512:fTe});const iZ=0,gTe="identity",oZ=ZJ,mTe=t=>w3(iZ,oZ(t)),yTe={code:iZ,name:gTe,encode:oZ,digest:mTe};var wTe=Object.freeze({__proto__:null,identity:yTe});new TextEncoder,new TextDecoder;const RF={...dNe,...fNe,...gNe,...yNe,...vNe,...RNe,...kNe,...LNe,...jNe,...VNe};({...pTe,...wTe});function aZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const PF=aZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),bO=aZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=QJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),cZ={utf8:PF,"utf-8":PF,hex:RF.base16,latin1:bO,ascii:bO,binary:bO,...RF};function xT(t,e="utf8"){const n=cZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function vb(t,e="utf8"){const n=cZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?BU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function OF(t){return Fg(xT(vb(t,AT),KJ))}function gI(t){return xT(vb(md(t),KJ),AT)}function lZ(t){const e=vb(JIe,SF),n=QIe+xT(JJ([e,t]),SF);return[KIe,YIe,n].join(VIe)}function bTe(t){return xT(t,AT)}function vTe(t){return vb(t,AT)}function ETe(t){return vb([gI(t.header),gI(t.payload)].join(pI),YJ)}function CTe(t){return[gI(t.header),gI(t.payload),bTe(t.signature)].join(pI)}function b3(t){const e=t.split(pI),n=OF(e[0]),r=OF(e[1]),s=vTe(e[2]),i=vb(e.slice(0,2).join(pI),YJ);return{header:n,payload:r,signature:s,data:i}}function kF(t=UJ(ZIe)){const e=VJ.getPublicKey(t);return{secretKey:JJ([t,e]),publicKey:e}}async function _Te(t,e,n,r,s=Te.fromMiliseconds(Date.now())){const i={alg:GIe,typ:qIe},o=lZ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=ETe({header:i,payload:c}),u=VJ.sign(l,r.secretKey.slice(0,32));return CTe({header:i,payload:c,signature:u})}var DF=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},ATe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),STe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),xTe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),ITe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),NTe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),TTe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,RTe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,MF=3,PTe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",TTe]],LF=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function OTe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new NTe:typeof navigator<"u"?DTe(navigator.userAgent):LTe()}function kTe(t){return t!==""&&PTe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function DTe(t){var e=kTe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new ITe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<MF&&(s=DF(DF([],s,!0),UTe(MF-s.length),!0)):s=[];var i=s.join("."),o=MTe(t),a=RTe.exec(t);return a&&a[1]?new xTe(n,i,o,a[1]):new ATe(n,i,o)}function MTe(t){for(var e=0,n=LF.length;e<n;e++){var r=LF[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function LTe(){var t=typeof process<"u"&&process.version;return t?new STe(process.version.slice(1)):null}function UTe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.getLocalStorage=Xn.getLocalStorageOrThrow=Xn.getCrypto=Xn.getCryptoOrThrow=uZ=Xn.getLocation=Xn.getLocationOrThrow=FU=Xn.getNavigator=Xn.getNavigatorOrThrow=jg=Xn.getDocument=Xn.getDocumentOrThrow=Xn.getFromWindowOrThrow=Xn.getFromWindow=void 0;function vm(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Xn.getFromWindow=vm;function Eb(t){const e=vm(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Xn.getFromWindowOrThrow=Eb;function $Te(){return Eb("document")}Xn.getDocumentOrThrow=$Te;function BTe(){return vm("document")}var jg=Xn.getDocument=BTe;function FTe(){return Eb("navigator")}Xn.getNavigatorOrThrow=FTe;function jTe(){return vm("navigator")}var FU=Xn.getNavigator=jTe;function WTe(){return Eb("location")}Xn.getLocationOrThrow=WTe;function zTe(){return vm("location")}var uZ=Xn.getLocation=zTe;function HTe(){return Eb("crypto")}Xn.getCryptoOrThrow=HTe;function GTe(){return vm("crypto")}Xn.getCrypto=GTe;function qTe(){return Eb("localStorage")}Xn.getLocalStorageOrThrow=qTe;function VTe(){return vm("localStorage")}Xn.getLocalStorage=VTe;var jU={};Object.defineProperty(jU,"__esModule",{value:!0});var dZ=jU.getWindowMetadata=void 0;const UF=Xn;function KTe(){let t,e;try{t=UF.getDocumentOrThrow(),e=UF.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}dZ=jU.getWindowMetadata=KTe;function YTe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let _=f-1;(v!==0||A<h)&&_!==-1;_--,A++)v+=n*p[_]>>>0,p[_]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var QTe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const hZ=YTe(QTe);function fZ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function AE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=fZ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function JTe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var ZTe=JTe,XTe=ZTe;const eRe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},tRe=t=>new TextEncoder().encode(t),nRe=t=>new TextDecoder().decode(t);class rRe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sRe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pZ(this,e)}}class iRe{constructor(e){this.decoders=e}or(e){return pZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pZ=(t,e)=>new iRe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class oRe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new rRe(e,n,r),this.decoder=new sRe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const IT=({name:t,prefix:e,encode:n,decode:r})=>new oRe(t,e,n,r),v1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=XTe(n,e);return IT({prefix:t,name:e,encode:r,decode:i=>eRe(s(i))})},aRe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},cRe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Js=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>IT({prefix:e,name:t,encode(s){return cRe(s,r,n)},decode(s){return aRe(s,r,n,t)}}),lRe=IT({prefix:"\0",name:"identity",encode:t=>nRe(t),decode:t=>tRe(t)}),uRe=Object.freeze(Object.defineProperty({__proto__:null,identity:lRe},Symbol.toStringTag,{value:"Module"})),dRe=Js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),hRe=Object.freeze(Object.defineProperty({__proto__:null,base2:dRe},Symbol.toStringTag,{value:"Module"})),fRe=Js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),pRe=Object.freeze(Object.defineProperty({__proto__:null,base8:fRe},Symbol.toStringTag,{value:"Module"})),gRe=v1({prefix:"9",name:"base10",alphabet:"0123456789"}),mRe=Object.freeze(Object.defineProperty({__proto__:null,base10:gRe},Symbol.toStringTag,{value:"Module"})),yRe=Js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),wRe=Js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),bRe=Object.freeze(Object.defineProperty({__proto__:null,base16:yRe,base16upper:wRe},Symbol.toStringTag,{value:"Module"})),vRe=Js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ERe=Js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),CRe=Js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_Re=Js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ARe=Js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),SRe=Js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),xRe=Js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),IRe=Js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),NRe=Js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),TRe=Object.freeze(Object.defineProperty({__proto__:null,base32:vRe,base32hex:ARe,base32hexpad:xRe,base32hexpadupper:IRe,base32hexupper:SRe,base32pad:CRe,base32padupper:_Re,base32upper:ERe,base32z:NRe},Symbol.toStringTag,{value:"Module"})),RRe=v1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),PRe=v1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ORe=Object.freeze(Object.defineProperty({__proto__:null,base36:RRe,base36upper:PRe},Symbol.toStringTag,{value:"Module"})),kRe=v1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),DRe=v1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),MRe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:kRe,base58flickr:DRe},Symbol.toStringTag,{value:"Module"})),LRe=Js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),URe=Js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),$Re=Js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),BRe=Js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),FRe=Object.freeze(Object.defineProperty({__proto__:null,base64:LRe,base64pad:URe,base64url:$Re,base64urlpad:BRe},Symbol.toStringTag,{value:"Module"})),gZ=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),jRe=gZ.reduce((t,e,n)=>(t[n]=e,t),[]),WRe=gZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function zRe(t){return t.reduce((e,n)=>(e+=jRe[n],e),"")}function HRe(t){const e=[];for(const n of t){const r=WRe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const GRe=IT({prefix:"🚀",name:"base256emoji",encode:zRe,decode:HRe}),qRe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:GRe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const $F={...uRe,...hRe,...pRe,...mRe,...bRe,...TRe,...ORe,...MRe,...FRe,...qRe};function mZ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const BF=mZ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),vO=mZ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=fZ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),yZ={utf8:BF,"utf-8":BF,hex:$F.base16,latin1:vO,ascii:vO,binary:vO,...$F};function Ba(t,e="utf8"){const n=yZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function _o(t,e="utf8"){const n=yZ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const VRe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},KRe="PARSE_ERROR",YRe="INVALID_REQUEST",QRe="METHOD_NOT_FOUND",JRe="INVALID_PARAMS",wZ="INTERNAL_ERROR",WU="SERVER_ERROR",ZRe=[-32700,-32600,-32601,-32602,-32603],SE={[KRe]:{code:-32700,message:"Parse error"},[YRe]:{code:-32600,message:"Invalid Request"},[QRe]:{code:-32601,message:"Method not found"},[JRe]:{code:-32602,message:"Invalid params"},[wZ]:{code:-32603,message:"Internal error"},[WU]:{code:-32e3,message:"Server error"}},bZ=WU;function XRe(t){return ZRe.includes(t)}function FF(t){return Object.keys(SE).includes(t)?SE[t]:SE[bZ]}function ePe(t){const e=Object.values(SE).find(n=>n.code===t);return e||SE[bZ]}function vZ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var EZ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var v3=function(t,e){return v3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},v3(t,e)};function tPe(t,e){v3(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var E3=function(){return E3=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E3.apply(this,arguments)};function nPe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function rPe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function sPe(t,e){return function(n,r){e(n,r,t)}}function iPe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function oPe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function aPe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function cPe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function lPe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function C3(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function CZ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function uPe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(CZ(arguments[e]));return t}function dPe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function BC(t){return this instanceof BC?(this.v=t,this):new BC(t)}function hPe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof BC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function fPe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:BC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function pPe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof C3=="function"?C3(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function gPe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function mPe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function yPe(t){return t&&t.__esModule?t:{default:t}}function wPe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function bPe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const vPe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return E3},__asyncDelegator:fPe,__asyncGenerator:hPe,__asyncValues:pPe,__await:BC,__awaiter:oPe,__classPrivateFieldGet:wPe,__classPrivateFieldSet:bPe,__createBinding:cPe,__decorate:rPe,__exportStar:lPe,__extends:tPe,__generator:aPe,__importDefault:yPe,__importStar:mPe,__makeTemplateObject:gPe,__metadata:iPe,__param:sPe,__read:CZ,__rest:nPe,__spread:uPe,__spreadArrays:dPe,__values:C3},Symbol.toStringTag,{value:"Module"})),EPe=dz(vPe);var pu={},jF;function CPe(){if(jF)return pu;jF=1,Object.defineProperty(pu,"__esModule",{value:!0}),pu.isBrowserCryptoAvailable=pu.getSubtleCrypto=pu.getBrowerCrypto=void 0;function t(){return(Sl==null?void 0:Sl.crypto)||(Sl==null?void 0:Sl.msCrypto)||{}}pu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}pu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return pu.isBrowserCryptoAvailable=n,pu}var gu={},WF;function _Pe(){if(WF)return gu;WF=1,Object.defineProperty(gu,"__esModule",{value:!0}),gu.isBrowser=gu.isNode=gu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}gu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}gu.isNode=e;function n(){return!t()&&!e()}return gu.isBrowser=n,gu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=EPe;e.__exportStar(CPe(),t),e.__exportStar(_Pe(),t)})(EZ);function ul(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Rp(t=6){return BigInt(ul(t))}function $h(t,e,n){return{id:n||ul(),jsonrpc:"2.0",method:t,params:e}}function NT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function TT(t,e,n){return{id:t,jsonrpc:"2.0",error:APe(e)}}function APe(t,e){return typeof t>"u"?FF(wZ):(typeof t=="string"&&(t=Object.assign(Object.assign({},FF(WU)),{message:t})),XRe(t.code)&&(t=ePe(t.code)),t)}let SPe=class{},xPe=class extends SPe{constructor(){super()}},IPe=class extends xPe{constructor(e){super()}};const NPe="^https?:",TPe="^wss?:";function RPe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function _Z(t,e){const n=RPe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function zF(t){return _Z(t,NPe)}function HF(t){return _Z(t,TPe)}function PPe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function AZ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function zU(t){return AZ(t)&&"method"in t}function RT(t){return AZ(t)&&(dl(t)||Ra(t))}function dl(t){return"result"in t}function Ra(t){return"error"in t}let Xa=class extends IPe{constructor(e){super(e),this.events=new Za.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict($h(e.method,e.params||[],e.id||Rp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ra(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),RT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const OPe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),kPe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",GF=t=>t.split("?")[0],qF=10,DPe=OPe();let MPe=class{constructor(e){if(this.url=e,this.events=new Za.EventEmitter,this.registering=!1,!HF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(md(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!HF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=EZ.isReactNative()?void 0:{rejectUnauthorized:!PPe(e)},i=new DPe(e,[],s);kPe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Fg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=TT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return vZ(e,GF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>qF&&this.events.setMaxListeners(qF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${GF(this.url)}`));return this.events.emit("register_error",n),n}};var _3={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Sl<"u"&&Sl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Sl<"u"&&Sl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(T){return T&&DataView.prototype.isPrototypeOf(T)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(T){return T&&u.indexOf(Object.prototype.toString.call(T))>-1};function h(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError('Invalid character in header field name: "'+T+'"');return T.toLowerCase()}function f(T){return typeof T!="string"&&(T=String(T)),T}function p(T){var R={next:function(){var $=T.shift();return{done:$===void 0,value:$}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(T){this.map={},T instanceof g?T.forEach(function(R,$){this.append($,R)},this):Array.isArray(T)?T.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(R){this.append(R,T[R])},this)}g.prototype.append=function(T,R){T=h(T),R=f(R);var $=this.map[T];this.map[T]=$?$+", "+R:R},g.prototype.delete=function(T){delete this.map[h(T)]},g.prototype.get=function(T){return T=h(T),this.has(T)?this.map[T]:null},g.prototype.has=function(T){return this.map.hasOwnProperty(h(T))},g.prototype.set=function(T,R){this.map[h(T)]=f(R)},g.prototype.forEach=function(T,R){for(var $ in this.map)this.map.hasOwnProperty($)&&T.call(R,this.map[$],$,this)},g.prototype.keys=function(){var T=[];return this.forEach(function(R,$){T.push($)}),p(T)},g.prototype.values=function(){var T=[];return this.forEach(function(R){T.push(R)}),p(T)},g.prototype.entries=function(){var T=[];return this.forEach(function(R,$){T.push([$,R])}),p(T)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(T){if(!T._noBody){if(T.bodyUsed)return Promise.reject(new TypeError("Already read"));T.bodyUsed=!0}}function y(T){return new Promise(function(R,$){T.onload=function(){R(T.result)},T.onerror=function(){$(T.error)}})}function b(T){var R=new FileReader,$=y(R);return R.readAsArrayBuffer(T),$}function v(T){var R=new FileReader,$=y(R),k=/charset=([A-Za-z0-9_-]+)/.exec(T.type),M=k?k[1]:"utf-8";return R.readAsText(T,M),$}function A(T){for(var R=new Uint8Array(T),$=new Array(R.length),k=0;k<R.length;k++)$[k]=String.fromCharCode(R[k]);return $.join("")}function _(T){if(T.slice)return T.slice(0);var R=new Uint8Array(T.byteLength);return R.set(new Uint8Array(T)),R.buffer}function I(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:c.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:c.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():c.arrayBuffer&&c.blob&&l(T)?(this._bodyArrayBuffer=_(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||d(T))?this._bodyArrayBuffer=_(T):this._bodyText=T=Object.prototype.toString.call(T):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=w(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var T=w(this);if(T)return T;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(T){var R=T.toUpperCase();return x.indexOf(R)>-1?R:T}function S(T,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var $=R.body;if(T instanceof S){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,R.headers||(this.headers=new g(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!$&&T._bodyInit!=null&&($=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&$)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody($),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function O(T){var R=new FormData;return T.trim().split("&").forEach(function($){if($){var k=$.split("="),M=k.shift().replace(/\+/g," "),j=k.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(j))}}),R}function P(T){var R=new g,$=T.replace(/\r?\n[\t ]+/g," ");return $.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var M=k.split(":"),j=M.shift().trim();if(j){var K=M.join(":").trim();try{R.append(j,K)}catch(ne){console.warn("Response "+ne.message)}}}),R}I.call(S.prototype);function F(T,R){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(T)}I.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var T=new F(null,{status:200,statusText:""});return T.ok=!1,T.status=0,T.type="error",T};var G=[301,302,303,307,308];F.redirect=function(T,R){if(G.indexOf(R)===-1)throw new RangeError("Invalid status code");return new F(null,{status:R,headers:{location:T}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,$){this.message=R,this.name=$;var k=Error(R);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(T,R){return new Promise(function($,k){var M=new S(T,R);if(M.signal&&M.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function K(){j.abort()}j.onload=function(){var oe={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(j.status<200||j.status>599)?oe.status=200:oe.status=j.status,oe.url="responseURL"in j?j.responseURL:oe.headers.get("X-Request-URL");var ae="response"in j?j.response:j.responseText;setTimeout(function(){$(new F(ae,oe))},0)},j.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function ne(oe){try{return oe===""&&a.location.href?a.location.href:oe}catch{return oe}}if(j.open(M.method,ne(M.url),!0),M.credentials==="include"?j.withCredentials=!0:M.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var le=[];Object.getOwnPropertyNames(R.headers).forEach(function(oe){le.push(h(oe)),j.setRequestHeader(oe,f(R.headers[oe]))}),M.headers.forEach(function(oe,ae){le.indexOf(ae)===-1&&j.setRequestHeader(ae,oe)})}else M.headers.forEach(function(oe,ae){j.setRequestHeader(ae,oe)});M.signal&&(M.signal.addEventListener("abort",K),j.onreadystatechange=function(){j.readyState===4&&M.signal.removeEventListener("abort",K)}),j.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=S,a.Response=F),o.Headers=g,o.Request=S,o.Response=F,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(_3,_3.exports);var LPe=_3.exports;const VF=nm(LPe);var UPe=Object.defineProperty,$Pe=Object.defineProperties,BPe=Object.getOwnPropertyDescriptors,KF=Object.getOwnPropertySymbols,FPe=Object.prototype.hasOwnProperty,jPe=Object.prototype.propertyIsEnumerable,YF=(t,e,n)=>e in t?UPe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QF=(t,e)=>{for(var n in e||(e={}))FPe.call(e,n)&&YF(t,n,e[n]);if(KF)for(var n of KF(e))jPe.call(e,n)&&YF(t,n,e[n]);return t},JF=(t,e)=>$Pe(t,BPe(e));const WPe={Accept:"application/json","Content-Type":"application/json"},zPe="POST",ZF={headers:WPe,method:zPe},XF=10;let Qc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new Za.EventEmitter,this.isAvailable=!1,this.registering=!1,!zF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=md(e),r=await(await VF(this.url,JF(QF({},ZF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!zF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=md({id:1,jsonrpc:"2.0",method:"test",params:[]});await VF(e,JF(QF({},ZF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Fg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=TT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return vZ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>XF&&this.events.setMaxListeners(XF)}};const xE={getSIWX(){return we.state.siwx},async initializeIfEnabled(){var i;const t=we.state.siwx,e=H.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(H.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Cs.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=mt._getClient())==null?void 0:i.disconnect().catch(console.error)),zt.reset("Connect"),kc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=we.state.siwx,e=ct.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork(),r=mt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Fe.getConnectorId(n.chainNamespace)===je.CONNECTOR_ID.AUTH&&zt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Cs.close(),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Cs.state.open||zt.state.view==="ApproveTransaction")&&await Cs.open({view:"SIWXSignMessage"}),i.isSmartAccount?kc.showError("This application might not support Smart Accounts"):kc.showError("Signature declined"),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await mt.disconnect():Cs.close(),zt.reset("Connect"),gr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=we.state.siwx,e=ct.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=zt.state.view==="ApproveTransaction",r=zt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=xE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=H.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(kc.showLoading("Authenticating...",{autoClose:!1}),Ke.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:xE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:xE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{kc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=H.state.activeChain;return{network:((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ke.state.preferredAccountTypes)==null?void 0:n[t])===Hs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function $A(t,e){return Fe.getConnectorId(t)===e}function HPe(t){const e=Array.from(H.state.chains.keys());let n=[];return t?(n.push([t,H.state.chains.get(t)]),$A(t,je.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&$A(r,je.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,H.state.chains.get(r)])}):$A(t,je.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&$A(r,je.CONNECTOR_ID.AUTH)&&n.push([r,H.state.chains.get(r)])})):n=Array.from(H.state.chains.entries()),n}const lo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},mI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[je.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[je.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[je.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[je.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[je.CONNECTOR_ID.INJECTED]:"Browser Wallet",[je.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[je.CONNECTOR_ID.COINBASE]:"Coinbase",[je.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[je.CONNECTOR_ID.LEDGER]:"Ledger",[je.CONNECTOR_ID.SAFE]:"Safe"}},PT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${lo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},GPe=new AbortController,Il={EmbeddedWalletAbortController:GPe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${qPe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function qPe(){return typeof window<"u"}const VPe={createLogger(t,e="error"){const n=bm({level:e}),{logger:r}=_T({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},KPe="rpc.walletconnect.org";function ej(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const EO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],hy={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===KPe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:je.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${je.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return EO.includes(e)?ej(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:mI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>hy.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push($a(a.url,a.config))}),EO.includes(t.caipNetworkId)&&r.push($a(ej(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push($a(a))}),aI(r)},extendWagmiTransports(t,e,n){if(EO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return aI([n,$a(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:je.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ye.getActiveCaipNetworkId(),n=H.getAllRequestedCaipNetworks(),r=Array.from(((c=H.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},yI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Yi=lr({providers:{...yI},providerIds:{...yI}}),Un={state:Yi,subscribeKey(t,e){return pi(Yi,t,e)},subscribe(t){return hi(Yi,()=>{t(Yi)})},subscribeProviders(t){return hi(Yi.providers,()=>t(Yi.providers))},setProvider(t,e){e&&(Yi.providers[t]=$g(e))},getProvider(t){return Yi.providers[t]},setProviderId(t,e){e&&(Yi.providerIds[t]=e)},getProviderId(t){if(t)return Yi.providerIds[t]},reset(){Yi.providers={...yI},Yi.providerIds={...yI}},resetChain(t){Yi.providers[t]=void 0,Yi.providerIds[t]=void 0}},tj={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ds={set(t,e){Yo.isClient&&localStorage.setItem(`${qe.STORAGE_KEY}${t}`,e)},get(t){return Yo.isClient?localStorage.getItem(`${qe.STORAGE_KEY}${t}`):null},delete(t,e){Yo.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${qe.STORAGE_KEY}${t}`))}},BA=30*1e3,Yo={checkIfAllowedToTriggerEmail(){const t=Ds.get(qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<BA){const n=Math.ceil((BA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ds.get(qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<BA)return Math.ceil((BA-e)/1e3)}return 0},checkIfRequestExists(t){return Hs.NOT_SAFE_RPC_METHODS.includes(t.method)||Hs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(tj.transactionHash))||(t==null?void 0:t.match(tj.signedMessage)))?qe.RPC_RESPONSE_TYPE_TX:qe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Hs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var bn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(bn||(bn={}));var A3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(A3||(A3={}));const Ue=bn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),sh=t=>{switch(typeof t){case"undefined":return Ue.undefined;case"string":return Ue.string;case"number":return isNaN(t)?Ue.nan:Ue.number;case"boolean":return Ue.boolean;case"function":return Ue.function;case"bigint":return Ue.bigint;case"symbol":return Ue.symbol;case"object":return Array.isArray(t)?Ue.array:t===null?Ue.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ue.promise:typeof Map<"u"&&t instanceof Map?Ue.map:typeof Set<"u"&&t instanceof Set?Ue.set:typeof Date<"u"&&t instanceof Date?Ue.date:Ue.object;default:return Ue.unknown}},Se=bn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),YPe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class jc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,bn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}jc.create=t=>new jc(t);const FC=(t,e)=>{let n;switch(t.code){case Se.invalid_type:t.received===Ue.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Se.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,bn.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:n=`Unrecognized key(s) in object: ${bn.joinValues(t.keys,", ")}`;break;case Se.invalid_union:n="Invalid input";break;case Se.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${bn.joinValues(t.options)}`;break;case Se.invalid_enum_value:n=`Invalid enum value. Expected ${bn.joinValues(t.options)}, received '${t.received}'`;break;case Se.invalid_arguments:n="Invalid function arguments";break;case Se.invalid_return_type:n="Invalid function return type";break;case Se.invalid_date:n="Invalid date";break;case Se.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:bn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Se.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Se.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Se.custom:n="Invalid input";break;case Se.invalid_intersection_types:n="Intersection results could not be merged";break;case Se.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Se.not_finite:n="Number must be finite";break;default:n=e.defaultError,bn.assertNever(t)}return{message:n}};let SZ=FC;function QPe(t){SZ=t}function wI(){return SZ}const bI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},JPe=[];function He(t,e){const n=bI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wI(),FC].filter(r=>!!r)});t.common.issues.push(n)}class fi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Ot;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return fi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Ot;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Ot=Object.freeze({status:"aborted"}),xZ=t=>({status:"dirty",value:t}),$i=t=>({status:"valid",value:t}),S3=t=>t.status==="aborted",x3=t=>t.status==="dirty",jC=t=>t.status==="valid",vI=t=>typeof Promise<"u"&&t instanceof Promise;var ut;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(ut||(ut={}));class Jl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const nj=(t,e)=>{if(jC(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new jc(t.common.issues);return this._error=n,this._error}}};function Bt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Ht{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return sh(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:sh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fi,ctx:{common:e.parent.common,data:e.data,parsedType:sh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(vI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sh(e)},i=this._parseSync({data:e,path:s.path,parent:s});return nj(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:sh(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(vI(s)?s:Promise.resolve(s));return nj(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Se.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Vc({schema:this,typeName:Ct.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return td.create(this,this._def)}nullable(){return Hg.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wc.create(this,this._def)}promise(){return kw.create(this,this._def)}or(e){return GC.create([this,e],this._def)}and(e){return qC.create(this,e,this._def)}transform(e){return new Vc({...Bt(this._def),schema:this,typeName:Ct.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new JC({...Bt(this._def),innerType:this,defaultValue:n,typeName:Ct.ZodDefault})}brand(){return new NZ({typeName:Ct.ZodBranded,type:this,...Bt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new AI({...Bt(this._def),innerType:this,catchValue:n,typeName:Ct.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return E1.create(this,e)}readonly(){return xI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ZPe=/^c[^\s-]{8,}$/i,XPe=/^[a-z][a-z0-9]*$/,eOe=/^[0-9A-HJKMNP-TV-Z]{26}$/,tOe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nOe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,rOe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let CO;const sOe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,iOe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,oOe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function aOe(t,e){return!!((e==="v4"||!e)&&sOe.test(t)||(e==="v6"||!e)&&iOe.test(t))}class Lc extends Ht{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ue.string){const i=this._getOrReturnCtx(e);return He(i,{code:Se.invalid_type,expected:Ue.string,received:i.parsedType}),Ot}const r=new fi;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?He(s,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&He(s,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")nOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"email",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")CO||(CO=new RegExp(rOe,"u")),CO.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"emoji",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")tOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"uuid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")ZPe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")XPe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"cuid2",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")eOe.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ulid",code:Se.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),He(s,{validation:"url",code:Se.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"regex",code:Se.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),He(s,{code:Se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:Se.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),He(s,{code:Se.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?oOe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),He(s,{code:Se.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?aOe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),He(s,{validation:"ip",code:Se.invalid_string,message:i.message}),r.dirty()):bn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Se.invalid_string,...ut.errToObj(r)})}_addCheck(e){return new Lc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ut.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ut.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ut.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ut.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ut.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ut.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ut.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ut.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...ut.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...ut.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...ut.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...ut.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...ut.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...ut.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...ut.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...ut.errToObj(n)})}nonempty(e){return this.min(1,ut.errToObj(e))}trim(){return new Lc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Lc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Lc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Lc.create=t=>{var e;return new Lc({checks:[],typeName:Ct.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};function cOe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Af extends Ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ue.number){const i=this._getOrReturnCtx(e);return He(i,{code:Se.invalid_type,expected:Ue.number,received:i.parsedType}),Ot}let r;const s=new fi;for(const i of this._def.checks)i.kind==="int"?bn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Se.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?cOe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),He(r,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),He(r,{code:Se.not_finite,message:i.message}),s.dirty()):bn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ut.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ut.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ut.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ut.toString(n))}setLimit(e,n,r,s){return new Af({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ut.toString(s)}]})}_addCheck(e){return new Af({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ut.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ut.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ut.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:ut.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ut.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ut.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&bn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Af.create=t=>new Af({checks:[],typeName:Ct.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class Sf extends Ht{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Ue.bigint){const i=this._getOrReturnCtx(e);return He(i,{code:Se.invalid_type,expected:Ue.bigint,received:i.parsedType}),Ot}let r;const s=new fi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),He(r,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):bn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,ut.toString(n))}gt(e,n){return this.setLimit("min",e,!1,ut.toString(n))}lte(e,n){return this.setLimit("max",e,!0,ut.toString(n))}lt(e,n){return this.setLimit("max",e,!1,ut.toString(n))}setLimit(e,n,r,s){return new Sf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:ut.toString(s)}]})}_addCheck(e){return new Sf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ut.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ut.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ut.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ut.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:ut.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Sf.create=t=>{var e;return new Sf({checks:[],typeName:Ct.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};class WC extends Ht{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ue.boolean){const r=this._getOrReturnCtx(e);return He(r,{code:Se.invalid_type,expected:Ue.boolean,received:r.parsedType}),Ot}return $i(e.data)}}WC.create=t=>new WC({typeName:Ct.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class Wg extends Ht{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ue.date){const i=this._getOrReturnCtx(e);return He(i,{code:Se.invalid_type,expected:Ue.date,received:i.parsedType}),Ot}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return He(i,{code:Se.invalid_date}),Ot}const r=new fi;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),He(s,{code:Se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):bn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Wg({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:ut.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:ut.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Wg.create=t=>new Wg({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:Ct.ZodDate,...Bt(t)});class EI extends Ht{_parse(e){if(this._getType(e)!==Ue.symbol){const r=this._getOrReturnCtx(e);return He(r,{code:Se.invalid_type,expected:Ue.symbol,received:r.parsedType}),Ot}return $i(e.data)}}EI.create=t=>new EI({typeName:Ct.ZodSymbol,...Bt(t)});class zC extends Ht{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:Se.invalid_type,expected:Ue.undefined,received:r.parsedType}),Ot}return $i(e.data)}}zC.create=t=>new zC({typeName:Ct.ZodUndefined,...Bt(t)});class HC extends Ht{_parse(e){if(this._getType(e)!==Ue.null){const r=this._getOrReturnCtx(e);return He(r,{code:Se.invalid_type,expected:Ue.null,received:r.parsedType}),Ot}return $i(e.data)}}HC.create=t=>new HC({typeName:Ct.ZodNull,...Bt(t)});class Ow extends Ht{constructor(){super(...arguments),this._any=!0}_parse(e){return $i(e.data)}}Ow.create=t=>new Ow({typeName:Ct.ZodAny,...Bt(t)});class gg extends Ht{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $i(e.data)}}gg.create=t=>new gg({typeName:Ct.ZodUnknown,...Bt(t)});class yd extends Ht{_parse(e){const n=this._getOrReturnCtx(e);return He(n,{code:Se.invalid_type,expected:Ue.never,received:n.parsedType}),Ot}}yd.create=t=>new yd({typeName:Ct.ZodNever,...Bt(t)});class CI extends Ht{_parse(e){if(this._getType(e)!==Ue.undefined){const r=this._getOrReturnCtx(e);return He(r,{code:Se.invalid_type,expected:Ue.void,received:r.parsedType}),Ot}return $i(e.data)}}CI.create=t=>new CI({typeName:Ct.ZodVoid,...Bt(t)});class Wc extends Ht{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ue.array)return He(n,{code:Se.invalid_type,expected:Ue.array,received:n.parsedType}),Ot;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(He(n,{code:o?Se.too_big:Se.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(He(n,{code:Se.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(He(n,{code:Se.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Jl(n,o,n.path,a)))).then(o=>fi.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Jl(n,o,n.path,a)));return fi.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Wc({...this._def,minLength:{value:e,message:ut.toString(n)}})}max(e,n){return new Wc({...this._def,maxLength:{value:e,message:ut.toString(n)}})}length(e,n){return new Wc({...this._def,exactLength:{value:e,message:ut.toString(n)}})}nonempty(e){return this.min(1,e)}}Wc.create=(t,e)=>new Wc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ct.ZodArray,...Bt(e)});function fy(t){if(t instanceof mr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=td.create(fy(r))}return new mr({...t._def,shape:()=>e})}else return t instanceof Wc?new Wc({...t._def,type:fy(t.element)}):t instanceof td?td.create(fy(t.unwrap())):t instanceof Hg?Hg.create(fy(t.unwrap())):t instanceof Zl?Zl.create(t.items.map(e=>fy(e))):t}class mr extends Ht{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=bn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ue.object){const l=this._getOrReturnCtx(e);return He(l,{code:Se.invalid_type,expected:Ue.object,received:l.parsedType}),Ot}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof yd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Jl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof yd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(He(s,{code:Se.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Jl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>fi.mergeObjectSync(r,l)):fi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return ut.errToObj,new mr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=ut.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new mr({...this._def,unknownKeys:"strip"})}passthrough(){return new mr({...this._def,unknownKeys:"passthrough"})}extend(e){return new mr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new mr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ct.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new mr({...this._def,catchall:e})}pick(e){const n={};return bn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new mr({...this._def,shape:()=>n})}omit(e){const n={};return bn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new mr({...this._def,shape:()=>n})}deepPartial(){return fy(this)}partial(e){const n={};return bn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new mr({...this._def,shape:()=>n})}required(e){const n={};return bn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof td;)i=i._def.innerType;n[r]=i}}),new mr({...this._def,shape:()=>n})}keyof(){return IZ(bn.objectKeys(this.shape))}}mr.create=(t,e)=>new mr({shape:()=>t,unknownKeys:"strip",catchall:yd.create(),typeName:Ct.ZodObject,...Bt(e)});mr.strictCreate=(t,e)=>new mr({shape:()=>t,unknownKeys:"strict",catchall:yd.create(),typeName:Ct.ZodObject,...Bt(e)});mr.lazycreate=(t,e)=>new mr({shape:t,unknownKeys:"strip",catchall:yd.create(),typeName:Ct.ZodObject,...Bt(e)});class GC extends Ht{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new jc(a.ctx.common.issues));return He(n,{code:Se.invalid_union,unionErrors:o}),Ot}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new jc(c));return He(n,{code:Se.invalid_union,unionErrors:a}),Ot}}get options(){return this._def.options}}GC.create=(t,e)=>new GC({options:t,typeName:Ct.ZodUnion,...Bt(e)});const US=t=>t instanceof KC?US(t.schema):t instanceof Vc?US(t.innerType()):t instanceof YC?[t.value]:t instanceof xf?t.options:t instanceof QC?Object.keys(t.enum):t instanceof JC?US(t._def.innerType):t instanceof zC?[void 0]:t instanceof HC?[null]:null;class OT extends Ht{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.object)return He(n,{code:Se.invalid_type,expected:Ue.object,received:n.parsedType}),Ot;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(He(n,{code:Se.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ot)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=US(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new OT({typeName:Ct.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Bt(r)})}}function I3(t,e){const n=sh(t),r=sh(e);if(t===e)return{valid:!0,data:t};if(n===Ue.object&&r===Ue.object){const s=bn.objectKeys(e),i=bn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=I3(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Ue.array&&r===Ue.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=I3(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ue.date&&r===Ue.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class qC extends Ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(S3(i)||S3(o))return Ot;const a=I3(i.value,o.value);return a.valid?((x3(i)||x3(o))&&n.dirty(),{status:n.value,value:a.data}):(He(r,{code:Se.invalid_intersection_types}),Ot)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}qC.create=(t,e,n)=>new qC({left:t,right:e,typeName:Ct.ZodIntersection,...Bt(n)});class Zl extends Ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.array)return He(r,{code:Se.invalid_type,expected:Ue.array,received:r.parsedType}),Ot;if(r.data.length<this._def.items.length)return He(r,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ot;!this._def.rest&&r.data.length>this._def.items.length&&(He(r,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Jl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>fi.mergeArray(n,o)):fi.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Zl({...this._def,rest:e})}}Zl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zl({items:t,typeName:Ct.ZodTuple,rest:null,...Bt(e)})};class VC extends Ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.object)return He(r,{code:Se.invalid_type,expected:Ue.object,received:r.parsedType}),Ot;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Jl(r,a,r.path,a)),value:o._parse(new Jl(r,r.data[a],r.path,a))});return r.common.async?fi.mergeObjectAsync(n,s):fi.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Ht?new VC({keyType:e,valueType:n,typeName:Ct.ZodRecord,...Bt(r)}):new VC({keyType:Lc.create(),valueType:e,typeName:Ct.ZodRecord,...Bt(n)})}}class _I extends Ht{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.map)return He(r,{code:Se.invalid_type,expected:Ue.map,received:r.parsedType}),Ot;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Jl(r,a,r.path,[l,"key"])),value:i._parse(new Jl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Ot;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Ot;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}_I.create=(t,e,n)=>new _I({valueType:e,keyType:t,typeName:Ct.ZodMap,...Bt(n)});class zg extends Ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ue.set)return He(r,{code:Se.invalid_type,expected:Ue.set,received:r.parsedType}),Ot;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(He(r,{code:Se.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(He(r,{code:Se.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Ot;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Jl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new zg({...this._def,minSize:{value:e,message:ut.toString(n)}})}max(e,n){return new zg({...this._def,maxSize:{value:e,message:ut.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}zg.create=(t,e)=>new zg({valueType:t,minSize:null,maxSize:null,typeName:Ct.ZodSet,...Bt(e)});class e0 extends Ht{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.function)return He(n,{code:Se.invalid_type,expected:Ue.function,received:n.parsedType}),Ot;function r(a,c){return bI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wI(),FC].filter(l=>!!l),issueData:{code:Se.invalid_arguments,argumentsError:c}})}function s(a,c){return bI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wI(),FC].filter(l=>!!l),issueData:{code:Se.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof kw){const a=this;return $i(async function(...c){const l=new jc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return $i(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new jc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new jc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new e0({...this._def,args:Zl.create(e).rest(gg.create())})}returns(e){return new e0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new e0({args:e||Zl.create([]).rest(gg.create()),returns:n||gg.create(),typeName:Ct.ZodFunction,...Bt(r)})}}class KC extends Ht{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}KC.create=(t,e)=>new KC({getter:t,typeName:Ct.ZodLazy,...Bt(e)});class YC extends Ht{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return He(n,{received:n.data,code:Se.invalid_literal,expected:this._def.value}),Ot}return{status:"valid",value:e.data}}get value(){return this._def.value}}YC.create=(t,e)=>new YC({value:t,typeName:Ct.ZodLiteral,...Bt(e)});function IZ(t,e){return new xf({values:t,typeName:Ct.ZodEnum,...Bt(e)})}class xf extends Ht{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{expected:bn.joinValues(r),received:n.parsedType,code:Se.invalid_type}),Ot}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return He(n,{received:n.data,code:Se.invalid_enum_value,options:r}),Ot}return $i(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return xf.create(e)}exclude(e){return xf.create(this.options.filter(n=>!e.includes(n)))}}xf.create=IZ;class QC extends Ht{_parse(e){const n=bn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ue.string&&r.parsedType!==Ue.number){const s=bn.objectValues(n);return He(r,{expected:bn.joinValues(s),received:r.parsedType,code:Se.invalid_type}),Ot}if(n.indexOf(e.data)===-1){const s=bn.objectValues(n);return He(r,{received:r.data,code:Se.invalid_enum_value,options:s}),Ot}return $i(e.data)}get enum(){return this._def.values}}QC.create=(t,e)=>new QC({values:t,typeName:Ct.ZodNativeEnum,...Bt(e)});class kw extends Ht{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ue.promise&&n.common.async===!1)return He(n,{code:Se.invalid_type,expected:Ue.promise,received:n.parsedType}),Ot;const r=n.parsedType===Ue.promise?n.data:Promise.resolve(n.data);return $i(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}kw.create=(t,e)=>new kw({type:t,typeName:Ct.ZodPromise,...Bt(e)});class Vc extends Ht{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ct.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{He(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ot:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ot:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!jC(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>jC(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);bn.assertNever(s)}}Vc.create=(t,e,n)=>new Vc({schema:t,typeName:Ct.ZodEffects,effect:e,...Bt(n)});Vc.createWithPreprocess=(t,e,n)=>new Vc({schema:e,effect:{type:"preprocess",transform:t},typeName:Ct.ZodEffects,...Bt(n)});class td extends Ht{_parse(e){return this._getType(e)===Ue.undefined?$i(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}td.create=(t,e)=>new td({innerType:t,typeName:Ct.ZodOptional,...Bt(e)});class Hg extends Ht{_parse(e){return this._getType(e)===Ue.null?$i(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Hg.create=(t,e)=>new Hg({innerType:t,typeName:Ct.ZodNullable,...Bt(e)});class JC extends Ht{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ue.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}JC.create=(t,e)=>new JC({innerType:t,typeName:Ct.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Bt(e)});class AI extends Ht{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return vI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new jc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new jc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}AI.create=(t,e)=>new AI({innerType:t,typeName:Ct.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Bt(e)});class SI extends Ht{_parse(e){if(this._getType(e)!==Ue.nan){const r=this._getOrReturnCtx(e);return He(r,{code:Se.invalid_type,expected:Ue.nan,received:r.parsedType}),Ot}return{status:"valid",value:e.data}}}SI.create=t=>new SI({typeName:Ct.ZodNaN,...Bt(t)});const lOe=Symbol("zod_brand");class NZ extends Ht{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class E1 extends Ht{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ot:i.status==="dirty"?(n.dirty(),xZ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ot:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new E1({in:e,out:n,typeName:Ct.ZodPipeline})}}class xI extends Ht{_parse(e){const n=this._def.innerType._parse(e);return jC(n)&&(n.value=Object.freeze(n.value)),n}}xI.create=(t,e)=>new xI({innerType:t,typeName:Ct.ZodReadonly,...Bt(e)});const TZ=(t,e={},n)=>t?Ow.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Ow.create(),uOe={object:mr.lazycreate};var Ct;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ct||(Ct={}));const dOe=(t,e={message:`Input not instance of ${t.name}`})=>TZ(n=>n instanceof t,e),RZ=Lc.create,PZ=Af.create,hOe=SI.create,fOe=Sf.create,OZ=WC.create,pOe=Wg.create,gOe=EI.create,mOe=zC.create,yOe=HC.create,wOe=Ow.create,bOe=gg.create,vOe=yd.create,EOe=CI.create,COe=Wc.create,_Oe=mr.create,AOe=mr.strictCreate,SOe=GC.create,xOe=OT.create,IOe=qC.create,NOe=Zl.create,TOe=VC.create,ROe=_I.create,POe=zg.create,OOe=e0.create,kOe=KC.create,DOe=YC.create,MOe=xf.create,LOe=QC.create,UOe=kw.create,rj=Vc.create,$Oe=td.create,BOe=Hg.create,FOe=Vc.createWithPreprocess,jOe=E1.create,WOe=()=>RZ().optional(),zOe=()=>PZ().optional(),HOe=()=>OZ().optional(),GOe={string:t=>Lc.create({...t,coerce:!0}),number:t=>Af.create({...t,coerce:!0}),boolean:t=>WC.create({...t,coerce:!0}),bigint:t=>Sf.create({...t,coerce:!0}),date:t=>Wg.create({...t,coerce:!0})},qOe=Ot;var E=Object.freeze({__proto__:null,defaultErrorMap:FC,setErrorMap:QPe,getErrorMap:wI,makeIssue:bI,EMPTY_PATH:JPe,addIssueToContext:He,ParseStatus:fi,INVALID:Ot,DIRTY:xZ,OK:$i,isAborted:S3,isDirty:x3,isValid:jC,isAsync:vI,get util(){return bn},get objectUtil(){return A3},ZodParsedType:Ue,getParsedType:sh,ZodType:Ht,ZodString:Lc,ZodNumber:Af,ZodBigInt:Sf,ZodBoolean:WC,ZodDate:Wg,ZodSymbol:EI,ZodUndefined:zC,ZodNull:HC,ZodAny:Ow,ZodUnknown:gg,ZodNever:yd,ZodVoid:CI,ZodArray:Wc,ZodObject:mr,ZodUnion:GC,ZodDiscriminatedUnion:OT,ZodIntersection:qC,ZodTuple:Zl,ZodRecord:VC,ZodMap:_I,ZodSet:zg,ZodFunction:e0,ZodLazy:KC,ZodLiteral:YC,ZodEnum:xf,ZodNativeEnum:QC,ZodPromise:kw,ZodEffects:Vc,ZodTransformer:Vc,ZodOptional:td,ZodNullable:Hg,ZodDefault:JC,ZodCatch:AI,ZodNaN:SI,BRAND:lOe,ZodBranded:NZ,ZodPipeline:E1,ZodReadonly:xI,custom:TZ,Schema:Ht,ZodSchema:Ht,late:uOe,get ZodFirstPartyTypeKind(){return Ct},coerce:GOe,any:wOe,array:COe,bigint:fOe,boolean:OZ,date:pOe,discriminatedUnion:xOe,effect:rj,enum:MOe,function:OOe,instanceof:dOe,intersection:IOe,lazy:kOe,literal:DOe,map:ROe,nan:hOe,nativeEnum:LOe,never:vOe,null:yOe,nullable:BOe,number:PZ,object:_Oe,oboolean:HOe,onumber:zOe,optional:$Oe,ostring:WOe,pipeline:jOe,preprocess:FOe,promise:UOe,record:TOe,set:POe,strictObject:AOe,string:RZ,symbol:gOe,transformer:rj,tuple:NOe,undefined:mOe,union:SOe,unknown:bOe,void:EOe,NEVER:qOe,ZodIssueCode:Se,quotelessJson:YPe,ZodError:jc});const Ar=E.object({message:E.string()});function We(t){return E.literal(qe[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const VOe=E.object({chainId:E.string().or(E.number())}),KOe=E.object({email:E.string().email()}),YOe=E.object({otp:E.string()}),QOe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),JOe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),ZOe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),XOe=E.object({email:E.string().email()}),e2e=E.object({otp:E.string()}),t2e=E.object({otp:E.string()}),n2e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),r2e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),s2e=E.object({type:E.string()}),i2e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),o2e=E.object({url:E.string()}),a2e=E.object({userName:E.string()}),c2e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Hs.ACCOUNT_TYPES.EOA,Hs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),l2e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),u2e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Hs.ACCOUNT_TYPES.EOA,Hs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),d2e=E.object({uri:E.string()}),h2e=E.object({isConnected:E.boolean()}),f2e=E.object({chainId:E.string().or(E.number())}),p2e=E.object({chainId:E.string().or(E.number())}),g2e=E.object({newEmail:E.string().email()}),m2e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const y2e=E.object({version:E.string().optional()}),w2e=E.object({type:E.string(),address:E.string()}),b2e=E.any(),v2e=E.object({method:E.literal("eth_accounts")}),E2e=E.object({method:E.literal("eth_blockNumber")}),C2e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),_2e=E.object({method:E.literal("eth_chainId")}),A2e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),S2e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),x2e=E.object({method:E.literal("eth_gasPrice")}),I2e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),N2e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),T2e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),R2e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),P2e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),O2e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),k2e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),D2e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),M2e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),L2e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),U2e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),$2e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),B2e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),F2e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),j2e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),W2e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),z2e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),H2e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),G2e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),q2e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),V2e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),K2e=E.object({method:E.literal("eth_newBlockFilter")}),Y2e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),Q2e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),J2e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),Z2e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),X2e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),sj=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),eke=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),tke=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),nke=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),rke=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),ske=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),ike=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),oke=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),ake=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),cke=E.object({method:E.literal("wallet_getCapabilities")}),lke=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),uke=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),dke=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),ij=E.object({token:E.string()}),ze=E.object({id:E.string().optional()}),fv={appEvent:ze.extend({type:We("APP_SWITCH_NETWORK"),payload:VOe}).or(ze.extend({type:We("APP_CONNECT_EMAIL"),payload:KOe})).or(ze.extend({type:We("APP_CONNECT_DEVICE")})).or(ze.extend({type:We("APP_CONNECT_OTP"),payload:YOe})).or(ze.extend({type:We("APP_CONNECT_SOCIAL"),payload:QOe})).or(ze.extend({type:We("APP_GET_FARCASTER_URI")})).or(ze.extend({type:We("APP_CONNECT_FARCASTER")})).or(ze.extend({type:We("APP_GET_USER"),payload:E.optional(JOe)})).or(ze.extend({type:We("APP_GET_SOCIAL_REDIRECT_URI"),payload:ZOe})).or(ze.extend({type:We("APP_SIGN_OUT")})).or(ze.extend({type:We("APP_IS_CONNECTED"),payload:E.optional(ij)})).or(ze.extend({type:We("APP_GET_CHAIN_ID")})).or(ze.extend({type:We("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(ze.extend({type:We("APP_INIT_SMART_ACCOUNT")})).or(ze.extend({type:We("APP_SET_PREFERRED_ACCOUNT"),payload:s2e})).or(ze.extend({type:We("APP_RPC_REQUEST"),payload:sj.or(dke).or(v2e).or(E2e).or(C2e).or(_2e).or(A2e).or(S2e).or(x2e).or(I2e).or(N2e).or(T2e).or(R2e).or(P2e).or(O2e).or(k2e).or(D2e).or(M2e).or(L2e).or(U2e).or($2e).or(B2e).or(F2e).or(j2e).or(W2e).or(z2e).or(H2e).or(G2e).or(q2e).or(V2e).or(K2e).or(Y2e).or(Q2e).or(J2e).or(Z2e).or(X2e).or(sj).or(eke).or(tke).or(nke).or(rke).or(ske).or(ike).or(ake).or(oke).or(cke).or(lke).or(uke)})).or(ze.extend({type:We("APP_UPDATE_EMAIL"),payload:XOe})).or(ze.extend({type:We("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:e2e})).or(ze.extend({type:We("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:t2e})).or(ze.extend({type:We("APP_SYNC_THEME"),payload:n2e})).or(ze.extend({type:We("APP_SYNC_DAPP_DATA"),payload:r2e})).or(ze.extend({type:We("APP_RELOAD")})),frameEvent:ze.extend({type:We("FRAME_SWITCH_NETWORK_ERROR"),payload:Ar}).or(ze.extend({type:We("FRAME_SWITCH_NETWORK_SUCCESS"),payload:p2e})).or(ze.extend({type:We("FRAME_CONNECT_EMAIL_SUCCESS"),payload:i2e})).or(ze.extend({type:We("FRAME_CONNECT_EMAIL_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:o2e})).or(ze.extend({type:We("FRAME_GET_FARCASTER_URI_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:a2e})).or(ze.extend({type:We("FRAME_CONNECT_FARCASTER_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_OTP_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_OTP_SUCCESS")})).or(ze.extend({type:We("FRAME_CONNECT_DEVICE_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_CONNECT_DEVICE_SUCCESS")})).or(ze.extend({type:We("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:c2e})).or(ze.extend({type:We("FRAME_CONNECT_SOCIAL_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_USER_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_USER_SUCCESS"),payload:u2e})).or(ze.extend({type:We("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:d2e})).or(ze.extend({type:We("FRAME_SIGN_OUT_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SIGN_OUT_SUCCESS")})).or(ze.extend({type:We("FRAME_IS_CONNECTED_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_IS_CONNECTED_SUCCESS"),payload:h2e})).or(ze.extend({type:We("FRAME_GET_CHAIN_ID_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_GET_CHAIN_ID_SUCCESS"),payload:f2e})).or(ze.extend({type:We("FRAME_RPC_REQUEST_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_RPC_REQUEST_SUCCESS"),payload:b2e})).or(ze.extend({type:We("FRAME_SESSION_UPDATE"),payload:ij})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_SUCCESS"),payload:l2e})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:g2e})).or(ze.extend({type:We("FRAME_SYNC_THEME_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SYNC_THEME_SUCCESS")})).or(ze.extend({type:We("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(ze.extend({type:We("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:m2e})).or(ze.extend({type:We("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:w2e})).or(ze.extend({type:We("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_READY"),payload:y2e})).or(ze.extend({type:We("FRAME_RELOAD_ERROR"),payload:Ar})).or(ze.extend({type:We("FRAME_RELOAD_SUCCESS")}))};function _O(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let hke=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=je.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!_O(qe.FRAME_EVENT_KEY,l))return;const u=fv.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Yo.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Yo.isClient&&window.addEventListener("message",({data:o})=>{if(!_O(qe.FRAME_EVENT_KEY,o))return;const a=fv.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Yo.isClient&&window.addEventListener("message",({data:o})=>{if(!_O(qe.APP_EVENT_KEY,o))return;const a=fv.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Yo.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");fv.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Yo.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");fv.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Yo.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${JAe}?projectId=${e}&chainId=${r}&version=${XAe}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},fke=class{constructor(e){var i;const n=bm({level:ZAe}),{logger:r,chunkLoggerController:s}=_T({opts:n});this.logger=Ys(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},pke=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new fke(e)),this.abortController=i,this.w3mFrame=new hke({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ds.get(qe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ds.get(qe.EMAIL)}getUsername(){return Ds.get(qe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:qe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Yo.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:qe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:qe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:qe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:qe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:qe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:qe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:qe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:qe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:qe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:qe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:qe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:qe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:qe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:qe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:qe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:qe.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:qe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:qe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:qe.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:qe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Hs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:qe.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===qe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===qe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Hs.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===qe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===qe.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Hs.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[qe.APP_SYNC_DAPP_DATA,qe.APP_SYNC_THEME,qe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[qe.APP_CONNECT_EMAIL,qe.APP_CONNECT_DEVICE,qe.APP_CONNECT_OTP,qe.APP_CONNECT_SOCIAL,qe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ds.set(qe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ds.set(qe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ds.set(qe.EMAIL,e),Ds.set(qe.EMAIL_LOGIN_USED_KEY,"true"),Ds.delete(qe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ds.delete(qe.EMAIL_LOGIN_USED_KEY),Ds.delete(qe.EMAIL),Ds.delete(qe.LAST_USED_CHAIN_KEY),Ds.delete(qe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ds.set(qe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ds.get(qe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ds.set(qe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},gke=class $S{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return $S.instance||($S.instance=new pke({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),$S.instance}};function mke(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function fs(t,...e){try{return mke(t(...e))}catch(n){return Promise.reject(n)}}function yke(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function wke(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function BS(t){if(yke(t))return String(t);if(wke(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return BS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const N3="base64:";function bke(t){return typeof t=="string"?t:N3+Cke(t)}function vke(t){return typeof t!="string"||!t.startsWith(N3)?t:Eke(t.slice(N3.length))}function Eke(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function Cke(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function eo(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function _ke(...t){return eo(t.join(":"))}function FA(t){return t=eo(t),t?t+":":""}function Ake(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function Ske(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const xke="memory",Ike=()=>{const t=new Map;return{name:xke,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Nke(t={}){const e={mounts:{"":t.driver||Ike()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=eo(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await oj(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=eo(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=eo(l);const{relativeKey:d,driver:h}=n(l);return fs(h.hasItem,d,u)},getItem(l,u={}){l=eo(l);const{relativeKey:d,driver:h}=n(l);return fs(h.getItem,d,u).then(f=>kA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?fs(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:_ke(d.base,f.key),value:kA(f.value)}))):Promise.all(d.items.map(h=>fs(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:kA(f)})))))},getItemRaw(l,u={}){l=eo(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?fs(h.getItemRaw,d,u):fs(h.getItem,d,u).then(f=>vke(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=eo(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await fs(f.setItem,h,BS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return fs(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:BS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>fs(d.driver.setItem,h.relativeKey,BS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=eo(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await fs(f.setItemRaw,h,u,d);else if(f.setItem)await fs(f.setItem,h,bke(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=eo(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await fs(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await fs(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=eo(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await fs(h.getMeta,d,u)),!u.nativeOnly){const p=await fs(h.getItem,d+"$",u).then(g=>kA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=FA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await fs(y.driver.getKeys,y.relativeBase,u);for(const v of b){const A=y.mountpoint+eo(v);h.some(_=>A.startsWith(_))||f.push(A)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||Ake(y,u.maxDepth))&&Ske(y,l))},async clear(l,u={}){l=FA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return fs(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>aj(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=FA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(oj(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=FA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await aj(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=eo(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=eo(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function oj(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function aj(t){typeof t.dispose=="function"&&await fs(t.dispose)}const Tke="idb-keyval";var Rke=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=PJ(t.dbName,t.storeName)),{name:Tke,options:t,async hasItem(s){return!(typeof await uF(n(s),r)>"u")},async getItem(s){return await uF(n(s),r)??null},setItem(s,i){return exe(n(s),i,r)},removeItem(s){return txe(n(s),r)},getKeys(){return sxe(r)},clear(){return nxe(r)}}};const Pke="WALLET_CONNECT_V2_INDEXED_DB",Oke="keyvaluestorage";let kke=class{constructor(){this.indexedDb=Nke({driver:Rke({dbName:Pke,storeName:Oke})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,md(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var AO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof AO<"u"&&AO.localStorage?FS.exports=AO.localStorage:typeof window<"u"&&window.localStorage?FS.exports=window.localStorage:FS.exports=new e})();function Dke(t){var e;return[t[0],Fg((e=t[1])!=null?e:"")]}let Mke=class{constructor(){this.localStorage=FS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Dke)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Fg(n)}async setItem(e,n){this.localStorage.setItem(e,md(n))}async removeItem(e){this.localStorage.removeItem(e)}};const Lke="wc_storage_version",cj=1,Uke=async(t,e,n)=>{const r=Lke,s=await e.getItem(r);if(s&&s>=cj){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,cj),n(e),$ke(t,o)},$ke=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Bke=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Mke;this.storage=e;try{const n=new kke;Uke(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var Fke=Object.defineProperty,jke=(t,e,n)=>e in t?Fke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lj=(t,e,n)=>jke(t,typeof e!="symbol"?e+"":e,n);let Wke=class extends mm{constructor(e){super(),this.opts=e,lj(this,"protocol","wc"),lj(this,"version",2)}};var zke=Object.defineProperty,Hke=(t,e,n)=>e in t?zke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gke=(t,e,n)=>Hke(t,e+"",n);let qke=class extends mm{constructor(e,n){super(),this.core=e,this.logger=n,Gke(this,"records",new Map)}},Vke=class{constructor(e,n){this.logger=e,this.core=n}},Kke=class extends mm{constructor(e,n){super(),this.relayer=e,this.logger=n}},Yke=class extends mm{constructor(e){super()}},Qke=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},Jke=class extends mm{constructor(e,n){super(),this.relayer=e,this.logger=n}},Zke=class extends mm{constructor(e,n){super(),this.core=e,this.logger=n}},Xke=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},eDe=class{constructor(e,n){this.projectId=e,this.logger=n}},tDe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var nDe=Object.defineProperty,rDe=(t,e,n)=>e in t?nDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uj=(t,e,n)=>rDe(t,typeof e!="symbol"?e+"":e,n);let sDe=class{constructor(e){this.opts=e,uj(this,"protocol","wc"),uj(this,"version",2)}},iDe=class{constructor(e){this.client=e}};function ZC(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function dj(t){return ZC(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const kZ="2.23.2";let pv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${kZ}`};class Gg extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Gg?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Gg&&n.cause.docsPath||n.docsPath,i=(a=pv.getDocsUrl)==null?void 0:a.call(pv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...pv.version?[`Version: ${pv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=kZ}walk(e){return DZ(this,e)}}function DZ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?DZ(t.cause,e):e?null:t}class MZ extends Gg{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Cb(t,{dir:e,size:n=32}={}){return typeof t=="string"?oDe(t,{dir:e,size:n}):aDe(t,{dir:e,size:n})}function oDe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new MZ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function aDe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new MZ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class cDe extends Gg{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class lDe extends Gg{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function _b(t,{size:e}){if(dj(t)>e)throw new lDe({givenSize:dj(t),maxSize:e})}function T3(t,e={}){const{signed:n}=e;e.size&&_b(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function uDe(t,e={}){return Number(T3(t,e))}const dDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function R3(t,e={}){return typeof t=="number"||typeof t=="bigint"?UZ(t,e):typeof t=="string"?pDe(t,e):typeof t=="boolean"?hDe(t,e):LZ(t,e)}function hDe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(_b(n,{size:e.size}),Cb(n,{size:e.size})):n}function LZ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=dDe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(_b(r,{size:e.size}),Cb(r,{dir:"right",size:e.size})):r}function UZ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new cDe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Cb(a,{size:r}):a}const fDe=new TextEncoder;function pDe(t,e={}){const n=fDe.encode(t);return LZ(n,e)}const gDe=new TextEncoder;function mDe(t,e={}){return typeof t=="number"||typeof t=="bigint"?wDe(t,e):typeof t=="boolean"?yDe(t,e):ZC(t)?$Z(t,e):BZ(t,e)}function yDe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(_b(n,{size:e.size}),Cb(n,{size:e.size})):n}const mu={zero:48,nine:57,A:65,F:70,a:97,f:102};function hj(t){if(t>=mu.zero&&t<=mu.nine)return t-mu.zero;if(t>=mu.A&&t<=mu.F)return t-(mu.A-10);if(t>=mu.a&&t<=mu.f)return t-(mu.a-10)}function $Z(t,e={}){let n=t;e.size&&(_b(n,{size:e.size}),n=Cb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=hj(r.charCodeAt(a++)),l=hj(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new Gg(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function wDe(t,e){const n=UZ(t,e);return $Z(n)}function BZ(t,e={}){const n=gDe.encode(t);return typeof e.size=="number"?(_b(n,{size:e.size}),Cb(n,{dir:"right",size:e.size})):n}function II(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function bDe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kT(t,...e){if(!bDe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function uKe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");II(t.outputLen),II(t.blockLen)}function fj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vDe(t,e){kT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const jA=BigInt(2**32-1),pj=BigInt(32);function EDe(t,e=!1){return e?{h:Number(t&jA),l:Number(t>>pj&jA)}:{h:Number(t>>pj&jA)|0,l:Number(t&jA)|0}}function CDe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=EDe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const _De=(t,e,n)=>t<<n|e>>>32-n,ADe=(t,e,n)=>e<<n|t>>>32-n,SDe=(t,e,n)=>e<<n-32|t>>>64-n,xDe=(t,e,n)=>t<<n-32|e>>>64-n,Hm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function IDe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function dKe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function hKe(t,e){return t<<32-e|t>>>e}const gj=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function NDe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function mj(t){for(let e=0;e<t.length;e++)t[e]=NDe(t[e])}function TDe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function FZ(t){return typeof t=="string"&&(t=TDe(t)),kT(t),t}function fKe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];kT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let RDe=class{clone(){return this._cloneInto()}};function PDe(t){const e=r=>t().update(FZ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function gKe(t=32){if(Hm&&typeof Hm.getRandomValues=="function")return Hm.getRandomValues(new Uint8Array(t));if(Hm&&typeof Hm.randomBytes=="function")return Hm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const jZ=[],WZ=[],zZ=[],ODe=BigInt(0),gv=BigInt(1),kDe=BigInt(2),DDe=BigInt(7),MDe=BigInt(256),LDe=BigInt(113);for(let t=0,e=gv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],jZ.push(2*(5*r+n)),WZ.push((t+1)*(t+2)/2%64);let s=ODe;for(let i=0;i<7;i++)e=(e<<gv^(e>>DDe)*LDe)%MDe,e&kDe&&(s^=gv<<(gv<<BigInt(i))-gv);zZ.push(s)}const[UDe,$De]=CDe(zZ,!0),yj=(t,e,n)=>n>32?SDe(t,e,n):_De(t,e,n),wj=(t,e,n)=>n>32?xDe(t,e,n):ADe(t,e,n);function BDe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=yj(l,u,1)^n[a],h=wj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=WZ[o],c=yj(s,i,a),l=wj(s,i,a),u=jZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=UDe[r],t[1]^=$De[r]}n.fill(0)}let FDe=class HZ extends RDe{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,II(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=IDe(this.state)}keccak(){gj||mj(this.state32),BDe(this.state32,this.rounds),gj||mj(this.state32),this.posOut=0,this.pos=0}update(e){fj(this);const{blockLen:n,state:r}=this;e=FZ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){fj(this,!1),kT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return II(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(vDe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new HZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const jDe=(t,e,n)=>PDe(()=>new FDe(e,t,n)),WDe=jDe(1,136,256/8);function GZ(t,e){const n=e||"hex",r=WDe(ZC(t,{strict:!1})?mDe(t):t);return n==="bytes"?r:R3(r)}class zDe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const SO=new zDe(8192);function HDe(t,e){if(SO.has(`${t}.${e}`))return SO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=GZ(BZ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return SO.set(`${t}.${e}`,i),i}function GDe(t){const e=GZ(`0x${t.substring(4)}`).substring(26);return HDe(`0x${e}`)}async function qDe({hash:t,signature:e}){const n=ZC(t)?t:R3(t),{secp256k1:r}=await ci(async()=>{const{secp256k1:o}=await import("./secp256k1-CY1ZLe7a.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=bj(f);return new r.Signature(T3(l),T3(u)).addRecoveryBit(p)}const o=ZC(e)?e:R3(e),a=uDe(`0x${o.slice(130)}`),c=bj(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function bj(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function VDe({hash:t,signature:e}){return GDe(await qDe({hash:t,signature:e}))}var KDe={};const YDe=":";function t0(t){const[e,n]=t.split(YDe);return{namespace:e,reference:n}}function qZ(t,e){return t.includes(":")?[t]:e.chains||[]}var QDe=Object.defineProperty,JDe=Object.defineProperties,ZDe=Object.getOwnPropertyDescriptors,vj=Object.getOwnPropertySymbols,XDe=Object.prototype.hasOwnProperty,e3e=Object.prototype.propertyIsEnumerable,Ej=(t,e,n)=>e in t?QDe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cj=(t,e)=>{for(var n in e||(e={}))XDe.call(e,n)&&Ej(t,n,e[n]);if(vj)for(var n of vj(e))e3e.call(e,n)&&Ej(t,n,e[n]);return t},t3e=(t,e)=>JDe(t,ZDe(e));const n3e="ReactNative",Zo={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},r3e="js";function NI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Uf(){return!jg()&&!!FU()&&navigator.product===n3e}function s3e(){return Uf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function i3e(){return Uf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Ab(){return!NI()&&!!FU()&&!!jg()}function C1(){return Uf()?Zo.reactNative:NI()?Zo.node:Ab()?Zo.browser:Zo.unknown}function _j(){var t;try{return Uf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function o3e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function a3e(t){var e,n;const r=VZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),t3e(Cj(Cj({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function VZ(){return dZ()||{name:"",description:"",url:"",icons:[""]}}function c3e(){if(C1()===Zo.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=OTe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function l3e(){var t;const e=C1();return e===Zo.browser?[e,((t=uZ())==null?void 0:t.host)||"unknown"].join(":"):e}function KZ(t,e,n){const r=c3e(),s=l3e();return[[t,e].join("-"),[r3e,n].join("-"),r,s].join("/")}function u3e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=KZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=o3e(l[1]||"",d);return l[0]+"?"+h}function Pp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function P3(t){return Object.fromEntries(t.entries())}function O3(t){return new Map(Object.entries(t))}function ip(t=Te.FIVE_MINUTES,e){const n=Te.toMiliseconds(t||Te.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Bh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function YZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function d3e(t){return YZ("topic",t)}function h3e(t){return YZ("id",t)}function QZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Jr(t,e){return Te.fromMiliseconds(Date.now()+Te.toMiliseconds(t))}function eh(t){return Date.now()>=Te.toMiliseconds(t)}function Sn(t,e){return`${t}${e?`:${e}`:""}`}function Gl(t=[],e=[]){return[...new Set([...t,...e])]}async function f3e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=p3e(i,t,e),a=C1();if(a===Zo.browser){if(!((r=jg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}g3e(o)}else a===Zo.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function p3e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${b3e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function g3e(t){let e="_self";w3e()?e="_top":(y3e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function m3e(t,e){let n="";try{if(Ab()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function Aj(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function Sj(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function HU(){return typeof process<"u"&&KDe.IS_VITEST==="true"}function y3e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function w3e(){try{return window.self!==window.top}catch{return!1}}function b3e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function JZ(t){return Buffer.from(t,"base64").toString("utf-8")}function v3e(t){return new Promise(e=>setTimeout(e,t))}function XC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function E3e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function _1(t,...e){if(!E3e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function GU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");XC(t.outputLen),XC(t.blockLen)}function Dw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function ZZ(t,e){_1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const WA=BigInt(2**32-1),xj=BigInt(32);function C3e(t,e=!1){return e?{h:Number(t&WA),l:Number(t>>xj&WA)}:{h:Number(t>>xj&WA)|0,l:Number(t&WA)|0}}function _3e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=C3e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const A3e=(t,e,n)=>t<<n|e>>>32-n,S3e=(t,e,n)=>e<<n|t>>>32-n,x3e=(t,e,n)=>e<<n-32|t>>>64-n,I3e=(t,e,n)=>t<<n-32|e>>>64-n,Gm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function N3e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function xO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function rl(t,e){return t<<32-e|t>>>e}const Ij=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function T3e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Nj(t){for(let e=0;e<t.length;e++)t[e]=T3e(t[e])}function R3e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Mw(t){return typeof t=="string"&&(t=R3e(t)),_1(t),t}function P3e(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];_1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let qU=class{clone(){return this._cloneInto()}};function XZ(t){const e=r=>t().update(Mw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Sb(t=32){if(Gm&&typeof Gm.getRandomValues=="function")return Gm.getRandomValues(new Uint8Array(t));if(Gm&&typeof Gm.randomBytes=="function")return Gm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const eX=[],tX=[],nX=[],O3e=BigInt(0),mv=BigInt(1),k3e=BigInt(2),D3e=BigInt(7),M3e=BigInt(256),L3e=BigInt(113);for(let t=0,e=mv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],eX.push(2*(5*r+n)),tX.push((t+1)*(t+2)/2%64);let s=O3e;for(let i=0;i<7;i++)e=(e<<mv^(e>>D3e)*L3e)%M3e,e&k3e&&(s^=mv<<(mv<<BigInt(i))-mv);nX.push(s)}const[U3e,$3e]=_3e(nX,!0),Tj=(t,e,n)=>n>32?x3e(t,e,n):A3e(t,e,n),Rj=(t,e,n)=>n>32?I3e(t,e,n):S3e(t,e,n);function B3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=Tj(l,u,1)^n[a],h=Rj(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=tX[o],c=Tj(s,i,a),l=Rj(s,i,a),u=eX[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=U3e[r],t[1]^=$3e[r]}n.fill(0)}let F3e=class rX extends qU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,XC(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=N3e(this.state)}keccak(){Ij||Nj(this.state32),B3e(this.state32,this.rounds),Ij||Nj(this.state32),this.posOut=0,this.pos=0}update(e){Dw(this);const{blockLen:n,state:r}=this;e=Mw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Dw(this,!1),_1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return XC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ZZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new rX(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const j3e=(t,e,n)=>XZ(()=>new F3e(e,t,n)),W3e=j3e(1,136,256/8),z3e="https://rpc.walletconnect.org/v1";function sX(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(W3e(n)).toString("hex")}async function H3e(t,e,n,r,s,i){switch(n.t){case"eip191":return await G3e(t,e,n.s);case"eip1271":return await q3e(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function G3e(t,e,n){return(await VDe({hash:sX(e),signature:n})).toLowerCase()===t.toLowerCase()}async function q3e(t,e,n,r,s,i){const o=t0(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=sX(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||z3e}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:V3e(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function V3e(){return Date.now()+Math.floor(Math.random()*1e3)}function K3e(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return hZ.encode(i)}var Y3e=Object.defineProperty,Q3e=Object.defineProperties,J3e=Object.getOwnPropertyDescriptors,Pj=Object.getOwnPropertySymbols,Z3e=Object.prototype.hasOwnProperty,X3e=Object.prototype.propertyIsEnumerable,Oj=(t,e,n)=>e in t?Y3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e5e=(t,e)=>{for(var n in e||(e={}))Z3e.call(e,n)&&Oj(t,n,e[n]);if(Pj)for(var n of Pj(e))X3e.call(e,n)&&Oj(t,n,e[n]);return t},t5e=(t,e)=>Q3e(t,J3e(e));const n5e="did:pkh:",VU=t=>t==null?void 0:t.split(":"),r5e=t=>{const e=t&&VU(t);if(e)return t.includes(n5e)?e[3]:e[1]},k3=t=>{const e=t&&VU(t);if(e)return e[2]+":"+e[3]},TI=t=>{const e=t&&VU(t);if(e)return e.pop()};async function kj(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=iX(s,s.iss),o=TI(s.iss);return await H3e(o,i,r,k3(s.iss),n)}const iX=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=TI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${r5e(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=jS(t.resources);if(p){const g=e_(p);s=h5e(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function s5e(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function i5e(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function qg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function o5e(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:a5e(e,n,r)}}}function a5e(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function oX(t){return qg(t),`urn:recap:${s5e(t).replace(/=/g,"")}`}function e_(t){const e=i5e(t.replace("urn:recap:",""));return qg(e),e}function c5e(t,e,n){const r=o5e(t,e,n);return oX(r)}function l5e(t){return t&&t.includes("urn:recap:")}function u5e(t,e){const n=e_(t),r=e_(e),s=d5e(n,r);return oX(s)}function d5e(t,e){qg(t),qg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=t5e(e5e({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function h5e(t="",e){qg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function Dj(t){var e;const n=e_(t);qg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function Mj(t){const e=e_(t);qg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function jS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return l5e(e)?e:void 0}function IO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function aX(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ko(t,...e){if(!aX(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Lj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function f5e(t,e){Ko(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Uj(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const cf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),p5e=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),g5e=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!g5e)throw new Error("Non little-endian hardware is not supported");function m5e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function D3(t){if(typeof t=="string")t=m5e(t);else if(aX(t))t=M3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function y5e(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function w5e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const b5e=(t,e)=>{function n(r,...s){if(Ko(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?Ko(l):Ko(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&Ko(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");Ko(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ko(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(Ko(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function $j(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!v5e(e))throw new Error("invalid output, must be aligned");return e}function Bj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function v5e(t){return t.byteOffset%4===0}function M3(t){return Uint8Array.from(t)}function Lw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const cX=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),E5e=cX("expand 16-byte k"),C5e=cX("expand 32-byte k"),_5e=cf(E5e),A5e=cf(C5e);function gn(t,e){return t<<e|t>>>32-e}function L3(t){return t.byteOffset%4===0}const zA=64,S5e=16,lX=2**32-1,Fj=new Uint32Array;function x5e(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(zA),u=cf(l),d=L3(s)&&L3(i),h=d?cf(s):Fj,f=d?cf(i):Fj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=lX)throw new Error("arx: counter overflow");const g=Math.min(zA,c-p);if(d&&g===zA){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<S5e;y++)b=w+y,f[b]=h[b]^u[y];p+=zA;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function I5e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=y5e({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return IO(s),IO(o),Uj(i),Uj(n),(a,c,l,u,d=0)=>{Ko(a),Ko(c),Ko(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),Ko(u),IO(d),d<0||d>=lX)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=M3(a)),w=A5e;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=_5e,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);L3(c)||f.push(c=M3(c));const y=cf(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,cf(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=cf(c);return x5e(t,w,y,v,l,u,d,o),Lw(...f),u}}const Rs=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class N5e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=D3(e),Ko(e,32);const n=Rs(e,0),r=Rs(e,2),s=Rs(e,4),i=Rs(e,6),o=Rs(e,8),a=Rs(e,10),c=Rs(e,12),l=Rs(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Rs(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Rs(e,n+0),b=Rs(e,n+2),v=Rs(e,n+4),A=Rs(e,n+6),_=Rs(e,n+8),I=Rs(e,n+10),x=Rs(e,n+12),N=Rs(e,n+14);let S=i[0]+(y&8191),O=i[1]+((y>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),F=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|_<<12)&8191),B=i[5]+(_>>>1&8191),T=i[6]+((_>>>14|I<<2)&8191),R=i[7]+((I>>>11|x<<5)&8191),$=i[8]+((x>>>8|N<<8)&8191),k=i[9]+(N>>>5|s),M=0,j=M+S*a+O*(5*w)+P*(5*g)+F*(5*p)+G*(5*f);M=j>>>13,j&=8191,j+=B*(5*h)+T*(5*d)+R*(5*u)+$*(5*l)+k*(5*c),M+=j>>>13,j&=8191;let K=M+S*c+O*a+P*(5*w)+F*(5*g)+G*(5*p);M=K>>>13,K&=8191,K+=B*(5*f)+T*(5*h)+R*(5*d)+$*(5*u)+k*(5*l),M+=K>>>13,K&=8191;let ne=M+S*l+O*c+P*a+F*(5*w)+G*(5*g);M=ne>>>13,ne&=8191,ne+=B*(5*p)+T*(5*f)+R*(5*h)+$*(5*d)+k*(5*u),M+=ne>>>13,ne&=8191;let le=M+S*u+O*l+P*c+F*a+G*(5*w);M=le>>>13,le&=8191,le+=B*(5*g)+T*(5*p)+R*(5*f)+$*(5*h)+k*(5*d),M+=le>>>13,le&=8191;let oe=M+S*d+O*u+P*l+F*c+G*a;M=oe>>>13,oe&=8191,oe+=B*(5*w)+T*(5*g)+R*(5*p)+$*(5*f)+k*(5*h),M+=oe>>>13,oe&=8191;let ae=M+S*h+O*d+P*u+F*l+G*c;M=ae>>>13,ae&=8191,ae+=B*a+T*(5*w)+R*(5*g)+$*(5*p)+k*(5*f),M+=ae>>>13,ae&=8191;let ue=M+S*f+O*h+P*d+F*u+G*l;M=ue>>>13,ue&=8191,ue+=B*c+T*a+R*(5*w)+$*(5*g)+k*(5*p),M+=ue>>>13,ue&=8191;let Xe=M+S*p+O*f+P*h+F*d+G*u;M=Xe>>>13,Xe&=8191,Xe+=B*l+T*c+R*a+$*(5*w)+k*(5*g),M+=Xe>>>13,Xe&=8191;let xe=M+S*g+O*p+P*f+F*h+G*d;M=xe>>>13,xe&=8191,xe+=B*u+T*l+R*c+$*a+k*(5*w),M+=xe>>>13,xe&=8191;let Me=M+S*w+O*g+P*p+F*f+G*h;M=Me>>>13,Me&=8191,Me+=B*d+T*u+R*l+$*c+k*a,M+=Me>>>13,Me&=8191,M=(M<<2)+M|0,M=M+j|0,j=M&8191,M=M>>>13,K+=M,i[0]=j,i[1]=K,i[2]=ne,i[3]=le,i[4]=oe,i[5]=ae,i[6]=ue,i[7]=Xe,i[8]=xe,i[9]=Me}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Lw(r)}update(e){Lj(this);const{buffer:n,blockLen:r}=this;e=D3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Lw(this.h,this.r,this.buffer,this.pad)}digestInto(e){Lj(this),f5e(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function T5e(t){const e=(r,s)=>t(s).update(D3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const R5e=T5e(t=>new N5e(t));function P5e(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],A=n[1],_=n[2],I=o,x=a,N=c,S=l,O=u,P=d,F=h,G=f,B=p,T=g,R=w,$=y,k=b,M=v,j=A,K=_;for(let le=0;le<i;le+=2)I=I+O|0,k=gn(k^I,16),B=B+k|0,O=gn(O^B,12),I=I+O|0,k=gn(k^I,8),B=B+k|0,O=gn(O^B,7),x=x+P|0,M=gn(M^x,16),T=T+M|0,P=gn(P^T,12),x=x+P|0,M=gn(M^x,8),T=T+M|0,P=gn(P^T,7),N=N+F|0,j=gn(j^N,16),R=R+j|0,F=gn(F^R,12),N=N+F|0,j=gn(j^N,8),R=R+j|0,F=gn(F^R,7),S=S+G|0,K=gn(K^S,16),$=$+K|0,G=gn(G^$,12),S=S+G|0,K=gn(K^S,8),$=$+K|0,G=gn(G^$,7),I=I+P|0,K=gn(K^I,16),R=R+K|0,P=gn(P^R,12),I=I+P|0,K=gn(K^I,8),R=R+K|0,P=gn(P^R,7),x=x+F|0,k=gn(k^x,16),$=$+k|0,F=gn(F^$,12),x=x+F|0,k=gn(k^x,8),$=$+k|0,F=gn(F^$,7),N=N+G|0,M=gn(M^N,16),B=B+M|0,G=gn(G^B,12),N=N+G|0,M=gn(M^N,8),B=B+M|0,G=gn(G^B,7),S=S+O|0,j=gn(j^S,16),T=T+j|0,O=gn(O^T,12),S=S+O|0,j=gn(j^S,8),T=T+j|0,O=gn(O^T,7);let ne=0;r[ne++]=o+I|0,r[ne++]=a+x|0,r[ne++]=c+N|0,r[ne++]=l+S|0,r[ne++]=u+O|0,r[ne++]=d+P|0,r[ne++]=h+F|0,r[ne++]=f+G|0,r[ne++]=p+B|0,r[ne++]=g+T|0,r[ne++]=w+R|0,r[ne++]=y+$|0,r[ne++]=b+k|0,r[ne++]=v+M|0,r[ne++]=A+j|0,r[ne++]=_+K|0}const O5e=I5e(P5e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),k5e=new Uint8Array(16),jj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(k5e.subarray(n))},D5e=new Uint8Array(32);function Wj(t,e,n,r,s){const i=t(e,n,D5e),o=R5e.create(i);s&&jj(o,s),jj(o,r);const a=new Uint8Array(16),c=p5e(a);Bj(c,0,BigInt(s?s.length:0),!0),Bj(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Lw(i,a),l}const M5e=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=$j(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=Wj(t,e,n,a,r);return i.set(c,o),Lw(c),i},decrypt(s,i){i=$j(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=Wj(t,e,n,o,r);if(!w5e(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Lw(c),i}}),uX=b5e({blockSize:64,nonceLength:12,tagLength:16},M5e(O5e));let dX=class extends qU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,GU(e);const r=Mw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Dw(this),this.iHash.update(e),this}digestInto(e){Dw(this),_1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const DT=(t,e,n)=>new dX(t,e).update(n).digest();DT.create=(t,e)=>new dX(t,e);function L5e(t,e,n){return GU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),DT(t,Mw(n),Mw(e))}const NO=new Uint8Array([0]),zj=new Uint8Array;function U5e(t,e,n,r=32){if(GU(t),XC(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=zj);const i=new Uint8Array(s*t.outputLen),o=DT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)NO[0]=l+1,a.update(l===0?zj:c).update(n).update(NO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),NO.fill(0),i.slice(0,r)}const $5e=(t,e,n,r,s)=>U5e(t,L5e(t,e,n),r,s);function B5e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function F5e(t,e,n){return t&e^~t&n}function j5e(t,e,n){return t&e^t&n^e&n}let W5e=class extends qU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=xO(this.buffer)}update(e){Dw(this);const{view:n,buffer:r,blockLen:s}=this;e=Mw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=xO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dw(this),ZZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;B5e(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=xO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const z5e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ud=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$d=new Uint32Array(64);class H5e extends W5e{constructor(){super(64,32,8,!1),this.A=Ud[0]|0,this.B=Ud[1]|0,this.C=Ud[2]|0,this.D=Ud[3]|0,this.E=Ud[4]|0,this.F=Ud[5]|0,this.G=Ud[6]|0,this.H=Ud[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)$d[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=$d[d-15],f=$d[d-2],p=rl(h,7)^rl(h,18)^h>>>3,g=rl(f,17)^rl(f,19)^f>>>10;$d[d]=g+$d[d-7]+p+$d[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=rl(a,6)^rl(a,11)^rl(a,25),f=u+h+F5e(a,c,l)+z5e[d]+$d[d]|0,p=(rl(r,2)^rl(r,13)^rl(r,22))+j5e(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){$d.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const A1=XZ(()=>new H5e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const MT=BigInt(0),LT=BigInt(1),G5e=BigInt(2);function Vg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function S1(t){if(!Vg(t))throw new Error("Uint8Array expected")}function Uw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const q5e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $w(t){S1(t);let e="";for(let n=0;n<t.length;n++)e+=q5e[t[n]];return e}function Dy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function KU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?MT:BigInt("0x"+t)}const yu={_0:48,_9:57,A:65,F:70,a:97,f:102};function Hj(t){if(t>=yu._0&&t<=yu._9)return t-yu._0;if(t>=yu.A&&t<=yu.F)return t-(yu.A-10);if(t>=yu.a&&t<=yu.f)return t-(yu.a-10)}function Bw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=Hj(t.charCodeAt(i)),a=Hj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function mg(t){return KU($w(t))}function t_(t){return S1(t),KU($w(Uint8Array.from(t).reverse()))}function Fw(t,e){return Bw(t.toString(16).padStart(e*2,"0"))}function UT(t,e){return Fw(t,e).reverse()}function V5e(t){return Bw(Dy(t))}function qo(t,e,n){let r;if(typeof e=="string")try{r=Bw(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Vg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function n_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];S1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function K5e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Y5e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const TO=t=>typeof t=="bigint"&&MT<=t;function $T(t,e,n){return TO(t)&&TO(e)&&TO(n)&&e<=t&&t<n}function nd(t,e,n,r){if(!$T(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function hX(t){let e;for(e=0;t>MT;t>>=LT,e+=1);return e}function Q5e(t,e){return t>>BigInt(e)&LT}function J5e(t,e,n){return t|(n?LT:MT)<<BigInt(e)}const YU=t=>(G5e<<BigInt(t-1))-LT,RO=t=>new Uint8Array(t),Gj=t=>Uint8Array.from(t);function fX(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=RO(t),s=RO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=RO())=>{s=a(Gj([0]),u),r=a(),u.length!==0&&(s=a(Gj([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return n_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const Z5e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Vg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function xb(t,e,n={}){const r=(s,i,o)=>{const a=Z5e[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const X5e=()=>{throw new Error("not implemented")};function U3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var eMe=Object.freeze({__proto__:null,isBytes:Vg,abytes:S1,abool:Uw,bytesToHex:$w,numberToHexUnpadded:Dy,hexToNumber:KU,hexToBytes:Bw,bytesToNumberBE:mg,bytesToNumberLE:t_,numberToBytesBE:Fw,numberToBytesLE:UT,numberToVarBytesBE:V5e,ensureBytes:qo,concatBytes:n_,equalBytes:K5e,utf8ToBytes:Y5e,inRange:$T,aInRange:nd,bitLen:hX,bitGet:Q5e,bitSet:J5e,bitMask:YU,createHmacDrbg:fX,validateObject:xb,notImplemented:X5e,memoized:U3});const As=BigInt(0),$r=BigInt(1),hp=BigInt(2),tMe=BigInt(3),$3=BigInt(4),qj=BigInt(5),Vj=BigInt(8);function uo(t,e){const n=t%e;return n>=As?n:e+n}function pX(t,e,n){if(e<As)throw new Error("invalid exponent, negatives unsupported");if(n<=As)throw new Error("invalid modulus");if(n===$r)return As;let r=$r;for(;e>As;)e&$r&&(r=r*t%n),t=t*t%n,e>>=$r;return r}function fc(t,e,n){let r=t;for(;e-- >As;)r*=r,r%=n;return r}function B3(t,e){if(t===As)throw new Error("invert: expected non-zero number");if(e<=As)throw new Error("invert: expected positive modulus, got "+e);let n=uo(t,e),r=e,s=As,i=$r;for(;n!==As;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==$r)throw new Error("invert: does not exist");return uo(s,e)}function nMe(t){const e=(t-$r)/hp;let n,r,s;for(n=t-$r,r=0;n%hp===As;n/=hp,r++);for(s=hp;s<t&&pX(s,e,t)!==t-$r;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+$r)/$3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+$r)/hp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,$r<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function rMe(t){if(t%$3===tMe){const e=(t+$r)/$3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%Vj===qj){const e=(t-qj)/Vj;return function(n,r){const s=n.mul(r,hp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,hp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return nMe(t)}const sMe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function iMe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=sMe.reduce((r,s)=>(r[s]="function",r),e);return xb(t,n)}function oMe(t,e,n){if(n<As)throw new Error("invalid exponent, negatives unsupported");if(n===As)return t.ONE;if(n===$r)return e;let r=t.ONE,s=e;for(;n>As;)n&$r&&(r=t.mul(r,s)),s=t.sqr(s),n>>=$r;return r}function aMe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function gX(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function mX(t,e,n=!1,r={}){if(t<=As)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=gX(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:YU(s),ZERO:As,ONE:$r,create:c=>uo(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return As<=c&&c<t},is0:c=>c===As,isOdd:c=>(c&$r)===$r,neg:c=>uo(-c,t),eql:(c,l)=>c===l,sqr:c=>uo(c*c,t),add:(c,l)=>uo(c+l,t),sub:(c,l)=>uo(c-l,t),mul:(c,l)=>uo(c*l,t),pow:(c,l)=>oMe(a,c,l),div:(c,l)=>uo(c*B3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>B3(c,t),sqrt:r.sqrt||(c=>(o||(o=rMe(t)),o(a,c))),invertBatch:c=>aMe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?UT(c,i):Fw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?t_(c):mg(c)}});return Object.freeze(a)}function yX(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function wX(t){const e=yX(t);return e+Math.ceil(e/2)}function cMe(t,e,n=!1){const r=t.length,s=yX(e),i=wX(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?t_(t):mg(t),a=uo(o,e-$r)+$r;return n?UT(a,s):Fw(a,s)}const Kj=BigInt(0),HA=BigInt(1);function PO(t,e){const n=e.negate();return t?n:e}function bX(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function OO(t,e){bX(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function lMe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function uMe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const kO=new WeakMap,vX=new WeakMap;function DO(t){return vX.get(t)||1}function dMe(t,e){return{constTimeNegate:PO,hasPrecomputes(n){return DO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Kj;)r&HA&&(s=s.add(i)),i=i.double(),r>>=HA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=OO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=OO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=HA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(PO(y,r[g])):a=a.add(PO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=OO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===Kj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=HA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=kO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&kO.set(r,s(i))),i},wNAFCached(n,r,s){const i=DO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=DO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){bX(r,e),vX.set(n,r),kO.delete(n)}}}function hMe(t,e,n,r){if(lMe(n,t),uMe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=hX(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function EX(t){return iMe(t.Fp),xb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...gX(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const qm=BigInt(0),MO=BigInt(1);function fMe(t){return xb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function pMe(t){const e=fMe(t),{P:n}=e,r=b=>uo(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>pX(b,n-BigInt(2),n));function l(b,v,A){const _=r(b*(v-A));return v=r(v-_),A=r(A+_),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){nd("u",b,qm,n),nd("scalar",v,qm,n);const A=v,_=b;let I=MO,x=qm,N=b,S=MO,O=qm,P;for(let G=BigInt(s-1);G>=qm;G--){const B=A>>G&MO;O^=B,P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1],O=B;const T=I+x,R=r(T*T),$=I-x,k=r($*$),M=R-k,j=N+S,K=N-S,ne=r(K*T),le=r(j*$),oe=ne+le,ae=ne-le;N=r(oe*oe),S=r(_*r(ae*ae)),I=r(R*k),x=r(M*(R+r(u*M)))}P=l(O,I,N),I=P[0],N=P[1],P=l(O,x,S),x=P[0],S=P[1];const F=c(x);return r(I*F)}function h(b){return UT(r(b),i)}function f(b){const v=qo("u coordinate",b,i);return o===32&&(v[31]&=127),t_(v)}function p(b){const v=qo("scalar",b),A=v.length;if(A!==i&&A!==o){let _=""+i+" or "+o;throw new Error("invalid scalar, expected "+_+" bytes, got "+A)}return t_(a(v))}function g(b,v){const A=f(v),_=p(b),I=d(A,_);if(I===qm)throw new Error("invalid private or public key received");return h(I)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const F3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const gMe=BigInt(1),Yj=BigInt(2),mMe=BigInt(3),yMe=BigInt(5);BigInt(8);function wMe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=F3,o=t*t%i*t%i,a=fc(o,Yj,i)*o%i,c=fc(a,gMe,i)*t%i,l=fc(c,yMe,i)*c%i,u=fc(l,e,i)*l%i,d=fc(u,n,i)*u%i,h=fc(d,r,i)*d%i,f=fc(h,s,i)*h%i,p=fc(f,s,i)*h%i,g=fc(p,e,i)*l%i;return{pow_p_5_8:fc(g,Yj,i)*t%i,b2:o}}function bMe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const j3=pMe({P:F3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=F3,{pow_p_5_8:n,b2:r}=wMe(t);return uo(fc(n,mMe,e)*r,e)},adjustScalarBytes:bMe,randomBytes:Sb});function Qj(t){t.lowS!==void 0&&Uw("lowS",t.lowS),t.prehash!==void 0&&Uw("prehash",t.prehash)}function vMe(t){const e=EX(t);xb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:EMe,hexToBytes:CMe}=eMe;class _Me extends Error{constructor(e=""){super(e)}}const Nu={Err:_Me,_tlv:{encode:(t,e)=>{const{Err:n}=Nu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Dy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Dy(s.length/2|128):"";return Dy(t)+i+s+e},decode(t,e){const{Err:n}=Nu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Nu;if(t<Hu)throw new e("integer: negative integers are not allowed");let n=Dy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Nu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return EMe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Nu,s=typeof t=="string"?CMe(t):t;S1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Nu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Hu=BigInt(0),gs=BigInt(1);BigInt(2);const Jj=BigInt(3);BigInt(4);function AMe(t){const e=vMe(t),{Fp:n}=e,r=mX(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return n_(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return $T(g,gs,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if(Vg(g)&&(g=$w(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let A;try{A=typeof g=="bigint"?g:mg(qo("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(A=uo(A,v)),nd("private key",A,gs,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=U3((g,w)=>{const{px:y,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:y,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const _=n.mul(y,w),I=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:_,y:I}}),d=U3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(y)&&v(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(qo("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return hMe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w,x=n.eql(n.mul(y,I),n.mul(A,v)),N=n.eql(n.mul(b,I),n.mul(_,v));return x&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,Jj),{px:v,py:A,pz:_}=this;let I=n.ZERO,x=n.ZERO,N=n.ZERO,S=n.mul(v,v),O=n.mul(A,A),P=n.mul(_,_),F=n.mul(v,A);return F=n.add(F,F),N=n.mul(v,_),N=n.add(N,N),I=n.mul(w,N),x=n.mul(b,P),x=n.add(I,x),I=n.sub(O,x),x=n.add(O,x),x=n.mul(I,x),I=n.mul(F,I),N=n.mul(b,N),P=n.mul(w,P),F=n.sub(S,P),F=n.mul(w,F),F=n.add(F,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,F),x=n.add(x,S),P=n.mul(A,_),P=n.add(P,P),S=n.mul(P,F),I=n.sub(I,S),N=n.mul(P,O),N=n.add(N,N),N=n.add(N,N),new h(I,x,N)}add(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:_,pz:I}=w;let x=n.ZERO,N=n.ZERO,S=n.ZERO;const O=e.a,P=n.mul(e.b,Jj);let F=n.mul(y,A),G=n.mul(b,_),B=n.mul(v,I),T=n.add(y,b),R=n.add(A,_);T=n.mul(T,R),R=n.add(F,G),T=n.sub(T,R),R=n.add(y,v);let $=n.add(A,I);return R=n.mul(R,$),$=n.add(F,B),R=n.sub(R,$),$=n.add(b,v),x=n.add(_,I),$=n.mul($,x),x=n.add(G,B),$=n.sub($,x),S=n.mul(O,R),x=n.mul(P,B),S=n.add(x,S),x=n.sub(G,S),S=n.add(G,S),N=n.mul(x,S),G=n.add(F,F),G=n.add(G,F),B=n.mul(O,B),R=n.mul(P,R),G=n.add(G,B),B=n.sub(F,B),B=n.mul(O,B),R=n.add(R,B),F=n.mul(G,R),N=n.add(N,F),F=n.mul($,R),x=n.mul(T,x),x=n.sub(x,F),F=n.mul(T,G),S=n.mul($,S),S=n.add(S,F),new h(x,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;nd("scalar",w,Hu,b);const v=h.ZERO;if(w===Hu)return v;if(this.is0()||w===gs)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:_,k2neg:I,k2:x}=y.splitScalar(w),N=v,S=v,O=this;for(;_>Hu||x>Hu;)_&gs&&(N=N.add(O)),x&gs&&(S=S.add(O)),O=O.double(),_>>=gs,x>>=gs;return A&&(N=N.negate()),I&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:y,n:b}=e;nd("scalar",w,gs,b);let v,A;if(y){const{k1neg:_,k1:I,k2neg:x,k2:N}=y.splitScalar(w);let{p:S,f:O}=this.wNAF(I),{p:P,f:F}=this.wNAF(N);S=p.constTimeNegate(_,S),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,y.beta),P.py,P.pz),v=S.add(P),A=O.add(F)}else{const{p:_,f:I}=this.wNAF(w);v=_,A=I}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,y,b){const v=h.BASE,A=(I,x)=>x===Hu||x===gs||!I.equals(v)?I.multiplyUnsafe(x):I.multiply(x),_=A(this,y).add(A(w,b));return _.is0()?void 0:_}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===gs)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===gs?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Uw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return Uw("isCompressed",w),$w(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=dMe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function SMe(t){const e=EX(t);return xb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function xMe(t){const e=SMe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(B){return uo(B,r)}function a(B){return B3(B,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=AMe({...e,toBytes(B,T,R){const $=T.toAffine(),k=n.toBytes($.x),M=n_;return Uw("isCompressed",R),R?M(Uint8Array.from([T.hasEvenY()?2:3]),k):M(Uint8Array.from([4]),k,n.toBytes($.y))},fromBytes(B){const T=B.length,R=B[0],$=B.subarray(1);if(T===s&&(R===2||R===3)){const k=mg($);if(!$T(k,gs,n.ORDER))throw new Error("Point is not on curve");const M=u(k);let j;try{j=n.sqrt(M)}catch(ne){const le=ne instanceof Error?": "+ne.message:"";throw new Error("Point is not on curve"+le)}const K=(j&gs)===gs;return(R&1)===1!==K&&(j=n.neg(j)),{x:k,y:j}}else if(T===i&&R===4){const k=n.fromBytes($.subarray(0,n.BYTES)),M=n.fromBytes($.subarray(n.BYTES,2*n.BYTES));return{x:k,y:M}}else{const k=s,M=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+M+", got "+T)}}}),h=B=>$w(Fw(B,e.nByteLength));function f(B){const T=r>>gs;return B>T}function p(B){return f(B)?o(-B):B}const g=(B,T,R)=>mg(B.slice(T,R));class w{constructor(T,R,$){this.r=T,this.s=R,this.recovery=$,this.assertValidity()}static fromCompact(T){const R=e.nByteLength;return T=qo("compactSignature",T,R*2),new w(g(T,0,R),g(T,R,2*R))}static fromDER(T){const{r:R,s:$}=Nu.toSig(qo("DER",T));return new w(R,$)}assertValidity(){nd("r",this.r,gs,r),nd("s",this.s,gs,r)}addRecoveryBit(T){return new w(this.r,this.s,T)}recoverPublicKey(T){const{r:R,s:$,recovery:k}=this,M=I(qo("msgHash",T));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const j=k===2||k===3?R+e.n:R;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const K=k&1?"03":"02",ne=c.fromHex(K+h(j)),le=a(j),oe=o(-M*le),ae=o($*le),ue=c.BASE.multiplyAndAddUnsafe(ne,oe,ae);if(!ue)throw new Error("point at infinify");return ue.assertValidity(),ue}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Bw(this.toDERHex())}toDERHex(){return Nu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Bw(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(B){try{return l(B),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const B=wX(e.n);return cMe(e.randomBytes(B),e.n)},precompute(B=8,T=c.BASE){return T._setWindowSize(B),T.multiply(BigInt(3)),T}};function b(B,T=!0){return c.fromPrivateKey(B).toRawBytes(T)}function v(B){const T=Vg(B),R=typeof B=="string",$=(T||R)&&B.length;return T?$===s||$===i:R?$===2*s||$===2*i:B instanceof c}function A(B,T,R=!0){if(v(B))throw new Error("first arg must be private key");if(!v(T))throw new Error("second arg must be public key");return c.fromHex(T).multiply(l(B)).toRawBytes(R)}const _=e.bits2int||function(B){if(B.length>8192)throw new Error("input is too large");const T=mg(B),R=B.length*8-e.nBitLength;return R>0?T>>BigInt(R):T},I=e.bits2int_modN||function(B){return o(_(B))},x=YU(e.nBitLength);function N(B){return nd("num < 2^"+e.nBitLength,B,Hu,x),Fw(B,e.nByteLength)}function S(B,T,R=O){if(["recovered","canonical"].some(xe=>xe in R))throw new Error("sign() legacy options not supported");const{hash:$,randomBytes:k}=e;let{lowS:M,prehash:j,extraEntropy:K}=R;M==null&&(M=!0),B=qo("msgHash",B),Qj(R),j&&(B=qo("prehashed msgHash",$(B)));const ne=I(B),le=l(T),oe=[N(le),N(ne)];if(K!=null&&K!==!1){const xe=K===!0?k(n.BYTES):K;oe.push(qo("extraEntropy",xe))}const ae=n_(...oe),ue=ne;function Xe(xe){const Me=_(xe);if(!d(Me))return;const rt=a(Me),Rt=c.BASE.multiply(Me).toAffine(),Xt=o(Rt.x);if(Xt===Hu)return;const X=o(rt*o(ue+Xt*le));if(X===Hu)return;let ce=(Rt.x===Xt?0:2)|Number(Rt.y&gs),Ee=X;return M&&f(X)&&(Ee=p(X),ce^=1),new w(Xt,Ee,ce)}return{seed:ae,k2sig:Xe}}const O={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function F(B,T,R=O){const{seed:$,k2sig:k}=S(B,T,R),M=e;return fX(M.hash.outputLen,M.nByteLength,M.hmac)($,k)}c.BASE._setWindowSize(8);function G(B,T,R,$=P){var X;const k=B;T=qo("msgHash",T),R=qo("publicKey",R);const{lowS:M,prehash:j,format:K}=$;if(Qj($),"strict"in $)throw new Error("options.strict was renamed to lowS");if(K!==void 0&&K!=="compact"&&K!=="der")throw new Error("format must be compact or der");const ne=typeof k=="string"||Vg(k),le=!ne&&!K&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!ne&&!le)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let oe,ae;try{if(le&&(oe=new w(k.r,k.s)),ne){try{K!=="compact"&&(oe=w.fromDER(k))}catch(ce){if(!(ce instanceof Nu.Err))throw ce}!oe&&K!=="der"&&(oe=w.fromCompact(k))}ae=c.fromHex(R)}catch{return!1}if(!oe||M&&oe.hasHighS())return!1;j&&(T=e.hash(T));const{r:ue,s:Xe}=oe,xe=I(T),Me=a(Xe),rt=o(xe*Me),Rt=o(ue*Me),Xt=(X=c.BASE.multiplyAndAddUnsafe(ae,rt,Rt))==null?void 0:X.toAffine();return Xt?o(Xt.x)===ue:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:F,verify:G,ProjectivePoint:c,Signature:w,utils:y}}function IMe(t){return{hash:t,hmac:(e,...n)=>DT(t,e,P3e(...n)),randomBytes:Sb}}function NMe(t,e){const n=r=>xMe({...t,...IMe(r)});return{...n(e),create:n}}const CX=mX(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),TMe=CX.create(BigInt("-3")),RMe=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),PMe=NMe({a:TMe,b:RMe,Fp:CX,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},A1),_X="base10",Ui="base16",Uc="base64pad",ih="base64url",x1="utf8",AX=0,rd=1,I1=2,OMe=0,Zj=1,IE=12,QU=32;function kMe(){const t=j3.utils.randomPrivateKey(),e=j3.getPublicKey(t);return{privateKey:_o(t,Ui),publicKey:_o(e,Ui)}}function W3(){const t=Sb(QU);return _o(t,Ui)}function DMe(t,e){const n=j3.getSharedSecret(Ba(t,Ui),Ba(e,Ui)),r=$5e(A1,n,void 0,void 0,QU);return _o(r,Ui)}function WS(t){const e=A1(Ba(t,Ui));return _o(e,Ui)}function Nl(t){const e=A1(Ba(t,x1));return _o(e,Ui)}function SX(t){return Ba(`${t}`,_X)}function Kg(t){return Number(_o(t,_X))}function xX(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function IX(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function MMe(t){const e=SX(typeof t.type<"u"?t.type:AX);if(Kg(e)===rd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ba(t.senderPublicKey,Ui):void 0,r=typeof t.iv<"u"?Ba(t.iv,Ui):Sb(IE),s=Ba(t.symKey,Ui),i=uX(s,r).encrypt(Ba(t.message,x1)),o=NX({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===ih?xX(o):o}function LMe(t){const e=Ba(t.symKey,Ui),{sealed:n,iv:r}=r_({encoded:t.encoded,encoding:t.encoding}),s=uX(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return _o(s,x1)}function UMe(t,e){const n=SX(I1),r=Sb(IE),s=Ba(t,x1),i=NX({type:n,sealed:s,iv:r});return e===ih?xX(i):i}function $Me(t,e){const{sealed:n}=r_({encoded:t,encoding:e});return _o(n,x1)}function NX(t){if(Kg(t.type)===I1)return _o(AE([t.type,t.sealed]),Uc);if(Kg(t.type)===rd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _o(AE([t.type,t.senderPublicKey,t.iv,t.sealed]),Uc)}return _o(AE([t.type,t.iv,t.sealed]),Uc)}function r_(t){const e=(t.encoding||Uc)===ih?IX(t.encoded):t.encoded,n=Ba(e,Uc),r=n.slice(OMe,Zj),s=Zj;if(Kg(r)===rd){const c=s+QU,l=c+IE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Kg(r)===I1){const c=n.slice(s),l=Sb(IE);return{type:r,sealed:c,iv:l}}const i=s+IE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function BMe(t,e){const n=r_({encoded:t,encoding:e==null?void 0:e.encoding});return TX({type:Kg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?_o(n.senderPublicKey,Ui):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function TX(t){const e=(t==null?void 0:t.type)||AX;if(e===rd){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Xj(t){return t.type===rd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function e9(t){return t.type===I1}function FMe(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return AE([new Uint8Array([4]),e,n])}function jMe(t,e){const[n,r,s]=t.split("."),i=Buffer.from(IX(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=A1(c),u=FMe(e);if(!PMe.verify(AE([o,a]),l,u))throw new Error("Invalid signature");return b3(t).payload}const WMe="irn";function RI(t){return(t==null?void 0:t.relay)||{protocol:WMe}}function jv(t){const e=VRe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function zMe(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function t9(t){if(!t.includes("wc:")){const l=JZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:HMe(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:zMe(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function HMe(t){return t.startsWith("//")?t.substring(2):t}function GMe(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function n9(t){const e=new URLSearchParams,n=GMe(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function GA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var qMe=Object.defineProperty,VMe=Object.defineProperties,KMe=Object.getOwnPropertyDescriptors,r9=Object.getOwnPropertySymbols,YMe=Object.prototype.hasOwnProperty,QMe=Object.prototype.propertyIsEnumerable,s9=(t,e,n)=>e in t?qMe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,JMe=(t,e)=>{for(var n in e||(e={}))YMe.call(e,n)&&s9(t,n,e[n]);if(r9)for(var n of r9(e))QMe.call(e,n)&&s9(t,n,e[n]);return t},ZMe=(t,e)=>VMe(t,KMe(e));function Ib(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function XMe(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ib(n.accounts))}),e}function eLe(t,e){const n=[];return Object.values(t).forEach(r=>{Ib(r.accounts).includes(e)&&n.push(...r.methods)}),n}function tLe(t,e){const n=[];return Object.values(t).forEach(r=>{Ib(r.accounts).includes(e)&&n.push(...r.events)}),n}function BT(t){return t.includes(":")}function My(t){return BT(t)?t.split(":")[0]:t}function i9(t){var e,n,r;const s={};if(!uf(t))return s;for(const[i,o]of Object.entries(t)){const a=BT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=My(i);s[u]=ZMe(JMe({},s[u]),{chains:Gl(a,(e=s[u])==null?void 0:e.chains),methods:Gl(c,(n=s[u])==null?void 0:n.methods),events:Gl(l,(r=s[u])==null?void 0:r.events)})}return s}function nLe(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function o9(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=nLe(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Gl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function rLe(t,e){var n,r,s,i,o,a;const c=i9(t),l=i9(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Gl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Gl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Gl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const sLe={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},iLe={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Re(t,e){const{message:n,code:r}=iLe[t];return{message:e?`${n} ${e}`:n,code:r}}function $n(t,e){const{message:n,code:r}=sLe[t];return{message:e?`${n} ${e}`:n,code:r}}function lf(t,e){return!!Array.isArray(t)}function uf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function $s(t){return typeof t>"u"}function Hr(t,e){return e&&$s(t)?!0:typeof t=="string"&&!!t.trim().length}function JU(t,e){return e&&$s(t)?!0:typeof t=="number"&&!isNaN(t)}function oLe(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Pp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Ib(a),d=n[o];(!Pp(qZ(o,d),u)||!Pp(d.methods,c)||!Pp(d.events,l))&&(i=!1)}),i):!1}function PI(t){return Hr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function aLe(t){if(Hr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&PI(n)}}return!1}function cLe(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Hr(t,!1)){if(e(t))return!0;const n=JZ(t);return e(n)}}catch{}return!1}function lLe(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function uLe(t){return t==null?void 0:t.topic}function dLe(t,e){let n=null;return Hr(t==null?void 0:t.publicKey,!1)||(n=Re("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function a9(t){let e=!0;return lf(t)?t.length&&(e=t.every(n=>Hr(n,!1))):e=!1,e}function hLe(t,e,n){let r=null;return lf(e)&&e.length?e.forEach(s=>{r||PI(s)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):PI(t)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function fLe(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=hLe(s,qZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function pLe(t,e){let n=null;return lf(t)?t.forEach(r=>{n||aLe(r)||(n=$n("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=$n("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function gLe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=pLe(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function mLe(t,e){let n=null;return a9(t==null?void 0:t.methods)?a9(t==null?void 0:t.events)||(n=$n("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=$n("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function RX(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=mLe(r,`${e}, namespace`);s&&(n=s)}),n}function yLe(t,e,n){let r=null;if(t&&uf(t)){const s=RX(t,e);s&&(r=s);const i=fLe(t,e,n);i&&(r=i)}else r=Re("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function LO(t,e){let n=null;if(t&&uf(t)){const r=RX(t,e);r&&(n=r);const s=gLe(t,e);s&&(n=s)}else n=Re("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function PX(t){return Hr(t.protocol,!0)}function wLe(t,e){let n=!1;return t?t&&lf(t)&&t.length&&t.forEach(r=>{n=PX(r)}):n=!0,n}function bLe(t){return typeof t=="number"}function no(t){return typeof t<"u"&&typeof t!==null}function vLe(t){return!(!t||typeof t!="object"||!t.code||!JU(t.code,!1)||!t.message||!Hr(t.message,!1))}function ELe(t){return!($s(t)||!Hr(t.method,!1))}function CLe(t){return!($s(t)||$s(t.result)&&$s(t.error)||!JU(t.id,!1)||!Hr(t.jsonrpc,!1))}function _Le(t){return!($s(t)||!Hr(t.name,!1))}function c9(t,e){return!(!PI(e)||!XMe(t).includes(e))}function ALe(t,e,n){return Hr(n,!1)?eLe(t,e).includes(n):!1}function SLe(t,e,n){return Hr(n,!1)?tLe(t,e).includes(n):!1}function l9(t,e,n){let r=null;const s=xLe(t),i=ILe(e),o=Object.keys(s),a=Object.keys(i),c=u9(Object.keys(t)),l=u9(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Pp(o,a)||(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Ib(e[d].accounts);h.includes(d)||(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Pp(s[d].methods,i[d].methods)?Pp(s[d].events,i[d].events)||(r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=Re("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function xLe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function u9(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function ILe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Ib(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function NLe(t,e){return JU(t,!1)&&t<=e.max&&t>=e.min}function d9(){const t=C1();return new Promise(e=>{switch(t){case Zo.browser:e(TLe());break;case Zo.reactNative:e(RLe());break;case Zo.node:e(PLe());break;default:e(!0)}})}function TLe(){return Ab()&&(navigator==null?void 0:navigator.onLine)}async function RLe(){if(Uf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function PLe(){return!0}function OLe(t){switch(C1()){case Zo.browser:kLe(t);break;case Zo.reactNative:DLe(t);break}}function kLe(t){!Uf()&&Ab()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function DLe(t){Uf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function MLe(){var t;return Ab()&&jg()?((t=jg())==null?void 0:t.visibilityState)==="visible":!0}const UO={};class yv{static get(e){return UO[e]}static set(e,n){UO[e]=n}static delete(e){delete UO[e]}}var LLe={};const OX="wc",kX=2,z3="core",Xl=`${OX}@2:${z3}:`,ULe={logger:"error"},$Le={database:":memory:"},BLe="crypto",h9="client_ed25519_seed",FLe=Te.ONE_DAY,jLe="keychain",WLe="0.3",zLe="messages",HLe="0.3",f9=Te.SIX_HOURS,GLe="publisher",DX="irn",qLe="error",MX="wss://relay.walletconnect.org",VLe="relayer",vs={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},KLe="_subscription",ga={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},YLe=.1,H3="2.21.0",ar={link_mode:"link_mode",relay:"relay"},zS={inbound:"inbound",outbound:"outbound"},QLe="0.3",JLe="WALLETCONNECT_CLIENT_ID",p9="WALLETCONNECT_LINK_MODE_APPS",Bo={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},ZLe="subscription",XLe="0.3",eUe="pairing",tUe="0.3",wv={wc_pairingDelete:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Te.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Te.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:0},res:{ttl:Te.ONE_DAY,prompt:!1,tag:0}}},fp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},cc={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},nUe="history",rUe="0.3",sUe="expirer",Ea={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},iUe="0.3",oUe="verify-api",aUe="https://verify.walletconnect.com",LX="https://verify.walletconnect.org",NE=LX,cUe=`${NE}/v3`,lUe=[aUe,LX],uUe="echo",dUe="https://echo.walletconnect.com",cl={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Cu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},lc={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Kf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Yf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},bv={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},hUe=.1,fUe="event-client",pUe=86400,gUe="https://pulse.walletconnect.org/batch";function mUe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var _=p[y],I=0,x=v-1;(_!==0||I<w)&&x!==-1;x--,I++)_+=256*A[x]>>>0,A[x]=_%a>>>0,_=_/a>>>0;if(_!==0)throw new Error("Non-zero carry");w=I,y++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var _=0,I=b-1;(A!==0||_<y)&&I!==-1;I--,_++)A+=a*v[I]>>>0,v[I]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=_,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var yUe=mUe,wUe=yUe;const UX=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},bUe=t=>new TextEncoder().encode(t),vUe=t=>new TextDecoder().decode(t);class EUe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class CUe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return $X(this,e)}}class _Ue{constructor(e){this.decoders=e}or(e){return $X(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const $X=(t,e)=>new _Ue({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class AUe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new EUe(e,n,r),this.decoder=new CUe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const FT=({name:t,prefix:e,encode:n,decode:r})=>new AUe(t,e,n,r),N1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=wUe(n,e);return FT({prefix:t,name:e,encode:r,decode:i=>UX(s(i))})},SUe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},xUe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Zs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>FT({prefix:e,name:t,encode(s){return xUe(s,r,n)},decode(s){return SUe(s,r,n,t)}}),IUe=FT({prefix:"\0",name:"identity",encode:t=>vUe(t),decode:t=>bUe(t)});var NUe=Object.freeze({__proto__:null,identity:IUe});const TUe=Zs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var RUe=Object.freeze({__proto__:null,base2:TUe});const PUe=Zs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var OUe=Object.freeze({__proto__:null,base8:PUe});const kUe=N1({prefix:"9",name:"base10",alphabet:"0123456789"});var DUe=Object.freeze({__proto__:null,base10:kUe});const MUe=Zs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),LUe=Zs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var UUe=Object.freeze({__proto__:null,base16:MUe,base16upper:LUe});const $Ue=Zs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),BUe=Zs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),FUe=Zs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jUe=Zs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),WUe=Zs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zUe=Zs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),HUe=Zs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),GUe=Zs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),qUe=Zs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var VUe=Object.freeze({__proto__:null,base32:$Ue,base32upper:BUe,base32pad:FUe,base32padupper:jUe,base32hex:WUe,base32hexupper:zUe,base32hexpad:HUe,base32hexpadupper:GUe,base32z:qUe});const KUe=N1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),YUe=N1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var QUe=Object.freeze({__proto__:null,base36:KUe,base36upper:YUe});const JUe=N1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ZUe=N1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var XUe=Object.freeze({__proto__:null,base58btc:JUe,base58flickr:ZUe});const e$e=Zs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),t$e=Zs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),n$e=Zs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),r$e=Zs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var s$e=Object.freeze({__proto__:null,base64:e$e,base64pad:t$e,base64url:n$e,base64urlpad:r$e});const BX=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),i$e=BX.reduce((t,e,n)=>(t[n]=e,t),[]),o$e=BX.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function a$e(t){return t.reduce((e,n)=>(e+=i$e[n],e),"")}function c$e(t){const e=[];for(const n of t){const r=o$e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const l$e=FT({prefix:"🚀",name:"base256emoji",encode:a$e,decode:c$e});var u$e=Object.freeze({__proto__:null,base256emoji:l$e}),d$e=FX,g9=128,h$e=-128,f$e=Math.pow(2,31);function FX(t,e,n){e=e||[],n=n||0;for(var r=n;t>=f$e;)e[n++]=t&255|g9,t/=128;for(;t&h$e;)e[n++]=t&255|g9,t>>>=7;return e[n]=t|0,FX.bytes=n-r+1,e}var p$e=G3,g$e=128,m9=127;function G3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw G3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&m9)<<s:(o&m9)*Math.pow(2,s),s+=7}while(o>=g$e);return G3.bytes=i-r,n}var m$e=Math.pow(2,7),y$e=Math.pow(2,14),w$e=Math.pow(2,21),b$e=Math.pow(2,28),v$e=Math.pow(2,35),E$e=Math.pow(2,42),C$e=Math.pow(2,49),_$e=Math.pow(2,56),A$e=Math.pow(2,63),S$e=function(t){return t<m$e?1:t<y$e?2:t<w$e?3:t<b$e?4:t<v$e?5:t<E$e?6:t<C$e?7:t<_$e?8:t<A$e?9:10},x$e={encode:d$e,decode:p$e,encodingLength:S$e},jX=x$e;const y9=(t,e,n=0)=>(jX.encode(t,e,n),e),w9=t=>jX.encodingLength(t),q3=(t,e)=>{const n=e.byteLength,r=w9(t),s=r+w9(n),i=new Uint8Array(s+n);return y9(t,i,0),y9(n,i,r),i.set(e,s),new I$e(t,n,e,i)};class I$e{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const WX=({name:t,code:e,encode:n})=>new N$e(t,e,n);class N$e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?q3(this.code,n):n.then(r=>q3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const zX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),T$e=WX({name:"sha2-256",code:18,encode:zX("SHA-256")}),R$e=WX({name:"sha2-512",code:19,encode:zX("SHA-512")});var P$e=Object.freeze({__proto__:null,sha256:T$e,sha512:R$e});const HX=0,O$e="identity",GX=UX,k$e=t=>q3(HX,GX(t)),D$e={code:HX,name:O$e,encode:GX,digest:k$e};var M$e=Object.freeze({__proto__:null,identity:D$e});new TextEncoder,new TextDecoder;const b9={...NUe,...RUe,...OUe,...DUe,...UUe,...VUe,...QUe,...XUe,...s$e,...u$e};({...P$e,...M$e});function L$e(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function qX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const v9=qX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),$O=qX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=L$e(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),U$e={utf8:v9,"utf-8":v9,hex:b9.base16,latin1:$O,ascii:$O,binary:$O,...b9};function $$e(t,e="utf8"){const n=U$e[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var B$e=Object.defineProperty,F$e=(t,e,n)=>e in t?B$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sl=(t,e,n)=>F$e(t,typeof e!="symbol"?e+"":e,n);class j$e{constructor(e,n){this.core=e,this.logger=n,sl(this,"keychain",new Map),sl(this,"name",jLe),sl(this,"version",WLe),sl(this,"initialized",!1),sl(this,"storagePrefix",Xl),sl(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),sl(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),sl(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),sl(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=Re("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),sl(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Ys(n,this.name)}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,P3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?O3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var W$e=Object.defineProperty,z$e=(t,e,n)=>e in t?W$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ps=(t,e,n)=>z$e(t,typeof e!="symbol"?e+"":e,n);class H$e{constructor(e,n,r){this.core=e,this.logger=n,Ps(this,"name",BLe),Ps(this,"keychain"),Ps(this,"randomSessionIdentifier",W3()),Ps(this,"initialized",!1),Ps(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Ps(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Ps(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=kF(s);return lZ(i.publicKey)}),Ps(this,"generateKeyPair",()=>{this.isInitialized();const s=kMe();return this.setPrivateKey(s.publicKey,s.privateKey)}),Ps(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=kF(i),a=this.randomSessionIdentifier;return await _Te(a,s,FLe,o)}),Ps(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=DMe(a,i);return this.setSymKey(c,o)}),Ps(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||WS(s);return await this.keychain.set(o,s),o}),Ps(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ps(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Ps(this,"encode",async(s,i,o)=>{this.isInitialized();const a=TX(o),c=md(i);if(e9(a))return UMe(c,o==null?void 0:o.encoding);if(Xj(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return MMe({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Ps(this,"decode",async(s,i,o)=>{this.isInitialized();const a=BMe(i,o);if(e9(a)){const c=$Me(i,o==null?void 0:o.encoding);return Fg(c)}if(Xj(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=LMe({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Fg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Ps(this,"getPayloadType",(s,i=Uc)=>{const o=r_({encoded:s,encoding:i});return Kg(o.type)}),Ps(this,"getPayloadSenderPublicKey",(s,i=Uc)=>{const o=r_({encoded:s,encoding:i});return o.senderPublicKey?_o(o.senderPublicKey,Ui):void 0}),this.core=e,this.logger=Ys(n,this.name),this.keychain=r||new j$e(this.core,this.logger)}get context(){return No(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(h9)}catch{e=W3(),await this.keychain.set(h9,e)}return $$e(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var G$e=Object.defineProperty,q$e=Object.defineProperties,V$e=Object.getOwnPropertyDescriptors,E9=Object.getOwnPropertySymbols,K$e=Object.prototype.hasOwnProperty,Y$e=Object.prototype.propertyIsEnumerable,V3=(t,e,n)=>e in t?G$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q$e=(t,e)=>{for(var n in e||(e={}))K$e.call(e,n)&&V3(t,n,e[n]);if(E9)for(var n of E9(e))Y$e.call(e,n)&&V3(t,n,e[n]);return t},J$e=(t,e)=>q$e(t,V$e(e)),Oo=(t,e,n)=>V3(t,typeof e!="symbol"?e+"":e,n);class Z$e extends Vke{constructor(e,n){super(e,n),this.logger=e,this.core=n,Oo(this,"messages",new Map),Oo(this,"messagesWithoutClientAck",new Map),Oo(this,"name",zLe),Oo(this,"version",HLe),Oo(this,"initialized",!1),Oo(this,"storagePrefix",Xl),Oo(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Oo(this,"set",async(r,s,i)=>{this.isInitialized();const o=Nl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===zS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,J$e(Q$e({},c),{[o]:s}))}return await this.persist(),o}),Oo(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Oo(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Oo(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Nl(s);return typeof i[o]<"u"}),Oo(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Nl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Oo(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Ys(e,this.name),this.core=n}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,P3(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,P3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?O3(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?O3(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var X$e=Object.defineProperty,eBe=Object.defineProperties,tBe=Object.getOwnPropertyDescriptors,C9=Object.getOwnPropertySymbols,nBe=Object.prototype.hasOwnProperty,rBe=Object.prototype.propertyIsEnumerable,K3=(t,e,n)=>e in t?X$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qA=(t,e)=>{for(var n in e||(e={}))nBe.call(e,n)&&K3(t,n,e[n]);if(C9)for(var n of C9(e))rBe.call(e,n)&&K3(t,n,e[n]);return t},BO=(t,e)=>eBe(t,tBe(e)),uc=(t,e,n)=>K3(t,typeof e!="symbol"?e+"":e,n);class sBe extends Kke{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,uc(this,"events",new Za.EventEmitter),uc(this,"name",GLe),uc(this,"queue",new Map),uc(this,"publishTimeout",Te.toMiliseconds(Te.ONE_MINUTE)),uc(this,"initialPublishTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),uc(this,"needsTransportRestart",!1),uc(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||f9,c=RI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Rp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(vs.publish,w),g(h))};this.relayer.events.on(vs.publish,w);const y=Bh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(vs.publish,w)}catch(b){this.queue.set(d,BO(qA({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Bh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),uc(this,"on",(r,s)=>{this.events.on(r,s)}),uc(this,"once",(r,s)=>{this.events.once(r,s)}),uc(this,"off",(r,s)=>{this.events.off(r,s)}),uc(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=Ys(n,this.name),this.registerEventListeners()}get context(){return No(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=f9,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:jv(RI().protocol).publish,params:qA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};$s((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),$s((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(vs.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,BO(qA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(BO(qA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(ym.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(vs.connection_stalled);return}this.checkQueue()}),this.relayer.on(vs.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var iBe=Object.defineProperty,oBe=(t,e,n)=>e in t?iBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vm=(t,e,n)=>oBe(t,typeof e!="symbol"?e+"":e,n);class aBe{constructor(){Vm(this,"map",new Map),Vm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Vm(this,"get",e=>this.map.get(e)||[]),Vm(this,"exists",(e,n)=>this.get(e).includes(n)),Vm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Vm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var cBe=Object.defineProperty,lBe=Object.defineProperties,uBe=Object.getOwnPropertyDescriptors,_9=Object.getOwnPropertySymbols,dBe=Object.prototype.hasOwnProperty,hBe=Object.prototype.propertyIsEnumerable,Y3=(t,e,n)=>e in t?cBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vv=(t,e)=>{for(var n in e||(e={}))dBe.call(e,n)&&Y3(t,n,e[n]);if(_9)for(var n of _9(e))hBe.call(e,n)&&Y3(t,n,e[n]);return t},FO=(t,e)=>lBe(t,uBe(e)),qn=(t,e,n)=>Y3(t,typeof e!="symbol"?e+"":e,n);class fBe extends Jke{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,qn(this,"subscriptions",new Map),qn(this,"topicMap",new aBe),qn(this,"events",new Za.EventEmitter),qn(this,"name",ZLe),qn(this,"version",XLe),qn(this,"pending",new Map),qn(this,"cached",[]),qn(this,"initialized",!1),qn(this,"storagePrefix",Xl),qn(this,"subscribeTimeout",Te.toMiliseconds(Te.ONE_MINUTE)),qn(this,"initialSubscribeTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),qn(this,"clientId"),qn(this,"batchSubscribeTopicsLimit",500),qn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),qn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=RI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),qn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),qn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),qn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),qn(this,"on",(r,s)=>{this.events.on(r,s)}),qn(this,"once",(r,s)=>{this.events.once(r,s)}),qn(this,"off",(r,s)=>{this.events.off(r,s)}),qn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),qn(this,"start",async()=>{await this.onConnect()}),qn(this,"stop",async()=>{await this.onDisconnect()}),qn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),qn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),qn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(ym.pulse,async()=>{await this.checkPending()}),this.events.on(Bo.created,async r=>{const s=Bo.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Bo.deleted,async r=>{const s=Bo.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=Ys(n,this.name),this.clientId=""}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=RI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=$n("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===ar.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:jv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===ar.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},Te.toMiliseconds(Te.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Bo.created,d),u(h.id))};this.events.on(Bo.created,d);try{const h=await Bh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Bo.created,d),u(h)}catch{}}),l=await Bh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(vs.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:jv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Bh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(vs.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:jv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Bh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(vs.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:jv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,FO(vv({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,vv({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,vv({},n)),this.topicMap.set(n.topic,e),this.events.emit(Bo.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Bo.deleted,FO(vv({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Bo.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Bo.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>FO(vv({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await v3e(Te.toMiliseconds(Te.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Nl(e+await this.getClientId())}}var pBe=Object.defineProperty,A9=Object.getOwnPropertySymbols,gBe=Object.prototype.hasOwnProperty,mBe=Object.prototype.propertyIsEnumerable,Q3=(t,e,n)=>e in t?pBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S9=(t,e)=>{for(var n in e||(e={}))gBe.call(e,n)&&Q3(t,n,e[n]);if(A9)for(var n of A9(e))mBe.call(e,n)&&Q3(t,n,e[n]);return t},mn=(t,e,n)=>Q3(t,typeof e!="symbol"?e+"":e,n);class yBe extends Yke{constructor(e){super(e),mn(this,"protocol","wc"),mn(this,"version",2),mn(this,"core"),mn(this,"logger"),mn(this,"events",new Za.EventEmitter),mn(this,"provider"),mn(this,"messages"),mn(this,"subscriber"),mn(this,"publisher"),mn(this,"name",VLe),mn(this,"transportExplicitlyClosed",!1),mn(this,"initialized",!1),mn(this,"connectionAttemptInProgress",!1),mn(this,"relayUrl"),mn(this,"projectId"),mn(this,"packageName"),mn(this,"bundleId"),mn(this,"hasExperiencedNetworkDisruption",!1),mn(this,"pingTimeout"),mn(this,"heartBeatTimeout",Te.toMiliseconds(Te.THIRTY_SECONDS+Te.FIVE_SECONDS)),mn(this,"reconnectTimeout"),mn(this,"connectPromise"),mn(this,"reconnectInProgress",!1),mn(this,"requestsInFlight",[]),mn(this,"connectTimeout",Te.toMiliseconds(Te.ONE_SECOND*15)),mn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Rp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),mn(this,"resetPingTimeout",()=>{NI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),mn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),mn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected 🛜"),this.startPingTimeout(),this.events.emit(vs.connect)}),mn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected 🛑"),this.requestsInFlight=[],this.onProviderDisconnect()}),mn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(vs.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),mn(this,"registerProviderListeners",()=>{this.provider.on(ga.payload,this.onPayloadHandler),this.provider.on(ga.connect,this.onConnectHandler),this.provider.on(ga.disconnect,this.onDisconnectHandler),this.provider.on(ga.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Ys(e.logger,this.name):y1(bm({level:e.logger||qLe})),this.messages=new Z$e(this.logger,e.core),this.subscriber=new fBe(this,this.logger),this.publisher=new sBe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||MX,this.projectId=e.projectId,s3e()?this.packageName=_j():i3e()&&(this.bundleId=_j()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return No(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:ar.relay},zS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Bo.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Bo.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,S9({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Bh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await d9())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Jr(Te.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(vs.message,e),await this.recordMessageEvent(e,zS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ga.disconnect,i),await Bh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(ga.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(ga.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(ga.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,Te.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(NI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Xa(new MPe(u3e({sdkVersion:H3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),zU(e)){if(!e.method.endsWith(KLe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:ar.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(S9({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else RT(e)&&this.events.emit(vs.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,zS.inbound),this.events.emit(vs.message,e))}async acknowledgePayload(e){const n=NT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(ga.payload,this.onPayloadHandler),this.provider.off(ga.connect,this.onConnectHandler),this.provider.off(ga.disconnect,this.onDisconnectHandler),this.provider.off(ga.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await d9();OLe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(ym.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&MLe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(vs.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},Te.toMiliseconds(YLe)))))}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function wBe(){}function x9(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function I9(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function N9(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const bBe="[object RegExp]",vBe="[object String]",EBe="[object Number]",CBe="[object Boolean]",T9="[object Arguments]",_Be="[object Symbol]",ABe="[object Date]",SBe="[object Map]",xBe="[object Set]",IBe="[object Array]",NBe="[object Function]",TBe="[object ArrayBuffer]",jO="[object Object]",RBe="[object Error]",PBe="[object DataView]",OBe="[object Uint8Array]",kBe="[object Uint8ClampedArray]",DBe="[object Uint16Array]",MBe="[object Uint32Array]",LBe="[object BigUint64Array]",UBe="[object Int8Array]",$Be="[object Int16Array]",BBe="[object Int32Array]",FBe="[object BigInt64Array]",jBe="[object Float32Array]",WBe="[object Float64Array]";function zBe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function HBe(t,e,n){return Wv(t,e,void 0,void 0,void 0,void 0,n)}function Wv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return TE(t,e,i,o)}return TE(t,e,i,o)}function TE(t,e,n,r){if(Object.is(t,e))return!0;let s=N9(t),i=N9(e);if(s===T9&&(s=jO),i===T9&&(i=jO),s!==i)return!1;switch(s){case vBe:return t.toString()===e.toString();case EBe:{const c=t.valueOf(),l=e.valueOf();return zBe(c,l)}case CBe:case ABe:case _Be:return Object.is(t.valueOf(),e.valueOf());case bBe:return t.source===e.source&&t.flags===e.flags;case NBe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case SBe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Wv(l,e.get(c),c,t,e,n,r))return!1;return!0}case xBe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Wv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case IBe:case OBe:case kBe:case DBe:case MBe:case LBe:case UBe:case $Be:case BBe:case FBe:case jBe:case WBe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Wv(t[c],e[c],c,t,e,n,r))return!1;return!0}case TBe:return t.byteLength!==e.byteLength?!1:TE(new Uint8Array(t),new Uint8Array(e),n,r);case PBe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:TE(new Uint8Array(t),new Uint8Array(e),n,r);case RBe:return t.name===e.name&&t.message===e.message;case jO:{if(!(TE(t.constructor,e.constructor,n,r)||x9(t)&&x9(e)))return!1;const c=[...Object.keys(t),...I9(t)],l=[...Object.keys(e),...I9(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Wv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function GBe(t,e){return HBe(t,e,wBe)}var qBe=Object.defineProperty,R9=Object.getOwnPropertySymbols,VBe=Object.prototype.hasOwnProperty,KBe=Object.prototype.propertyIsEnumerable,J3=(t,e,n)=>e in t?qBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,P9=(t,e)=>{for(var n in e||(e={}))VBe.call(e,n)&&J3(t,n,e[n]);if(R9)for(var n of R9(e))KBe.call(e,n)&&J3(t,n,e[n]);return t},Qi=(t,e,n)=>J3(t,typeof e!="symbol"?e+"":e,n);class Em extends Qke{constructor(e,n,r,s=Xl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Qi(this,"map",new Map),Qi(this,"version",QLe),Qi(this,"cached",[]),Qi(this,"initialized",!1),Qi(this,"getKey"),Qi(this,"storagePrefix",Xl),Qi(this,"recentlyDeleted",[]),Qi(this,"recentlyDeletedLimit",200),Qi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!$s(o)?this.map.set(this.getKey(o),o):lLe(o)?this.map.set(o.id,o):uLe(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Qi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Qi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Qi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>GBe(a[c],o[c]))):this.values)),Qi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=P9(P9({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Qi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=Ys(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=Re("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var YBe=Object.defineProperty,QBe=(t,e,n)=>e in t?YBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,en=(t,e,n)=>QBe(t,typeof e!="symbol"?e+"":e,n);class JBe{constructor(e,n){this.core=e,this.logger=n,en(this,"name",eUe),en(this,"version",tUe),en(this,"events",new PU),en(this,"pairings"),en(this,"initialized",!1),en(this,"storagePrefix",Xl),en(this,"ignoredPayloadTypes",[rd]),en(this,"registeredMethods",[]),en(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),en(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),en(this,"create",async r=>{this.isInitialized();const s=W3(),i=await this.core.crypto.setSymKey(s),o=Jr(Te.FIVE_MINUTES),a={protocol:DX},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=n9({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(fp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),en(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[cl.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=t9(r.uri);s.props.properties.topic=i,s.addTrace(cl.pairing_uri_validation_success),s.addTrace(cl.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(cl.existing_pairing),u.active)throw s.setError(Cu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(cl.pairing_not_expired)}const d=c||Jr(Te.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(cl.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(fp.create,h),s.addTrace(cl.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(cl.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Cu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Cu.subscribe_pairing_topic_failure),f}return s.addTrace(cl.subscribe_pairing_topic_success),h}),en(this,"activate",async({topic:r})=>{this.isInitialized();const s=Jr(Te.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),en(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=ip();this.events.once(Sn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),en(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),en(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),en(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),en(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",$n("USER_DISCONNECTED")),await this.deletePairing(s))}),en(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return n9({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),en(this,"sendRequest",async(r,s,i)=>{const o=$h(s,i),a=await this.core.crypto.encode(r,o),c=wv[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),en(this,"sendResult",async(r,s,i)=>{const o=NT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=wv[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),en(this,"sendError",async(r,s,i)=>{const o=TT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=wv[c]?wv[c].res:wv.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),en(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,$n("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),en(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>eh(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),en(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),en(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),en(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(fp.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),en(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{dl(s)?this.events.emit(Sn("pairing_ping",i),{}):Ra(s)&&this.events.emit(Sn("pairing_ping",i),{error:s.error})},500)}),en(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(fp.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),en(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=$n("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),en(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error($n("WC_METHOD_UNSUPPORTED",r))}),en(this,"isValidPair",(r,s)=>{var i;if(!no(r)){const{message:a}=Re("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(!cLe(r.uri)){const{message:a}=Re("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Cu.malformed_pairing_uri),new Error(a)}const o=t9(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=Re("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=Re("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Cu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&Te.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Cu.pairing_expired);const{message:a}=Re("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),en(this,"isValidPing",async r=>{if(!no(r)){const{message:i}=Re("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),en(this,"isValidDisconnect",async r=>{if(!no(r)){const{message:i}=Re("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),en(this,"isValidPairingTopic",async r=>{if(!Hr(r,!1)){const{message:s}=Re("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=Re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(eh(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=Re("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=Ys(n,this.name),this.pairings=new Em(this.core,this.logger,this.name,this.storagePrefix)}get context(){return No(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(vs.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==ar.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);zU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):RT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Ea.expired,async e=>{const{topic:n}=QZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(fp.expire,{topic:n}))})}}var ZBe=Object.defineProperty,XBe=(t,e,n)=>e in t?ZBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Os=(t,e,n)=>XBe(t,typeof e!="symbol"?e+"":e,n);class e6e extends qke{constructor(e,n){super(e,n),this.core=e,this.logger=n,Os(this,"records",new Map),Os(this,"events",new Za.EventEmitter),Os(this,"name",nUe),Os(this,"version",rUe),Os(this,"cached",[]),Os(this,"initialized",!1),Os(this,"storagePrefix",Xl),Os(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Os(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Jr(Te.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(cc.created,o)}),Os(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ra(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(cc.updated,s))}),Os(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Os(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(cc.deleted,i)}}),this.persist()}),Os(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Os(this,"on",(r,s)=>{this.events.on(r,s)}),Os(this,"once",(r,s)=>{this.events.once(r,s)}),Os(this,"off",(r,s)=>{this.events.off(r,s)}),Os(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ys(n,this.name)}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:$h(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(cc.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(cc.created,e=>{const n=cc.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(cc.updated,e=>{const n=cc.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(cc.deleted,e=>{const n=cc.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(ym.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{Te.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(cc.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var t6e=Object.defineProperty,n6e=(t,e,n)=>e in t?t6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ni=(t,e,n)=>n6e(t,typeof e!="symbol"?e+"":e,n);class r6e extends Zke{constructor(e,n){super(e,n),this.core=e,this.logger=n,ni(this,"expirations",new Map),ni(this,"events",new Za.EventEmitter),ni(this,"name",sUe),ni(this,"version",iUe),ni(this,"cached",[]),ni(this,"initialized",!1),ni(this,"storagePrefix",Xl),ni(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ni(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ni(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Ea.created,{target:i,expiration:o})}),ni(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ni(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ea.deleted,{target:s,expiration:i})}}),ni(this,"on",(r,s)=>{this.events.on(r,s)}),ni(this,"once",(r,s)=>{this.events.once(r,s)}),ni(this,"off",(r,s)=>{this.events.off(r,s)}),ni(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=Ys(n,this.name)}get context(){return No(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return d3e(e);if(typeof e=="number")return h3e(e);const{message:n}=Re("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ea.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Re("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Re("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;Te.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Ea.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(ym.pulse,()=>this.checkExpirations()),this.events.on(Ea.created,e=>{const n=Ea.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ea.expired,e=>{const n=Ea.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Ea.deleted,e=>{const n=Ea.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}}var s6e=Object.defineProperty,i6e=(t,e,n)=>e in t?s6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zr=(t,e,n)=>i6e(t,typeof e!="symbol"?e+"":e,n);class o6e extends Xke{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,zr(this,"name",oUe),zr(this,"abortController"),zr(this,"isDevEnv"),zr(this,"verifyUrlV3",cUe),zr(this,"storagePrefix",Xl),zr(this,"version",kX),zr(this,"publicKey"),zr(this,"fetchPromise"),zr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Te.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),zr(this,"register",async s=>{if(!Ab()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=jg(),u=this.startAbortTimer(Te.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(b3(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),zr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(b3(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),zr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(Te.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),zr(this,"getVerifyUrl",s=>{let i=s||NE;return lUe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${NE}`),i=NE),i}),zr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Te.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),zr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),zr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),zr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),zr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),zr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),zr(this,"validateAttestation",(s,i)=>{const o=jMe(s,i.publicKey),a={hasExpired:Te.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=Ys(n,this.name),this.abortController=new AbortController,this.isDevEnv=HU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return No(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Te.toMiliseconds(e))}}var a6e=Object.defineProperty,c6e=(t,e,n)=>e in t?a6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,O9=(t,e,n)=>c6e(t,typeof e!="symbol"?e+"":e,n);class l6e extends eDe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,O9(this,"context",uUe),O9(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${dUe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=Ys(n,this.context)}}var u6e=Object.defineProperty,k9=Object.getOwnPropertySymbols,d6e=Object.prototype.hasOwnProperty,h6e=Object.prototype.propertyIsEnumerable,Z3=(t,e,n)=>e in t?u6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ev=(t,e)=>{for(var n in e||(e={}))d6e.call(e,n)&&Z3(t,n,e[n]);if(k9)for(var n of k9(e))h6e.call(e,n)&&Z3(t,n,e[n]);return t},ds=(t,e,n)=>Z3(t,typeof e!="symbol"?e+"":e,n);class f6e extends tDe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,ds(this,"context",fUe),ds(this,"storagePrefix",Xl),ds(this,"storageVersion",hUe),ds(this,"events",new Map),ds(this,"shouldPersist",!1),ds(this,"init",async()=>{if(!HU())try{const s={eventId:Sj(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:KZ(this.core.relayer.protocol,this.core.relayer.version,H3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),ds(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=Sj(),u=this.core.projectId||"",d=Date.now(),h=Ev({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),ds(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Ev(Ev({},a),this.setMethods(a.eventId))}),ds(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),ds(this,"setEventListeners",()=>{this.core.heartbeat.on(ym.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Te.fromMiliseconds(Date.now())-Te.fromMiliseconds(s.timestamp)>pUe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),ds(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),ds(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),ds(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),ds(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ds(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Ev(Ev({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),ds(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),ds(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${gUe}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${H3}${i}`,{method:"POST",body:JSON.stringify(s)})}),ds(this,"getAppDomain",()=>VZ().url),this.logger=Ys(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var p6e=Object.defineProperty,D9=Object.getOwnPropertySymbols,g6e=Object.prototype.hasOwnProperty,m6e=Object.prototype.propertyIsEnumerable,X3=(t,e,n)=>e in t?p6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,M9=(t,e)=>{for(var n in e||(e={}))g6e.call(e,n)&&X3(t,n,e[n]);if(D9)for(var n of D9(e))m6e.call(e,n)&&X3(t,n,e[n]);return t},Qn=(t,e,n)=>X3(t,typeof e!="symbol"?e+"":e,n);let y6e=class VX extends Wke{constructor(e){var n;super(e),Qn(this,"protocol",OX),Qn(this,"version",kX),Qn(this,"name",z3),Qn(this,"relayUrl"),Qn(this,"projectId"),Qn(this,"customStoragePrefix"),Qn(this,"events",new Za.EventEmitter),Qn(this,"logger"),Qn(this,"heartbeat"),Qn(this,"relayer"),Qn(this,"crypto"),Qn(this,"storage"),Qn(this,"history"),Qn(this,"expirer"),Qn(this,"pairing"),Qn(this,"verify"),Qn(this,"echoClient"),Qn(this,"linkModeSupportedApps"),Qn(this,"eventClient"),Qn(this,"initialized",!1),Qn(this,"logChunkController"),Qn(this,"on",(a,c)=>this.events.on(a,c)),Qn(this,"once",(a,c)=>this.events.once(a,c)),Qn(this,"off",(a,c)=>this.events.off(a,c)),Qn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Qn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:ar.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||MX,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=bm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:ULe.logger,name:z3}),{logger:i,chunkLoggerController:o}=_T({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ys(i,this.name),this.heartbeat=new KSe,this.crypto=new H$e(this,this.logger,e==null?void 0:e.keychain),this.history=new e6e(this,this.logger),this.expirer=new r6e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Bke(M9(M9({},$Le),e==null?void 0:e.storageOptions)),this.relayer=new yBe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new JBe(this,this.logger),this.verify=new o6e(this,this.logger,this.storage),this.echoClient=new l6e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new f6e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new VX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(JLe,r),n}get context(){return No(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(p9,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(p9)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&LLe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const w6e=y6e,KX="wc",YX=2,QX="client",ZU=`${KX}@${YX}:${QX}:`,WO={name:QX,logger:"error"},L9="WALLETCONNECT_DEEPLINK_CHOICE",b6e="proposal",U9="Proposal expired",v6e="session",Km=Te.SEVEN_DAYS,E6e="engine",hs={wc_sessionPropose:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Te.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Te.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Te.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Te.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Te.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Te.FIVE_MINUTES,prompt:!1,tag:1119}}},zO={min:Te.FIVE_MINUTES,max:Te.SEVEN_DAYS},il={idle:"IDLE",active:"ACTIVE"},$9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},C6e="request",_6e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],A6e="wc",S6e="auth",x6e="authKeys",I6e="pairingTopics",N6e="requests",jT=`${A6e}@${1.5}:${S6e}:`,HS=`${jT}:PUB_KEY`;var T6e=Object.defineProperty,R6e=Object.defineProperties,P6e=Object.getOwnPropertyDescriptors,B9=Object.getOwnPropertySymbols,O6e=Object.prototype.hasOwnProperty,k6e=Object.prototype.propertyIsEnumerable,e5=(t,e,n)=>e in t?T6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vn=(t,e)=>{for(var n in e||(e={}))O6e.call(e,n)&&e5(t,n,e[n]);if(B9)for(var n of B9(e))k6e.call(e,n)&&e5(t,n,e[n]);return t},yi=(t,e)=>R6e(t,P6e(e)),ye=(t,e,n)=>e5(t,typeof e!="symbol"?e+"":e,n);class D6e extends iDe{constructor(e){super(e),ye(this,"name",E6e),ye(this,"events",new PU),ye(this,"initialized",!1),ye(this,"requestQueue",{state:il.idle,queue:[]}),ye(this,"sessionRequestQueue",{state:il.idle,queue:[]}),ye(this,"requestQueueDelay",Te.ONE_SECOND),ye(this,"expectedPairingMethodMap",new Map),ye(this,"recentlyDeletedMap",new Map),ye(this,"recentlyDeletedLimit",200),ye(this,"relayMessageCache",[]),ye(this,"pendingSessions",new Map),ye(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(hs)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Te.toMiliseconds(this.requestQueueDelay)))}),ye(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=yi(Vn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=rLe(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const I=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=I.active}}catch(I){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),I}if(!u||!h){const{topic:I,uri:x}=await this.client.core.pairing.create();u=I,d=x}if(!u){const{message:I}=Re("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(I)}const f=await this.client.core.crypto.generateKeyPair(),p=hs.wc_sessionPropose.req.ttl||Te.FIVE_MINUTES,g=Jr(p),w=yi(Vn(Vn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:DX}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ul()}),y=Sn("session_connect",w.id),{reject:b,resolve:v,done:A}=ip(p,U9),_=({id:I})=>{I===w.id&&(this.client.events.off("proposal_expire",_),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:U9,code:0}}))};return this.client.events.on("proposal_expire",_),this.events.once(y,({error:I,session:x})=>{this.client.events.off("proposal_expire",_),I?b(I):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),ye(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ye(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[lc.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Kf.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Kf.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Kf.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:lc.session_approve_started,properties:{topic:p,trace:[lc.session_approve_started,lc.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,_=await this.client.core.crypto.generateSharedKey(v,A),I=Vn(Vn(Vn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Jr(Km)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=ar.relay;b.addTrace(lc.subscribing_session_topic);try{await this.client.core.relayer.subscribe(_,{transportType:x})}catch(S){throw b.setError(Kf.subscribe_session_topic_failure),S}b.addTrace(lc.subscribe_session_topic_success);const N=yi(Vn({},I),{topic:_,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:I.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:ar.relay});await this.client.session.set(_,N),b.addTrace(lc.store_session);try{b.addTrace(lc.publishing_session_settle),await this.sendRequest({topic:_,method:"wc_sessionSettle",params:I,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Kf.session_settle_publish_failure),S}),b.addTrace(lc.session_settle_publish_success),b.addTrace(lc.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Kf.session_approve_publish_failure),S}),b.addTrace(lc.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(_,$n("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(_),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,$n("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(_,Jr(Km)),{topic:_,acknowledged:()=>Promise.resolve(this.client.session.get(_))}}),ye(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:hs.wc_sessionPropose.reject}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED")))}),ye(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=ip(),c=ul(),l=Rp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Sn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),ye(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=ul(),{done:i,resolve:o,reject:a}=ip();return this.events.once(Sn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Jr(Km)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),ye(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=hs.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===ar.relay&&await this.confirmOnlineStateOrThrow();const c=ul(),l=Rp().toString(),{done:u,resolve:d,reject:h}=ip(o,"Request expired. Please try again.");this.events.once(Sn("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:yi(Vn({},s),{expiryTimestamp:Jr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:yi(Vn({},s),{expiryTimestamp:Jr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(Vn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await m3e(this.client.core.storage,L9);await f3e({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),ye(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===ar.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);dl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ra(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),ye(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ul(),i=Rp().toString(),{done:o,resolve:a,reject:c}=ip();this.events.once(Sn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ye(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Rp().toString(),a=ul();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ye(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:$n("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=Re("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ye(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>oLe(r,n)))),ye(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ye(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?ar.link_mode:ar.relay;o===ar.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),_=WS(A);if(await Promise.all([this.client.auth.authKeys.set(HS,{responseTopic:_,publicKey:A}),this.client.auth.pairingTopics.set(_,{topic:_,pairingTopic:b})]),await this.client.core.relayer.subscribe(_,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=t0(a[0]);let j=c5e(M,"request",g);jS(y)&&(j=u5e(j,y.pop())),y.push(j)}const I=w&&w>hs.wc_sessionAuthenticate.req.ttl?w:hs.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Jr(I)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Jr(hs.wc_sessionPropose.req.ttl),id:ul()},{done:O,resolve:P,reject:F}=ip(I,"Request expired"),G=ul(),B=Sn("session_connect",S.id),T=Sn("session_request",G),R=async({error:M,session:j})=>{this.events.off(T,$),M?F(M):j&&P({session:j})},$=async M=>{var j,K,ne;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),M.error){const Me=$n("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===Me.code?void 0:(this.events.off(B,R),F(M.error.message))}await this.deleteProposal(S.id),this.events.off(B,R);const{cacaos:le,responder:oe}=M.result,ae=[],ue=[];for(const Me of le){await kj({cacao:Me,projectId:this.client.core.projectId})||(this.client.logger.error(Me,"Signature verification failed"),F($n("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:rt}=Me,Rt=jS(rt.resources),Xt=[k3(rt.iss)],X=TI(rt.iss);if(Rt){const ce=Dj(Rt),Ee=Mj(Rt);ae.push(...ce),Xt.push(...Ee)}for(const ce of Xt)ue.push(`${ce}:${X}`)}const Xe=await this.client.core.crypto.generateSharedKey(A,oe.publicKey);let xe;ae.length>0&&(xe={topic:Xe,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:oe,controller:oe.publicKey,expiry:Jr(Km),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:o9([...new Set(ae)],[...new Set(ue)]),transportType:o},await this.client.core.relayer.subscribe(Xe,{transportType:o}),await this.client.session.set(Xe,xe),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:oe.metadata}),xe=this.client.session.get(Xe)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(K=oe.metadata.redirect)!=null&&K.linkMode&&(ne=oe.metadata.redirect)!=null&&ne.universal&&r&&(this.client.core.addLinkModeSupportedApp(oe.metadata.redirect.universal),this.client.session.update(Xe,{transportType:ar.link_mode})),P({auths:le,session:xe})};this.events.once(B,R),this.events.once(T,$);let k;try{if(i){const M=$h("wc_sessionAuthenticate",x,G);this.client.core.history.set(b,M);const j=await this.client.core.crypto.encode("",M,{type:I1,encoding:ih});k=GA(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:hs.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(B,R),this.events.off(T,$),M}return await this.setProposal(S.id,S),await this.setAuthRequest(G,{request:yi(Vn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:k??v,response:O}}),ye(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Yf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(bv.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(bv.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||ar.relay;a===ar.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=WS(c),d={type:rd,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await kj({cacao:w,projectId:this.client.core.projectId})){i.setError(bv.invalid_cacao);const _=$n("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:_,encodeOpts:d}),new Error(_.message)}i.addTrace(Yf.cacaos_verified);const{p:y}=w,b=jS(y.resources),v=[k3(y.iss)],A=TI(y.iss);if(b){const _=Dj(b),I=Mj(b);h.push(..._),v.push(...I)}for(const _ of v)f.push(`${_}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Yf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Jr(Km),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:o9([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Yf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(bv.subscribe_authenticated_session_topic_failure),w}i.addTrace(Yf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Yf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Yf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(bv.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),ye(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===ar.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=WS(o),l={type:rd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:hs.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED"))}),ye(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return iX(r,s)}),ye(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ye(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ye(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,$n("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(L9).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,$n("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=il.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),ye(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Kf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,$n("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ye(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=il.idle,this.client.events.emit("session_request_expire",{id:n}))}),ye(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),ye(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ye(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Jr(hs.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ye(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=ar.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ye(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Jr(hs.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),ye(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=$h(s,i,c);let f;const p=!!u;try{const y=p?ih:Uc;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(_6e.includes(s)){const y=Nl(JSON.stringify(h)),b=Nl(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=hs[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=GA(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=hs[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=yi(Vn({},d),{correlationId:h.id}),l?(y.internal=yi(Vn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),ye(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=NT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?ih:Uc;u=await this.client.core.crypto.encode(s,l,yi(Vn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=GA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=hs[p].res;g.tvf=yi(Vn({},f),{correlationId:r}),o?(g.internal=yi(Vn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),ye(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=TT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?ih:Uc;u=await this.client.core.crypto.encode(s,l,yi(Vn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=GA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||hs[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),ye(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;eh(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{eh(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ye(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ye(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ye(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===il.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=il.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=il.idle}),ye(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ye(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ye(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=Re("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ye(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ye(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Cu.proposal_listener_not_found)),this.isValidConnect(Vn({},s.params));const u=a.expiryTimestamp||Jr(hs.wc_sessionPropose.req.ttl),d=Vn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Nl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(cl.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:hs.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ye(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(dl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ra(r)){await this.client.proposal.delete(i,$n("USER_DISCONNECTED"));const o=Sn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),ye(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=yi(Vn(Vn(Vn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:ar.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Sn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;dl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Sn("session_approve",s),{})):Ra(r)&&(await this.client.session.delete(n,$n("USER_DISCONNECTED")),this.events.emit(Sn("session_approve",s),{error:r.error}))}),ye(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=yv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:$n("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Vn({topic:n},s));try{yv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw yv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ye(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Sn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);dl(r)?this.events.emit(Sn("session_update",s),{}):Ra(r)&&this.events.emit(Sn("session_update",s),{error:r.error})}),ye(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Jr(Km)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Sn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);dl(r)?this.events.emit(Sn("session_extend",s),{}):Ra(r)&&this.events.emit(Sn("session_extend",s),{error:r.error})}),ye(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Sn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);dl(r)?this.events.emit(Sn("session_ping",s),{}):Ra(r)&&this.events.emit(Sn("session_ping",s),{error:r.error})},500)}),ye(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(vs.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:$n("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),ye(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Vn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Nl(JSON.stringify($h("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===ar.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),ye(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Sn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);dl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Ra(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),ye(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=yv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Vn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),yv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),dl(r)?this.events.emit(Sn("session_request",s),{result:r.result}):Ra(r)&&this.events.emit(Sn("session_request",s),{error:r.error})}),ye(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Nl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===ar.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:rd,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:hs.wc_sessionAuthenticate.autoReject,appLink:h})}}),ye(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ye(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=il.idle,this.processSessionRequestQueue()},Te.toMiliseconds(this.requestQueueDelay))}),ye(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Sn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Sn("session_request",i.request.id),{error:r})})}),ye(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===il.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=il.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ye(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),ye(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:$h("wc_sessionPropose",yi(Vn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),ye(this,"isValidConnect",async n=>{if(!no(n)){const{message:l}=Re("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if($s(r)||await this.isValidPairingTopic(r),!wLe(c)){const{message:l}=Re("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!$s(s)&&uf(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!$s(i)&&uf(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),$s(o)||this.validateSessionProps(o,"sessionProperties"),!$s(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ye(this,"validateNamespaces",(n,r)=>{const s=yLe(n,"connect()",r);if(s)throw new Error(s.message)}),ye(this,"isValidApprove",async n=>{if(!no(n))throw new Error(Re("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=LO(s,"approve()");if(l)throw new Error(l.message);const u=l9(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Hr(i,!0)){const{message:d}=Re("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if($s(o)||this.validateSessionProps(o,"sessionProperties"),!$s(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),ye(this,"isValidReject",async n=>{if(!no(n)){const{message:i}=Re("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!vLe(s)){const{message:i}=Re("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ye(this,"isValidSessionSettleRequest",n=>{if(!no(n)){const{message:l}=Re("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!PX(r)){const{message:l}=Re("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=dLe(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=LO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(eh(o)){const{message:l}=Re("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ye(this,"isValidUpdate",async n=>{if(!no(n)){const{message:c}=Re("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=LO(s,"update()");if(o)throw new Error(o.message);const a=l9(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),ye(this,"isValidExtend",async n=>{if(!no(n)){const{message:s}=Re("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ye(this,"isValidRequest",async n=>{if(!no(n)){const{message:c}=Re("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!c9(a,i)){const{message:c}=Re("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!ELe(s)){const{message:c}=Re("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!ALe(a,i,s.method)){const{message:c}=Re("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!NLe(o,zO)){const{message:c}=Re("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${zO.min} and ${zO.max}`);throw new Error(c)}}),ye(this,"isValidRespond",async n=>{var r;if(!no(n)){const{message:o}=Re("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!CLe(i)){const{message:o}=Re("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),ye(this,"isValidPing",async n=>{if(!no(n)){const{message:s}=Re("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidEmit",async n=>{if(!no(n)){const{message:a}=Re("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!c9(o,i)){const{message:a}=Re("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!_Le(s)){const{message:a}=Re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!SLe(o,i,s.name)){const{message:a}=Re("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),ye(this,"isValidDisconnect",async n=>{if(!no(n)){const{message:s}=Re("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Hr(s,!1))throw new Error("uri is required parameter");if(!Hr(i,!1))throw new Error("domain is required parameter");if(!Hr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>t0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=t0(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ye(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||NE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===ar.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ye(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=Re("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),ye(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ye(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ye(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=Re("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),ye(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==ar.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ye(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),ye(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=Aj(n,"topic")||"",s=decodeURIComponent(Aj(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:ar.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),ye(this,"registerLinkModeListeners",async()=>{var n;if(HU()||Uf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ye(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys($9).includes(s.method)}),ye(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return yi(Vn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),ye(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ye(this,"extractTxHashesFromResult",(n,r)=>{try{const s=$9[n];if(typeof r=="string")return[r];const i=r[s.key];if(lf(i))return n==="solana_signAllTransactions"?i.map(o=>K3e(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Re("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(vs.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(HS)?this.client.auth.authKeys.get(HS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===ar.link_mode?ih:Uc});zU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Nl(r)})):RT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Ea.expired,async e=>{const{topic:n,id:r}=QZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Re("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Re("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(fp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(fp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Hr(e,!1)){const{message:n}=Re("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Re("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(eh(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Re("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Hr(e,!1)){const{message:n}=Re("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Re("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(eh(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Re("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Re("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Hr(e,!1)){const{message:n}=Re("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Re("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!bLe(e)){const{message:n}=Re("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Re("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(eh(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Re("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class M6e extends Em{constructor(e,n){super(e,n,b6e,ZU),this.core=e,this.logger=n}}let L6e=class extends Em{constructor(e,n){super(e,n,v6e,ZU),this.core=e,this.logger=n}};class U6e extends Em{constructor(e,n){super(e,n,C6e,ZU,r=>r.id),this.core=e,this.logger=n}}class $6e extends Em{constructor(e,n){super(e,n,x6e,jT,()=>HS),this.core=e,this.logger=n}}class B6e extends Em{constructor(e,n){super(e,n,I6e,jT),this.core=e,this.logger=n}}class F6e extends Em{constructor(e,n){super(e,n,N6e,jT,r=>r.id),this.core=e,this.logger=n}}var j6e=Object.defineProperty,W6e=(t,e,n)=>e in t?j6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HO=(t,e,n)=>W6e(t,typeof e!="symbol"?e+"":e,n);class z6e{constructor(e,n){this.core=e,this.logger=n,HO(this,"authKeys"),HO(this,"pairingTopics"),HO(this,"requests"),this.authKeys=new $6e(this.core,this.logger),this.pairingTopics=new B6e(this.core,this.logger),this.requests=new F6e(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var H6e=Object.defineProperty,G6e=(t,e,n)=>e in t?H6e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tn=(t,e,n)=>G6e(t,typeof e!="symbol"?e+"":e,n);let q6e=class JX extends sDe{constructor(e){super(e),tn(this,"protocol",KX),tn(this,"version",YX),tn(this,"name",WO.name),tn(this,"metadata"),tn(this,"core"),tn(this,"logger"),tn(this,"events",new Za.EventEmitter),tn(this,"engine"),tn(this,"session"),tn(this,"proposal"),tn(this,"pendingRequest"),tn(this,"auth"),tn(this,"signConfig"),tn(this,"on",(r,s)=>this.events.on(r,s)),tn(this,"once",(r,s)=>this.events.once(r,s)),tn(this,"off",(r,s)=>this.events.off(r,s)),tn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),tn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),tn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),tn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),tn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||WO.name,this.metadata=a3e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:y1(bm({level:(e==null?void 0:e.logger)||WO.logger}));this.core=(e==null?void 0:e.core)||new w6e(e),this.logger=Ys(n,this.name),this.session=new L6e(this.core,this.logger),this.proposal=new M6e(this.core,this.logger),this.pendingRequest=new U6e(this.core,this.logger),this.engine=new D6e(this),this.auth=new z6e(this.core,this.logger)}static async init(e){const n=new JX(e);return await n.initialize(),n}get context(){return No(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},Te.toMiliseconds(Te.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const F9="error",V6e="wss://relay.walletconnect.org",K6e="wc",Y6e="universal_provider",VA=`${K6e}@2:${Y6e}:`,ZX="https://rpc.walletconnect.org/v1/",py="generic",Q6e=`${ZX}bundler`,ec={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function J6e(){}function XU(t){return t==null||typeof t!="object"&&typeof t!="function"}function e$(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Z6e(t){if(XU(t))return t;if(Array.isArray(t)||e$(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function j9(t){return typeof t=="object"&&t!==null}function XX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function eee(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const X6e="[object RegExp]",tee="[object String]",nee="[object Number]",ree="[object Boolean]",see="[object Arguments]",e8e="[object Symbol]",t8e="[object Date]",n8e="[object Map]",r8e="[object Set]",s8e="[object Array]",i8e="[object ArrayBuffer]",o8e="[object Object]",a8e="[object DataView]",c8e="[object Uint8Array]",l8e="[object Uint8ClampedArray]",u8e="[object Uint16Array]",d8e="[object Uint32Array]",h8e="[object Int8Array]",f8e="[object Int16Array]",p8e="[object Int32Array]",g8e="[object Float32Array]",m8e="[object Float64Array]";function y8e(t,e){return Ly(t,void 0,t,new Map,e)}function Ly(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(XU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ly(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Ly(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Ly(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(e$(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Ly(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),pp(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),pp(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),pp(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,pp(o,t,n,r,s),o}if(typeof t=="object"&&w8e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),pp(o,t,n,r,s),o}return t}function pp(t,e,n=t,r,s){const i=[...Object.keys(e),...XX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Ly(e[a],a,n,r,s))}}function w8e(t){switch(eee(t)){case see:case s8e:case i8e:case a8e:case ree:case t8e:case g8e:case m8e:case h8e:case f8e:case p8e:case n8e:case nee:case o8e:case X6e:case r8e:case tee:case e8e:case c8e:case l8e:case u8e:case d8e:return!0;default:return!1}}function b8e(t,e){return y8e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case nee:case tee:case ree:{const o=new t.constructor(t==null?void 0:t.valueOf());return pp(o,t),o}case see:{const o={};return pp(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function W9(t){return b8e(t)}function z9(t){return t!==null&&typeof t=="object"&&eee(t)==="[object Arguments]"}function v8e(t){return e$(t)}function E8e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function C8e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=t5(s,o,r,new Map)}return s}function t5(t,e,n,r){if(XU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Z6e(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...XX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(z9(a)&&(a={...a}),z9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=W9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||j9(c)&&j9(a)?t[o]=t5(c,a,n,r):c==null&&E8e(a)?t[o]=t5({},a,n,r):c==null&&v8e(a)?t[o]=W9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function _8e(t,...e){return C8e(t,...e,J6e)}var A8e=Object.defineProperty,S8e=Object.defineProperties,x8e=Object.getOwnPropertyDescriptors,H9=Object.getOwnPropertySymbols,I8e=Object.prototype.hasOwnProperty,N8e=Object.prototype.propertyIsEnumerable,G9=(t,e,n)=>e in t?A8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KA=(t,e)=>{for(var n in e||(e={}))I8e.call(e,n)&&G9(t,n,e[n]);if(H9)for(var n of H9(e))N8e.call(e,n)&&G9(t,n,e[n]);return t},T8e=(t,e)=>S8e(t,x8e(e));function ia(t,e,n){var r;const s=t0(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${ZX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function Cm(t){return t.includes(":")?t.split(":")[1]:t}function iee(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function R8e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function YA(t={},e={}){const n=q9(t),r=q9(e);return _8e(n,r)}function q9(t){var e,n,r,s,i;const o={};if(!uf(t))return o;for(const[a,c]of Object.entries(t)){const l=BT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=My(a);o[f]=T8e(KA(KA({},o[f]),c),{chains:Gl(l,(e=o[f])==null?void 0:e.chains),methods:Gl(u,(n=o[f])==null?void 0:n.methods),events:Gl(d,(r=o[f])==null?void 0:r.events)}),(uf(h)||uf(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=KA(KA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function V9(t){return t.includes(":")?t.split(":")[2]:t}function K9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=BT(n)?[n]:r.chains?r.chains:iee(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function GO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const oee={},En=t=>oee[t],qO=(t,e)=>{oee[t]=e};var P8e=Object.defineProperty,O8e=(t,e,n)=>e in t?P8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ym=(t,e,n)=>O8e(t,typeof e!="symbol"?e+"":e,n);class k8e{constructor(e){Ym(this,"name","polkadot"),Ym(this,"client"),Ym(this,"httpProviders"),Ym(this,"events"),Ym(this,"namespace"),Ym(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}}var D8e=Object.defineProperty,M8e=Object.defineProperties,L8e=Object.getOwnPropertyDescriptors,Y9=Object.getOwnPropertySymbols,U8e=Object.prototype.hasOwnProperty,$8e=Object.prototype.propertyIsEnumerable,n5=(t,e,n)=>e in t?D8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q9=(t,e)=>{for(var n in e||(e={}))U8e.call(e,n)&&n5(t,n,e[n]);if(Y9)for(var n of Y9(e))$8e.call(e,n)&&n5(t,n,e[n]);return t},J9=(t,e)=>M8e(t,L8e(e)),Qm=(t,e,n)=>n5(t,typeof e!="symbol"?e+"":e,n);class B8e{constructor(e){Qm(this,"name","eip155"),Qm(this,"client"),Qm(this,"chainId"),Qm(this,"namespace"),Qm(this,"httpProviders"),Qm(this,"events"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||ia(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(Cm(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:J9(Q9({},u.sessionProperties||{}),{capabilities:J9(Q9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($h("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${Q6e}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var F8e=Object.defineProperty,j8e=(t,e,n)=>e in t?F8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>j8e(t,typeof e!="symbol"?e+"":e,n);class W8e{constructor(e){Jm(this,"name","solana"),Jm(this,"client"),Jm(this,"httpProviders"),Jm(this,"events"),Jm(this,"namespace"),Jm(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}}var z8e=Object.defineProperty,H8e=(t,e,n)=>e in t?z8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zm=(t,e,n)=>H8e(t,typeof e!="symbol"?e+"":e,n);class G8e{constructor(e){Zm(this,"name","cosmos"),Zm(this,"client"),Zm(this,"httpProviders"),Zm(this,"events"),Zm(this,"namespace"),Zm(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}}var q8e=Object.defineProperty,V8e=(t,e,n)=>e in t?q8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xm=(t,e,n)=>V8e(t,typeof e!="symbol"?e+"":e,n);class K8e{constructor(e){Xm(this,"name","algorand"),Xm(this,"client"),Xm(this,"httpProviders"),Xm(this,"events"),Xm(this,"namespace"),Xm(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||ia(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Xa(new Qc(r,En("disableProviderPing")))}}var Y8e=Object.defineProperty,Q8e=(t,e,n)=>e in t?Y8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ey=(t,e,n)=>Q8e(t,typeof e!="symbol"?e+"":e,n);class J8e{constructor(e){ey(this,"name","cip34"),ey(this,"client"),ey(this,"httpProviders"),ey(this,"events"),ey(this,"namespace"),ey(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=Cm(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}}var Z8e=Object.defineProperty,X8e=(t,e,n)=>e in t?Z8e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ty=(t,e,n)=>X8e(t,typeof e!="symbol"?e+"":e,n);class e4e{constructor(e){ty(this,"name","elrond"),ty(this,"client"),ty(this,"httpProviders"),ty(this,"events"),ty(this,"namespace"),ty(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}}var t4e=Object.defineProperty,n4e=(t,e,n)=>e in t?t4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ny=(t,e,n)=>n4e(t,typeof e!="symbol"?e+"":e,n);class r4e{constructor(e){ny(this,"name","multiversx"),ny(this,"client"),ny(this,"httpProviders"),ny(this,"events"),ny(this,"namespace"),ny(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=Cm(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}}var s4e=Object.defineProperty,i4e=(t,e,n)=>e in t?s4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ry=(t,e,n)=>i4e(t,typeof e!="symbol"?e+"":e,n);class o4e{constructor(e){ry(this,"name","near"),ry(this,"client"),ry(this,"httpProviders"),ry(this,"events"),ry(this,"namespace"),ry(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ia(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace);return typeof r>"u"?void 0:new Xa(new Qc(r,En("disableProviderPing")))}}var a4e=Object.defineProperty,c4e=(t,e,n)=>e in t?a4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sy=(t,e,n)=>c4e(t,typeof e!="symbol"?e+"":e,n);class l4e{constructor(e){sy(this,"name","tezos"),sy(this,"client"),sy(this,"httpProviders"),sy(this,"events"),sy(this,"namespace"),sy(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ia(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace);return typeof r>"u"?void 0:new Xa(new Qc(r))}}var u4e=Object.defineProperty,d4e=(t,e,n)=>e in t?u4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,iy=(t,e,n)=>d4e(t,typeof e!="symbol"?e+"":e,n);class h4e{constructor(e){iy(this,"name",py),iy(this,"client"),iy(this,"httpProviders"),iy(this,"events"),iy(this,"namespace"),iy(this,"chainId"),this.namespace=e.namespace,this.events=En("events"),this.client=En("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(ec.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=t0(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ia(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Xa(new Qc(r,En("disableProviderPing")))}}var f4e=Object.defineProperty,p4e=Object.defineProperties,g4e=Object.getOwnPropertyDescriptors,Z9=Object.getOwnPropertySymbols,m4e=Object.prototype.hasOwnProperty,y4e=Object.prototype.propertyIsEnumerable,r5=(t,e,n)=>e in t?f4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,QA=(t,e)=>{for(var n in e||(e={}))m4e.call(e,n)&&r5(t,n,e[n]);if(Z9)for(var n of Z9(e))y4e.call(e,n)&&r5(t,n,e[n]);return t},VO=(t,e)=>p4e(t,g4e(e)),ma=(t,e,n)=>r5(t,typeof e!="symbol"?e+"":e,n);let w4e=class aee{constructor(e){ma(this,"client"),ma(this,"namespaces"),ma(this,"optionalNamespaces"),ma(this,"sessionProperties"),ma(this,"scopedProperties"),ma(this,"events",new PU),ma(this,"rpcProviders",{}),ma(this,"session"),ma(this,"providerOpts"),ma(this,"logger"),ma(this,"uri"),ma(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:y1(bm({level:(e==null?void 0:e.logger)||F9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new aee(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:QA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,NT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$n("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=K9(this.session.namespaces);this.namespaces=YA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=K9(s.namespaces);return this.namespaces=YA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===py?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(lf(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await q6e.init({core:this.providerOpts.core,logger:this.providerOpts.logger||F9,relayUrl:this.providerOpts.relayUrl||V6e,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>My(n)))];qO("client",this.client),qO("events",this.events),qO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=R8e(n,this.session),s=iee(r),i=YA(this.namespaces,this.optionalNamespaces),o=VO(QA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new B8e({namespace:o});break;case"algorand":this.rpcProviders[n]=new K8e({namespace:o});break;case"solana":this.rpcProviders[n]=new W8e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new G8e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new k8e({namespace:o});break;case"cip34":this.rpcProviders[n]=new J8e({namespace:o});break;case"elrond":this.rpcProviders[n]=new e4e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new r4e({namespace:o});break;case"near":this.rpcProviders[n]=new o4e({namespace:o});break;case"tezos":this.rpcProviders[n]=new l4e({namespace:o});break;default:this.rpcProviders[py]?this.rpcProviders[py].updateNamespace(o):this.rpcProviders[py]=new h4e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&lf(o)&&this.events.emit("accountsChanged",o.map(V9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=My(o),l=GO(o)!==GO(a)?`${c}:${GO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=VO(QA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",VO(QA({},$n("USER_DISCONNECTED")),{data:e.topic})))}),this.on(ec.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[py]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=YA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>My(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=My(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(V9);if(!lf(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${VA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${VA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${VA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(VA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var X9={};const b4e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof X9<"u"?X9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},s5={filterOutDuplicatesByRDNS(t){const e=we.state.enableEIP6963?Fe.state.connectors:[],n=Ye.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ct.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Fe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ye.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Fe.state,{featuredWalletIds:n}=we.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=we.state.features)==null?void 0:c.connectMethodsOrder),r=e||Fe.state.connectors;if(n)return n;const{injected:s,announced:i}=GS.getConnectorsByType(r,lt.state.recommended,lt.state.featured),o=s.filter(GS.showConnector),a=i.filter(GS.showConnector);return o.length||a.length?["wallet","email","social"]:b4e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&lt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&lt.state.excludedWallets.some(r=>PT.isLowerCaseMatch(r.name,t.name));return e||n}},GS={getConnectorsByType(t,e,n){const{customWallets:r}=we.state,s=Ye.getRecentWallets(),i=s5.filterOutDuplicateWallets(e),o=s5.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&lt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&lt.state.excludedWallets.some(i=>PT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ct.isMobile()||ct.isMobile()&&!e&&!mt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(H.state.chains.values()).some(n=>Fe.getConnectorId(n.namespace)===je.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=we.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=GS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:we.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const qS=globalThis,t$=qS.ShadowRoot&&(qS.ShadyCSS===void 0||qS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,n$=Symbol(),e7=new WeakMap;let cee=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==n$)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(t$&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=e7.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&e7.set(n,e))}return e}toString(){return this.cssText}};const ba=t=>new cee(typeof t=="string"?t:t+"",void 0,n$),sd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new cee(n,t,n$)},v4e=(t,e)=>{if(t$)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=qS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},t7=t$?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return ba(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:E4e,defineProperty:C4e,getOwnPropertyDescriptor:_4e,getOwnPropertyNames:A4e,getOwnPropertySymbols:S4e,getPrototypeOf:x4e}=Object,df=globalThis,n7=df.trustedTypes,I4e=n7?n7.emptyScript:"",KO=df.reactiveElementPolyfillSupport,RE=(t,e)=>t,i5={toAttribute(t,e){switch(e){case Boolean:t=t?I4e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},lee=(t,e)=>!E4e(t,e),r7={attribute:!0,type:String,converter:i5,reflect:!1,useDefault:!1,hasChanged:lee};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),df.litPropertyMetadata??(df.litPropertyMetadata=new WeakMap);let gy=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=r7){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&C4e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=_4e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??r7}static _$Ei(){if(this.hasOwnProperty(RE("elementProperties")))return;const e=x4e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(RE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(RE("properties"))){const n=this.properties,r=[...A4e(n),...S4e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(t7(s))}else e!==void 0&&n.push(t7(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return v4e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:i5).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:i5;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??lee)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};gy.elementStyles=[],gy.shadowRootOptions={mode:"open"},gy[RE("elementProperties")]=new Map,gy[RE("finalized")]=new Map,KO==null||KO({ReactiveElement:gy}),(df.reactiveElementVersions??(df.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const PE=globalThis,OI=PE.trustedTypes,s7=OI?OI.createPolicy("lit-html",{createHTML:t=>t}):void 0,uee="$lit$",oh=`lit$${Math.random().toFixed(9).slice(2)}$`,dee="?"+oh,N4e=`<${dee}>`,Yg=document,s_=()=>Yg.createComment(""),i_=t=>t===null||typeof t!="object"&&typeof t!="function",r$=Array.isArray,T4e=t=>r$(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",YO=`[ 	
\f\r]`,Cv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,i7=/-->/g,o7=/>/g,Qf=RegExp(`>|${YO}(?:([^\\s"'>=/]+)(${YO}*=${YO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),a7=/'/g,c7=/"/g,hee=/^(?:script|style|textarea|title)$/i,fee=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),CKe=fee(1),_Ke=fee(2),jw=Symbol.for("lit-noChange"),Es=Symbol.for("lit-nothing"),l7=new WeakMap,Op=Yg.createTreeWalker(Yg,129);function pee(t,e){if(!r$(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return s7!==void 0?s7.createHTML(e):e}const R4e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Cv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Cv?u[1]==="!--"?o=i7:u[1]!==void 0?o=o7:u[2]!==void 0?(hee.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=Qf):u[3]!==void 0&&(o=Qf):o===Qf?u[0]===">"?(o=s??Cv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?Qf:u[3]==='"'?c7:a7):o===c7||o===a7?o=Qf:o===i7||o===o7?o=Cv:(o=Qf,s=void 0);const f=o===Qf&&t[a+1].startsWith("/>")?" ":"";i+=o===Cv?c+N4e:d>=0?(r.push(l),c.slice(0,d)+uee+c.slice(d)+oh+f):c+oh+(d===-2?a:f)}return[pee(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class o_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=R4e(e,n);if(this.el=o_.createElement(l,r),Op.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Op.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(uee)){const h=u[o++],f=s.getAttribute(d).split(oh),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?O4e:p[1]==="?"?k4e:p[1]==="@"?D4e:WT}),s.removeAttribute(d)}else d.startsWith(oh)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(hee.test(s.tagName)){const d=s.textContent.split(oh),h=d.length-1;if(h>0){s.textContent=OI?OI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],s_()),Op.nextNode(),c.push({type:2,index:++i});s.append(d[h],s_())}}}else if(s.nodeType===8)if(s.data===dee)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(oh,d+1))!==-1;)c.push({type:7,index:i}),d+=oh.length-1}i++}}static createElement(e,n){const r=Yg.createElement("template");return r.innerHTML=e,r}}function Ww(t,e,n=t,r){var o,a;if(e===jw)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=i_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Ww(t,s._$AS(t,e.values),s,r)),e}class P4e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??Yg).importNode(n,!0);Op.currentNode=s;let i=Op.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new T1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new M4e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Op.nextNode(),o++)}return Op.currentNode=Yg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class T1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=Es,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Ww(this,e,n),i_(e)?e===Es||e==null||e===""?(this._$AH!==Es&&this._$AR(),this._$AH=Es):e!==this._$AH&&e!==jw&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):T4e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Es&&i_(this._$AH)?this._$AA.nextSibling.data=e:this.T(Yg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=o_.createElement(pee(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new P4e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=l7.get(e.strings);return n===void 0&&l7.set(e.strings,n=new o_(e)),n}k(e){r$(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new T1(this.O(s_()),this.O(s_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class WT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=Es,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=Es}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Ww(this,e,n,0),o=!i_(e)||e!==this._$AH&&e!==jw,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Ww(this,a[r+c],n,c),l===jw&&(l=this._$AH[c]),o||(o=!i_(l)||l!==this._$AH[c]),l===Es?e=Es:e!==Es&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===Es?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class O4e extends WT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Es?void 0:e}}class k4e extends WT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Es)}}class D4e extends WT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Ww(this,e,n,0)??Es)===jw)return;const r=this._$AH,s=e===Es&&r!==Es||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==Es&&(r===Es||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class M4e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Ww(this,e)}}const QO=PE.litHtmlPolyfillSupport;QO==null||QO(o_,T1),(PE.litHtmlVersions??(PE.litHtmlVersions=[])).push("3.3.1");const L4e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new T1(e.insertBefore(s_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const yg=globalThis;let VS=class extends gy{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=L4e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return jw}};var lz;VS._$litElement$=!0,VS.finalized=!0,(lz=yg.litElementHydrateSupport)==null||lz.call(yg,{LitElement:VS});const JO=yg.litElementPolyfillSupport;JO==null||JO({LitElement:VS});(yg.litElementVersions??(yg.litElementVersions=[])).push("4.2.1");let OE,hf,ff;function SKe(t,e){OE=document.createElement("style"),hf=document.createElement("style"),ff=document.createElement("style"),OE.textContent=n0(t).core.cssText,hf.textContent=n0(t).dark.cssText,ff.textContent=n0(t).light.cssText,document.head.appendChild(OE),document.head.appendChild(hf),document.head.appendChild(ff),gee(e)}function gee(t){hf&&ff&&(t==="light"?(hf.removeAttribute("media"),ff.media="enabled"):(ff.removeAttribute("media"),hf.media="enabled"))}function U4e(t){OE&&hf&&ff&&(OE.textContent=n0(t).core.cssText,hf.textContent=n0(t).dark.cssText,ff.textContent=n0(t).light.cssText)}function n0(t){return{core:sd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${ba(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${ba((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${ba((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${ba((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${ba((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:sd`
      :root {
        --w3m-color-mix: ${ba((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${ba(Qu(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${ba(Qu(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:sd`
      :root {
        --w3m-color-mix: ${ba((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${ba(Qu(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${ba(Qu(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const xKe=sd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,IKe=sd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,NKe=sd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,zv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]};function R1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const kI=R1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),DI=R1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),mee=R1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});R1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});R1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const $4e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},KS={getMethodsByChainNamespace(t){return $4e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case kI.caipNetworkId:u.chains.push(kI.deprecatedCaipNetworkId);break;case DI.caipNetworkId:u.chains.push(DI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await _E.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let yee=class{constructor({provider:e,namespace:n}){this.id=je.CONNECTOR_ID.WALLET_CONNECT,this.name=mI.ConnectorNamesMap[je.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=mI.ConnectorImageIds[je.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=H.getCaipNetworks.bind(H),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=we.state.universalProviderConfigOverride,s=KS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return xE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:B4e})}};const B4e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let F4e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>H.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:je.CONNECTOR_ID.AUTH,type:"AUTH",name:je.CONNECTOR_NAMES.AUTH,provider:e,imageId:mI.ConnectorImageIds[je.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ke.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ke.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof yee);if(!e)throw new Error("WalletConnectConnector not found");return e}};class j4e extends F4e{setUniversalProvider(e){this.addConnector(new yee({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ct.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Bn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ke.state.balanceLoading&&e.chainId===((c=H.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ke.state.balance||"0.00",symbol:Ke.state.balanceSymbol||""};const s=(await Ke.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===je.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:hZ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=H.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===je.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ga(n.id)}]}))}catch(u){if(u.code===zv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===zv.ERROR_INVALID_CHAIN_ID||u.code===zv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===zv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ga(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const W4e=["email","socials","swaps","onramp","activity","reownBranding"],JA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Bn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Bn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},z4e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=JA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=JA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return JA[t].processApi(e)},processFallbackFeature(t,e){return JA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await lt.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Bn.DEFAULT_REMOTE_FEATURES:Bn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of W4e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Bn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Dl.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class H4e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=H.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=H.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=H.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return H.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>H.getCaipNetworks(n),this.getActiveChainNamespace=()=>H.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{H.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>H.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>H.state.activeChain===n||!n?H.state.activeCaipAddress:H.getAccountProp("caipAddress",n),this.setClientId=n=>{gt.setClientId(n)},this.getProvider=n=>Un.getProvider(n),this.getProviderType=n=>Un.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ke.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ke.setCaipAddress(n,r),n&&we.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ke.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ke.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ke.setProfileImage(n,r)},this.setUser=(n,r)=>{Ke.setUser(n,r)},this.resetAccount=n=>{Ke.resetAccount(n)},this.setCaipNetwork=n=>{H.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{H.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ke.setAllAccounts(n,r),we.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ke.setStatus(n,r),Fe.isConnected()?Ye.setConnectionStatus("connected"):Ye.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>H.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Fe.state.allConnectors,...n];Fe.setConnectors(r)},this.setConnections=(n,r)=>{mt.setConnections(n,r)},this.fetchIdentity=n=>gt.fetchIdentity(n),this.getReownName=n=>_E.getNamesForAddress(n),this.getConnectors=()=>Fe.getConnectors(),this.getConnectorImage=n=>yJ.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Un.getProviderId(r),i=n?{...n,type:s}:void 0;Ke.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!H.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ke.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ke.removeAddressLabel(n,r)},this.getAddress=n=>H.state.activeChain===n||!n?Ke.state.address:H.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>H.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{H.resetNetwork(n)},this.addConnector=n=>{Fe.addConnector(n)},this.resetWcConnection=()=>{mt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ke.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ke.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{H.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ke.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{we.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await z4e.fetchRemoteFeatures(e),we.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&l3.setOnrampProviders(this.remoteFeatures.onramp),((n=we.state.remoteFeatures)!=null&&n.email||Array.isArray((r=we.state.remoteFeatures)==null?void 0:r.socials)&&((s=we.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await lt.fetchAllowedOrigins();if(e&&ct.isClient()){const n=window.location.origin;KS.isOriginAllowed(n,e,zv.DEFAULT_ALLOWED_ANCESTORS)||Dl.open(Il.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Dl.open(Il.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,gr.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&co.setThemeMode(e.themeMode),e.themeVariables&&co.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");H.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&H.setActiveCaipNetwork(n)}initializeConnectionController(e){mt.setWcBasic(e.basic??!1)}initializeConnectorController(){Fe.initialize(this.chainNamespaces)}initializeProjectSettings(e){we.setProjectId(e.projectId),we.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;we.setDebug(e.debug!==!1),we.setEnableWalletConnect(e.enableWalletConnect!==!1),we.setEnableWalletGuide(e.enableWalletGuide!==!1),we.setEnableWallets(e.enableWallets!==!1),we.setEIP6963Enabled(e.enableEIP6963!==!1),we.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),we.setEnableAuthLogger(e.enableAuthLogger!==!1),we.setCustomRpcUrls(e.customRpcUrls),we.setEnableEmbedded(e.enableEmbedded),we.setAllWallets(e.allWallets),we.setIncludeWalletIds(e.includeWalletIds),we.setExcludeWalletIds(e.excludeWalletIds),we.setFeaturedWalletIds(e.featuredWalletIds),we.setTokens(e.tokens),we.setTermsConditionsUrl(e.termsConditionsUrl),we.setPrivacyPolicyUrl(e.privacyPolicyUrl),we.setCustomWallets(e.customWallets),we.setFeatures(e.features),we.setAllowUnsupportedChain(e.allowUnsupportedChain),we.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),we.setPreferUniversalLinks(e.experimental_preferUniversalLinks),we.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ye.getPreferredAccountTypes()||{},r={...we.state.defaultAccountTypes,...n};Ke.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),we.setMetadata(e.metadata),we.setDisableAppend(e.disableAppend),we.setEnableEmbedded(e.enableEmbedded),we.setSIWX(e.siwx),!e.projectId){Dl.open(Il.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===je.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");we.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ct.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=hy.getUnsupportedNetwork(`${n}:${e}`);H.setActiveCaipNetwork(r)}}getDefaultNetwork(){return hy.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return hy.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return hy.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?hy.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Un.getProvider(e),s=Un.getProviderId(e),{caipAddress:i}=H.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ye.removeConnectedNamespace(e),Un.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Fe.removeConnectorId(e),H.resetAccount(e),H.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=H.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ye.setConnectedNamespaces([...H.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Fe.setConnectorId(lo.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,A;const c=H.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const _=this.getCaipNetworks().find(I=>I.chainNamespace===i);_&&this.setCaipNetwork(_)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Ye.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ke.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=H.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ye.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=HPe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));Cn.resetSend(),mt.resetWcConnection(),await xE.clearSessions(),Fe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ye.deleteConnectedSocialProvider(),gr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(H.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ke.state.address,provider:Un.getProvider(H.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Bn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(H.state.activeChain),s=Un.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===je.CHAIN.EVM){const n=this.getAdapter(H.state.activeChain),r=Un.getProvider(H.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ke.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:H.state.activeChain}),Ke.state.profileImage||!1},getEnsAddress:async e=>await KS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(H.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Un.getProvider(H.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ke.state.address||this.updateNativeBalance(Ke.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},mt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Un.getProviderId(H.state.activeChain)===lo.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Un.getProvider(n),i=Un.getProviderId(n);if(e.chainNamespace===H.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===lo.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Od.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new j4e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ye.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ye.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=H.state.activeChain===e,c=H.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ke.state.address,i=H.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=H.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=H.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=H.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===je.CHAIN.EVM&&ct.isSafeApp()&&Fe.setConnectorId(je.CONNECTOR_ID.SAFE,e);const n=Fe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case je.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case je.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Fe.getConnectorId(e),s=this.getCaipNetwork(e),o=Fe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ct.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=H.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Od.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Od.validateCaipAddress(o),{chainId:f,address:p}=Od.parseCaipAddress(h);if(Un.setProviderId(n,lo.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&H.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==je.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:H.state.activeCaipNetwork});Un.setProvider(n,g)}else Un.setProvider(n,this.universalProvider);Fe.setConnectorId(je.CONNECTOR_ID.WALLET_CONNECT,n),Ye.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await H.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Od.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ct.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Un.setProviderId(s,e),Un.setProvider(s,n),Fe.setConnectorId(r,s)}async syncAllAccounts(e){const n=Fe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===H.state.activeChain,r=H.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ye.getActiveNetworkProps(),c=i||a,l=((d=H.state.activeCaipNetwork)==null?void 0:d.name)===je.UNSUPPORTED_NETWORK_NAME,u=H.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var A;return((A=Od.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=Od.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===H.state.activeChain?we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&((h=H.state.activeCaipNetwork)==null?void 0:h.name)===je.UNSUPPORTED_NETWORK_NAME?H.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),PT.isLowerCaseMatch(s,Ke.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Fe.getConnectorId(e),r=Un.getProviderId(e);if(r===lo.CONNECTOR_TYPE_ANNOUNCED||r===lo.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===lo.CONNECTOR_TYPE_WALLET_CONNECT){const i=Un.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===je.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===je.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!fJ.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=H.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=VPe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};we.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await w4e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{mt.setUri(e)}),this.universalProvider.on("connect",mt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),mt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(KS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ct.isCaipAddress(r[0])&&this.syncAccount(Od.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ct.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){gr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(Il.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=Il.ALERT_ERRORS[o];a&&(Dl.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&mt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Cs.open({...e,data:{swap:e.arguments}})}return Cs.open(e)}async close(){await this.injectModalUi(),Cs.close()}setLoading(e,n){Cs.setLoading(e,n)}async disconnect(e){await mt.disconnect(e)}getSIWX(){return we.state.siwx}getError(){return""}getChainId(){var e;return(e=H.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Dl.open(Il.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await H.switchActiveNetwork(n)}getWalletProvider(){return H.state.activeChain?Un.state.providers[H.state.activeChain]:null}getWalletProviderType(){return Un.getProviderId(H.state.activeChain)}subscribeProviders(e){return Un.subscribeProviders(e)}getThemeMode(){return co.state.themeMode}getThemeVariables(){return co.state.themeVariables}setThemeMode(e){co.setThemeMode(e),gee(co.state.themeMode)}setTermsConditionsUrl(e){we.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){we.setPrivacyPolicyUrl(e)}setThemeVariables(e){co.setThemeVariables(e),U4e(co.state.themeVariables)}subscribeTheme(e){return co.subscribe(e)}getWalletInfo(){return Ke.state.connectedWalletInfo}getAccount(e){var o;const n=Fe.getAuthConnector(e),r=H.getAccountData(e),s=H.state.activeChain,i=Ye.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ct.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===je.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ye.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?H.subscribeChainProp("accountState",r,n):H.subscribe(r),Fe.subscribe(r)}subscribeNetwork(e){return H.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ke.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ke.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){H.subscribeKey("activeCaipNetwork",e)}getState(){return zl.state}subscribeState(e){return zl.subscribe(e)}showErrorMessage(e){kc.showError(e)}showSuccessMessage(e){kc.showSuccess(e)}getEvent(){return{...gr.state}}subscribeEvents(e){return gr.subscribe(e)}replace(e){zt.replace(e)}redirect(e){zt.push(e)}popTransactionStack(e){zt.popTransactionStack(e)}isOpen(){return Cs.state.open}isTransactionStackEmpty(){return zt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){we.setFeatures(e)}updateRemoteFeatures(e){we.setRemoteFeatures(e)}updateOptions(e){const r={...we.state||{},...e};we.setOptions(r)}setConnectMethodsOrder(e){we.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){we.setWalletFeaturesOrder(e)}setCollapseWallets(e){we.setCollapseWallets(e)}setSocialsOrder(e){we.setSocialsOrder(e)}getConnectMethodsOrder(){return s5.getConnectOrderMethod(we.state.features,Fe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||H.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&H.removeNetwork(e,n)}}let u7=!1;class G4e extends H4e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Yo.checkIfRequestExists(n)?Yo.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Hs.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Hs.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Yo.checkIfRequestIsSafe(r),i=Ke.state.address,o=H.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=H.state.activeChain;Fe.getConnectorId(n)===je.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=H.state.activeChain,s=r===je.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=we.state.defaultAccountTypes[r],o=(l=Ke.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;PT.isLowerCaseMatch(n.address,Ke.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ke.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ct.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ct.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ke.state.user||{},username:n},H.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,H.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,H.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ke.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=co.getSnapshot(),l=we.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:Qu(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:je.CONNECTOR_ID.AUTH,info:{name:je.CONNECTOR_ID.AUTH},type:lo.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=H.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Fe.getConnectorId(n)===je.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ye.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ct.isTelegram())return;const r=Ye.getTelegramSocialProvider();if(!r||!ct.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ke.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Fe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await mt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ye.setConnectedSocialProvider(r),Ye.removeTelegramSocialProvider(),gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=gke.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:Il.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Dl.open(Il.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Dl.open(Il.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Dl.open(Il.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),zl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&lt.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=H.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Un.getProvider(r),u=Un.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Un.getProviderId(n)===lo.CONNECTOR_TYPE_AUTH,u=Un.getProviderId(r),d=u===lo.CONNECTOR_TYPE_AUTH,h=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(H.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:je.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:lo.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===lo.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),zl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==je.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Un.getProviderId(e);if(n===lo.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ye.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ct.isClient()&&!u7)try{const e={...Bn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ct.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!we.state.disableAppend&&!we.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}u7=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ct.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(ci(()=>import("./embedded-wallet-C6B3zXXo.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(ci(()=>import("./email-DQxUczvn.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(ci(()=>import("./socials-DPLnjtr_.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(ci(()=>import("./swaps-DY7WVY-j.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(ci(()=>import("./send-0JSlMDzR.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(ci(()=>import("./receive--D9YneG3.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(ci(()=>import("./onramp-33ztcSpT.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(ci(()=>import("./transactions-j6R2U9Nk.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(ci(()=>import("./index-CE0H0jdI.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,ci(()=>import("./index-Cvk25p5s.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),ci(()=>import("./w3m-modal-BM8RfG5p.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Kd;function q4e(t){t&&(Kd=t)}function P1(){if(!Kd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Kd==null?void 0:Kd.open(n))}async function e(){await(Kd==null?void 0:Kd.close())}return{open:t,close:e}}const V4e="1.7.8";let ZA;function K4e(t){return ZA||(ZA=new G4e({...t,sdkVersion:ct.generateSdkVersion(t.adapters??[],"react",V4e)}),q4e(ZA)),ZA}const Y4e=Yc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),d7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],Q4e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Y4e({isOpen:t}),{open:i}=P1(),o=D.useRef(null),[a,c]=D.useState([]),[l,u]=D.useState(!0),[d,h]=D.useState(null),[f,p]=D.useState("all"),[g,w]=D.useState(1),[y,b]=D.useState(1),[v,A]=D.useState(0),[_,I]=D.useState(null),[x,N]=D.useState(d7[0]),[S,O]=D.useState(!1),[P,F]=D.useState(null),G=D.useCallback(async()=>{var M,j;try{if((M=window.solana)!=null&&M.isPhantom){const K=await window.solana.connect();F(K.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const K=await window.solflare.connect();F(K.publicKey.toString());return}i()}catch(K){console.error("Failed to connect Solana wallet:",K),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}O(!1)},[i]);D.useEffect(()=>{var M,j;(M=window.solana)!=null&&M.publicKey?F(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&F(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let K,ne=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){O(!0),u(!1);return}ne=P||void 0,K=await iK(x.slug,50),console.log("Fetched Solana NFTs from collection:",K.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(j=K.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",K.data.map(oe=>({name:oe.name,owners:oe.owners,owner_of:oe.owner_of}))),K.data.some(oe=>oe.owners&&oe.owners.length>0)?(K.data=K.data.filter(oe=>{const ae=oe.owners.some(ue=>ue.owner_of&&ue.owner_of.toLowerCase()===P.toLowerCase());return ae&&console.log("Found owned NFT:",oe.name),ae}),console.log("NFTs after filtering:",K.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?K=await $L(x.slug,50,ne):K=await UL(x.slug,g,50,ne);c(K.data),b(K.totalPages),A(K.totalCount)}catch(K){K instanceof Error?h(K.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),D.useEffect(()=>{S&&G()},[S,G]);const B=M=>new Date(M).toLocaleDateString(),T=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},$=async M=>{if(x.api==="opensea"&&x.chain)try{const j=await sK(x.chain,M.address,M.token_id.toString()),K={...M,attributes:JSON.stringify(j.traits||[])};I(K)}catch(j){console.error("Failed to fetch full NFT details",j),I(M)}else I(M)},k=M=>{N(M),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(Z_,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:"✕"})]})]}),m.jsx("div",{className:s.collectionSelector,children:d7.map(M=>m.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>k(M),children:M.name},M.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{G()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{$(M)},children:[m.jsx(hJ,{src:dJ(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",M.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",T(M)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",B(M.created_at)]})]},M.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(M=>Math.min(y,M+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),_&&m.jsx(dAe,{nft:_,onClose:()=>I(null)})]}):null};var XA,J4e=new Uint8Array(16);function Z4e(){if(!XA&&(XA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!XA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return XA(J4e)}const X4e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function eFe(t){return typeof t=="string"&&X4e.test(t)}var ks=[];for(var ZO=0;ZO<256;++ZO)ks.push((ZO+256).toString(16).substr(1));function tFe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ks[t[e+0]]+ks[t[e+1]]+ks[t[e+2]]+ks[t[e+3]]+"-"+ks[t[e+4]]+ks[t[e+5]]+"-"+ks[t[e+6]]+ks[t[e+7]]+"-"+ks[t[e+8]]+ks[t[e+9]]+"-"+ks[t[e+10]]+ks[t[e+11]]+ks[t[e+12]]+ks[t[e+13]]+ks[t[e+14]]+ks[t[e+15]]).toLowerCase();if(!eFe(n))throw TypeError("Stringified UUID is invalid");return n}function nFe(t,e,n){t=t||{};var r=t.random||(t.rng||Z4e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,tFe(r)}const rFe=Yc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),sFe=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],iFe=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],ko=500;function wee(){const t=rFe(),e=D.useRef(null),[n,r]=D.useState(null),[s,i]=D.useState(""),[o,a]=D.useState(""),[c,l]=D.useState(50),[u,d]=D.useState(50),[h,f]=D.useState(!1),[p,g]=D.useState(!1),[w,y]=D.useState(!1),[b,v]=D.useState(!1),[A,_]=D.useState(!1),[I,x]=D.useState([]),[N,S]=D.useState(null),O=D.useRef(null),[P,F]=D.useState(null),G=async X=>{const ce=X.getContext("2d");if(!ce)return;ce.clearRect(0,0,X.width,X.height),n?await new Promise(ge=>{const be=new window.Image;be.crossOrigin="anonymous",be.onload=()=>{const Ze=Math.min(X.width/be.width,X.height/be.height),st=(X.width-be.width*Ze)/2,St=(X.height-be.height*Ze)/2;ce.drawImage(be,st,St,be.width*Ze,be.height*Ze),ge()},be.onerror=()=>ge(),be.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,X.width,X.height)),(ge=>{ge.textAlign="center",ge.strokeStyle="black",ge.lineWidth=3,ge.fillStyle="white";const be=(Ze,st)=>{const St=Ze.toUpperCase().split(" "),_t=[];let Kn=St[0];for(let kt=1;kt<St.length;kt++){const jr=St[kt];ge.measureText(Kn+" "+jr).width<st?Kn+=" "+jr:(_t.push(Kn),Kn=jr)}return _t.push(Kn),_t};if(s&&(ge.font=`${c}px Impact`,be(s,ko-20).forEach((st,St)=>{const _t=c+St*c*1.2;ge.strokeText(st,ko/2,_t),ge.fillText(st,ko/2,_t)})),o){ge.font=`${u}px Impact`;const Ze=be(o,ko-20);Ze.forEach((st,St)=>{const _t=ko-(Ze.length-St)*u*1.2+u;ge.strokeText(st,ko/2,_t),ge.fillText(st,ko/2,_t)})}})(ce),await Promise.all(I.map(ge=>new Promise(be=>{const Ze=new window.Image;Ze.src=ge.src,Ze.onload=()=>{ce.save(),ce.translate(ge.x,ge.y),ce.rotate(ge.rotation*Math.PI/180),ce.scale(ge.scale,ge.scale),ce.drawImage(Ze,-40,-40,80,80),ce.restore(),be()},Ze.onerror=()=>be()})));try{h&&B(X),p&&T(X),w&&R(X)}catch(ge){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ge),f(!1),g(!1),y(!1)}},B=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=ce.getImageData(0,0,X.width,X.height),ge=Ee.data;for(let be=0;be<ge.length;be+=4){const Ze=ge[be],st=ge[be+1],St=ge[be+2],_t=(Ze+st+St)/3,Kn=1.8;ge[be]=Math.min(255,_t+(Ze-_t)*Kn),ge[be+1]=Math.min(255,_t+(st-_t)*Kn*.7),ge[be+2]=Math.min(255,_t+(St-_t)*Kn*.4);const kt=1.3;ge[be]=Math.min(255,Math.max(0,ge[be]*kt)),ge[be+1]=Math.min(255,Math.max(0,ge[be+1]*kt)),ge[be+2]=Math.min(255,Math.max(0,ge[be+2]*kt))}ce.putImageData(Ee,0,0)},T=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=4,be=ce.getImageData(0,0,X.width,X.height).data,Ze=new Uint8ClampedArray(be);for(let st=0;st<X.height;st+=Ee)for(let St=0;St<X.width;St+=Ee){const _t=(st*X.width+St)*4,Kn=be[_t],kt=be[_t+1],jr=be[_t+2],Ft=be[_t+3];for(let zn=0;zn<Ee&&st+zn<X.height;zn++)for(let _r=0;_r<Ee&&St+_r<X.width;_r++){const zi=((st+zn)*X.width+(St+_r))*4;Ze[zi]=Kn,Ze[zi+1]=kt,Ze[zi+2]=jr,Ze[zi+3]=Ft}}ce.putImageData(new ImageData(Ze,X.width,X.height),0,0)},R=X=>{const ce=X.getContext("2d");if(!ce)return;const Ee=ce.getImageData(0,0,X.width,X.height),ge=Ee.data;for(let be=0;be<ge.length;be+=4){const Ze=(Math.random()-.5)*50;ge[be]=Math.max(0,Math.min(255,ge[be]+Ze)),ge[be+1]=Math.max(0,Math.min(255,ge[be+1]+Ze)),ge[be+2]=Math.max(0,Math.min(255,ge[be+2]+Ze))}ce.putImageData(Ee,0,0)};D.useEffect(()=>{e.current&&G(e.current)},[G]);const $=D.useRef(null),k=500,M=X=>{X.preventDefault(),$.current=setTimeout(()=>{const ce=e.current;ce&&(navigator.share?ce.toBlob(Ee=>{if(Ee){const ge=new File([Ee],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[ge]}).catch(()=>{ae()})}}):ae())},k)},j=()=>{$.current&&(clearTimeout($.current),$.current=null)},K=()=>{$.current&&(clearTimeout($.current),$.current=null)},ne=X=>{X.preventDefault()},le=X=>{var Ee;const ce=(Ee=X.target.files)==null?void 0:Ee[0];ce&&r(URL.createObjectURL(ce))},oe=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),y(!1)},ae=async()=>{const X=e.current;if(!X)return;await G(X);const ce=document.createElement("a");ce.download="meme.png",ce.href=X.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},ue=async X=>{_(!0),v(!1);try{console.log("Fetching NFTs for collection:",X);let ce;if(X.api==="opensea"){console.log("Using OpenSea API for:",X.slug);const Ee=await $L(X.slug,50);ce=Ee.data,console.log("OpenSea response:",Ee)}else if(X.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",X.slug);const Ee=await iK(X.slug,50);if(ce=Ee.data,console.log("Helius Solana response:",Ee),!ce||ce.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",X.slug);const Ee=await UL(X.slug,1,50);ce=Ee.data,console.log("Scatter response:",Ee)}if(ce&&ce.length>0){const Ee=ce[Math.floor(Math.random()*ce.length)],ge=Ee.image||Ee.image_url||Ee.image_url_shrunk;console.log("Selected NFT:",Ee),console.log("Image URL:",ge),r(ge)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{_(!1)}},Xe=X=>{const ce={id:nFe(),src:X,x:80,y:80,scale:1,rotation:0};x(Ee=>Ee.length>=2||Ee.some(ge=>ge.src===X&&!ge.id.startsWith("upload-"))?Ee:[...Ee,ce]),F(ce.id)},xe=X=>{var Ee;const ce=(Ee=X.target.files)==null?void 0:Ee[0];if(ce){const ge=URL.createObjectURL(ce);Xe(ge)}},Me=(X,ce,Ee)=>{x(ge=>ge.map(be=>{if(be.id!==X)return be;let Ze=be.x+ce/1.2,st=be.y+Ee/1.2;const St=40*be.scale,_t=40*be.scale;return Ze=Math.max(St,Math.min(ko-St,Ze)),st=Math.max(_t,Math.min(ko-_t,st)),{...be,x:Ze,y:st}}))},rt=(X,ce,Ee,ge,be)=>{x(Ze=>Ze.map(st=>{if(st.id!==X)return st;const St=st.x,_t=st.y,Kn=Math.atan2(be-_t,ge-St)*180/Math.PI;return{...st,rotation:Ee+(Kn-ce)*.5}}))},Rt=X=>{x(ce=>ce.filter(Ee=>Ee.id!==X))},Xt=(X,ce)=>{x(Ee=>Ee.map(ge=>ge.id===X?{...ge,scale:Math.max(.2,ge.scale*(1+(ce-1)*.2))}:ge))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(X=>!X),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:sFe.map(X=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{ue(X)},children:X.name},X.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:le})]}),A&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:X=>i(X.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:X=>l(Number(X.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:X=>a(X.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:X=>d(Number(X.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(X=>!X),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(X=>!X),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(X=>!X),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[iFe.map((X,ce)=>m.jsx("img",{src:X,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Xe(X)},X)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:O,onChange:xe})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:ae,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:oe,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:ko,height:ko,className:t.canvas,onTouchStart:M,onTouchEnd:j,onTouchMove:K,onContextMenu:ne,style:{touchAction:"none"}})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:ko,height:ko,pointerEvents:"none"},children:I.map(X=>P===X.id?m.jsxs("div",{style:{position:"absolute",left:X.x,top:X.y,width:80*X.scale,height:80*X.scale,transform:`rotate(${X.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{S(X.id),ce.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ce=>{N===X.id&&ce.buttons===1&&Me(X.id,ce.movementX,ce.movementY)},children:[m.jsx("img",{src:X.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var Kn;ce.stopPropagation();const Ee=(Kn=ce.currentTarget.parentElement)==null?void 0:Kn.getBoundingClientRect(),ge=Ee?Ee.left+Ee.width/2:0,be=Ee?Ee.top+Ee.height/2:0,Ze=Math.atan2(ce.clientY-be,ce.clientX-ge)*180/Math.PI,st=X.rotation,St=kt=>{rt(X.id,Ze,st,kt.clientX,kt.clientY)},_t=()=>{window.removeEventListener("mousemove",St),window.removeEventListener("mouseup",_t)};window.addEventListener("mousemove",St),window.addEventListener("mouseup",_t)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const Ee=ce.clientX,ge=Ze=>{const st=(Ze.clientX-Ee)/80;Xt(X.id,1+st)},be=()=>{window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",be)};window.addEventListener("mousemove",ge),window.addEventListener("mouseup",be)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Rt(X.id),children:"×"}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>F(null),children:"Place"})]},X.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function a_(){return a_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a_.apply(this,arguments)}var Fh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fh||(Fh={}));const h7="popstate";function oFe(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return o5("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:vee(s)}return cFe(e,n,null,t)}function cs(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function bee(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aFe(){return Math.random().toString(36).substr(2,8)}function f7(t,e){return{usr:t.state,key:t.key,idx:e}}function o5(t,e,n,r){return n===void 0&&(n=null),a_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Nb(e):e,{state:n,key:e&&e.key||r||aFe()})}function vee(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Nb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function cFe(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Fh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(a_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Fh.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=Fh.Push;let b=o5(g.location,w,y);l=u()+1;let v=f7(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=Fh.Replace;let b=o5(g.location,w,y);l=u();let v=f7(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:vee(w);return b=b.replace(/ $/,"%20"),cs(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(h7,d),c=w,()=>{s.removeEventListener(h7,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var p7;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(p7||(p7={}));function lFe(t,e,n){return n===void 0&&(n="/"),uFe(t,e,n)}function uFe(t,e,n,r){let s=typeof e=="string"?Nb(e):e,i=_ee(s.pathname||"/",n);if(i==null)return null;let o=Eee(t);dFe(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=_Fe(i);a=vFe(o[c],l)}return a}function Eee(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(cs(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=wg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(cs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Eee(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:wFe(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of Cee(i.path))s(i,o,c)}),e}function Cee(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Cee(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function dFe(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bFe(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hFe=/^:[\w-]+$/,fFe=3,pFe=2,gFe=1,mFe=10,yFe=-2,g7=t=>t==="*";function wFe(t,e){let n=t.split("/"),r=n.length;return n.some(g7)&&(r+=yFe),e&&(r+=pFe),n.filter(s=>!g7(s)).reduce((s,i)=>s+(hFe.test(i)?fFe:i===""?gFe:mFe),r)}function bFe(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vFe(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=EFe({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:wg([i,d.pathname]),pathnameBase:TFe(wg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=wg([i,d.pathnameBase]))}return o}function EFe(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CFe(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function CFe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),bee(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _Fe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return bee(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _ee(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function AFe(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Nb(t):t;return{pathname:n?n.startsWith("/")?n:SFe(n,e):e,search:RFe(r),hash:PFe(s)}}function SFe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function XO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xFe(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function IFe(t,e){let n=xFe(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NFe(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Nb(t):(s=a_({},t),cs(!s.pathname||!s.pathname.includes("?"),XO("?","pathname","search",s)),cs(!s.pathname||!s.pathname.includes("#"),XO("#","pathname","hash",s)),cs(!s.search||!s.search.includes("#"),XO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=AFe(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const wg=t=>t.join("/").replace(/\/\/+/g,"/"),TFe=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),RFe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PFe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OFe(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Aee=["post","put","patch","delete"];new Set(Aee);const kFe=["get",...Aee];new Set(kFe);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function c_(){return c_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c_.apply(this,arguments)}const s$=D.createContext(null),DFe=D.createContext(null),zT=D.createContext(null),HT=D.createContext(null),Tb=D.createContext({outlet:null,matches:[],isDataRoute:!1}),See=D.createContext(null);function GT(){return D.useContext(HT)!=null}function xee(){return GT()||cs(!1),D.useContext(HT).location}function Iee(t){D.useContext(zT).static||D.useLayoutEffect(t)}function MFe(){let{isDataRoute:t}=D.useContext(Tb);return t?KFe():LFe()}function LFe(){GT()||cs(!1);let t=D.useContext(s$),{basename:e,future:n,navigator:r}=D.useContext(zT),{matches:s}=D.useContext(Tb),{pathname:i}=xee(),o=JSON.stringify(IFe(s,n.v7_relativeSplatPath)),a=D.useRef(!1);return Iee(()=>{a.current=!0}),D.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=NFe(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:wg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function UFe(t,e){return $Fe(t,e)}function $Fe(t,e,n,r){GT()||cs(!1);let{navigator:s}=D.useContext(zT),{matches:i}=D.useContext(Tb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=xee(),u;if(e){var d;let w=typeof e=="string"?Nb(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||cs(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=lFe(t,{pathname:f}),g=zFe(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:wg([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:wg([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?D.createElement(HT.Provider,{value:{location:c_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Fh.Pop}},g):g}function BFe(){let t=VFe(),e=OFe(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:s},n):null,null)}const FFe=D.createElement(BFe,null);class jFe extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Tb.Provider,{value:this.props.routeContext},D.createElement(See.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WFe(t){let{routeContext:e,match:n,children:r}=t,s=D.useContext(s$);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Tb.Provider,{value:e},r)}function zFe(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||cs(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||FFe,c&&(l<0&&h===0?(YFe("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=D.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,D.createElement(WFe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?D.createElement(jFe,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Nee=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Nee||{}),Tee=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tee||{});function HFe(t){let e=D.useContext(s$);return e||cs(!1),e}function GFe(t){let e=D.useContext(DFe);return e||cs(!1),e}function qFe(t){let e=D.useContext(Tb);return e||cs(!1),e}function Ree(t){let e=qFe(),n=e.matches[e.matches.length-1];return n.route.id||cs(!1),n.route.id}function VFe(){var t;let e=D.useContext(See),n=GFe(),r=Ree();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function KFe(){let{router:t}=HFe(Nee.UseNavigateStable),e=Ree(Tee.UseNavigateStable),n=D.useRef(!1);return Iee(()=>{n.current=!0}),D.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,c_({fromRouteId:e},i)))},[t,e])}const m7={};function YFe(t,e,n){m7[t]||(m7[t]=!0)}function QFe(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function YS(t){cs(!1)}function JFe(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Fh.Pop,navigator:i,static:o=!1,future:a}=t;GT()&&cs(!1);let c=e.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:c,navigator:i,static:o,future:c_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=Nb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=D.useMemo(()=>{let w=_ee(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:D.createElement(zT.Provider,{value:l},D.createElement(HT.Provider,{children:n,value:g}))}function ZFe(t){let{children:e,location:n}=t;return UFe(a5(e),n)}new Promise(()=>{});function a5(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,s)=>{if(!D.isValidElement(r))return;let i=[...e,s];if(r.type===D.Fragment){n.push.apply(n,a5(r.props.children,i));return}r.type!==YS&&cs(!1),!r.props.index||!r.props.children||cs(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=a5(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const XFe="6";try{window.__reactRouterVersion=XFe}catch{}const eje="startTransition",y7=Cre[eje];function tje(t){let{basename:e,children:n,future:r,window:s}=t,i=D.useRef();i.current==null&&(i.current=oFe({window:s,v5Compat:!0}));let o=i.current,[a,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=D.useCallback(d=>{l&&y7?y7(()=>c(d)):c(d)},[c,l]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>QFe(r),[r]),D.createElement(JFe,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var w7;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(w7||(w7={}));var b7;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(b7||(b7={}));const nje=Yc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function rje(){const t=nje(),{open:e}=P1(),{address:n,isConnected:r}=wb(),s=Ja(),[i,o]=D.useState("pixelawbs-popup"),[a,c]=D.useState(new Set),[l,u]=D.useState(!1),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),y=MFe();D.useEffect(()=>{if(g){const B=setTimeout(()=>{console.log("[CHESS] Loading timeout reached, navigating directly"),w(!1),y("/chess")},5e3);return()=>clearTimeout(B)}},[g,y]);const b=D.useRef(null);D.useEffect(()=>{if(i==="halloween-popup"&&b.current){const B=b.current.querySelector("script[data-tiktok-embed]");B&&B.remove();const T=document.createElement("script");T.src="https://www.tiktok.com/embed.js",T.async=!0,T.setAttribute("data-tiktok-embed","true"),b.current.appendChild(T)}},[i]);const v=(B,T,R)=>{if(B==="url"&&R)window.open(R,"_blank");else if(B==="popup"&&T)o(T),c($=>{const k=new Set($);return k.delete(T),k}),document.body.offsetWidth;else if(B==="wallet")r?console.log("Wallet disconnect requested"):e();else if(B==="mint"){if(!n){alert("Please connect your wallet first!");return}if(s!==Jo.id){alert("Please switch to Ethereum mainnet to mint Pixelawbs. Current network: "+s);return}u(!0)}else B==="nft-gallery"?h(!0):B==="meme-generator"?p(!0):B==="chess"&&(console.log("[CHESS] Chess icon clicked, isConnected:",r),w(!0))},A=()=>o(null),_=B=>{c(T=>new Set(T).add(B)),o(null)},I=B=>{B==="mint-popup"?u(!0):B==="nft-gallery-popup"?h(!0):B==="meme-generator-popup"?p(!0):o(B),c(T=>{const R=new Set(T);return R.delete(B),R})},x=()=>u(!1),N=()=>h(!1),S=()=>p(!1),O=()=>{u(!1),c(B=>new Set(B).add("mint-popup"))},P=()=>{h(!1),c(B=>new Set(B).add("nft-gallery-popup"))},F=()=>{p(!1),c(B=>new Set(B).add("meme-generator-popup"))},G=m.jsxs("div",{onClick:()=>{r?console.log("Wallet disconnect requested"):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:r?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),r?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[g&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{w(!1),y("/chess")},onError:()=>{console.log("[CHESS] Video failed to load, navigating directly"),w(!1),y("/chess")}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(sye,{onIconClick:v}),m.jsx(oye,{minimizedWindows:Array.from(a),onRestoreWindow:I,walletButton:G,connectionStatus:{connected:r,address:n,ens:void 0}}),m.jsxs(va,{id:"chat-popup",isOpen:i==="chat-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(va,{id:"purity-popup",isOpen:i==="purity-popup",onClose:A,onMinimize:_,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(va,{id:"lawbstarz-popup",isOpen:i==="lawbstarz-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following 🧵 has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: “Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]}),"— wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(va,{id:"lawbstation-popup",isOpen:i==="lawbstation-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(va,{id:"nexus-popup",isOpen:i==="nexus-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(va,{id:"lawbsters-popup",isOpen:i==="lawbsters-popup",onClose:A,onMinimize:_,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(Ife,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(va,{id:"pixelawbs-popup",isOpen:i==="pixelawbs-popup",onClose:A,onMinimize:_,children:(()=>{const B=T=>{T.preventDefault(),o(null),u(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:B,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(va,{id:"halloween-popup",isOpen:i==="halloween-popup",onClose:A,onMinimize:_,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:b,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore 🦞🎃 minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:"♬ original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:"♬ original sound - wables.eth"})]})})})]}),m.jsxs(va,{id:"lawb-popup",isOpen:i==="lawb-popup",onClose:A,onMinimize:_,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(cAe,{isOpen:l,onClose:x,onMinimize:O,walletAddress:n||""}),m.jsx(Q4e,{isOpen:d,onClose:N,onMinimize:P,walletAddress:n}),m.jsx(va,{id:"meme-generator-popup",isOpen:f,onClose:S,onMinimize:F,children:m.jsx(wee,{})})]})}const sje=Yc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),v7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],ije=({onBack:t,walletAddress:e})=>{const n=sje(),{open:r}=P1(),[s,i]=D.useState([]),[o,a]=D.useState(!0),[c,l]=D.useState(null),[u,d]=D.useState(v7[0]),[h,f]=D.useState(!1),[p,g]=D.useState(null),[w,y]=D.useState("all"),[b,v]=D.useState(null),A=D.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const O=await window.solana.connect();g(O.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const O=await window.solflare.connect();g(O.publicKey.toString());return}r()}catch(O){console.error("Failed to connect Solana wallet:",O),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);D.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),D.useEffect(()=>{(async()=>{a(!0);try{let S,O=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}O=p,S=await aye(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await $L(u.slug,100,O):S=await UL(u.slug,1,100,O);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some(F=>F.owners&&F.owners.length>0)?S.data=S.data.filter(F=>F.owners.some(B=>B.owner_of&&B.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),D.useEffect(()=>{h&&A()},[h,A]);const _=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await sK(u.chain,N.address,N.token_id.toString()),O={...N,attributes:JSON.stringify(S.traits||[])};l(O)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},I=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:N.map((S,O)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},O))})]})},x=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:v7.map(N=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void _(N),children:[m.jsx("img",{src:S,alt:N.name,onError:O=>{O.currentTarget.src!==N.image_url&&N.image_url?O.currentTarget.src=N.image_url:O.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?O.currentTarget.src=N.image_url_shrunk:O.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:N.name})]},N.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?I():x()})]})},oje=Yc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),pc=({isOpen:t,onClose:e,title:n,children:r})=>{const s=oje();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:"✕"})]}),m.jsx("div",{className:s.content,children:r})]})}):null},aje=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=D.useState([]),[i,o]=D.useState(!1),[a,c]=D.useState(!1),[l,u]=D.useState({}),[d,h]=D.useState(null),{data:f}=oAe(),p=Ja(),{switchChain:g}=TU();D.useEffect(()=>{t&&n&&w()},[t,n]);const w=async()=>{if(o(!0),h(null),p!==Jo.id){h(`Please switch to Ethereum mainnet to mint Pixelawbs. Current network: ${p}`),o(!1);return}try{const I=await nK(n);s(I);const x={};I.forEach(N=>{x[N.id]=0}),u(x)}catch(I){h(I.message)}finally{o(!1)}},y=(I,x)=>{u(N=>({...N,[I]:Math.max(0,x)}))},b=async()=>{const I=Object.entries(l).filter(([,x])=>x>0).map(([x,N])=>({id:x,quantity:N}));if(I.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}if(p!==Jo.id){h("Please switch to Ethereum mainnet to mint Pixelawbs");return}c(!0),h(null);try{const x=await rK(n,I);if(x.success&&x.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const N=await f.sendTransaction({to:x.mintTransaction.to,value:BigInt(x.mintTransaction.value),data:x.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){h("Transaction failed: "+N.message)}}else throw new Error(x.message||"Could not retrieve minting transaction.")}catch(x){h("Minting failed: "+x.message)}finally{c(!1)}},v=(I,x)=>`${parseFloat(I)} ${x}`,A={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},_={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(pc,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsxs("div",{style:_,children:[d,p!==Jo.id&&m.jsx("div",{style:{marginTop:"10px"},children:m.jsx("button",{onClick:()=>g({chainId:Jo.id}),style:{backgroundColor:"#008000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Switch to Ethereum"})})]}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(I=>m.jsxs("div",{style:A,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:I.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",v(I.token_price,I.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",I.wallet_limit===4294967295?"Unlimited":I.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:I.wallet_limit===4294967295?void 0:I.wallet_limit,value:l[I.id]||"",onChange:x=>y(I.id,parseInt(x.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},I.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:b,disabled:a,children:a?"Minting...":"Mint"})]})]})},cje=Yc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),lje=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],uje=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],dje=()=>{const t=cje(),{open:e}=P1(),{address:n,isConnected:r}=wb(),{isPending:s}=tAe(),{disconnect:i}=rAe(),{data:o}=sAe({address:n}),[a,c]=D.useState("main"),[l,u]=D.useState(!1),[d,h]=D.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),[v,A]=D.useState(!1),[_,I]=D.useState(!1),[x,N]=D.useState(!1),[S,O]=D.useState(!1),[P,F]=D.useState(!1),[G,B]=D.useState(!1),[T,R]=D.useState(!1),[$,k]=D.useState(!1),[M,j]=D.useState(!1),K=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>I(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],ne=ae=>{ae.disabled||ae.action()};if(D.useEffect(()=>{const ae=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ae)},[]),D.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(ije,{onBack:()=>c("main"),walletAddress:n||void 0});function le({open:ae,onClose:ue,title:Xe,nfts:xe}){const Me=rt=>{switch(rt){case"lawbsters":N(!0);break;case"lawbstarz":O(!0);break;case"pixelawbs":F(!0);break;case"halloween":B(!0);break;case"lawbstation":R(!0);break;case"nexus":k(!0);break}};return m.jsx(pc,{isOpen:ae,onClose:ue,title:Xe,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:xe.map(rt=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>Me(rt.id),children:[m.jsx("img",{src:rt.image,alt:rt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:rt.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:rt.description})]},rt.id))})})}function oe({open:ae,onClose:ue}){return ae?m.jsxs(pc,{isOpen:ae,onClose:ue,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"🦞 $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:K.map(ae=>m.jsxs("div",{className:t.icon,onClick:()=>ne(ae),children:[m.jsx("img",{src:ae.icon,alt:ae.label}),m.jsx("span",{children:ae.label})]},ae.label))}),l&&m.jsxs(pc,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:ae=>ae.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(aje,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(le,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:lje}),m.jsx(le,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:uje}),m.jsx(oe,{open:_,onClose:()=>I(!1)}),m.jsxs(pc,{isOpen:x,onClose:()=>N(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(pc,{isOpen:S,onClose:()=>O(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["☆ LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER ☆ 666x PREMIUM PFP COLLECTION ☆ LAWBSTARZ IS A MUSIC NFT ☆ LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE ☆ LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"})," ☆ LED BY NETWORK SPIRITUALITY ☆ 666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 ☆"]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(pc,{isOpen:P,onClose:()=>F(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{F(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(pc,{isOpen:G,onClose:()=>B(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(pc,{isOpen:T,onClose:()=>R(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(pc,{isOpen:$,onClose:()=>k(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(pc,{isOpen:M,onClose:()=>j(!1),title:"Meme Generator",children:m.jsx(wee,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function hje(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=D.useState(e(t));function s(){r(e(t))}return D.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const MI={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},LI={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz"]},public:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},fje=KQ({chains:[Jo,uI,MI,LI],transports:{[Jo.id]:$a(),[uI.id]:$a(),[MI.id]:$a("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[LI.id]:$a("https://mainnet.sanko.xyz")}}),i$=()=>{if(!Sx)throw new Error("[FIREBASE] Database not initialized");return Sx},Qg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,UI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=i$(),s=to(r,`leaderboard/${t}`),i=await lp(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await iE(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",Qg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},pje=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:Qg(e),redPlayer:Qg(n)}),await UI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await UI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},Pee=async(t=20)=>{try{const e=i$(),n=to(e,"leaderboard"),r=await lp(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},Oee=async()=>{try{const t=i$(),e=to(t,"leaderboard/0x0000000000000000000000000000000000000000");return await JH(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},dc=()=>{if(!Sx)throw new Error("[FIREBASE] Database not initialized");return Sx},ri={async getGame(t){try{const e=dc(),n=to(e,`chess_games/${t}`),r=await lp(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=dc(),r=to(n,`chess_games/${t}`);await fce(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=dc(),r=to(n,`chess_games/${t}`);return zB(r,i=>{if(i.exists()){const o=i.val();e(o)}})}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=dc(),r=to(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await iE(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await lp(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async createGameFromTransaction(t,e,n,r){try{const s=dc(),i=to(s,`chess_games/${t}`);let o="DMT";n==="0x754cDAd6f5821077d6915004Be2cE05f93d176f8"?o="DMT":n==="0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"?o="LAWB":n==="0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D"?o="GOLD":n==="0xeA240b96A9621e67159c59941B9d588eb290ef09"&&(o="MOSS");const a={invite_code:t,game_title:`Chess Game ${t.slice(-6)}`,bet_amount:r,bet_token:o,blue_player:e,red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting",board:{positions:{"0,0":"R","0,1":"N","0,2":"B","0,3":"Q","0,4":"K","0,5":"B","0,6":"N","0,7":"R","1,0":"P","1,1":"P","1,2":"P","1,3":"P","1,4":"P","1,5":"P","1,6":"P","1,7":"P","6,0":"p","6,1":"p","6,2":"p","6,3":"p","6,4":"p","6,5":"p","6,6":"p","6,7":"p","7,0":"r","7,1":"n","7,2":"b","7,3":"q","7,4":"k","7,5":"b","7,6":"n","7,7":"r"},rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56",is_public:!0,created_at:new Date().toISOString()};return await iE(i,a),console.log("[FIREBASE] Game created from transaction:",t,"with token:",o),a}catch(s){throw console.error("[FIREBASE] Error creating game from transaction:",s),s}},async getActiveGames(){try{const t=dc(),e=to(t,"chess_games"),n=await lp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=dc(),e=to(t,"chess_games"),n=await lp(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r),console.log("[FIREBASE] Number of total games:",Object.keys(r||{}).length),r&&Object.keys(r).forEach(i=>{const o=r[i];console.log("[FIREBASE] Game details:",{inviteCode:o.invite_code,gameState:o.game_state,isPublic:o.is_public,redPlayer:o.red_player,bluePlayer:o.blue_player,createdAt:o.created_at})});const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting"||i.game_state==="active",a=i.is_public!==!1,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000",l=i.game_state==="waiting"||i.game_state==="active"||i.game_state===void 0;return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,originalIsPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,isPublic:a,noRedPlayer:c,hasValidState:l,passes:l&&a&&c}),l&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=dc(),n=to(e,`chess_games/${t}`);await JH(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=dc(),n=to(e,`leaderboard/${t.username}`);await iE(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=dc(),e=to(t,"leaderboard"),n=await lp(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=dc(),n=to(e,"leaderboard");return zB(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},gje="6.15.0";function mje(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function Ai(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function yt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&mje(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Uy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Uy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Uy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Uy(r,e)}: ${Uy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function js(t,e){return t&&t.code===e}function o$(t){return js(t,"CALL_EXCEPTION")}function fr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Uy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Uy(a))}}i.push(`code=${e}`),i.push(`version=${gje}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return yt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&yt(s,{shortMessage:r}),s}function me(t,e,n,r){if(!t)throw fr(e,n,r)}function Z(t,e,n,r){me(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function kee(t,e,n){n==null&&(n=""),n&&(n=": "+n),me(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),me(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"é".normalize("NFD")!=="é")throw new Error("broken");t.push(e)}catch{}return t},[]);function qT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Dee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Z(!1,"invalid BytesLike value",e||"value",t)}function Kt(t,e){return Dee(t,e,!1)}function Ni(t,e){return Dee(t,e,!0)}function sr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function a$(t){return sr(t,!0)||t instanceof Uint8Array}const E7="0123456789abcdef";function De(t){const e=Kt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=E7[(s&240)>>4]+E7[s&15]}return n}function Or(t){return"0x"+t.map(e=>De(e).substring(2)).join("")}function r0(t){return sr(t,!0)?(t.length-2)/2:Kt(t).length}function Ir(t,e,n){const r=Kt(t);return n!=null&&n>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),De(r.slice(e??0,n??r.length))}function Mee(t,e,n){const r=Kt(t);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),De(s)}function wd(t,e){return Mee(t,e,!0)}function yje(t,e){return Mee(t,e,!1)}const VT=BigInt(0),Dc=BigInt(1),$y=9007199254740991;function wje(t,e){const n=KT(t,"value"),r=BigInt(Yt(e,"width"));if(me(n>>r===VT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Dc){const s=(Dc<<r)-Dc;return-((~n&s)+Dc)}return n}function Lee(t,e){let n=Je(t,"value");const r=BigInt(Yt(e,"width")),s=Dc<<r-Dc;if(n<VT){n=-n,me(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Dc<<r)-Dc;return(~n&i)+Dc}else me(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Hv(t,e){const n=KT(t,"value"),r=BigInt(Yt(e,"bits"));return n&(Dc<<r)-Dc}function Je(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-$y&&t<=$y,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function KT(t,e){const n=Je(t,e);return me(n>=VT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const C7="0123456789abcdef";function c$(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=C7[n>>4],e+=C7[n&15];return BigInt(e)}return Je(t)}function Yt(t,e){switch(typeof t){case"bigint":return Z(t>=-$y&&t<=$y,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-$y&&t<=$y,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Yt(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function bje(t){return Yt(c$(t))}function If(t,e){let r=KT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Yt(e,"width");for(me(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function os(t){const e=KT(t,"value");if(e===VT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Tc(t){let e=De(a$(t)?t:os(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const _7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const A7=BigInt(58);function vje(t){const e=Kt(t);let n=c$(e),r="";for(;n;)r=_7[Number(n%A7)]+r,n/=A7;for(let s=0;s<e.length&&!e[s];s++)r=_7[0]+r;return r}function Eje(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Kt(e)}function Cje(t){const e=Kt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var E0;class Uee{constructor(e,n,r){te(this,"filter");te(this,"emitter");Q(this,E0);L(this,E0,n),yt(this,{emitter:e,filter:r})}async removeListener(){C(this,E0)!=null&&await this.emitter.off(this.filter,C(this,E0))}}E0=new WeakMap;function _je(t,e,n,r,s){Z(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function $ee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function Aje(t,e,n,r,s){return t==="OVERLONG"?(Z(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),$ee(t,e,n))}const Sje=Object.freeze({error:_je,ignore:$ee,replace:Aje});function xje(t,e){e==null&&(e=Sje.error);const n=Kt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function id(t,e){Z(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Z(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function Ije(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function $I(t,e){return Ije(xje(t,e))}function Bee(t){async function e(n,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();me(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),me(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=fr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=fr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const Nje=12,Tje=250;let S7=Bee();const Rje=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Pje=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let e2=!1;async function Fee(t,e){try{const n=t.match(Rje);if(!n)throw new Error("invalid data");return new pf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?Eje(n[3]):kje(n[3]))}catch{return new pf(599,"BAD REQUEST (invalid data: URI)",{},null,new Nf(t))}}function jee(t){async function e(n,r){try{const s=n.match(Pje);if(!s)throw new Error("invalid link");return new Nf(`${t}${s[2]}`)}catch{return new pf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Nf(n))}}return e}const eS={data:Fee,ipfs:jee("https://gateway.ipfs.io/ipfs/")},Wee=new WeakMap;var Gp,yh;class Oje{constructor(e){Q(this,Gp);Q(this,yh);L(this,Gp,[]),L(this,yh,!1),Wee.set(e,()=>{if(!C(this,yh)){L(this,yh,!0);for(const n of C(this,Gp))setTimeout(()=>{n()},0);L(this,Gp,[])}})}addListener(e){me(!C(this,yh),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),C(this,Gp).push(e)}get cancelled(){return C(this,yh)}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}Gp=new WeakMap,yh=new WeakMap;function tS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var C0,_0,Ec,Ou,A0,S0,ps,jo,ku,qp,Vp,Kp,ml,Cc,wh,Yp,Gv;const XI=class XI{constructor(e){Q(this,Yp);Q(this,C0);Q(this,_0);Q(this,Ec);Q(this,Ou);Q(this,A0);Q(this,S0);Q(this,ps);Q(this,jo);Q(this,ku);Q(this,qp);Q(this,Vp);Q(this,Kp);Q(this,ml);Q(this,Cc);Q(this,wh);L(this,S0,String(e)),L(this,C0,!1),L(this,_0,!0),L(this,Ec,{}),L(this,Ou,""),L(this,A0,3e5),L(this,Cc,{slotInterval:Tje,maxAttempts:Nje}),L(this,wh,null)}get url(){return C(this,S0)}set url(e){L(this,S0,String(e))}get body(){return C(this,ps)==null?null:new Uint8Array(C(this,ps))}set body(e){if(e==null)L(this,ps,void 0),L(this,jo,void 0);else if(typeof e=="string")L(this,ps,id(e)),L(this,jo,"text/plain");else if(e instanceof Uint8Array)L(this,ps,e),L(this,jo,"application/octet-stream");else if(typeof e=="object")L(this,ps,id(JSON.stringify(e))),L(this,jo,"application/json");else throw new Error("invalid body")}hasBody(){return C(this,ps)!=null}get method(){return C(this,Ou)?C(this,Ou):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),L(this,Ou,String(e).toUpperCase())}get headers(){const e=Object.assign({},C(this,Ec));return C(this,ku)&&(e.authorization=`Basic ${Cje(id(C(this,ku)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&C(this,jo)&&(e["content-type"]=C(this,jo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){C(this,Ec)[String(e).toLowerCase()]=String(n)}clearHeaders(){L(this,Ec,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return C(this,ku)||null}setCredentials(e,n){Z(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),L(this,ku,`${e}:${n}`)}get allowGzip(){return C(this,_0)}set allowGzip(e){L(this,_0,!!e)}get allowInsecureAuthentication(){return!!C(this,C0)}set allowInsecureAuthentication(e){L(this,C0,!!e)}get timeout(){return C(this,A0)}set timeout(e){Z(e>=0,"timeout must be non-zero","timeout",e),L(this,A0,e)}get preflightFunc(){return C(this,qp)||null}set preflightFunc(e){L(this,qp,e)}get processFunc(){return C(this,Vp)||null}set processFunc(e){L(this,Vp,e)}get retryFunc(){return C(this,Kp)||null}set retryFunc(e){L(this,Kp,e)}get getUrlFunc(){return C(this,wh)||S7}set getUrlFunc(e){L(this,wh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${C(this,ps)?De(C(this,ps)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(C(this,Cc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(C(this,Cc).maxAttempts=e.maxAttempts)}send(){return me(C(this,ml)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),L(this,ml,new Oje(this)),he(this,Yp,Gv).call(this,0,x7()+this.timeout,0,this,new pf(0,"",{},null,this))}cancel(){me(C(this,ml)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Wee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new XI(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,L(s,Ec,Object.assign({},C(this,Ec))),C(this,ps)&&L(s,ps,new Uint8Array(C(this,ps))),L(s,jo,C(this,jo)),s}clone(){const e=new XI(this.url);return L(e,Ou,C(this,Ou)),C(this,ps)&&L(e,ps,C(this,ps)),L(e,jo,C(this,jo)),L(e,Ec,Object.assign({},C(this,Ec))),L(e,ku,C(this,ku)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),L(e,qp,C(this,qp)),L(e,Vp,C(this,Vp)),L(e,Kp,C(this,Kp)),L(e,Cc,Object.assign({},C(this,Cc))),L(e,wh,C(this,wh)),e}static lockConfig(){e2=!0}static getGateway(e){return eS[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(e2)throw new Error("gateways locked");eS[e]=n}static registerGetUrl(e){if(e2)throw new Error("gateways locked");S7=e}static createGetUrlFunc(e){return Bee(e)}static createDataGateway(){return Fee}static createIpfsGatewayFunc(e){return jee(e)}};C0=new WeakMap,_0=new WeakMap,Ec=new WeakMap,Ou=new WeakMap,A0=new WeakMap,S0=new WeakMap,ps=new WeakMap,jo=new WeakMap,ku=new WeakMap,qp=new WeakMap,Vp=new WeakMap,Kp=new WeakMap,ml=new WeakMap,Cc=new WeakMap,wh=new WeakMap,Yp=new WeakSet,Gv=async function(e,n,r,s,i){var u,d,h;if(e>=C(this,Cc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");me(x7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Dje(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in eS){const f=await eS[a](o.url,tS(C(s,ml)));if(f instanceof pf){let p=f;if(this.processFunc){tS(C(s,ml));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,tS(C(s,ml)));let l=new pf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return he(u=o.redirect(f),Yp,Gv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=C(this,Cc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),he(d=o.clone(),Yp,Gv).call(d,e+1,n,p,s,l)}if(this.processFunc){tS(C(s,ml));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=C(this,Cc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),he(h=o.clone(),Yp,Gv).call(h,e+1,n,p,s,l)}}return l};let Nf=XI;var x_,I_,N_,Wo,x0,Qp;const R$=class R${constructor(e,n,r,s,i){Q(this,x_);Q(this,I_);Q(this,N_);Q(this,Wo);Q(this,x0);Q(this,Qp);L(this,x_,e),L(this,I_,n),L(this,N_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),L(this,Wo,s==null?null:new Uint8Array(s)),L(this,x0,i||null),L(this,Qp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${C(this,Wo)?De(C(this,Wo)):"null"}>`}get statusCode(){return C(this,x_)}get statusMessage(){return C(this,I_)}get headers(){return Object.assign({},C(this,N_))}get body(){return C(this,Wo)==null?null:new Uint8Array(C(this,Wo))}get bodyText(){try{return C(this,Wo)==null?"":$I(C(this,Wo))}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new R$(599,r,this.headers,this.body,C(this,x0)||void 0);return L(s,Qp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Z(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw yt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return C(this,Wo)!=null}get request(){return C(this,x0)}ok(){return C(this,Qp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=C(this,Qp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{C(this,Wo)&&(s=$I(C(this,Wo)))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};x_=new WeakMap,I_=new WeakMap,N_=new WeakMap,Wo=new WeakMap,x0=new WeakMap,Qp=new WeakMap;let pf=R$;function x7(){return new Date().getTime()}function kje(t){return id(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Dje(t){return new Promise(e=>setTimeout(e,t))}function Mje(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function I7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function N7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=zee(t,n);s.push(i.result),n+=i.consumed,me(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function zee(t,e){me(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{me(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=I7(t,e+1,r);return n(e+1+r+s),N7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),N7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=I7(t,e+1,r);n(e+1+r+s);const i=De(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=De(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Mje(t[e])}}function O1(t){const e=Kt(t,"data"),n=zee(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function T7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Hee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Hee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=T7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Kt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=T7(e.length);return n.unshift(183+n.length),n.concat(e)}const R7="0123456789abcdef";function Tf(t){let e="0x";for(const n of Hee(t))e+=R7[n>>4],e+=R7[n&15];return e}const Ri=32,c5=new Uint8Array(Ri),Lje=["then"],nS={},Gee=new WeakMap;function gp(t){return Gee.get(t)}function P7(t,e){Gee.set(t,e)}function _v(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function l5(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof zw?l5(gp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof zw&&(o=l5(gp(o),o,n)),r[s]=o),r},{})}var I0;const By=class By extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==nS&&(s=n,i=[],o=!1);super(s.length);Q(this,I0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(P7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),L(this,I0,[]),C(this,I0)==null&&C(this,I0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Yt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&_v(`index ${f}`,p),p}if(Lje.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return P7(c,gp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&_v(`index ${i}`,s),n&&s instanceof By&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=gp(this);return r.reduce((s,i,o)=>(me(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),l5(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=gp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new By(nS,i,o)}filter(n,r){const s=gp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&_v(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new By(nS,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&_v(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=gp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&_v(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new By(nS,n,r)}};I0=new WeakMap;let zw=By;function O7(t){let e=os(t);return me(e.length<=Ri,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Ri,offset:e.length}),e.length!==Ri&&(e=Ni(Or([c5.slice(e.length%Ri),e]))),e}class Ad{constructor(e,n,r,s){te(this,"name");te(this,"type");te(this,"localName");te(this,"dynamic");yt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Z(!1,e,this.localName,n)}}var Du,Jp,N0,QS;class u5{constructor(){Q(this,N0);Q(this,Du);Q(this,Jp);L(this,Du,[]),L(this,Jp,0)}get data(){return Or(C(this,Du))}get length(){return C(this,Jp)}appendWriter(e){return he(this,N0,QS).call(this,Ni(e.data))}writeBytes(e){let n=Ni(e);const r=n.length%Ri;return r&&(n=Ni(Or([n,c5.slice(r)]))),he(this,N0,QS).call(this,n)}writeValue(e){return he(this,N0,QS).call(this,O7(e))}writeUpdatableValue(){const e=C(this,Du).length;return C(this,Du).push(c5),L(this,Jp,C(this,Jp)+Ri),n=>{C(this,Du)[e]=O7(n)}}}Du=new WeakMap,Jp=new WeakMap,N0=new WeakSet,QS=function(e){return C(this,Du).push(e),L(this,Jp,C(this,Jp)+e.length),e.length};var io,zo,Zp,Xp,bh,tm,h5,qee;const P$=class P${constructor(e,n,r){Q(this,tm);te(this,"allowLoose");Q(this,io);Q(this,zo);Q(this,Zp);Q(this,Xp);Q(this,bh);yt(this,{allowLoose:!!n}),L(this,io,Ni(e)),L(this,Zp,0),L(this,Xp,null),L(this,bh,r??1024),L(this,zo,0)}get data(){return De(C(this,io))}get dataLength(){return C(this,io).length}get consumed(){return C(this,zo)}get bytes(){return new Uint8Array(C(this,io))}subReader(e){const n=new P$(C(this,io).slice(C(this,zo)+e),this.allowLoose,C(this,bh));return L(n,Xp,this),n}readBytes(e,n){let r=he(this,tm,qee).call(this,0,e,!!n);return he(this,tm,h5).call(this,e),L(this,zo,C(this,zo)+r.length),r.slice(0,e)}readValue(){return c$(this.readBytes(Ri))}readIndex(){return bje(this.readBytes(Ri))}};io=new WeakMap,zo=new WeakMap,Zp=new WeakMap,Xp=new WeakMap,bh=new WeakMap,tm=new WeakSet,h5=function(e){var n;if(C(this,Xp))return he(n=C(this,Xp),tm,h5).call(n,e);L(this,Zp,C(this,Zp)+e),me(C(this,bh)<1||C(this,Zp)<=C(this,bh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${C(this,bh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Ni(C(this,io)),offset:C(this,zo),length:e,info:{bytesRead:C(this,Zp),dataLength:this.dataLength}})},qee=function(e,n,r){let s=Math.ceil(n/Ri)*Ri;return C(this,zo)+s>C(this,io).length&&(this.allowLoose&&r&&C(this,zo)+n<=C(this,io).length?s=n:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Ni(C(this,io)),length:C(this,io).length,offset:C(this,zo)+s})),C(this,io).slice(C(this,zo),C(this,zo)+s)};let d5=P$;function BI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function l$(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Uje(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");BI(t.outputLen),BI(t.blockLen)}function Hw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Vee(t,e){l$(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const t2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kee=t=>t instanceof Uint8Array,$je=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),n2=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),ol=(t,e)=>t<<32-e|t>>>e,Bje=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Bje)throw new Error("Non little-endian hardware is not supported");function Fje(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function YT(t){if(typeof t=="string"&&(t=Fje(t)),!Kee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function jje(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!Kee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class u${clone(){return this._cloneInto()}}function d$(t){const e=r=>t().update(YT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Wje(t=32){if(t2&&typeof t2.getRandomValues=="function")return t2.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Yee extends u${constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Uje(e);const r=YT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Hw(this),this.iHash.update(e),this}digestInto(e){Hw(this),l$(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Qee=(t,e,n)=>new Yee(t,e).update(n).digest();Qee.create=(t,e)=>new Yee(t,e);function zje(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class Jee extends u${constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=n2(this.buffer)}update(e){Hw(this);const{view:n,buffer:r,blockLen:s}=this;e=YT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=n2(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Hw(this),Vee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;zje(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=n2(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Hje=(t,e,n)=>t&e^~t&n,Gje=(t,e,n)=>t&e^t&n^e&n,qje=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fd=new Uint32Array(64);class Vje extends Jee{constructor(){super(64,32,8,!1),this.A=Bd[0]|0,this.B=Bd[1]|0,this.C=Bd[2]|0,this.D=Bd[3]|0,this.E=Bd[4]|0,this.F=Bd[5]|0,this.G=Bd[6]|0,this.H=Bd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Fd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Fd[d-15],f=Fd[d-2],p=ol(h,7)^ol(h,18)^h>>>3,g=ol(f,17)^ol(f,19)^f>>>10;Fd[d]=g+Fd[d-7]+p+Fd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=ol(a,6)^ol(a,11)^ol(a,25),f=u+h+Hje(a,c,l)+qje[d]+Fd[d]|0,g=(ol(r,2)^ol(r,13)^ol(r,22))+Gje(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Fd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Zee=d$(()=>new Vje),rS=BigInt(2**32-1),f5=BigInt(32);function Xee(t,e=!1){return e?{h:Number(t&rS),l:Number(t>>f5&rS)}:{h:Number(t>>f5&rS)|0,l:Number(t&rS)|0}}function ete(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Xee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Kje=(t,e)=>BigInt(t>>>0)<<f5|BigInt(e>>>0),Yje=(t,e,n)=>t>>>n,Qje=(t,e,n)=>t<<32-n|e>>>n,Jje=(t,e,n)=>t>>>n|e<<32-n,Zje=(t,e,n)=>t<<32-n|e>>>n,Xje=(t,e,n)=>t<<64-n|e>>>n-32,e9e=(t,e,n)=>t>>>n-32|e<<64-n,t9e=(t,e)=>e,n9e=(t,e)=>t,tte=(t,e,n)=>t<<n|e>>>32-n,nte=(t,e,n)=>e<<n|t>>>32-n,rte=(t,e,n)=>e<<n-32|t>>>64-n,ste=(t,e,n)=>t<<n-32|e>>>64-n;function r9e(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const s9e=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),i9e=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,o9e=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),a9e=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,c9e=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),l9e=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Wt={fromBig:Xee,split:ete,toBig:Kje,shrSH:Yje,shrSL:Qje,rotrSH:Jje,rotrSL:Zje,rotrBH:Xje,rotrBL:e9e,rotr32H:t9e,rotr32L:n9e,rotlSH:tte,rotlSL:nte,rotlBH:rte,rotlBL:ste,add:r9e,add3L:s9e,add3H:i9e,add4L:o9e,add4H:a9e,add5H:l9e,add5L:c9e},[u9e,d9e]=Wt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),jd=new Uint32Array(80),Wd=new Uint32Array(80);class h9e extends Jee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)jd[v]=e.getUint32(n),Wd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=jd[v-15]|0,_=Wd[v-15]|0,I=Wt.rotrSH(A,_,1)^Wt.rotrSH(A,_,8)^Wt.shrSH(A,_,7),x=Wt.rotrSL(A,_,1)^Wt.rotrSL(A,_,8)^Wt.shrSL(A,_,7),N=jd[v-2]|0,S=Wd[v-2]|0,O=Wt.rotrSH(N,S,19)^Wt.rotrBH(N,S,61)^Wt.shrSH(N,S,6),P=Wt.rotrSL(N,S,19)^Wt.rotrBL(N,S,61)^Wt.shrSL(N,S,6),F=Wt.add4L(x,P,Wd[v-7],Wd[v-16]),G=Wt.add4H(F,I,O,jd[v-7],jd[v-16]);jd[v]=G|0,Wd[v]=F|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=Wt.rotrSH(d,h,14)^Wt.rotrSH(d,h,18)^Wt.rotrBH(d,h,41),_=Wt.rotrSL(d,h,14)^Wt.rotrSL(d,h,18)^Wt.rotrBL(d,h,41),I=d&f^~d&g,x=h&p^~h&w,N=Wt.add5L(b,_,x,d9e[v],Wd[v]),S=Wt.add5H(N,y,A,I,u9e[v],jd[v]),O=N|0,P=Wt.rotrSH(r,s,28)^Wt.rotrBH(r,s,34)^Wt.rotrBH(r,s,39),F=Wt.rotrSL(r,s,28)^Wt.rotrBL(r,s,34)^Wt.rotrBL(r,s,39),G=r&i^r&a^i&a,B=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Wt.add(l|0,u|0,S|0,O|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const T=Wt.add3L(O,F,B);r=Wt.add3H(T,S,P,G),s=T|0}({h:r,l:s}=Wt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Wt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Wt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Wt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Wt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Wt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Wt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Wt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){jd.fill(0),Wd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const f9e=d$(()=>new h9e);function p9e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const k7=p9e();k7.crypto||k7.msCrypto;function g9e(t){switch(t){case"sha256":return Zee.create();case"sha512":return f9e.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}const[ite,ote,ate]=[[],[],[]],m9e=BigInt(0),Av=BigInt(1),y9e=BigInt(2),w9e=BigInt(7),b9e=BigInt(256),v9e=BigInt(113);for(let t=0,e=Av,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],ite.push(2*(5*r+n)),ote.push((t+1)*(t+2)/2%64);let s=m9e;for(let i=0;i<7;i++)e=(e<<Av^(e>>w9e)*v9e)%b9e,e&y9e&&(s^=Av<<(Av<<BigInt(i))-Av);ate.push(s)}const[E9e,C9e]=ete(ate,!0),D7=(t,e,n)=>n>32?rte(t,e,n):tte(t,e,n),M7=(t,e,n)=>n>32?ste(t,e,n):nte(t,e,n);function _9e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=D7(l,u,1)^n[a],h=M7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=ote[o],c=D7(s,i,a),l=M7(s,i,a),u=ite[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=E9e[r],t[1]^=C9e[r]}n.fill(0)}class h$ extends u${constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,BI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=$je(this.state)}keccak(){_9e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Hw(this);const{blockLen:n,state:r}=this;e=YT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Hw(this,!1),l$(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return BI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Vee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new h$(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const A9e=(t,e,n)=>d$(()=>new h$(e,t,n)),S9e=A9e(1,136,256/8);let cte=!1;const lte=function(t){return S9e(t)};let ute=lte;function qr(t){const e=Kt(t,"data");return De(ute(e))}qr._=lte;qr.lock=function(){cte=!0};qr.register=function(t){if(cte)throw new TypeError("keccak256 is locked");ute=t};Object.freeze(qr);const dte=function(t){return g9e("sha256").update(t).digest()};let hte=dte,fte=!1;function Rb(t){const e=Kt(t,"data");return De(hte(e))}Rb._=dte;Rb.lock=function(){fte=!0};Rb.register=function(t){if(fte)throw new Error("sha256 is locked");hte=t};Object.freeze(Rb);Object.freeze(Rb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pte=BigInt(0),QT=BigInt(1),x9e=BigInt(2),JT=t=>t instanceof Uint8Array,I9e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Gw(t){if(!JT(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=I9e[t[n]];return e}function gte(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function f$(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function qw(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function bg(t){return f$(Gw(t))}function p$(t){if(!JT(t))throw new Error("Uint8Array expected");return f$(Gw(Uint8Array.from(t).reverse()))}function Vw(t,e){return qw(t.toString(16).padStart(e*2,"0"))}function g$(t,e){return Vw(t,e).reverse()}function N9e(t){return qw(gte(t))}function wc(t,e,n){let r;if(typeof e=="string")try{r=qw(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(JT(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function l_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!JT(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function T9e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function R9e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function P9e(t){let e;for(e=0;t>pte;t>>=QT,e+=1);return e}function O9e(t,e){return t>>BigInt(e)&QT}const k9e=(t,e,n)=>t|(n?QT:pte)<<BigInt(e),m$=t=>(x9e<<BigInt(t-1))-QT,r2=t=>new Uint8Array(t),L7=t=>Uint8Array.from(t);function mte(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=r2(t),s=r2(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=r2())=>{s=a(L7([0]),d),r=a(),d.length!==0&&(s=a(L7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return l_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const D9e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function k1(t,e,n={}){const r=(s,i,o)=>{const a=D9e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const M9e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:O9e,bitLen:P9e,bitMask:m$,bitSet:k9e,bytesToHex:Gw,bytesToNumberBE:bg,bytesToNumberLE:p$,concatBytes:l_,createHmacDrbg:mte,ensureBytes:wc,equalBytes:T9e,hexToBytes:qw,hexToNumber:f$,numberToBytesBE:Vw,numberToBytesLE:g$,numberToHexUnpadded:gte,numberToVarBytesBE:N9e,utf8ToBytes:R9e,validateObject:k1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ss=BigInt(0),Br=BigInt(1),mp=BigInt(2),L9e=BigInt(3),p5=BigInt(4),U7=BigInt(5),$7=BigInt(8);BigInt(9);BigInt(16);function ho(t,e){const n=t%e;return n>=Ss?n:e+n}function U9e(t,e,n){if(n<=Ss||e<Ss)throw new Error("Expected power/modulo > 0");if(n===Br)return Ss;let r=Br;for(;e>Ss;)e&Br&&(r=r*t%n),t=t*t%n,e>>=Br;return r}function ya(t,e,n){let r=t;for(;e-- >Ss;)r*=r,r%=n;return r}function g5(t,e){if(t===Ss||e<=Ss)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=ho(t,e),r=e,s=Ss,i=Br;for(;n!==Ss;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Br)throw new Error("invert: does not exist");return ho(s,e)}function $9e(t){const e=(t-Br)/mp;let n,r,s;for(n=t-Br,r=0;n%mp===Ss;n/=mp,r++);for(s=mp;s<t&&U9e(s,e,t)!==t-Br;s++);if(r===1){const o=(t+Br)/p5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Br)/mp;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Br<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function B9e(t){if(t%p5===L9e){const e=(t+Br)/p5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%$7===U7){const e=(t-U7)/$7;return function(r,s){const i=r.mul(s,mp),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,mp),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return $9e(t)}const F9e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function j9e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=F9e.reduce((r,s)=>(r[s]="function",r),e);return k1(t,n)}function W9e(t,e,n){if(n<Ss)throw new Error("Expected power > 0");if(n===Ss)return t.ONE;if(n===Br)return e;let r=t.ONE,s=e;for(;n>Ss;)n&Br&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Br;return r}function z9e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function yte(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function H9e(t,e,n=!1,r={}){if(t<=Ss)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=yte(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=B9e(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:m$(s),ZERO:Ss,ONE:Br,create:c=>ho(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return Ss<=c&&c<t},is0:c=>c===Ss,isOdd:c=>(c&Br)===Br,neg:c=>ho(-c,t),eql:(c,l)=>c===l,sqr:c=>ho(c*c,t),add:(c,l)=>ho(c+l,t),sub:(c,l)=>ho(c-l,t),mul:(c,l)=>ho(c*l,t),pow:(c,l)=>W9e(a,c,l),div:(c,l)=>ho(c*g5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>g5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>z9e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?g$(c,i):Vw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?p$(c):bg(c)}});return Object.freeze(a)}function wte(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function bte(t){const e=wte(t);return e+Math.ceil(e/2)}function G9e(t,e,n=!1){const r=t.length,s=wte(e),i=bte(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?bg(t):p$(t),a=ho(o,e-Br)+Br;return n?g$(a,s):Vw(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const q9e=BigInt(0),s2=BigInt(1);function V9e(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>q9e;)i&s2&&(o=o.add(a)),a=a.double(),i>>=s2;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=s2);const y=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[y])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function vte(t){return j9e(t.Fp),k1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yte(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function K9e(t){const e=vte(t);k1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:Y9e,hexToBytes:Q9e}=M9e,kp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=kp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:Y9e(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=kp,n=typeof t=="string"?Q9e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=kp._parseInt(n.subarray(2)),{d:o,l:a}=kp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Gu=BigInt(0),Pa=BigInt(1);BigInt(2);const B7=BigInt(3);BigInt(4);function J9e(t){const e=K9e(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const y=g.toAffine();return l_(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y}});function i(p){const{a:g,b:w}=e,y=n.sqr(p),b=n.mul(y,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Gu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:y,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=Gw(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:bg(wc("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return y&&(v=ho(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,y){if(this.px=g,this.py=w,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:w,y}=g||{};if(!g||!n.isValid(w)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(y)?d.ZERO:new d(w,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(y=>y.pz));return g.map((y,b)=>y.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(wc("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const y=n.sqr(w),b=i(g);if(!n.eql(y,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g,I=n.eql(n.mul(w,_),n.mul(v,b)),x=n.eql(n.mul(y,_),n.mul(A,b));return I&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,y=n.mul(w,B7),{px:b,py:v,pz:A}=this;let _=n.ZERO,I=n.ZERO,x=n.ZERO,N=n.mul(b,b),S=n.mul(v,v),O=n.mul(A,A),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,A),x=n.add(x,x),_=n.mul(g,x),I=n.mul(y,O),I=n.add(_,I),_=n.sub(S,I),I=n.add(S,I),I=n.mul(_,I),_=n.mul(P,_),x=n.mul(y,x),O=n.mul(g,O),P=n.sub(N,O),P=n.mul(g,P),P=n.add(P,x),x=n.add(N,N),N=n.add(x,N),N=n.add(N,O),N=n.mul(N,P),I=n.add(I,N),O=n.mul(v,A),O=n.add(O,O),N=n.mul(O,P),_=n.sub(_,N),x=n.mul(O,S),x=n.add(x,x),x=n.add(x,x),new d(_,I,x)}add(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:_}=g;let I=n.ZERO,x=n.ZERO,N=n.ZERO;const S=e.a,O=n.mul(e.b,B7);let P=n.mul(w,v),F=n.mul(y,A),G=n.mul(b,_),B=n.add(w,y),T=n.add(v,A);B=n.mul(B,T),T=n.add(P,F),B=n.sub(B,T),T=n.add(w,b);let R=n.add(v,_);return T=n.mul(T,R),R=n.add(P,G),T=n.sub(T,R),R=n.add(y,b),I=n.add(A,_),R=n.mul(R,I),I=n.add(F,G),R=n.sub(R,I),N=n.mul(S,T),I=n.mul(O,G),N=n.add(I,N),I=n.sub(F,N),N=n.add(F,N),x=n.mul(I,N),F=n.add(P,P),F=n.add(F,P),G=n.mul(S,G),T=n.mul(O,T),F=n.add(F,G),G=n.sub(P,G),G=n.mul(S,G),T=n.add(T,G),P=n.mul(F,T),x=n.add(x,P),P=n.mul(R,T),I=n.mul(B,I),I=n.sub(I,P),P=n.mul(B,F),N=n.mul(R,N),N=n.add(N,P),new d(I,x,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Gu)return w;if(a(g),g===Pa)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:_}=y.splitScalar(g),I=w,x=w,N=this;for(;v>Gu||_>Gu;)v&Pa&&(I=I.add(N)),_&Pa&&(x=x.add(N)),N=N.double(),v>>=Pa,_>>=Pa;return b&&(I=I.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,y.beta),x.py,x.pz),I.add(x)}multiply(g){a(g);let w=g,y,b;const{endo:v}=e;if(v){const{k1neg:A,k1:_,k2neg:I,k2:x}=v.splitScalar(w);let{p:N,f:S}=this.wNAF(_),{p:O,f:P}=this.wNAF(x);N=f.constTimeNegate(A,N),O=f.constTimeNegate(I,O),O=new d(n.mul(O.px,v.beta),O.py,O.pz),y=N.add(O),b=S.add(P)}else{const{p:A,f:_}=this.wNAF(w);y=A,b=_}return d.normalizeZ([y,b])[0]}multiplyAndAddUnsafe(g,w,y){const b=d.BASE,v=(_,I)=>I===Gu||I===Pa||!_.equals(b)?_.multiplyUnsafe(I):_.multiply(I),A=v(this,w).add(v(g,y));return A.is0()?void 0:A}toAffine(g){const{px:w,py:y,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),_=n.mul(y,g),I=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(I,n.ONE))throw new Error("invZ was invalid");return{x:A,y:_}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Pa)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Pa?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return Gw(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=V9e(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Z9e(t){const e=vte(t);return k1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function X9e(t){const e=Z9e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(T){return Gu<T&&T<n.ORDER}function a(T){return ho(T,r)}function c(T){return g5(T,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=J9e({...e,toBytes(T,R,$){const k=R.toAffine(),M=n.toBytes(k.x),j=l_;return $?j(Uint8Array.from([R.hasEvenY()?2:3]),M):j(Uint8Array.from([4]),M,n.toBytes(k.y))},fromBytes(T){const R=T.length,$=T[0],k=T.subarray(1);if(R===s&&($===2||$===3)){const M=bg(k);if(!o(M))throw new Error("Point is not on curve");const j=d(M);let K=n.sqrt(j);const ne=(K&Pa)===Pa;return($&1)===1!==ne&&(K=n.neg(K)),{x:M,y:K}}else if(R===i&&$===4){const M=n.fromBytes(k.subarray(0,n.BYTES)),j=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:M,y:j}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=T=>Gw(Vw(T,e.nByteLength));function p(T){const R=r>>Pa;return T>R}function g(T){return p(T)?a(-T):T}const w=(T,R,$)=>bg(T.slice(R,$));class y{constructor(R,$,k){this.r=R,this.s=$,this.recovery=k,this.assertValidity()}static fromCompact(R){const $=e.nByteLength;return R=wc("compactSignature",R,$*2),new y(w(R,0,$),w(R,$,2*$))}static fromDER(R){const{r:$,s:k}=kp.toSig(wc("DER",R));return new y($,k)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:$,s:k,recovery:M}=this,j=x(wc("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const K=M===2||M===3?$+e.n:$;if(K>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=M&1?"03":"02",le=l.fromHex(ne+f(K)),oe=c(K),ae=a(-j*oe),ue=a(k*oe),Xe=l.BASE.multiplyAndAddUnsafe(le,ae,ue);if(!Xe)throw new Error("point at infinify");return Xe.assertValidity(),Xe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return qw(this.toDERHex())}toDERHex(){return kp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return qw(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(T){try{return u(T),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const T=bte(e.n);return G9e(e.randomBytes(T),e.n)},precompute(T=8,R=l.BASE){return R._setWindowSize(T),R.multiply(BigInt(3)),R}};function v(T,R=!0){return l.fromPrivateKey(T).toRawBytes(R)}function A(T){const R=T instanceof Uint8Array,$=typeof T=="string",k=(R||$)&&T.length;return R?k===s||k===i:$?k===2*s||k===2*i:T instanceof l}function _(T,R,$=!0){if(A(T))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(T)).toRawBytes($)}const I=e.bits2int||function(T){const R=bg(T),$=T.length*8-e.nBitLength;return $>0?R>>BigInt($):R},x=e.bits2int_modN||function(T){return a(I(T))},N=m$(e.nBitLength);function S(T){if(typeof T!="bigint")throw new Error("bigint expected");if(!(Gu<=T&&T<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return Vw(T,e.nByteLength)}function O(T,R,$=P){if(["recovered","canonical"].some(Me=>Me in $))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:M}=e;let{lowS:j,prehash:K,extraEntropy:ne}=$;j==null&&(j=!0),T=wc("msgHash",T),K&&(T=wc("prehashed msgHash",k(T)));const le=x(T),oe=u(R),ae=[S(oe),S(le)];if(ne!=null){const Me=ne===!0?M(n.BYTES):ne;ae.push(wc("extraEntropy",Me))}const ue=l_(...ae),Xe=le;function xe(Me){const rt=I(Me);if(!h(rt))return;const Rt=c(rt),Xt=l.BASE.multiply(rt).toAffine(),X=a(Xt.x);if(X===Gu)return;const ce=a(Rt*a(Xe+X*oe));if(ce===Gu)return;let Ee=(Xt.x===X?0:2)|Number(Xt.y&Pa),ge=ce;return j&&p(ce)&&(ge=g(ce),Ee^=1),new y(X,ge,Ee)}return{seed:ue,k2sig:xe}}const P={lowS:e.lowS,prehash:!1},F={lowS:e.lowS,prehash:!1};function G(T,R,$=P){const{seed:k,k2sig:M}=O(T,R,$),j=e;return mte(j.hash.outputLen,j.nByteLength,j.hmac)(k,M)}l.BASE._setWindowSize(8);function B(T,R,$,k=F){var Xt;const M=T;if(R=wc("msgHash",R),$=wc("publicKey",$),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:K}=k;let ne,le;try{if(typeof M=="string"||M instanceof Uint8Array)try{ne=y.fromDER(M)}catch(X){if(!(X instanceof kp.Err))throw X;ne=y.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:X,s:ce}=M;ne=new y(X,ce)}else throw new Error("PARSE");le=l.fromHex($)}catch(X){if(X.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&ne.hasHighS())return!1;K&&(R=e.hash(R));const{r:oe,s:ae}=ne,ue=x(R),Xe=c(ae),xe=a(ue*Xe),Me=a(oe*Xe),rt=(Xt=l.BASE.multiplyAndAddUnsafe(le,xe,Me))==null?void 0:Xt.toAffine();return rt?a(rt.x)===oe:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:_,sign:G,verify:B,ProjectivePoint:l,Signature:y,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function e7e(t){return{hash:t,hmac:(e,...n)=>Qee(t,e,jje(...n)),randomBytes:Wje}}function t7e(t,e){const n=r=>X9e({...t,...e7e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ete=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),F7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),n7e=BigInt(1),m5=BigInt(2),j7=(t,e)=>(t+e/m5)/e;function r7e(t){const e=Ete,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ya(u,n,e)*u%e,h=ya(d,n,e)*u%e,f=ya(h,m5,e)*l%e,p=ya(f,s,e)*f%e,g=ya(p,i,e)*p%e,w=ya(g,a,e)*g%e,y=ya(w,c,e)*w%e,b=ya(y,a,e)*g%e,v=ya(b,n,e)*u%e,A=ya(v,o,e)*p%e,_=ya(A,r,e)*l%e,I=ya(_,m5,e);if(!y5.eql(y5.sqr(I),t))throw new Error("Cannot find square root");return I}const y5=H9e(Ete,void 0,void 0,{sqrt:r7e}),Yd=t7e({a:BigInt(0),b:BigInt(7),Fp:y5,n:F7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=F7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-n7e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=j7(i*t,e),c=j7(-r*t,e);let l=ho(t-a*n-c*s,e),u=ho(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},Zee);BigInt(0);Yd.ProjectivePoint;const u_="0x0000000000000000000000000000000000000000",W7="0x0000000000000000000000000000000000000000000000000000000000000000",z7=BigInt(0),H7=BigInt(1),G7=BigInt(2),q7=BigInt(27),V7=BigInt(28),sS=BigInt(35),oy={};function K7(t){return wd(os(t),32)}var T0,yl,R0,eg;const gc=class gc{constructor(e,n,r,s){Q(this,T0);Q(this,yl);Q(this,R0);Q(this,eg);qT(e,oy,"Signature"),L(this,T0,n),L(this,yl,r),L(this,R0,s),L(this,eg,null)}get r(){return C(this,T0)}set r(e){Z(r0(e)===32,"invalid r","value",e),L(this,T0,De(e))}get s(){return Z(parseInt(C(this,yl).substring(0,3))<8,"non-canonical s; use ._s","s",C(this,yl)),C(this,yl)}set s(e){Z(r0(e)===32,"invalid s","value",e),L(this,yl,De(e))}get _s(){return C(this,yl)}isValid(){return parseInt(C(this,yl).substring(0,3))<8}get v(){return C(this,R0)}set v(e){const n=Yt(e,"value");Z(n===27||n===28,"invalid v","v",e),L(this,R0,n)}get networkV(){return C(this,eg)}get legacyChainId(){const e=this.networkV;return e==null?null:gc.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Kt(this.s);return this.yParity&&(e[0]|=128),De(e)}get compactSerialized(){return Or([this.r,this.yParityAndS])}get serialized(){return Or([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new gc(oy,this.r,this._s,this.v);return this.networkV&&L(e,eg,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Je(e,"v");return n==q7||n==V7?z7:(Z(n>=sS,"invalid EIP-155 v","v",e),(n-sS)/G7)}static getChainIdV(e,n){return Je(e)*G7+BigInt(35+n-27)}static getNormalizedV(e){const n=Je(e);return n===z7||n===q7?27:n===H7||n===V7?28:(Z(n>=sS,"invalid v","v",e),n&H7?27:28)}static from(e){function n(l,u){Z(l,u,"signature",e)}if(e==null)return new gc(oy,W7,W7,27);if(typeof e=="string"){const l=Kt(e,"signature");if(l.length===64){const u=De(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new gc(oy,u,De(d),h)}if(l.length===65){const u=De(l.slice(0,32)),d=De(l.slice(32,64)),h=gc.getNormalizedV(l[64]);return new gc(oy,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof gc)return e.clone();const r=e.r;n(r!=null,"missing r");const s=K7(r),i=function(l,u){if(l!=null)return K7(l);if(u!=null){n(sr(u,32),"invalid yParityAndS");const d=Kt(u);return d[0]&=127,De(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Je(l);return{networkV:h>=sS?h:void 0,v:gc.getNormalizedV(h)}}if(u!=null)return n(sr(u,32),"invalid yParityAndS"),{v:Kt(u)[0]&128?28:27};if(d!=null){switch(Yt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new gc(oy,s,i,a);return o&&L(c,eg,o),n(e.yParity==null||Yt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};T0=new WeakMap,yl=new WeakMap,R0=new WeakMap,eg=new WeakMap;let Ao=gc;var Mu;const yp=class yp{constructor(e){Q(this,Mu);Z(r0(e)===32,"invalid private key","privateKey","[REDACTED]"),L(this,Mu,De(e))}get privateKey(){return C(this,Mu)}get publicKey(){return yp.computePublicKey(C(this,Mu))}get compressedPublicKey(){return yp.computePublicKey(C(this,Mu),!0)}sign(e){Z(r0(e)===32,"invalid digest length","digest",e);const n=Yd.sign(Ni(e),Ni(C(this,Mu)),{lowS:!0});return Ao.from({r:If(n.r,32),s:If(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=yp.computePublicKey(e);return De(Yd.getSharedSecret(Ni(C(this,Mu)),Kt(n),!1))}static computePublicKey(e,n){let r=Kt(e,"key");if(r.length===32){const i=Yd.getPublicKey(r,!!n);return De(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=Yd.ProjectivePoint.fromHex(r);return De(s.toRawBytes(n))}static recoverPublicKey(e,n){Z(r0(e)===32,"invalid digest length","digest",e);const r=Ao.from(n);let s=Yd.Signature.fromCompact(Ni(Or([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Ni(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=Yd.ProjectivePoint.fromHex(yp.computePublicKey(e).substring(2)),i=Yd.ProjectivePoint.fromHex(yp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};Mu=new WeakMap;let d_=yp;const s7e=BigInt(0),i7e=BigInt(36);function Y7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Kt(qr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const y$={};for(let t=0;t<10;t++)y$[String(t)]=String(t);for(let t=0;t<26;t++)y$[String.fromCharCode(65+t)]=String(10+t);const Q7=15;function o7e(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>y$[r]).join("");for(;e.length>=Q7;){let r=e.substring(0,Q7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const a7e=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function c7e(t){t=t.toLowerCase();let e=s7e;for(let n=0;n<t.length;n++)e=e*i7e+a7e[t[n]];return e}function xn(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=Y7(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===o7e(t),"bad icap checksum","address",t);let e=c7e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Y7("0x"+e)}Z(!1,"invalid address","address",t)}function l7e(t){const e=xn(t.from);let r=Je(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,xn(Ir(qr(Tf([e,r])),12))}function Cte(t){return t&&typeof t.getAddress=="function"}async function i2(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(me(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),xn(n)}function Pi(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?xn(t):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),i2(t,e.resolveName(t)));if(Cte(t))return i2(t,t.getAddress());if(t&&typeof t.then=="function")return i2(t,t);Z(!1,"unsupported addressable value","target",t)}const Au={};function Ge(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ui(Au,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function yn(t,e){return new ui(Au,`bytes${e||""}`,t,{size:e})}const J7=Symbol.for("_ethers_typed");var tg;const Su=class Su{constructor(e,n,r,s){te(this,"type");te(this,"value");Q(this,tg);te(this,"_typedSymbol");s==null&&(s=null),qT(Au,e,"Typed"),yt(this,{_typedSymbol:J7,type:n,value:r}),L(this,tg,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return C(this,tg)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return C(this,tg)===!0?-1:C(this,tg)===!1?this.value.length:null}static from(e,n){return new Su(Au,e,n)}static uint8(e){return Ge(e,8)}static uint16(e){return Ge(e,16)}static uint24(e){return Ge(e,24)}static uint32(e){return Ge(e,32)}static uint40(e){return Ge(e,40)}static uint48(e){return Ge(e,48)}static uint56(e){return Ge(e,56)}static uint64(e){return Ge(e,64)}static uint72(e){return Ge(e,72)}static uint80(e){return Ge(e,80)}static uint88(e){return Ge(e,88)}static uint96(e){return Ge(e,96)}static uint104(e){return Ge(e,104)}static uint112(e){return Ge(e,112)}static uint120(e){return Ge(e,120)}static uint128(e){return Ge(e,128)}static uint136(e){return Ge(e,136)}static uint144(e){return Ge(e,144)}static uint152(e){return Ge(e,152)}static uint160(e){return Ge(e,160)}static uint168(e){return Ge(e,168)}static uint176(e){return Ge(e,176)}static uint184(e){return Ge(e,184)}static uint192(e){return Ge(e,192)}static uint200(e){return Ge(e,200)}static uint208(e){return Ge(e,208)}static uint216(e){return Ge(e,216)}static uint224(e){return Ge(e,224)}static uint232(e){return Ge(e,232)}static uint240(e){return Ge(e,240)}static uint248(e){return Ge(e,248)}static uint256(e){return Ge(e,256)}static uint(e){return Ge(e,256)}static int8(e){return Ge(e,-8)}static int16(e){return Ge(e,-16)}static int24(e){return Ge(e,-24)}static int32(e){return Ge(e,-32)}static int40(e){return Ge(e,-40)}static int48(e){return Ge(e,-48)}static int56(e){return Ge(e,-56)}static int64(e){return Ge(e,-64)}static int72(e){return Ge(e,-72)}static int80(e){return Ge(e,-80)}static int88(e){return Ge(e,-88)}static int96(e){return Ge(e,-96)}static int104(e){return Ge(e,-104)}static int112(e){return Ge(e,-112)}static int120(e){return Ge(e,-120)}static int128(e){return Ge(e,-128)}static int136(e){return Ge(e,-136)}static int144(e){return Ge(e,-144)}static int152(e){return Ge(e,-152)}static int160(e){return Ge(e,-160)}static int168(e){return Ge(e,-168)}static int176(e){return Ge(e,-176)}static int184(e){return Ge(e,-184)}static int192(e){return Ge(e,-192)}static int200(e){return Ge(e,-200)}static int208(e){return Ge(e,-208)}static int216(e){return Ge(e,-216)}static int224(e){return Ge(e,-224)}static int232(e){return Ge(e,-232)}static int240(e){return Ge(e,-240)}static int248(e){return Ge(e,-248)}static int256(e){return Ge(e,-256)}static int(e){return Ge(e,-256)}static bytes1(e){return yn(e,1)}static bytes2(e){return yn(e,2)}static bytes3(e){return yn(e,3)}static bytes4(e){return yn(e,4)}static bytes5(e){return yn(e,5)}static bytes6(e){return yn(e,6)}static bytes7(e){return yn(e,7)}static bytes8(e){return yn(e,8)}static bytes9(e){return yn(e,9)}static bytes10(e){return yn(e,10)}static bytes11(e){return yn(e,11)}static bytes12(e){return yn(e,12)}static bytes13(e){return yn(e,13)}static bytes14(e){return yn(e,14)}static bytes15(e){return yn(e,15)}static bytes16(e){return yn(e,16)}static bytes17(e){return yn(e,17)}static bytes18(e){return yn(e,18)}static bytes19(e){return yn(e,19)}static bytes20(e){return yn(e,20)}static bytes21(e){return yn(e,21)}static bytes22(e){return yn(e,22)}static bytes23(e){return yn(e,23)}static bytes24(e){return yn(e,24)}static bytes25(e){return yn(e,25)}static bytes26(e){return yn(e,26)}static bytes27(e){return yn(e,27)}static bytes28(e){return yn(e,28)}static bytes29(e){return yn(e,29)}static bytes30(e){return yn(e,30)}static bytes31(e){return yn(e,31)}static bytes32(e){return yn(e,32)}static address(e){return new Su(Au,"address",e)}static bool(e){return new Su(Au,"bool",!!e)}static bytes(e){return new Su(Au,"bytes",e)}static string(e){return new Su(Au,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Su(Au,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===J7}static dereference(e,n){if(Su.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};tg=new WeakMap;let ui=Su;class u7e extends Ad{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ui.dereference(n,"string");try{r=xn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return xn(If(e.readValue(),20))}}class d7e extends Ad{constructor(n){super(n.name,n.type,"_",n.dynamic);te(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function _te(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return me(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),me(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Z(!1,"invalid tuple value","tuple",n);Z(e.length===r.length,"types/value length mismatch","tuple",n);let s=new u5,i=new u5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function Ate(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(js(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(js(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),zw.fromItems(n,r)}class h7e extends Ad{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);te(this,"coder");te(this,"length");yt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ui.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),kee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return _te(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),me(r*Ri<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Ri,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new d7e(this.coder));return Ate(n,s)}}class f7e extends Ad{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ui.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class Ste extends Ad{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Ni(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class p7e extends Ste{constructor(e){super("bytes",e)}decode(e){return De(super.decode(e))}}class g7e extends Ad{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);te(this,"size");yt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Ni(ui.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return De(n.readBytes(this.size))}}const m7e=new Uint8Array([]);class y7e extends Ad{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(m7e)}decode(e){return e.readBytes(0),null}}const w7e=BigInt(0),b7e=BigInt(1),v7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class E7e extends Ad{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);te(this,"size");te(this,"signed");yt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Je(ui.dereference(r,this.type)),i=Hv(v7e,Ri*8);if(this.signed){let o=Hv(i,this.size*8-1);(s>o||s<-(o+b7e))&&this._throwError("value out-of-bounds",r),s=Lee(s,8*Ri)}else(s<w7e||s>Hv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Hv(n.readValue(),this.size*8);return this.signed&&(r=wje(r,this.size*8)),r}}class C7e extends Ste{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,id(ui.dereference(n,"string")))}decode(e){return $I(super.decode(e))}}class iS extends Ad{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);te(this,"coders");yt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ui.dereference(r,"tuple");return _te(n,this.coders,s)}decode(n){return Ate(n,this.coders)}}function o2(t,e){return{address:xn(t),storageKeys:e.map((n,r)=>(Z(sr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function _m(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${r}]`,n),o2(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),o2(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return o2(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function xte(t){return{address:xn(t.address),nonce:Je(t.nonce!=null?t.nonce:0),chainId:Je(t.chainId!=null?t.chainId:0),signature:Ao.from(t.signature)}}function _7e(t){let e;return typeof t=="string"?e=d_.computePublicKey(t,!1):e=t.publicKey,xn(qr("0x"+e.substring(4)).substring(26))}function A7e(t,e){return _7e(d_.recoverPublicKey(t,e))}const bs=BigInt(0),S7e=BigInt(2),x7e=BigInt(27),I7e=BigInt(28),N7e=BigInt(35),T7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),a2=4096*32;function R7e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Kt(t.blobToKzgCommitment(De(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Kt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Kt(t.blobToKZGCommitment(De(r)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Kt(t.computeBlobProof(De(r),De(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Kt(t.computeBlobKZGProof(De(r),De(s)));Z(!1,"unsupported KZG library","kzg",t)}}}function Z7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Rb(e).substring(4),"0x"+n}function Pb(t){return t==="0x"?null:xn(t)}function ZT(t,e){try{return _m(t)}catch(n){Z(!1,n.message,e,t)}}function P7e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Pb(s[1]),nonce:Fn(s[2],"nonce"),chainId:Fn(s[0],"chainId"),signature:Ao.from({yParity:Am(s[3],"yParity"),r:wd(s[4],32),s:wd(s[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function Am(t,e){return t==="0x"?0:Yt(t,e)}function Fn(t,e){if(t==="0x")return bs;const n=Je(t,e);return Z(n<=T7e,"value exceeds uint size",e,n),n}function sn(t,e){const n=Je(t,"value"),r=os(n);return Z(r.length<=32,"value too large",`tx.${e}`,n),r}function XT(t){return _m(t).map(e=>[e.address,e.storageKeys])}function O7e(t){return t.map(e=>[sn(e.chainId,"chainId"),e.address,sn(e.nonce,"nonce"),sn(e.signature.yParity,"yParity"),os(e.signature.r),os(e.signature.s)])}function k7e(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(sr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function D7e(t){const e=O1(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:Am(e[0],"nonce"),gasPrice:Fn(e[1],"gasPrice"),gasLimit:Fn(e[2],"gasLimit"),to:Pb(e[3]),value:Fn(e[4],"value"),data:De(e[5]),chainId:bs};if(e.length===6)return n;const r=Fn(e[6],"v"),s=Fn(e[7],"r"),i=Fn(e[8],"s");if(s===bs&&i===bs)n.chainId=r;else{let o=(r-N7e)/S7e;o<bs&&(o=bs),n.chainId=o,Z(o!==bs||r===x7e||r===I7e,"non-canonical legacy v","v",e[6]),n.signature=Ao.from({r:wd(e[7],32),s:wd(e[8],32),v:r})}return n}function M7e(t,e){const n=[sn(t.nonce,"nonce"),sn(t.gasPrice||0,"gasPrice"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data];let r=bs;if(t.chainId!=bs)r=Je(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==bs&&(n.push(os(r)),n.push("0x"),n.push("0x")),Tf(n);let s=BigInt(27+e.yParity);return r!==bs?s=Ao.getChainIdV(r,e.v):BigInt(e.v)!==s&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(os(s)),n.push(os(e.r)),n.push(os(e.s)),Tf(n)}function eR(t,e){let n;try{if(n=Am(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const r=wd(e[1],32),s=wd(e[2],32),i=Ao.from({r,s,yParity:n});t.signature=i}function L7e(t){const e=O1(Kt(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",De(t));const n={type:2,chainId:Fn(e[0],"chainId"),nonce:Am(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Pb(e[5]),value:Fn(e[6],"value"),data:De(e[7]),accessList:ZT(e[8],"accessList")};return e.length===9||eR(n,e.slice(9)),n}function U7e(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,XT(t.accessList||[])];return e&&(n.push(sn(e.yParity,"yParity")),n.push(os(e.r)),n.push(os(e.s))),Or(["0x02",Tf(n)])}function $7e(t){const e=O1(Kt(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",De(t));const n={type:1,chainId:Fn(e[0],"chainId"),nonce:Am(e[1],"nonce"),gasPrice:Fn(e[2],"gasPrice"),gasLimit:Fn(e[3],"gasLimit"),to:Pb(e[4]),value:Fn(e[5],"value"),data:De(e[6]),accessList:ZT(e[7],"accessList")};return e.length===8||eR(n,e.slice(8)),n}function B7e(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.gasPrice||0,"gasPrice"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,XT(t.accessList||[])];return e&&(n.push(sn(e.yParity,"recoveryParam")),n.push(os(e.r)),n.push(os(e.s))),Or(["0x01",Tf(n)])}function F7e(t){let e=O1(Kt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Z(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Z(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Z(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Z(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",De(t));const s={type:3,chainId:Fn(e[0],"chainId"),nonce:Am(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Pb(e[5]),value:Fn(e[6],"value"),data:De(e[7]),accessList:ZT(e[8],"accessList"),maxFeePerBlobGas:Fn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Z(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Z(sr(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||eR(s,e.slice(11)),s}function j7e(t,e,n){const r=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||u_,sn(t.value,"value"),t.data,XT(t.accessList||[]),sn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),k7e(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(sn(e.yParity,"yParity")),r.push(os(e.r)),r.push(os(e.s)),n)?Or(["0x03",Tf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Or(["0x03",Tf(r)])}function W7e(t){const e=O1(Kt(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",De(t));const n={type:4,chainId:Fn(e[0],"chainId"),nonce:Am(e[1],"nonce"),maxPriorityFeePerGas:Fn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Fn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Fn(e[4],"gasLimit"),to:Pb(e[5]),value:Fn(e[6],"value"),data:De(e[7]),accessList:ZT(e[8],"accessList"),authorizationList:P7e(e[9],"authorizationList")};return e.length===10||eR(n,e.slice(10)),n}function z7e(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,XT(t.accessList||[]),O7e(t.authorizationList||[])];return e&&(n.push(sn(e.yParity,"yParity")),n.push(os(e.r)),n.push(os(e.s))),Or(["0x04",Tf(n)])}var _c,P0,O0,k0,D0,M0,L0,U0,$0,B0,F0,j0,ng,vh,wl,Eh,W0,z0,JS;const hl=class hl{constructor(){Q(this,z0);Q(this,_c);Q(this,P0);Q(this,O0);Q(this,k0);Q(this,D0);Q(this,M0);Q(this,L0);Q(this,U0);Q(this,$0);Q(this,B0);Q(this,F0);Q(this,j0);Q(this,ng);Q(this,vh);Q(this,wl);Q(this,Eh);Q(this,W0);L(this,_c,null),L(this,P0,null),L(this,k0,0),L(this,D0,bs),L(this,M0,null),L(this,L0,null),L(this,U0,null),L(this,O0,"0x"),L(this,$0,bs),L(this,B0,bs),L(this,F0,null),L(this,j0,null),L(this,ng,null),L(this,vh,null),L(this,wl,null),L(this,Eh,null),L(this,W0,null)}get type(){return C(this,_c)}set type(e){switch(e){case null:L(this,_c,null);break;case 0:case"legacy":L(this,_c,0);break;case 1:case"berlin":case"eip-2930":L(this,_c,1);break;case 2:case"london":case"eip-1559":L(this,_c,2);break;case 3:case"cancun":case"eip-4844":L(this,_c,3);break;case 4:case"pectra":case"eip-7702":L(this,_c,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=C(this,P0);return e==null&&this.type===3?u_:e}set to(e){L(this,P0,e==null?null:xn(e))}get nonce(){return C(this,k0)}set nonce(e){L(this,k0,Yt(e,"value"))}get gasLimit(){return C(this,D0)}set gasLimit(e){L(this,D0,Je(e))}get gasPrice(){const e=C(this,M0);return e==null&&(this.type===0||this.type===1)?bs:e}set gasPrice(e){L(this,M0,e==null?null:Je(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=C(this,L0);return e??(this.type===2||this.type===3?bs:null)}set maxPriorityFeePerGas(e){L(this,L0,e==null?null:Je(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=C(this,U0);return e??(this.type===2||this.type===3?bs:null)}set maxFeePerGas(e){L(this,U0,e==null?null:Je(e,"maxFeePerGas"))}get data(){return C(this,O0)}set data(e){L(this,O0,De(e))}get value(){return C(this,$0)}set value(e){L(this,$0,Je(e,"value"))}get chainId(){return C(this,B0)}set chainId(e){L(this,B0,Je(e))}get signature(){return C(this,F0)||null}set signature(e){L(this,F0,e==null?null:Ao.from(e))}get accessList(){const e=C(this,j0)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){L(this,j0,e==null?null:_m(e))}get authorizationList(){const e=C(this,W0)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){L(this,W0,e==null?null:e.map(n=>xte(n)))}get maxFeePerBlobGas(){const e=C(this,ng);return e==null&&this.type===3?bs:e}set maxFeePerBlobGas(e){L(this,ng,e==null?null:Je(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=C(this,vh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(sr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}L(this,vh,e)}get blobs(){return C(this,Eh)==null?null:C(this,Eh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){L(this,Eh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(a$(i)){me(C(this,wl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Kt(i);if(Z(o.length<=a2,"blob is too large",`blobs[${s}]`,i),o.length!==a2){const l=new Uint8Array(a2);l.set(o),o=l}const a=C(this,wl).blobToKzgCommitment(o),c=De(C(this,wl).computeBlobKzgProof(o,a));n.push({data:De(o),commitment:De(a),proof:c}),r.push(Z7(1,a))}else{const o=De(i.commitment);n.push({data:De(i.data),commitment:o,proof:De(i.proof)}),r.push(Z7(1,o))}}L(this,Eh,n),L(this,vh,r)}get kzg(){return C(this,wl)}set kzg(e){e==null?L(this,wl,null):L(this,wl,R7e(e))}get hash(){return this.signature==null?null:qr(he(this,z0,JS).call(this,!0,!1))}get unsignedHash(){return qr(this.unsignedSerialized)}get from(){return this.signature==null?null:A7e(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:d_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return he(this,z0,JS).call(this,!0,!0)}get unsignedSerialized(){return he(this,z0,JS).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=C(this,ng)!=null||C(this,vh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return hl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new hl;if(typeof e=="string"){const r=Kt(e);if(r[0]>=127)return hl.from(D7e(r));switch(r[0]){case 1:return hl.from($7e(r));case 2:return hl.from(L7e(r));case 3:return hl.from(F7e(r));case 4:return hl.from(W7e(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new hl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Ao.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};_c=new WeakMap,P0=new WeakMap,O0=new WeakMap,k0=new WeakMap,D0=new WeakMap,M0=new WeakMap,L0=new WeakMap,U0=new WeakMap,$0=new WeakMap,B0=new WeakMap,F0=new WeakMap,j0=new WeakMap,ng=new WeakMap,vh=new WeakMap,wl=new WeakMap,Eh=new WeakMap,W0=new WeakMap,z0=new WeakSet,JS=function(e,n){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return M7e(this,r);case 1:return B7e(this,r);case 2:return U7e(this,r);case 3:return j7e(this,r,n?this.blobs:null);case 4:return z7e(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let FI=hl;function Jg(t){return qr(id(t))}var H7e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const X7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),eW=4;function G7e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let _=1;_<r;_++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let _=0;_<d;_++)w=w<<1|u();let y=[],b=0,v=h;for(;;){let _=Math.floor(((w-b+1)*s-1)/v),I=0,x=r;for(;x-I>1;){let O=I+x>>>1;_<i[O]?x=O:I=O}if(I==0)break;y.push(I);let N=b+Math.floor(v*i[I]/s),S=b+Math.floor(v*i[I+1]/s)-1;for(;!((N^S)&f);)w=w<<1&g|u(),N=N<<1&g,S=S<<1&g|1;for(;N&~S&p;)w=w&f|w<<1&g>>>1|u(),N=N<<1^f,S=(S^f)<<1|f|1;b=N,v=1+S-N}let A=r-4;return y.map(_=>{switch(_-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return _-1}})}function q7e(t){let e=0;return()=>t[e++]}function Ite(t){return q7e(G7e(V7e(t)))}function V7e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function K7e(t){return t&1?~t>>1:t>>1}function Y7e(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=K7e(e());return n}function h_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Nte(t){return f_(()=>{let e=h_(t);if(e.length)return e})}function Tte(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(Q7e(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(J7e(n,t))}return e.flat()}function f_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Rte(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)Y7e(t,n).forEach((i,o)=>r[o].push(i));return r}function Q7e(t,e){let n=1+e(),r=e(),s=f_(e);return Rte(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function J7e(t,e){let n=1+e();return Rte(n,1+t,e).map(s=>[s[0],s.slice(1)])}function Z7e(t){let e=[],n=h_(t);return s(r([]),[]),e;function r(i){let o=t(),a=f_(()=>{let c=h_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function X7e(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Pte(t){return`{${X7e(t)}}`}function eWe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Kw(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function tWe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var nWe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const p_=44032,jI=4352,WI=4449,zI=4519,Ote=19,kte=21,Yw=28,HI=kte*Yw,rWe=Ote*HI,sWe=p_+rWe,iWe=jI+Ote,oWe=WI+kte,aWe=zI+Yw;function qv(t){return t>>24&255}function Dte(t){return t&16777215}let w5,tW,b5,ZS;function cWe(){let t=Ite(nWe);w5=new Map(Nte(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),tW=new Set(h_(t)),b5=new Map,ZS=new Map;for(let[e,n]of Tte(t)){if(!tW.has(e)&&n.length==2){let[r,s]=n,i=ZS.get(r);i||(i=new Map,ZS.set(r,i)),i.set(s,e)}b5.set(e,n.reverse())}}function Mte(t){return t>=p_&&t<sWe}function lWe(t,e){if(t>=jI&&t<iWe&&e>=WI&&e<oWe)return p_+(t-jI)*HI+(e-WI)*Yw;if(Mte(t)&&e>zI&&e<aWe&&(t-p_)%Yw==0)return t+(e-zI);{let n=ZS.get(t);return n&&(n=n.get(e),n)?n:-1}}function Lte(t){w5||cWe();let e=[],n=[],r=!1;function s(i){let o=w5.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Mte(i)){let o=i-p_,a=o/HI|0,c=o%HI/Yw|0,l=o%Yw;s(jI+a),s(WI+c),l>0&&s(zI+l)}else{let o=b5.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=qv(e[0]);for(let o=1;o<e.length;o++){let a=qv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=qv(e[--c]),i<=a))break}i=qv(e[o])}}return e}function uWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=qv(i),a=Dte(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=lWe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Ute(t){return Lte(t).map(Dte)}function dWe(t){return uWe(Lte(t))}const nW=45,$te=".",Bte=65039,Fte=1,GI=t=>Array.from(t);function g_(t,e){return t.P.has(e)||t.Q.has(e)}class hWe extends Array{get is_emoji(){return!0}}let v5,jte,Dp,E5,Wte,s0,c2,my,op,rW,C5;function w$(){if(v5)return;let t=Ite(H7e);const e=()=>h_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));v5=new Map(Tte(t)),jte=n(),Dp=e(),E5=new Set(e().map(u=>Dp[u])),Dp=new Set(Dp),Wte=n(),n();let s=Nte(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};s0=f_(u=>{let d=f_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Kw(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),c2=n(),my=new Map;let a=e().concat(GI(c2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),c2.has(u)||my.set(u,f)});for(let{V:u,M:d}of new Set(my.values())){let h=[];for(let p of u){let g=s0.filter(y=>g_(y,p)),w=h.find(({G:y})=>g.some(b=>y.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>GI(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,w)}}op=new Set;let c=new Set;const l=u=>op.has(u)?c.add(u):op.add(u);for(let u of s0){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of op)!my.has(u)&&!c.has(u)&&my.set(u,Fte);r(op,Ute(op)),rW=Z7e(t).map(u=>hWe.from(u)).sort(tWe),C5=new Map;for(let u of rW){let d=[C5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Bte?d.push(...f):d=f}for(let h of d)h.V=u}}function b$(t){return(zte(t)?"":`${v$(tR([t]))} `)+Pte(t)}function v$(t){return`"${t}"‎`}function fWe(t){if(t.length>=4&&t[2]==nW&&t[3]==nW)throw new Error(`invalid label extension: "${Kw(t.slice(0,4))}"`)}function pWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function gWe(t){let e=t[0],n=X7.get(e);if(n)throw kE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=X7.get(e);if(o){if(s==i)throw kE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw kE(`trailing ${n}`)}function tR(t,e=1/0,n=Pte){let r=[];mWe(t[0])&&r.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];zte(a)&&(r.push(Kw(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(Kw(t.slice(s,i))),r.join("")}function mWe(t){return w$(),Dp.has(t)}function zte(t){return w$(),Wte.has(t)}function yWe(t){return EWe(wWe(t,dWe,AWe))}function wWe(t,e,n){if(!t)return[];w$();let r=0;return t.split($te).map(s=>{let i=eWe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=_We(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(pWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))fWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Dp.has(u[0]))throw kE("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&Dp.has(w[0]))throw kE(`emoji + combining mark: "${Kw(a[g-1])} + ${tR([w[0]])}"`)}gWe(u);let f=GI(new Set(h)),[p]=vWe(f);CWe(p,h),bWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function bWe(t,e){let n,r=[];for(let s of e){let i=my.get(s);if(i===Fte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):GI(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>g_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function vWe(t){let e=s0;for(let n of t){let r=e.filter(s=>g_(s,n));if(!r.length)throw s0.some(s=>g_(s,n))?Gte(e[0],n):Hte(n);if(e=r,r.length==1)break}return e}function EWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${v$(tR(e,63))}: ${s}`)}return Kw(r)}).join($te)}function Hte(t){return new Error(`disallowed character: ${b$(t)}`)}function Gte(t,e){let n=b$(e),r=s0.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function kE(t){return new Error(`illegal placement: ${t}`)}function CWe(t,e){for(let n of e)if(!g_(t,n))throw Gte(t,n);if(t.M){let n=Ute(e);for(let r=1,s=n.length;r<s;r++)if(E5.has(n[r])){let i=r+1;for(let o;i<s&&E5.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${b$(o)}`);if(i-r>eW)throw new Error(`excessive non-spacing marks: ${v$(tR(n.slice(r-1,i)))} (${i-r}/${eW})`);r=i}}}function _We(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=SWe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(op.has(o))s.push(o);else{let a=v5.get(o);if(a)s.push(...a);else if(!jte.has(o))throw Hte(o)}}}return s.length&&r.push(e(s)),r}function AWe(t){return t.filter(e=>e!=Bte)}function SWe(t,e){let n=C5,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const qte=new Uint8Array(32);qte.fill(0);function sW(t){return Z(t.length!==0,"invalid ENS name; empty component","comp",t),t}function Vte(t){const e=id(xWe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(sW(e.slice(r,s))),r=s+1);return Z(r<e.length,"invalid ENS name; empty component","name",t),n.push(sW(e.slice(r))),n}function xWe(t){try{if(t.length===0)throw new Error("empty label");return yWe(t)}catch(e){Z(!1,`invalid ENS name (${e.message})`,"name",t)}}function _5(t){Z(typeof t=="string","invalid ENS name; not a string","name",t),Z(t.length,"invalid ENS name (empty label)","name",t);let e=qte;const n=Vte(t);for(;n.length;)e=qr(Or([e,qr(n.pop())]));return De(e)}function IWe(t,e){const n=e;return Z(n<=255,"DNS encoded label cannot exceed 255","length",n),De(Or(Vte(t).map(r=>{Z(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const Kte=new Uint8Array(32);Kte.fill(0);const NWe=BigInt(-1),Yte=BigInt(0),Qte=BigInt(1),TWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function RWe(t){const e=Kt(t),n=e.length%32;return n?Or([e,Kte.slice(n)]):De(e)}const PWe=If(Qte,32),OWe=If(Yte,32),iW={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},l2=["name","version","chainId","verifyingContract","salt"];function oW(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const kWe={name:oW("name"),version:oW("version"),chainId:function(t){const e=Je(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Tc(e)},verifyingContract:function(t){try{return xn(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Kt(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),De(e)}};function u2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Z(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Hv(TWe,n?r-1:r),i=n?(s+Qte)*NWe:Yte;return function(o){const a=Je(o,"value");return Z(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),If(n?Lee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Kt(r);return Z(s.length===n,`invalid length for ${t}`,"value",r),RWe(r)}}}switch(t){case"address":return function(e){return wd(xn(e),32)};case"bool":return function(e){return e?PWe:OWe};case"bytes":return function(e){return qr(e)};case"string":return function(e){return Jg(e)}}return null}function aW(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function oS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var T_,Lu,H0,eN,Jte;const Ca=class Ca{constructor(e){Q(this,eN);te(this,"primaryType");Q(this,T_);Q(this,Lu);Q(this,H0);L(this,Lu,new Map),L(this,H0,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=oS(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),L(this,T_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Z(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=oS(u.type).base;Z(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!u2(d)&&(Z(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),yt(this,{primaryType:o[0]});function a(c,l){Z(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),C(this,Lu).set(c,aW(c,i[c])+u.map(d=>aW(d,i[d])).join(""))}}get types(){return JSON.parse(C(this,T_))}getEncoder(e){let n=C(this,H0).get(e);return n||(n=he(this,eN,Jte).call(this,e),C(this,H0).set(e,n)),n}encodeType(e){const n=C(this,Lu).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return qr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(u2(e))return r(e,n);const s=oS(e).array;if(s)return Z(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Ca(e)}static getPrimaryType(e){return Ca.from(e).primaryType}static hashStruct(e,n,r){return Ca.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=iW[r];Z(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>l2.indexOf(r.name)-l2.indexOf(s.name)),Ca.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Or(["0x1901",Ca.hashDomain(e),Ca.from(n).hash(r)])}static hash(e,n,r){return qr(Ca.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!sr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Ca.from(n);o.visit(r,(a,c)=>(a==="address"&&!sr(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Ca.hashDomain(e);const s={},i=[];l2.forEach(c=>{const l=e[c];l!=null&&(s[c]=kWe[c](l),i.push({name:c,type:iW[c]}))});const o=Ca.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return De(Kt(l));if(c.match(/^u?int/))return Je(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Z(typeof l=="string","invalid string","value",l),l}Z(!1,"unsupported type","type",c)})}}};T_=new WeakMap,Lu=new WeakMap,H0=new WeakMap,eN=new WeakSet,Jte=function(e){{const s=u2(e);if(s)return s}const n=oS(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return C(this,Lu).has(s)&&(a=a.map(qr)),qr(Or(a))}}const r=this.types[e];if(r){const s=Jg(C(this,Lu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return C(this,Lu).has(c)?qr(l):l});return o.unshift(s),Or(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let qI=Ca;function Oi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const DWe="external public payable override",MWe=Oi(DWe.split(" ")),Zte="constant external internal payable private public pure view override",LWe=Oi(Zte.split(" ")),Xte="constructor error event fallback function receive struct",ene=Oi(Xte.split(" ")),tne="calldata memory storage payable indexed",UWe=Oi(tne.split(" ")),$We="tuple returns",BWe=[Xte,tne,$We,Zte].join(" "),FWe=Oi(BWe.split(" ")),jWe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},WWe=new RegExp("^(\\s*)"),zWe=new RegExp("^([0-9]+)"),HWe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),nne=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),rne=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Ls,Ac,R_,A5;const tN=class tN{constructor(e){Q(this,R_);Q(this,Ls);Q(this,Ac);L(this,Ls,0),L(this,Ac,e.slice())}get offset(){return C(this,Ls)}get length(){return C(this,Ac).length-C(this,Ls)}clone(){return new tN(C(this,Ac))}reset(){L(this,Ls,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=he(this,R_,A5).call(this,C(this,Ls)+1,e.match+1);return L(this,Ls,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;C(this,Ls)<e.match-1;){const r=this.peek().linkNext;n.push(he(this,R_,A5).call(this,C(this,Ls)+1,r)),L(this,Ls,r)}return L(this,Ls,e.match+1),n}peek(){if(C(this,Ls)>=C(this,Ac).length)throw new Error("out-of-bounds");return C(this,Ac)[C(this,Ls)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Sd(this,Ls)._++,e}toString(){const e=[];for(let n=C(this,Ls);n<C(this,Ac).length;n++){const r=C(this,Ac)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Ls=new WeakMap,Ac=new WeakMap,R_=new WeakSet,A5=function(e=0,n=0){return new tN(C(this,Ac).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Kc=tN;function $f(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(WWe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=jWe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Yt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(HWe),a){if(c.text=a[1],i+=c.text.length,FWe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(rne)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(zWe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Kc(e.map(o=>Object.freeze(o)))}function cW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function nR(t,e){if(e.peekKeyword(ene)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function bd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function sne(t){let e=bd(t,LWe);return cW(e,Oi("constant payable nonpayable".split(" "))),cW(e,Oi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function od(t,e){return t.popParams().map(n=>Gs.from(n,e))}function ine(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Je(t.pop().text);throw new Error("invalid gas")}return null}function Zg(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const GWe=new RegExp(/^(.*)\[([0-9]*)\]$/);function lW(t){const e=t.match(rne);if(Z(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Z(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Z(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const wr={},So=Symbol.for("_ethers_internal"),uW="_ParamTypeInternal",dW="_ErrorInternal",hW="_EventInternal",fW="_ConstructorInternal",pW="_FallbackInternal",gW="_FunctionInternal",mW="_StructInternal";var G0,XS;const _a=class _a{constructor(e,n,r,s,i,o,a,c){Q(this,G0);te(this,"name");te(this,"type");te(this,"baseType");te(this,"indexed");te(this,"components");te(this,"arrayLength");te(this,"arrayChildren");if(qT(e,wr,"ParamType"),Object.defineProperty(this,So,{value:uW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");yt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return he(this,G0,XS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(_a.isParamType(e))return e;if(typeof e=="string")try{return _a.from($f(e),n)}catch{Z(!1,"invalid param type","obj",e)}else if(e instanceof Kc){let a="",c="",l=null;bd(e,Oi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>_a.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=lW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new _a(wr,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(bd(e,UWe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new _a(wr,p,a,c,h,l,d,u)}const r=e.name;Z(!r||typeof r=="string"&&r.match(nne),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Z(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(GWe);if(o){const a=parseInt(o[2]||"-1"),c=_a.from({type:o[1],components:e.components});return new _a(wr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>_a.from(l)):null;return new _a(wr,r||"",i,"tuple",s,a,null,null)}return i=lW(e.type),new _a(wr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[So]===uW}};G0=new WeakSet,XS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;he(u=o,G0,XS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;he(u=o[l],G0,XS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Gs=_a;class Xg{constructor(e,n,r){te(this,"type");te(this,"inputs");qT(e,wr,"Fragment"),r=Object.freeze(r.slice()),yt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Xg.from(JSON.parse(e))}catch{}return Xg.from($f(e))}if(e instanceof Kc)switch(e.peekKeyword(ene)){case"constructor":return Ju.from(e);case"error":return po.from(e);case"event":return Ml.from(e);case"fallback":case"receive":return Tu.from(e);case"function":return Ll.from(e);case"struct":return vg.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return Ju.from(e);case"error":return po.from(e);case"event":return Ml.from(e);case"fallback":case"receive":return Tu.from(e);case"function":return Ll.from(e);case"struct":return vg.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Z(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Ju.isFragment(e)}static isError(e){return po.isFragment(e)}static isEvent(e){return Ml.isFragment(e)}static isFunction(e){return Ll.isFragment(e)}static isStruct(e){return vg.isFragment(e)}}class rR extends Xg{constructor(n,r,s,i){super(n,r,i);te(this,"name");Z(typeof s=="string"&&s.match(nne),"invalid identifier","name",s),i=Object.freeze(i.slice()),yt(this,{name:s})}}function m_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class po extends rR{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,So,{value:dW})}get selector(){return Jg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+m_(e,this.inputs)),n.join(" ")}static from(e){if(po.isFragment(e))return e;if(typeof e=="string")return po.from($f(e));if(e instanceof Kc){const n=nR("error",e),r=od(e);return Zg(e),new po(wr,n,r)}return new po(wr,e.name,e.inputs?e.inputs.map(Gs.from):[])}static isFragment(e){return e&&e[So]===dW}}class Ml extends rR{constructor(n,r,s,i){super(n,"event",r,s);te(this,"anonymous");Object.defineProperty(this,So,{value:hW}),yt(this,{anonymous:i})}get topicHash(){return Jg(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+m_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Gs.from(i)),new Ml(wr,n,r,!1).topicHash}static from(n){if(Ml.isFragment(n))return n;if(typeof n=="string")try{return Ml.from($f(n))}catch{Z(!1,"invalid event fragment","obj",n)}else if(n instanceof Kc){const r=nR("event",n),s=od(n,!0),i=!!bd(n,Oi(["anonymous"])).has("anonymous");return Zg(n),new Ml(wr,r,s,i)}return new Ml(wr,n.name,n.inputs?n.inputs.map(r=>Gs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[So]===hW}}class Ju extends Xg{constructor(n,r,s,i,o){super(n,r,s);te(this,"payable");te(this,"gas");Object.defineProperty(this,So,{value:fW}),yt(this,{payable:i,gas:o})}format(n){if(me(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${m_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(Ju.isFragment(n))return n;if(typeof n=="string")try{return Ju.from($f(n))}catch{Z(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Kc){bd(n,Oi(["constructor"]));const r=od(n),s=!!bd(n,MWe).has("payable"),i=ine(n);return Zg(n),new Ju(wr,"constructor",r,s,i)}return new Ju(wr,"constructor",n.inputs?n.inputs.map(Gs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[So]===fW}}class Tu extends Xg{constructor(n,r,s){super(n,"fallback",r);te(this,"payable");Object.defineProperty(this,So,{value:pW}),yt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Tu.isFragment(n))return n;if(typeof n=="string")try{return Tu.from($f(n))}catch{Z(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Kc){const r=n.toString(),s=n.peekKeyword(Oi(["fallback","receive"]));if(Z(s,"type must be fallback or receive","obj",r),n.popKeyword(Oi(["fallback","receive"]))==="receive"){const c=od(n);return Z(c.length===0,"receive cannot have arguments","obj.inputs",c),bd(n,Oi(["payable"])),Zg(n),new Tu(wr,[],!0)}let o=od(n);o.length?Z(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Gs.from("bytes")];const a=sne(n);if(Z(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),bd(n,Oi(["returns"])).has("returns")){const c=od(n);Z(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Zg(n),new Tu(wr,o,a==="payable")}if(n.type==="receive")return new Tu(wr,[],!0);if(n.type==="fallback"){const r=[Gs.from("bytes")],s=n.stateMutability==="payable";return new Tu(wr,r,s)}Z(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[So]===pW}}class Ll extends rR{constructor(n,r,s,i,o,a){super(n,"function",r,i);te(this,"constant");te(this,"outputs");te(this,"stateMutability");te(this,"payable");te(this,"gas");Object.defineProperty(this,So,{value:gW}),o=Object.freeze(o.slice()),yt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Jg(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+m_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(m_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Gs.from(i)),new Ll(wr,n,"view",r,[],null).selector}static from(n){if(Ll.isFragment(n))return n;if(typeof n=="string")try{return Ll.from($f(n))}catch{Z(!1,"invalid function fragment","obj",n)}else if(n instanceof Kc){const s=nR("function",n),i=od(n),o=sne(n);let a=[];bd(n,Oi(["returns"])).has("returns")&&(a=od(n));const c=ine(n);return Zg(n),new Ll(wr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Ll(wr,n.name,r,n.inputs?n.inputs.map(Gs.from):[],n.outputs?n.outputs.map(Gs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[So]===gW}}class vg extends rR{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,So,{value:mW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return vg.from($f(e))}catch{Z(!1,"invalid struct fragment","obj",e)}else if(e instanceof Kc){const n=nR("struct",e),r=od(e);return Zg(e),new vg(wr,n,r)}return new vg(wr,e.name,e.inputs?e.inputs.map(Gs.from):[])}static isFragment(e){return e&&e[So]===mW}}const Jc=new Map;Jc.set(0,"GENERIC_PANIC");Jc.set(1,"ASSERT_FALSE");Jc.set(17,"OVERFLOW");Jc.set(18,"DIVIDE_BY_ZERO");Jc.set(33,"ENUM_RANGE_ERROR");Jc.set(34,"BAD_STORAGE_DATA");Jc.set(49,"STACK_UNDERFLOW");Jc.set(50,"ARRAY_RANGE_ERROR");Jc.set(65,"OUT_OF_MEMORY");Jc.set(81,"UNINITIALIZED_FUNCTION_CALL");const qWe=new RegExp(/^bytes([0-9]*)$/),VWe=new RegExp(/^(u?int)([0-9]*)$/);let d2=null,yW=1024;function KWe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Kt(n);if(n=De(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(De(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(De(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${Jc.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?xn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=xn(e.from)),fr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var Ch,yy;const nN=class nN{constructor(){Q(this,Ch)}getDefaultValue(e){const n=e.map(s=>he(this,Ch,yy).call(this,Gs.from(s)));return new iS(n,"_").defaultValue()}encode(e,n){kee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>he(this,Ch,yy).call(this,Gs.from(o))),s=new iS(r,"_"),i=new u5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>he(this,Ch,yy).call(this,Gs.from(o)));return new iS(s,"_").decode(new d5(n,r,yW))}static _setDefaultMaxInflation(e){Z(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),yW=e}static defaultAbiCoder(){return d2==null&&(d2=new nN),d2}static getBuiltinCallException(e,n,r){return KWe(e,n,r,nN.defaultAbiCoder())}};Ch=new WeakSet,yy=function(e){if(e.isArray())return new h7e(he(this,Ch,yy).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new iS(e.components.map(r=>he(this,Ch,yy).call(this,r)),e.name);switch(e.baseType){case"address":return new u7e(e.name);case"bool":return new f7e(e.name);case"string":return new C7e(e.name);case"bytes":return new p7e(e.name);case"":return new y7e(e.name)}let n=e.type.match(VWe);if(n){let r=parseInt(n[2]||"256");return Z(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new E7e(r/8,n[1]==="int",e.name)}if(n=e.type.match(qWe),n){let r=parseInt(n[1]);return Z(r!==0&&r<=32,"invalid bytes length","param",e),new g7e(r,e.name)}Z(!1,"invalid type","type",e.type)};let y_=nN;class YWe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"signature");te(this,"topic");te(this,"args");const s=e.name,i=e.format();yt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class QWe{constructor(e,n,r,s){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");te(this,"value");const i=e.name,o=e.format();yt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class JWe{constructor(e,n,r){te(this,"fragment");te(this,"name");te(this,"args");te(this,"signature");te(this,"selector");const s=e.name,i=e.format();yt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class wW{constructor(e){te(this,"hash");te(this,"_isIndexed");yt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const bW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},vW={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&bW[t.toString()]&&(e=bW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var bl,vl,El,ii,ql,ex,tx;const wp=class wp{constructor(e){Q(this,ql);te(this,"fragments");te(this,"deploy");te(this,"fallback");te(this,"receive");Q(this,bl);Q(this,vl);Q(this,El);Q(this,ii);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,L(this,El,new Map),L(this,bl,new Map),L(this,vl,new Map);const r=[];for(const o of n)try{r.push(Xg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}yt(this,{fragments:Object.freeze(r)});let s=null,i=!1;L(this,ii,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}yt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Z(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=C(this,El);break;case"event":c=C(this,vl);break;case"error":c=C(this,bl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||yt(this,{deploy:Ju.from("constructor()")}),yt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return y_.defaultAbiCoder()}getFunctionName(e){const n=he(this,ql,ex).call(this,e,null,!1);return Z(n,"no matching function","key",e),n.name}hasFunction(e){return!!he(this,ql,ex).call(this,e,null,!1)}getFunction(e,n){return he(this,ql,ex).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(C(this,El).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,El).get(s),r)}}getEventName(e){const n=he(this,ql,tx).call(this,e,null,!1);return Z(n,"no matching event","key",e),n.name}hasEvent(e){return!!he(this,ql,tx).call(this,e,null,!1)}getEvent(e,n){return he(this,ql,tx).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(C(this,vl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,vl).get(s),r)}}getError(e,n){if(sr(e)){const s=e.toLowerCase();if(vW[s])return po.from(vW[s].signature);for(const i of C(this,bl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of C(this,bl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?po.from("error Error(string)"):e==="Panic"?po.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Z(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=po.from(e).format(),e==="Error(string)")return po.from("error Error(string)");if(e==="Panic(uint256)")return po.from("error Panic(uint256)");const r=C(this,bl).get(e);return r||null}forEachError(e){const n=Array.from(C(this,bl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(C(this,bl).get(s),r)}}_decodeParams(e,n){return C(this,ii).decode(e,n)}_encodeParams(e,n){return C(this,ii).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Z(Ir(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Ir(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Or([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Z(Ir(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Ir(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Or([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Z(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Ni(n);if(s.length%32===0)try{return C(this,ii).decode(e.outputs,s)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:De(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Kt(e,"data"),s=y_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=De(r.slice(0,4)),c=this.getError(a);if(c)try{const l=C(this,ii).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return De(C(this,ii).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Z(i,"unknown event","eventFragment",e),e=i}me(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Jg(o):i.type==="bytes"?qr(De(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=If(o):i.type.match(/^bytes/)?o=yje(o,32):i.type==="address"&&C(this,ii).encode(["address"],[o]),wd(De(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Z(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Z(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Z(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Z(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Jg(c));else if(o.type==="bytes")r.push(qr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(C(this,ii).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:C(this,ii).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Z(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Z(sr(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Gs.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?C(this,ii).decode(s,Or(r)):null,c=C(this,ii).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new wW(null);else if(o[p])g=new wW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),zw.fromItems(l,u)}parseTransaction(e){const n=Kt(e.data,"tx.data"),r=Je(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(De(n.slice(0,4)));if(!s)return null;const i=C(this,ii).decode(s.inputs,n.slice(4));return new QWe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new YWe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=De(e),r=this.getError(Ir(n,0,4));if(!r)return null;const s=C(this,ii).decode(r.inputs,Ir(n,4));return new JWe(r,r.selector,s)}static from(e){return e instanceof wp?e:typeof e=="string"?new wp(JSON.parse(e)):typeof e.formatJson=="function"?new wp(e.formatJson()):typeof e.format=="function"?new wp(e.format("json")):new wp(e)}};bl=new WeakMap,vl=new WeakMap,El=new WeakMap,ii=new WeakMap,ql=new WeakSet,ex=function(e,n,r){if(sr(e)){const i=e.toLowerCase();for(const o of C(this,El).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,El))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ui.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ui.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,El).get(Ll.from(e).format());return s||null},tx=function(e,n,r){if(sr(e)){const i=e.toLowerCase();for(const o of C(this,vl).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of C(this,vl))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ui.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=C(this,vl).get(Ml.from(e).format());return s||null};let S5=wp;const one=BigInt(0);function i0(t){return t??null}function Mr(t){return t==null?null:t.toString()}class EW{constructor(e,n,r){te(this,"gasPrice");te(this,"maxFeePerGas");te(this,"maxPriorityFeePerGas");yt(this,{gasPrice:i0(e),maxFeePerGas:i0(n),maxPriorityFeePerGas:i0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Mr(e),maxFeePerGas:Mr(n),maxPriorityFeePerGas:Mr(r)}}}function VI(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=De(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Je(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Yt(t[s],`request.${s}`));return t.accessList&&(e.accessList=_m(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>a$(s)?De(s):Object.assign({},s))),e}var Uu;class ZWe{constructor(e,n){te(this,"provider");te(this,"number");te(this,"hash");te(this,"timestamp");te(this,"parentHash");te(this,"parentBeaconBlockRoot");te(this,"nonce");te(this,"difficulty");te(this,"gasLimit");te(this,"gasUsed");te(this,"stateRoot");te(this,"receiptsRoot");te(this,"blobGasUsed");te(this,"excessBlobGas");te(this,"miner");te(this,"prevRandao");te(this,"extraData");te(this,"baseFeePerGas");Q(this,Uu);L(this,Uu,e.transactions.map(r=>typeof r!="string"?new w_(r,n):r)),yt(this,{provider:n,hash:i0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:i0(e.prevRandao),extraData:e.extraData,baseFeePerGas:i0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return C(this,Uu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=C(this,Uu).slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Mr(e),difficulty:Mr(n),extraData:r,gasLimit:Mr(s),gasUsed:Mr(i),blobGasUsed:Mr(this.blobGasUsed),excessBlobGas:Mr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return C(this,Uu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=C(this,Uu)[e];else{const r=e.toLowerCase();for(const s of C(this,Uu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Z(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return XWe(this)}}Uu=new WeakMap;class D1{constructor(e,n){te(this,"provider");te(this,"transactionHash");te(this,"blockHash");te(this,"blockNumber");te(this,"removed");te(this,"address");te(this,"data");te(this,"topics");te(this,"index");te(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());yt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return eze(this)}}var P_;class ane{constructor(e,n){te(this,"provider");te(this,"to");te(this,"from");te(this,"contractAddress");te(this,"hash");te(this,"index");te(this,"blockHash");te(this,"blockNumber");te(this,"logsBloom");te(this,"gasUsed");te(this,"blobGasUsed");te(this,"cumulativeGasUsed");te(this,"gasPrice");te(this,"blobGasPrice");te(this,"type");te(this,"status");te(this,"root");Q(this,P_);L(this,P_,Object.freeze(e.logs.map(s=>new D1(s,n))));let r=one;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),yt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return C(this,P_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Mr(this.cumulativeGasUsed),from:n,gasPrice:Mr(this.gasPrice),blobGasUsed:Mr(this.blobGasUsed),blobGasPrice:Mr(this.blobGasPrice),gasUsed:Mr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return lne(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),cne(this,e)}}P_=new WeakMap;var _h;const O$=class O${constructor(e,n){te(this,"provider");te(this,"blockNumber");te(this,"blockHash");te(this,"index");te(this,"hash");te(this,"type");te(this,"to");te(this,"from");te(this,"nonce");te(this,"gasLimit");te(this,"gasPrice");te(this,"maxPriorityFeePerGas");te(this,"maxFeePerGas");te(this,"maxFeePerBlobGas");te(this,"data");te(this,"value");te(this,"chainId");te(this,"signature");te(this,"accessList");te(this,"blobVersionedHashes");te(this,"authorizationList");Q(this,_h);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,L(this,_h,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Mr(this.chainId),data:l,from:a,gasLimit:Mr(this.gasLimit),gasPrice:Mr(this.gasPrice),hash:s,maxFeePerGas:Mr(this.maxFeePerGas),maxPriorityFeePerGas:Mr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Mr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Mr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await Ai({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=C(this,_h),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await Ai({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<C(this,_h)&&(o=C(this,_h)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const y=await g.getTransaction(w);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(y.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?v="repriced":y.data==="0x"&&y.from===y.to&&y.value===one&&(v="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(fr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const w=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const y=async()=>{try{await c()}catch(b){if(js(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),lne(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),cne(this,e)}replaceableTransaction(e){Z(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new O$(this,this.provider);return L(n,_h,e),n}};_h=new WeakMap;let w_=O$;function XWe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function cne(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function lne(t){return{orphan:"drop-transaction",tx:t}}function eze(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class E$ extends D1{constructor(n,r,s){super(n,n.provider);te(this,"interface");te(this,"fragment");te(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);yt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class une extends D1{constructor(n,r){super(n,n.provider);te(this,"error");yt(this,{error:r})}}var q0;class tze extends ane{constructor(n,r,s){super(s,r);Q(this,q0);L(this,q0,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?C(this,q0).getEvent(n.topics[0]):null;if(r)try{return new E$(n,C(this,q0),r)}catch(s){return new une(n,s)}return n})}}q0=new WeakMap;var O_;class C$ extends w_{constructor(n,r,s){super(s,r);Q(this,O_);L(this,O_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new tze(C(this,O_),this.provider,s)}}O_=new WeakMap;class dne extends Uee{constructor(n,r,s,i){super(n,r,s);te(this,"log");yt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class nze extends dne{constructor(e,n,r,s,i){super(e,n,r,new E$(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);yt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const CW=BigInt(0);function hne(t){return t&&typeof t.call=="function"}function fne(t){return t&&typeof t.estimateGas=="function"}function sR(t){return t&&typeof t.resolveName=="function"}function pne(t){return t&&typeof t.sendTransaction=="function"}function gne(t){if(t!=null){if(sR(t))return t;if(t.provider)return t.provider}}var k_;class rze{constructor(e,n,r){Q(this,k_);te(this,"fragment");if(yt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=em(e.runner,"resolveName"),i=sR(s)?s:null;L(this,k_,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Pi(h,i))):Pi(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return C(this,k_)}}k_=new WeakMap;function em(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Mp(t){return t==null?null:t.provider||null}async function mne(t,e){const n=ui.dereference(t,"overrides");Z(typeof n=="object","invalid overrides parameter","overrides",t);const r=VI(n);return Z(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Z(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function sze(t,e,n){const r=em(t,"resolveName"),s=sR(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ui.dereference(c,a),a==="address"?Pi(c,s):c))))}function ize(t){const e=async function(o){const a=await mne(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Pi(a.from,gne(t.runner)));const c=t.interface,l=Je(a.value||CW,"overrides.value")===CW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Z(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Z(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=em(t.runner,"call");me(hne(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw o$(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;me(pne(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Mp(t.runner);return new C$(t.interface,l,c)},s=async function(o){const a=em(t.runner,"estimateGas");return me(fne(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return yt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function oze(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return me(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await mne(l.pop()),d.from&&(d.from=await Pi(d.from,gne(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await sze(t.runner,u.inputs,l);return Object.assign({},d,await Ai({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;me(pne(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Mp(t.runner);return new C$(t.interface,h,d)},o=async function(...l){const u=em(t.runner,"estimateGas");return me(fne(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=em(t.runner,"call");me(hne(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw o$(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return yt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return me(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function aze(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new rze(t,n(...s),s)};return yt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const KI=Symbol.for("_ethersInternal_contract"),yne=new WeakMap;function cze(t,e){yne.set(t[KI],e)}function Fo(t){return yne.get(t[KI])}function lze(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function _$(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(sr(o,32))return o;const a=t.interface.getEvent(o);return Z(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?sr(e,32)?n=[e]:(r=t.interface.getEvent(e),Z(r,"unknown fragment","event",e),n=[r.topicHash]):lze(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Z(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Vv(t,e){const{subs:n}=Fo(t);return n.get((await _$(t,e)).tag)||null}async function _W(t,e,n){const r=Mp(t.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await _$(t,n),{addr:a,subs:c}=Fo(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let y=s;if(y==null)try{y=t.interface.getEvent(w.topics[0])}catch{}if(y){const b=y,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];I5(t,n,v,A=>new nze(t,A,n,b,w))}else I5(t,n,[],b=>new dne(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let x5=Promise.resolve();async function uze(t,e,n,r){await x5;const s=await Vv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),Fo(t).subs.delete(s.tag)),i>0}async function I5(t,e,n,r){try{await x5}catch{}const s=uze(t,e,n,r);return x5=s,await s}const aS=["then"];var uz;uz=KI;const DE=class DE{constructor(e,n,r,s){te(this,"target");te(this,"interface");te(this,"runner");te(this,"filters");te(this,uz);te(this,"fallback");Z(typeof e=="string"||Cte(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=S5.from(n);yt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,KI,{value:{}});let o,a=null,c=null;if(s){const d=Mp(r);c=new C$(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(sr(e))a=e,o=Promise.resolve(e);else{const d=em(r,"resolveName");if(!sR(d))throw fr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw fr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return Fo(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return Fo(this).addr=d,d});cze(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||aS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!js(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>aS.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return yt(this,{filters:u}),yt(this,{fallback:i.receive||i.fallback?ize(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||aS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!js(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||aS.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new DE(this.target,this.interface,e)}attach(e){return new DE(e,this.interface,this.runner)}async getAddress(){return await Fo(this).addrPromise}async getDeployedCode(){const e=Mp(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Mp(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return Fo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),oze(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),aze(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=Fo(this),o=s||await i,{fragment:a,topics:c}=await _$(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Mp(this.runner);return me(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new E$(d,this.interface,h)}catch(f){return new une(d,f)}return new D1(d,u)})}async on(e,n){const r=await _W(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await _W(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await I5(this,e,n,null)}async listenerCount(e){if(e){const s=await Vv(this,e);return s?s.listeners.length:0}const{subs:n}=Fo(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Vv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=Fo(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Vv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),Fo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Vv(this,e);if(!n)return this;n.stop(),Fo(this).subs.delete(n.tag)}else{const{subs:n}=Fo(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends DE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let N5=DE;function dze(){return N5}class o0 extends dze(){}function h2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Z(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class hze{constructor(e){te(this,"name");yt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const wne=new RegExp("^(ipfs)://(.*)$","i"),AW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),wne,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Ah,rg,Sh,wy,rN,bne;const Fy=class Fy{constructor(e,n,r){Q(this,Sh);te(this,"provider");te(this,"address");te(this,"name");Q(this,Ah);Q(this,rg);yt(this,{provider:e,address:n,name:r}),L(this,Ah,null),L(this,rg,new o0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return C(this,Ah)==null&&L(this,Ah,(async()=>{try{return await C(this,rg).supportsInterface("0x9061b923")}catch(e){if(js(e,"CALL_EXCEPTION"))return!1;throw L(this,Ah,null),e}})()),await C(this,Ah)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await he(this,Sh,wy).call(this,"addr(bytes32)");return i==null||i===u_?null:i}catch(i){if(js(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await he(this,Sh,wy).call(this,"addr(bytes32,uint)",[i]);if(sr(o,20))return xn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof hze&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await he(this,Sh,wy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await he(this,Sh,wy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await he(this,Sh,wy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${vje("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<AW.length;r++){const s=n.match(AW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=h2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new o0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",If(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=h2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Nf(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:De(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(wne)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=h2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await he(s=Fy,rN,bne).call(s,e,r);if(i!=null){const o=new Fy(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Ah=new WeakMap,rg=new WeakMap,Sh=new WeakSet,wy=async function(e,n){n=(n||[]).slice();const r=C(this,rg).interface;n.unshift(_5(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),me(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[IWe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await C(this,rg)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!js(i,"CALL_EXCEPTION"))throw i}return null},rN=new WeakSet,bne=async function(e,n){const r=await Fy.getEnsAddress(e);try{const i=await new o0(r,["function resolver(bytes32) view returns (address)"],e).resolver(_5(n),{enableCcipRead:!0});return i===u_?null:i}catch(s){throw s}return null},Q(Fy,rN);let YI=Fy;const SW=BigInt(0);function rn(t,e){return function(n){return n==null?e:t(n)}}function b_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function M1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function fze(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Z(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function Qw(t){return Z(sr(t,!0),"invalid data","value",t),t}function Fs(t){return Z(sr(t,32),"invalid hash","value",t),t}const pze=M1({address:xn,blockHash:Fs,blockNumber:Yt,data:Qw,index:Yt,removed:rn(fze,!1),topics:b_(Fs),transactionHash:Fs,transactionIndex:Yt},{index:["logIndex"]});function gze(t){return pze(t)}const mze=M1({hash:rn(Fs),parentHash:Fs,parentBeaconBlockRoot:rn(Fs,null),number:Yt,timestamp:Yt,nonce:rn(Qw),difficulty:Je,gasLimit:Je,gasUsed:Je,stateRoot:rn(Fs,null),receiptsRoot:rn(Fs,null),blobGasUsed:rn(Je,null),excessBlobGas:rn(Je,null),miner:rn(xn),prevRandao:rn(Fs,null),extraData:Qw,baseFeePerGas:rn(Je)},{prevRandao:["mixHash"]});function yze(t){const e=mze(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:vne(n)),e}const wze=M1({transactionIndex:Yt,blockNumber:Yt,transactionHash:Fs,address:xn,topics:b_(Fs),data:Qw,index:Yt,blockHash:Fs},{index:["logIndex"]});function bze(t){return wze(t)}const vze=M1({to:rn(xn,null),from:rn(xn,null),contractAddress:rn(xn,null),index:Yt,root:rn(De),gasUsed:Je,blobGasUsed:rn(Je,null),logsBloom:rn(Qw),blockHash:Fs,hash:Fs,logs:b_(bze),blockNumber:Yt,cumulativeGasUsed:Je,effectiveGasPrice:rn(Je),blobGasPrice:rn(Je,null),status:rn(Yt),type:rn(Yt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Eze(t){return vze(t)}function vne(t){t.to&&Je(t.to)===SW&&(t.to="0x0000000000000000000000000000000000000000");const e=M1({hash:Fs,index:rn(Yt,void 0),type:n=>n==="0x"||n==null?0:Yt(n),accessList:rn(_m,null),blobVersionedHashes:rn(b_(Fs,!0),null),authorizationList:rn(b_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:xn(n.address),chainId:Je(n.chainId),nonce:Je(n.nonce),signature:Ao.from(r)}},!1),null),blockHash:rn(Fs,null),blockNumber:rn(Yt,null),transactionIndex:rn(Yt,null),from:xn,gasPrice:rn(Je),maxPriorityFeePerGas:rn(Je),maxFeePerGas:rn(Je),maxFeePerBlobGas:rn(Je,null),gasLimit:Je,to:rn(xn,null),value:Je,nonce:Yt,data:Qw,creates:rn(xn,null),chainId:rn(Je,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=l7e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Ao.from(t.signature):e.signature=Ao.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Je(e.blockHash)===SW&&(e.blockHash=null),e}const Cze="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class L1{constructor(e){te(this,"name");yt(this,{name:e})}clone(){return new L1(this.name)}}class iR extends L1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);te(this,"effectiveBlock");te(this,"txBase");te(this,"txCreate");te(this,"txDataZero");te(this,"txDataNonzero");te(this,"txAccessListStorageKey");te(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Z(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),yt(this,s)}clone(){return new iR(this.effectiveBlock,this)}}class oR extends L1{constructor(n,r){super("org.ethers.plugins.network.Ens");te(this,"address");te(this,"targetNetwork");yt(this,{address:n||Cze,targetNetwork:r??1})}clone(){return new oR(this.address,this.targetNetwork)}}var D_,M_;class _ze extends L1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Q(this,D_);Q(this,M_);L(this,D_,n),L(this,M_,r)}get url(){return C(this,D_)}get processFunc(){return C(this,M_)}clone(){return this}}D_=new WeakMap,M_=new WeakMap;const f2=new Map;var V0,K0,xh;const jy=class jy{constructor(e,n){Q(this,V0);Q(this,K0);Q(this,xh);L(this,V0,e),L(this,K0,Je(n)),L(this,xh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return C(this,V0)}set name(e){L(this,V0,e)}get chainId(){return C(this,K0)}set chainId(e){L(this,K0,Je(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Je(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Je(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Je(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(C(this,xh).values())}attachPlugin(e){if(C(this,xh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,xh).set(e.name,e.clone()),this}getPlugin(e){return C(this,xh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new jy(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new iR;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=_m(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(Aze(),e==null)return jy.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=f2.get(e);if(n)return n();if(typeof e=="bigint")return new jy("unknown",e);Z(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Z(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new jy(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new oR(e.ensAddress,e.ensNetwork)),n}Z(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=f2.get(e);r&&Z(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),f2.set(e,n)}};V0=new WeakMap,K0=new WeakMap,xh=new WeakMap;let $l=jy;function xW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function IW(t){return new _ze(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:xW(a.maxFee,9),maxPriorityFeePerGas:xW(a.maxPriorityFee,9)}}catch(i){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let NW=!1;function Aze(){if(NW)return;NW=!0;function t(e,n,r){const s=function(){const i=new $l(e,n);return r.ensNetwork!=null&&i.attachPlugin(new oR(null,r.ensNetwork)),i.attachPlugin(new iR),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};$l.register(e,s),$l.register(n,s),r.altNames&&r.altNames.forEach(i=>{$l.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[IW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[IW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function T5(t){return JSON.parse(JSON.stringify(t))}var $u,xa,Ih,Cl,Y0,nx;class Sze{constructor(e){Q(this,Y0);Q(this,$u);Q(this,xa);Q(this,Ih);Q(this,Cl);L(this,$u,e),L(this,xa,null),L(this,Ih,4e3),L(this,Cl,-2)}get pollingInterval(){return C(this,Ih)}set pollingInterval(e){L(this,Ih,e)}start(){C(this,xa)||(L(this,xa,C(this,$u)._setTimeout(he(this,Y0,nx).bind(this),C(this,Ih))),he(this,Y0,nx).call(this))}stop(){C(this,xa)&&(C(this,$u)._clearTimeout(C(this,xa)),L(this,xa,null))}pause(e){this.stop(),e&&L(this,Cl,-2)}resume(){this.start()}}$u=new WeakMap,xa=new WeakMap,Ih=new WeakMap,Cl=new WeakMap,Y0=new WeakSet,nx=async function(){try{const e=await C(this,$u).getBlockNumber();if(C(this,Cl)===-2){L(this,Cl,e);return}if(e!==C(this,Cl)){for(let n=C(this,Cl)+1;n<=e;n++){if(C(this,xa)==null)return;await C(this,$u).emit("block",n)}L(this,Cl,e)}}catch{}C(this,xa)!=null&&L(this,xa,C(this,$u)._setTimeout(he(this,Y0,nx).bind(this),C(this,Ih)))};var sg,ig,Nh;class A${constructor(e){Q(this,sg);Q(this,ig);Q(this,Nh);L(this,sg,e),L(this,Nh,!1),L(this,ig,n=>{this._poll(n,C(this,sg))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){C(this,Nh)||(L(this,Nh,!0),C(this,ig).call(this,-2),C(this,sg).on("block",C(this,ig)))}stop(){C(this,Nh)&&(L(this,Nh,!1),C(this,sg).off("block",C(this,ig)))}pause(e){this.stop()}resume(){this.start()}}sg=new WeakMap,ig=new WeakMap,Nh=new WeakMap;var Q0,Bu;class xze extends A${constructor(n,r){super(n);Q(this,Q0);Q(this,Bu);L(this,Q0,r),L(this,Bu,-2)}pause(n){n&&L(this,Bu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(C(this,Q0));s!=null&&(C(this,Bu)===-2?L(this,Bu,s.number):s.number>C(this,Bu)&&(r.emit(C(this,Q0),s.number),L(this,Bu,s.number)))}}Q0=new WeakMap,Bu=new WeakMap;var sN;class Ize extends A${constructor(n,r){super(n);Q(this,sN);L(this,sN,T5(r))}async _poll(n,r){throw new Error("@TODO")}}sN=new WeakMap;var J0;class Nze extends A${constructor(n,r){super(n);Q(this,J0);L(this,J0,r)}async _poll(n,r){const s=await r.getTransactionReceipt(C(this,J0));s&&r.emit(C(this,J0),s)}}J0=new WeakMap;var Fu,Z0,X0,Th,Ia,iN,Ene;class S${constructor(e,n){Q(this,iN);Q(this,Fu);Q(this,Z0);Q(this,X0);Q(this,Th);Q(this,Ia);L(this,Fu,e),L(this,Z0,T5(n)),L(this,X0,he(this,iN,Ene).bind(this)),L(this,Th,!1),L(this,Ia,-2)}start(){C(this,Th)||(L(this,Th,!0),C(this,Ia)===-2&&C(this,Fu).getBlockNumber().then(e=>{L(this,Ia,e)}),C(this,Fu).on("block",C(this,X0)))}stop(){C(this,Th)&&(L(this,Th,!1),C(this,Fu).off("block",C(this,X0)))}pause(e){this.stop(),e&&L(this,Ia,-2)}resume(){this.start()}}Fu=new WeakMap,Z0=new WeakMap,X0=new WeakMap,Th=new WeakMap,Ia=new WeakMap,iN=new WeakSet,Ene=async function(e){if(C(this,Ia)===-2)return;const n=T5(C(this,Z0));n.fromBlock=C(this,Ia)+1,n.toBlock=e;const r=await C(this,Fu).getLogs(n);if(r.length===0){C(this,Ia)<e-60&&L(this,Ia,e-60);return}for(const s of r)C(this,Fu).emit(C(this,Z0),s),L(this,Ia,s.blockNumber)};const Tze=BigInt(2),Rze=10;function cS(t){return t&&typeof t.then=="function"}function rx(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class Cne{constructor(e){te(this,"name");yt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Pze(t){return JSON.parse(JSON.stringify(t))}function R5(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function p2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(sr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:rx("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:rx("orphan",n),filter:Pze(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?R5(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{sr(a)?s.push(a):i.push((async()=>{s.push(await Pi(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=R5(s.map(a=>a.toLowerCase()))}return{filter:r,tag:rx("event",r),type:"event"}}Z(!1,"unknown ProviderEvent","event",t)}function g2(){return new Date().getTime()}const Oze={cacheTimeout:250,pollingInterval:4e3};var oi,Rh,ai,ew,Ho,og,Ph,ju,L_,Na,tw,nw,Gt,Uo,P5,O5,Kv,k5,Yv,sx;class kze{constructor(e,n){Q(this,Gt);Q(this,oi);Q(this,Rh);Q(this,ai);Q(this,ew);Q(this,Ho);Q(this,og);Q(this,Ph);Q(this,ju);Q(this,L_);Q(this,Na);Q(this,tw);Q(this,nw);if(L(this,nw,Object.assign({},Oze,n||{})),e==="any")L(this,og,!0),L(this,Ho,null);else if(e){const r=$l.from(e);L(this,og,!1),L(this,Ho,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else L(this,og,!1),L(this,Ho,null);L(this,ju,-1),L(this,Ph,new Map),L(this,oi,new Map),L(this,Rh,new Map),L(this,ai,null),L(this,ew,!1),L(this,L_,1),L(this,Na,new Map),L(this,tw,!1)}get pollingInterval(){return C(this,nw).pollingInterval}get provider(){return this}get plugins(){return Array.from(C(this,Rh).values())}attachPlugin(e){if(C(this,Rh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return C(this,Rh).set(e.name,e.connect(this)),this}getPlugin(e){return C(this,Rh).get(e)||null}get disableCcipRead(){return C(this,tw)}set disableCcipRead(e){L(this,tw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Nf(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}me(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}me(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new ZWe(yze(e),this)}_wrapLog(e,n){return new D1(gze(e),this)}_wrapTransactionReceipt(e,n){return new ane(Eze(e),this)}_wrapTransactionResponse(e,n){return new w_(vne(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Yt(await he(this,Gt,Uo).call(this,{method:"getBlockNumber"}),"%response");return C(this,ju)>=0&&L(this,ju,e),e}_getAddress(e){return Pi(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(sr(e))return sr(e,32)?e:Tc(e);if(typeof e=="bigint"&&(e=Yt(e,"blockTag")),typeof e=="number")return e>=0?Tc(e):C(this,ju)>=0?Tc(C(this,ju)+e):this.getBlockNumber().then(n=>Tc(n+e));Z(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?R5(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=VI(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Pi(n[s],this);cS(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);cS(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(C(this,Ho)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw C(this,Ho)===s&&L(this,Ho,null),i}})();return L(this,Ho,s),(await s).clone()}const e=C(this,Ho),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(C(this,og)?(this.emit("network",r,n),C(this,Ho)===e&&L(this,Ho,Promise.resolve(r))):me(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await Ai({_block:he(this,Gt,k5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await he(this,Gt,Uo).call(this,{method:"getGasPrice"});return Je(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await he(this,Gt,Uo).call(this,{method:"getPriorityFee"});return Je(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*Tze+c),new EW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Nf(r.url),i=await r.processFunc(n,this,s);return new EW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return cS(n)&&(n=await n),Je(await he(this,Gt,Uo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await Ai({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await he(this,Gt,O5).call(this,he(this,Gt,P5).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Je(await he(this,Gt,Kv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Yt(await he(this,Gt,Kv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return De(await he(this,Gt,Kv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Je(n,"position");return De(await he(this,Gt,Kv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await Ai({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=FI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await Ai({network:this.getNetwork(),params:he(this,Gt,k5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await Ai({network:this.getNetwork(),params:he(this,Gt,Uo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await Ai({network:this.getNetwork(),params:he(this,Gt,Uo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await he(this,Gt,Uo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await Ai({network:this.getNetwork(),result:he(this,Gt,Uo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:De(n)}async getLogs(e){let n=this._getFilter(e);cS(n)&&(n=await n);const{network:r,params:s}=await Ai({network:this.getNetwork(),params:he(this,Gt,Uo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await YI.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=xn(e);const n=_5(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await YI.getEnsAddress(this),i=await new o0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===u_)return null;const a=await new o0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(js(r,"BAD_DATA")&&r.value==="0x"||js(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(fr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=C(this,Na).get(e);n&&(n.timer&&clearTimeout(n.timer),C(this,Na).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Sd(this,L_)._++,s=()=>{C(this,Na).delete(r),e()};if(this.paused)C(this,Na).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);C(this,Na).set(r,{timer:i,func:s,time:g2()})}return r}_forEachSubscriber(e){for(const n of C(this,oi).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new Cne(e.type);case"block":{const n=new Sze(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new xze(this,e.type);case"event":return new S$(this,e.filter);case"transaction":return new Nze(this,e.hash);case"orphan":return new Ize(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of C(this,oi).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),C(this,ai)!=null&&n.pause(C(this,ai));break}}async on(e,n){const r=await he(this,Gt,sx).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,C(this,ai)!=null&&r.subscriber.pause(C(this,ai))),this}async once(e,n){const r=await he(this,Gt,sx).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,C(this,ai)!=null&&r.subscriber.pause(C(this,ai))),this}async emit(e,...n){const r=await he(this,Gt,Yv).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Uee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),C(this,oi).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await he(this,Gt,Yv).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of C(this,oi).values())n+=r.length;return n}async listeners(e){if(e){const r=await he(this,Gt,Yv).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of C(this,oi).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await he(this,Gt,Yv).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),C(this,oi).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await he(this,Gt,sx).call(this,e);r&&s.stop(),C(this,oi).delete(n)}else for(const[n,{started:r,subscriber:s}]of C(this,oi))r&&s.stop(),C(this,oi).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return C(this,ew)}destroy(){this.removeAllListeners();for(const e of C(this,Na).keys())this._clearTimeout(e);L(this,ew,!0)}get paused(){return C(this,ai)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(L(this,ju,-1),C(this,ai)!=null){if(C(this,ai)==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),L(this,ai,!!e);for(const n of C(this,Na).values())n.timer&&clearTimeout(n.timer),n.time=g2()-n.time}resume(){if(C(this,ai)!=null){this._forEachSubscriber(e=>e.resume()),L(this,ai,null);for(const e of C(this,Na).values()){let n=e.time;n<0&&(n=0),e.time=g2(),setTimeout(e.func,n)}}}}oi=new WeakMap,Rh=new WeakMap,ai=new WeakMap,ew=new WeakMap,Ho=new WeakMap,og=new WeakMap,Ph=new WeakMap,ju=new WeakMap,L_=new WeakMap,Na=new WeakMap,tw=new WeakMap,nw=new WeakMap,Gt=new WeakSet,Uo=async function(e){const n=C(this,nw).cacheTimeout;if(n<0)return await this._perform(e);const r=rx(e.method,e);let s=C(this,Ph).get(r);return s||(s=this._perform(e),C(this,Ph).set(r,s),setTimeout(()=>{C(this,Ph).get(r)===s&&C(this,Ph).delete(r)},n)),await s},P5=async function(e,n,r){me(r<Rze,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=VI(e);try{return De(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&o$(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Ir(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Pi(s.to,this);let c;try{c=$ze(Ir(i.data,4))}catch(d){me(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}me(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);me(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Or([c.selector,Uze([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await he(this,Gt,P5).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},O5=async function(e){const{value:n}=await Ai({network:this.getNetwork(),value:e});return n},Kv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await he(this,Gt,O5).call(this,he(this,Gt,Uo).call(this,Object.assign(e,{address:s,blockTag:i})))},k5=async function(e,n){if(sr(e,32))return await he(this,Gt,Uo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await he(this,Gt,Uo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},Yv=async function(e,n){let r=await p2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await p2({orphan:"drop-log",log:n[0]},this)),C(this,oi).get(r.tag)||null},sx=async function(e){const n=await p2(e,this),r=n.tag;let s=C(this,oi).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},C(this,oi).set(r,s)),s};function Dze(t,e){try{const n=D5(t,e);if(n)return $I(n)}catch{}return null}function D5(t,e){if(t==="0x")return null;try{const n=Yt(Ir(t,e,e+32)),r=Yt(Ir(t,n,n+32));return Ir(t,n+32,n+32+r)}catch{}return null}function TW(t){const e=os(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function Mze(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const Lze=new Uint8Array([]);function Uze(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(Lze),n+=32;for(let r=0;r<t.length;r++){const s=Kt(t[r]);e[r]=TW(n),e.push(TW(s.length)),e.push(Mze(s)),n+=32+Math.ceil(s.length/32)*32}return Or(e)}const RW="0x0000000000000000000000000000000000000000000000000000000000000000";function $ze(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(r0(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Ir(t,0,32);me(Ir(n,0,12)===Ir(RW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Ir(n,12);try{const r=[],s=Yt(Ir(t,32,64)),i=Yt(Ir(t,s,s+32)),o=Ir(t,s+32);for(let a=0;a<i;a++){const c=Dze(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=D5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(Ir(t,100,128)===Ir(RW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Ir(t,96,100);try{const r=D5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Jf(t,e){if(t.provider)return t.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function PW(t,e){let n=VI(e);if(n.to!=null&&(n.to=Pi(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Pi(r,t)]).then(([s,i])=>(Z(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await Ai(n)}class Bze{constructor(e){te(this,"provider");yt(this,{provider:e||null})}async getNonce(e){return Jf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await PW(this,e)}async populateTransaction(e){const n=Jf(this,"populateTransaction"),r=await PW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Je(r.chainId);Z(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await Ai(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Jf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Jf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Jf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Jf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Jf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=FI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Fze(t){return JSON.parse(JSON.stringify(t))}var Ci,_l,ag,Oh,cg,rw,Pf,M5,L5;class _ne{constructor(e){Q(this,Pf);Q(this,Ci);Q(this,_l);Q(this,ag);Q(this,Oh);Q(this,cg);Q(this,rw);L(this,Ci,e),L(this,_l,null),L(this,ag,he(this,Pf,M5).bind(this)),L(this,Oh,!1),L(this,cg,null),L(this,rw,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){C(this,Oh)||(L(this,Oh,!0),he(this,Pf,M5).call(this,-2))}stop(){C(this,Oh)&&(L(this,Oh,!1),L(this,rw,!0),he(this,Pf,L5).call(this),C(this,Ci).off("block",C(this,ag)))}pause(e){e&&he(this,Pf,L5).call(this),C(this,Ci).off("block",C(this,ag))}resume(){this.start()}}Ci=new WeakMap,_l=new WeakMap,ag=new WeakMap,Oh=new WeakMap,cg=new WeakMap,rw=new WeakMap,Pf=new WeakSet,M5=async function(e){try{C(this,_l)==null&&L(this,_l,this._subscribe(C(this,Ci)));let n=null;try{n=await C(this,_l)}catch(i){if(!js(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){L(this,_l,null),C(this,Ci)._recoverSubscriber(this,this._recover(C(this,Ci)));return}const r=await C(this,Ci).getNetwork();if(C(this,cg)||L(this,cg,r),C(this,cg).chainId!==r.chainId)throw new Error("chaid changed");if(C(this,rw))return;const s=await C(this,Ci).send("eth_getFilterChanges",[n]);await this._emitResults(C(this,Ci),s)}catch(n){console.log("@TODO",n)}C(this,Ci).once("block",C(this,ag))},L5=function(){const e=C(this,_l);e&&(L(this,_l,null),e.then(n=>{C(this,Ci).destroyed||C(this,Ci).send("eth_uninstallFilter",[n])}))};var lg;class jze extends _ne{constructor(n,r){super(n);Q(this,lg);L(this,lg,Fze(r))}_recover(n){return new S$(n,C(this,lg))}async _subscribe(n){return await n.send("eth_newFilter",[C(this,lg)])}async _emitResults(n,r){for(const s of r)n.emit(C(this,lg),n._wrapLog(s,n._network))}}lg=new WeakMap;class Wze extends _ne{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const zze="bigint,boolean,function,number,string,symbol".split(/,/g);function ix(t){if(t==null||zze.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(ix);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function Hze(t){return new Promise(e=>{setTimeout(e,t)})}function ay(t){return t&&t.toLowerCase()}function OW(t){return t&&typeof t.pollingInterval=="number"}const Ane={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class m2 extends Bze{constructor(n,r){super(n);te(this,"address");r=xn(r),yt(this,{address:r})}connect(n){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=ix(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Pi(o,this.provider);Z(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Pi(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(js(u,"CANCELLED")||js(u,"BAD_DATA")||js(u,"NETWORK_ERROR")||js(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(js(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",fr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=ix(n);if(r.from){const i=await Pi(r.from,this.provider);Z(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?id(n):n;return await this.provider.send("personal_sign",[De(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=ix(s),o=await qI.resolveNames(n,r,i,async a=>{const c=await Pi(a);return Z(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(qI.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?id(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),De(r)])}}var ug,sw,Wu,Al,Sc,Ta,oo,U_,U5;class Gze extends kze{constructor(n,r){super(n,r);Q(this,U_);Q(this,ug);Q(this,sw);Q(this,Wu);Q(this,Al);Q(this,Sc);Q(this,Ta);Q(this,oo);L(this,sw,1),L(this,ug,Object.assign({},Ane,r||{})),L(this,Wu,[]),L(this,Al,null),L(this,Ta,null),L(this,oo,null);{let i=null;const o=new Promise(a=>{i=a});L(this,Sc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Z(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&L(this,Ta,$l.from(n))):s&&(Z(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),L(this,Ta,s))}_getOption(n){return C(this,ug)[n]}get _network(){return me(C(this,Ta),"network is not available yet","NETWORK_ERROR"),C(this,Ta)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Je(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(C(this,Ta))return C(this,Ta)}else return n;return C(this,oo)?await C(this,oo):this.ready?(L(this,oo,(async()=>{try{const r=$l.from(Je(await this.send("eth_chainId",[])));return L(this,oo,null),r}catch(r){throw L(this,oo,null),r}})()),await C(this,oo)):(L(this,oo,(async()=>{const r={id:Sd(this,sw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],L(this,oo,null)}catch(i){throw L(this,oo,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return $l.from(Je(s.result));throw this.getRpcError(r,s)})()),await C(this,oo))}_start(){C(this,Sc)==null||C(this,Sc).resolve==null||(C(this,Sc).resolve(),L(this,Sc,null),(async()=>{for(;C(this,Ta)==null&&!this.destroyed;)try{L(this,Ta,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",fr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await Hze(1e3)}he(this,U_,U5).call(this)})())}async _waitUntilReady(){if(C(this,Sc)!=null)return await C(this,Sc).promise}_getSubscriber(n){return n.type==="pending"?new Wze(this):n.type==="event"?this._getOption("polling")?new S$(this,n.filter):new jze(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new Cne("orphan"):super._getSubscriber(n)}get ready(){return C(this,Sc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Tc(Je(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=De(n[s]))}),n.accessList&&(r.accessList=_m(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=xte(s);return{address:i.address,nonce:Tc(i.nonce),chainId:Tc(i.chainId),yParity:Tc(i.signature.yParity),r:Tc(i.signature.r),s:Tc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[ay(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[ay(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[ay(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[ay(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(ay):n.filter.address=ay(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return fr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return fr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=$5(i),l=y_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(Vze(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return fr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return fr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return fr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return fr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return fr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?fr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):fr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(fr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Sd(this,sw)._++,i=new Promise((o,a)=>{C(this,Wu).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return he(this,U_,U5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new m2(this,i[n])}const{accounts:s}=await Ai({network:this.getNetwork(),accounts:r});n=xn(n);for(const i of s)if(xn(i)===n)return new m2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new m2(this,r))}destroy(){C(this,Al)&&(clearTimeout(C(this,Al)),L(this,Al,null));for(const{payload:n,reject:r}of C(this,Wu))r(fr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));L(this,Wu,[]),super.destroy()}}ug=new WeakMap,sw=new WeakMap,Wu=new WeakMap,Al=new WeakMap,Sc=new WeakMap,Ta=new WeakMap,oo=new WeakMap,U_=new WeakSet,U5=function(){if(C(this,Al))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");L(this,Al,setTimeout(()=>{L(this,Al,null);const r=C(this,Wu);for(L(this,Wu,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==C(this,ug).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>C(this,ug).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(fr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=fr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var kh;class qze extends Gze{constructor(n,r){super(n,r);Q(this,kh);let s=this._getOption("pollingInterval");s==null&&(s=Ane.pollingInterval),L(this,kh,s)}_getSubscriber(n){const r=super._getSubscriber(n);return OW(r)&&(r.pollingInterval=C(this,kh)),r}get pollingInterval(){return C(this,kh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");L(this,kh,n),this._forEachSubscriber(r=>{OW(r)&&(r.pollingInterval=C(this,kh))})}}kh=new WeakMap;function $5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&sr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=$5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return $5(JSON.parse(t))}catch{}return null}function B5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)B5(t[n],e);if(typeof t=="string")try{return B5(JSON.parse(t),e)}catch{}}}function Vze(t){const e=[];return B5(t,e),e}var iw,ow;const bp=class bp extends qze{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Z(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Q(this,iw);Q(this,ow);L(this,ow,null),s&&s.providerInfo&&L(this,ow,s.providerInfo),L(this,iw,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return C(this,ow)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Z(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await C(this,iw).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await C(this,iw).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new bp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new bp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof bp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new bp(p,void 0,{providerInfo:g}))}else a(fr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new bp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};iw=new WeakMap,ow=new WeakMap;let F5=bp;const Zr={DMT:{symbol:"DMT",name:"DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1}},kW={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},jh={testnet:{chainId:1992},mainnet:{chainId:1996}},x$=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],wi=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function Sne(t,e){return Zr[t].address}function xne(t,e){const n=Ja(),r=Zr[t],s=r.isNative||!1,i=n===jh.mainnet.chainId,o=n===jh.testnet.chainId;t==="DMT"&&console.log(`[CHAIN DEBUG] useTokenBalance for ${t}:`,{chainId:n,expectedMainnet:jh.mainnet.chainId,expectedTestnet:jh.testnet.chainId,isOnSankoMainnet:i,isOnSankoTestnet:o,address:!!e});const a=!!e&&i,{data:c,isLoading:l,error:u}=Z1e({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=EE({address:r.address,abi:x$,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,g=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:g,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:g,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}function Kze(t,e,n){const r=Ja(),s=Sne(t),i=r===jh.mainnet.chainId,o=r===jh.testnet.chainId,{data:a,isLoading:c,error:l}=EE({address:s,abi:x$,functionName:"allowance",args:n&&e?[n,e]:void 0,query:{enabled:!!n&&!!e&&i}});return{allowance:a||BigInt(0),allowanceFormatted:a?Number(a)/Math.pow(10,Zr[t].decimals):0,isLoading:c,error:l,isOnSankoMainnet:i,isOnSankoTestnet:o}}function Yze(){const{writeContract:t,data:e,isPending:n,error:r}=Uv(),{isLoading:s}=Lv({hash:e});return Ja(),{approve:(o,a,c)=>{const l=Sne(o);t({address:l,abi:x$,functionName:"approve",args:[a,c]})},isPending:n||s,error:r,hash:e}}const Qze=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=wb(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=xne(t,i),[l,u]=D.useState(!1),d=h=>{e(h),u(!1)};return m.jsxs("div",{style:{marginBottom:"10px"},children:[m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),m.jsxs("div",{style:{position:"relative"},children:[m.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"100px",textAlign:"left"},children:[Zr[t].symbol,m.jsx("span",{style:{float:"right"},children:"▼"})]}),l&&!s&&m.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"100px"},children:Object.entries(Zr).map(([h,f])=>m.jsx("div",{onClick:()=>d(h),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:p=>p.currentTarget.style.background="#f0f0f0",onMouseLeave:p=>p.currentTarget.style.background="#fff",children:f.symbol},h))})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),m.jsx("input",{type:"number",value:n,onChange:h=>r(Number(h.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),m.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${Zr[t].symbol}`:"Connect to Sanko Mainnet"]})]}),c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:"⚠️ Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:"⚠️ Switch to Sanko Mainnet to see token balances"}),n>o&&a&&m.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",Zr[t].symbol]}),o===0&&a&&m.jsxs("div",{style:{color:"#ffa500",fontSize:"12px",marginTop:"5px"},children:["💡 You have 0 ",Zr[t].symbol,". Get tokens from ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffa500"},children:"Sanko Bridge"})]})]})},Jze=t=>t===jh.testnet.chainId?kW.testnet.chess:kW.mainnet.chess,dn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},y2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},wu=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],Zze=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function Xze(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function DW(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new F5(window.ethereum);return await new o0(e,wi,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const Ine=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{var V$,K$;const{address:r,isConnected:s,chainId:i}=wb(),o=Jze(i||jh.mainnet.chainId),[a,c]=D.useState(""),[l,u]=D.useState(""),[d,h]=D.useState(!1),[f,p]=D.useState(!1),[g,w]=D.useState(!1),[y,b]=D.useState(!1),{writeContract:v,isPending:A,data:_}=Uv(),{writeContract:I,isPending:x,data:N,error:S}=Uv(),{writeContract:O,isPending:P,data:F}=Uv(),{writeContract:G,isPending:B,data:T}=Uv(),{approve:R,isPending:$,error:k,hash:M}=Yze(),j=iAe(),{isLoading:K}=Lv({hash:_}),{isLoading:ne,data:le}=Lv({hash:N}),{isLoading:oe}=Lv({hash:F}),{isLoading:ae}=Lv({hash:T});D.useEffect(()=>{T&&!ae&&(console.log("[REFUND] Transaction completed successfully"),wt("Game refunded successfully! Your wager has been returned."),(async()=>{try{let W=xe;if(!W&&r)try{const z=await DW(r,o);z&&z!=="0x000000000000"&&(W=z)}catch(z){console.error("[REFUND] Error getting invite code from contract:",z)}W?(console.log("[REFUND] Updating Firebase for cancelled game:",W),await ri.updateGame(W,{game_state:"cancelled",red_player:"0x0000000000000000000000000000000000000000"}),console.log("[REFUND] Firebase updated successfully")):console.warn("[REFUND] Could not determine invite code for Firebase update")}catch(W){console.error("[REFUND] Error updating Firebase after refund:",W)}Nn(dn.LOBBY),Me(""),Vr(null),Ze(0,"refund completed"),ir(null),Tm()})())},[T,ae]);const{data:ue}=EE({address:o,abi:wi,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Xe}=EE({address:o,abi:wi,functionName:"games",args:ue?[ue]:void 0,query:{enabled:!!ue&&ue!=="0x000000000000"}}),[xe,Me]=D.useState(""),[rt,Rt]=D.useState(!1),{data:Xt,error:X,isLoading:ce}=EE({address:o,abi:wi,functionName:"games",args:xe?[xe]:void 0,query:{enabled:!!xe&&xe!=="0x000000000000"&&rt}});D.useEffect(()=>{console.log("[LOBBY_CONTRACT] lobbyGameContractData changed:",Xt),console.log("[LOBBY_CONTRACT] lobbyGameContractError:",X),console.log("[LOBBY_CONTRACT] lobbyGameContractLoading:",ce),console.log("[LOBBY_CONTRACT] isJoiningFromLobby:",rt),console.log("[LOBBY_CONTRACT] inviteCode:",xe),console.log("[LOBBY_CONTRACT] Contract read enabled:",!!xe&&xe!=="0x000000000000"&&rt)},[Xt,X,ce,rt,xe]);const Ee=()=>(console.log("[HELPER] getCurrentContractGameData called"),console.log("[HELPER] isJoiningFromLobby:",rt),console.log("[HELPER] lobbyGameContractData:",Xt),console.log("[HELPER] contractGameData:",Xe),rt&&Xt?(console.log("[HELPER] Returning lobbyGameContractData"),Xt):(console.log("[HELPER] Returning contractGameData"),Xe)),ge=(U,W)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${U}" from ${W}`),xe&&!U&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${xe}" to "${U}" from ${W}`),Me(U)},be=(U,W="DMT")=>{var V;const z=((V=Zr[W])==null?void 0:V.decimals)||18;return parseFloat(U.toString())/Math.pow(10,z)},Ze=(U,W)=>{console.log(`[WAGER_DEBUG] Setting wager to ${U} TDMT from ${W}`),Sm!==U&&console.log(`[WAGER_DEBUG] Wager changed from ${Sm} to ${U} TDMT`),cR(U)},[st,St]=D.useState("moves"),_t=async()=>{if(!xe||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",xe);const U=await ri.getGame(xe);if(!U||U.blue_player!==r){alert("Only the game creator can refund the game");return}if(U.red_player&&U.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await G({address:o,abi:wi,functionName:"cancelGame",args:[xe]}),console.log("[REFUND] Cancel game transaction submitted")}catch(U){console.error("[REFUND] Error refunding game:",U),alert("Failed to refund game. Please try again.")}},Kn=async()=>{if(!r||!it){console.error("[CLAIM] Missing required data for claiming winnings");return}let U=xe;if(!U&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const W=await DW(r,o);W&&W!=="0x000000000000"&&(U=W,console.log("[CLAIM] Retrieved invite code from contract:",U))}catch(W){console.error("[CLAIM] Error getting invite code from contract:",W)}}if(!U){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",U,"Player:",it,"Address:",r);const W=await ri.getGame(U);if(!W){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",W);let z=null;W.winner&&(W.blue_player||W.red_player)&&(z=W.winner==="blue"?W.blue_player:W.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:W.winner,winnerAddress:z}));const V=Ee();if(!z&&V)if(W.winner&&(W.winner==="blue"||W.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let ve,Ae,It,Le,Dt,an;if(Array.isArray(V))[ve,Ae,It,Le,Dt,an]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}z=W.winner==="blue"?ve:Ae,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:W.winner,winnerAddress:z,player1:ve,player2:Ae})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",V);let ve,Ae,It,Le,Dt,an;if(Array.isArray(V))[ve,Ae,It,Le,Dt,an]=V;else{console.error("[CLAIM] Unexpected contract data format:",V),alert("Failed to verify winner. Please try again.");return}const hr=String(Le);if(hr.startsWith("0x"))z=hr;else if(hr==="blue"||hr==="red")z=hr==="blue"?ve:Ae;else if(hr==="1"||hr==="2")z=hr==="1"?ve:Ae;else{console.error("[CLAIM] Unknown winner format:",Le,"as string:",hr),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:Le,winnerAddress:z,player1:ve,player2:Ae,winnerType:typeof Le,winnerValue:Le,address:r,addressType:typeof r})}if(!z){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:z,address:r,playerColor:it,winnerAddressType:typeof z,addressType:typeof r,addressesMatch:z===r,winnerAddressLength:z==null?void 0:z.length,addressLength:r==null?void 0:r.length}),z!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:z,address:r,playerColor:it}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM] ✅ Winner verification passed! Proceeding with contract call...");let re=U;if(!re&&V){console.log("[CLAIM] Using invite code from contract data as fallback");let ve,Ae,It,Le,Dt,an;if(Array.isArray(V))[ve,Ae,It,Le,Dt,an]=V,re=Dt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",V),alert("Failed to get invite code. Please try again.");return}}if(!re||typeof re!="string"){console.error("[CLAIM] Invalid invite code format:",re),alert("Invalid invite code format.");return}let Ne=re;if(re.startsWith("0x")||(Ne="0x"+re),Ne.length!==14){console.error("[CLAIM] Invalid invite code length for contract claim:",Ne,"length:",Ne.length),alert("Invalid invite code length for contract claim.");return}console.log("[CLAIM] Formatted invite code:",Ne),console.log("[CLAIM] Original invite code:",re),console.log("[CLAIM] Winner address:",z),console.log("[CLAIM] Calling contract with:",{inviteCode:re,winner:z,functionName:"endGame",inviteCodeSource:W.invite_code?"Firebase":"Contract",inviteCodeLength:re.length,inviteCodeValid:re.startsWith("0x")&&re.length===14,winnerAddressValid:z.startsWith("0x")&&z.length===42}),console.log("[CLAIM] About to call writeEndGame with:",{address:o,functionName:"endGame",args:[Ne,z],abiLength:wi.length,chainId:i,isConnected:s});try{O({address:o,abi:wi,functionName:"endGame",args:[Ne,z]}),console.log("[CLAIM] Contract call initiated successfully"),P?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:P,endGameHash:F})}catch(ve){console.error("[CLAIM] Error calling writeEndGame:",ve),alert("Failed to initiate contract call. Please try again.");return}}catch(W){console.error("[CLAIM] Error claiming winnings:",W),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[kt,jr]=D.useState(wu),[Ft,zn]=D.useState("blue"),[_r,zi]=D.useState(null),[Zc,Bf]=D.useState([]),[Ob,k$]=D.useState([]),[F1,wt]=D.useState("Waiting for opponent..."),[us,Nn]=D.useState(dn.LOBBY),[it,Vr]=D.useState(null),[kb,ir]=D.useState(null),[Sm,cR]=D.useState(0),[Db,j1]=D.useState([]),[W1,To]=D.useState(!1),[xm,gi]=D.useState(!1),[Hi,Ns]=D.useState(null),[Tn,nc]=D.useState(null),[Mb,Im]=D.useState(!1),[su,lR]=D.useState(""),[rc,Ff]=D.useState(0),[Wr,uR]=D.useState("DMT");D.useEffect(()=>{console.log("[JOIN_TRANSACTION] joinGameHash changed:",N),console.log("[JOIN_TRANSACTION] isJoiningGameContract:",x),console.log("[JOIN_TRANSACTION] joinGameError:",S),console.log("[JOIN_TRANSACTION] Full join transaction state:",{joinGameHash:N,isJoiningGameContract:x,joinGameError:S,pendingJoinGameData:Tn})},[N,x,S,Tn]),D.useEffect(()=>{!$&&Mb&&xe&&rt&&!N&&!x&&(console.log("[AUTO_JOIN] Token approval completed, attempting to auto-join"),console.log("[AUTO_JOIN] isApproving:",$),console.log("[AUTO_JOIN] waitingForApproval:",Mb),console.log("[AUTO_JOIN] inviteCode:",xe),console.log("[AUTO_JOIN] isJoiningFromLobby:",rt),console.log("[AUTO_JOIN] joinGameHash:",N),console.log("[AUTO_JOIN] isJoiningGameContract:",x),Im(!1),console.log("[AUTO_JOIN] Calling joinGame automatically"),B$(xe))},[$,Mb,xe,rt,N,x]),xne(Wr,r);const Lb=BigInt(Math.floor(rc*Math.pow(10,Zr[Wr].decimals))),{allowance:dR}=Kze(Wr,r,o),[D$]=D.useState(!0),[iu,z1]=D.useState(null),[H1,hR]=D.useState(0),[G1,fR]=D.useState(Date.now()),q1=36e5,[pR,ou]=D.useState(!1),[Ub,gR]=D.useState(null),[$b,Bb]=D.useState(!1),[jf,Nm]=D.useState(null),[Fb,V1]=D.useState(!1),[jb,Ro]=D.useState(!1),[Kr,sc]=D.useState("moves"),[mR,M$]=D.useState(!0),[q,Y]=D.useState(null),se=async()=>{if(!xe||!it)return;console.log("[TIMEOUT] Handling timeout for game:",xe);const U=Ft==="blue"?"red":"blue",W=Ee(),z=U==="blue"?W==null?void 0:W[0]:W==null?void 0:W[1];z&&(console.log("[TIMEOUT] Ending game with winner:",z),O({address:o,abi:wi,functionName:"endGame",args:[xe,z]}),wt(`Game ended due to timeout. ${U==="red"?"Red":"Blue"} wins!`),Nn(dn.FINISHED))},ie=D.useCallback(()=>{iu&&clearTimeout(iu);const U=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),se()},q1);z1(U),fR(Date.now())},[se]),ee=D.useCallback(()=>{iu&&(clearTimeout(iu),z1(null))},[]),[_e,Pe]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[nt,ln]=D.useState([]),[on,dr]=D.useState(null),Qt=D.useRef(null),ic=D.useRef(null),L$=D.useRef(r);D.useEffect(()=>{L$.current=r},[r]),D.useEffect(()=>{N&&!ne&&Tn&&(console.log("[CONTRACT] Join transaction confirmed:",N),r===Tn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Vr("red"),ir(Tn.gameData.blue_player)),ri.updateGame(Tn.inviteCode,{...Tn.gameData,red_player:Tn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),Nn(dn.ACTIVE),Ro(!0),wt("Game started!"),Me(Tn.inviteCode),Wf(Tn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),nc(null),Rt(!1)}).catch(U=>{console.error("Error updating game in database:",U),wt("Joined game on contract but failed to update database"),nc(null)}))},[N,ne,Tn,r]),D.useEffect(()=>{F&&!oe&&(console.log("[CLAIM] End game transaction confirmed:",F),wt("Winnings claimed successfully! Transaction hash: "+F.slice(0,10)+"..."),w(!1))},[F,oe]),D.useEffect(()=>{P===!1&&g&&!F&&(console.log("[CLAIM] End game transaction rejected or failed"),wt("Claim transaction was rejected. Please try again."),w(!1))},[P,g,F]),D.useEffect(()=>{if(_&&!K){console.log("[CONTRACT] Create game transaction confirmed:",_);let U=Hi;if(!U&&j){console.log("[CREATE DEBUG] No pendingGameData, attempting to reconstruct game data");const W=(Hi==null?void 0:Hi.invite_code)||_;console.log("[CREATE DEBUG] Using invite code for contract read:",W),j.readContract({address:o,abi:wi,functionName:"games",args:[W]}).then(z=>{var V;if(z&&Array.isArray(z)&&z[0]!=="0x0000000000000000000000000000000000000000"){const re={invite_code:W,game_title:`Chess Game ${W.slice(-6)}`,bet_amount:((V=z[2])==null?void 0:V.toString())||"0",bet_token:z[1]||"",blue_player:z[0]||"",red_player:"0x0000000000000000000000000000000000000000",game_state:"waiting",board:{positions:Wb(wu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE DEBUG] Reconstructed game data:",re),ri.createGame(re).then(()=>{console.log("[FIREBASE] Game created successfully with reconstructed data"),Me(re.invite_code),Vr("blue"),Ze(rc,"create game success"),Nn(dn.WAITING),wt("Waiting for opponent to join..."),Wf(re.invite_code),setTimeout(()=>{Tm()},1e3),Ns(null),To(!1),gi(!1)}).catch(Ne=>{console.error("[FIREBASE] Error creating game with reconstructed data:",Ne),wt("Transaction confirmed but failed to create game in database"),Ns(null),To(!1),gi(!1)})}}).catch(z=>{console.error("[CREATE DEBUG] Error reconstructing game data:",z),wt("Transaction confirmed but game data not available"),Ns(null),To(!1),gi(!1)});return}U?ri.createGame(U).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),Me(U.invite_code),Vr("blue"),Ze(rc,"create game success"),Nn(dn.WAITING),wt("Waiting for opponent to join..."),Wf(U.invite_code),setTimeout(()=>{Tm()},1e3),Ns(null),To(!1),gi(!1)}).catch(W=>{console.error("[FIREBASE] Error creating game after transaction:",W),wt("Transaction confirmed but failed to create game in database"),Ns(null),To(!1),gi(!1)}):(console.log("[CREATE DEBUG] No game data available for Firebase creation"),wt("Transaction confirmed but game data not available"),Ns(null),To(!1),gi(!1))}},[_,K,Hi,rc]),D.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",Hi)},[Hi]),D.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",Tn),Tn){const U=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),nc(null)},3e4);return()=>clearTimeout(U)}},[Tn]),D.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",Hi),console.log("[CREATE REJECTION DEBUG] - createGameHash:",_),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&Hi&&!_),A===!1&&Hi&&!_&&(console.log("[CONTRACT] Create game transaction rejected or failed"),wt("Transaction was rejected. Please try again."),Ns(null),To(!1),gi(!1))},[A,Hi,_]),D.useEffect(()=>{x===!1&&Tn&&!N&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",Tn),console.log("[CONTRACT] Rejection details - joinGameHash:",N),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",ue),wt("Transaction was rejected. Please try again."),ge("","join transaction rejection"),Vr(null),Ze(0,"join transaction rejection"),ir(null),Nn(dn.LOBBY),wt(""),nc(null),Rt(!1))},[x,Tn,N,r,ue]),D.useEffect(()=>{if(r&&ue!==void 0&&!y){const U=Ee();(ue!=="0x000000000000"&&U||ue==="0x000000000000")&&Mne()}},[r,ue,Xe,Xt,y]),D.useEffect(()=>{b(!1)},[r]),D.useEffect(()=>{us===dn.ACTIVE&&it?(console.log("[TIMEOUT] Starting timeout timer for active game"),ie()):ee()},[us,it]),D.useEffect(()=>{us===dn.ACTIVE&&Ob.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),ie())},[Ob,us]),D.useEffect(()=>{if(us===dn.ACTIVE&&iu){const U=setInterval(()=>{const W=Date.now()-G1,z=Math.max(0,q1-W);hR(Math.ceil(z/1e3))},1e3);return()=>clearInterval(U)}},[us,iu,G1]),D.useEffect(()=>()=>{$ne(),ee(),Qt.current&&Qt.current(),ic.current&&clearTimeout(ic.current)},[]);const Mne=async()=>{if(r)try{console.log("[GAME_STATE] Checking for active games for player:",r);const U=Ee();if(ue&&ue!=="0x000000000000"&&!U){console.log("[GAME_STATE] Waiting for contract data...");return}if(ue&&ue!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",ue),U)){let V,re,Ne,ve,Ae,It;if(Array.isArray(U))[V,re,Ne,ve,Ae,It]=U;else{console.error("[GAME_STATE] Unexpected contract data format:",U);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:V,player2:re,isActive:Ne,winner:ve,inviteCode:Ae,wagerAmount:It}),!Ae){console.error("[GAME_STATE] Invalid invite code:",Ae);return}const Le=V===r?"blue":"red",Dt=V===r?re:V;console.log("[GAME_STATE] Player is",Le,"opponent is",Dt);const an=await ri.getGame(Ae);if(an){if(console.log("[GAME_STATE] Found game in Firebase:",an),Me(Ae),Vr(Le),Ze(be(an.bet_amount,an.bet_token||"DMT"),"checkPlayerGameState Firebase"),ir(Dt),an.game_state==="waiting")Nn(dn.WAITING),wt("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(an.game_state==="active"||an.game_state==="test_update"){if(Nn(dn.ACTIVE),Ro(!0),wt("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",an.game_state,")"),an.board){const hr=an.board;jr(Rm(hr)),zn(an.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",an.game_state,"- treating as active"),Nn(dn.ACTIVE),Ro(!0),wt("Game in progress"),an.board){const hr=an.board;jr(Rm(hr)),zn(an.current_player||"blue")}Wf(Ae),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",us),console.log("[GAME_STATE] Game state from Firebase:",an.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase - waiting for transaction confirmation"),console.log("[GAME_STATE] This prevents ghost games from failed transactions");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const z=(await ri.getActiveGames()).filter(V=>V.chain==="sanko"&&(V.blue_player===r||V.red_player===r)&&["waiting","active"].includes(V.game_state));if(z&&z.length>0){const V=z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",V),Me(V.invite_code),Vr(V.blue_player===r?"blue":"red"),Ze(be(V.bet_amount,V.bet_token||"DMT"),"checkPlayerGameState fallback"),ir(V.blue_player===r?V.red_player:V.blue_player),V.game_state==="waiting")Nn(dn.WAITING),wt("Waiting for opponent to join...");else if(V.game_state==="active"||V.game_state==="test_update"){if(Nn(dn.ACTIVE),Ro(!0),wt("Game in progress"),V.board){const re=V.board;jr(Rm(re)),zn(V.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",V.game_state,"- treating as active"),Nn(dn.ACTIVE),wt("Game in progress"),V.board){const re=V.board;jr(Rm(re)),zn(V.current_player||"blue")}Wf(V.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Nn(dn.LOBBY),To(!1),b(!0)}catch(U){console.error("[GAME_STATE] Error in checkPlayerGameState:",U)}},K1=async()=>{try{await Oee();const U=await Pee(20);ln(U)}catch(U){console.error("Error loading leaderboard:",U)}},U$=async U=>{if(console.log("[SCORE] updateScore called with:",U,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",Qg(r)),await UI(r,U)?console.log("[SCORE] Successfully updated score for:",Qg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(W){console.error("[SCORE] Error updating score:",W)}},$$=async(U,W,z)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:U,bluePlayer:W,redPlayer:z}),!W||!z){console.error("[SCORE] Missing player addresses from contract");return}await pje(U,W,z)?(console.log("[SCORE] Successfully updated both players scores"),await K1()):console.error("[SCORE] Failed to update both players scores")}catch(V){console.error("[SCORE] Error updating both players scores:",V)}},Tm=async()=>{try{console.log("[LOBBY] Loading open games...");const U=await ri.getOpenGames();console.log("[LOBBY] Loaded open games:",U),console.log("[LOBBY] Number of open games:",U.length),j1(U)}catch(U){console.error("[LOBBY] Error loading open games:",U)}},Lne=async()=>{if(!r)return!1;try{return Zr[Wr].isNative?(console.log("[APPROVAL] Native token detected, skipping approval"),!0):dR<Lb?(console.log("[APPROVAL] Token approval needed, calling approveToken"),new Promise(W=>{let z=0;const V=60,re=()=>{if(z++,k){console.error("[APPROVAL] User denied approval or error occurred:",k),wt("Token approval was cancelled. Please try again."),W(!1);return}if(M&&!$){console.log("[APPROVAL] Token approval successful, proceeding with game creation"),W(!0);return}if(z>=V){console.error("[APPROVAL] Timeout waiting for approval result"),wt("Approval timeout. Please try again."),W(!1);return}setTimeout(re,500)};R(Wr,o,Lb),re()})):(console.log("[APPROVAL] Token already approved, proceeding with game creation"),!0)}catch(U){return console.error("[APPROVAL] Error checking approval:",U),wt("Failed to check token approval. Please try again."),!1}},Une=async()=>{if(!(!r||rc<=0)){gi(!0);try{if(!await Lne()){gi(!1);return}const W=Xze(),z=Zr[Wr].address,V=BigInt(Math.floor(rc*Math.pow(10,Zr[Wr].decimals)));if(j)try{const Ae=await j.readContract({address:o,abi:wi,functionName:"tokenMinWager",args:[z]}),It=await j.readContract({address:o,abi:wi,functionName:"tokenMaxWager",args:[z]});if(console.log("[VALIDATION] Contract limits for",Wr,":",{minWager:Ae.toString(),maxWager:It.toString(),userWager:V.toString()}),V<Ae){const Le=Number(Ae)/Math.pow(10,Zr[Wr].decimals);wt(`Wager too low. Minimum for ${Wr}: ${Le}`),gi(!1);return}if(V>It){const Le=Number(It)/Math.pow(10,Zr[Wr].decimals);wt(`Wager too high. Maximum for ${Wr}: ${Le}`),gi(!1);return}console.log("[VALIDATION] Wager amount is within contract limits")}catch(Ae){console.warn("[VALIDATION] Could not validate wager limits, proceeding anyway:",Ae)}const re={invite_code:W,game_title:`Chess Game ${W.slice(-6)}`,bet_amount:V.toString(),bet_token:Wr,blue_player:r,game_state:"waiting",board:{positions:Wb(wu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",re),console.log("[CREATE] Calling contract with args:",[W,z,V]);let Ne=300000n;try{if(j){const Ae=await j.estimateContractGas({address:o,abi:wi,functionName:"createGame",args:[W,z,V],account:r});Ne=Ae,console.log("[CREATE] Estimated gas:",Ae.toString())}}catch(Ae){console.warn("[CREATE] Gas estimation failed, using default:",Ae)}const ve=v({address:o,abi:wi,functionName:"createGame",args:[W,z,V],gas:Ne});console.log("[CREATE] Contract call initiated, result:",ve),console.log("[CREATE] createGameHash after writeCreateGame:",_),console.log("[CREATE] Pending game data being set:",re),Ns(re),wt("Creating game... Please confirm transaction in your wallet.")}catch(U){console.error("[CREATE] Error creating game:",U),wt("Failed to create game. Please try again.")}finally{gi(!1)}}},B$=async U=>{var W;if(r)try{const z=await ri.getGame(U);if(!z||z.game_state!=="waiting"){wt("Game not found or already full");return}const V=be(z.bet_amount,z.bet_token||"DMT");if(Me(U),Rt(!0),Vr("red"),Ze(V,"joinGame"),ir(z.blue_player),r===z.blue_player){console.error("[JOIN] Player cannot join their own game"),wt("You cannot join your own game");return}if(ue&&ue!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",ue),wt("You already have an active game");return}const re=(W=Zr[z.bet_token])==null?void 0:W.address;if(re&&re!=="0x0000000000000000000000000000000000000000"&&j)try{const Ae=await j.readContract({address:re,abi:[{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],type:"function"}],functionName:"allowance",args:[r,o]}),It=BigInt(z.bet_amount);if(Ae<It){wt(`Approving ${z.bet_token} spending...`),Im(!0);try{R(z.bet_token,o,It);return}catch(Le){console.error("[JOIN] Error approving token:",Le),wt(`Failed to approve ${z.bet_token}. Please try again.`),Im(!1);return}}}catch(ve){console.error("[JOIN] Error checking token allowance:",ve)}wt("Joining game... Please confirm transaction in your wallet.");let Ne=200000n;try{if(j){const ve=await j.estimateContractGas({address:o,abi:wi,functionName:"joinGame",args:[U],account:r});Ne=ve,console.log("[JOIN] Estimated gas:",ve.toString())}}catch(ve){console.warn("[JOIN] Gas estimation failed, using default:",ve)}try{const ve=I({address:o,abi:wi,functionName:"joinGame",args:[U],gas:Ne});nc({inviteCode:U,gameData:z,address:r})}catch(ve){console.error("[JOIN] Error calling writeJoinGame:",ve),wt("Failed to send transaction. Please try again.")}}catch(z){console.error("[JOIN] Error joining game:",z),wt("Failed to join game. Please try again."),ge("","join game error"),Vr(null),Ze(0,"join game error"),ir(null)}},[Vqe,Kqe]=D.useState(null),[Yqe,Qqe]=D.useState(""),[Jqe,Zqe]=D.useState(!0),$ne=()=>{console.log("[FIREBASE] No fallback to stop")},Wf=U=>{Qt.current&&Qt.current();const W=ri.subscribeToGame(U,z=>{const V=L$.current;if(!z)return;if(Tn&&V===Tn.address)z.game_state==="active"&&nc(null),z.blue_player&&z.red_player&&z.red_player!=="0x0000000000000000000000000000000000000000"&&ir(z.blue_player===V?z.red_player:z.blue_player);else if(V&&z.blue_player&&z.red_player&&z.red_player!=="0x0000000000000000000000000000000000000000"){const ve=V.toLowerCase()===z.blue_player.toLowerCase(),Ae=V.toLowerCase()===z.red_player.toLowerCase();ve&&it!=="blue"?(Vr("blue"),ir(z.red_player)):Ae&&it!=="red"?(Vr("red"),ir(z.blue_player)):!ve&&!Ae&&it!==null&&(Vr(null),ir(null))}else{if(!(it&&(it==="blue"||it==="red"))){if(V){const ve=Ee();if(ve&&Array.isArray(ve)){const[Ae,It]=ve;if(Ae&&It){const Le=Ae.toLowerCase()===V.toLowerCase()?"blue":"red",Dt=Ae.toLowerCase()===V.toLowerCase()?It:Ae;Vr(Le),ir(Dt)}}}}z.blue_player&&z.red_player&&z.red_player!=="0x0000000000000000000000000000000000000000"&&ir(z.blue_player===V?z.red_player:z.blue_player)}if(z.board){const ve=Rm(z.board);jr(ve)}z.current_player&&zn(z.current_player),z.game_state==="active"?(Nn(dn.ACTIVE),wt("Game in progress")):z.game_state==="finished"?(Nn(dn.FINISHED),wt("Game finished")):z.game_state==="waiting"&&(Nn(dn.WAITING),wt("Waiting for opponent to join..."));let re=0;const Ne=z.bet_token||"DMT";if(z.bet_amount&&!isNaN(parseFloat(z.bet_amount)))re=be(z.bet_amount,Ne);else{const ve=Ee();ve&&Array.isArray(ve)&&ve[5]&&(re=be(ve[5].toString(),Ne))}Ze(re,"Firebase subscription")});return Qt.current=W,W};D.useEffect(()=>{if(xe){const U=Wf(xe);return()=>{U&&typeof U=="function"&&U()}}},[xe]),D.useEffect(()=>{const U=Ee();if(U&&!it&&r){console.log("[FALLBACK] Setting playerColor from contract data");let W,z,V,re,Ne,ve;if(Array.isArray(U))[W,z,V,re,Ne,ve]=U;else{console.error("[FALLBACK] Unexpected contract data format:",U);return}const Ae=W===r?"blue":"red",It=W===r?z:W;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",W),console.log("[FALLBACK] - player2 (red):",z),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Ae),console.log("[FALLBACK] - opponent:",It),console.log("[FALLBACK] - inviteCode from contract:",Ne),Vr(Ae),ir(It),!xe&&Ne&&(console.log("[FALLBACK] Setting missing inviteCode:",Ne),Me(Ne)),xe&&(console.log("[AUTO-FIX] Checking Firebase data for inviteCode:",xe),ri.getGame(xe).then(Le=>{console.log("[AUTO-FIX] Current Firebase data:",Le),console.log("[AUTO-FIX] Contract data:",U);const Dt=!Le||!Le.blue_player||Le.red_player==="0x0000000000000000000000000000000000000000"||Le.game_state!=="active";if(console.log("[AUTO-FIX] Needs update:",Dt),Dt&&U&&Array.isArray(U)){console.log("[AUTO-FIX] Updating Firebase with correct data...");const[an,hr]=U;console.log("[AUTO-FIX] Updating Firebase with player1 (blue):",an),console.log("[AUTO-FIX] Updating Firebase with player2 (red):",hr),ri.updateGame(xe,{blue_player:an,red_player:hr,game_state:"active",current_player:"blue"}).then(()=>{console.log("[AUTO-FIX] Firebase updated with correct player data")}).catch(bR=>{console.error("[AUTO-FIX] Error updating Firebase:",bR)})}Le&&Le.game_state==="active"&&Tn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),nc(null))}).catch(Le=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",Le)}))}},[Xe,Xt,it,r,xe]),D.useEffect(()=>{if(le&&Tn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",le.transactionHash),console.log("[RECEIPT] Pending data:",Tn);const{inviteCode:U,gameData:W,address:z}=Tn;ri.updateGame(U,{red_player:z,blue_player:W.blue_player,bet_amount:W.bet_amount,game_state:"active",last_move:null,board:{positions:Wb(wu),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),wt("Game started! You are the red player."),Nn(dn.ACTIVE),nc(null)}).catch(V=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",V),wt("Game joined but failed to update game state. Please refresh.")})}},[le,Tn]),D.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),wt(`Failed to join game: ${S.message||"Transaction rejected"}`),ge("","join game error effect"),Vr(null),Ze(0,"join game error effect"),ir(null),nc(null))},[S]);const Wb=U=>{const W={};return U.forEach((z,V)=>{z.forEach((re,Ne)=>{W[`${V}_${Ne}`]=re})}),W},Rm=U=>{if(!U||!U.positions)return console.warn("[BOARD] No board data available, using initial board"),wu;if(console.log("[BOARD] Attempting to reconstruct board from:",U),console.log("[BOARD] Positions type:",typeof U.positions),console.log("[BOARD] Positions is array:",Array.isArray(U.positions)),console.log("[BOARD] Positions value:",U.positions),typeof U.positions=="object"&&!Array.isArray(U.positions)){const W=U.positions,z=U.rows||8,V=U.cols||8,re=Array(z).fill(null).map(()=>Array(V).fill(null));for(let Ne=0;Ne<z;Ne++)for(let ve=0;ve<V;ve++){const Ae=`${Ne}_${ve}`;re[Ne][ve]=W[Ae]||null}return console.log("[BOARD] Reconstructed from flat structure:",re),re}return Array.isArray(U.positions)?(console.log("[BOARD] Found array structure, length:",U.positions.length),U.positions.length===8?U.positions.every((z,V)=>{const re=Array.isArray(z)&&z.length===8;return re||console.warn(`[BOARD] Row ${V} is invalid:`,z,"Type:",typeof z,"Length:",z==null?void 0:z.length),re})?(console.log("[BOARD] Using legacy array structure"),U.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),wu):(console.warn("[BOARD] Array has wrong length:",U.positions.length,"expected 8"),wu)):(console.warn("[BOARD] Unknown board structure, using initial board:",U),wu)},Y1=U=>U?`${U.slice(0,6)}...${U.slice(-4)}`:"Unknown",Hn=U=>U&&U===U.toUpperCase()?"red":"blue",F$=(U,W)=>U>=0&&U<8&&W>=0&&W<8,j$=(U,W)=>`${"abcdefgh"[W]}${"87654321"[U]}`,Bne=(U,W,z,V)=>{const re=j$(U.row,U.col),Ne=j$(W.row,W.col);return`${re}-${Ne}`},zb=(U,W)=>{const z=W==="red"?"K":"k";let V=-1,re=-1;for(let ve=0;ve<8;ve++){for(let Ae=0;Ae<8;Ae++)if(U[ve][Ae]===z){V=ve,re=Ae;break}if(V!==-1)break}return V===-1?!1:Fne(V,re,W==="red"?"blue":"red",U)},Fne=(U,W,z,V)=>{if(!V||!Array.isArray(V)||V.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",V),!1;for(let re=0;re<8;re++){if(!V[re]||!Array.isArray(V[re])||V[re].length!==8)return console.warn("[SAFETY] Invalid board row structure:",V[re]),!1;for(let Ne=0;Ne<8;Ne++){const ve=V[re][Ne];if(ve&&Hn(ve)===z&&Pm(ve,re,Ne,U,W,!1,z,V,!0))return!0}}return!1},jne=(U,W,z,V,re,Ne=kt)=>{const ve=Ne[U][W];if(!ve)return!1;const Ae=Ne.map(It=>[...It]);return Ae[z][V]=ve,Ae[U][W]=null,zb(Ae,re)},Wne=(U,W,z,V,re,Ne)=>{const ve=U==="blue"?-1:1,Ae=U==="blue"?6:1;if(!F$(V,re)||U==="blue"&&V>=W||U==="red"&&V<=W)return!1;if(z===re&&V===W+ve)return Ne[V][re]===null;if(z===re&&W===Ae&&V===W+2*ve)return Ne[W+ve][z]===null&&Ne[V][re]===null;if(Math.abs(z-re)===1&&V===W+ve){const It=Ne[V][re];if(It!==null&&Hn(It)!==U)return!0;if(It===null&&_e.lastPawnDoubleMove){const{row:Le,col:Dt}=_e.lastPawnDoubleMove;if(Le===W&&Dt===re){const an=Ne[W][re];if(an&&an.toLowerCase()==="p"&&Hn(an)!==U)return!0}}}return!1},W$=(U,W,z,V,re)=>U===z||W===V,zne=(U,W,z,V)=>{const re=Math.abs(U-z),Ne=Math.abs(W-V);return re===2&&Ne===1||re===1&&Ne===2},z$=(U,W,z,V,re)=>Math.abs(U-z)===Math.abs(W-V),Hne=(U,W,z,V,re)=>W$(U,W,z,V)||z$(U,W,z,V),Gne=(U,W,z,V,re)=>{const Ne=Math.abs(W-V),ve=Math.abs(z-re);if(Ne<=1&&ve<=1)return!0;if(Ne===0&&ve===2){if(U==="blue"&&!_e.blueKingMoved){if(re===6&&!_e.blueRooksMove.right||re===2&&!_e.blueRooksMove.left)return!0}else if(U==="red"&&!_e.redKingMoved&&(re===6&&!_e.redRooksMove.right||re===2&&!_e.redRooksMove.left))return!0}return!1},yR=(U,W,z,V,re)=>{const Ne=U===z?0:(z-U)/Math.abs(z-U),ve=W===V?0:(V-W)/Math.abs(V-W);let Ae=U+Ne,It=W+ve;for(;Ae!==z||It!==V;){if(re[Ae][It]!==null)return!1;Ae+=Ne,It+=ve}return!0},Pm=(U,W,z,V,re,Ne=!0,ve=Hn(U),Ae=kt,It=!1)=>{if(!U||!F$(V,re))return!1;const Le=Ae[V][re];if(Le&&Hn(Le)===ve)return!1;let Dt=!1;switch(U.toUpperCase()){case"P":Dt=Wne(ve,W,z,V,re,Ae);break;case"R":Dt=W$(W,z,V,re)&&yR(W,z,V,re,Ae);break;case"N":Dt=zne(W,z,V,re);break;case"B":Dt=z$(W,z,V,re)&&yR(W,z,V,re,Ae);break;case"Q":Dt=Hne(W,z,V,re)&&yR(W,z,V,re,Ae);break;case"K":Dt=Gne(ve,W,z,V,re);break}return!(!Dt||Ne&&jne(W,z,V,re,ve,Ae))},wR=(U,W=kt,z=Ft)=>{const V=[],re=W[U.row][U.col];if(!re||Hn(re)!==z)return V;const Ne=re.toLowerCase();if(Ne==="p"){const ve=z==="blue"?-1:1,Ae=z==="blue"?6:1,It=U.row+ve;if(It>=0&&It<8&&Pm(re,U.row,U.col,It,U.col,!0,z,W,!0)&&V.push({row:It,col:U.col}),U.row===Ae){const Le=U.row+2*ve;Le>=0&&Le<8&&Pm(re,U.row,U.col,Le,U.col,!0,z,W,!0)&&V.push({row:Le,col:U.col})}for(const Le of[-1,1]){const Dt=U.col+Le,an=U.row+ve;Dt>=0&&Dt<8&&an>=0&&an<8&&Pm(re,U.row,U.col,an,Dt,!0,z,W,!0)&&V.push({row:an,col:Dt})}}else if(Ne==="n"){const ve=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[Ae,It]of ve){const Le=U.row+Ae,Dt=U.col+It;Le>=0&&Le<8&&Dt>=0&&Dt<8&&Pm(re,U.row,U.col,Le,Dt,!0,z,W,!0)&&V.push({row:Le,col:Dt})}}else for(let ve=0;ve<8;ve++)for(let Ae=0;Ae<8;Ae++)Pm(re,U.row,U.col,ve,Ae,!0,z,W,!0)&&V.push({row:ve,col:Ae});return V},qne=(U,W=kt)=>{if(!zb(W,U))return!1;for(let z=0;z<8;z++)for(let V=0;V<8;V++){const re=W[z][V];if(re&&Hn(re)===U&&wR({row:z,col:V},W,U).length>0)return!1}return!0},Vne=(U,W=kt)=>{if(zb(W,U))return!1;for(let z=0;z<8;z++)for(let V=0;V<8;V++){const re=W[z][V];if(re&&Hn(re)===U&&wR({row:z,col:V},W,U).length>0)return!1}return!0},H$=(U,W)=>{if(console.log("[CLICK] Square clicked:",{row:U,col:W}),console.log("[CLICK] Game mode:",us,"Player color:",it),console.log("[CLICK] Current player:",Ft,"Player color:",it),us!==dn.ACTIVE||!it){console.log("[CLICK] Game not active or no player color");return}const z=kt[U][W],V=z?Hn(z):null;if(console.log("[CLICK] Piece at square:",z,"Piece color:",V),Ft!==it){console.log("[CLICK] Not player's turn. Current:",Ft,"Player:",it);return}if(z&&V===it){zi({row:U,col:W});const re=wR({row:U,col:W});Bf(re);return}if(_r&&Zc.some(re=>re.row===U&&re.col===W)){Kne(_r,{row:U,col:W}),zi(null),Bf([]);return}zi(null),Bf([])},Kne=async(U,W)=>{if(!it||Ft!==it)return;const z=kt[U.row][U.col];if(z){if(console.log("[PAWN_PROMOTION_CHECK]",{piece:z,pieceLower:z.toLowerCase(),isPawn:z.toLowerCase()==="p",pieceColor:Hn(z),toRow:W.row,bluePromotion:Hn(z)==="blue"&&W.row===0,redPromotion:Hn(z)==="red"&&W.row===7,shouldPromote:z.toLowerCase()==="p"&&(Hn(z)==="blue"&&W.row===0||Hn(z)==="red"&&W.row===7)}),z.toLowerCase()==="p"&&(Hn(z)==="blue"&&W.row===0||Hn(z)==="red"&&W.row===7)){console.log("[PAWN_PROMOTION] Triggering promotion dialog"),Nm({from:U,to:W}),Bb(!0);return}await G$(U,W)}},G$=async(U,W,z="q")=>{if(!it||Ft!==it)return;const V=kt[U.row][U.col];if(!V)return;const re=kt[W.row][W.col],Ne=re!==null;if(console.log("[MOVE] Executing move:",{from:{row:U.row,col:U.col,piece:V},to:{row:W.row,col:W.col,capturedPiece:re},player:Ft,isCapture:Ne,moveType:V.toUpperCase()==="K"?"king":V.toUpperCase()==="R"?"rook":"other"}),zf(Ne?"capture":"move"),Ne){Y({row:W.row,col:W.col,show:!0}),setTimeout(()=>{q$(U,W,z),Y(null)},500);return}q$(U,W,z)},q$=async(U,W,z="q")=>{if(!it||Ft!==it)return;const V=kt[U.row][U.col];if(!V)return;console.log("[MOVE_ANIMATION] Starting move execution:",{from:{row:U.row,col:U.col,piece:V},to:{row:W.row,col:W.col},currentBoard:kt.map(Le=>[...Le])});const re=kt.map(Le=>[...Le]);console.log("[MOVE_ANIMATION] Before special moves handling"),Qne(re,U,W,V,z),console.log("[MOVE_ANIMATION] After special moves handling"),re[W.row][W.col]===null&&(re[W.row][W.col]=V),re[U.row][U.col]=null,Jne(U,W,V);const Ne=Bne(U,W);k$(Le=>{const Dt=[...Le,Ne];return console.log("[MOVE HISTORY UPDATED]",Dt),Dt});const ve=Ft==="blue"?"red":"blue";zb(re,ve)&&zf("check");let Ae="active",It=null;if(qne(ve,re)){Ae="finished",It=Ft,wt(`${Ft==="red"?"Red":"Blue"} wins by checkmate!`),zf(Ft===it?"victory":"loser"),Yne();const Le=Ee();Le&&Le.length>=2?await $$(Ft,Le[0],Le[1]):(await U$(Ft===it?"win":"loss"),await K1()),It===it&&setTimeout(()=>{Kn()},2e3)}else if(Vne(ve,re)){const Le=Ft;Ae="finished",wt(`${Le==="red"?"Red":"Blue"} wins by stalemate!`),zf(Le===it?"victory":"loser");const Dt=Ee();Dt&&Dt.length>=2?await $$(Le,Dt[0],Dt[1]):(await U$(Le===it?"win":"loss"),await K1()),Le===it&&setTimeout(()=>{Kn()},2e3)}try{if(!xe){console.error("[BUG] inviteCode is missing when trying to update game!"),wt("Game code missing. Please reload or rejoin the game.");return}const Le=Wb(re);await ri.updateGame(xe,{board:{positions:Le,rows:8,cols:8},current_player:ve,game_state:Ae,winner:It,last_move:{from:U,to:W}})}catch(Le){console.error("[DATABASE] Error updating game:",Le)}jr(re),zn(ve),dr({from:U,to:W}),Bb(!1),Nm(null)},Yne=()=>{V1(!0);for(let U=0;U<50;U++)setTimeout(()=>{const W=document.createElement("div");W.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(W),setTimeout(()=>W.remove(),300)},U*100);ic.current&&clearTimeout(ic.current),ic.current=setTimeout(()=>{V1(!1)},5e3)},Qne=(U,W,z,V,re="q")=>{if(console.log("[SPECIAL_MOVES] Checking for special moves:",{piece:V,from:W,to:z,isKing:V.toLowerCase()==="k",colDifference:Math.abs(W.col-z.col)}),console.log("[SPECIAL_MOVES_PROMOTION_CHECK]",{piece:V,isPawn:V.toLowerCase()==="p",pieceColor:Hn(V),toRow:z.row,promotionPiece:re,shouldPromote:V.toLowerCase()==="p"&&(Hn(V)==="blue"&&z.row===0||Hn(V)==="red"&&z.row===7)}),V.toLowerCase()==="p"&&(Hn(V)==="blue"&&z.row===0||Hn(V)==="red"&&z.row===7)){const Ne=Hn(V)==="blue"?re.toLowerCase():re.toUpperCase();console.log("[SPECIAL_MOVES_PROMOTION] Promoting pawn to:",Ne),U[z.row][z.col]=Ne}if(V.toLowerCase()==="k"&&Math.abs(W.col-z.col)===2){if(console.log("[SPECIAL_MOVES] Castling detected!",{fromCol:W.col,toCol:z.col,castlingType:z.col===6?"kingside":"queenside"}),z.col===6)console.log("[SPECIAL_MOVES] Executing kingside castling"),U[W.row][7]=null,U[W.row][5]=Hn(V)==="blue"?"r":"R";else if(z.col===2){console.log("[SPECIAL_MOVES] Executing queenside castling");const Ne=U[W.row][3];U[W.row][0]=null,U[W.row][3]=Hn(V)==="blue"?"r":"R",Ne&&Ne.toLowerCase()==="q"&&(U[W.row][4]=Ne)}}else console.log("[SPECIAL_MOVES] No castling detected");V.toLowerCase()==="p"&&Math.abs(W.col-z.col)===1&&U[z.row][z.col]===null&&_e.lastPawnDoubleMove&&_e.lastPawnDoubleMove.row===W.row&&_e.lastPawnDoubleMove.col===z.col&&(U[W.row][z.col]=null)},Jne=(U,W,z)=>{const V={..._e};z.toLowerCase()==="k"?Hn(z)==="blue"?V.blueKingMoved=!0:V.redKingMoved=!0:z.toLowerCase()==="r"&&(Hn(z)==="blue"?(U.col===0&&(V.blueRooksMove.left=!0),U.col===7&&(V.blueRooksMove.right=!0)):(U.col===0&&(V.redRooksMove.left=!0),U.col===7&&(V.redRooksMove.right=!0))),z.toLowerCase()==="p"&&Math.abs(U.row-W.row)===2?V.lastPawnDoubleMove={row:W.row,col:W.col}:V.lastPawnDoubleMove=null,Pe(V)},zf=U=>{if(!mR)return;let W="";switch(U){case"move":W="/images/move.mp3";break;case"capture":W="/images/capture.mp3";break;case"check":W="/images/play.mp3";break;case"checkmate":W="/images/victory.mp3";break;case"victory":W="/images/victory.mp3";break;case"loser":W="/images/loser.mp3";break;case"upgrade":W="/images/upgrade.mp3";break;default:W="/images/move.mp3"}try{const z=new Audio(W);z.volume=.3,z.play().catch(V=>console.warn("Audio play failed:",V))}catch(z){console.warn("Sound play failed:",z)}},Zne=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(U){console.error("Error checking stuck games:",U)}},Xne=(U,W,z)=>{z.preventDefault(),H$(U,W)},ere=U=>{U.preventDefault()},tre=(U,W)=>{if(!kt||!Array.isArray(kt)||kt.length!==8||!kt[U]||!Array.isArray(kt[U])||kt[U].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:U,col:W,board:kt}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${U}-${W}`);const z=kt[U][W],V=(_r==null?void 0:_r.row)===U&&(_r==null?void 0:_r.col)===W,re=Zc.some(Ae=>Ae.row===U&&Ae.col===W),Ne=on&&(on.from.row===U&&on.from.col===W||on.to.row===U&&on.to.col===W),ve=z&&z.toUpperCase()==="K"&&zb(kt,Hn(z));return m.jsxs("div",{className:`square ${V?"selected":""} ${re?"legal-move":""} ${Ne?"last-move":""} ${ve?"square-in-check":""}`,onClick:()=>H$(U,W),onTouchStart:Ae=>Xne(U,W,Ae),onTouchMove:ere,children:[z&&m.jsx("div",{className:"piece",style:{backgroundImage:y2[z]?`url(${y2[z]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),re&&m.jsx("div",{className:"legal-move-indicator"})]},`${U}-${W}`)},nre=()=>{if(!$b||!jf)return null;const U=Ft==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:U.map(W=>m.jsx("div",{className:"promotion-piece",onClick:()=>{G$(jf.from,jf.to,W),Bb(!1),Nm(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:y2[W],alt:W,style:{width:"40px",height:"40px"}})},W))})]})})},rre=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:Zze.map(U=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{gR(Ub===U.key?null:U.key)},children:[m.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:U.name}),Ub===U.key&&m.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))})]});return D.useEffect(()=>{K1(),Tm(),Zne();const U=setInterval(Tm,3e4);return()=>{clearInterval(U),Qt.current&&Qt.current(),ic.current&&clearTimeout(ic.current)}},[]),m.jsxs("div",{className:`chess-game${jb?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[(us===dn.ACTIVE||us===dn.FINISHED)&&jb&&m.jsxs("div",{className:"left-sidebar",children:[Kr==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:nt.slice(0,8).map((U,W)=>m.jsxs("tr",{children:[m.jsx("td",{children:W+1}),m.jsx("td",{children:Y1(U.username)}),m.jsx("td",{children:U.points})]},U.username))})]})})]}),Kr==="moves"&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:Ob.slice().reverse().map((U,W)=>m.jsx("li",{children:U},Ob.length-1-W))})]}),Kr==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:rre()})]}),m.jsxs("div",{className:"center-area",children:[us===dn.LOBBY&&m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"PvP Chess Lawby"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",children:["Connected: ",Y1(r)]}),m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsxs("h3",{children:["Open Games (",Db.length,")"]}),m.jsxs("div",{className:"games-list",children:[Db.map(U=>(console.log("[RENDER LOBBY] Rendering game:",U),m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:U.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(U.bet_amount)/Math.pow(10,Zr[U.bet_token||"DMT"].decimals)).toFixed(2)," ",U.bet_token||"DMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",Y1(U.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>B$(U.invite_code),children:"Join Game"})]},U.invite_code))),Db.length===0&&m.jsx("div",{className:"no-games",children:"No open games available"})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:()=>To(!0),disabled:W1||xm,children:"Create New Game"}),m.jsx("button",{onClick:Tm,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🔄 Refresh Lobby"}),m.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:"🏠 Back to Chess Home"})]}),W1&&m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsx(Qze,{selectedToken:Wr,onTokenSelect:uR,wagerAmount:rc,onWagerChange:Ff,disabled:xm}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:Une,disabled:rc<=0||xm,children:xm?"Creating...":"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>{To(!1),gi(!1)},children:"Cancel"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),us===dn.WAITING&&m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:xe})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",Sm.toFixed(((V$=Zr[Wr])==null?void 0:V$.decimals)||8)," ",Wr]}),m.jsx("p",{children:"Share this invite code with your opponent"})]}),m.jsxs("div",{className:"waiting-actions",children:[m.jsx("button",{onClick:_t,disabled:B||ae,className:"refund-game-btn",children:B||ae?"⏳ Refunding...":"💰 Refund Game"}),m.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),(us===dn.ACTIVE||us===dn.FINISHED)&&jb&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:Ft==="blue"?"current-blue":"current-red",children:[Ft==="blue"?"Blue":"Red"," to move"]}),m.jsxs("span",{className:"wager-display",children:["Wager: ",Sm.toFixed(((K$=Zr[Wr])==null?void 0:K$.decimals)||8)," ",Wr]}),kb&&m.jsxs("span",{className:"opponent-info",children:["vs ",Y1(kb)]})]}),m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",children:[Array.from({length:8},(U,W)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(z,V)=>tre(W,V))},W)),q&&q.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${q.row*12.5}%`,left:`${q.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:Kr==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("moves"),children:"Moves"}),m.jsx("button",{className:Kr==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Kr==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:()=>{Nn(dn.LOBBY),Ro(!1)},children:"New Game"}),m.jsx("button",{onClick:()=>{Nn(dn.LOBBY),Ro(!1)},children:"Menu"})]})]})]})]})]}),nre(),Fb&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:()=>Nn(dn.LOBBY),children:"Back to Lobby"}),m.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]})},lS={AI:"ai"},eHe=1996,uS={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},MW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],tHe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],nHe=()=>{const[t,e]=D.useState(!1),n=D.useRef(null),r=D.useRef(!1);D.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=D.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=D.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},rHe=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),s=D.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=D.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},sHe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=wb(),i=Ja();TU();const{open:o}=P1(),[a,c]=D.useState(lS.AI),[l,u]=D.useState(()=>JSON.parse(JSON.stringify(MW))),[d,h]=D.useState("blue"),[f,p]=D.useState(null),[g,w]=D.useState("active"),[y,b]=D.useState("hard"),[v,A]=D.useState("Connect wallet to play"),[_,I]=D.useState([]),[x,N]=D.useState([]),[S,O]=D.useState([]),[P,F]=D.useState(null),[G,B]=D.useState(!1),[T,R]=D.useState(!1),[$,k]=D.useState(null),[M,j]=D.useState(null),[K]=D.useState(""),[ne]=D.useState(.1),[le,oe]=D.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ae=D.useRef(null),ue=D.useRef(!1),Xe=D.useRef(l),xe=D.useRef(null),Me=D.useRef(null),rt=D.useRef(!1),Rt=D.useRef(!1),[Xt,X]=D.useState(!1),[ce,Ee]=D.useState(!1),[ge,be]=D.useState(!1),{stockfishReady:Ze}=nHe(),{getOpeningData:st}=rHe(),[St,_t]=D.useState("loading"),[Kn,kt]=D.useState(!1),[jr,Ft]=D.useState([]),[zn,_r]=D.useState(!1),[zi,Zc]=D.useState(()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],Y=Math.floor(Math.random()*q.length),se=q[Y];return console.log("[DEBUG] Initial random chessboard selected:",se,"(index:",Y,")"),se}),[Bf,Ob]=D.useState(!0),[k$,F1]=D.useState(!1);D.useEffect(()=>{!s||!r?(A("Connect wallet to play"),B(!1),X(!1),o()):i!==eHe?(A("Switch to Sanko Mainnet to play"),B(!1),X(!1),o()):A("Select game mode")},[s,r,i,o]);const wt=()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],Y=Math.floor(Math.random()*q.length),se=q[Y];return console.log("[DEBUG] Random chessboard selected:",se,"(index:",Y,")"),se};D.useEffect(()=>{if(Ze)_t("ready");else{const q=window.setTimeout(()=>{Ze||(_t("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(q)}},[Ze]),D.useEffect(()=>{Xe.current=l},[l]),D.useEffect(()=>(!ae.current&&typeof Worker<"u"&&(ae.current=new Worker("/aiWorker.js"),ae.current.onmessage=q=>{console.log("[DEBUG] AI worker response received:",q.data);const{move:Y,nodes:se}=q.data;Y&&ue.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",Y),console.log("[DEBUG] AI searched",se,"nodes"),ue.current=!1,Me.current&&(window.clearTimeout(Me.current),Me.current=null),xe.current&&xe.current(Y.from,Y.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ae.current.onerror=q=>{console.error("[DEBUG] AI worker error:",q),A("AI worker error - using fallback mode"),ue.current=!1}),()=>{ae.current&&(ae.current.terminate(),ae.current=null),Me.current&&(window.clearTimeout(Me.current),Me.current=null)}),[]),D.useEffect(()=>{us()},[]);const us=async()=>{try{await Oee();const q=await Pee(20);N(q),console.log("Leaderboard data loaded:",q)}catch(q){A("Failed to load leaderboard"),console.error("Leaderboard error:",q)}},Nn=async q=>{if(console.log("[DEBUG] updateScore called with:",q),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",Qg(r)),await UI(r,q)?(console.log("[DEBUG] Successfully updated score for:",Qg(r)),await us()):console.error("[DEBUG] Failed to update score")}catch(Y){console.error("[DEBUG] Error in updateScore:",Y)}},it=q=>q&&q===q.toUpperCase()?"red":"blue",Vr=(q,Y)=>q>=0&&q<8&&Y>=0&&Y<8,kb=(q,Y)=>`${String.fromCharCode(97+Y)}${8-q}`,ir=(q,Y)=>{const se=Y==="blue"?"k":"K";let ie=null;for(let Pe=0;Pe<8;Pe++){for(let nt=0;nt<8;nt++)if(q[Pe][nt]===se){ie={row:Pe,col:nt};break}if(ie)break}if(!ie)return console.log(`King not found for ${Y}`),!1;const ee=Y==="blue"?"red":"blue",_e=Sm(ie.row,ie.col,ee,q);return console.log(`${Y} king at ${ie.row},${ie.col} under attack: ${_e}`),_e},Sm=(q,Y,se,ie)=>{for(let ee=0;ee<8;ee++)for(let _e=0;_e<8;_e++){const Pe=ie[ee][_e];if(Pe&&it(Pe)===se&&Ns(Pe,ee,_e,q,Y,!1,se,ie,!0))return!0}return!1},cR=(q,Y,se,ie,ee,_e=l)=>{const Pe=_e.map(ln=>[...ln]),nt=Pe[q][Y];return Pe[se][ie]=nt,Pe[q][Y]=null,ir(Pe,ee)},Db=(q,Y,se,ie,ee,_e)=>{const Pe=q==="blue"?-1:1,nt=q==="blue"?6:1;if(!Vr(ie,ee)||q==="blue"&&ie>=Y||q==="red"&&ie<=Y)return!1;const ln=Math.abs(ie-Y),on=Math.abs(ee-se);if((ln===1&&on===0||ln===2&&on===0&&Y===nt||ln===1&&on===1)&&ln<=2&&on<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:q,from:`${Y},${se}`,to:`${ie},${ee}`}),se===ee&&ie===Y+Pe)return _e[ie][ee]===null;if(se===ee&&Y===nt&&ie===Y+2*Pe)return _e[Y+Pe][se]===null&&_e[ie][ee]===null;if(Math.abs(se-ee)===1&&ie===Y+Pe){const Qt=_e[ie][ee];return Qt!==null&&it(Qt)!==q}if(Math.abs(se-ee)===1&&ie===Y+Pe){const Qt=_e[Y][ee];if(Qt&&it(Qt)!==q&&Qt.toLowerCase()==="p"&&le.lastPawnDoubleMove&&le.lastPawnDoubleMove.row===Y&&le.lastPawnDoubleMove.col===ee)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},j1=(q,Y,se,ie,ee)=>q!==se&&Y!==ie?!1:Hi(q,Y,se,ie,ee),W1=(q,Y,se,ie)=>{const ee=Math.abs(q-se),_e=Math.abs(Y-ie);return ee===2&&_e===1||ee===1&&_e===2},To=(q,Y,se,ie,ee)=>Math.abs(q-se)!==Math.abs(Y-ie)?!1:Hi(q,Y,se,ie,ee),xm=(q,Y,se,ie,ee)=>j1(q,Y,se,ie,ee)||To(q,Y,se,ie,ee),gi=(q,Y,se,ie,ee)=>{const _e=Math.abs(Y-ie),Pe=Math.abs(se-ee);if(_e<=1&&Pe<=1)return!0;if(_e===0&&Pe===2){if(q==="blue"&&!le.blueKingMoved){if(ee===6&&!le.blueRooksMove.right||ee===2&&!le.blueRooksMove.left)return!0}else if(q==="red"&&!le.redKingMoved&&(ee===6&&!le.redRooksMove.right||ee===2&&!le.redRooksMove.left))return!0}return!1},Hi=(q,Y,se,ie,ee)=>{const _e=q===se?0:(se-q)/Math.abs(se-q),Pe=Y===ie?0:(ie-Y)/Math.abs(ie-Y);let nt=q+_e,ln=Y+Pe;for(;nt!==se||ln!==ie;){if(ee[nt][ln]!==null)return!1;nt+=_e,ln+=Pe}return!0},Ns=(q,Y,se,ie,ee,_e=!0,Pe=it(q),nt=l,ln=!1)=>{if(!Vr(ie,ee))return ln||console.log("[ILLEGAL MOVE] Out of board:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee}),!1;const on=nt[ie][ee];if(on&&it(on)===Pe)return ln||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee}),!1;const dr=q.toLowerCase();let Qt=!1;switch(dr){case"p":Qt=Db(Pe,Y,se,ie,ee,nt);break;case"r":Qt=j1(Y,se,ie,ee,nt);break;case"n":Qt=W1(Y,se,ie,ee);break;case"b":Qt=To(Y,se,ie,ee,nt);break;case"q":Qt=xm(Y,se,ie,ee,nt);break;case"k":Qt=gi(Pe,Y,se,ie,ee);break}return Qt?Qt&&_e&&cR(Y,se,ie,ee,Pe,nt)?(ln||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee}),!1):Qt:(ln||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:q,startRow:Y,startCol:se,endRow:ie,endCol:ee,playerColor:Pe,pieceType:dr,targetPiece:nt[ie][ee],targetPieceColor:nt[ie][ee]?it(nt[ie][ee]):null}),!1)},Tn=(q,Y=l,se=d)=>{const ie=[],ee=Y[q.row][q.col];if(!ee||it(ee)!==se)return ie;const _e=ee.toLowerCase();if(_e==="p"){const Pe=se==="blue"?-1:1,nt=se==="blue"?6:1,ln=q.row+Pe;if(ln>=0&&ln<8&&Ns(ee,q.row,q.col,ln,q.col,!0,se,Y,!0)&&ie.push({row:ln,col:q.col}),q.row===nt){const on=q.row+2*Pe;on>=0&&on<8&&Ns(ee,q.row,q.col,on,q.col,!0,se,Y,!0)&&ie.push({row:on,col:q.col})}for(const on of[-1,1]){const dr=q.col+on,Qt=q.row+Pe;dr>=0&&dr<8&&Qt>=0&&Qt<8&&Ns(ee,q.row,q.col,Qt,dr,!0,se,Y,!0)&&ie.push({row:Qt,col:dr})}}else if(_e==="n"){const Pe=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[nt,ln]of Pe){const on=q.row+nt,dr=q.col+ln;on>=0&&on<8&&dr>=0&&dr<8&&Ns(ee,q.row,q.col,on,dr,!0,se,Y,!0)&&ie.push({row:on,col:dr})}}else for(let Pe=0;Pe<8;Pe++)for(let nt=0;nt<8;nt++)Ns(ee,q.row,q.col,Pe,nt,!0,se,Y,!0)&&ie.push({row:Pe,col:nt});return ie},nc=(q,Y=l)=>{if(!ir(Y,q))return!1;for(let se=0;se<8;se++)for(let ie=0;ie<8;ie++){const ee=Y[se][ie];if(ee&&it(ee)===q&&Tn({row:se,col:ie},Y,q).length>0)return!1}return!0},Mb=(q,Y=l)=>{if(ir(Y,q))return!1;for(let se=0;se<8;se++)for(let ie=0;ie<8;ie++){const ee=Y[se][ie];if(ee&&it(ee)===q&&Tn({row:se,col:ie},Y,q).length>0)return!1}return!0},Im=(q,Y)=>{if(g!=="active"||ue.current)return;const se=l[q][Y],ie=se?it(se):null;if(f&&S.some(ee=>ee.row===q&&ee.col===Y)){su(f,{row:q,col:Y});return}if(se&&ie===d){const ee=Tn({row:q,col:Y});p({row:q,col:Y}),O(ee);return}p(null),O([])},su=(q,Y,se=!1)=>{const ie=l[q.row][q.col];if(console.log("[MOVE ATTEMPT]",{from:q,to:Y,piece:ie,isAIMove:se,board:JSON.parse(JSON.stringify(l)),moveHistory:_}),!!ie){if(ie.toLowerCase()==="p"&&(it(ie)==="blue"&&Y.row===0||it(ie)==="red"&&Y.row===7)){k({from:q,to:Y}),R(!0);return}pR(q,Y,"q",se)}};xe.current=su;const lR=D.useCallback((q,Y,se=!1)=>{_r(!0);const ie=l.map(Pe=>[...Pe]),ee=ie[q.row][q.col];if(!ee)return;ie[Y.row][Y.col]=ee,ie[q.row][q.col]=null,G1(ie,q,Y,ee);const _e=fR(q,Y);if(I(Pe=>{const nt=[...Pe,_e];return console.log("[MOVE HISTORY UPDATED]",nt),nt}),F({from:q,to:Y}),p(null),O([]),_.length<10&&!se){const Pe=LW(ie,d==="blue"?"red":"blue");st(Pe).then(nt=>{nt&&nt.moves&&nt.moves.length>0&&(Ft(nt.moves.slice(0,3)),kt(!0),setTimeout(()=>kt(!1),5e3))})}q1(q,Y,ee),h(Pe=>{const nt=Pe==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",nt),rc(ie,nt),nt}),rc(ie,d==="blue"?"red":"blue"),u(ie),ue.current=!1,rt.current=!1,Rt.current=!1,_r(!1)},[l,d,_,st]);D.useEffect(()=>{if(!ue.current&&a==="ai"&&d==="red"&&!rt.current&&!zn)if(ue.current=!0,y==="easy")setTimeout(()=>{const q=Ff(l);q?su(q.from,q.to,!0):ue.current=!1},600);else{A("AI is calculating...");const q=LW(l,d);if(Rt.current)return;Rt.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:q,difficulty:y,movetime:3e3})}).then(se=>{if(se.ok)return se.json();throw new Error("API call failed")}).then(se=>{console.log("[DEBUG] Stockfish API response:",se);const ie=se.bestmove||se.move;if(ie&&ie!=="(none)"&&ie.length===4){const ee=ie.charCodeAt(0)-97,_e=parseInt(ie[1]),Pe=ie.charCodeAt(2)-97,nt=parseInt(ie[3]),ln=8-_e,on=8-nt;if(console.log("[DEBUG] Parsed move:",{fromCol:ee,fromRowStockfish:_e,toCol:Pe,toRowStockfish:nt,fromRow:ln,toRow:on}),ee>=0&&ee<8&&ln>=0&&ln<8&&Pe>=0&&Pe<8&&on>=0&&on<8){const dr={from:{row:ln,col:ee},to:{row:on,col:Pe}},Qt=l[ln][ee];if(console.log("[DEBUG] Move validation:",{piece:Qt,moveObj:dr,isValid:Qt&&it(Qt)==="red"&&Ns(Qt,ln,ee,on,Pe,!0,"red",l)}),Qt&&it(Qt)==="red"&&Ns(Qt,ln,ee,on,Pe,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",dr),su(dr.from,dr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const ic=Ff(l);ic&&su(ic.from,ic.to,!0),ue.current=!1,Rt.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const dr=Ff(l);dr&&su(dr.from,dr.to,!0),ue.current=!1,Rt.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ee=Ff(l);ee&&su(ee.from,ee.to,!0),ue.current=!1,Rt.current=!1}}).catch(se=>{console.error("[DEBUG] Stockfish API error:",se),A("AI error. Falling back to random moves.");const ie=Ff(l);ie&&su(ie.from,ie.to,!0),ue.current=!1,Rt.current=!1})}},[d,a,y,l,le,Ze]);const rc=(q,Y)=>{console.log("Checking game end for player:",Y);const se=q.some(ee=>ee.some(_e=>_e==="k")),ie=q.some(ee=>ee.some(_e=>_e==="K"));if(!se)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),Nn("loss"),be(!0),setTimeout(()=>be(!1),3e3),"checkmate";if(!ie)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),Nn("win"),be(!0),setTimeout(()=>be(!1),3e3),"checkmate";if(console.log("Is king in check:",ir(q,Y)),nc(Y,q)){console.log("[GAME END] CHECKMATE",{winner:Y==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(q)),moveHistory:_}),w("checkmate");const ee=Y==="blue"?"red":"blue";return ee==="blue"?(A("Checkmate! You win!"),ou("victory"),$b(!0),F1(!0),Ub(),Nn("win"),be(!0),setTimeout(()=>be(!1),3e3)):(A(`Checkmate! ${ee==="red"?"AI":"Opponent"} wins!`),ou("loser"),jf(!0),Nn("loss"),be(!0),setTimeout(()=>be(!1),3e3)),"checkmate"}if(Mb(Y,q)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(q)),moveHistory:_}),w("stalemate");const ee=Y==="blue"?"red":"blue";return ee==="blue"?(A("Stalemate! You win!"),ou("victory"),$b(!0),F1(!0),Ub(),Nn("win"),be(!0),setTimeout(()=>be(!1),3e3)):(A(`Stalemate! ${ee==="red"?"AI":"Opponent"} wins!`),ou("loser"),jf(!0),Nn("loss"),be(!0),setTimeout(()=>be(!1),3e3)),"stalemate"}return ir(q,Y)?(console.log("CHECK detected!"),ou("check"),A(`${Y==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},Ff=q=>{const Y=[];for(let ee=0;ee<8;ee++)for(let _e=0;_e<8;_e++){const Pe=q[ee][_e];Pe&&it(Pe)==="red"&&Y.push({row:ee,col:_e})}for(let ee=Y.length-1;ee>0;ee--){const _e=Math.floor(Math.random()*(ee+1));[Y[ee],Y[_e]]=[Y[_e],Y[ee]]}const se=[],ie=[];for(const ee of Y){const _e=Tn(ee,q,"red");for(const Pe of _e){const nt=q[Pe.row][Pe.col];if(nt&&it(nt)==="blue"){const on={p:100,n:320,b:330,r:500,q:900,k:2e4}[nt.toLowerCase()]||0;se.push({from:ee,to:Pe,value:on})}else ie.push({from:ee,to:Pe})}}if(se.length>0&&Math.random()<.3){se.sort((ee,_e)=>ee.value-_e.value);for(const ee of se){const _e=q.map(nt=>[...nt]),Pe=_e[ee.from.row][ee.from.col];if(_e[ee.to.row][ee.to.col]=Pe,_e[ee.from.row][ee.from.col]=null,!ir(_e,"red"))return{from:ee.from,to:ee.to}}}for(const ee of ie){const _e=q.map(nt=>[...nt]),Pe=_e[ee.from.row][ee.from.col];if(_e[ee.to.row][ee.to.col]=Pe,_e[ee.from.row][ee.from.col]=null,!ir(_e,"red"))return ee}se.sort((ee,_e)=>ee.value-_e.value);for(const ee of se){const _e=q.map(nt=>[...nt]),Pe=_e[ee.from.row][ee.from.col];if(_e[ee.to.row][ee.to.col]=Pe,_e[ee.from.row][ee.from.col]=null,!ir(_e,"red"))return{from:ee.from,to:ee.to}}return null},Wr=()=>{u(JSON.parse(JSON.stringify(MW))),h("blue"),p(null),w("active"),I([]),O([]),F(null),B(!1),A("Select game mode"),oe({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ue.current&&(ue.current=!1)},uR=()=>{if(jb(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){B(!1),X(!1);return}B(!0),X(!1),A("Game started! Your turn");const q=wt();Zc(q),console.log("[DEBUG] Game started with chessboard:",q)},Lb=q=>`${q.slice(0,6)}...${q.slice(-4)}`,dR=(q,Y)=>{const se=l[q][Y],ie=(f==null?void 0:f.row)===q&&(f==null?void 0:f.col)===Y,ee=S.some(Pe=>Pe.row===q&&Pe.col===Y),_e=P&&(P.from.row===q&&P.from.col===Y||P.to.row===q&&P.to.col===Y);return m.jsxs("div",{className:`square ${ie?"selected":""} ${ee?"legal-move":""} ${_e?"last-move":""}`,onClick:()=>Im(q,Y),onTouchStart:Pe=>mR(q,Y,Pe),onTouchMove:M$,children:[se&&m.jsx("div",{className:"piece",style:{backgroundImage:uS[se]?`url(${uS[se]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ee&&m.jsx("div",{className:"legal-move-indicator"})]},`${q}-${Y}`)},D$=()=>{if(!T||!$)return null;const q=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:q.map(Y=>m.jsx("div",{className:"promotion-piece",onClick:()=>{pR($.from,$.to,Y),R(!1),k(null)},style:{backgroundImage:uS[Y]?`url(${uS[Y]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},Y))})]})})},[iu,z1]=D.useState(null),H1=(q=!1,Y="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${q?" piece-gallery-sm":""}`,children:[m.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:tHe.map(se=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{z1(iu===se.key?null:se.key)},children:[m.jsx("img",{src:se.img,alt:se.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:se.name}),iu===se.key&&m.jsx("div",{className:"piece-gallery-desc",children:se.desc})]},se.key))}),m.jsx("div",{className:"piece-gallery-tip",children:Y})]}),hR=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),m.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{uR()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:"♟️"})," Start Game"]})]})})}),G1=(q,Y,se,ie)=>{if(ie.toLowerCase()==="p"&&(it(ie)==="blue"&&se.row===0||it(ie)==="red"&&se.row===7)){const ee=it(ie)==="blue"?"q":"Q";q[se.row][se.col]=ee}if(ie.toLowerCase()==="k"&&Math.abs(Y.col-se.col)===2){if(se.col===6)q[Y.row][7]=null,q[Y.row][5]=it(ie)==="blue"?"r":"R";else if(se.col===2){const ee=q[Y.row][3];q[Y.row][0]=null,q[Y.row][3]=it(ie)==="blue"?"r":"R",ee&&ee.toLowerCase()==="q"&&(q[Y.row][4]=ee)}}},fR=(q,Y,se,ie)=>{const ee=kb(q.row,q.col),_e=kb(Y.row,Y.col);return`${ee}-${_e}`},q1=(q,Y,se)=>{const ie={...le};se.toLowerCase()==="k"?it(se)==="blue"?ie.blueKingMoved=!0:ie.redKingMoved=!0:se.toLowerCase()==="r"&&(it(se)==="blue"?(q.col===0&&(ie.blueRooksMove.left=!0),q.col===7&&(ie.blueRooksMove.right=!0)):(q.col===0&&(ie.redRooksMove.left=!0),q.col===7&&(ie.redRooksMove.right=!0))),se.toLowerCase()==="p"&&Math.abs(q.row-Y.row)===2?ie.lastPawnDoubleMove={row:Y.row,col:Y.col}:ie.lastPawnDoubleMove=null,oe(ie)},pR=(q,Y,se="q",ie=!1)=>{l[q.row][q.col];const _e=l[Y.row][Y.col]!==null;if(ou(_e?"capture":"move"),_e){j({row:Y.row,col:Y.col,show:!0}),setTimeout(()=>{lR(q,Y,ie),j(null)},500);return}lR(q,Y,ie)},ou=q=>{if(!Bf)return;let Y="";switch(q){case"move":Y="/images/move.mp3";break;case"capture":Y="/images/capture.mp3";break;case"check":Y="/images/play.mp3";break;case"checkmate":Y="/images/victory.mp3";break;case"victory":Y="/images/victory.mp3";break;case"loser":Y="/images/loser.mp3";break;case"upgrade":Y="/images/upgrade.mp3";break;default:Y="/images/move.mp3"}new Audio(Y).play().catch(()=>{})},Ub=()=>{ou("victory");for(let q=0;q<50;q++)setTimeout(()=>{const Y=document.createElement("div");Y.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(Y),setTimeout(()=>Y.remove(),3e3)},q*100);for(let q=0;q<15;q++)setTimeout(()=>{const Y=document.createElement("div"),se=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],ie=se[Math.floor(Math.random()*se.length)];Y.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${ie};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(Y),setTimeout(()=>Y.remove(),6e3)},q*200);setTimeout(()=>F1(!1),5e3)},[gR,$b]=D.useState(!1),[Bb,jf]=D.useState(!1),Nm=()=>{$b(!1),jf(!1)},Fb=()=>{Nm(),Wr()},V1=()=>{Nm(),B(!1)},jb=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Ro=a==="online",[Kr,sc]=D.useState("leaderboard"),mR=(q,Y,se)=>{se.preventDefault(),Im(q,Y)},M$=q=>{q.preventDefault()};return Ro?m.jsx(Ine,{onClose:t,onMinimize:e,fullscreen:n}):!G&&!Xt?m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[Kr==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((q,Y)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const se=q;return m.jsxs("tr",{children:[m.jsx("td",{children:Y+1}),m.jsx("td",{children:Lb(se.username)}),m.jsx("td",{children:se.points})]},se.username)}return null})})]})})]}),Kr==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:H1(!0,"Click pieces to learn more")})]}),m.jsx("div",{className:"center-area",children:m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${Ro?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===lS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),Ro&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:Kr==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Kr==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("gallery"),children:"Gallery"})]})]})})]})]}):m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${G?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:"×"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[Kr==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((q,Y)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const se=q;return m.jsxs("tr",{children:[m.jsx("td",{children:Y+1}),m.jsx("td",{children:Lb(se.username)}),m.jsx("td",{children:se.points})]},se.username)}return null})})]})})]}),Kr==="moves"&&G&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:_.slice().reverse().map((q,Y)=>m.jsx("li",{children:q},_.length-1-Y))})]}),Kr==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:H1(!0,"Click pieces to learn more")})]}),m.jsxs("div",{className:"center-area",children:[G&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===lS.AI&&m.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),Ro&&m.jsxs("span",{className:"wager-display",children:["Wager: ",ne," tDMT"]})]}),G?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${zi})`},children:[Array.from({length:8},(q,Y)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(se,ie)=>dR(Y,ie))},Y)),M&&M.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:Kr==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Kr==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("moves"),children:"Moves"}),m.jsx("button",{className:Kr==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:Fb,children:"New Game"}),m.jsx("button",{onClick:V1,children:"Menu"})]})]}):Xt?hR():m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${Ro?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===lS.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),Ro&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:Kr==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:Kr==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>sc("gallery"),children:"Gallery"})]})]})]})]}),ce&&H1(!0),T&&D$(),ge&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),gR&&m.jsxs("div",{className:"victory-overlay",children:[m.jsx("div",{className:"balloons-container"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Victory!"}),m.jsx("button",{onClick:Fb,children:"New Game"})]})})]}),Bb&&m.jsxs("div",{className:"defeat-overlay",children:[m.jsx("div",{className:"blood-overlay"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Defeat!"}),m.jsx("button",{onClick:Fb,children:"Try Again"})]})})]})]})};function LW(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const UW=()=>{const[t,e]=D.useState("singleplayer"),n=()=>{window.location.href="/"};return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(sHe,{onClose:n}):m.jsx(Ine,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},iHe=Symbol(),$W=Object.getPrototypeOf,j5=new WeakMap,oHe=t=>t&&(j5.has(t)?j5.get(t):$W(t)===Object.prototype||$W(t)===Array.prototype),aHe=t=>oHe(t)&&t[iHe]||null,BW=(t,e=!0)=>{j5.set(t,e)},QI={},I$=t=>typeof t=="object"&&t!==null,cHe=t=>I$(t)&&!U1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Nne=(t,e)=>{const n=W5.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return BW(r,!0),W5.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(U1.has(i))BW(i,!1);else if(Rf.has(i)){const[c,l]=Rf.get(i);a.value=Nne(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},lHe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(FW(l,o)||v_.has(o)&&FW(l,v_.get(o))))return!0;n(i),I$(o)&&(o=aHe(o)||o);const u=!Rf.has(o)&&dHe(o)?ur(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Rf=new WeakMap,U1=new WeakSet,W5=new WeakMap,Qv=[1,1],v_=new WeakMap;let FW=Object.is,uHe=(t,e)=>new Proxy(t,e),dHe=cHe,hHe=Nne,fHe=lHe;function ur(t={}){if(!I$(t))throw new Error("object required");const e=v_.get(t);if(e)return e;let n=Qv[0];const r=new Set,s=(w,y=++Qv[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=Qv[1];const o=(w=++Qv[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const v=[...y];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,y)=>{const b=!U1.has(y)&&Rf.get(y);if(b){if((QI?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((QI?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const _=b[2](a(A));c.set(A,[b,_])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=fHe(()=>h,l,u,s),p=uHe(t,f);v_.set(t,p);const g=[t,o,d];return Rf.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function xo(t,e,n){const r=Rf.get(t);(QI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function E_(t){const e=Rf.get(t);(QI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return hHe(n,r())}function Jw(t){return U1.add(t),t}function pHe(){return{proxyStateMap:Rf,refSet:U1,snapCache:W5,versionHolder:Qv,proxyCache:v_}}function Wi(t,e,n,r){let s=t[e];return xo(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:gHe,snapCache:mHe}=pHe(),dS=t=>gHe.has(t);function yHe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=mHe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return dS(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!dS(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!dS(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!dS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=ur(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var jW={};const fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof jW<"u"?jW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},JI={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},wHe={bigNumber(t){return t?new kl(t):new kl(0)},multiply(t,e){if(t===void 0||e===void 0)return new kl(0);const n=new kl(t),r=new kl(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},bHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],vHe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],EHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],CHe={getERC20Abi:t=>fe.USDT_CONTRACT_ADDRESSES.includes(t)?EHe:bHe,getSwapAbi:()=>vHe},Wh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},xt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function w2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const bt={setItem(t,e){Jv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Jv())return localStorage.getItem(t)||void 0},removeItem(t){Jv()&&localStorage.removeItem(t)},clear(){Jv()&&localStorage.clear()}};function Jv(){return typeof window<"u"&&typeof localStorage<"u"}function ZI(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const ki={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[fe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},et={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=et.getActiveNamespace(),e=et.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{bt.setItem(xt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=bt.getItem(xt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{bt.removeItem(xt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{bt.setItem(xt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{bt.setItem(xt.ACTIVE_CAIP_NETWORK_ID,t),et.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return bt.getItem(xt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{bt.removeItem(xt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=w2(t);bt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=et.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),bt.setItem(xt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=bt.getItem(xt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=w2(t);bt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return bt.getItem(xt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=w2(t);return bt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{bt.setItem(xt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return bt.getItem(xt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{bt.removeItem(xt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return bt.getItem(xt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=bt.getItem(xt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{bt.setItem(xt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return bt.getItem(xt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=bt.getItem(xt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));bt.setItem(xt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=et.getConnectedNamespaces();e.includes(t)||(e.push(t),et.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=et.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),et.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return bt.getItem(xt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{bt.setItem(xt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{bt.removeItem(xt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=bt.getItem(xt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=et.getBalanceCache();bt.setItem(xt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=et.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=et.getBalanceCache();e[t.caipAddress]=t,bt.setItem(xt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=bt.getItem(xt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=et.getBalanceCache();bt.setItem(xt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=et.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=et.getNativeBalanceCache();e[t.caipAddress]=t,bt.setItem(xt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=bt.getItem(xt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=et.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;et.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=et.getEnsCache();e[t.address]=t,bt.setItem(xt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=et.getEnsCache();bt.setItem(xt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=bt.getItem(xt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=et.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;et.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=et.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},bt.setItem(xt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=et.getIdentityCache();bt.setItem(xt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{bt.removeItem(xt.PORTFOLIO_CACHE),bt.removeItem(xt.NATIVE_BALANCE_CACHE),bt.removeItem(xt.ENS_CACHE),bt.removeItem(xt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{bt.setItem(xt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=bt.getItem(xt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=et.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===fe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};bt.setItem(xt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=bt.getItem(xt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=et.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),bt.setItem(xt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=bt.getItem(xt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),bt.setItem(xt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),bt.setItem(xt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(et.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ht={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ht.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=ki.TEN_SEC_MS:!0},isAllowedRetry(t,e=ki.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ht.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+ki.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ht.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ht.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?et.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ht.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return fe.W3M_API_URL},getBlockchainApiUrl(){return fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?ki.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in fe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Sv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class $1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Sv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Sv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Sv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Sv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Sv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const _He={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?ki.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ht.isTelegram()){if(ht.isIos())return t.filter(e=>e!=="google");if(ht.isMac())return t.filter(e=>e!=="x");if(ht.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},pt=ur({features:ki.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:ki.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Pt={state:pt,subscribeKey(t,e){return Wi(pt,t,e)},setOptions(t){Object.assign(pt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...pt.remoteFeatures,...t};pt.remoteFeatures=e,(n=pt.remoteFeatures)!=null&&n.socials&&(pt.remoteFeatures.socials=_He.filterSocialsByPlatform(pt.remoteFeatures.socials))},setFeatures(t){if(!t)return;pt.features||(pt.features=ki.DEFAULT_FEATURES);const e={...pt.features,...t};pt.features=e},setProjectId(t){pt.projectId=t},setCustomRpcUrls(t){pt.customRpcUrls=t},setAllWallets(t){pt.allWallets=t},setIncludeWalletIds(t){pt.includeWalletIds=t},setExcludeWalletIds(t){pt.excludeWalletIds=t},setFeaturedWalletIds(t){pt.featuredWalletIds=t},setTokens(t){pt.tokens=t},setTermsConditionsUrl(t){pt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){pt.privacyPolicyUrl=t},setCustomWallets(t){pt.customWallets=t},setIsSiweEnabled(t){pt.isSiweEnabled=t},setIsUniversalProvider(t){pt.isUniversalProvider=t},setSdkVersion(t){pt.sdkVersion=t},setMetadata(t){pt.metadata=t},setDisableAppend(t){pt.disableAppend=t},setEIP6963Enabled(t){pt.enableEIP6963=t},setDebug(t){pt.debug=t},setEnableWalletConnect(t){pt.enableWalletConnect=t},setEnableWalletGuide(t){pt.enableWalletGuide=t},setEnableAuthLogger(t){pt.enableAuthLogger=t},setEnableWallets(t){pt.enableWallets=t},setPreferUniversalLinks(t){pt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(ki.SIWX_DEFAULTS))t[e]??(t[e]=n);pt.siwx=t},setConnectMethodsOrder(t){pt.features={...pt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){pt.features={...pt.features,walletFeaturesOrder:t}},setSocialsOrder(t){pt.remoteFeatures={...pt.remoteFeatures,socials:t}},setCollapseWallets(t){pt.features={...pt.features,collapseWallets:t}},setEnableEmbedded(t){pt.enableEmbedded=t},setAllowUnsupportedChain(t){pt.allowUnsupportedChain=t},setManualWCControl(t){pt.manualWCControl=t},setEnableNetworkSwitch(t){pt.enableNetworkSwitch=t},setEnableReconnect(t){pt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(pt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){pt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return pt.universalProviderConfigOverride},getSnapshot(){return E_(pt)}},AHe=Object.freeze({enabled:!0,events:[]}),SHe=new $1({baseUrl:ht.getAnalyticsUrl(),clientId:null}),xHe=5,IHe=60*1e3,zd=ur({...AHe}),NHe={state:zd,subscribeKey(t,e){return Wi(zd,t,e)},async sendError(t,e){if(!zd.enabled)return;const n=Date.now();if(zd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<IHe}).length>=xHe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};zd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Pt.state;await SHe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ht.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){zd.enabled=!0},disable(){zd.enabled=!1},clearEvents(){zd.events=[]}};class Zw extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Zw.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Zw):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function WW(t,e){const n=t instanceof Zw?t:new Zw(t instanceof Error?t.message:String(t),e,t);throw NHe.sendError(n,n.category),n}function tc(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return WW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return WW(a,e)}},n[r]=i}else n[r]=s}),n}var Xw={};const THe="https://secure.walletconnect.org/sdk",RHe=(typeof process<"u"&&typeof Xw<"u"?Xw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||THe,PHe=(typeof process<"u"&&typeof Xw<"u"?Xw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",OHe=(typeof process<"u"&&typeof Xw<"u"?Xw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Qe={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},qs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Tl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},kHe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Tl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Tl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Tl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Tl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===fe.CHAIN.SOLANA&&t===Tl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Tl.COINBASE.url}/dapp?cb_url=${r}`)}},Do=ur({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),DHe={state:Do,subscribeNetworkImages(t){return xo(Do.networkImages,()=>t(Do.networkImages))},subscribeKey(t,e){return Wi(Do,t,e)},subscribe(t){return xo(Do,()=>t(Do))},setWalletImage(t,e){Do.walletImages[t]=e},setNetworkImage(t,e){Do.networkImages[t]=e},setChainImage(t,e){Do.chainImages[t]=e},setConnectorImage(t,e){Do.connectorImages={...Do.connectorImages,[t]:e}},setTokenImage(t,e){Do.tokenImages[t]=e},setCurrencyImage(t,e){Do.currencyImages[t]=e}},Rc=tc(DHe),MHe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},b2=ur({networkImagePromises:{}}),LHe={async fetchWalletImage(t){if(t)return await vt._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(b2.networkImagePromises[t]||(b2.networkImagePromises[t]=vt._fetchNetworkImage(t)),await b2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Rc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Rc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Rc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Rc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return Rc.state.connectorImages[t.imageId]},getChainImage(t){return Rc.state.networkImages[MHe[t]]}},Hd=ur({message:"",variant:"info",open:!1}),UHe={state:Hd,subscribeKey(t,e){return Wi(Hd,t,e)},open(t,e){const{debug:n}=Pt.state,{shortMessage:r,longMessage:s}=t;n&&(Hd.message=r,Hd.variant=e,Hd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Hd.open=!1,Hd.message="",Hd.variant="info"}},ap=tc(UHe),$He=ht.getAnalyticsUrl(),BHe=new $1({baseUrl:$He,clientId:null}),FHe=["MODAL_CREATED"],bu=ur({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),br={state:bu,subscribe(t){return xo(bu,()=>t(bu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Pt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=_n.state.address;if(FHe.includes(t.data.event)||typeof window>"u")return;await BHe.post({path:"/e",params:br.getSdkProperties(),body:{eventId:ht.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),bu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===fe.HTTP_STATUS_CODES.FORBIDDEN&&!bu.reportedErrors.FORBIDDEN&&(ap.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Jv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),bu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;bu.timestamp=Date.now(),bu.data=t,(e=Pt.state.features)!=null&&e.analytics&&br._sendAnalyticsEvent(bu)}},jHe=ht.getApiUrl(),Ji=new $1({baseUrl:jHe,clientId:null}),WHe=40,zW=4,zHe=20,Ut=ur({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),vt={state:Ut,subscribeKey(t,e){return Wi(Ut,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Pt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Pt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Ji.baseUrl}/getWalletImage/${t}`,n=await Ji.getBlob({path:e,params:vt._getSdkProperties()});Rc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Ji.baseUrl}/public/getAssetImage/${t}`,n=await Ji.getBlob({path:e,params:vt._getSdkProperties()});Rc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Ji.baseUrl}/public/getAssetImage/${t}`,n=await Ji.getBlob({path:e,params:vt._getSdkProperties()});Rc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Ji.baseUrl}/public/getCurrencyImage/${t}`,n=await Ji.getBlob({path:e,params:vt._getSdkProperties()});Rc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Ji.baseUrl}/public/getTokenImage/${t}`,n=await Ji.getBlob({path:e,params:vt._getSdkProperties()});Rc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ht.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Tl.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Tl.SOLFLARE.id||n.id===Tl.PHANTOM.id)):t},async fetchProjectConfig(){return(await Ji.get({path:"/appkit/v1/config",params:vt._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Ji.get({path:"/projects/v1/origins",params:vt._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===fe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=fe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!LHe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>vt._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=at.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>vt._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>vt._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>vt._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];vt._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Tl).map(o=>o.id));const r=await Ji.get({path:"/getWallets",params:{...vt._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:vt._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Pt.state;if(t!=null&&t.length){const e={...vt._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??zW,include:t},{data:n}=await vt.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>vt._fetchWalletImage(i))),Ut.featured=r,Ut.allFeatured=r}},async fetchRecommendedWallets(){try{Ut.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Pt.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:zW,include:t,exclude:r,chains:s},{data:o,count:a}=await vt.fetchWallets(i),c=et.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>vt._fetchWalletImage(d))),Ut.recommended=o,Ut.allRecommended=o,Ut.count=a??0}catch{}finally{Ut.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Pt.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...Ut.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:WHe,include:e,exclude:i,chains:s},{data:a,count:c}=await vt.fetchWallets(o),l=a.slice(0,zHe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>vt._fetchWalletImage(u))),Ut.wallets=ht.uniqueBy([...Ut.wallets,...vt._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Ut.count=c>Ut.count?c:Ut.count,Ut.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await vt.fetchWallets(e);n&&n.forEach(r=>{Ut.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Pt.state,s=J.getRequestedCaipNetworkIds().join(",");Ut.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await vt.fetchWallets(i);br.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>vt._fetchWalletImage(c)),ht.wait(300)]),Ut.search=vt._filterOutExtensions(o)},initPromise(t,e){const n=Ut.promises[t];return n||(Ut.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&vt.initPromise("connectorImages",vt.fetchConnectorImages),e&&vt.initPromise("featuredWallets",vt.fetchFeaturedWallets),n&&vt.initPromise("recommendedWallets",vt.fetchRecommendedWallets),r&&vt.initPromise("networkImages",vt.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Pt.state.features)!=null&&t.analytics&&vt.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Ji.get({path:"/getAnalyticsConfig",params:vt._getSdkProperties()});Pt.setFeatures({analytics:t})}catch{Pt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Ut.featured=Ut.allFeatured,Ut.recommended=Ut.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ut.featured=Ut.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ut.recommended=Ut.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ut.filteredWallets=Ut.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Ut.filteredWallets=[]},setFilterByNamespace(t){if(!t){Ut.featured=Ut.allFeatured,Ut.recommended=Ut.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");Ut.featured=Ut.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ut.recommended=Ut.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Ut.filteredWallets=Ut.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ln=ur({view:"Connect",history:["Connect"],transactionStack:[]}),HHe={state:Ln,subscribeKey(t,e){return Wi(Ln,t,e)},pushTransactionStack(t){Ln.transactionStack.push(t)},popTransactionStack(t){const e=Ln.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Tt.goBack();break;case"cancel":s==null||s(),Tt.goBack();break}},push(t,e){t!==Ln.view&&(Ln.view=t,Ln.history.push(t),Ln.data=e)},reset(t,e){Ln.view=t,Ln.history=[t],Ln.data=e},replace(t,e){Ln.history.at(-1)===t||(Ln.view=t,Ln.history[Ln.history.length-1]=t,Ln.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Tt.state.view==="ConnectingFarcaster",n=!t&&e;if(Ln.history.length>1){Ln.history.pop();const[s]=Ln.history.slice(-1);s&&(t&&s==="Connect"?Ln.view="Account":Ln.view=s)}else tr.close();(r=Ln.data)!=null&&r.wallet&&(Ln.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){_n.setFarcasterUrl(void 0,J.state.activeChain);const a=at.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=E_(Pt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ln.history.length>1){Ln.history=Ln.history.slice(0,t+1);const[e]=Ln.history.slice(-1);e&&(Ln.view=e)}},goBackOrCloseModal(){Tt.state.history.length>1?Tt.goBack():tr.close()}},Tt=tc(HHe),vu=ur({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),z5={state:vu,subscribe(t){return xo(vu,()=>t(vu))},setThemeMode(t){vu.themeMode=t;try{const e=at.getAuthConnector();if(e){const n=z5.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:ZI(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){vu.themeVariables={...vu.themeVariables,...t};try{const e=at.getAuthConnector();if(e){const n=z5.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:ZI(vu.themeVariables,vu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return E_(vu)}},hS=tc(z5),Tne={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},wn=ur({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...Tne},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),GHe={state:wn,subscribe(t){return xo(wn,()=>{t(wn)})},subscribeKey(t,e){return Wi(wn,t,e)},initialize(t){t.forEach(e=>{const n=et.getConnectedConnectorId(e);n&&at.setConnectorId(n,e)})},setActiveConnector(t){t&&(wn.activeConnector=Jw(t))},setConnectors(t){t.filter(s=>!wn.allConnectors.some(i=>i.id===s.id&&at.getConnectorName(i.name)===at.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&wn.allConnectors.push(Jw(s))});const n=at.getEnabledNamespaces(),r=at.getEnabledConnectors(n);wn.connectors=at.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(wn.filterByNamespaceMap).forEach(e=>{wn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{wn.filterByNamespaceMap[e]=!0}),at.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){wn.filterByNamespaceMap[t]=e,at.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=at.getEnabledNamespaces(),e=at.getEnabledConnectors(t),n=at.areAllNamespacesEnabled();wn.connectors=at.mergeMultiChainConnectors(e),n?vt.clearFilterByNamespaces():vt.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(wn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return wn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(wn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=at.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=at.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===fe.CONNECTOR_ID.AUTH){const s=t,i=E_(Pt.state),o=hS.getSnapshot().themeMode,a=hS.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ZI(a,o)}),at.setConnectors([t])}else at.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=wn.connectors.find(s=>s.id===fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return wn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return wn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return wn.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=E_(Pt.state),r=hS.getSnapshot().themeMode,s=hS.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ZI(s,r)})},getConnectorsByNamespace(t){const e=wn.allConnectors.filter(n=>n.chain===t);return at.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&eu(t)===qs.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=at.getConnector(t.id,t.rdns);kHe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,J.state.activeChain),e?Tt.push("ConnectingExternal",{connector:e}):Tt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?at.getConnectorsByNamespace(t):at.mergeMultiChainConnectors(wn.allConnectors)},setFilterByNamespace(t){wn.filterByNamespace=t,wn.connectors=at.getConnectors(t),vt.setFilterByNamespace(t)},setConnectorId(t,e){t&&(wn.activeConnectorIds={...wn.activeConnectorIds,[e]:t},et.setConnectedConnectorId(e,t))},removeConnectorId(t){wn.activeConnectorIds={...wn.activeConnectorIds,[t]:void 0},et.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return wn.activeConnectorIds[t]},isConnected(t){return t?!!wn.activeConnectorIds[t]:Object.values(wn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){wn.activeConnectorIds={...Tne}}},at=tc(GHe),qHe=1e3,xv={checkNamespaceConnectorId(t,e){return at.getConnectorId(t)===e},isSocialProvider(t){return ki.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&at.setActiveConnector(e),s==null||s(ht.isMobile()&&t),r){const l=tr.subscribeKey("open",u=>{u||(Tt.state.view!==r&&Tt.replace(r),l(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&tr.close(),c(),o(Wh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=J.subscribeKey("activeCaipAddress",s=>{s&&(tr.close(),r(),e(Wh.parseCaipAddress(s)))});ot.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=_n.state.socialWindow,i=_n.state.socialProvider,o=!1,a=null;const c=J.subscribeKey("activeCaipAddress",l=>{l&&(e&&tr.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===fe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=at.getAuthConnector();if(g&&!o){s&&(s.close(),_n.setSocialWindow(void 0,J.state.activeChain),s=_n.state.socialWindow),o=!0;const w=f.data.resultUri;i&&br.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=J.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){et.setConnectedSocialProvider(i),await ot.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=J.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Wh.parseCaipAddress(b)),br.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&br.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&br.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(_n.setSocialProvider(t,J.state.activeChain),i=_n.state.socialProvider,br.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=tr.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=at.getAuthConnector();if(p&&!_n.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();_n.setFarcasterUrl(g,J.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=at.getAuthConnector();a=ht.returnOpenHref(`${fe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){_n.setSocialWindow(a,J.state.activeChain),s=_n.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=tr.subscribeKey("open",c=>{c||(Tt.state.view!==e&&Tt.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&tr.close(),o(),s(Wh.parseCaipAddress(a)))})})},async updateEmail(){const t=et.getConnectedConnectorId(J.state.activeChain),e=at.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==fe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Tt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(tr.close(),clearInterval(i),o(),r({email:a}))},qHe),o=tr.subscribeKey("open",a=>{a||(Tt.state.view!=="Connect"&&Tt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&eu(t)===qs.ACCOUNT_TYPES.EOA}};function Rne(){var r,s;const t=((r=J.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=J.state.activeCaipNetwork)==null?void 0:s.id)||1,n=ki.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function eu(t){var n;return(n=J.getAccountData(t))==null?void 0:n.preferredAccountType}const Pne={getConnectionStatus(t,e){const n=at.state.activeConnectorIds[e],r=ot.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Pt.state.remoteFeatures)!=null&&a.multiWallet),n=at.state.activeConnectorIds[t],r=ot.getConnections(t),i=(ot.state.recentConnections.get(t)??[]).filter(c=>at.getConnectorById(c.connectorId)),o=Pne.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},cp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Qr=ur({...cp}),VHe={state:Qr,subscribeKey(t,e){return Wi(Qr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ht.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Qr.message=cp.message,Qr.variant=cp.variant,Qr.svg=cp.svg,Qr.open=cp.open,Qr.autoClose=cp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=cp.autoClose}){Qr.open?(Qr.open=!1,setTimeout(()=>{Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r},150)):(Qr.message=t,Qr.variant=n,Qr.svg=e,Qr.open=!0,Qr.autoClose=r)}},zh=VHe,Jn=ur({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),KHe={state:Jn,subscribe(t){return xo(Jn,()=>t(Jn))},setLastNetworkInView(t){Jn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Jn.loading=!0;try{const r=await At.fetchTransactions({account:t,cursor:Jn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Zv.filterSpamTransactions(r.data),i=Zv.filterByConnectedChain(s),o=[...Jn.transactions,...i];Jn.loading=!1,e==="coinbase"?Jn.coinbaseTransactions=Zv.groupTransactionsByYearAndMonth(Jn.coinbaseTransactions,r.data):(Jn.transactions=o,Jn.transactionsByYear=Zv.groupTransactionsByYearAndMonth(Jn.transactionsByYear,i)),Jn.empty=o.length===0,Jn.next=r.next?r.next:void 0}catch{const s=J.state.activeChain;br.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Pt.state.projectId,cursor:Jn.next,isSmartAccount:eu(s)===qs.ACCOUNT_TYPES.SMART_ACCOUNT}}),zh.showError("Failed to fetch transactions"),Jn.loading=!1,Jn.empty=!0,Jn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Jn.next=void 0},resetTransactions(){Jn.transactions=[],Jn.transactionsByYear={},Jn.lastNetworkInView=void 0,Jn.loading=!1,Jn.empty=!1,Jn.next=void 0}},Zv=tc(KHe,"API_ERROR"),cn=ur({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Zf;const YHe={state:cn,subscribe(t){return xo(cn,()=>t(cn))},subscribeKey(t,e){return Wi(cn,t,e)},_getClient(){return cn._client},setClient(t){cn._client=Jw(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);ot.syncStorageConnections(e)},syncStorageConnections(t){const e=et.getConnections(),n=t??Array.from(J.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(cn.recentConnections);i.set(r,s),cn.recentConnections=i}},getConnections(t){return t?cn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=ot.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(ht.isTelegram()||ht.isSafari()&&ht.isIos()){if(Zf){await Zf,Zf=void 0;return}if(!ht.isPairingExpired(cn==null?void 0:cn.wcPairingExpiry)){const s=cn.wcUri;cn.wcUri=s;return}Zf=(e=(t=ot._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),ot.state.status="connecting",await Zf,Zf=void 0,cn.wcPairingExpiry=void 0,ot.state.status="connected"}else await((r=(n=ot._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=ot._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&J.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=ot._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&at.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;tr.setLoading(!0,J.state.activeChain);const n=at.getAuthConnector();n&&(_n.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),et.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((s,[i,o])=>{const a=i,c=eu(a);return c!==void 0&&(s[a]=c),s},{})),await ot.reconnectExternal(n),tr.setLoading(!1,J.state.activeChain),br.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=ot._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=ot._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=ot._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=ot._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=ot._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=ot._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=ot._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=ot._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=ot._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=ot._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){cn.wcUri=void 0,cn.wcPairingExpiry=void 0,cn.wcLinking=void 0,cn.recentWallet=void 0,cn.status="disconnected",Zv.resetTransactions(),et.deleteWalletConnectDeepLink()},resetUri(){cn.wcUri=void 0,cn.wcPairingExpiry=void 0,Zf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=ot.state;t&&et.setWalletConnectDeepLink(t),e&&et.setAppKitRecent(e),br.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Tt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){cn.wcBasic=t},setUri(t){cn.wcUri=t,cn.wcPairingExpiry=ht.getPairingExpiry()},setWcLinking(t){cn.wcLinking=t},setWcError(t){cn.wcError=t,cn.buffering=!1},setRecentWallet(t){cn.recentWallet=t},setBuffering(t){cn.buffering=t},setStatus(t){cn.status=t},setIsSwitchingConnection(t){cn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=ot._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Zw("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(cn.connections);n.set(e,t),cn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=_n.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&xv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await ot.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=at.getConnectorById(t.connectorId),s=t.connectorId===fe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await ot.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await ot.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=at.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===fe.CONNECTOR_ID.AUTH,a=t.connectorId===fe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&xv.isSocialProvider(i)){const{address:d}=await xv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){tr.open({view:"ConnectingFarcaster"})},onConnect(){Tt.replace("ProfileWallets")}});c=d}else{const{address:d}=await xv.connectEmail({closeModalOnConnect:r,onOpen(){tr.open({view:"EmailLogin"})},onConnect(){Tt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await xv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){tr.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Tt.replace("ProfileWallets")}});c=d}else{const d=await ot.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await ot.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=_n.getCaipAddress(n);if(o){const{address:c}=Wh.parseCaipAddress(o);i=c}const a=Pne.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await ot.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await ot.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},ot=tc(YHe),cy=ur({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),a0={state:cy,subscribe(t){return xo(cy,()=>t(cy))},subscribeOpen(t){return Wi(cy,"open",t)},set(t){Object.assign(cy,{...cy,...t})}},QHe={async getTokenList(){var r;const t=J.state.activeCaipNetwork,e=await At.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(ot==null?void 0:ot.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await At.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await At.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=ot.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await N$.getMyTokensWithBalance(t);return _n.setTokenBalance(e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Rne(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Pn=ur({tokenBalances:[],loading:!1}),JHe={state:Pn,subscribe(t){return xo(Pn,()=>t(Pn))},subscribeKey(t,e){return Wi(Pn,t,e)},setToken(t){t&&(Pn.token=Jw(t))},setTokenAmount(t){Pn.sendTokenAmount=t},setReceiverAddress(t){Pn.receiverAddress=t},setReceiverProfileImageUrl(t){Pn.receiverProfileImageUrl=t},setReceiverProfileName(t){Pn.receiverProfileName=t},setNetworkBalanceInUsd(t){Pn.networkBalanceInUSD=t},setLoading(t){Pn.loading=t},async sendToken(){var t;try{switch(An.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await An.sendEvmToken();return;case"solana":await An.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{An.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=eu(t);if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!An.state.token)throw new Error("A token is required");(n=An.state.token)!=null&&n.address?(br.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.address,amount:An.state.sendTokenAmount,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await An.sendERC20Token({receiverAddress:An.state.receiverAddress,tokenAddress:An.state.token.address,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals})):(br.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:An.state.token.symbol||"",amount:An.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await An.sendNativeToken({receiverAddress:An.state.receiverAddress,sendTokenAmount:An.state.sendTokenAmount,decimals:An.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Pn.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?ht.getPlainAddress(r):void 0;if(Pn.lastRetry&&!ht.isAllowedRetry(Pn.lastRetry,30*ki.ONE_SEC_MS))return Pn.loading=!1,[];try{if(s&&e&&n){const a=await N$.getMyTokensWithBalance();return Pn.tokenBalances=a,Pn.lastRetry=void 0,a}}catch(a){Pn.lastRetry=Date.now(),t==null||t(a),zh.showError("Token Balance Unavailable")}finally{Pn.loading=!1}return[]},fetchNetworkBalance(){if(Pn.tokenBalances.length===0)return;const t=QHe.mapBalancesToSwapTokens(Pn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Rne());e&&(Pn.networkBalanceInUSD=e?wHe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Tt.pushTransactionStack({});const e=t.receiverAddress,n=_n.state.address,r=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await ot.sendTransaction({chainNamespace:fe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),br.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:eu("eip155")===qs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=An.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=ot._getClient())==null||a.updateBalance("eip155"),An.resetSend()},async sendERC20Token(t){Tt.pushTransactionStack({onSuccess(){Tt.replace("Account")}});const e=ot.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(_n.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ht.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await ot.writeContract({fromAddress:_n.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:CHe.getERC20Abi(n),chainNamespace:fe.CHAIN.EVM}),An.resetSend()}},async sendSolanaToken(){var t;if(!An.state.sendTokenAmount||!An.state.receiverAddress)throw new Error("An amount and receiver address are required");Tt.pushTransactionStack({onSuccess(){Tt.replace("Account")}}),await ot.sendTransaction({chainNamespace:"solana",to:An.state.receiverAddress,value:An.state.sendTokenAmount}),(t=ot._getClient())==null||t.updateBalance("solana"),An.resetSend()},resetSend(){Pn.token=void 0,Pn.sendTokenAmount=void 0,Pn.receiverAddress=void 0,Pn.receiverProfileImageUrl=void 0,Pn.receiverProfileName=void 0,Pn.loading=!1,Pn.tokenBalances=[]}},An=tc(JHe),v2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},fS={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Oe=ur({chains:yHe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),ZHe={state:Oe,subscribe(t){return xo(Oe,()=>{t(Oe)})},subscribeKey(t,e){return Wi(Oe,t,e)},subscribeChainProp(t,e,n){let r;return xo(Oe.chains,()=>{var i;const s=n||Oe.activeChain;if(s){const o=(i=Oe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=et.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Pt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Oe.noAdapters=!0),Oe.noAdapters||(Oe.activeChain=a==null?void 0:a.namespace,Oe.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Oe.activeChain&&a0.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=et.getPreferredAccountTypes()||{},f={...Pt.state.defaultAccountTypes,...h};J.state.chains.set(u,{namespace:u,networkState:ur({...fS,caipNetwork:d==null?void 0:d[0]}),accountState:ur({...v2,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Oe.activeChain===t){const r=Array.from(Oe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}Oe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Oe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...fS,caipNetwork:r[0]},accountState:v2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Oe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Oe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),at.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Oe.chains.get(t);if(n){const o=((r=Oe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),Oe.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&at.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Oe.chains.get(t);n&&(n.networkState={...n.networkState||fS,...e},Oe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Oe.chains.get(t);if(r){const s={...r.accountState||v2,...e};Oe.chains.set(t,{...r,accountState:s}),(Oe.chains.size===1||Oe.activeChain===t)&&(e.caipAddress&&(Oe.activeCaipAddress=e.caipAddress),_n.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Oe.chains.get(t);if(n){const r={...n.networkState||fS,...e};Oe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Oe.activeChain=t;const e=t?Oe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Oe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Oe.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),et.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),a0.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Oe.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=Oe.chains.get(t.chainNamespace);Oe.activeChain=t.chainNamespace,Oe.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Oe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Oe.activeCaipAddress=void 0,J.setAccountProp("caipAddress",Oe.activeCaipAddress,t.chainNamespace),e&&_n.replaceState(e.accountState),An.resetSend(),a0.set({activeChain:Oe.activeChain,selectedNetworkId:(i=Oe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),et.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&Pt.state.enableNetworkSwitch&&!Pt.state.allowUnsupportedChain&&!ot.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Oe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=J.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=J.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Oe.activeCaipNetwork)==null?void 0:a.id)})),s=J.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&tr.close()}catch{Tt.goBack()}br.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Oe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Oe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Oe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Oe.activeChain;if(e&&(n=e),!n)return;const r=(s=Oe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Oe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Oe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ht.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Oe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));at.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Oe.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Oe.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Oe.activeCaipNetwork},getActiveCaipAddress(){return Oe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Oe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Oe.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Oe.activeChain)return!0;const e=J.getRequestedCaipNetworks(Oe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=JI.caipNetworkIdToNumber((r=Oe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Oe.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){tr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Oe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&ki.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=J.getAccountProp("preferredAccountType",e);Oe.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),at.removeConnectorId(e)},setIsSwitchingNamespace(t){Oe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Oe.chains.forEach(s=>{fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Oe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:_n.state},getNetworkData(t){var n;const e=t||Oe.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=at.state.filterByNamespace;return(t?[Oe.chains.get(t)]:Array.from(Oe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Oe.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Oe.lastConnectedSIWECaipNetwork}},J=tc(ZHe),XHe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},One=ht.getBlockchainApiUrl(),Zi=ur({clientId:null,api:new $1({baseUrl:One,clientId:null}),supportedChains:{http:[],ws:[]}}),At={state:Zi,async get(t){const{st:e,sv:n}=At.getSdkProperties(),r=Pt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Zi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Pt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Zi.supportedChains.http.length||await At.getSupportedNetworks()}catch{return!1}return Zi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await At.get({path:"v1/supported-chains"});return Zi.supportedChains=t,t}catch{return Zi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await At.isNetworkSupported(e))return{avatar:"",name:""};const r=et.getIdentityFromCacheForAddress(t);if(r)return r;const s=await At.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?ht.getPlainAddress(J.state.activeCaipAddress):void 0}});return et.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await At.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?At.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await At.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?At.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await At.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?At.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await At.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Zi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Pt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await At.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?At.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=At.getSdkProperties();if(!await At.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return At.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await At.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Zi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:ki.CONVERT_SLIPPAGE_TOLERANCE},projectId:Pt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=At.getSdkProperties();if(!await At.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return At.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=At.getSdkProperties();if(!await At.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return zh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=et.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await At.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return et.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await At.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?At.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await At.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?At.get({path:`/v1/profile/reverse/${t}`,params:{sender:_n.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await At.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?At.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await At.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Zi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await At.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Zi.api.post({path:"/v1/generators/onrampurl",params:{projectId:Pt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await At.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await At.get({path:"/v1/onramp/options"})}catch{return XHe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await At.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Zi.api.post({path:"/v1/onramp/quote",params:{projectId:Pt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await At.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?At.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await At.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Zi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Pt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Zi.clientId=t,Zi.api=new $1({baseUrl:One,clientId:t})}},E2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return lm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},N$={async getMyTokensWithBalance(t){const e=_n.state.address,n=J.state.activeCaipNetwork,r=at.getConnectorId("eip155")===fe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=et.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===fe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await At.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=E2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await ot.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await ot.walletGetAssets({account:t,chainFilter:[s]});if(!E2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>E2.createBalance(l,e.caipNetworkId));return et.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},al=ur({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),eGe={state:al,replaceState(t){t&&Object.assign(al,Jw(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ht.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?Jw(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;al.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?ht.getPlainAddress(r):void 0;if(al.lastRetry&&!ht.isAllowedRetry(al.lastRetry,30*ki.ONE_SEC_MS))return al.balanceLoading=!1,[];try{if(s&&e&&n){const a=await N$.getMyTokensWithBalance();return _n.setTokenBalance(a,n),al.lastRetry=void 0,al.balanceLoading=!1,a}}catch(a){al.lastRetry=Date.now(),t==null||t(a),zh.showError("Token Balance Unavailable")}finally{al.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},_n=tc(eGe),tGe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Tt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=_n.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=_n.getCaipAddress(t.chainNamespace),l=at.getConnectorId(J.state.activeChain)===fe.CONNECTOR_ID.AUTH,u=fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Tt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Tt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Tt.push("SwitchNetwork",{...r,network:t})}},Xi=ur({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),nGe={state:Xi,subscribe(t){return xo(Xi,()=>t(Xi))},subscribeKey(t,e){return Wi(Xi,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=J.state.activeChain,r=e&&e!==n,s=(i=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(ot.state.wcBasic?vt.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await vt.prefetch(),at.setFilterByNamespace(t==null?void 0:t.namespace),tr.setLoading(!0,e),e&&r){const a=((o=J.getNetworkData(e))==null?void 0:o.caipNetwork)||J.getRequestedCaipNetworks(e)[0];a&&tGe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=J.state.noAdapters;Pt.state.manualWCControl||a&&!s?ht.isMobile()?Tt.reset("AllWallets"):Tt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Tt.reset(t.view,t.data):s?Tt.reset("Account"):Tt.reset("Connect")}Xi.open=!0,a0.set({open:!0}),br.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Pt.state.enableEmbedded,e=!!J.state.activeCaipAddress;Xi.open&&br.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Xi.open=!1,Tt.reset("Connect"),tr.clearLoading(),t?e?Tt.replace("Account"):Tt.push("Connect"):a0.set({open:!1}),ot.resetUri()},setLoading(t,e){e&&Xi.loadingNamespaceMap.set(e,t),Xi.loading=t,a0.set({loading:t})},clearLoading(){Xi.loadingNamespaceMap.clear(),Xi.loading=!1},shake(){Xi.shake||(Xi.shake=!0,setTimeout(()=>{Xi.shake=!1},500))}},tr=tc(nGe),HW=2147483648,rGe={convertEVMChainIdToCoinType(t){if(t>=HW)throw new Error("Invalid chainId");return(HW|t)>>>0}},wa=ur({suggestions:[],loading:!1}),sGe={state:wa,subscribe(t){return xo(wa,()=>t(wa))},subscribeKey(t,e){return Wi(wa,t,e)},async resolveName(t){var e,n;try{return await At.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await At.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{wa.loading=!0,wa.suggestions=[];const e=await At.getEnsNameSuggestions(t);return wa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],wa.suggestions}catch(e){const n=ox.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{wa.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=et.getEnsFromCacheForAddress(t);if(n)return n;const r=await At.reverseLookupEnsName({address:t});return et.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=ox.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork,n=_n.state.address,r=at.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");wa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Tt.pushTransactionStack({onCancel(){Tt.replace("RegisterAccountName")}});const i=await ot.signMessage(s);wa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=rGe.convertEVMChainIdToCoinType(Number(o));await At.registerEnsName({coinType:a,address:n,signature:i,message:s}),_n.setProfileName(t,e.chainNamespace),Tt.replace("RegisterAccountNameSuccess")}catch(s){const i=ox.parseEnsApiError(s,`Error registering name ${t}`);throw Tt.replace("RegisterAccountName"),new Error(i)}finally{wa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},ox=tc(sGe);let Xf=null;const th={getSIWX(){return Pt.state.siwx},async initializeIfEnabled(){var i;const t=Pt.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if(Xf&&await Xf,(await t.getSessions(`${n}:${r}`,s)).length)return;await tr.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),br.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=ot._getClient())==null?void 0:i.disconnect().catch(console.error)),Tt.reset("Connect"),zh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Pt.state.siwx,e=ht.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=ot._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();at.getConnectorId(n.chainNamespace)===fe.CONNECTOR_ID.AUTH&&Tt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),J.setLastConnectedSIWECaipNetwork(n),tr.close(),br.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!tr.state.open||Tt.state.view==="ApproveTransaction")&&await tr.open({view:"SIWXSignMessage"}),zh.showError("Error signing message"),br.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=J.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ht.getPlainAddress(J.getActiveCaipAddress())||""));s&&s.length>0?await J.switchActiveNetwork(r):await ot.disconnect()}else await ot.disconnect()}else tr.close();tr.close(),br.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ht.getPlainAddress(J.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=Pt.state.siwx,e=ht.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Tt.state.view==="ApproveTransaction",r=Tt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=th.getSIWX();if(!i||!s.includes(fe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=J.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await th.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Xf)return Xf;const r=th.getSIWX();return r?(Xf=r.addSession({data:t,message:e,signature:n}).finally(()=>{Xf=null}),Xf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=th.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(zh.showLoading("Authenticating...",{autoClose:!1}),_n.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),br.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:th.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),br.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:th.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{zh.hide()}}return!0},getSIWXEventProperties(){var e;const t=J.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:eu(t)===qs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},$o={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:fe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Vo={ConnectorExplorerIds:{[fe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[fe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[fe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[fe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[$o.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[$o.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[$o.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[$o.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[$o.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[$o.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[$o.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[$o.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[$o.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[$o.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[$o.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[fe.CONNECTOR_ID.COINBASE]:"Coinbase",[fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[fe.CONNECTOR_ID.LEDGER]:"Ledger",[fe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[fe.CONNECTOR_ID.INJECTED]:"INJECTED",[fe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[fe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[fe.CONNECTOR_ID.AUTH]:"AUTH",[$o.CONNECTOR_TYPE_AUTH]:"AUTH"}},go={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${$o.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>at.getConnectorId(e)===fe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},iGe=new AbortController,Gd={EmbeddedWalletAbortController:iGe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},oGe="rpc.walletconnect.org";function GW(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const C2=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Xv={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===oGe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return C2.includes(e)?GW(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Vo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Xv.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push($a(a.url,a.config))}),C2.includes(t.caipNetworkId)&&r.push($a(GW(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push($a(a))}),aI(r)},extendWagmiTransports(t,e,n){if(C2.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return aI([n,$a(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=et.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},qW={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ms={set(t,e){Rl.isClient&&localStorage.setItem(`${Qe.STORAGE_KEY}${t}`,e)},get(t){return Rl.isClient?localStorage.getItem(`${Qe.STORAGE_KEY}${t}`):null},delete(t,e){Rl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Qe.STORAGE_KEY}${t}`))}},pS=30*1e3,Rl={checkIfAllowedToTriggerEmail(){const t=Ms.get(Qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<pS){const n=Math.ceil((pS-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ms.get(Qe.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<pS)return Math.ceil((pS-e)/1e3)}return 0},checkIfRequestExists(t){return qs.NOT_SAFE_RPC_METHODS.includes(t.method)||qs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(qW.transactionHash))||(t==null?void 0:t.match(qW.signedMessage)))?Qe.RPC_RESPONSE_TYPE_TX:Qe.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return qs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Sr=E.object({message:E.string()});function $e(t){return E.literal(Qe[t])}const aR=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const aGe=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),cGe=E.object({email:E.string().email()}),lGe=E.object({otp:E.string()}),uGe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(aR),rpcUrl:E.optional(E.string())}),dGe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(aR),rpcUrl:E.optional(E.string())}),hGe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),fGe=E.object({email:E.string().email()}),pGe=E.object({otp:E.string()}),gGe=E.object({otp:E.string()}),mGe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),yGe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),wGe=E.object({type:E.string()}),bGe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),vGe=E.object({url:E.string()}),EGe=E.object({userName:E.string()}),CGe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([qs.ACCOUNT_TYPES.EOA,qs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(aR)}),_Ge=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),AGe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([qs.ACCOUNT_TYPES.EOA,qs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(aR)}),SGe=E.object({uri:E.string()}),xGe=E.object({isConnected:E.boolean()}),IGe=E.object({chainId:E.string().or(E.number())}),NGe=E.object({chainId:E.string().or(E.number())}),TGe=E.object({newEmail:E.string().email()}),RGe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const PGe=E.object({version:E.string().optional()}),OGe=E.object({type:E.string(),address:E.string()}),kGe=E.any(),DGe=E.object({method:E.literal("eth_accounts")}),MGe=E.object({method:E.literal("eth_blockNumber")}),LGe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),UGe=E.object({method:E.literal("eth_chainId")}),$Ge=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),BGe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),FGe=E.object({method:E.literal("eth_gasPrice")}),jGe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),WGe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),zGe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),HGe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),GGe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),qGe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),VGe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),KGe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),YGe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),QGe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),JGe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),ZGe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),XGe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),eqe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),tqe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),nqe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),rqe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),sqe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),iqe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),oqe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),aqe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),cqe=E.object({method:E.literal("eth_newBlockFilter")}),lqe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),uqe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),dqe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),hqe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),fqe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),VW=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),pqe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),gqe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),mqe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),yqe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),wqe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),bqe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),vqe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),Eqe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),Cqe=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),_qe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),Aqe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),Sqe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),KW=E.object({token:E.string()}),Be=E.object({id:E.string().optional()}),Iv={appEvent:Be.extend({type:$e("APP_SWITCH_NETWORK"),payload:aGe}).or(Be.extend({type:$e("APP_CONNECT_EMAIL"),payload:cGe})).or(Be.extend({type:$e("APP_CONNECT_DEVICE")})).or(Be.extend({type:$e("APP_CONNECT_OTP"),payload:lGe})).or(Be.extend({type:$e("APP_CONNECT_SOCIAL"),payload:uGe})).or(Be.extend({type:$e("APP_GET_FARCASTER_URI")})).or(Be.extend({type:$e("APP_CONNECT_FARCASTER")})).or(Be.extend({type:$e("APP_GET_USER"),payload:E.optional(dGe)})).or(Be.extend({type:$e("APP_GET_SOCIAL_REDIRECT_URI"),payload:hGe})).or(Be.extend({type:$e("APP_SIGN_OUT")})).or(Be.extend({type:$e("APP_IS_CONNECTED"),payload:E.optional(KW)})).or(Be.extend({type:$e("APP_GET_CHAIN_ID")})).or(Be.extend({type:$e("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Be.extend({type:$e("APP_INIT_SMART_ACCOUNT")})).or(Be.extend({type:$e("APP_SET_PREFERRED_ACCOUNT"),payload:wGe})).or(Be.extend({type:$e("APP_RPC_REQUEST"),payload:VW.or(Sqe).or(DGe).or(MGe).or(LGe).or(UGe).or($Ge).or(BGe).or(FGe).or(jGe).or(WGe).or(zGe).or(HGe).or(GGe).or(qGe).or(VGe).or(KGe).or(YGe).or(QGe).or(JGe).or(ZGe).or(XGe).or(eqe).or(tqe).or(nqe).or(rqe).or(sqe).or(iqe).or(oqe).or(aqe).or(cqe).or(lqe).or(uqe).or(dqe).or(hqe).or(fqe).or(VW).or(pqe).or(gqe).or(mqe).or(yqe).or(wqe).or(bqe).or(Eqe).or(vqe).or(Cqe).or(_qe).or(Aqe).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Be.extend({type:$e("APP_UPDATE_EMAIL"),payload:fGe})).or(Be.extend({type:$e("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:pGe})).or(Be.extend({type:$e("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:gGe})).or(Be.extend({type:$e("APP_SYNC_THEME"),payload:mGe})).or(Be.extend({type:$e("APP_SYNC_DAPP_DATA"),payload:yGe})).or(Be.extend({type:$e("APP_RELOAD")})).or(Be.extend({type:$e("APP_RPC_ABORT")})),frameEvent:Be.extend({type:$e("FRAME_SWITCH_NETWORK_ERROR"),payload:Sr}).or(Be.extend({type:$e("FRAME_SWITCH_NETWORK_SUCCESS"),payload:NGe})).or(Be.extend({type:$e("FRAME_CONNECT_EMAIL_SUCCESS"),payload:bGe})).or(Be.extend({type:$e("FRAME_CONNECT_EMAIL_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:vGe})).or(Be.extend({type:$e("FRAME_GET_FARCASTER_URI_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:EGe})).or(Be.extend({type:$e("FRAME_CONNECT_FARCASTER_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_CONNECT_OTP_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_CONNECT_OTP_SUCCESS")})).or(Be.extend({type:$e("FRAME_CONNECT_DEVICE_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Be.extend({type:$e("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:CGe})).or(Be.extend({type:$e("FRAME_CONNECT_SOCIAL_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_GET_USER_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_GET_USER_SUCCESS"),payload:AGe})).or(Be.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:SGe})).or(Be.extend({type:$e("FRAME_SIGN_OUT_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_SIGN_OUT_SUCCESS")})).or(Be.extend({type:$e("FRAME_IS_CONNECTED_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_IS_CONNECTED_SUCCESS"),payload:xGe})).or(Be.extend({type:$e("FRAME_GET_CHAIN_ID_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_GET_CHAIN_ID_SUCCESS"),payload:IGe})).or(Be.extend({type:$e("FRAME_RPC_REQUEST_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_RPC_REQUEST_SUCCESS"),payload:kGe})).or(Be.extend({type:$e("FRAME_SESSION_UPDATE"),payload:KW})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_SUCCESS"),payload:_Ge})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:TGe})).or(Be.extend({type:$e("FRAME_SYNC_THEME_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_SYNC_THEME_SUCCESS")})).or(Be.extend({type:$e("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Be.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:RGe})).or(Be.extend({type:$e("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:OGe})).or(Be.extend({type:$e("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_READY"),payload:PGe})).or(Be.extend({type:$e("FRAME_RELOAD_ERROR"),payload:Sr})).or(Be.extend({type:$e("FRAME_RELOAD_SUCCESS")}))};function _2(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function xqe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=fe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(RHe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class Iqe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=fe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!_2(Qe.FRAME_EVENT_KEY,u))return;const d=Iv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Rl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Rl.isClient&&window.addEventListener("message",({data:a})=>{if(!_2(Qe.FRAME_EVENT_KEY,a))return;const c=Iv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Rl.isClient&&window.addEventListener("message",({data:a})=>{if(!_2(Qe.APP_EVENT_KEY,a))return;const c=Iv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Rl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Iv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Rl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Iv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Rl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=xqe({projectId:e,chainId:r,version:OHe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class Nqe{constructor(e){var i;const n=bm({level:PHe}),{logger:r,chunkLoggerController:s}=_T({opts:n});this.logger=Ys(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Tqe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new Nqe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new Iqe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ms.get(Qe.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ms.get(Qe.EMAIL)}getUsername(){return Ms.get(Qe.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Qe.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Rl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Qe.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Qe.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Qe.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Qe.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Qe.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Qe.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Qe.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Qe.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Qe.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Qe.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Qe.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Qe.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Qe.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Qe.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Qe.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Qe.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Qe.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Qe.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Qe.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Qe.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(qs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Qe.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Qe.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Qe.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Qe.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:qs.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{qs.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Qe.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Qe.APP_SYNC_DAPP_DATA,Qe.APP_SYNC_THEME,Qe.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Qe.APP_CONNECT_EMAIL,Qe.APP_CONNECT_DEVICE,Qe.APP_CONNECT_OTP,Qe.APP_CONNECT_SOCIAL,Qe.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ms.set(Qe.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ms.set(Qe.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ms.set(Qe.EMAIL,e),Ms.set(Qe.EMAIL_LOGIN_USED_KEY,"true"),Ms.delete(Qe.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ms.delete(Qe.EMAIL_LOGIN_USED_KEY),Ms.delete(Qe.EMAIL),Ms.delete(Qe.LAST_USED_CHAIN_KEY),Ms.delete(Qe.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ms.set(Qe.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ms.get(Qe.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ms.set(Qe.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Wh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class c0{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return c0.instance||(c0.instance=new Tqe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),c0.instance}}const Rqe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},YW={filterOutDuplicatesByRDNS(t){const e=Pt.state.enableEIP6963?at.state.connectors:[],n=et.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ht.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=at.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=et.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=at.state,{featuredWalletIds:n}=Pt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Pt.state.features)==null?void 0:c.connectMethodsOrder),r=e||at.state.connectors;if(n)return n;const{injected:s,announced:i}=ax.getConnectorsByType(r,vt.state.recommended,vt.state.featured),o=s.filter(ax.showConnector),a=i.filter(ax.showConnector);return o.length||a.length?["wallet","email","social"]:Rqe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&vt.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&vt.state.excludedWallets.some(r=>go.isLowerCaseMatch(r.name,t.name));return e||n}},ax={getConnectorsByType(t,e,n){const{customWallets:r}=Pt.state,s=et.getRecentWallets(),i=YW.filterOutDuplicateWallets(e),o=YW.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&vt.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&vt.state.excludedWallets.some(i=>go.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ht.isMobile()||ht.isMobile()&&!e&&!ot.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>at.getConnectorId(n.namespace)===fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Pt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Pt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ht.isMobile())return{accounts:[],chainId:void 0};if(t.id===fe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};sd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;sd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;sd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const cx={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([cx.getAddresses(t),cx.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:cx.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Vo.NetworkImageIds[e.id]]}]})}},ly={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function B1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const QW=B1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),JW=B1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});B1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});B1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});B1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const Pqe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Eg={getMethodsByChainNamespace(t){return Pqe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case QW.caipNetworkId:u.chains.push(QW.deprecatedCaipNetworkId);break;case JW.caipNetworkId:u.chains.push(JW.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await ox.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Eg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Eg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>ht.isCaipAddress(d)).map(d=>Wh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Wh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class Oqe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case fe.CHAIN.EVM:await this.syncEVMConnections(e);break;case fe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case fe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Eg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await ax.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==fe.CONNECTOR_ID.AUTH&&a.id!==fe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const c=Eg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===fe.CONNECTOR_ID.WALLET_CONNECT){const b=Eg.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>ht.createAccount(fe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:fe.CHAIN.BITCOIN,publicKey:((h=u[ly.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[ly.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[ly.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:fe.CHAIN.BITCOIN,publicKey:((g=u[ly.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[ly.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[ly.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>go.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>go.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>go.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>go.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>go.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class kne{constructor({provider:e,namespace:n}){this.id=fe.CONNECTOR_ID.WALLET_CONNECT,this.name=Vo.ConnectorNamesMap[fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Vo.ConnectorImageIds[fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Pt.state.universalProviderConfigOverride,s=Eg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return th.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:kqe})}}const kqe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],Dqe=[fe.CONNECTOR_ID.AUTH,fe.CONNECTOR_ID.WALLET_CONNECT];class Mqe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getConnectorId=n=>at.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new Oqe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:fe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Vo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!go.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){_n.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=eu(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof kne);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ht.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ht.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ht.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&go.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ht.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),go.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?cx.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),go.isLowerCaseMatch(this.getConnectorId(fe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(Dqe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function Lqe(t){let e=[],n,r;function s(a){return JI.parseEvmChainId(a)||1}function i(){var a;return n||(n=c0.getInstance({projectId:t.options.projectId,chainId:(a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?ap.open(Gd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?ap.open(Gd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&ap.open(Gd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Gd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>J.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=JI.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=eu("eip155"),{address:d,chainId:h,accounts:f}=await th.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:fe.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:fe.CONNECTOR_ID.AUTH,name:fe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:fe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=c0.getInstance({projectId:t.options.projectId,chainId:(c=J.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Gd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?ap.open(Gd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?ap.open(Gd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&ap.open(Gd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>J.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=J.state.activeChain===fe.CHAIN.EVM;if(fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>at.getConnectorId(h)===fe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new Kl(new Error("chain not found on connector."));const d=await this.getProvider(),h=eu("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new Kl(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Yu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}T$.type="walletConnect";function T$(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:T$.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=J.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Zd;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=Pt.state.universalProviderConfigOverride;if(!w.session||y){const S=Eg.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(O=>Number(O.id)))}const v=await this.getAccounts(),A=await this.getChainId(),_=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,I=_==null?void 0:_.some(S=>Number(S.split(":")[1])===A);let x=1;I?x=A:_!=null&&_[0]&&(x=Number(_[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Xr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[fe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=et.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=et.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===fe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(fe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[fe.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=J.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new Zd;const p=J.getCaipNetworks().find(v=>v.id===h);if(!p)throw new Kl(new kC);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:tt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Xr(A);try{let _;d!=null&&d.blockExplorerUrls?_=d.blockExplorerUrls:_=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const I=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:_,chainId:tt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:I};await f.request({method:"wallet_addEthereumChain",params:[x]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(_){throw new Xr(_)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Yu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(J.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[fe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Nv=ur({pendingTransactions:0}),ZW={state:Nv,subscribeKey(t,e){return Wi(Nv,t,e)},increase(t){Nv[t]+=1},decrease(t){Nv[t]-=1},reset(t){Nv[t]=0}};function Uqe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function $qe(t){if(ht.isSafeApp()){const{safe:e}=await ci(async()=>{const{safe:n}=await import("./index-CCBj0e7D.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Bqe(t){try{const{coinbaseWallet:e}=await ci(async()=>{const{coinbaseWallet:n}=await import("./index-CCBj0e7D.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Fqe={enable:!1,pollingInterval:3e4};class jqe extends Mqe{constructor(e){const n=Xv.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=fe.CHAIN.EVM,this.adapterType=fe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Fqe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===fe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ht.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Zy(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ht.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Zy(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===fe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=Xv.getCaipNetworkId(s);i?n[s.id]=Xv.extendWagmiTransports(s,e.projectId,i):n[s.id]=Xv.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=KQ({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=b_e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),ZW.increase("pendingTransactions")}});const e=ZW.subscribeKey("pendingTransactions",n=>{var r;n>=fe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){jQ(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),WQ(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===fe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:et.getConnectedSocialProvider(),username:et.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Bqe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await $qe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(T$(e,n)),e.enableEIP6963!==!1&&r.push(mT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(Lqe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Vo.ConnectorNamesMap[r.id]??r.name,imageId:Vo.ConnectorImageIds[r.id],type:Vo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await m_e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Zy(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await p_e(this.wagmiConfig,s);const i=await g_e(this.wagmiConfig,s);return await HQ(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(JI.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await GQ(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await c_e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return jEe(e.value,e.decimals)}formatUnits(e){return lm(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===fe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===fe.CONNECTOR_ID.AUTH||e.id===fe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Vo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Vo.ConnectorNamesMap[e.id]??e.name,imageId:Vo.ConnectorImageIds[e.id],type:Vo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===fe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){zQ(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=yc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ht.isSafeApp()&&n===fe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await OS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await OS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await WD(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===fe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,v)=>go.isLowerCaseMatch(b,r)?-1:go.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await OS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await jD(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=et.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await FQ(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});et.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=yc(this.wagmiConfig).find(i=>go.isLowerCaseMatch(i.connector.id,e.id));return await BD(this.wagmiConfig,{connector:n}),Pt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=yc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await BD(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await WD(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=yc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=Uqe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=yc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=yc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=yc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:fe.CONNECTOR_ID.AUTH,type:"AUTH",name:fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Vo.ConnectorImageIds[fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=yc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(J.state.activeChain==="eip155")return;jD(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new kne({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const Dne="7c65f27254d6ddd24cf7eedf2685c4fb",Wqe={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},zqe=new jqe({projectId:Dne,networks:[Jo,uI,kI,mee,DI,MI,LI],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}});K4e({projectId:Dne,metadata:Wqe,adapters:[zqe],networks:[Jo,uI,kI,mee,DI,MI,LI],features:{analytics:!0}});const Hqe=new y1e,Gqe=typeof window<"u"&&window.location.hostname.startsWith("chess."),qqe=()=>hje("(max-width: 768px)")?m.jsx(dje,{}):m.jsx(rje,{});G2.createRoot(document.getElementById("root")).render(m.jsx(Xo.StrictMode,{children:m.jsx(j_e,{config:fje,children:m.jsx(B1e,{client:Hqe,children:m.jsx(tje,{children:m.jsx(ZFe,{children:Gqe?m.jsx(YS,{path:"/*",element:m.jsx(UW,{})}):m.jsxs(m.Fragment,{children:[m.jsx(YS,{path:"/",element:m.jsx(qqe,{})}),m.jsx(YS,{path:"/chess",element:m.jsx(UW,{})})]})})})})})}));export{SKe as $,Ke as A,gt as B,Fe as C,lt as D,_E as E,l3 as F,Fv as G,Nc as H,RAe as I,Un as J,NKe as K,s5 as L,Cs as M,xAe as N,we as O,Od as P,GS as Q,zt as R,kc as S,co as T,aSe as U,xE as V,Hs as W,_Ke as X,Es as Y,nm as Z,Sl as _,VS as a,lee as a0,i5 as a1,jw as a2,ci as a3,vVe as a4,Yu as a5,Kl as a6,kC as a7,tt as a8,Xr as a9,dz as aA,dVe as aB,mC as aC,cwe as aD,R_e as aE,Za as aF,Qa as aG,lQ as aH,REe as aI,Zd as aa,nQ as ab,mT as ac,pe as ad,YL as ae,as as af,Ebe as ag,uT as ah,oU as ai,xbe as aj,c1 as ak,qa as al,Lf as am,yE as an,Vl as ao,RDe as ap,dKe as aq,fj as ar,FZ as as,vDe as at,PDe as au,hKe as av,uKe as aw,kT as ax,gKe as ay,fKe as az,Bn as b,je as c,ct as d,H as e,gr as f,Qu as g,IKe as h,sd as i,Yo as j,mt as k,lo as l,pke as m,Dl as n,b4e as o,Ye as p,Il as q,xKe as r,Cn as s,yJ as t,lr as u,Q4 as v,da as w,CKe as x,pi as y,hi as z};
