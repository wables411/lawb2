const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-DSeKewHR.js","assets/if-defined-DFpnF5S8.js","assets/index-TLQdKaLl.js","assets/index-BIxddABb.js","assets/ref-DU-dLLS_.js","assets/index-3A6w3vSq.js","assets/index-Dpc4Sd3N.js","assets/index-DuVv-wSt.js","assets/index-C6gOWTsN.js","assets/index-BdGwjFLS.js","assets/index-CtaJ3u1z.js","assets/index-BLiZDaW-.js","assets/email-BVqHFXrP.js","assets/index-CVqePNls.js","assets/socials-DlB7bi_b.js","assets/index-CajYiyMB.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-ARgYgUX4.js","assets/index-B2SaqKQ3.js","assets/index-_hxNcujU.js","assets/index-DUvzFVMH.js","assets/swaps-Dspqn6RC.js","assets/index-B7y95GRT.js","assets/index-DIYXfdKX.js","assets/index-DN0zqd8Z.js","assets/send-DlNUxFpP.js","assets/index-C8TPdxXt.js","assets/index-ZODCLSkp.js","assets/receive-Bt_BqQSF.js","assets/index-Bo4N3D_K.js","assets/onramp-DHEFY5sV.js","assets/index-C1IMjnEJ.js","assets/index-qkc-QpJ3.js","assets/index-Dh-fbmXn.js","assets/transactions-CVEnnuhU.js","assets/index-D8L2VXMI.js","assets/index-DgzltG6f.js","assets/index-BQch6uo2.js","assets/index-DeokrzBa.js","assets/index-DOLkD4z3.js","assets/w3m-modal-uklpKtDF.js"])))=>i.map(i=>d[i]);
var ere=Object.defineProperty;var MB=t=>{throw TypeError(t)};var tre=(t,e,n)=>e in t?ere(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var re=(t,e,n)=>tre(t,typeof e!="symbol"?e+"":e,n),mR=(t,e,n)=>e.has(t)||MB("Cannot "+n);var _=(t,e,n)=>(mR(t,e,"read from private field"),n?n.call(t):e.get(t)),Q=(t,e,n)=>e.has(t)?MB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(mR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),he=(t,e,n)=>(mR(t,e,"access private method"),n);var $d=(t,e,n,r)=>({set _(s){L(t,e,s,n)},get _(){return _(t,e,r)}});function nre(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ZW(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var XW={exports:{}},oN={},ez={exports:{}},Xt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_=Symbol.for("react.element"),rre=Symbol.for("react.portal"),sre=Symbol.for("react.fragment"),ire=Symbol.for("react.strict_mode"),ore=Symbol.for("react.profiler"),are=Symbol.for("react.provider"),cre=Symbol.for("react.context"),lre=Symbol.for("react.forward_ref"),ure=Symbol.for("react.suspense"),dre=Symbol.for("react.memo"),hre=Symbol.for("react.lazy"),LB=Symbol.iterator;function fre(t){return t===null||typeof t!="object"?null:(t=LB&&t[LB]||t["@@iterator"],typeof t=="function"?t:null)}var tz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nz=Object.assign,rz={};function yb(t,e,n){this.props=t,this.context=e,this.refs=rz,this.updater=n||tz}yb.prototype.isReactComponent={};yb.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yb.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sz(){}sz.prototype=yb.prototype;function jM(t,e,n){this.props=t,this.context=e,this.refs=rz,this.updater=n||tz}var WM=jM.prototype=new sz;WM.constructor=jM;nz(WM,yb.prototype);WM.isPureReactComponent=!0;var UB=Array.isArray,iz=Object.prototype.hasOwnProperty,zM={current:null},oz={key:!0,ref:!0,__self:!0,__source:!0};function az(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)iz.call(e,r)&&!oz.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:H_,type:t,key:i,ref:o,props:s,_owner:zM.current}}function pre(t,e){return{$$typeof:H_,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function HM(t){return typeof t=="object"&&t!==null&&t.$$typeof===H_}function gre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var BB=/\/+/g;function yR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gre(""+t.key):e.toString(36)}function fS(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case H_:case rre:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+yR(o,0):r,UB(s)?(n="",t!=null&&(n=t.replace(BB,"$&/")+"/"),fS(s,e,n,"",function(l){return l})):s!=null&&(HM(s)&&(s=pre(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(BB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",UB(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+yR(i,a);o+=fS(i,e,n,c,s)}else if(c=fre(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+yR(i,a++),o+=fS(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Y1(t,e,n){if(t==null)return t;var r=[],s=0;return fS(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mre(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ui={current:null},pS={transition:null},yre={ReactCurrentDispatcher:Ui,ReactCurrentBatchConfig:pS,ReactCurrentOwner:zM};function cz(){throw Error("act(...) is not supported in production builds of React.")}Xt.Children={map:Y1,forEach:function(t,e,n){Y1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Y1(t,function(){e++}),e},toArray:function(t){return Y1(t,function(e){return e})||[]},only:function(t){if(!HM(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Xt.Component=yb;Xt.Fragment=sre;Xt.Profiler=ore;Xt.PureComponent=jM;Xt.StrictMode=ire;Xt.Suspense=ure;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yre;Xt.act=cz;Xt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nz({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=zM.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)iz.call(e,c)&&!oz.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:H_,type:t.type,key:s,ref:i,props:r,_owner:o}};Xt.createContext=function(t){return t={$$typeof:cre,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:are,_context:t},t.Consumer=t};Xt.createElement=az;Xt.createFactory=function(t){var e=az.bind(null,t);return e.type=t,e};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(t){return{$$typeof:lre,render:t}};Xt.isValidElement=HM;Xt.lazy=function(t){return{$$typeof:hre,_payload:{_status:-1,_result:t},_init:mre}};Xt.memo=function(t,e){return{$$typeof:dre,type:t,compare:e===void 0?null:e}};Xt.startTransition=function(t){var e=pS.transition;pS.transition={};try{t()}finally{pS.transition=e}};Xt.unstable_act=cz;Xt.useCallback=function(t,e){return Ui.current.useCallback(t,e)};Xt.useContext=function(t){return Ui.current.useContext(t)};Xt.useDebugValue=function(){};Xt.useDeferredValue=function(t){return Ui.current.useDeferredValue(t)};Xt.useEffect=function(t,e){return Ui.current.useEffect(t,e)};Xt.useId=function(){return Ui.current.useId()};Xt.useImperativeHandle=function(t,e,n){return Ui.current.useImperativeHandle(t,e,n)};Xt.useInsertionEffect=function(t,e){return Ui.current.useInsertionEffect(t,e)};Xt.useLayoutEffect=function(t,e){return Ui.current.useLayoutEffect(t,e)};Xt.useMemo=function(t,e){return Ui.current.useMemo(t,e)};Xt.useReducer=function(t,e,n){return Ui.current.useReducer(t,e,n)};Xt.useRef=function(t){return Ui.current.useRef(t)};Xt.useState=function(t){return Ui.current.useState(t)};Xt.useSyncExternalStore=function(t,e,n){return Ui.current.useSyncExternalStore(t,e,n)};Xt.useTransition=function(){return Ui.current.useTransition()};Xt.version="18.3.1";ez.exports=Xt;var P=ez.exports;const sa=vm(P),wre=nre({__proto__:null,default:sa},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bre=P,vre=Symbol.for("react.element"),Ere=Symbol.for("react.fragment"),Cre=Object.prototype.hasOwnProperty,_re=bre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Are={key:!0,ref:!0,__self:!0,__source:!0};function lz(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Cre.call(e,r)&&!Are.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:vre,type:t,key:i,ref:o,props:s,_owner:_re.current}}oN.Fragment=Ere;oN.jsx=lz;oN.jsxs=lz;XW.exports=oN;var m=XW.exports,$B={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=function(t,e){if(!t)throw wb(e)},wb=function(t){return new Error("Firebase Database ("+uz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Sre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},GM={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new xre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hz=function(t){const e=dz(t);return GM.encodeByteArray(e,!0)},ax=function(t){return hz(t).replace(/\./g,"")},E2=function(t){try{return GM.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ire(t){return fz(void 0,t)}function fz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!Nre(n)||(t[n]=fz(t[n],e[n]));return t}function Nre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre=()=>Tre().__FIREBASE_DEFAULTS__,Pre=()=>{if(typeof process>"u"||typeof $B>"u")return;const t=$B.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ore=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&E2(t[1]);return e&&JSON.parse(e)},pz=()=>{try{return Rre()||Pre()||Ore()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},kre=t=>{var e,n;return(n=(e=pz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Dre=t=>{const e=kre(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gz=()=>{var t;return(t=pz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mre(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ax(JSON.stringify(n)),ax(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lre())}function Ure(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bre(){return uz.NODE_ADMIN===!0}function $re(){try{return typeof indexedDB=="object"}catch{return!1}}function Fre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jre="FirebaseError";class G_ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jre,Object.setPrototypeOf(this,G_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yz.prototype.create)}}class yz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Wre(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new G_(s,a,r)}}function Wre(t,e){return t.replace(zre,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const zre=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){return JSON.parse(t)}function ts(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=jE(E2(i[0])||""),n=jE(E2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},Hre=function(t){const e=wz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Gre=function(t){const e=wz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function FB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cx(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function C2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jB(i)&&jB(o)){if(!C2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qre(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function qM(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kre=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},cN=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){return t&&t._delegate?t._delegate:t}class WE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jre(e))try{this.getOrInitializeService({instanceIdentifier:wp})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=wp){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wp){return this.instances.has(e)}getOptions(e=wp){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Qre(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=wp){return this.component?this.component.multipleInstances?e:wp:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qre(t){return t===wp?void 0:t}function Jre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Yre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var er;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(er||(er={}));const Xre={debug:er.DEBUG,verbose:er.VERBOSE,info:er.INFO,warn:er.WARN,error:er.ERROR,silent:er.SILENT},ese=er.INFO,tse={[er.DEBUG]:"log",[er.VERBOSE]:"log",[er.INFO]:"info",[er.WARN]:"warn",[er.ERROR]:"error"},nse=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=tse[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bz{constructor(e){this.name=e,this._logLevel=ese,this._logHandler=nse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in er))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,er.DEBUG,...e),this._logHandler(this,er.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,er.VERBOSE,...e),this._logHandler(this,er.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,er.INFO,...e),this._logHandler(this,er.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,er.WARN,...e),this._logHandler(this,er.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,er.ERROR,...e),this._logHandler(this,er.ERROR,...e)}}const rse=(t,e)=>e.some(n=>t instanceof n);let WB,zB;function sse(){return WB||(WB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ise(){return zB||(zB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vz=new WeakMap,_2=new WeakMap,Ez=new WeakMap,wR=new WeakMap,VM=new WeakMap;function ose(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(nf(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vz.set(n,t)}).catch(()=>{}),VM.set(e,t),e}function ase(t){if(_2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_2.set(t,e)}let A2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ez.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nf(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cse(t){A2=t(A2)}function lse(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(bR(this),e,...n);return Ez.set(r,e.sort?e.sort():[e]),nf(r)}:ise().includes(t)?function(...e){return t.apply(bR(this),e),nf(vz.get(this))}:function(...e){return nf(t.apply(bR(this),e))}}function use(t){return typeof t=="function"?lse(t):(t instanceof IDBTransaction&&ase(t),rse(t,sse())?new Proxy(t,A2):t)}function nf(t){if(t instanceof IDBRequest)return ose(t);if(wR.has(t))return wR.get(t);const e=use(t);return e!==t&&(wR.set(t,e),VM.set(e,t)),e}const bR=t=>VM.get(t);function dse(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=nf(o);return r&&o.addEventListener("upgradeneeded",c=>{r(nf(o.result),c.oldVersion,c.newVersion,nf(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const hse=["get","getKey","getAll","getAllKeys","count"],fse=["put","add","delete","clear"],vR=new Map;function HB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vR.get(e))return vR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hse.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return vR.set(e,i),i}cse(t=>({...t,get:(e,n,r)=>HB(e,n)||t.get(e,n,r),has:(e,n)=>!!HB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function gse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const S2="@firebase/app",GB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new bz("@firebase/app"),mse="@firebase/app-compat",yse="@firebase/analytics-compat",wse="@firebase/analytics",bse="@firebase/app-check-compat",vse="@firebase/app-check",Ese="@firebase/auth",Cse="@firebase/auth-compat",_se="@firebase/database",Ase="@firebase/data-connect",Sse="@firebase/database-compat",xse="@firebase/functions",Ise="@firebase/functions-compat",Nse="@firebase/installations",Tse="@firebase/installations-compat",Rse="@firebase/messaging",Pse="@firebase/messaging-compat",Ose="@firebase/performance",kse="@firebase/performance-compat",Dse="@firebase/remote-config",Mse="@firebase/remote-config-compat",Lse="@firebase/storage",Use="@firebase/storage-compat",Bse="@firebase/firestore",$se="@firebase/vertexai-preview",Fse="@firebase/firestore-compat",jse="firebase",Wse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2="[DEFAULT]",zse={[S2]:"fire-core",[mse]:"fire-core-compat",[wse]:"fire-analytics",[yse]:"fire-analytics-compat",[vse]:"fire-app-check",[bse]:"fire-app-check-compat",[Ese]:"fire-auth",[Cse]:"fire-auth-compat",[_se]:"fire-rtdb",[Ase]:"fire-data-connect",[Sse]:"fire-rtdb-compat",[xse]:"fire-fn",[Ise]:"fire-fn-compat",[Nse]:"fire-iid",[Tse]:"fire-iid-compat",[Rse]:"fire-fcm",[Pse]:"fire-fcm-compat",[Ose]:"fire-perf",[kse]:"fire-perf-compat",[Dse]:"fire-rc",[Mse]:"fire-rc-compat",[Lse]:"fire-gcs",[Use]:"fire-gcs-compat",[Bse]:"fire-fst",[Fse]:"fire-fst-compat",[$se]:"fire-vertex","fire-js":"fire-js",[jse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE=new Map,Hse=new Map,I2=new Map;function qB(t,e){try{t.container.addComponent(e)}catch(n){md.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lx(t){const e=t.name;if(I2.has(e))return md.debug(`There were multiple attempts to register component ${e}.`),!1;I2.set(e,t);for(const n of zE.values())qB(n,t);for(const n of Hse.values())qB(n,t);return!0}function Gse(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rf=new yz("app","Firebase",qse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new WE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kse=Wse;function Cz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:x2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw rf.create("bad-app-name",{appName:String(s)});if(n||(n=gz()),!n)throw rf.create("no-options");const i=zE.get(s);if(i){if(C2(n,i.options)&&C2(r,i.config))return i;throw rf.create("duplicate-app",{appName:s})}const o=new Zre(s);for(const c of I2.values())o.addComponent(c);const a=new Vse(n,r,o);return zE.set(s,a),a}function _z(t=x2){const e=zE.get(t);if(!e&&t===x2&&gz())return Cz();if(!e)throw rf.create("no-app",{appName:t});return e}function Yse(){return Array.from(zE.values())}function o0(t,e,n){var r;let s=(r=zse[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),md.warn(a.join(" "));return}lx(new WE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qse="firebase-heartbeat-database",Jse=1,HE="firebase-heartbeat-store";let ER=null;function Az(){return ER||(ER=dse(Qse,Jse,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(HE)}catch(n){console.warn(n)}}}}).catch(t=>{throw rf.create("idb-open",{originalErrorMessage:t.message})})),ER}async function Zse(t){try{const n=(await Az()).transaction(HE),r=await n.objectStore(HE).get(Sz(t));return await n.done,r}catch(e){if(e instanceof G_)md.warn(e.message);else{const n=rf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});md.warn(n.message)}}}async function VB(t,e){try{const r=(await Az()).transaction(HE,"readwrite");await r.objectStore(HE).put(e,Sz(t)),await r.done}catch(n){if(n instanceof G_)md.warn(n.message);else{const r=rf.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});md.warn(r.message)}}}function Sz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xse=1024,eie=30*24*60*60*1e3;class tie{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rie(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=KB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=eie}),this._storage.overwrite(this._heartbeatsCache))}catch(r){md.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=KB(),{heartbeatsToSend:r,unsentEntries:s}=nie(this._heartbeatsCache.heartbeats),i=ax(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return md.warn(n),""}}}function KB(){return new Date().toISOString().substring(0,10)}function nie(t,e=Xse){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),YB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),YB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rie{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $re()?Fre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return VB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function YB(t){return ax(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sie(t){lx(new WE("platform-logger",e=>new pse(e),"PRIVATE")),lx(new WE("heartbeat",e=>new tie(e),"PRIVATE")),o0(S2,GB,t),o0(S2,GB,"esm2017"),o0("fire-js","")}sie("");var iie="firebase",oie="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */o0(iie,oie,"app");var QB={};const JB="@firebase/database",ZB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xz="";function aie(t){xz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cie{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ts(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:jE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lie{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Nd(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cie(e)}}catch{}return new lie},Bp=Iz("localStorage"),uie=Iz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new bz("@firebase/database"),die=function(){let t=1;return function(){return t++}}(),Nz=function(t){const e=Kre(t),n=new Vre;n.update(e);const r=n.digest();return GM.encodeByteArray(r)},q_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=q_.apply(null,r):typeof r=="object"?e+=ts(r):e+=r,e+=" "}return e};let aE=null,XB=!0;const hie=function(t,e){Ae(!0,"Can't turn on custom loggers persistently."),a0.logLevel=er.VERBOSE,aE=a0.log.bind(a0)},ci=function(...t){if(XB===!0&&(XB=!1,aE===null&&uie.get("logging_enabled")===!0&&hie()),aE){const e=q_.apply(null,t);aE(e)}},V_=function(t){return function(...e){ci(t,...e)}},N2=function(...t){const e="FIREBASE INTERNAL ERROR: "+q_(...t);a0.error(e)},yd=function(...t){const e=`FIREBASE FATAL ERROR: ${q_(...t)}`;throw a0.error(e),new Error(e)},Eo=function(...t){const e="FIREBASE WARNING: "+q_(...t);a0.warn(e)},fie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Eo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tz=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},pie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},xw="[MIN_NAME]",jg="[MAX_NAME]",vb=function(t,e){if(t===e)return 0;if(t===xw||e===jg)return-1;if(e===xw||t===jg)return 1;{const n=e$(t),r=e$(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},gie=function(t,e){return t===e?0:t<e?-1:1},Xb=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+ts(e))},KM=function(t){if(typeof t!="object"||t===null)return ts(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=ts(e[r]),n+=":",n+=KM(t[e[r]]);return n+="}",n},Rz=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function No(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Pz=function(t){Ae(!Tz(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},mie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},yie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function wie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const bie=new RegExp("^-?(0*)\\d{1,10}$"),vie=-2147483648,Eie=2147483647,e$=function(t){if(bie.test(t)){const e=Number(t);if(e>=vie&&e<=Eie)return e}return null},Eb=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Eo("Exception was thrown by user callback.",n),e},Math.floor(0))}},Cie=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},cE=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Eo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aie{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ci("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Eo(e)}}class gS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}gS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM="5",Oz="v",kz="s",Dz="r",Mz="f",Lz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Uz="ls",Bz="p",T2="ac",$z="websocket",Fz="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Bp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Bp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function Sie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Wz(t,e,n){Ae(typeof e=="string","typeof type must == string"),Ae(typeof n=="object","typeof params must == object");let r;if(e===$z)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Fz)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Sie(t)&&(n.ns=t.namespace);const s=[];return No(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xie{constructor(){this.counters_={}}incrementCounter(e,n=1){Nd(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Ire(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR={},_R={};function QM(t){const e=t.toString();return CR[e]||(CR[e]=new xie),CR[e]}function Iie(t,e){const n=t.toString();return _R[n]||(_R[n]=e()),_R[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Eb(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t$="start",Tie="close",Rie="pLPCommand",Pie="pRTLPCB",zz="id",Hz="pw",Gz="ser",Oie="cb",kie="seg",Die="ts",Mie="d",Lie="dframe",qz=1870,Vz=30,Uie=qz-Vz,Bie=25e3,$ie=3e4;class Uy{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=V_(e),this.stats_=QM(n),this.urlFn=c=>(this.appCheckToken&&(c[T2]=this.appCheckToken),Wz(n,Fz,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Nie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($ie)),pie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new JM((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===t$)this.id=a,this.password=c;else if(o===Tie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[t$]="t",r[Gz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Oie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Oz]=YM,this.transportSessionId&&(r[kz]=this.transportSessionId),this.lastSessionId&&(r[Uz]=this.lastSessionId),this.applicationId&&(r[Bz]=this.applicationId),this.appCheckToken&&(r[T2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Lz.test(location.hostname)&&(r[Dz]=Mz);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uy.forceAllow_=!0}static forceDisallow(){Uy.forceDisallow_=!0}static isAvailable(){return Uy.forceAllow_?!0:!Uy.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!mie()&&!yie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=ts(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=hz(n),s=Rz(r,Uie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Lie]="t",r[zz]=e,r[Hz]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=ts(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class JM{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=die(),window[Rie+this.uniqueCallbackIdentifier]=e,window[Pie+this.uniqueCallbackIdentifier]=n,this.myIFrame=JM.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ci("frame writing exception"),a.stack&&ci(a.stack),ci(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ci("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[zz]=this.myID,e[Hz]=this.myPW,e[Gz]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Vz+r.length<=qz;){const o=this.pendingSegs.shift();r=r+"&"+kie+s+"="+o.seg+"&"+Die+s+"="+o.ts+"&"+Mie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Bie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ci("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fie=16384,jie=45e3;let ux=null;typeof MozWebSocket<"u"?ux=MozWebSocket:typeof WebSocket<"u"&&(ux=WebSocket);class Dc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=V_(this.connId),this.stats_=QM(n),this.connURL=Dc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[Oz]=YM,typeof location<"u"&&location.hostname&&Lz.test(location.hostname)&&(o[Dz]=Mz),n&&(o[kz]=n),r&&(o[Uz]=r),s&&(o[T2]=s),i&&(o[Bz]=i),Wz(e,$z,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Bp.set("previous_websocket_failure",!0);try{let r;Bre(),this.mySock=new ux(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Dc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&ux!==null&&!Dc.forceDisallow_}static previouslyFailed(){return Bp.isInMemoryStorage||Bp.get("previous_websocket_failure")===!0}markConnectionHealthy(){Bp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=jE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=ts(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Rz(n,Fie);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(jie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Dc.responsesRequiredToBeHealthy=2;Dc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Uy,Dc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=Dc&&Dc.isAvailable();let r=n&&!Dc.previouslyFailed();if(e.webSocketOnly&&(n||Eo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Dc];else{const s=this.transports_=[];for(const i of GE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);GE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}GE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wie=6e4,zie=5e3,Hie=10*1024,Gie=100*1024,AR="t",n$="d",qie="s",r$="r",Vie="e",s$="o",i$="a",o$="n",a$="p",Kie="h";class Yie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=V_("c:"+this.id+":"),this.transportManager_=new GE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=cE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Gie?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Hie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(AR in e){const n=e[AR];n===i$?this.upgradeIfSecondaryHealthy_():n===r$?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===s$&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Xb("t",e),r=Xb("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:a$,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:i$,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:o$,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Xb("t",e),r=Xb("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Xb(AR,e);if(n$ in e){const r=e[n$];if(n===Kie){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===o$){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qie?this.onConnectionShutdown_(r):n===r$?this.onReset_(r):n===Vie?N2("Server Error: "+r):n===s$?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):N2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),YM!==r&&Eo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),cE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Wie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):cE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:a$,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Bp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yz=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx extends Yz{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!mz()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new dx}getInitialEvent(e){return Ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=32,l$=768;class Kn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function En(){return new Kn("")}function Kt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function If(t){return t.pieces_.length-t.pieceNum_}function nr(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Kn(t.pieces_,e)}function Qz(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Qie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Jz(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Zz(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Kn(e,0)}function ns(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Kn(n,0)}function Zt(t){return t.pieceNum_>=t.pieces_.length}function Ni(t,e){const n=Kt(t),r=Kt(e);if(n===null)return e;if(n===r)return Ni(nr(t),nr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ZM(t,e){if(If(t)!==If(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Bc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(If(t)>If(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Jie{constructor(e,n){this.errorPrefix_=n,this.parts_=Jz(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=cN(this.parts_[r]);Xz(this)}}function Zie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=cN(e),Xz(t)}function Xie(t){const e=t.parts_.pop();t.byteLength_-=cN(e),t.parts_.length>0&&(t.byteLength_-=1)}function Xz(t){if(t.byteLength_>l$)throw new Error(t.errorPrefix_+"has a key path longer than "+l$+" bytes ("+t.byteLength_+").");if(t.parts_.length>c$)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+c$+") or object contains a cycle "+bp(t))}function bp(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM extends Yz{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new XM}getInitialEvent(e){return Ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev=1e3,eoe=60*5*1e3,u$=30*1e3,toe=1.3,noe=3e4,roe="server_kill",d$=3;class od extends Kz{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=od.nextPersistentConnectionId_++,this.log_=V_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ev,this.maxReconnectDelay_=eoe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");XM.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&dx.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(ts(i)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new aN,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;od.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Nd(e,"w")){const r=Sw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();Eo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Gre(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=u$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Hre(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ts(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):N2("Unrecognized action received from server: "+ts(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ev,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ev,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>noe&&(this.reconnectDelay_=ev),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*toe)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+od.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?ci("getToken() completed but was canceled"):(ci("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Yie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{Eo(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(roe)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Eo(d),c())}}}interrupt(e){ci("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ci("Resuming connection for reason: "+e),delete this.interruptReasons_[e],FB(this.interruptReasons_)&&(this.reconnectDelay_=ev,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>KM(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Kn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){ci("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=d$&&(this.reconnectDelay_=u$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ci("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=d$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+xz.replace(/\./g,"-")]=1,mz()?e["framework.cordova"]=1:Ure()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=dx.getInstance().currentlyOnline();return FB(this.interruptReasons_)&&e}}od.nextPersistentConnectionId_=0;od.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Yt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Yt(xw,e),s=new Yt(xw,n);return this.compare(r,s)!==0}minPost(){return Yt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Q1;class eH extends lN{static get __EMPTY_NODE(){return Q1}static set __EMPTY_NODE(e){Q1=e}compare(e,n){return vb(e.name,n.name)}isDefinedOn(e){throw wb("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Yt.MIN}maxPost(){return new Yt(jg,Q1)}makePost(e,n){return Ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Yt(e,Q1)}toString(){return".key"}}const c0=new eH;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ps{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ps.RED,this.left=s??wo.EMPTY_NODE,this.right=i??wo.EMPTY_NODE}copy(e,n,r,s,i){return new ps(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wo.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return wo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ps.RED=!0;ps.BLACK=!1;class soe{copy(e,n,r,s,i){return this}insert(e,n,r){return new ps(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class wo{constructor(e,n=wo.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new wo(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ps.BLACK,null,null))}remove(e){return new wo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ps.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new J1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new J1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new J1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new J1(this.root_,null,this.comparator_,!0,e)}}wo.EMPTY_NODE=new soe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ioe(t,e){return vb(t.name,e.name)}function e5(t,e){return vb(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R2;function ooe(t){R2=t}const tH=function(t){return typeof t=="number"?"number:"+Pz(t):"string:"+t},nH=function(t){if(t.isLeafNode()){const e=t.val();Ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Nd(e,".sv"),"Priority must be a string or number.")}else Ae(t===R2||t.isEmpty(),"priority of unexpected type.");Ae(t===R2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h$;class fs{constructor(e,n=fs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),nH(this.priorityNode_)}static set __childrenNodeConstructor(e){h$=e}static get __childrenNodeConstructor(){return h$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new fs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:fs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Zt(e)?this:Kt(e)===".priority"?this.priorityNode_:fs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:fs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Kt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ae(r!==".priority"||If(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,fs.__childrenNodeConstructor.EMPTY_NODE.updateChild(nr(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+tH(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Pz(this.value_):e+=this.value_,this.lazyHash_=Nz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===fs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof fs.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=fs.VALUE_TYPE_ORDER.indexOf(n),i=fs.VALUE_TYPE_ORDER.indexOf(r);return Ae(s>=0,"Unknown leaf type: "+n),Ae(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}fs.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rH,sH;function aoe(t){rH=t}function coe(t){sH=t}class loe extends lN{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?vb(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Yt.MIN}maxPost(){return new Yt(jg,new fs("[PRIORITY-POST]",sH))}makePost(e,n){const r=rH(e);return new Yt(n,new fs("[PRIORITY-POST]",r))}toString(){return".priority"}}const Rr=new loe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uoe=Math.log(2);class doe{constructor(e){const n=i=>parseInt(Math.log(i)/uoe,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hx=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ps(h,d.node,ps.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new ps(h,d.node,ps.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,y=d;d-=p;const b=s(w+1,y),v=t[w],A=n?n(v):v;f(new ps(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,ps.BLACK):(h(w,ps.BLACK),h(w,ps.RED))}return u},o=new doe(t.length),a=i(o);return new wo(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SR;const Qm={};class Zu{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ae(Qm&&Rr,"ChildrenNode.ts has not been loaded"),SR=SR||new Zu({".priority":Qm},{".priority":Rr}),SR}get(e){const n=Sw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wo?n:null}hasIndex(e){return Nd(this.indexSet_,e.toString())}addIndex(e,n){Ae(e!==c0,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Yt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=hx(r,e.getCompare()):a=Qm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Zu(u,l)}addToIndexes(e,n){const r=cx(this.indexes_,(s,i)=>{const o=Sw(this.indexSet_,i);if(Ae(o,"Missing index implementation for "+i),s===Qm)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Yt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),hx(a,o.getCompare())}else return Qm;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Yt(e.name,a))),c.insert(e,e.node)}});return new Zu(r,this.indexSet_)}removeFromIndexes(e,n){const r=cx(this.indexes_,s=>{if(s===Qm)return s;{const i=n.get(e.name);return i?s.remove(new Yt(e.name,i)):s}});return new Zu(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tv;class St{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&nH(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tv||(tv=new St(new wo(e5),null,Zu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tv}updatePriority(e){return this.children_.isEmpty()?this:new St(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?tv:n}}getChild(e){const n=Kt(e);return n===null?this:this.getImmediateChild(n).getChild(nr(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Yt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?tv:this.priorityNode_;return new St(s,o,i)}}updateChild(e,n){const r=Kt(e);if(r===null)return n;{Ae(Kt(e)!==".priority"||If(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(nr(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Rr,(o,a)=>{n[o]=a.val(e),r++,i&&St.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+tH(this.getPriority().val())+":"),this.forEachChild(Rr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":Nz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Yt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Yt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Yt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Yt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Yt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===K_?-1:0}withIndex(e){if(e===c0||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new St(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===c0||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Rr),s=n.getIterator(Rr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===c0?null:this.indexMap_.get(e.toString())}}St.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class hoe extends St{constructor(){super(new wo(e5),St.EMPTY_NODE,Zu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return St.EMPTY_NODE}isEmpty(){return!1}}const K_=new hoe;Object.defineProperties(Yt,{MIN:{value:new Yt(xw,St.EMPTY_NODE)},MAX:{value:new Yt(jg,K_)}});eH.__EMPTY_NODE=St.EMPTY_NODE;fs.__childrenNodeConstructor=St;ooe(K_);coe(K_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const foe=!0;function ys(t,e=null){if(t===null)return St.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new fs(n,ys(e))}if(!(t instanceof Array)&&foe){const n=[];let r=!1;if(No(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=ys(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Yt(o,c)))}}),n.length===0)return St.EMPTY_NODE;const i=hx(n,ioe,o=>o.name,e5);if(r){const o=hx(n,Rr.getCompare());return new St(i,ys(e),new Zu({".priority":o},{".priority":Rr}))}else return new St(i,ys(e),Zu.Default)}else{let n=St.EMPTY_NODE;return No(t,(r,s)=>{if(Nd(t,r)&&r.substring(0,1)!=="."){const i=ys(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(ys(e))}}aoe(ys);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class poe extends lN{constructor(e){super(),this.indexPath_=e,Ae(!Zt(e)&&Kt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?vb(e.name,n.name):i}makePost(e,n){const r=ys(e),s=St.EMPTY_NODE.updateChild(this.indexPath_,r);return new Yt(n,s)}maxPost(){const e=St.EMPTY_NODE.updateChild(this.indexPath_,K_);return new Yt(jg,e)}toString(){return Jz(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class goe extends lN{compare(e,n){const r=e.node.compareTo(n.node);return r===0?vb(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Yt.MIN}maxPost(){return Yt.MAX}makePost(e,n){const r=ys(e);return new Yt(n,r)}toString(){return".value"}}const moe=new goe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iH(t){return{type:"value",snapshotNode:t}}function Iw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function qE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function VE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function yoe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(qE(n,a)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Iw(n,r)):o.trackChildChange(VE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Rr,(s,i)=>{n.hasChild(s)||r.trackChildChange(qE(s,i))}),n.isLeafNode()||n.forEachChild(Rr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(VE(s,i,o))}else r.trackChildChange(Iw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?St.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.indexedFilter_=new t5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=KE.getStartPost_(e),this.endPost_=KE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Yt(n,r))||(r=St.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=St.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(St.EMPTY_NODE);const i=this;return n.forEachChild(Rr,(o,a)=>{i.matches(new Yt(o,a))||(s=s.updateImmediateChild(o,St.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class woe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new KE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Yt(n,r))||(r=St.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=St.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=St.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(St.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,St.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ae(a.numChildren()===this.limit_,"");const c=new Yt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(VE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(qE(n,d));const g=a.updateImmediateChild(n,St.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(Iw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(qE(l.name,l.node)),i.trackChildChange(Iw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,St.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rr}copy(){const e=new n5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function boe(t){return t.loadsAllData()?new t5(t.getIndex()):t.hasLimit()?new woe(t):new KE(t)}function f$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Rr?n="$priority":t.index_===moe?n="$value":t.index_===c0?n="$key":(Ae(t.index_ instanceof poe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=ts(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=ts(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+ts(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=ts(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+ts(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function p$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Rr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx extends Kz{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=V_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=fx.getListenId_(e,r),a={};this.listens_[o]=a;const c=f$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),Sw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=fx.getListenId_(e,n);delete this.listens_[r]}get(e){const n=f$(e._queryParams),r=e._path.toString(),s=new aN;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+qre(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=jE(a.responseText)}catch{Eo("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Eo("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class voe{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){return{value:null,children:new Map}}function oH(t,e,n){if(Zt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Kt(e);t.children.has(r)||t.children.set(r,px());const s=t.children.get(r);e=nr(e),oH(s,e,n)}}function P2(t,e,n){t.value!==null?n(e,t.value):Eoe(t,(r,s)=>{const i=new Kn(e.toString()+"/"+r);P2(s,i,n)})}function Eoe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&No(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=10*1e3,_oe=30*1e3,Aoe=5*60*1e3;class Soe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Coe(e);const r=g$+(_oe-g$)*Math.random();cE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;No(e,(s,i)=>{i>0&&Nd(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),cE(this.reportStats_.bind(this),Math.floor(Math.random()*2*Aoe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $c;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($c||($c={}));function aH(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function r5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function s5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=$c.ACK_USER_WRITE,this.source=aH()}operationForChild(e){if(Zt(this.path)){if(this.affectedTree.value!=null)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Kn(e));return new gx(En(),n,this.revert)}}else return Ae(Kt(this.path)===e,"operationForChild called for unrelated child."),new gx(nr(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.source=e,this.path=n,this.type=$c.LISTEN_COMPLETE}operationForChild(e){return Zt(this.path)?new YE(this.source,En()):new YE(this.source,nr(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=$c.OVERWRITE}operationForChild(e){return Zt(this.path)?new Wg(this.source,En(),this.snap.getImmediateChild(e)):new Wg(this.source,nr(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=$c.MERGE}operationForChild(e){if(Zt(this.path)){const n=this.children.subtree(new Kn(e));return n.isEmpty()?null:n.value?new Wg(this.source,En(),n.value):new QE(this.source,En(),n)}else return Ae(Kt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new QE(this.source,nr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Zt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Kt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xoe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ioe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(yoe(o.childName,o.snapshotNode))}),nv(t,s,"child_removed",e,r,n),nv(t,s,"child_added",e,r,n),nv(t,s,"child_moved",i,r,n),nv(t,s,"child_changed",e,r,n),nv(t,s,"value",e,r,n),s}function nv(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>Toe(t,a,c)),o.forEach(a=>{const c=Noe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function Noe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Toe(t,e,n){if(e.childName==null||n.childName==null)throw wb("Should only compare child_ events.");const r=new Yt(e.childName,e.snapshotNode),s=new Yt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uN(t,e){return{eventCache:t,serverCache:e}}function lE(t,e,n,r){return uN(new Nf(e,n,r),t.serverCache)}function cH(t,e,n,r){return uN(t.eventCache,new Nf(e,n,r))}function mx(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function zg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xR;const Roe=()=>(xR||(xR=new wo(gie)),xR);class ar{constructor(e,n=Roe()){this.value=e,this.children=n}static fromObject(e){let n=new ar(null);return No(e,(r,s)=>{n=n.set(new Kn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:En(),value:this.value};if(Zt(e))return null;{const r=Kt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(nr(e),n);return i!=null?{path:ns(new Kn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Zt(e))return this;{const n=Kt(e),r=this.children.get(n);return r!==null?r.subtree(nr(e)):new ar(null)}}set(e,n){if(Zt(e))return new ar(n,this.children);{const r=Kt(e),i=(this.children.get(r)||new ar(null)).set(nr(e),n),o=this.children.insert(r,i);return new ar(this.value,o)}}remove(e){if(Zt(e))return this.children.isEmpty()?new ar(null):new ar(null,this.children);{const n=Kt(e),r=this.children.get(n);if(r){const s=r.remove(nr(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ar(null):new ar(this.value,i)}else return this}}get(e){if(Zt(e))return this.value;{const n=Kt(e),r=this.children.get(n);return r?r.get(nr(e)):null}}setTree(e,n){if(Zt(e))return n;{const r=Kt(e),i=(this.children.get(r)||new ar(null)).setTree(nr(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ar(this.value,o)}}fold(e){return this.fold_(En(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(ns(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,En(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Zt(e))return null;{const i=Kt(e),o=this.children.get(i);return o?o.findOnPath_(nr(e),ns(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,En(),n)}foreachOnPath_(e,n,r){if(Zt(e))return this;{this.value&&r(n,this.value);const s=Kt(e),i=this.children.get(s);return i?i.foreachOnPath_(nr(e),ns(n,s),r):new ar(null)}}foreach(e){this.foreach_(En(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(ns(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.writeTree_=e}static empty(){return new Wc(new ar(null))}}function uE(t,e,n){if(Zt(e))return new Wc(new ar(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=Ni(s,e);return i=i.updateChild(o,n),new Wc(t.writeTree_.set(s,i))}else{const s=new ar(n),i=t.writeTree_.setTree(e,s);return new Wc(i)}}}function m$(t,e,n){let r=t;return No(n,(s,i)=>{r=uE(r,ns(e,s),i)}),r}function y$(t,e){if(Zt(e))return Wc.empty();{const n=t.writeTree_.setTree(e,new ar(null));return new Wc(n)}}function O2(t,e){return Em(t,e)!=null}function Em(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ni(n.path,e)):null}function w$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Rr,(r,s)=>{e.push(new Yt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Yt(r,s.value))}),e}function sf(t,e){if(Zt(e))return t;{const n=Em(t,e);return n!=null?new Wc(new ar(n)):new Wc(t.writeTree_.subtree(e))}}function k2(t){return t.writeTree_.isEmpty()}function Nw(t,e){return lH(En(),t.writeTree_,e)}function lH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ae(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=lH(ns(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ns(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e){return fH(e,t)}function Poe(t,e,n,r,s){Ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=uE(t.visibleWrites,e,n)),t.lastWriteId=r}function Ooe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function koe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&Doe(a,r.path)?s=!1:Bc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Moe(t),!0;if(r.snap)t.visibleWrites=y$(t.visibleWrites,r.path);else{const a=r.children;No(a,c=>{t.visibleWrites=y$(t.visibleWrites,ns(r.path,c))})}return!0}else return!1}function Doe(t,e){if(t.snap)return Bc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Bc(ns(t.path,n),e))return!0;return!1}function Moe(t){t.visibleWrites=uH(t.allWrites,Loe,En()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Loe(t){return t.visible}function uH(t,e,n){let r=Wc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Bc(n,o)?(a=Ni(n,o),r=uE(r,a,i.snap)):Bc(o,n)&&(a=Ni(o,n),r=uE(r,En(),i.snap.getChild(a)));else if(i.children){if(Bc(n,o))a=Ni(n,o),r=m$(r,a,i.children);else if(Bc(o,n))if(a=Ni(o,n),Zt(a))r=m$(r,En(),i.children);else{const c=Sw(i.children,Kt(a));if(c){const l=c.getChild(nr(a));r=uE(r,En(),l)}}}else throw wb("WriteRecord should have .snap or .children")}}return r}function dH(t,e,n,r,s){if(!r&&!s){const i=Em(t.visibleWrites,e);if(i!=null)return i;{const o=sf(t.visibleWrites,e);if(k2(o))return n;if(n==null&&!O2(o,En()))return null;{const a=n||St.EMPTY_NODE;return Nw(o,a)}}}else{const i=sf(t.visibleWrites,e);if(!s&&k2(i))return n;if(!s&&n==null&&!O2(i,En()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Bc(l.path,e)||Bc(e,l.path))},a=uH(t.allWrites,o,e),c=n||St.EMPTY_NODE;return Nw(a,c)}}}function Uoe(t,e,n){let r=St.EMPTY_NODE;const s=Em(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Rr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=sf(t.visibleWrites,e);return n.forEachChild(Rr,(o,a)=>{const c=Nw(sf(i,new Kn(o)),a);r=r.updateImmediateChild(o,c)}),w$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=sf(t.visibleWrites,e);return w$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Boe(t,e,n,r,s){Ae(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=ns(e,n);if(O2(t.visibleWrites,i))return null;{const o=sf(t.visibleWrites,i);return k2(o)?s.getChild(n):Nw(o,s.getChild(n))}}function $oe(t,e,n,r){const s=ns(e,n),i=Em(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=sf(t.visibleWrites,s);return Nw(o,r.getNode().getImmediateChild(n))}else return null}function Foe(t,e){return Em(t.visibleWrites,e)}function joe(t,e,n,r,s,i,o){let a;const c=sf(t.visibleWrites,e),l=Em(c,En());if(l!=null)a=l;else if(n!=null)a=Nw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Woe(){return{visibleWrites:Wc.empty(),allWrites:[],lastWriteId:-1}}function yx(t,e,n,r){return dH(t.writeTree,t.treePath,e,n,r)}function i5(t,e){return Uoe(t.writeTree,t.treePath,e)}function b$(t,e,n,r){return Boe(t.writeTree,t.treePath,e,n,r)}function wx(t,e){return Foe(t.writeTree,ns(t.treePath,e))}function zoe(t,e,n,r,s,i){return joe(t.writeTree,t.treePath,e,n,r,s,i)}function o5(t,e,n){return $oe(t.writeTree,t.treePath,e,n)}function hH(t,e){return fH(ns(t.treePath,e),t.writeTree)}function fH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hoe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ae(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,VE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,qE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,Iw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,VE(r,e.snapshotNode,s.oldSnap));else throw wb("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Goe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const pH=new Goe;class a5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new Nf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return o5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:zg(this.viewCache_),i=zoe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qoe(t){return{filter:t}}function Voe(t,e){Ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Koe(t,e,n,r,s){const i=new Hoe;let o,a;if(n.type===$c.OVERWRITE){const l=n;l.source.fromUser?o=D2(t,e,l.path,l.snap,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Zt(l.path),o=bx(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===$c.MERGE){const l=n;l.source.fromUser?o=Qoe(t,e,l.path,l.children,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=M2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===$c.ACK_USER_WRITE){const l=n;l.revert?o=Xoe(t,e,l.path,r,s,i):o=Joe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===$c.LISTEN_COMPLETE)o=Zoe(t,e,n.path,r,i);else throw wb("Unknown operation type: "+n.type);const c=i.getChanges();return Yoe(e,o,c),{viewCache:o,changes:c}}function Yoe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=mx(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(iH(mx(e)))}}function gH(t,e,n,r,s,i){const o=e.eventCache;if(wx(r,n)!=null)return e;{let a,c;if(Zt(n))if(Ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=zg(e),u=l instanceof St?l:St.EMPTY_NODE,d=i5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=yx(r,zg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Kt(n);if(l===".priority"){Ae(If(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=b$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=nr(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=b$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=o5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return lE(e,a,o.isFullyInitialized()||Zt(n),t.filter.filtersNodes())}}function bx(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Zt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Kt(n);if(!c.isCompleteForPath(n)&&If(n)>1)return e;const p=nr(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,pH,null)}const d=cH(e,l,c.isFullyInitialized()||Zt(n),u.filtersNodes()),h=new a5(s,d,i);return gH(t,d,n,s,h,a)}function D2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new a5(s,e,i);if(Zt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=lE(e,l,!0,t.filter.filtersNodes());else{const d=Kt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=lE(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=nr(n),f=a.getNode().getImmediateChild(d);let p;if(Zt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?Qz(h)===".priority"&&g.getChild(Zz(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=St.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=lE(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function v$(t,e){return t.eventCache.isCompleteForChild(e)}function Qoe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=ns(n,c);v$(e,Kt(u))&&(a=D2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=ns(n,c);v$(e,Kt(u))||(a=D2(t,a,u,l,s,i,o))}),a}function E$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function M2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Zt(n)?l=r:l=new ar(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=E$(t,f,h);c=bx(t,c,new Kn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=E$(t,p,h);c=bx(t,c,new Kn(d),g,s,i,o,a)}}),c}function Joe(t,e,n,r,s,i,o){if(wx(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Zt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return bx(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Zt(n)){let l=new ar(null);return c.getNode().forEachChild(c0,(u,d)=>{l=l.set(new Kn(u),d)}),M2(t,e,n,l,s,i,a,o)}else return e}else{let l=new ar(null);return r.foreach((u,d)=>{const h=ns(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),M2(t,e,n,l,s,i,a,o)}}function Zoe(t,e,n,r,s){const i=e.serverCache,o=cH(e,i.getNode(),i.isFullyInitialized()||Zt(n),i.isFiltered());return gH(t,o,n,r,pH,s)}function Xoe(t,e,n,r,s,i){let o;if(wx(r,n)!=null)return e;{const a=new a5(r,e,s),c=e.eventCache.getNode();let l;if(Zt(n)||Kt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=yx(r,zg(e));else{const d=e.serverCache.getNode();Ae(d instanceof St,"serverChildren would be complete if leaf node"),u=i5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Kt(n);let d=o5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,nr(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,St.EMPTY_NODE,nr(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yx(r,zg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||wx(r,En())!=null,lE(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new t5(r.getIndex()),i=boe(r);this.processor_=qoe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(St.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(St.EMPTY_NODE,a.getNode(),null),u=new Nf(c,o.isFullyInitialized(),s.filtersNodes()),d=new Nf(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=uN(d,u),this.eventGenerator_=new xoe(this.query_)}get query(){return this.query_}}function tae(t){return t.viewCache_.serverCache.getNode()}function nae(t){return mx(t.viewCache_)}function rae(t,e){const n=zg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Zt(e)&&!n.getImmediateChild(Kt(e)).isEmpty())?n.getChild(e):null}function C$(t){return t.eventRegistrations_.length===0}function sae(t,e){t.eventRegistrations_.push(e)}function _$(t,e,n){const r=[];if(n){Ae(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function A$(t,e,n,r){e.type===$c.MERGE&&e.source.queryId!==null&&(Ae(zg(t.viewCache_),"We should always have a full cache before handling merges"),Ae(mx(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Koe(t.processor_,s,e,n,r);return Voe(t.processor_,i.viewCache),Ae(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,mH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function iae(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Rr,(i,o)=>{r.push(Iw(i,o))}),n.isFullyInitialized()&&r.push(iH(n.getNode())),mH(t,r,n.getNode(),e)}function mH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return Ioe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vx;class yH{constructor(){this.views=new Map}}function oae(t){Ae(!vx,"__referenceConstructor has already been defined"),vx=t}function aae(){return Ae(vx,"Reference.ts has not been loaded"),vx}function cae(t){return t.views.size===0}function c5(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ae(i!=null,"SyncTree gave us an op for an invalid query."),A$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(A$(o,e,n,r));return i}}function wH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=yx(n,s?r:null),c=!1;a?c=!0:r instanceof St?(a=i5(n,r),c=!1):(a=St.EMPTY_NODE,c=!1);const l=uN(new Nf(a,c,!1),new Nf(r,s,!1));return new eae(e,l)}return o}function lae(t,e,n,r,s,i){const o=wH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),sae(o,n),iae(o,n)}function uae(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=Tf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(_$(l,n,r)),C$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(_$(c,n,r)),C$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!Tf(t)&&i.push(new(aae())(e._repo,e._path)),{removed:i,events:o}}function bH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function of(t,e){let n=null;for(const r of t.views.values())n=n||rae(r,e);return n}function vH(t,e){if(e._queryParams.loadsAllData())return hN(t);{const r=e._queryIdentifier;return t.views.get(r)}}function EH(t,e){return vH(t,e)!=null}function Tf(t){return hN(t)!=null}function hN(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ex;function dae(t){Ae(!Ex,"__referenceConstructor has already been defined"),Ex=t}function hae(){return Ae(Ex,"Reference.ts has not been loaded"),Ex}let fae=1;class S${constructor(e){this.listenProvider_=e,this.syncPointTree_=new ar(null),this.pendingWriteTree_=Woe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CH(t,e,n,r,s){return Poe(t.pendingWriteTree_,e,n,r,s),s?Q_(t,new Wg(aH(),e,n)):[]}function $p(t,e,n=!1){const r=Ooe(t.pendingWriteTree_,e);if(koe(t.pendingWriteTree_,e)){let i=new ar(null);return r.snap!=null?i=i.set(En(),!0):No(r.children,o=>{i=i.set(new Kn(o),!0)}),Q_(t,new gx(r.path,i,n))}else return[]}function Y_(t,e,n){return Q_(t,new Wg(r5(),e,n))}function pae(t,e,n){const r=ar.fromObject(n);return Q_(t,new QE(r5(),e,r))}function gae(t,e){return Q_(t,new YE(r5(),e))}function mae(t,e,n){const r=u5(t,n);if(r){const s=d5(r),i=s.path,o=s.queryId,a=Ni(i,e),c=new YE(s5(o),a);return h5(t,i,c)}else return[]}function Cx(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||EH(o,e))){const c=uae(o,e,n,r);cae(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>Tf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=bae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,y=xH(t,g);t.listenProvider_.startListening(dE(w),JE(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(dE(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(fN(h));t.listenProvider_.stopListening(dE(h),f)}))}vae(t,l)}return a}function _H(t,e,n,r){const s=u5(t,r);if(s!=null){const i=d5(s),o=i.path,a=i.queryId,c=Ni(o,e),l=new Wg(s5(a),c,n);return h5(t,o,l)}else return[]}function yae(t,e,n,r){const s=u5(t,r);if(s){const i=d5(s),o=i.path,a=i.queryId,c=Ni(o,e),l=ar.fromObject(n),u=new QE(s5(a),c,l);return h5(t,o,u)}else return[]}function L2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=Ni(h,s);i=i||of(f,p),o=o||Tf(f)});let a=t.syncPointTree_.get(s);a?(o=o||Tf(a),i=i||of(a,En())):(a=new yH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=St.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=of(p,En());g&&(i=i.updateImmediateChild(f,g))}));const l=EH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=fN(e);Ae(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=Eae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=dN(t.pendingWriteTree_,s);let d=lae(a,e,n,u,i,c);if(!l&&!o&&!r){const h=vH(a,e);d=d.concat(Cae(t,e,h))}return d}function l5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=Ni(o,e),l=of(a,c);if(l)return l});return dH(s,e,i,n,!0)}function wae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Ni(l,n);r=r||of(u,d)});let s=t.syncPointTree_.get(n);s?r=r||of(s,En()):(s=new yH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new Nf(r,!0,!1):null,a=dN(t.pendingWriteTree_,e._path),c=wH(s,e,a,i?o.getNode():St.EMPTY_NODE,i);return nae(c)}function Q_(t,e){return AH(e,t.syncPointTree_,null,dN(t.pendingWriteTree_,En()))}function AH(t,e,n,r){if(Zt(t.path))return SH(t,e,n,r);{const s=e.get(En());n==null&&s!=null&&(n=of(s,En()));let i=[];const o=Kt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=hH(r,o);i=i.concat(AH(a,c,l,u))}return s&&(i=i.concat(c5(s,t,r,n))),i}}function SH(t,e,n,r){const s=e.get(En());n==null&&s!=null&&(n=of(s,En()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=hH(r,o),u=t.operationForChild(o);u&&(i=i.concat(SH(u,a,c,l)))}),s&&(i=i.concat(c5(s,t,r,n))),i}function xH(t,e){const n=e.query,r=JE(t,n);return{hashFn:()=>(tae(e)||St.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?mae(t,n._path,r):gae(t,n._path);{const i=wie(s,n);return Cx(t,n,null,i)}}}}function JE(t,e){const n=fN(e);return t.queryToTagMap.get(n)}function fN(t){return t._path.toString()+"$"+t._queryIdentifier}function u5(t,e){return t.tagToQueryMap.get(e)}function d5(t){const e=t.indexOf("$");return Ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Kn(t.substr(0,e))}}function h5(t,e,n){const r=t.syncPointTree_.get(e);Ae(r,"Missing sync point for query tag that we're tracking");const s=dN(t.pendingWriteTree_,e);return c5(r,n,s,null)}function bae(t){return t.fold((e,n,r)=>{if(n&&Tf(n))return[hN(n)];{let s=[];return n&&(s=bH(n)),No(r,(i,o)=>{s=s.concat(o)}),s}})}function dE(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(hae())(t._repo,t._path):t}function vae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=fN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function Eae(){return fae++}function Cae(t,e,n){const r=e._path,s=JE(t,e),i=xH(t,n),o=t.listenProvider_.startListening(dE(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ae(!Tf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Zt(l)&&u&&Tf(u))return[hN(u).query];{let h=[];return u&&(h=h.concat(bH(u).map(f=>f.query))),No(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(dE(u),JE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new f5(n)}node(){return this.node_}}class p5{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=ns(this.path_,e);return new p5(this.syncTree_,n)}node(){return l5(this.syncTree_,this.path_)}}const _ae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},x$=function(t,e,n){if(!t||typeof t!="object")return t;if(Ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Aae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Sae(t[".sv"],e);Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Aae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ae(!1,"Unexpected server value: "+t)}},Sae=function(t,e,n){t.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ae(!1,"Unexpected increment value: "+r);const s=e.node();if(Ae(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},xae=function(t,e,n,r){return g5(e,new p5(n,t),r)},IH=function(t,e,n){return g5(t,new f5(e),n)};function g5(t,e,n){const r=t.getPriority().val(),s=x$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=x$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new fs(a,ys(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new fs(s))),o.forEachChild(Rr,(a,c)=>{const l=g5(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function y5(t,e){let n=e instanceof Kn?e:new Kn(e),r=t,s=Kt(n);for(;s!==null;){const i=Sw(r.node.children,s)||{children:{},childCount:0};r=new m5(s,r,i),n=nr(n),s=Kt(n)}return r}function Cb(t){return t.node.value}function NH(t,e){t.node.value=e,U2(t)}function TH(t){return t.node.childCount>0}function Iae(t){return Cb(t)===void 0&&!TH(t)}function pN(t,e){No(t.node.children,(n,r)=>{e(new m5(n,t,r))})}function RH(t,e,n,r){n&&e(t),pN(t,s=>{RH(s,e,!0)})}function Nae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function J_(t){return new Kn(t.parent===null?t.name:J_(t.parent)+"/"+t.name)}function U2(t){t.parent!==null&&Tae(t.parent,t.name,t)}function Tae(t,e,n){const r=Iae(n),s=Nd(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,U2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,U2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rae=/[\[\].#$\/\u0000-\u001F\u007F]/,Pae=/[\[\].#$\u0000-\u001F\u007F]/,IR=10*1024*1024,PH=function(t){return typeof t=="string"&&t.length!==0&&!Rae.test(t)},OH=function(t){return typeof t=="string"&&t.length!==0&&!Pae.test(t)},Oae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),OH(t)},kae=function(t,e,n,r){w5(qM(t,"value"),e,n)},w5=function(t,e,n){const r=n instanceof Kn?new Jie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+bp(r));if(typeof e=="function")throw new Error(t+"contains a function "+bp(r)+" with contents = "+e.toString());if(Tz(e))throw new Error(t+"contains "+e.toString()+" "+bp(r));if(typeof e=="string"&&e.length>IR/3&&cN(e)>IR)throw new Error(t+"contains a string greater than "+IR+" utf8 bytes "+bp(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(No(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!PH(o)))throw new Error(t+" contains an invalid key ("+o+") "+bp(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Zie(r,o),w5(t,a,r),Xie(r)}),s&&i)throw new Error(t+' contains ".value" child '+bp(r)+" in addition to actual children.")}},kH=function(t,e,n,r){if(!OH(n))throw new Error(qM(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Dae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),kH(t,e,n)},DH=function(t,e){if(Kt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Mae=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!PH(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Oae(n))throw new Error(qM(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function b5(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!ZM(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function MH(t,e,n){b5(t,n),LH(t,r=>ZM(r,e))}function eu(t,e,n){b5(t,n),LH(t,r=>Bc(r,e)||Bc(e,r))}function LH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(Uae(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function Uae(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();aE&&ci("event: "+n.toString()),Eb(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bae="repo_interrupt",$ae=25;class Fae{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Lae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=px(),this.transactionQueueTree_=new m5,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function jae(t,e,n){if(t.stats_=QM(t.repoInfo_),t.forceRestClient_||Cie())t.server_=new fx(t.repoInfo_,(r,s,i,o)=>{I$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>N$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ts(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new od(t.repoInfo_,e,(r,s,i,o)=>{I$(t,r,s,i,o)},r=>{N$(t,r)},r=>{zae(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Iie(t.repoInfo_,()=>new Soe(t.stats_,t.server_)),t.infoData_=new voe,t.infoSyncTree_=new S$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Y_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),E5(t,"connected",!1),t.serverSyncTree_=new S$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);eu(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Wae(t){const n=t.infoData_.getNode(new Kn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function v5(t){return _ae({timestamp:Wae(t)})}function I$(t,e,n,r,s){t.dataUpdateCount++;const i=new Kn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=cx(n,l=>ys(l));o=yae(t.serverSyncTree_,i,c,s)}else{const c=ys(n);o=_H(t.serverSyncTree_,i,c,s)}else if(r){const c=cx(n,l=>ys(l));o=pae(t.serverSyncTree_,i,c)}else{const c=ys(n);o=Y_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=mN(t,i)),eu(t.eventQueue_,a,o)}function N$(t,e){E5(t,"connected",e),e===!1&&qae(t)}function zae(t,e){No(e,(n,r)=>{E5(t,n,r)})}function E5(t,e,n){const r=new Kn("/.info/"+e),s=ys(n);t.infoData_.updateSnapshot(r,s);const i=Y_(t.infoSyncTree_,r,s);eu(t.eventQueue_,r,i)}function UH(t){return t.nextWriteId_++}function Hae(t,e,n){const r=wae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=ys(s).withIndex(e._queryParams.getIndex());L2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Y_(t.serverSyncTree_,e._path,i);else{const a=JE(t.serverSyncTree_,e);o=_H(t.serverSyncTree_,e._path,i,a)}return eu(t.eventQueue_,e._path,o),Cx(t.serverSyncTree_,e,n,null,!0),i},s=>(gN(t,"get for query "+ts(e)+" failed: "+s),Promise.reject(new Error(s))))}function Gae(t,e,n,r,s){gN(t,"set",{path:e.toString(),value:n,priority:r});const i=v5(t),o=ys(n,r),a=l5(t.serverSyncTree_,e),c=IH(o,a,i),l=UH(t),u=CH(t.serverSyncTree_,e,c,l,!0);b5(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||Eo("set at "+e+" failed: "+h);const g=$p(t.serverSyncTree_,l,!p);eu(t.eventQueue_,e,g),Qae(t,s,h,f)});const d=WH(t,e);mN(t,d),eu(t.eventQueue_,d,[])}function qae(t){gN(t,"onDisconnectEvents");const e=v5(t),n=px();P2(t.onDisconnect_,En(),(s,i)=>{const o=xae(s,i,t.serverSyncTree_,e);oH(n,s,o)});let r=[];P2(n,En(),(s,i)=>{r=r.concat(Y_(t.serverSyncTree_,s,i));const o=WH(t,s);mN(t,o)}),t.onDisconnect_=px(),eu(t.eventQueue_,En(),r)}function Vae(t,e,n){let r;Kt(e._path)===".info"?r=L2(t.infoSyncTree_,e,n):r=L2(t.serverSyncTree_,e,n),MH(t.eventQueue_,e._path,r)}function Kae(t,e,n){let r;Kt(e._path)===".info"?r=Cx(t.infoSyncTree_,e,n):r=Cx(t.serverSyncTree_,e,n),MH(t.eventQueue_,e._path,r)}function Yae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Bae)}function gN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ci(n,...e)}function Qae(t,e,n,r){e&&Eb(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function BH(t,e,n){return l5(t.serverSyncTree_,e,n)||St.EMPTY_NODE}function C5(t,e=t.transactionQueueTree_){if(e||yN(t,e),Cb(e)){const n=FH(t,e);Ae(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Jae(t,J_(e),n)}else TH(e)&&pN(e,n=>{C5(t,n)})}function Jae(t,e,n){const r=n.map(l=>l.currentWriteId),s=BH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ae(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Ni(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{gN(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat($p(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();yN(t,y5(t.transactionQueueTree_,e)),C5(t,t.transactionQueueTree_),eu(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Eb(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Eo("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}mN(t,e)}},o)}function mN(t,e){const n=$H(t,e),r=J_(n),s=FH(t,n);return Zae(t,s,r),r}function Zae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=Ni(n,c.path);let u=!1,d;if(Ae(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat($p(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=$ae)u=!0,d="maxretry",s=s.concat($p(t.serverSyncTree_,c.currentWriteId,!0));else{const h=BH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){w5("transaction failed: Data returned ",f,c.path);let p=ys(f);typeof f=="object"&&f!=null&&Nd(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,y=v5(t),b=IH(p,h,y);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=UH(t),o.splice(o.indexOf(w),1),s=s.concat(CH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat($p(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat($p(t.serverSyncTree_,c.currentWriteId,!0))}eu(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}yN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Eb(r[a]);C5(t,t.transactionQueueTree_)}function $H(t,e){let n,r=t.transactionQueueTree_;for(n=Kt(e);n!==null&&Cb(r)===void 0;)r=y5(r,n),e=nr(e),n=Kt(e);return r}function FH(t,e){const n=[];return jH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function jH(t,e,n){const r=Cb(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);pN(e,s=>{jH(t,s,n)})}function yN(t,e){const n=Cb(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,NH(e,n.length>0?n:void 0)}pN(e,r=>{yN(t,r)})}function WH(t,e){const n=J_($H(t,e)),r=y5(t.transactionQueueTree_,e);return Nae(r,s=>{NR(t,s)}),NR(t,r),RH(r,s=>{NR(t,s)}),n}function NR(t,e){const n=Cb(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ae(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat($p(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?NH(e,void 0):n.length=i+1,eu(t.eventQueue_,J_(e),s);for(let o=0;o<r.length;o++)Eb(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function ece(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Eo(`Invalid query segment '${n}' in query '${t}'`)}return e}const T$=function(t,e){const n=tce(t),r=n.namespace;n.domain==="firebase.com"&&yd(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&yd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||fie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new jz(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Kn(n.pathString)}},tce=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=Xae(t.substring(u,d)));const h=ece(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nce{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ts(this.snapshot.exportVal())}}class rce{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Zt(this._path)?null:Qz(this._path)}get ref(){return new Td(this._repo,this._path)}get _queryIdentifier(){const e=p$(this._queryParams),n=KM(e);return n==="{}"?"default":n}get _queryObject(){return p$(this._queryParams)}isEqual(e){if(e=bb(e),!(e instanceof _5))return!1;const n=this._repo===e._repo,r=ZM(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Qie(this._path)}}class Td extends _5{constructor(e,n){super(e,n,new n5,!1)}get parent(){const e=Zz(this._path);return e===null?null:new Td(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ZE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Kn(e),r=B2(this.ref,e);return new ZE(this._node.getChild(n),r,Rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new ZE(s,B2(this.ref,r),Rr)))}hasChild(e){const n=new Kn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Go(t,e){return t=bb(t),t._checkNotDeleted("ref"),e!==void 0?B2(t._root,e):t._root}function B2(t,e){return t=bb(t),Kt(t._path)===null?Dae("child","path",e):kH("child","path",e),new Td(t._repo,ns(t._path,e))}function HH(t){return DH("remove",t._path),hE(t,null)}function hE(t,e){t=bb(t),DH("set",t._path),kae("set",e,t._path);const n=new aN;return Gae(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Ip(t){t=bb(t);const e=new zH(()=>{}),n=new wN(e);return Hae(t._repo,t,n).then(r=>new ZE(r,new Td(t._repo,t._path),t._queryParams.getIndex()))}class wN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new nce("value",this,new ZE(e.snapshotNode,new Td(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new rce(this,e,n):null}matches(e){return e instanceof wN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function sce(t,e,n,r,s){const i=new zH(n,void 0),o=new wN(i);return Vae(t._repo,t,o),()=>Kae(t._repo,t,o)}function R$(t,e,n,r){return sce(t,"value",e)}oae(Td);dae(Td);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ice="FIREBASE_DATABASE_EMULATOR_HOST",$2={};let oce=!1;function ace(t,e,n,r){t.repoInfo_=new jz(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function cce(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||yd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ci("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=T$(i,s),a=o.repoInfo,c;typeof process<"u"&&QB&&(c=QB[ice]),c?(i=`http://${c}?ns=${a.namespace}`,o=T$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new Aie(t.name,t.options,e);Mae("Invalid Firebase Database URL",o),Zt(o.path)||yd("Database URL must point to the root of a Firebase Database (not including a child path).");const u=uce(a,t,l,new _ie(t.name,n));return new dce(u,t)}function lce(t,e){const n=$2[e];(!n||n[t.key]!==t)&&yd(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Yae(t),delete n[t.key]}function uce(t,e,n,r){let s=$2[e.name];s||(s={},$2[e.name]=s);let i=s[t.toURLString()];return i&&yd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Fae(t,oce,n,r),s[t.toURLString()]=i,i}class dce{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(jae(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Td(this._repo,En())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lce(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yd("Cannot call "+e+" on a deleted database.")}}function hce(t=_z(),e){const n=Gse(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=Dre("database");r&&fce(n,...r)}return n}function fce(t,e,n,r={}){t=bb(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&yd("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&yd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new gS(gS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Mre(r.mockUserToken,t.app.options.projectId);i=new gS(o)}ace(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pce(t){aie(Kse),lx(new WE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return cce(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),o0(JB,ZB,t),o0(JB,ZB,"esm2017")}od.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};od.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};pce();const gce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},mce=Yse().length?_z():Cz(gce),_x=hce(mce);var F2={},GH={exports:{}},da={},qH={exports:{}},VH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(k,M){var j=k.length;k.push(M);e:for(;0<j;){var q=j-1>>>1,se=k[q];if(0<s(se,M))k[q]=M,k[j]=se,j=q;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var M=k[0],j=k.pop();if(j!==M){k[0]=j;e:for(var q=0,se=k.length,ie=se>>>1;q<ie;){var Y=2*(q+1)-1,te=k[Y],fe=Y+1,Xe=k[fe];if(0>s(te,j))fe<se&&0>s(Xe,te)?(k[q]=Xe,k[fe]=j,q=fe):(k[q]=te,k[Y]=j,q=Y);else if(fe<se&&0>s(Xe,j))k[q]=Xe,k[fe]=j,q=fe;else break e}}return M}function s(k,M){var j=k.sortIndex-M.sortIndex;return j!==0?j:k.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(k){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=k)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(k){if(g=!1,v(k),!p)if(n(c)!==null)p=!0,R(C);else{var M=n(l);M!==null&&B(A,M.startTime-k)}}function C(k,M){p=!1,g&&(g=!1,y(T),T=-1),f=!0;var j=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||k&&!O());){var q=d.callback;if(typeof q=="function"){d.callback=null,h=d.priorityLevel;var se=q(d.expirationTime<=M);M=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var ie=!0;else{var Y=n(l);Y!==null&&B(A,Y.startTime-M),ie=!1}return ie}finally{d=null,h=j,f=!1}}var N=!1,x=null,T=-1,S=5,D=-1;function O(){return!(t.unstable_now()-D<S)}function $(){if(x!==null){var k=t.unstable_now();D=k;var M=!0;try{M=x(!0,k)}finally{M?G():(N=!1,x=null)}}else N=!1}var G;if(typeof b=="function")G=function(){b($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,I=W.port2;W.port1.onmessage=$,G=function(){I.postMessage(null)}}else G=function(){w($,0)};function R(k){x=k,N||(N=!0,G())}function B(k,M){T=w(function(){k(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(k){k.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(C))},t.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<k?Math.floor(1e3/k):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(k){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var j=h;h=M;try{return k()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(k,M){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var j=h;h=k;try{return M()}finally{h=j}},t.unstable_scheduleCallback=function(k,M,j){var q=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?q+j:q):j=q,k){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=j+se,k={id:u++,callback:M,priorityLevel:k,startTime:j,expirationTime:se,sortIndex:-1},j>q?(k.sortIndex=j,e(l,k),n(c)===null&&k===n(l)&&(g?(y(T),T=-1):g=!0,B(A,j-q))):(k.sortIndex=se,e(c,k),p||f||(p=!0,R(C))),k},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(k){var M=h;return function(){var j=h;h=M;try{return k.apply(this,arguments)}finally{h=j}}}})(VH);qH.exports=VH;var yce=qH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wce=P,ca=yce;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KH=new Set,XE={};function Cm(t,e){Tw(t,e),Tw(t+"Capture",e)}function Tw(t,e){for(XE[t]=e,t=0;t<e.length;t++)KH.add(e[t])}var wd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j2=Object.prototype.hasOwnProperty,bce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P$={},O$={};function vce(t){return j2.call(O$,t)?!0:j2.call(P$,t)?!1:bce.test(t)?O$[t]=!0:(P$[t]=!0,!1)}function Ece(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Cce(t,e,n,r){if(e===null||typeof e>"u"||Ece(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bi(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Gs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gs[t]=new Bi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gs[e]=new Bi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gs[t]=new Bi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gs[t]=new Bi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gs[t]=new Bi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gs[t]=new Bi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gs[t]=new Bi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gs[t]=new Bi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gs[t]=new Bi(t,5,!1,t.toLowerCase(),null,!1,!1)});var A5=/[\-:]([a-z])/g;function S5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(A5,S5);Gs[e]=new Bi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(A5,S5);Gs[e]=new Bi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(A5,S5);Gs[e]=new Bi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gs[t]=new Bi(t,1,!1,t.toLowerCase(),null,!1,!1)});Gs.xlinkHref=new Bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gs[t]=new Bi(t,1,!1,t.toLowerCase(),null,!0,!0)});function x5(t,e,n,r){var s=Gs.hasOwnProperty(e)?Gs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cce(e,n,s,r)&&(n=null),r||s===null?vce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rd=wce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z1=Symbol.for("react.element"),By=Symbol.for("react.portal"),$y=Symbol.for("react.fragment"),I5=Symbol.for("react.strict_mode"),W2=Symbol.for("react.profiler"),YH=Symbol.for("react.provider"),QH=Symbol.for("react.context"),N5=Symbol.for("react.forward_ref"),z2=Symbol.for("react.suspense"),H2=Symbol.for("react.suspense_list"),T5=Symbol.for("react.memo"),uh=Symbol.for("react.lazy"),JH=Symbol.for("react.offscreen"),k$=Symbol.iterator;function rv(t){return t===null||typeof t!="object"?null:(t=k$&&t[k$]||t["@@iterator"],typeof t=="function"?t:null)}var _r=Object.assign,TR;function Bv(t){if(TR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);TR=e&&e[1]||""}return`
`+TR+t}var RR=!1;function PR(t,e){if(!t||RR)return"";RR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{RR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bv(t):""}function _ce(t){switch(t.tag){case 5:return Bv(t.type);case 16:return Bv("Lazy");case 13:return Bv("Suspense");case 19:return Bv("SuspenseList");case 0:case 2:case 15:return t=PR(t.type,!1),t;case 11:return t=PR(t.type.render,!1),t;case 1:return t=PR(t.type,!0),t;default:return""}}function G2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $y:return"Fragment";case By:return"Portal";case W2:return"Profiler";case I5:return"StrictMode";case z2:return"Suspense";case H2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QH:return(t.displayName||"Context")+".Consumer";case YH:return(t._context.displayName||"Context")+".Provider";case N5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T5:return e=t.displayName||null,e!==null?e:G2(t.type)||"Memo";case uh:e=t._payload,t=t._init;try{return G2(t(e))}catch{}}return null}function Ace(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G2(e);case 8:return e===I5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ZH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Sce(t){var e=ZH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function X1(t){t._valueTracker||(t._valueTracker=Sce(t))}function XH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ZH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ax(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function q2(t,e){var n=e.checked;return _r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function D$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eG(t,e){e=e.checked,e!=null&&x5(t,"checked",e,!1)}function V2(t,e){eG(t,e);var n=Rf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?K2(t,e.type,n):e.hasOwnProperty("defaultValue")&&K2(t,e.type,Rf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function M$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function K2(t,e,n){(e!=="number"||Ax(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $v=Array.isArray;function l0(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rf(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Y2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return _r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if($v(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rf(n)}}function tG(t,e){var n=Rf(e.value),r=Rf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function U$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nG(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nG(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eA,rG=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eA=eA||document.createElement("div"),eA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eA.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function eC(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xce=["Webkit","ms","Moz","O"];Object.keys(fE).forEach(function(t){xce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fE[e]=fE[t]})});function sG(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fE.hasOwnProperty(t)&&fE[t]?(""+e).trim():e+"px"}function iG(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sG(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Ice=_r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function J2(t,e){if(e){if(Ice[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function Z2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X2=null;function R5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ek=null,u0=null,d0=null;function B$(t){if(t=e1(t)){if(typeof ek!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=_N(e),ek(t.stateNode,t.type,e))}}function oG(t){u0?d0?d0.push(t):d0=[t]:u0=t}function aG(){if(u0){var t=u0,e=d0;if(d0=u0=null,B$(t),e)for(t=0;t<e.length;t++)B$(e[t])}}function cG(t,e){return t(e)}function lG(){}var OR=!1;function uG(t,e,n){if(OR)return t(e,n);OR=!0;try{return cG(t,e,n)}finally{OR=!1,(u0!==null||d0!==null)&&(lG(),aG())}}function tC(t,e){var n=t.stateNode;if(n===null)return null;var r=_N(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var tk=!1;if(wd)try{var sv={};Object.defineProperty(sv,"passive",{get:function(){tk=!0}}),window.addEventListener("test",sv,sv),window.removeEventListener("test",sv,sv)}catch{tk=!1}function Nce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var pE=!1,Sx=null,xx=!1,nk=null,Tce={onError:function(t){pE=!0,Sx=t}};function Rce(t,e,n,r,s,i,o,a,c){pE=!1,Sx=null,Nce.apply(Tce,arguments)}function Pce(t,e,n,r,s,i,o,a,c){if(Rce.apply(this,arguments),pE){if(pE){var l=Sx;pE=!1,Sx=null}else throw Error(Ee(198));xx||(xx=!0,nk=l)}}function _m(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function dG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $$(t){if(_m(t)!==t)throw Error(Ee(188))}function Oce(t){var e=t.alternate;if(!e){if(e=_m(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return $$(s),t;if(i===r)return $$(s),e;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function hG(t){return t=Oce(t),t!==null?fG(t):null}function fG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fG(t);if(e!==null)return e;t=t.sibling}return null}var pG=ca.unstable_scheduleCallback,F$=ca.unstable_cancelCallback,kce=ca.unstable_shouldYield,Dce=ca.unstable_requestPaint,Ur=ca.unstable_now,Mce=ca.unstable_getCurrentPriorityLevel,P5=ca.unstable_ImmediatePriority,gG=ca.unstable_UserBlockingPriority,Ix=ca.unstable_NormalPriority,Lce=ca.unstable_LowPriority,mG=ca.unstable_IdlePriority,bN=null,ql=null;function Uce(t){if(ql&&typeof ql.onCommitFiberRoot=="function")try{ql.onCommitFiberRoot(bN,t,void 0,(t.current.flags&128)===128)}catch{}}var zc=Math.clz32?Math.clz32:Fce,Bce=Math.log,$ce=Math.LN2;function Fce(t){return t>>>=0,t===0?32:31-(Bce(t)/$ce|0)|0}var tA=64,nA=4194304;function Fv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Fv(a):(i&=o,i!==0&&(r=Fv(i)))}else o=n&~s,o!==0?r=Fv(o):i!==0&&(r=Fv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zc(e),s=1<<n,r|=t[n],e&=~s;return r}function jce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wce(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-zc(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=jce(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function rk(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yG(){var t=tA;return tA<<=1,!(tA&4194240)&&(tA=64),t}function kR(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Z_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zc(e),t[e]=n}function zce(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-zc(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function O5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zc(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Dn=0;function wG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bG,k5,vG,EG,CG,sk=!1,rA=[],af=null,cf=null,lf=null,nC=new Map,rC=new Map,mh=[],Hce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j$(t,e){switch(t){case"focusin":case"focusout":af=null;break;case"dragenter":case"dragleave":cf=null;break;case"mouseover":case"mouseout":lf=null;break;case"pointerover":case"pointerout":nC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rC.delete(e.pointerId)}}function iv(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=e1(e),e!==null&&k5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Gce(t,e,n,r,s){switch(e){case"focusin":return af=iv(af,t,e,n,r,s),!0;case"dragenter":return cf=iv(cf,t,e,n,r,s),!0;case"mouseover":return lf=iv(lf,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return nC.set(i,iv(nC.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,rC.set(i,iv(rC.get(i)||null,t,e,n,r,s)),!0}return!1}function _G(t){var e=Fp(t.target);if(e!==null){var n=_m(e);if(n!==null){if(e=n.tag,e===13){if(e=dG(n),e!==null){t.blockedOn=e,CG(t.priority,function(){vG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ik(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);X2=r,n.target.dispatchEvent(r),X2=null}else return e=e1(n),e!==null&&k5(e),t.blockedOn=n,!1;e.shift()}return!0}function W$(t,e,n){mS(t)&&n.delete(e)}function qce(){sk=!1,af!==null&&mS(af)&&(af=null),cf!==null&&mS(cf)&&(cf=null),lf!==null&&mS(lf)&&(lf=null),nC.forEach(W$),rC.forEach(W$)}function ov(t,e){t.blockedOn===e&&(t.blockedOn=null,sk||(sk=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,qce)))}function sC(t){function e(s){return ov(s,t)}if(0<rA.length){ov(rA[0],t);for(var n=1;n<rA.length;n++){var r=rA[n];r.blockedOn===t&&(r.blockedOn=null)}}for(af!==null&&ov(af,t),cf!==null&&ov(cf,t),lf!==null&&ov(lf,t),nC.forEach(e),rC.forEach(e),n=0;n<mh.length;n++)r=mh[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<mh.length&&(n=mh[0],n.blockedOn===null);)_G(n),n.blockedOn===null&&mh.shift()}var h0=Rd.ReactCurrentBatchConfig,Tx=!0;function Vce(t,e,n,r){var s=Dn,i=h0.transition;h0.transition=null;try{Dn=1,D5(t,e,n,r)}finally{Dn=s,h0.transition=i}}function Kce(t,e,n,r){var s=Dn,i=h0.transition;h0.transition=null;try{Dn=4,D5(t,e,n,r)}finally{Dn=s,h0.transition=i}}function D5(t,e,n,r){if(Tx){var s=ik(t,e,n,r);if(s===null)zR(t,e,r,Rx,n),j$(t,r);else if(Gce(s,t,e,n,r))r.stopPropagation();else if(j$(t,r),e&4&&-1<Hce.indexOf(t)){for(;s!==null;){var i=e1(s);if(i!==null&&bG(i),i=ik(t,e,n,r),i===null&&zR(t,e,r,Rx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else zR(t,e,r,null,n)}}var Rx=null;function ik(t,e,n,r){if(Rx=null,t=R5(r),t=Fp(t),t!==null)if(e=_m(t),e===null)t=null;else if(n=e.tag,n===13){if(t=dG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rx=t,null}function AG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mce()){case P5:return 1;case gG:return 4;case Ix:case Lce:return 16;case mG:return 536870912;default:return 16}default:return 16}}var Kh=null,M5=null,yS=null;function SG(){if(yS)return yS;var t,e=M5,n=e.length,r,s="value"in Kh?Kh.value:Kh.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return yS=s.slice(t,1<r?1-r:void 0)}function wS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sA(){return!0}function z$(){return!1}function ha(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?sA:z$,this.isPropagationStopped=z$,this}return _r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sA)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sA)},persist:function(){},isPersistent:sA}),e}var _b={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L5=ha(_b),X_=_r({},_b,{view:0,detail:0}),Yce=ha(X_),DR,MR,av,vN=_r({},X_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==av&&(av&&t.type==="mousemove"?(DR=t.screenX-av.screenX,MR=t.screenY-av.screenY):MR=DR=0,av=t),DR)},movementY:function(t){return"movementY"in t?t.movementY:MR}}),H$=ha(vN),Qce=_r({},vN,{dataTransfer:0}),Jce=ha(Qce),Zce=_r({},X_,{relatedTarget:0}),LR=ha(Zce),Xce=_r({},_b,{animationName:0,elapsedTime:0,pseudoElement:0}),ele=ha(Xce),tle=_r({},_b,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nle=ha(tle),rle=_r({},_b,{data:0}),G$=ha(rle),sle={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ile={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ole={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ale(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ole[t])?!!e[t]:!1}function U5(){return ale}var cle=_r({},X_,{key:function(t){if(t.key){var e=sle[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ile[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U5,charCode:function(t){return t.type==="keypress"?wS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lle=ha(cle),ule=_r({},vN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),q$=ha(ule),dle=_r({},X_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U5}),hle=ha(dle),fle=_r({},_b,{propertyName:0,elapsedTime:0,pseudoElement:0}),ple=ha(fle),gle=_r({},vN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mle=ha(gle),yle=[9,13,27,32],B5=wd&&"CompositionEvent"in window,gE=null;wd&&"documentMode"in document&&(gE=document.documentMode);var wle=wd&&"TextEvent"in window&&!gE,xG=wd&&(!B5||gE&&8<gE&&11>=gE),V$=" ",K$=!1;function IG(t,e){switch(t){case"keyup":return yle.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function NG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fy=!1;function ble(t,e){switch(t){case"compositionend":return NG(e);case"keypress":return e.which!==32?null:(K$=!0,V$);case"textInput":return t=e.data,t===V$&&K$?null:t;default:return null}}function vle(t,e){if(Fy)return t==="compositionend"||!B5&&IG(t,e)?(t=SG(),yS=M5=Kh=null,Fy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xG&&e.locale!=="ko"?null:e.data;default:return null}}var Ele={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Y$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ele[t.type]:e==="textarea"}function TG(t,e,n,r){oG(r),e=Px(e,"onChange"),0<e.length&&(n=new L5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var mE=null,iC=null;function Cle(t){FG(t,0)}function EN(t){var e=zy(t);if(XH(e))return t}function _le(t,e){if(t==="change")return e}var RG=!1;if(wd){var UR;if(wd){var BR="oninput"in document;if(!BR){var Q$=document.createElement("div");Q$.setAttribute("oninput","return;"),BR=typeof Q$.oninput=="function"}UR=BR}else UR=!1;RG=UR&&(!document.documentMode||9<document.documentMode)}function J$(){mE&&(mE.detachEvent("onpropertychange",PG),iC=mE=null)}function PG(t){if(t.propertyName==="value"&&EN(iC)){var e=[];TG(e,iC,t,R5(t)),uG(Cle,e)}}function Ale(t,e,n){t==="focusin"?(J$(),mE=e,iC=n,mE.attachEvent("onpropertychange",PG)):t==="focusout"&&J$()}function Sle(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return EN(iC)}function xle(t,e){if(t==="click")return EN(e)}function Ile(t,e){if(t==="input"||t==="change")return EN(e)}function Nle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vc=typeof Object.is=="function"?Object.is:Nle;function oC(t,e){if(Vc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!j2.call(e,s)||!Vc(t[s],e[s]))return!1}return!0}function Z$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X$(t,e){var n=Z$(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z$(n)}}function OG(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?OG(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kG(){for(var t=window,e=Ax();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ax(t.document)}return e}function $5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Tle(t){var e=kG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&OG(n.ownerDocument.documentElement,n)){if(r!==null&&$5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=X$(n,i);var o=X$(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rle=wd&&"documentMode"in document&&11>=document.documentMode,jy=null,ok=null,yE=null,ak=!1;function e6(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ak||jy==null||jy!==Ax(r)||(r=jy,"selectionStart"in r&&$5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yE&&oC(yE,r)||(yE=r,r=Px(ok,"onSelect"),0<r.length&&(e=new L5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jy)))}function iA(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wy={animationend:iA("Animation","AnimationEnd"),animationiteration:iA("Animation","AnimationIteration"),animationstart:iA("Animation","AnimationStart"),transitionend:iA("Transition","TransitionEnd")},$R={},DG={};wd&&(DG=document.createElement("div").style,"AnimationEvent"in window||(delete Wy.animationend.animation,delete Wy.animationiteration.animation,delete Wy.animationstart.animation),"TransitionEvent"in window||delete Wy.transitionend.transition);function CN(t){if($R[t])return $R[t];if(!Wy[t])return t;var e=Wy[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in DG)return $R[t]=e[n];return t}var MG=CN("animationend"),LG=CN("animationiteration"),UG=CN("animationstart"),BG=CN("transitionend"),$G=new Map,t6="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hf(t,e){$G.set(t,e),Cm(e,[t])}for(var FR=0;FR<t6.length;FR++){var jR=t6[FR],Ple=jR.toLowerCase(),Ole=jR[0].toUpperCase()+jR.slice(1);Hf(Ple,"on"+Ole)}Hf(MG,"onAnimationEnd");Hf(LG,"onAnimationIteration");Hf(UG,"onAnimationStart");Hf("dblclick","onDoubleClick");Hf("focusin","onFocus");Hf("focusout","onBlur");Hf(BG,"onTransitionEnd");Tw("onMouseEnter",["mouseout","mouseover"]);Tw("onMouseLeave",["mouseout","mouseover"]);Tw("onPointerEnter",["pointerout","pointerover"]);Tw("onPointerLeave",["pointerout","pointerover"]);Cm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cm("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kle=new Set("cancel close invalid load scroll toggle".split(" ").concat(jv));function n6(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Pce(r,e,void 0,t),t.currentTarget=null}function FG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;n6(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;n6(s,a,l),i=c}}}if(xx)throw t=nk,xx=!1,nk=null,t}function ir(t,e){var n=e[hk];n===void 0&&(n=e[hk]=new Set);var r=t+"__bubble";n.has(r)||(jG(e,t,2,!1),n.add(r))}function WR(t,e,n){var r=0;e&&(r|=4),jG(n,t,r,e)}var oA="_reactListening"+Math.random().toString(36).slice(2);function aC(t){if(!t[oA]){t[oA]=!0,KH.forEach(function(n){n!=="selectionchange"&&(kle.has(n)||WR(n,!1,t),WR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oA]||(e[oA]=!0,WR("selectionchange",!1,e))}}function jG(t,e,n,r){switch(AG(e)){case 1:var s=Vce;break;case 4:s=Kce;break;default:s=D5}n=s.bind(null,e,n,t),s=void 0,!tk||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function zR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Fp(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}uG(function(){var l=i,u=R5(n),d=[];e:{var h=$G.get(t);if(h!==void 0){var f=L5,p=t;switch(t){case"keypress":if(wS(n)===0)break e;case"keydown":case"keyup":f=lle;break;case"focusin":p="focus",f=LR;break;case"focusout":p="blur",f=LR;break;case"beforeblur":case"afterblur":f=LR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=H$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Jce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=hle;break;case MG:case LG:case UG:f=ele;break;case BG:f=ple;break;case"scroll":f=Yce;break;case"wheel":f=mle;break;case"copy":case"cut":case"paste":f=nle;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=q$}var g=(e&4)!==0,w=!g&&t==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,y!==null&&(A=tC(b,y),A!=null&&g.push(cC(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==X2&&(p=n.relatedTarget||n.fromElement)&&(Fp(p)||p[bd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Fp(p):null,p!==null&&(w=_m(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=H$,A="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=q$,A="onPointerLeave",y="onPointerEnter",b="pointer"),w=f==null?h:zy(f),v=p==null?h:zy(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,Fp(u)===l&&(g=new g(y,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,y=p,b=0,v=g;v;v=Jm(v))b++;for(v=0,A=y;A;A=Jm(A))v++;for(;0<b-v;)g=Jm(g),b--;for(;0<v-b;)y=Jm(y),v--;for(;b--;){if(g===y||y!==null&&g===y.alternate)break t;g=Jm(g),y=Jm(y)}g=null}else g=null;f!==null&&r6(d,h,f,g,!1),p!==null&&w!==null&&r6(d,w,p,g,!0)}}e:{if(h=l?zy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=_le;else if(Y$(h))if(RG)C=Ile;else{C=Sle;var N=Ale}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=xle);if(C&&(C=C(t,l))){TG(d,C,n,u);break e}N&&N(t,h,l),t==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&K2(h,"number",h.value)}switch(N=l?zy(l):window,t){case"focusin":(Y$(N)||N.contentEditable==="true")&&(jy=N,ok=l,yE=null);break;case"focusout":yE=ok=jy=null;break;case"mousedown":ak=!0;break;case"contextmenu":case"mouseup":case"dragend":ak=!1,e6(d,n,u);break;case"selectionchange":if(Rle)break;case"keydown":case"keyup":e6(d,n,u)}var x;if(B5)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Fy?IG(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(xG&&n.locale!=="ko"&&(Fy||T!=="onCompositionStart"?T==="onCompositionEnd"&&Fy&&(x=SG()):(Kh=u,M5="value"in Kh?Kh.value:Kh.textContent,Fy=!0)),N=Px(l,T),0<N.length&&(T=new G$(T,t,null,n,u),d.push({event:T,listeners:N}),x?T.data=x:(x=NG(n),x!==null&&(T.data=x)))),(x=wle?ble(t,n):vle(t,n))&&(l=Px(l,"onBeforeInput"),0<l.length&&(u=new G$("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}FG(d,e)})}function cC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Px(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=tC(t,n),i!=null&&r.unshift(cC(t,i,s)),i=tC(t,e),i!=null&&r.push(cC(t,i,s))),t=t.return}return r}function Jm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function r6(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=tC(n,i),c!=null&&o.unshift(cC(n,c,a))):s||(c=tC(n,i),c!=null&&o.push(cC(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Dle=/\r\n?/g,Mle=/\u0000|\uFFFD/g;function s6(t){return(typeof t=="string"?t:""+t).replace(Dle,`
`).replace(Mle,"")}function aA(t,e,n){if(e=s6(e),s6(t)!==e&&n)throw Error(Ee(425))}function Ox(){}var ck=null,lk=null;function uk(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dk=typeof setTimeout=="function"?setTimeout:void 0,Lle=typeof clearTimeout=="function"?clearTimeout:void 0,i6=typeof Promise=="function"?Promise:void 0,Ule=typeof queueMicrotask=="function"?queueMicrotask:typeof i6<"u"?function(t){return i6.resolve(null).then(t).catch(Ble)}:dk;function Ble(t){setTimeout(function(){throw t})}function HR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),sC(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);sC(e)}function uf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function o6(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ab=Math.random().toString(36).slice(2),Ul="__reactFiber$"+Ab,lC="__reactProps$"+Ab,bd="__reactContainer$"+Ab,hk="__reactEvents$"+Ab,$le="__reactListeners$"+Ab,Fle="__reactHandles$"+Ab;function Fp(t){var e=t[Ul];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bd]||n[Ul]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=o6(t);t!==null;){if(n=t[Ul])return n;t=o6(t)}return e}t=n,n=t.parentNode}return null}function e1(t){return t=t[Ul]||t[bd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function _N(t){return t[lC]||null}var fk=[],Hy=-1;function Gf(t){return{current:t}}function cr(t){0>Hy||(t.current=fk[Hy],fk[Hy]=null,Hy--)}function rr(t,e){Hy++,fk[Hy]=t.current,t.current=e}var Pf={},di=Gf(Pf),Co=Gf(!1),Hg=Pf;function Rw(t,e){var n=t.type.contextTypes;if(!n)return Pf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _o(t){return t=t.childContextTypes,t!=null}function kx(){cr(Co),cr(di)}function a6(t,e,n){if(di.current!==Pf)throw Error(Ee(168));rr(di,e),rr(Co,n)}function WG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ee(108,Ace(t)||"Unknown",s));return _r({},n,r)}function Dx(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pf,Hg=di.current,rr(di,t),rr(Co,Co.current),!0}function c6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=WG(t,e,Hg),r.__reactInternalMemoizedMergedChildContext=t,cr(Co),cr(di),rr(di,t)):cr(Co),rr(Co,n)}var Ou=null,AN=!1,GR=!1;function zG(t){Ou===null?Ou=[t]:Ou.push(t)}function jle(t){AN=!0,zG(t)}function qf(){if(!GR&&Ou!==null){GR=!0;var t=0,e=Dn;try{var n=Ou;for(Dn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ou=null,AN=!1}catch(s){throw Ou!==null&&(Ou=Ou.slice(t+1)),pG(P5,qf),s}finally{Dn=e,GR=!1}}return null}var Gy=[],qy=0,Mx=null,Lx=0,ja=[],Wa=0,Gg=null,Xu=1,ed="";function vp(t,e){Gy[qy++]=Lx,Gy[qy++]=Mx,Mx=t,Lx=e}function HG(t,e,n){ja[Wa++]=Xu,ja[Wa++]=ed,ja[Wa++]=Gg,Gg=t;var r=Xu;t=ed;var s=32-zc(r)-1;r&=~(1<<s),n+=1;var i=32-zc(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xu=1<<32-zc(e)+s|n<<s|r,ed=i+t}else Xu=1<<i|n<<s|r,ed=t}function F5(t){t.return!==null&&(vp(t,1),HG(t,1,0))}function j5(t){for(;t===Mx;)Mx=Gy[--qy],Gy[qy]=null,Lx=Gy[--qy],Gy[qy]=null;for(;t===Gg;)Gg=ja[--Wa],ja[Wa]=null,ed=ja[--Wa],ja[Wa]=null,Xu=ja[--Wa],ja[Wa]=null}var ia=null,na=null,hr=!1,Rc=null;function GG(t,e){var n=za(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function l6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ia=t,na=uf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ia=t,na=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gg!==null?{id:Xu,overflow:ed}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=za(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ia=t,na=null,!0):!1;default:return!1}}function pk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gk(t){if(hr){var e=na;if(e){var n=e;if(!l6(t,e)){if(pk(t))throw Error(Ee(418));e=uf(n.nextSibling);var r=ia;e&&l6(t,e)?GG(r,n):(t.flags=t.flags&-4097|2,hr=!1,ia=t)}}else{if(pk(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,hr=!1,ia=t}}}function u6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ia=t}function cA(t){if(t!==ia)return!1;if(!hr)return u6(t),hr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uk(t.type,t.memoizedProps)),e&&(e=na)){if(pk(t))throw qG(),Error(Ee(418));for(;e;)GG(t,e),e=uf(e.nextSibling)}if(u6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){na=uf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}na=null}}else na=ia?uf(t.stateNode.nextSibling):null;return!0}function qG(){for(var t=na;t;)t=uf(t.nextSibling)}function Pw(){na=ia=null,hr=!1}function W5(t){Rc===null?Rc=[t]:Rc.push(t)}var Wle=Rd.ReactCurrentBatchConfig;function cv(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function lA(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function d6(t){var e=t._init;return e(t._payload)}function VG(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=pf(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,A){return b===null||b.tag!==6?(b=ZR(v,y.mode,A),b.return=y,b):(b=s(b,v),b.return=y,b)}function c(y,b,v,A){var C=v.type;return C===$y?u(y,b,v.props.children,A,v.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===uh&&d6(C)===b.type)?(A=s(b,v.props),A.ref=cv(y,b,v),A.return=y,A):(A=SS(v.type,v.key,v.props,null,y.mode,A),A.ref=cv(y,b,v),A.return=y,A)}function l(y,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=XR(v,y.mode,A),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,A,C){return b===null||b.tag!==7?(b=Pg(v,y.mode,A,C),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ZR(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Z1:return v=SS(b.type,b.key,b.props,null,y.mode,v),v.ref=cv(y,null,b),v.return=y,v;case By:return b=XR(b,y.mode,v),b.return=y,b;case uh:var A=b._init;return d(y,A(b._payload),v)}if($v(b)||rv(b))return b=Pg(b,y.mode,v,null),b.return=y,b;lA(y,b)}return null}function h(y,b,v,A){var C=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(y,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Z1:return v.key===C?c(y,b,v,A):null;case By:return v.key===C?l(y,b,v,A):null;case uh:return C=v._init,h(y,b,C(v._payload),A)}if($v(v)||rv(v))return C!==null?null:u(y,b,v,A,null);lA(y,v)}return null}function f(y,b,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return y=y.get(v)||null,a(b,y,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Z1:return y=y.get(A.key===null?v:A.key)||null,c(b,y,A,C);case By:return y=y.get(A.key===null?v:A.key)||null,l(b,y,A,C);case uh:var N=A._init;return f(y,b,v,N(A._payload),C)}if($v(A)||rv(A))return y=y.get(v)||null,u(b,y,A,C,null);lA(b,A)}return null}function p(y,b,v,A){for(var C=null,N=null,x=b,T=b=0,S=null;x!==null&&T<v.length;T++){x.index>T?(S=x,x=null):S=x.sibling;var D=h(y,x,v[T],A);if(D===null){x===null&&(x=S);break}t&&x&&D.alternate===null&&e(y,x),b=i(D,b,T),N===null?C=D:N.sibling=D,N=D,x=S}if(T===v.length)return n(y,x),hr&&vp(y,T),C;if(x===null){for(;T<v.length;T++)x=d(y,v[T],A),x!==null&&(b=i(x,b,T),N===null?C=x:N.sibling=x,N=x);return hr&&vp(y,T),C}for(x=r(y,x);T<v.length;T++)S=f(x,y,T,v[T],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?T:S.key),b=i(S,b,T),N===null?C=S:N.sibling=S,N=S);return t&&x.forEach(function(O){return e(y,O)}),hr&&vp(y,T),C}function g(y,b,v,A){var C=rv(v);if(typeof C!="function")throw Error(Ee(150));if(v=C.call(v),v==null)throw Error(Ee(151));for(var N=C=null,x=b,T=b=0,S=null,D=v.next();x!==null&&!D.done;T++,D=v.next()){x.index>T?(S=x,x=null):S=x.sibling;var O=h(y,x,D.value,A);if(O===null){x===null&&(x=S);break}t&&x&&O.alternate===null&&e(y,x),b=i(O,b,T),N===null?C=O:N.sibling=O,N=O,x=S}if(D.done)return n(y,x),hr&&vp(y,T),C;if(x===null){for(;!D.done;T++,D=v.next())D=d(y,D.value,A),D!==null&&(b=i(D,b,T),N===null?C=D:N.sibling=D,N=D);return hr&&vp(y,T),C}for(x=r(y,x);!D.done;T++,D=v.next())D=f(x,y,T,D.value,A),D!==null&&(t&&D.alternate!==null&&x.delete(D.key===null?T:D.key),b=i(D,b,T),N===null?C=D:N.sibling=D,N=D);return t&&x.forEach(function($){return e(y,$)}),hr&&vp(y,T),C}function w(y,b,v,A){if(typeof v=="object"&&v!==null&&v.type===$y&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Z1:e:{for(var C=v.key,N=b;N!==null;){if(N.key===C){if(C=v.type,C===$y){if(N.tag===7){n(y,N.sibling),b=s(N,v.props.children),b.return=y,y=b;break e}}else if(N.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===uh&&d6(C)===N.type){n(y,N.sibling),b=s(N,v.props),b.ref=cv(y,N,v),b.return=y,y=b;break e}n(y,N);break}else e(y,N);N=N.sibling}v.type===$y?(b=Pg(v.props.children,y.mode,A,v.key),b.return=y,y=b):(A=SS(v.type,v.key,v.props,null,y.mode,A),A.ref=cv(y,b,v),A.return=y,y=A)}return o(y);case By:e:{for(N=v.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=XR(v,y.mode,A),b.return=y,y=b}return o(y);case uh:return N=v._init,w(y,b,N(v._payload),A)}if($v(v))return p(y,b,v,A);if(rv(v))return g(y,b,v,A);lA(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=ZR(v,y.mode,A),b.return=y,y=b),o(y)):n(y,b)}return w}var Ow=VG(!0),KG=VG(!1),Ux=Gf(null),Bx=null,Vy=null,z5=null;function H5(){z5=Vy=Bx=null}function G5(t){var e=Ux.current;cr(Ux),t._currentValue=e}function mk(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function f0(t,e){Bx=t,z5=Vy=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bo=!0),t.firstContext=null)}function Va(t){var e=t._currentValue;if(z5!==t)if(t={context:t,memoizedValue:e,next:null},Vy===null){if(Bx===null)throw Error(Ee(308));Vy=t,Bx.dependencies={lanes:0,firstContext:t}}else Vy=Vy.next=t;return e}var jp=null;function q5(t){jp===null?jp=[t]:jp.push(t)}function YG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,q5(e)):(n.next=s.next,s.next=n),e.interleaved=n,vd(t,r)}function vd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var dh=!1;function V5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ad(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function df(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,hn&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,vd(t,n)}return s=r.interleaved,s===null?(e.next=e,q5(r)):(e.next=s.next,s.next=e),r.interleaved=e,vd(t,n)}function bS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,O5(t,n)}}function h6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $x(t,e,n,r){var s=t.updateQueue;dh=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=_r({},d,h);break e;case 2:dh=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vg|=o,t.lanes=o,t.memoizedState=d}}function f6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var t1={},Vl=Gf(t1),uC=Gf(t1),dC=Gf(t1);function Wp(t){if(t===t1)throw Error(Ee(174));return t}function K5(t,e){switch(rr(dC,e),rr(uC,t),rr(Vl,t1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Q2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Q2(e,t)}cr(Vl),rr(Vl,e)}function kw(){cr(Vl),cr(uC),cr(dC)}function JG(t){Wp(dC.current);var e=Wp(Vl.current),n=Q2(e,t.type);e!==n&&(rr(uC,t),rr(Vl,n))}function Y5(t){uC.current===t&&(cr(Vl),cr(uC))}var wr=Gf(0);function Fx(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qR=[];function Q5(){for(var t=0;t<qR.length;t++)qR[t]._workInProgressVersionPrimary=null;qR.length=0}var vS=Rd.ReactCurrentDispatcher,VR=Rd.ReactCurrentBatchConfig,qg=0,Cr=null,Zr=null,gs=null,jx=!1,wE=!1,hC=0,zle=0;function Xs(){throw Error(Ee(321))}function J5(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vc(t[n],e[n]))return!1;return!0}function Z5(t,e,n,r,s,i){if(qg=i,Cr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vS.current=t===null||t.memoizedState===null?Vle:Kle,t=n(r,s),wE){i=0;do{if(wE=!1,hC=0,25<=i)throw Error(Ee(301));i+=1,gs=Zr=null,e.updateQueue=null,vS.current=Yle,t=n(r,s)}while(wE)}if(vS.current=Wx,e=Zr!==null&&Zr.next!==null,qg=0,gs=Zr=Cr=null,jx=!1,e)throw Error(Ee(300));return t}function X5(){var t=hC!==0;return hC=0,t}function gl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gs===null?Cr.memoizedState=gs=t:gs=gs.next=t,gs}function Ka(){if(Zr===null){var t=Cr.alternate;t=t!==null?t.memoizedState:null}else t=Zr.next;var e=gs===null?Cr.memoizedState:gs.next;if(e!==null)gs=e,Zr=t;else{if(t===null)throw Error(Ee(310));Zr=t,t={memoizedState:Zr.memoizedState,baseState:Zr.baseState,baseQueue:Zr.baseQueue,queue:Zr.queue,next:null},gs===null?Cr.memoizedState=gs=t:gs=gs.next=t}return gs}function fC(t,e){return typeof e=="function"?e(t):e}function KR(t){var e=Ka(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=Zr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((qg&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Cr.lanes|=u,Vg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Vc(r,e.memoizedState)||(bo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Cr.lanes|=i,Vg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function YR(t){var e=Ka(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Vc(i,e.memoizedState)||(bo=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function ZG(){}function XG(t,e){var n=Cr,r=Ka(),s=e(),i=!Vc(r.memoizedState,s);if(i&&(r.memoizedState=s,bo=!0),r=r.queue,eL(nq.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||gs!==null&&gs.memoizedState.tag&1){if(n.flags|=2048,pC(9,tq.bind(null,n,r,s,e),void 0,null),Ss===null)throw Error(Ee(349));qg&30||eq(n,e,s)}return s}function eq(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Cr.updateQueue,e===null?(e={lastEffect:null,stores:null},Cr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tq(t,e,n,r){e.value=n,e.getSnapshot=r,rq(e)&&sq(t)}function nq(t,e,n){return n(function(){rq(e)&&sq(t)})}function rq(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vc(t,n)}catch{return!0}}function sq(t){var e=vd(t,1);e!==null&&Hc(e,t,1,-1)}function p6(t){var e=gl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fC,lastRenderedState:t},e.queue=t,t=t.dispatch=qle.bind(null,Cr,t),[e.memoizedState,t]}function pC(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Cr.updateQueue,e===null?(e={lastEffect:null,stores:null},Cr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iq(){return Ka().memoizedState}function ES(t,e,n,r){var s=gl();Cr.flags|=t,s.memoizedState=pC(1|e,n,void 0,r===void 0?null:r)}function SN(t,e,n,r){var s=Ka();r=r===void 0?null:r;var i=void 0;if(Zr!==null){var o=Zr.memoizedState;if(i=o.destroy,r!==null&&J5(r,o.deps)){s.memoizedState=pC(e,n,i,r);return}}Cr.flags|=t,s.memoizedState=pC(1|e,n,i,r)}function g6(t,e){return ES(8390656,8,t,e)}function eL(t,e){return SN(2048,8,t,e)}function oq(t,e){return SN(4,2,t,e)}function aq(t,e){return SN(4,4,t,e)}function cq(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lq(t,e,n){return n=n!=null?n.concat([t]):null,SN(4,4,cq.bind(null,e,t),n)}function tL(){}function uq(t,e){var n=Ka();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J5(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function dq(t,e){var n=Ka();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J5(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hq(t,e,n){return qg&21?(Vc(n,e)||(n=yG(),Cr.lanes|=n,Vg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bo=!0),t.memoizedState=n)}function Hle(t,e){var n=Dn;Dn=n!==0&&4>n?n:4,t(!0);var r=VR.transition;VR.transition={};try{t(!1),e()}finally{Dn=n,VR.transition=r}}function fq(){return Ka().memoizedState}function Gle(t,e,n){var r=ff(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pq(t))gq(e,n);else if(n=YG(t,e,n,r),n!==null){var s=ki();Hc(n,t,r,s),mq(n,e,r)}}function qle(t,e,n){var r=ff(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pq(t))gq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Vc(a,o)){var c=e.interleaved;c===null?(s.next=s,q5(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=YG(t,e,s,r),n!==null&&(s=ki(),Hc(n,t,r,s),mq(n,e,r))}}function pq(t){var e=t.alternate;return t===Cr||e!==null&&e===Cr}function gq(t,e){wE=jx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,O5(t,n)}}var Wx={readContext:Va,useCallback:Xs,useContext:Xs,useEffect:Xs,useImperativeHandle:Xs,useInsertionEffect:Xs,useLayoutEffect:Xs,useMemo:Xs,useReducer:Xs,useRef:Xs,useState:Xs,useDebugValue:Xs,useDeferredValue:Xs,useTransition:Xs,useMutableSource:Xs,useSyncExternalStore:Xs,useId:Xs,unstable_isNewReconciler:!1},Vle={readContext:Va,useCallback:function(t,e){return gl().memoizedState=[t,e===void 0?null:e],t},useContext:Va,useEffect:g6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ES(4194308,4,cq.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ES(4194308,4,t,e)},useInsertionEffect:function(t,e){return ES(4,2,t,e)},useMemo:function(t,e){var n=gl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=gl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gle.bind(null,Cr,t),[r.memoizedState,t]},useRef:function(t){var e=gl();return t={current:t},e.memoizedState=t},useState:p6,useDebugValue:tL,useDeferredValue:function(t){return gl().memoizedState=t},useTransition:function(){var t=p6(!1),e=t[0];return t=Hle.bind(null,t[1]),gl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Cr,s=gl();if(hr){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),Ss===null)throw Error(Ee(349));qg&30||eq(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,g6(nq.bind(null,r,i,t),[t]),r.flags|=2048,pC(9,tq.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=gl(),e=Ss.identifierPrefix;if(hr){var n=ed,r=Xu;n=(r&~(1<<32-zc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hC++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zle++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Kle={readContext:Va,useCallback:uq,useContext:Va,useEffect:eL,useImperativeHandle:lq,useInsertionEffect:oq,useLayoutEffect:aq,useMemo:dq,useReducer:KR,useRef:iq,useState:function(){return KR(fC)},useDebugValue:tL,useDeferredValue:function(t){var e=Ka();return hq(e,Zr.memoizedState,t)},useTransition:function(){var t=KR(fC)[0],e=Ka().memoizedState;return[t,e]},useMutableSource:ZG,useSyncExternalStore:XG,useId:fq,unstable_isNewReconciler:!1},Yle={readContext:Va,useCallback:uq,useContext:Va,useEffect:eL,useImperativeHandle:lq,useInsertionEffect:oq,useLayoutEffect:aq,useMemo:dq,useReducer:YR,useRef:iq,useState:function(){return YR(fC)},useDebugValue:tL,useDeferredValue:function(t){var e=Ka();return Zr===null?e.memoizedState=t:hq(e,Zr.memoizedState,t)},useTransition:function(){var t=YR(fC)[0],e=Ka().memoizedState;return[t,e]},useMutableSource:ZG,useSyncExternalStore:XG,useId:fq,unstable_isNewReconciler:!1};function bc(t,e){if(t&&t.defaultProps){e=_r({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function yk(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_r({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xN={isMounted:function(t){return(t=t._reactInternals)?_m(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ki(),s=ff(t),i=ad(r,s);i.payload=e,n!=null&&(i.callback=n),e=df(t,i,s),e!==null&&(Hc(e,t,s,r),bS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ki(),s=ff(t),i=ad(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=df(t,i,s),e!==null&&(Hc(e,t,s,r),bS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ki(),r=ff(t),s=ad(n,r);s.tag=2,e!=null&&(s.callback=e),e=df(t,s,r),e!==null&&(Hc(e,t,r,n),bS(e,t,r))}};function m6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!oC(n,r)||!oC(s,i):!0}function yq(t,e,n){var r=!1,s=Pf,i=e.contextType;return typeof i=="object"&&i!==null?i=Va(i):(s=_o(e)?Hg:di.current,r=e.contextTypes,i=(r=r!=null)?Rw(t,s):Pf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function y6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xN.enqueueReplaceState(e,e.state,null)}function wk(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},V5(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Va(i):(i=_o(e)?Hg:di.current,s.context=Rw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yk(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&xN.enqueueReplaceState(s,s.state,null),$x(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Dw(t,e){try{var n="",r=e;do n+=_ce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function QR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Qle=typeof WeakMap=="function"?WeakMap:Map;function wq(t,e,n){n=ad(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hx||(Hx=!0,Tk=r),bk(t,e)},n}function bq(t,e,n){n=ad(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bk(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bk(t,e),typeof r!="function"&&(hf===null?hf=new Set([this]):hf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function w6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Qle;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=uue.bind(null,t,e,n),e.then(t,t))}function b6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function v6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ad(-1,1),e.tag=2,df(n,e,1))),n.lanes|=1),t)}var Jle=Rd.ReactCurrentOwner,bo=!1;function Ci(t,e,n,r){e.child=t===null?KG(e,null,n,r):Ow(e,t.child,n,r)}function E6(t,e,n,r,s){n=n.render;var i=e.ref;return f0(e,s),r=Z5(t,e,n,r,i,s),n=X5(),t!==null&&!bo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ed(t,e,s)):(hr&&n&&F5(e),e.flags|=1,Ci(t,e,r,s),e.child)}function C6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!lL(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vq(t,e,i,r,s)):(t=SS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:oC,n(o,r)&&t.ref===e.ref)return Ed(t,e,s)}return e.flags|=1,t=pf(i,r),t.ref=e.ref,t.return=e,e.child=t}function vq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(oC(i,r)&&t.ref===e.ref)if(bo=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(bo=!0);else return e.lanes=t.lanes,Ed(t,e,s)}return vk(t,e,n,r,s)}function Eq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(Yy,Jo),Jo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rr(Yy,Jo),Jo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,rr(Yy,Jo),Jo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,rr(Yy,Jo),Jo|=r;return Ci(t,e,s,n),e.child}function Cq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vk(t,e,n,r,s){var i=_o(n)?Hg:di.current;return i=Rw(e,i),f0(e,s),n=Z5(t,e,n,r,i,s),r=X5(),t!==null&&!bo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ed(t,e,s)):(hr&&r&&F5(e),e.flags|=1,Ci(t,e,n,s),e.child)}function _6(t,e,n,r,s){if(_o(n)){var i=!0;Dx(e)}else i=!1;if(f0(e,s),e.stateNode===null)CS(t,e),yq(e,n,r),wk(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Va(l):(l=_o(n)?Hg:di.current,l=Rw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&y6(e,o,r,l),dh=!1;var h=e.memoizedState;o.state=h,$x(e,r,o,s),c=e.memoizedState,a!==r||h!==c||Co.current||dh?(typeof u=="function"&&(yk(e,n,u,r),c=e.memoizedState),(a=dh||m6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:bc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Va(c):(c=_o(n)?Hg:di.current,c=Rw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&y6(e,o,r,c),dh=!1,h=e.memoizedState,o.state=h,$x(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||Co.current||dh?(typeof f=="function"&&(yk(e,n,f,r),p=e.memoizedState),(l=dh||m6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Ek(t,e,n,r,i,s)}function Ek(t,e,n,r,s,i){Cq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&c6(e,n,!1),Ed(t,e,i);r=e.stateNode,Jle.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ow(e,t.child,null,i),e.child=Ow(e,null,a,i)):Ci(t,e,a,i),e.memoizedState=r.state,s&&c6(e,n,!0),e.child}function _q(t){var e=t.stateNode;e.pendingContext?a6(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a6(t,e.context,!1),K5(t,e.containerInfo)}function A6(t,e,n,r,s){return Pw(),W5(s),e.flags|=256,Ci(t,e,n,r),e.child}var Ck={dehydrated:null,treeContext:null,retryLane:0};function _k(t){return{baseLanes:t,cachePool:null,transitions:null}}function Aq(t,e,n){var r=e.pendingProps,s=wr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),rr(wr,s&1),t===null)return gk(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=TN(o,r,0,null),t=Pg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_k(n),e.memoizedState=Ck,t):nL(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Zle(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=pf(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=pf(a,i):(i=Pg(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_k(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Ck,r}return i=t.child,t=i.sibling,r=pf(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nL(t,e){return e=TN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uA(t,e,n,r){return r!==null&&W5(r),Ow(e,t.child,null,n),t=nL(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zle(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=QR(Error(Ee(422))),uA(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=TN({mode:"visible",children:r.children},s,0,null),i=Pg(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ow(e,t.child,null,o),e.child.memoizedState=_k(o),e.memoizedState=Ck,i);if(!(e.mode&1))return uA(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=QR(i,r,void 0),uA(t,e,o,r)}if(a=(o&t.childLanes)!==0,bo||a){if(r=Ss,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,vd(t,s),Hc(r,t,s,-1))}return cL(),r=QR(Error(Ee(421))),uA(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=due.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,na=uf(s.nextSibling),ia=e,hr=!0,Rc=null,t!==null&&(ja[Wa++]=Xu,ja[Wa++]=ed,ja[Wa++]=Gg,Xu=t.id,ed=t.overflow,Gg=e),e=nL(e,r.children),e.flags|=4096,e)}function S6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mk(t.return,e,n)}function JR(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Sq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ci(t,e,r.children,n),r=wr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&S6(t,n,e);else if(t.tag===19)S6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rr(wr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Fx(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),JR(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Fx(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}JR(e,!0,n,null,i);break;case"together":JR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function CS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ed(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=pf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Xle(t,e,n){switch(e.tag){case 3:_q(e),Pw();break;case 5:JG(e);break;case 1:_o(e.type)&&Dx(e);break;case 4:K5(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;rr(Ux,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rr(wr,wr.current&1),e.flags|=128,null):n&e.child.childLanes?Aq(t,e,n):(rr(wr,wr.current&1),t=Ed(t,e,n),t!==null?t.sibling:null);rr(wr,wr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rr(wr,wr.current),r)break;return null;case 22:case 23:return e.lanes=0,Eq(t,e,n)}return Ed(t,e,n)}var xq,Ak,Iq,Nq;xq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ak=function(){};Iq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Wp(Vl.current);var i=null;switch(n){case"input":s=q2(t,s),r=q2(t,r),i=[];break;case"select":s=_r({},s,{value:void 0}),r=_r({},r,{value:void 0}),i=[];break;case"textarea":s=Y2(t,s),r=Y2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ox)}J2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(XE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(XE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&ir("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};Nq=function(t,e,n,r){n!==r&&(e.flags|=4)};function lv(t,e){if(!hr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ei(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function eue(t,e,n){var r=e.pendingProps;switch(j5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(e),null;case 1:return _o(e.type)&&kx(),ei(e),null;case 3:return r=e.stateNode,kw(),cr(Co),cr(di),Q5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(cA(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rc!==null&&(Ok(Rc),Rc=null))),Ak(t,e),ei(e),null;case 5:Y5(e);var s=Wp(dC.current);if(n=e.type,t!==null&&e.stateNode!=null)Iq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return ei(e),null}if(t=Wp(Vl.current),cA(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Ul]=e,r[lC]=i,t=(e.mode&1)!==0,n){case"dialog":ir("cancel",r),ir("close",r);break;case"iframe":case"object":case"embed":ir("load",r);break;case"video":case"audio":for(s=0;s<jv.length;s++)ir(jv[s],r);break;case"source":ir("error",r);break;case"img":case"image":case"link":ir("error",r),ir("load",r);break;case"details":ir("toggle",r);break;case"input":D$(r,i),ir("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ir("invalid",r);break;case"textarea":L$(r,i),ir("invalid",r)}J2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&aA(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&aA(r.textContent,a,t),s=["children",""+a]):XE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ir("scroll",r)}switch(n){case"input":X1(r),M$(r,i,!0);break;case"textarea":X1(r),U$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ox)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nG(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Ul]=e,t[lC]=r,xq(t,e,!1,!1),e.stateNode=t;e:{switch(o=Z2(n,r),n){case"dialog":ir("cancel",t),ir("close",t),s=r;break;case"iframe":case"object":case"embed":ir("load",t),s=r;break;case"video":case"audio":for(s=0;s<jv.length;s++)ir(jv[s],t);s=r;break;case"source":ir("error",t),s=r;break;case"img":case"image":case"link":ir("error",t),ir("load",t),s=r;break;case"details":ir("toggle",t),s=r;break;case"input":D$(t,r),s=q2(t,r),ir("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=_r({},r,{value:void 0}),ir("invalid",t);break;case"textarea":L$(t,r),s=Y2(t,r),ir("invalid",t);break;default:s=r}J2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?iG(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&rG(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&eC(t,c):typeof c=="number"&&eC(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(XE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ir("scroll",t):c!=null&&x5(t,i,c,o))}switch(n){case"input":X1(t),M$(t,r,!1);break;case"textarea":X1(t),U$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rf(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?l0(t,!!r.multiple,i,!1):r.defaultValue!=null&&l0(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ox)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ei(e),null;case 6:if(t&&e.stateNode!=null)Nq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=Wp(dC.current),Wp(Vl.current),cA(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ul]=e,(i=r.nodeValue!==n)&&(t=ia,t!==null))switch(t.tag){case 3:aA(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&aA(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ul]=e,e.stateNode=r}return ei(e),null;case 13:if(cr(wr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(hr&&na!==null&&e.mode&1&&!(e.flags&128))qG(),Pw(),e.flags|=98560,i=!1;else if(i=cA(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[Ul]=e}else Pw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ei(e),i=!1}else Rc!==null&&(Ok(Rc),Rc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||wr.current&1?rs===0&&(rs=3):cL())),e.updateQueue!==null&&(e.flags|=4),ei(e),null);case 4:return kw(),Ak(t,e),t===null&&aC(e.stateNode.containerInfo),ei(e),null;case 10:return G5(e.type._context),ei(e),null;case 17:return _o(e.type)&&kx(),ei(e),null;case 19:if(cr(wr),i=e.memoizedState,i===null)return ei(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)lv(i,!1);else{if(rs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fx(t),o!==null){for(e.flags|=128,lv(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rr(wr,wr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ur()>Mw&&(e.flags|=128,r=!0,lv(i,!1),e.lanes=4194304)}else{if(!r)if(t=Fx(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),lv(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!hr)return ei(e),null}else 2*Ur()-i.renderingStartTime>Mw&&n!==1073741824&&(e.flags|=128,r=!0,lv(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ur(),e.sibling=null,n=wr.current,rr(wr,r?n&1|2:n&1),e):(ei(e),null);case 22:case 23:return aL(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jo&1073741824&&(ei(e),e.subtreeFlags&6&&(e.flags|=8192)):ei(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function tue(t,e){switch(j5(e),e.tag){case 1:return _o(e.type)&&kx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return kw(),cr(Co),cr(di),Q5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Y5(e),null;case 13:if(cr(wr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Pw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return cr(wr),null;case 4:return kw(),null;case 10:return G5(e.type._context),null;case 22:case 23:return aL(),null;case 24:return null;default:return null}}var dA=!1,li=!1,nue=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Ky(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tr(t,e,r)}else n.current=null}function Sk(t,e,n){try{n()}catch(r){Tr(t,e,r)}}var x6=!1;function rue(t,e){if(ck=Tx,t=kG(),$5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lk={focusedElem:t,selectionRange:n},Tx=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:bc(e.type,g),w);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(A){Tr(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return p=x6,x6=!1,p}function bE(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Sk(e,n,i)}s=s.next}while(s!==r)}}function IN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function xk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Tq(t){var e=t.alternate;e!==null&&(t.alternate=null,Tq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ul],delete e[lC],delete e[hk],delete e[$le],delete e[Fle])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rq(t){return t.tag===5||t.tag===3||t.tag===4}function I6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ik(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ox));else if(r!==4&&(t=t.child,t!==null))for(Ik(t,e,n),t=t.sibling;t!==null;)Ik(t,e,n),t=t.sibling}function Nk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nk(t,e,n),t=t.sibling;t!==null;)Nk(t,e,n),t=t.sibling}var Ls=null,Tc=!1;function Fd(t,e,n){for(n=n.child;n!==null;)Pq(t,e,n),n=n.sibling}function Pq(t,e,n){if(ql&&typeof ql.onCommitFiberUnmount=="function")try{ql.onCommitFiberUnmount(bN,n)}catch{}switch(n.tag){case 5:li||Ky(n,e);case 6:var r=Ls,s=Tc;Ls=null,Fd(t,e,n),Ls=r,Tc=s,Ls!==null&&(Tc?(t=Ls,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ls.removeChild(n.stateNode));break;case 18:Ls!==null&&(Tc?(t=Ls,n=n.stateNode,t.nodeType===8?HR(t.parentNode,n):t.nodeType===1&&HR(t,n),sC(t)):HR(Ls,n.stateNode));break;case 4:r=Ls,s=Tc,Ls=n.stateNode.containerInfo,Tc=!0,Fd(t,e,n),Ls=r,Tc=s;break;case 0:case 11:case 14:case 15:if(!li&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Sk(n,e,o),s=s.next}while(s!==r)}Fd(t,e,n);break;case 1:if(!li&&(Ky(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tr(n,e,a)}Fd(t,e,n);break;case 21:Fd(t,e,n);break;case 22:n.mode&1?(li=(r=li)||n.memoizedState!==null,Fd(t,e,n),li=r):Fd(t,e,n);break;default:Fd(t,e,n)}}function N6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nue),e.forEach(function(r){var s=hue.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function uc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ls=a.stateNode,Tc=!1;break e;case 3:Ls=a.stateNode.containerInfo,Tc=!0;break e;case 4:Ls=a.stateNode.containerInfo,Tc=!0;break e}a=a.return}if(Ls===null)throw Error(Ee(160));Pq(i,o,s),Ls=null,Tc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Tr(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Oq(e,t),e=e.sibling}function Oq(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(uc(e,t),sl(t),r&4){try{bE(3,t,t.return),IN(3,t)}catch(g){Tr(t,t.return,g)}try{bE(5,t,t.return)}catch(g){Tr(t,t.return,g)}}break;case 1:uc(e,t),sl(t),r&512&&n!==null&&Ky(n,n.return);break;case 5:if(uc(e,t),sl(t),r&512&&n!==null&&Ky(n,n.return),t.flags&32){var s=t.stateNode;try{eC(s,"")}catch(g){Tr(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&eG(s,i),Z2(a,o);var l=Z2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?iG(s,d):u==="dangerouslySetInnerHTML"?rG(s,d):u==="children"?eC(s,d):x5(s,u,d,l)}switch(a){case"input":V2(s,i);break;case"textarea":tG(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?l0(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?l0(s,!!i.multiple,i.defaultValue,!0):l0(s,!!i.multiple,i.multiple?[]:"",!1))}s[lC]=i}catch(g){Tr(t,t.return,g)}}break;case 6:if(uc(e,t),sl(t),r&4){if(t.stateNode===null)throw Error(Ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Tr(t,t.return,g)}}break;case 3:if(uc(e,t),sl(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sC(e.containerInfo)}catch(g){Tr(t,t.return,g)}break;case 4:uc(e,t),sl(t);break;case 13:uc(e,t),sl(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(iL=Ur())),r&4&&N6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(li=(l=li)||u,uc(e,t),li=l):uc(e,t),sl(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:bE(4,h,h.return);break;case 1:Ky(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Tr(r,n,g)}}break;case 5:Ky(h,h.return);break;case 22:if(h.memoizedState!==null){R6(d);continue}}f!==null?(f.return=h,Ke=f):R6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=sG("display",o))}catch(g){Tr(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Tr(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:uc(e,t),sl(t),r&4&&N6(t);break;case 21:break;default:uc(e,t),sl(t)}}function sl(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rq(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(eC(s,""),r.flags&=-33);var i=I6(t);Nk(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=I6(t);Ik(t,a,o);break;default:throw Error(Ee(161))}}catch(c){Tr(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sue(t,e,n){Ke=t,kq(t)}function kq(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||dA;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||li;a=dA;var l=li;if(dA=o,(li=c)&&!l)for(Ke=s;Ke!==null;)o=Ke,c=o.child,o.tag===22&&o.memoizedState!==null?P6(s):c!==null?(c.return=o,Ke=c):P6(s);for(;i!==null;)Ke=i,kq(i),i=i.sibling;Ke=s,dA=a,li=l}T6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):T6(t)}}function T6(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:li||IN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!li)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:bc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&f6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}f6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&sC(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}li||e.flags&512&&xk(e)}catch(h){Tr(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function R6(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function P6(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{IN(4,e)}catch(c){Tr(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Tr(e,s,c)}}var i=e.return;try{xk(e)}catch(c){Tr(e,i,c)}break;case 5:var o=e.return;try{xk(e)}catch(c){Tr(e,o,c)}}}catch(c){Tr(e,e.return,c)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var iue=Math.ceil,zx=Rd.ReactCurrentDispatcher,rL=Rd.ReactCurrentOwner,qa=Rd.ReactCurrentBatchConfig,hn=0,Ss=null,Gr=null,js=0,Jo=0,Yy=Gf(0),rs=0,gC=null,Vg=0,NN=0,sL=0,vE=null,go=null,iL=0,Mw=1/0,Tu=null,Hx=!1,Tk=null,hf=null,hA=!1,Yh=null,Gx=0,EE=0,Rk=null,_S=-1,AS=0;function ki(){return hn&6?Ur():_S!==-1?_S:_S=Ur()}function ff(t){return t.mode&1?hn&2&&js!==0?js&-js:Wle.transition!==null?(AS===0&&(AS=yG()),AS):(t=Dn,t!==0||(t=window.event,t=t===void 0?16:AG(t.type)),t):1}function Hc(t,e,n,r){if(50<EE)throw EE=0,Rk=null,Error(Ee(185));Z_(t,n,r),(!(hn&2)||t!==Ss)&&(t===Ss&&(!(hn&2)&&(NN|=n),rs===4&&yh(t,js)),Ao(t,r),n===1&&hn===0&&!(e.mode&1)&&(Mw=Ur()+500,AN&&qf()))}function Ao(t,e){var n=t.callbackNode;Wce(t,e);var r=Nx(t,t===Ss?js:0);if(r===0)n!==null&&F$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&F$(n),e===1)t.tag===0?jle(O6.bind(null,t)):zG(O6.bind(null,t)),Ule(function(){!(hn&6)&&qf()}),n=null;else{switch(wG(r)){case 1:n=P5;break;case 4:n=gG;break;case 16:n=Ix;break;case 536870912:n=mG;break;default:n=Ix}n=jq(n,Dq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dq(t,e){if(_S=-1,AS=0,hn&6)throw Error(Ee(327));var n=t.callbackNode;if(p0()&&t.callbackNode!==n)return null;var r=Nx(t,t===Ss?js:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qx(t,r);else{e=r;var s=hn;hn|=2;var i=Lq();(Ss!==t||js!==e)&&(Tu=null,Mw=Ur()+500,Rg(t,e));do try{cue();break}catch(a){Mq(t,a)}while(!0);H5(),zx.current=i,hn=s,Gr!==null?e=0:(Ss=null,js=0,e=rs)}if(e!==0){if(e===2&&(s=rk(t),s!==0&&(r=s,e=Pk(t,s))),e===1)throw n=gC,Rg(t,0),yh(t,r),Ao(t,Ur()),n;if(e===6)yh(t,r);else{if(s=t.current.alternate,!(r&30)&&!oue(s)&&(e=qx(t,r),e===2&&(i=rk(t),i!==0&&(r=i,e=Pk(t,i))),e===1))throw n=gC,Rg(t,0),yh(t,r),Ao(t,Ur()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Ep(t,go,Tu);break;case 3:if(yh(t,r),(r&130023424)===r&&(e=iL+500-Ur(),10<e)){if(Nx(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ki(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=dk(Ep.bind(null,t,go,Tu),e);break}Ep(t,go,Tu);break;case 4:if(yh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-zc(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ur()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iue(r/1960))-r,10<r){t.timeoutHandle=dk(Ep.bind(null,t,go,Tu),r);break}Ep(t,go,Tu);break;case 5:Ep(t,go,Tu);break;default:throw Error(Ee(329))}}}return Ao(t,Ur()),t.callbackNode===n?Dq.bind(null,t):null}function Pk(t,e){var n=vE;return t.current.memoizedState.isDehydrated&&(Rg(t,e).flags|=256),t=qx(t,e),t!==2&&(e=go,go=n,e!==null&&Ok(e)),t}function Ok(t){go===null?go=t:go.push.apply(go,t)}function oue(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Vc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yh(t,e){for(e&=~sL,e&=~NN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zc(e),r=1<<n;t[n]=-1,e&=~r}}function O6(t){if(hn&6)throw Error(Ee(327));p0();var e=Nx(t,0);if(!(e&1))return Ao(t,Ur()),null;var n=qx(t,e);if(t.tag!==0&&n===2){var r=rk(t);r!==0&&(e=r,n=Pk(t,r))}if(n===1)throw n=gC,Rg(t,0),yh(t,e),Ao(t,Ur()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ep(t,go,Tu),Ao(t,Ur()),null}function oL(t,e){var n=hn;hn|=1;try{return t(e)}finally{hn=n,hn===0&&(Mw=Ur()+500,AN&&qf())}}function Kg(t){Yh!==null&&Yh.tag===0&&!(hn&6)&&p0();var e=hn;hn|=1;var n=qa.transition,r=Dn;try{if(qa.transition=null,Dn=1,t)return t()}finally{Dn=r,qa.transition=n,hn=e,!(hn&6)&&qf()}}function aL(){Jo=Yy.current,cr(Yy)}function Rg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Lle(n)),Gr!==null)for(n=Gr.return;n!==null;){var r=n;switch(j5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kx();break;case 3:kw(),cr(Co),cr(di),Q5();break;case 5:Y5(r);break;case 4:kw();break;case 13:cr(wr);break;case 19:cr(wr);break;case 10:G5(r.type._context);break;case 22:case 23:aL()}n=n.return}if(Ss=t,Gr=t=pf(t.current,null),js=Jo=e,rs=0,gC=null,sL=NN=Vg=0,go=vE=null,jp!==null){for(e=0;e<jp.length;e++)if(n=jp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}jp=null}return t}function Mq(t,e){do{var n=Gr;try{if(H5(),vS.current=Wx,jx){for(var r=Cr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}jx=!1}if(qg=0,gs=Zr=Cr=null,wE=!1,hC=0,rL.current=null,n===null||n.return===null){rs=1,gC=e,Gr=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=js,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=b6(o);if(f!==null){f.flags&=-257,v6(f,o,a,i,e),f.mode&1&&w6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){w6(i,l,e),cL();break e}c=Error(Ee(426))}}else if(hr&&a.mode&1){var w=b6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),v6(w,o,a,i,e),W5(Dw(c,a));break e}}i=c=Dw(c,a),rs!==4&&(rs=2),vE===null?vE=[i]:vE.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=wq(i,c,e);h6(i,y);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(hf===null||!hf.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=bq(i,a,e);h6(i,A);break e}}i=i.return}while(i!==null)}Bq(n)}catch(C){e=C,Gr===n&&n!==null&&(Gr=n=n.return);continue}break}while(!0)}function Lq(){var t=zx.current;return zx.current=Wx,t===null?Wx:t}function cL(){(rs===0||rs===3||rs===2)&&(rs=4),Ss===null||!(Vg&268435455)&&!(NN&268435455)||yh(Ss,js)}function qx(t,e){var n=hn;hn|=2;var r=Lq();(Ss!==t||js!==e)&&(Tu=null,Rg(t,e));do try{aue();break}catch(s){Mq(t,s)}while(!0);if(H5(),hn=n,zx.current=r,Gr!==null)throw Error(Ee(261));return Ss=null,js=0,rs}function aue(){for(;Gr!==null;)Uq(Gr)}function cue(){for(;Gr!==null&&!kce();)Uq(Gr)}function Uq(t){var e=Fq(t.alternate,t,Jo);t.memoizedProps=t.pendingProps,e===null?Bq(t):Gr=e,rL.current=null}function Bq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tue(n,e),n!==null){n.flags&=32767,Gr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{rs=6,Gr=null;return}}else if(n=eue(n,e,Jo),n!==null){Gr=n;return}if(e=e.sibling,e!==null){Gr=e;return}Gr=e=t}while(e!==null);rs===0&&(rs=5)}function Ep(t,e,n){var r=Dn,s=qa.transition;try{qa.transition=null,Dn=1,lue(t,e,n,r)}finally{qa.transition=s,Dn=r}return null}function lue(t,e,n,r){do p0();while(Yh!==null);if(hn&6)throw Error(Ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(zce(t,i),t===Ss&&(Gr=Ss=null,js=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||hA||(hA=!0,jq(Ix,function(){return p0(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qa.transition,qa.transition=null;var o=Dn;Dn=1;var a=hn;hn|=4,rL.current=null,rue(t,n),Oq(n,t),Tle(lk),Tx=!!ck,lk=ck=null,t.current=n,sue(n),Dce(),hn=a,Dn=o,qa.transition=i}else t.current=n;if(hA&&(hA=!1,Yh=t,Gx=s),i=t.pendingLanes,i===0&&(hf=null),Uce(n.stateNode),Ao(t,Ur()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hx)throw Hx=!1,t=Tk,Tk=null,t;return Gx&1&&t.tag!==0&&p0(),i=t.pendingLanes,i&1?t===Rk?EE++:(EE=0,Rk=t):EE=0,qf(),null}function p0(){if(Yh!==null){var t=wG(Gx),e=qa.transition,n=Dn;try{if(qa.transition=null,Dn=16>t?16:t,Yh===null)var r=!1;else{if(t=Yh,Yh=null,Gx=0,hn&6)throw Error(Ee(331));var s=hn;for(hn|=4,Ke=t.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ke=l;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:bE(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,f=u.return;if(Tq(u),u===l){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:bE(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ke=y;break e}Ke=i.return}}var b=t.current;for(Ke=b;Ke!==null;){o=Ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ke=v;else e:for(o=b;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:IN(9,a)}}catch(C){Tr(a,a.return,C)}if(a===o){Ke=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,Ke=A;break e}Ke=a.return}}if(hn=s,qf(),ql&&typeof ql.onPostCommitFiberRoot=="function")try{ql.onPostCommitFiberRoot(bN,t)}catch{}r=!0}return r}finally{Dn=n,qa.transition=e}}return!1}function k6(t,e,n){e=Dw(n,e),e=wq(t,e,1),t=df(t,e,1),e=ki(),t!==null&&(Z_(t,1,e),Ao(t,e))}function Tr(t,e,n){if(t.tag===3)k6(t,t,n);else for(;e!==null;){if(e.tag===3){k6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hf===null||!hf.has(r))){t=Dw(n,t),t=bq(e,t,1),e=df(e,t,1),t=ki(),e!==null&&(Z_(e,1,t),Ao(e,t));break}}e=e.return}}function uue(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ki(),t.pingedLanes|=t.suspendedLanes&n,Ss===t&&(js&n)===n&&(rs===4||rs===3&&(js&130023424)===js&&500>Ur()-iL?Rg(t,0):sL|=n),Ao(t,e)}function $q(t,e){e===0&&(t.mode&1?(e=nA,nA<<=1,!(nA&130023424)&&(nA=4194304)):e=1);var n=ki();t=vd(t,e),t!==null&&(Z_(t,e,n),Ao(t,n))}function due(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$q(t,n)}function hue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),$q(t,n)}var Fq;Fq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Co.current)bo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return bo=!1,Xle(t,e,n);bo=!!(t.flags&131072)}else bo=!1,hr&&e.flags&1048576&&HG(e,Lx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;CS(t,e),t=e.pendingProps;var s=Rw(e,di.current);f0(e,n),s=Z5(null,e,r,t,s,n);var i=X5();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_o(r)?(i=!0,Dx(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,V5(e),s.updater=xN,e.stateNode=s,s._reactInternals=e,wk(e,r,t,n),e=Ek(null,e,r,!0,i,n)):(e.tag=0,hr&&i&&F5(e),Ci(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(CS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pue(r),t=bc(r,t),s){case 0:e=vk(null,e,r,t,n);break e;case 1:e=_6(null,e,r,t,n);break e;case 11:e=E6(null,e,r,t,n);break e;case 14:e=C6(null,e,r,bc(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bc(r,s),vk(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bc(r,s),_6(t,e,r,s,n);case 3:e:{if(_q(e),t===null)throw Error(Ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,QG(t,e),$x(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Dw(Error(Ee(423)),e),e=A6(t,e,r,n,s);break e}else if(r!==s){s=Dw(Error(Ee(424)),e),e=A6(t,e,r,n,s);break e}else for(na=uf(e.stateNode.containerInfo.firstChild),ia=e,hr=!0,Rc=null,n=KG(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pw(),r===s){e=Ed(t,e,n);break e}Ci(t,e,r,n)}e=e.child}return e;case 5:return JG(e),t===null&&gk(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,uk(r,s)?o=null:i!==null&&uk(r,i)&&(e.flags|=32),Cq(t,e),Ci(t,e,o,n),e.child;case 6:return t===null&&gk(e),null;case 13:return Aq(t,e,n);case 4:return K5(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ow(e,null,r,n):Ci(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bc(r,s),E6(t,e,r,s,n);case 7:return Ci(t,e,e.pendingProps,n),e.child;case 8:return Ci(t,e,e.pendingProps.children,n),e.child;case 12:return Ci(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,rr(Ux,r._currentValue),r._currentValue=o,i!==null)if(Vc(i.value,o)){if(i.children===s.children&&!Co.current){e=Ed(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ad(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),mk(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mk(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ci(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,f0(e,n),s=Va(s),r=r(s),e.flags|=1,Ci(t,e,r,n),e.child;case 14:return r=e.type,s=bc(r,e.pendingProps),s=bc(r.type,s),C6(t,e,r,s,n);case 15:return vq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:bc(r,s),CS(t,e),e.tag=1,_o(r)?(t=!0,Dx(e)):t=!1,f0(e,n),yq(e,r,s),wk(e,r,s,n),Ek(null,e,r,!0,t,n);case 19:return Sq(t,e,n);case 22:return Eq(t,e,n)}throw Error(Ee(156,e.tag))};function jq(t,e){return pG(t,e)}function fue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(t,e,n,r){return new fue(t,e,n,r)}function lL(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pue(t){if(typeof t=="function")return lL(t)?1:0;if(t!=null){if(t=t.$$typeof,t===N5)return 11;if(t===T5)return 14}return 2}function pf(t,e){var n=t.alternate;return n===null?(n=za(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function SS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")lL(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $y:return Pg(n.children,s,i,e);case I5:o=8,s|=8;break;case W2:return t=za(12,n,e,s|2),t.elementType=W2,t.lanes=i,t;case z2:return t=za(13,n,e,s),t.elementType=z2,t.lanes=i,t;case H2:return t=za(19,n,e,s),t.elementType=H2,t.lanes=i,t;case JH:return TN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case YH:o=10;break e;case QH:o=9;break e;case N5:o=11;break e;case T5:o=14;break e;case uh:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=za(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Pg(t,e,n,r){return t=za(7,t,r,e),t.lanes=n,t}function TN(t,e,n,r){return t=za(22,t,r,e),t.elementType=JH,t.lanes=n,t.stateNode={isHidden:!1},t}function ZR(t,e,n){return t=za(6,t,null,e),t.lanes=n,t}function XR(t,e,n){return e=za(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kR(0),this.expirationTimes=kR(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kR(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uL(t,e,n,r,s,i,o,a,c){return t=new gue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=za(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},V5(i),t}function mue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:By,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Wq(t){if(!t)return Pf;t=t._reactInternals;e:{if(_m(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_o(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(_o(n))return WG(t,n,e)}return e}function zq(t,e,n,r,s,i,o,a,c){return t=uL(n,r,!0,t,s,i,o,a,c),t.context=Wq(null),n=t.current,r=ki(),s=ff(n),i=ad(r,s),i.callback=e??null,df(n,i,s),t.current.lanes=s,Z_(t,s,r),Ao(t,r),t}function RN(t,e,n,r){var s=e.current,i=ki(),o=ff(s);return n=Wq(n),e.context===null?e.context=n:e.pendingContext=n,e=ad(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=df(s,e,o),t!==null&&(Hc(t,s,o,i),bS(t,s,o)),o}function Vx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function D6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dL(t,e){D6(t,e),(t=t.alternate)&&D6(t,e)}function yue(){return null}var Hq=typeof reportError=="function"?reportError:function(t){console.error(t)};function hL(t){this._internalRoot=t}PN.prototype.render=hL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));RN(t,e,null,null)};PN.prototype.unmount=hL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Kg(function(){RN(null,t,null,null)}),e[bd]=null}};function PN(t){this._internalRoot=t}PN.prototype.unstable_scheduleHydration=function(t){if(t){var e=EG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mh.length&&e!==0&&e<mh[n].priority;n++);mh.splice(n,0,t),n===0&&_G(t)}};function fL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ON(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function M6(){}function wue(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Vx(o);i.call(l)}}var o=zq(e,r,t,0,null,!1,!1,"",M6);return t._reactRootContainer=o,t[bd]=o.current,aC(t.nodeType===8?t.parentNode:t),Kg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Vx(c);a.call(l)}}var c=uL(t,0,!1,null,null,!1,!1,"",M6);return t._reactRootContainer=c,t[bd]=c.current,aC(t.nodeType===8?t.parentNode:t),Kg(function(){RN(e,c,n,r)}),c}function kN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Vx(o);a.call(c)}}RN(e,o,t,s)}else o=wue(n,e,t,s,r);return Vx(o)}bG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fv(e.pendingLanes);n!==0&&(O5(e,n|1),Ao(e,Ur()),!(hn&6)&&(Mw=Ur()+500,qf()))}break;case 13:Kg(function(){var r=vd(t,1);if(r!==null){var s=ki();Hc(r,t,1,s)}}),dL(t,1)}};k5=function(t){if(t.tag===13){var e=vd(t,134217728);if(e!==null){var n=ki();Hc(e,t,134217728,n)}dL(t,134217728)}};vG=function(t){if(t.tag===13){var e=ff(t),n=vd(t,e);if(n!==null){var r=ki();Hc(n,t,e,r)}dL(t,e)}};EG=function(){return Dn};CG=function(t,e){var n=Dn;try{return Dn=t,e()}finally{Dn=n}};ek=function(t,e,n){switch(e){case"input":if(V2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_N(r);if(!s)throw Error(Ee(90));XH(r),V2(r,s)}}}break;case"textarea":tG(t,n);break;case"select":e=n.value,e!=null&&l0(t,!!n.multiple,e,!1)}};cG=oL;lG=Kg;var bue={usingClientEntryPoint:!1,Events:[e1,zy,_N,oG,aG,oL]},uv={findFiberByHostInstance:Fp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vue={bundleType:uv.bundleType,version:uv.version,rendererPackageName:uv.rendererPackageName,rendererConfig:uv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hG(t),t===null?null:t.stateNode},findFiberByHostInstance:uv.findFiberByHostInstance||yue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fA=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fA.isDisabled&&fA.supportsFiber)try{bN=fA.inject(vue),ql=fA}catch{}}da.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bue;da.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fL(e))throw Error(Ee(200));return mue(t,e,null,n)};da.createRoot=function(t,e){if(!fL(t))throw Error(Ee(299));var n=!1,r="",s=Hq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=uL(t,1,!1,null,null,n,!1,r,s),t[bd]=e.current,aC(t.nodeType===8?t.parentNode:t),new hL(e)};da.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=hG(e),t=t===null?null:t.stateNode,t};da.flushSync=function(t){return Kg(t)};da.hydrate=function(t,e,n){if(!ON(e))throw Error(Ee(200));return kN(null,t,e,!0,n)};da.hydrateRoot=function(t,e,n){if(!fL(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Hq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=zq(e,null,t,1,n??null,s,!1,i,o),t[bd]=e.current,aC(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new PN(e)};da.render=function(t,e,n){if(!ON(e))throw Error(Ee(200));return kN(null,t,e,!1,n)};da.unmountComponentAtNode=function(t){if(!ON(t))throw Error(Ee(40));return t._reactRootContainer?(Kg(function(){kN(null,null,t,!1,function(){t._reactRootContainer=null,t[bd]=null})}),!0):!1};da.unstable_batchedUpdates=oL;da.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ON(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return kN(t,e,n,!1,r)};da.version="18.3.1-next-f1338f8080-20240426";function Gq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gq)}catch(t){console.error(t)}}Gq(),GH.exports=da;var pL=GH.exports,L6=pL;F2.createRoot=L6.createRoot,F2.hydrateRoot=L6.hydrateRoot;const Eue="_verified_lvyh0_1",gL={verified:Eue},Cue=()=>m.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:gL.verified,children:m.jsx("g",{children:m.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),_ue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:gL.verified,children:m.jsxs("g",{children:[m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[m.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),m.jsx("stop",{offset:".539",stopColor:"#cd8105"}),m.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),m.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),m.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),m.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[m.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),m.jsx("stop",{offset:".406",stopColor:"#e2b719"}),m.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),m.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[m.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),m.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),m.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),Aue=()=>m.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:gL.verified,children:m.jsx("g",{children:m.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function qq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=qq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function gf(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=qq(t))&&(r&&(r+=" "),r+=e);return r}const Sue="_root_98iqw_1",xue="_article_98iqw_21",U6={root:Sue,article:xue},mL=({className:t,children:e})=>m.jsx("div",{className:gf("react-tweet-theme",U6.root,t),children:m.jsx("article",{className:U6.article,children:e})}),Vq=t=>m.jsx("img",{...t}),Iue="_header_nqq4j_1",Nue="_avatar_nqq4j_11",Tue="_avatarOverflow_nqq4j_16",Rue="_avatarSquare_nqq4j_23",Pue="_avatarShadow_nqq4j_26",Oue="_author_nqq4j_37",kue="_authorLink_nqq4j_44",Due="_authorVerified_nqq4j_53",Mue="_authorLinkText_nqq4j_56",Lue="_authorMeta_nqq4j_63",Uue="_authorFollow_nqq4j_66",Bue="_username_nqq4j_69",$ue="_follow_nqq4j_74",Fue="_separator_nqq4j_82",jue="_brand_nqq4j_86",Wue="_twitterIcon_nqq4j_90",Ns={header:Iue,avatar:Nue,avatarOverflow:Tue,avatarSquare:Rue,avatarShadow:Pue,author:Oue,authorLink:kue,authorVerified:Due,authorLinkText:Mue,authorMeta:Lue,authorFollow:Uue,username:Bue,follow:$ue,separator:Fue,brand:jue,twitterIcon:Wue},zue="_verifiedOld_lcna5_1",Hue="_verifiedBlue_lcna5_4",Gue="_verifiedGovernment_lcna5_7",eP={verifiedOld:zue,verifiedBlue:Hue,verifiedGovernment:Gue},Kq=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=m.jsx(Cue,{}),s=eP.verifiedBlue;if(n)switch(t.is_blue_verified||(s=eP.verifiedOld),t.verified_type){case"Government":r=m.jsx(Aue,{}),s=eP.verifiedGovernment;break;case"Business":r=m.jsx(_ue,{}),s=null;break}return n?m.jsx("div",{className:gf(e,s),children:r}):null},que=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:Vq,{user:s}=t;return m.jsxs("div",{className:Ns.header,children:[m.jsxs("a",{href:t.url,className:Ns.avatar,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:gf(Ns.avatarOverflow,s.profile_image_shape==="Square"&&Ns.avatarSquare),children:m.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),m.jsx("div",{className:Ns.avatarOverflow,children:m.jsx("div",{className:Ns.avatarShadow})})]}),m.jsxs("div",{className:Ns.author,children:[m.jsxs("a",{href:t.url,className:Ns.authorLink,target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Ns.authorLinkText,children:m.jsx("span",{title:s.name,children:s.name})}),m.jsx(Kq,{user:s,className:Ns.authorVerified})]}),m.jsxs("div",{className:Ns.authorMeta,children:[m.jsx("a",{href:t.url,className:Ns.username,target:"_blank",rel:"noopener noreferrer",children:m.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),m.jsxs("div",{className:Ns.authorFollow,children:[m.jsx("span",{className:Ns.separator,children:""}),m.jsx("a",{href:s.follow_url,className:Ns.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),m.jsx("a",{href:t.url,className:Ns.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Ns.twitterIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},Vue="_root_1ec15_1",Kue={root:Vue},Yue=({tweet:t})=>m.jsxs("a",{href:t.in_reply_to_url,className:Kue.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),Que="_root_eihfa_1",Jue={root:Que},Zue=({href:t,children:e})=>m.jsx("a",{href:t,className:Jue.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Xue="_root_1xq52_1",ede={root:Xue},tde=({tweet:t})=>m.jsx("p",{className:ede.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return m.jsx(Zue,{href:e.href,children:e.text},n);case"media":return;default:return m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),B6=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,Yq=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,nde=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,rde=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,sde=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,ide=t=>`https://x.com/hashtag/${t.text}`,ode=t=>`https://x.com/search?q=%24${t.text}`,ade=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,Qq=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},cde=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},lde=t=>{const e=cde(t);return e.length>1?e[1]:e[0]},kk=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function $6(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return dv(n,"hashtag",t.entities.hashtags),dv(n,"mention",t.entities.user_mentions),dv(n,"url",t.entities.urls),dv(n,"symbol",t.entities.symbols),t.entities.media&&dv(n,"media",t.entities.media),ude(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:ide(r),text:s});case"mention":return Object.assign(r,{href:Yq(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:ode(r),text:s});default:return Object.assign(r,{text:s})}})}function dv(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function ude(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const dde=t=>({...t,url:B6(t),user:{...t.user,url:Yq(t),follow_url:sde(t)},like_url:nde(t),reply_url:rde(t),in_reply_to_url:t.in_reply_to_screen_name?ade(t):void 0,entities:$6(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:B6(t.quoted_tweet),entities:$6(t.quoted_tweet)}:void 0}),hde="_root_g9tkv_1",fde="_rounded_g9tkv_6",pde="_mediaWrapper_g9tkv_10",gde="_grid2Columns_g9tkv_17",mde="_grid3_g9tkv_20",yde="_grid2x2_g9tkv_23",wde="_mediaContainer_g9tkv_26",bde="_mediaLink_g9tkv_34",vde="_skeleton_g9tkv_38",Ede="_image_g9tkv_43",Fo={root:hde,rounded:fde,mediaWrapper:pde,grid2Columns:gde,grid3:mde,grid2x2:yde,mediaContainer:wde,mediaLink:bde,skeleton:vde,image:Ede},Cde="_anchor_fp31d_1",_de="_videoButton_fp31d_17",Ade="_videoButtonIcon_fp31d_35",Sde="_watchOnTwitter_fp31d_44",xde="_viewReplies_fp31d_60",Zm={anchor:Cde,videoButton:_de,videoButtonIcon:Ade,watchOnTwitter:Sde,viewReplies:xde},Ide=({tweet:t,media:e})=>{const[n,r]=P.useState(!0),[s,i]=P.useState(!1),[o,a]=P.useState(!1),c=lde(e);let l=0;return m.jsxs(m.Fragment,{children:[m.jsx("video",{className:Fo.image,poster:Qq(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:m.jsx("source",{src:c.url,type:c.content_type})}),n&&m.jsx("button",{type:"button",className:Zm.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:m.jsx("svg",{viewBox:"0 0 24 24",className:Zm.videoButtonIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&m.jsx("div",{className:Zm.watchOnTwitter,children:m.jsx("a",{href:t.url,className:Zm.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&m.jsx("a",{href:t.url,className:gf(Zm.anchor,Zm.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},Nde=t=>m.jsx("img",{...t}),F6=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},Jq=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:Nde;return m.jsx("div",{className:gf(Fo.root,!n&&Fo.rounded),children:m.jsx("div",{className:gf(Fo.mediaWrapper,o>1&&Fo.grid2Columns,o===3&&Fo.grid3,o>4&&Fo.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>m.jsx(P.Fragment,{children:l.type==="photo"?m.jsxs("a",{href:t.url,className:gf(Fo.mediaContainer,Fo.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[m.jsx("div",{className:Fo.skeleton,style:F6(l,o)}),m.jsx(c,{src:Qq(l,"small"),alt:l.ext_alt_text||"Image",className:Fo.image,draggable:!0})]},l.media_url_https):m.jsxs("div",{className:Fo.mediaContainer,children:[m.jsx("div",{className:Fo.skeleton,style:F6(l,o)}),m.jsx(Ide,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},Tde={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},Rde=new Intl.DateTimeFormat("en-US",Tde),Pde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Ode=t=>{const e=Pde(Rde.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},kde="_root_i24yn_1",Dde={root:kde},Mde=({tweet:t})=>{const e=new Date(t.created_at),n=Ode(e);return m.jsx("a",{className:Dde.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:m.jsx("time",{dateTime:e.toISOString(),children:n})})},Lde="_info_19qcj_1",Ude="_infoLink_19qcj_10",Bde="_infoIcon_19qcj_30",tP={info:Lde,infoLink:Ude,infoIcon:Bde},$de=({tweet:t})=>m.jsxs("div",{className:tP.info,children:[m.jsx(Mde,{tweet:t}),m.jsx("a",{className:tP.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:m.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:tP.infoIcon,children:m.jsx("g",{children:m.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Fde="_actions_n2anf_1",jde="_like_n2anf_13",Wde="_reply_n2anf_14",zde="_copy_n2anf_15",Hde="_likeIconWrapper_n2anf_27",Gde="_likeCount_n2anf_30",qde="_replyIconWrapper_n2anf_35",Vde="_copyIconWrapper_n2anf_36",Kde="_likeIcon_n2anf_27",Yde="_replyIcon_n2anf_35",Qde="_copyIcon_n2anf_36",Jde="_replyText_n2anf_56",Zde="_copyText_n2anf_57",co={actions:Fde,like:jde,reply:Wde,copy:zde,likeIconWrapper:Hde,likeCount:Gde,replyIconWrapper:qde,copyIconWrapper:Vde,likeIcon:Kde,replyIcon:Yde,copyIcon:Qde,replyText:Jde,copyText:Zde},Xde=({tweet:t})=>{const[e,n]=P.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return P.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),m.jsxs("button",{type:"button",className:co.copy,"aria-label":"Copy link",onClick:r,children:[m.jsx("div",{className:co.copyIconWrapper,children:e?m.jsx("svg",{viewBox:"0 0 24 24",className:co.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):m.jsx("svg",{viewBox:"0 0 24 24",className:co.copyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),m.jsx("span",{className:co.copyText,children:e?"Copied!":"Copy link"})]})},ehe=({tweet:t})=>{const e=kk(t.favorite_count);return m.jsxs("div",{className:co.actions,children:[m.jsxs("a",{className:co.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[m.jsx("div",{className:co.likeIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:co.likeIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),m.jsx("span",{className:co.likeCount,children:e})]}),m.jsxs("a",{className:co.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[m.jsx("div",{className:co.replyIconWrapper,children:m.jsx("svg",{viewBox:"0 0 24 24",className:co.replyIcon,"aria-hidden":"true",children:m.jsx("g",{children:m.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),m.jsx("span",{className:co.replyText,children:"Reply"})]}),m.jsx(Xde,{tweet:t})]})},the="_replies_1cutb_1",nhe="_link_1cutb_4",rhe="_text_1cutb_23",nP={replies:the,link:nhe,text:rhe},she=({tweet:t})=>m.jsx("div",{className:nP.replies,children:m.jsx("a",{className:nP.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:m.jsx("span",{className:nP.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${kk(t.conversation_count)} reply`:`Read ${kk(t.conversation_count)} replies`})})}),ihe="_root_q5799_1",ohe="_article_q5799_16",j6={root:ihe,article:ohe},ahe=({tweet:t,children:e})=>m.jsx("div",{className:j6.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:m.jsx("article",{className:j6.article,children:e})}),che="_header_r31i5_1",lhe="_avatar_r31i5_11",uhe="_avatarSquare_r31i5_17",dhe="_author_r31i5_21",hhe="_authorText_r31i5_26",fhe="_username_r31i5_33",cp={header:che,avatar:lhe,avatarSquare:uhe,author:dhe,authorText:hhe,username:fhe},phe=({tweet:t})=>{const{user:e}=t;return m.jsxs("div",{className:cp.header,children:[m.jsx("a",{href:t.url,className:cp.avatar,target:"_blank",rel:"noopener noreferrer",children:m.jsx("div",{className:gf(cp.avatarOverflow,e.profile_image_shape==="Square"&&cp.avatarSquare),children:m.jsx(Vq,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),m.jsxs("div",{className:cp.author,children:[m.jsx("div",{className:cp.authorText,children:m.jsx("span",{title:e.name,children:e.name})}),m.jsx(Kq,{user:e}),m.jsx("div",{className:cp.username,children:m.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},ghe="_root_175ot_1",mhe={root:ghe},yhe=({tweet:t})=>m.jsx("p",{className:mhe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>m.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),whe=({tweet:t})=>{var e;return m.jsxs(ahe,{tweet:t,children:[m.jsx(phe,{tweet:t}),m.jsx(yhe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?m.jsx(Jq,{quoted:!0,tweet:t}):null]})},bhe=({tweet:t,components:e})=>{var n;const r=P.useMemo(()=>dde(t),[t]);return m.jsxs(mL,{children:[m.jsx(que,{tweet:r,components:e}),r.in_reply_to_status_id_str&&m.jsx(Yue,{tweet:r}),m.jsx(tde,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?m.jsx(Jq,{tweet:r,components:e}):null,r.quoted_tweet&&m.jsx(whe,{tweet:r.quoted_tweet}),m.jsx($de,{tweet:r}),m.jsx(ehe,{tweet:r}),m.jsx(she,{tweet:r})]})},vhe="_root_16yxa_1",Ehe={root:vhe},Che=t=>m.jsx(mL,{children:m.jsxs("div",{className:Ehe.root,children:[m.jsx("h3",{children:"Tweet not found"}),m.jsx("p",{children:"The embedded tweet could not be found"})]})}),_he="_skeleton_oi7hr_1",Ahe={skeleton:_he},pA=({style:t})=>m.jsx("span",{className:Ahe.skeleton,style:t}),She="_root_17qqv_1",xhe={root:She},Ihe=()=>m.jsxs(mL,{className:xhe.root,children:[m.jsx(pA,{style:{height:"3rem",marginBottom:"0.75rem"}}),m.jsx(pA,{style:{height:"6rem",margin:"0.5rem 0"}}),m.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),m.jsx(pA,{style:{height:"2rem"}}),m.jsx(pA,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var Zq={exports:{}},Xq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw=P;function Nhe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var The=typeof Object.is=="function"?Object.is:Nhe,Rhe=Lw.useState,Phe=Lw.useEffect,Ohe=Lw.useLayoutEffect,khe=Lw.useDebugValue;function Dhe(t,e){var n=e(),r=Rhe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Ohe(function(){s.value=n,s.getSnapshot=e,rP(s)&&i({inst:s})},[t,n,e]),Phe(function(){return rP(s)&&i({inst:s}),t(function(){rP(s)&&i({inst:s})})},[t]),khe(n),n}function rP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!The(t,n)}catch{return!0}}function Mhe(t,e){return e()}var Lhe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mhe:Dhe;Xq.useSyncExternalStore=Lw.useSyncExternalStore!==void 0?Lw.useSyncExternalStore:Lhe;Zq.exports=Xq;var eV=Zq.exports;const tV=0,nV=1,rV=2,W6=3;var z6=Object.prototype.hasOwnProperty;function Dk(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Dk(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(z6.call(t,n)&&++r&&!z6.call(e,n)||!(n in e)||!Dk(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Yu=new WeakMap,Qh=()=>{},Si=Qh(),Mk=Object,dn=t=>t===Si,Bl=t=>typeof t=="function",Of=(t,e)=>({...t,...e}),sV=t=>Bl(t.then),sP={},gA={},yL="undefined",n1=typeof window!=yL,Lk=typeof document!=yL,Uhe=n1&&"Deno"in window,Bhe=()=>n1&&typeof window.requestAnimationFrame!=yL,iV=(t,e)=>{const n=Yu.get(t);return[()=>!dn(e)&&t.get(e)||sP,r=>{if(!dn(e)){const s=t.get(e);e in gA||(gA[e]=s),n[5](e,Of(s,r),s||sP)}},n[6],()=>!dn(e)&&e in gA?gA[e]:!dn(e)&&t.get(e)||sP]};let Uk=!0;const $he=()=>Uk,[Bk,$k]=n1&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[Qh,Qh],Fhe=()=>{const t=Lk&&document.visibilityState;return dn(t)||t!=="hidden"},jhe=t=>(Lk&&document.addEventListener("visibilitychange",t),Bk("focus",t),()=>{Lk&&document.removeEventListener("visibilitychange",t),$k("focus",t)}),Whe=t=>{const e=()=>{Uk=!0,t()},n=()=>{Uk=!1};return Bk("online",e),Bk("offline",n),()=>{$k("online",e),$k("offline",n)}},zhe={isOnline:$he,isVisible:Fhe},Hhe={initFocus:jhe,initReconnect:Whe},H6=!sa.useId,mC=!n1||Uhe,Ghe=t=>Bhe()?window.requestAnimationFrame(t):setTimeout(t,1),iP=mC?P.useEffect:P.useLayoutEffect,oP=typeof navigator<"u"&&navigator.connection,G6=!mC&&oP&&(["slow-2g","2g"].includes(oP.effectiveType)||oP.saveData),mA=new WeakMap,qhe=t=>Mk.prototype.toString.call(t),aP=(t,e)=>t===`[object ${e}]`;let Vhe=0;const Fk=t=>{const e=typeof t,n=qhe(t),r=aP(n,"Date"),s=aP(n,"RegExp"),i=aP(n,"Object");let o,a;if(Mk(t)===t&&!r&&!s){if(o=mA.get(t),o)return o;if(o=++Vhe+"~",mA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Fk(t[a])+",";mA.set(t,o)}if(i){o="#";const c=Mk.keys(t).sort();for(;!dn(a=c.pop());)dn(t[a])||(o+=a+":"+Fk(t[a])+",");mA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},wL=t=>{if(Bl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Fk(t):"",[t,e]};let Khe=0;const jk=()=>++Khe;async function oV(...t){const[e,n,r,s]=t,i=Of({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Bl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=wL(h);if(!f)return;const[p,g]=iV(e,f),[w,y,b,v]=Yu.get(e),A=()=>{const W=w[f];return(Bl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],W&&W[0])?W[0](rV).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,N,x=!1;const T=jk();y[f]=[T,0];const S=!dn(c),D=p(),O=D.data,$=D._c,G=dn($)?O:$;if(S&&(c=Bl(c)?c(G,O):c,g({data:c,_c:G})),Bl(C))try{C=C(G)}catch(W){N=W,x=!0}if(C&&sV(C))if(C=await C.catch(W=>{N=W,x=!0}),T!==y[f][0]){if(x)throw N;return C}else x&&S&&l(N)&&(o=!0,g({data:G,_c:Si}));if(o&&!x)if(Bl(o)){const W=o(C,G);g({data:W,error:Si,_c:Si})}else g({data:C,error:Si,_c:Si});if(y[f][1]=jk(),Promise.resolve(A()).then(()=>{g({_c:Si})}),x){if(u)throw N;return}return C}}const q6=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Yhe=(t,e)=>{if(!Yu.has(t)){const n=Of(Hhe,e),r=Object.create(null),s=oV.bind(Si,t);let i=Qh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Yu.has(t)&&(Yu.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!mC)){const u=n.initFocus(setTimeout.bind(Si,q6.bind(Si,r,tV))),d=n.initReconnect(setTimeout.bind(Si,q6.bind(Si,r,nV)));i=()=>{u&&u(),d&&d(),Yu.delete(t)}}};return l(),[t,s,l,i]}return[t,Yu.get(t)[4]]},Qhe=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!dn(i)&&o>i||setTimeout(r,a,s)},Jhe=Dk,[aV,Zhe]=Yhe(new Map),Xhe=Of({onLoadingSlow:Qh,onSuccess:Qh,onError:Qh,onErrorRetry:Qhe,onDiscarded:Qh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:G6?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:G6?5e3:3e3,compare:Jhe,isPaused:()=>!1,cache:aV,mutate:Zhe,fallback:{}},zhe),efe=(t,e)=>{const n=Of(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=Of(s,o))}return n},tfe=P.createContext({}),nfe="$inf$",cV=n1&&window.__SWR_DEVTOOLS_USE__,rfe=cV?window.__SWR_DEVTOOLS_USE__:[],sfe=()=>{cV&&(window.__SWR_DEVTOOLS_REACT__=sa)},ife=t=>Bl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],ofe=()=>Of(Xhe,P.useContext(tfe)),afe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=wL(e),[,,,a]=Yu.get(aV);if(o.startsWith(nfe))return n(...i);const c=a[o];return dn(c)?n(...i):(delete a[o],c)}),r),cfe=rfe.concat(afe),lfe=t=>function(...n){const r=ofe(),[s,i,o]=ife(n),a=efe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(cfe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},ufe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};sfe();const cP=sa.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),lP={dedupe:!0},dfe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Yu.get(r),[y,b]=wL(t),v=P.useRef(!1),A=P.useRef(!1),C=P.useRef(y),N=P.useRef(e),x=P.useRef(n),T=()=>x.current,S=()=>T().isVisible()&&T().isOnline(),[D,O,$,G]=iV(r,y),W=P.useRef({}).current,I=dn(o)?dn(n.fallback)?Si:n.fallback[y]:o,R=(X,ce)=>{for(const de in W){const ge=de;if(ge==="data"){if(!s(X[ge],ce[ge])&&(!dn(X[ge])||!s(te,ce[ge])))return!1}else if(ce[ge]!==X[ge])return!1}return!0},B=P.useMemo(()=>{const X=!y||!e?!1:dn(a)?T().isPaused()||i?!1:c!==!1:a,ce=lt=>{const ut=Of(lt);return delete ut._k,X?{isValidating:!0,isLoading:!0,...ut}:ut},de=D(),ge=G(),we=ce(de),at=de===ge?we:ce(ge);let tt=we;return[()=>{const lt=ce(D());return R(lt,tt)?(tt.data=lt.data,tt.isLoading=lt.isLoading,tt.isValidating=lt.isValidating,tt.error=lt.error,tt):(tt=lt,lt)},()=>at]},[r,y]),k=eV.useSyncExternalStore(P.useCallback(X=>$(y,(ce,de)=>{R(de,ce)||X()}),[r,y]),B[0],B[1]),M=!v.current,j=f[y]&&f[y].length>0,q=k.data,se=dn(q)?I&&sV(I)?cP(I):I:q,ie=k.error,Y=P.useRef(se),te=h?dn(q)?dn(Y.current)?se:Y.current:q:se,fe=j&&!dn(ie)?!1:M&&!dn(a)?a:T().isPaused()?!1:i?dn(se)?!1:c:dn(se)||c,Xe=!!(y&&e&&M&&fe),Le=dn(k.isValidating)?Xe:k.isValidating,De=dn(k.isLoading)?Xe:k.isLoading,wt=P.useCallback(async X=>{const ce=N.current;if(!y||!ce||A.current||T().isPaused())return!1;let de,ge,we=!0;const at=X||{},tt=!g[y]||!at.dedupe,lt=()=>H6?!A.current&&y===C.current&&v.current:y===C.current,ut={isValidating:!1,isLoading:!1},Hn=()=>{O(ut)},Yn=()=>{const It=g[y];It&&It[1]===ge&&delete g[y]},Ue={isValidating:!0};dn(D().data)&&(Ue.isLoading=!0);try{if(tt&&(O(Ue),n.loadingTimeout&&dn(D().data)&&setTimeout(()=>{we&&lt()&&T().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[ce(b),jk()]),[de,ge]=g[y],de=await de,tt&&setTimeout(Yn,n.dedupingInterval),!g[y]||g[y][1]!==ge)return tt&&lt()&&T().onDiscarded(y),!1;ut.error=Si;const It=p[y];if(!dn(It)&&(ge<=It[0]||ge<=It[1]||It[1]===0))return Hn(),tt&&lt()&&T().onDiscarded(y),!1;const Lt=D().data;ut.data=s(Lt,de)?Lt:de,tt&&lt()&&T().onSuccess(de,y,n)}catch(It){Yn();const Lt=T(),{shouldRetryOnError:We}=Lt;Lt.isPaused()||(ut.error=It,tt&&lt()&&(Lt.onError(It,y,Lt),(We===!0||Bl(We)&&We(It))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||S())&&Lt.onErrorRetry(It,y,Lt,fn=>{const ko=f[y];ko&&ko[0]&&ko[0](W6,fn)},{retryCount:(at.retryCount||0)+1,dedupe:!0})))}return we=!1,Hn(),!0},[y,r]),Mt=P.useCallback((...X)=>oV(r,C.current,...X),[]);if(iP(()=>{N.current=e,x.current=n,dn(q)||(Y.current=q)}),iP(()=>{if(!y)return;const X=wt.bind(Si,lP);let ce=0;T().revalidateOnFocus&&(ce=Date.now()+T().focusThrottleInterval);const ge=ufe(y,f,(we,at={})=>{if(we==tV){const tt=Date.now();T().revalidateOnFocus&&tt>ce&&S()&&(ce=tt+T().focusThrottleInterval,X())}else if(we==nV)T().revalidateOnReconnect&&S()&&X();else{if(we==rV)return wt();if(we==W6)return wt(at)}});return A.current=!1,C.current=y,v.current=!0,O({_k:b}),fe&&(g[y]||(dn(se)||mC?X():Ghe(X))),()=>{A.current=!0,ge()}},[y]),iP(()=>{let X;function ce(){const ge=Bl(l)?l(D().data):l;ge&&X!==-1&&(X=setTimeout(de,ge))}function de(){!D().error&&(u||T().isVisible())&&(d||T().isOnline())?wt(lP).then(ce):ce()}return ce(),()=>{X&&(clearTimeout(X),X=-1)}},[l,u,d,y]),P.useDebugValue(te),i&&dn(se)&&y){if(!H6&&mC)throw new Error("Fallback data is required when using Suspense in SSR.");N.current=e,x.current=n,A.current=!1;const X=w[y];if(!dn(X)){const ce=Mt(X);cP(ce)}if(dn(ie)){const ce=wt(lP);dn(te)||(ce.status="fulfilled",ce.value=!0),cP(ce)}else throw ie}return{mutate:Mt,get data(){return W.data=!0,te},get error(){return W.error=!0,ie},get isValidating(){return W.isValidating=!0,Le},get isLoading(){return W.isLoading=!0,De}}},V6=lfe(dfe);class hfe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const ffe=V6.default||V6,pfe="https://react-tweet.vercel.app";async function gfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new hfe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const mfe=(t,e,n)=>{const{isLoading:r,data:s,error:i}=ffe(()=>e||t?[e||t&&`${pfe}/api/tweet/${t}`,n]:null,gfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},yfe=({id:t,apiUrl:e,fallback:n=m.jsx(Ihe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=mfe(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||Che;return m.jsx(l,{error:i?i(a):a})}return m.jsx(bhe,{tweet:o,components:r})};var DN={exports:{}},lV={},uV={exports:{}},wfe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",bfe=wfe,vfe=bfe;function dV(){}function hV(){}hV.resetWarningCache=dV;var Efe=function(){function t(r,s,i,o,a,c){if(c!==vfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:hV,resetWarningCache:dV};return n.PropTypes=n,n};uV.exports=Efe();var fV=uV.exports,Wk={exports:{}};function pV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=pV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function K6(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=pV(t))&&(r&&(r+=" "),r+=e);return r}Wk.exports=K6,Wk.exports.clsx=K6;var Cfe=Wk.exports,Dr={},lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.dontSetMe=Ife;lu.findInArray=_fe;lu.int=xfe;lu.isFunction=Afe;lu.isNum=Sfe;function _fe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function Afe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function Sfe(t){return typeof t=="number"&&!isNaN(t)}function xfe(t){return parseInt(t,10)}function Ife(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var Am={};Object.defineProperty(Am,"__esModule",{value:!0});Am.browserPrefixToKey=mV;Am.browserPrefixToStyle=Nfe;Am.default=void 0;Am.getPrefix=gV;const uP=["Moz","Webkit","O","ms"];function gV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<uP.length;s++)if(mV(t,uP[s])in e)return uP[s];return""}function mV(t,e){return e?`${e}${Tfe(t)}`:t}function Nfe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function Tfe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Am.default=gV();Object.defineProperty(Dr,"__esModule",{value:!0});Dr.addClassName=bV;Dr.addEvent=Pfe;Dr.addUserSelectStyles=Wfe;Dr.createCSSTransform=Bfe;Dr.createSVGTransform=$fe;Dr.getTouch=Ffe;Dr.getTouchIdentifier=jfe;Dr.getTranslation=bL;Dr.innerHeight=Mfe;Dr.innerWidth=Lfe;Dr.matchesSelector=wV;Dr.matchesSelectorAndParentsTo=Rfe;Dr.offsetXYFromParent=Ufe;Dr.outerHeight=kfe;Dr.outerWidth=Dfe;Dr.removeClassName=vV;Dr.removeEvent=Ofe;Dr.scheduleRemoveUserSelectStyles=zfe;var oa=lu,Y6=yV(Am);function yV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(yV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let yA="";function wV(t,e){return yA||(yA=(0,oa.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,oa.isFunction)(t[n])})),(0,oa.isFunction)(t[yA])?t[yA](e):!1}function Rfe(t,e,n){let r=t;do{if(wV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function Pfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Ofe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function kfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,oa.int)(n.borderTopWidth),e+=(0,oa.int)(n.borderBottomWidth),e}function Dfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,oa.int)(n.borderLeftWidth),e+=(0,oa.int)(n.borderRightWidth),e}function Mfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,oa.int)(n.paddingTop),e-=(0,oa.int)(n.paddingBottom),e}function Lfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,oa.int)(n.paddingLeft),e-=(0,oa.int)(n.paddingRight),e}function Ufe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Bfe(t,e){const n=bL(t,e,"px");return{[(0,Y6.browserPrefixToKey)("transform",Y6.default)]:n}}function $fe(t,e){return bL(t,e,"")}function bL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Ffe(t,e){return t.targetTouches&&(0,oa.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,oa.findInArray)(t.changedTouches,n=>e===n.identifier)}function jfe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Wfe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&bV(t.body,"react-draggable-transparent-selection")}function zfe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{Q6(t)}):Q6(t)}function Q6(t){if(t)try{if(t.body&&vV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function bV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function vV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.canDragX=qfe;uu.canDragY=Vfe;uu.createCoreData=Yfe;uu.createDraggableData=Qfe;uu.getBoundPosition=Hfe;uu.getControlPosition=Kfe;uu.snapToGrid=Gfe;var jo=lu,Qy=Dr;function Hfe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Jfe(r);const s=vL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,jo.int)(u.paddingLeft)+(0,jo.int)(l.marginLeft),top:-s.offsetTop+(0,jo.int)(u.paddingTop)+(0,jo.int)(l.marginTop),right:(0,Qy.innerWidth)(c)-(0,Qy.outerWidth)(s)-s.offsetLeft+(0,jo.int)(u.paddingRight)-(0,jo.int)(l.marginRight),bottom:(0,Qy.innerHeight)(c)-(0,Qy.outerHeight)(s)-s.offsetTop+(0,jo.int)(u.paddingBottom)-(0,jo.int)(l.marginBottom)}}return(0,jo.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,jo.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,jo.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,jo.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Gfe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function qfe(t){return t.props.axis==="both"||t.props.axis==="x"}function Vfe(t){return t.props.axis==="both"||t.props.axis==="y"}function Kfe(t,e,n){const r=typeof e=="number"?(0,Qy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=vL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Qy.offsetXYFromParent)(r||t,i,n.props.scale)}function Yfe(t,e,n){const r=!(0,jo.isNum)(t.lastX),s=vL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function Qfe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Jfe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function vL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var MN={},LN={};Object.defineProperty(LN,"__esModule",{value:!0});LN.default=Zfe;function Zfe(){}Object.defineProperty(MN,"__esModule",{value:!0});MN.default=void 0;var dP=EV(P),mi=EL(fV),Xfe=EL(pL),ti=Dr,jd=uu,hP=lu,hv=EL(LN);function EL(t){return t&&t.__esModule?t:{default:t}}function EV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(EV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function wi(t,e,n){return(e=epe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function epe(t){var e=tpe(t,"string");return typeof e=="symbol"?e:e+""}function tpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const gc={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Wd=gc.mouse,UN=class extends dP.Component{constructor(){super(...arguments),wi(this,"dragging",!1),wi(this,"lastX",NaN),wi(this,"lastY",NaN),wi(this,"touchIdentifier",null),wi(this,"mounted",!1),wi(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,ti.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,ti.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,ti.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,jd.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,jd.createCoreData)(this,o,a);(0,hv.default)("DraggableCore: handleDragStart: %j",c),(0,hv.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,ti.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,ti.addEvent)(r,Wd.move,this.handleDrag),(0,ti.addEvent)(r,Wd.stop,this.handleDragStop))}),wi(this,"handleDrag",e=>{const n=(0,jd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,jd.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,jd.createCoreData)(this,r,s);if((0,hv.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),wi(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,jd.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,jd.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,jd.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,ti.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,hv.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,hv.default)("DraggableCore: Removing handlers"),(0,ti.removeEvent)(a.ownerDocument,Wd.move,this.handleDrag),(0,ti.removeEvent)(a.ownerDocument,Wd.stop,this.handleDragStop))}),wi(this,"onMouseDown",e=>(Wd=gc.mouse,this.handleDragStart(e))),wi(this,"onMouseUp",e=>(Wd=gc.mouse,this.handleDragStop(e))),wi(this,"onTouchStart",e=>(Wd=gc.touch,this.handleDragStart(e))),wi(this,"onTouchEnd",e=>(Wd=gc.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,ti.addEvent)(e,gc.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,ti.removeEvent)(n,gc.mouse.move,this.handleDrag),(0,ti.removeEvent)(n,gc.touch.move,this.handleDrag),(0,ti.removeEvent)(n,gc.mouse.stop,this.handleDragStop),(0,ti.removeEvent)(n,gc.touch.stop,this.handleDragStop),(0,ti.removeEvent)(e,gc.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,ti.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Xfe.default.findDOMNode(this)}render(){return dP.cloneElement(dP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};MN.default=UN;wi(UN,"displayName","DraggableCore");wi(UN,"propTypes",{allowAnyClick:mi.default.bool,allowMobileScroll:mi.default.bool,children:mi.default.node.isRequired,disabled:mi.default.bool,enableUserSelectHack:mi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:mi.default.arrayOf(mi.default.number),handle:mi.default.string,cancel:mi.default.string,nodeRef:mi.default.object,onStart:mi.default.func,onDrag:mi.default.func,onStop:mi.default.func,onMouseDown:mi.default.func,scale:mi.default.number,className:hP.dontSetMe,style:hP.dontSetMe,transform:hP.dontSetMe});wi(UN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(P),n=u(fV),r=u(pL),s=Cfe,i=Dr,o=uu,a=lu,c=u(MN),l=u(LN);function u(y){return y&&y.__esModule?y:{default:y}}function d(y,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,N){if(!N&&C&&C.__esModule)return C;var x,T,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(x=N?A:v){if(x.has(C))return x.get(C);x.set(C,S)}for(const D in C)D!=="default"&&{}.hasOwnProperty.call(C,D)&&((T=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,D))&&(T.get||T.set)?x(S,D,T):S[D]=C[D]);return S})(y,b)}function h(){return h=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(y[A]=v[A])}return y},h.apply(null,arguments)}function f(y,b,v){return(b=p(b))in y?Object.defineProperty(y,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):y[b]=v,y}function p(y){var b=g(y,"string");return typeof b=="symbol"?b:b+""}function g(y,b){if(typeof y!="object"||!y)return y;var v=y[Symbol.toPrimitive];if(v!==void 0){var A=v.call(y,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),N={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:T,y:S}=N;N.x+=this.state.slackX,N.y+=this.state.slackY;const[D,O]=(0,o.getBoundPosition)(this,N.x,N.y);N.x=D,N.y=O,N.slackX=this.state.slackX+(T-N.x),N.slackY=this.state.slackY+(S-N.y),C.x=N.x,C.y=N.y,C.deltaX=N.x-this.state.x,C.deltaY=N.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(N)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const N={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:T,y:S}=this.props.position;N.x=T,N.y=S}this.setState(N)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:C,defaultClassName:N,defaultClassNameDragging:x,defaultClassNameDragged:T,position:S,positionOffset:D,scale:O,...$}=this.props;let G={},W=null;const R=!!!S||this.state.dragging,B=S||C,k={x:(0,o.canDragX)(this)&&R?this.state.x:B.x,y:(0,o.canDragY)(this)&&R?this.state.y:B.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(k,D):G=(0,i.createCSSTransform)(k,D);const M=(0,s.clsx)(A.props.className||"",N,{[x]:this.state.dragging,[T]:this.state.dragged});return e.createElement(c.default,h({},$,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...G},transform:W}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(lV);const{default:CV,DraggableCore:npe}=lV;DN.exports=CV;DN.exports.default=CV;DN.exports.DraggableCore=npe;var rpe=DN.exports;const r1=vm(rpe);function Er(){return Er=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Er.apply(null,arguments)}function _V(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var AV={exports:{}},Ln={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xs=typeof Symbol=="function"&&Symbol.for,CL=xs?Symbol.for("react.element"):60103,_L=xs?Symbol.for("react.portal"):60106,BN=xs?Symbol.for("react.fragment"):60107,$N=xs?Symbol.for("react.strict_mode"):60108,FN=xs?Symbol.for("react.profiler"):60114,jN=xs?Symbol.for("react.provider"):60109,WN=xs?Symbol.for("react.context"):60110,AL=xs?Symbol.for("react.async_mode"):60111,zN=xs?Symbol.for("react.concurrent_mode"):60111,HN=xs?Symbol.for("react.forward_ref"):60112,GN=xs?Symbol.for("react.suspense"):60113,spe=xs?Symbol.for("react.suspense_list"):60120,qN=xs?Symbol.for("react.memo"):60115,VN=xs?Symbol.for("react.lazy"):60116,ipe=xs?Symbol.for("react.block"):60121,ope=xs?Symbol.for("react.fundamental"):60117,ape=xs?Symbol.for("react.responder"):60118,cpe=xs?Symbol.for("react.scope"):60119;function fa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case CL:switch(t=t.type,t){case AL:case zN:case BN:case FN:case $N:case GN:return t;default:switch(t=t&&t.$$typeof,t){case WN:case HN:case VN:case qN:case jN:return t;default:return e}}case _L:return e}}}function SV(t){return fa(t)===zN}Ln.AsyncMode=AL;Ln.ConcurrentMode=zN;Ln.ContextConsumer=WN;Ln.ContextProvider=jN;Ln.Element=CL;Ln.ForwardRef=HN;Ln.Fragment=BN;Ln.Lazy=VN;Ln.Memo=qN;Ln.Portal=_L;Ln.Profiler=FN;Ln.StrictMode=$N;Ln.Suspense=GN;Ln.isAsyncMode=function(t){return SV(t)||fa(t)===AL};Ln.isConcurrentMode=SV;Ln.isContextConsumer=function(t){return fa(t)===WN};Ln.isContextProvider=function(t){return fa(t)===jN};Ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===CL};Ln.isForwardRef=function(t){return fa(t)===HN};Ln.isFragment=function(t){return fa(t)===BN};Ln.isLazy=function(t){return fa(t)===VN};Ln.isMemo=function(t){return fa(t)===qN};Ln.isPortal=function(t){return fa(t)===_L};Ln.isProfiler=function(t){return fa(t)===FN};Ln.isStrictMode=function(t){return fa(t)===$N};Ln.isSuspense=function(t){return fa(t)===GN};Ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===BN||t===zN||t===FN||t===$N||t===GN||t===spe||typeof t=="object"&&t!==null&&(t.$$typeof===VN||t.$$typeof===qN||t.$$typeof===jN||t.$$typeof===WN||t.$$typeof===HN||t.$$typeof===ope||t.$$typeof===ape||t.$$typeof===cpe||t.$$typeof===ipe)};Ln.typeOf=fa;AV.exports=Ln;var lpe=AV.exports,SL=lpe,upe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},dpe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},hpe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},xL={};xL[SL.ForwardRef]=hpe;xL[SL.Memo]=xV;function J6(t){return SL.isMemo(t)?xV:xL[t.$$typeof]||upe}var fpe=Object.defineProperty,ppe=Object.getOwnPropertyNames,Z6=Object.getOwnPropertySymbols,gpe=Object.getOwnPropertyDescriptor,mpe=Object.getPrototypeOf,X6=Object.prototype;function IV(t,e,n){if(typeof e!="string"){if(X6){var r=mpe(e);r&&r!==X6&&IV(t,r,n)}var s=ppe(e);Z6&&(s=s.concat(Z6(e)));for(var i=J6(t),o=J6(e),a=0;a<s.length;++a){var c=s[a];if(!dpe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=gpe(e,c);try{fpe(t,c,l)}catch{}}}}return t}var ype=IV;const wpe=vm(ype);var NV={};Object.defineProperty(NV,"__esModule",{value:!0});NV.default=bpe;function bpe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function wA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kx(){return Kx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kx.apply(this,arguments)}function vpe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function zd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Epe(t){var e=function(n){vpe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,wA(zd(zd(i)),"cachedTheme",void 0),wA(zd(zd(i)),"lastOuterTheme",void 0),wA(zd(zd(i)),"lastTheme",void 0),wA(zd(zd(i)),"renderProvider",function(l){var u=i.props.children;return sa.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?Kx({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?sa.createElement(t.Consumer,null,this.renderProvider):null},r}(sa.Component);return e}function Cpe(t){return function(n){var r=sa.forwardRef(function(s,i){return sa.createElement(t.Consumer,null,function(o){return sa.createElement(n,Kx({theme:o,ref:i},s))})});return wpe(r,n),r}}function _pe(t){var e=function(){var r=sa.useContext(t);return r};return e}function Ape(t){return{context:t,withTheme:Cpe(t),useTheme:_pe(t),ThemeProvider:Epe(t)}}var TV=P.createContext();Ape(TV);var e8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sb=(typeof window>"u"?"undefined":e8(window))==="object"&&(typeof document>"u"?"undefined":e8(document))==="object"&&document.nodeType===9;function yC(t){"@babel/helpers - typeof";return yC=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yC(t)}function Spe(t,e){if(yC(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yC(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function xpe(t){var e=Spe(t,"string");return yC(e)=="symbol"?e:e+""}function Ipe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xpe(r.key),r)}}function IL(t,e,n){return e&&Ipe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zk(t,e){return zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},zk(t,e)}function RV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,zk(t,e)}function t8(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Npe={}.constructor;function Hk(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Hk);if(t.constructor!==Npe)return t;var e={};for(var n in t)e[n]=Hk(t[n]);return e}function KN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Hk(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var n8=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},Og=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=n8(e[r]," ");else n=n8(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function xb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function fv(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function wC(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=xb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=fv(f+":"+u+Og(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=fv(g+":"+u+Og(w)+";",o))}for(var y in e){var b=e[y];b!=null&&y!=="fallbacks"&&(r&&(r+=l),r+=fv(y+":"+u+Og(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),fv(""+t+u+"{"+r,o)+fv("}",o))}var Tpe=/([[\].#*$><+~=|^:(),"'`\s])/g,r8=typeof CSS<"u"&&CSS.escape,NL=function(t){return r8?r8(t):t.replace(Tpe,"\\$1")},PV=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),Gk=function(t){RV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(t8(t8(o)),l),o.selectorText="."+NL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=Og(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Er({},s,{allowEmpty:!0}):s;return wC(this.selectorText,this.style,a)},IL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(PV),Rpe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Gk(e,n,r)}},fP={indent:1,children:!0},Ppe=/@([\w-]+)/,Ope=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(Ppe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new YN(Er({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=fP);var s=xb(r),i=s.linebreak;if(r.indent==null&&(r.indent=fP.indent),r.children==null&&(r.children=fP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),kpe=/@container|@media|@supports\s+/,Dpe={onCreateRule:function(e,n,r){return kpe.test(e)?new Ope(e,n,r):null}},pP={indent:1,children:!0},Mpe=/@keyframes\s+([\w-]+)/,qk=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Mpe);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:NL(c(this,a)),this.rules=new YN(Er({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],Er({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=pP);var s=xb(r),i=s.linebreak;if(r.indent==null&&(r.indent=pP.indent),r.children==null&&(r.children=pP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Lpe=/@keyframes\s+/,Upe=/\$([\w-]+)/g,Vk=function(e,n){return typeof e=="string"?e.replace(Upe,function(r,s){return s in n?n[s]:r}):e},s8=function(e,n,r){var s=e[n],i=Vk(s,r);i!==s&&(e[n]=i)},Bpe={onCreateRule:function(e,n,r){return typeof e=="string"&&Lpe.test(e)?new qk(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&s8(e,"animation-name",r.keyframes),"animation"in e&&s8(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return Vk(e,s.keyframes);case"animation-name":return Vk(e,s.keyframes);default:return e}}},$pe=function(t){RV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?Er({},s,{allowEmpty:!0}):s;return wC(this.key,this.style,a)},e}(PV),Fpe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new $pe(e,n,r):null}},jpe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=xb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=wC(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return wC(this.at,this.style,r)},t}(),Wpe=/@font-face/,zpe={onCreateRule:function(e,n,r){return Wpe.test(e)?new jpe(e,n,r):null}},Hpe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return wC(this.key,this.style,r)},t}(),Gpe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new Hpe(e,n,r):null}},qpe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),Vpe={"@charset":!0,"@import":!0,"@namespace":!0},Kpe={onCreateRule:function(e,n,r){return e in Vpe?new qpe(e,n,r):null}},i8=[Rpe,Dpe,Bpe,Fpe,zpe,Gpe,Kpe],Ype={process:!0},o8={force:!0,process:!0},YN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=Er({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+NL(this.classes[p]));var g=KN(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=Er({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Gk?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof qk&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Gk?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof qk&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Ype);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,o8)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,o8)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=xb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),OV=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=Er({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new YN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),Qpe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Jpe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=_V(s,["attached"]),a=xb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},IL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),CE=new Jpe,Kk=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),Yk="2f1acc6c3a606b082e5eef5e54414ffb";Kk[Yk]==null&&(Kk[Yk]=0);var a8=Kk[Yk]++,c8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+a8+a+n:c+i.key+"-"+a8+(a?"-"+a:"")+"-"+n};return r},kV=function(e){var n;return function(){return n||(n=e()),n}},Zpe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},Xpe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=Og(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},ege=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},tge=function(e,n){return e.selectorText=n,e.selectorText===n},DV=kV(function(){return document.querySelector("head")});function nge(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function rge(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function sge(t){for(var e=DV(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function ige(t){var e=CE.registry;if(e.length>0){var n=nge(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=rge(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=sge(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function oge(t,e){var n=e.insertionPoint,r=ige(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}DV().appendChild(t)}var age=kV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),l8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},u8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},cge=function(){var e=document.createElement("style");return e.textContent=`
`,e},lge=function(){function t(n){this.getPropertyValue=Zpe,this.setProperty=Xpe,this.removeProperty=ege,this.setSelector=tge,this.hasInsertedRules=!1,this.cssRules=[],n&&CE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||cge(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=age();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){oge(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=u8(i,s);if(a=l8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=u8(i,s),d=l8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof OV&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),uge=0,dge=function(){function t(n){this.id=uge++,this.version="10.10.0",this.plugins=new Qpe,this.options={id:{minify:!1},createGenerateId:c8,Renderer:Sb?lge:null,plugins:[]},this.generateId=c8({minify:!1});for(var r=0;r<i8.length;r++)this.plugins.use(i8[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=Er({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=CE.index===0?0:CE.index+1);var a=new OV(r,Er({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),CE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=Er({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=KN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),MV=function(e){return new dge(e)},d8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},IL(t,[{key:"size",get:function(){return this.length}}]),t}(),TL=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function LV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=LV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */MV();var UV=Date.now(),gP="fnValues"+UV,mP="fnStyle"+ ++UV,hge=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=KN(n,{},s);return i[mP]=r,i},onProcessStyle:function(n,r){if(gP in r||mP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[gP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[mP];a&&(o.style=a(n)||{});var c=o[gP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function fge(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var Ny;typeof self<"u"?Ny=self:typeof window<"u"?Ny=window:typeof global<"u"?Ny=global:typeof module<"u"?Ny=module:Ny=Function("return this")();var h8=fge(Ny),f8=function(e){return e&&e[h8]&&e===e[h8]()},pge=function(e){return{onCreateRule:function(r,s,i){if(!f8(s))return null;var o=s,a=KN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!f8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},gge=/;\n/,mge=function(e){for(var n={},r=e.split(gge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},yge=function(e){typeof e.style=="string"&&(e.style=mge(e.style))};function wge(){return{onProcessRule:yge}}var mf="@global",Qk="@global ",bge=function(){function t(n,r,s){this.type="global",this.at=mf,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new YN(Er({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),vge=function(){function t(n,r,s){this.type="global",this.at=mf,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(Qk.length);this.rule=s.jss.createRule(i,r,Er({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),Ege=/\s*,\s*/g;function BV(t,e){for(var n=t.split(Ege),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function Cge(t,e){var n=t.options,r=t.style,s=r?r[mf]:null;if(s){for(var i in s)e.addRule(i,s[i],Er({},n,{selector:BV(i,t.selector)}));delete r[mf]}}function _ge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,mf.length)!==mf)){var i=BV(s.substr(mf.length),t.selector);e.addRule(i,r[s],Er({},n,{selector:i})),delete r[s]}}function Age(){function t(n,r,s){if(!n)return null;if(n===mf)return new bge(n,r,s);if(n[0]==="@"&&n.substr(0,Qk.length)===Qk)return new vge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(Cge(n,r),_ge(n,r))}return{onCreateRule:t,onProcessRule:e}}var xS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},yP="extendCurrValue"+Date.now();function Sge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];zp(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?Er({},t,{extend:l}):t.extend[c];zp(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){zp(t.extend.extend,e,n,r);continue}if(xS(t.extend[d])){d in r||(r[d]={}),zp(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function xge(t,e,n,r){for(var s in t)if(s!=="extend"){if(xS(r[s])&&xS(t[s])){zp(t[s],e,n,r[s]);continue}if(xS(t[s])){r[s]=zp(t[s],e,n);continue}r[s]=t[s]}}function zp(t,e,n,r){return r===void 0&&(r={}),Sge(t,e,n,r),xge(t,e,n,r),r}function Ige(){function t(n,r,s){return"extend"in n?zp(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[yP])s.prop(i,null);return s[yP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[yP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var p8=/\s*,\s*/g,Nge=/&/g,Tge=/\$([\w-]+)/g;function Rge(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(p8),a=s.split(p8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(Nge,u):u+" "+h}return c}function n(s,i,o){if(o)return Er({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=Er({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(Tge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],Er({},l,{selector:p})):c.addRule(g,s[d],Er({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function Jk(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=Jk(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return Jk(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function Pge(){function t(e,n){return"composes"in e&&(Jk(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Oge=/[A-Z]/g,kge=/^ms-/,wP={};function Dge(t){return"-"+t.toLowerCase()}function $V(t){if(wP.hasOwnProperty(t))return wP[t];var e=t.replace(Oge,Dge);return wP[t]=kge.test(e)?"-"+e:e}function Yx(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:$V(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Yx):e.fallbacks=Yx(t.fallbacks)),e}function Mge(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Yx(n[r]);return n}return Yx(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=$V(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=TL&&CSS?CSS.px:"px",bA=TL&&CSS?CSS.ms:"ms",Xm=TL&&CSS?CSS.percent:"%",Lge={"animation-delay":bA,"animation-duration":bA,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Xm,"perspective-origin-y":Xm,"transform-origin":Xm,"transform-origin-x":Xm,"transform-origin-y":Xm,"transform-origin-z":Xm,"transition-delay":bA,"transition-duration":bA,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function FV(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var Uge=FV(Lge);function _E(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=_E(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=_E(s,e[s],n);else for(var i in e)e[i]=_E(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||Uge[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Bge(t){t===void 0&&(t={});var e=FV(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=_E(o,s[o],e);return s}function r(s,i){return _E(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var $ge={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Fge={position:!0,size:!0},vA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},bP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function jge(t,e,n){return t.map(function(r){return WV(r,e,n,!1,!0)})}function jV(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?jV(t[0],e,n,r):typeof t[0]=="object"?jge(t,e,r):[t]}function WV(t,e,n,r,s){if(!(vA[e]||bP[e]))return[];var i=[];if(bP[e]&&(t=Wge(t,n,bP[e],r)),Object.keys(t).length)for(var o in vA[e]){if(t[o]){Array.isArray(t[o])?i.push(Fge[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}vA[e][o]!=null&&i.push(vA[e][o])}return!i.length||s?i:[i]}function Wge(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=bC((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function bC(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=bC(t.fallbacks[i],e,!0);continue}t[r]=jV(s,r,$ge,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=bC(t.fallbacks,e,!0);continue}t[r]=WV(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function zge(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=bC(e[r],n);return e}return bC(e,n)}return{onProcessStyle:t}}function Zk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Hge(t){if(Array.isArray(t))return Zk(t)}function Gge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qge(t,e){if(t){if(typeof t=="string")return Zk(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zk(t,e):void 0}}function Vge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kge(t){return Hge(t)||Gge(t)||qge(t)||Vge()}var Wv="",Xk="",zV="",HV="",Yge=Sb&&"ontouchstart"in document.documentElement;if(Sb){var vP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Qge=document.createElement("p"),EP=Qge.style,Jge="Transform";for(var CP in vP)if(CP+Jge in EP){Wv=CP,Xk=vP[CP];break}Wv==="Webkit"&&"msHyphens"in EP&&(Wv="ms",Xk=vP.ms,HV="edge"),Wv==="Webkit"&&"-apple-trailing-word"in EP&&(zV="apple")}var Ft={js:Wv,css:Xk,vendor:zV,browser:HV,isTouch:Yge};function Zge(t){return t[1]==="-"||Ft.js==="ms"?t:"@"+Ft.css+"keyframes"+t.substr(10)}var Xge={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ft.js==="ms"?"-webkit-"+e:Ft.css+e}},eme={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ft.js==="Webkit"?Ft.css+"print-"+e:e}},tme=/[-\s]+(.)?/g;function nme(t,e){return e?e.toUpperCase():""}function RL(t){return t.replace(tme,nme)}function kf(t){return RL("-"+t)}var rme={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ft.js==="Webkit"){var r="mask-image";if(RL(r)in n)return e;if(Ft.js+kf(r)in n)return Ft.css+e}return e}},sme={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ft.vendor==="apple"&&!Ft.isTouch?Ft.css+e:e}},ime={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ft.css+e}},ome={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ft.css+e}},ame={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ft.js==="Webkit"||Ft.js==="ms"&&Ft.browser!=="edge"?Ft.css+e:e}},cme={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ft.js==="Moz"||Ft.js==="ms"||Ft.vendor==="apple"?Ft.css+e:e}},lme={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ft.js==="Webkit"){var r="WebkitColumn"+kf(e);return r in n?Ft.css+"column-"+e:!1}if(Ft.js==="Moz"){var s="page"+kf(e);return s in n?"page-"+e:!1}return!1}},ume={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ft.js==="Moz")return e;var r=e.replace("-inline","");return Ft.js+kf(r)in n?Ft.css+r:!1}},dme={supportedProperty:function(e,n){return RL(e)in n?e:!1}},hme={supportedProperty:function(e,n){var r=kf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ft.js+r in n?Ft.css+e:Ft.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},fme={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ft.js==="ms"?""+Ft.css+e:e}},pme={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ft.js==="ms"?Ft.css+"scroll-chaining":e}},gme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},mme={supportedProperty:function(e,n){var r=gme[e];return r&&Ft.js+kf(r)in n?Ft.css+r:!1}},GV={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},yme=Object.keys(GV),wme=function(e){return Ft.css+e},bme={supportedProperty:function(e,n,r){var s=r.multiple;if(yme.indexOf(e)>-1){var i=GV[e];if(!Array.isArray(i))return Ft.js+kf(i)in n?Ft.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Ft.js+kf(i[0])in n))return!1;return i.map(wme)}return!1}},qV=[Xge,eme,rme,sme,ime,ome,ame,cme,lme,ume,dme,hme,fme,pme,mme,bme],g8=qV.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),vme=qV.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Kge(e.noPrefill)),t},[]),zv,Np={};if(Sb){zv=document.createElement("p");var _P=window.getComputedStyle(document.documentElement,"");for(var AP in _P)isNaN(AP)||(Np[_P[AP]]=_P[AP]);vme.forEach(function(t){return delete Np[t]})}function eD(t,e){if(e===void 0&&(e={}),!zv)return t;if(Np[t]!=null)return Np[t];(t==="transition"||t==="transform")&&(e[t]=t in zv.style);for(var n=0;n<g8.length&&(Np[t]=g8[n](t,zv.style,e),!Np[t]);n++);try{zv.style[t]=""}catch{return!1}return Np[t]}var ey={},Eme={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Cme=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,oh;function _me(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?eD(e):", "+eD(n);return r||e||n}Sb&&(oh=document.createElement("p"));function m8(t,e){var n=e;if(!oh||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(ey[r]!=null)return ey[r];try{oh.style[t]=n}catch{return ey[r]=!1,!1}if(Eme[t])n=n.replace(Cme,_me);else if(oh.style[t]===""&&(n=Ft.css+n,n==="-ms-flex"&&(oh.style[t]="-ms-flexbox"),oh.style[t]=n,oh.style[t]===""))return ey[r]=!1,!1;return oh.style[t]="",ey[r]=n,ey[r]}function Ame(){function t(s){if(s.type==="keyframes"){var i=s;i.at=Zge(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=eD(i);c&&c!==i&&(a=!0);var l=!1,u=m8(c,Og(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return m8(i,Og(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function Sme(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var xme=function(e){return e===void 0&&(e={}),{plugins:[hge(),pge(e.observable),wge(),Age(),Ige(),Rge(),Pge(),Mge(),Bge(e.defaultUnit),zge(),Ame(),Sme()]}},Ime=Number.MIN_SAFE_INTEGER||-1e9,Nme=function(){return Ime++},Tme=P.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!Sb}),y8=new Map,PL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new d8),r[n];var s=y8.get(n);return s||(s=new d8,y8.set(n,s)),s},w8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=PL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},Rme=function(e){if(e.sheet){var n=PL(e.context,e.index);n.unmanage(e.theme)}},Pme=MV(xme()),VV=new WeakMap,KV=function(e){return VV.get(e)},Ome=function(e,n){VV.set(e,n)},kme=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function Dme(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",Er({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Mme=function(e){if(!e.context.disableStylesGeneration){var n=PL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||Pme,i=kme(e),o=LV(i),a=s.createStyleSheet(i,Dme(e,o!==null));return Ome(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Lme=function(e,n){for(var r in n)e.deleteRule(n[r])},Ume=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Bme=function(e,n){var r=KV(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},$me=function(e,n){if(!n)return e.classes;var r=KV(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function b8(t){return t?P.useEffect:sa.useInsertionEffect||P.useLayoutEffect}var SP={},Xc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?Nme():s,o=r.theming,a=r.name,c=_V(r,["index","theming","name"]),l=o&&o.context||TV,u=function(f){return typeof e=="function"&&(f||P.useContext(l))||SP},d={};return function(f){var p=P.useRef(!0),g=P.useContext(Tme),w=u(f&&f.theme),y=P.useMemo(function(){var C=Mme({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&w8({index:i,context:g,sheet:C,theme:w}),[C,C?Bme(C,f):null]},[g,w]),b=y[0],v=y[1];b8(g.isSSR)(function(){b&&v&&!p.current&&Ume(f,b,v)},[f]),b8(g.isSSR)(function(){return b&&w8({index:i,context:g,sheet:b,theme:w}),function(){b&&(Rme({index:i,context:g,sheet:b,theme:w}),v&&Lme(b,v))}},[b]);var A=P.useMemo(function(){return b&&v?$me(b,v):d},[b,v]);return P.useDebugValue(A),P.useDebugValue(w===SP?"No theme":w),P.useEffect(function(){p.current=!1}),A}};const Fme=Xc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function xP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Fme(),d=P.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=m.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[m.jsx("img",{src:t,alt:e,className:u.iconImage}),m.jsx("span",{className:u.iconLabel,children:e})]});return o?f:m.jsx(r1,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const jme=Xc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function Ia({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=jme({isOpen:e}),u=P.useRef(null),d=()=>{r&&r(t)};return m.jsx(r1,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:m.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[m.jsxs("div",{className:l.header,children:[m.jsx("span",{children:i||t.replace("-popup","")}),m.jsxs("div",{className:l.titleBarButtons,children:[m.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),m.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),m.jsx("div",{className:l.content,children:s})]})})}const IP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Wme=80,zme=80,Hme=10,Gme=10,qme=10,Vme=10,Kme=({onIconClick:t})=>{const e=IP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:qme+d*(Wme+Hme),y:Vme+u*(zme+Gme)},u++,u>=4&&(u=0,d++)}),l},[r,s]=P.useState(n()),[i,o]=P.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return m.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:m.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>m.jsx(xP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&m.jsx(Ia,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:IP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>m.jsx(xP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&m.jsx(Ia,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:IP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>m.jsx(xP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},Yme=Xc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),Qme=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=P.useState(!1),[o,a]=P.useState(new Date),c=Yme({isOpen:s});P.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return m.jsxs("div",{className:c.taskbar,children:[m.jsxs("div",{className:c.leftSection,children:[m.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),m.jsx("div",{className:c.windows,children:t.map(h=>m.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),m.jsxs("div",{className:c.rightSection,children:[m.jsxs("div",{className:c.statusSection,children:[m.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:m.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),m.jsx("div",{className:c.clock,children:l(o)})]}),s&&m.jsxs("div",{className:c.menu,children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function YV(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function OL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function QV(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function kL(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function JV(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function ZV(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,y,b,v,A,C,N,x,T,S,D,O,$,G,W,I,R,B,k,M,j,q,se,ie,Y;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((T=(x=(N=u.content)==null?void 0:N.files)==null?void 0:x[0])==null?void 0:T.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:(($=(O=u.content)==null?void 0:O.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:j.uri)||((se=(q=u.content)==null?void 0:q.metadata)==null?void 0:se.image)||"",animation_url:((Y=(ie=u.content)==null?void 0:ie.metadata)==null?void 0:Y.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function Jme(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,y,b,v,A,C,N,x,T,S,D,O,$,G,W,I,R,B,k,M,j,q,se,ie,Y,te,fe;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((y=(w=u.content)==null?void 0:w.metadata)==null?void 0:y.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((T=(x=(N=u.content)==null?void 0:N.files)==null?void 0:x[0])==null?void 0:T.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:(($=(O=u.content)==null?void 0:O.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(k=u.content)==null?void 0:k.files)==null?void 0:M[0])==null?void 0:j.uri)||((se=(q=u.content)==null?void 0:q.metadata)==null?void 0:se.image)||"",animation_url:((Y=(ie=u.content)==null?void 0:ie.metadata)==null?void 0:Y.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((fe=(te=u.grouping)==null?void 0:te.find(Xe=>Xe.group_key==="collection"))==null?void 0:fe.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const Zme=Xc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),Xme=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=Zme({isOpen:t}),i=P.useRef(null),[o,a]=P.useState([]),[c,l]=P.useState(!1),[u,d]=P.useState(!1),[h,f]=P.useState({}),[p,g]=P.useState(null),[w,y]=P.useState(null);P.useEffect(()=>{t&&r&&b()},[t,r]);const b=async()=>{l(!0),g(null);try{const x=await YV(r);a(x);const T={};x.forEach(S=>{T[S.id]=0}),f(T)}catch(x){g(x.message)}finally{l(!1)}},v=(x,T)=>{f(S=>({...S,[x]:Math.max(0,T)}))},A=async()=>{const x=Object.entries(h).filter(([,T])=>T>0).map(([T,S])=>({id:T,quantity:S}));if(x.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const T=await QV(r,x);if(console.log("Mint API result:",T),T.success&&T.mintTransaction){console.log("Got mint transaction:",T.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const S=await w.sendTransaction({to:T.mintTransaction.to,value:BigInt(T.mintTransaction.value),data:T.mintTransaction.data});console.log("Transaction sent successfully:",S),alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){console.error("Transaction sending failed:",S),g("Transaction failed: "+S.message)}}else throw new Error(T.message||"Could not retrieve minting transaction.")}catch(T){console.error("Minting failed:",T),g("Minting failed: "+T.message)}finally{d(!1)}},C=(x,T)=>`${parseFloat(x)} ${T}`,N=()=>{n&&n()};return t?m.jsx(r1,{nodeRef:i,handle:`.${s.header}`,children:m.jsxs("div",{ref:i,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"Mint Pixelawbster"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:N,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsxs("div",{className:s.content,children:[p&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?m.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{children:"Available Lists:"}),o.map(x=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",C(x.token_price,x.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),m.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[m.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),m.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:T=>v(x.id,parseInt(T.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),m.jsx("button",{onClick:()=>void A(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},XV=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",eK=({src:t,alt:e,style:n})=>{const[r,s]=P.useState(t),[i,o]=P.useState(!1),[a,c]=P.useState(0);P.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?m.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):m.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},eye=Xc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),tye=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},nye=({nft:t,onClose:e})=>{const n=eye(),r=P.useRef(null),s=tye(t.attributes);return m.jsx(r1,{nodeRef:r,handle:`.${n.header}`,children:m.jsxs("div",{className:n.popup,ref:r,children:[m.jsxs("div",{className:n.header,children:[m.jsxs("span",{children:[t.name," - Details"]}),m.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),m.jsxs("div",{className:n.content,children:[m.jsx(eK,{src:XV(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),m.jsx("h3",{children:"Traits"}),m.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):m.jsx("li",{children:"No traits found."})})]})]})})},rye=Symbol(),v8=Object.getPrototypeOf,tD=new WeakMap,sye=t=>t&&(tD.has(t)?tD.get(t):v8(t)===Object.prototype||v8(t)===Array.prototype),iye=t=>sye(t)&&t[rye]||null,E8=(t,e=!0)=>{tD.set(t,e)},Qx={},NP=t=>typeof t=="object"&&t!==null,hh=new WeakMap,Hv=new WeakSet,oye=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>NP(l)&&!Hv.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return E8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),y={value:g,enumerable:w,configurable:!0};if(Hv.has(g))E8(g,!1);else if(g instanceof Promise)delete y.value,y.get=()=>d(g);else if(hh.has(g)){const[b,v]=hh.get(g);y.value=i(b,v(),d)}Object.defineProperty(f,p,y)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!NP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,D=++a[0])=>{d!==D&&(d=D,h.forEach(O=>O(S,D)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,y.forEach(([D])=>{const O=D[1](S);O>d&&(d=O)})),d),w=S=>(D,O)=>{const $=[...D];$[1]=[S,...$[1]],f($,O)},y=new Map,b=(S,D)=>{if((Qx?"production":void 0)!=="production"&&y.has(S))throw new Error("prop listener already exists");if(h.size){const O=D[3](w(S));y.set(S,[D,O])}else y.set(S,[D])},v=S=>{var D;const O=y.get(S);O&&(y.delete(S),(D=O[1])==null||D.call(O))},A=S=>(h.add(S),h.size===1&&y.forEach(([O,$],G)=>{if((Qx?"production":void 0)!=="production"&&$)throw new Error("remove already exists");const W=O[3](w(G));y.set(G,[O,W])}),()=>{h.delete(S),h.size===0&&y.forEach(([O,$],G)=>{$&&($(),y.set(G,[O]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(S,D){const O=Reflect.get(S,D);v(D);const $=Reflect.deleteProperty(S,D);return $&&f(["delete",[D],O]),$},set(S,D,O,$){const G=Reflect.has(S,D),W=Reflect.get(S,D,$);if(G&&(t(W,O)||o.has(O)&&t(W,o.get(O))))return!0;v(D),NP(O)&&(O=iye(O)||O);let I=O;if(O instanceof Promise)O.then(R=>{O.status="fulfilled",O.value=R,f(["resolve",[D],R])}).catch(R=>{O.status="rejected",O.reason=R,f(["reject",[D],R])});else{!hh.has(O)&&n(O)&&(I=c(O));const R=!Hv.has(I)&&hh.get(I);R&&b(D,R)}return Reflect.set(S,D,I,$),f(["set",[D],O,W]),!0}});o.set(l,x);const T=[C,g,i,A];return hh.set(x,T),Reflect.ownKeys(l).forEach(S=>{const D=Object.getOwnPropertyDescriptor(l,S);"value"in D&&(x[S]=l[S],delete D.value,delete D.writable),Object.defineProperty(C,S,D)}),x})=>[c,hh,Hv,t,e,n,r,s,i,o,a],[aye]=oye();function lr(t={}){return aye(t)}function hi(t,e,n){const r=hh.get(t);(Qx?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function vC(t,e){const n=hh.get(t);(Qx?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Yg(t){return Hv.add(t),t}function pi(t,e,n,r){let s=t[e];return hi(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function cye(t){const e=lr({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var C8={};const je={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof C8<"u"?C8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},tK={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=je.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var lye=20,uye=1,Qg=1e6,_8=1e6,dye=-7,hye=21,fye=!1,s1="[big.js] ",Sm=s1+"Invalid ",QN=Sm+"decimal places",pye=Sm+"rounding mode",nK=s1+"Division by zero",Mn={},Kl=void 0,gye=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function rK(){function t(e){var n=this;if(!(n instanceof t))return e===Kl?rK():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(Sm+"value");e=e===0&&1/e<0?"-0":String(e)}mye(n,e)}n.constructor=t}return t.prototype=Mn,t.DP=lye,t.RM=uye,t.NE=dye,t.PE=hye,t.strict=fye,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function mye(t,e){var n,r,s;if(!gye.test(e))throw Error(Sm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function xm(t,e,n,r){var s=t.c;if(n===Kl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(pye);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Kl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Kl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function Im(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}Mn.abs=function(){var t=new this.constructor(this);return t.s=1,t};Mn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};Mn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Qg)throw Error(QN);if(!s[0])throw Error(nK);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,y=t,b=y.c=[],v=0,A=o+(y.e=e.e-t.e)+1;for(y.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Kl)&&i--);return!b[0]&&v!=1&&(b.shift(),y.e--,A--),v>A&&xm(y,A,n.RM,g[0]!==Kl),y};Mn.eq=function(t){return this.cmp(t)===0};Mn.gt=function(t){return this.cmp(t)>0};Mn.gte=function(t){return this.cmp(t)>-1};Mn.lt=function(t){return this.cmp(t)<0};Mn.lte=function(t){return this.cmp(t)<1};Mn.minus=Mn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};Mn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(nK);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};Mn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};Mn.plus=Mn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};Mn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-_8||t>_8)throw Error(Sm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};Mn.prec=function(t,e){if(t!==~~t||t<1||t>Qg)throw Error(Sm+"precision");return xm(new this.constructor(this),t,e)};Mn.round=function(t,e){if(t===Kl)t=0;else if(t!==~~t||t<-Qg||t>Qg)throw Error(QN);return xm(new this.constructor(this),t+this.e+1,e)};Mn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(s1+"No square root");i=Math.sqrt(+Im(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return xm(t,(s.DP-=4)+t.e+1,s.RM)};Mn.times=Mn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};Mn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Kl){if(t!==~~t||t<0||t>Qg)throw Error(QN);for(n=xm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return Im(n,!0,!!r)};Mn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Kl){if(t!==~~t||t<0||t>Qg)throw Error(QN);for(n=xm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return Im(n,!1,!!r)};Mn[Symbol.for("nodejs.util.inspect.custom")]=Mn.toJSON=Mn.toString=function(){var t=this,e=t.constructor;return Im(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};Mn.toNumber=function(){var t=+Im(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(s1+"Imprecise conversion");return t};Mn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Kl){if(t!==~~t||t<1||t>Qg)throw Error(Sm+"precision");for(n=xm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return Im(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};Mn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(s1+"valueOf disallowed");return Im(t,t.e<=e.NE||t.e>=e.PE,!0)};var $l=rK();const yye={bigNumber(t){return t?new $l(t):new $l(0)},multiply(t,e){if(t===void 0||e===void 0)return new $l(0);const n=new $l(t),r=new $l(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},wye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],bye=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],vye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],Eye={getERC20Abi:t=>je.USDT_CONTRACT_ADDRESSES.includes(t)?vye:wye,getSwapAbi:()=>bye},Hd={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Ut={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function TP(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Pt={setItem(t,e){Gv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Gv())return localStorage.getItem(t)||void 0},removeItem(t){Gv()&&localStorage.removeItem(t)},clear(){Gv()&&localStorage.clear()}};function Gv(){return typeof window<"u"&&typeof localStorage<"u"}function td(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var A8={};const RP=(typeof process<"u"&&typeof A8<"u"?A8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",sK=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],Cye="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",jn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:RP,SECURE_SITE_DASHBOARD:`${RP}/dashboard`,SECURE_SITE_FAVICON:`${RP}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Qe={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Qe.getActiveNamespace(),e=Qe.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Pt.setItem(Ut.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Pt.getItem(Ut.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Pt.removeItem(Ut.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Pt.setItem(Ut.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Pt.setItem(Ut.ACTIVE_CAIP_NETWORK_ID,t),Qe.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Pt.getItem(Ut.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Pt.removeItem(Ut.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=TP(t);Pt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Qe.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Pt.setItem(Ut.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Pt.getItem(Ut.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=TP(t);Pt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Pt.getItem(Ut.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=TP(t);return Pt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Pt.setItem(Ut.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Pt.getItem(Ut.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Pt.removeItem(Ut.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Pt.getItem(Ut.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Pt.getItem(Ut.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Pt.setItem(Ut.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Pt.getItem(Ut.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Pt.getItem(Ut.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Pt.setItem(Ut.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces();e.includes(t)||(e.push(t),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Qe.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Qe.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Pt.getItem(Ut.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Pt.setItem(Ut.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Pt.removeItem(Ut.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Pt.getItem(Ut.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Qe.getBalanceCache();Pt.setItem(Ut.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Qe.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Qe.getBalanceCache();e[t.caipAddress]=t,Pt.setItem(Ut.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Pt.getItem(Ut.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Qe.getBalanceCache();Pt.setItem(Ut.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Qe.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Qe.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Qe.getNativeBalanceCache();e[t.caipAddress]=t,Pt.setItem(Ut.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Pt.getItem(Ut.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Qe.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Qe.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Qe.getEnsCache();e[t.address]=t,Pt.setItem(Ut.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Qe.getEnsCache();Pt.setItem(Ut.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Pt.getItem(Ut.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Qe.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Qe.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Qe.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Pt.setItem(Ut.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Qe.getIdentityCache();Pt.setItem(Ut.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Pt.removeItem(Ut.PORTFOLIO_CACHE),Pt.removeItem(Ut.NATIVE_BALANCE_CACHE),Pt.removeItem(Ut.ENS_CACHE),Pt.removeItem(Ut.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Pt.setItem(Ut.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Pt.getItem(Ut.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Qe.getConnections(),[e]:t};Pt.setItem(Ut.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Pt.getItem(Ut.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ot={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ot.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=jn.TEN_SEC_MS:!0},isAllowedRetry(t,e=jn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ot.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+jn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ot.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ot.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Qe.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ot.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return je.W3M_API_URL},getBlockchainApiUrl(){return je.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return je.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?jn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in je.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function pv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let i1=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await pv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await pv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const _ye={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?jn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ot.isTelegram()){if(ot.isIos())return t.filter(e=>e!=="google");if(ot.isMac())return t.filter(e=>e!=="x");if(ot.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},mt=lr({features:jn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:jn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),ve={state:mt,subscribeKey(t,e){return pi(mt,t,e)},setOptions(t){Object.assign(mt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...mt.remoteFeatures,...t};mt.remoteFeatures=e,(n=mt.remoteFeatures)!=null&&n.socials&&(mt.remoteFeatures.socials=_ye.filterSocialsByPlatform(mt.remoteFeatures.socials))},setFeatures(t){if(!t)return;mt.features||(mt.features=jn.DEFAULT_FEATURES);const e={...mt.features,...t};mt.features=e},setProjectId(t){mt.projectId=t},setCustomRpcUrls(t){mt.customRpcUrls=t},setAllWallets(t){mt.allWallets=t},setIncludeWalletIds(t){mt.includeWalletIds=t},setExcludeWalletIds(t){mt.excludeWalletIds=t},setFeaturedWalletIds(t){mt.featuredWalletIds=t},setTokens(t){mt.tokens=t},setTermsConditionsUrl(t){mt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){mt.privacyPolicyUrl=t},setCustomWallets(t){mt.customWallets=t},setIsSiweEnabled(t){mt.isSiweEnabled=t},setIsUniversalProvider(t){mt.isUniversalProvider=t},setSdkVersion(t){mt.sdkVersion=t},setMetadata(t){mt.metadata=t},setDisableAppend(t){mt.disableAppend=t},setEIP6963Enabled(t){mt.enableEIP6963=t},setDebug(t){mt.debug=t},setEnableWalletConnect(t){mt.enableWalletConnect=t},setEnableWalletGuide(t){mt.enableWalletGuide=t},setEnableAuthLogger(t){mt.enableAuthLogger=t},setEnableWallets(t){mt.enableWallets=t},setPreferUniversalLinks(t){mt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){mt.hasMultipleAddresses=t},setSIWX(t){mt.siwx=t},setConnectMethodsOrder(t){mt.features={...mt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){mt.features={...mt.features,walletFeaturesOrder:t}},setSocialsOrder(t){mt.remoteFeatures={...mt.remoteFeatures,socials:t}},setCollapseWallets(t){mt.features={...mt.features,collapseWallets:t}},setEnableEmbedded(t){mt.enableEmbedded=t},setAllowUnsupportedChain(t){mt.allowUnsupportedChain=t},setManualWCControl(t){mt.manualWCControl=t},setEnableNetworkSwitch(t){mt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(mt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){mt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return mt.universalProviderConfigOverride},getSnapshot(){return vC(mt)}},Aye=Object.freeze({enabled:!0,events:[]}),Sye=new i1({baseUrl:ot.getAnalyticsUrl(),clientId:null}),xye=5,Iye=60*1e3,Gd=lr({...Aye}),Nye={state:Gd,subscribeKey(t,e){return pi(Gd,t,e)},async sendError(t,e){if(!Gd.enabled)return;const n=Date.now();if(Gd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<Iye}).length>=xye)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Gd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=ve.state;await Sye.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Gd.enabled=!0},disable(){Gd.enabled=!1},clearEvents(){Gd.events=[]}};let nD=class rD extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,rD.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,rD):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function S8(t,e){const n=t instanceof nD?t:new nD(t instanceof Error?t.message:String(t),e,t);throw Nye.sendError(n,n.category),n}function pa(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return S8(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return S8(a,e)}},n[r]=i}else n[r]=s}),n}const Ol={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Tye={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ol.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ol.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ol.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ol.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===je.CHAIN.SOLANA&&t===Ol.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ol.COINBASE.url}/dapp?cb_url=${r}`)}},Lo=lr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),Rye={state:Lo,subscribeNetworkImages(t){return hi(Lo.networkImages,()=>t(Lo.networkImages))},subscribeKey(t,e){return pi(Lo,t,e)},subscribe(t){return hi(Lo,()=>t(Lo))},setWalletImage(t,e){Lo.walletImages[t]=e},setNetworkImage(t,e){Lo.networkImages[t]=e},setChainImage(t,e){Lo.chainImages[t]=e},setConnectorImage(t,e){Lo.connectorImages={...Lo.connectorImages,[t]:e}},setTokenImage(t,e){Lo.tokenImages[t]=e},setCurrencyImage(t,e){Lo.currencyImages[t]=e}},Pc=pa(Rye),Pye={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},PP=lr({networkImagePromises:{}}),iK={async fetchWalletImage(t){if(t)return await ct._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(PP.networkImagePromises[t]||(PP.networkImagePromises[t]=ct._fetchNetworkImage(t)),await PP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return Pc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return Pc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return Pc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return Pc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return Pc.state.connectorImages[t.imageId]},getChainImage(t){return Pc.state.networkImages[Pye[t]]}},qd=lr({message:"",variant:"info",open:!1}),Oye={state:qd,subscribeKey(t,e){return pi(qd,t,e)},open(t,e){const{debug:n}=ve.state,{shortMessage:r,longMessage:s}=t;n&&(qd.message=r,qd.variant=e,qd.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){qd.open=!1,qd.message="",qd.variant="info"}},Fl=pa(Oye),kye=ot.getAnalyticsUrl(),Dye=new i1({baseUrl:kye,clientId:null}),Mye=["MODAL_CREATED"],fu=lr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),fr={state:fu,subscribe(t){return hi(fu,()=>t(fu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ye.state.address;if(Mye.includes(t.data.event)||typeof window>"u")return;await Dye.post({path:"/e",params:fr.getSdkProperties(),body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),fu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===je.HTTP_STATUS_CODES.FORBIDDEN&&!fu.reportedErrors.FORBIDDEN&&(Fl.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Gv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),fu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;fu.timestamp=Date.now(),fu.data=t,(e=ve.state.features)!=null&&e.analytics&&fr._sendAnalyticsEvent(fu)}},Lye=ot.getApiUrl(),qi=new i1({baseUrl:Lye,clientId:null}),Uye=40,x8=4,Bye=20,Bt=lr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),ct={state:Bt,subscribeKey(t,e){return pi(Bt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=ve.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return ve.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${qi.baseUrl}/getWalletImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Pc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${qi.baseUrl}/public/getAssetImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Pc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${qi.baseUrl}/public/getAssetImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Pc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${qi.baseUrl}/public/getCurrencyImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Pc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${qi.baseUrl}/public/getTokenImage/${t}`,n=await qi.getBlob({path:e,params:ct._getSdkProperties()});Pc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ot.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ol.COINBASE.id?!0:H.state.activeChain==="solana"&&(n.id===Ol.SOLFLARE.id||n.id===Ol.PHANTOM.id)):t},async fetchProjectConfig(){return(await qi.get({path:"/appkit/v1/config",params:ct._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await qi.get({path:"/projects/v1/origins",params:ct._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=H.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!iK.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>ct._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=Fe.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>ct._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>ct._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];ct._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ol).map(o=>o.id));const r=await qi.get({path:"/getWallets",params:{...ct._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:ct._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=ve.state;if(t!=null&&t.length){const e={...ct._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??x8,include:t},{data:n}=await ct.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>ct._fetchWalletImage(i))),Bt.featured=r,Bt.allFeatured=r}},async fetchRecommendedWallets(){try{Bt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=ve.state,r=[...e??[],...n??[]].filter(Boolean),s=H.getRequestedCaipNetworkIds().join(","),i={page:1,entries:x8,include:t,exclude:r,chains:s},{data:o,count:a}=await ct.fetchWallets(i),c=Qe.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>ct._fetchWalletImage(d))),Bt.recommended=o,Bt.allRecommended=o,Bt.count=a??0}catch{}finally{Bt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=ve.state,s=H.getRequestedCaipNetworkIds().join(","),i=[...Bt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Uye,include:e,exclude:i,chains:s},{data:a,count:c}=await ct.fetchWallets(o),l=a.slice(0,Bye).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>ct._fetchWalletImage(u))),Bt.wallets=ot.uniqueBy([...Bt.wallets,...ct._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Bt.count=c>Bt.count?c:Bt.count,Bt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await ct.fetchWallets(e);n&&n.forEach(r=>{Bt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=ve.state,s=H.getRequestedCaipNetworkIds().join(",");Bt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await ct.fetchWallets(i);fr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>ct._fetchWalletImage(c)),ot.wait(300)]),Bt.search=ct._filterOutExtensions(o)},initPromise(t,e){const n=Bt.promises[t];return n||(Bt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&ct.initPromise("connectorImages",ct.fetchConnectorImages),e&&ct.initPromise("featuredWallets",ct.fetchFeaturedWallets),n&&ct.initPromise("recommendedWallets",ct.fetchRecommendedWallets),r&&ct.initPromise("networkImages",ct.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=ve.state.features)!=null&&t.analytics&&ct.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await qi.get({path:"/getAnalyticsConfig",params:ct._getSdkProperties()});ve.setFeatures({analytics:t})}catch{ve.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Bt.featured=Bt.allFeatured,Bt.recommended=Bt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Bt.featured=Bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.recommended=Bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.filteredWallets=Bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Bt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Bt.featured=Bt.allFeatured,Bt.recommended=Bt.allRecommended;return}const e=H.getRequestedCaipNetworkIds().join(",");Bt.featured=Bt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.recommended=Bt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Bt.filteredWallets=Bt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Un=lr({view:"Connect",history:["Connect"],transactionStack:[]}),$ye={state:Un,subscribeKey(t,e){return pi(Un,t,e)},pushTransactionStack(t){Un.transactionStack.push(t)},popTransactionStack(t){const e=Un.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ht.goBack();break;case"cancel":s==null||s(),Ht.goBack();break}},push(t,e){t!==Un.view&&(Un.view=t,Un.history.push(t),Un.data=e)},reset(t,e){Un.view=t,Un.history=[t],Un.data=e},replace(t,e){Un.history.at(-1)===t||(Un.view=t,Un.history[Un.history.length-1]=t,Un.data=e)},goBack(){var r;const t=H.state.activeCaipAddress,e=Ht.state.view==="ConnectingFarcaster",n=!t&&e;if(Un.history.length>1){Un.history.pop();const[s]=Un.history.slice(-1);s&&(t&&s==="Connect"?Un.view="Account":Un.view=s)}else Es.close();(r=Un.data)!=null&&r.wallet&&(Un.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ye.setFarcasterUrl(void 0,H.state.activeChain);const a=Fe.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=vC(ve.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Un.history.length>1){Un.history=Un.history.slice(0,t+1);const[e]=Un.history.slice(-1);e&&(Un.view=e)}},goBackOrCloseModal(){Ht.state.history.length>1?Ht.goBack():Es.close()}},Ht=pa($ye),pu=lr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),sD={state:pu,subscribe(t){return hi(pu,()=>t(pu))},setThemeMode(t){pu.themeMode=t;try{const e=Fe.getAuthConnector();if(e){const n=sD.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:td(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){pu.themeVariables={...pu.themeVariables,...t};try{const e=Fe.getAuthConnector();if(e){const n=sD.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:td(pu.themeVariables,pu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return vC(pu)}},lo=pa(sD),oK={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},gn=lr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...oK},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Fye={state:gn,subscribe(t){return hi(gn,()=>{t(gn)})},subscribeKey(t,e){return pi(gn,t,e)},initialize(t){t.forEach(e=>{const n=Qe.getConnectedConnectorId(e);n&&Fe.setConnectorId(n,e)})},setActiveConnector(t){t&&(gn.activeConnector=Yg(t))},setConnectors(t){t.filter(s=>!gn.allConnectors.some(i=>i.id===s.id&&Fe.getConnectorName(i.name)===Fe.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&gn.allConnectors.push(Yg(s))});const n=Fe.getEnabledNamespaces(),r=Fe.getEnabledConnectors(n);gn.connectors=Fe.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(gn.filterByNamespaceMap).forEach(e=>{gn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{gn.filterByNamespaceMap[e]=!0}),Fe.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){gn.filterByNamespaceMap[t]=e,Fe.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=Fe.getEnabledNamespaces(),e=Fe.getEnabledConnectors(t),n=Fe.areAllNamespacesEnabled();gn.connectors=Fe.mergeMultiChainConnectors(e),n?ct.clearFilterByNamespaces():ct.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(gn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return gn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(gn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=Fe.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===je.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=Fe.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===je.CONNECTOR_ID.AUTH){const s=t,i=vC(ve.state),o=lo.getSnapshot().themeMode,a=lo.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:td(a,o)}),Fe.setConnectors([t])}else Fe.setConnectors([t])},getAuthConnector(t){var r;const e=t||H.state.activeChain,n=gn.connectors.find(s=>s.id===je.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return gn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return gn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return gn.allConnectors.filter(r=>r.chain===H.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=vC(ve.state),r=lo.getSnapshot().themeMode,s=lo.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:td(s,r)})},getConnectorsByNamespace(t){const e=gn.allConnectors.filter(n=>n.chain===t);return Fe.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=Fe.getConnector(t.id,t.rdns),n=H.state.activeChain;Tye.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?Ht.push("ConnectingExternal",{connector:e}):Ht.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?Fe.getConnectorsByNamespace(t):Fe.mergeMultiChainConnectors(gn.allConnectors)},setFilterByNamespace(t){gn.filterByNamespace=t,gn.connectors=Fe.getConnectors(t),ct.setFilterByNamespace(t)},setConnectorId(t,e){t&&(gn.activeConnectorIds={...gn.activeConnectorIds,[e]:t},Qe.setConnectedConnectorId(e,t))},removeConnectorId(t){gn.activeConnectorIds={...gn.activeConnectorIds,[t]:void 0},Qe.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return gn.activeConnectorIds[t]},isConnected(t){return t?!!gn.activeConnectorIds[t]:Object.values(gn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){gn.activeConnectorIds={...oK}}},Fe=pa(Fye);var Uw={};const jye="https://secure.walletconnect.org/sdk",Wye=(typeof process<"u"&&typeof Uw<"u"?Uw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||jye,zye=(typeof process<"u"&&typeof Uw<"u"?Uw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Hye=(typeof process<"u"&&typeof Uw<"u"?Uw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ve={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ws={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Cp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Kr=lr({...Cp}),Gye={state:Kr,subscribeKey(t,e){return pi(Kr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ot.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Kr.message=Cp.message,Kr.variant=Cp.variant,Kr.svg=Cp.svg,Kr.open=Cp.open,Kr.autoClose=Cp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=Cp.autoClose}){Kr.open?(Kr.open=!1,setTimeout(()=>{Kr.message=t,Kr.variant=n,Kr.svg=e,Kr.open=!0,Kr.autoClose=r},150)):(Kr.message=t,Kr.variant=n,Kr.svg=e,Kr.open=!0,Kr.autoClose=r)}},Mc=Gye,Qn=lr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),qye={state:Qn,subscribe(t){return hi(Qn,()=>t(Qn))},setLastNetworkInView(t){Qn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Qn.loading=!0;try{const s=await bt.fetchTransactions({account:t,cursor:Qn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=qv.filterSpamTransactions(s.data),o=qv.filterByConnectedChain(i),a=[...Qn.transactions,...o];Qn.loading=!1,e==="coinbase"?Qn.coinbaseTransactions=qv.groupTransactionsByYearAndMonth(Qn.coinbaseTransactions,s.data):(Qn.transactions=a,Qn.transactionsByYear=qv.groupTransactionsByYearAndMonth(Qn.transactionsByYear,o)),Qn.empty=a.length===0,Qn.next=s.next?s.next:void 0}catch{const i=H.state.activeChain;fr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:ve.state.projectId,cursor:Qn.next,isSmartAccount:((r=Ye.state.preferredAccountTypes)==null?void 0:r[i])===Ws.ACCOUNT_TYPES.SMART_ACCOUNT}}),Mc.showError("Failed to fetch transactions"),Qn.loading=!1,Qn.empty=!0,Qn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Qn.next=void 0},resetTransactions(){Qn.transactions=[],Qn.transactionsByYear={},Qn.lastNetworkInView=void 0,Qn.loading=!1,Qn.empty=!1,Qn.next=void 0}},qv=pa(qye,"API_ERROR"),Gn=lr({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let lp;const Vye={state:Gn,subscribeKey(t,e){return pi(Gn,t,e)},_getClient(){return Gn._client},setClient(t){Gn._client=Yg(t)},async connectWalletConnect(){var t,e,n,r;if(ot.isTelegram()||ot.isSafari()&&ot.isIos()){if(lp){await lp,lp=void 0;return}if(!ot.isPairingExpired(Gn==null?void 0:Gn.wcPairingExpiry)){const s=Gn.wcUri;Gn.wcUri=s;return}lp=(e=(t=vt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),vt.state.status="connecting",await lp,lp=void 0,Gn.wcPairingExpiry=void 0,vt.state.status="connected"}else await((r=(n=vt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=vt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&H.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=vt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||H.state.activeChain;e&&Fe.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;Es.setLoading(!0,H.state.activeChain);const n=Fe.getAuthConnector();n&&(Ye.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Qe.setPreferredAccountTypes(Ye.state.preferredAccountTypes??{[e]:t}),await vt.reconnectExternal(n),Es.setLoading(!1,H.state.activeChain),fr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=vt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=vt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=vt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=vt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=vt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=vt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=vt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=vt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=vt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=vt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=vt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=vt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Gn.wcUri=void 0,Gn.wcPairingExpiry=void 0,Gn.wcLinking=void 0,Gn.recentWallet=void 0,Gn.status="disconnected",qv.resetTransactions(),Qe.deleteWalletConnectDeepLink()},resetUri(){Gn.wcUri=void 0,Gn.wcPairingExpiry=void 0,lp=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=vt.state;t&&Qe.setWalletConnectDeepLink(t),e&&Qe.setAppKitRecent(e),fr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ht.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Gn.wcBasic=t},setUri(t){Gn.wcUri=t,Gn.wcPairingExpiry=ot.getPairingExpiry()},setWcLinking(t){Gn.wcLinking=t},setWcError(t){Gn.wcError=t,Gn.buffering=!1},setRecentWallet(t){Gn.recentWallet=t},setBuffering(t){Gn.buffering=t},setStatus(t){Gn.status=t},async disconnect(t){var e;try{await((e=vt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new nD("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Gn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if(Fe.state.activeConnectorIds[n]===t.connectorId){const i=H.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ye.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=Fe.getConnector(t.connectorId);i?vt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},vt=pa(Vye),ty=lr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Yl={state:ty,subscribe(t){return hi(ty,()=>t(ty))},subscribeOpen(t){return pi(ty,"open",t)},set(t){Object.assign(ty,{...ty,...t})}},Kye="1.0.8";let ga=class iD extends Error{constructor(e,n={}){var o;const r=n.cause instanceof iD?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof iD&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Kye}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function Pd(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const aK=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,cK=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,lK=/^\(.+?\).*?$/,I8=/^tuple(?<array>(\[(\d*)\])*)$/;function oD(t){let e=t.type;if(I8.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=oD(i),s<n-1&&(e+=", ")}const r=Pd(I8,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,oD({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function gv(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=oD(s),r!==n-1&&(e+=", ")}return e}function Jx(t){var e;return t.type==="function"?`function ${t.name}(${gv(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${gv(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${gv(t.inputs)})`:t.type==="error"?`error ${t.name}(${gv(t.inputs)})`:t.type==="constructor"?`constructor(${gv(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const uK=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Yye(t){return uK.test(t)}function Qye(t){return Pd(uK,t)}const dK=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Jye(t){return dK.test(t)}function Zye(t){return Pd(dK,t)}const hK=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Xye(t){return hK.test(t)}function e0e(t){return Pd(hK,t)}const fK=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function DL(t){return fK.test(t)}function t0e(t){return Pd(fK,t)}const pK=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function n0e(t){return pK.test(t)}function r0e(t){return Pd(pK,t)}const gK=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function s0e(t){return gK.test(t)}function i0e(t){return Pd(gK,t)}const o0e=/^receive\(\) external payable$/;function a0e(t){return o0e.test(t)}const c0e=new Set(["indexed"]),aD=new Set(["calldata","memory","storage"]);class l0e extends ga{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class u0e extends ga{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class d0e extends ga{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class h0e extends ga{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class f0e extends ga{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class p0e extends ga{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class g0e extends ga{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class m0e extends ga{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Ib extends ga{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class y0e extends ga{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class w0e extends ga{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class b0e extends ga{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class v0e extends ga{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function E0e(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const OP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function cD(t,e={}){if(Xye(t))return C0e(t,e);if(Jye(t))return _0e(t,e);if(Yye(t))return A0e(t,e);if(n0e(t))return S0e(t,e);if(s0e(t))return x0e(t);if(a0e(t))return{type:"receive",stateMutability:"payable"};throw new y0e({signature:t})}function C0e(t,e={}){const n=e0e(t);if(!n)throw new Ib({signature:t,type:"function"});const r=Lc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Jg(r[a],{modifiers:aD,structs:e,type:"function"}));const o=[];if(n.returns){const a=Lc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Jg(a[l],{modifiers:aD,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function _0e(t,e={}){const n=Zye(t);if(!n)throw new Ib({signature:t,type:"event"});const r=Lc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Jg(r[o],{modifiers:c0e,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function A0e(t,e={}){const n=Qye(t);if(!n)throw new Ib({signature:t,type:"error"});const r=Lc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Jg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function S0e(t,e={}){const n=r0e(t);if(!n)throw new Ib({signature:t,type:"constructor"});const r=Lc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Jg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function x0e(t){const e=i0e(t);if(!e)throw new Ib({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const I0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,N0e=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,T0e=/^u?int$/;function Jg(t,e){var d,h;const n=E0e(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(OP.has(n))return OP.get(n);const r=lK.test(t),s=Pd(r?N0e:I0e,t);if(!s)throw new h0e({param:t});if(s.name&&P0e(s.name))throw new f0e({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=Lc(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Jg(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(T0e.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!mK(c))throw new d0e({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new p0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(aD.has(s.modifier)&&!O0e(c,!!s.array))throw new g0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return OP.set(n,u),u}function Lc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?Lc(a,[...e,n.trim()]):Lc(a,e,`${n}${o}`,r);case"(":return Lc(a,e,`${n}${o}`,r+1);case")":return Lc(a,e,`${n}${o}`,r-1);default:return Lc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new v0e({current:n,depth:r});return e.push(n.trim()),e}function mK(t){return t==="address"||t==="bool"||t==="function"||t==="string"||aK.test(t)||cK.test(t)}const R0e=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function P0e(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||aK.test(t)||cK.test(t)||R0e.test(t)}function O0e(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function yK(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!DL(a))continue;const c=t0e(a);if(!c)throw new Ib({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Jg(p,{type:"struct"});u.push(g)}if(!u.length)throw new w0e({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=wK(c,e)}return r}const k0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function wK(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(lK.test(o.type))r.push(o);else{const c=Pd(k0e,o.type);if(!(c!=null&&c.type))throw new m0e({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new b0e({type:u});r.push({...o,type:`tuple${l??""}`,components:wK(e[u]??[],e,new Set([...n,u]))})}else if(mK(u))r.push(o);else throw new u0e({type:u})}}return r}function bK(t){const e=yK(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];DL(i)||n.push(cD(i,e))}return n}function N8(t){let e;if(typeof t=="string")e=cD(t);else{const n=yK(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!DL(i)){e=cD(i,n);break}}}if(!e)throw new l0e({signature:t});return e}function ht(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Kc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new q0e(t.type);return`${t.name}(${JN(t.inputs,{includeName:e})})`}function JN(t,{includeName:e=!1}={}){return t?t.map(n=>D0e(n,{includeName:e})).join(e?", ":","):""}function D0e(t,{includeName:e}){return t.type.startsWith("tuple")?`(${JN(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function tu(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function Pr(t){return tu(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const vK="2.32.0";let mv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${vK}`},me=class lD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof lD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof lD&&n.cause.docsPath||n.docsPath,i=(a=mv.getDocsUrl)==null?void 0:a.call(mv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...mv.version?[`Version: ${mv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=vK}walk(e){return EK(this,e)}};function EK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?EK(t.cause,e):e?null:t}class M0e extends me{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class T8 extends me{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class CK extends me{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${JN(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class o1 extends me{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class L0e extends me{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class U0e extends me{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Pr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class B0e extends me{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class $0e extends me{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class R8 extends me{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class _K extends me{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class F0e extends me{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class AK extends me{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class P8 extends me{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class Bw extends me{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class SK extends me{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class j0e extends me{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class W0e extends me{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Kc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Kc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let z0e=class extends me{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class EC extends me{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${JN(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class ZN extends me{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Kc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class H0e extends me{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class G0e extends me{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let xK=class extends me{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class q0e extends me{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class V0e extends me{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let IK=class extends me{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},NK=class extends me{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class O8 extends me{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Nb(t,{dir:e,size:n=32}={}){return typeof t=="string"?yf(t,{dir:e,size:n}):K0e(t,{dir:e,size:n})}function yf(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new NK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function K0e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new NK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let TK=class extends me{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class Y0e extends me{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class Q0e extends me{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let J0e=class extends me{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Ql(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function ec(t,{size:e}){if(Pr(t)>e)throw new J0e({givenSize:Pr(t),maxSize:e})}function la(t,e={}){const{signed:n}=e;e.size&&ec(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function Z0e(t,e={}){let n=t;if(e.size&&(ec(n,{size:e.size}),n=Ql(n)),Ql(n)==="0x00")return!1;if(Ql(n)==="0x01")return!0;throw new Q0e(n)}function Yc(t,e={}){return Number(la(t,e))}function RK(t,e={}){let n=Qa(t);return e.size&&(ec(n,{size:e.size}),n=Ql(n,{dir:"right"})),new TextDecoder().decode(n)}const X0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ya(t,e={}){return typeof t=="number"||typeof t=="bigint"?nt(t,e):typeof t=="string"?$w(t,e):typeof t=="boolean"?PK(t,e):as(t,e)}function PK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(ec(n,{size:e.size}),Nb(n,{size:e.size})):n}function as(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=X0e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(ec(r,{size:e.size}),Nb(r,{dir:"right",size:e.size})):r}function nt(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new TK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Nb(a,{size:r}):a}const ewe=new TextEncoder;function $w(t,e={}){const n=ewe.encode(t);return as(n,e)}const twe=new TextEncoder;function Tb(t,e={}){return typeof t=="number"||typeof t=="bigint"?rwe(t,e):typeof t=="boolean"?nwe(t,e):tu(t)?Qa(t,e):kg(t,e)}function nwe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(ec(n,{size:e.size}),Nb(n,{size:e.size})):n}const gu={zero:48,nine:57,A:65,F:70,a:97,f:102};function k8(t){if(t>=gu.zero&&t<=gu.nine)return t-gu.zero;if(t>=gu.A&&t<=gu.F)return t-(gu.A-10);if(t>=gu.a&&t<=gu.f)return t-(gu.a-10)}function Qa(t,e={}){let n=t;e.size&&(ec(n,{size:e.size}),n=Nb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=k8(r.charCodeAt(a++)),l=k8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new me(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function rwe(t,e){const n=nt(t,e);return Qa(n)}function kg(t,e={}){const n=twe.encode(t);return typeof e.size=="number"?(ec(n,{size:e.size}),Nb(n,{dir:"right",size:e.size})):n}const EA=BigInt(2**32-1),D8=BigInt(32);function swe(t,e=!1){return e?{h:Number(t&EA),l:Number(t>>D8&EA)}:{h:Number(t>>D8&EA)|0,l:Number(t&EA)|0}}function iwe(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=swe(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const owe=(t,e,n)=>t<<n|e>>>32-n,awe=(t,e,n)=>e<<n|t>>>32-n,cwe=(t,e,n)=>e<<n-32|t>>>64-n,lwe=(t,e,n)=>t<<n-32|e>>>64-n,ny=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ML(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function CC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Qc(t,...e){if(!ML(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function uwe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");CC(t.outputLen),CC(t.blockLen)}function Fw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function OK(t,e){Qc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function dwe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function jw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function kP(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function il(t,e){return t<<32-e|t>>>e}const hwe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function fwe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function pwe(t){for(let e=0;e<t.length;e++)t[e]=fwe(t[e]);return t}const M8=hwe?t=>t:pwe,kK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",gwe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _C(t){if(Qc(t),kK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=gwe[t[n]];return e}const mu={_0:48,_9:57,A:65,F:70,a:97,f:102};function L8(t){if(t>=mu._0&&t<=mu._9)return t-mu._0;if(t>=mu.A&&t<=mu.F)return t-(mu.A-10);if(t>=mu.a&&t<=mu.f)return t-(mu.a-10)}function LL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(kK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=L8(t.charCodeAt(i)),a=L8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function mwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function a1(t){return typeof t=="string"&&(t=mwe(t)),Qc(t),t}function Hp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Qc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let UL=class{};function DK(t){const e=r=>t().update(a1(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ywe(t){const e=(r,s)=>t(s).update(a1(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function wwe(t=32){if(ny&&typeof ny.getRandomValues=="function")return ny.getRandomValues(new Uint8Array(t));if(ny&&typeof ny.randomBytes=="function")return Uint8Array.from(ny.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const bwe=BigInt(0),yv=BigInt(1),vwe=BigInt(2),Ewe=BigInt(7),Cwe=BigInt(256),_we=BigInt(113),MK=[],LK=[],UK=[];for(let t=0,e=yv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],MK.push(2*(5*r+n)),LK.push((t+1)*(t+2)/2%64);let s=bwe;for(let i=0;i<7;i++)e=(e<<yv^(e>>Ewe)*_we)%Cwe,e&vwe&&(s^=yv<<(yv<<BigInt(i))-yv);UK.push(s)}const BK=iwe(UK,!0),Awe=BK[0],Swe=BK[1],U8=(t,e,n)=>n>32?cwe(t,e,n):owe(t,e,n),B8=(t,e,n)=>n>32?lwe(t,e,n):awe(t,e,n);function $K(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=U8(l,u,1)^n[a],h=B8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=LK[o],c=U8(s,i,a),l=B8(s,i,a),u=MK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Awe[r],t[1]^=Swe[r]}jw(n)}let BL=class FK extends UL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,CC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=dwe(this.state)}clone(){return this._cloneInto()}keccak(){M8(this.state32),$K(this.state32,this.rounds),M8(this.state32),this.posOut=0,this.pos=0}update(e){Fw(this),e=a1(e),Qc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Fw(this,!1),Qc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return CC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(OK(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,jw(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new FK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Vf=(t,e,n)=>DK(()=>new BL(e,t,n)),xwe=Vf(6,144,224/8),Iwe=Vf(6,136,256/8),Nwe=Vf(6,104,384/8),Twe=Vf(6,72,512/8),Rwe=Vf(1,144,224/8),$L=Vf(1,136,256/8),Pwe=Vf(1,104,384/8),Owe=Vf(1,72,512/8),jK=(t,e,n)=>ywe((r={})=>new BL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),kwe=jK(31,168,128/8),Dwe=jK(31,136,256/8),Qqe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:BL,keccakP:$K,keccak_224:Rwe,keccak_256:$L,keccak_384:Pwe,keccak_512:Owe,sha3_224:xwe,sha3_256:Iwe,sha3_384:Nwe,sha3_512:Twe,shake128:kwe,shake256:Dwe},Symbol.toStringTag,{value:"Module"}));function Fs(t,e){const n=e||"hex",r=$L(tu(t,{strict:!1})?Tb(t):t);return n==="bytes"?r:Ya(r)}const Mwe=t=>Fs(Tb(t));function Lwe(t){return Mwe(t)}function Uwe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new me("Unable to normalize signature.");return s}const Bwe=t=>{const e=typeof t=="string"?t:Jx(t);return Uwe(e)};function WK(t){return Lwe(Bwe(t))}const XN=WK;let Df=class extends me{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},eT=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const DP=new eT(8192);function c1(t,e){if(DP.has(`${t}.${e}`))return DP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=Fs(kg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return DP.set(`${t}.${e}`,i),i}function nd(t,e){if(!Ja(t,{strict:!1}))throw new Df({address:t});return c1(t,e)}const $we=/^0x[a-fA-F0-9]{40}$/,MP=new eT(8192);function Ja(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(MP.has(r))return MP.get(r);const s=$we.test(t)?t.toLowerCase()===t?!0:n?c1(t)===t:!0:!1;return MP.set(r,s),s}function Za(t){return typeof t[0]=="string"?Rb(t):Fwe(t)}function Fwe(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function Rb(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function Ww(t,e,n,{strict:r}={}){return tu(t,{strict:!1})?Zx(t,e,n,{strict:r}):GK(t,e,n,{strict:r})}function zK(t,e){if(typeof e=="number"&&e>0&&e>Pr(t)-1)throw new IK({offset:e,position:"start",size:Pr(t)})}function HK(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Pr(t)!==n-e)throw new IK({offset:n,position:"end",size:Pr(t)})}function GK(t,e,n,{strict:r}={}){zK(t,e);const s=t.slice(e,n);return r&&HK(s,e,n),s}function Zx(t,e,n,{strict:r}={}){zK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&HK(s,e,n),s}const jwe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,qK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Kf(t,e){if(t.length!==e.length)throw new B0e({expectedLength:t.length,givenLength:e.length});const n=Wwe({params:t,values:e}),r=jL(n);return r.length===0?"0x":r}function Wwe({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(FL({param:t[r],value:e[r]}));return n}function FL({param:t,value:e}){const n=WL(t.type);if(n){const[r,s]=n;return Hwe(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Ywe(e,{param:t});if(t.type==="address")return zwe(e);if(t.type==="bool")return qwe(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=qK.exec(t.type)??[];return Vwe(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Gwe(e,{param:t});if(t.type==="string")return Kwe(e);throw new H0e(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function jL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Pr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(nt(e+s,{size:32})),r.push(a),s+=Pr(a)):n.push(a)}return Za([...n,...r])}function zwe(t){if(!Ja(t))throw new Df({address:t});return{dynamic:!1,encoded:yf(t.toLowerCase())}}function Hwe(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new xK(t);if(!r&&t.length!==e)throw new L0e({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=FL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=jL(i);if(r){const a=nt(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Za([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Za(i.map(({encoded:o})=>o))}}function Gwe(t,{param:e}){const[,n]=e.type.split("bytes"),r=Pr(t);if(!n){let s=t;return r%32!==0&&(s=yf(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Za([yf(nt(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new U0e({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:yf(t,{dir:"right"})}}function qwe(t){if(typeof t!="boolean")throw new me(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:yf(PK(t))}}function Vwe(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new TK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:nt(t,{size:32,signed:e})}}function Kwe(t){const e=$w(t),n=Math.ceil(Pr(e)/32),r=[];for(let s=0;s<n;s++)r.push(yf(Ww(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Za([yf(nt(Pr(e),{size:32})),...r])}}function Ywe(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=FL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?jL(r):Za(r.map(({encoded:s})=>s))}}function WL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const l1=t=>Ww(WK(t),0,4);function Nm(t){const{abi:e,args:n=[],name:r}=t,s=tu(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?l1(a)===r:a.type==="event"?XN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?uD(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=VK(a.inputs,o.inputs,n);if(l)throw new W0e({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function uD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Ja(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>uD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>uD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function VK(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return VK(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?Ja(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?Ja(n[r],{strict:!1}):!1)return o}}const $8="/docs/contract/encodeEventTopics";function u1(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=Nm({abi:e,name:n});if(!l)throw new P8(n,{docsPath:$8});s=l}if(s.type!=="event")throw new P8(void 0,{docsPath:$8});const i=Kc(s),o=XN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>F8({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?F8({param:d,value:u[h]}):null))??[])}return[o,...a]}function F8({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return Fs(Tb(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new V0e(t.type);return Kf([t],[e])}function tT(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function KK(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=tT(t,{method:"eth_newFilter"}),u=i?u1({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?nt(o):o,toBlock:typeof c=="bigint"?nt(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}function kr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const j8="/docs/contract/encodeFunctionData";function Qwe(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=Nm({abi:e,args:n,name:r});if(!i)throw new Bw(r,{docsPath:j8});s=i}if(s.type!=="function")throw new Bw(void 0,{docsPath:j8});return{abi:[s],functionName:l1(Kc(s))}}function tc(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:Qwe(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Kf(s.inputs,e??[]):void 0;return Rb([i,o??"0x"])}const YK={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},QK={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Jwe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class W8 extends me{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class JK extends me{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Zwe extends me{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Xwe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Zwe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new JK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new W8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new W8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function zL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Xwe);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function ebe(t,e={}){typeof e.size<"u"&&ec(t,{size:e.size});const n=as(t,e);return la(n,e)}function tbe(t,e={}){let n=t;if(typeof e.size<"u"&&(ec(n,{size:e.size}),n=Ql(n)),n.length>1||n[0]>1)throw new Y0e(n);return!!n[0]}function cd(t,e={}){typeof e.size<"u"&&ec(t,{size:e.size});const n=as(t,e);return Yc(n,e)}function nbe(t,e={}){let n=t;return typeof e.size<"u"&&(ec(n,{size:e.size}),n=Ql(n,{dir:"right"})),new TextDecoder().decode(n)}function d1(t,e){const n=typeof e=="string"?Qa(e):e,r=zL(n);if(Pr(n)===0&&t.length>0)throw new o1;if(Pr(e)&&Pr(e)<32)throw new CK({data:typeof e=="string"?e:as(e),params:t,size:Pr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=g0(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function g0(t,e,{staticPosition:n}){const r=WL(e.type);if(r){const[s,i]=r;return sbe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return cbe(t,e,{staticPosition:n});if(e.type==="address")return rbe(t);if(e.type==="bool")return ibe(t);if(e.type.startsWith("bytes"))return obe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return abe(t,e);if(e.type==="string")return lbe(t,{staticPosition:n});throw new G0e(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const z8=32,dD=32;function rbe(t){const e=t.readBytes(32);return[c1(as(GK(e,-20))),32]}function sbe(t,e,{length:n,staticPosition:r}){if(!n){const o=cd(t.readBytes(dD)),a=r+o,c=a+z8;t.setPosition(a);const l=cd(t.readBytes(z8)),u=AC(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=g0(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(AC(e)){const o=cd(t.readBytes(dD)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=g0(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=g0(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function ibe(t){return[tbe(t.readBytes(32),{size:32}),32]}function obe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=cd(t.readBytes(32));t.setPosition(n+o);const a=cd(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[as(c),32]}return[as(t.readBytes(Number.parseInt(s),32)),32]}function abe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?ebe(s,{signed:n}):cd(s,{signed:n}),32]}function cbe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(AC(e)){const o=cd(t.readBytes(dD)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=g0(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=g0(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function lbe(t,{staticPosition:e}){const n=cd(t.readBytes(32)),r=e+n;t.setPosition(r);const s=cd(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=nbe(Ql(i));return t.setPosition(e+32),[o,32]}function AC(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(AC);const n=WL(t.type);return!!(n&&AC({...t,type:n[1]}))}function ube(t){const{abi:e,data:n}=t,r=Ww(n,0,4);if(r==="0x")throw new o1;const i=[...e||[],QK,Jwe].find(o=>o.type==="error"&&r===l1(Kc(o)));if(!i)throw new _K(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?d1(i.inputs,Ww(n,4)):void 0,errorName:i.name}}const is=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function ZK({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?is(e[i]):e[i]}`).join(", ")})`}const dbe={gwei:9,wei:18},hbe={ether:-9,wei:9},fbe={ether:-18,gwei:-9};function Tm(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function HL(t,e="wei"){return Tm(t,dbe[e])}function So(t,e="wei"){return Tm(t,hbe[e])}class pbe extends me{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class gbe extends me{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function H8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function mbe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=H8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=H8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function h1(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class ybe extends me{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class wbe extends me{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",h1(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class bbe extends me{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=h1({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${HL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${So(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${So(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${So(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class XK extends me{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class eY extends me{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class vbe extends me{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Ebe=t=>t,GL=t=>t;class tY extends me{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?kr(n):void 0;let g=h1({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${HL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${So(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${So(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${So(l)} gwei`,nonce:u});f&&(g+=`
${mbe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class nY extends me{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=Nm({abi:n,args:r,name:o}),l=c?ZK({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Kc(c,{includeName:!0}):void 0,d=h1({address:s&&Ebe(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class hD extends me{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=ube({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=YK[f]}else{const f=u?Kc(u,{includeName:!0}):void 0,p=u&&h?ZK({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof _K&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class Cbe extends me{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class _be extends me{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class nT extends me{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class AE extends me{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${GL(o)}`,e&&`Request body: ${is(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class qL extends me{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${GL(r)}`,`Request body: ${is(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class G8 extends me{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${GL(n)}`,`Request body: ${is(e)}`],name:"TimeoutError"})}}const Abe=-1;class Po extends me{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof qL?e.code:n??Abe}}class ma extends Po{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class SC extends Po{constructor(e){super(e,{code:SC.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(SC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class xC extends Po{constructor(e){super(e,{code:xC.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(xC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class IC extends Po{constructor(e,{method:n}={}){super(e,{code:IC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(IC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class NC extends Po{constructor(e){super(e,{code:NC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(NC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Zg extends Po{constructor(e){super(e,{code:Zg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Zg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Xg extends Po{constructor(e){super(e,{code:Xg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Xg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class TC extends Po{constructor(e){super(e,{code:TC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(TC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class wf extends Po{constructor(e){super(e,{code:wf.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(wf,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class zw extends Po{constructor(e){super(e,{code:zw.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(zw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Gp extends Po{constructor(e,{method:n}={}){super(e,{code:Gp.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Gp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Hw extends Po{constructor(e){super(e,{code:Hw.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Hw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class RC extends Po{constructor(e){super(e,{code:RC.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(RC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Jr extends ma{constructor(e){super(e,{code:Jr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Jr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class PC extends ma{constructor(e){super(e,{code:PC.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(PC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class OC extends ma{constructor(e,{method:n}={}){super(e,{code:OC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(OC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class kC extends ma{constructor(e){super(e,{code:kC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(kC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class DC extends ma{constructor(e){super(e,{code:DC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(DC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class nu extends ma{constructor(e){super(e,{code:nu.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(nu,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Gw extends ma{constructor(e){super(e,{code:Gw.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Gw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class MC extends ma{constructor(e){super(e,{code:MC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(MC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class LC extends ma{constructor(e){super(e,{code:LC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(LC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class UC extends ma{constructor(e){super(e,{code:UC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(UC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class BC extends ma{constructor(e){super(e,{code:BC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(BC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class $C extends ma{constructor(e){super(e,{code:$C.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty($C,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class qw extends ma{constructor(e){super(e,{code:qw.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(qw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Sbe extends Po{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const xbe=3;function em(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof nT?t:t instanceof me?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof o1?new Cbe({functionName:i}):[xbe,Zg.code].includes(c)&&(l||u||d||h)?new hD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof qL?u:h??d}):t;return new nY(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function Ibe(t){const e=Fs(`0x${t.substring(4)}`).substring(26);return c1(`0x${e}`)}const Nbe="modulepreload",Tbe=function(t){return"/"+t},q8={},ai=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=Tbe(c),c in q8)return;q8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Nbe,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function Rbe({hash:t,signature:e}){const n=tu(t)?t:Ya(t),{secp256k1:r}=await ai(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>m_e);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=V8(f);return new r.Signature(la(l),la(u)).addRecoveryBit(p)}const o=tu(e)?e:Ya(e);if(Pr(o)!==65)throw new Error("invalid signature length");const a=Yc(`0x${o.slice(130)}`),c=V8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function V8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function rY({hash:t,signature:e}){return Ibe(await Rbe({hash:t,signature:e}))}function Pbe(t,e="hex"){const n=sY(t),r=zL(new Uint8Array(n.length));return n.encode(r),e==="hex"?as(r.bytes):r.bytes}function sY(t){return Array.isArray(t)?Obe(t.map(e=>sY(e))):kbe(t)}function Obe(t){const e=t.reduce((s,i)=>s+i.length,0),n=iY(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function kbe(t){const e=typeof t=="string"?Qa(t):t,n=iY(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function iY(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new me("Length is too large.")}function Dbe(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=Fs(Rb(["0x05",Pbe([e?nt(e):"0x",s,n?nt(n):"0x"])]));return r==="bytes"?Qa(i):i}async function oY(t){const{authorization:e,signature:n}=t;return rY({hash:Dbe(e),signature:n??e})}class Mbe extends me{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=h1({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${HL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${So(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${So(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${So(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class qp extends me{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(qp,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(qp,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Xx extends me{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${So(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Xx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class fD extends me{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${So(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(fD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class pD extends me{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(pD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class gD extends me{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(gD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class mD extends me{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(mD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class yD extends me{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(yD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class wD extends me{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(wD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class bD extends me{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(bD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class vD extends me{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(vD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class eI extends me{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${So(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${So(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(eI,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class f1 extends me{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function rT(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof me?t.walk(s=>(s==null?void 0:s.code)===qp.code):t;return r instanceof me?new qp({cause:t,message:r.details}):qp.nodeMessage.test(n)?new qp({cause:t,message:t.details}):Xx.nodeMessage.test(n)?new Xx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):fD.nodeMessage.test(n)?new fD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):pD.nodeMessage.test(n)?new pD({cause:t,nonce:e==null?void 0:e.nonce}):gD.nodeMessage.test(n)?new gD({cause:t,nonce:e==null?void 0:e.nonce}):mD.nodeMessage.test(n)?new mD({cause:t,nonce:e==null?void 0:e.nonce}):yD.nodeMessage.test(n)?new yD({cause:t}):wD.nodeMessage.test(n)?new wD({cause:t,gas:e==null?void 0:e.gas}):bD.nodeMessage.test(n)?new bD({cause:t,gas:e==null?void 0:e.gas}):vD.nodeMessage.test(n)?new vD({cause:t}):eI.nodeMessage.test(n)?new eI({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new f1({cause:t})}function Lbe(t,{docsPath:e,...n}){const r=(()=>{const s=rT(t,n);return s instanceof f1?t:s})();return new Mbe(r,{docsPath:e,...n})}function sT(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const Ube={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Pb(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Bbe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>as(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=nt(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=nt(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=nt(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=nt(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=nt(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=nt(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Ube[t.type]),typeof t.value<"u"&&(e.value=nt(t.value)),e}function Bbe(t){return t.map(e=>({address:e.address,r:e.r?nt(BigInt(e.r)):e.r,s:e.s?nt(BigInt(e.s)):e.s,chainId:nt(e.chainId),nonce:nt(e.nonce),...typeof e.yParity<"u"?{yParity:nt(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:nt(e.v)}:{}}))}function K8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new O8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new O8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function $be(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=nt(e)),n!==void 0&&(o.nonce=nt(n)),r!==void 0&&(o.state=K8(r)),s!==void 0){if(o.state)throw new gbe;o.stateDiff=K8(s)}return o}function VL(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Ja(n,{strict:!1}))throw new Df({address:n});if(e[n])throw new pbe({address:n});e[n]=$be(r)}return e}const Fbe=2n**256n-1n;function Rm(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?kr(e):void 0;if(o&&!Ja(o.address))throw new Df({address:o.address});if(i&&!Ja(i))throw new Df({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new ybe;if(r&&r>Fbe)throw new Xx({maxFeePerGas:r});if(s&&r&&s>r)throw new eI({maxFeePerGas:r,maxPriorityFeePerGas:s})}class jbe extends me{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class KL extends me{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Wbe extends me{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${So(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class aY extends me{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const cY={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function lY(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?Yc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?Yc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?cY[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=zbe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function zbe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function uY(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:lY(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function zl(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?nt(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new aY({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||uY)(c)}async function YL(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Hbe(t,e){return dY(t,e)}async function dY(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ht(t,zl,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return la(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ht(t,zl,"getBlock")({}),ht(t,YL,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new KL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Gbe(t,e){return ED(t,e)}async function ED(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new jbe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ht(t,zl,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new KL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await dY(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ht(t,YL,"getGasPrice")({}))}}async function QL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?nt(r):n]},{dedupe:!!r});return Yc(s)}function hY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Qa(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>as(i))}function fY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Qa(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Qa(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>as(o))}function qbe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Vbe(t,e,n){return t&e^~t&n}function Kbe(t,e,n){return t&e^t&n^e&n}class Ybe extends UL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=kP(this.buffer)}update(e){Fw(this),e=a1(e),Qc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=kP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fw(this),OK(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,jw(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;qbe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=kP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Vd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qbe=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Kd=new Uint32Array(64);let Jbe=class extends Ybe{constructor(e=32){super(64,e,8,!1),this.A=Vd[0]|0,this.B=Vd[1]|0,this.C=Vd[2]|0,this.D=Vd[3]|0,this.E=Vd[4]|0,this.F=Vd[5]|0,this.G=Vd[6]|0,this.H=Vd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Kd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Kd[d-15],f=Kd[d-2],p=il(h,7)^il(h,18)^h>>>3,g=il(f,17)^il(f,19)^f>>>10;Kd[d]=g+Kd[d-7]+p+Kd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=il(a,6)^il(a,11)^il(a,25),f=u+h+Vbe(a,c,l)+Qbe[d]+Kd[d]|0,g=(il(r,2)^il(r,13)^il(r,22))+Kbe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){jw(Kd)}destroy(){this.set(0,0,0,0,0,0,0,0),jw(this.buffer)}};const pY=DK(()=>new Jbe),Zbe=pY;function Xbe(t,e){return Zbe(tu(t,{strict:!1})?Tb(t):t)}function eve(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Xbe(e);return s.set([n],0),r==="bytes"?s:as(s)}function tve(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(eve({commitment:i,to:r,version:n}));return s}const Y8=6,gY=32,JL=4096,mY=gY*JL,Q8=mY*Y8-1-1*JL*Y8;class nve extends me{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class rve extends me{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function sve(t){const e=typeof t.data=="string"?Qa(t.data):t.data,n=Pr(e);if(!n)throw new rve;if(n>Q8)throw new nve({maxSize:Q8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=zL(new Uint8Array(mY));let a=0;for(;a<JL;){const c=e.slice(i,i+(gY-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>as(o.bytes))}function ive(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??sve({data:e}),i=t.commitments??hY({blobs:s,kzg:n,to:r}),o=t.proofs??fY({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function ove(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new wbe({transaction:t})}async function Ob(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return Yc(e)}const yY=["blobVersionedHashes","chainId","fees","gas","nonce","type"],J8=new Map;async function p1(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=yY,type:u}=e,d=n&&kr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ht(t,zl,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ht(t,Ob,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const y=await w();h.nonce=await c.consume({address:d.address,chainId:y,client:t})}else h.nonce=await ht(t,QL,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const y=hY({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=tve({commitments:y,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=fY({blobs:r,commitments:y,kzg:o}),v=ive({blobs:r,commitments:y,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=ove(h)}catch{let y=J8.get(t.uid);if(typeof y>"u"){const b=await p();y=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",J8.set(t.uid,y)}h.type=y?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const y=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await ED(t,{block:y,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new Wbe({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new KL;if(typeof e.gasPrice>"u"){const y=await p(),{gasPrice:b}=await ED(t,{block:y,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ht(t,iT,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),Rm(h),delete h.parameters,h}async function ZL(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?nt(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function iT(t,e){var s,i,o;const{account:n=t.account}=e,r=n?kr(n):void 0;try{let W=function(R){const{block:B,request:k,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[k,B??"latest",M]:B?[k,B]:[k]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:C,...N}=await p1(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),T=(typeof d=="bigint"?nt(d):void 0)||h,S=VL(C),D=await(async()=>{if(N.to)return N.to;if(c&&c.length>0)return await oY({authorization:c[0]}).catch(()=>{throw new me("`to` is required. Could not infer from `authorizationList`")})})();Rm(e);const O=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(O||Pb)({...sT(N,{format:O}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:D,value:A});let I=BigInt(await W({block:T,request:G,rpcStateOverride:S}));if(c){const R=await ZL(t,{address:G.from}),B=await Promise.all(c.map(async k=>{const{address:M}=k,j=await W({block:T,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:nt(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));I+=B.reduce((k,M)=>k+M,0n)}return I}catch(a){throw Lbe(a,{...e,account:r,chain:t.chain})}}async function ave(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=tc({abi:n,args:s,functionName:i});try{return await ht(t,iT,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?kr(a.account):void 0;throw em(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}function oT(t,e){if(!Ja(t,{strict:!1}))throw new Df({address:t});if(!Ja(e,{strict:!1}))throw new Df({address:e});return t.toLowerCase()===e.toLowerCase()}const Z8="/docs/contract/decodeEventLog";function XL(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new F0e({docsPath:Z8});const c=e.find(g=>g.type==="event"&&o===XN(Kc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new AK(o,{docsPath:Z8});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,y]=f[g],b=a[g];if(!b)throw new ZN({abiItem:c,param:w});h[d?y:w.name||y]=cve({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=d1(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof CK||g instanceof JK?new EC({abiItem:c,data:n,params:p,size:Pr(n)}):g}else if(i)throw new EC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function cve({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(d1([t],e)||[])[0]}function eU(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===XN(u));if(!c)return null;const l=XL({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!lve({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof AK)return null;if(c instanceof EC||c instanceof ZN){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function lve(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?oT(o,a):i.type==="string"||i.type==="bytes"?Fs(Tb(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function Cd(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function tU(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>u1({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?nt(r):r,toBlock:typeof s=="bigint"?nt(s):s}]});const f=h.map(p=>Cd(p));return u?eU({abi:u,args:a,logs:f,strict:l}):f}async function wY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?Nm({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ht(t,tU,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}const LP="/docs/contract/decodeFunctionResult";function Pm(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=Nm({abi:e,args:n,name:r});if(!a)throw new Bw(r,{docsPath:LP});i=a}if(i.type!=="function")throw new Bw(void 0,{docsPath:LP});if(!i.outputs)throw new SK(i.name,{docsPath:LP});const o=d1(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nU=BigInt(0),CD=BigInt(1);function tI(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function CA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function bY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?nU:BigInt("0x"+t)}function aT(t){return bY(_C(t))}function vY(t){return Qc(t),bY(_C(Uint8Array.from(t).reverse()))}function rU(t,e){return LL(t.toString(16).padStart(e*2,"0"))}function EY(t,e){return rU(t,e).reverse()}function Pa(t,e,n){let r;if(typeof e=="string")try{r=LL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(ML(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const UP=t=>typeof t=="bigint"&&nU<=t;function uve(t,e,n){return UP(t)&&UP(e)&&UP(n)&&e<=t&&t<n}function dve(t,e,n,r){if(!uve(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function hve(t){let e;for(e=0;t>nU;t>>=CD,e+=1);return e}const cT=t=>(CD<<BigInt(t))-CD;function fve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Hp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function sU(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function X8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const pve="0.1.1";function gve(){return pve}let jr=class _D extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof _D){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof _D&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${gve()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return CY(this,e)}};function CY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?CY(t.cause,e):e?null:t}const mve="#__bigint";function yve(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+mve:s,n)}function wve(t,e){if(t4(t)>e)throw new Nve({givenSize:t4(t),maxSize:e})}const yu={zero:48,nine:57,A:65,F:70,a:97,f:102};function e4(t){if(t>=yu.zero&&t<=yu.nine)return t-yu.zero;if(t>=yu.A&&t<=yu.F)return t-(yu.A-10);if(t>=yu.a&&t<=yu.f)return t-(yu.a-10)}function bve(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new Tve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function iU(t,e){if(Xa(t)>e)throw new Dve({givenSize:Xa(t),maxSize:e})}function vve(t,e){if(typeof e=="number"&&e>0&&e>Xa(t)-1)throw new IY({offset:e,position:"start",size:Xa(t)})}function Eve(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Xa(t)!==n-e)throw new IY({offset:n,position:"end",size:Xa(t)})}function _Y(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Mve({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Cve=new TextEncoder;function _ve(t){return t instanceof Uint8Array?t:typeof t=="string"?Sve(t):Ave(t)}function Ave(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function Sve(t,e={}){const{size:n}=e;let r=t;n&&(iU(t,n),r=nm(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=e4(s.charCodeAt(c++)),u=e4(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new jr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function xve(t,e={}){const{size:n}=e,r=Cve.encode(t);return typeof n=="number"?(wve(r,n),Ive(r,n)):r}function Ive(t,e){return bve(t,{dir:"right",size:e})}function t4(t){return t.length}let Nve=class extends jr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Tve=class extends jr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const Rve=new TextEncoder,Pve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ove(t,e={}){const{strict:n=!1}=e;if(!t)throw new n4(t);if(typeof t!="string")throw new n4(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new r4(t);if(!t.startsWith("0x"))throw new r4(t)}function ru(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function AY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(iU(n,e.size),tm(n,e.size)):n}function SY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=Pve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(iU(r,e.size),nm(r,e.size)):r}function xi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new xY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?tm(c,r):c}function oU(t,e={}){return SY(Rve.encode(t),e)}function tm(t,e){return _Y(t,{dir:"left",size:e})}function nm(t,e){return _Y(t,{dir:"right",size:e})}function aU(t,e,n,r={}){const{strict:s}=r;vve(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&Eve(i,e,n),i}function Xa(t){return Math.ceil((t.length-2)/2)}function kve(t,e={}){const{strict:n=!1}=e;try{return Ove(t,{strict:n}),!0}catch{return!1}}let xY=class extends jr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class n4 extends jr{constructor(e){super(`Value \`${typeof e=="object"?yve(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class r4 extends jr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let Dve=class extends jr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class IY extends jr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Mve=class extends jr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Lve(t){return{address:t.address,amount:xi(t.amount),index:xi(t.index),validatorIndex:xi(t.validatorIndex)}}function NY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:xi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:xi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:xi(t.gasLimit)},...typeof t.number=="bigint"&&{number:xi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:xi(t.prevRandao)},...typeof t.time=="bigint"&&{time:xi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Lve)}}}const AD=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],SD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],TY=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],RY=[...TY,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Uve=[...TY,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],s4=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],i4=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],o4=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Bve="0x82ad56cb",PY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",$ve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Fve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class xD extends me{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class jve extends me{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class Wve extends me{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class OY extends me{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const BP="/docs/contract/encodeDeployData";function lT(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new M0e({docsPath:BP});if(!("inputs"in s))throw new T8({docsPath:BP});if(!s.inputs||s.inputs.length===0)throw new T8({docsPath:BP});const i=Kf(s.inputs,n);return Rb([r,i])}function kb({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new xD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new xD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function kY(t,{docsPath:e,...n}){const r=(()=>{const s=rT(t,n);return s instanceof f1?t:s})();return new tY(r,{docsPath:e,...n})}function cU(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const $P=new Map;function DY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>$P.delete(e),a=()=>c().map(({args:u})=>u),c=()=>$P.get(e)||[],l=u=>$P.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=cU();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function g1(t,e){var G,W,I,R;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:A,value:C,stateOverride:N,...x}=e,T=n?kr(n):void 0;if(u&&(h||f))throw new me("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new me("Cannot provide both `code` & `to` as parameters.");const S=u&&d,D=h&&f&&A&&d,O=S||D,$=S?Gve({code:u,data:d}):D?qve({data:d,factory:h,factoryData:f,to:A}):d;try{Rm(e);const k=(typeof i=="bigint"?nt(i):void 0)||o,M=l?NY(l):void 0,j=VL(N),q=(R=(I=(W=t.chain)==null?void 0:W.formatters)==null?void 0:I.transactionRequest)==null?void 0:R.format,ie=(q||Pb)({...sT(x,{format:q}),from:T==null?void 0:T.address,accessList:a,authorizationList:r,blobs:c,data:$,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:y,maxPriorityFeePerGas:b,nonce:v,to:O?void 0:A,value:C});if(s&&zve({request:ie})&&!j&&!M)try{return await Hve(t,{...ie,blockNumber:i,blockTag:o})}catch(fe){if(!(fe instanceof OY)&&!(fe instanceof xD))throw fe}const Y=(()=>{const fe=[ie,k];return j&&M?[...fe,j,M]:j?[...fe,j]:M?[...fe,{},M]:fe})(),te=await t.request({method:"eth_call",params:Y});return te==="0x"?{data:void 0}:{data:te}}catch(B){const k=Vve(B),{offchainLookup:M,offchainLookupSignature:j}=await ai(async()=>{const{offchainLookup:q,offchainLookupSignature:se}=await import("./ccip-l41S5mFd.js");return{offchainLookup:q,offchainLookupSignature:se}},[]);if(t.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===j&&A)return{data:await M(t,{data:k,to:A})};throw O&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new _be({factory:h}):kY(B,{...e,account:T,chain:t.chain})}}function zve({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Bve)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Hve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new OY;l=kb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?nt(s):void 0)||i,{schedule:h}=DY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const y=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=tc({abi:AD,args:[y],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return Pm({abi:AD,args:[y],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new nT({data:f});return f==="0x"?{data:void 0}:{data:f}}function Gve(t){const{code:e,data:n}=t;return lT({abi:bK(["constructor(bytes, bytes)"]),bytecode:PY,args:[e,n]})}function qve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return lT({abi:bK(["constructor(address, bytes, address, bytes)"]),bytecode:$ve,args:[s,e,n,r]})}function Vve(t){var n;if(!(t instanceof me))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function su(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=tc({abi:n,args:s,functionName:i});try{const{data:c}=await ht(t,g1,"call")({...o,data:a,to:r});return Pm({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw em(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Kve(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?kr(a.account):t.account,l=tc({abi:n,args:s,functionName:o});try{const{data:u}=await ht(t,g1,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=Pm({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw em(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}const FP=new Map,a4=new Map;let Yve=0;function _d(t,e,n){const r=++Yve,s=()=>FP.get(t)||[],i=()=>{const u=s();FP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=a4.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(FP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&a4.set(t,l),o}async function nI(t){return new Promise(e=>setTimeout(e,t))}function Db(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await nI(c);const l=async()=>{s&&(await t({unpoll:i}),await nI(r),l())};l()})(),i}const Qve=new Map,Jve=new Map;function Zve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,Qve),r=e(t,Jve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Xve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Zve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const eEe=t=>`blockNumber.${t}`;async function m1(t,{cacheTime:e=t.cacheTime}={}){const n=await Xve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:eEe(t.uid),cacheTime:e});return BigInt(n)}async function uT(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>Cd(i));return!("abi"in e)||!e.abi?s:eU({abi:e.abi,logs:s,strict:n})}async function dT(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function tEe(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,y=is(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return _d(y,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const N=Db(async()=>{var x;if(!C){try{A=await ht(t,KK,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let T;if(A)T=await ht(t,uT,"getFilterChanges")({filter:A});else{const S=await ht(t,m1,"getBlockNumber")({});v&&v<S?T=await ht(t,wY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):T=[],v=S}if(T.length===0)return;if(i)b.onLogs(T);else for(const S of T)b.onLogs([S])}catch(T){A&&T instanceof Xg&&(C=!1),(x=b.onError)==null||x.call(b,T)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ht(t,dT,"uninstallFilter")({filter:A}),N()}})})():(()=>{const w=h??!1,y=is(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return _d(y,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),N=o?u1({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:N}],onData(T){var D;if(!b)return;const S=T.result;try{const{eventName:O,args:$}=XL({abi:n,data:S.data,topics:S.topics,strict:h}),G=Cd(S,{args:$,eventName:O});A.onLogs([G])}catch(O){let $,G;if(O instanceof EC||O instanceof ZN){if(h)return;$=O.abiItem.name,G=(D=O.abiItem.inputs)==null?void 0:D.some(I=>!("name"in I&&I.name))}const W=Cd(S,{args:G?[]:{},eventName:$});A.onLogs([W])}},onError(T){var S;(S=A.onError)==null||S.call(A,T)}});v=x,b||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}class Om extends me{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class IS extends me{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function MY({chain:t,currentChainId:e}){if(!t)throw new Wve;if(e!==t.id)throw new jve({chain:t,currentChainId:e})}function LY(t,{docsPath:e,...n}){const r=(()=>{const s=rT(t,n);return s instanceof f1?t:s})();return new bbe(r,{docsPath:e,...n})}async function lU(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const jP=new eT(128);async function y1(t,e){var b,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new Om({docsPath:"/docs/actions/wallet/sendTransaction"});const y=n?kr(n):null;try{Rm(e);const N=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await oY({authorization:i[0]}).catch(()=>{throw new me("`to` is required. Could not infer from `authorizationList`.")})})();if((y==null?void 0:y.type)==="json-rpc"||y===null){let x;r!==null&&(x=await ht(t,Ob,"getChainId")({}),MY({currentChainId:x,chain:r}));const T=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,D=(T||Pb)({...sT(w,{format:T}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:y==null?void 0:y.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:N,type:p,value:g}),O=jP.get(t.uid),$=O?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:$,params:[D]},{retryCount:0})}catch(G){if(O===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(I=>(jP.set(t.uid,!0),I)).catch(I=>{const R=I;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(jP.set(t.uid,!1),W):R});throw W}}if((y==null?void 0:y.type)==="local"){const x=await ht(t,p1,"prepareTransactionRequest")({account:y,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:y.nonceManager,parameters:[...yY,"sidecars"],type:p,value:g,...w,to:N}),T=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await y.signTransaction(x,{serializer:T});return await ht(t,lU,"sendRawTransaction")({serializedTransaction:S})}throw(y==null?void 0:y.type)==="smart"?new IS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new IS({docsPath:"/docs/actions/wallet/sendTransaction",type:y==null?void 0:y.type})}catch(N){throw N instanceof IS?N:LY(N,{...e,account:y,chain:e.chain||void 0})}}async function UY(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new Om({docsPath:"/docs/contract/writeContract"});const l=r?kr(r):null,u=tc({abi:n,args:i,functionName:a});try{return await ht(t,y1,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw em(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}const BY={"0x0":"reverted","0x1":"success"};function nEe(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>Cd(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Yc(t.transactionIndex):null,status:t.status?BY[t.status]:null,type:t.type?cY[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const $Y="0x5792579257925792579257925792579257925792579257925792579257925792",FY=nt(0,{size:32});async function rEe(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?kr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?tc({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Za([p,f.dataSuffix]):p,to:f.to,value:f.value?nt(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:nt(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Gw(new me(b,{details:b}))}if(a&&d.length>1){const y="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new qw(new me(y,{details:y}))}const p=[];for(const y of d){const b=y1(t,{account:u,chain:s,data:y.data,to:y.to,value:y.value?la(y.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(y=>y.status==="rejected"))throw g[0].reason;const w=g.map(y=>y.status==="fulfilled"?y.value:FY);return{id:Za([...w,nt(s.id,{size:32}),$Y])}}throw LY(h,{...e,account:u,chain:e.chain})}}async function jY(t,e){async function n(u){if(u.endsWith($Y.slice(2))){const h=Ql(Zx(u,-64,-32)),f=Zx(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>FY.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:Yc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?Yc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:la(u.blockNumber),gasUsed:la(u.gasUsed),status:BY[u.status]})))??[],statusCode:l,status:c,version:o}}async function sEe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=is(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=cU();let u;const d=_d(o,{resolve:c,reject:l},h=>{const f=Db(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await jY(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new iEe({id:n}))},i):void 0,await a}class iEe extends me{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const ID=256;let _A=ID,AA;function WY(t=11){if(!AA||_A+t>ID*2){AA="",_A=0;for(let e=0;e<ID;e++)AA+=(256+Math.random()*256|0).toString(16).substring(1)}return AA.substring(_A,_A+++t)}function zY(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?kr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:WY()};function y(b){return v=>{const A=v(b);for(const N in w)delete A[N];const C={...b,...A};return Object.assign(C,{extend:y(C)})}}return Object.assign(w,{extend:y(w)})}const SA=new eT(8192);function oEe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(SA.get(n))return SA.get(n);const r=t().finally(()=>SA.delete(n));return SA.set(n,r),r}function rI(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await nI(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function aEe(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new Gp(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new Gp(new Error("method not supported"),{method:l});const u=s?$w(`${c}.${is(n)}`):void 0;return oEe(()=>rI(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case SC.code:throw new SC(f);case xC.code:throw new xC(f);case IC.code:throw new IC(f,{method:n.method});case NC.code:throw new NC(f);case Zg.code:throw new Zg(f);case Xg.code:throw new Xg(f);case TC.code:throw new TC(f);case wf.code:throw new wf(f);case zw.code:throw new zw(f);case Gp.code:throw new Gp(f,{method:n.method});case Hw.code:throw new Hw(f);case RC.code:throw new RC(f);case Jr.code:throw new Jr(f);case PC.code:throw new PC(f);case OC.code:throw new OC(f);case kC.code:throw new kC(f);case DC.code:throw new DC(f);case nu.code:throw new nu(f);case Gw.code:throw new Gw(f);case MC.code:throw new MC(f);case LC.code:throw new LC(f);case UC.code:throw new UC(f);case BC.code:throw new BC(f);case $C.code:throw new $C(f);case qw.code:throw new qw(f);case 5e3:throw new Jr(f);default:throw h instanceof me?h:new Sbe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof AE){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>cEe(h)}),{enabled:s,id:u})}}function cEe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Hw.code||t.code===Zg.code:t instanceof AE&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function uU({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=WY();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:aEe(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function lEe(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>uU({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function sI(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=uEe,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=uU({key:n,name:r,async request({method:g,params:w}){let y;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:w});return f({method:g,params:w,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:A,status:"error"}),i(C)||v===h.length-1||(y??(y=h.slice(v+1).some(N=>{const{include:x,exclude:T}=N({chain:c}).config.methods||{};return x?x.includes(g):T?!T.includes(g):!0})),!y))throw C;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};dEe({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function uEe(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===zw.code||t.code===Jr.code||qp.nodeMessage.test(t.message)||t.code===5e3))}function dEe({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),y=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-y,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const y=u.map(N=>N[w].latency),v=1-y.reduce((N,x)=>N+x,0)/y.length/f,A=u.map(N=>N[w].success),C=A.reduce((N,x)=>N+x,0)/A.length;return C===0?[0,w]:[l*v+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await nI(e),d()};d()}class hEe extends me{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function HY(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function fEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const c4=fEe();function pEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await HY(async({signal:p})=>{const g={...a,body:Array.isArray(r)?is(r.map(v=>({jsonrpc:"2.0",id:v.id??c4.take(),...v}))):is({jsonrpc:"2.0",id:r.id??c4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),y=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(y.url??t,y)},{errorInstance:new G8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new AE({body:r,details:is(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof AE||h instanceof G8?h:new AE({body:r,cause:h,url:t})}}}}function Ha(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,y=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new hEe;const v=pEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:y});return uU({key:s,methods:i,name:o,async request({method:A,params:C}){const N={method:A,params:C},{schedule:x}=DY({id:b,wait:g,shouldSplitBatch(O){return O.length>p},fn:O=>v.request({body:O}),sort:(O,$)=>O.id-$.id}),T=async O=>n?x(O):[await v.request({body:O})],[{error:S,result:D}]=await T(N);if(u)return{error:S,result:D};if(S)throw new qL({body:N,error:S,url:b});return D},retryCount:w,retryDelay:l,timeout:y,type:"http"},{fetchOptions:r,url:b})}}function dU(t,e){var r,s,i,o,a,c;if(!(t instanceof me))return!1;const n=t.walk(l=>l instanceof hD);return n instanceof hD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===YK[50]):!1}function gEe(t){const{abi:e,data:n}=t,r=Ww(n,0,4),s=e.find(i=>i.type==="function"&&r===l1(Kc(i)));if(!s)throw new j0e(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?d1(s.inputs,Ww(n,4)):void 0}}const WP="/docs/contract/encodeErrorResult";function l4(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=Nm({abi:e,args:r,name:n});if(!c)throw new R8(n,{docsPath:WP});s=c}if(s.type!=="error")throw new R8(void 0,{docsPath:WP});const i=Kc(s),o=l1(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new $0e(s.name,{docsPath:WP});a=Kf(s.inputs,r)}return Rb([o,a])}const zP="/docs/contract/encodeFunctionResult";function mEe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=Nm({abi:e,name:n});if(!o)throw new Bw(n,{docsPath:zP});s=o}if(s.type!=="function")throw new Bw(void 0,{docsPath:zP});if(!s.outputs)throw new SK(s.name,{docsPath:zP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new xK(r)})();return Kf(s.outputs,i)}const hU="x-batch-gateway:true";async function yEe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=gEe({abi:SD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(hU)?await yEe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=wEe(c)}})),mEe({abi:SD,functionName:"query",result:[s,i]})}function wEe(t){return t.name==="HttpRequestError"&&t.status?l4({abi:SD,errorName:"HttpError",args:[t.status,t.shortMessage]}):l4({abi:[QK],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function GY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return tu(e)?e:null}function NS(t){let e=new Uint8Array(32).fill(0);if(!t)return as(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=GY(n[r]),i=s?Tb(s):Fs(kg(n[r]),"bytes");e=Fs(Za([e,i]),"bytes")}return as(e)}function bEe(t){return`[${t.slice(2)}]`}function vEe(t){const e=new Uint8Array(32).fill(0);return t?GY(t)||Fs(kg(t)):as(e)}function hT(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(kg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=kg(s[i]);o.byteLength>255&&(o=kg(bEe(vEe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function EEe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return kb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=tc({abi:i4,functionName:"addr",...s!=null?{args:[NS(i),BigInt(s)]}:{args:[NS(i)]}}),h={address:l,abi:RY,functionName:"resolve",args:[Ya(hT(i)),d,o??[hU]],blockNumber:n,blockTag:r},p=await ht(t,su,"readContract")(h);if(p[0]==="0x")return null;const g=Pm({abi:i4,args:s!=null?[NS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||Ql(g)==="0x00"?null:g}catch(d){if(a)throw d;if(dU(d,"resolve"))return null;throw d}}class CEe extends me{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class wv extends me{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class fU extends me{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class _Ee extends me{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const AEe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,SEe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,xEe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,IEe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function NEe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function u4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function qY({uri:t,gatewayUrls:e}){const n=xEe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=u4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=u4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(AEe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||SEe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(IEe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new fU({uri:t})}function VY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new CEe({data:t});return t.image||t.image_url||t.image_data}async function TEe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await pU({gatewayUrls:t,uri:VY(n)})}catch{throw new fU({uri:e})}}async function pU({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=qY({uri:e,gatewayUrls:t});if(r||await NEe(n))return n;throw new fU({uri:e})}function REe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new wv({reason:"Only EIP-155 supported"});if(!o)throw new wv({reason:"Chain ID not found"});if(!c)throw new wv({reason:"Contract address not found"});if(!s)throw new wv({reason:"Token ID not found"});if(!a)throw new wv({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function PEe(t,{nft:e}){if(e.namespace==="erc721")return su(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return su(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new _Ee({namespace:e.namespace})}async function OEe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?kEe(t,{gatewayUrls:e,record:n}):pU({uri:n,gatewayUrls:e})}async function kEe(t,{gatewayUrls:e,record:n}){const r=REe(n),s=await PEe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=qY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return pU({uri:VY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),TEe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function KY(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return kb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:RY,functionName:"resolve",args:[Ya(hT(i)),tc({abi:s4,functionName:"text",args:[NS(i),s]}),o??[hU]],blockNumber:n,blockTag:r},f=await ht(t,su,"readContract")(d);if(f[0]==="0x")return null;const p=Pm({abi:s4,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(dU(d,"resolve"))return null;throw d}}async function DEe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ht(t,KY,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await OEe(t,{record:c,gatewayUrls:r})}catch{return null}}async function YY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=kb({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:Uve,functionName:"reverse",args:[Ya(hT(c))],blockNumber:n,blockTag:r},u=ht(t,su,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(dU(l,"reverse"))return null;throw l}}async function MEe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return kb({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ht(t,su,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Ya(hT(s))],blockNumber:n,blockTag:r});return c}async function QY(t,e){var w,y,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?kr(n):void 0;try{Rm(e);const A=(typeof r=="bigint"?nt(r):void 0)||s,C=(b=(y=(w=t.chain)==null?void 0:w.formatters)==null?void 0:y.transactionRequest)==null?void 0:b.format,x=(C||Pb)({...sT(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),T=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:T.accessList,gasUsed:BigInt(T.gasUsed)}}catch(v){throw kY(v,{...e,account:g,chain:t.chain})}}async function LEe(t){const e=tT(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function JY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=tT(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>u1({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?nt(i):i,toBlock:typeof a=="bigint"?nt(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function ZY(t){const e=tT(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function UEe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function BEe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?nt(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Yc(i)}async function d4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?nt(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class $Ee extends me{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function FEe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ht(t,su,"readContract")({abi:jEe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new $Ee({address:n}):o}}const jEe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function WEe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function zEe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?nt(n):void 0,o=await t.request({method:"eth_feeHistory",params:[nt(e),i||r,s]},{dedupe:!!i});return WEe(o)}async function HEe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>Cd(i));return e.abi?eU({abi:e.abi,logs:s,strict:n}):s}function XY(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class GEe extends me{constructor({domain:e}){super(`Invalid domain "${is(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class qEe extends me{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class VEe extends me{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function KEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:iQ({domain:e}),...t.types};sQ({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(YEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(eQ({data:n,primaryType:r,types:s})),Fs(Za(i))}function YEe({domain:t,types:e}){return eQ({data:t,primaryType:"EIP712Domain",types:e})}function eQ({data:t,primaryType:e,types:n}){const r=tQ({data:t,primaryType:e,types:n});return Fs(r)}function tQ({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[QEe({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=rQ({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Kf(r,s)}function QEe({primaryType:t,types:e}){const n=Ya(JEe({primaryType:t,types:e}));return Fs(n)}function JEe({primaryType:t,types:e}){let n="";const r=nQ({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function nQ({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])nQ({primaryType:i.type,types:e},n);return n}function rQ({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},Fs(tQ({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},Fs(r)];if(n==="string")return[{type:"bytes32"},Fs(Ya(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>rQ({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},Fs(Kf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function ZEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return is({domain:o,message:a,primaryType:r,types:s})}function sQ(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(qK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,y]=h;nt(d,{signed:w==="int",size:Number.parseInt(y)/8})}if(u==="address"&&typeof d=="string"&&!Ja(d))throw new Df({address:d});const f=u.match(jwe);if(f){const[g,w]=f;if(w&&Pr(d)!==Number.parseInt(w))throw new z0e({expectedSize:Number.parseInt(w),givenSize:Pr(d)})}const p=s[u];p&&(XEe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new GEe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new qEe({primaryType:r,types:s})}function iQ({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function XEe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new VEe({type:t})}const eCe=`Ethereum Signed Message:
`;function tCe(t){const e=typeof t=="string"?$w(t):typeof t.raw=="string"?t.raw:as(t.raw),n=$w(`${eCe}${Pr(e)}`);return Za([n,e])}function oQ(t,e){return Fs(tCe(t),e)}const aQ="0x6492649264926492649264926492649264926492649264926492649264926492";function nCe(t){return Zx(t,-32)===aQ}function rCe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=Rb([Kf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),aQ]);return s==="hex"?i:Qa(i)}class sCe extends me{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function iCe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new sCe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function oCe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function aCe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?Yc(t.nonce):void 0,storageProof:t.storageProof?oCe(t.storageProof):void 0}}async function cCe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?nt(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return aCe(a)}async function lCe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?nt(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function fT(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?nt(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,nt(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,nt(i)]},{dedupe:!!a}),!c)throw new XK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||lY)(c)}async function uCe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ht(t,m1,"getBlockNumber")({}),e?ht(t,fT,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function ND(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new eY({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||nEe)(n)}async function cQ(t,e){var y;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((y=t.batch)==null?void 0:y.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=kb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:C,functionName:N}=l[b];try{const x=tc({abi:v,args:C,functionName:N});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const T=em(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:N,sender:n});if(!r)throw T;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ht(t,su,"readContract")({abi:AD,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:N,success:x}=A[C],{callData:T}=h[b][C],{abi:S,address:D,functionName:O,args:$}=l[w.length];try{if(T==="0x")throw new o1;if(!x)throw new nT({data:N});const G=Pm({abi:S,args:$,data:N,functionName:O});w.push(r?{result:G,status:"success"}:G)}catch(G){const W=em(G,{abi:S,address:D,args:$,docsPath:"/docs/contract/multicall",functionName:O});if(!r)throw W;w.push({error:W,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new me("multicall results mismatch");return w}async function TD(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?NY(h.blockOverrides):void 0,p=h.calls.map(w=>{const y=w,b=y.account?kr(y.account):void 0,v=y.abi?tc(y):y.data,A={...y,data:y.dataSuffix?Za([v||"0x",y.dataSuffix]):v,from:y.from??(b==null?void 0:b.address)};return Rm(A),Pb(A)}),g=h.stateOverrides?VL(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?nt(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...uY(h),calls:h.calls.map((p,g)=>{var D,O;const{abi:w,args:y,functionName:b,to:v}=s[f].calls[g],A=((D=p.error)==null?void 0:D.data)??p.returnData,C=BigInt(p.gasUsed),N=(O=p.logs)==null?void 0:O.map($=>Cd($)),x=p.status==="0x1"?"success":"failure",T=w&&x==="success"&&A!=="0x"?Pm({abi:w,data:A,functionName:b}):null,S=(()=>{var G;if(x==="success")return;let $;if(((G=p.error)==null?void 0:G.data)==="0x"?$=new o1:p.error&&($=new nT(p.error)),!!$)return em($,{abi:w??[],address:v??"0x",args:y,functionName:b??"<unknown>"})})();return{data:A,gasUsed:C,logs:N,status:x,...x==="success"?{result:T}:{error:S}}})}))}catch(c){const l=c,u=rT(l,{});throw u instanceof f1?l:u}}function lQ(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=$L(_ve(t));return n==="Bytes"?r:SY(r)}let dCe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const hCe={checksum:new dCe(8192)},HP=hCe.checksum,fCe=/^0x[a-fA-F0-9]{40}$/;function pT(t,e={}){const{strict:n=!0}=e;if(!fCe.test(t))throw new h4({address:t,cause:new gCe});if(n){if(t.toLowerCase()===t)return;if(pCe(t)!==t)throw new h4({address:t,cause:new mCe})}}function pCe(t){if(HP.has(t))return HP.get(t);pT(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=lQ(xve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return HP.set(t,s),s}function RD(t,e={}){const{strict:n=!0}=e??{};try{return pT(t,{strict:n}),!0}catch{return!1}}class h4 extends jr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class gCe extends jr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class mCe extends jr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function PD(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new jr("Unable to normalize signature.");return s}function OD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return RD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>OD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>OD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function uQ(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return uQ(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?RD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?RD(n[r],{strict:!1}):!1)return o}}function dQ(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?N8(t):t;return{...r,...n?{hash:Jy(r)}:{}}}function yCe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=kve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?hQ(l)===aU(e,0,4):l.type==="event"?Jy(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new kD({name:e});if(o.length===1)return{...o[0],...s?{hash:Jy(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Jy(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?OD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=uQ(l.inputs,a.inputs,r);if(d)throw new bCe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new kD({name:e});return{...c,...s?{hash:Jy(c)}:{}}}function hQ(t){return aU(Jy(t),0,4)}function wCe(t){const e=typeof t=="string"?t:Jx(t);return PD(e)}function Jy(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:lQ(oU(wCe(t)))}class bCe extends jr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${PD(Jx(e.abiItem))}\`, and`,`\`${n.type}\` in \`${PD(Jx(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class kD extends jr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const vCe=/^(.*)\[([0-9]*)\]$/,ECe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,fQ=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function CCe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(gU({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function gU({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=RCe(r.type);if(s){const[i,o]=s;return ACe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return TCe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return _Ce(n,{checksum:t});if(r.type==="bool")return xCe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=fQ.exec(r.type)??[];return ICe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return SCe(n,{type:r.type});if(r.type==="string")return NCe(n);throw new yQ(r.type)}function mU(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Xa(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(xi(e+s,{size:32})),r.push(a),s+=Xa(a)):n.push(a)}return ru(...n,...r)}function _Ce(t,e){const{checksum:n=!1}=e;return pT(t,{strict:n}),{dynamic:!1,encoded:tm(t.toLowerCase())}}function ACe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new OCe(t);if(!i&&t.length!==r)throw new PCe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=gU({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=mU(a);if(i){const l=xi(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?ru(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:ru(...a.map(({encoded:c})=>c))}}function SCe(t,{type:e}){const[,n]=e.split("bytes"),r=Xa(t);if(!n){let s=t;return r%32!==0&&(s=nm(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:ru(tm(xi(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new gQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:nm(t)}}function xCe(t){if(typeof t!="boolean")throw new jr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:tm(AY(t))}}function ICe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new xY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:xi(t,{size:32,signed:e})}}function NCe(t){const e=oU(t),n=Math.ceil(Xa(e)/32),r=[];for(let s=0;s<n;s++)r.push(nm(aU(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:ru(nm(xi(Xa(e),{size:32})),...r)}}function TCe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=gU({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?mU(i):ru(...i.map(({encoded:o})=>o))}}function RCe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function pQ(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new mQ({expectedLength:t.length,givenLength:e.length});const s=CCe({checksumAddress:r,parameters:t,values:e}),i=mU(s);return i.length===0?"0x":i}function DD(t,e){if(t.length!==e.length)throw new mQ({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(DD.encode(s,i))}return ru(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return pT(c),tm(c.toLowerCase(),s?32:0)}if(n==="string")return oU(r);if(n==="bytes")return r;if(n==="bool")return tm(AY(r),s?32:1);const i=n.match(fQ);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return xi(r,{size:s?32:d,signed:l==="int"})}const o=n.match(ECe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new gQ({expectedSize:Number.parseInt(l),value:r});return nm(r,s?32:0)}const a=n.match(vCe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":ru(...u)}throw new yQ(n)}t.encode=e})(DD||(DD={}));class PCe extends jr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class gQ extends jr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Xa(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class mQ extends jr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class OCe extends jr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class yQ extends jr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function kCe(t,e){var s;const{bytecode:n,args:r}=e;return ru(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?pQ(t.inputs,r):"0x")}function DCe(t){return dQ(t)}function MCe(t,...e){const{overloads:n}=t,r=n?LCe([t,...n],t.name,{args:e[0]}):t,s=UCe(r),i=e.length>0?pQ(r.inputs,e[0]):void 0;return i?ru(s,i):s}function ry(t,e={}){return dQ(t,e)}function LCe(t,e,n){const r=yCe(t,e,n);if(r.type!=="function")throw new kD({name:e,type:"function"});return r}function UCe(t){return hQ(t)}const BCe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",ol="0x0000000000000000000000000000000000000000",$Ce="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function FCe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?kr(e.account):void 0;if(o&&!l)throw new me("`account` is required when `traceAssetChanges` is true");const u=l?kCe(DCe("constructor(bytes, bytes)"),{bytecode:PY,args:[$Ce,MCe(ry("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async k=>{if(!k.data&&!k.abi)return;const{accessList:M}=await QY(t,{account:l.address,...k,data:k.abi?tc(k):k.data});return M.map(({address:j,storageKeys:q})=>q.length>0?j:null)})).then(k=>k.flat().filter(Boolean)):[],h=await TD(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((k,M)=>({abi:[ry("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:ol,nonce:M})),stateOverrides:[{address:ol,nonce:0}]}]:[],{calls:[...s,{}].map(k=>({...k,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((k,M)=>({abi:[ry("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:ol,nonce:M})),stateOverrides:[{address:ol,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[ry("function decimals() returns (uint256)")],functionName:"decimals",from:ol,nonce:M})),stateOverrides:[{address:ol,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[ry("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:ol,nonce:M})),stateOverrides:[{address:ol,nonce:0}]},{calls:d.map((k,M)=>({to:k,abi:[ry("function symbol() returns (string)")],functionName:"symbol",from:ol,nonce:M})),stateOverrides:[{address:ol,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,y,b,v,A]=o?h:[],{calls:C,...N}=f,x=C.slice(0,-1)??[],T=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],D=[...T,...S].map(k=>k.status==="success"?la(k.data):null),O=(w==null?void 0:w.calls)??[],$=(y==null?void 0:y.calls)??[],G=[...O,...$].map(k=>k.status==="success"?la(k.data):null),W=((b==null?void 0:b.calls)??[]).map(k=>k.status==="success"?k.result:null),I=((A==null?void 0:A.calls)??[]).map(k=>k.status==="success"?k.result:null),R=((v==null?void 0:v.calls)??[]).map(k=>k.status==="success"?k.result:null),B=[];for(const[k,M]of G.entries()){const j=D[k];if(typeof M!="bigint"||typeof j!="bigint")continue;const q=W[k-1],se=I[k-1],ie=R[k-1],Y=k===0?{address:BCe,decimals:18,symbol:"ETH"}:{address:d[k-1],decimals:ie||q?Number(q??1):void 0,symbol:se??void 0};B.some(te=>te.token.address===Y.address)||B.push({token:Y,value:{pre:j,post:M,diff:M-j}})}return{assetChanges:B,block:N,results:x}}let wQ=class extends UL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,uwe(e);const r=a1(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),jw(i)}update(e){return Fw(this),this.iHash.update(e),this}digestInto(e){Fw(this),Qc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const bQ=(t,e,n)=>new wQ(t,e).update(n).digest();bQ.create=(t,e)=>new wQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vo=BigInt(0),Di=BigInt(1),Vp=BigInt(2),jCe=BigInt(3),vQ=BigInt(4),EQ=BigInt(5),CQ=BigInt(8);function $a(t,e){const n=t%e;return n>=vo?n:e+n}function ba(t,e,n){let r=t;for(;e-- >vo;)r*=r,r%=n;return r}function f4(t,e){if(t===vo)throw new Error("invert: expected non-zero number");if(e<=vo)throw new Error("invert: expected positive modulus, got "+e);let n=$a(t,e),r=e,s=vo,i=Di;for(;n!==vo;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Di)throw new Error("invert: does not exist");return $a(s,e)}function _Q(t,e){const n=(t.ORDER+Di)/vQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function WCe(t,e){const n=(t.ORDER-EQ)/CQ,r=t.mul(e,Vp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Vp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function zCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Di,n=0;for(;e%Vp===vo;)e/=Vp,n++;let r=Vp;const s=gT(t);for(;p4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return _Q;let i=s.pow(r,e);const o=(e+Di)/Vp;return function(c,l){if(c.is0(l))return l;if(p4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Di<<BigInt(u-p-1),y=c.pow(d,w);u=p,d=c.sqr(y),h=c.mul(h,d),f=c.mul(f,y)}return f}}function HCe(t){return t%vQ===jCe?_Q:t%CQ===EQ?WCe:zCe(t)}const GCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function qCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=GCe.reduce((r,s)=>(r[s]="function",r),e);return sU(t,n),t}function VCe(t,e,n){if(n<vo)throw new Error("invalid exponent, negatives unsupported");if(n===vo)return t.ONE;if(n===Di)return e;let r=t.ONE,s=e;for(;n>vo;)n&Di&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Di;return r}function AQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function p4(t,e){const n=(t.ORDER-Di)/Vp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function KCe(t,e){e!==void 0&&CC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function gT(t,e,n=!1,r={}){if(t<=vo)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=KCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:cT(o),ZERO:vo,ONE:Di,create:u=>$a(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return vo<=u&&u<t},is0:u=>u===vo,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Di)===Di,neg:u=>$a(-u,t),eql:(u,d)=>u===d,sqr:u=>$a(u*u,t),add:(u,d)=>$a(u+d,t),sub:(u,d)=>$a(u-d,t),mul:(u,d)=>$a(u*d,t),pow:(u,d)=>VCe(l,u,d),div:(u,d)=>$a(u*f4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>f4(u,t),sqrt:i||(u=>(c||(c=HCe(t)),c(l,u))),toBytes:u=>n?EY(u,a):rU(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?vY(u):aT(u)},invertBatch:u=>AQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function SQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function xQ(t){const e=SQ(t);return e+Math.ceil(e/2)}function YCe(t,e,n=!1){const r=t.length,s=SQ(e),i=xQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?vY(t):aT(t),a=$a(o,e-Di)+Di;return n?EY(a,s):rU(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vw=BigInt(0),Kp=BigInt(1);function SE(t,e){const n=e.negate();return t?n:e}function QCe(t,e,n){const r=o=>o.pz,s=AQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function IQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function GP(t,e){IQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=cT(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function g4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=Kp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function JCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function ZCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const qP=new WeakMap,NQ=new WeakMap;function VP(t){return NQ.get(t)||1}function m4(t){if(t!==Vw)throw new Error("invalid wNAF")}function XCe(t,e){return{constTimeNegate:SE,hasPrecomputes(n){return VP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Vw;)r&Kp&&(s=s.add(i)),i=i.double(),r>>=Kp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=GP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=GP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=g4(s,c,a);s=l,d?o=o.add(SE(f,r[p])):i=i.add(SE(h,r[u]))}return m4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=GP(n,e);for(let a=0;a<o.windows&&s!==Vw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=g4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return m4(s),i},getPrecomputes(n,r,s){let i=qP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),qP.set(r,i))),i},wNAFCached(n,r,s){const i=VP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=VP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){IQ(r,e),NQ.set(n,r),qP.delete(n)}}}function e_e(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Vw||r>Vw;)n&Kp&&(i=i.add(s)),r&Kp&&(o=o.add(s)),s=s.double(),n>>=Kp,r>>=Kp;return{p1:i,p2:o}}function t_e(t,e,n,r){JCe(n,t),ZCe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=hve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=cT(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],y=Number(w>>BigInt(f)&l);u[y]=u[y].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function y4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return qCe(e),e}else return gT(t)}function n_e(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Vw))throw new Error(`CURVE.${a} must be positive bigint`)}const r=y4(e.p,n.Fp),s=y4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function w4(t){t.lowS!==void 0&&tI("lowS",t.lowS),t.prehash!==void 0&&tI("prehash",t.prehash)}class r_e extends Error{constructor(e=""){super(e)}}const ku={Err:r_e,_tlv:{encode:(t,e)=>{const{Err:n}=ku;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=CA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?CA(s.length/2|128):"";return CA(t)+i+s+e},decode(t,e){const{Err:n}=ku;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=ku;if(t<xE)throw new e("integer: negative integers are not allowed");let n=CA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=ku;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return aT(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=ku,s=Pa("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=ku,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},xE=BigInt(0),IE=BigInt(1),s_e=BigInt(2),xA=BigInt(3),i_e=BigInt(4);function o_e(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function TQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=Pa("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function a_e(t,e={}){const{Fp:n,Fn:r}=n_e("weierstrass",t,e),{h:s,n:i}=t;sU(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(T,S,D){const{x:O,y:$}=S.toAffine(),G=n.toBytes(O);if(tI("isCompressed",D),D){a();const W=!n.isOdd($);return Hp(RQ(W),G)}else return Hp(Uint8Array.of(4),G,n.toBytes($))}function l(T){Qc(T);const S=n.BYTES,D=S+1,O=2*S+1,$=T.length,G=T[0],W=T.subarray(1);if($===D&&(G===2||G===3)){const I=n.fromBytes(W);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const R=h(I);let B;try{B=n.sqrt(R)}catch(j){const q=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+q)}a();const k=n.isOdd(B);return(G&1)===1!==k&&(B=n.neg(B)),{x:I,y:B}}else if($===O&&G===4){const I=n.fromBytes(W.subarray(S*0,S*1)),R=n.fromBytes(W.subarray(S*1,S*2));if(!f(I,R))throw new Error("bad point: is not on curve");return{x:I,y:R}}else throw new Error(`bad point: got length ${$}, expected compressed=${D} or uncompressed=${O}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=o_e(n,t.a,t.b);function f(T,S){const D=n.sqr(S),O=h(T);return n.eql(D,O)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,xA),i_e),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(T,S,D=!1){if(!n.isValid(S)||D&&n.is0(S))throw new Error(`bad point coordinate ${T}`);return S}function y(T){if(!(T instanceof C))throw new Error("ProjectivePoint expected")}const b=X8((T,S)=>{const{px:D,py:O,pz:$}=T;if(n.eql($,n.ONE))return{x:D,y:O};const G=T.is0();S==null&&(S=G?n.ONE:n.inv($));const W=n.mul(D,S),I=n.mul(O,S),R=n.mul($,S);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:W,y:I}}),v=X8(T=>{if(T.is0()){if(e.allowInfinityPoint&&!n.is0(T.py))return;throw new Error("bad point: ZERO")}const{x:S,y:D}=T.toAffine();if(!n.isValid(S)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!f(S,D))throw new Error("bad point: equation left != right");if(!T.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(T,S,D,O,$){return D=new C(n.mul(D.px,T),D.py,D.pz),S=SE(O,S),D=SE($,D),S.add(D)}class C{constructor(S,D,O){this.px=w("x",S),this.py=w("y",D,!0),this.pz=w("z",O),Object.freeze(this)}static fromAffine(S){const{x:D,y:O}=S||{};if(!S||!n.isValid(D)||!n.isValid(O))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(O)?C.ZERO:new C(D,O,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return QCe(C,"pz",S)}static fromBytes(S){return Qc(S),C.fromHex(S)}static fromHex(S){const D=C.fromAffine(d(Pa("pointHex",S)));return D.assertValidity(),D}static fromPrivateKey(S){const D=TQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(D(S))}static msm(S,D){return t_e(C,r,S,D)}precompute(S=8,D=!0){return x.setWindowSize(this,S),D||this.multiply(xA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){y(S);const{px:D,py:O,pz:$}=this,{px:G,py:W,pz:I}=S,R=n.eql(n.mul(D,I),n.mul(G,$)),B=n.eql(n.mul(O,I),n.mul(W,$));return R&&B}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:D}=t,O=n.mul(D,xA),{px:$,py:G,pz:W}=this;let I=n.ZERO,R=n.ZERO,B=n.ZERO,k=n.mul($,$),M=n.mul(G,G),j=n.mul(W,W),q=n.mul($,G);return q=n.add(q,q),B=n.mul($,W),B=n.add(B,B),I=n.mul(S,B),R=n.mul(O,j),R=n.add(I,R),I=n.sub(M,R),R=n.add(M,R),R=n.mul(I,R),I=n.mul(q,I),B=n.mul(O,B),j=n.mul(S,j),q=n.sub(k,j),q=n.mul(S,q),q=n.add(q,B),B=n.add(k,k),k=n.add(B,k),k=n.add(k,j),k=n.mul(k,q),R=n.add(R,k),j=n.mul(G,W),j=n.add(j,j),k=n.mul(j,q),I=n.sub(I,k),B=n.mul(j,M),B=n.add(B,B),B=n.add(B,B),new C(I,R,B)}add(S){y(S);const{px:D,py:O,pz:$}=this,{px:G,py:W,pz:I}=S;let R=n.ZERO,B=n.ZERO,k=n.ZERO;const M=t.a,j=n.mul(t.b,xA);let q=n.mul(D,G),se=n.mul(O,W),ie=n.mul($,I),Y=n.add(D,O),te=n.add(G,W);Y=n.mul(Y,te),te=n.add(q,se),Y=n.sub(Y,te),te=n.add(D,$);let fe=n.add(G,I);return te=n.mul(te,fe),fe=n.add(q,ie),te=n.sub(te,fe),fe=n.add(O,$),R=n.add(W,I),fe=n.mul(fe,R),R=n.add(se,ie),fe=n.sub(fe,R),k=n.mul(M,te),R=n.mul(j,ie),k=n.add(R,k),R=n.sub(se,k),k=n.add(se,k),B=n.mul(R,k),se=n.add(q,q),se=n.add(se,q),ie=n.mul(M,ie),te=n.mul(j,te),se=n.add(se,ie),ie=n.sub(q,ie),ie=n.mul(M,ie),te=n.add(te,ie),q=n.mul(se,te),B=n.add(B,q),q=n.mul(fe,te),R=n.mul(Y,R),R=n.sub(R,q),q=n.mul(Y,se),k=n.mul(fe,k),k=n.add(k,q),new C(R,B,k)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:D}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let O,$;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(D){const{k1neg:W,k1:I,k2neg:R,k2:B}=D.splitScalar(S),{p:k,f:M}=G(I),{p:j,f:q}=G(B);$=M.add(q),O=A(D.beta,k,j,W,R)}else{const{p:W,f:I}=G(S);O=W,$=I}return C.normalizeZ([O,$])[0]}multiplyUnsafe(S){const{endo:D}=e,O=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===xE||O.is0())return C.ZERO;if(S===IE)return O;if(x.hasPrecomputes(this))return this.multiply(S);if(D){const{k1neg:$,k1:G,k2neg:W,k2:I}=D.splitScalar(S),{p1:R,p2:B}=e_e(C,O,G,I);return A(D.beta,R,B,$,W)}else return x.wNAFCachedUnsafe(O,S)}multiplyAndAddUnsafe(S,D,O){const $=this.multiplyUnsafe(D).add(S.multiplyUnsafe(O));return $.is0()?void 0:$}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===IE?!0:S?S(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===IE?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return tI("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return _C(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const N=r.BITS,x=XCe(C,e.endo?Math.ceil(N/2):N);return C}function RQ(t){return Uint8Array.of(t?2:3)}function c_e(t,e,n={}){sU(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||wwe,s=e.hmac||((O,...$)=>bQ(e.hash,O,Hp(...$))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(O){const $=a>>IE;return O>$}function u(O){return l(O)?o.neg(O):O}function d(O,$){if(!o.isValidNot0($))throw new Error(`invalid signature ${O}: out of range 1..CURVE.n`)}class h{constructor($,G,W){d("r",$),d("s",G),this.r=$,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact($){const G=o.BYTES,W=Pa("compactSignature",$,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER($){const{r:G,s:W}=ku.toSig(Pa("DER",$));return new h(G,W)}assertValidity(){}addRecoveryBit($){return new h(this.r,this.s,$)}recoverPublicKey($){const G=i.ORDER,{r:W,s:I,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*s_e<G&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const k=R===2||R===3?W+a:W;if(!i.isValid(k))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(k),j=t.fromHex(Hp(RQ((R&1)===0),M)),q=o.inv(k),se=v(Pa("msgHash",$)),ie=o.create(-se*q),Y=o.create(I*q),te=t.BASE.multiplyUnsafe(ie).add(j.multiplyUnsafe(Y));if(te.is0())throw new Error("point at infinify");return te.assertValidity(),te}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes($){if($==="compact")return Hp(o.toBytes(this.r),o.toBytes(this.s));if($==="der")return LL(ku.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return _C(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return _C(this.toBytes("compact"))}}const f=TQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(O){try{return f(O),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const O=a;return YCe(r(xQ(O)),O)},precompute(O=8,$=t.BASE){return $.precompute(O,!1)}};function g(O,$=!0){return t.fromPrivateKey(O).toBytes($)}function w(O){if(typeof O=="bigint")return!1;if(O instanceof t)return!0;const G=Pa("key",O).length,W=i.BYTES,I=W+1,R=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===I))return G===I||G===R}function y(O,$,G=!0){if(w(O)===!0)throw new Error("first arg must be private key");if(w($)===!1)throw new Error("second arg must be public key");return t.fromHex($).multiply(f(O)).toBytes(G)}const b=e.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const $=aT(O),G=O.length*8-c;return G>0?$>>BigInt(G):$},v=e.bits2int_modN||function(O){return o.create(b(O))},A=cT(c);function C(O){return dve("num < 2^"+c,O,xE,A),o.toBytes(O)}function N(O,$,G=x){if(["recovered","canonical"].some(Y=>Y in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:I,prehash:R,extraEntropy:B}=G;I==null&&(I=!0),O=Pa("msgHash",O),w4(G),R&&(O=Pa("prehashed msgHash",W(O)));const k=v(O),M=f($),j=[C(M),C(k)];if(B!=null&&B!==!1){const Y=B===!0?r(i.BYTES):B;j.push(Pa("extraEntropy",Y))}const q=Hp(...j),se=k;function ie(Y){const te=b(Y);if(!o.isValidNot0(te))return;const fe=o.inv(te),Xe=t.BASE.multiply(te).toAffine(),Le=o.create(Xe.x);if(Le===xE)return;const De=o.create(fe*o.create(se+Le*M));if(De===xE)return;let wt=(Xe.x===Le?0:2)|Number(Xe.y&IE),Mt=De;return I&&l(De)&&(Mt=u(De),wt^=1),new h(Le,Mt,wt)}return{seed:q,k2sig:ie}}const x={lowS:e.lowS,prehash:!1},T={lowS:e.lowS,prehash:!1};function S(O,$,G=x){const{seed:W,k2sig:I}=N(O,$,G);return fve(e.hash.outputLen,o.BYTES,s)(W,I)}t.BASE.precompute(8);function D(O,$,G,W=T){const I=O;$=Pa("msgHash",$),G=Pa("publicKey",G),w4(W);const{lowS:R,prehash:B,format:k}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&!["compact","der","js"].includes(k))throw new Error('format must be "compact", "der" or "js"');const M=typeof I=="string"||ML(I),j=!M&&!k&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!M&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let q,se;try{if(j)if(k===void 0||k==="js")q=new h(I.r,I.s);else throw new Error("invalid format");if(M){try{k!=="compact"&&(q=h.fromDER(I))}catch(Mt){if(!(Mt instanceof ku.Err))throw Mt}!q&&k!=="der"&&(q=h.fromCompact(I))}se=t.fromHex(G)}catch{return!1}if(!q||R&&q.hasHighS())return!1;B&&($=e.hash($));const{r:ie,s:Y}=q,te=v($),fe=o.inv(Y),Xe=o.create(te*fe),Le=o.create(ie*fe),De=t.BASE.multiplyUnsafe(Xe).add(se.multiplyUnsafe(Le));return De.is0()?!1:o.create(De.x)===ie}return Object.freeze({getPublicKey:g,getSharedSecret:y,sign:S,verify:D,utils:p,Point:t,Signature:h})}function l_e(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=gT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function u_e(t){const{CURVE:e,curveOpts:n}=l_e(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function d_e(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function h_e(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=u_e(t),s=a_e(e,n),i=c_e(s,r,n);return d_e(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function f_e(t,e){const n=r=>h_e({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iI={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const p_e=BigInt(1),MD=BigInt(2),b4=(t,e)=>(t+e/MD)/e;function g_e(t){const e=iI.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ba(u,n,e)*u%e,h=ba(d,n,e)*u%e,f=ba(h,MD,e)*l%e,p=ba(f,s,e)*f%e,g=ba(p,i,e)*p%e,w=ba(g,a,e)*g%e,y=ba(w,c,e)*w%e,b=ba(y,a,e)*g%e,v=ba(b,n,e)*u%e,A=ba(v,o,e)*p%e,C=ba(A,r,e)*l%e,N=ba(C,MD,e);if(!LD.eql(LD.sqr(N),t))throw new Error("Cannot find square root");return N}const LD=gT(iI.p,void 0,void 0,{sqrt:g_e}),PQ=f_e({...iI,Fp:LD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=iI.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-p_e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=b4(i*t,e),c=b4(-r*t,e);let l=$a(t-a*n-c*s,e),u=$a(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},pY),m_e=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:PQ},Symbol.toStringTag,{value:"Module"}));function y_e({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new PQ.Signature(la(t),la(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Qa(o)}async function yU(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=tu(o)?o:typeof o=="object"&&"r"in o&&"s"in o?y_e(o):as(o),u=await(async()=>!r&&!s||nCe(l)?l:rCe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:tc({abi:o4,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:lT({abi:o4,args:[n,i,u],bytecode:Fve}),...c},{data:g}=await ht(t,g1,"call")(p);return Z0e(g??"0x0")}catch(p){try{if(oT(nd(n),await rY({hash:i,signature:o})))return!0}catch{}if(p instanceof tY)return!1;throw p}}async function w_e(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=oQ(n);return yU(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function b_e(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=KEe({message:o,primaryType:a,types:c,domain:l});return yU(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}function OQ(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=is(["watchBlockNumber",t.uid,e,n,o]);return _d(d,{onBlockNumber:r,onError:s},h=>Db(async()=>{var f;try{const p=await ht(t,m1,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=is(["watchBlockNumber",t.uid,e,n]);return _d(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const y=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return y?y.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(y){var v;if(!f)return;const b=la((v=y.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(y){var b;(b=h.onError)==null||b.call(h,y)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function kQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=is(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:y}=cU(),b=a?setTimeout(()=>{p(),f(),y(new vbe({hash:n}))},a):void 0;return f=_d(c,{onReplaced:r,resolve:w,reject:y},v=>{p=ht(t,OQ,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(b),p(),x(),f()};let N=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||N-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await rI(async()=>{l=await ht(t,fT,"getTransaction")({hash:n}),l.blockNumber&&(N=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ht(t,ND,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||N-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof XK||x instanceof eY){if(!l){h=!1;return}try{u=l,h=!0;const T=await rI(()=>ht(t,zl,"getBlock")({blockNumber:N,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:O})=>O instanceof aY});h=!1;const S=T.transactions.find(({from:O,nonce:$})=>O===u.from&&$===u.nonce);if(!S||(d=await ht(t,ND,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||N-d.blockNumber+1n<e)))return;let D="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?D="repriced":S.from===S.to&&S.value===0n&&(D="cancelled"),C(()=>{var O;(O=v.onReplaced)==null||O.call(v,{reason:D,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(T){C(()=>v.reject(T))}}else C(()=>v.reject(x))}}})}),g}function v_e(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=is(["watchBlocks",t.uid,e,n,r,u,c]);return _d(p,{onBlock:s,onError:i},g=>Db(async()=>{var w;try{const y=await ht(t,zl,"getBlock")({blockTag:e,includeTransactions:u});if(y.number!==null&&(d==null?void 0:d.number)!=null){if(y.number===d.number)return;if(y.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<y.number;b++){const v=await ht(t,zl,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(y==null?void 0:y.number)==null||y.number!==null&&y.number>d.number)&&(g.onBlock(y,d),d=y)}catch(y){(w=g.onError)==null||w.call(g,y)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&ht(t,zl,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const y=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await y.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await ht(t,zl,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(y){i==null||i(y)}})(),()=>w()})()}function E_e(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=is(["watchEvent",e,n,r,t.uid,s,u,o]);return _d(w,{onLogs:c,onError:a},y=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const C=Db(async()=>{var N;if(!A){try{v=await ht(t,JY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ht(t,uT,"getFilterChanges")({filter:v});else{const T=await ht(t,m1,"getBlockNumber")({});b&&b!==T?x=await ht(t,tU,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:T}):x=[],b=T}if(x.length===0)return;if(r)y.onLogs(x);else for(const T of x)y.onLogs([T])}catch(x){v&&x instanceof Xg&&(A=!1),(N=y.onError)==null||N.call(y,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ht(t,dT,"uninstallFilter")({filter:v}),C()}})})():(()=>{let w=!0,y=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>u1({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(N){var T;if(!w)return;const x=N.result;try{const{eventName:S,args:D}=XL({abi:v??[],data:x.data,topics:x.topics,strict:f}),O=Cd(x,{args:D,eventName:S});c([O])}catch(S){let D,O;if(S instanceof EC||S instanceof ZN){if(d)return;D=S.abiItem.name,O=(T=S.abiItem.inputs)==null?void 0:T.some(G=>!("name"in G&&G.name))}const $=Cd(x,{args:O?[]:{},eventName:D});c([$])}},onError(N){a==null||a(N)}});y=C,w||y()}catch(b){a==null||a(b)}})(),()=>y()})()}function DQ(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=is(["watchPendingTransactions",t.uid,e,i]);return _d(l,{onTransactions:r,onError:n},u=>{let d;const h=Db(async()=>{var f;try{if(!d)try{d=await ht(t,ZY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ht(t,uT,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ht(t,dT,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}function C_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(__e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(A_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const __e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,A_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function S_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!Ja(r.address,{strict:!1})||e&&!oT(r.address,e))return!1}catch{return!1}return!0}async function x_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=C_e(s);if(!u.address||!S_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=oQ(s);return yU(t,{address:u.address,hash:h,signature:a,...l})}function I_e(t){return{call:e=>g1(t,e),createAccessList:e=>QY(t,e),createBlockFilter:()=>LEe(t),createContractEventFilter:e=>KK(t,e),createEventFilter:e=>JY(t,e),createPendingTransactionFilter:()=>ZY(t),estimateContractGas:e=>ave(t,e),estimateGas:e=>iT(t,e),getBalance:e=>ZL(t,e),getBlobBaseFee:()=>UEe(t),getBlock:e=>zl(t,e),getBlockNumber:e=>m1(t,e),getBlockTransactionCount:e=>BEe(t,e),getBytecode:e=>d4(t,e),getChainId:()=>Ob(t),getCode:e=>d4(t,e),getContractEvents:e=>wY(t,e),getEip712Domain:e=>FEe(t,e),getEnsAddress:e=>EEe(t,e),getEnsAvatar:e=>DEe(t,e),getEnsName:e=>YY(t,e),getEnsResolver:e=>MEe(t,e),getEnsText:e=>KY(t,e),getFeeHistory:e=>zEe(t,e),estimateFeesPerGas:e=>Gbe(t,e),getFilterChanges:e=>uT(t,e),getFilterLogs:e=>HEe(t,e),getGasPrice:()=>YL(t),getLogs:e=>tU(t,e),getProof:e=>cCe(t,e),estimateMaxPriorityFeePerGas:e=>Hbe(t,e),getStorageAt:e=>lCe(t,e),getTransaction:e=>fT(t,e),getTransactionConfirmations:e=>uCe(t,e),getTransactionCount:e=>QL(t,e),getTransactionReceipt:e=>ND(t,e),multicall:e=>cQ(t,e),prepareTransactionRequest:e=>p1(t,e),readContract:e=>su(t,e),sendRawTransaction:e=>lU(t,e),simulate:e=>TD(t,e),simulateBlocks:e=>TD(t,e),simulateCalls:e=>FCe(t,e),simulateContract:e=>Kve(t,e),verifyMessage:e=>w_e(t,e),verifySiweMessage:e=>x_e(t,e),verifyTypedData:e=>b_e(t,e),uninstallFilter:e=>dT(t,e),waitForTransactionReceipt:e=>kQ(t,e),watchBlocks:e=>v_e(t,e),watchBlockNumber:e=>OQ(t,e),watchContractEvent:e=>tEe(t,e),watchEvent:e=>E_e(t,e),watchPendingTransactions:e=>DQ(t,e)}}async function N_e(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:nt(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function T_e(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=lT({abi:n,args:r,bytecode:s});return y1(t,{...i,...i.authorizationList?{to:null}:{},data:o})}async function R_e(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>c1(r))}async function P_e(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?kr(n):void 0,i=r?[s==null?void 0:s.address,[nt(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}async function O_e(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function MQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new Om({docsPath:"/docs/eip7702/prepareAuthorization"});const i=kr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:kr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ht(t,Ob,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ht(t,QL,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&oT(o.address,i.address))&&(a.nonce+=1)),a}async function k_e(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>nd(n))}async function D_e(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function M_e(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function L_e(t,e){const{account:n=t.account}=e;if(!n)throw new Om({docsPath:"/docs/eip7702/signAuthorization"});const r=kr(n);if(!r.signAuthorization)throw new IS({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await MQ(t,e);return r.signAuthorization(s)}async function LQ(t,{account:e=t.account,message:n}){if(!e)throw new Om({docsPath:"/docs/actions/wallet/signMessage"});const r=kr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?$w(n):n.raw instanceof Uint8Array?Ya(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function U_e(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new Om({docsPath:"/docs/actions/wallet/signTransaction"});const i=kr(n);Rm({account:i,...e});const o=await ht(t,Ob,"getChainId")({});r!==null&&MY({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||Pb;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:nt(o),from:i.address}]},{retryCount:0})}async function B_e(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new Om({docsPath:"/docs/actions/wallet/signTypedData"});const o=kr(n),a={EIP712Domain:iQ({domain:r}),...e.types};if(sQ({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=ZEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function $_e(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(e)}]},{retryCount:0})}async function F_e(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function j_e(t){return{addChain:e=>N_e(t,e),deployContract:e=>T_e(t,e),getAddresses:()=>R_e(t),getCallsStatus:e=>jY(t,e),getCapabilities:e=>P_e(t,e),getChainId:()=>Ob(t),getPermissions:()=>O_e(t),prepareAuthorization:e=>MQ(t,e),prepareTransactionRequest:e=>p1(t,e),requestAddresses:()=>k_e(t),requestPermissions:e=>D_e(t,e),sendCalls:e=>rEe(t,e),sendRawTransaction:e=>lU(t,e),sendTransaction:e=>y1(t,e),showCallsStatus:e=>M_e(t,e),signAuthorization:e=>L_e(t,e),signMessage:e=>LQ(t,e),signTransaction:e=>U_e(t,e),signTypedData:e=>B_e(t,e),switchChain:e=>$_e(t,e),waitForCallsStatus:e=>sEe(t,e),watchAsset:e=>F_e(t,e),writeContract:e=>UY(t,e)}}const KP={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Tm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},v4={async getMyTokensWithBalance(t){const e=Ye.state.address,n=H.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await bt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=KP.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await vt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await vt.walletGetAssets({account:t,chainFilter:[s]});return KP.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>KP.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:H.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},On=lr({tokenBalances:[],loading:!1}),W_e={state:On,subscribe(t){return hi(On,()=>t(On))},subscribeKey(t,e){return pi(On,t,e)},setToken(t){t&&(On.token=Yg(t))},setTokenAmount(t){On.sendTokenAmount=t},setReceiverAddress(t){On.receiverAddress=t},setReceiverProfileImageUrl(t){On.receiverProfileImageUrl=t},setReceiverProfileName(t){On.receiverProfileName=t},setNetworkBalanceInUsd(t){On.networkBalanceInUSD=t},setLoading(t){On.loading=t},async sendToken(){var t;try{switch(_n.setLoading(!0),(t=H.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await _n.sendEvmToken();return;case"solana":await _n.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{_n.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=H.state.activeChain,e=(n=Ye.state.preferredAccountTypes)==null?void 0:n[t];if(!_n.state.sendTokenAmount||!_n.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!_n.state.token)throw new Error("A token is required");(r=_n.state.token)!=null&&r.address?(fr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ws.ACCOUNT_TYPES.SMART_ACCOUNT,token:_n.state.token.address,amount:_n.state.sendTokenAmount,network:((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await _n.sendERC20Token({receiverAddress:_n.state.receiverAddress,tokenAddress:_n.state.token.address,sendTokenAmount:_n.state.sendTokenAmount,decimals:_n.state.token.quantity.decimals})):(fr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ws.ACCOUNT_TYPES.SMART_ACCOUNT,token:_n.state.token.symbol||"",amount:_n.state.sendTokenAmount,network:((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await _n.sendNativeToken({receiverAddress:_n.state.receiverAddress,sendTokenAmount:_n.state.sendTokenAmount,decimals:_n.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;On.loading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(On.lastRetry&&!ot.isAllowedRetry(On.lastRetry,30*jn.ONE_SEC_MS))return On.loading=!1,[];try{if(s&&e&&n){const a=await v4.getMyTokensWithBalance();return On.tokenBalances=a,On.lastRetry=void 0,a}}catch(a){On.lastRetry=Date.now(),t==null||t(a),Mc.showError("Token Balance Unavailable")}finally{On.loading=!1}return[]},fetchNetworkBalance(){if(On.tokenBalances.length===0)return;const t=v4.mapBalancesToSwapTokens(On.tokenBalances);if(!t)return;const e=t.find(n=>n.address===H.getActiveNetworkTokenAddress());e&&(On.networkBalanceInUSD=e?yye.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;Ht.pushTransactionStack({});const e=t.receiverAddress,n=Ye.state.address,r=vt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await vt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),fr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ye.state.preferredAccountTypes)==null?void 0:i.eip155)===Ws.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=_n.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=vt._getClient())==null||c.updateBalance("eip155"),_n.resetSend()},async sendERC20Token(t){Ht.pushTransactionStack({onSuccess(){Ht.replace("Account")}});const e=vt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ye.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ot.getPlainAddress(t.tokenAddress);await vt.writeContract({fromAddress:Ye.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:Eye.getERC20Abi(n),chainNamespace:"eip155"}),_n.resetSend()}},async sendSolanaToken(){var t;if(!_n.state.sendTokenAmount||!_n.state.receiverAddress)throw new Error("An amount and receiver address are required");Ht.pushTransactionStack({onSuccess(){Ht.replace("Account")}}),await vt.sendTransaction({chainNamespace:"solana",to:_n.state.receiverAddress,value:_n.state.sendTokenAmount}),(t=vt._getClient())==null||t.updateBalance("solana"),_n.resetSend()},resetSend(){On.token=void 0,On.sendTokenAmount=void 0,On.receiverAddress=void 0,On.receiverProfileImageUrl=void 0,On.receiverProfileName=void 0,On.loading=!1,On.tokenBalances=[]}},_n=pa(W_e),YP={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},IA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Pe=lr({chains:cye(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),z_e={state:Pe,subscribe(t){return hi(Pe,()=>{t(Pe)})},subscribeKey(t,e){return pi(Pe,t,e)},subscribeChainProp(t,e,n){let r;return hi(Pe.chains,()=>{var i;const s=n||Pe.activeChain;if(s){const o=(i=Pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Qe.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=ve.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Pe.noAdapters=!0),Pe.noAdapters||(Pe.activeChain=a==null?void 0:a.namespace,Pe.activeCaipNetwork=i,H.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Pe.activeChain&&Yl.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);H.state.chains.set(u,{namespace:u,networkState:lr({...IA,caipNetwork:d==null?void 0:d[0]}),accountState:lr(YP),caipNetworks:d??[],...n}),H.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Pe.activeChain===t){const r=Array.from(Pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&H.setActiveCaipNetwork(s)}}Pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...IA,caipNetwork:r[0]},accountState:YP,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),H.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),H.setRequestedCaipNetworks(r,t.chainNamespace),Fe.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Pe.chains.get(t);if(n){const o=((r=Pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&H.setActiveCaipNetwork(n.caipNetworks[0]),Pe.chains.set(t,{...n,caipNetworks:a}),H.setRequestedCaipNetworks(a||[],t),a.length===0&&Fe.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Pe.chains.get(t);n&&(n.networkState={...n.networkState||IA,...e},Pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Pe.chains.get(t);if(r){const s={...r.accountState||YP,...e};Pe.chains.set(t,{...r,accountState:s}),(Pe.chains.size===1||Pe.activeChain===t)&&(e.caipAddress&&(Pe.activeCaipAddress=e.caipAddress),Ye.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Pe.chains.get(t);if(n){const r={...n.networkState||IA,...e};Pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){H.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&Fe.removeConnectorId(n)},setActiveNamespace(t){var r,s;Pe.activeChain=t;const e=t?Pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Pe.activeCaipNetwork=n,H.setChainNetworkData(t,{caipNetwork:n}),Qe.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Yl.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Pe.activeChain!==t.chainNamespace&&H.setIsSwitchingNamespace(!0);const e=Pe.chains.get(t.chainNamespace);Pe.activeChain=t.chainNamespace,Pe.activeCaipNetwork=t,H.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Pe.activeCaipAddress=void 0,H.setAccountProp("caipAddress",Pe.activeCaipAddress,t.chainNamespace),e&&Ye.replaceState(e.accountState),_n.resetSend(),Yl.set({activeChain:Pe.activeChain,selectedNetworkId:(i=Pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Qe.setActiveCaipNetworkId(t.caipNetworkId),!H.checkIfSupportedNetwork(t.chainNamespace)&&ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&!vt.state.wcBasic&&H.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==H.state.activeChain,n=(s=H.getNetworkData(t))==null?void 0:s.caipNetwork,r=H.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await H.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=H.state.chains.get(H.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Pe.activeCaipNetwork)==null?void 0:o.id)})),r=H.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&Es.close()}catch{Ht.goBack()}fr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Pe.activeChain,n=Pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Pe.activeChain;if(e&&(n=e),!n)return;const r=(s=Pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ot.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Pe.chains.forEach(e=>{const n=H.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){H.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=H.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));Fe.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Pe.chains.forEach(e=>{const n=H.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Pe.activeCaipNetwork},getActiveCaipAddress(){return Pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=H.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());H.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Pe.activeCaipNetwork,r=H.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Pe.activeChain)return!0;const e=H.getRequestedCaipNetworks(Pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){H.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=tK.caipNetworkIdToNumber((r=Pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Pe.activeChain;if(!e||!t)return!1;const n=H.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Pe.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Pe.activeCaipNetwork)==null?void 0:s.id)||1,n=jn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){Es.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&jn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){H.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Pe.activeCaipAddress=void 0,H.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),Fe.removeConnectorId(e)},setIsSwitchingNamespace(t){Pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Pe.chains.forEach(s=>{je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=H.state.chains.get(t))==null?void 0:e.accountState:Ye.state},getNetworkData(t){var n;const e=t||Pe.activeChain;if(e)return(n=H.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=H.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=Fe.state.filterByNamespace;return(t?[Pe.chains.get(t)]:Array.from(Pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?H.getRequestedCaipNetworks(t):H.getAllRequestedCaipNetworks()}},H=pa(z_e),H_e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},UQ=ot.getBlockchainApiUrl(),Vi=lr({clientId:null,api:new i1({baseUrl:UQ,clientId:null}),supportedChains:{http:[],ws:[]}}),bt={state:Vi,async get(t){const{st:e,sv:n}=bt.getSdkProperties(),r=ve.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Vi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=ve.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Vi.supportedChains.http.length||await bt.getSupportedNetworks()}catch{return!1}return Vi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await bt.get({path:"v1/supported-chains"});return Vi.supportedChains=t,t}catch{return Vi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await bt.isNetworkSupported(e))return{avatar:"",name:""};const r=Qe.getIdentityFromCacheForAddress(t);if(r)return r;const s=await bt.get({path:`/v1/identity/${t}`,params:{sender:H.state.activeCaipAddress?ot.getPlainAddress(H.state.activeCaipAddress):void 0}});return Qe.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await bt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?bt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await bt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?bt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await bt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?bt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await bt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Vi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:ve.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await bt.isNetworkSupported((r=H.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?bt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=bt.getSdkProperties();if(!await bt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return bt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await bt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Vi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:jn.CONVERT_SLIPPAGE_TOLERANCE},projectId:ve.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=bt.getSdkProperties();if(!await bt.isNetworkSupported((o=H.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return bt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=bt.getSdkProperties();if(!await bt.isNetworkSupported((l=H.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Mc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Qe.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await bt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Qe.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await bt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?bt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await bt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?bt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ye.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await bt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?bt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await bt.isNetworkSupported((i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Vi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await bt.isNetworkSupported((a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Vi.api.post({path:"/v1/generators/onrampurl",params:{projectId:ve.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await bt.isNetworkSupported((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await bt.get({path:"/v1/onramp/options"})}catch{return H_e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await bt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Vi.api.post({path:"/v1/onramp/quote",params:{projectId:ve.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await bt.isNetworkSupported((n=H.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?bt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await bt.isNetworkSupported((s=H.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Vi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:ve.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Vi.clientId=t,Vi.api=new i1({baseUrl:UQ,clientId:t})}},va=lr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),G_e={state:va,replaceState(t){t&&Object.assign(va,Yg(t))},subscribe(t){return H.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return H.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){H.setAccountProp("status",t,e)},getCaipAddress(t){return H.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ot.getPlainAddress(t):void 0;e===H.state.activeChain&&(H.state.activeCaipAddress=t),H.setAccountProp("caipAddress",t,e),H.setAccountProp("address",n,e)},setBalance(t,e,n){H.setAccountProp("balance",t,n),H.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){H.setAccountProp("profileName",t,e)},setProfileImage(t,e){H.setAccountProp("profileImage",t,e)},setUser(t,e){H.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){H.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){H.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){H.setAccountProp("currentTab",t,H.state.activeChain)},setTokenBalance(t,e){t&&H.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){H.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){H.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=H.getAccountProp("addressLabels",n)||new Map;r.set(t,e),H.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=H.getAccountProp("addressLabels",e)||new Map;n.delete(t),H.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){H.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){H.setAccountProp("preferredAccountTypes",{...va.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){va.preferredAccountTypes=t},setSocialProvider(t,e){t&&H.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){H.setAccountProp("socialWindow",t?Yg(t):void 0,e)},setFarcasterUrl(t,e){H.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;va.balanceLoading=!0;const e=(i=H.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=H.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(va.lastRetry&&!ot.isAllowedRetry(va.lastRetry,30*jn.ONE_SEC_MS))return va.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await bt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ye.setTokenBalance(c,n),va.lastRetry=void 0,va.balanceLoading=!1,c}}catch(a){va.lastRetry=Date.now(),t==null||t(a),Mc.showError("Token Balance Unavailable")}finally{va.balanceLoading=!1}return[]},resetAccount(t){H.resetAccount(t)}},Ye=pa(G_e),q_e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=H.state.activeCaipNetwork,r=Ht.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ye.getCaipAddress(H.state.activeChain),o=t.chainNamespace!==H.state.activeChain,a=Ye.getCaipAddress(t.chainNamespace),l=Fe.getConnectorId(H.state.activeChain)===je.CONNECTOR_ID.AUTH,u=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ht.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ht.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ht.push("SwitchNetwork",{...r,network:t})}},Ki=lr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),V_e={state:Ki,subscribe(t){return hi(Ki,()=>t(Ki))},subscribeKey(t,e){return pi(Ki,t,e)},async open(t){var o,a;const e=Ye.state.status==="connected",n=t==null?void 0:t.namespace,r=H.state.activeChain,s=n&&n!==r,i=(o=H.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(vt.state.wcBasic?ct.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await ct.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),Fe.setFilterByNamespace(t==null?void 0:t.namespace),Es.setLoading(!0,n),n&&s){const c=((a=H.getNetworkData(n))==null?void 0:a.caipNetwork)||H.getRequestedCaipNetworks(n)[0];c&&q_e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=H.state.noAdapters;ve.state.manualWCControl||c&&!i?ot.isMobile()?Ht.reset("AllWallets"):Ht.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ht.reset(t.view,t.data):i?Ht.reset("Account"):Ht.reset("Connect")}Ki.open=!0,Yl.set({open:!0}),fr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=ve.state.enableEmbedded,e=!!H.state.activeCaipAddress;Ki.open&&fr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Ki.open=!1,Ht.reset("Connect"),Es.clearLoading(),t?e?Ht.replace("Account"):Ht.push("Connect"):Yl.set({open:!1}),vt.resetUri()},setLoading(t,e){e&&Ki.loadingNamespaceMap.set(e,t),Ki.loading=t,Yl.set({loading:t})},clearLoading(){Ki.loadingNamespaceMap.clear(),Ki.loading=!1},shake(){Ki.shake||(Ki.shake=!0,setTimeout(()=>{Ki.shake=!1},500))}},Es=pa(V_e),NE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},UD={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},K_e={providers:sK,selectedProvider:null,error:null,purchaseCurrency:NE,paymentCurrency:UD,purchaseCurrencies:[NE],paymentCurrencies:[],quotesLoading:!1},un=lr(K_e),Y_e={state:un,subscribe(t){return hi(un,()=>t(un))},subscribeKey(t,e){return pi(un,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=H.state.activeChain===je.CHAIN.SOLANA?"SOL":"USDC",n=Ye.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",Cye),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",ve.state.projectId),un.selectedProvider={...t,url:r.toString()}}else un.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=sK.filter(r=>e.includes(r.name));un.providers=n}else un.providers=[]},setPurchaseCurrency(t){un.purchaseCurrency=t},setPaymentCurrency(t){un.paymentCurrency=t},setPurchaseAmount(t){BD.state.purchaseAmount=t},setPaymentAmount(t){BD.state.paymentAmount=t},async getAvailableCurrencies(){const t=await bt.getOnrampOptions();un.purchaseCurrencies=t.purchaseCurrencies,un.paymentCurrencies=t.paymentCurrencies,un.paymentCurrency=t.paymentCurrencies[0]||UD,un.purchaseCurrency=t.purchaseCurrencies[0]||NE,await ct.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await ct.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;un.quotesLoading=!0;try{const n=await bt.getOnrampQuote({purchaseCurrency:un.purchaseCurrency,paymentCurrency:un.paymentCurrency,amount:((t=un.paymentAmount)==null?void 0:t.toString())||"0",network:(e=un.purchaseCurrency)==null?void 0:e.symbol});return un.quotesLoading=!1,un.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return un.error=n.message,un.quotesLoading=!1,null}finally{un.quotesLoading=!1}},resetState(){un.selectedProvider=null,un.error=null,un.purchaseCurrency=NE,un.paymentCurrency=UD,un.purchaseCurrencies=[NE],un.paymentCurrencies=[],un.paymentAmount=void 0,un.purchaseAmount=void 0,un.quotesLoading=!1}},BD=pa(Y_e),E4=2147483648,Q_e={convertEVMChainIdToCoinType(t){if(t>=E4)throw new Error("Invalid chainId");return(E4|t)>>>0}},Ea=lr({suggestions:[],loading:!1}),J_e={state:Ea,subscribe(t){return hi(Ea,()=>t(Ea))},subscribeKey(t,e){return pi(Ea,t,e)},async resolveName(t){var e,n;try{return await bt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await bt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Ea.loading=!0,Ea.suggestions=[];const e=await bt.getEnsNameSuggestions(t);return Ea.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Ea.suggestions}catch(e){const n=TE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Ea.loading=!1}},async getNamesForAddress(t){try{if(!H.state.activeCaipNetwork)return[];const n=Qe.getEnsFromCacheForAddress(t);if(n)return n;const r=await bt.reverseLookupEnsName({address:t});return Qe.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=TE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=H.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ye.state.address,r=Fe.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");Ea.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ht.pushTransactionStack({onCancel(){Ht.replace("RegisterAccountName")}});const i=await vt.signMessage(s);Ea.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=Q_e.convertEVMChainIdToCoinType(Number(o));await bt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ye.setProfileName(t,e.chainNamespace),Ht.replace("RegisterAccountNameSuccess")}catch(s){const i=TE.parseEnsApiError(s,`Error registering name ${t}`);throw Ht.replace("RegisterAccountName"),new Error(i)}finally{Ea.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},TE=pa(J_e);var wU={exports:{}},m0=typeof Reflect=="object"?Reflect:null,C4=m0&&typeof m0.apply=="function"?m0.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},TS;m0&&typeof m0.ownKeys=="function"?TS=m0.ownKeys:Object.getOwnPropertySymbols?TS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:TS=function(e){return Object.getOwnPropertyNames(e)};function Z_e(t){console&&console.warn&&console.warn(t)}var BQ=Number.isNaN||function(e){return e!==e};function zn(){zn.init.call(this)}wU.exports=zn;wU.exports.once=n1e;zn.EventEmitter=zn;zn.prototype._events=void 0;zn.prototype._eventsCount=0;zn.prototype._maxListeners=void 0;var _4=10;function mT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(zn,"defaultMaxListeners",{enumerable:!0,get:function(){return _4},set:function(t){if(typeof t!="number"||t<0||BQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");_4=t}});zn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};zn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||BQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $Q(t){return t._maxListeners===void 0?zn.defaultMaxListeners:t._maxListeners}zn.prototype.getMaxListeners=function(){return $Q(this)};zn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")C4(c,this,n);else for(var l=c.length,u=HQ(c,l),r=0;r<l;++r)C4(u[r],this,n);return!0};function FQ(t,e,n,r){var s,i,o;if(mT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=$Q(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Z_e(a)}return t}zn.prototype.addListener=function(e,n){return FQ(this,e,n,!1)};zn.prototype.on=zn.prototype.addListener;zn.prototype.prependListener=function(e,n){return FQ(this,e,n,!0)};function X_e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function jQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=X_e.bind(r);return s.listener=n,r.wrapFn=s,s}zn.prototype.once=function(e,n){return mT(n),this.on(e,jQ(this,e,n)),this};zn.prototype.prependOnceListener=function(e,n){return mT(n),this.prependListener(e,jQ(this,e,n)),this};zn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(mT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():e1e(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};zn.prototype.off=zn.prototype.removeListener;zn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function WQ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?t1e(s):HQ(s,s.length)}zn.prototype.listeners=function(e){return WQ(this,e,!0)};zn.prototype.rawListeners=function(e){return WQ(this,e,!1)};zn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):zQ.call(t,e)};zn.prototype.listenerCount=zQ;function zQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}zn.prototype.eventNames=function(){return this._eventsCount>0?TS(this._events):[]};function HQ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function e1e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function t1e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function n1e(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}GQ(t,e,i,{once:!0}),e!=="error"&&r1e(t,s,{once:!0})})}function r1e(t,e,n){typeof t.on=="function"&&GQ(t,"error",e,n)}function GQ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var nc=wU.exports;const bU=vm(nc);var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $D=function(t,e){return $D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},$D(t,e)};function s1e(t,e){$D(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var FD=function(){return FD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},FD.apply(this,arguments)};function i1e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function o1e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function a1e(t,e){return function(n,r){e(n,r,t)}}function c1e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function l1e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function u1e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function d1e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function h1e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qQ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function f1e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(qQ(arguments[e]));return t}function p1e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function FC(t){return this instanceof FC?(this.v=t,this):new FC(t)}function g1e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof FC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function m1e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:FC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function y1e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jD=="function"?jD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function w1e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b1e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function v1e(t){return t&&t.__esModule?t:{default:t}}function E1e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function C1e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const _1e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return FD},__asyncDelegator:m1e,__asyncGenerator:g1e,__asyncValues:y1e,__await:FC,__awaiter:l1e,__classPrivateFieldGet:E1e,__classPrivateFieldSet:C1e,__createBinding:d1e,__decorate:o1e,__exportStar:h1e,__extends:s1e,__generator:u1e,__importDefault:v1e,__importStar:b1e,__makeTemplateObject:w1e,__metadata:c1e,__param:a1e,__read:qQ,__rest:i1e,__spread:f1e,__spreadArrays:p1e,__values:jD},Symbol.toStringTag,{value:"Module"})),yT=ZW(_1e);var QP={},bv={},A4;function A1e(){if(A4)return bv;A4=1,Object.defineProperty(bv,"__esModule",{value:!0}),bv.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return bv.delay=t,bv}var up={},JP={},dp={},S4;function S1e(){return S4||(S4=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.ONE_THOUSAND=dp.ONE_HUNDRED=void 0,dp.ONE_HUNDRED=100,dp.ONE_THOUSAND=1e3),dp}var ZP={},x4;function x1e(){return x4||(x4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ZP)),ZP}var I4;function VQ(){return I4||(I4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yT;e.__exportStar(S1e(),t),e.__exportStar(x1e(),t)}(JP)),JP}var N4;function I1e(){if(N4)return up;N4=1,Object.defineProperty(up,"__esModule",{value:!0}),up.fromMiliseconds=up.toMiliseconds=void 0;const t=VQ();function e(r){return r*t.ONE_THOUSAND}up.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return up.fromMiliseconds=n,up}var T4;function N1e(){return T4||(T4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yT;e.__exportStar(A1e(),t),e.__exportStar(I1e(),t)}(QP)),QP}var sy={},R4;function T1e(){if(R4)return sy;R4=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return sy.Watch=t,sy.default=t,sy}var XP={},vv={},P4;function R1e(){if(P4)return vv;P4=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.IWatch=void 0;class t{}return vv.IWatch=t,vv}var O4;function P1e(){return O4||(O4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),yT.__exportStar(R1e(),t)}(XP)),XP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=yT;e.__exportStar(N1e(),t),e.__exportStar(T1e(),t),e.__exportStar(P1e(),t),e.__exportStar(VQ(),t)})(_e);class km{}let O1e=class extends km{constructor(e){super()}};const k4=_e.FIVE_SECONDS,Dm={pulse:"heartbeat_pulse"};let k1e=class KQ extends O1e{constructor(e){super(e),this.events=new nc.EventEmitter,this.interval=k4,this.interval=(e==null?void 0:e.interval)||k4}static async init(e){const n=new KQ(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),_e.toMiliseconds(this.interval))}pulse(){this.events.emit(Dm.pulse)}};const D1e=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,M1e=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,L1e=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function U1e(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){B1e(t);return}return e}function B1e(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function NA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!L1e.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(D1e.test(t)||M1e.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,U1e)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function Mm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function YQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=Mm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let eO;function w1(){return eO||(eO=YQ("keyval-store","keyval")),eO}function D4(t,e=w1()){return e("readonly",n=>Mm(n.get(t)))}function $1e(t,e,n=w1()){return n("readwrite",r=>(r.put(e,t),Mm(r.transaction)))}function F1e(t,e=w1()){return e("readwrite",n=>(n.delete(t),Mm(n.transaction)))}function j1e(t=w1()){return t("readwrite",e=>(e.clear(),Mm(e.transaction)))}function W1e(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Mm(t.transaction)}function z1e(t=w1()){return t("readonly",e=>{if(e.getAllKeys)return Mm(e.getAllKeys());const n=[];return W1e(e,r=>n.push(r.key)).then(()=>n)})}const H1e=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),G1e=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function rm(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return G1e(t)}catch{return t}}function Ad(t){return typeof t=="string"?t:H1e(t)||""}function q1e(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var V1e=K1e;function K1e(t,e,n){var r=n&&n.stringify||q1e,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const M4=V1e;var Ty=Jl;const jC=sAe().console||{},Y1e={mapHttpRequest:TA,mapHttpResponse:TA,wrapRequestSerializer:tO,wrapResponseSerializer:tO,wrapErrorSerializer:tO,req:TA,res:TA,err:eAe};function Q1e(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Jl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||jC;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=Q1e(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=WC),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:tAe(t)};c.levels=Jl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=WC,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=WD());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,iy(l,c,"error","log"),iy(l,c,"fatal","error"),iy(l,c,"warn","error"),iy(l,c,"info","log"),iy(l,c,"debug","log"),iy(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var y=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(y):s;delete p.serializers,wT([p],b,y,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=oy(A,p,"error"),this.fatal=oy(A,p,"fatal"),this.warn=oy(A,p,"warn"),this.info=oy(A,p,"info"),this.debug=oy(A,p,"debug"),this.trace=oy(A,p,"trace"),y&&(this.serializers=y,this._serialize=b),e&&(this._logEvent=WD([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Jl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Jl.stdSerializers=Y1e;Jl.stdTimeFunctions=Object.assign({},{nullTime:QQ,epochTime:JQ,unixTime:nAe,isoTime:rAe});function iy(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?WC:s[n]?s[n]:jC[n]||jC[r]||WC,J1e(t,e,n)}function J1e(t,e,n){!t.transmit&&e[n]===WC||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===jC?jC:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&wT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,Z1e(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Jl.levels.values[l],d=Jl.levels.values[n];if(d<u)return;X1e(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Jl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function Z1e(t,e,n,r){t._serialize&&wT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Jl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?M4(s.shift(),s):void 0}else typeof i=="string"&&(i=M4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function wT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Jl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function oy(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function X1e(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;wT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=WD(c)}function WD(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function eAe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function tAe(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?QQ:JQ}function TA(){return{}}function tO(t){return t}function WC(){}function QQ(){return!1}function JQ(){return Date.now()}function nAe(){return Math.round(Date.now()/1e3)}function rAe(){return new Date(Date.now()).toISOString()}function sAe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const b1=vm(Ty),iAe={level:"info"},v1="custom_context",vU=1e3*1024;let oAe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},L4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new oAe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},ZQ=class{constructor(e,n=vU){this.level=e??"error",this.levelValue=Ty.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new L4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Ty.levels.values.error?console.error(e):n===Ty.levels.values.warn?console.warn(e):n===Ty.levels.values.debug?console.debug(e):n===Ty.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Ad({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new L4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(Ad({extraMetadata:e})),new Blob(n,{type:"application/json"})}},aAe=class{constructor(e,n=vU){this.baseChunkLogger=new ZQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},cAe=class{constructor(e,n=vU){this.baseChunkLogger=new ZQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var lAe=Object.defineProperty,uAe=Object.defineProperties,dAe=Object.getOwnPropertyDescriptors,U4=Object.getOwnPropertySymbols,hAe=Object.prototype.hasOwnProperty,fAe=Object.prototype.propertyIsEnumerable,B4=(t,e,n)=>e in t?lAe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oI=(t,e)=>{for(var n in e||(e={}))hAe.call(e,n)&&B4(t,n,e[n]);if(U4)for(var n of U4(e))fAe.call(e,n)&&B4(t,n,e[n]);return t},aI=(t,e)=>uAe(t,dAe(e));function Lm(t){return aI(oI({},t),{level:(t==null?void 0:t.level)||iAe.level})}function pAe(t,e=v1){return t[e]||""}function gAe(t,e,n=v1){return t[n]=e,t}function Oo(t,e=v1){let n="";return typeof t.bindings>"u"?n=pAe(t,e):n=t.bindings().context||"",n}function mAe(t,e,n=v1){const r=Oo(t,n);return r.trim()?`${r}/${e}`:e}function qs(t,e,n=v1){const r=mAe(t,e,n),s=t.child({context:r});return gAe(s,r,n)}function yAe(t){var e,n;const r=new aAe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:b1(aI(oI({},t.opts),{level:"trace",browser:aI(oI({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function wAe(t){var e;const n=new cAe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:b1(aI(oI({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function bT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?yAe(t):wAe(t)}function bAe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function XQ(t,...e){if(!bAe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function $4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function vAe(t,e){XQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const ay=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function EAe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function eJ(t){return typeof t=="string"&&(t=EAe(t)),XQ(t),t}let CAe=class{clone(){return this._cloneInto()}};function _Ae(t){const e=r=>t().update(eJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function tJ(t=32){if(ay&&typeof ay.getRandomValues=="function")return ay.getRandomValues(new Uint8Array(t));if(ay&&typeof ay.randomBytes=="function")return ay.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function AAe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let SAe=class extends CAe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nO(this.buffer)}update(e){$4(this);const{view:n,buffer:r,blockLen:s}=this;e=eJ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=nO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$4(this),vAe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;AAe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=nO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const RA=BigInt(2**32-1),zD=BigInt(32);function nJ(t,e=!1){return e?{h:Number(t&RA),l:Number(t>>zD&RA)}:{h:Number(t>>zD&RA)|0,l:Number(t&RA)|0}}function xAe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=nJ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const IAe=(t,e)=>BigInt(t>>>0)<<zD|BigInt(e>>>0),NAe=(t,e,n)=>t>>>n,TAe=(t,e,n)=>t<<32-n|e>>>n,RAe=(t,e,n)=>t>>>n|e<<32-n,PAe=(t,e,n)=>t<<32-n|e>>>n,OAe=(t,e,n)=>t<<64-n|e>>>n-32,kAe=(t,e,n)=>t>>>n-32|e<<64-n,DAe=(t,e)=>e,MAe=(t,e)=>t,LAe=(t,e,n)=>t<<n|e>>>32-n,UAe=(t,e,n)=>e<<n|t>>>32-n,BAe=(t,e,n)=>e<<n-32|t>>>64-n,$Ae=(t,e,n)=>t<<n-32|e>>>64-n;function FAe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const jAe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),WAe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,zAe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),HAe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,GAe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),qAe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Wt={fromBig:nJ,split:xAe,toBig:IAe,shrSH:NAe,shrSL:TAe,rotrSH:RAe,rotrSL:PAe,rotrBH:OAe,rotrBL:kAe,rotr32H:DAe,rotr32L:MAe,rotlSH:LAe,rotlSL:UAe,rotlBH:BAe,rotlBL:$Ae,add:FAe,add3L:jAe,add3H:WAe,add4L:zAe,add4H:HAe,add5H:qAe,add5L:GAe},[VAe,KAe]=Wt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Yd=new Uint32Array(80),Qd=new Uint32Array(80);let YAe=class extends SAe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Yd[v]=e.getUint32(n),Qd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Yd[v-15]|0,C=Qd[v-15]|0,N=Wt.rotrSH(A,C,1)^Wt.rotrSH(A,C,8)^Wt.shrSH(A,C,7),x=Wt.rotrSL(A,C,1)^Wt.rotrSL(A,C,8)^Wt.shrSL(A,C,7),T=Yd[v-2]|0,S=Qd[v-2]|0,D=Wt.rotrSH(T,S,19)^Wt.rotrBH(T,S,61)^Wt.shrSH(T,S,6),O=Wt.rotrSL(T,S,19)^Wt.rotrBL(T,S,61)^Wt.shrSL(T,S,6),$=Wt.add4L(x,O,Qd[v-7],Qd[v-16]),G=Wt.add4H($,N,D,Yd[v-7],Yd[v-16]);Yd[v]=G|0,Qd[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=Wt.rotrSH(d,h,14)^Wt.rotrSH(d,h,18)^Wt.rotrBH(d,h,41),C=Wt.rotrSL(d,h,14)^Wt.rotrSL(d,h,18)^Wt.rotrBL(d,h,41),N=d&f^~d&g,x=h&p^~h&w,T=Wt.add5L(b,C,x,KAe[v],Qd[v]),S=Wt.add5H(T,y,A,N,VAe[v],Yd[v]),D=T|0,O=Wt.rotrSH(r,s,28)^Wt.rotrBH(r,s,34)^Wt.rotrBH(r,s,39),$=Wt.rotrSL(r,s,28)^Wt.rotrBL(r,s,34)^Wt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Wt.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Wt.add3L(D,$,W);r=Wt.add3H(I,S,O,G),s=I|0}({h:r,l:s}=Wt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Wt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Wt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Wt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Wt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Wt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Wt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=Wt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){Yd.fill(0),Qd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const QAe=_Ae(()=>new YAe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const EU=BigInt(0),rJ=BigInt(1),JAe=BigInt(2);function CU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function _U(t){if(!CU(t))throw new Error("Uint8Array expected")}function rO(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const ZAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function AU(t){_U(t);let e="";for(let n=0;n<t.length;n++)e+=ZAe[t[n]];return e}function sJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?EU:BigInt("0x"+t)}const wu={_0:48,_9:57,A:65,F:70,a:97,f:102};function F4(t){if(t>=wu._0&&t<=wu._9)return t-wu._0;if(t>=wu.A&&t<=wu.F)return t-(wu.A-10);if(t>=wu.a&&t<=wu.f)return t-(wu.a-10)}function iJ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=F4(t.charCodeAt(i)),a=F4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function XAe(t){return sJ(AU(t))}function RS(t){return _U(t),sJ(AU(Uint8Array.from(t).reverse()))}function oJ(t,e){return iJ(t.toString(16).padStart(e*2,"0"))}function HD(t,e){return oJ(t,e).reverse()}function bu(t,e,n){let r;if(typeof e=="string")try{r=iJ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(CU(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function j4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];_U(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const sO=t=>typeof t=="bigint"&&EU<=t;function eSe(t,e,n){return sO(t)&&sO(e)&&sO(n)&&e<=t&&t<n}function Ev(t,e,n,r){if(!eSe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function tSe(t){let e;for(e=0;t>EU;t>>=rJ,e+=1);return e}const nSe=t=>(JAe<<BigInt(t-1))-rJ,rSe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||CU(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function SU(t,e,n={}){const r=(s,i,o)=>{const a=rSe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function W4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const Cs=BigInt(0),Br=BigInt(1),Tp=BigInt(2),sSe=BigInt(3),GD=BigInt(4),z4=BigInt(5),H4=BigInt(8);function Xr(t,e){const n=t%e;return n>=Cs?n:e+n}function iSe(t,e,n){if(e<Cs)throw new Error("invalid exponent, negatives unsupported");if(n<=Cs)throw new Error("invalid modulus");if(n===Br)return Cs;let r=Br;for(;e>Cs;)e&Br&&(r=r*t%n),t=t*t%n,e>>=Br;return r}function al(t,e,n){let r=t;for(;e-- >Cs;)r*=r,r%=n;return r}function G4(t,e){if(t===Cs)throw new Error("invert: expected non-zero number");if(e<=Cs)throw new Error("invert: expected positive modulus, got "+e);let n=Xr(t,e),r=e,s=Cs,i=Br;for(;n!==Cs;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Br)throw new Error("invert: does not exist");return Xr(s,e)}function oSe(t){const e=(t-Br)/Tp;let n,r,s;for(n=t-Br,r=0;n%Tp===Cs;n/=Tp,r++);for(s=Tp;s<t&&iSe(s,e,t)!==t-Br;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Br)/GD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Br)/Tp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Br<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function aSe(t){if(t%GD===sSe){const e=(t+Br)/GD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%H4===z4){const e=(t-z4)/H4;return function(n,r){const s=n.mul(r,Tp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Tp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return oSe(t)}const cSe=(t,e)=>(Xr(t,e)&Br)===Br,lSe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uSe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lSe.reduce((r,s)=>(r[s]="function",r),e);return SU(t,n)}function dSe(t,e,n){if(n<Cs)throw new Error("invalid exponent, negatives unsupported");if(n===Cs)return t.ONE;if(n===Br)return e;let r=t.ONE,s=e;for(;n>Cs;)n&Br&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Br;return r}function hSe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function aJ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function cJ(t,e,n=!1,r={}){if(t<=Cs)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=aJ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:nSe(s),ZERO:Cs,ONE:Br,create:c=>Xr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Cs<=c&&c<t},is0:c=>c===Cs,isOdd:c=>(c&Br)===Br,neg:c=>Xr(-c,t),eql:(c,l)=>c===l,sqr:c=>Xr(c*c,t),add:(c,l)=>Xr(c+l,t),sub:(c,l)=>Xr(c-l,t),mul:(c,l)=>Xr(c*l,t),pow:(c,l)=>dSe(a,c,l),div:(c,l)=>Xr(c*G4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>G4(c,t),sqrt:r.sqrt||(c=>(o||(o=aSe(t)),o(a,c))),invertBatch:c=>hSe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?HD(c,i):oJ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?RS(c):XAe(c)}});return Object.freeze(a)}const q4=BigInt(0),PA=BigInt(1);function iO(t,e){const n=e.negate();return t?n:e}function lJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function oO(t,e){lJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function fSe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function pSe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const aO=new WeakMap,uJ=new WeakMap;function cO(t){return uJ.get(t)||1}function gSe(t,e){return{constTimeNegate:iO,hasPrecomputes(n){return cO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>q4;)r&PA&&(s=s.add(i)),i=i.double(),r>>=PA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=oO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=oO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=PA);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(iO(y,r[g])):a=a.add(iO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=oO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===q4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=PA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=aO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&aO.set(r,s(i))),i},wNAFCached(n,r,s){const i=cO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=cO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){lJ(r,e),uJ.set(n,r),aO.delete(n)}}}function mSe(t,e,n,r){if(fSe(n,t),pSe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=tSe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function ySe(t){return uSe(t.Fp),SU(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...aJ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const dc=BigInt(0),Yi=BigInt(1),OA=BigInt(2),wSe=BigInt(8),bSe={zip215:!0};function vSe(t){const e=ySe(t);return SU(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function ESe(t){const e=vSe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=OA<<BigInt(a*8)-Yi,u=n.create,d=cJ(e.n,e.nBitLength),h=e.uvRatio||((I,R)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(R))}}catch{return{isValid:!1,value:dc}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,R,B)=>{if(rO("phflag",B),R.length||B)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,R){Ev("coordinate "+I,R,dc,l)}function w(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const y=W4((I,R)=>{const{ex:B,ey:k,ez:M}=I,j=I.is0();R==null&&(R=j?wSe:n.inv(M));const q=u(B*R),se=u(k*R),ie=u(M*R);if(j)return{x:dc,y:Yi};if(ie!==Yi)throw new Error("invZ was invalid");return{x:q,y:se}}),b=W4(I=>{const{a:R,d:B}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:k,ey:M,ez:j,et:q}=I,se=u(k*k),ie=u(M*M),Y=u(j*j),te=u(Y*Y),fe=u(se*R),Xe=u(Y*u(fe+ie)),Le=u(te+u(B*u(se*ie)));if(Xe!==Le)throw new Error("bad point: equation left != right (1)");const De=u(k*M),wt=u(j*q);if(De!==wt)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,B,k,M){this.ex=R,this.ey=B,this.ez=k,this.et=M,g("x",R),g("y",B),g("z",k),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:B,y:k}=R||{};return g("x",B),g("y",k),new v(B,k,Yi,u(B*k))}static normalizeZ(R){const B=n.invertBatch(R.map(k=>k.ez));return R.map((k,M)=>k.toAffine(B[M])).map(v.fromAffine)}static msm(R,B){return mSe(v,d,R,B)}_setWindowSize(R){N.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:B,ey:k,ez:M}=this,{ex:j,ey:q,ez:se}=R,ie=u(B*se),Y=u(j*M),te=u(k*se),fe=u(q*M);return ie===Y&&te===fe}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:B,ey:k,ez:M}=this,j=u(B*B),q=u(k*k),se=u(OA*u(M*M)),ie=u(R*j),Y=B+k,te=u(u(Y*Y)-j-q),fe=ie+q,Xe=fe-se,Le=ie-q,De=u(te*Xe),wt=u(fe*Le),Mt=u(te*Le),ln=u(Xe*fe);return new v(De,wt,ln,Mt)}add(R){w(R);const{a:B,d:k}=e,{ex:M,ey:j,ez:q,et:se}=this,{ex:ie,ey:Y,ez:te,et:fe}=R;if(B===BigInt(-1)){const tt=u((j-M)*(Y+ie)),lt=u((j+M)*(Y-ie)),ut=u(lt-tt);if(ut===dc)return this.double();const Hn=u(q*OA*fe),Yn=u(se*OA*te),Ue=Yn+Hn,It=lt+tt,Lt=Yn-Hn,We=u(Ue*ut),fn=u(It*Lt),ko=u(Ue*Lt),pr=u(ut*It);return new v(We,fn,pr,ko)}const Xe=u(M*ie),Le=u(j*Y),De=u(se*k*fe),wt=u(q*te),Mt=u((M+j)*(ie+Y)-Xe-Le),ln=wt-De,X=wt+De,ce=u(Le-B*Xe),de=u(Mt*ln),ge=u(X*ce),we=u(Mt*ce),at=u(ln*X);return new v(de,ge,at,we)}subtract(R){return this.add(R.negate())}wNAF(R){return N.wNAFCached(this,R,v.normalizeZ)}multiply(R){const B=R;Ev("scalar",B,Yi,r);const{p:k,f:M}=this.wNAF(B);return v.normalizeZ([k,M])[0]}multiplyUnsafe(R,B=v.ZERO){const k=R;return Ev("scalar",k,dc,r),k===dc?C:this.is0()||k===Yi?this:N.wNAFCachedUnsafe(this,k,v.normalizeZ,B)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return N.unsafeLadder(this,r).is0()}toAffine(R){return y(this,R)}clearCofactor(){const{h:R}=e;return R===Yi?this:this.multiplyUnsafe(R)}static fromHex(R,B=!1){const{d:k,a:M}=e,j=n.BYTES;R=bu("pointHex",R,j),rO("zip215",B);const q=R.slice(),se=R[j-1];q[j-1]=se&-129;const ie=RS(q),Y=B?l:n.ORDER;Ev("pointHex.y",ie,dc,Y);const te=u(ie*ie),fe=u(te-Yi),Xe=u(k*te-M);let{isValid:Le,value:De}=h(fe,Xe);if(!Le)throw new Error("Point.fromHex: invalid y coordinate");const wt=(De&Yi)===Yi,Mt=(se&128)!==0;if(!B&&De===dc&&Mt)throw new Error("Point.fromHex: x=0 and x_0=1");return Mt!==wt&&(De=u(-De)),v.fromAffine({x:De,y:ie})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:B}=this.toAffine(),k=HD(B,n.BYTES);return k[k.length-1]|=R&Yi?128:0,k}toHex(){return AU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Yi,u(e.Gx*e.Gy)),v.ZERO=new v(dc,Yi,Yi,dc);const{BASE:A,ZERO:C}=v,N=gSe(v,a*8);function x(I){return Xr(I,r)}function T(I){return x(RS(I))}function S(I){const R=n.BYTES;I=bu("private key",I,R);const B=bu("hashed private key",i(I),2*R),k=f(B.slice(0,R)),M=B.slice(R,2*R),j=T(k),q=A.multiply(j),se=q.toRawBytes();return{head:k,prefix:M,scalar:j,point:q,pointBytes:se}}function D(I){return S(I).pointBytes}function O(I=new Uint8Array,...R){const B=j4(...R);return T(i(p(B,bu("context",I),!!s)))}function $(I,R,B={}){I=bu("message",I),s&&(I=s(I));const{prefix:k,scalar:M,pointBytes:j}=S(R),q=O(B.context,k,I),se=A.multiply(q).toRawBytes(),ie=O(B.context,se,j,I),Y=x(q+ie*M);Ev("signature.s",Y,dc,r);const te=j4(se,HD(Y,n.BYTES));return bu("result",te,n.BYTES*2)}const G=bSe;function W(I,R,B,k=G){const{context:M,zip215:j}=k,q=n.BYTES;I=bu("signature",I,2*q),R=bu("message",R),B=bu("publicKey",B,q),j!==void 0&&rO("zip215",j),s&&(R=s(R));const se=RS(I.slice(q,2*q));let ie,Y,te;try{ie=v.fromHex(B,j),Y=v.fromHex(I.slice(0,q),j),te=A.multiplyUnsafe(se)}catch{return!1}if(!j&&ie.isSmallOrder())return!1;const fe=O(M,Y.toRawBytes(),ie.toRawBytes(),R);return Y.add(ie.multiplyUnsafe(fe)).subtract(te).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:$,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,R=v.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const xU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),V4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const CSe=BigInt(1),K4=BigInt(2);BigInt(3);const _Se=BigInt(5),ASe=BigInt(8);function SSe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=xU,o=t*t%i*t%i,a=al(o,K4,i)*o%i,c=al(a,CSe,i)*t%i,l=al(c,_Se,i)*c%i,u=al(l,e,i)*l%i,d=al(u,n,i)*u%i,h=al(d,r,i)*d%i,f=al(h,s,i)*h%i,p=al(f,s,i)*h%i,g=al(p,e,i)*l%i;return{pow_p_5_8:al(g,K4,i)*t%i,b2:o}}function xSe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function ISe(t,e){const n=xU,r=Xr(e*e*e,n),s=Xr(r*r*e,n),i=SSe(t*s).pow_p_5_8;let o=Xr(t*r*i,n);const a=Xr(e*o*o,n),c=o,l=Xr(o*V4,n),u=a===t,d=a===Xr(-t,n),h=a===Xr(-t*V4,n);return u&&(o=c),(d||h)&&(o=l),cSe(o,n)&&(o=Xr(-o,n)),{isValid:u||d,value:o}}const NSe=cJ(xU,void 0,!0),TSe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:NSe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:ASe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:QAe,randomBytes:tJ,adjustScalarBytes:xSe,uvRatio:ISe},dJ=ESe(TSe),RSe="EdDSA",PSe="JWT",cI=".",vT="base64url",hJ="utf8",fJ="utf8",OSe=":",kSe="did",DSe="key",Y4="base58btc",MSe="z",LSe="K36",USe=32;function IU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function pJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?IU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function gJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=pJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return IU(n)}function BSe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var C=p[y],N=0,x=v-1;(C!==0||N<w)&&x!==-1;x--,N++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=N,y++}for(var T=v-w;T!==v&&A[T]===0;)T++;for(var S=c.repeat(g);T<v;++T)S+=t.charAt(A[T]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,N=b-1;(A!==0||C<y)&&N!==-1;N--,C++)A+=a*v[N]>>>0,v[N]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var T=new Uint8Array(w+(b-x)),S=w;x!==b;)T[S++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var $Se=BSe,FSe=$Se;const mJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},jSe=t=>new TextEncoder().encode(t),WSe=t=>new TextDecoder().decode(t);let zSe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},HSe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return yJ(this,e)}},GSe=class{constructor(e){this.decoders=e}or(e){return yJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const yJ=(t,e)=>new GSe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let qSe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new zSe(e,n,r),this.decoder=new HSe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const ET=({name:t,prefix:e,encode:n,decode:r})=>new qSe(t,e,n,r),E1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=FSe(n,e);return ET({prefix:t,name:e,encode:r,decode:i=>mJ(s(i))})},VSe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},KSe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Vs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>ET({prefix:e,name:t,encode(s){return KSe(s,r,n)},decode(s){return VSe(s,r,n,t)}}),YSe=ET({prefix:"\0",name:"identity",encode:t=>WSe(t),decode:t=>jSe(t)});var QSe=Object.freeze({__proto__:null,identity:YSe});const JSe=Vs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ZSe=Object.freeze({__proto__:null,base2:JSe});const XSe=Vs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var exe=Object.freeze({__proto__:null,base8:XSe});const txe=E1({prefix:"9",name:"base10",alphabet:"0123456789"});var nxe=Object.freeze({__proto__:null,base10:txe});const rxe=Vs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sxe=Vs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ixe=Object.freeze({__proto__:null,base16:rxe,base16upper:sxe});const oxe=Vs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),axe=Vs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),cxe=Vs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lxe=Vs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),uxe=Vs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dxe=Vs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hxe=Vs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),fxe=Vs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),pxe=Vs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var gxe=Object.freeze({__proto__:null,base32:oxe,base32upper:axe,base32pad:cxe,base32padupper:lxe,base32hex:uxe,base32hexupper:dxe,base32hexpad:hxe,base32hexpadupper:fxe,base32z:pxe});const mxe=E1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yxe=E1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var wxe=Object.freeze({__proto__:null,base36:mxe,base36upper:yxe});const bxe=E1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vxe=E1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Exe=Object.freeze({__proto__:null,base58btc:bxe,base58flickr:vxe});const Cxe=Vs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),_xe=Vs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Axe=Vs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Sxe=Vs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var xxe=Object.freeze({__proto__:null,base64:Cxe,base64pad:_xe,base64url:Axe,base64urlpad:Sxe});const wJ=Array.from(""),Ixe=wJ.reduce((t,e,n)=>(t[n]=e,t),[]),Nxe=wJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function Txe(t){return t.reduce((e,n)=>(e+=Ixe[n],e),"")}function Rxe(t){const e=[];for(const n of t){const r=Nxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Pxe=ET({prefix:"",name:"base256emoji",encode:Txe,decode:Rxe});var Oxe=Object.freeze({__proto__:null,base256emoji:Pxe}),kxe=bJ,Q4=128,Dxe=-128,Mxe=Math.pow(2,31);function bJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Mxe;)e[n++]=t&255|Q4,t/=128;for(;t&Dxe;)e[n++]=t&255|Q4,t>>>=7;return e[n]=t|0,bJ.bytes=n-r+1,e}var Lxe=qD,Uxe=128,J4=127;function qD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw qD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&J4)<<s:(o&J4)*Math.pow(2,s),s+=7}while(o>=Uxe);return qD.bytes=i-r,n}var Bxe=Math.pow(2,7),$xe=Math.pow(2,14),Fxe=Math.pow(2,21),jxe=Math.pow(2,28),Wxe=Math.pow(2,35),zxe=Math.pow(2,42),Hxe=Math.pow(2,49),Gxe=Math.pow(2,56),qxe=Math.pow(2,63),Vxe=function(t){return t<Bxe?1:t<$xe?2:t<Fxe?3:t<jxe?4:t<Wxe?5:t<zxe?6:t<Hxe?7:t<Gxe?8:t<qxe?9:10},Kxe={encode:kxe,decode:Lxe,encodingLength:Vxe},vJ=Kxe;const Z4=(t,e,n=0)=>(vJ.encode(t,e,n),e),X4=t=>vJ.encodingLength(t),VD=(t,e)=>{const n=e.byteLength,r=X4(t),s=r+X4(n),i=new Uint8Array(s+n);return Z4(t,i,0),Z4(n,i,r),i.set(e,s),new Yxe(t,n,e,i)};let Yxe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const EJ=({name:t,code:e,encode:n})=>new Qxe(t,e,n);let Qxe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?VD(this.code,n):n.then(r=>VD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const CJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Jxe=EJ({name:"sha2-256",code:18,encode:CJ("SHA-256")}),Zxe=EJ({name:"sha2-512",code:19,encode:CJ("SHA-512")});var Xxe=Object.freeze({__proto__:null,sha256:Jxe,sha512:Zxe});const _J=0,eIe="identity",AJ=mJ,tIe=t=>VD(_J,AJ(t)),nIe={code:_J,name:eIe,encode:AJ,digest:tIe};var rIe=Object.freeze({__proto__:null,identity:nIe});new TextEncoder,new TextDecoder;const eF={...QSe,...ZSe,...exe,...nxe,...ixe,...gxe,...wxe,...Exe,...xxe,...Oxe};({...Xxe,...rIe});function SJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const tF=SJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),lO=SJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=pJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xJ={utf8:tF,"utf-8":tF,hex:eF.base16,latin1:lO,ascii:lO,binary:lO,...eF};function CT(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Mb(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?IU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function nF(t){return rm(CT(Mb(t,vT),hJ))}function lI(t){return CT(Mb(Ad(t),hJ),vT)}function IJ(t){const e=Mb(LSe,Y4),n=MSe+CT(gJ([e,t]),Y4);return[kSe,DSe,n].join(OSe)}function sIe(t){return CT(t,vT)}function iIe(t){return Mb(t,vT)}function oIe(t){return Mb([lI(t.header),lI(t.payload)].join(cI),fJ)}function aIe(t){return[lI(t.header),lI(t.payload),sIe(t.signature)].join(cI)}function KD(t){const e=t.split(cI),n=nF(e[0]),r=nF(e[1]),s=iIe(e[2]),i=Mb(e.slice(0,2).join(cI),fJ);return{header:n,payload:r,signature:s,data:i}}function rF(t=tJ(USe)){const e=dJ.getPublicKey(t);return{secretKey:gJ([t,e]),publicKey:e}}async function cIe(t,e,n,r,s=_e.fromMiliseconds(Date.now())){const i={alg:RSe,typ:PSe},o=IJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=oIe({header:i,payload:c}),u=dJ.sign(l,r.secretKey.slice(0,32));return aIe({header:i,payload:c,signature:u})}var sF=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},lIe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),uIe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),dIe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),hIe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),fIe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),pIe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,gIe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,iF=3,mIe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",pIe]],oF=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function yIe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new fIe:typeof navigator<"u"?bIe(navigator.userAgent):EIe()}function wIe(t){return t!==""&&mIe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function bIe(t){var e=wIe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new hIe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<iF&&(s=sF(sF([],s,!0),CIe(iF-s.length),!0)):s=[];var i=s.join("."),o=vIe(t),a=gIe.exec(t);return a&&a[1]?new dIe(n,i,o,a[1]):new lIe(n,i,o)}function vIe(t){for(var e=0,n=oF.length;e<n;e++){var r=oF[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function EIe(){var t=typeof process<"u"&&process.version;return t?new uIe(process.version.slice(1)):null}function CIe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Xn={};Object.defineProperty(Xn,"__esModule",{value:!0});Xn.getLocalStorage=Xn.getLocalStorageOrThrow=Xn.getCrypto=Xn.getCryptoOrThrow=NJ=Xn.getLocation=Xn.getLocationOrThrow=NU=Xn.getNavigator=Xn.getNavigatorOrThrow=sm=Xn.getDocument=Xn.getDocumentOrThrow=Xn.getFromWindowOrThrow=Xn.getFromWindow=void 0;function Um(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Xn.getFromWindow=Um;function Lb(t){const e=Um(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Xn.getFromWindowOrThrow=Lb;function _Ie(){return Lb("document")}Xn.getDocumentOrThrow=_Ie;function AIe(){return Um("document")}var sm=Xn.getDocument=AIe;function SIe(){return Lb("navigator")}Xn.getNavigatorOrThrow=SIe;function xIe(){return Um("navigator")}var NU=Xn.getNavigator=xIe;function IIe(){return Lb("location")}Xn.getLocationOrThrow=IIe;function NIe(){return Um("location")}var NJ=Xn.getLocation=NIe;function TIe(){return Lb("crypto")}Xn.getCryptoOrThrow=TIe;function RIe(){return Um("crypto")}Xn.getCrypto=RIe;function PIe(){return Lb("localStorage")}Xn.getLocalStorageOrThrow=PIe;function OIe(){return Um("localStorage")}Xn.getLocalStorage=OIe;var TU={};Object.defineProperty(TU,"__esModule",{value:!0});var TJ=TU.getWindowMetadata=void 0;const aF=Xn;function kIe(){let t,e;try{t=aF.getDocumentOrThrow(),e=aF.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let y=e.protocol+"//"+e.host;if(w.indexOf("/")===0)y+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");y+=v+"/"+w}h.push(y)}else if(w.indexOf("//")===0){const y=e.protocol+w;h.push(y)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}TJ=TU.getWindowMetadata=kIe;function DIe(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let y=r.repeat(u);for(;w<p;++w)y+=t.charAt(g[w]);return y}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let y=d;for(;g!==f;)w[y++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var MIe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const RJ=DIe(MIe);function PJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function RE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=PJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function LIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var C=p[y],N=0,x=v-1;(C!==0||N<w)&&x!==-1;x--,N++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=N,y++}for(var T=v-w;T!==v&&A[T]===0;)T++;for(var S=c.repeat(g);T<v;++T)S+=t.charAt(A[T]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,N=b-1;(A!==0||C<y)&&N!==-1;N--,C++)A+=a*v[N]>>>0,v[N]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var T=new Uint8Array(w+(b-x)),S=w;x!==b;)T[S++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var UIe=LIe,BIe=UIe;const $Ie=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},FIe=t=>new TextEncoder().encode(t),jIe=t=>new TextDecoder().decode(t);class WIe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class zIe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return OJ(this,e)}}class HIe{constructor(e){this.decoders=e}or(e){return OJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const OJ=(t,e)=>new HIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class GIe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new WIe(e,n,r),this.decoder=new zIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const _T=({name:t,prefix:e,encode:n,decode:r})=>new GIe(t,e,n,r),C1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=BIe(n,e);return _T({prefix:t,name:e,encode:r,decode:i=>$Ie(s(i))})},qIe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},VIe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ks=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>_T({prefix:e,name:t,encode(s){return VIe(s,r,n)},decode(s){return qIe(s,r,n,t)}}),KIe=_T({prefix:"\0",name:"identity",encode:t=>jIe(t),decode:t=>FIe(t)}),YIe=Object.freeze(Object.defineProperty({__proto__:null,identity:KIe},Symbol.toStringTag,{value:"Module"})),QIe=Ks({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),JIe=Object.freeze(Object.defineProperty({__proto__:null,base2:QIe},Symbol.toStringTag,{value:"Module"})),ZIe=Ks({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),XIe=Object.freeze(Object.defineProperty({__proto__:null,base8:ZIe},Symbol.toStringTag,{value:"Module"})),eNe=C1({prefix:"9",name:"base10",alphabet:"0123456789"}),tNe=Object.freeze(Object.defineProperty({__proto__:null,base10:eNe},Symbol.toStringTag,{value:"Module"})),nNe=Ks({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rNe=Ks({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),sNe=Object.freeze(Object.defineProperty({__proto__:null,base16:nNe,base16upper:rNe},Symbol.toStringTag,{value:"Module"})),iNe=Ks({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),oNe=Ks({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aNe=Ks({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),cNe=Ks({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lNe=Ks({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uNe=Ks({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),dNe=Ks({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hNe=Ks({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fNe=Ks({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),pNe=Object.freeze(Object.defineProperty({__proto__:null,base32:iNe,base32hex:lNe,base32hexpad:dNe,base32hexpadupper:hNe,base32hexupper:uNe,base32pad:aNe,base32padupper:cNe,base32upper:oNe,base32z:fNe},Symbol.toStringTag,{value:"Module"})),gNe=C1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),mNe=C1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yNe=Object.freeze(Object.defineProperty({__proto__:null,base36:gNe,base36upper:mNe},Symbol.toStringTag,{value:"Module"})),wNe=C1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bNe=C1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),vNe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:wNe,base58flickr:bNe},Symbol.toStringTag,{value:"Module"})),ENe=Ks({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),CNe=Ks({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_Ne=Ks({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ANe=Ks({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),SNe=Object.freeze(Object.defineProperty({__proto__:null,base64:ENe,base64pad:CNe,base64url:_Ne,base64urlpad:ANe},Symbol.toStringTag,{value:"Module"})),kJ=Array.from(""),xNe=kJ.reduce((t,e,n)=>(t[n]=e,t),[]),INe=kJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function NNe(t){return t.reduce((e,n)=>(e+=xNe[n],e),"")}function TNe(t){const e=[];for(const n of t){const r=INe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const RNe=_T({prefix:"",name:"base256emoji",encode:NNe,decode:TNe}),PNe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:RNe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const cF={...YIe,...JIe,...XIe,...tNe,...sNe,...pNe,...yNe,...vNe,...SNe,...PNe};function DJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const lF=DJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),uO=DJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=PJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),MJ={utf8:lF,"utf-8":lF,hex:cF.base16,latin1:uO,ascii:uO,binary:uO,...cF};function Ga(t,e="utf8"){const n=MJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function xo(t,e="utf8"){const n=MJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const ONe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},kNe="PARSE_ERROR",DNe="INVALID_REQUEST",MNe="METHOD_NOT_FOUND",LNe="INVALID_PARAMS",LJ="INTERNAL_ERROR",RU="SERVER_ERROR",UNe=[-32700,-32600,-32601,-32602,-32603],PE={[kNe]:{code:-32700,message:"Parse error"},[DNe]:{code:-32600,message:"Invalid Request"},[MNe]:{code:-32601,message:"Method not found"},[LNe]:{code:-32602,message:"Invalid params"},[LJ]:{code:-32603,message:"Internal error"},[RU]:{code:-32e3,message:"Server error"}},UJ=RU;function BNe(t){return UNe.includes(t)}function uF(t){return Object.keys(PE).includes(t)?PE[t]:PE[UJ]}function $Ne(t){const e=Object.values(PE).find(n=>n.code===t);return e||PE[UJ]}function BJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var $J={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var YD=function(t,e){return YD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},YD(t,e)};function FNe(t,e){YD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var QD=function(){return QD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},QD.apply(this,arguments)};function jNe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function WNe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function zNe(t,e){return function(n,r){e(n,r,t)}}function HNe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function GNe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function qNe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function VNe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function KNe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function JD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function FJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function YNe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(FJ(arguments[e]));return t}function QNe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function zC(t){return this instanceof zC?(this.v=t,this):new zC(t)}function JNe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof zC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function ZNe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:zC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function XNe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof JD=="function"?JD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function eTe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function tTe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function nTe(t){return t&&t.__esModule?t:{default:t}}function rTe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function sTe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const iTe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return QD},__asyncDelegator:ZNe,__asyncGenerator:JNe,__asyncValues:XNe,__await:zC,__awaiter:GNe,__classPrivateFieldGet:rTe,__classPrivateFieldSet:sTe,__createBinding:VNe,__decorate:WNe,__exportStar:KNe,__extends:FNe,__generator:qNe,__importDefault:nTe,__importStar:tTe,__makeTemplateObject:eTe,__metadata:HNe,__param:zNe,__read:FJ,__rest:jNe,__spread:YNe,__spreadArrays:QNe,__values:JD},Symbol.toStringTag,{value:"Module"})),oTe=ZW(iTe);var vu={},dF;function aTe(){if(dF)return vu;dF=1,Object.defineProperty(vu,"__esModule",{value:!0}),vu.isBrowserCryptoAvailable=vu.getSubtleCrypto=vu.getBrowerCrypto=void 0;function t(){return(Pl==null?void 0:Pl.crypto)||(Pl==null?void 0:Pl.msCrypto)||{}}vu.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}vu.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return vu.isBrowserCryptoAvailable=n,vu}var Eu={},hF;function cTe(){if(hF)return Eu;hF=1,Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.isBrowser=Eu.isNode=Eu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Eu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Eu.isNode=e;function n(){return!t()&&!e()}return Eu.isBrowser=n,Eu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=oTe;e.__exportStar(aTe(),t),e.__exportStar(cTe(),t)})($J);function ml(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Yp(t=6){return BigInt(ml(t))}function Jh(t,e,n){return{id:n||ml(),jsonrpc:"2.0",method:t,params:e}}function AT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ST(t,e,n){return{id:t,jsonrpc:"2.0",error:lTe(e)}}function lTe(t,e){return typeof t>"u"?uF(LJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},uF(RU)),{message:t})),BNe(t.code)&&(t=$Ne(t.code)),t)}let uTe=class{},dTe=class extends uTe{constructor(){super()}},hTe=class extends dTe{constructor(e){super()}};const fTe="^https?:",pTe="^wss?:";function gTe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function jJ(t,e){const n=gTe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function fF(t){return jJ(t,fTe)}function pF(t){return jJ(t,pTe)}function mTe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function WJ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function PU(t){return WJ(t)&&"method"in t}function xT(t){return WJ(t)&&(yl(t)||Ua(t))}function yl(t){return"result"in t}function Ua(t){return"error"in t}let rc=class extends hTe{constructor(e){super(e),this.events=new nc.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Jh(e.method,e.params||[],e.id||Yp().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ua(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),xT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const yTe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),wTe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",gF=t=>t.split("?")[0],mF=10,bTe=yTe();let vTe=class{constructor(e){if(this.url=e,this.events=new nc.EventEmitter,this.registering=!1,!pF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ad(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!pF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=$J.isReactNative()?void 0:{rejectUnauthorized:!mTe(e)},i=new bTe(e,[],s);wTe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?rm(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=ST(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return BJ(e,gF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>mF&&this.events.setMaxListeners(mF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${gF(this.url)}`));return this.events.emit("register_error",n),n}};var ZD={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Pl<"u"&&Pl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof Pl<"u"&&Pl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var R={next:function(){var B=I.shift();return{done:B===void 0,value:B}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(I){this.map={},I instanceof g?I.forEach(function(R,B){this.append(B,R)},this):Array.isArray(I)?I.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(R){this.append(R,I[R])},this)}g.prototype.append=function(I,R){I=h(I),R=f(R);var B=this.map[I];this.map[I]=B?B+", "+R:R},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,R){this.map[h(I)]=f(R)},g.prototype.forEach=function(I,R){for(var B in this.map)this.map.hasOwnProperty(B)&&I.call(R,this.map[B],B,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(R,B){I.push(B)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(R){I.push(R)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(R,B){I.push([B,R])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function y(I){return new Promise(function(R,B){I.onload=function(){R(I.result)},I.onerror=function(){B(I.error)}})}function b(I){var R=new FileReader,B=y(R);return R.readAsArrayBuffer(I),B}function v(I){var R=new FileReader,B=y(R),k=/charset=([A-Za-z0-9_-]+)/.exec(I.type),M=k?k[1]:"utf-8";return R.readAsText(I,M),B}function A(I){for(var R=new Uint8Array(I),B=new Array(R.length),k=0;k<R.length;k++)B[k]=String.fromCharCode(R[k]);return B.join("")}function C(I){if(I.slice)return I.slice(0);var R=new Uint8Array(I.byteLength);return R.set(new Uint8Array(I)),R.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=C(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=C(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function T(I){var R=I.toUpperCase();return x.indexOf(R)>-1?R:I}function S(I,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var B=R.body;if(I instanceof S){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,R.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!B&&I._bodyInit!=null&&(B=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=T(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var k=/([?&])_=[^&]*/;if(k.test(this.url))this.url=this.url.replace(k,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function D(I){var R=new FormData;return I.trim().split("&").forEach(function(B){if(B){var k=B.split("="),M=k.shift().replace(/\+/g," "),j=k.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(j))}}),R}function O(I){var R=new g,B=I.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(k){return k.indexOf(`
`)===0?k.substr(1,k.length):k}).forEach(function(k){var M=k.split(":"),j=M.shift().trim();if(j){var q=M.join(":").trim();try{R.append(j,q)}catch(se){console.warn("Response "+se.message)}}}),R}N.call(S.prototype);function $(I,R){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(I)}N.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},$.error=function(){var I=new $(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var G=[301,302,303,307,308];$.redirect=function(I,R){if(G.indexOf(R)===-1)throw new RangeError("Invalid status code");return new $(null,{status:R,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,B){this.message=R,this.name=B;var k=Error(R);this.stack=k.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(I,R){return new Promise(function(B,k){var M=new S(I,R);if(M.signal&&M.signal.aborted)return k(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function q(){j.abort()}j.onload=function(){var Y={statusText:j.statusText,headers:O(j.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(j.status<200||j.status>599)?Y.status=200:Y.status=j.status,Y.url="responseURL"in j?j.responseURL:Y.headers.get("X-Request-URL");var te="response"in j?j.response:j.responseText;setTimeout(function(){B(new $(te,Y))},0)},j.onerror=function(){setTimeout(function(){k(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){k(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){k(new o.DOMException("Aborted","AbortError"))},0)};function se(Y){try{return Y===""&&a.location.href?a.location.href:Y}catch{return Y}}if(j.open(M.method,se(M.url),!0),M.credentials==="include"?j.withCredentials=!0:M.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var ie=[];Object.getOwnPropertyNames(R.headers).forEach(function(Y){ie.push(h(Y)),j.setRequestHeader(Y,f(R.headers[Y]))}),M.headers.forEach(function(Y,te){ie.indexOf(te)===-1&&j.setRequestHeader(te,Y)})}else M.headers.forEach(function(Y,te){j.setRequestHeader(te,Y)});M.signal&&(M.signal.addEventListener("abort",q),j.onreadystatechange=function(){j.readyState===4&&M.signal.removeEventListener("abort",q)}),j.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=S,a.Response=$),o.Headers=g,o.Request=S,o.Response=$,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(ZD,ZD.exports);var ETe=ZD.exports;const yF=vm(ETe);var CTe=Object.defineProperty,_Te=Object.defineProperties,ATe=Object.getOwnPropertyDescriptors,wF=Object.getOwnPropertySymbols,STe=Object.prototype.hasOwnProperty,xTe=Object.prototype.propertyIsEnumerable,bF=(t,e,n)=>e in t?CTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vF=(t,e)=>{for(var n in e||(e={}))STe.call(e,n)&&bF(t,n,e[n]);if(wF)for(var n of wF(e))xTe.call(e,n)&&bF(t,n,e[n]);return t},EF=(t,e)=>_Te(t,ATe(e));const ITe={Accept:"application/json","Content-Type":"application/json"},NTe="POST",CF={headers:ITe,method:NTe},_F=10;let el=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new nc.EventEmitter,this.isAvailable=!1,this.registering=!1,!fF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=Ad(e),r=await(await yF(this.url,EF(vF({},CF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!fF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=Ad({id:1,jsonrpc:"2.0",method:"test",params:[]});await yF(e,EF(vF({},CF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?rm(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=ST(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return BJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>_F&&this.events.setMaxListeners(_F)}};const OE={getSIWX(){return ve.state.siwx},async initializeIfEnabled(){var i;const t=ve.state.siwx,e=H.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(H.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await Es.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),fr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=vt._getClient())==null?void 0:i.disconnect().catch(console.error)),Ht.reset("Connect"),Mc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=ve.state.siwx,e=ot.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork(),r=vt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();Fe.getConnectorId(n.chainNamespace)===je.CONNECTOR_ID.AUTH&&Ht.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Es.close(),fr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Es.state.open||Ht.state.view==="ApproveTransaction")&&await Es.open({view:"SIWXSignMessage"}),i.isSmartAccount?Mc.showError("This application might not support Smart Accounts"):Mc.showError("Signature declined"),fr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await vt.disconnect():Es.close(),Ht.reset("Connect"),fr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=ve.state.siwx,e=ot.getPlainAddress(H.getActiveCaipAddress()),n=H.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ht.state.view==="ApproveTransaction",r=Ht.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=OE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=H.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Mc.showLoading("Authenticating...",{autoClose:!1}),Ye.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),fr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:OE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),fr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:OE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Mc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=H.state.activeChain;return{network:((e=H.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ye.state.preferredAccountTypes)==null?void 0:n[t])===Ws.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function kA(t,e){return Fe.getConnectorId(t)===e}function TTe(t){const e=Array.from(H.state.chains.keys());let n=[];return t?(n.push([t,H.state.chains.get(t)]),kA(t,je.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&kA(r,je.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,H.state.chains.get(r)])}):kA(t,je.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&kA(r,je.CONNECTOR_ID.AUTH)&&n.push([r,H.state.chains.get(r)])})):n=Array.from(H.state.chains.entries()),n}const ho={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},uI={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[je.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[je.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[je.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[je.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[je.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[je.CONNECTOR_ID.INJECTED]:"Browser Wallet",[je.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[je.CONNECTOR_ID.COINBASE]:"Coinbase",[je.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[je.CONNECTOR_ID.LEDGER]:"Ledger",[je.CONNECTOR_ID.SAFE]:"Safe"}},IT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${ho.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},RTe=new AbortController,kl={EmbeddedWalletAbortController:RTe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${PTe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function PTe(){return typeof window<"u"}const OTe={createLogger(t,e="error"){const n=Lm({level:e}),{logger:r}=bT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},kTe="rpc.walletconnect.org";function AF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const dO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],Ry={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===kTe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:je.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${je.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return dO.includes(e)?AF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:uI.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>Ry.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ha(a.url,a.config))}),dO.includes(t.caipNetworkId)&&r.push(Ha(AF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ha(a))}),sI(r)},extendWagmiTransports(t,e,n){if(dO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return sI([n,Ha(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:je.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Qe.getActiveCaipNetworkId(),n=H.getAllRequestedCaipNetworks(),r=Array.from(((c=H.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},dI={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Qi=lr({providers:{...dI},providerIds:{...dI}}),$n={state:Qi,subscribeKey(t,e){return pi(Qi,t,e)},subscribe(t){return hi(Qi,()=>{t(Qi)})},subscribeProviders(t){return hi(Qi.providers,()=>t(Qi.providers))},setProvider(t,e){e&&(Qi.providers[t]=Yg(e))},getProvider(t){return Qi.providers[t]},setProviderId(t,e){e&&(Qi.providerIds[t]=e)},getProviderId(t){if(t)return Qi.providerIds[t]},reset(){Qi.providers={...dI},Qi.providerIds={...dI}},resetChain(t){Qi.providers[t]=void 0,Qi.providerIds[t]=void 0}},SF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},ks={set(t,e){ta.isClient&&localStorage.setItem(`${Ve.STORAGE_KEY}${t}`,e)},get(t){return ta.isClient?localStorage.getItem(`${Ve.STORAGE_KEY}${t}`):null},delete(t,e){ta.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ve.STORAGE_KEY}${t}`))}},DA=30*1e3,ta={checkIfAllowedToTriggerEmail(){const t=ks.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<DA){const n=Math.ceil((DA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=ks.get(Ve.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<DA)return Math.ceil((DA-e)/1e3)}return 0},checkIfRequestExists(t){return Ws.NOT_SAFE_RPC_METHODS.includes(t.method)||Ws.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(SF.transactionHash))||(t==null?void 0:t.match(SF.signedMessage)))?Ve.RPC_RESPONSE_TYPE_TX:Ve.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ws.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var vn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(vn||(vn={}));var XD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(XD||(XD={}));const Me=vn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wh=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},Ce=vn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),DTe=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Gc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,vn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Gc.create=t=>new Gc(t);const HC=(t,e)=>{let n;switch(t.code){case Ce.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,vn.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${vn.joinValues(t.keys,", ")}`;break;case Ce.invalid_union:n="Invalid input";break;case Ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${vn.joinValues(t.options)}`;break;case Ce.invalid_enum_value:n=`Invalid enum value. Expected ${vn.joinValues(t.options)}, received '${t.received}'`;break;case Ce.invalid_arguments:n="Invalid function arguments";break;case Ce.invalid_return_type:n="Invalid function return type";break;case Ce.invalid_date:n="Invalid date";break;case Ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:vn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ce.custom:n="Invalid input";break;case Ce.invalid_intersection_types:n="Intersection results could not be merged";break;case Ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,vn.assertNever(t)}return{message:n}};let zJ=HC;function MTe(t){zJ=t}function hI(){return zJ}const fI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},LTe=[];function Ge(t,e){const n=fI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,hI(),HC].filter(r=>!!r)});t.common.issues.push(n)}class fi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Dt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return fi.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return Dt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const Dt=Object.freeze({status:"aborted"}),HJ=t=>({status:"dirty",value:t}),Li=t=>({status:"valid",value:t}),e3=t=>t.status==="aborted",t3=t=>t.status==="dirty",GC=t=>t.status==="valid",pI=t=>typeof Promise<"u"&&t instanceof Promise;var dt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(dt||(dt={}));class iu{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const xF=(t,e)=>{if(GC(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Gc(t.common.issues);return this._error=n,this._error}}};function jt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Gt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return wh(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:wh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fi,ctx:{common:e.parent.common,data:e.data,parsedType:wh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(pI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wh(e)},i=this._parseSync({data:e,path:s.path,parent:s});return xF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wh(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(pI(s)?s:Promise.resolve(s));return xF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Jc({schema:this,typeName:xt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ld.create(this,this._def)}nullable(){return am.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qc.create(this,this._def)}promise(){return Yw.create(this,this._def)}or(e){return YC.create([this,e],this._def)}and(e){return QC.create(this,e,this._def)}transform(e){return new Jc({...jt(this._def),schema:this,typeName:xt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new t_({...jt(this._def),innerType:this,defaultValue:n,typeName:xt.ZodDefault})}brand(){return new qJ({typeName:xt.ZodBranded,type:this,...jt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new wI({...jt(this._def),innerType:this,catchValue:n,typeName:xt.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return _1.create(this,e)}readonly(){return vI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const UTe=/^c[^\s-]{8,}$/i,BTe=/^[a-z][a-z0-9]*$/,$Te=/^[0-9A-HJKMNP-TV-Z]{26}$/,FTe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,jTe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,WTe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let hO;const zTe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,HTe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,GTe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function qTe(t,e){return!!((e==="v4"||!e)&&zTe.test(t)||(e==="v6"||!e)&&HTe.test(t))}class Fc extends Gt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Me.string,received:i.parsedType}),Dt}const r=new fi;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?Ge(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&Ge(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")jTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"email",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")hO||(hO=new RegExp(WTe,"u")),hO.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"emoji",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")FTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"uuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")UTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")BTe.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"cuid2",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")$Te.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ulid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Ge(s,{validation:"url",code:Ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"regex",code:Ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?GTe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?qTe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),Ge(s,{validation:"ip",code:Ce.invalid_string,message:i.message}),r.dirty()):vn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ce.invalid_string,...dt.errToObj(r)})}_addCheck(e){return new Fc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...dt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...dt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...dt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...dt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...dt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...dt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...dt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...dt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...dt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...dt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...dt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...dt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...dt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...dt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...dt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...dt.errToObj(n)})}nonempty(e){return this.min(1,dt.errToObj(e))}trim(){return new Fc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Fc.create=t=>{var e;return new Fc({checks:[],typeName:xt.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...jt(t)})};function VTe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Mf extends Gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Me.number,received:i.parsedType}),Dt}let r;const s=new fi;for(const i of this._def.checks)i.kind==="int"?vn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?VTe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.not_finite,message:i.message}),s.dirty()):vn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,dt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,dt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,dt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,dt.toString(n))}setLimit(e,n,r,s){return new Mf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:dt.toString(s)}]})}_addCheck(e){return new Mf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:dt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:dt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:dt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:dt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:dt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:dt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:dt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&vn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Mf.create=t=>new Mf({checks:[],typeName:xt.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...jt(t)});class Lf extends Gt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Me.bigint){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Me.bigint,received:i.parsedType}),Dt}let r;const s=new fi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Ge(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):vn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,dt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,dt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,dt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,dt.toString(n))}setLimit(e,n,r,s){return new Lf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:dt.toString(s)}]})}_addCheck(e){return new Lf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:dt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:dt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:dt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:dt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:dt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Lf.create=t=>{var e;return new Lf({checks:[],typeName:xt.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...jt(t)})};class qC extends Gt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Me.boolean,received:r.parsedType}),Dt}return Li(e.data)}}qC.create=t=>new qC({typeName:xt.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...jt(t)});class im extends Gt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_type,expected:Me.date,received:i.parsedType}),Dt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return Ge(i,{code:Ce.invalid_date}),Dt}const r=new fi;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),Ge(s,{code:Ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):vn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new im({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:dt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:dt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}im.create=t=>new im({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:xt.ZodDate,...jt(t)});class gI extends Gt{_parse(e){if(this._getType(e)!==Me.symbol){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Me.symbol,received:r.parsedType}),Dt}return Li(e.data)}}gI.create=t=>new gI({typeName:xt.ZodSymbol,...jt(t)});class VC extends Gt{_parse(e){if(this._getType(e)!==Me.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Me.undefined,received:r.parsedType}),Dt}return Li(e.data)}}VC.create=t=>new VC({typeName:xt.ZodUndefined,...jt(t)});class KC extends Gt{_parse(e){if(this._getType(e)!==Me.null){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Me.null,received:r.parsedType}),Dt}return Li(e.data)}}KC.create=t=>new KC({typeName:xt.ZodNull,...jt(t)});class Kw extends Gt{constructor(){super(...arguments),this._any=!0}_parse(e){return Li(e.data)}}Kw.create=t=>new Kw({typeName:xt.ZodAny,...jt(t)});class Dg extends Gt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Li(e.data)}}Dg.create=t=>new Dg({typeName:xt.ZodUnknown,...jt(t)});class Sd extends Gt{_parse(e){const n=this._getOrReturnCtx(e);return Ge(n,{code:Ce.invalid_type,expected:Me.never,received:n.parsedType}),Dt}}Sd.create=t=>new Sd({typeName:xt.ZodNever,...jt(t)});class mI extends Gt{_parse(e){if(this._getType(e)!==Me.undefined){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Me.void,received:r.parsedType}),Dt}return Li(e.data)}}mI.create=t=>new mI({typeName:xt.ZodVoid,...jt(t)});class qc extends Gt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Me.array)return Ge(n,{code:Ce.invalid_type,expected:Me.array,received:n.parsedType}),Dt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(Ge(n,{code:o?Ce.too_big:Ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Ge(n,{code:Ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Ge(n,{code:Ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new iu(n,o,n.path,a)))).then(o=>fi.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new iu(n,o,n.path,a)));return fi.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new qc({...this._def,minLength:{value:e,message:dt.toString(n)}})}max(e,n){return new qc({...this._def,maxLength:{value:e,message:dt.toString(n)}})}length(e,n){return new qc({...this._def,exactLength:{value:e,message:dt.toString(n)}})}nonempty(e){return this.min(1,e)}}qc.create=(t,e)=>new qc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:xt.ZodArray,...jt(e)});function Py(t){if(t instanceof yr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ld.create(Py(r))}return new yr({...t._def,shape:()=>e})}else return t instanceof qc?new qc({...t._def,type:Py(t.element)}):t instanceof ld?ld.create(Py(t.unwrap())):t instanceof am?am.create(Py(t.unwrap())):t instanceof ou?ou.create(t.items.map(e=>Py(e))):t}class yr extends Gt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=vn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Me.object){const l=this._getOrReturnCtx(e);return Ge(l,{code:Ce.invalid_type,expected:Me.object,received:l.parsedType}),Dt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof Sd&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new iu(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Sd){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(Ge(s,{code:Ce.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new iu(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>fi.mergeObjectSync(r,l)):fi.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return dt.errToObj,new yr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=dt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new yr({...this._def,unknownKeys:"strip"})}passthrough(){return new yr({...this._def,unknownKeys:"passthrough"})}extend(e){return new yr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new yr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:xt.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new yr({...this._def,catchall:e})}pick(e){const n={};return vn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new yr({...this._def,shape:()=>n})}omit(e){const n={};return vn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new yr({...this._def,shape:()=>n})}deepPartial(){return Py(this)}partial(e){const n={};return vn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new yr({...this._def,shape:()=>n})}required(e){const n={};return vn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof ld;)i=i._def.innerType;n[r]=i}}),new yr({...this._def,shape:()=>n})}keyof(){return GJ(vn.objectKeys(this.shape))}}yr.create=(t,e)=>new yr({shape:()=>t,unknownKeys:"strip",catchall:Sd.create(),typeName:xt.ZodObject,...jt(e)});yr.strictCreate=(t,e)=>new yr({shape:()=>t,unknownKeys:"strict",catchall:Sd.create(),typeName:xt.ZodObject,...jt(e)});yr.lazycreate=(t,e)=>new yr({shape:t,unknownKeys:"strip",catchall:Sd.create(),typeName:xt.ZodObject,...jt(e)});class YC extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Gc(a.ctx.common.issues));return Ge(n,{code:Ce.invalid_union,unionErrors:o}),Dt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Gc(c));return Ge(n,{code:Ce.invalid_union,unionErrors:a}),Dt}}get options(){return this._def.options}}YC.create=(t,e)=>new YC({options:t,typeName:xt.ZodUnion,...jt(e)});const PS=t=>t instanceof ZC?PS(t.schema):t instanceof Jc?PS(t.innerType()):t instanceof XC?[t.value]:t instanceof Uf?t.options:t instanceof e_?Object.keys(t.enum):t instanceof t_?PS(t._def.innerType):t instanceof VC?[void 0]:t instanceof KC?[null]:null;class NT extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.object)return Ge(n,{code:Ce.invalid_type,expected:Me.object,received:n.parsedType}),Dt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Ge(n,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Dt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=PS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new NT({typeName:xt.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...jt(r)})}}function n3(t,e){const n=wh(t),r=wh(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&r===Me.object){const s=vn.objectKeys(e),i=vn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=n3(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Me.array&&r===Me.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=n3(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Me.date&&r===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class QC extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(e3(i)||e3(o))return Dt;const a=n3(i.value,o.value);return a.valid?((t3(i)||t3(o))&&n.dirty(),{status:n.value,value:a.data}):(Ge(r,{code:Ce.invalid_intersection_types}),Dt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}QC.create=(t,e,n)=>new QC({left:t,right:e,typeName:xt.ZodIntersection,...jt(n)});class ou extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.array)return Ge(r,{code:Ce.invalid_type,expected:Me.array,received:r.parsedType}),Dt;if(r.data.length<this._def.items.length)return Ge(r,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Dt;!this._def.rest&&r.data.length>this._def.items.length&&(Ge(r,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new iu(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>fi.mergeArray(n,o)):fi.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new ou({...this._def,rest:e})}}ou.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ou({items:t,typeName:xt.ZodTuple,rest:null,...jt(e)})};class JC extends Gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.object)return Ge(r,{code:Ce.invalid_type,expected:Me.object,received:r.parsedType}),Dt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new iu(r,a,r.path,a)),value:o._parse(new iu(r,r.data[a],r.path,a))});return r.common.async?fi.mergeObjectAsync(n,s):fi.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Gt?new JC({keyType:e,valueType:n,typeName:xt.ZodRecord,...jt(r)}):new JC({keyType:Fc.create(),valueType:e,typeName:xt.ZodRecord,...jt(n)})}}class yI extends Gt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.map)return Ge(r,{code:Ce.invalid_type,expected:Me.map,received:r.parsedType}),Dt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new iu(r,a,r.path,[l,"key"])),value:i._parse(new iu(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Dt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Dt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}yI.create=(t,e,n)=>new yI({valueType:e,keyType:t,typeName:xt.ZodMap,...jt(n)});class om extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Me.set)return Ge(r,{code:Ce.invalid_type,expected:Me.set,received:r.parsedType}),Dt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Ge(r,{code:Ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Ge(r,{code:Ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Dt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new iu(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new om({...this._def,minSize:{value:e,message:dt.toString(n)}})}max(e,n){return new om({...this._def,maxSize:{value:e,message:dt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}om.create=(t,e)=>new om({valueType:t,minSize:null,maxSize:null,typeName:xt.ZodSet,...jt(e)});class y0 extends Gt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.function)return Ge(n,{code:Ce.invalid_type,expected:Me.function,received:n.parsedType}),Dt;function r(a,c){return fI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,hI(),HC].filter(l=>!!l),issueData:{code:Ce.invalid_arguments,argumentsError:c}})}function s(a,c){return fI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,hI(),HC].filter(l=>!!l),issueData:{code:Ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Yw){const a=this;return Li(async function(...c){const l=new Gc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return Li(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Gc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Gc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new y0({...this._def,args:ou.create(e).rest(Dg.create())})}returns(e){return new y0({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new y0({args:e||ou.create([]).rest(Dg.create()),returns:n||Dg.create(),typeName:xt.ZodFunction,...jt(r)})}}class ZC extends Gt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}ZC.create=(t,e)=>new ZC({getter:t,typeName:xt.ZodLazy,...jt(e)});class XC extends Gt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Ge(n,{received:n.data,code:Ce.invalid_literal,expected:this._def.value}),Dt}return{status:"valid",value:e.data}}get value(){return this._def.value}}XC.create=(t,e)=>new XC({value:t,typeName:xt.ZodLiteral,...jt(e)});function GJ(t,e){return new Uf({values:t,typeName:xt.ZodEnum,...jt(e)})}class Uf extends Gt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{expected:vn.joinValues(r),received:n.parsedType,code:Ce.invalid_type}),Dt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return Ge(n,{received:n.data,code:Ce.invalid_enum_value,options:r}),Dt}return Li(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Uf.create(e)}exclude(e){return Uf.create(this.options.filter(n=>!e.includes(n)))}}Uf.create=GJ;class e_ extends Gt{_parse(e){const n=vn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Me.string&&r.parsedType!==Me.number){const s=vn.objectValues(n);return Ge(r,{expected:vn.joinValues(s),received:r.parsedType,code:Ce.invalid_type}),Dt}if(n.indexOf(e.data)===-1){const s=vn.objectValues(n);return Ge(r,{received:r.data,code:Ce.invalid_enum_value,options:s}),Dt}return Li(e.data)}get enum(){return this._def.values}}e_.create=(t,e)=>new e_({values:t,typeName:xt.ZodNativeEnum,...jt(e)});class Yw extends Gt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return Ge(n,{code:Ce.invalid_type,expected:Me.promise,received:n.parsedType}),Dt;const r=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Li(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Yw.create=(t,e)=>new Yw({type:t,typeName:xt.ZodPromise,...jt(e)});class Jc extends Gt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===xt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{Ge(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Dt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Dt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!GC(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>GC(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);vn.assertNever(s)}}Jc.create=(t,e,n)=>new Jc({schema:t,typeName:xt.ZodEffects,effect:e,...jt(n)});Jc.createWithPreprocess=(t,e,n)=>new Jc({schema:e,effect:{type:"preprocess",transform:t},typeName:xt.ZodEffects,...jt(n)});class ld extends Gt{_parse(e){return this._getType(e)===Me.undefined?Li(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ld.create=(t,e)=>new ld({innerType:t,typeName:xt.ZodOptional,...jt(e)});class am extends Gt{_parse(e){return this._getType(e)===Me.null?Li(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}am.create=(t,e)=>new am({innerType:t,typeName:xt.ZodNullable,...jt(e)});class t_ extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Me.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}t_.create=(t,e)=>new t_({innerType:t,typeName:xt.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...jt(e)});class wI extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return pI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Gc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Gc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}wI.create=(t,e)=>new wI({innerType:t,typeName:xt.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...jt(e)});class bI extends Gt{_parse(e){if(this._getType(e)!==Me.nan){const r=this._getOrReturnCtx(e);return Ge(r,{code:Ce.invalid_type,expected:Me.nan,received:r.parsedType}),Dt}return{status:"valid",value:e.data}}}bI.create=t=>new bI({typeName:xt.ZodNaN,...jt(t)});const KTe=Symbol("zod_brand");class qJ extends Gt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class _1 extends Gt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Dt:i.status==="dirty"?(n.dirty(),HJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Dt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new _1({in:e,out:n,typeName:xt.ZodPipeline})}}class vI extends Gt{_parse(e){const n=this._def.innerType._parse(e);return GC(n)&&(n.value=Object.freeze(n.value)),n}}vI.create=(t,e)=>new vI({innerType:t,typeName:xt.ZodReadonly,...jt(e)});const VJ=(t,e={},n)=>t?Kw.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Kw.create(),YTe={object:yr.lazycreate};var xt;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(xt||(xt={}));const QTe=(t,e={message:`Input not instance of ${t.name}`})=>VJ(n=>n instanceof t,e),KJ=Fc.create,YJ=Mf.create,JTe=bI.create,ZTe=Lf.create,QJ=qC.create,XTe=im.create,eRe=gI.create,tRe=VC.create,nRe=KC.create,rRe=Kw.create,sRe=Dg.create,iRe=Sd.create,oRe=mI.create,aRe=qc.create,cRe=yr.create,lRe=yr.strictCreate,uRe=YC.create,dRe=NT.create,hRe=QC.create,fRe=ou.create,pRe=JC.create,gRe=yI.create,mRe=om.create,yRe=y0.create,wRe=ZC.create,bRe=XC.create,vRe=Uf.create,ERe=e_.create,CRe=Yw.create,IF=Jc.create,_Re=ld.create,ARe=am.create,SRe=Jc.createWithPreprocess,xRe=_1.create,IRe=()=>KJ().optional(),NRe=()=>YJ().optional(),TRe=()=>QJ().optional(),RRe={string:t=>Fc.create({...t,coerce:!0}),number:t=>Mf.create({...t,coerce:!0}),boolean:t=>qC.create({...t,coerce:!0}),bigint:t=>Lf.create({...t,coerce:!0}),date:t=>im.create({...t,coerce:!0})},PRe=Dt;var E=Object.freeze({__proto__:null,defaultErrorMap:HC,setErrorMap:MTe,getErrorMap:hI,makeIssue:fI,EMPTY_PATH:LTe,addIssueToContext:Ge,ParseStatus:fi,INVALID:Dt,DIRTY:HJ,OK:Li,isAborted:e3,isDirty:t3,isValid:GC,isAsync:pI,get util(){return vn},get objectUtil(){return XD},ZodParsedType:Me,getParsedType:wh,ZodType:Gt,ZodString:Fc,ZodNumber:Mf,ZodBigInt:Lf,ZodBoolean:qC,ZodDate:im,ZodSymbol:gI,ZodUndefined:VC,ZodNull:KC,ZodAny:Kw,ZodUnknown:Dg,ZodNever:Sd,ZodVoid:mI,ZodArray:qc,ZodObject:yr,ZodUnion:YC,ZodDiscriminatedUnion:NT,ZodIntersection:QC,ZodTuple:ou,ZodRecord:JC,ZodMap:yI,ZodSet:om,ZodFunction:y0,ZodLazy:ZC,ZodLiteral:XC,ZodEnum:Uf,ZodNativeEnum:e_,ZodPromise:Yw,ZodEffects:Jc,ZodTransformer:Jc,ZodOptional:ld,ZodNullable:am,ZodDefault:t_,ZodCatch:wI,ZodNaN:bI,BRAND:KTe,ZodBranded:qJ,ZodPipeline:_1,ZodReadonly:vI,custom:VJ,Schema:Gt,ZodSchema:Gt,late:YTe,get ZodFirstPartyTypeKind(){return xt},coerce:RRe,any:rRe,array:aRe,bigint:ZTe,boolean:QJ,date:XTe,discriminatedUnion:dRe,effect:IF,enum:vRe,function:yRe,instanceof:QTe,intersection:hRe,lazy:wRe,literal:bRe,map:gRe,nan:JTe,nativeEnum:ERe,never:iRe,null:nRe,nullable:ARe,number:YJ,object:cRe,oboolean:TRe,onumber:NRe,optional:_Re,ostring:IRe,pipeline:xRe,preprocess:SRe,promise:CRe,record:pRe,set:mRe,strictObject:lRe,string:KJ,symbol:eRe,transformer:IF,tuple:fRe,undefined:tRe,union:uRe,unknown:sRe,void:oRe,NEVER:PRe,ZodIssueCode:Ce,quotelessJson:DTe,ZodError:Gc});const Ar=E.object({message:E.string()});function ze(t){return E.literal(Ve[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const ORe=E.object({chainId:E.string().or(E.number())}),kRe=E.object({email:E.string().email()}),DRe=E.object({otp:E.string()}),MRe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),LRe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),URe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),BRe=E.object({email:E.string().email()}),$Re=E.object({otp:E.string()}),FRe=E.object({otp:E.string()}),jRe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),WRe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),zRe=E.object({type:E.string()}),HRe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),GRe=E.object({url:E.string()}),qRe=E.object({userName:E.string()}),VRe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ws.ACCOUNT_TYPES.EOA,Ws.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),KRe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),YRe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ws.ACCOUNT_TYPES.EOA,Ws.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),QRe=E.object({uri:E.string()}),JRe=E.object({isConnected:E.boolean()}),ZRe=E.object({chainId:E.string().or(E.number())}),XRe=E.object({chainId:E.string().or(E.number())}),ePe=E.object({newEmail:E.string().email()}),tPe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const nPe=E.object({version:E.string().optional()}),rPe=E.object({type:E.string(),address:E.string()}),sPe=E.any(),iPe=E.object({method:E.literal("eth_accounts")}),oPe=E.object({method:E.literal("eth_blockNumber")}),aPe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),cPe=E.object({method:E.literal("eth_chainId")}),lPe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),uPe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),dPe=E.object({method:E.literal("eth_gasPrice")}),hPe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),fPe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),pPe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),gPe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),mPe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),yPe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),wPe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),bPe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),vPe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),EPe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),CPe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),_Pe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),APe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),SPe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),xPe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),IPe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),NPe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),TPe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),RPe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),PPe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),OPe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),kPe=E.object({method:E.literal("eth_newBlockFilter")}),DPe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),MPe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),LPe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),UPe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),BPe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),NF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),$Pe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),FPe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),jPe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),WPe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),zPe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),HPe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),GPe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),qPe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),VPe=E.object({method:E.literal("wallet_getCapabilities")}),KPe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),YPe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),QPe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),TF=E.object({token:E.string()}),He=E.object({id:E.string().optional()}),Cv={appEvent:He.extend({type:ze("APP_SWITCH_NETWORK"),payload:ORe}).or(He.extend({type:ze("APP_CONNECT_EMAIL"),payload:kRe})).or(He.extend({type:ze("APP_CONNECT_DEVICE")})).or(He.extend({type:ze("APP_CONNECT_OTP"),payload:DRe})).or(He.extend({type:ze("APP_CONNECT_SOCIAL"),payload:MRe})).or(He.extend({type:ze("APP_GET_FARCASTER_URI")})).or(He.extend({type:ze("APP_CONNECT_FARCASTER")})).or(He.extend({type:ze("APP_GET_USER"),payload:E.optional(LRe)})).or(He.extend({type:ze("APP_GET_SOCIAL_REDIRECT_URI"),payload:URe})).or(He.extend({type:ze("APP_SIGN_OUT")})).or(He.extend({type:ze("APP_IS_CONNECTED"),payload:E.optional(TF)})).or(He.extend({type:ze("APP_GET_CHAIN_ID")})).or(He.extend({type:ze("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(He.extend({type:ze("APP_INIT_SMART_ACCOUNT")})).or(He.extend({type:ze("APP_SET_PREFERRED_ACCOUNT"),payload:zRe})).or(He.extend({type:ze("APP_RPC_REQUEST"),payload:NF.or(QPe).or(iPe).or(oPe).or(aPe).or(cPe).or(lPe).or(uPe).or(dPe).or(hPe).or(fPe).or(pPe).or(gPe).or(mPe).or(yPe).or(wPe).or(bPe).or(vPe).or(EPe).or(CPe).or(_Pe).or(APe).or(SPe).or(xPe).or(IPe).or(NPe).or(TPe).or(RPe).or(PPe).or(OPe).or(kPe).or(DPe).or(MPe).or(LPe).or(UPe).or(BPe).or(NF).or($Pe).or(FPe).or(jPe).or(WPe).or(zPe).or(HPe).or(qPe).or(GPe).or(VPe).or(KPe).or(YPe)})).or(He.extend({type:ze("APP_UPDATE_EMAIL"),payload:BRe})).or(He.extend({type:ze("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:$Re})).or(He.extend({type:ze("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:FRe})).or(He.extend({type:ze("APP_SYNC_THEME"),payload:jRe})).or(He.extend({type:ze("APP_SYNC_DAPP_DATA"),payload:WRe})).or(He.extend({type:ze("APP_RELOAD")})),frameEvent:He.extend({type:ze("FRAME_SWITCH_NETWORK_ERROR"),payload:Ar}).or(He.extend({type:ze("FRAME_SWITCH_NETWORK_SUCCESS"),payload:XRe})).or(He.extend({type:ze("FRAME_CONNECT_EMAIL_SUCCESS"),payload:HRe})).or(He.extend({type:ze("FRAME_CONNECT_EMAIL_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:GRe})).or(He.extend({type:ze("FRAME_GET_FARCASTER_URI_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:qRe})).or(He.extend({type:ze("FRAME_CONNECT_FARCASTER_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_CONNECT_OTP_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_CONNECT_OTP_SUCCESS")})).or(He.extend({type:ze("FRAME_CONNECT_DEVICE_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_CONNECT_DEVICE_SUCCESS")})).or(He.extend({type:ze("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:VRe})).or(He.extend({type:ze("FRAME_CONNECT_SOCIAL_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_GET_USER_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_GET_USER_SUCCESS"),payload:YRe})).or(He.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:QRe})).or(He.extend({type:ze("FRAME_SIGN_OUT_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_SIGN_OUT_SUCCESS")})).or(He.extend({type:ze("FRAME_IS_CONNECTED_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_IS_CONNECTED_SUCCESS"),payload:JRe})).or(He.extend({type:ze("FRAME_GET_CHAIN_ID_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_GET_CHAIN_ID_SUCCESS"),payload:ZRe})).or(He.extend({type:ze("FRAME_RPC_REQUEST_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_RPC_REQUEST_SUCCESS"),payload:sPe})).or(He.extend({type:ze("FRAME_SESSION_UPDATE"),payload:TF})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SUCCESS"),payload:KRe})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:ePe})).or(He.extend({type:ze("FRAME_SYNC_THEME_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_SYNC_THEME_SUCCESS")})).or(He.extend({type:ze("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(He.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:tPe})).or(He.extend({type:ze("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:rPe})).or(He.extend({type:ze("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_READY"),payload:nPe})).or(He.extend({type:ze("FRAME_RELOAD_ERROR"),payload:Ar})).or(He.extend({type:ze("FRAME_RELOAD_SUCCESS")}))};function fO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let JPe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=je.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!fO(Ve.FRAME_EVENT_KEY,l))return;const u=Cv.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}ta.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{ta.isClient&&window.addEventListener("message",({data:o})=>{if(!fO(Ve.FRAME_EVENT_KEY,o))return;const a=Cv.frameEvent.parse(o);i(a)})},onAppEvent:i=>{ta.isClient&&window.addEventListener("message",({data:o})=>{if(!fO(Ve.APP_EVENT_KEY,o))return;const a=Cv.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(ta.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");Cv.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(ta.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Cv.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),ta.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Wye}?projectId=${e}&chainId=${r}&version=${Hye}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},ZPe=class{constructor(e){var i;const n=Lm({level:zye}),{logger:r,chunkLoggerController:s}=bT({opts:n});this.logger=qs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},XPe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new ZPe(e)),this.abortController=i,this.w3mFrame=new JPe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!ks.get(Ve.EMAIL_LOGIN_USED_KEY)}getEmail(){return ks.get(Ve.EMAIL)}getUsername(){return ks.get(Ve.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ve.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{ta.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ve.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ve.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ve.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ve.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ve.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ve.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ve.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ve.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ve.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ve.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ve.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ve.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ve.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ve.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ve.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ws.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ve.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ve.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ve.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ws.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ve.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ws.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ve.APP_SYNC_DAPP_DATA,Ve.APP_SYNC_THEME,Ve.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ve.APP_CONNECT_EMAIL,Ve.APP_CONNECT_DEVICE,Ve.APP_CONNECT_OTP,Ve.APP_CONNECT_SOCIAL,Ve.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){ks.set(Ve.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){ks.set(Ve.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&ks.set(Ve.EMAIL,e),ks.set(Ve.EMAIL_LOGIN_USED_KEY,"true"),ks.delete(Ve.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){ks.delete(Ve.EMAIL_LOGIN_USED_KEY),ks.delete(Ve.EMAIL),ks.delete(Ve.LAST_USED_CHAIN_KEY),ks.delete(Ve.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&ks.set(Ve.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=ks.get(Ve.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){ks.set(Ve.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},eOe=class OS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return OS.instance||(OS.instance=new XPe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),OS.instance}};function tOe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function us(t,...e){try{return tOe(t(...e))}catch(n){return Promise.reject(n)}}function nOe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function rOe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function kS(t){if(nOe(t))return String(t);if(rOe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return kS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const r3="base64:";function sOe(t){return typeof t=="string"?t:r3+aOe(t)}function iOe(t){return typeof t!="string"||!t.startsWith(r3)?t:oOe(t.slice(r3.length))}function oOe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function aOe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function no(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function cOe(...t){return no(t.join(":"))}function MA(t){return t=no(t),t?t+":":""}function lOe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function uOe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const dOe="memory",hOe=()=>{const t=new Map;return{name:dOe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function fOe(t={}){const e={mounts:{"":t.driver||hOe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=no(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await RF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=no(g?p:p.key),y=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:y,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=no(l);const{relativeKey:d,driver:h}=n(l);return us(h.hasItem,d,u)},getItem(l,u={}){l=no(l);const{relativeKey:d,driver:h}=n(l);return us(h.getItem,d,u).then(f=>NA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?us(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:cOe(d.base,f.key),value:NA(f.value)}))):Promise.all(d.items.map(h=>us(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:NA(f)})))))},getItemRaw(l,u={}){l=no(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?us(h.getItemRaw,d,u):us(h.getItem,d,u).then(f=>iOe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=no(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await us(f.setItem,h,kS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return us(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:kS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>us(d.driver.setItem,h.relativeKey,kS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=no(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await us(f.setItemRaw,h,u,d);else if(f.setItem)await us(f.setItem,h,sOe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=no(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await us(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await us(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=no(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await us(h.getMeta,d,u)),!u.nativeOnly){const p=await us(h.getItem,d+"$",u).then(g=>NA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=MA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const y of d){(w=y.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await us(y.driver.getKeys,y.relativeBase,u);for(const v of b){const A=y.mountpoint+no(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[y.mountpoint,...h.filter(v=>!v.startsWith(y.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(y=>(!g||lOe(y,u.maxDepth))&&uOe(y,l))},async clear(l,u={}){l=MA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return us(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>PF(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=MA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(RF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=MA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await PF(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=no(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=no(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function RF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function PF(t){typeof t.dispose=="function"&&await us(t.dispose)}const pOe="idb-keyval";var gOe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=YQ(t.dbName,t.storeName)),{name:pOe,options:t,async hasItem(s){return!(typeof await D4(n(s),r)>"u")},async getItem(s){return await D4(n(s),r)??null},setItem(s,i){return $1e(n(s),i,r)},removeItem(s){return F1e(n(s),r)},getKeys(){return z1e(r)},clear(){return j1e(r)}}};const mOe="WALLET_CONNECT_V2_INDEXED_DB",yOe="keyvaluestorage";let wOe=class{constructor(){this.indexedDb=fOe({driver:gOe({dbName:mOe,storeName:yOe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,Ad(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var pO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},DS={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof pO<"u"&&pO.localStorage?DS.exports=pO.localStorage:typeof window<"u"&&window.localStorage?DS.exports=window.localStorage:DS.exports=new e})();function bOe(t){var e;return[t[0],rm((e=t[1])!=null?e:"")]}let vOe=class{constructor(){this.localStorage=DS.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(bOe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return rm(n)}async setItem(e,n){this.localStorage.setItem(e,Ad(n))}async removeItem(e){this.localStorage.removeItem(e)}};const EOe="wc_storage_version",OF=1,COe=async(t,e,n)=>{const r=EOe,s=await e.getItem(r);if(s&&s>=OF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,OF),n(e),_Oe(t,o)},_Oe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let AOe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new vOe;this.storage=e;try{const n=new wOe;COe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var SOe=Object.defineProperty,xOe=(t,e,n)=>e in t?SOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,kF=(t,e,n)=>xOe(t,typeof e!="symbol"?e+"":e,n);let IOe=class extends km{constructor(e){super(),this.opts=e,kF(this,"protocol","wc"),kF(this,"version",2)}};var NOe=Object.defineProperty,TOe=(t,e,n)=>e in t?NOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ROe=(t,e,n)=>TOe(t,e+"",n);let POe=class extends km{constructor(e,n){super(),this.core=e,this.logger=n,ROe(this,"records",new Map)}},OOe=class{constructor(e,n){this.logger=e,this.core=n}},kOe=class extends km{constructor(e,n){super(),this.relayer=e,this.logger=n}},DOe=class extends km{constructor(e){super()}},MOe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},LOe=class extends km{constructor(e,n){super(),this.relayer=e,this.logger=n}},UOe=class extends km{constructor(e,n){super(),this.core=e,this.logger=n}},BOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},$Oe=class{constructor(e,n){this.projectId=e,this.logger=n}},FOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var jOe=Object.defineProperty,WOe=(t,e,n)=>e in t?jOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DF=(t,e,n)=>WOe(t,typeof e!="symbol"?e+"":e,n);let zOe=class{constructor(e){this.opts=e,DF(this,"protocol","wc"),DF(this,"version",2)}},HOe=class{constructor(e){this.client=e}};function n_(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function MF(t){return n_(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const JJ="2.23.2";let _v={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${JJ}`},TT=class s3 extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof s3?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof s3&&n.cause.docsPath||n.docsPath,i=(a=_v.getDocsUrl)==null?void 0:a.call(_v,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],..._v.version?[`Version: ${_v.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=JJ}walk(e){return ZJ(this,e)}};function ZJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?ZJ(t.cause,e):e?null:t}class XJ extends TT{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ub(t,{dir:e,size:n=32}={}){return typeof t=="string"?GOe(t,{dir:e,size:n}):qOe(t,{dir:e,size:n})}function GOe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new XJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function qOe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new XJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class VOe extends TT{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class KOe extends TT{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function Bb(t,{size:e}){if(MF(t)>e)throw new KOe({givenSize:MF(t),maxSize:e})}function i3(t,e={}){const{signed:n}=e;e.size&&Bb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function YOe(t,e={}){return Number(i3(t,e))}const QOe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function o3(t,e={}){return typeof t=="number"||typeof t=="bigint"?tZ(t,e):typeof t=="string"?XOe(t,e):typeof t=="boolean"?JOe(t,e):eZ(t,e)}function JOe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Bb(n,{size:e.size}),Ub(n,{size:e.size})):n}function eZ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=QOe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(Bb(r,{size:e.size}),Ub(r,{dir:"right",size:e.size})):r}function tZ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new VOe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Ub(a,{size:r}):a}const ZOe=new TextEncoder;function XOe(t,e={}){const n=ZOe.encode(t);return eZ(n,e)}const e2e=new TextEncoder;function t2e(t,e={}){return typeof t=="number"||typeof t=="bigint"?r2e(t,e):typeof t=="boolean"?n2e(t,e):n_(t)?nZ(t,e):rZ(t,e)}function n2e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Bb(n,{size:e.size}),Ub(n,{size:e.size})):n}const Cu={zero:48,nine:57,A:65,F:70,a:97,f:102};function LF(t){if(t>=Cu.zero&&t<=Cu.nine)return t-Cu.zero;if(t>=Cu.A&&t<=Cu.F)return t-(Cu.A-10);if(t>=Cu.a&&t<=Cu.f)return t-(Cu.a-10)}function nZ(t,e={}){let n=t;e.size&&(Bb(n,{size:e.size}),n=Ub(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=LF(r.charCodeAt(a++)),l=LF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new TT(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function r2e(t,e){const n=tZ(t,e);return nZ(n)}function rZ(t,e={}){const n=e2e.encode(t);return typeof e.size=="number"?(Bb(n,{size:e.size}),Ub(n,{dir:"right",size:e.size})):n}function EI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function s2e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function RT(t,...e){if(!s2e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function VVe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");EI(t.outputLen),EI(t.blockLen)}function UF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function i2e(t,e){RT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const LA=BigInt(2**32-1),BF=BigInt(32);function o2e(t,e=!1){return e?{h:Number(t&LA),l:Number(t>>BF&LA)}:{h:Number(t>>BF&LA)|0,l:Number(t&LA)|0}}function a2e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=o2e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const c2e=(t,e,n)=>t<<n|e>>>32-n,l2e=(t,e,n)=>e<<n|t>>>32-n,u2e=(t,e,n)=>e<<n-32|t>>>64-n,d2e=(t,e,n)=>t<<n-32|e>>>64-n,cy=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function h2e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function KVe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function YVe(t,e){return t<<32-e|t>>>e}const $F=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function f2e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function FF(t){for(let e=0;e<t.length;e++)t[e]=f2e(t[e])}function p2e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function sZ(t){return typeof t=="string"&&(t=p2e(t)),RT(t),t}function QVe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];RT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let g2e=class{clone(){return this._cloneInto()}};function m2e(t){const e=r=>t().update(sZ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ZVe(t=32){if(cy&&typeof cy.getRandomValues=="function")return cy.getRandomValues(new Uint8Array(t));if(cy&&typeof cy.randomBytes=="function")return cy.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const iZ=[],oZ=[],aZ=[],y2e=BigInt(0),Av=BigInt(1),w2e=BigInt(2),b2e=BigInt(7),v2e=BigInt(256),E2e=BigInt(113);for(let t=0,e=Av,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],iZ.push(2*(5*r+n)),oZ.push((t+1)*(t+2)/2%64);let s=y2e;for(let i=0;i<7;i++)e=(e<<Av^(e>>b2e)*E2e)%v2e,e&w2e&&(s^=Av<<(Av<<BigInt(i))-Av);aZ.push(s)}const[C2e,_2e]=a2e(aZ,!0),jF=(t,e,n)=>n>32?u2e(t,e,n):c2e(t,e,n),WF=(t,e,n)=>n>32?d2e(t,e,n):l2e(t,e,n);function A2e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=jF(l,u,1)^n[a],h=WF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=oZ[o],c=jF(s,i,a),l=WF(s,i,a),u=iZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=C2e[r],t[1]^=_2e[r]}n.fill(0)}let S2e=class cZ extends g2e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,EI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=h2e(this.state)}keccak(){$F||FF(this.state32),A2e(this.state32,this.rounds),$F||FF(this.state32),this.posOut=0,this.pos=0}update(e){UF(this);const{blockLen:n,state:r}=this;e=sZ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){UF(this,!1),RT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return EI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(i2e(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new cZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const x2e=(t,e,n)=>m2e(()=>new S2e(e,t,n)),I2e=x2e(1,136,256/8);function lZ(t,e){const n=e||"hex",r=I2e(n_(t,{strict:!1})?t2e(t):t);return n==="bytes"?r:o3(r)}class N2e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const gO=new N2e(8192);function T2e(t,e){if(gO.has(`${t}.${e}`))return gO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=lZ(rZ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return gO.set(`${t}.${e}`,i),i}function R2e(t){const e=lZ(`0x${t.substring(4)}`).substring(26);return T2e(`0x${e}`)}async function P2e({hash:t,signature:e}){const n=n_(t)?t:o3(t),{secp256k1:r}=await ai(async()=>{const{secp256k1:o}=await import("./secp256k1-DRNz8gbi.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=zF(f);return new r.Signature(i3(l),i3(u)).addRecoveryBit(p)}const o=n_(e)?e:o3(e),a=YOe(`0x${o.slice(130)}`),c=zF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function zF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function O2e({hash:t,signature:e}){return R2e(await P2e({hash:t,signature:e}))}var k2e={};const D2e=":";function w0(t){const[e,n]=t.split(D2e);return{namespace:e,reference:n}}function uZ(t,e){return t.includes(":")?[t]:e.chains||[]}var M2e=Object.defineProperty,L2e=Object.defineProperties,U2e=Object.getOwnPropertyDescriptors,HF=Object.getOwnPropertySymbols,B2e=Object.prototype.hasOwnProperty,$2e=Object.prototype.propertyIsEnumerable,GF=(t,e,n)=>e in t?M2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qF=(t,e)=>{for(var n in e||(e={}))B2e.call(e,n)&&GF(t,n,e[n]);if(HF)for(var n of HF(e))$2e.call(e,n)&&GF(t,n,e[n]);return t},F2e=(t,e)=>L2e(t,U2e(e));const j2e="ReactNative",ra={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},W2e="js";function CI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Yf(){return!sm()&&!!NU()&&navigator.product===j2e}function z2e(){return Yf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function H2e(){return Yf()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function $b(){return!CI()&&!!NU()&&!!sm()}function A1(){return Yf()?ra.reactNative:CI()?ra.node:$b()?ra.browser:ra.unknown}function VF(){var t;try{return Yf()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function G2e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function q2e(t){var e,n;const r=dZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),F2e(qF(qF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function dZ(){return TJ()||{name:"",description:"",url:"",icons:[""]}}function V2e(){if(A1()===ra.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=yIe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function K2e(){var t;const e=A1();return e===ra.browser?[e,((t=NJ())==null?void 0:t.host)||"unknown"].join(":"):e}function hZ(t,e,n){const r=V2e(),s=K2e();return[[t,e].join("-"),[W2e,n].join("-"),r,s].join("/")}function Y2e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=hZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=G2e(l[1]||"",d);return l[0]+"?"+h}function Qp(t,e){return t.filter(n=>e.includes(n)).length===t.length}function a3(t){return Object.fromEntries(t.entries())}function c3(t){return new Map(Object.entries(t))}function _p(t=_e.FIVE_MINUTES,e){const n=_e.toMiliseconds(t||_e.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Zh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function fZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Q2e(t){return fZ("topic",t)}function J2e(t){return fZ("id",t)}function pZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function Qr(t,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(t))}function fh(t){return Date.now()>=_e.toMiliseconds(t)}function Nn(t,e){return`${t}${e?`:${e}`:""}`}function Zl(t=[],e=[]){return[...new Set([...t,...e])]}async function Z2e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=X2e(i,t,e),a=A1();if(a===ra.browser){if(!((r=sm())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}eke(o)}else a===ra.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function X2e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${ske(r,!0)}`}else s=`${s}/wc?${r}`;return s}function eke(t){let e="_self";rke()?e="_top":(nke()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function tke(t,e){let n="";try{if($b()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function KF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function YF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function OU(){return typeof process<"u"&&k2e.IS_VITEST==="true"}function nke(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function rke(){try{return window.self!==window.top}catch{return!1}}function ske(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function gZ(t){return Buffer.from(t,"base64").toString("utf-8")}function ike(t){return new Promise(e=>setTimeout(e,t))}function r_(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function oke(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function S1(t,...e){if(!oke(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function kU(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");r_(t.outputLen),r_(t.blockLen)}function Qw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mZ(t,e){S1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const UA=BigInt(2**32-1),QF=BigInt(32);function ake(t,e=!1){return e?{h:Number(t&UA),l:Number(t>>QF&UA)}:{h:Number(t>>QF&UA)|0,l:Number(t&UA)|0}}function cke(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=ake(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const lke=(t,e,n)=>t<<n|e>>>32-n,uke=(t,e,n)=>e<<n|t>>>32-n,dke=(t,e,n)=>e<<n-32|t>>>64-n,hke=(t,e,n)=>t<<n-32|e>>>64-n,ly=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function fke(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function mO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function cl(t,e){return t<<32-e|t>>>e}const JF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function pke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function ZF(t){for(let e=0;e<t.length;e++)t[e]=pke(t[e])}function gke(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Jw(t){return typeof t=="string"&&(t=gke(t)),S1(t),t}function mke(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];S1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let DU=class{clone(){return this._cloneInto()}};function yZ(t){const e=r=>t().update(Jw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Fb(t=32){if(ly&&typeof ly.getRandomValues=="function")return ly.getRandomValues(new Uint8Array(t));if(ly&&typeof ly.randomBytes=="function")return ly.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const wZ=[],bZ=[],vZ=[],yke=BigInt(0),Sv=BigInt(1),wke=BigInt(2),bke=BigInt(7),vke=BigInt(256),Eke=BigInt(113);for(let t=0,e=Sv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],wZ.push(2*(5*r+n)),bZ.push((t+1)*(t+2)/2%64);let s=yke;for(let i=0;i<7;i++)e=(e<<Sv^(e>>bke)*Eke)%vke,e&wke&&(s^=Sv<<(Sv<<BigInt(i))-Sv);vZ.push(s)}const[Cke,_ke]=cke(vZ,!0),XF=(t,e,n)=>n>32?dke(t,e,n):lke(t,e,n),ej=(t,e,n)=>n>32?hke(t,e,n):uke(t,e,n);function Ake(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=XF(l,u,1)^n[a],h=ej(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=bZ[o],c=XF(s,i,a),l=ej(s,i,a),u=wZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=Cke[r],t[1]^=_ke[r]}n.fill(0)}let Ske=class EZ extends DU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,r_(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=fke(this.state)}keccak(){JF||ZF(this.state32),Ake(this.state32,this.rounds),JF||ZF(this.state32),this.posOut=0,this.pos=0}update(e){Qw(this);const{blockLen:n,state:r}=this;e=Jw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Qw(this,!1),S1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return r_(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new EZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const xke=(t,e,n)=>yZ(()=>new Ske(e,t,n)),Ike=xke(1,136,256/8),Nke="https://rpc.walletconnect.org/v1";function CZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(Ike(n)).toString("hex")}async function Tke(t,e,n,r,s,i){switch(n.t){case"eip191":return await Rke(t,e,n.s);case"eip1271":return await Pke(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function Rke(t,e,n){return(await O2e({hash:CZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Pke(t,e,n,r,s,i){const o=w0(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=CZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||Nke}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:Oke(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Oke(){return Date.now()+Math.floor(Math.random()*1e3)}function kke(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return RJ.encode(i)}var Dke=Object.defineProperty,Mke=Object.defineProperties,Lke=Object.getOwnPropertyDescriptors,tj=Object.getOwnPropertySymbols,Uke=Object.prototype.hasOwnProperty,Bke=Object.prototype.propertyIsEnumerable,nj=(t,e,n)=>e in t?Dke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,$ke=(t,e)=>{for(var n in e||(e={}))Uke.call(e,n)&&nj(t,n,e[n]);if(tj)for(var n of tj(e))Bke.call(e,n)&&nj(t,n,e[n]);return t},Fke=(t,e)=>Mke(t,Lke(e));const jke="did:pkh:",MU=t=>t==null?void 0:t.split(":"),Wke=t=>{const e=t&&MU(t);if(e)return t.includes(jke)?e[3]:e[1]},l3=t=>{const e=t&&MU(t);if(e)return e[2]+":"+e[3]},_I=t=>{const e=t&&MU(t);if(e)return e.pop()};async function rj(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=_Z(s,s.iss),o=_I(s.iss);return await Tke(o,i,r,l3(s.iss),n)}const _Z=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=_I(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Wke(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=MS(t.resources);if(p){const g=s_(p);s=Jke(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function zke(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Hke(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function cm(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Gke(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:qke(e,n,r)}}}function qke(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function AZ(t){return cm(t),`urn:recap:${zke(t).replace(/=/g,"")}`}function s_(t){const e=Hke(t.replace("urn:recap:",""));return cm(e),e}function Vke(t,e,n){const r=Gke(t,e,n);return AZ(r)}function Kke(t){return t&&t.includes("urn:recap:")}function Yke(t,e){const n=s_(t),r=s_(e),s=Qke(n,r);return AZ(s)}function Qke(t,e){cm(t),cm(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Fke($ke({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Jke(t="",e){cm(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function sj(t){var e;const n=s_(t);cm(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function ij(t){const e=s_(t);cm(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function MS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Kke(e)?e:void 0}function yO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function SZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ea(t,...e){if(!SZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function oj(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Zke(t,e){ea(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function aj(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const bf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Xke=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),eDe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!eDe)throw new Error("Non little-endian hardware is not supported");function tDe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function u3(t){if(typeof t=="string")t=tDe(t);else if(SZ(t))t=d3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function nDe(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function rDe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const sDe=(t,e)=>{function n(r,...s){if(ea(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?ea(l):ea(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&ea(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");ea(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,ea(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(ea(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function cj(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!iDe(e))throw new Error("invalid output, must be aligned");return e}function lj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function iDe(t){return t.byteOffset%4===0}function d3(t){return Uint8Array.from(t)}function Zw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const xZ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),oDe=xZ("expand 16-byte k"),aDe=xZ("expand 32-byte k"),cDe=bf(oDe),lDe=bf(aDe);function mn(t,e){return t<<e|t>>>32-e}function h3(t){return t.byteOffset%4===0}const BA=64,uDe=16,IZ=2**32-1,uj=new Uint32Array;function dDe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(BA),u=bf(l),d=h3(s)&&h3(i),h=d?bf(s):uj,f=d?bf(i):uj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=IZ)throw new Error("arx: counter overflow");const g=Math.min(BA,c-p);if(d&&g===BA){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let y=0,b;y<uDe;y++)b=w+y,f[b]=h[b]^u[y];p+=BA;continue}for(let w=0,y;w<g;w++)y=p+w,i[y]=s[y]^l[w];p+=g}}function hDe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=nDe({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return yO(s),yO(o),aj(i),aj(n),(a,c,l,u,d=0)=>{ea(a),ea(c),ea(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),ea(u),yO(d),d<0||d>=IZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=d3(a)),w=lDe;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=cDe,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);h3(c)||f.push(c=d3(c));const y=bf(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,y,bf(c.subarray(0,16)),y),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=bf(c);return dDe(t,w,y,v,l,u,d,o),Zw(...f),u}}const Ts=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class fDe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=u3(e),ea(e,32);const n=Ts(e,0),r=Ts(e,2),s=Ts(e,4),i=Ts(e,6),o=Ts(e,8),a=Ts(e,10),c=Ts(e,12),l=Ts(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Ts(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],y=Ts(e,n+0),b=Ts(e,n+2),v=Ts(e,n+4),A=Ts(e,n+6),C=Ts(e,n+8),N=Ts(e,n+10),x=Ts(e,n+12),T=Ts(e,n+14);let S=i[0]+(y&8191),D=i[1]+((y>>>13|b<<3)&8191),O=i[2]+((b>>>10|v<<6)&8191),$=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),I=i[6]+((C>>>14|N<<2)&8191),R=i[7]+((N>>>11|x<<5)&8191),B=i[8]+((x>>>8|T<<8)&8191),k=i[9]+(T>>>5|s),M=0,j=M+S*a+D*(5*w)+O*(5*g)+$*(5*p)+G*(5*f);M=j>>>13,j&=8191,j+=W*(5*h)+I*(5*d)+R*(5*u)+B*(5*l)+k*(5*c),M+=j>>>13,j&=8191;let q=M+S*c+D*a+O*(5*w)+$*(5*g)+G*(5*p);M=q>>>13,q&=8191,q+=W*(5*f)+I*(5*h)+R*(5*d)+B*(5*u)+k*(5*l),M+=q>>>13,q&=8191;let se=M+S*l+D*c+O*a+$*(5*w)+G*(5*g);M=se>>>13,se&=8191,se+=W*(5*p)+I*(5*f)+R*(5*h)+B*(5*d)+k*(5*u),M+=se>>>13,se&=8191;let ie=M+S*u+D*l+O*c+$*a+G*(5*w);M=ie>>>13,ie&=8191,ie+=W*(5*g)+I*(5*p)+R*(5*f)+B*(5*h)+k*(5*d),M+=ie>>>13,ie&=8191;let Y=M+S*d+D*u+O*l+$*c+G*a;M=Y>>>13,Y&=8191,Y+=W*(5*w)+I*(5*g)+R*(5*p)+B*(5*f)+k*(5*h),M+=Y>>>13,Y&=8191;let te=M+S*h+D*d+O*u+$*l+G*c;M=te>>>13,te&=8191,te+=W*a+I*(5*w)+R*(5*g)+B*(5*p)+k*(5*f),M+=te>>>13,te&=8191;let fe=M+S*f+D*h+O*d+$*u+G*l;M=fe>>>13,fe&=8191,fe+=W*c+I*a+R*(5*w)+B*(5*g)+k*(5*p),M+=fe>>>13,fe&=8191;let Xe=M+S*p+D*f+O*h+$*d+G*u;M=Xe>>>13,Xe&=8191,Xe+=W*l+I*c+R*a+B*(5*w)+k*(5*g),M+=Xe>>>13,Xe&=8191;let Le=M+S*g+D*p+O*f+$*h+G*d;M=Le>>>13,Le&=8191,Le+=W*u+I*l+R*c+B*a+k*(5*w),M+=Le>>>13,Le&=8191;let De=M+S*w+D*g+O*p+$*f+G*h;M=De>>>13,De&=8191,De+=W*d+I*u+R*l+B*c+k*a,M+=De>>>13,De&=8191,M=(M<<2)+M|0,M=M+j|0,j=M&8191,M=M>>>13,q+=M,i[0]=j,i[1]=q,i[2]=se,i[3]=ie,i[4]=Y,i[5]=te,i[6]=fe,i[7]=Xe,i[8]=Le,i[9]=De}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Zw(r)}update(e){oj(this);const{buffer:n,blockLen:r}=this;e=u3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Zw(this.h,this.r,this.buffer,this.pad)}digestInto(e){oj(this),Zke(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function pDe(t){const e=(r,s)=>t(s).update(u3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const gDe=pDe(t=>new fDe(t));function mDe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],y=e[7],b=s,v=n[0],A=n[1],C=n[2],N=o,x=a,T=c,S=l,D=u,O=d,$=h,G=f,W=p,I=g,R=w,B=y,k=b,M=v,j=A,q=C;for(let ie=0;ie<i;ie+=2)N=N+D|0,k=mn(k^N,16),W=W+k|0,D=mn(D^W,12),N=N+D|0,k=mn(k^N,8),W=W+k|0,D=mn(D^W,7),x=x+O|0,M=mn(M^x,16),I=I+M|0,O=mn(O^I,12),x=x+O|0,M=mn(M^x,8),I=I+M|0,O=mn(O^I,7),T=T+$|0,j=mn(j^T,16),R=R+j|0,$=mn($^R,12),T=T+$|0,j=mn(j^T,8),R=R+j|0,$=mn($^R,7),S=S+G|0,q=mn(q^S,16),B=B+q|0,G=mn(G^B,12),S=S+G|0,q=mn(q^S,8),B=B+q|0,G=mn(G^B,7),N=N+O|0,q=mn(q^N,16),R=R+q|0,O=mn(O^R,12),N=N+O|0,q=mn(q^N,8),R=R+q|0,O=mn(O^R,7),x=x+$|0,k=mn(k^x,16),B=B+k|0,$=mn($^B,12),x=x+$|0,k=mn(k^x,8),B=B+k|0,$=mn($^B,7),T=T+G|0,M=mn(M^T,16),W=W+M|0,G=mn(G^W,12),T=T+G|0,M=mn(M^T,8),W=W+M|0,G=mn(G^W,7),S=S+D|0,j=mn(j^S,16),I=I+j|0,D=mn(D^I,12),S=S+D|0,j=mn(j^S,8),I=I+j|0,D=mn(D^I,7);let se=0;r[se++]=o+N|0,r[se++]=a+x|0,r[se++]=c+T|0,r[se++]=l+S|0,r[se++]=u+D|0,r[se++]=d+O|0,r[se++]=h+$|0,r[se++]=f+G|0,r[se++]=p+W|0,r[se++]=g+I|0,r[se++]=w+R|0,r[se++]=y+B|0,r[se++]=b+k|0,r[se++]=v+M|0,r[se++]=A+j|0,r[se++]=C+q|0}const yDe=hDe(mDe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),wDe=new Uint8Array(16),dj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(wDe.subarray(n))},bDe=new Uint8Array(32);function hj(t,e,n,r,s){const i=t(e,n,bDe),o=gDe.create(i);s&&dj(o,s),dj(o,r);const a=new Uint8Array(16),c=Xke(a);lj(c,0,BigInt(s?s.length:0),!0),lj(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Zw(i,a),l}const vDe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=cj(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=hj(t,e,n,a,r);return i.set(c,o),Zw(c),i},decrypt(s,i){i=cj(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=hj(t,e,n,o,r);if(!rDe(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Zw(c),i}}),NZ=sDe({blockSize:64,nonceLength:12,tagLength:16},vDe(yDe));let TZ=class extends DU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,kU(e);const r=Jw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Qw(this),this.iHash.update(e),this}digestInto(e){Qw(this),S1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const PT=(t,e,n)=>new TZ(t,e).update(n).digest();PT.create=(t,e)=>new TZ(t,e);function EDe(t,e,n){return kU(t),n===void 0&&(n=new Uint8Array(t.outputLen)),PT(t,Jw(n),Jw(e))}const wO=new Uint8Array([0]),fj=new Uint8Array;function CDe(t,e,n,r=32){if(kU(t),r_(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=fj);const i=new Uint8Array(s*t.outputLen),o=PT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)wO[0]=l+1,a.update(l===0?fj:c).update(n).update(wO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),wO.fill(0),i.slice(0,r)}const _De=(t,e,n,r,s)=>CDe(t,EDe(t,e,n),r,s);function ADe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function SDe(t,e,n){return t&e^~t&n}function xDe(t,e,n){return t&e^t&n^e&n}let IDe=class extends DU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=mO(this.buffer)}update(e){Qw(this);const{view:n,buffer:r,blockLen:s}=this;e=Jw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=mO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Qw(this),mZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;ADe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=mO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const NDe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Jd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zd=new Uint32Array(64);class TDe extends IDe{constructor(){super(64,32,8,!1),this.A=Jd[0]|0,this.B=Jd[1]|0,this.C=Jd[2]|0,this.D=Jd[3]|0,this.E=Jd[4]|0,this.F=Jd[5]|0,this.G=Jd[6]|0,this.H=Jd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Zd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Zd[d-15],f=Zd[d-2],p=cl(h,7)^cl(h,18)^h>>>3,g=cl(f,17)^cl(f,19)^f>>>10;Zd[d]=g+Zd[d-7]+p+Zd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=cl(a,6)^cl(a,11)^cl(a,25),f=u+h+SDe(a,c,l)+NDe[d]+Zd[d]|0,p=(cl(r,2)^cl(r,13)^cl(r,22))+xDe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Zd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const x1=yZ(()=>new TDe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OT=BigInt(0),kT=BigInt(1),RDe=BigInt(2);function lm(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function I1(t){if(!lm(t))throw new Error("Uint8Array expected")}function Xw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const PDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function eb(t){I1(t);let e="";for(let n=0;n<t.length;n++)e+=PDe[t[n]];return e}function Zy(t){const e=t.toString(16);return e.length&1?"0"+e:e}function LU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?OT:BigInt("0x"+t)}const _u={_0:48,_9:57,A:65,F:70,a:97,f:102};function pj(t){if(t>=_u._0&&t<=_u._9)return t-_u._0;if(t>=_u.A&&t<=_u.F)return t-(_u.A-10);if(t>=_u.a&&t<=_u.f)return t-(_u.a-10)}function tb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=pj(t.charCodeAt(i)),a=pj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function Mg(t){return LU(eb(t))}function i_(t){return I1(t),LU(eb(Uint8Array.from(t).reverse()))}function nb(t,e){return tb(t.toString(16).padStart(e*2,"0"))}function DT(t,e){return nb(t,e).reverse()}function ODe(t){return tb(Zy(t))}function Zo(t,e,n){let r;if(typeof e=="string")try{r=tb(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(lm(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function o_(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];I1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function kDe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function DDe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const bO=t=>typeof t=="bigint"&&OT<=t;function MT(t,e,n){return bO(t)&&bO(e)&&bO(n)&&e<=t&&t<n}function ud(t,e,n,r){if(!MT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function RZ(t){let e;for(e=0;t>OT;t>>=kT,e+=1);return e}function MDe(t,e){return t>>BigInt(e)&kT}function LDe(t,e,n){return t|(n?kT:OT)<<BigInt(e)}const UU=t=>(RDe<<BigInt(t-1))-kT,vO=t=>new Uint8Array(t),gj=t=>Uint8Array.from(t);function PZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=vO(t),s=vO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=vO())=>{s=a(gj([0]),u),r=a(),u.length!==0&&(s=a(gj([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return o_(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const UDe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||lm(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function jb(t,e,n={}){const r=(s,i,o)=>{const a=UDe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const BDe=()=>{throw new Error("not implemented")};function f3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var $De=Object.freeze({__proto__:null,isBytes:lm,abytes:I1,abool:Xw,bytesToHex:eb,numberToHexUnpadded:Zy,hexToNumber:LU,hexToBytes:tb,bytesToNumberBE:Mg,bytesToNumberLE:i_,numberToBytesBE:nb,numberToBytesLE:DT,numberToVarBytesBE:ODe,ensureBytes:Zo,concatBytes:o_,equalBytes:kDe,utf8ToBytes:DDe,inRange:MT,aInRange:ud,bitLen:RZ,bitGet:MDe,bitSet:LDe,bitMask:UU,createHmacDrbg:PZ,validateObject:jb,notImplemented:BDe,memoized:f3});const _s=BigInt(0),$r=BigInt(1),Rp=BigInt(2),FDe=BigInt(3),p3=BigInt(4),mj=BigInt(5),yj=BigInt(8);function fo(t,e){const n=t%e;return n>=_s?n:e+n}function OZ(t,e,n){if(e<_s)throw new Error("invalid exponent, negatives unsupported");if(n<=_s)throw new Error("invalid modulus");if(n===$r)return _s;let r=$r;for(;e>_s;)e&$r&&(r=r*t%n),t=t*t%n,e>>=$r;return r}function mc(t,e,n){let r=t;for(;e-- >_s;)r*=r,r%=n;return r}function g3(t,e){if(t===_s)throw new Error("invert: expected non-zero number");if(e<=_s)throw new Error("invert: expected positive modulus, got "+e);let n=fo(t,e),r=e,s=_s,i=$r;for(;n!==_s;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==$r)throw new Error("invert: does not exist");return fo(s,e)}function jDe(t){const e=(t-$r)/Rp;let n,r,s;for(n=t-$r,r=0;n%Rp===_s;n/=Rp,r++);for(s=Rp;s<t&&OZ(s,e,t)!==t-$r;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+$r)/p3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+$r)/Rp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,$r<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function WDe(t){if(t%p3===FDe){const e=(t+$r)/p3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%yj===mj){const e=(t-mj)/yj;return function(n,r){const s=n.mul(r,Rp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,Rp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return jDe(t)}const zDe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function HDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=zDe.reduce((r,s)=>(r[s]="function",r),e);return jb(t,n)}function GDe(t,e,n){if(n<_s)throw new Error("invalid exponent, negatives unsupported");if(n===_s)return t.ONE;if(n===$r)return e;let r=t.ONE,s=e;for(;n>_s;)n&$r&&(r=t.mul(r,s)),s=t.sqr(s),n>>=$r;return r}function qDe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function kZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function DZ(t,e,n=!1,r={}){if(t<=_s)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=kZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:UU(s),ZERO:_s,ONE:$r,create:c=>fo(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return _s<=c&&c<t},is0:c=>c===_s,isOdd:c=>(c&$r)===$r,neg:c=>fo(-c,t),eql:(c,l)=>c===l,sqr:c=>fo(c*c,t),add:(c,l)=>fo(c+l,t),sub:(c,l)=>fo(c-l,t),mul:(c,l)=>fo(c*l,t),pow:(c,l)=>GDe(a,c,l),div:(c,l)=>fo(c*g3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>g3(c,t),sqrt:r.sqrt||(c=>(o||(o=WDe(t)),o(a,c))),invertBatch:c=>qDe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?DT(c,i):nb(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?i_(c):Mg(c)}});return Object.freeze(a)}function MZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function LZ(t){const e=MZ(t);return e+Math.ceil(e/2)}function VDe(t,e,n=!1){const r=t.length,s=MZ(e),i=LZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?i_(t):Mg(t),a=fo(o,e-$r)+$r;return n?DT(a,s):nb(a,s)}const wj=BigInt(0),$A=BigInt(1);function EO(t,e){const n=e.negate();return t?n:e}function UZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function CO(t,e){UZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function KDe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function YDe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const _O=new WeakMap,BZ=new WeakMap;function AO(t){return BZ.get(t)||1}function QDe(t,e){return{constTimeNegate:EO,hasPrecomputes(n){return AO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>wj;)r&$A&&(s=s.add(i)),i=i.double(),r>>=$A;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=CO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=CO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=$A);const g=f,w=f+Math.abs(p)-1,y=h%2!==0,b=p<0;p===0?c=c.add(EO(y,r[g])):a=a.add(EO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=CO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===wj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=$A),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=_O.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&_O.set(r,s(i))),i},wNAFCached(n,r,s){const i=AO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=AO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){UZ(r,e),BZ.set(n,r),_O.delete(n)}}}function JDe(t,e,n,r){if(KDe(n,t),YDe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=RZ(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function $Z(t){return HDe(t.Fp),jb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...kZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const uy=BigInt(0),SO=BigInt(1);function ZDe(t){return jb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function XDe(t){const e=ZDe(t),{P:n}=e,r=b=>fo(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>OZ(b,n-BigInt(2),n));function l(b,v,A){const C=r(b*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){ud("u",b,uy,n),ud("scalar",v,uy,n);const A=v,C=b;let N=SO,x=uy,T=b,S=SO,D=uy,O;for(let G=BigInt(s-1);G>=uy;G--){const W=A>>G&SO;D^=W,O=l(D,N,T),N=O[0],T=O[1],O=l(D,x,S),x=O[0],S=O[1],D=W;const I=N+x,R=r(I*I),B=N-x,k=r(B*B),M=R-k,j=T+S,q=T-S,se=r(q*I),ie=r(j*B),Y=se+ie,te=se-ie;T=r(Y*Y),S=r(C*r(te*te)),N=r(R*k),x=r(M*(R+r(u*M)))}O=l(D,N,T),N=O[0],T=O[1],O=l(D,x,S),x=O[0],S=O[1];const $=c(x);return r(N*$)}function h(b){return DT(r(b),i)}function f(b){const v=Zo("u coordinate",b,i);return o===32&&(v[31]&=127),i_(v)}function p(b){const v=Zo("scalar",b),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return i_(a(v))}function g(b,v){const A=f(v),C=p(b),N=d(A,C);if(N===uy)throw new Error("invalid private or public key received");return h(N)}const w=h(e.Gu);function y(b){return g(b,w)}return{scalarMult:g,scalarMultBase:y,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>y(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const m3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const e3e=BigInt(1),bj=BigInt(2),t3e=BigInt(3),n3e=BigInt(5);BigInt(8);function r3e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=m3,o=t*t%i*t%i,a=mc(o,bj,i)*o%i,c=mc(a,e3e,i)*t%i,l=mc(c,n3e,i)*c%i,u=mc(l,e,i)*l%i,d=mc(u,n,i)*u%i,h=mc(d,r,i)*d%i,f=mc(h,s,i)*h%i,p=mc(f,s,i)*h%i,g=mc(p,e,i)*l%i;return{pow_p_5_8:mc(g,bj,i)*t%i,b2:o}}function s3e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const y3=XDe({P:m3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=m3,{pow_p_5_8:n,b2:r}=r3e(t);return fo(mc(n,t3e,e)*r,e)},adjustScalarBytes:s3e,randomBytes:Fb});function vj(t){t.lowS!==void 0&&Xw("lowS",t.lowS),t.prehash!==void 0&&Xw("prehash",t.prehash)}function i3e(t){const e=$Z(t);jb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:o3e,hexToBytes:a3e}=$De;class c3e extends Error{constructor(e=""){super(e)}}const Du={Err:c3e,_tlv:{encode:(t,e)=>{const{Err:n}=Du;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Zy(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Zy(s.length/2|128):"";return Zy(t)+i+s+e},decode(t,e){const{Err:n}=Du;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=Du;if(t<Qu)throw new e("integer: negative integers are not allowed");let n=Zy(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=Du;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return o3e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=Du,s=typeof t=="string"?a3e(t):t;I1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=Du,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Qu=BigInt(0),hs=BigInt(1);BigInt(2);const Ej=BigInt(3);BigInt(4);function l3e(t){const e=i3e(t),{Fp:n}=e,r=DZ(e.n,e.nBitLength),s=e.toBytes||((g,w,y)=>{const b=w.toAffine();return o_(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),y=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:y,y:b}});function o(g){const{a:w,b:y}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),y)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return MT(g,hs,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:y,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if(lm(g)&&(g=eb(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(y*2,"0")}let A;try{A=typeof g=="bigint"?g:Mg(Zo("private key",g,y))}catch{throw new Error("invalid private key, expected hex or "+y+" bytes, got "+typeof g)}return b&&(A=fo(A,v)),ud("private key",A,hs,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=f3((g,w)=>{const{px:y,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:y,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const C=n.mul(y,w),N=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:N}}),d=f3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y}=g.toAffine();if(!n.isValid(w)||!n.isValid(y))throw new Error("bad point: x or y not FE");const b=n.sqr(y),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,y,b){if(this.px=w,this.py=y,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(y==null||!n.isValid(y))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:y,y:b}=w||{};if(!w||!n.isValid(y)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(y)&&v(b)?h.ZERO:new h(y,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(h.fromAffine)}static fromHex(w){const y=h.fromAffine(i(Zo("pointHex",w)));return y.assertValidity(),y}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,y){return JDe(h,r,w,y)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:C,pz:N}=w,x=n.eql(n.mul(y,N),n.mul(A,v)),T=n.eql(n.mul(b,N),n.mul(C,v));return x&&T}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:y}=e,b=n.mul(y,Ej),{px:v,py:A,pz:C}=this;let N=n.ZERO,x=n.ZERO,T=n.ZERO,S=n.mul(v,v),D=n.mul(A,A),O=n.mul(C,C),$=n.mul(v,A);return $=n.add($,$),T=n.mul(v,C),T=n.add(T,T),N=n.mul(w,T),x=n.mul(b,O),x=n.add(N,x),N=n.sub(D,x),x=n.add(D,x),x=n.mul(N,x),N=n.mul($,N),T=n.mul(b,T),O=n.mul(w,O),$=n.sub(S,O),$=n.mul(w,$),$=n.add($,T),T=n.add(S,S),S=n.add(T,S),S=n.add(S,O),S=n.mul(S,$),x=n.add(x,S),O=n.mul(A,C),O=n.add(O,O),S=n.mul(O,$),N=n.sub(N,S),T=n.mul(O,D),T=n.add(T,T),T=n.add(T,T),new h(N,x,T)}add(w){l(w);const{px:y,py:b,pz:v}=this,{px:A,py:C,pz:N}=w;let x=n.ZERO,T=n.ZERO,S=n.ZERO;const D=e.a,O=n.mul(e.b,Ej);let $=n.mul(y,A),G=n.mul(b,C),W=n.mul(v,N),I=n.add(y,b),R=n.add(A,C);I=n.mul(I,R),R=n.add($,G),I=n.sub(I,R),R=n.add(y,v);let B=n.add(A,N);return R=n.mul(R,B),B=n.add($,W),R=n.sub(R,B),B=n.add(b,v),x=n.add(C,N),B=n.mul(B,x),x=n.add(G,W),B=n.sub(B,x),S=n.mul(D,R),x=n.mul(O,W),S=n.add(x,S),x=n.sub(G,S),S=n.add(G,S),T=n.mul(x,S),G=n.add($,$),G=n.add(G,$),W=n.mul(D,W),R=n.mul(O,R),G=n.add(G,W),W=n.sub($,W),W=n.mul(D,W),R=n.add(R,W),$=n.mul(G,R),T=n.add(T,$),$=n.mul(B,R),x=n.mul(I,x),x=n.sub(x,$),$=n.mul(I,G),S=n.mul(B,S),S=n.add(S,$),new h(x,T,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:y,n:b}=e;ud("scalar",w,Qu,b);const v=h.ZERO;if(w===Qu)return v;if(this.is0()||w===hs)return this;if(!y||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:C,k2neg:N,k2:x}=y.splitScalar(w),T=v,S=v,D=this;for(;C>Qu||x>Qu;)C&hs&&(T=T.add(D)),x&hs&&(S=S.add(D)),D=D.double(),C>>=hs,x>>=hs;return A&&(T=T.negate()),N&&(S=S.negate()),S=new h(n.mul(S.px,y.beta),S.py,S.pz),T.add(S)}multiply(w){const{endo:y,n:b}=e;ud("scalar",w,hs,b);let v,A;if(y){const{k1neg:C,k1:N,k2neg:x,k2:T}=y.splitScalar(w);let{p:S,f:D}=this.wNAF(N),{p:O,f:$}=this.wNAF(T);S=p.constTimeNegate(C,S),O=p.constTimeNegate(x,O),O=new h(n.mul(O.px,y.beta),O.py,O.pz),v=S.add(O),A=D.add($)}else{const{p:C,f:N}=this.wNAF(w);v=C,A=N}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,y,b){const v=h.BASE,A=(N,x)=>x===Qu||x===hs||!N.equals(v)?N.multiplyUnsafe(x):N.multiply(x),C=A(this,y).add(A(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:y}=e;if(w===hs)return!0;if(y)return y(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:y}=e;return w===hs?this:y?y(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Xw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return Xw("isCompressed",w),eb(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=QDe(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function u3e(t){const e=$Z(t);return jb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function d3e(t){const e=u3e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return fo(W,r)}function a(W){return g3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=l3e({...e,toBytes(W,I,R){const B=I.toAffine(),k=n.toBytes(B.x),M=o_;return Xw("isCompressed",R),R?M(Uint8Array.from([I.hasEvenY()?2:3]),k):M(Uint8Array.from([4]),k,n.toBytes(B.y))},fromBytes(W){const I=W.length,R=W[0],B=W.subarray(1);if(I===s&&(R===2||R===3)){const k=Mg(B);if(!MT(k,hs,n.ORDER))throw new Error("Point is not on curve");const M=u(k);let j;try{j=n.sqrt(M)}catch(se){const ie=se instanceof Error?": "+se.message:"";throw new Error("Point is not on curve"+ie)}const q=(j&hs)===hs;return(R&1)===1!==q&&(j=n.neg(j)),{x:k,y:j}}else if(I===i&&R===4){const k=n.fromBytes(B.subarray(0,n.BYTES)),M=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:k,y:M}}else{const k=s,M=i;throw new Error("invalid Point, expected length of "+k+", or uncompressed "+M+", got "+I)}}}),h=W=>eb(nb(W,e.nByteLength));function f(W){const I=r>>hs;return W>I}function p(W){return f(W)?o(-W):W}const g=(W,I,R)=>Mg(W.slice(I,R));class w{constructor(I,R,B){this.r=I,this.s=R,this.recovery=B,this.assertValidity()}static fromCompact(I){const R=e.nByteLength;return I=Zo("compactSignature",I,R*2),new w(g(I,0,R),g(I,R,2*R))}static fromDER(I){const{r:R,s:B}=Du.toSig(Zo("DER",I));return new w(R,B)}assertValidity(){ud("r",this.r,hs,r),ud("s",this.s,hs,r)}addRecoveryBit(I){return new w(this.r,this.s,I)}recoverPublicKey(I){const{r:R,s:B,recovery:k}=this,M=N(Zo("msgHash",I));if(k==null||![0,1,2,3].includes(k))throw new Error("recovery id invalid");const j=k===2||k===3?R+e.n:R;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const q=k&1?"03":"02",se=c.fromHex(q+h(j)),ie=a(j),Y=o(-M*ie),te=o(B*ie),fe=c.BASE.multiplyAndAddUnsafe(se,Y,te);if(!fe)throw new Error("point at infinify");return fe.assertValidity(),fe}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return tb(this.toDERHex())}toDERHex(){return Du.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return tb(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const y={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=LZ(e.n);return VDe(e.randomBytes(W),e.n)},precompute(W=8,I=c.BASE){return I._setWindowSize(W),I.multiply(BigInt(3)),I}};function b(W,I=!0){return c.fromPrivateKey(W).toRawBytes(I)}function v(W){const I=lm(W),R=typeof W=="string",B=(I||R)&&W.length;return I?B===s||B===i:R?B===2*s||B===2*i:W instanceof c}function A(W,I,R=!0){if(v(W))throw new Error("first arg must be private key");if(!v(I))throw new Error("second arg must be public key");return c.fromHex(I).multiply(l(W)).toRawBytes(R)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const I=Mg(W),R=W.length*8-e.nBitLength;return R>0?I>>BigInt(R):I},N=e.bits2int_modN||function(W){return o(C(W))},x=UU(e.nBitLength);function T(W){return ud("num < 2^"+e.nBitLength,W,Qu,x),nb(W,e.nByteLength)}function S(W,I,R=D){if(["recovered","canonical"].some(Le=>Le in R))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:k}=e;let{lowS:M,prehash:j,extraEntropy:q}=R;M==null&&(M=!0),W=Zo("msgHash",W),vj(R),j&&(W=Zo("prehashed msgHash",B(W)));const se=N(W),ie=l(I),Y=[T(ie),T(se)];if(q!=null&&q!==!1){const Le=q===!0?k(n.BYTES):q;Y.push(Zo("extraEntropy",Le))}const te=o_(...Y),fe=se;function Xe(Le){const De=C(Le);if(!d(De))return;const wt=a(De),Mt=c.BASE.multiply(De).toAffine(),ln=o(Mt.x);if(ln===Qu)return;const X=o(wt*o(fe+ln*ie));if(X===Qu)return;let ce=(Mt.x===ln?0:2)|Number(Mt.y&hs),de=X;return M&&f(X)&&(de=p(X),ce^=1),new w(ln,de,ce)}return{seed:te,k2sig:Xe}}const D={lowS:e.lowS,prehash:!1},O={lowS:e.lowS,prehash:!1};function $(W,I,R=D){const{seed:B,k2sig:k}=S(W,I,R),M=e;return PZ(M.hash.outputLen,M.nByteLength,M.hmac)(B,k)}c.BASE._setWindowSize(8);function G(W,I,R,B=O){var X;const k=W;I=Zo("msgHash",I),R=Zo("publicKey",R);const{lowS:M,prehash:j,format:q}=B;if(vj(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(q!==void 0&&q!=="compact"&&q!=="der")throw new Error("format must be compact or der");const se=typeof k=="string"||lm(k),ie=!se&&!q&&typeof k=="object"&&k!==null&&typeof k.r=="bigint"&&typeof k.s=="bigint";if(!se&&!ie)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Y,te;try{if(ie&&(Y=new w(k.r,k.s)),se){try{q!=="compact"&&(Y=w.fromDER(k))}catch(ce){if(!(ce instanceof Du.Err))throw ce}!Y&&q!=="der"&&(Y=w.fromCompact(k))}te=c.fromHex(R)}catch{return!1}if(!Y||M&&Y.hasHighS())return!1;j&&(I=e.hash(I));const{r:fe,s:Xe}=Y,Le=N(I),De=a(Xe),wt=o(Le*De),Mt=o(fe*De),ln=(X=c.BASE.multiplyAndAddUnsafe(te,wt,Mt))==null?void 0:X.toAffine();return ln?o(ln.x)===fe:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:$,verify:G,ProjectivePoint:c,Signature:w,utils:y}}function h3e(t){return{hash:t,hmac:(e,...n)=>PT(t,e,mke(...n)),randomBytes:Fb}}function f3e(t,e){const n=r=>d3e({...t,...h3e(r)});return{...n(e),create:n}}const FZ=DZ(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),p3e=FZ.create(BigInt("-3")),g3e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),m3e=f3e({a:p3e,b:g3e,Fp:FZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},x1),jZ="base10",Mi="base16",jc="base64pad",bh="base64url",N1="utf8",WZ=0,dd=1,T1=2,y3e=0,Cj=1,kE=12,BU=32;function w3e(){const t=y3.utils.randomPrivateKey(),e=y3.getPublicKey(t);return{privateKey:xo(t,Mi),publicKey:xo(e,Mi)}}function w3(){const t=Fb(BU);return xo(t,Mi)}function b3e(t,e){const n=y3.getSharedSecret(Ga(t,Mi),Ga(e,Mi)),r=_De(x1,n,void 0,void 0,BU);return xo(r,Mi)}function LS(t){const e=x1(Ga(t,Mi));return xo(e,Mi)}function Dl(t){const e=x1(Ga(t,N1));return xo(e,Mi)}function zZ(t){return Ga(`${t}`,jZ)}function um(t){return Number(xo(t,jZ))}function HZ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function GZ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function v3e(t){const e=zZ(typeof t.type<"u"?t.type:WZ);if(um(e)===dd&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ga(t.senderPublicKey,Mi):void 0,r=typeof t.iv<"u"?Ga(t.iv,Mi):Fb(kE),s=Ga(t.symKey,Mi),i=NZ(s,r).encrypt(Ga(t.message,N1)),o=qZ({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===bh?HZ(o):o}function E3e(t){const e=Ga(t.symKey,Mi),{sealed:n,iv:r}=a_({encoded:t.encoded,encoding:t.encoding}),s=NZ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return xo(s,N1)}function C3e(t,e){const n=zZ(T1),r=Fb(kE),s=Ga(t,N1),i=qZ({type:n,sealed:s,iv:r});return e===bh?HZ(i):i}function _3e(t,e){const{sealed:n}=a_({encoded:t,encoding:e});return xo(n,N1)}function qZ(t){if(um(t.type)===T1)return xo(RE([t.type,t.sealed]),jc);if(um(t.type)===dd){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return xo(RE([t.type,t.senderPublicKey,t.iv,t.sealed]),jc)}return xo(RE([t.type,t.iv,t.sealed]),jc)}function a_(t){const e=(t.encoding||jc)===bh?GZ(t.encoded):t.encoded,n=Ga(e,jc),r=n.slice(y3e,Cj),s=Cj;if(um(r)===dd){const c=s+BU,l=c+kE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(um(r)===T1){const c=n.slice(s),l=Fb(kE);return{type:r,sealed:c,iv:l}}const i=s+kE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function A3e(t,e){const n=a_({encoded:t,encoding:e==null?void 0:e.encoding});return VZ({type:um(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?xo(n.senderPublicKey,Mi):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function VZ(t){const e=(t==null?void 0:t.type)||WZ;if(e===dd){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function _j(t){return t.type===dd&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Aj(t){return t.type===T1}function S3e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return RE([new Uint8Array([4]),e,n])}function x3e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(GZ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=x1(c),u=S3e(e);if(!m3e.verify(RE([o,a]),l,u))throw new Error("Invalid signature");return KD(t).payload}const I3e="irn";function AI(t){return(t==null?void 0:t.relay)||{protocol:I3e}}function Vv(t){const e=ONe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function N3e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function Sj(t){if(!t.includes("wc:")){const l=gZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:T3e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:N3e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function T3e(t){return t.startsWith("//")?t.substring(2):t}function R3e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function xj(t){const e=new URLSearchParams,n=R3e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function FA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var P3e=Object.defineProperty,O3e=Object.defineProperties,k3e=Object.getOwnPropertyDescriptors,Ij=Object.getOwnPropertySymbols,D3e=Object.prototype.hasOwnProperty,M3e=Object.prototype.propertyIsEnumerable,Nj=(t,e,n)=>e in t?P3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L3e=(t,e)=>{for(var n in e||(e={}))D3e.call(e,n)&&Nj(t,n,e[n]);if(Ij)for(var n of Ij(e))M3e.call(e,n)&&Nj(t,n,e[n]);return t},U3e=(t,e)=>O3e(t,k3e(e));function Wb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function B3e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Wb(n.accounts))}),e}function $3e(t,e){const n=[];return Object.values(t).forEach(r=>{Wb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function F3e(t,e){const n=[];return Object.values(t).forEach(r=>{Wb(r.accounts).includes(e)&&n.push(...r.events)}),n}function LT(t){return t.includes(":")}function Xy(t){return LT(t)?t.split(":")[0]:t}function Tj(t){var e,n,r;const s={};if(!Ef(t))return s;for(const[i,o]of Object.entries(t)){const a=LT(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Xy(i);s[u]=U3e(L3e({},s[u]),{chains:Zl(a,(e=s[u])==null?void 0:e.chains),methods:Zl(c,(n=s[u])==null?void 0:n.methods),events:Zl(l,(r=s[u])==null?void 0:r.events)})}return s}function j3e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function Rj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=j3e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Zl(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function W3e(t,e){var n,r,s,i,o,a;const c=Tj(t),l=Tj(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Zl((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Zl((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Zl((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const z3e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},H3e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(t,e){const{message:n,code:r}=H3e[t];return{message:e?`${n} ${e}`:n,code:r}}function Fn(t,e){const{message:n,code:r}=z3e[t];return{message:e?`${n} ${e}`:n,code:r}}function vf(t,e){return!!Array.isArray(t)}function Ef(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Us(t){return typeof t>"u"}function Hr(t,e){return e&&Us(t)?!0:typeof t=="string"&&!!t.trim().length}function $U(t,e){return e&&Us(t)?!0:typeof t=="number"&&!isNaN(t)}function G3e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Qp(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=Wb(a),d=n[o];(!Qp(uZ(o,d),u)||!Qp(d.methods,c)||!Qp(d.events,l))&&(i=!1)}),i):!1}function SI(t){return Hr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function q3e(t){if(Hr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&SI(n)}}return!1}function V3e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Hr(t,!1)){if(e(t))return!0;const n=gZ(t);return e(n)}}catch{}return!1}function K3e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function Y3e(t){return t==null?void 0:t.topic}function Q3e(t,e){let n=null;return Hr(t==null?void 0:t.publicKey,!1)||(n=xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function Pj(t){let e=!0;return vf(t)?t.length&&(e=t.every(n=>Hr(n,!1))):e=!1,e}function J3e(t,e,n){let r=null;return vf(e)&&e.length?e.forEach(s=>{r||SI(s)||(r=Fn("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):SI(t)||(r=Fn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function Z3e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=J3e(s,uZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function X3e(t,e){let n=null;return vf(t)?t.forEach(r=>{n||q3e(r)||(n=Fn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=Fn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function eMe(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=X3e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function tMe(t,e){let n=null;return Pj(t==null?void 0:t.methods)?Pj(t==null?void 0:t.events)||(n=Fn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=Fn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function KZ(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=tMe(r,`${e}, namespace`);s&&(n=s)}),n}function nMe(t,e,n){let r=null;if(t&&Ef(t)){const s=KZ(t,e);s&&(r=s);const i=Z3e(t,e,n);i&&(r=i)}else r=xe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function xO(t,e){let n=null;if(t&&Ef(t)){const r=KZ(t,e);r&&(n=r);const s=eMe(t,e);s&&(n=s)}else n=xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function YZ(t){return Hr(t.protocol,!0)}function rMe(t,e){let n=!1;return t?t&&vf(t)&&t.length&&t.forEach(r=>{n=YZ(r)}):n=!0,n}function sMe(t){return typeof t=="number"}function ro(t){return typeof t<"u"&&typeof t!==null}function iMe(t){return!(!t||typeof t!="object"||!t.code||!$U(t.code,!1)||!t.message||!Hr(t.message,!1))}function oMe(t){return!(Us(t)||!Hr(t.method,!1))}function aMe(t){return!(Us(t)||Us(t.result)&&Us(t.error)||!$U(t.id,!1)||!Hr(t.jsonrpc,!1))}function cMe(t){return!(Us(t)||!Hr(t.name,!1))}function Oj(t,e){return!(!SI(e)||!B3e(t).includes(e))}function lMe(t,e,n){return Hr(n,!1)?$3e(t,e).includes(n):!1}function uMe(t,e,n){return Hr(n,!1)?F3e(t,e).includes(n):!1}function kj(t,e,n){let r=null;const s=dMe(t),i=hMe(e),o=Object.keys(s),a=Object.keys(i),c=Dj(Object.keys(t)),l=Dj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Qp(o,a)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=Wb(e[d].accounts);h.includes(d)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Qp(s[d].methods,i[d].methods)?Qp(s[d].events,i[d].events)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function dMe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function Dj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function hMe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Wb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function fMe(t,e){return $U(t,!1)&&t<=e.max&&t>=e.min}function Mj(){const t=A1();return new Promise(e=>{switch(t){case ra.browser:e(pMe());break;case ra.reactNative:e(gMe());break;case ra.node:e(mMe());break;default:e(!0)}})}function pMe(){return $b()&&(navigator==null?void 0:navigator.onLine)}async function gMe(){if(Yf()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function mMe(){return!0}function yMe(t){switch(A1()){case ra.browser:wMe(t);break;case ra.reactNative:bMe(t);break}}function wMe(t){!Yf()&&$b()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function bMe(t){Yf()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function vMe(){var t;return $b()&&sm()?((t=sm())==null?void 0:t.visibilityState)==="visible":!0}const IO={};class xv{static get(e){return IO[e]}static set(e,n){IO[e]=n}static delete(e){delete IO[e]}}var EMe={};const QZ="wc",JZ=2,b3="core",au=`${QZ}@2:${b3}:`,CMe={logger:"error"},_Me={database:":memory:"},AMe="crypto",Lj="client_ed25519_seed",SMe=_e.ONE_DAY,xMe="keychain",IMe="0.3",NMe="messages",TMe="0.3",Uj=_e.SIX_HOURS,RMe="publisher",ZZ="irn",PMe="error",XZ="wss://relay.walletconnect.org",OMe="relayer",ws={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},kMe="_subscription",Ca={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},DMe=.1,v3="2.21.0",or={link_mode:"link_mode",relay:"relay"},US={inbound:"inbound",outbound:"outbound"},MMe="0.3",LMe="WALLETCONNECT_CLIENT_ID",Bj="WALLETCONNECT_LINK_MODE_APPS",Ho={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},UMe="subscription",BMe="0.3",$Me="pairing",FMe="0.3",Iv={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},Pp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},hc={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},jMe="history",WMe="0.3",zMe="expirer",Na={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},HMe="0.3",GMe="verify-api",qMe="https://verify.walletconnect.com",eX="https://verify.walletconnect.org",DE=eX,VMe=`${DE}/v3`,KMe=[qMe,eX],YMe="echo",QMe="https://echo.walletconnect.com",pl={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Iu={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},fc={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},hp={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},fp={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Nv={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},JMe=.1,ZMe="event-client",XMe=86400,e5e="https://pulse.walletconnect.org/batch";function t5e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,y=0,b=p.length;y!==b&&p[y]===0;)y++,g++;for(var v=(b-y)*u+1>>>0,A=new Uint8Array(v);y!==b;){for(var C=p[y],N=0,x=v-1;(C!==0||N<w)&&x!==-1;x--,N++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=N,y++}for(var T=v-w;T!==v&&A[T]===0;)T++;for(var S=c.repeat(g);T<v;++T)S+=t.charAt(A[T]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,y=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,N=b-1;(A!==0||C<y)&&N!==-1;N--,C++)A+=a*v[N]>>>0,v[N]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");y=C,g++}if(p[g]!==" "){for(var x=b-y;x!==b&&v[x]===0;)x++;for(var T=new Uint8Array(w+(b-x)),S=w;x!==b;)T[S++]=v[x++];return T}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var n5e=t5e,r5e=n5e;const tX=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},s5e=t=>new TextEncoder().encode(t),i5e=t=>new TextDecoder().decode(t);class o5e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class a5e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nX(this,e)}}class c5e{constructor(e){this.decoders=e}or(e){return nX(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nX=(t,e)=>new c5e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class l5e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new o5e(e,n,r),this.decoder=new a5e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const UT=({name:t,prefix:e,encode:n,decode:r})=>new l5e(t,e,n,r),R1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=r5e(n,e);return UT({prefix:t,name:e,encode:r,decode:i=>tX(s(i))})},u5e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},d5e=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ys=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>UT({prefix:e,name:t,encode(s){return d5e(s,r,n)},decode(s){return u5e(s,r,n,t)}}),h5e=UT({prefix:"\0",name:"identity",encode:t=>i5e(t),decode:t=>s5e(t)});var f5e=Object.freeze({__proto__:null,identity:h5e});const p5e=Ys({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var g5e=Object.freeze({__proto__:null,base2:p5e});const m5e=Ys({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var y5e=Object.freeze({__proto__:null,base8:m5e});const w5e=R1({prefix:"9",name:"base10",alphabet:"0123456789"});var b5e=Object.freeze({__proto__:null,base10:w5e});const v5e=Ys({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),E5e=Ys({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var C5e=Object.freeze({__proto__:null,base16:v5e,base16upper:E5e});const _5e=Ys({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),A5e=Ys({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),S5e=Ys({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),x5e=Ys({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),I5e=Ys({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),N5e=Ys({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),T5e=Ys({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),R5e=Ys({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),P5e=Ys({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var O5e=Object.freeze({__proto__:null,base32:_5e,base32upper:A5e,base32pad:S5e,base32padupper:x5e,base32hex:I5e,base32hexupper:N5e,base32hexpad:T5e,base32hexpadupper:R5e,base32z:P5e});const k5e=R1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),D5e=R1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var M5e=Object.freeze({__proto__:null,base36:k5e,base36upper:D5e});const L5e=R1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),U5e=R1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var B5e=Object.freeze({__proto__:null,base58btc:L5e,base58flickr:U5e});const $5e=Ys({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),F5e=Ys({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),j5e=Ys({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),W5e=Ys({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var z5e=Object.freeze({__proto__:null,base64:$5e,base64pad:F5e,base64url:j5e,base64urlpad:W5e});const rX=Array.from(""),H5e=rX.reduce((t,e,n)=>(t[n]=e,t),[]),G5e=rX.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function q5e(t){return t.reduce((e,n)=>(e+=H5e[n],e),"")}function V5e(t){const e=[];for(const n of t){const r=G5e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const K5e=UT({prefix:"",name:"base256emoji",encode:q5e,decode:V5e});var Y5e=Object.freeze({__proto__:null,base256emoji:K5e}),Q5e=sX,$j=128,J5e=-128,Z5e=Math.pow(2,31);function sX(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Z5e;)e[n++]=t&255|$j,t/=128;for(;t&J5e;)e[n++]=t&255|$j,t>>>=7;return e[n]=t|0,sX.bytes=n-r+1,e}var X5e=E3,eLe=128,Fj=127;function E3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw E3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Fj)<<s:(o&Fj)*Math.pow(2,s),s+=7}while(o>=eLe);return E3.bytes=i-r,n}var tLe=Math.pow(2,7),nLe=Math.pow(2,14),rLe=Math.pow(2,21),sLe=Math.pow(2,28),iLe=Math.pow(2,35),oLe=Math.pow(2,42),aLe=Math.pow(2,49),cLe=Math.pow(2,56),lLe=Math.pow(2,63),uLe=function(t){return t<tLe?1:t<nLe?2:t<rLe?3:t<sLe?4:t<iLe?5:t<oLe?6:t<aLe?7:t<cLe?8:t<lLe?9:10},dLe={encode:Q5e,decode:X5e,encodingLength:uLe},iX=dLe;const jj=(t,e,n=0)=>(iX.encode(t,e,n),e),Wj=t=>iX.encodingLength(t),C3=(t,e)=>{const n=e.byteLength,r=Wj(t),s=r+Wj(n),i=new Uint8Array(s+n);return jj(t,i,0),jj(n,i,r),i.set(e,s),new hLe(t,n,e,i)};class hLe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const oX=({name:t,code:e,encode:n})=>new fLe(t,e,n);class fLe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?C3(this.code,n):n.then(r=>C3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const aX=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),pLe=oX({name:"sha2-256",code:18,encode:aX("SHA-256")}),gLe=oX({name:"sha2-512",code:19,encode:aX("SHA-512")});var mLe=Object.freeze({__proto__:null,sha256:pLe,sha512:gLe});const cX=0,yLe="identity",lX=tX,wLe=t=>C3(cX,lX(t)),bLe={code:cX,name:yLe,encode:lX,digest:wLe};var vLe=Object.freeze({__proto__:null,identity:bLe});new TextEncoder,new TextDecoder;const zj={...f5e,...g5e,...y5e,...b5e,...C5e,...O5e,...M5e,...B5e,...z5e,...Y5e};({...mLe,...vLe});function ELe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function uX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Hj=uX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),NO=uX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=ELe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),CLe={utf8:Hj,"utf-8":Hj,hex:zj.base16,latin1:NO,ascii:NO,binary:NO,...zj};function _Le(t,e="utf8"){const n=CLe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var ALe=Object.defineProperty,SLe=(t,e,n)=>e in t?ALe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ll=(t,e,n)=>SLe(t,typeof e!="symbol"?e+"":e,n);class xLe{constructor(e,n){this.core=e,this.logger=n,ll(this,"keychain",new Map),ll(this,"name",xMe),ll(this,"version",IMe),ll(this,"initialized",!1),ll(this,"storagePrefix",au),ll(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),ll(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),ll(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),ll(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=xe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),ll(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=qs(n,this.name)}get context(){return Oo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,a3(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?c3(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ILe=Object.defineProperty,NLe=(t,e,n)=>e in t?ILe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rs=(t,e,n)=>NLe(t,typeof e!="symbol"?e+"":e,n);class TLe{constructor(e,n,r){this.core=e,this.logger=n,Rs(this,"name",AMe),Rs(this,"keychain"),Rs(this,"randomSessionIdentifier",w3()),Rs(this,"initialized",!1),Rs(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Rs(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),Rs(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=rF(s);return IJ(i.publicKey)}),Rs(this,"generateKeyPair",()=>{this.isInitialized();const s=w3e();return this.setPrivateKey(s.publicKey,s.privateKey)}),Rs(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=rF(i),a=this.randomSessionIdentifier;return await cIe(a,s,SMe,o)}),Rs(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=b3e(a,i);return this.setSymKey(c,o)}),Rs(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||LS(s);return await this.keychain.set(o,s),o}),Rs(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),Rs(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),Rs(this,"encode",async(s,i,o)=>{this.isInitialized();const a=VZ(o),c=Ad(i);if(Aj(a))return C3e(c,o==null?void 0:o.encoding);if(_j(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return v3e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),Rs(this,"decode",async(s,i,o)=>{this.isInitialized();const a=A3e(i,o);if(Aj(a)){const c=_3e(i,o==null?void 0:o.encoding);return rm(c)}if(_j(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=E3e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return rm(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),Rs(this,"getPayloadType",(s,i=jc)=>{const o=a_({encoded:s,encoding:i});return um(o.type)}),Rs(this,"getPayloadSenderPublicKey",(s,i=jc)=>{const o=a_({encoded:s,encoding:i});return o.senderPublicKey?xo(o.senderPublicKey,Mi):void 0}),this.core=e,this.logger=qs(n,this.name),this.keychain=r||new xLe(this.core,this.logger)}get context(){return Oo(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Lj)}catch{e=w3(),await this.keychain.set(Lj,e)}return _Le(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var RLe=Object.defineProperty,PLe=Object.defineProperties,OLe=Object.getOwnPropertyDescriptors,Gj=Object.getOwnPropertySymbols,kLe=Object.prototype.hasOwnProperty,DLe=Object.prototype.propertyIsEnumerable,_3=(t,e,n)=>e in t?RLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MLe=(t,e)=>{for(var n in e||(e={}))kLe.call(e,n)&&_3(t,n,e[n]);if(Gj)for(var n of Gj(e))DLe.call(e,n)&&_3(t,n,e[n]);return t},LLe=(t,e)=>PLe(t,OLe(e)),Uo=(t,e,n)=>_3(t,typeof e!="symbol"?e+"":e,n);class ULe extends OOe{constructor(e,n){super(e,n),this.logger=e,this.core=n,Uo(this,"messages",new Map),Uo(this,"messagesWithoutClientAck",new Map),Uo(this,"name",NMe),Uo(this,"version",TMe),Uo(this,"initialized",!1),Uo(this,"storagePrefix",au),Uo(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Uo(this,"set",async(r,s,i)=>{this.isInitialized();const o=Dl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===US.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,LLe(MLe({},c),{[o]:s}))}return await this.persist(),o}),Uo(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Uo(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Uo(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=Dl(s);return typeof i[o]<"u"}),Uo(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=Dl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Uo(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=qs(e,this.name),this.core=n}get context(){return Oo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,a3(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,a3(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?c3(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?c3(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var BLe=Object.defineProperty,$Le=Object.defineProperties,FLe=Object.getOwnPropertyDescriptors,qj=Object.getOwnPropertySymbols,jLe=Object.prototype.hasOwnProperty,WLe=Object.prototype.propertyIsEnumerable,A3=(t,e,n)=>e in t?BLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jA=(t,e)=>{for(var n in e||(e={}))jLe.call(e,n)&&A3(t,n,e[n]);if(qj)for(var n of qj(e))WLe.call(e,n)&&A3(t,n,e[n]);return t},TO=(t,e)=>$Le(t,FLe(e)),pc=(t,e,n)=>A3(t,typeof e!="symbol"?e+"":e,n);class zLe extends kOe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,pc(this,"events",new nc.EventEmitter),pc(this,"name",RMe),pc(this,"queue",new Map),pc(this,"publishTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),pc(this,"initialPublishTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),pc(this,"needsTransportRestart",!1),pc(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||Uj,c=AI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Yp().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(ws.publish,w),g(h))};this.relayer.events.on(ws.publish,w);const y=Zh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await y,this.events.removeListener(ws.publish,w)}catch(b){this.queue.set(d,TO(jA({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Zh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),pc(this,"on",(r,s)=>{this.events.on(r,s)}),pc(this,"once",(r,s)=>{this.events.once(r,s)}),pc(this,"off",(r,s)=>{this.events.off(r,s)}),pc(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=qs(n,this.name),this.registerEventListeners()}get context(){return Oo(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=Uj,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:Vv(AI().protocol).publish,params:jA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Us((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Us((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(ws.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,TO(jA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(TO(jA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Dm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(ws.connection_stalled);return}this.checkQueue()}),this.relayer.on(ws.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var HLe=Object.defineProperty,GLe=(t,e,n)=>e in t?HLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dy=(t,e,n)=>GLe(t,typeof e!="symbol"?e+"":e,n);class qLe{constructor(){dy(this,"map",new Map),dy(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),dy(this,"get",e=>this.map.get(e)||[]),dy(this,"exists",(e,n)=>this.get(e).includes(n)),dy(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),dy(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var VLe=Object.defineProperty,KLe=Object.defineProperties,YLe=Object.getOwnPropertyDescriptors,Vj=Object.getOwnPropertySymbols,QLe=Object.prototype.hasOwnProperty,JLe=Object.prototype.propertyIsEnumerable,S3=(t,e,n)=>e in t?VLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Tv=(t,e)=>{for(var n in e||(e={}))QLe.call(e,n)&&S3(t,n,e[n]);if(Vj)for(var n of Vj(e))JLe.call(e,n)&&S3(t,n,e[n]);return t},RO=(t,e)=>KLe(t,YLe(e)),qn=(t,e,n)=>S3(t,typeof e!="symbol"?e+"":e,n);class ZLe extends LOe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,qn(this,"subscriptions",new Map),qn(this,"topicMap",new qLe),qn(this,"events",new nc.EventEmitter),qn(this,"name",UMe),qn(this,"version",BMe),qn(this,"pending",new Map),qn(this,"cached",[]),qn(this,"initialized",!1),qn(this,"storagePrefix",au),qn(this,"subscribeTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),qn(this,"initialSubscribeTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),qn(this,"clientId"),qn(this,"batchSubscribeTopicsLimit",500),qn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),qn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=AI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),qn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),qn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),qn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),qn(this,"on",(r,s)=>{this.events.on(r,s)}),qn(this,"once",(r,s)=>{this.events.once(r,s)}),qn(this,"off",(r,s)=>{this.events.off(r,s)}),qn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),qn(this,"start",async()=>{await this.onConnect()}),qn(this,"stop",async()=>{await this.onDisconnect()}),qn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),qn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),qn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Dm.pulse,async()=>{await this.checkPending()}),this.events.on(Ho.created,async r=>{const s=Ho.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Ho.deleted,async r=>{const s=Ho.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=qs(n,this.name),this.clientId=""}get context(){return Oo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=AI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=Fn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===or.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:Vv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===or.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},_e.toMiliseconds(_e.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Ho.created,d),u(h.id))};this.events.on(Ho.created,d);try{const h=await Zh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Ho.created,d),u(h)}catch{}}),l=await Zh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(ws.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:Vv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Zh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(ws.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:Vv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Zh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(ws.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:Vv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,RO(Tv({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,Tv({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,Tv({},n)),this.topicMap.set(n.topic,e),this.events.emit(Ho.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ho.deleted,RO(Tv({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ho.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Ho.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>RO(Tv({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await ike(_e.toMiliseconds(_e.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return Dl(e+await this.getClientId())}}var XLe=Object.defineProperty,Kj=Object.getOwnPropertySymbols,eUe=Object.prototype.hasOwnProperty,tUe=Object.prototype.propertyIsEnumerable,x3=(t,e,n)=>e in t?XLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Yj=(t,e)=>{for(var n in e||(e={}))eUe.call(e,n)&&x3(t,n,e[n]);if(Kj)for(var n of Kj(e))tUe.call(e,n)&&x3(t,n,e[n]);return t},yn=(t,e,n)=>x3(t,typeof e!="symbol"?e+"":e,n);class nUe extends DOe{constructor(e){super(e),yn(this,"protocol","wc"),yn(this,"version",2),yn(this,"core"),yn(this,"logger"),yn(this,"events",new nc.EventEmitter),yn(this,"provider"),yn(this,"messages"),yn(this,"subscriber"),yn(this,"publisher"),yn(this,"name",OMe),yn(this,"transportExplicitlyClosed",!1),yn(this,"initialized",!1),yn(this,"connectionAttemptInProgress",!1),yn(this,"relayUrl"),yn(this,"projectId"),yn(this,"packageName"),yn(this,"bundleId"),yn(this,"hasExperiencedNetworkDisruption",!1),yn(this,"pingTimeout"),yn(this,"heartBeatTimeout",_e.toMiliseconds(_e.THIRTY_SECONDS+_e.FIVE_SECONDS)),yn(this,"reconnectTimeout"),yn(this,"connectPromise"),yn(this,"reconnectInProgress",!1),yn(this,"requestsInFlight",[]),yn(this,"connectTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),yn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Yp().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),yn(this,"resetPingTimeout",()=>{CI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),yn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),yn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(ws.connect)}),yn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),yn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(ws.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),yn(this,"registerProviderListeners",()=>{this.provider.on(Ca.payload,this.onPayloadHandler),this.provider.on(Ca.connect,this.onConnectHandler),this.provider.on(Ca.disconnect,this.onDisconnectHandler),this.provider.on(Ca.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?qs(e.logger,this.name):b1(Lm({level:e.logger||PMe})),this.messages=new ULe(this.logger,e.core),this.subscriber=new ZLe(this,this.logger),this.publisher=new zLe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||XZ,this.projectId=e.projectId,z2e()?this.packageName=VF():H2e()&&(this.bundleId=VF()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return Oo(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:or.relay},US.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Ho.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Ho.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,Yj({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Zh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Mj())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=Qr(_e.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(ws.message,e),await this.recordMessageEvent(e,US.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ca.disconnect,i),await Zh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(Ca.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Ca.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Ca.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,_e.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(CI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new rc(new vTe(Y2e({sdkVersion:v3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),PU(e)){if(!e.method.endsWith(kMe))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:or.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Yj({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else xT(e)&&this.events.emit(ws.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,US.inbound),this.events.emit(ws.message,e))}async acknowledgePayload(e){const n=AT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Ca.payload,this.onPayloadHandler),this.provider.off(Ca.connect,this.onConnectHandler),this.provider.off(Ca.disconnect,this.onDisconnectHandler),this.provider.off(Ca.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Mj();yMe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Dm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&vMe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(ws.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},_e.toMiliseconds(DMe)))))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function rUe(){}function Qj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Jj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Zj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const sUe="[object RegExp]",iUe="[object String]",oUe="[object Number]",aUe="[object Boolean]",Xj="[object Arguments]",cUe="[object Symbol]",lUe="[object Date]",uUe="[object Map]",dUe="[object Set]",hUe="[object Array]",fUe="[object Function]",pUe="[object ArrayBuffer]",PO="[object Object]",gUe="[object Error]",mUe="[object DataView]",yUe="[object Uint8Array]",wUe="[object Uint8ClampedArray]",bUe="[object Uint16Array]",vUe="[object Uint32Array]",EUe="[object BigUint64Array]",CUe="[object Int8Array]",_Ue="[object Int16Array]",AUe="[object Int32Array]",SUe="[object BigInt64Array]",xUe="[object Float32Array]",IUe="[object Float64Array]";function NUe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function TUe(t,e,n){return Kv(t,e,void 0,void 0,void 0,void 0,n)}function Kv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return ME(t,e,i,o)}return ME(t,e,i,o)}function ME(t,e,n,r){if(Object.is(t,e))return!0;let s=Zj(t),i=Zj(e);if(s===Xj&&(s=PO),i===Xj&&(i=PO),s!==i)return!1;switch(s){case iUe:return t.toString()===e.toString();case oUe:{const c=t.valueOf(),l=e.valueOf();return NUe(c,l)}case aUe:case lUe:case cUe:return Object.is(t.valueOf(),e.valueOf());case sUe:return t.source===e.source&&t.flags===e.flags;case fUe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case uUe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Kv(l,e.get(c),c,t,e,n,r))return!1;return!0}case dUe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Kv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case hUe:case yUe:case wUe:case bUe:case vUe:case EUe:case CUe:case _Ue:case AUe:case SUe:case xUe:case IUe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Kv(t[c],e[c],c,t,e,n,r))return!1;return!0}case pUe:return t.byteLength!==e.byteLength?!1:ME(new Uint8Array(t),new Uint8Array(e),n,r);case mUe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:ME(new Uint8Array(t),new Uint8Array(e),n,r);case gUe:return t.name===e.name&&t.message===e.message;case PO:{if(!(ME(t.constructor,e.constructor,n,r)||Qj(t)&&Qj(e)))return!1;const c=[...Object.keys(t),...Jj(t)],l=[...Object.keys(e),...Jj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Kv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function RUe(t,e){return TUe(t,e,rUe)}var PUe=Object.defineProperty,e9=Object.getOwnPropertySymbols,OUe=Object.prototype.hasOwnProperty,kUe=Object.prototype.propertyIsEnumerable,I3=(t,e,n)=>e in t?PUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,t9=(t,e)=>{for(var n in e||(e={}))OUe.call(e,n)&&I3(t,n,e[n]);if(e9)for(var n of e9(e))kUe.call(e,n)&&I3(t,n,e[n]);return t},Ji=(t,e,n)=>I3(t,typeof e!="symbol"?e+"":e,n);class Bm extends MOe{constructor(e,n,r,s=au,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Ji(this,"map",new Map),Ji(this,"version",MMe),Ji(this,"cached",[]),Ji(this,"initialized",!1),Ji(this,"getKey"),Ji(this,"storagePrefix",au),Ji(this,"recentlyDeleted",[]),Ji(this,"recentlyDeletedLimit",200),Ji(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Us(o)?this.map.set(this.getKey(o),o):K3e(o)?this.map.set(o.id,o):Y3e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Ji(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Ji(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Ji(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>RUe(a[c],o[c]))):this.values)),Ji(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=t9(t9({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Ji(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=qs(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return Oo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var DUe=Object.defineProperty,MUe=(t,e,n)=>e in t?DUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tn=(t,e,n)=>MUe(t,typeof e!="symbol"?e+"":e,n);class LUe{constructor(e,n){this.core=e,this.logger=n,tn(this,"name",$Me),tn(this,"version",FMe),tn(this,"events",new bU),tn(this,"pairings"),tn(this,"initialized",!1),tn(this,"storagePrefix",au),tn(this,"ignoredPayloadTypes",[dd]),tn(this,"registeredMethods",[]),tn(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),tn(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),tn(this,"create",async r=>{this.isInitialized();const s=w3(),i=await this.core.crypto.setSymKey(s),o=Qr(_e.FIVE_MINUTES),a={protocol:ZZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=xj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(Pp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),tn(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[pl.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=Sj(r.uri);s.props.properties.topic=i,s.addTrace(pl.pairing_uri_validation_success),s.addTrace(pl.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(pl.existing_pairing),u.active)throw s.setError(Iu.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(pl.pairing_not_expired)}const d=c||Qr(_e.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(pl.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(Pp.create,h),s.addTrace(pl.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(pl.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Iu.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(Iu.subscribe_pairing_topic_failure),f}return s.addTrace(pl.subscribe_pairing_topic_success),h}),tn(this,"activate",async({topic:r})=>{this.isInitialized();const s=Qr(_e.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),tn(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=_p();this.events.once(Nn("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),tn(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),tn(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),tn(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),tn(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Fn("USER_DISCONNECTED")),await this.deletePairing(s))}),tn(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return xj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),tn(this,"sendRequest",async(r,s,i)=>{const o=Jh(s,i),a=await this.core.crypto.encode(r,o),c=Iv[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),tn(this,"sendResult",async(r,s,i)=>{const o=AT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Iv[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),tn(this,"sendError",async(r,s,i)=>{const o=ST(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=Iv[c]?Iv[c].res:Iv.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),tn(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,Fn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),tn(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>fh(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),tn(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),tn(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),tn(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(Pp.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),tn(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{yl(s)?this.events.emit(Nn("pairing_ping",i),{}):Ua(s)&&this.events.emit(Nn("pairing_ping",i),{error:s.error})},500)}),tn(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(Pp.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),tn(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=Fn("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),tn(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(Fn("WC_METHOD_UNSUPPORTED",r))}),tn(this,"isValidPair",(r,s)=>{var i;if(!ro(r)){const{message:a}=xe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(Iu.malformed_pairing_uri),new Error(a)}if(!V3e(r.uri)){const{message:a}=xe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(Iu.malformed_pairing_uri),new Error(a)}const o=Sj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Iu.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Iu.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&_e.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(Iu.pairing_expired);const{message:a}=xe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),tn(this,"isValidPing",async r=>{if(!ro(r)){const{message:i}=xe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),tn(this,"isValidDisconnect",async r=>{if(!ro(r)){const{message:i}=xe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),tn(this,"isValidPairingTopic",async r=>{if(!Hr(r,!1)){const{message:s}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(fh(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=xe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=qs(n,this.name),this.pairings=new Bm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Oo(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(ws.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==or.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);PU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):xT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Na.expired,async e=>{const{topic:n}=pZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(Pp.expire,{topic:n}))})}}var UUe=Object.defineProperty,BUe=(t,e,n)=>e in t?UUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ps=(t,e,n)=>BUe(t,typeof e!="symbol"?e+"":e,n);class $Ue extends POe{constructor(e,n){super(e,n),this.core=e,this.logger=n,Ps(this,"records",new Map),Ps(this,"events",new nc.EventEmitter),Ps(this,"name",jMe),Ps(this,"version",WMe),Ps(this,"cached",[]),Ps(this,"initialized",!1),Ps(this,"storagePrefix",au),Ps(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),Ps(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:Qr(_e.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(hc.created,o)}),Ps(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ua(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(hc.updated,s))}),Ps(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),Ps(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(hc.deleted,i)}}),this.persist()}),Ps(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),Ps(this,"on",(r,s)=>{this.events.on(r,s)}),Ps(this,"once",(r,s)=>{this.events.once(r,s)}),Ps(this,"off",(r,s)=>{this.events.off(r,s)}),Ps(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=qs(n,this.name)}get context(){return Oo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Jh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(hc.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(hc.created,e=>{const n=hc.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(hc.updated,e=>{const n=hc.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(hc.deleted,e=>{const n=hc.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(Dm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{_e.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(hc.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var FUe=Object.defineProperty,jUe=(t,e,n)=>e in t?FUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ni=(t,e,n)=>jUe(t,typeof e!="symbol"?e+"":e,n);class WUe extends UOe{constructor(e,n){super(e,n),this.core=e,this.logger=n,ni(this,"expirations",new Map),ni(this,"events",new nc.EventEmitter),ni(this,"name",zMe),ni(this,"version",HMe),ni(this,"cached",[]),ni(this,"initialized",!1),ni(this,"storagePrefix",au),ni(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ni(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),ni(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(Na.created,{target:i,expiration:o})}),ni(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),ni(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Na.deleted,{target:s,expiration:i})}}),ni(this,"on",(r,s)=>{this.events.on(r,s)}),ni(this,"once",(r,s)=>{this.events.once(r,s)}),ni(this,"off",(r,s)=>{this.events.off(r,s)}),ni(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=qs(n,this.name)}get context(){return Oo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Q2e(e);if(typeof e=="number")return J2e(e);const{message:n}=xe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Na.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;_e.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Na.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(Dm.pulse,()=>this.checkExpirations()),this.events.on(Na.created,e=>{const n=Na.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Na.expired,e=>{const n=Na.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Na.deleted,e=>{const n=Na.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var zUe=Object.defineProperty,HUe=(t,e,n)=>e in t?zUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zr=(t,e,n)=>HUe(t,typeof e!="symbol"?e+"":e,n);class GUe extends BOe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,zr(this,"name",GMe),zr(this,"abortController"),zr(this,"isDevEnv"),zr(this,"verifyUrlV3",VMe),zr(this,"storagePrefix",au),zr(this,"version",JZ),zr(this,"publicKey"),zr(this,"fetchPromise"),zr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&_e.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),zr(this,"register",async s=>{if(!$b()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=sm(),u=this.startAbortTimer(_e.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=y=>{if(y.data&&typeof y.data=="string")try{const b=JSON.parse(y.data);if(b.type==="verify_attestation"){if(KD(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),zr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(KD(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),zr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(_e.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),zr(this,"getVerifyUrl",s=>{let i=s||DE;return KMe.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${DE}`),i=DE),i}),zr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(_e.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),zr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),zr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),zr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),zr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),zr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),zr(this,"validateAttestation",(s,i)=>{const o=x3e(s,i.publicKey),a={hasExpired:_e.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=qs(n,this.name),this.abortController=new AbortController,this.isDevEnv=OU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return Oo(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var qUe=Object.defineProperty,VUe=(t,e,n)=>e in t?qUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,n9=(t,e,n)=>VUe(t,typeof e!="symbol"?e+"":e,n);class KUe extends $Oe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,n9(this,"context",YMe),n9(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${QMe}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=qs(n,this.context)}}var YUe=Object.defineProperty,r9=Object.getOwnPropertySymbols,QUe=Object.prototype.hasOwnProperty,JUe=Object.prototype.propertyIsEnumerable,N3=(t,e,n)=>e in t?YUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rv=(t,e)=>{for(var n in e||(e={}))QUe.call(e,n)&&N3(t,n,e[n]);if(r9)for(var n of r9(e))JUe.call(e,n)&&N3(t,n,e[n]);return t},cs=(t,e,n)=>N3(t,typeof e!="symbol"?e+"":e,n);class ZUe extends FOe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,cs(this,"context",ZMe),cs(this,"storagePrefix",au),cs(this,"storageVersion",JMe),cs(this,"events",new Map),cs(this,"shouldPersist",!1),cs(this,"init",async()=>{if(!OU())try{const s={eventId:YF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:hZ(this.core.relayer.protocol,this.core.relayer.version,v3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),cs(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=YF(),u=this.core.projectId||"",d=Date.now(),h=Rv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),cs(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return Rv(Rv({},a),this.setMethods(a.eventId))}),cs(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),cs(this,"setEventListeners",()=>{this.core.heartbeat.on(Dm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{_e.fromMiliseconds(Date.now())-_e.fromMiliseconds(s.timestamp)>XMe&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),cs(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),cs(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),cs(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),cs(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),cs(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,Rv(Rv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),cs(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),cs(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${e5e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${v3}${i}`,{method:"POST",body:JSON.stringify(s)})}),cs(this,"getAppDomain",()=>dZ().url),this.logger=qs(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var XUe=Object.defineProperty,s9=Object.getOwnPropertySymbols,eBe=Object.prototype.hasOwnProperty,tBe=Object.prototype.propertyIsEnumerable,T3=(t,e,n)=>e in t?XUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,i9=(t,e)=>{for(var n in e||(e={}))eBe.call(e,n)&&T3(t,n,e[n]);if(s9)for(var n of s9(e))tBe.call(e,n)&&T3(t,n,e[n]);return t},Jn=(t,e,n)=>T3(t,typeof e!="symbol"?e+"":e,n);let nBe=class dX extends IOe{constructor(e){var n;super(e),Jn(this,"protocol",QZ),Jn(this,"version",JZ),Jn(this,"name",b3),Jn(this,"relayUrl"),Jn(this,"projectId"),Jn(this,"customStoragePrefix"),Jn(this,"events",new nc.EventEmitter),Jn(this,"logger"),Jn(this,"heartbeat"),Jn(this,"relayer"),Jn(this,"crypto"),Jn(this,"storage"),Jn(this,"history"),Jn(this,"expirer"),Jn(this,"pairing"),Jn(this,"verify"),Jn(this,"echoClient"),Jn(this,"linkModeSupportedApps"),Jn(this,"eventClient"),Jn(this,"initialized",!1),Jn(this,"logChunkController"),Jn(this,"on",(a,c)=>this.events.on(a,c)),Jn(this,"once",(a,c)=>this.events.once(a,c)),Jn(this,"off",(a,c)=>this.events.off(a,c)),Jn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Jn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:or.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||XZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=Lm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:CMe.logger,name:b3}),{logger:i,chunkLoggerController:o}=bT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=qs(i,this.name),this.heartbeat=new k1e,this.crypto=new TLe(this,this.logger,e==null?void 0:e.keychain),this.history=new $Ue(this,this.logger),this.expirer=new WUe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new AOe(i9(i9({},_Me),e==null?void 0:e.storageOptions)),this.relayer=new nUe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new LUe(this,this.logger),this.verify=new GUe(this,this.logger,this.storage),this.echoClient=new KUe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new ZUe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new dX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(LMe,r),n}get context(){return Oo(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Bj,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Bj)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&EMe.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const rBe=nBe,hX="wc",fX=2,pX="client",FU=`${hX}@${fX}:${pX}:`,OO={name:pX,logger:"error"},o9="WALLETCONNECT_DEEPLINK_CHOICE",sBe="proposal",a9="Proposal expired",iBe="session",hy=_e.SEVEN_DAYS,oBe="engine",ls={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_e.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_e.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1119}}},kO={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},ul={idle:"IDLE",active:"ACTIVE"},c9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},aBe="request",cBe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],lBe="wc",uBe="auth",dBe="authKeys",hBe="pairingTopics",fBe="requests",BT=`${lBe}@${1.5}:${uBe}:`,BS=`${BT}:PUB_KEY`;var pBe=Object.defineProperty,gBe=Object.defineProperties,mBe=Object.getOwnPropertyDescriptors,l9=Object.getOwnPropertySymbols,yBe=Object.prototype.hasOwnProperty,wBe=Object.prototype.propertyIsEnumerable,R3=(t,e,n)=>e in t?pBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vn=(t,e)=>{for(var n in e||(e={}))yBe.call(e,n)&&R3(t,n,e[n]);if(l9)for(var n of l9(e))wBe.call(e,n)&&R3(t,n,e[n]);return t},yi=(t,e)=>gBe(t,mBe(e)),be=(t,e,n)=>R3(t,typeof e!="symbol"?e+"":e,n);class bBe extends HOe{constructor(e){super(e),be(this,"name",oBe),be(this,"events",new bU),be(this,"initialized",!1),be(this,"requestQueue",{state:ul.idle,queue:[]}),be(this,"sessionRequestQueue",{state:ul.idle,queue:[]}),be(this,"requestQueueDelay",_e.ONE_SECOND),be(this,"expectedPairingMethodMap",new Map),be(this,"recentlyDeletedMap",new Map),be(this,"recentlyDeletedLimit",200),be(this,"relayMessageCache",[]),be(this,"pendingSessions",new Map),be(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(ls)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))}),be(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=yi(Vn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=W3e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const N=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=N.active}}catch(N){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),N}if(!u||!h){const{topic:N,uri:x}=await this.client.core.pairing.create();u=N,d=x}if(!u){const{message:N}=xe("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(N)}const f=await this.client.core.crypto.generateKeyPair(),p=ls.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,g=Qr(p),w=yi(Vn(Vn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:ZZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:ml()}),y=Nn("session_connect",w.id),{reject:b,resolve:v,done:A}=_p(p,a9),C=({id:N})=>{N===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(y,{error:{message:a9,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(y,({error:N,session:x})=>{this.client.events.off("proposal_expire",C),N?b(N):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),be(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),be(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[fc.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(hp.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(hp.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(hp.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:y}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:fc.session_approve_started,properties:{topic:p,trace:[fc.session_approve_started,fc.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),N=Vn(Vn(Vn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:Qr(hy)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=or.relay;b.addTrace(fc.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(S){throw b.setError(hp.subscribe_session_topic_failure),S}b.addTrace(fc.subscribe_session_topic_success);const T=yi(Vn({},N),{topic:C,requiredNamespaces:w,optionalNamespaces:y,pairingTopic:p,acknowledged:!1,self:N.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:or.relay});await this.client.session.set(C,T),b.addTrace(fc.store_session);try{b.addTrace(fc.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:N,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(hp.session_settle_publish_failure),S}),b.addTrace(fc.session_settle_publish_success),b.addTrace(fc.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(hp.session_approve_publish_failure),S}),b.addTrace(fc.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,Fn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,Fn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,Qr(hy)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),be(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:ls.wc_sessionPropose.reject}),await this.client.proposal.delete(r,Fn("USER_DISCONNECTED")))}),be(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=_p(),c=ml(),l=Yp().toString(),u=this.client.session.get(r).namespaces;return this.events.once(Nn("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),be(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=ml(),{done:i,resolve:o,reject:a}=_p();return this.events.once(Nn("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,Qr(hy)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),be(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(y){throw this.client.logger.error("request() -> isValidRequest() failed"),y}const{chainId:r,request:s,topic:i,expiry:o=ls.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===or.relay&&await this.confirmOnlineStateOrThrow();const c=ml(),l=Yp().toString(),{done:u,resolve:d,reject:h}=_p(o,"Request expired. Please try again.");this.events.once(Nn("session_request",c),({error:y,result:b})=>{y?h(y):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:yi(Vn({},s),{expiryTimestamp:Qr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(y=>h(y)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:yi(Vn({},s),{expiryTimestamp:Qr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async y=>{await this.sendRequest(Vn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),y()}),new Promise(async y=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await tke(this.client.core.storage,o9);await Z2e({id:c,topic:i,wcDeepLink:v})}y()}),u()]).then(y=>y[2])}),be(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===or.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);yl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ua(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),be(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=ml(),i=Yp().toString(),{done:o,resolve:a,reject:c}=_p();this.events.once(Nn("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),be(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Yp().toString(),a=ml();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),be(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:Fn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=xe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),be(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>G3e(r,n)))),be(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),be(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?or.link_mode:or.relay;o===or.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,y=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=LS(A);if(await Promise.all([this.client.auth.authKeys.set(BS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=w0(a[0]);let j=Vke(M,"request",g);MS(y)&&(j=Yke(j,y.pop())),y.push(j)}const N=w&&w>ls.wc_sessionAuthenticate.req.ttl?w:ls.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:y},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Qr(N)},T={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:Qr(ls.wc_sessionPropose.req.ttl),id:ml()},{done:D,resolve:O,reject:$}=_p(N,"Request expired"),G=ml(),W=Nn("session_connect",S.id),I=Nn("session_request",G),R=async({error:M,session:j})=>{this.events.off(I,B),M?$(M):j&&O({session:j})},B=async M=>{var j,q,se;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),M.error){const De=Fn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===De.code?void 0:(this.events.off(W,R),$(M.error.message))}await this.deleteProposal(S.id),this.events.off(W,R);const{cacaos:ie,responder:Y}=M.result,te=[],fe=[];for(const De of ie){await rj({cacao:De,projectId:this.client.core.projectId})||(this.client.logger.error(De,"Signature verification failed"),$(Fn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:wt}=De,Mt=MS(wt.resources),ln=[l3(wt.iss)],X=_I(wt.iss);if(Mt){const ce=sj(Mt),de=ij(Mt);te.push(...ce),ln.push(...de)}for(const ce of ln)fe.push(`${ce}:${X}`)}const Xe=await this.client.core.crypto.generateSharedKey(A,Y.publicKey);let Le;te.length>0&&(Le={topic:Xe,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:Y,controller:Y.publicKey,expiry:Qr(hy),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:Rj([...new Set(te)],[...new Set(fe)]),transportType:o},await this.client.core.relayer.subscribe(Xe,{transportType:o}),await this.client.session.set(Xe,Le),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:Y.metadata}),Le=this.client.session.get(Xe)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(q=Y.metadata.redirect)!=null&&q.linkMode&&(se=Y.metadata.redirect)!=null&&se.universal&&r&&(this.client.core.addLinkModeSupportedApp(Y.metadata.redirect.universal),this.client.session.update(Xe,{transportType:or.link_mode})),O({auths:ie,session:Le})};this.events.once(W,R),this.events.once(I,B);let k;try{if(i){const M=Jh("wc_sessionAuthenticate",x,G);this.client.core.history.set(b,M);const j=await this.client.core.crypto.encode("",M,{type:T1,encoding:bh});k=FA(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:ls.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(W,R),this.events.off(I,B),M}return await this.setProposal(S.id,S),await this.setAuthRequest(G,{request:yi(Vn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:k??v,response:D}}),be(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[fp.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(Nv.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(Nv.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||or.relay;a===or.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=LS(c),d={type:dd,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await rj({cacao:w,projectId:this.client.core.projectId})){i.setError(Nv.invalid_cacao);const C=Fn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(fp.cacaos_verified);const{p:y}=w,b=MS(y.resources),v=[l3(y.iss)],A=_I(y.iss);if(b){const C=sj(b),N=ij(b);h.push(...C),v.push(...N)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(fp.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:Qr(hy),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Rj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(fp.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(Nv.subscribe_authenticated_session_topic_failure),w}i.addTrace(fp.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(fp.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(fp.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(Nv.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),be(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===or.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=LS(o),l={type:dd,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:ls.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,Fn("USER_DISCONNECTED"))}),be(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return _Z(r,s)}),be(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),be(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),be(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Fn("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(o9).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,Fn("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=ul.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),be(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(hp.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,Fn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),be(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=ul.idle,this.client.events.emit("session_request_expire",{id:n}))}),be(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),be(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),be(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,Qr(ls.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),be(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=or.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),be(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||Qr(ls.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),be(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Jh(s,i,c);let f;const p=!!u;try{const y=p?bh:jc;f=await this.client.core.crypto.encode(r,h,{encoding:y})}catch(y){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),y}let g;if(cBe.includes(s)){const y=Dl(JSON.stringify(h)),b=Dl(f);g=await this.client.core.verify.register({id:b,decryptedId:y})}const w=ls[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const y=FA(u,r,f);await global.Linking.openURL(y,this.client.name)}else{const y=ls[s].req;o&&(y.ttl=o),a&&(y.id=a),y.tvf=yi(Vn({},d),{correlationId:h.id}),l?(y.internal=yi(Vn({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,y)):this.client.core.relayer.publish(r,f,y).catch(b=>this.client.logger.error(b))}return h.id}),be(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=AT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?bh:jc;u=await this.client.core.crypto.encode(s,l,yi(Vn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=FA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=ls[p].res;g.tvf=yi(Vn({},f),{correlationId:r}),o?(g.internal=yi(Vn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),be(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=ST(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?bh:jc;u=await this.client.core.crypto.encode(s,l,yi(Vn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=FA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||ls[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),be(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;fh(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{fh(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),be(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),be(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),be(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===ul.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ul.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=ul.idle}),be(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),be(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),be(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=xe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),be(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),be(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(Iu.proposal_listener_not_found)),this.isValidConnect(Vn({},s.params));const u=a.expiryTimestamp||Qr(ls.wc_sessionPropose.req.ttl),d=Vn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:Dl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(pl.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:ls.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),be(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(yl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ua(r)){await this.client.proposal.delete(i,Fn("USER_DISCONNECTED"));const o=Nn("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),be(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=yi(Vn(Vn(Vn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:or.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(Nn("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;yl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Nn("session_approve",s),{})):Ua(r)&&(await this.client.session.delete(n,Fn("USER_DISCONNECTED")),this.events.emit(Nn("session_approve",s),{error:r.error}))}),be(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=xv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:Fn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Vn({topic:n},s));try{xv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw xv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),be(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=Nn("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);yl(r)?this.events.emit(Nn("session_update",s),{}):Ua(r)&&this.events.emit(Nn("session_update",s),{error:r.error})}),be(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,Qr(hy)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=Nn("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);yl(r)?this.events.emit(Nn("session_extend",s),{}):Ua(r)&&this.events.emit(Nn("session_extend",s),{error:r.error})}),be(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),be(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=Nn("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);yl(r)?this.events.emit(Nn("session_ping",s),{}):Ua(r)&&this.events.emit(Nn("session_ping",s),{error:r.error})},500)}),be(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(ws.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:Fn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),be(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(Vn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:Dl(JSON.stringify(Jh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===or.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),be(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=Nn("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);yl(r)?this.events.emit(Nn("session_request",s),{result:r.result}):Ua(r)&&this.events.emit(Nn("session_request",s),{error:r.error})}),be(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=xv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(Vn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),xv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),be(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),yl(r)?this.events.emit(Nn("session_request",s),{result:r.result}):Ua(r)&&this.events.emit(Nn("session_request",s),{error:r.error})}),be(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:Dl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===or.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:dd,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:ls.wc_sessionAuthenticate.autoReject,appLink:h})}}),be(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),be(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ul.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))}),be(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=Nn("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(Nn("session_request",i.request.id),{error:r})})}),be(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===ul.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ul.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),be(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),be(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Jh("wc_sessionPropose",yi(Vn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),be(this,"isValidConnect",async n=>{if(!ro(n)){const{message:l}=xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Us(r)||await this.isValidPairingTopic(r),!rMe(c)){const{message:l}=xe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Us(s)&&Ef(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Us(i)&&Ef(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Us(o)||this.validateSessionProps(o,"sessionProperties"),!Us(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),be(this,"validateNamespaces",(n,r)=>{const s=nMe(n,"connect()",r);if(s)throw new Error(s.message)}),be(this,"isValidApprove",async n=>{if(!ro(n))throw new Error(xe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=xO(s,"approve()");if(l)throw new Error(l.message);const u=kj(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Hr(i,!0)){const{message:d}=xe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Us(o)||this.validateSessionProps(o,"sessionProperties"),!Us(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),be(this,"isValidReject",async n=>{if(!ro(n)){const{message:i}=xe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!iMe(s)){const{message:i}=xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),be(this,"isValidSessionSettleRequest",n=>{if(!ro(n)){const{message:l}=xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!YZ(r)){const{message:l}=xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=Q3e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=xO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(fh(o)){const{message:l}=xe("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),be(this,"isValidUpdate",async n=>{if(!ro(n)){const{message:c}=xe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=xO(s,"update()");if(o)throw new Error(o.message);const a=kj(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),be(this,"isValidExtend",async n=>{if(!ro(n)){const{message:s}=xe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),be(this,"isValidRequest",async n=>{if(!ro(n)){const{message:c}=xe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Oj(a,i)){const{message:c}=xe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!oMe(s)){const{message:c}=xe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!lMe(a,i,s.method)){const{message:c}=xe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!fMe(o,kO)){const{message:c}=xe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${kO.min} and ${kO.max}`);throw new Error(c)}}),be(this,"isValidRespond",async n=>{var r;if(!ro(n)){const{message:o}=xe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!aMe(i)){const{message:o}=xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),be(this,"isValidPing",async n=>{if(!ro(n)){const{message:s}=xe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidEmit",async n=>{if(!ro(n)){const{message:a}=xe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Oj(o,i)){const{message:a}=xe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!cMe(s)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!uMe(o,i,s.name)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),be(this,"isValidDisconnect",async n=>{if(!ro(n)){const{message:s}=xe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),be(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Hr(s,!1))throw new Error("uri is required parameter");if(!Hr(i,!1))throw new Error("domain is required parameter");if(!Hr(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>w0(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=w0(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),be(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||DE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===or.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),be(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=xe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),be(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),be(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),be(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),be(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==or.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),be(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),be(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=KF(n,"topic")||"",s=decodeURIComponent(KF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:or.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),be(this,"registerLinkModeListeners",async()=>{var n;if(OU()||Yf()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),be(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(c9).includes(s.method)}),be(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return yi(Vn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),be(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),be(this,"extractTxHashesFromResult",(n,r)=>{try{const s=c9[n];if(typeof r=="string")return[r];const i=r[s.key];if(vf(i))return n==="solana_signAllTransactions"?i.map(o=>kke(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(ws.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(BS)?this.client.auth.authKeys.get(BS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===or.link_mode?bh:jc});PU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:Dl(r)})):xT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Na.expired,async e=>{const{topic:n,id:r}=pZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,xe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,xe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(Pp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(Pp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Hr(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(fh(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=xe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Hr(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(fh(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=xe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=xe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Hr(e,!1)){const{message:n}=xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!sMe(e)){const{message:n}=xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(fh(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=xe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class vBe extends Bm{constructor(e,n){super(e,n,sBe,FU),this.core=e,this.logger=n}}let EBe=class extends Bm{constructor(e,n){super(e,n,iBe,FU),this.core=e,this.logger=n}};class CBe extends Bm{constructor(e,n){super(e,n,aBe,FU,r=>r.id),this.core=e,this.logger=n}}class _Be extends Bm{constructor(e,n){super(e,n,dBe,BT,()=>BS),this.core=e,this.logger=n}}class ABe extends Bm{constructor(e,n){super(e,n,hBe,BT),this.core=e,this.logger=n}}class SBe extends Bm{constructor(e,n){super(e,n,fBe,BT,r=>r.id),this.core=e,this.logger=n}}var xBe=Object.defineProperty,IBe=(t,e,n)=>e in t?xBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DO=(t,e,n)=>IBe(t,typeof e!="symbol"?e+"":e,n);class NBe{constructor(e,n){this.core=e,this.logger=n,DO(this,"authKeys"),DO(this,"pairingTopics"),DO(this,"requests"),this.authKeys=new _Be(this.core,this.logger),this.pairingTopics=new ABe(this.core,this.logger),this.requests=new SBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var TBe=Object.defineProperty,RBe=(t,e,n)=>e in t?TBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,nn=(t,e,n)=>RBe(t,typeof e!="symbol"?e+"":e,n);let PBe=class gX extends zOe{constructor(e){super(e),nn(this,"protocol",hX),nn(this,"version",fX),nn(this,"name",OO.name),nn(this,"metadata"),nn(this,"core"),nn(this,"logger"),nn(this,"events",new nc.EventEmitter),nn(this,"engine"),nn(this,"session"),nn(this,"proposal"),nn(this,"pendingRequest"),nn(this,"auth"),nn(this,"signConfig"),nn(this,"on",(r,s)=>this.events.on(r,s)),nn(this,"once",(r,s)=>this.events.once(r,s)),nn(this,"off",(r,s)=>this.events.off(r,s)),nn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),nn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),nn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),nn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),nn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),nn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||OO.name,this.metadata=q2e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:b1(Lm({level:(e==null?void 0:e.logger)||OO.logger}));this.core=(e==null?void 0:e.core)||new rBe(e),this.logger=qs(n,this.name),this.session=new EBe(this.core,this.logger),this.proposal=new vBe(this.core,this.logger),this.pendingRequest=new CBe(this.core,this.logger),this.engine=new bBe(this),this.auth=new NBe(this.core,this.logger)}static async init(e){const n=new gX(e);return await n.initialize(),n}get context(){return Oo(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},_e.toMiliseconds(_e.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const u9="error",OBe="wss://relay.walletconnect.org",kBe="wc",DBe="universal_provider",WA=`${kBe}@2:${DBe}:`,mX="https://rpc.walletconnect.org/v1/",Oy="generic",MBe=`${mX}bundler`,sc={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function LBe(){}function jU(t){return t==null||typeof t!="object"&&typeof t!="function"}function WU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function UBe(t){if(jU(t))return t;if(Array.isArray(t)||WU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function d9(t){return typeof t=="object"&&t!==null}function yX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function wX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const BBe="[object RegExp]",bX="[object String]",vX="[object Number]",EX="[object Boolean]",CX="[object Arguments]",$Be="[object Symbol]",FBe="[object Date]",jBe="[object Map]",WBe="[object Set]",zBe="[object Array]",HBe="[object ArrayBuffer]",GBe="[object Object]",qBe="[object DataView]",VBe="[object Uint8Array]",KBe="[object Uint8ClampedArray]",YBe="[object Uint16Array]",QBe="[object Uint32Array]",JBe="[object Int8Array]",ZBe="[object Int16Array]",XBe="[object Int32Array]",e$e="[object Float32Array]",t$e="[object Float64Array]";function n$e(t,e){return e0(t,void 0,t,new Map,e)}function e0(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(jU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=e0(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,e0(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(e0(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(WU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=e0(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),Op(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),Op(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),Op(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,Op(o,t,n,r,s),o}if(typeof t=="object"&&r$e(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),Op(o,t,n,r,s),o}return t}function Op(t,e,n=t,r,s){const i=[...Object.keys(e),...yX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=e0(e[a],a,n,r,s))}}function r$e(t){switch(wX(t)){case CX:case zBe:case HBe:case qBe:case EX:case FBe:case e$e:case t$e:case JBe:case ZBe:case XBe:case jBe:case vX:case GBe:case BBe:case WBe:case bX:case $Be:case VBe:case KBe:case YBe:case QBe:return!0;default:return!1}}function s$e(t,e){return n$e(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case vX:case bX:case EX:{const o=new t.constructor(t==null?void 0:t.valueOf());return Op(o,t),o}case CX:{const o={};return Op(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function h9(t){return s$e(t)}function f9(t){return t!==null&&typeof t=="object"&&wX(t)==="[object Arguments]"}function i$e(t){return WU(t)}function o$e(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function a$e(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=P3(s,o,r,new Map)}return s}function P3(t,e,n,r){if(jU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return UBe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...yX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(f9(a)&&(a={...a}),f9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=h9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||d9(c)&&d9(a)?t[o]=P3(c,a,n,r):c==null&&o$e(a)?t[o]=P3({},a,n,r):c==null&&i$e(a)?t[o]=h9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function c$e(t,...e){return a$e(t,...e,LBe)}var l$e=Object.defineProperty,u$e=Object.defineProperties,d$e=Object.getOwnPropertyDescriptors,p9=Object.getOwnPropertySymbols,h$e=Object.prototype.hasOwnProperty,f$e=Object.prototype.propertyIsEnumerable,g9=(t,e,n)=>e in t?l$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,zA=(t,e)=>{for(var n in e||(e={}))h$e.call(e,n)&&g9(t,n,e[n]);if(p9)for(var n of p9(e))f$e.call(e,n)&&g9(t,n,e[n]);return t},p$e=(t,e)=>u$e(t,d$e(e));function ua(t,e,n){var r;const s=w0(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${mX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function $m(t){return t.includes(":")?t.split(":")[1]:t}function _X(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function g$e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function HA(t={},e={}){const n=m9(t),r=m9(e);return c$e(n,r)}function m9(t){var e,n,r,s,i;const o={};if(!Ef(t))return o;for(const[a,c]of Object.entries(t)){const l=LT(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Xy(a);o[f]=p$e(zA(zA({},o[f]),c),{chains:Zl(l,(e=o[f])==null?void 0:e.chains),methods:Zl(u,(n=o[f])==null?void 0:n.methods),events:Zl(d,(r=o[f])==null?void 0:r.events)}),(Ef(h)||Ef(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=zA(zA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function y9(t){return t.includes(":")?t.split(":")[2]:t}function w9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=LT(n)?[n]:r.chains?r.chains:_X(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function MO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const AX={},Cn=t=>AX[t],LO=(t,e)=>{AX[t]=e};var m$e=Object.defineProperty,y$e=(t,e,n)=>e in t?m$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fy=(t,e,n)=>y$e(t,typeof e!="symbol"?e+"":e,n);class w$e{constructor(e){fy(this,"name","polkadot"),fy(this,"client"),fy(this,"httpProviders"),fy(this,"events"),fy(this,"namespace"),fy(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}}var b$e=Object.defineProperty,v$e=Object.defineProperties,E$e=Object.getOwnPropertyDescriptors,b9=Object.getOwnPropertySymbols,C$e=Object.prototype.hasOwnProperty,_$e=Object.prototype.propertyIsEnumerable,O3=(t,e,n)=>e in t?b$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v9=(t,e)=>{for(var n in e||(e={}))C$e.call(e,n)&&O3(t,n,e[n]);if(b9)for(var n of b9(e))_$e.call(e,n)&&O3(t,n,e[n]);return t},E9=(t,e)=>v$e(t,E$e(e)),py=(t,e,n)=>O3(t,typeof e!="symbol"?e+"":e,n);class A$e{constructor(e){py(this,"name","eip155"),py(this,"client"),py(this,"chainId"),py(this,"namespace"),py(this,"httpProviders"),py(this,"events"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||ua(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt($m(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:E9(v9({},u.sessionProperties||{}),{capabilities:E9(v9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Jh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${MBe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var S$e=Object.defineProperty,x$e=(t,e,n)=>e in t?S$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,gy=(t,e,n)=>x$e(t,typeof e!="symbol"?e+"":e,n);class I$e{constructor(e){gy(this,"name","solana"),gy(this,"client"),gy(this,"httpProviders"),gy(this,"events"),gy(this,"namespace"),gy(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}}var N$e=Object.defineProperty,T$e=(t,e,n)=>e in t?N$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,my=(t,e,n)=>T$e(t,typeof e!="symbol"?e+"":e,n);class R$e{constructor(e){my(this,"name","cosmos"),my(this,"client"),my(this,"httpProviders"),my(this,"events"),my(this,"namespace"),my(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}}var P$e=Object.defineProperty,O$e=(t,e,n)=>e in t?P$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,yy=(t,e,n)=>O$e(t,typeof e!="symbol"?e+"":e,n);class k$e{constructor(e){yy(this,"name","algorand"),yy(this,"client"),yy(this,"httpProviders"),yy(this,"events"),yy(this,"namespace"),yy(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||ua(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new rc(new el(r,Cn("disableProviderPing")))}}var D$e=Object.defineProperty,M$e=(t,e,n)=>e in t?D$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wy=(t,e,n)=>M$e(t,typeof e!="symbol"?e+"":e,n);class L$e{constructor(e){wy(this,"name","cip34"),wy(this,"client"),wy(this,"httpProviders"),wy(this,"events"),wy(this,"namespace"),wy(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=$m(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}}var U$e=Object.defineProperty,B$e=(t,e,n)=>e in t?U$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,by=(t,e,n)=>B$e(t,typeof e!="symbol"?e+"":e,n);class $$e{constructor(e){by(this,"name","elrond"),by(this,"client"),by(this,"httpProviders"),by(this,"events"),by(this,"namespace"),by(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}}var F$e=Object.defineProperty,j$e=(t,e,n)=>e in t?F$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,vy=(t,e,n)=>j$e(t,typeof e!="symbol"?e+"":e,n);class W$e{constructor(e){vy(this,"name","multiversx"),vy(this,"client"),vy(this,"httpProviders"),vy(this,"events"),vy(this,"namespace"),vy(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=$m(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}}var z$e=Object.defineProperty,H$e=(t,e,n)=>e in t?z$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ey=(t,e,n)=>H$e(t,typeof e!="symbol"?e+"":e,n);class G$e{constructor(e){Ey(this,"name","near"),Ey(this,"client"),Ey(this,"httpProviders"),Ey(this,"events"),Ey(this,"namespace"),Ey(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ua(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace);return typeof r>"u"?void 0:new rc(new el(r,Cn("disableProviderPing")))}}var q$e=Object.defineProperty,V$e=(t,e,n)=>e in t?q$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cy=(t,e,n)=>V$e(t,typeof e!="symbol"?e+"":e,n);class K$e{constructor(e){Cy(this,"name","tezos"),Cy(this,"client"),Cy(this,"httpProviders"),Cy(this,"events"),Cy(this,"namespace"),Cy(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||ua(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace);return typeof r>"u"?void 0:new rc(new el(r))}}var Y$e=Object.defineProperty,Q$e=(t,e,n)=>e in t?Y$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_y=(t,e,n)=>Q$e(t,typeof e!="symbol"?e+"":e,n);class J$e{constructor(e){_y(this,"name",Oy),_y(this,"client"),_y(this,"httpProviders"),_y(this,"events"),_y(this,"namespace"),_y(this,"chainId"),this.namespace=e.namespace,this.events=Cn("events"),this.client=Cn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(sc.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=w0(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||ua(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new rc(new el(r,Cn("disableProviderPing")))}}var Z$e=Object.defineProperty,X$e=Object.defineProperties,e6e=Object.getOwnPropertyDescriptors,C9=Object.getOwnPropertySymbols,t6e=Object.prototype.hasOwnProperty,n6e=Object.prototype.propertyIsEnumerable,k3=(t,e,n)=>e in t?Z$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,GA=(t,e)=>{for(var n in e||(e={}))t6e.call(e,n)&&k3(t,n,e[n]);if(C9)for(var n of C9(e))n6e.call(e,n)&&k3(t,n,e[n]);return t},UO=(t,e)=>X$e(t,e6e(e)),_a=(t,e,n)=>k3(t,typeof e!="symbol"?e+"":e,n);let r6e=class SX{constructor(e){_a(this,"client"),_a(this,"namespaces"),_a(this,"optionalNamespaces"),_a(this,"sessionProperties"),_a(this,"scopedProperties"),_a(this,"events",new bU),_a(this,"rpcProviders",{}),_a(this,"session"),_a(this,"providerOpts"),_a(this,"logger"),_a(this,"uri"),_a(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:b1(Lm({level:(e==null?void 0:e.logger)||u9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new SX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:GA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,AT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Fn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=w9(this.session.namespaces);this.namespaces=HA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=w9(s.namespaces);return this.namespaces=HA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===Oy?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(vf(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await PBe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||u9,relayUrl:this.providerOpts.relayUrl||OBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Xy(n)))];LO("client",this.client),LO("events",this.events),LO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=g$e(n,this.session),s=_X(r),i=HA(this.namespaces,this.optionalNamespaces),o=UO(GA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new A$e({namespace:o});break;case"algorand":this.rpcProviders[n]=new k$e({namespace:o});break;case"solana":this.rpcProviders[n]=new I$e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new R$e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new w$e({namespace:o});break;case"cip34":this.rpcProviders[n]=new L$e({namespace:o});break;case"elrond":this.rpcProviders[n]=new $$e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new W$e({namespace:o});break;case"near":this.rpcProviders[n]=new G$e({namespace:o});break;case"tezos":this.rpcProviders[n]=new K$e({namespace:o});break;default:this.rpcProviders[Oy]?this.rpcProviders[Oy].updateNamespace(o):this.rpcProviders[Oy]=new J$e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&vf(o)&&this.events.emit("accountsChanged",o.map(y9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Xy(o),l=MO(o)!==MO(a)?`${c}:${MO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=UO(GA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",UO(GA({},Fn("USER_DISCONNECTED")),{data:e.topic})))}),this.on(sc.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Oy]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=HA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Xy(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Xy(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(y9);if(!vf(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${WA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${WA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${WA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(WA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var _9={};const s6e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof _9<"u"?_9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},D3={filterOutDuplicatesByRDNS(t){const e=ve.state.enableEIP6963?Fe.state.connectors:[],n=Qe.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ot.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=Fe.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Qe.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=Fe.state,{featuredWalletIds:n}=ve.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=ve.state.features)==null?void 0:c.connectMethodsOrder),r=e||Fe.state.connectors;if(n)return n;const{injected:s,announced:i}=$S.getConnectorsByType(r,ct.state.recommended,ct.state.featured),o=s.filter($S.showConnector),a=i.filter($S.showConnector);return o.length||a.length?["wallet","email","social"]:s6e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&ct.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&ct.state.excludedWallets.some(r=>IT.isLowerCaseMatch(r.name,t.name));return e||n}},$S={getConnectorsByType(t,e,n){const{customWallets:r}=ve.state,s=Qe.getRecentWallets(),i=D3.filterOutDuplicateWallets(e),o=D3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&ct.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&ct.state.excludedWallets.some(i=>IT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ot.isMobile()||ot.isMobile()&&!e&&!vt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(H.state.chains.values()).some(n=>Fe.getConnectorId(n.namespace)===je.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=ve.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=$S.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:ve.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(y=>y.isEnabled),p=new Set(f.map(y=>y.type)),g=c.filter(y=>p.has(y)).map(y=>({type:y,isEnabled:!0})),w=f.filter(({type:y})=>!g.some(({type:v})=>v===y));return Array.from(new Set([...g,...w].map(({type:y})=>y)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const FS=globalThis,zU=FS.ShadowRoot&&(FS.ShadyCSS===void 0||FS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,HU=Symbol(),A9=new WeakMap;let xX=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==HU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(zU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=A9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&A9.set(n,e))}return e}toString(){return this.cssText}};const xa=t=>new xX(typeof t=="string"?t:t+"",void 0,HU),hd=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new xX(n,t,HU)},i6e=(t,e)=>{if(zU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=FS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},S9=zU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return xa(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:o6e,defineProperty:a6e,getOwnPropertyDescriptor:c6e,getOwnPropertyNames:l6e,getOwnPropertySymbols:u6e,getPrototypeOf:d6e}=Object,Cf=globalThis,x9=Cf.trustedTypes,h6e=x9?x9.emptyScript:"",BO=Cf.reactiveElementPolyfillSupport,LE=(t,e)=>t,M3={toAttribute(t,e){switch(e){case Boolean:t=t?h6e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},IX=(t,e)=>!o6e(t,e),I9={attribute:!0,type:String,converter:M3,reflect:!1,useDefault:!1,hasChanged:IX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),Cf.litPropertyMetadata??(Cf.litPropertyMetadata=new WeakMap);let ky=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=I9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&a6e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=c6e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??I9}static _$Ei(){if(this.hasOwnProperty(LE("elementProperties")))return;const e=d6e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(LE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(LE("properties"))){const n=this.properties,r=[...l6e(n),...u6e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(S9(s))}else e!==void 0&&n.push(S9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return i6e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:M3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:M3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??IX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};ky.elementStyles=[],ky.shadowRootOptions={mode:"open"},ky[LE("elementProperties")]=new Map,ky[LE("finalized")]=new Map,BO==null||BO({ReactiveElement:ky}),(Cf.reactiveElementVersions??(Cf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const UE=globalThis,xI=UE.trustedTypes,N9=xI?xI.createPolicy("lit-html",{createHTML:t=>t}):void 0,NX="$lit$",vh=`lit$${Math.random().toFixed(9).slice(2)}$`,TX="?"+vh,f6e=`<${TX}>`,dm=document,c_=()=>dm.createComment(""),l_=t=>t===null||typeof t!="object"&&typeof t!="function",GU=Array.isArray,p6e=t=>GU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",$O=`[ 	
\f\r]`,Pv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T9=/-->/g,R9=/>/g,pp=RegExp(`>|${$O}(?:([^\\s"'>=/]+)(${$O}*=${$O}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),P9=/'/g,O9=/"/g,RX=/^(?:script|style|textarea|title)$/i,PX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),iKe=PX(1),oKe=PX(2),rb=Symbol.for("lit-noChange"),bs=Symbol.for("lit-nothing"),k9=new WeakMap,Jp=dm.createTreeWalker(dm,129);function OX(t,e){if(!GU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return N9!==void 0?N9.createHTML(e):e}const g6e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=Pv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===Pv?u[1]==="!--"?o=T9:u[1]!==void 0?o=R9:u[2]!==void 0?(RX.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=pp):u[3]!==void 0&&(o=pp):o===pp?u[0]===">"?(o=s??Pv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?pp:u[3]==='"'?O9:P9):o===O9||o===P9?o=pp:o===T9||o===R9?o=Pv:(o=pp,s=void 0);const f=o===pp&&t[a+1].startsWith("/>")?" ":"";i+=o===Pv?c+f6e:d>=0?(r.push(l),c.slice(0,d)+NX+c.slice(d)+vh+f):c+vh+(d===-2?a:f)}return[OX(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class u_{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=g6e(e,n);if(this.el=u_.createElement(l,r),Jp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Jp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(NX)){const h=u[o++],f=s.getAttribute(d).split(vh),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?y6e:p[1]==="?"?w6e:p[1]==="@"?b6e:$T}),s.removeAttribute(d)}else d.startsWith(vh)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(RX.test(s.tagName)){const d=s.textContent.split(vh),h=d.length-1;if(h>0){s.textContent=xI?xI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],c_()),Jp.nextNode(),c.push({type:2,index:++i});s.append(d[h],c_())}}}else if(s.nodeType===8)if(s.data===TX)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(vh,d+1))!==-1;)c.push({type:7,index:i}),d+=vh.length-1}i++}}static createElement(e,n){const r=dm.createElement("template");return r.innerHTML=e,r}}function sb(t,e,n=t,r){var o,a;if(e===rb)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=l_(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=sb(t,s._$AS(t,e.values),s,r)),e}class m6e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??dm).importNode(n,!0);Jp.currentNode=s;let i=Jp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new P1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new v6e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Jp.nextNode(),o++)}return Jp.currentNode=dm,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class P1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=bs,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=sb(this,e,n),l_(e)?e===bs||e==null||e===""?(this._$AH!==bs&&this._$AR(),this._$AH=bs):e!==this._$AH&&e!==rb&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):p6e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==bs&&l_(this._$AH)?this._$AA.nextSibling.data=e:this.T(dm.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=u_.createElement(OX(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new m6e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=k9.get(e.strings);return n===void 0&&k9.set(e.strings,n=new u_(e)),n}k(e){GU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new P1(this.O(c_()),this.O(c_()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class $T{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=bs,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=bs}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=sb(this,e,n,0),o=!l_(e)||e!==this._$AH&&e!==rb,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=sb(this,a[r+c],n,c),l===rb&&(l=this._$AH[c]),o||(o=!l_(l)||l!==this._$AH[c]),l===bs?e=bs:e!==bs&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===bs?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class y6e extends $T{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===bs?void 0:e}}class w6e extends $T{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==bs)}}class b6e extends $T{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=sb(this,e,n,0)??bs)===rb)return;const r=this._$AH,s=e===bs&&r!==bs||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==bs&&(r===bs||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class v6e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){sb(this,e)}}const FO=UE.litHtmlPolyfillSupport;FO==null||FO(u_,P1),(UE.litHtmlVersions??(UE.litHtmlVersions=[])).push("3.3.1");const E6e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new P1(e.insertBefore(c_(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Lg=globalThis;let jS=class extends ky{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=E6e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return rb}};var FW;jS._$litElement$=!0,jS.finalized=!0,(FW=Lg.litElementHydrateSupport)==null||FW.call(Lg,{LitElement:jS});const jO=Lg.litElementPolyfillSupport;jO==null||jO({LitElement:jS});(Lg.litElementVersions??(Lg.litElementVersions=[])).push("4.2.1");let BE,_f,Af;function cKe(t,e){BE=document.createElement("style"),_f=document.createElement("style"),Af=document.createElement("style"),BE.textContent=b0(t).core.cssText,_f.textContent=b0(t).dark.cssText,Af.textContent=b0(t).light.cssText,document.head.appendChild(BE),document.head.appendChild(_f),document.head.appendChild(Af),kX(e)}function kX(t){_f&&Af&&(t==="light"?(_f.removeAttribute("media"),Af.media="enabled"):(Af.removeAttribute("media"),_f.media="enabled"))}function C6e(t){BE&&_f&&Af&&(BE.textContent=b0(t).core.cssText,_f.textContent=b0(t).dark.cssText,Af.textContent=b0(t).light.cssText)}function b0(t){return{core:hd`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${xa(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${xa((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${xa((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${xa((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${xa((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:hd`
      :root {
        --w3m-color-mix: ${xa((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${xa(td(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${xa(td(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:hd`
      :root {
        --w3m-color-mix: ${xa((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${xa(td(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${xa(td(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const lKe=hd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,uKe=hd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,dKe=hd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Yv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},II=XY({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),NI=XY({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function O1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const TI=O1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),RI=O1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),DX=O1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});O1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});O1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const _6e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},WS={getMethodsByChainNamespace(t){return _6e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case TI.caipNetworkId:u.chains.push(TI.deprecatedCaipNetworkId);break;case RI.caipNetworkId:u.chains.push(RI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await TE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let MX=class{constructor({provider:e,namespace:n}){this.id=je.CONNECTOR_ID.WALLET_CONNECT,this.name=uI.ConnectorNamesMap[je.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=uI.ConnectorImageIds[je.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=H.getCaipNetworks.bind(H),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=ve.state.universalProviderConfigOverride,s=WS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return OE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:A6e})}};const A6e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let S6e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>H.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:je.CONNECTOR_ID.AUTH,type:"AUTH",name:je.CONNECTOR_NAMES.AUTH,provider:e,imageId:uI.ConnectorImageIds[je.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ye.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ye.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof MX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class x6e extends S6e{setUniversalProvider(e){this.addConnector(new MX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&jn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ye.state.balanceLoading&&e.chainId===((c=H.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ye.state.balance||"0.00",symbol:Ye.state.balanceSymbol||""};const s=(await Ye.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=H.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===je.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:RJ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=H.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=H.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===je.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Ya(n.id)}]}))}catch(u){if(u.code===Yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Yv.ERROR_INVALID_CHAIN_ID||u.code===Yv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Yv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Ya(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const I6e=["email","socials","swaps","onramp","activity","reownBranding"],qA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?jn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?jn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?jn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?jn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?jn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?jn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?jn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?jn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?jn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},N6e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=qA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=qA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return qA[t].processApi(e)},processFallbackFeature(t,e){return qA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await ct.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?jn.DEFAULT_REMOTE_FEATURES:jn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of I6e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),jn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Fl.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class T6e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=H.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=H.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=H.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return H.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>H.getCaipNetworks(n),this.getActiveChainNamespace=()=>H.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{H.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>H.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>H.state.activeChain===n||!n?H.state.activeCaipAddress:H.getAccountProp("caipAddress",n),this.setClientId=n=>{bt.setClientId(n)},this.getProvider=n=>$n.getProvider(n),this.getProviderType=n=>$n.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ye.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ye.setCaipAddress(n,r),n&&ve.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ye.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ye.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ye.setProfileImage(n,r)},this.setUser=(n,r)=>{Ye.setUser(n,r)},this.resetAccount=n=>{Ye.resetAccount(n)},this.setCaipNetwork=n=>{H.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{H.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ye.setAllAccounts(n,r),ve.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ye.setStatus(n,r),Fe.isConnected()?Qe.setConnectionStatus("connected"):Qe.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>H.getAccountProp("address",n),this.setConnectors=n=>{const r=[...Fe.state.allConnectors,...n];Fe.setConnectors(r)},this.setConnections=(n,r)=>{vt.setConnections(n,r)},this.fetchIdentity=n=>bt.fetchIdentity(n),this.getReownName=n=>TE.getNamesForAddress(n),this.getConnectors=()=>Fe.getConnectors(),this.getConnectorImage=n=>iK.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=$n.getProviderId(r),i=n?{...n,type:s}:void 0;Ye.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!H.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ye.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ye.removeAddressLabel(n,r)},this.getAddress=n=>H.state.activeChain===n||!n?Ye.state.address:H.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>H.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{H.resetNetwork(n)},this.addConnector=n=>{Fe.addConnector(n)},this.resetWcConnection=()=>{vt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ye.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ye.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{H.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ye.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{ve.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await N6e.fetchRemoteFeatures(e),ve.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&BD.setOnrampProviders(this.remoteFeatures.onramp),((n=ve.state.remoteFeatures)!=null&&n.email||Array.isArray((r=ve.state.remoteFeatures)==null?void 0:r.socials)&&((s=ve.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await ct.fetchAllowedOrigins();if(e&&ot.isClient()){const n=window.location.origin;WS.isOriginAllowed(n,e,Yv.DEFAULT_ALLOWED_ANCESTORS)||Fl.open(kl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Fl.open(kl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,fr.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&lo.setThemeMode(e.themeMode),e.themeVariables&&lo.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");H.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&H.setActiveCaipNetwork(n)}initializeConnectionController(e){vt.setWcBasic(e.basic??!1)}initializeConnectorController(){Fe.initialize(this.chainNamespaces)}initializeProjectSettings(e){ve.setProjectId(e.projectId),ve.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;ve.setDebug(e.debug!==!1),ve.setEnableWalletConnect(e.enableWalletConnect!==!1),ve.setEnableWalletGuide(e.enableWalletGuide!==!1),ve.setEnableWallets(e.enableWallets!==!1),ve.setEIP6963Enabled(e.enableEIP6963!==!1),ve.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),ve.setEnableAuthLogger(e.enableAuthLogger!==!1),ve.setCustomRpcUrls(e.customRpcUrls),ve.setEnableEmbedded(e.enableEmbedded),ve.setAllWallets(e.allWallets),ve.setIncludeWalletIds(e.includeWalletIds),ve.setExcludeWalletIds(e.excludeWalletIds),ve.setFeaturedWalletIds(e.featuredWalletIds),ve.setTokens(e.tokens),ve.setTermsConditionsUrl(e.termsConditionsUrl),ve.setPrivacyPolicyUrl(e.privacyPolicyUrl),ve.setCustomWallets(e.customWallets),ve.setFeatures(e.features),ve.setAllowUnsupportedChain(e.allowUnsupportedChain),ve.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),ve.setPreferUniversalLinks(e.experimental_preferUniversalLinks),ve.setDefaultAccountTypes(e.defaultAccountTypes);const n=Qe.getPreferredAccountTypes()||{},r={...ve.state.defaultAccountTypes,...n};Ye.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),ve.setMetadata(e.metadata),ve.setDisableAppend(e.disableAppend),ve.setEnableEmbedded(e.enableEmbedded),ve.setSIWX(e.siwx),!e.projectId){Fl.open(kl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===je.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");ve.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ot.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=Ry.getUnsupportedNetwork(`${n}:${e}`);H.setActiveCaipNetwork(r)}}getDefaultNetwork(){return Ry.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return Ry.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return Ry.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?Ry.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=$n.getProvider(e),s=$n.getProviderId(e),{caipAddress:i}=H.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Qe.removeConnectedNamespace(e),$n.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),Fe.removeConnectorId(e),H.resetAccount(e),H.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=H.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Qe.setConnectedNamespaces([...H.state.chains.keys()]),this.chainNamespaces.forEach(o=>{Fe.setConnectorId(ho.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,y,b,v,A;const c=H.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(N=>N.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((y=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:y[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Qe.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ye.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=H.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Qe.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=TTe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));_n.resetSend(),vt.resetWcConnection(),await OE.clearSessions(),Fe.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Qe.deleteConnectedSocialProvider(),fr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(H.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ye.state.address,provider:$n.getProvider(H.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(jn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(H.state.activeChain),s=$n.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===je.CHAIN.EVM){const n=this.getAdapter(H.state.activeChain),r=$n.getProvider(H.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ye.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:H.state.activeChain}),Ye.state.profileImage||!1},getEnsAddress:async e=>await WS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(H.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=$n.getProvider(H.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(H.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(H.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(H.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ye.state.address||this.updateNativeBalance(Ye.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},vt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if($n.getProviderId(H.state.activeChain)===ho.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=$n.getProvider(n),i=$n.getProviderId(n);if(e.chainNamespace===H.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===ho.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Hd.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new x6e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Qe.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Qe.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=H.state.activeChain===e,c=H.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ye.state.address,i=H.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=H.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=H.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=H.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===je.CHAIN.EVM&&ot.isSafeApp()&&Fe.setConnectorId(je.CONNECTOR_ID.SAFE,e);const n=Fe.getConnectorId(e);switch(this.setStatus("connecting",e),n){case je.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case je.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=Fe.getConnectorId(e),s=this.getCaipNetwork(e),o=Fe.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ot.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=H.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Hd.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Hd.validateCaipAddress(o),{chainId:f,address:p}=Hd.parseCaipAddress(h);if($n.setProviderId(n,ho.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&H.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==je.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:H.state.activeCaipNetwork});$n.setProvider(n,g)}else $n.setProvider(n,this.universalProvider);Fe.setConnectorId(je.CONNECTOR_ID.WALLET_CONNECT,n),Qe.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await H.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Hd.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){$n.setProviderId(s,e),$n.setProvider(s,n),Fe.setConnectorId(r,s)}async syncAllAccounts(e){const n=Fe.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===H.state.activeChain,r=H.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Qe.getActiveNetworkProps(),c=i||a,l=((d=H.state.activeCaipNetwork)==null?void 0:d.name)===je.UNSUPPORTED_NETWORK_NAME,u=H.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],y=w.find(v=>{var A;return((A=Hd.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=Hd.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===y),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===H.state.activeChain?ve.state.enableNetworkSwitch&&!ve.state.allowUnsupportedChain&&((h=H.state.activeCaipNetwork)==null?void 0:h.name)===je.UNSUPPORTED_NETWORK_NAME?H.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),IT.isLowerCaseMatch(s,Ye.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=Fe.getConnectorId(e),r=$n.getProviderId(e);if(r===ho.CONNECTOR_TYPE_ANNOUNCED||r===ho.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===ho.CONNECTOR_TYPE_WALLET_CONNECT){const i=$n.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===je.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===je.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!tK.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=H.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=OTe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};ve.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await r6e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{vt.setUri(e)}),this.universalProvider.on("connect",vt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),vt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(WS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ot.isCaipAddress(r[0])&&this.syncAccount(Hd.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ot.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){fr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(kl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=kl.ALERT_ERRORS[o];a&&(Fl.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&vt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return Es.open({...e,data:{swap:e.arguments}})}return Es.open(e)}async close(){await this.injectModalUi(),Es.close()}setLoading(e,n){Es.setLoading(e,n)}async disconnect(e){await vt.disconnect(e)}getSIWX(){return ve.state.siwx}getError(){return""}getChainId(){var e;return(e=H.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Fl.open(kl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await H.switchActiveNetwork(n)}getWalletProvider(){return H.state.activeChain?$n.state.providers[H.state.activeChain]:null}getWalletProviderType(){return $n.getProviderId(H.state.activeChain)}subscribeProviders(e){return $n.subscribeProviders(e)}getThemeMode(){return lo.state.themeMode}getThemeVariables(){return lo.state.themeVariables}setThemeMode(e){lo.setThemeMode(e),kX(lo.state.themeMode)}setTermsConditionsUrl(e){ve.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){ve.setPrivacyPolicyUrl(e)}setThemeVariables(e){lo.setThemeVariables(e),C6e(lo.state.themeVariables)}subscribeTheme(e){return lo.subscribe(e)}getWalletInfo(){return Ye.state.connectedWalletInfo}getAccount(e){var o;const n=Fe.getAuthConnector(e),r=H.getAccountData(e),s=H.state.activeChain,i=Qe.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ot.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===je.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Qe.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?H.subscribeChainProp("accountState",r,n):H.subscribe(r),Fe.subscribe(r)}subscribeNetwork(e){return H.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ye.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ye.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){H.subscribeKey("activeCaipNetwork",e)}getState(){return Yl.state}subscribeState(e){return Yl.subscribe(e)}showErrorMessage(e){Mc.showError(e)}showSuccessMessage(e){Mc.showSuccess(e)}getEvent(){return{...fr.state}}subscribeEvents(e){return fr.subscribe(e)}replace(e){Ht.replace(e)}redirect(e){Ht.push(e)}popTransactionStack(e){Ht.popTransactionStack(e)}isOpen(){return Es.state.open}isTransactionStackEmpty(){return Ht.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){ve.setFeatures(e)}updateRemoteFeatures(e){ve.setRemoteFeatures(e)}updateOptions(e){const r={...ve.state||{},...e};ve.setOptions(r)}setConnectMethodsOrder(e){ve.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){ve.setWalletFeaturesOrder(e)}setCollapseWallets(e){ve.setCollapseWallets(e)}setSocialsOrder(e){ve.setSocialsOrder(e)}getConnectMethodsOrder(){return D3.getConnectOrderMethod(ve.state.features,Fe.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||H.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&H.removeNetwork(e,n)}}let D9=!1;class R6e extends T6e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{ta.checkIfRequestExists(n)?ta.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ws.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ws.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=ta.checkIfRequestIsSafe(r),i=Ye.state.address,o=H.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=H.state.activeChain;Fe.getConnectorId(n)===je.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=H.state.activeChain,s=r===je.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=ve.state.defaultAccountTypes[r],o=(l=Ye.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;IT.isLowerCaseMatch(n.address,Ye.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ye.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ot.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ot.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ye.state.user||{},username:n},H.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,H.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,H.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ye.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=lo.getSnapshot(),l=ve.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:td(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:je.CONNECTOR_ID.AUTH,info:{name:je.CONNECTOR_ID.AUTH},type:ho.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=H.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):Fe.getConnectorId(n)===je.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Qe.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ot.isTelegram())return;const r=Qe.getTelegramSocialProvider();if(!r||!ot.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ye.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=Fe.getAuthConnector();r&&o&&(this.setLoading(!0,e),await vt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Qe.setConnectedSocialProvider(r),Qe.removeTelegramSocialProvider(),fr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=eOe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:kl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Fl.open(kl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Fl.open(kl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Fl.open(kl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Yl.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&ct.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=H.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=$n.getProvider(r),u=$n.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=$n.getProviderId(n)===ho.CONNECTOR_TYPE_AUTH,u=$n.getProviderId(r),d=u===ho.CONNECTOR_TYPE_AUTH,h=je.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(H.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:je.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:ho.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===ho.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Yl.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==je.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=$n.getProviderId(e);if(n===ho.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Qe.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ot.isClient()&&!D9)try{const e={...jn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ot.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!ve.state.disableAppend&&!ve.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}D9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ot.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(ai(()=>import("./embedded-wallet-DSeKewHR.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(ai(()=>import("./email-BVqHFXrP.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(ai(()=>import("./socials-DlB7bi_b.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(ai(()=>import("./swaps-Dspqn6RC.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(ai(()=>import("./send-DlNUxFpP.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(ai(()=>import("./receive-Bt_BqQSF.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(ai(()=>import("./onramp-DHEFY5sV.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(ai(()=>import("./transactions-CVEnnuhU.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(ai(()=>import("./index-DgzltG6f.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,ai(()=>import("./index-DeokrzBa.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),ai(()=>import("./w3m-modal-uklpKtDF.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let ah;function P6e(t){t&&(ah=t)}function k1(){if(!ah)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(ah==null?void 0:ah.open(n))}async function e(){await(ah==null?void 0:ah.close())}return{open:t,close:e}}const O6e="1.7.8";let VA;function k6e(t){return VA||(VA=new R6e({...t,sdkVersion:ot.generateSdkVersion(t.adapters??[],"react",O6e)}),P6e(VA)),VA}const D6e=Xc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),M9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],M6e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=D6e({isOpen:t}),{open:i}=k1(),o=P.useRef(null),[a,c]=P.useState([]),[l,u]=P.useState(!0),[d,h]=P.useState(null),[f,p]=P.useState("all"),[g,w]=P.useState(1),[y,b]=P.useState(1),[v,A]=P.useState(0),[C,N]=P.useState(null),[x,T]=P.useState(M9[0]),[S,D]=P.useState(!1),[O,$]=P.useState(null),G=P.useCallback(async()=>{var M,j;try{if((M=window.solana)!=null&&M.isPhantom){const q=await window.solana.connect();$(q.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const q=await window.solflare.connect();$(q.publicKey.toString());return}i()}catch(q){console.error("Failed to connect Solana wallet:",q),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}D(!1)},[i]);P.useEffect(()=>{var M,j;(M=window.solana)!=null&&M.publicKey?$(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&$(window.solflare.publicKey.toString())},[]),P.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let q,se=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!O){D(!0),u(!1);return}se=O||void 0,q=await ZV(x.slug,50),console.log("Fetched Solana NFTs from collection:",q.data.length),f==="owned"&&O&&(console.log("Filtering for owner:",O),console.log("Sample NFT owner data:",(j=q.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",q.data.map(Y=>({name:Y.name,owners:Y.owners,owner_of:Y.owner_of}))),q.data.some(Y=>Y.owners&&Y.owners.length>0)?(q.data=q.data.filter(Y=>{const te=Y.owners.some(fe=>fe.owner_of&&fe.owner_of.toLowerCase()===O.toLowerCase());return te&&console.log("Found owned NFT:",Y.name),te}),console.log("NFTs after filtering:",q.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?q=await kL(x.slug,50,se):q=await OL(x.slug,g,50,se);c(q.data),b(q.totalPages),A(q.totalCount)}catch(q){q instanceof Error?h(q.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,O]),P.useEffect(()=>{S&&G()},[S,G]);const W=M=>new Date(M).toLocaleDateString(),I=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},B=async M=>{if(x.api==="opensea"&&x.chain)try{const j=await JV(x.chain,M.address,M.token_id.toString()),q={...M,attributes:JSON.stringify(j.traits||[])};N(q)}catch(j){console.error("Failed to fetch full NFT details",j),N(M)}else N(M)},k=M=>{T(M),w(1)};return t?m.jsxs(m.Fragment,{children:[m.jsx(r1,{nodeRef:o,handle:`.${s.header}`,children:m.jsxs("div",{ref:o,className:s.popup,children:[m.jsxs("div",{className:s.header,children:[m.jsx("span",{children:"LAWB NFT GALLERY"}),m.jsxs("div",{className:s.titleBarButtons,children:[m.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),m.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),m.jsx("div",{className:s.collectionSelector,children:M9.map(M=>m.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>k(M),children:M.name},M.slug))}),m.jsxs("div",{className:s.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),m.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!O,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||O?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||O?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{G()},style:{background:O?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:O?"white":"black",marginLeft:"auto"},children:O?`Solana: ${O.slice(0,4)}...${O.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!O&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?m.jsx("div",{children:"Loading NFTs..."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(O==null?void 0:O.slice(0,6))+"..."+(O==null?void 0:O.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?m.jsx("div",{children:"No NFTs found."}):m.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>m.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{B(M)},children:[m.jsx(eK,{src:XV(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),m.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:m.jsxs("strong",{children:["#",M.token_id]})}),m.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I(M)]}),m.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(M.created_at)]})]},M.id))}),f!=="recent"&&y>1&&m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[m.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),m.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",y]}),m.jsx("button",{onClick:()=>w(M=>Math.min(y,M+1)),disabled:g===y,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===y?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&m.jsx(nye,{nft:C,onClose:()=>N(null)})]}):null};var KA,L6e=new Uint8Array(16);function U6e(){if(!KA&&(KA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!KA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return KA(L6e)}const B6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $6e(t){return typeof t=="string"&&B6e.test(t)}var Os=[];for(var WO=0;WO<256;++WO)Os.push((WO+256).toString(16).substr(1));function F6e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Os[t[e+0]]+Os[t[e+1]]+Os[t[e+2]]+Os[t[e+3]]+"-"+Os[t[e+4]]+Os[t[e+5]]+"-"+Os[t[e+6]]+Os[t[e+7]]+"-"+Os[t[e+8]]+Os[t[e+9]]+"-"+Os[t[e+10]]+Os[t[e+11]]+Os[t[e+12]]+Os[t[e+13]]+Os[t[e+14]]+Os[t[e+15]]).toLowerCase();if(!$6e(n))throw TypeError("Stringified UUID is invalid");return n}function j6e(t,e,n){t=t||{};var r=t.random||(t.rng||U6e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,F6e(r)}const W6e=Xc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),z6e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],H6e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],Bo=500;function LX(){const t=W6e(),e=P.useRef(null),[n,r]=P.useState(null),[s,i]=P.useState(""),[o,a]=P.useState(""),[c,l]=P.useState(50),[u,d]=P.useState(50),[h,f]=P.useState(!1),[p,g]=P.useState(!1),[w,y]=P.useState(!1),[b,v]=P.useState(!1),[A,C]=P.useState(!1),[N,x]=P.useState([]),[T,S]=P.useState(null),D=P.useRef(null),[O,$]=P.useState(null),G=async X=>{const ce=X.getContext("2d");if(!ce)return;ce.clearRect(0,0,X.width,X.height),n?await new Promise(ge=>{const we=new window.Image;we.crossOrigin="anonymous",we.onload=()=>{const at=Math.min(X.width/we.width,X.height/we.height),tt=(X.width-we.width*at)/2,lt=(X.height-we.height*at)/2;ce.drawImage(we,tt,lt,we.width*at,we.height*at),ge()},we.onerror=()=>ge(),we.src=n}):(ce.fillStyle="#333",ce.fillRect(0,0,X.width,X.height)),(ge=>{ge.textAlign="center",ge.strokeStyle="black",ge.lineWidth=3,ge.fillStyle="white";const we=(at,tt)=>{const lt=at.toUpperCase().split(" "),ut=[];let Hn=lt[0];for(let Yn=1;Yn<lt.length;Yn++){const Ue=lt[Yn];ge.measureText(Hn+" "+Ue).width<tt?Hn+=" "+Ue:(ut.push(Hn),Hn=Ue)}return ut.push(Hn),ut};if(s&&(ge.font=`${c}px Impact`,we(s,Bo-20).forEach((tt,lt)=>{const ut=c+lt*c*1.2;ge.strokeText(tt,Bo/2,ut),ge.fillText(tt,Bo/2,ut)})),o){ge.font=`${u}px Impact`;const at=we(o,Bo-20);at.forEach((tt,lt)=>{const ut=Bo-(at.length-lt)*u*1.2+u;ge.strokeText(tt,Bo/2,ut),ge.fillText(tt,Bo/2,ut)})}})(ce),await Promise.all(N.map(ge=>new Promise(we=>{const at=new window.Image;at.src=ge.src,at.onload=()=>{ce.save(),ce.translate(ge.x,ge.y),ce.rotate(ge.rotation*Math.PI/180),ce.scale(ge.scale,ge.scale),ce.drawImage(at,-40,-40,80,80),ce.restore(),we()},at.onerror=()=>we()})));try{h&&W(X),p&&I(X),w&&R(X)}catch(ge){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",ge),f(!1),g(!1),y(!1)}},W=X=>{const ce=X.getContext("2d");if(!ce)return;const de=ce.getImageData(0,0,X.width,X.height),ge=de.data;for(let we=0;we<ge.length;we+=4){const at=ge[we],tt=ge[we+1],lt=ge[we+2],ut=(at+tt+lt)/3,Hn=1.8;ge[we]=Math.min(255,ut+(at-ut)*Hn),ge[we+1]=Math.min(255,ut+(tt-ut)*Hn*.7),ge[we+2]=Math.min(255,ut+(lt-ut)*Hn*.4);const Yn=1.3;ge[we]=Math.min(255,Math.max(0,ge[we]*Yn)),ge[we+1]=Math.min(255,Math.max(0,ge[we+1]*Yn)),ge[we+2]=Math.min(255,Math.max(0,ge[we+2]*Yn))}ce.putImageData(de,0,0)},I=X=>{const ce=X.getContext("2d");if(!ce)return;const de=4,we=ce.getImageData(0,0,X.width,X.height).data,at=new Uint8ClampedArray(we);for(let tt=0;tt<X.height;tt+=de)for(let lt=0;lt<X.width;lt+=de){const ut=(tt*X.width+lt)*4,Hn=we[ut],Yn=we[ut+1],Ue=we[ut+2],It=we[ut+3];for(let Lt=0;Lt<de&&tt+Lt<X.height;Lt++)for(let We=0;We<de&&lt+We<X.width;We++){const fn=((tt+Lt)*X.width+(lt+We))*4;at[fn]=Hn,at[fn+1]=Yn,at[fn+2]=Ue,at[fn+3]=It}}ce.putImageData(new ImageData(at,X.width,X.height),0,0)},R=X=>{const ce=X.getContext("2d");if(!ce)return;const de=ce.getImageData(0,0,X.width,X.height),ge=de.data;for(let we=0;we<ge.length;we+=4){const at=(Math.random()-.5)*50;ge[we]=Math.max(0,Math.min(255,ge[we]+at)),ge[we+1]=Math.max(0,Math.min(255,ge[we+1]+at)),ge[we+2]=Math.max(0,Math.min(255,ge[we+2]+at))}ce.putImageData(de,0,0)};P.useEffect(()=>{e.current&&G(e.current)},[G]);const B=P.useRef(null),k=500,M=X=>{X.preventDefault(),B.current=setTimeout(()=>{const ce=e.current;ce&&(navigator.share?ce.toBlob(de=>{if(de){const ge=new File([de],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[ge]}).catch(()=>{te()})}}):te())},k)},j=()=>{B.current&&(clearTimeout(B.current),B.current=null)},q=()=>{B.current&&(clearTimeout(B.current),B.current=null)},se=X=>{X.preventDefault()},ie=X=>{var de;const ce=(de=X.target.files)==null?void 0:de[0];ce&&r(URL.createObjectURL(ce))},Y=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),y(!1)},te=async()=>{const X=e.current;if(!X)return;await G(X);const ce=document.createElement("a");ce.download="meme.png",ce.href=X.toDataURL("image/png"),document.body.appendChild(ce),ce.click(),document.body.removeChild(ce)},fe=async X=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",X);let ce;if(X.api==="opensea"){console.log("Using OpenSea API for:",X.slug);const de=await kL(X.slug,50);ce=de.data,console.log("OpenSea response:",de)}else if(X.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",X.slug);const de=await ZV(X.slug,50);if(ce=de.data,console.log("Helius Solana response:",de),!ce||ce.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",X.slug);const de=await OL(X.slug,1,50);ce=de.data,console.log("Scatter response:",de)}if(ce&&ce.length>0){const de=ce[Math.floor(Math.random()*ce.length)],ge=de.image||de.image_url||de.image_url_shrunk;console.log("Selected NFT:",de),console.log("Image URL:",ge),r(ge)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ce){console.error("Error fetching NFTs:",ce),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},Xe=X=>{const ce={id:j6e(),src:X,x:80,y:80,scale:1,rotation:0};x(de=>de.length>=2||de.some(ge=>ge.src===X&&!ge.id.startsWith("upload-"))?de:[...de,ce]),$(ce.id)},Le=X=>{var de;const ce=(de=X.target.files)==null?void 0:de[0];if(ce){const ge=URL.createObjectURL(ce);Xe(ge)}},De=(X,ce,de)=>{x(ge=>ge.map(we=>{if(we.id!==X)return we;let at=we.x+ce/1.2,tt=we.y+de/1.2;const lt=40*we.scale,ut=40*we.scale;return at=Math.max(lt,Math.min(Bo-lt,at)),tt=Math.max(ut,Math.min(Bo-ut,tt)),{...we,x:at,y:tt}}))},wt=(X,ce,de,ge,we)=>{x(at=>at.map(tt=>{if(tt.id!==X)return tt;const lt=tt.x,ut=tt.y,Hn=Math.atan2(we-ut,ge-lt)*180/Math.PI;return{...tt,rotation:de+(Hn-ce)*.5}}))},Mt=X=>{x(ce=>ce.filter(de=>de.id!==X))},ln=(X,ce)=>{x(de=>de.map(ge=>ge.id===X?{...ge,scale:Math.max(.2,ge.scale*(1+(ce-1)*.2))}:ge))};return m.jsxs("div",{className:t.container,children:[m.jsxs("div",{className:t.header,children:[m.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),m.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",m.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),m.jsxs("div",{className:t.content,children:[m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Collections"}),m.jsxs("div",{className:t.row,children:[m.jsxs("div",{className:t.dropdown,children:[m.jsx("button",{className:t.button,onClick:()=>v(X=>!X),children:"Collections"}),b&&m.jsx("div",{className:t.dropdownContent,children:z6e.map(X=>m.jsx("div",{className:t.dropdownItem,onClick:()=>{fe(X)},children:X.name},X.id))})]}),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:ie})]}),A&&m.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Text"}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Top Text:"}),m.jsx("input",{className:t.input,type:"text",value:s,onChange:X=>i(X.target.value),placeholder:"Enter top text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:X=>l(Number(X.target.value)),style:{width:60,textAlign:"center"}})]}),m.jsxs("div",{className:t.row,children:[m.jsx("span",{className:t.label,children:"Bottom Text:"}),m.jsx("input",{className:t.input,type:"text",value:o,onChange:X=>a(X.target.value),placeholder:"Enter bottom text..."}),m.jsx("span",{className:t.label,children:"Size:"}),m.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:X=>d(Number(X.target.value)),style:{width:60,textAlign:"center"}})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Effects"}),m.jsxs("div",{className:t.row,children:[m.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(X=>!X),children:"Deep Fry"}),m.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(X=>!X),children:"Pixelate"}),m.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>y(X=>!X),children:"Grain"})]})]}),m.jsxs("div",{className:t.section,children:[m.jsx("div",{className:t.sectionTitle,children:"Stickers"}),m.jsxs("div",{className:t.row,children:[H6e.map((X,ce)=>m.jsx("img",{src:X,alt:`sticker${ce+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Xe(X)},X)),m.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",m.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:D,onChange:Le})]})]})]}),m.jsxs("div",{className:t.actions,children:[m.jsx("button",{className:t.button,onClick:te,children:"Save Image"}),m.jsx("button",{className:t.button,onClick:Y,children:"Restart"})]})]}),m.jsx("div",{className:t.memeArea,children:m.jsx("canvas",{ref:e,width:Bo,height:Bo,className:t.canvas,onTouchStart:M,onTouchEnd:j,onTouchMove:q,onContextMenu:se,style:{touchAction:"none"}})}),m.jsx("div",{style:{position:"absolute",left:0,top:0,width:Bo,height:Bo,pointerEvents:"none"},children:N.map(X=>O===X.id?m.jsxs("div",{style:{position:"absolute",left:X.x,top:X.y,width:80*X.scale,height:80*X.scale,transform:`rotate(${X.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ce=>{S(X.id),ce.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ce=>{T===X.id&&ce.buttons===1&&De(X.id,ce.movementX,ce.movementY)},children:[m.jsx("img",{src:X.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),m.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ce=>{var Hn;ce.stopPropagation();const de=(Hn=ce.currentTarget.parentElement)==null?void 0:Hn.getBoundingClientRect(),ge=de?de.left+de.width/2:0,we=de?de.top+de.height/2:0,at=Math.atan2(ce.clientY-we,ce.clientX-ge)*180/Math.PI,tt=X.rotation,lt=Yn=>{wt(X.id,at,tt,Yn.clientX,Yn.clientY)},ut=()=>{window.removeEventListener("mousemove",lt),window.removeEventListener("mouseup",ut)};window.addEventListener("mousemove",lt),window.addEventListener("mouseup",ut)}}),m.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ce=>{ce.stopPropagation();const de=ce.clientX,ge=at=>{const tt=(at.clientX-de)/80;ln(X.id,1+tt)},we=()=>{window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",we)};window.addEventListener("mousemove",ge),window.addEventListener("mouseup",we)}}),m.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Mt(X.id),children:""}),m.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>$(null),children:"Place"})]},X.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d_(){return d_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d_.apply(this,arguments)}var Xh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xh||(Xh={}));const L9="popstate";function G6e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return L3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:BX(s)}return V6e(e,n,null,t)}function os(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function UX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function q6e(){return Math.random().toString(36).substr(2,8)}function U9(t,e){return{usr:t.state,key:t.key,idx:e}}function L3(t,e,n,r){return n===void 0&&(n=null),d_({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zb(e):e,{state:n,key:e&&e.key||r||q6e()})}function BX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function V6e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Xh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(d_({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Xh.Pop;let w=u(),y=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:y})}function h(w,y){a=Xh.Push;let b=L3(g.location,w,y);l=u()+1;let v=U9(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,y){a=Xh.Replace;let b=L3(g.location,w,y);l=u();let v=U9(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:BX(w);return b=b.replace(/ $/,"%20"),os(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(L9,d),c=w,()=>{s.removeEventListener(L9,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let y=p(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var B9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(B9||(B9={}));function K6e(t,e,n){return n===void 0&&(n="/"),Y6e(t,e,n)}function Y6e(t,e,n,r){let s=typeof e=="string"?zb(e):e,i=jX(s.pathname||"/",n);if(i==null)return null;let o=$X(t);Q6e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=c8e(i);a=i8e(o[c],l)}return a}function $X(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(os(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Ug([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(os(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),$X(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:r8e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of FX(i.path))s(i,o,c)}),e}function FX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=FX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function Q6e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:s8e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const J6e=/^:[\w-]+$/,Z6e=3,X6e=2,e8e=1,t8e=10,n8e=-2,$9=t=>t==="*";function r8e(t,e){let n=t.split("/"),r=n.length;return n.some($9)&&(r+=n8e),e&&(r+=X6e),n.filter(s=>!$9(s)).reduce((s,i)=>s+(J6e.test(i)?Z6e:i===""?e8e:t8e),r)}function s8e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function i8e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=o8e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Ug([i,d.pathname]),pathnameBase:p8e(Ug([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=Ug([i,d.pathnameBase]))}return o}function o8e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=a8e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function a8e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),UX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function c8e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return UX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function l8e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?zb(t):t;return{pathname:n?n.startsWith("/")?n:u8e(n,e):e,search:g8e(r),hash:m8e(s)}}function u8e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function zO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d8e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function h8e(t,e){let n=d8e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function f8e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=zb(t):(s=d_({},t),os(!s.pathname||!s.pathname.includes("?"),zO("?","pathname","search",s)),os(!s.pathname||!s.pathname.includes("#"),zO("#","pathname","hash",s)),os(!s.search||!s.search.includes("#"),zO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=l8e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Ug=t=>t.join("/").replace(/\/\/+/g,"/"),p8e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),g8e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,m8e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function y8e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const WX=["post","put","patch","delete"];new Set(WX);const w8e=["get",...WX];new Set(w8e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function h_(){return h_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h_.apply(this,arguments)}const qU=P.createContext(null),b8e=P.createContext(null),FT=P.createContext(null),jT=P.createContext(null),Hb=P.createContext({outlet:null,matches:[],isDataRoute:!1}),zX=P.createContext(null);function WT(){return P.useContext(jT)!=null}function HX(){return WT()||os(!1),P.useContext(jT).location}function GX(t){P.useContext(FT).static||P.useLayoutEffect(t)}function v8e(){let{isDataRoute:t}=P.useContext(Hb);return t?k8e():E8e()}function E8e(){WT()||os(!1);let t=P.useContext(qU),{basename:e,future:n,navigator:r}=P.useContext(FT),{matches:s}=P.useContext(Hb),{pathname:i}=HX(),o=JSON.stringify(h8e(s,n.v7_relativeSplatPath)),a=P.useRef(!1);return GX(()=>{a.current=!0}),P.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=f8e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ug([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function C8e(t,e){return _8e(t,e)}function _8e(t,e,n,r){WT()||os(!1);let{navigator:s}=P.useContext(FT),{matches:i}=P.useContext(Hb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=HX(),u;if(e){var d;let w=typeof e=="string"?zb(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||os(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=K6e(t,{pathname:f}),g=N8e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:Ug([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ug([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?P.createElement(jT.Provider,{value:{location:h_({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xh.Pop}},g):g}function A8e(){let t=O8e(),e=y8e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const S8e=P.createElement(A8e,null);class x8e extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Hb.Provider,{value:this.props.routeContext},P.createElement(zX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I8e(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(qU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Hb.Provider,{value:e},r)}function N8e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||os(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||S8e,c&&(l<0&&h===0?(D8e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=P.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,P.createElement(I8e,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?P.createElement(x8e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var qX=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(qX||{}),VX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(VX||{});function T8e(t){let e=P.useContext(qU);return e||os(!1),e}function R8e(t){let e=P.useContext(b8e);return e||os(!1),e}function P8e(t){let e=P.useContext(Hb);return e||os(!1),e}function KX(t){let e=P8e(),n=e.matches[e.matches.length-1];return n.route.id||os(!1),n.route.id}function O8e(){var t;let e=P.useContext(zX),n=R8e(),r=KX();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function k8e(){let{router:t}=T8e(qX.UseNavigateStable),e=KX(VX.UseNavigateStable),n=P.useRef(!1);return GX(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,h_({fromRouteId:e},i)))},[t,e])}const F9={};function D8e(t,e,n){F9[t]||(F9[t]=!0)}function M8e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zS(t){os(!1)}function L8e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Xh.Pop,navigator:i,static:o=!1,future:a}=t;WT()&&os(!1);let c=e.replace(/^\/*/,"/"),l=P.useMemo(()=>({basename:c,navigator:i,static:o,future:h_({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=zb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=P.useMemo(()=>{let w=jX(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:P.createElement(FT.Provider,{value:l},P.createElement(jT.Provider,{children:n,value:g}))}function U8e(t){let{children:e,location:n}=t;return C8e(U3(e),n)}new Promise(()=>{});function U3(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,U3(r.props.children,i));return}r.type!==zS&&os(!1),!r.props.index||!r.props.children||os(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=U3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const B8e="6";try{window.__reactRouterVersion=B8e}catch{}const $8e="startTransition",j9=wre[$8e];function F8e(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=G6e({window:s,v5Compat:!0}));let o=i.current,[a,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=P.useCallback(d=>{l&&j9?j9(()=>c(d)):c(d)},[c,l]);return P.useLayoutEffect(()=>o.listen(u),[o,u]),P.useEffect(()=>M8e(r),[r]),P.createElement(L8e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var W9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(W9||(W9={}));var z9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(z9||(z9={}));const j8e=Xc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function W8e(){const t=j8e(),{open:e}=k1(),[n,r]=P.useState(),[s,i]=P.useState(!1),[o,a]=P.useState("pixelawbs-popup"),[c,l]=P.useState(new Set),[u,d]=P.useState(!1),[h,f]=P.useState(!1),[p,g]=P.useState(!1),[w,y]=P.useState(!1),b=v8e(),v=P.useRef(null);P.useEffect(()=>{if(o==="halloween-popup"&&v.current){const I=v.current.querySelector("script[data-tiktok-embed]");I&&I.remove();const R=document.createElement("script");R.src="https://www.tiktok.com/embed.js",R.async=!0,R.setAttribute("data-tiktok-embed","true"),v.current.appendChild(R)}},[o]);const A=(I,R,B)=>{if(I==="url"&&B)window.open(B,"_blank");else if(I==="popup"&&R)a(R),l(k=>{const M=new Set(k);return M.delete(R),M}),document.body.offsetWidth;else if(I==="wallet")s?(i(!1),r(void 0)):e();else if(I==="mint"){if(!n){alert("Please connect your wallet first!");return}d(!0)}else I==="nft-gallery"?f(!0):I==="meme-generator"?g(!0):I==="chess"&&(s?y(!0):e().then(()=>{const k=()=>{window.ethereum&&window.ethereum.selectedAddress?y(!0):setTimeout(k,200)};k()}))},C=()=>a(null),N=I=>{l(R=>new Set(R).add(I)),a(null)},x=I=>{I==="mint-popup"?d(!0):I==="nft-gallery-popup"?f(!0):I==="meme-generator-popup"?g(!0):a(I),l(R=>{const B=new Set(R);return B.delete(I),B})},T=()=>d(!1),S=()=>f(!1),D=()=>g(!1),O=()=>{d(!1),l(I=>new Set(I).add("mint-popup"))},$=()=>{f(!1),l(I=>new Set(I).add("nft-gallery-popup"))},G=()=>{g(!1),l(I=>new Set(I).add("meme-generator-popup"))},W=m.jsxs("div",{onClick:()=>{s?(i(!1),r(void 0)):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:s?"limegreen":"red",fontWeight:"bold"},children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:s?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return m.jsxs("div",{className:t.body,children:[w&&m.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[m.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{y(!1),b("/chess")}}),m.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),m.jsx(Kme,{onIconClick:A}),m.jsx(Qme,{minimizedWindows:Array.from(c),onRestoreWindow:x,walletButton:W,connectionStatus:{connected:s,address:n,ens:void 0}}),m.jsxs(Ia,{id:"chat-popup",isOpen:o==="chat-popup",onClose:C,onMinimize:N,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",m.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),m.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ia,{id:"purity-popup",isOpen:o==="purity-popup",onClose:C,onMinimize:N,children:[m.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),m.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),m.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),m.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ia,{id:"lawbstarz-popup",isOpen:o==="lawbstarz-popup",onClose:C,onMinimize:N,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[m.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",m.jsx("br",{}),m.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",m.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",m.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),m.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(Ia,{id:"lawbstation-popup",isOpen:o==="lawbstation-popup",onClose:C,onMinimize:N,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(Ia,{id:"nexus-popup",isOpen:o==="nexus-popup",onClose:C,onMinimize:N,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsxs(Ia,{id:"lawbsters-popup",isOpen:o==="lawbsters-popup",onClose:C,onMinimize:N,children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx(yfe,{id:"1620879129850834944"})}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsx(Ia,{id:"pixelawbs-popup",isOpen:o==="pixelawbs-popup",onClose:C,onMinimize:N,children:(()=>{const I=R=>{R.preventDefault(),a(null),d(!0)};return m.jsxs(m.Fragment,{children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:I,children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),m.jsxs(Ia,{id:"halloween-popup",isOpen:o==="halloween-popup",onClose:C,onMinimize:N,children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),m.jsx("div",{ref:v,style:{maxWidth:"400px",margin:"0 auto"},children:m.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:m.jsxs("section",{children:[m.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",m.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),m.jsxs(Ia,{id:"lawb-popup",isOpen:o==="lawb-popup",onClose:C,onMinimize:N,children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),m.jsx(Xme,{isOpen:u,onClose:T,onMinimize:O,walletAddress:n||""}),m.jsx(M6e,{isOpen:h,onClose:S,onMinimize:$,walletAddress:n}),m.jsx(Ia,{id:"meme-generator-popup",isOpen:p,onClose:D,onMinimize:G,children:m.jsx(LX,{})})]})}function aa(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const HS="2.17.3",z8e=()=>`@wagmi/core@${HS}`;var YX=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},PI,QX;let Od=class B3 extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return z8e()}constructor(e,n={}){var i;super(),PI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof B3?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof B3&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return YX(this,PI,"m",QX).call(this,this,e)}};PI=new WeakSet,QX=function t(e,n){return n!=null&&n(e)?e:e.cause?YX(this,PI,"m",t).call(this,e.cause,n):e};class f_ extends Od{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class H8e extends Od{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class G8e extends Od{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class q8e extends Od{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class V8e extends Od{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class K8e extends Od{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function GS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new H8e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function D1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new K8e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new G8e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new V8e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=kr(e.account??n.accounts[0]);if(o&&(o.address=nd(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new q8e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return zY({account:o,chain:a,name:"Connector Client",transport:l=>lEe(c)({...l,retryCount:0})})}async function $3(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function Y8e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await D1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return aa(o,iT,"estimateGas")({...s,account:i})}function JX(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(fbe[t])}function v0(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function Q8e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return aa(o,cQ,"multicall")({allowFailure:n,contracts:s,...i})}function ZX(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return aa(s,su,"readContract")(r)}async function J8e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>Q8e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof nY)throw c;const l=()=>o.map(u=>ZX(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function XX(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await H9(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await H9(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=RK(Ql(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await aa(c,ZL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:Tm(u,JX(a)),symbol:d.nativeCurrency.symbol,value:u}}async function H9(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await J8e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=Tm(c??"0",JX(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function G9(t){return t.state.chainId}function Bf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Bf(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Bf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let HO=[];function q9(t){const e=t.chains;return Bf(HO,e)?HO:(HO=e,e)}function Z8e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let YA=[];function vc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Bf(YA,e)?YA:(YA=e,e)}let GO=[];function V9(t){const e=t.connectors;return Bf(GO,e)?GO:(GO=e,e)}function X8e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return aa(s,YY,"getEnsName")(r)}function F3(t,e={}){const n=Z8e(t,e);return n==null?void 0:n.extend(I_e)}async function e4e(t,e={}){return(await D1(t,e)).extend(j_e)}async function t4e(t,e){const{account:n,chainId:r,...s}=e,i=n??v0(t).address,o=t.getClient({chainId:r});return aa(o,p1,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let qO=!1;async function j3(t,e={}){var l,u;if(qO)return[];qO=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),qO=!1,a}async function n4e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await D1(t,{account:n??void 0,chainId:r,connector:s}),await aa(o,y1,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function r4e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await D1(t,{account:n,connector:r}),aa(i,LQ,"signMessage")({...s,...n?{account:n}:{}})}class ph extends Od{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class s4e extends Od{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function W3(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new s4e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new f_;return t.setState(a=>({...a,chainId:r})),i}function eee(t,e){const{onChange:n}=e;return t.subscribe(()=>v0(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Bf(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function i4e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function tee(t,e){const{onChange:n}=e;return t.subscribe(()=>vc(t),n,{equalityFn:Bf})}function nee(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function o4e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=aa(l,DQ,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function a4e(t,e){const{onChange:n}=e;return t.subscribe(()=>F3(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function ree(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await aa(i,kQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await aa(i,fT,"getTransaction")({hash:a.transactionHash}),d=await aa(i,g1,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?RK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function see(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await D1(t,{account:n??void 0,chainId:r,connector:s}),await aa(o,UY,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function pKe(t){return t}zT.type="injected";function zT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...c4e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:zT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,y,b;const d=await this.getProvider();if(!d)throw new ph;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>nd(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Jr.code)throw new Jr(A);if(A.code===wf.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>nd(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===Jr.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((y=c.storage)==null?void 0:y.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Jr.code?new Jr(A):A.code===wf.code?new wf(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new ph;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await HY(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new ph;return(await l.request({method:"eth_accounts"})).map(d=>nd(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new ph;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=qS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(y=>window.addEventListener("ethereum#initialized",()=>y(p()),{once:!0}))]:[],new Promise(y=>setTimeout(()=>y(p()),g))]))return!0}throw new ph}return!!(await rI(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,y;const d=await this.getProvider();if(!d)throw new ph;const h=c.chains.find(b=>b.id===u);if(!h)throw new nu(new f_);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let N;l!=null&&l.blockExplorerUrls?N=l.blockExplorerUrls:A&&(N=[A.url,...Object.values(C).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((y=h.rpcUrls.default)==null?void 0:y.http[0])??""];const T={blockExplorerUrls:N,chainId:nt(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[T]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Jr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Jr(A)}throw v.code===Jr.code?new Jr(v):new nu(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>nd(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const c4e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:qS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return qS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:qS(t,"isPhantom")}}};function qS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function l4e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function u4e(){const t=new Set;let e=[];const n=()=>l4e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const d4e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},h4e=d4e;function f4e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const z3=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return z3(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return z3(r)(n)}}}},p4e=(t,e)=>(n,r,s)=>{let i={storage:f4e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const y=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return z3(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,C]=b;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{y==null||y(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{y==null||y(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},g4e=p4e,K9=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},VO=t=>t?K9(t):K9;var iee={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(y-1);v<y;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,C;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),y){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(y-1);C<y;C++)b[C-1]=arguments[C];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(iee);var m4e=iee.exports;const y4e=vm(m4e);class w4e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new y4e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function b4e(t){return new w4e(t)}function v4e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function Y9(t,e){return t.slice(0,e).join(".")||"."}function Q9(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function E4e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=Q9(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=Q9(s,c);if(u!==0)return r?e.call(this,a,c,Y9(i,u)):`[ref=${Y9(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function C4e(t,e,n,r){return JSON.stringify(t,E4e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function _4e(t){const{deserialize:e=v4e,key:n="wagmi",serialize:r=C4e,storage:s=oee}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const oee={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function A4e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:oee;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const H3=256;let QA=H3,JA;function S4e(t=11){if(!JA||QA+t>H3*2){JA="",QA=0;for(let e=0;e<H3;e++)JA+=(256+Math.random()*256|0).toString(16).substring(1)}return JA.substring(QA,QA+++t)}function aee(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=_4e({storage:A4e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?u4e():void 0,a=VO(()=>i.chains),c=VO(()=>{const C=[],N=new Set;for(const x of i.connectors??[]){const T=l(x);if(C.push(T),!s&&T.rdns){const S=typeof T.rdns=="string"?[T.rdns]:T.rdns;for(const D of S)N.add(D)}}if(!s&&o){const x=o.getProviders();for(const T of x)N.has(T.info.rdns)||C.push(l(u(T)))}return C});function l(C){var T;const N=b4e(S4e()),x={...C({emitter:N,chains:a.getState(),storage:n,transports:i.transports}),emitter:N,uid:N.uid};return N.on("connect",v),(T=x.setup)==null||T.call(x),x}function u(C){const{info:N}=C,x=C.provider;return zT({target:{...N,id:N.rdns,provider:x}})}const d=new Map;function h(C={}){const N=C.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===N);if(C.chainId&&!x)throw new f_;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new f_}{const S=d.get(N);if(S)return S}let T;if(i.client)T=i.client({chain:x});else{const S=x.id,D=a.getState().map(G=>G.id),O={},$=Object.entries(i);for(const[G,W]of $)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(S in W)O[G]=W[S];else{if(D.some(R=>R in W))continue;O[G]=W}else O[G]=W;T=zY({...O,chain:x,batch:O.batch??{multicall:!0},transport:G=>i.transports[S]({...G,connectors:c})})}return d.set(N,T),T}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";HS.startsWith(g)?p=Number.parseInt(HS.replace(g,"")):p=Number.parseInt(HS.split(".")[0]??"0");const w=VO(h4e(n?g4e(f,{migrate(C,N){if(N===p)return C;const x=f(),T=y(C,x.chainId);return{...x,chainId:T}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([N,x])=>{const{id:T,name:S,type:D,uid:O}=x.connector;return[N,{...x,connector:{id:T,name:S,type:D,uid:O}}]})},chainId:C.chainId,current:C.current}},merge(C,N){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=y(C,N.chainId);return{...N,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function y(C,N){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:N}r&&w.subscribe(({connections:C,current:N})=>{var x;return N?(x=C.get(N))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return w.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const N=new Set,x=new Set;for(const S of c.getState())if(N.add(S.id),S.rdns){const D=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const O of D)x.add(O)}const T=[];for(const S of C){if(x.has(S.info.rdns))continue;const D=l(u(S));N.has(D.id)||T.push(D)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...T],!0)});function b(C){w.setState(N=>{const x=N.connections.get(C.uid);return x?{...N,connections:new Map(N.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:N})}function v(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(N=>{const x=c.getState().find(T=>T.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...N,connections:new Map(N.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):N})}function A(C){w.setState(N=>{const x=N.connections.get(C.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(N.connections.delete(C.uid),N.connections.size===0)return{...N,connections:new Map,current:null,status:"disconnected"};const T=N.connections.values().next().value;return{...N,connections:new Map(N.connections),current:T.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let N;typeof C=="function"?N=C(w.getState()):N=C;const x=f();typeof N!="object"&&(N=x),Object.keys(x).some(S=>!(S in N))&&(N=x),w.setState(N,!0)},subscribe(C,N,x){return w.subscribe(C,N,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const N=typeof C=="function"?C(a.getState()):C;if(N.length!==0)return a.setState(N,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:v,disconnect:A}}}}function x4e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?j3(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function I4e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=x4e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=P.useRef(!0);return P.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const cee=P.createContext(void 0);function N4e(t){const{children:e,config:n}=t,r={value:n};return P.createElement(I4e,t,P.createElement(cee.Provider,r,e))}const T4e="2.15.6",R4e=()=>`wagmi@${T4e}`;class P4e extends Od{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return R4e()}}class O4e extends P4e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function $i(t={}){const e=t.config??P.useContext(cee);if(!e)throw new O4e;return e}function k4e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var lee={exports:{}},uee={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=P,D4e=eV;function M4e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var L4e=typeof Object.is=="function"?Object.is:M4e,U4e=D4e.useSyncExternalStore,B4e=HT.useRef,$4e=HT.useEffect,F4e=HT.useMemo,j4e=HT.useDebugValue;uee.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=B4e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=F4e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,L4e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=U4e(t,i[0],i[1]);return $4e(function(){o.hasValue=!0,o.value=a},[a]),j4e(a),a};lee.exports=uee;var dee=lee.exports;const KO=t=>typeof t=="object"&&!Array.isArray(t);function W4e(t,e,n=e,r=Bf){const s=P.useRef([]),i=dee.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(KO(o)&&KO(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return P.useMemo(()=>{if(KO(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function Gb(t={}){const e=$i(t);return W4e(n=>eee(e,{onChange:n}),()=>v0(e))}var qb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},hm=typeof window>"u"||"Deno"in globalThis;function Ai(){}function z4e(t,e){return typeof t=="function"?t(e):t}function G3(t){return typeof t=="number"&&t>=0&&t!==1/0}function hee(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Sf(t,e){return typeof t=="function"?t(e):t}function Fa(t,e){return typeof t=="function"?t(e):t}function J9(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==VU(o,e.options))return!1}else if(!p_(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function Z9(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(fm(e.options.mutationKey)!==fm(i))return!1}else if(!p_(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function VU(t,e){return((e==null?void 0:e.queryKeyHashFn)||fm)(t)}function fm(t){return JSON.stringify(t,(e,n)=>q3(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function p_(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>p_(t[n],e[n])):!1}function KU(t,e){if(t===e)return t;const n=X9(t)&&X9(e);if(n||q3(t)&&q3(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=KU(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function OI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function X9(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function q3(t){if(!e7(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!e7(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function e7(t){return Object.prototype.toString.call(t)==="[object Object]"}function H4e(t){return new Promise(e=>{setTimeout(e,t)})}function V3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?KU(t,e):e}function G4e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function q4e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var YU=Symbol();function fee(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===YU?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function pee(t,e){return typeof t=="function"?t(...e):!!t}var tg,Eh,I0,jW,V4e=(jW=class extends qb{constructor(){super();Q(this,tg);Q(this,Eh);Q(this,I0);L(this,I0,e=>{if(!hm&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,Eh)||this.setEventListener(_(this,I0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Eh))==null||e.call(this),L(this,Eh,void 0))}setEventListener(e){var n;L(this,I0,e),(n=_(this,Eh))==null||n.call(this),L(this,Eh,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,tg)!==e&&(L(this,tg,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,tg)=="boolean"?_(this,tg):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},tg=new WeakMap,Eh=new WeakMap,I0=new WeakMap,jW),QU=new V4e,N0,Ch,T0,WW,K4e=(WW=class extends qb{constructor(){super();Q(this,N0,!0);Q(this,Ch);Q(this,T0);L(this,T0,e=>{if(!hm&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,Ch)||this.setEventListener(_(this,T0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,Ch))==null||e.call(this),L(this,Ch,void 0))}setEventListener(e){var n;L(this,T0,e),(n=_(this,Ch))==null||n.call(this),L(this,Ch,e(this.setOnline.bind(this)))}setOnline(e){_(this,N0)!==e&&(L(this,N0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,N0)}},N0=new WeakMap,Ch=new WeakMap,T0=new WeakMap,WW),kI=new K4e;function K3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function Y4e(t){return Math.min(1e3*2**t,3e4)}function gee(t){return(t??"online")==="online"?kI.isOnline():!0}var mee=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function YO(t){return t instanceof mee}function yee(t){let e=!1,n=0,r=!1,s;const i=K3(),o=g=>{var w;r||(h(new mee(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>QU.isFocused()&&(t.networkMode==="always"||kI.isOnline())&&t.canRun(),u=()=>gee(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=y=>{(r||l())&&g(y)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(y){g=Promise.reject(y)}Promise.resolve(g).then(d).catch(y=>{var N;if(r)return;const b=t.retry??(hm?0:3),v=t.retryDelay??Y4e,A=typeof v=="function"?v(n,y):v,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,y);if(e||!C){h(y);return}n++,(N=t.onFail)==null||N.call(t,n,y),H4e(A).then(()=>l()?void 0:f()).then(()=>{e?h(y):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var Q4e=t=>setTimeout(t,0);function J4e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=Q4e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var es=J4e(),ng,zW,wee=(zW=class{constructor(){Q(this,ng)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),G3(this.gcTime)&&L(this,ng,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(hm?1/0:5*60*1e3))}clearGcTimeout(){_(this,ng)&&(clearTimeout(_(this,ng)),L(this,ng,void 0))}},ng=new WeakMap,zW),R0,rg,Oa,sg,ri,N_,ig,Cc,Nu,HW,Z4e=(HW=class extends wee{constructor(e){super();Q(this,Cc);Q(this,R0);Q(this,rg);Q(this,Oa);Q(this,sg);Q(this,ri);Q(this,N_);Q(this,ig);L(this,ig,!1),L(this,N_,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,sg,e.client),L(this,Oa,_(this,sg).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,R0,X4e(this.options)),this.state=e.state??_(this,R0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,ri))==null?void 0:e.promise}setOptions(e){this.options={..._(this,N_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,Oa).remove(this)}setData(e,n){const r=V3(this.state.data,e,this.options);return he(this,Cc,Nu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){he(this,Cc,Nu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,ri))==null?void 0:r.promise;return(s=_(this,ri))==null||s.cancel(e),n?n.then(Ai).catch(Ai):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,R0))}isActive(){return this.observers.some(e=>Fa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===YU||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Sf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!hee(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,ri))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,ri))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,Oa).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,ri)&&(_(this,ig)?_(this,ri).cancel({revert:!0}):_(this,ri).cancelRetry()),this.scheduleGc()),_(this,Oa).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||he(this,Cc,Nu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,ri))return _(this,ri).continueRetry(),_(this,ri).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(L(this,ig,!0),r.signal)})},i=()=>{const h=fee(this.options,n),p=(()=>{const g={client:_(this,sg),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return L(this,ig,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,sg),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),L(this,rg,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&he(this,Cc,Nu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;YO(h)&&h.silent||he(this,Cc,Nu).call(this,{type:"error",error:h}),YO(h)||((p=(f=_(this,Oa).config).onError)==null||p.call(f,h,this),(w=(g=_(this,Oa).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return L(this,ri,yee({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(y){c(y);return}(p=(f=_(this,Oa).config).onSuccess)==null||p.call(f,h,this),(w=(g=_(this,Oa).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{he(this,Cc,Nu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{he(this,Cc,Nu).call(this,{type:"pause"})},onContinue:()=>{he(this,Cc,Nu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,ri).start()}},R0=new WeakMap,rg=new WeakMap,Oa=new WeakMap,sg=new WeakMap,ri=new WeakMap,N_=new WeakMap,ig=new WeakMap,Cc=new WeakSet,Nu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...bee(r.data,this.options),fetchMeta:e.meta??null};case"success":return L(this,rg,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return YO(s)&&s.revert&&_(this,rg)?{..._(this,rg),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),es.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,Oa).notify({query:this,type:"updated",action:e})})},HW);function bee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function X4e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var bl,GW,eFe=(GW=class extends qb{constructor(e={}){super();Q(this,bl);this.config=e,L(this,bl,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??VU(s,n);let o=this.get(i);return o||(o=new Z4e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,bl).has(e.queryHash)||(_(this,bl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,bl).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,bl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){es.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,bl).get(e)}getAll(){return[..._(this,bl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>J9(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>J9(e,r)):n}notify(e){es.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){es.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){es.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},bl=new WeakMap,GW),vl,bi,og,El,ch,qW,tFe=(qW=class extends wee{constructor(e){super();Q(this,El);Q(this,vl);Q(this,bi);Q(this,og);this.mutationId=e.mutationId,L(this,bi,e.mutationCache),L(this,vl,[]),this.state=e.state||vee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,vl).includes(e)||(_(this,vl).push(e),this.clearGcTimeout(),_(this,bi).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,vl,_(this,vl).filter(n=>n!==e)),this.scheduleGc(),_(this,bi).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,vl).length||(this.state.status==="pending"?this.scheduleGc():_(this,bi).remove(this))}continue(){var e;return((e=_(this,og))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,y,b,v,A,C,N,x,T;const n=()=>{he(this,El,ch).call(this,{type:"continue"})};L(this,og,yee({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,D)=>{he(this,El,ch).call(this,{type:"failed",failureCount:S,error:D})},onPause:()=>{he(this,El,ch).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,bi).canRun(this)}));const r=this.state.status==="pending",s=!_(this,og).canStart();try{if(r)n();else{he(this,El,ch).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,bi).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));D!==this.state.context&&he(this,El,ch).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const S=await _(this,og).start();return await((u=(l=_(this,bi).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=_(this,bi).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),he(this,El,ch).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(y=_(this,bi).config).onError)==null?void 0:b.call(y,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((N=(C=_(this,bi).config).onSettled)==null?void 0:N.call(C,void 0,S,this.state.variables,this.state.context,this)),await((T=(x=this.options).onSettled)==null?void 0:T.call(x,void 0,S,e,this.state.context)),S}finally{he(this,El,ch).call(this,{type:"error",error:S})}}finally{_(this,bi).runNext(this)}}},vl=new WeakMap,bi=new WeakMap,og=new WeakMap,El=new WeakSet,ch=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),es.batch(()=>{_(this,vl).forEach(r=>{r.onMutationUpdate(e)}),_(this,bi).notify({mutation:this,type:"updated",action:e})})},qW);function vee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Lu,_c,T_,VW,nFe=(VW=class extends qb{constructor(e={}){super();Q(this,Lu);Q(this,_c);Q(this,T_);this.config=e,L(this,Lu,new Set),L(this,_c,new Map),L(this,T_,0)}build(e,n,r){const s=new tFe({mutationCache:this,mutationId:++$d(this,T_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,Lu).add(e);const n=ZA(e);if(typeof n=="string"){const r=_(this,_c).get(n);r?r.push(e):_(this,_c).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,Lu).delete(e)){const n=ZA(e);if(typeof n=="string"){const r=_(this,_c).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,_c).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=ZA(e);if(typeof n=="string"){const r=_(this,_c).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=ZA(e);if(typeof n=="string"){const s=(r=_(this,_c).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){es.batch(()=>{_(this,Lu).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,Lu).clear(),_(this,_c).clear()})}getAll(){return Array.from(_(this,Lu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>Z9(n,r))}findAll(e={}){return this.getAll().filter(n=>Z9(e,n))}notify(e){es.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return es.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ai))))}},Lu=new WeakMap,_c=new WeakMap,T_=new WeakMap,VW);function ZA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function t7(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},y=fee(e.options,e.fetchOptions),b=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const O={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return w(O),O})(),T=await y(x),{maxPages:S}=e.options,D=C?q4e:G4e;return{pages:D(v.pages,T,S),pageParams:D(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?rFe:n7,C={pages:i,pageParams:o},N=A(r,C);a=await b(C,N,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:n7(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function n7(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function rFe(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var xr,_h,Ah,P0,O0,Sh,k0,D0,KW,sFe=(KW=class{constructor(t={}){Q(this,xr);Q(this,_h);Q(this,Ah);Q(this,P0);Q(this,O0);Q(this,Sh);Q(this,k0);Q(this,D0);L(this,xr,t.queryCache||new eFe),L(this,_h,t.mutationCache||new nFe),L(this,Ah,t.defaultOptions||{}),L(this,P0,new Map),L(this,O0,new Map),L(this,Sh,0)}mount(){$d(this,Sh)._++,_(this,Sh)===1&&(L(this,k0,QU.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,xr).onFocus())})),L(this,D0,kI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,xr).onOnline())})))}unmount(){var t,e;$d(this,Sh)._--,_(this,Sh)===0&&((t=_(this,k0))==null||t.call(this),L(this,k0,void 0),(e=_(this,D0))==null||e.call(this),L(this,D0,void 0))}isFetching(t){return _(this,xr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,_h).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,xr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,xr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Sf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,xr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,xr).get(r.queryHash),i=s==null?void 0:s.state.data,o=z4e(e,i);if(o!==void 0)return _(this,xr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return es.batch(()=>_(this,xr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,xr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,xr);es.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,xr);return es.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=es.batch(()=>_(this,xr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Ai).catch(Ai)}invalidateQueries(t,e={}){return es.batch(()=>(_(this,xr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=es.batch(()=>_(this,xr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(Ai)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Ai)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,xr).build(this,e);return n.isStaleByTime(Sf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ai).catch(Ai)}fetchInfiniteQuery(t){return t.behavior=t7(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ai).catch(Ai)}ensureInfiniteQueryData(t){return t.behavior=t7(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return kI.isOnline()?_(this,_h).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,xr)}getMutationCache(){return _(this,_h)}getDefaultOptions(){return _(this,Ah)}setDefaultOptions(t){L(this,Ah,t)}setQueryDefaults(t,e){_(this,P0).set(fm(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,P0).values()],n={};return e.forEach(r=>{p_(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,O0).set(fm(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,O0).values()],n={};return e.forEach(r=>{p_(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,Ah).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=VU(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===YU&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,Ah).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,xr).clear(),_(this,_h).clear()}},xr=new WeakMap,_h=new WeakMap,Ah=new WeakMap,P0=new WeakMap,O0=new WeakMap,Sh=new WeakMap,k0=new WeakMap,D0=new WeakMap,KW),so,rn,R_,vi,ag,M0,xh,Ih,P_,L0,U0,cg,lg,Nh,B0,Rn,Qv,Y3,Q3,J3,Z3,X3,eM,tM,Eee,YW,iFe=(YW=class extends qb{constructor(e,n){super();Q(this,Rn);Q(this,so);Q(this,rn);Q(this,R_);Q(this,vi);Q(this,ag);Q(this,M0);Q(this,xh);Q(this,Ih);Q(this,P_);Q(this,L0);Q(this,U0);Q(this,cg);Q(this,lg);Q(this,Nh);Q(this,B0,new Set);this.options=n,L(this,so,e),L(this,Ih,null),L(this,xh,K3()),this.options.experimental_prefetchInRender||_(this,xh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,rn).addObserver(this),r7(_(this,rn),this.options)?he(this,Rn,Qv).call(this):this.updateResult(),he(this,Rn,Z3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nM(_(this,rn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nM(_(this,rn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,he(this,Rn,X3).call(this),he(this,Rn,eM).call(this),_(this,rn).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,rn);if(this.options=_(this,so).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Fa(this.options.enabled,_(this,rn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");he(this,Rn,tM).call(this),_(this,rn).setOptions(this.options),n._defaulted&&!OI(this.options,n)&&_(this,so).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,rn),observer:this});const s=this.hasListeners();s&&s7(_(this,rn),r,this.options,n)&&he(this,Rn,Qv).call(this),this.updateResult(),s&&(_(this,rn)!==r||Fa(this.options.enabled,_(this,rn))!==Fa(n.enabled,_(this,rn))||Sf(this.options.staleTime,_(this,rn))!==Sf(n.staleTime,_(this,rn)))&&he(this,Rn,Y3).call(this);const i=he(this,Rn,Q3).call(this);s&&(_(this,rn)!==r||Fa(this.options.enabled,_(this,rn))!==Fa(n.enabled,_(this,rn))||i!==_(this,Nh))&&he(this,Rn,J3).call(this,i)}getOptimisticResult(e){const n=_(this,so).getQueryCache().build(_(this,so),e),r=this.createResult(n,e);return aFe(this,r)&&(L(this,vi,r),L(this,M0,this.options),L(this,ag,_(this,rn).state)),r}getCurrentResult(){return _(this,vi)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,B0).add(e)}getCurrentQuery(){return _(this,rn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,so).defaultQueryOptions(e),r=_(this,so).getQueryCache().build(_(this,so),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return he(this,Rn,Qv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,vi)))}createResult(e,n){var S;const r=_(this,rn),s=this.options,i=_(this,vi),o=_(this,ag),a=_(this,M0),l=e!==r?e.state:_(this,R_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const D=this.hasListeners(),O=!D&&r7(e,n),$=D&&s7(e,r,n,s);(O||$)&&(d={...d,...bee(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let y=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let D;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,y=!0):D=typeof n.placeholderData=="function"?n.placeholderData((S=_(this,U0))==null?void 0:S.state.data,_(this,U0)):n.placeholderData,D!==void 0&&(w="success",f=V3(i==null?void 0:i.data,D,n),h=!0)}if(n.select&&f!==void 0&&!y)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,P_))f=_(this,L0);else try{L(this,P_,n.select),f=n.select(f),f=V3(i==null?void 0:i.data,f,n),L(this,L0,f),L(this,Ih,null)}catch(D){L(this,Ih,D)}_(this,Ih)&&(p=_(this,Ih),f=_(this,L0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",C=v&&b,N=f!==void 0,T={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!N,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&N,isStale:JU(e,n),refetch:this.refetch,promise:_(this,xh),isEnabled:Fa(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=G=>{T.status==="error"?G.reject(T.error):T.data!==void 0&&G.resolve(T.data)},O=()=>{const G=L(this,xh,T.promise=K3());D(G)},$=_(this,xh);switch($.status){case"pending":e.queryHash===r.queryHash&&D($);break;case"fulfilled":(T.status==="error"||T.data!==$.value)&&O();break;case"rejected":(T.status!=="error"||T.error!==$.reason)&&O();break}}return T}updateResult(){const e=_(this,vi),n=this.createResult(_(this,rn),this.options);if(L(this,ag,_(this,rn).state),L(this,M0,this.options),_(this,ag).data!==void 0&&L(this,U0,_(this,rn)),OI(n,e))return;L(this,vi,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,B0).size)return!0;const o=new Set(i??_(this,B0));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,vi)).some(a=>{const c=a;return _(this,vi)[c]!==e[c]&&o.has(c)})};he(this,Rn,Eee).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&he(this,Rn,Z3).call(this)}},so=new WeakMap,rn=new WeakMap,R_=new WeakMap,vi=new WeakMap,ag=new WeakMap,M0=new WeakMap,xh=new WeakMap,Ih=new WeakMap,P_=new WeakMap,L0=new WeakMap,U0=new WeakMap,cg=new WeakMap,lg=new WeakMap,Nh=new WeakMap,B0=new WeakMap,Rn=new WeakSet,Qv=function(e){he(this,Rn,tM).call(this);let n=_(this,rn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ai)),n},Y3=function(){he(this,Rn,X3).call(this);const e=Sf(this.options.staleTime,_(this,rn));if(hm||_(this,vi).isStale||!G3(e))return;const r=hee(_(this,vi).dataUpdatedAt,e)+1;L(this,cg,setTimeout(()=>{_(this,vi).isStale||this.updateResult()},r))},Q3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,rn)):this.options.refetchInterval)??!1},J3=function(e){he(this,Rn,eM).call(this),L(this,Nh,e),!(hm||Fa(this.options.enabled,_(this,rn))===!1||!G3(_(this,Nh))||_(this,Nh)===0)&&L(this,lg,setInterval(()=>{(this.options.refetchIntervalInBackground||QU.isFocused())&&he(this,Rn,Qv).call(this)},_(this,Nh)))},Z3=function(){he(this,Rn,Y3).call(this),he(this,Rn,J3).call(this,he(this,Rn,Q3).call(this))},X3=function(){_(this,cg)&&(clearTimeout(_(this,cg)),L(this,cg,void 0))},eM=function(){_(this,lg)&&(clearInterval(_(this,lg)),L(this,lg,void 0))},tM=function(){const e=_(this,so).getQueryCache().build(_(this,so),this.options);if(e===_(this,rn))return;const n=_(this,rn);L(this,rn,e),L(this,R_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},Eee=function(e){es.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,vi))}),_(this,so).getQueryCache().notify({query:_(this,rn),type:"observerResultsUpdated"})})},YW);function oFe(t,e){return Fa(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function r7(t,e){return oFe(t,e)||t.state.data!==void 0&&nM(t,e,e.refetchOnMount)}function nM(t,e,n){if(Fa(e.enabled,t)!==!1&&Sf(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&JU(t,e)}return!1}function s7(t,e,n,r){return(t!==e||Fa(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&JU(t,n)}function JU(t,e){return Fa(e.enabled,t)!==!1&&t.isStaleByTime(Sf(e.staleTime,t))}function aFe(t,e){return!OI(t.getCurrentResult(),e)}var Th,Rh,io,Uu,gd,VS,rM,QW,cFe=(QW=class extends qb{constructor(n,r){super();Q(this,gd);Q(this,Th);Q(this,Rh);Q(this,io);Q(this,Uu);L(this,Th,n),this.setOptions(r),this.bindMethods(),he(this,gd,VS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,Th).defaultMutationOptions(n),OI(this.options,r)||_(this,Th).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,io),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&fm(r.mutationKey)!==fm(this.options.mutationKey)?this.reset():((s=_(this,io))==null?void 0:s.state.status)==="pending"&&_(this,io).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,io))==null||n.removeObserver(this)}onMutationUpdate(n){he(this,gd,VS).call(this),he(this,gd,rM).call(this,n)}getCurrentResult(){return _(this,Rh)}reset(){var n;(n=_(this,io))==null||n.removeObserver(this),L(this,io,void 0),he(this,gd,VS).call(this),he(this,gd,rM).call(this)}mutate(n,r){var s;return L(this,Uu,r),(s=_(this,io))==null||s.removeObserver(this),L(this,io,_(this,Th).getMutationCache().build(_(this,Th),this.options)),_(this,io).addObserver(this),_(this,io).execute(n)}},Th=new WeakMap,Rh=new WeakMap,io=new WeakMap,Uu=new WeakMap,gd=new WeakSet,VS=function(){var r;const n=((r=_(this,io))==null?void 0:r.state)??vee();L(this,Rh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},rM=function(n){es.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,Uu)&&this.hasListeners()){const d=_(this,Rh).variables,h=_(this,Rh).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,Uu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,Uu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,Uu)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,Uu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,Rh))})})},QW);function lFe(t,e){return KU(t,e)}function uFe(t){return JSON.stringify(t,(e,n)=>dFe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function dFe(t){if(!i7(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!i7(n)||!n.hasOwnProperty("isPrototypeOf"))}function i7(t){return Object.prototype.toString.call(t)==="[object Object]"}function M1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:y,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:N,refetchInterval:x,refetchIntervalInBackground:T,refetchOnMount:S,refetchOnReconnect:D,refetchOnWindowFocus:O,retryOnMount:$,select:G,staleTime:W,suspense:I,throwOnError:R,config:B,connector:k,query:M,...j}=t;return j}function hFe(t){return{mutationFn(e){return GS(t,e)},mutationKey:["connect"]}}function fFe(t){return{mutationFn(e){return $3(t,e)},mutationKey:["disconnect"]}}function pFe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await XX(t,{...i,address:r})??null},queryKey:gFe(e)}}function gFe(t={}){return["balance",M1(t)]}function mFe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return X8e(t,{...i,address:r})},queryKey:yFe(e)}}function yFe(t={}){return["ensName",M1(t)]}function wFe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return e4e(t,{...o,connector:r})},queryKey:bFe(e)}}function bFe(t={}){const{connector:e,...n}=t;return["walletClient",{...M1(n),connectorUid:e==null?void 0:e.uid}]}function vFe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return ZX(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:EFe(e)}}function EFe(t={}){const{abi:e,...n}=t;return["readContract",M1(n)]}function CFe(t){return{mutationFn(e){return W3(t,e)},mutationKey:["switchChain"]}}function _Fe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return ree(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:AFe(e)}}function AFe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",M1(n)]}function SFe(t){return{mutationFn(e){return see(t,e)},mutationKey:["writeContract"]}}var Cee=P.createContext(void 0),ZU=t=>{const e=P.useContext(Cee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},xFe=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),m.jsx(Cee.Provider,{value:t,children:e})),_ee=P.createContext(!1),IFe=()=>P.useContext(_ee);_ee.Provider;function NFe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var TFe=P.createContext(NFe()),RFe=()=>P.useContext(TFe),PFe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},OFe=t=>{P.useEffect(()=>{t.clearReset()},[t])},kFe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||pee(n,[t.error,r])),DFe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},MFe=(t,e)=>t.isLoading&&t.isFetching&&!e,LFe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,o7=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function UFe(t,e,n){var d,h,f,p,g;const r=IFe(),s=RFe(),i=ZU(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",DFe(o),PFe(o,s),OFe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=P.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(w=>{const y=u?c.subscribe(es.batchCalls(w)):Ai;return c.updateResult(),y},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),P.useEffect(()=>{c.setOptions(o)},[o,c]),LFe(o,l))throw o7(o,c,s);if(kFe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!hm&&MFe(l,r)){const w=a?o7(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(Ai).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function BFe(t,e){return UFe(t,iFe)}function GT(t,e){const n=ZU(),[r]=P.useState(()=>new cFe(n,t));P.useEffect(()=>{r.setOptions(t)},[r,t]);const s=P.useSyncExternalStore(P.useCallback(o=>r.subscribe(es.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=P.useCallback((o,a)=>{r.mutate(o,a).catch(Ai)},[r]);if(s.error&&pee(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function L1(t){const e=BFe({...t,queryKeyHashFn:uFe});return e.queryKey=t.queryKey,e}function kd(t={}){const e=$i(t);return P.useSyncExternalStore(n=>i4e(e,{onChange:n}),()=>G9(e),()=>G9(e))}function $Fe(t={}){const{address:e,query:n={}}=t,r=$i(t),s=kd({config:r}),i=pFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return L1({...n,...i,enabled:o})}function FFe(t={}){const e=$i(t);return P.useSyncExternalStore(n=>k4e(e,{onChange:n}),()=>q9(e),()=>q9(e))}function jFe(t={}){const e=$i(t);return P.useSyncExternalStore(n=>nee(e,{onChange:n}),()=>V9(e),()=>V9(e))}function WFe(t={}){const{mutation:e}=t,n=$i(t),r=hFe(n),{mutate:s,mutateAsync:i,...o}=GT({...e,...r});return P.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:jFe({config:n})}}function zFe(t={}){const e=$i(t);return P.useSyncExternalStore(n=>tee(e,{onChange:n}),()=>vc(e),()=>vc(e))}function HFe(t={}){const{mutation:e}=t,n=$i(t),r=fFe(n),{mutate:s,mutateAsync:i,...o}=GT({...e,...r});return{...o,connectors:zFe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function GFe(t={}){const{address:e,query:n={}}=t,r=$i(t),s=kd({config:r}),i=mFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return L1({...n,...i,enabled:o})}function Aee(t={}){const e=$i(t);return dee.useSyncExternalStoreWithSelector(n=>a4e(e,{onChange:n}),()=>F3(e,t),()=>F3(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function ib(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=$i(t),a=kd({config:o}),c=vFe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return L1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??lFe})}function qFe(t={}){const{mutation:e}=t,n=$i(t),r=CFe(n),{mutate:s,mutateAsync:i,...o}=GT({...e,...r});return{...o,chains:FFe({config:n}),switchChain:s,switchChainAsync:i}}function VFe(t={}){const{query:e={},...n}=t,r=$i(n),s=ZU(),{address:i,connector:o,status:a}=Gb({config:r}),c=kd({config:r}),l=t.connector??o,{queryKey:u,...d}=wFe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=P.useRef(i);return P.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),L1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function rd(t={}){const{hash:e,query:n={}}=t,r=$i(t),s=kd({config:r}),i=_Fe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return L1({...n,...i,enabled:o})}function sd(t={}){const{mutation:e}=t,n=$i(t),r=SFe(n),{mutate:s,mutateAsync:i,...o}=GT({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const KFe=Xc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),a7=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],YFe=({onBack:t,walletAddress:e})=>{const n=KFe(),{open:r}=k1(),[s,i]=P.useState([]),[o,a]=P.useState(!0),[c,l]=P.useState(null),[u,d]=P.useState(a7[0]),[h,f]=P.useState(!1),[p,g]=P.useState(null),[w,y]=P.useState("all"),[b,v]=P.useState(null),A=P.useCallback(async()=>{var T,S;try{if((T=window.solana)!=null&&T.isPhantom){const D=await window.solana.connect();g(D.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const D=await window.solflare.connect();g(D.publicKey.toString());return}r()}catch(D){console.error("Failed to connect Solana wallet:",D),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);P.useEffect(()=>{var T,S;(T=window.solana)!=null&&T.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),P.useEffect(()=>{(async()=>{a(!0);try{let S,D=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}D=p,S=await Jme(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await kL(u.slug,100,D):S=await OL(u.slug,1,100,D);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some($=>$.owners&&$.owners.length>0)?S.data=S.data.filter($=>$.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),P.useEffect(()=>{h&&A()},[h,A]);const C=async T=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await JV(u.chain,T.address,T.token_id.toString()),D={...T,attributes:JSON.stringify(S.traits||[])};l(D)}catch(S){console.error("Failed to fetch full NFT details",S),l(T)}else l(T);a(!1)},N=()=>{if(!c)return null;let T=[];try{T=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return m.jsxs("div",{className:n.detailView,children:[m.jsx("img",{src:c.image,alt:c.name}),m.jsx("h2",{children:c.name}),m.jsx("h4",{children:"Traits:"}),m.jsx("ul",{children:T.map((S,D)=>m.jsxs("li",{children:[m.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},D))})]})},x=()=>m.jsxs(m.Fragment,{children:[m.jsx("div",{className:n.collectionSelector,children:a7.map(T=>m.jsx("button",{className:`${n.collectionButton} ${u.slug===T.slug?"active":""}`,onClick:()=>d(T),children:T.name},T.slug))}),m.jsxs("div",{className:n.content,children:[m.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[m.jsx("button",{onClick:()=>y("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),m.jsx("button",{onClick:()=>y("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&m.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&m.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&m.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?m.jsx("div",{className:n.loading,children:"Loading NFTs..."}):m.jsx("div",{className:n.grid,children:s.map(T=>{let S=T.image||T.image_url||T.image_url_shrunk||"/assets/pixelawb.png";return m.jsxs("div",{className:n.gridItem,onClick:()=>void C(T),children:[m.jsx("img",{src:S,alt:T.name,onError:D=>{D.currentTarget.src!==T.image_url&&T.image_url?D.currentTarget.src=T.image_url:D.currentTarget.src!==T.image_url_shrunk&&T.image_url_shrunk?D.currentTarget.src=T.image_url_shrunk:D.currentTarget.src="/assets/pixelawb.png"}}),m.jsx("span",{children:T.name})]},T.id)})})]})]});return m.jsxs("div",{className:n.galleryContainer,children:[m.jsxs("header",{className:n.header,children:[m.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),m.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),m.jsx("div",{className:n.content,children:o?m.jsx("p",{className:n.loading,children:"Loading..."}):c?N():x()})]})},QFe=Xc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),yc=({isOpen:t,onClose:e,title:n,children:r})=>{const s=QFe();return t?m.jsx("div",{className:s.overlay,children:m.jsxs("div",{className:s.popup,children:[m.jsxs("div",{className:s.titleBar,children:[m.jsx("span",{children:n}),m.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),m.jsx("div",{className:s.content,children:r})]})}):null},JFe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=P.useState([]),[i,o]=P.useState(!1),[a,c]=P.useState(!1),[l,u]=P.useState({}),[d,h]=P.useState(null),{data:f}=VFe();P.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await YV(n);s(A);const C={};A.forEach(N=>{C[N.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(N=>({...N,[A]:Math.max(0,C)}))},w=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,N])=>({id:C,quantity:N}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await QV(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const N=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${N}`),e()}catch(N){h("Transaction failed: "+N.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},y=(A,C)=>`${parseFloat(A)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return m.jsxs(yc,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&m.jsx("div",{style:v,children:d}),i?m.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?m.jsx("div",{children:"No eligible invite lists found for your wallet."}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>m.jsxs("div",{style:b,children:[m.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",y(A.token_price,A.currency_symbol)]}),m.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),m.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),m.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),m.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},ZFe=Xc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),XFe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],eje=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],tje=()=>{const t=ZFe(),{open:e}=k1(),{address:n,isConnected:r}=Gb(),{isPending:s}=WFe(),{disconnect:i}=HFe(),{data:o}=GFe({address:n}),[a,c]=P.useState("main"),[l,u]=P.useState(!1),[d,h]=P.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=P.useState(!1),[g,w]=P.useState(!1),[y,b]=P.useState(!1),[v,A]=P.useState(!1),[C,N]=P.useState(!1),[x,T]=P.useState(!1),[S,D]=P.useState(!1),[O,$]=P.useState(!1),[G,W]=P.useState(!1),[I,R]=P.useState(!1),[B,k]=P.useState(!1),[M,j]=P.useState(!1),q=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>N(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],se=te=>{te.disabled||te.action()};if(P.useEffect(()=>{const te=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(te)},[]),P.useEffect(()=>{u(!0)},[]),a==="gallery")return m.jsx(YFe,{onBack:()=>c("main"),walletAddress:n||void 0});function ie({open:te,onClose:fe,title:Xe,nfts:Le}){const De=wt=>{switch(wt){case"lawbsters":T(!0);break;case"lawbstarz":D(!0);break;case"pixelawbs":$(!0);break;case"halloween":W(!0);break;case"lawbstation":R(!0);break;case"nexus":k(!0);break}};return m.jsx(yc,{isOpen:te,onClose:fe,title:Xe,children:m.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:Le.map(wt=>m.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>De(wt.id),children:[m.jsx("img",{src:wt.image,alt:wt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),m.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:wt.name}),m.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:wt.description})]},wt.id))})})}function Y({open:te,onClose:fe}){return te?m.jsxs(yc,{isOpen:te,onClose:fe,title:"$LAWB",children:[m.jsx("h1",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),m.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",m.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),m.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),m.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",m.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),m.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),m.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),m.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),m.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:m.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return m.jsxs("div",{className:t.mobileContainer,children:[m.jsx("header",{className:t.header,children:m.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),m.jsx("div",{className:t.iconGrid,children:q.map(te=>m.jsxs("div",{className:t.icon,onClick:()=>se(te),children:[m.jsx("img",{src:te.icon,alt:te.label}),m.jsx("span",{children:te.label})]},te.label))}),l&&m.jsxs(yc,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&m.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:m.jsxs("div",{className:t.menuModal,onClick:te=>te.stopPropagation(),children:[m.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),m.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),m.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),m.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),m.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),m.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),m.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),m.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),m.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),m.jsx(JFe,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),m.jsx(ie,{open:y,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:XFe}),m.jsx(ie,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:eje}),m.jsx(Y,{open:C,onClose:()=>N(!1)}),m.jsxs(yc,{isOpen:x,onClose:()=>T(!1),title:"Lawbsters",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",m.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),m.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(yc,{isOpen:S,onClose:()=>D(!1),title:"Lawbstarz",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",m.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",m.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",m.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",m.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),m.jsx("p",{children:"Chain: Ethereum"}),m.jsxs("p",{children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),m.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),m.jsxs(yc,{isOpen:O,onClose:()=>$(!1),title:"Pixelawbs",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",m.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{$(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",m.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),m.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",m.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),m.jsxs(yc,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[m.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),m.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),m.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",m.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),m.jsxs(yc,{isOpen:I,onClose:()=>R(!1),title:"Lawbstation",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",m.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),m.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),m.jsx("p",{style:{marginBottom:"10px"},children:m.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),m.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),m.jsxs(yc,{isOpen:B,onClose:()=>k(!1),title:"Nexus",children:[m.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",m.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),m.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),m.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),m.jsx(yc,{isOpen:M,onClose:()=>j(!1),title:"Meme Generator",children:m.jsx(LX,{})}),m.jsxs("div",{className:t.taskbar,children:[m.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),m.jsxs("div",{className:t.walletStatus,children:[m.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),m.jsx("span",{className:t.clock,children:d})]})]})};function nje(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=P.useState(e(t));function s(){r(e(t))}return P.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const DI={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},MI={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz"]},public:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},rje=aee({chains:[NI,II,DI,MI],transports:{[NI.id]:Ha(),[II.id]:Ha(),[DI.id]:Ha("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[MI.id]:Ha("https://mainnet.sanko.xyz")}}),XU=()=>{if(!_x)throw new Error("[FIREBASE] Database not initialized");return _x},pm=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,LI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=XU(),s=Go(r,`leaderboard/${t}`),i=await Ip(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await hE(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",pm(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},sje=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:pm(e),redPlayer:pm(n)}),await LI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await LI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},See=async(t=20)=>{try{const e=XU(),n=Go(e,"leaderboard"),r=await Ip(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},xee=async()=>{try{const t=XU(),e=Go(t,"leaderboard/0x0000000000000000000000000000000000000000");return await HH(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},dl=()=>{if(!_x)throw new Error("[FIREBASE] Database not initialized");return _x},Ir={async getGame(t){try{const e=dl(),n=Go(e,`chess_games/${t}`),r=await Ip(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=dl(),r=Go(n,`chess_games/${t}`);await hE(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=dl(),r=Go(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=R$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=dl(),r=Go(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await hE(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await Ip(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=dl(),e=Go(t,"chess_games"),n=await Ip(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=dl(),e=Go(t,"chess_games"),n=await Ip(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=dl(),n=Go(e,`chess_games/${t}`);await HH(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=dl(),n=Go(e,`leaderboard/${t.username}`);await hE(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=dl(),e=Go(t,"leaderboard"),n=await Ip(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=dl(),n=Go(e,"leaderboard");return R$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},ije="6.15.0";function oje(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function _i(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function Et(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&oje(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function t0(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>t0(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return t0(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${t0(r,e)}: ${t0(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function $s(t,e){return t&&t.code===e}function eB(t){return $s(t,"CALL_EXCEPTION")}function dr(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${t0(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+t0(a))}}i.push(`code=${e}`),i.push(`version=${ije}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Et(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&Et(s,{shortMessage:r}),s}function ye(t,e,n,r){if(!t)throw dr(e,n,r)}function Z(t,e,n,r){ye(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Iee(t,e,n){n==null&&(n=""),n&&(n=": "+n),ye(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),ye(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function qT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),ye(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function Nee(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}Z(!1,"invalid BytesLike value",e||"value",t)}function Qt(t,e){return Nee(t,e,!1)}function Ii(t,e){return Nee(t,e,!0)}function sr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function tB(t){return sr(t,!0)||t instanceof Uint8Array}const c7="0123456789abcdef";function Oe(t){const e=Qt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=c7[(s&240)>>4]+c7[s&15]}return n}function Or(t){return"0x"+t.map(e=>Oe(e).substring(2)).join("")}function E0(t){return sr(t,!0)?(t.length-2)/2:Qt(t).length}function Nr(t,e,n){const r=Qt(t);return n!=null&&n>r.length&&ye(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Oe(r.slice(e??0,n??r.length))}function Tee(t,e,n){const r=Qt(t);ye(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Oe(s)}function xd(t,e){return Tee(t,e,!0)}function aje(t,e){return Tee(t,e,!1)}const VT=BigInt(0),Uc=BigInt(1),n0=9007199254740991;function cje(t,e){const n=KT(t,"value"),r=BigInt(Jt(e,"width"));if(ye(n>>r===VT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Uc){const s=(Uc<<r)-Uc;return-((~n&s)+Uc)}return n}function Ree(t,e){let n=Ze(t,"value");const r=BigInt(Jt(e,"width")),s=Uc<<r-Uc;if(n<VT){n=-n,ye(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Uc<<r)-Uc;return(~n&i)+Uc}else ye(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Jv(t,e){const n=KT(t,"value"),r=BigInt(Jt(e,"bits"));return n&(Uc<<r)-Uc}function Ze(t,e){switch(typeof t){case"bigint":return t;case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-n0&&t<=n0,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){Z(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}Z(!1,"invalid BigNumberish value",e||"value",t)}function KT(t,e){const n=Ze(t,e);return ye(n>=VT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const l7="0123456789abcdef";function nB(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=l7[n>>4],e+=l7[n&15];return BigInt(e)}return Ze(t)}function Jt(t,e){switch(typeof t){case"bigint":return Z(t>=-n0&&t<=n0,"overflow",e||"value",t),Number(t);case"number":return Z(Number.isInteger(t),"underflow",e||"value",t),Z(t>=-n0&&t<=n0,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Jt(BigInt(t),e)}catch(n){Z(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}Z(!1,"invalid numeric value",e||"value",t)}function lje(t){return Jt(nB(t))}function $f(t,e){let r=KT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Jt(e,"width");for(ye(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function ss(t){const e=KT(t,"value");if(e===VT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function Oc(t){let e=Oe(tB(t)?t:ss(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const u7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const d7=BigInt(58);function uje(t){const e=Qt(t);let n=nB(e),r="";for(;n;)r=u7[Number(n%d7)]+r,n/=d7;for(let s=0;s<e.length&&!e[s];s++)r=u7[0]+r;return r}function dje(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Qt(e)}function hje(t){const e=Qt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var $0;class Pee{constructor(e,n,r){re(this,"filter");re(this,"emitter");Q(this,$0);L(this,$0,n),Et(this,{emitter:e,filter:r})}async removeListener(){_(this,$0)!=null&&await this.emitter.off(this.filter,_(this,$0))}}$0=new WeakMap;function fje(t,e,n,r,s){Z(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Oee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function pje(t,e,n,r,s){return t==="OVERLONG"?(Z(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Oee(t,e,n))}const gje=Object.freeze({error:fje,ignore:Oee,replace:pje});function mje(t,e){e==null&&(e=gje.error);const n=Qt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function fd(t,e){Z(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);Z(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function yje(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function UI(t,e){return yje(mje(t,e))}function kee(t){async function e(n,r){ye(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();ye(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),ye(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=dr("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=dr("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const wje=12,bje=250;let h7=kee();const vje=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Eje=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let QO=!1;async function Dee(t,e){try{const n=t.match(vje);if(!n)throw new Error("invalid data");return new xf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?dje(n[3]):_je(n[3]))}catch{return new xf(599,"BAD REQUEST (invalid data: URI)",{},null,new Ff(t))}}function Mee(t){async function e(n,r){try{const s=n.match(Eje);if(!s)throw new Error("invalid link");return new Ff(`${t}${s[2]}`)}catch{return new xf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ff(n))}}return e}const XA={data:Dee,ipfs:Mee("https://gateway.ipfs.io/ipfs/")},Lee=new WeakMap;var ug,Ph;class Cje{constructor(e){Q(this,ug);Q(this,Ph);L(this,ug,[]),L(this,Ph,!1),Lee.set(e,()=>{if(!_(this,Ph)){L(this,Ph,!0);for(const n of _(this,ug))setTimeout(()=>{n()},0);L(this,ug,[])}})}addListener(e){ye(!_(this,Ph),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,ug).push(e)}get cancelled(){return _(this,Ph)}checkSignal(){ye(!this.cancelled,"cancelled","CANCELLED",{})}}ug=new WeakMap,Ph=new WeakMap;function eS(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var F0,j0,Ac,Bu,W0,z0,ds,Vo,$u,dg,hg,fg,Cl,Sc,Oh,pg,Zv;const XI=class XI{constructor(e){Q(this,pg);Q(this,F0);Q(this,j0);Q(this,Ac);Q(this,Bu);Q(this,W0);Q(this,z0);Q(this,ds);Q(this,Vo);Q(this,$u);Q(this,dg);Q(this,hg);Q(this,fg);Q(this,Cl);Q(this,Sc);Q(this,Oh);L(this,z0,String(e)),L(this,F0,!1),L(this,j0,!0),L(this,Ac,{}),L(this,Bu,""),L(this,W0,3e5),L(this,Sc,{slotInterval:bje,maxAttempts:wje}),L(this,Oh,null)}get url(){return _(this,z0)}set url(e){L(this,z0,String(e))}get body(){return _(this,ds)==null?null:new Uint8Array(_(this,ds))}set body(e){if(e==null)L(this,ds,void 0),L(this,Vo,void 0);else if(typeof e=="string")L(this,ds,fd(e)),L(this,Vo,"text/plain");else if(e instanceof Uint8Array)L(this,ds,e),L(this,Vo,"application/octet-stream");else if(typeof e=="object")L(this,ds,fd(JSON.stringify(e))),L(this,Vo,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,ds)!=null}get method(){return _(this,Bu)?_(this,Bu):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),L(this,Bu,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,Ac));return _(this,$u)&&(e.authorization=`Basic ${hje(fd(_(this,$u)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,Vo)&&(e["content-type"]=_(this,Vo)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,Ac)[String(e).toLowerCase()]=String(n)}clearHeaders(){L(this,Ac,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,$u)||null}setCredentials(e,n){Z(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),L(this,$u,`${e}:${n}`)}get allowGzip(){return _(this,j0)}set allowGzip(e){L(this,j0,!!e)}get allowInsecureAuthentication(){return!!_(this,F0)}set allowInsecureAuthentication(e){L(this,F0,!!e)}get timeout(){return _(this,W0)}set timeout(e){Z(e>=0,"timeout must be non-zero","timeout",e),L(this,W0,e)}get preflightFunc(){return _(this,dg)||null}set preflightFunc(e){L(this,dg,e)}get processFunc(){return _(this,hg)||null}set processFunc(e){L(this,hg,e)}get retryFunc(){return _(this,fg)||null}set retryFunc(e){L(this,fg,e)}get getUrlFunc(){return _(this,Oh)||h7}set getUrlFunc(e){L(this,Oh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,ds)?Oe(_(this,ds)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,Sc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,Sc).maxAttempts=e.maxAttempts)}send(){return ye(_(this,Cl)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),L(this,Cl,new Cje(this)),he(this,pg,Zv).call(this,0,f7()+this.timeout,0,this,new xf(0,"",{},null,this))}cancel(){ye(_(this,Cl)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=Lee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();ye(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new XI(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,L(s,Ac,Object.assign({},_(this,Ac))),_(this,ds)&&L(s,ds,new Uint8Array(_(this,ds))),L(s,Vo,_(this,Vo)),s}clone(){const e=new XI(this.url);return L(e,Bu,_(this,Bu)),_(this,ds)&&L(e,ds,_(this,ds)),L(e,Vo,_(this,Vo)),L(e,Ac,Object.assign({},_(this,Ac))),L(e,$u,_(this,$u)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),L(e,dg,_(this,dg)),L(e,hg,_(this,hg)),L(e,fg,_(this,fg)),L(e,Sc,Object.assign({},_(this,Sc))),L(e,Oh,_(this,Oh)),e}static lockConfig(){QO=!0}static getGateway(e){return XA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(QO)throw new Error("gateways locked");XA[e]=n}static registerGetUrl(e){if(QO)throw new Error("gateways locked");h7=e}static createGetUrlFunc(e){return kee(e)}static createDataGateway(){return Dee}static createIpfsGatewayFunc(e){return Mee(e)}};F0=new WeakMap,j0=new WeakMap,Ac=new WeakMap,Bu=new WeakMap,W0=new WeakMap,z0=new WeakMap,ds=new WeakMap,Vo=new WeakMap,$u=new WeakMap,dg=new WeakMap,hg=new WeakMap,fg=new WeakMap,Cl=new WeakMap,Sc=new WeakMap,Oh=new WeakMap,pg=new WeakSet,Zv=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,Sc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");ye(f7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await Aje(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in XA){const f=await XA[a](o.url,eS(_(s,Cl)));if(f instanceof xf){let p=f;if(this.processFunc){eS(_(s,Cl));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,eS(_(s,Cl)));let l=new xf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return he(u=o.redirect(f),pg,Zv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,Sc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),he(d=o.clone(),pg,Zv).call(d,e+1,n,p,s,l)}if(this.processFunc){eS(_(s,Cl));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,Sc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),he(h=o.clone(),pg,Zv).call(h,e+1,n,p,s,l)}}return l};let Ff=XI;var O_,k_,D_,Ko,H0,gg;const SB=class SB{constructor(e,n,r,s,i){Q(this,O_);Q(this,k_);Q(this,D_);Q(this,Ko);Q(this,H0);Q(this,gg);L(this,O_,e),L(this,k_,n),L(this,D_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),L(this,Ko,s==null?null:new Uint8Array(s)),L(this,H0,i||null),L(this,gg,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Ko)?Oe(_(this,Ko)):"null"}>`}get statusCode(){return _(this,O_)}get statusMessage(){return _(this,k_)}get headers(){return Object.assign({},_(this,D_))}get body(){return _(this,Ko)==null?null:new Uint8Array(_(this,Ko))}get bodyText(){try{return _(this,Ko)==null?"":UI(_(this,Ko))}catch{ye(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{ye(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new SB(599,r,this.headers,this.body,_(this,H0)||void 0);return L(s,gg,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:Z(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw Et(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Ko)!=null}get request(){return _(this,H0)}ok(){return _(this,gg).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,gg);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,Ko)&&(s=UI(_(this,Ko)))}catch{}ye(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};O_=new WeakMap,k_=new WeakMap,D_=new WeakMap,Ko=new WeakMap,H0=new WeakMap,gg=new WeakMap;let xf=SB;function f7(){return new Date().getTime()}function _je(t){return fd(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function Aje(t){return new Promise(e=>setTimeout(e,t))}function Sje(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function p7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function g7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=Uee(t,n);s.push(i.result),n+=i.consumed,ye(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function Uee(t,e){ye(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{ye(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=p7(t,e+1,r);return n(e+1+r+s),g7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),g7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=p7(t,e+1,r);n(e+1+r+s);const i=Oe(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Oe(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:Sje(t[e])}}function U1(t){const e=Qt(t,"data"),n=Uee(e,0);return Z(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function m7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Bee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Bee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=m7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Qt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=m7(e.length);return n.unshift(183+n.length),n.concat(e)}const y7="0123456789abcdef";function jf(t){let e="0x";for(const n of Bee(t))e+=y7[n>>4],e+=y7[n&15];return e}const Ti=32,sM=new Uint8Array(Ti),xje=["then"],tS={},$ee=new WeakMap;function kp(t){return $ee.get(t)}function w7(t,e){$ee.set(t,e)}function Ov(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function iM(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof ob?iM(kp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof ob&&(o=iM(kp(o),o,n)),r[s]=o),r},{})}var G0;const r0=class r0 extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==tS&&(s=n,i=[],o=!1);super(s.length);Q(this,G0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(w7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),L(this,G0,[]),_(this,G0)==null&&_(this,G0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Jt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&Ov(`index ${f}`,p),p}if(xje.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return w7(c,kp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&Ov(`index ${i}`,s),n&&s instanceof r0&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=kp(this);return r.reduce((s,i,o)=>(ye(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),iM(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=kp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new r0(tS,i,o)}filter(n,r){const s=kp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&Ov(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new r0(tS,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Ov(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=kp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&Ov(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new r0(tS,n,r)}};G0=new WeakMap;let ob=r0;function b7(t){let e=ss(t);return ye(e.length<=Ti,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:Ti,offset:e.length}),e.length!==Ti&&(e=Ii(Or([sM.slice(e.length%Ti),e]))),e}class Dd{constructor(e,n,r,s){re(this,"name");re(this,"type");re(this,"localName");re(this,"dynamic");Et(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){Z(!1,e,this.localName,n)}}var Fu,mg,q0,KS;class oM{constructor(){Q(this,q0);Q(this,Fu);Q(this,mg);L(this,Fu,[]),L(this,mg,0)}get data(){return Or(_(this,Fu))}get length(){return _(this,mg)}appendWriter(e){return he(this,q0,KS).call(this,Ii(e.data))}writeBytes(e){let n=Ii(e);const r=n.length%Ti;return r&&(n=Ii(Or([n,sM.slice(r)]))),he(this,q0,KS).call(this,n)}writeValue(e){return he(this,q0,KS).call(this,b7(e))}writeUpdatableValue(){const e=_(this,Fu).length;return _(this,Fu).push(sM),L(this,mg,_(this,mg)+Ti),n=>{_(this,Fu)[e]=b7(n)}}}Fu=new WeakMap,mg=new WeakMap,q0=new WeakSet,KS=function(e){return _(this,Fu).push(e),L(this,mg,_(this,mg)+e.length),e.length};var oo,Yo,yg,wg,kh,bm,cM,Fee;const xB=class xB{constructor(e,n,r){Q(this,bm);re(this,"allowLoose");Q(this,oo);Q(this,Yo);Q(this,yg);Q(this,wg);Q(this,kh);Et(this,{allowLoose:!!n}),L(this,oo,Ii(e)),L(this,yg,0),L(this,wg,null),L(this,kh,r??1024),L(this,Yo,0)}get data(){return Oe(_(this,oo))}get dataLength(){return _(this,oo).length}get consumed(){return _(this,Yo)}get bytes(){return new Uint8Array(_(this,oo))}subReader(e){const n=new xB(_(this,oo).slice(_(this,Yo)+e),this.allowLoose,_(this,kh));return L(n,wg,this),n}readBytes(e,n){let r=he(this,bm,Fee).call(this,0,e,!!n);return he(this,bm,cM).call(this,e),L(this,Yo,_(this,Yo)+r.length),r.slice(0,e)}readValue(){return nB(this.readBytes(Ti))}readIndex(){return lje(this.readBytes(Ti))}};oo=new WeakMap,Yo=new WeakMap,yg=new WeakMap,wg=new WeakMap,kh=new WeakMap,bm=new WeakSet,cM=function(e){var n;if(_(this,wg))return he(n=_(this,wg),bm,cM).call(n,e);L(this,yg,_(this,yg)+e),ye(_(this,kh)<1||_(this,yg)<=_(this,kh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,kh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:Ii(_(this,oo)),offset:_(this,Yo),length:e,info:{bytesRead:_(this,yg),dataLength:this.dataLength}})},Fee=function(e,n,r){let s=Math.ceil(n/Ti)*Ti;return _(this,Yo)+s>_(this,oo).length&&(this.allowLoose&&r&&_(this,Yo)+n<=_(this,oo).length?s=n:ye(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:Ii(_(this,oo)),length:_(this,oo).length,offset:_(this,Yo)+s})),_(this,oo).slice(_(this,Yo),_(this,Yo)+s)};let aM=xB;function BI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function rB(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Ije(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");BI(t.outputLen),BI(t.blockLen)}function ab(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jee(t,e){rB(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const JO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wee=t=>t instanceof Uint8Array,Nje=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),ZO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),hl=(t,e)=>t<<32-e|t>>>e,Tje=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tje)throw new Error("Non little-endian hardware is not supported");function Rje(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function YT(t){if(typeof t=="string"&&(t=Rje(t)),!Wee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function Pje(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!Wee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class sB{clone(){return this._cloneInto()}}function iB(t){const e=r=>t().update(YT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Oje(t=32){if(JO&&typeof JO.getRandomValues=="function")return JO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class zee extends sB{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Ije(e);const r=YT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ab(this),this.iHash.update(e),this}digestInto(e){ab(this),rB(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Hee=(t,e,n)=>new zee(t,e).update(n).digest();Hee.create=(t,e)=>new zee(t,e);function kje(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class Gee extends sB{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ZO(this.buffer)}update(e){ab(this);const{view:n,buffer:r,blockLen:s}=this;e=YT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=ZO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ab(this),jee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;kje(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=ZO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Dje=(t,e,n)=>t&e^~t&n,Mje=(t,e,n)=>t&e^t&n^e&n,Lje=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),eh=new Uint32Array(64);class Uje extends Gee{constructor(){super(64,32,8,!1),this.A=Xd[0]|0,this.B=Xd[1]|0,this.C=Xd[2]|0,this.D=Xd[3]|0,this.E=Xd[4]|0,this.F=Xd[5]|0,this.G=Xd[6]|0,this.H=Xd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)eh[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=eh[d-15],f=eh[d-2],p=hl(h,7)^hl(h,18)^h>>>3,g=hl(f,17)^hl(f,19)^f>>>10;eh[d]=g+eh[d-7]+p+eh[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=hl(a,6)^hl(a,11)^hl(a,25),f=u+h+Dje(a,c,l)+Lje[d]+eh[d]|0,g=(hl(r,2)^hl(r,13)^hl(r,22))+Mje(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){eh.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const qee=iB(()=>new Uje),nS=BigInt(2**32-1),lM=BigInt(32);function Vee(t,e=!1){return e?{h:Number(t&nS),l:Number(t>>lM&nS)}:{h:Number(t>>lM&nS)|0,l:Number(t&nS)|0}}function Kee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Vee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Bje=(t,e)=>BigInt(t>>>0)<<lM|BigInt(e>>>0),$je=(t,e,n)=>t>>>n,Fje=(t,e,n)=>t<<32-n|e>>>n,jje=(t,e,n)=>t>>>n|e<<32-n,Wje=(t,e,n)=>t<<32-n|e>>>n,zje=(t,e,n)=>t<<64-n|e>>>n-32,Hje=(t,e,n)=>t>>>n-32|e<<64-n,Gje=(t,e)=>e,qje=(t,e)=>t,Yee=(t,e,n)=>t<<n|e>>>32-n,Qee=(t,e,n)=>e<<n|t>>>32-n,Jee=(t,e,n)=>e<<n-32|t>>>64-n,Zee=(t,e,n)=>t<<n-32|e>>>64-n;function Vje(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Kje=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Yje=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,Qje=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),Jje=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,Zje=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),Xje=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,zt={fromBig:Vee,split:Kee,toBig:Bje,shrSH:$je,shrSL:Fje,rotrSH:jje,rotrSL:Wje,rotrBH:zje,rotrBL:Hje,rotr32H:Gje,rotr32L:qje,rotlSH:Yee,rotlSL:Qee,rotlBH:Jee,rotlBL:Zee,add:Vje,add3L:Kje,add3H:Yje,add4L:Qje,add4H:Jje,add5H:Xje,add5L:Zje},[e9e,t9e]=zt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),th=new Uint32Array(80),nh=new Uint32Array(80);class n9e extends Gee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)th[v]=e.getUint32(n),nh[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=th[v-15]|0,C=nh[v-15]|0,N=zt.rotrSH(A,C,1)^zt.rotrSH(A,C,8)^zt.shrSH(A,C,7),x=zt.rotrSL(A,C,1)^zt.rotrSL(A,C,8)^zt.shrSL(A,C,7),T=th[v-2]|0,S=nh[v-2]|0,D=zt.rotrSH(T,S,19)^zt.rotrBH(T,S,61)^zt.shrSH(T,S,6),O=zt.rotrSL(T,S,19)^zt.rotrBL(T,S,61)^zt.shrSL(T,S,6),$=zt.add4L(x,O,nh[v-7],nh[v-16]),G=zt.add4H($,N,D,th[v-7],th[v-16]);th[v]=G|0,nh[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:y,Hl:b}=this;for(let v=0;v<80;v++){const A=zt.rotrSH(d,h,14)^zt.rotrSH(d,h,18)^zt.rotrBH(d,h,41),C=zt.rotrSL(d,h,14)^zt.rotrSL(d,h,18)^zt.rotrBL(d,h,41),N=d&f^~d&g,x=h&p^~h&w,T=zt.add5L(b,C,x,t9e[v],nh[v]),S=zt.add5H(T,y,A,N,e9e[v],th[v]),D=T|0,O=zt.rotrSH(r,s,28)^zt.rotrBH(r,s,34)^zt.rotrBH(r,s,39),$=zt.rotrSL(r,s,28)^zt.rotrBL(r,s,34)^zt.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;y=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=zt.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=zt.add3L(D,$,W);r=zt.add3H(I,S,O,G),s=I|0}({h:r,l:s}=zt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=zt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=zt.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=zt.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=zt.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=zt.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=zt.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:y,l:b}=zt.add(this.Hh|0,this.Hl|0,y|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,y,b)}roundClean(){th.fill(0),nh.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const r9e=iB(()=>new n9e);function s9e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const v7=s9e();v7.crypto||v7.msCrypto;function i9e(t){switch(t){case"sha256":return qee.create();case"sha512":return r9e.create()}Z(!1,"invalid hashing algorithm name","algorithm",t)}const[Xee,ete,tte]=[[],[],[]],o9e=BigInt(0),kv=BigInt(1),a9e=BigInt(2),c9e=BigInt(7),l9e=BigInt(256),u9e=BigInt(113);for(let t=0,e=kv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Xee.push(2*(5*r+n)),ete.push((t+1)*(t+2)/2%64);let s=o9e;for(let i=0;i<7;i++)e=(e<<kv^(e>>c9e)*u9e)%l9e,e&a9e&&(s^=kv<<(kv<<BigInt(i))-kv);tte.push(s)}const[d9e,h9e]=Kee(tte,!0),E7=(t,e,n)=>n>32?Jee(t,e,n):Yee(t,e,n),C7=(t,e,n)=>n>32?Zee(t,e,n):Qee(t,e,n);function f9e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=E7(l,u,1)^n[a],h=C7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=ete[o],c=E7(s,i,a),l=C7(s,i,a),u=Xee[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=d9e[r],t[1]^=h9e[r]}n.fill(0)}class oB extends sB{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,BI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Nje(this.state)}keccak(){f9e(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ab(this);const{blockLen:n,state:r}=this;e=YT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){ab(this,!1),rB(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return BI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(jee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new oB(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const p9e=(t,e,n)=>iB(()=>new oB(e,t,n)),g9e=p9e(1,136,256/8);let nte=!1;const rte=function(t){return g9e(t)};let ste=rte;function qr(t){const e=Qt(t,"data");return Oe(ste(e))}qr._=rte;qr.lock=function(){nte=!0};qr.register=function(t){if(nte)throw new TypeError("keccak256 is locked");ste=t};Object.freeze(qr);const ite=function(t){return i9e("sha256").update(t).digest()};let ote=ite,ate=!1;function Vb(t){const e=Qt(t,"data");return Oe(ote(e))}Vb._=ite;Vb.lock=function(){ate=!0};Vb.register=function(t){if(ate)throw new Error("sha256 is locked");ote=t};Object.freeze(Vb);Object.freeze(Vb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cte=BigInt(0),QT=BigInt(1),m9e=BigInt(2),JT=t=>t instanceof Uint8Array,y9e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function cb(t){if(!JT(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=y9e[t[n]];return e}function lte(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function aB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function lb(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function Bg(t){return aB(cb(t))}function cB(t){if(!JT(t))throw new Error("Uint8Array expected");return aB(cb(Uint8Array.from(t).reverse()))}function ub(t,e){return lb(t.toString(16).padStart(e*2,"0"))}function lB(t,e){return ub(t,e).reverse()}function w9e(t){return lb(lte(t))}function Ec(t,e,n){let r;if(typeof e=="string")try{r=lb(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(JT(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function g_(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!JT(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function b9e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function v9e(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function E9e(t){let e;for(e=0;t>cte;t>>=QT,e+=1);return e}function C9e(t,e){return t>>BigInt(e)&QT}const _9e=(t,e,n)=>t|(n?QT:cte)<<BigInt(e),uB=t=>(m9e<<BigInt(t-1))-QT,XO=t=>new Uint8Array(t),_7=t=>Uint8Array.from(t);function ute(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=XO(t),s=XO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=XO())=>{s=a(_7([0]),d),r=a(),d.length!==0&&(s=a(_7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return g_(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const A9e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function B1(t,e,n={}){const r=(s,i,o)=>{const a=A9e[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const S9e=Object.freeze(Object.defineProperty({__proto__:null,bitGet:C9e,bitLen:E9e,bitMask:uB,bitSet:_9e,bytesToHex:cb,bytesToNumberBE:Bg,bytesToNumberLE:cB,concatBytes:g_,createHmacDrbg:ute,ensureBytes:Ec,equalBytes:b9e,hexToBytes:lb,hexToNumber:aB,numberToBytesBE:ub,numberToBytesLE:lB,numberToHexUnpadded:lte,numberToVarBytesBE:w9e,utf8ToBytes:v9e,validateObject:B1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const As=BigInt(0),Fr=BigInt(1),Dp=BigInt(2),x9e=BigInt(3),uM=BigInt(4),A7=BigInt(5),S7=BigInt(8);BigInt(9);BigInt(16);function po(t,e){const n=t%e;return n>=As?n:e+n}function I9e(t,e,n){if(n<=As||e<As)throw new Error("Expected power/modulo > 0");if(n===Fr)return As;let r=Fr;for(;e>As;)e&Fr&&(r=r*t%n),t=t*t%n,e>>=Fr;return r}function Aa(t,e,n){let r=t;for(;e-- >As;)r*=r,r%=n;return r}function dM(t,e){if(t===As||e<=As)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=po(t,e),r=e,s=As,i=Fr;for(;n!==As;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Fr)throw new Error("invert: does not exist");return po(s,e)}function N9e(t){const e=(t-Fr)/Dp;let n,r,s;for(n=t-Fr,r=0;n%Dp===As;n/=Dp,r++);for(s=Dp;s<t&&I9e(s,e,t)!==t-Fr;s++);if(r===1){const o=(t+Fr)/uM;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Fr)/Dp;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Fr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function T9e(t){if(t%uM===x9e){const e=(t+Fr)/uM;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%S7===A7){const e=(t-A7)/S7;return function(r,s){const i=r.mul(s,Dp),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,Dp),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return N9e(t)}const R9e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function P9e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=R9e.reduce((r,s)=>(r[s]="function",r),e);return B1(t,n)}function O9e(t,e,n){if(n<As)throw new Error("Expected power > 0");if(n===As)return t.ONE;if(n===Fr)return e;let r=t.ONE,s=e;for(;n>As;)n&Fr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Fr;return r}function k9e(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function dte(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function D9e(t,e,n=!1,r={}){if(t<=As)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=dte(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=T9e(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:uB(s),ZERO:As,ONE:Fr,create:c=>po(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return As<=c&&c<t},is0:c=>c===As,isOdd:c=>(c&Fr)===Fr,neg:c=>po(-c,t),eql:(c,l)=>c===l,sqr:c=>po(c*c,t),add:(c,l)=>po(c+l,t),sub:(c,l)=>po(c-l,t),mul:(c,l)=>po(c*l,t),pow:(c,l)=>O9e(a,c,l),div:(c,l)=>po(c*dM(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>dM(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>k9e(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?lB(c,i):ub(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?cB(c):Bg(c)}});return Object.freeze(a)}function hte(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function fte(t){const e=hte(t);return e+Math.ceil(e/2)}function M9e(t,e,n=!1){const r=t.length,s=hte(e),i=fte(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?Bg(t):cB(t),a=po(o,e-Fr)+Fr;return n?lB(a,s):ub(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const L9e=BigInt(0),e2=BigInt(1);function U9e(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>L9e;)i&e2&&(o=o.add(a)),a=a.double(),i>>=e2;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=e2);const y=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[y])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function pte(t){return P9e(t.Fp),B1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...dte(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function B9e(t){const e=pte(t);B1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:$9e,hexToBytes:F9e}=S9e,Zp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Zp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:$9e(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Zp,n=typeof t=="string"?F9e(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Zp._parseInt(n.subarray(2)),{d:o,l:a}=Zp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Ju=BigInt(0),Ba=BigInt(1);BigInt(2);const x7=BigInt(3);BigInt(4);function j9e(t){const e=B9e(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const y=g.toAffine();return g_(Uint8Array.from([4]),n.toBytes(y.x),n.toBytes(y.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),y=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y}});function i(p){const{a:g,b:w}=e,y=n.sqr(p),b=n.mul(y,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Ju<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:y,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=cb(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:Bg(Ec("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return y&&(v=po(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,y){if(this.px=g,this.py=w,this.pz=y,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(y==null||!n.isValid(y))throw new Error("z required")}static fromAffine(g){const{x:w,y}=g||{};if(!g||!n.isValid(w)||!n.isValid(y))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(y)?d.ZERO:new d(w,y,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(y=>y.pz));return g.map((y,b)=>y.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(Ec("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const y=n.sqr(w),b=i(g);if(!n.eql(y,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:C}=g,N=n.eql(n.mul(w,C),n.mul(v,b)),x=n.eql(n.mul(y,C),n.mul(A,b));return N&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,y=n.mul(w,x7),{px:b,py:v,pz:A}=this;let C=n.ZERO,N=n.ZERO,x=n.ZERO,T=n.mul(b,b),S=n.mul(v,v),D=n.mul(A,A),O=n.mul(b,v);return O=n.add(O,O),x=n.mul(b,A),x=n.add(x,x),C=n.mul(g,x),N=n.mul(y,D),N=n.add(C,N),C=n.sub(S,N),N=n.add(S,N),N=n.mul(C,N),C=n.mul(O,C),x=n.mul(y,x),D=n.mul(g,D),O=n.sub(T,D),O=n.mul(g,O),O=n.add(O,x),x=n.add(T,T),T=n.add(x,T),T=n.add(T,D),T=n.mul(T,O),N=n.add(N,T),D=n.mul(v,A),D=n.add(D,D),T=n.mul(D,O),C=n.sub(C,T),x=n.mul(D,S),x=n.add(x,x),x=n.add(x,x),new d(C,N,x)}add(g){u(g);const{px:w,py:y,pz:b}=this,{px:v,py:A,pz:C}=g;let N=n.ZERO,x=n.ZERO,T=n.ZERO;const S=e.a,D=n.mul(e.b,x7);let O=n.mul(w,v),$=n.mul(y,A),G=n.mul(b,C),W=n.add(w,y),I=n.add(v,A);W=n.mul(W,I),I=n.add(O,$),W=n.sub(W,I),I=n.add(w,b);let R=n.add(v,C);return I=n.mul(I,R),R=n.add(O,G),I=n.sub(I,R),R=n.add(y,b),N=n.add(A,C),R=n.mul(R,N),N=n.add($,G),R=n.sub(R,N),T=n.mul(S,I),N=n.mul(D,G),T=n.add(N,T),N=n.sub($,T),T=n.add($,T),x=n.mul(N,T),$=n.add(O,O),$=n.add($,O),G=n.mul(S,G),I=n.mul(D,I),$=n.add($,G),G=n.sub(O,G),G=n.mul(S,G),I=n.add(I,G),O=n.mul($,I),x=n.add(x,O),O=n.mul(R,I),N=n.mul(W,N),N=n.sub(N,O),O=n.mul(W,$),T=n.mul(R,T),T=n.add(T,O),new d(N,x,T)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const y=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(y[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Ju)return w;if(a(g),g===Ba)return this;const{endo:y}=e;if(!y)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:C}=y.splitScalar(g),N=w,x=w,T=this;for(;v>Ju||C>Ju;)v&Ba&&(N=N.add(T)),C&Ba&&(x=x.add(T)),T=T.double(),v>>=Ba,C>>=Ba;return b&&(N=N.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,y.beta),x.py,x.pz),N.add(x)}multiply(g){a(g);let w=g,y,b;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:N,k2:x}=v.splitScalar(w);let{p:T,f:S}=this.wNAF(C),{p:D,f:O}=this.wNAF(x);T=f.constTimeNegate(A,T),D=f.constTimeNegate(N,D),D=new d(n.mul(D.px,v.beta),D.py,D.pz),y=T.add(D),b=S.add(O)}else{const{p:A,f:C}=this.wNAF(w);y=A,b=C}return d.normalizeZ([y,b])[0]}multiplyAndAddUnsafe(g,w,y){const b=d.BASE,v=(C,N)=>N===Ju||N===Ba||!C.equals(b)?C.multiplyUnsafe(N):C.multiply(N),A=v(this,w).add(v(g,y));return A.is0()?void 0:A}toAffine(g){const{px:w,py:y,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),C=n.mul(y,g),N=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===Ba)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===Ba?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return cb(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=U9e(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function W9e(t){const e=pte(t);return B1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function z9e(t){const e=W9e(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(I){return Ju<I&&I<n.ORDER}function a(I){return po(I,r)}function c(I){return dM(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=j9e({...e,toBytes(I,R,B){const k=R.toAffine(),M=n.toBytes(k.x),j=g_;return B?j(Uint8Array.from([R.hasEvenY()?2:3]),M):j(Uint8Array.from([4]),M,n.toBytes(k.y))},fromBytes(I){const R=I.length,B=I[0],k=I.subarray(1);if(R===s&&(B===2||B===3)){const M=Bg(k);if(!o(M))throw new Error("Point is not on curve");const j=d(M);let q=n.sqrt(j);const se=(q&Ba)===Ba;return(B&1)===1!==se&&(q=n.neg(q)),{x:M,y:q}}else if(R===i&&B===4){const M=n.fromBytes(k.subarray(0,n.BYTES)),j=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:M,y:j}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>cb(ub(I,e.nByteLength));function p(I){const R=r>>Ba;return I>R}function g(I){return p(I)?a(-I):I}const w=(I,R,B)=>Bg(I.slice(R,B));class y{constructor(R,B,k){this.r=R,this.s=B,this.recovery=k,this.assertValidity()}static fromCompact(R){const B=e.nByteLength;return R=Ec("compactSignature",R,B*2),new y(w(R,0,B),w(R,B,2*B))}static fromDER(R){const{r:B,s:k}=Zp.toSig(Ec("DER",R));return new y(B,k)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new y(this.r,this.s,R)}recoverPublicKey(R){const{r:B,s:k,recovery:M}=this,j=x(Ec("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const q=M===2||M===3?B+e.n:B;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const se=M&1?"03":"02",ie=l.fromHex(se+f(q)),Y=c(q),te=a(-j*Y),fe=a(k*Y),Xe=l.BASE.multiplyAndAddUnsafe(ie,te,fe);if(!Xe)throw new Error("point at infinify");return Xe.assertValidity(),Xe}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return lb(this.toDERHex())}toDERHex(){return Zp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return lb(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=fte(e.n);return M9e(e.randomBytes(I),e.n)},precompute(I=8,R=l.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}};function v(I,R=!0){return l.fromPrivateKey(I).toRawBytes(R)}function A(I){const R=I instanceof Uint8Array,B=typeof I=="string",k=(R||B)&&I.length;return R?k===s||k===i:B?k===2*s||k===2*i:I instanceof l}function C(I,R,B=!0){if(A(I))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(I)).toRawBytes(B)}const N=e.bits2int||function(I){const R=Bg(I),B=I.length*8-e.nBitLength;return B>0?R>>BigInt(B):R},x=e.bits2int_modN||function(I){return a(N(I))},T=uB(e.nBitLength);function S(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Ju<=I&&I<T))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ub(I,e.nByteLength)}function D(I,R,B=O){if(["recovered","canonical"].some(De=>De in B))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:M}=e;let{lowS:j,prehash:q,extraEntropy:se}=B;j==null&&(j=!0),I=Ec("msgHash",I),q&&(I=Ec("prehashed msgHash",k(I)));const ie=x(I),Y=u(R),te=[S(Y),S(ie)];if(se!=null){const De=se===!0?M(n.BYTES):se;te.push(Ec("extraEntropy",De))}const fe=g_(...te),Xe=ie;function Le(De){const wt=N(De);if(!h(wt))return;const Mt=c(wt),ln=l.BASE.multiply(wt).toAffine(),X=a(ln.x);if(X===Ju)return;const ce=a(Mt*a(Xe+X*Y));if(ce===Ju)return;let de=(ln.x===X?0:2)|Number(ln.y&Ba),ge=ce;return j&&p(ce)&&(ge=g(ce),de^=1),new y(X,ge,de)}return{seed:fe,k2sig:Le}}const O={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function G(I,R,B=O){const{seed:k,k2sig:M}=D(I,R,B),j=e;return ute(j.hash.outputLen,j.nByteLength,j.hmac)(k,M)}l.BASE._setWindowSize(8);function W(I,R,B,k=$){var ln;const M=I;if(R=Ec("msgHash",R),B=Ec("publicKey",B),"strict"in k)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:q}=k;let se,ie;try{if(typeof M=="string"||M instanceof Uint8Array)try{se=y.fromDER(M)}catch(X){if(!(X instanceof Zp.Err))throw X;se=y.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:X,s:ce}=M;se=new y(X,ce)}else throw new Error("PARSE");ie=l.fromHex(B)}catch(X){if(X.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&se.hasHighS())return!1;q&&(R=e.hash(R));const{r:Y,s:te}=se,fe=x(R),Xe=c(te),Le=a(fe*Xe),De=a(Y*Xe),wt=(ln=l.BASE.multiplyAndAddUnsafe(ie,Le,De))==null?void 0:ln.toAffine();return wt?a(wt.x)===Y:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:y,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function H9e(t){return{hash:t,hmac:(e,...n)=>Hee(t,e,Pje(...n)),randomBytes:Oje}}function G9e(t,e){const n=r=>z9e({...t,...H9e(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const gte=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),I7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),q9e=BigInt(1),hM=BigInt(2),N7=(t,e)=>(t+e/hM)/e;function V9e(t){const e=gte,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=Aa(u,n,e)*u%e,h=Aa(d,n,e)*u%e,f=Aa(h,hM,e)*l%e,p=Aa(f,s,e)*f%e,g=Aa(p,i,e)*p%e,w=Aa(g,a,e)*g%e,y=Aa(w,c,e)*w%e,b=Aa(y,a,e)*g%e,v=Aa(b,n,e)*u%e,A=Aa(v,o,e)*p%e,C=Aa(A,r,e)*l%e,N=Aa(C,hM,e);if(!fM.eql(fM.sqr(N),t))throw new Error("Cannot find square root");return N}const fM=D9e(gte,void 0,void 0,{sqrt:V9e}),lh=G9e({a:BigInt(0),b:BigInt(7),Fp:fM,n:I7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=I7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-q9e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=N7(i*t,e),c=N7(-r*t,e);let l=po(t-a*n-c*s,e),u=po(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},qee);BigInt(0);lh.ProjectivePoint;const m_="0x0000000000000000000000000000000000000000",T7="0x0000000000000000000000000000000000000000000000000000000000000000",R7=BigInt(0),P7=BigInt(1),O7=BigInt(2),k7=BigInt(27),D7=BigInt(28),rS=BigInt(35),Ay={};function M7(t){return xd(ss(t),32)}var V0,_l,K0,bg;const wc=class wc{constructor(e,n,r,s){Q(this,V0);Q(this,_l);Q(this,K0);Q(this,bg);qT(e,Ay,"Signature"),L(this,V0,n),L(this,_l,r),L(this,K0,s),L(this,bg,null)}get r(){return _(this,V0)}set r(e){Z(E0(e)===32,"invalid r","value",e),L(this,V0,Oe(e))}get s(){return Z(parseInt(_(this,_l).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,_l)),_(this,_l)}set s(e){Z(E0(e)===32,"invalid s","value",e),L(this,_l,Oe(e))}get _s(){return _(this,_l)}isValid(){return parseInt(_(this,_l).substring(0,3))<8}get v(){return _(this,K0)}set v(e){const n=Jt(e,"value");Z(n===27||n===28,"invalid v","v",e),L(this,K0,n)}get networkV(){return _(this,bg)}get legacyChainId(){const e=this.networkV;return e==null?null:wc.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Qt(this.s);return this.yParity&&(e[0]|=128),Oe(e)}get compactSerialized(){return Or([this.r,this.yParityAndS])}get serialized(){return Or([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new wc(Ay,this.r,this._s,this.v);return this.networkV&&L(e,bg,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Ze(e,"v");return n==k7||n==D7?R7:(Z(n>=rS,"invalid EIP-155 v","v",e),(n-rS)/O7)}static getChainIdV(e,n){return Ze(e)*O7+BigInt(35+n-27)}static getNormalizedV(e){const n=Ze(e);return n===R7||n===k7?27:n===P7||n===D7?28:(Z(n>=rS,"invalid v","v",e),n&P7?27:28)}static from(e){function n(l,u){Z(l,u,"signature",e)}if(e==null)return new wc(Ay,T7,T7,27);if(typeof e=="string"){const l=Qt(e,"signature");if(l.length===64){const u=Oe(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new wc(Ay,u,Oe(d),h)}if(l.length===65){const u=Oe(l.slice(0,32)),d=Oe(l.slice(32,64)),h=wc.getNormalizedV(l[64]);return new wc(Ay,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof wc)return e.clone();const r=e.r;n(r!=null,"missing r");const s=M7(r),i=function(l,u){if(l!=null)return M7(l);if(u!=null){n(sr(u,32),"invalid yParityAndS");const d=Qt(u);return d[0]&=127,Oe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Ze(l);return{networkV:h>=rS?h:void 0,v:wc.getNormalizedV(h)}}if(u!=null)return n(sr(u,32),"invalid yParityAndS"),{v:Qt(u)[0]&128?28:27};if(d!=null){switch(Jt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new wc(Ay,s,i,a);return o&&L(c,bg,o),n(e.yParity==null||Jt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};V0=new WeakMap,_l=new WeakMap,K0=new WeakMap,bg=new WeakMap;let Io=wc;var ju;const Mp=class Mp{constructor(e){Q(this,ju);Z(E0(e)===32,"invalid private key","privateKey","[REDACTED]"),L(this,ju,Oe(e))}get privateKey(){return _(this,ju)}get publicKey(){return Mp.computePublicKey(_(this,ju))}get compressedPublicKey(){return Mp.computePublicKey(_(this,ju),!0)}sign(e){Z(E0(e)===32,"invalid digest length","digest",e);const n=lh.sign(Ii(e),Ii(_(this,ju)),{lowS:!0});return Io.from({r:$f(n.r,32),s:$f(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=Mp.computePublicKey(e);return Oe(lh.getSharedSecret(Ii(_(this,ju)),Qt(n),!1))}static computePublicKey(e,n){let r=Qt(e,"key");if(r.length===32){const i=lh.getPublicKey(r,!!n);return Oe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=lh.ProjectivePoint.fromHex(r);return Oe(s.toRawBytes(n))}static recoverPublicKey(e,n){Z(E0(e)===32,"invalid digest length","digest",e);const r=Io.from(n);let s=lh.Signature.fromCompact(Ii(Or([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(Ii(e));return Z(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=lh.ProjectivePoint.fromHex(Mp.computePublicKey(e).substring(2)),i=lh.ProjectivePoint.fromHex(Mp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};ju=new WeakMap;let y_=Mp;const K9e=BigInt(0),Y9e=BigInt(36);function L7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Qt(qr(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const dB={};for(let t=0;t<10;t++)dB[String(t)]=String(t);for(let t=0;t<26;t++)dB[String.fromCharCode(65+t)]=String(10+t);const U7=15;function Q9e(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>dB[r]).join("");for(;e.length>=U7;){let r=e.substring(0,U7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const J9e=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Z9e(t){t=t.toLowerCase();let e=K9e;for(let n=0;n<t.length;n++)e=e*Y9e+J9e[t[n]];return e}function Tn(t){if(Z(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=L7(t);return Z(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Z(t.substring(2,4)===Q9e(t),"bad icap checksum","address",t);let e=Z9e(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return L7("0x"+e)}Z(!1,"invalid address","address",t)}function X9e(t){const e=Tn(t.from);let r=Ze(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Tn(Nr(qr(jf([e,r])),12))}function mte(t){return t&&typeof t.getAddress=="function"}async function t2(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(ye(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),Z(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Tn(n)}function Ri(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Tn(t):(ye(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),t2(t,e.resolveName(t)));if(mte(t))return t2(t,t.getAddress());if(t&&typeof t.then=="function")return t2(t,t);Z(!1,"unsupported addressable value","target",t)}const Ru={};function qe(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ui(Ru,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function wn(t,e){return new ui(Ru,`bytes${e||""}`,t,{size:e})}const B7=Symbol.for("_ethers_typed");var vg;const Pu=class Pu{constructor(e,n,r,s){re(this,"type");re(this,"value");Q(this,vg);re(this,"_typedSymbol");s==null&&(s=null),qT(Ru,e,"Typed"),Et(this,{_typedSymbol:B7,type:n,value:r}),L(this,vg,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,vg)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,vg)===!0?-1:_(this,vg)===!1?this.value.length:null}static from(e,n){return new Pu(Ru,e,n)}static uint8(e){return qe(e,8)}static uint16(e){return qe(e,16)}static uint24(e){return qe(e,24)}static uint32(e){return qe(e,32)}static uint40(e){return qe(e,40)}static uint48(e){return qe(e,48)}static uint56(e){return qe(e,56)}static uint64(e){return qe(e,64)}static uint72(e){return qe(e,72)}static uint80(e){return qe(e,80)}static uint88(e){return qe(e,88)}static uint96(e){return qe(e,96)}static uint104(e){return qe(e,104)}static uint112(e){return qe(e,112)}static uint120(e){return qe(e,120)}static uint128(e){return qe(e,128)}static uint136(e){return qe(e,136)}static uint144(e){return qe(e,144)}static uint152(e){return qe(e,152)}static uint160(e){return qe(e,160)}static uint168(e){return qe(e,168)}static uint176(e){return qe(e,176)}static uint184(e){return qe(e,184)}static uint192(e){return qe(e,192)}static uint200(e){return qe(e,200)}static uint208(e){return qe(e,208)}static uint216(e){return qe(e,216)}static uint224(e){return qe(e,224)}static uint232(e){return qe(e,232)}static uint240(e){return qe(e,240)}static uint248(e){return qe(e,248)}static uint256(e){return qe(e,256)}static uint(e){return qe(e,256)}static int8(e){return qe(e,-8)}static int16(e){return qe(e,-16)}static int24(e){return qe(e,-24)}static int32(e){return qe(e,-32)}static int40(e){return qe(e,-40)}static int48(e){return qe(e,-48)}static int56(e){return qe(e,-56)}static int64(e){return qe(e,-64)}static int72(e){return qe(e,-72)}static int80(e){return qe(e,-80)}static int88(e){return qe(e,-88)}static int96(e){return qe(e,-96)}static int104(e){return qe(e,-104)}static int112(e){return qe(e,-112)}static int120(e){return qe(e,-120)}static int128(e){return qe(e,-128)}static int136(e){return qe(e,-136)}static int144(e){return qe(e,-144)}static int152(e){return qe(e,-152)}static int160(e){return qe(e,-160)}static int168(e){return qe(e,-168)}static int176(e){return qe(e,-176)}static int184(e){return qe(e,-184)}static int192(e){return qe(e,-192)}static int200(e){return qe(e,-200)}static int208(e){return qe(e,-208)}static int216(e){return qe(e,-216)}static int224(e){return qe(e,-224)}static int232(e){return qe(e,-232)}static int240(e){return qe(e,-240)}static int248(e){return qe(e,-248)}static int256(e){return qe(e,-256)}static int(e){return qe(e,-256)}static bytes1(e){return wn(e,1)}static bytes2(e){return wn(e,2)}static bytes3(e){return wn(e,3)}static bytes4(e){return wn(e,4)}static bytes5(e){return wn(e,5)}static bytes6(e){return wn(e,6)}static bytes7(e){return wn(e,7)}static bytes8(e){return wn(e,8)}static bytes9(e){return wn(e,9)}static bytes10(e){return wn(e,10)}static bytes11(e){return wn(e,11)}static bytes12(e){return wn(e,12)}static bytes13(e){return wn(e,13)}static bytes14(e){return wn(e,14)}static bytes15(e){return wn(e,15)}static bytes16(e){return wn(e,16)}static bytes17(e){return wn(e,17)}static bytes18(e){return wn(e,18)}static bytes19(e){return wn(e,19)}static bytes20(e){return wn(e,20)}static bytes21(e){return wn(e,21)}static bytes22(e){return wn(e,22)}static bytes23(e){return wn(e,23)}static bytes24(e){return wn(e,24)}static bytes25(e){return wn(e,25)}static bytes26(e){return wn(e,26)}static bytes27(e){return wn(e,27)}static bytes28(e){return wn(e,28)}static bytes29(e){return wn(e,29)}static bytes30(e){return wn(e,30)}static bytes31(e){return wn(e,31)}static bytes32(e){return wn(e,32)}static address(e){return new Pu(Ru,"address",e)}static bool(e){return new Pu(Ru,"bool",!!e)}static bytes(e){return new Pu(Ru,"bytes",e)}static string(e){return new Pu(Ru,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new Pu(Ru,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===B7}static dereference(e,n){if(Pu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};vg=new WeakMap;let ui=Pu;class e7e extends Dd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ui.dereference(n,"string");try{r=Tn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Tn($f(e.readValue(),20))}}class t7e extends Dd{constructor(n){super(n.name,n.type,"_",n.dynamic);re(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function yte(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return ye(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),ye(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else Z(!1,"invalid tuple value","tuple",n);Z(e.length===r.length,"types/value length mismatch","tuple",n);let s=new oM,i=new oM,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function wte(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if($s(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if($s(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),ob.fromItems(n,r)}class n7e extends Dd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);re(this,"coder");re(this,"length");Et(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ui.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Iee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return yte(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),ye(r*Ti<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*Ti,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new t7e(this.coder));return wte(n,s)}}class r7e extends Dd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ui.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class bte extends Dd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=Ii(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class s7e extends bte{constructor(e){super("bytes",e)}decode(e){return Oe(super.decode(e))}}class i7e extends Dd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);re(this,"size");Et(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=Ii(ui.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Oe(n.readBytes(this.size))}}const o7e=new Uint8Array([]);class a7e extends Dd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(o7e)}decode(e){return e.readBytes(0),null}}const c7e=BigInt(0),l7e=BigInt(1),u7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class d7e extends Dd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);re(this,"size");re(this,"signed");Et(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Ze(ui.dereference(r,this.type)),i=Jv(u7e,Ti*8);if(this.signed){let o=Jv(i,this.size*8-1);(s>o||s<-(o+l7e))&&this._throwError("value out-of-bounds",r),s=Ree(s,8*Ti)}else(s<c7e||s>Jv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Jv(n.readValue(),this.size*8);return this.signed&&(r=cje(r,this.size*8)),r}}class h7e extends bte{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,fd(ui.dereference(n,"string")))}decode(e){return UI(super.decode(e))}}class sS extends Dd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);re(this,"coders");Et(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ui.dereference(r,"tuple");return yte(n,this.coders,s)}decode(n){return wte(n,this.coders)}}function n2(t,e){return{address:Tn(t),storageKeys:e.map((n,r)=>(Z(sr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function Fm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(Z(n.length===2,"invalid slot set",`value[${r}]`,n),n2(n[0],n[1])):(Z(n!=null&&typeof n=="object","invalid address-slot set","value",t),n2(n.address,n.storageKeys)));Z(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return n2(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function vte(t){return{address:Tn(t.address),nonce:Ze(t.nonce!=null?t.nonce:0),chainId:Ze(t.chainId!=null?t.chainId:0),signature:Io.from(t.signature)}}function f7e(t){let e;return typeof t=="string"?e=y_.computePublicKey(t,!1):e=t.publicKey,Tn(qr("0x"+e.substring(4)).substring(26))}function p7e(t,e){return f7e(y_.recoverPublicKey(t,e))}const ms=BigInt(0),g7e=BigInt(2),m7e=BigInt(27),y7e=BigInt(28),w7e=BigInt(35),b7e=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r2=4096*32;function v7e(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Qt(t.blobToKzgCommitment(Oe(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Qt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Qt(t.blobToKZGCommitment(Oe(r)));Z(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Qt(t.computeBlobProof(Oe(r),Oe(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Qt(t.computeBlobKZGProof(Oe(r),Oe(s)));Z(!1,"unsupported KZG library","kzg",t)}}}function $7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Vb(e).substring(4),"0x"+n}function Kb(t){return t==="0x"?null:Tn(t)}function ZT(t,e){try{return Fm(t)}catch(n){Z(!1,n.message,e,t)}}function E7e(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:Kb(s[1]),nonce:Wn(s[2],"nonce"),chainId:Wn(s[0],"chainId"),signature:Io.from({yParity:jm(s[3],"yParity"),r:xd(s[4],32),s:xd(s[5],32)})})}return n}catch(n){Z(!1,n.message,e,t)}}function jm(t,e){return t==="0x"?0:Jt(t,e)}function Wn(t,e){if(t==="0x")return ms;const n=Ze(t,e);return Z(n<=b7e,"value exceeds uint size",e,n),n}function on(t,e){const n=Ze(t,"value"),r=ss(n);return Z(r.length<=32,"value too large",`tx.${e}`,n),r}function XT(t){return Fm(t).map(e=>[e.address,e.storageKeys])}function C7e(t){return t.map(e=>[on(e.chainId,"chainId"),e.address,on(e.nonce,"nonce"),on(e.signature.yParity,"yParity"),ss(e.signature.r),ss(e.signature.s)])}function _7e(t,e){Z(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)Z(sr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function A7e(t){const e=U1(t);Z(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:jm(e[0],"nonce"),gasPrice:Wn(e[1],"gasPrice"),gasLimit:Wn(e[2],"gasLimit"),to:Kb(e[3]),value:Wn(e[4],"value"),data:Oe(e[5]),chainId:ms};if(e.length===6)return n;const r=Wn(e[6],"v"),s=Wn(e[7],"r"),i=Wn(e[8],"s");if(s===ms&&i===ms)n.chainId=r;else{let o=(r-w7e)/g7e;o<ms&&(o=ms),n.chainId=o,Z(o!==ms||r===m7e||r===y7e,"non-canonical legacy v","v",e[6]),n.signature=Io.from({r:xd(e[7],32),s:xd(e[8],32),v:r})}return n}function S7e(t,e){const n=[on(t.nonce,"nonce"),on(t.gasPrice||0,"gasPrice"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data];let r=ms;if(t.chainId!=ms)r=Ze(t.chainId,"tx.chainId"),Z(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==ms&&(n.push(ss(r)),n.push("0x"),n.push("0x")),jf(n);let s=BigInt(27+e.yParity);return r!==ms?s=Io.getChainIdV(r,e.v):BigInt(e.v)!==s&&Z(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(ss(s)),n.push(ss(e.r)),n.push(ss(e.s)),jf(n)}function eR(t,e){let n;try{if(n=jm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{Z(!1,"invalid yParity","yParity",e[0])}const r=xd(e[1],32),s=xd(e[2],32),i=Io.from({r,s,yParity:n});t.signature=i}function x7e(t){const e=U1(Qt(t).slice(1));Z(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Oe(t));const n={type:2,chainId:Wn(e[0],"chainId"),nonce:jm(e[1],"nonce"),maxPriorityFeePerGas:Wn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Wn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Wn(e[4],"gasLimit"),to:Kb(e[5]),value:Wn(e[6],"value"),data:Oe(e[7]),accessList:ZT(e[8],"accessList")};return e.length===9||eR(n,e.slice(9)),n}function I7e(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,XT(t.accessList||[])];return e&&(n.push(on(e.yParity,"yParity")),n.push(ss(e.r)),n.push(ss(e.s))),Or(["0x02",jf(n)])}function N7e(t){const e=U1(Qt(t).slice(1));Z(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Oe(t));const n={type:1,chainId:Wn(e[0],"chainId"),nonce:jm(e[1],"nonce"),gasPrice:Wn(e[2],"gasPrice"),gasLimit:Wn(e[3],"gasLimit"),to:Kb(e[4]),value:Wn(e[5],"value"),data:Oe(e[6]),accessList:ZT(e[7],"accessList")};return e.length===8||eR(n,e.slice(8)),n}function T7e(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.gasPrice||0,"gasPrice"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,XT(t.accessList||[])];return e&&(n.push(on(e.yParity,"recoveryParam")),n.push(ss(e.r)),n.push(ss(e.s))),Or(["0x01",jf(n)])}function R7e(t){let e=U1(Qt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];Z(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),Z(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),Z(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),Z(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),Z(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}Z(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Oe(t));const s={type:3,chainId:Wn(e[0],"chainId"),nonce:jm(e[1],"nonce"),maxPriorityFeePerGas:Wn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Wn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Wn(e[4],"gasLimit"),to:Kb(e[5]),value:Wn(e[6],"value"),data:Oe(e[7]),accessList:ZT(e[8],"accessList"),maxFeePerBlobGas:Wn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),Z(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),Z(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)Z(sr(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||eR(s,e.slice(11)),s}function P7e(t,e,n){const r=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||m_,on(t.value,"value"),t.data,XT(t.accessList||[]),on(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),_7e(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(on(e.yParity,"yParity")),r.push(ss(e.r)),r.push(ss(e.s)),n)?Or(["0x03",jf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Or(["0x03",jf(r)])}function O7e(t){const e=U1(Qt(t).slice(1));Z(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Oe(t));const n={type:4,chainId:Wn(e[0],"chainId"),nonce:jm(e[1],"nonce"),maxPriorityFeePerGas:Wn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:Wn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:Wn(e[4],"gasLimit"),to:Kb(e[5]),value:Wn(e[6],"value"),data:Oe(e[7]),accessList:ZT(e[8],"accessList"),authorizationList:E7e(e[9],"authorizationList")};return e.length===10||eR(n,e.slice(10)),n}function k7e(t,e){const n=[on(t.chainId,"chainId"),on(t.nonce,"nonce"),on(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),on(t.maxFeePerGas||0,"maxFeePerGas"),on(t.gasLimit,"gasLimit"),t.to||"0x",on(t.value,"value"),t.data,XT(t.accessList||[]),C7e(t.authorizationList||[])];return e&&(n.push(on(e.yParity,"yParity")),n.push(ss(e.r)),n.push(ss(e.s))),Or(["0x04",jf(n)])}var xc,Y0,Q0,J0,Z0,X0,ew,tw,nw,rw,sw,iw,Eg,Dh,Al,Mh,ow,aw,YS;const wl=class wl{constructor(){Q(this,aw);Q(this,xc);Q(this,Y0);Q(this,Q0);Q(this,J0);Q(this,Z0);Q(this,X0);Q(this,ew);Q(this,tw);Q(this,nw);Q(this,rw);Q(this,sw);Q(this,iw);Q(this,Eg);Q(this,Dh);Q(this,Al);Q(this,Mh);Q(this,ow);L(this,xc,null),L(this,Y0,null),L(this,J0,0),L(this,Z0,ms),L(this,X0,null),L(this,ew,null),L(this,tw,null),L(this,Q0,"0x"),L(this,nw,ms),L(this,rw,ms),L(this,sw,null),L(this,iw,null),L(this,Eg,null),L(this,Dh,null),L(this,Al,null),L(this,Mh,null),L(this,ow,null)}get type(){return _(this,xc)}set type(e){switch(e){case null:L(this,xc,null);break;case 0:case"legacy":L(this,xc,0);break;case 1:case"berlin":case"eip-2930":L(this,xc,1);break;case 2:case"london":case"eip-1559":L(this,xc,2);break;case 3:case"cancun":case"eip-4844":L(this,xc,3);break;case 4:case"pectra":case"eip-7702":L(this,xc,4);break;default:Z(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,Y0);return e==null&&this.type===3?m_:e}set to(e){L(this,Y0,e==null?null:Tn(e))}get nonce(){return _(this,J0)}set nonce(e){L(this,J0,Jt(e,"value"))}get gasLimit(){return _(this,Z0)}set gasLimit(e){L(this,Z0,Ze(e))}get gasPrice(){const e=_(this,X0);return e==null&&(this.type===0||this.type===1)?ms:e}set gasPrice(e){L(this,X0,e==null?null:Ze(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,ew);return e??(this.type===2||this.type===3?ms:null)}set maxPriorityFeePerGas(e){L(this,ew,e==null?null:Ze(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,tw);return e??(this.type===2||this.type===3?ms:null)}set maxFeePerGas(e){L(this,tw,e==null?null:Ze(e,"maxFeePerGas"))}get data(){return _(this,Q0)}set data(e){L(this,Q0,Oe(e))}get value(){return _(this,nw)}set value(e){L(this,nw,Ze(e,"value"))}get chainId(){return _(this,rw)}set chainId(e){L(this,rw,Ze(e))}get signature(){return _(this,sw)||null}set signature(e){L(this,sw,e==null?null:Io.from(e))}get accessList(){const e=_(this,iw)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){L(this,iw,e==null?null:Fm(e))}get authorizationList(){const e=_(this,ow)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){L(this,ow,e==null?null:e.map(n=>vte(n)))}get maxFeePerBlobGas(){const e=_(this,Eg);return e==null&&this.type===3?ms:e}set maxFeePerBlobGas(e){L(this,Eg,e==null?null:Ze(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,Dh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){Z(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)Z(sr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}L(this,Dh,e)}get blobs(){return _(this,Mh)==null?null:_(this,Mh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){L(this,Mh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(tB(i)){ye(_(this,Al),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Qt(i);if(Z(o.length<=r2,"blob is too large",`blobs[${s}]`,i),o.length!==r2){const l=new Uint8Array(r2);l.set(o),o=l}const a=_(this,Al).blobToKzgCommitment(o),c=Oe(_(this,Al).computeBlobKzgProof(o,a));n.push({data:Oe(o),commitment:Oe(a),proof:c}),r.push($7(1,a))}else{const o=Oe(i.commitment);n.push({data:Oe(i.data),commitment:o,proof:Oe(i.proof)}),r.push($7(1,o))}}L(this,Mh,n),L(this,Dh,r)}get kzg(){return _(this,Al)}set kzg(e){e==null?L(this,Al,null):L(this,Al,v7e(e))}get hash(){return this.signature==null?null:qr(he(this,aw,YS).call(this,!0,!1))}get unsignedHash(){return qr(this.unsignedSerialized)}get from(){return this.signature==null?null:p7e(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:y_.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return he(this,aw,YS).call(this,!0,!0)}get unsignedSerialized(){return he(this,aw,YS).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,Eg)!=null||_(this,Dh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&ye(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),ye(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),ye(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return wl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new wl;if(typeof e=="string"){const r=Qt(e);if(r[0]>=127)return wl.from(A7e(r));switch(r[0]){case 1:return wl.from(N7e(r));case 2:return wl.from(x7e(r));case 3:return wl.from(R7e(r));case 4:return wl.from(O7e(r))}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new wl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=Io.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Z(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(Z(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Z(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};xc=new WeakMap,Y0=new WeakMap,Q0=new WeakMap,J0=new WeakMap,Z0=new WeakMap,X0=new WeakMap,ew=new WeakMap,tw=new WeakMap,nw=new WeakMap,rw=new WeakMap,sw=new WeakMap,iw=new WeakMap,Eg=new WeakMap,Dh=new WeakMap,Al=new WeakMap,Mh=new WeakMap,ow=new WeakMap,aw=new WeakSet,YS=function(e,n){ye(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return S7e(this,r);case 1:return T7e(this,r);case 2:return I7e(this,r);case 3:return P7e(this,r,n?this.blobs:null);case 4:return k7e(this,r)}ye(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let $I=wl;function gm(t){return qr(fd(t))}var D7e="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const F7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),j7=4;function M7e(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let C=0;C<d;C++)w=w<<1|u();let y=[],b=0,v=h;for(;;){let C=Math.floor(((w-b+1)*s-1)/v),N=0,x=r;for(;x-N>1;){let D=N+x>>>1;C<i[D]?x=D:N=D}if(N==0)break;y.push(N);let T=b+Math.floor(v*i[N]/s),S=b+Math.floor(v*i[N+1]/s)-1;for(;!((T^S)&f);)w=w<<1&g|u(),T=T<<1&g,S=S<<1&g|1;for(;T&~S&p;)w=w&f|w<<1&g>>>1|u(),T=T<<1^f,S=(S^f)<<1|f|1;b=T,v=1+S-T}let A=r-4;return y.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function L7e(t){let e=0;return()=>t[e++]}function Ete(t){return L7e(M7e(U7e(t)))}function U7e(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function B7e(t){return t&1?~t>>1:t>>1}function $7e(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=B7e(e());return n}function w_(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function Cte(t){return b_(()=>{let e=w_(t);if(e.length)return e})}function _te(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(F7e(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(j7e(n,t))}return e.flat()}function b_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Ate(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)$7e(t,n).forEach((i,o)=>r[o].push(i));return r}function F7e(t,e){let n=1+e(),r=e(),s=b_(e);return Ate(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function j7e(t,e){let n=1+e();return Ate(n,1+t,e).map(s=>[s[0],s.slice(1)])}function W7e(t){let e=[],n=w_(t);return s(r([]),[]),e;function r(i){let o=t(),a=b_(()=>{let c=w_(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function z7e(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Ste(t){return`{${z7e(t)}}`}function H7e(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function db(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function G7e(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var q7e="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const v_=44032,FI=4352,jI=4449,WI=4519,xte=19,Ite=21,hb=28,zI=Ite*hb,V7e=xte*zI,K7e=v_+V7e,Y7e=FI+xte,Q7e=jI+Ite,J7e=WI+hb;function Xv(t){return t>>24&255}function Nte(t){return t&16777215}let pM,W7,gM,QS;function Z7e(){let t=Ete(q7e);pM=new Map(Cte(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),W7=new Set(w_(t)),gM=new Map,QS=new Map;for(let[e,n]of _te(t)){if(!W7.has(e)&&n.length==2){let[r,s]=n,i=QS.get(r);i||(i=new Map,QS.set(r,i)),i.set(s,e)}gM.set(e,n.reverse())}}function Tte(t){return t>=v_&&t<K7e}function X7e(t,e){if(t>=FI&&t<Y7e&&e>=jI&&e<Q7e)return v_+(t-FI)*zI+(e-jI)*hb;if(Tte(t)&&e>WI&&e<J7e&&(t-v_)%hb==0)return t+(e-WI);{let n=QS.get(t);return n&&(n=n.get(e),n)?n:-1}}function Rte(t){pM||Z7e();let e=[],n=[],r=!1;function s(i){let o=pM.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(Tte(i)){let o=i-v_,a=o/zI|0,c=o%zI/hb|0,l=o%hb;s(FI+a),s(jI+c),l>0&&s(WI+l)}else{let o=gM.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Xv(e[0]);for(let o=1;o<e.length;o++){let a=Xv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Xv(e[--c]),i<=a))break}i=Xv(e[o])}}return e}function eWe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Xv(i),a=Nte(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=X7e(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Pte(t){return Rte(t).map(Nte)}function tWe(t){return eWe(Rte(t))}const z7=45,Ote=".",kte=65039,Dte=1,HI=t=>Array.from(t);function E_(t,e){return t.P.has(e)||t.Q.has(e)}class nWe extends Array{get is_emoji(){return!0}}let mM,Mte,Xp,yM,Lte,C0,s2,Dy,Ap,H7,wM;function hB(){if(mM)return;let t=Ete(D7e);const e=()=>w_(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));mM=new Map(_te(t)),Mte=n(),Xp=e(),yM=new Set(e().map(u=>Xp[u])),Xp=new Set(Xp),Lte=n(),n();let s=Cte(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};C0=b_(u=>{let d=b_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=db(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),s2=n(),Dy=new Map;let a=e().concat(HI(s2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),s2.has(u)||Dy.set(u,f)});for(let{V:u,M:d}of new Set(Dy.values())){let h=[];for(let p of u){let g=C0.filter(y=>E_(y,p)),w=h.find(({G:y})=>g.some(b=>y.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>HI(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(y=>!p.has(y)));for(let y of g)d.set(y,w)}}Ap=new Set;let c=new Set;const l=u=>Ap.has(u)?c.add(u):Ap.add(u);for(let u of C0){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of Ap)!Dy.has(u)&&!c.has(u)&&Dy.set(u,Dte);r(Ap,Pte(Ap)),H7=W7e(t).map(u=>nWe.from(u)).sort(G7e),wM=new Map;for(let u of H7){let d=[wM];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===kte?d.push(...f):d=f}for(let h of d)h.V=u}}function fB(t){return(Ute(t)?"":`${pB(tR([t]))} `)+Ste(t)}function pB(t){return`"${t}"`}function rWe(t){if(t.length>=4&&t[2]==z7&&t[3]==z7)throw new Error(`invalid label extension: "${db(t.slice(0,4))}"`)}function sWe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function iWe(t){let e=t[0],n=F7.get(e);if(n)throw $E(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=F7.get(e);if(o){if(s==i)throw $E(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw $E(`trailing ${n}`)}function tR(t,e=1/0,n=Ste){let r=[];oWe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];Ute(a)&&(r.push(db(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(db(t.slice(s,i))),r.join("")}function oWe(t){return hB(),Xp.has(t)}function Ute(t){return hB(),Lte.has(t)}function aWe(t){return dWe(cWe(t,tWe,pWe))}function cWe(t,e,n){if(!t)return[];hB();let r=0;return t.split(Ote).map(s=>{let i=H7e(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=fWe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(sWe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))rWe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Xp.has(u[0]))throw $E("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&Xp.has(w[0]))throw $E(`emoji + combining mark: "${db(a[g-1])} + ${tR([w[0]])}"`)}iWe(u);let f=HI(new Set(h)),[p]=uWe(f);hWe(p,h),lWe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function lWe(t,e){let n,r=[];for(let s of e){let i=Dy.get(s);if(i===Dte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):HI(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>E_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function uWe(t){let e=C0;for(let n of t){let r=e.filter(s=>E_(s,n));if(!r.length)throw C0.some(s=>E_(s,n))?$te(e[0],n):Bte(n);if(e=r,r.length==1)break}return e}function dWe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${pB(tR(e,63))}: ${s}`)}return db(r)}).join(Ote)}function Bte(t){return new Error(`disallowed character: ${fB(t)}`)}function $te(t,e){let n=fB(e),r=C0.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function $E(t){return new Error(`illegal placement: ${t}`)}function hWe(t,e){for(let n of e)if(!E_(t,n))throw $te(t,n);if(t.M){let n=Pte(e);for(let r=1,s=n.length;r<s;r++)if(yM.has(n[r])){let i=r+1;for(let o;i<s&&yM.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${fB(o)}`);if(i-r>j7)throw new Error(`excessive non-spacing marks: ${pB(tR(n.slice(r-1,i)))} (${i-r}/${j7})`);r=i}}}function fWe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=gWe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(Ap.has(o))s.push(o);else{let a=mM.get(o);if(a)s.push(...a);else if(!Mte.has(o))throw Bte(o)}}}return s.length&&r.push(e(s)),r}function pWe(t){return t.filter(e=>e!=kte)}function gWe(t,e){let n=wM,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const Fte=new Uint8Array(32);Fte.fill(0);function G7(t){return Z(t.length!==0,"invalid ENS name; empty component","comp",t),t}function jte(t){const e=fd(mWe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(G7(e.slice(r,s))),r=s+1);return Z(r<e.length,"invalid ENS name; empty component","name",t),n.push(G7(e.slice(r))),n}function mWe(t){try{if(t.length===0)throw new Error("empty label");return aWe(t)}catch(e){Z(!1,`invalid ENS name (${e.message})`,"name",t)}}function bM(t){Z(typeof t=="string","invalid ENS name; not a string","name",t),Z(t.length,"invalid ENS name (empty label)","name",t);let e=Fte;const n=jte(t);for(;n.length;)e=qr(Or([e,qr(n.pop())]));return Oe(e)}function yWe(t,e){const n=e;return Z(n<=255,"DNS encoded label cannot exceed 255","length",n),Oe(Or(jte(t).map(r=>{Z(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const Wte=new Uint8Array(32);Wte.fill(0);const wWe=BigInt(-1),zte=BigInt(0),Hte=BigInt(1),bWe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function vWe(t){const e=Qt(t),n=e.length%32;return n?Or([e,Wte.slice(n)]):Oe(e)}const EWe=$f(Hte,32),CWe=$f(zte,32),q7={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},i2=["name","version","chainId","verifyingContract","salt"];function V7(t){return function(e){return Z(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const _We={name:V7("name"),version:V7("version"),chainId:function(t){const e=Ze(t,"domain.chainId");return Z(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):Oc(e)},verifyingContract:function(t){try{return Tn(t).toLowerCase()}catch{}Z(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Qt(t,"domain.salt");return Z(e.length===32,'invalid domain value "salt"',"domain.salt",t),Oe(e)}};function o2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);Z(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Jv(bWe,n?r-1:r),i=n?(s+Hte)*wWe:zte;return function(o){const a=Ze(o,"value");return Z(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),$f(n?Ree(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return Z(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Qt(r);return Z(s.length===n,`invalid length for ${t}`,"value",r),vWe(r)}}}switch(t){case"address":return function(e){return xd(Tn(e),32)};case"bool":return function(e){return e?EWe:CWe};case"bytes":return function(e){return qr(e)};case"string":return function(e){return gm(e)}}return null}function K7(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function iS(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var M_,Wu,cw,eN,Gte;const Ta=class Ta{constructor(e){Q(this,eN);re(this,"primaryType");Q(this,M_);Q(this,Wu);Q(this,cw);L(this,Wu,new Map),L(this,cw,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=iS(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),L(this,M_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){Z(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=iS(u.type).base;Z(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!o2(d)&&(Z(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);Z(o.length!==0,"missing primary type","types",e),Z(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),Et(this,{primaryType:o[0]});function a(c,l){Z(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,Wu).set(c,K7(c,i[c])+u.map(d=>K7(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,M_))}getEncoder(e){let n=_(this,cw).get(e);return n||(n=he(this,eN,Gte).call(this,e),_(this,cw).set(e,n)),n}encodeType(e){const n=_(this,Wu).get(e);return Z(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return qr(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(o2(e))return r(e,n);const s=iS(e).array;if(s)return Z(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});Z(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new Ta(e)}static getPrimaryType(e){return Ta.from(e).primaryType}static hashStruct(e,n,r){return Ta.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=q7[r];Z(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>i2.indexOf(r.name)-i2.indexOf(s.name)),Ta.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Or(["0x1901",Ta.hashDomain(e),Ta.from(n).hash(r)])}static hash(e,n,r){return qr(Ta.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!sr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=Ta.from(n);o.visit(r,(a,c)=>(a==="address"&&!sr(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){Ta.hashDomain(e);const s={},i=[];i2.forEach(c=>{const l=e[c];l!=null&&(s[c]=_We[c](l),i.push({name:c,type:q7[c]}))});const o=Ta.from(n);n=o.types;const a=Object.assign({},n);return Z(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Oe(Qt(l));if(c.match(/^u?int/))return Ze(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return Z(typeof l=="string","invalid string","value",l),l}Z(!1,"unsupported type","type",c)})}}};M_=new WeakMap,Wu=new WeakMap,cw=new WeakMap,eN=new WeakSet,Gte=function(e){{const s=o2(e);if(s)return s}const n=iS(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{Z(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,Wu).has(s)&&(a=a.map(qr)),qr(Or(a))}}const r=this.types[e];if(r){const s=gm(_(this,Wu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,Wu).has(c)?qr(l):l});return o.unshift(s),Or(o)}}Z(!1,`unknown type: ${e}`,"type",e)};let GI=Ta;function Pi(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const AWe="external public payable override",SWe=Pi(AWe.split(" ")),qte="constant external internal payable private public pure view override",xWe=Pi(qte.split(" ")),Vte="constructor error event fallback function receive struct",Kte=Pi(Vte.split(" ")),Yte="calldata memory storage payable indexed",IWe=Pi(Yte.split(" ")),NWe="tuple returns",TWe=[Vte,Yte,NWe,qte].join(" "),RWe=Pi(TWe.split(" ")),PWe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},OWe=new RegExp("^(\\s*)"),kWe=new RegExp("^([0-9]+)"),DWe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Qte=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Jte=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Ms,Ic,L_,vM;const tN=class tN{constructor(e){Q(this,L_);Q(this,Ms);Q(this,Ic);L(this,Ms,0),L(this,Ic,e.slice())}get offset(){return _(this,Ms)}get length(){return _(this,Ic).length-_(this,Ms)}clone(){return new tN(_(this,Ic))}reset(){L(this,Ms,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=he(this,L_,vM).call(this,_(this,Ms)+1,e.match+1);return L(this,Ms,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,Ms)<e.match-1;){const r=this.peek().linkNext;n.push(he(this,L_,vM).call(this,_(this,Ms)+1,r)),L(this,Ms,r)}return L(this,Ms,e.match+1),n}peek(){if(_(this,Ms)>=_(this,Ic).length)throw new Error("out-of-bounds");return _(this,Ic)[_(this,Ms)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return $d(this,Ms)._++,e}toString(){const e=[];for(let n=_(this,Ms);n<_(this,Ic).length;n++){const r=_(this,Ic)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Ms=new WeakMap,Ic=new WeakMap,L_=new WeakSet,vM=function(e=0,n=0){return new tN(_(this,Ic).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Zc=tN;function Qf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(OWe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=PWe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Jt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(DWe),a){if(c.text=a[1],i+=c.text.length,RWe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Jte)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(kWe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Zc(e.map(o=>Object.freeze(o)))}function Y7(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function nR(t,e){if(e.peekKeyword(Kte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function Id(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Zte(t){let e=Id(t,xWe);return Y7(e,Pi("constant payable nonpayable".split(" "))),Y7(e,Pi("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function pd(t,e){return t.popParams().map(n=>zs.from(n,e))}function Xte(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Ze(t.pop().text);throw new Error("invalid gas")}return null}function mm(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const MWe=new RegExp(/^(.*)\[([0-9]*)\]$/);function Q7(t){const e=t.match(Jte);if(Z(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);Z(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);Z(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const br={},To=Symbol.for("_ethers_internal"),J7="_ParamTypeInternal",Z7="_ErrorInternal",X7="_EventInternal",eW="_ConstructorInternal",tW="_FallbackInternal",nW="_FunctionInternal",rW="_StructInternal";var lw,JS;const Ra=class Ra{constructor(e,n,r,s,i,o,a,c){Q(this,lw);re(this,"name");re(this,"type");re(this,"baseType");re(this,"indexed");re(this,"components");re(this,"arrayLength");re(this,"arrayChildren");if(qT(e,br,"ParamType"),Object.defineProperty(this,To,{value:J7}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");Et(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return he(this,lw,JS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(Ra.isParamType(e))return e;if(typeof e=="string")try{return Ra.from(Qf(e),n)}catch{Z(!1,"invalid param type","obj",e)}else if(e instanceof Zc){let a="",c="",l=null;Id(e,Pi(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>Ra.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=Q7(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new Ra(br,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(Id(e,IWe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Ra(br,p,a,c,h,l,d,u)}const r=e.name;Z(!r||typeof r=="string"&&r.match(Qte),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(Z(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(MWe);if(o){const a=parseInt(o[2]||"-1"),c=Ra.from({type:o[1],components:e.components});return new Ra(br,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>Ra.from(l)):null;return new Ra(br,r||"",i,"tuple",s,a,null,null)}return i=Q7(e.type),new Ra(br,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[To]===J7}};lw=new WeakSet,JS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;he(u=o,lw,JS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;he(u=o[l],lw,JS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let zs=Ra;class ym{constructor(e,n,r){re(this,"type");re(this,"inputs");qT(e,br,"Fragment"),r=Object.freeze(r.slice()),Et(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{ym.from(JSON.parse(e))}catch{}return ym.from(Qf(e))}if(e instanceof Zc)switch(e.peekKeyword(Kte)){case"constructor":return id.from(e);case"error":return mo.from(e);case"event":return jl.from(e);case"fallback":case"receive":return Mu.from(e);case"function":return Wl.from(e);case"struct":return $g.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return id.from(e);case"error":return mo.from(e);case"event":return jl.from(e);case"fallback":case"receive":return Mu.from(e);case"function":return Wl.from(e);case"struct":return $g.from(e)}ye(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Z(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return id.isFragment(e)}static isError(e){return mo.isFragment(e)}static isEvent(e){return jl.isFragment(e)}static isFunction(e){return Wl.isFragment(e)}static isStruct(e){return $g.isFragment(e)}}class rR extends ym{constructor(n,r,s,i){super(n,r,i);re(this,"name");Z(typeof s=="string"&&s.match(Qte),"invalid identifier","name",s),i=Object.freeze(i.slice()),Et(this,{name:s})}}function C_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class mo extends rR{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,To,{value:Z7})}get selector(){return gm(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+C_(e,this.inputs)),n.join(" ")}static from(e){if(mo.isFragment(e))return e;if(typeof e=="string")return mo.from(Qf(e));if(e instanceof Zc){const n=nR("error",e),r=pd(e);return mm(e),new mo(br,n,r)}return new mo(br,e.name,e.inputs?e.inputs.map(zs.from):[])}static isFragment(e){return e&&e[To]===Z7}}class jl extends rR{constructor(n,r,s,i){super(n,"event",r,s);re(this,"anonymous");Object.defineProperty(this,To,{value:X7}),Et(this,{anonymous:i})}get topicHash(){return gm(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+C_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>zs.from(i)),new jl(br,n,r,!1).topicHash}static from(n){if(jl.isFragment(n))return n;if(typeof n=="string")try{return jl.from(Qf(n))}catch{Z(!1,"invalid event fragment","obj",n)}else if(n instanceof Zc){const r=nR("event",n),s=pd(n,!0),i=!!Id(n,Pi(["anonymous"])).has("anonymous");return mm(n),new jl(br,r,s,i)}return new jl(br,n.name,n.inputs?n.inputs.map(r=>zs.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[To]===X7}}class id extends ym{constructor(n,r,s,i,o){super(n,r,s);re(this,"payable");re(this,"gas");Object.defineProperty(this,To,{value:eW}),Et(this,{payable:i,gas:o})}format(n){if(ye(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${C_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(id.isFragment(n))return n;if(typeof n=="string")try{return id.from(Qf(n))}catch{Z(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Zc){Id(n,Pi(["constructor"]));const r=pd(n),s=!!Id(n,SWe).has("payable"),i=Xte(n);return mm(n),new id(br,"constructor",r,s,i)}return new id(br,"constructor",n.inputs?n.inputs.map(zs.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[To]===eW}}class Mu extends ym{constructor(n,r,s){super(n,"fallback",r);re(this,"payable");Object.defineProperty(this,To,{value:tW}),Et(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(Mu.isFragment(n))return n;if(typeof n=="string")try{return Mu.from(Qf(n))}catch{Z(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Zc){const r=n.toString(),s=n.peekKeyword(Pi(["fallback","receive"]));if(Z(s,"type must be fallback or receive","obj",r),n.popKeyword(Pi(["fallback","receive"]))==="receive"){const c=pd(n);return Z(c.length===0,"receive cannot have arguments","obj.inputs",c),Id(n,Pi(["payable"])),mm(n),new Mu(br,[],!0)}let o=pd(n);o.length?Z(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[zs.from("bytes")];const a=Zte(n);if(Z(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),Id(n,Pi(["returns"])).has("returns")){const c=pd(n);Z(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return mm(n),new Mu(br,o,a==="payable")}if(n.type==="receive")return new Mu(br,[],!0);if(n.type==="fallback"){const r=[zs.from("bytes")],s=n.stateMutability==="payable";return new Mu(br,r,s)}Z(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[To]===tW}}class Wl extends rR{constructor(n,r,s,i,o,a){super(n,"function",r,i);re(this,"constant");re(this,"outputs");re(this,"stateMutability");re(this,"payable");re(this,"gas");Object.defineProperty(this,To,{value:nW}),o=Object.freeze(o.slice()),Et(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return gm(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+C_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(C_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>zs.from(i)),new Wl(br,n,"view",r,[],null).selector}static from(n){if(Wl.isFragment(n))return n;if(typeof n=="string")try{return Wl.from(Qf(n))}catch{Z(!1,"invalid function fragment","obj",n)}else if(n instanceof Zc){const s=nR("function",n),i=pd(n),o=Zte(n);let a=[];Id(n,Pi(["returns"])).has("returns")&&(a=pd(n));const c=Xte(n);return mm(n),new Wl(br,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new Wl(br,n.name,r,n.inputs?n.inputs.map(zs.from):[],n.outputs?n.outputs.map(zs.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[To]===nW}}class $g extends rR{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,To,{value:rW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return $g.from(Qf(e))}catch{Z(!1,"invalid struct fragment","obj",e)}else if(e instanceof Zc){const n=nR("struct",e),r=pd(e);return mm(e),new $g(br,n,r)}return new $g(br,e.name,e.inputs?e.inputs.map(zs.from):[])}static isFragment(e){return e&&e[To]===rW}}const tl=new Map;tl.set(0,"GENERIC_PANIC");tl.set(1,"ASSERT_FALSE");tl.set(17,"OVERFLOW");tl.set(18,"DIVIDE_BY_ZERO");tl.set(33,"ENUM_RANGE_ERROR");tl.set(34,"BAD_STORAGE_DATA");tl.set(49,"STACK_UNDERFLOW");tl.set(50,"ARRAY_RANGE_ERROR");tl.set(65,"OUT_OF_MEMORY");tl.set(81,"UNINITIALIZED_FUNCTION_CALL");const LWe=new RegExp(/^bytes([0-9]*)$/),UWe=new RegExp(/^(u?int)([0-9]*)$/);let a2=null,sW=1024;function BWe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Qt(n);if(n=Oe(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Oe(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Oe(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${tl.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Tn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Tn(e.from)),dr(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var Lh,My;const nN=class nN{constructor(){Q(this,Lh)}getDefaultValue(e){const n=e.map(s=>he(this,Lh,My).call(this,zs.from(s)));return new sS(n,"_").defaultValue()}encode(e,n){Iee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>he(this,Lh,My).call(this,zs.from(o))),s=new sS(r,"_"),i=new oM;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>he(this,Lh,My).call(this,zs.from(o)));return new sS(s,"_").decode(new aM(n,r,sW))}static _setDefaultMaxInflation(e){Z(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),sW=e}static defaultAbiCoder(){return a2==null&&(a2=new nN),a2}static getBuiltinCallException(e,n,r){return BWe(e,n,r,nN.defaultAbiCoder())}};Lh=new WeakSet,My=function(e){if(e.isArray())return new n7e(he(this,Lh,My).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new sS(e.components.map(r=>he(this,Lh,My).call(this,r)),e.name);switch(e.baseType){case"address":return new e7e(e.name);case"bool":return new r7e(e.name);case"string":return new h7e(e.name);case"bytes":return new s7e(e.name);case"":return new a7e(e.name)}let n=e.type.match(UWe);if(n){let r=parseInt(n[2]||"256");return Z(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new d7e(r/8,n[1]==="int",e.name)}if(n=e.type.match(LWe),n){let r=parseInt(n[1]);return Z(r!==0&&r<=32,"invalid bytes length","param",e),new i7e(r,e.name)}Z(!1,"invalid type","type",e.type)};let __=nN;class $We{constructor(e,n,r){re(this,"fragment");re(this,"name");re(this,"signature");re(this,"topic");re(this,"args");const s=e.name,i=e.format();Et(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class FWe{constructor(e,n,r,s){re(this,"fragment");re(this,"name");re(this,"args");re(this,"signature");re(this,"selector");re(this,"value");const i=e.name,o=e.format();Et(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class jWe{constructor(e,n,r){re(this,"fragment");re(this,"name");re(this,"args");re(this,"signature");re(this,"selector");const s=e.name,i=e.format();Et(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class iW{constructor(e){re(this,"hash");re(this,"_isIndexed");Et(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const oW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},aW={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&oW[t.toString()]&&(e=oW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var Sl,xl,Il,si,Xl,ZS,XS;const Lp=class Lp{constructor(e){Q(this,Xl);re(this,"fragments");re(this,"deploy");re(this,"fallback");re(this,"receive");Q(this,Sl);Q(this,xl);Q(this,Il);Q(this,si);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,L(this,Il,new Map),L(this,Sl,new Map),L(this,xl,new Map);const r=[];for(const o of n)try{r.push(ym.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}Et(this,{fragments:Object.freeze(r)});let s=null,i=!1;L(this,si,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}Et(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(Z(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,Il);break;case"event":c=_(this,xl);break;case"error":c=_(this,Sl);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||Et(this,{deploy:id.from("constructor()")}),Et(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return __.defaultAbiCoder()}getFunctionName(e){const n=he(this,Xl,ZS).call(this,e,null,!1);return Z(n,"no matching function","key",e),n.name}hasFunction(e){return!!he(this,Xl,ZS).call(this,e,null,!1)}getFunction(e,n){return he(this,Xl,ZS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,Il).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,Il).get(s),r)}}getEventName(e){const n=he(this,Xl,XS).call(this,e,null,!1);return Z(n,"no matching event","key",e),n.name}hasEvent(e){return!!he(this,Xl,XS).call(this,e,null,!1)}getEvent(e,n){return he(this,Xl,XS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,xl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,xl).get(s),r)}}getError(e,n){if(sr(e)){const s=e.toLowerCase();if(aW[s])return mo.from(aW[s].signature);for(const i of _(this,Sl).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,Sl))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?mo.from("error Error(string)"):e==="Panic"?mo.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");Z(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=mo.from(e).format(),e==="Error(string)")return mo.from("error Error(string)");if(e==="Panic(uint256)")return mo.from("error Panic(uint256)");const r=_(this,Sl).get(e);return r||null}forEachError(e){const n=Array.from(_(this,Sl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,Sl).get(s),r)}}_decodeParams(e,n){return _(this,si).decode(e,n)}_encodeParams(e,n){return _(this,si).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Z(Nr(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,Nr(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);Z(r,"unknown error","fragment",e),e=r}return Or([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Z(Nr(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,Nr(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Or([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);Z(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=Ii(n);if(s.length%32===0)try{return _(this,si).decode(e.outputs,s)}catch{r="could not decode result data"}ye(!1,r,"BAD_DATA",{value:Oe(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Qt(e,"data"),s=__.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Oe(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,si).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);Z(r,"unknown function","fragment",e),e=r}return Oe(_(this,si).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);Z(i,"unknown event","eventFragment",e),e=i}ye(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?gm(o):i.type==="bytes"?qr(Oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=$f(o):i.type.match(/^bytes/)?o=aje(o,32):i.type==="address"&&_(this,si).encode(["address"],[o]),xd(Oe(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){Z(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?Z(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);Z(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),Z(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(gm(c));else if(o.type==="bytes")r.push(qr(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,si).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,si).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);Z(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;Z(sr(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(zs.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,si).decode(s,Or(r)):null,c=_(this,si).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new iW(null);else if(o[p])g=new iW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),ob.fromItems(l,u)}parseTransaction(e){const n=Qt(e.data,"tx.data"),r=Ze(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Oe(n.slice(0,4)));if(!s)return null;const i=_(this,si).decode(s.inputs,n.slice(4));return new FWe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new $We(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Oe(e),r=this.getError(Nr(n,0,4));if(!r)return null;const s=_(this,si).decode(r.inputs,Nr(n,4));return new jWe(r,r.selector,s)}static from(e){return e instanceof Lp?e:typeof e=="string"?new Lp(JSON.parse(e)):typeof e.formatJson=="function"?new Lp(e.formatJson()):typeof e.format=="function"?new Lp(e.format("json")):new Lp(e)}};Sl=new WeakMap,xl=new WeakMap,Il=new WeakMap,si=new WeakMap,Xl=new WeakSet,ZS=function(e,n,r){if(sr(e)){const i=e.toLowerCase();for(const o of _(this,Il).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,Il))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ui.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ui.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,Il).get(Wl.from(e).format());return s||null},XS=function(e,n,r){if(sr(e)){const i=e.toLowerCase();for(const o of _(this,xl).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,xl))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ui.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");Z(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,xl).get(jl.from(e).format());return s||null};let EM=Lp;const ene=BigInt(0);function _0(t){return t??null}function Lr(t){return t==null?null:t.toString()}class cW{constructor(e,n,r){re(this,"gasPrice");re(this,"maxFeePerGas");re(this,"maxPriorityFeePerGas");Et(this,{gasPrice:_0(e),maxFeePerGas:_0(n),maxPriorityFeePerGas:_0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Lr(e),maxFeePerGas:Lr(n),maxPriorityFeePerGas:Lr(r)}}}function qI(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Oe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Ze(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Jt(t[s],`request.${s}`));return t.accessList&&(e.accessList=Fm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>tB(s)?Oe(s):Object.assign({},s))),e}var zu;class WWe{constructor(e,n){re(this,"provider");re(this,"number");re(this,"hash");re(this,"timestamp");re(this,"parentHash");re(this,"parentBeaconBlockRoot");re(this,"nonce");re(this,"difficulty");re(this,"gasLimit");re(this,"gasUsed");re(this,"stateRoot");re(this,"receiptsRoot");re(this,"blobGasUsed");re(this,"excessBlobGas");re(this,"miner");re(this,"prevRandao");re(this,"extraData");re(this,"baseFeePerGas");Q(this,zu);L(this,zu,e.transactions.map(r=>typeof r!="string"?new A_(r,n):r)),Et(this,{provider:n,hash:_0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:_0(e.prevRandao),extraData:e.extraData,baseFeePerGas:_0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,zu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,zu).slice();return e.length===0?[]:(ye(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Lr(e),difficulty:Lr(n),extraData:r,gasLimit:Lr(s),gasUsed:Lr(i),blobGasUsed:Lr(this.blobGasUsed),excessBlobGas:Lr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,zu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,zu)[e];else{const r=e.toLowerCase();for(const s of _(this,zu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;Z(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return zWe(this)}}zu=new WeakMap;class $1{constructor(e,n){re(this,"provider");re(this,"transactionHash");re(this,"blockHash");re(this,"blockNumber");re(this,"removed");re(this,"address");re(this,"data");re(this,"topics");re(this,"index");re(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());Et(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return ye(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return ye(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return HWe(this)}}var U_;class tne{constructor(e,n){re(this,"provider");re(this,"to");re(this,"from");re(this,"contractAddress");re(this,"hash");re(this,"index");re(this,"blockHash");re(this,"blockNumber");re(this,"logsBloom");re(this,"gasUsed");re(this,"blobGasUsed");re(this,"cumulativeGasUsed");re(this,"gasPrice");re(this,"blobGasPrice");re(this,"type");re(this,"status");re(this,"root");Q(this,U_);L(this,U_,Object.freeze(e.logs.map(s=>new $1(s,n))));let r=ene;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),Et(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,U_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Lr(this.cumulativeGasUsed),from:n,gasPrice:Lr(this.gasPrice),blobGasUsed:Lr(this.blobGasUsed),blobGasPrice:Lr(this.blobGasPrice),gasUsed:Lr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return rne(this)}reorderedEvent(e){return ye(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),nne(this,e)}}U_=new WeakMap;var Uh;const IB=class IB{constructor(e,n){re(this,"provider");re(this,"blockNumber");re(this,"blockHash");re(this,"index");re(this,"hash");re(this,"type");re(this,"to");re(this,"from");re(this,"nonce");re(this,"gasLimit");re(this,"gasPrice");re(this,"maxPriorityFeePerGas");re(this,"maxFeePerGas");re(this,"maxFeePerBlobGas");re(this,"data");re(this,"value");re(this,"chainId");re(this,"signature");re(this,"accessList");re(this,"blobVersionedHashes");re(this,"authorizationList");Q(this,Uh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,L(this,Uh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Lr(this.chainId),data:l,from:a,gasLimit:Lr(this.gasLimit),gasPrice:Lr(this.gasPrice),hash:s,maxFeePerGas:Lr(this.maxFeePerGas),maxPriorityFeePerGas:Lr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Lr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Lr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await _i({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,Uh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await _i({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,Uh)&&(o=_(this,Uh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const y=await g.getTransaction(w);if(y.from===this.from&&y.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(y.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";y.data===this.data&&y.to===this.to&&y.value===this.value?v="repriced":y.data==="0x"&&y.from===y.to&&y.value===ene&&(v="cancelled"),ye(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:y.replaceableTransaction(i),hash:y.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;ye(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(y=>y())};if(p.push(()=>{a=!0}),s>0){const y=setTimeout(()=>{g(),f(dr("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(y)})}const w=async y=>{if(await y.confirmations()>=r){g();try{h(l(y))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const y=async()=>{try{await c()}catch(b){if($s(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",y)};p.push(()=>{this.provider.off("block",y)}),this.provider.once("block",y)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),rne(this)}reorderedEvent(e){return ye(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ye(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),nne(this,e)}replaceableTransaction(e){Z(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new IB(this,this.provider);return L(n,Uh,e),n}};Uh=new WeakMap;let A_=IB;function zWe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function nne(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function rne(t){return{orphan:"drop-transaction",tx:t}}function HWe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class gB extends $1{constructor(n,r,s){super(n,n.provider);re(this,"interface");re(this,"fragment");re(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);Et(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class sne extends $1{constructor(n,r){super(n,n.provider);re(this,"error");Et(this,{error:r})}}var uw;class GWe extends tne{constructor(n,r,s){super(s,r);Q(this,uw);L(this,uw,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,uw).getEvent(n.topics[0]):null;if(r)try{return new gB(n,_(this,uw),r)}catch(s){return new sne(n,s)}return n})}}uw=new WeakMap;var B_;class mB extends A_{constructor(n,r,s){super(s,r);Q(this,B_);L(this,B_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new GWe(_(this,B_),this.provider,s)}}B_=new WeakMap;class ine extends Pee{constructor(n,r,s,i){super(n,r,s);re(this,"log");Et(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class qWe extends ine{constructor(e,n,r,s,i){super(e,n,r,new gB(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);Et(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const lW=BigInt(0);function one(t){return t&&typeof t.call=="function"}function ane(t){return t&&typeof t.estimateGas=="function"}function sR(t){return t&&typeof t.resolveName=="function"}function cne(t){return t&&typeof t.sendTransaction=="function"}function lne(t){if(t!=null){if(sR(t))return t;if(t.provider)return t.provider}}var $_;class VWe{constructor(e,n,r){Q(this,$_);re(this,"fragment");if(Et(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=wm(e.runner,"resolveName"),i=sR(s)?s:null;L(this,$_,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Ri(h,i))):Ri(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,$_)}}$_=new WeakMap;function wm(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function eg(t){return t==null?null:t.provider||null}async function une(t,e){const n=ui.dereference(t,"overrides");Z(typeof n=="object","invalid overrides parameter","overrides",t);const r=qI(n);return Z(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Z(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function KWe(t,e,n){const r=wm(t,"resolveName"),s=sR(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ui.dereference(c,a),a==="address"?Ri(c,s):c))))}function YWe(t){const e=async function(o){const a=await une(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Ri(a.from,lne(t.runner)));const c=t.interface,l=Ze(a.value||lW,"overrides.value")===lW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&Z(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return Z(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),Z(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=wm(t.runner,"call");ye(one(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw eB(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;ye(cne(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=eg(t.runner);return new mB(t.interface,l,c)},s=async function(o){const a=wm(t.runner,"estimateGas");return ye(ane(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return Et(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function QWe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return ye(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await une(l.pop()),d.from&&(d.from=await Ri(d.from,lne(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await KWe(t.runner,u.inputs,l);return Object.assign({},d,await _i({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;ye(cne(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=eg(t.runner);return new mB(t.interface,h,d)},o=async function(...l){const u=wm(t.runner,"estimateGas");return ye(ane(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=wm(t.runner,"call");ye(one(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw eB(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return Et(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return ye(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function JWe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return ye(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new VWe(t,n(...s),s)};return Et(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return ye(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const VI=Symbol.for("_ethersInternal_contract"),dne=new WeakMap;function ZWe(t,e){dne.set(t[VI],e)}function qo(t){return dne.get(t[VI])}function XWe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function yB(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(sr(o,32))return o;const a=t.interface.getEvent(o);return Z(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?sr(e,32)?n=[e]:(r=t.interface.getEvent(e),Z(r,"unknown fragment","event",e),n=[r.topicHash]):XWe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):Z(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function eE(t,e){const{subs:n}=qo(t);return n.get((await yB(t,e)).tag)||null}async function uW(t,e,n){const r=eg(t.runner);ye(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await yB(t,n),{addr:a,subs:c}=qo(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let y=s;if(y==null)try{y=t.interface.getEvent(w.topics[0])}catch{}if(y){const b=y,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];_M(t,n,v,A=>new qWe(t,A,n,b,w))}else _M(t,n,[],b=>new ine(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let CM=Promise.resolve();async function eze(t,e,n,r){await CM;const s=await eE(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),qo(t).subs.delete(s.tag)),i>0}async function _M(t,e,n,r){try{await CM}catch{}const s=eze(t,e,n,r);return CM=s,await s}const oS=["then"];var JW;JW=VI;const FE=class FE{constructor(e,n,r,s){re(this,"target");re(this,"interface");re(this,"runner");re(this,"filters");re(this,JW);re(this,"fallback");Z(typeof e=="string"||mte(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=EM.from(n);Et(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,VI,{value:{}});let o,a=null,c=null;if(s){const d=eg(r);c=new mB(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(sr(e))a=e,o=Promise.resolve(e);else{const d=wm(r,"resolveName");if(!sR(d))throw dr("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw dr("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return qo(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return qo(this).addr=d,d});ZWe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||oS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!$s(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>oS.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return Et(this,{filters:u}),Et(this,{fallback:i.receive||i.fallback?YWe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||oS.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!$s(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||oS.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new FE(this.target,this.interface,e)}attach(e){return new FE(e,this.interface,this.runner)}async getAddress(){return await qo(this).addrPromise}async getDeployedCode(){const e=eg(this.runner);ye(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=eg(this.runner);return ye(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return qo(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),QWe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),JWe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=qo(this),o=s||await i,{fragment:a,topics:c}=await yB(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=eg(this.runner);return ye(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new gB(d,this.interface,h)}catch(f){return new sne(d,f)}return new $1(d,u)})}async on(e,n){const r=await uW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await uW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await _M(this,e,n,null)}async listenerCount(e){if(e){const s=await eE(this,e);return s?s.listeners.length:0}const{subs:n}=qo(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await eE(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=qo(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await eE(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),qo(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await eE(this,e);if(!n)return this;n.stop(),qo(this).subs.delete(n.tag)}else{const{subs:n}=qo(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends FE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let AM=FE;function tze(){return AM}class A0 extends tze(){}function c2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):Z(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class nze{constructor(e){re(this,"name");Et(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const hne=new RegExp("^(ipfs)://(.*)$","i"),dW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),hne,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Bh,Cg,$h,Ly,rN,fne;const s0=class s0{constructor(e,n,r){Q(this,$h);re(this,"provider");re(this,"address");re(this,"name");Q(this,Bh);Q(this,Cg);Et(this,{provider:e,address:n,name:r}),L(this,Bh,null),L(this,Cg,new A0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,Bh)==null&&L(this,Bh,(async()=>{try{return await _(this,Cg).supportsInterface("0x9061b923")}catch(e){if($s(e,"CALL_EXCEPTION"))return!1;throw L(this,Bh,null),e}})()),await _(this,Bh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await he(this,$h,Ly).call(this,"addr(bytes32)");return i==null||i===m_?null:i}catch(i){if($s(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await he(this,$h,Ly).call(this,"addr(bytes32,uint)",[i]);if(sr(o,20))return Tn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof nze&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await he(this,$h,Ly).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;ye(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await he(this,$h,Ly).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await he(this,$h,Ly).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${uje("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;ye(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<dW.length;r++){const s=n.match(dW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=c2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new A0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",$f(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=c2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Ff(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const y=f.body;return y&&e.push({type:"!metadata",value:Oe(y)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(hne)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=c2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return ye(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await he(s=s0,rN,fne).call(s,e,r);if(i!=null){const o=new s0(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Bh=new WeakMap,Cg=new WeakMap,$h=new WeakSet,Ly=async function(e,n){n=(n||[]).slice();const r=_(this,Cg).interface;n.unshift(bM(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),ye(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[yWe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,Cg)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!$s(i,"CALL_EXCEPTION"))throw i}return null},rN=new WeakSet,fne=async function(e,n){const r=await s0.getEnsAddress(e);try{const i=await new A0(r,["function resolver(bytes32) view returns (address)"],e).resolver(bM(n),{enableCcipRead:!0});return i===m_?null:i}catch(s){throw s}return null},Q(s0,rN);let KI=s0;const hW=BigInt(0);function sn(t,e){return function(n){return n==null?e:t(n)}}function S_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function F1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";ye(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function rze(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}Z(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function fb(t){return Z(sr(t,!0),"invalid data","value",t),t}function Bs(t){return Z(sr(t,32),"invalid hash","value",t),t}const sze=F1({address:Tn,blockHash:Bs,blockNumber:Jt,data:fb,index:Jt,removed:sn(rze,!1),topics:S_(Bs),transactionHash:Bs,transactionIndex:Jt},{index:["logIndex"]});function ize(t){return sze(t)}const oze=F1({hash:sn(Bs),parentHash:Bs,parentBeaconBlockRoot:sn(Bs,null),number:Jt,timestamp:Jt,nonce:sn(fb),difficulty:Ze,gasLimit:Ze,gasUsed:Ze,stateRoot:sn(Bs,null),receiptsRoot:sn(Bs,null),blobGasUsed:sn(Ze,null),excessBlobGas:sn(Ze,null),miner:sn(Tn),prevRandao:sn(Bs,null),extraData:fb,baseFeePerGas:sn(Ze)},{prevRandao:["mixHash"]});function aze(t){const e=oze(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:pne(n)),e}const cze=F1({transactionIndex:Jt,blockNumber:Jt,transactionHash:Bs,address:Tn,topics:S_(Bs),data:fb,index:Jt,blockHash:Bs},{index:["logIndex"]});function lze(t){return cze(t)}const uze=F1({to:sn(Tn,null),from:sn(Tn,null),contractAddress:sn(Tn,null),index:Jt,root:sn(Oe),gasUsed:Ze,blobGasUsed:sn(Ze,null),logsBloom:sn(fb),blockHash:Bs,hash:Bs,logs:S_(lze),blockNumber:Jt,cumulativeGasUsed:Ze,effectiveGasPrice:sn(Ze),blobGasPrice:sn(Ze,null),status:sn(Jt),type:sn(Jt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function dze(t){return uze(t)}function pne(t){t.to&&Ze(t.to)===hW&&(t.to="0x0000000000000000000000000000000000000000");const e=F1({hash:Bs,index:sn(Jt,void 0),type:n=>n==="0x"||n==null?0:Jt(n),accessList:sn(Fm,null),blobVersionedHashes:sn(S_(Bs,!0),null),authorizationList:sn(S_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Tn(n.address),chainId:Ze(n.chainId),nonce:Ze(n.nonce),signature:Io.from(r)}},!1),null),blockHash:sn(Bs,null),blockNumber:sn(Jt,null),transactionIndex:sn(Jt,null),from:Tn,gasPrice:sn(Ze),maxPriorityFeePerGas:sn(Ze),maxFeePerGas:sn(Ze),maxFeePerBlobGas:sn(Ze,null),gasLimit:Ze,to:sn(Tn,null),value:Ze,nonce:Jt,data:fb,creates:sn(Tn,null),chainId:sn(Ze,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=X9e(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=Io.from(t.signature):e.signature=Io.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Ze(e.blockHash)===hW&&(e.blockHash=null),e}const hze="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class j1{constructor(e){re(this,"name");Et(this,{name:e})}clone(){return new j1(this.name)}}class iR extends j1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);re(this,"effectiveBlock");re(this,"txBase");re(this,"txCreate");re(this,"txDataZero");re(this,"txDataNonzero");re(this,"txAccessListStorageKey");re(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),Z(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),Et(this,s)}clone(){return new iR(this.effectiveBlock,this)}}class oR extends j1{constructor(n,r){super("org.ethers.plugins.network.Ens");re(this,"address");re(this,"targetNetwork");Et(this,{address:n||hze,targetNetwork:r??1})}clone(){return new oR(this.address,this.targetNetwork)}}var F_,j_;class fze extends j1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Q(this,F_);Q(this,j_);L(this,F_,n),L(this,j_,r)}get url(){return _(this,F_)}get processFunc(){return _(this,j_)}clone(){return this}}F_=new WeakMap,j_=new WeakMap;const l2=new Map;var dw,hw,Fh;const i0=class i0{constructor(e,n){Q(this,dw);Q(this,hw);Q(this,Fh);L(this,dw,e),L(this,hw,Ze(n)),L(this,Fh,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,dw)}set name(e){L(this,dw,e)}get chainId(){return _(this,hw)}set chainId(e){L(this,hw,Ze(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Ze(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Ze(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Ze(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,Fh).values())}attachPlugin(e){if(_(this,Fh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Fh).set(e.name,e.clone()),this}getPlugin(e){return _(this,Fh).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new i0(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new iR;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=Fm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(pze(),e==null)return i0.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=l2.get(e);if(n)return n();if(typeof e=="bigint")return new i0("unknown",e);Z(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){Z(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new i0(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new oR(e.ensAddress,e.ensNetwork)),n}Z(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=l2.get(e);r&&Z(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),l2.set(e,n)}};dw=new WeakMap,hw=new WeakMap,Fh=new WeakMap;let Hl=i0;function fW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function pW(t){return new fze(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:fW(a.maxFee,9),maxPriorityFeePerGas:fW(a.maxPriorityFee,9)}}catch(i){ye(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let gW=!1;function pze(){if(gW)return;gW=!0;function t(e,n,r){const s=function(){const i=new Hl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new oR(null,r.ensNetwork)),i.attachPlugin(new iR),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Hl.register(e,s),Hl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Hl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[pW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[pW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function SM(t){return JSON.parse(JSON.stringify(t))}var Hu,ka,jh,Nl,fw,ex;class gze{constructor(e){Q(this,fw);Q(this,Hu);Q(this,ka);Q(this,jh);Q(this,Nl);L(this,Hu,e),L(this,ka,null),L(this,jh,4e3),L(this,Nl,-2)}get pollingInterval(){return _(this,jh)}set pollingInterval(e){L(this,jh,e)}start(){_(this,ka)||(L(this,ka,_(this,Hu)._setTimeout(he(this,fw,ex).bind(this),_(this,jh))),he(this,fw,ex).call(this))}stop(){_(this,ka)&&(_(this,Hu)._clearTimeout(_(this,ka)),L(this,ka,null))}pause(e){this.stop(),e&&L(this,Nl,-2)}resume(){this.start()}}Hu=new WeakMap,ka=new WeakMap,jh=new WeakMap,Nl=new WeakMap,fw=new WeakSet,ex=async function(){try{const e=await _(this,Hu).getBlockNumber();if(_(this,Nl)===-2){L(this,Nl,e);return}if(e!==_(this,Nl)){for(let n=_(this,Nl)+1;n<=e;n++){if(_(this,ka)==null)return;await _(this,Hu).emit("block",n)}L(this,Nl,e)}}catch{}_(this,ka)!=null&&L(this,ka,_(this,Hu)._setTimeout(he(this,fw,ex).bind(this),_(this,jh)))};var _g,Ag,Wh;class wB{constructor(e){Q(this,_g);Q(this,Ag);Q(this,Wh);L(this,_g,e),L(this,Wh,!1),L(this,Ag,n=>{this._poll(n,_(this,_g))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,Wh)||(L(this,Wh,!0),_(this,Ag).call(this,-2),_(this,_g).on("block",_(this,Ag)))}stop(){_(this,Wh)&&(L(this,Wh,!1),_(this,_g).off("block",_(this,Ag)))}pause(e){this.stop()}resume(){this.start()}}_g=new WeakMap,Ag=new WeakMap,Wh=new WeakMap;var pw,Gu;class mze extends wB{constructor(n,r){super(n);Q(this,pw);Q(this,Gu);L(this,pw,r),L(this,Gu,-2)}pause(n){n&&L(this,Gu,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,pw));s!=null&&(_(this,Gu)===-2?L(this,Gu,s.number):s.number>_(this,Gu)&&(r.emit(_(this,pw),s.number),L(this,Gu,s.number)))}}pw=new WeakMap,Gu=new WeakMap;var sN;class yze extends wB{constructor(n,r){super(n);Q(this,sN);L(this,sN,SM(r))}async _poll(n,r){throw new Error("@TODO")}}sN=new WeakMap;var gw;class wze extends wB{constructor(n,r){super(n);Q(this,gw);L(this,gw,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,gw));s&&r.emit(_(this,gw),s)}}gw=new WeakMap;var qu,mw,yw,zh,Da,iN,gne;class bB{constructor(e,n){Q(this,iN);Q(this,qu);Q(this,mw);Q(this,yw);Q(this,zh);Q(this,Da);L(this,qu,e),L(this,mw,SM(n)),L(this,yw,he(this,iN,gne).bind(this)),L(this,zh,!1),L(this,Da,-2)}start(){_(this,zh)||(L(this,zh,!0),_(this,Da)===-2&&_(this,qu).getBlockNumber().then(e=>{L(this,Da,e)}),_(this,qu).on("block",_(this,yw)))}stop(){_(this,zh)&&(L(this,zh,!1),_(this,qu).off("block",_(this,yw)))}pause(e){this.stop(),e&&L(this,Da,-2)}resume(){this.start()}}qu=new WeakMap,mw=new WeakMap,yw=new WeakMap,zh=new WeakMap,Da=new WeakMap,iN=new WeakSet,gne=async function(e){if(_(this,Da)===-2)return;const n=SM(_(this,mw));n.fromBlock=_(this,Da)+1,n.toBlock=e;const r=await _(this,qu).getLogs(n);if(r.length===0){_(this,Da)<e-60&&L(this,Da,e-60);return}for(const s of r)_(this,qu).emit(_(this,mw),s),L(this,Da,s.blockNumber)};const bze=BigInt(2),vze=10;function aS(t){return t&&typeof t.then=="function"}function tx(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class mne{constructor(e){re(this,"name");Et(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function Eze(t){return JSON.parse(JSON.stringify(t))}function xM(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function u2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(sr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:tx("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:tx("orphan",n),filter:Eze(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?xM(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{sr(a)?s.push(a):i.push((async()=>{s.push(await Ri(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=xM(s.map(a=>a.toLowerCase()))}return{filter:r,tag:tx("event",r),type:"event"}}Z(!1,"unknown ProviderEvent","event",t)}function d2(){return new Date().getTime()}const Cze={cacheTimeout:250,pollingInterval:4e3};var ii,Hh,oi,ww,Qo,Sg,Gh,Vu,W_,Ma,bw,vw,Vt,Wo,IM,NM,tE,TM,nE,nx;class _ze{constructor(e,n){Q(this,Vt);Q(this,ii);Q(this,Hh);Q(this,oi);Q(this,ww);Q(this,Qo);Q(this,Sg);Q(this,Gh);Q(this,Vu);Q(this,W_);Q(this,Ma);Q(this,bw);Q(this,vw);if(L(this,vw,Object.assign({},Cze,n||{})),e==="any")L(this,Sg,!0),L(this,Qo,null);else if(e){const r=Hl.from(e);L(this,Sg,!1),L(this,Qo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else L(this,Sg,!1),L(this,Qo,null);L(this,Vu,-1),L(this,Gh,new Map),L(this,ii,new Map),L(this,Hh,new Map),L(this,oi,null),L(this,ww,!1),L(this,W_,1),L(this,Ma,new Map),L(this,bw,!1)}get pollingInterval(){return _(this,vw).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,Hh).values())}attachPlugin(e){if(_(this,Hh).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Hh).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,Hh).get(e)||null}get disableCcipRead(){return _(this,bw)}set disableCcipRead(e){L(this,bw,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Ff(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}ye(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}ye(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new WWe(aze(e),this)}_wrapLog(e,n){return new $1(ize(e),this)}_wrapTransactionReceipt(e,n){return new tne(dze(e),this)}_wrapTransactionResponse(e,n){return new A_(pne(e),this)}_detectNetwork(){ye(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){ye(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Jt(await he(this,Vt,Wo).call(this,{method:"getBlockNumber"}),"%response");return _(this,Vu)>=0&&L(this,Vu,e),e}_getAddress(e){return Ri(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(sr(e))return sr(e,32)?e:Oc(e);if(typeof e=="bigint"&&(e=Jt(e,"blockTag")),typeof e=="number")return e>=0?Oc(e):_(this,Vu)>=0?Oc(_(this,Vu)+e):this.getBlockNumber().then(n=>Oc(n+e));Z(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?xM(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=qI(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Ri(n[s],this);aS(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);aS(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,Qo)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,Qo)===s&&L(this,Qo,null),i}})();return L(this,Qo,s),(await s).clone()}const e=_(this,Qo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,Sg)?(this.emit("network",r,n),_(this,Qo)===e&&L(this,Qo,Promise.resolve(r))):ye(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await _i({_block:he(this,Vt,TM).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await he(this,Vt,Wo).call(this,{method:"getGasPrice"});return Ze(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await he(this,Vt,Wo).call(this,{method:"getPriorityFee"});return Ze(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*bze+c),new cW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Ff(r.url),i=await r.processFunc(n,this,s);return new cW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return aS(n)&&(n=await n),Ze(await he(this,Vt,Wo).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await _i({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await he(this,Vt,NM).call(this,he(this,Vt,IM).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Ze(await he(this,Vt,tE).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Jt(await he(this,Vt,tE).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Oe(await he(this,Vt,tE).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Ze(n,"position");return Oe(await he(this,Vt,tE).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await _i({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=$I.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await _i({network:this.getNetwork(),params:he(this,Vt,TM).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await _i({network:this.getNetwork(),params:he(this,Vt,Wo).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await _i({network:this.getNetwork(),params:he(this,Vt,Wo).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await he(this,Vt,Wo).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await _i({network:this.getNetwork(),result:he(this,Vt,Wo).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Oe(n)}async getLogs(e){let n=this._getFilter(e);aS(n)&&(n=await n);const{network:r,params:s}=await _i({network:this.getNetwork(),params:he(this,Vt,Wo).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){ye(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await KI.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Tn(e);const n=bM(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await KI.getEnsAddress(this),i=await new A0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===m_)return null;const a=await new A0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if($s(r,"BAD_DATA")&&r.value==="0x"||$s(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(dr("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){ye(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,Ma).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,Ma).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=$d(this,W_)._++,s=()=>{_(this,Ma).delete(r),e()};if(this.paused)_(this,Ma).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,Ma).set(r,{timer:i,func:s,time:d2()})}return r}_forEachSubscriber(e){for(const n of _(this,ii).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new mne(e.type);case"block":{const n=new gze(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new mze(this,e.type);case"event":return new bB(this,e.filter);case"transaction":return new wze(this,e.hash);case"orphan":return new yze(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,ii).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,oi)!=null&&n.pause(_(this,oi));break}}async on(e,n){const r=await he(this,Vt,nx).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,oi)!=null&&r.subscriber.pause(_(this,oi))),this}async once(e,n){const r=await he(this,Vt,nx).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,oi)!=null&&r.subscriber.pause(_(this,oi))),this}async emit(e,...n){const r=await he(this,Vt,nE).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Pee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,ii).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await he(this,Vt,nE).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,ii).values())n+=r.length;return n}async listeners(e){if(e){const r=await he(this,Vt,nE).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,ii).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await he(this,Vt,nE).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,ii).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await he(this,Vt,nx).call(this,e);r&&s.stop(),_(this,ii).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,ii))r&&s.stop(),_(this,ii).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,ww)}destroy(){this.removeAllListeners();for(const e of _(this,Ma).keys())this._clearTimeout(e);L(this,ww,!0)}get paused(){return _(this,oi)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(L(this,Vu,-1),_(this,oi)!=null){if(_(this,oi)==!!e)return;ye(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),L(this,oi,!!e);for(const n of _(this,Ma).values())n.timer&&clearTimeout(n.timer),n.time=d2()-n.time}resume(){if(_(this,oi)!=null){this._forEachSubscriber(e=>e.resume()),L(this,oi,null);for(const e of _(this,Ma).values()){let n=e.time;n<0&&(n=0),e.time=d2(),setTimeout(e.func,n)}}}}ii=new WeakMap,Hh=new WeakMap,oi=new WeakMap,ww=new WeakMap,Qo=new WeakMap,Sg=new WeakMap,Gh=new WeakMap,Vu=new WeakMap,W_=new WeakMap,Ma=new WeakMap,bw=new WeakMap,vw=new WeakMap,Vt=new WeakSet,Wo=async function(e){const n=_(this,vw).cacheTimeout;if(n<0)return await this._perform(e);const r=tx(e.method,e);let s=_(this,Gh).get(r);return s||(s=this._perform(e),_(this,Gh).set(r,s),setTimeout(()=>{_(this,Gh).get(r)===s&&_(this,Gh).delete(r)},n)),await s},IM=async function(e,n,r){ye(r<vze,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=qI(e);try{return Oe(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&eB(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&Nr(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ri(s.to,this);let c;try{c=Nze(Nr(i.data,4))}catch(d){ye(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}ye(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);ye(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Or([c.selector,Ize([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await he(this,Vt,IM).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},NM=async function(e){const{value:n}=await _i({network:this.getNetwork(),value:e});return n},tE=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await he(this,Vt,NM).call(this,he(this,Vt,Wo).call(this,Object.assign(e,{address:s,blockTag:i})))},TM=async function(e,n){if(sr(e,32))return await he(this,Vt,Wo).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await he(this,Vt,Wo).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},nE=async function(e,n){let r=await u2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await u2({orphan:"drop-log",log:n[0]},this)),_(this,ii).get(r.tag)||null},nx=async function(e){const n=await u2(e,this),r=n.tag;let s=_(this,ii).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,ii).set(r,s)),s};function Aze(t,e){try{const n=RM(t,e);if(n)return UI(n)}catch{}return null}function RM(t,e){if(t==="0x")return null;try{const n=Jt(Nr(t,e,e+32)),r=Jt(Nr(t,n,n+32));return Nr(t,n+32,n+32+r)}catch{}return null}function mW(t){const e=ss(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function Sze(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const xze=new Uint8Array([]);function Ize(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(xze),n+=32;for(let r=0;r<t.length;r++){const s=Qt(t[r]);e[r]=mW(n),e.push(mW(s.length)),e.push(Sze(s)),n+=32+Math.ceil(s.length/32)*32}return Or(e)}const yW="0x0000000000000000000000000000000000000000000000000000000000000000";function Nze(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};ye(E0(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=Nr(t,0,32);ye(Nr(n,0,12)===Nr(yW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=Nr(n,12);try{const r=[],s=Jt(Nr(t,32,64)),i=Jt(Nr(t,s,s+32)),o=Nr(t,s+32);for(let a=0;a<i;a++){const c=Aze(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{ye(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=RM(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{ye(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}ye(Nr(t,100,128)===Nr(yW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=Nr(t,96,100);try{const r=RM(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{ye(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function gp(t,e){if(t.provider)return t.provider;ye(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function wW(t,e){let n=qI(e);if(n.to!=null&&(n.to=Ri(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Ri(r,t)]).then(([s,i])=>(Z(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await _i(n)}class Tze{constructor(e){re(this,"provider");Et(this,{provider:e||null})}async getNonce(e){return gp(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await wW(this,e)}async populateTransaction(e){const n=gp(this,"populateTransaction"),r=await wW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Ze(r.chainId);Z(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?Z(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&Z(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();ye(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(ye(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):ye(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await _i(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await gp(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return gp(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return gp(this,"call").call(await this.populateCall(e))}async resolveName(e){return await gp(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=gp(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=$I.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){ye(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function Rze(t){return JSON.parse(JSON.stringify(t))}var Ei,Tl,xg,qh,Ig,Ew,zf,PM,OM;class yne{constructor(e){Q(this,zf);Q(this,Ei);Q(this,Tl);Q(this,xg);Q(this,qh);Q(this,Ig);Q(this,Ew);L(this,Ei,e),L(this,Tl,null),L(this,xg,he(this,zf,PM).bind(this)),L(this,qh,!1),L(this,Ig,null),L(this,Ew,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,qh)||(L(this,qh,!0),he(this,zf,PM).call(this,-2))}stop(){_(this,qh)&&(L(this,qh,!1),L(this,Ew,!0),he(this,zf,OM).call(this),_(this,Ei).off("block",_(this,xg)))}pause(e){e&&he(this,zf,OM).call(this),_(this,Ei).off("block",_(this,xg))}resume(){this.start()}}Ei=new WeakMap,Tl=new WeakMap,xg=new WeakMap,qh=new WeakMap,Ig=new WeakMap,Ew=new WeakMap,zf=new WeakSet,PM=async function(e){try{_(this,Tl)==null&&L(this,Tl,this._subscribe(_(this,Ei)));let n=null;try{n=await _(this,Tl)}catch(i){if(!$s(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){L(this,Tl,null),_(this,Ei)._recoverSubscriber(this,this._recover(_(this,Ei)));return}const r=await _(this,Ei).getNetwork();if(_(this,Ig)||L(this,Ig,r),_(this,Ig).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,Ew))return;const s=await _(this,Ei).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,Ei),s)}catch(n){console.log("@TODO",n)}_(this,Ei).once("block",_(this,xg))},OM=function(){const e=_(this,Tl);e&&(L(this,Tl,null),e.then(n=>{_(this,Ei).destroyed||_(this,Ei).send("eth_uninstallFilter",[n])}))};var Ng;class Pze extends yne{constructor(n,r){super(n);Q(this,Ng);L(this,Ng,Rze(r))}_recover(n){return new bB(n,_(this,Ng))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,Ng)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,Ng),n._wrapLog(s,n._network))}}Ng=new WeakMap;class Oze extends yne{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const kze="bigint,boolean,function,number,string,symbol".split(/,/g);function rx(t){if(t==null||kze.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(rx);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function Dze(t){return new Promise(e=>{setTimeout(e,t)})}function Sy(t){return t&&t.toLowerCase()}function bW(t){return t&&typeof t.pollingInterval=="number"}const wne={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class h2 extends Tze{constructor(n,r){super(n);re(this,"address");r=Tn(r),Et(this,{address:r})}connect(n){ye(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=rx(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Ri(o,this.provider);Z(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Ri(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if($s(u,"CANCELLED")||$s(u,"BAD_DATA")||$s(u,"NETWORK_ERROR")||$s(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if($s(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",dr("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=rx(n);if(r.from){const i=await Ri(r.from,this.provider);Z(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?fd(n):n;return await this.provider.send("personal_sign",[Oe(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=rx(s),o=await GI.resolveNames(n,r,i,async a=>{const c=await Ri(a);return Z(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(GI.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?fd(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Oe(r)])}}var Tg,Cw,Ku,Rl,Nc,La,ao,z_,kM;class Mze extends _ze{constructor(n,r){super(n,r);Q(this,z_);Q(this,Tg);Q(this,Cw);Q(this,Ku);Q(this,Rl);Q(this,Nc);Q(this,La);Q(this,ao);L(this,Cw,1),L(this,Tg,Object.assign({},wne,r||{})),L(this,Ku,[]),L(this,Rl,null),L(this,La,null),L(this,ao,null);{let i=null;const o=new Promise(a=>{i=a});L(this,Nc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(Z(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&L(this,La,Hl.from(n))):s&&(Z(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),L(this,La,s))}_getOption(n){return _(this,Tg)[n]}get _network(){return ye(_(this,La),"network is not available yet","NETWORK_ERROR"),_(this,La)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Ze(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,La))return _(this,La)}else return n;return _(this,ao)?await _(this,ao):this.ready?(L(this,ao,(async()=>{try{const r=Hl.from(Ze(await this.send("eth_chainId",[])));return L(this,ao,null),r}catch(r){throw L(this,ao,null),r}})()),await _(this,ao)):(L(this,ao,(async()=>{const r={id:$d(this,Cw)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],L(this,ao,null)}catch(i){throw L(this,ao,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Hl.from(Ze(s.result));throw this.getRpcError(r,s)})()),await _(this,ao))}_start(){_(this,Nc)==null||_(this,Nc).resolve==null||(_(this,Nc).resolve(),L(this,Nc,null),(async()=>{for(;_(this,La)==null&&!this.destroyed;)try{L(this,La,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",dr("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await Dze(1e3)}he(this,z_,kM).call(this)})())}async _waitUntilReady(){if(_(this,Nc)!=null)return await _(this,Nc).promise}_getSubscriber(n){return n.type==="pending"?new Oze(this):n.type==="event"?this._getOption("polling")?new bB(this,n.filter):new Pze(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new mne("orphan"):super._getSubscriber(n)}get ready(){return _(this,Nc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=Oc(Ze(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Oe(n[s]))}),n.accessList&&(r.accessList=Fm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=vte(s);return{address:i.address,nonce:Oc(i.nonce),chainId:Oc(i.chainId),yParity:Oc(i.signature.yParity),r:Oc(i.signature.r),s:Oc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[Sy(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[Sy(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[Sy(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[Sy(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(Sy):n.filter.address=Sy(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return dr("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return dr("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=DM(i),l=__.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(Uze(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return dr("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return dr("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return dr("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return dr("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return dr("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?dr("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):dr("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(dr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=$d(this,Cw)._++,i=new Promise((o,a)=>{_(this,Ku).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return he(this,z_,kM).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new h2(this,i[n])}const{accounts:s}=await _i({network:this.getNetwork(),accounts:r});n=Tn(n);for(const i of s)if(Tn(i)===n)return new h2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new h2(this,r))}destroy(){_(this,Rl)&&(clearTimeout(_(this,Rl)),L(this,Rl,null));for(const{payload:n,reject:r}of _(this,Ku))r(dr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));L(this,Ku,[]),super.destroy()}}Tg=new WeakMap,Cw=new WeakMap,Ku=new WeakMap,Rl=new WeakMap,Nc=new WeakMap,La=new WeakMap,ao=new WeakMap,z_=new WeakSet,kM=function(){if(_(this,Rl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");L(this,Rl,setTimeout(()=>{L(this,Rl,null);const r=_(this,Ku);for(L(this,Ku,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,Tg).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,Tg).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(dr("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=dr("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Vh;class Lze extends Mze{constructor(n,r){super(n,r);Q(this,Vh);let s=this._getOption("pollingInterval");s==null&&(s=wne.pollingInterval),L(this,Vh,s)}_getSubscriber(n){const r=super._getSubscriber(n);return bW(r)&&(r.pollingInterval=_(this,Vh)),r}get pollingInterval(){return _(this,Vh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");L(this,Vh,n),this._forEachSubscriber(r=>{bW(r)&&(r.pollingInterval=_(this,Vh))})}}Vh=new WeakMap;function DM(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&sr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=DM(t[e]);if(n)return n}return null}if(typeof t=="string")try{return DM(JSON.parse(t))}catch{}return null}function MM(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)MM(t[n],e);if(typeof t=="string")try{return MM(JSON.parse(t),e)}catch{}}}function Uze(t){const e=[];return MM(t,e),e}var _w,Aw;const Up=class Up extends Lze{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});Z(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Q(this,_w);Q(this,Aw);L(this,Aw,null),s&&s.providerInfo&&L(this,Aw,s.providerInfo),L(this,_w,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,Aw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){Z(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,_w).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,_w).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new Up(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new Up(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof Up)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new Up(p,void 0,{providerInfo:g}))}else a(dr("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new Up(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};_w=new WeakMap,Aw=new WeakMap;let LM=Up;const vs={DMT:{symbol:"DMT",name:"DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1}},YI={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},Gl={testnet:{chainId:1992},mainnet:{chainId:1996}},vB=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],uo=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function bne(t,e){return vs[t].address}function EB(t,e){const n=kd(),r=vs[t],s=r.isNative||!1,i=n===Gl.mainnet.chainId,o=n===Gl.testnet.chainId;t==="DMT"&&console.log(`[CHAIN DEBUG] useTokenBalance for ${t}:`,{chainId:n,expectedMainnet:Gl.mainnet.chainId,expectedTestnet:Gl.testnet.chainId,isOnSankoMainnet:i,isOnSankoTestnet:o,address:!!e});const a=!!e&&i,{data:c,isLoading:l,error:u}=$Fe({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=ib({address:r.address,abi:vB,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,g=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:g,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:g,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}function UM(t,e,n){const r=kd(),s=bne(t),i=r===Gl.mainnet.chainId,o=r===Gl.testnet.chainId,{data:a,isLoading:c,error:l}=ib({address:s,abi:vB,functionName:"allowance",args:n&&e?[n,e]:void 0,query:{enabled:!!n&&!!e&&i}});return{allowance:a||BigInt(0),allowanceFormatted:a?Number(a)/Math.pow(10,vs[t].decimals):0,isLoading:c,error:l,isOnSankoMainnet:i,isOnSankoTestnet:o}}function vne(){const{writeContract:t,data:e,isPending:n,error:r}=sd(),{isLoading:s}=rd({hash:e});return kd(),{approve:(o,a,c)=>{const l=bne(o);t({address:l,abi:vB,functionName:"approve",args:[a,c]})},isPending:n||s,error:r,hash:e}}const Ene=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=Gb(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=EB(t,i),[l,u]=P.useState(!1),d=h=>{e(h),u(!1)};return m.jsxs("div",{style:{marginBottom:"10px"},children:[m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),m.jsxs("div",{style:{position:"relative"},children:[m.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"100px",textAlign:"left"},children:[vs[t].symbol,m.jsx("span",{style:{float:"right"},children:""})]}),l&&!s&&m.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"100px"},children:Object.entries(vs).map(([h,f])=>m.jsx("div",{onClick:()=>d(h),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:p=>p.currentTarget.style.background="#f0f0f0",onMouseLeave:p=>p.currentTarget.style.background="#fff",children:f.symbol},h))})]})]}),m.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[m.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),m.jsx("input",{type:"number",value:n,onChange:h=>r(Number(h.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),m.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${vs[t].symbol}`:"Connect to Sanko Mainnet"]})]}),c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&m.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet to see token balances"}),n>o&&a&&m.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",vs[t].symbol]}),o===0&&a&&m.jsxs("div",{style:{color:"#ffa500",fontSize:"12px",marginTop:"5px"},children:[" You have 0 ",vs[t].symbol,". Get tokens from ",m.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffa500"},children:"Sanko Bridge"})]})]})},Bze=t=>t===Gl.testnet.chainId?YI.testnet.chess:YI.mainnet.chess,Zi={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},vW=36e5,EW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]];function $ze(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}const Fze=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=Gb(),o=Bze(i||Gl.mainnet.chainId),[a,c]=P.useState("DMT"),[l,u]=P.useState(.1),[d,h]=P.useState(!1),[f,p]=P.useState("");EB(a,r);const{allowance:g}=UM(a,o,r),{approve:w,isPending:y}=vne(),[b,v]=P.useState(null),[A,C]=P.useState(0),[N,x]=P.useState(Date.now()),[T,S]=P.useState(""),[D,O]=P.useState(""),[$,G]=P.useState(!1),[W,I]=P.useState(!1),[R,B]=P.useState(!1),[k,M]=P.useState(!1),{writeContract:j,data:q}=sd(),{writeContract:se,isPending:ie,data:Y}=sd(),{writeContract:te,data:fe}=sd(),{data:Xe}=sd();Aee();const{isLoading:Le}=rd({hash:q}),{isLoading:De,data:wt}=rd({hash:Y}),{isLoading:Mt}=rd({hash:fe}),{isLoading:ln}=rd({hash:Xe}),[X,ce]=P.useState(EW),[de,ge]=P.useState("blue"),[we,at]=P.useState(null),[tt,lt]=P.useState([]),[ut,Hn]=P.useState([]),[Yn,Ue]=P.useState("Waiting for opponent..."),[It,Lt]=P.useState(Zi.LOBBY),[We,fn]=P.useState(null),[ko,pr]=P.useState(null),[oc,G1]=P.useState(0),[Wm,zm]=P.useState([]),[Md,ji]=P.useState(!1),[Wr,en]=P.useState(null),[gr,nl]=P.useState(null),[an,ya]=P.useState(""),[cR,lR]=P.useState(0),[Wi]=P.useState(!0);P.useEffect(()=>(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"),()=>{document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")}),[]);const{data:Ld}=ib({address:o,abi:uo,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Mr}=ib({address:o,abi:uo,functionName:"games",args:Ld?[Ld]:void 0,query:{enabled:!!Ld&&Ld!=="0x000000000000"}}),[Qs,Jf]=P.useState(""),Zf=(pt,Ct)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${pt}" from ${Ct}`),Qs&&!pt&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${Qs}" to "${pt}" from ${Ct}`),Jf(pt)},Do=(pt,Ct)=>{console.log(`[WAGER_DEBUG] Setting wager to ${pt} ${a} from ${Ct}`),oc!==pt&&console.log(`[WAGER_DEBUG] Wager changed from ${oc} to ${pt} ${a}`),G1(pt)};P.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",q),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",Le),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",Wr),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",Qs),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",q&&!Le&&Wr&&!Qs),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!q),console.log("[CREATE DEBUG] - not waiting for receipt:",!Le),console.log("[CREATE DEBUG] - pendingGameData exists:",!!Wr),console.log("[CREATE DEBUG] - no inviteCode set:",!Qs),q&&!Le&&Wr&&!Qs?(console.log("[CONTRACT] Create game transaction confirmed:",q),Ir.createGame(Wr).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),Zf(Wr.invite_code,"create game success"),fn("blue"),Do(l,"create game success"),Lt(Zi.WAITING),Ue("Waiting for opponent to join..."),en(null),ji(!1)}).catch(pt=>{console.error("[FIREBASE] Error creating game after transaction:",pt),Ue("Transaction confirmed but failed to create game in database"),en(null),ji(!1)})):q&&!Le&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!Wr),console.log("[CREATE DEBUG] - inviteCode already set:",!!Qs))},[q,Le,Wr,l,Qs]),P.useEffect(()=>{Y&&!De&&gr&&(console.log("[JOIN RECEIPT] Transaction confirmed, updating game in Firebase"),(async()=>{try{const Ct=await Ir.getGame(gr.invite_code);if(Ct){const Js={...Ct,red_player:r,game_state:"active"};await Ir.updateGame(gr.invite_code,Js),console.log("[JOIN RECEIPT] Game updated in Firebase successfully"),nl(null),Lt(Zi.ACTIVE),Ue("Game started! Your turn.")}}catch(Ct){console.error("[JOIN RECEIPT] Error updating game in Firebase:",Ct),Ue("Joined game on-chain but failed to update database. Please refresh.")}})())},[Y,De,gr,r]);const[Is,Xf]=P.useState("moves"),ac=P.useCallback(()=>{b&&clearTimeout(b);const pt=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),Mo()},vW);v(pt),x(Date.now())},[b]),ep=P.useCallback(()=>{b&&(clearTimeout(b),v(null))},[b]),Mo=async()=>{if(!Qs||!We)return;console.log("[TIMEOUT] Handling timeout for game:",Qs);const pt=de==="blue"?"red":"blue",Ct=pt==="blue"?Mr==null?void 0:Mr[0]:Mr==null?void 0:Mr[1];Ct&&(console.log("[TIMEOUT] Ending game with winner:",Ct),te({address:o,abi:uo,functionName:"endGame",args:[Qs,Ct]}),Ue(`Game ended due to timeout. ${pt==="red"?"Red":"Blue"} wins!`),Lt(Zi.FINISHED))};P.useEffect(()=>{if(It===Zi.ACTIVE&&b){const pt=setInterval(()=>{const Ct=Date.now()-N,Js=Math.max(0,vW-Ct);C(Math.ceil(Js/1e3))},1e3);return()=>clearInterval(pt)}},[It,b,N]);const Hm=async()=>{if(!r||!o)return!1;const pt=BigInt(Math.floor(l*Math.pow(10,vs[a].decimals)));if(g<pt){console.log("[APPROVAL] Token allowance insufficient, requesting approval"),h(!0),p("");try{return w(a,o,pt),!1}catch(Ct){return console.error("[APPROVAL] Error approving token:",Ct),p("Failed to approve token. Please try again."),h(!1),!1}}return!0};P.useEffect(()=>{!y&&d&&(console.log("[APPROVAL] Transaction completed, checking allowance..."),h(!1),p(""),setTimeout(()=>{It===Zi.LOBBY&&(console.log("[APPROVAL] Retrying game creation after approval"),Ud())},2e3))},[y,d,It]);const Ud=async()=>{if(!r||l<=0)return;if(console.log("[CREATE] Starting game creation - address:",r,"wager:",l,"token:",a),!await Hm()){Ue("Please approve token spending first");return}ji(!0);try{const Ct=$ze();console.log("[CREATE] Generated invite code:",Ct);const Js=vs[a].address,zi=BigInt(Math.floor(l*Math.pow(10,vs[a].decimals))),Hi={invite_code:Ct,game_title:`Chess Game ${Ct.slice(-6)}`,bet_amount:zi.toString(),bet_token:a,blue_player:r,game_state:"waiting",board:{positions:q1(EW),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",Hi),console.log("[CREATE] Calling contract with args:",[Ct,Js,zi]),j({address:o,abi:uo,functionName:"createGame",args:[Ct,Js,zi]}),console.log("[CREATE] Contract call initiated, setting pending data"),en(Hi),Ue("Creating game... Please confirm transaction in your wallet.")}catch(Ct){console.error("[CREATE] Error creating game:",Ct),Ue("Failed to create game. Please try again.")}finally{ji(!1)}},du=async pt=>{if(r)try{const Ct=await Ir.getGame(pt);if(!Ct||Ct.game_state!=="waiting"){Ue("Game not found or already full");return}const Js=BigInt(Ct.bet_amount),zi=Ct.bet_token||"DMT",Hi=Number(Js)/Math.pow(10,vs[zi].decimals);if(Jf(pt),fn("red"),Do(Hi,"joinGame"),pr(Ct.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:pt,playerColor:"red",wagerAmountFormatted:Hi,gameToken:zi,opponent:Ct.blue_player,address:r}),r===Ct.blue_player){console.error("[JOIN] Player cannot join their own game"),Ue("You cannot join your own game");return}const Bd=vs[zi].address,{allowance:gi}=UM(zi,o,r);if(gi<Js){console.log("[JOIN] Token allowance insufficient for joining"),Ue("Please approve token spending first");return}Ue("Joining game... Please confirm transaction in your wallet."),se({address:o,abi:uo,functionName:"joinGame",args:[pt]}),nl({inviteCode:pt,gameData:Ct,address:r})}catch(Ct){console.error("[JOIN] Error joining game:",Ct),Ue("Failed to join game. Please try again."),Zf("","join game error"),fn(null),Do(0,"join game error"),pr(null)}};P.useEffect(()=>{It===Zi.ACTIVE&&We?(console.log("[TIMEOUT] Starting timeout timer for active game"),ac()):ep()},[It,We,ac,ep]),P.useEffect(()=>{It===Zi.ACTIVE&&ut.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),ac())},[ut,It,ac]);const q1=pt=>{const Ct={};return pt.forEach((Js,zi)=>{Js.forEach((Hi,Bd)=>{Ct[`${zi}_${Bd}`]=Hi})}),Ct},tp=pt=>`${pt.slice(0,6)}...${pt.slice(-4)}`,Gm=()=>{if(It!==Zi.ACTIVE||A<=0)return null;const pt=Math.floor(A/60),Ct=A%60;return m.jsxs("div",{style:{color:A<300?"#ff0000":"#00ff00",fontWeight:"bold",textShadow:"0 0 6px currentColor"},children:["Timeout: ",pt,":",Ct.toString().padStart(2,"0")]})},np=()=>It!==Zi.LOBBY?null:m.jsxs("div",{style:{marginBottom:"20px"},children:[m.jsx(Ene,{selectedToken:a,onTokenSelect:c,wagerAmount:l,onWagerChange:u,disabled:Md||d}),f&&m.jsx("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:f}),d&&m.jsx("div",{style:{color:"#00ff00",fontSize:"12px",marginTop:"5px"},children:"Approving token..."})]}),rp=()=>m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"Chess Multiplayer"}),s?m.jsxs("div",{className:"lobby-content",children:[np(),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:Ud,disabled:Md||d||l<=0,children:Md?"Creating...":"Create Game"}),m.jsx("button",{className:"resume-btn",onClick:()=>{},children:"Resume Game"})]}),m.jsxs("div",{className:"open-games",children:[m.jsx("h3",{children:"Open Games"}),m.jsx("div",{className:"games-list",children:Wm.length>0?Wm.map(pt=>m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:pt.game_title}),m.jsxs("div",{className:"wager",children:[Number(pt.bet_amount)/Math.pow(10,vs[pt.bet_token||"DMT"].decimals)," ",pt.bet_token||"DMT"]}),m.jsxs("div",{className:"title",children:["by ",tp(pt.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>du(pt.invite_code),disabled:ie,children:ie?"Joining...":"Join"})]},pt.invite_code)):m.jsx("div",{className:"no-games",children:"No open games available"})})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play"})]}),rl=()=>m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Game Code: ",m.jsx("strong",{children:Qs})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",oc," ",a]}),m.jsx("p",{children:"Share this code with your opponent"})]}),Gm()]}),sp=()=>m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"Chess Multiplayer"}),m.jsxs("div",{className:"chess-controls",children:[m.jsx("button",{className:"minimize-btn",onClick:e,children:"_"}),m.jsx("button",{className:"close-btn",onClick:t,children:""})]})]}),m.jsxs("div",{className:"game-content",children:[m.jsxs("div",{className:"left-sidebar",children:[m.jsxs("div",{className:"game-info",children:[m.jsxs("div",{className:"game-status-section",children:[m.jsx("div",{className:"status",children:Yn}),m.jsxs("div",{className:`current-player ${de==="red"?"red-turn":"blue-turn"}`,children:[de==="red"?"Red":"Blue","'s turn"]})]}),m.jsxs("div",{className:"game-details-section",children:[m.jsxs("div",{className:"wager-display",children:["Wager: ",oc," ",a]}),m.jsxs("div",{className:"opponent-info",children:["Opponent: ",ko?tp(ko):"None"]}),Gm()]})]}),m.jsxs("div",{className:"tab-buttons",children:[m.jsx("button",{className:Is==="moves"?"active":"",onClick:()=>Xf("moves"),children:"Moves"}),m.jsx("button",{className:Is==="leaderboard"?"active":"",onClick:()=>Xf("leaderboard"),children:"Leaderboard"})]}),Is==="moves"?m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:ut.map((pt,Ct)=>m.jsx("div",{className:"move",children:pt},Ct))})]}):m.jsx("div",{className:"leaderboard",children:m.jsx("h3",{children:"Leaderboard"})})]}),m.jsx("div",{className:"center-area",children:m.jsx("div",{className:"chessboard-container",children:m.jsx("div",{className:"chessboard"})})}),m.jsx("div",{className:"right-sidebar"})]})]});return m.jsxs("div",{className:"chess-game",children:[It===Zi.LOBBY&&rp(),It===Zi.WAITING&&rl(),It===Zi.ACTIVE&&sp(),It===Zi.FINISHED&&m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Game Finished"}),m.jsxs("div",{className:"game-info",children:[m.jsx("p",{children:Yn}),W&&m.jsx("button",{className:"claim-winnings-btn",onClick:()=>{},disabled:R,children:R?"Claiming...":"Claim Winnings"})]})]})]})},f2={AI:"ai"},jze=1996,cS={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},CW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],Wze=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],zze=()=>{const[t,e]=P.useState(!1),n=P.useRef(null),r=P.useRef(!1);P.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=P.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=P.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},Hze=()=>{const[t,e]=P.useState(null),[n,r]=P.useState(!1),s=P.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=P.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},Gze=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=Gb(),i=kd();qFe();const{open:o}=k1(),[a,c]=P.useState(f2.AI),[l,u]=P.useState(()=>JSON.parse(JSON.stringify(CW))),[d,h]=P.useState("blue"),[f,p]=P.useState(null),[g,w]=P.useState("active"),[y,b]=P.useState("hard"),[v,A]=P.useState("Connect wallet to play"),[C,N]=P.useState([]),[x,T]=P.useState([]),[S,D]=P.useState([]),[O,$]=P.useState(null),[G,W]=P.useState(!1),[I,R]=P.useState(!1),[B,k]=P.useState(null),[M,j]=P.useState(null),[q]=P.useState(""),[se]=P.useState(.1),[ie,Y]=P.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),te=P.useRef(null),fe=P.useRef(!1),Xe=P.useRef(l),Le=P.useRef(null),De=P.useRef(null),wt=P.useRef(!1),Mt=P.useRef(!1),[ln,X]=P.useState(!1),[ce,de]=P.useState(!1),[ge,we]=P.useState(!1),[at]=P.useState(!0);P.useEffect(()=>(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"),()=>{document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")}),[]);const{stockfishReady:tt}=zze(),{getOpeningData:lt}=Hze(),[ut,Hn]=P.useState("loading"),[Yn,Ue]=P.useState(!1),[It,Lt]=P.useState([]),[We,fn]=P.useState(!1),[ko,pr]=P.useState(()=>{const V=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*V.length),ae=V[K];return console.log("[DEBUG] Initial random chessboard selected:",ae,"(index:",K,")"),ae}),[oc,G1]=P.useState(!0),[Wm,zm]=P.useState(!1);P.useEffect(()=>{!s||!r?(A("Connect wallet to play"),W(!1),X(!1),o()):i!==jze?(A("Switch to Sanko Mainnet to play"),W(!1),X(!1),o()):A("Select game mode")},[s,r,i,o]);const Md=()=>{const V=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*V.length),ae=V[K];return console.log("[DEBUG] Random chessboard selected:",ae,"(index:",K,")"),ae};P.useEffect(()=>{if(tt)Hn("ready");else{const V=window.setTimeout(()=>{tt||(Hn("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(V)}},[tt]),P.useEffect(()=>{Xe.current=l},[l]),P.useEffect(()=>(!te.current&&typeof Worker<"u"&&(te.current=new Worker("/aiWorker.js"),te.current.onmessage=V=>{console.log("[DEBUG] AI worker response received:",V.data);const{move:K,nodes:ae}=V.data;K&&fe.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",ae,"nodes"),fe.current=!1,De.current&&(window.clearTimeout(De.current),De.current=null),Le.current&&Le.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},te.current.onerror=V=>{console.error("[DEBUG] AI worker error:",V),A("AI worker error - using fallback mode"),fe.current=!1}),()=>{te.current&&(te.current.terminate(),te.current=null),De.current&&(window.clearTimeout(De.current),De.current=null)}),[]),P.useEffect(()=>{ji()},[]);const ji=async()=>{try{await xee();const V=await See(20);T(V),console.log("Leaderboard data loaded:",V)}catch(V){A("Failed to load leaderboard"),console.error("Leaderboard error:",V)}},Wr=async V=>{if(console.log("[DEBUG] updateScore called with:",V),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",pm(r)),await LI(r,V)?(console.log("[DEBUG] Successfully updated score for:",pm(r)),await ji()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},en=V=>V&&V===V.toUpperCase()?"red":"blue",gr=(V,K)=>V>=0&&V<8&&K>=0&&K<8,nl=(V,K)=>`${String.fromCharCode(97+K)}${8-V}`,an=(V,K)=>{const ae=K==="blue"?"k":"K";let oe=null;for(let Ne=0;Ne<8;Ne++){for(let rt=0;rt<8;rt++)if(V[Ne][rt]===ae){oe={row:Ne,col:rt};break}if(oe)break}if(!oe)return console.log(`King not found for ${K}`),!1;const ne=K==="blue"?"red":"blue",Ie=ya(oe.row,oe.col,ne,V);return console.log(`${K} king at ${oe.row},${oe.col} under attack: ${Ie}`),Ie},ya=(V,K,ae,oe)=>{for(let ne=0;ne<8;ne++)for(let Ie=0;Ie<8;Ie++){const Ne=oe[ne][Ie];if(Ne&&en(Ne)===ae&&Do(Ne,ne,Ie,V,K,!1,ae,oe,!0))return!0}return!1},cR=(V,K,ae,oe,ne,Ie=l)=>{const Ne=Ie.map(pn=>[...pn]),rt=Ne[V][K];return Ne[ae][oe]=rt,Ne[V][K]=null,an(Ne,ne)},lR=(V,K,ae,oe,ne,Ie)=>{const Ne=V==="blue"?-1:1,rt=V==="blue"?6:1;if(!gr(oe,ne)||V==="blue"&&oe>=K||V==="red"&&oe<=K)return!1;const pn=Math.abs(oe-K),Pn=Math.abs(ne-ae);if((pn===1&&Pn===0||pn===2&&Pn===0&&K===rt||pn===1&&Pn===1)&&pn<=2&&Pn<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:V,from:`${K},${ae}`,to:`${oe},${ne}`}),ae===ne&&oe===K+Ne)return Ie[oe][ne]===null;if(ae===ne&&K===rt&&oe===K+2*Ne)return Ie[K+Ne][ae]===null&&Ie[oe][ne]===null;if(Math.abs(ae-ne)===1&&oe===K+Ne){const Sn=Ie[oe][ne];return Sn!==null&&en(Sn)!==V}if(Math.abs(ae-ne)===1&&oe===K+Ne){const Sn=Ie[K][ne];if(Sn&&en(Sn)!==V&&Sn.toLowerCase()==="p"&&ie.lastPawnDoubleMove&&ie.lastPawnDoubleMove.row===K&&ie.lastPawnDoubleMove.col===ne)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},Wi=(V,K,ae,oe,ne)=>V!==ae&&K!==oe?!1:Zf(V,K,ae,oe,ne),Ld=(V,K,ae,oe)=>{const ne=Math.abs(V-ae),Ie=Math.abs(K-oe);return ne===2&&Ie===1||ne===1&&Ie===2},Mr=(V,K,ae,oe,ne)=>Math.abs(V-ae)!==Math.abs(K-oe)?!1:Zf(V,K,ae,oe,ne),Qs=(V,K,ae,oe,ne)=>Wi(V,K,ae,oe,ne)||Mr(V,K,ae,oe,ne),Jf=(V,K,ae,oe,ne)=>{const Ie=Math.abs(K-oe),Ne=Math.abs(ae-ne);if(Ie<=1&&Ne<=1)return!0;if(Ie===0&&Ne===2){if(V==="blue"&&!ie.blueKingMoved){if(ne===6&&!ie.blueRooksMove.right||ne===2&&!ie.blueRooksMove.left)return!0}else if(V==="red"&&!ie.redKingMoved&&(ne===6&&!ie.redRooksMove.right||ne===2&&!ie.redRooksMove.left))return!0}return!1},Zf=(V,K,ae,oe,ne)=>{const Ie=V===ae?0:(ae-V)/Math.abs(ae-V),Ne=K===oe?0:(oe-K)/Math.abs(oe-K);let rt=V+Ie,pn=K+Ne;for(;rt!==ae||pn!==oe;){if(ne[rt][pn]!==null)return!1;rt+=Ie,pn+=Ne}return!0},Do=(V,K,ae,oe,ne,Ie=!0,Ne=en(V),rt=l,pn=!1)=>{if(!gr(oe,ne))return pn||console.log("[ILLEGAL MOVE] Out of board:",{piece:V,startRow:K,startCol:ae,endRow:oe,endCol:ne}),!1;const Pn=rt[oe][ne];if(Pn&&en(Pn)===Ne)return pn||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:V,startRow:K,startCol:ae,endRow:oe,endCol:ne}),!1;const mr=V.toLowerCase();let Sn=!1;switch(mr){case"p":Sn=lR(Ne,K,ae,oe,ne,rt);break;case"r":Sn=Wi(K,ae,oe,ne,rt);break;case"n":Sn=Ld(K,ae,oe,ne);break;case"b":Sn=Mr(K,ae,oe,ne,rt);break;case"q":Sn=Qs(K,ae,oe,ne,rt);break;case"k":Sn=Jf(Ne,K,ae,oe,ne);break}return Sn?Sn&&Ie&&cR(K,ae,oe,ne,Ne,rt)?(pn||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:V,startRow:K,startCol:ae,endRow:oe,endCol:ne}),!1):Sn:(pn||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:V,startRow:K,startCol:ae,endRow:oe,endCol:ne,playerColor:Ne,pieceType:mr,targetPiece:rt[oe][ne],targetPieceColor:rt[oe][ne]?en(rt[oe][ne]):null}),!1)},Is=(V,K=l,ae=d)=>{const oe=[],ne=K[V.row][V.col];if(!ne||en(ne)!==ae)return oe;const Ie=ne.toLowerCase();if(Ie==="p"){const Ne=ae==="blue"?-1:1,rt=ae==="blue"?6:1,pn=V.row+Ne;if(pn>=0&&pn<8&&Do(ne,V.row,V.col,pn,V.col,!0,ae,K,!0)&&oe.push({row:pn,col:V.col}),V.row===rt){const Pn=V.row+2*Ne;Pn>=0&&Pn<8&&Do(ne,V.row,V.col,Pn,V.col,!0,ae,K,!0)&&oe.push({row:Pn,col:V.col})}for(const Pn of[-1,1]){const mr=V.col+Pn,Sn=V.row+Ne;mr>=0&&mr<8&&Sn>=0&&Sn<8&&Do(ne,V.row,V.col,Sn,mr,!0,ae,K,!0)&&oe.push({row:Sn,col:mr})}}else if(Ie==="n"){const Ne=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[rt,pn]of Ne){const Pn=V.row+rt,mr=V.col+pn;Pn>=0&&Pn<8&&mr>=0&&mr<8&&Do(ne,V.row,V.col,Pn,mr,!0,ae,K,!0)&&oe.push({row:Pn,col:mr})}}else for(let Ne=0;Ne<8;Ne++)for(let rt=0;rt<8;rt++)Do(ne,V.row,V.col,Ne,rt,!0,ae,K,!0)&&oe.push({row:Ne,col:rt});return oe},Xf=(V,K=l)=>{if(!an(K,V))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const ne=K[ae][oe];if(ne&&en(ne)===V&&Is({row:ae,col:oe},K,V).length>0)return!1}return!0},ac=(V,K=l)=>{if(an(K,V))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const ne=K[ae][oe];if(ne&&en(ne)===V&&Is({row:ae,col:oe},K,V).length>0)return!1}return!0},ep=(V,K)=>{if(g!=="active"||fe.current)return;const ae=l[V][K],oe=ae?en(ae):null;if(f&&S.some(ne=>ne.row===V&&ne.col===K)){Mo(f,{row:V,col:K});return}if(ae&&oe===d){const ne=Is({row:V,col:K});p({row:V,col:K}),D(ne);return}p(null),D([])},Mo=(V,K,ae=!1)=>{const oe=l[V.row][V.col];if(console.log("[MOVE ATTEMPT]",{from:V,to:K,piece:oe,isAIMove:ae,board:JSON.parse(JSON.stringify(l)),moveHistory:C}),!!oe){if(oe.toLowerCase()==="p"&&(en(oe)==="blue"&&K.row===0||en(oe)==="red"&&K.row===7)){k({from:V,to:K}),R(!0);return}Bd(V,K,"q",ae)}};Le.current=Mo;const Hm=P.useCallback((V,K,ae=!1)=>{fn(!0);const oe=l.map(Ne=>[...Ne]),ne=oe[V.row][V.col];if(!ne)return;oe[K.row][K.col]=ne,oe[V.row][V.col]=null,Js(oe,V,K,ne);const Ie=zi(V,K);if(N(Ne=>{const rt=[...Ne,Ie];return console.log("[MOVE HISTORY UPDATED]",rt),rt}),$({from:V,to:K}),p(null),D([]),C.length<10&&!ae){const Ne=_W(oe,d==="blue"?"red":"blue");lt(Ne).then(rt=>{rt&&rt.moves&&rt.moves.length>0&&(Lt(rt.moves.slice(0,3)),Ue(!0),setTimeout(()=>Ue(!1),5e3))})}Hi(V,K,ne),h(Ne=>{const rt=Ne==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",rt),Ud(oe,rt),rt}),Ud(oe,d==="blue"?"red":"blue"),u(oe),fe.current=!1,wt.current=!1,Mt.current=!1,fn(!1)},[l,d,C,lt]);P.useEffect(()=>{if(!fe.current&&a==="ai"&&d==="red"&&!wt.current&&!We)if(fe.current=!0,y==="easy")setTimeout(()=>{const V=du(l);V?Mo(V.from,V.to,!0):fe.current=!1},600);else{A("AI is calculating...");const V=_W(l,d);if(Mt.current)return;Mt.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:V,difficulty:y,movetime:3e3})}).then(ae=>{if(ae.ok)return ae.json();throw new Error("API call failed")}).then(ae=>{console.log("[DEBUG] Stockfish API response:",ae);const oe=ae.bestmove||ae.move;if(oe&&oe!=="(none)"&&oe.length===4){const ne=oe.charCodeAt(0)-97,Ie=parseInt(oe[1]),Ne=oe.charCodeAt(2)-97,rt=parseInt(oe[3]),pn=8-Ie,Pn=8-rt;if(console.log("[DEBUG] Parsed move:",{fromCol:ne,fromRowStockfish:Ie,toCol:Ne,toRowStockfish:rt,fromRow:pn,toRow:Pn}),ne>=0&&ne<8&&pn>=0&&pn<8&&Ne>=0&&Ne<8&&Pn>=0&&Pn<8){const mr={from:{row:pn,col:ne},to:{row:Pn,col:Ne}},Sn=l[pn][ne];if(console.log("[DEBUG] Move validation:",{piece:Sn,moveObj:mr,isValid:Sn&&en(Sn)==="red"&&Do(Sn,pn,ne,Pn,Ne,!0,"red",l)}),Sn&&en(Sn)==="red"&&Do(Sn,pn,ne,Pn,Ne,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",mr),Mo(mr.from,mr.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const Qb=du(l);Qb&&Mo(Qb.from,Qb.to,!0),fe.current=!1,Mt.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const mr=du(l);mr&&Mo(mr.from,mr.to,!0),fe.current=!1,Mt.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const ne=du(l);ne&&Mo(ne.from,ne.to,!0),fe.current=!1,Mt.current=!1}}).catch(ae=>{console.error("[DEBUG] Stockfish API error:",ae),A("AI error. Falling back to random moves.");const oe=du(l);oe&&Mo(oe.from,oe.to,!0),fe.current=!1,Mt.current=!1})}},[d,a,y,l,ie,tt]);const Ud=(V,K)=>{console.log("Checking game end for player:",K);const ae=V.some(ne=>ne.some(Ie=>Ie==="k")),oe=V.some(ne=>ne.some(Ie=>Ie==="K"));if(!ae)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),Wr("loss"),we(!0),setTimeout(()=>we(!1),3e3),"checkmate";if(!oe)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),Wr("win"),we(!0),setTimeout(()=>we(!1),3e3),"checkmate";if(console.log("Is king in check:",an(V,K)),Xf(K,V)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(V)),moveHistory:C}),w("checkmate");const ne=K==="blue"?"red":"blue";return ne==="blue"?(A("Checkmate! You win!"),gi("victory"),Zs(!0),zm(!0),ip(),Wr("win"),we(!0),setTimeout(()=>we(!1),3e3)):(A(`Checkmate! ${ne==="red"?"AI":"Opponent"} wins!`),gi("loser"),Yb(!0),Wr("loss"),we(!0),setTimeout(()=>we(!1),3e3)),"checkmate"}if(ac(K,V)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(V)),moveHistory:C}),w("stalemate");const ne=K==="blue"?"red":"blue";return ne==="blue"?(A("Stalemate! You win!"),gi("victory"),Zs(!0),zm(!0),ip(),Wr("win"),we(!0),setTimeout(()=>we(!1),3e3)):(A(`Stalemate! ${ne==="red"?"AI":"Opponent"} wins!`),gi("loser"),Yb(!0),Wr("loss"),we(!0),setTimeout(()=>we(!1),3e3)),"stalemate"}return an(V,K)?(console.log("CHECK detected!"),gi("check"),A(`${K==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},du=V=>{const K=[];for(let ne=0;ne<8;ne++)for(let Ie=0;Ie<8;Ie++){const Ne=V[ne][Ie];Ne&&en(Ne)==="red"&&K.push({row:ne,col:Ie})}for(let ne=K.length-1;ne>0;ne--){const Ie=Math.floor(Math.random()*(ne+1));[K[ne],K[Ie]]=[K[Ie],K[ne]]}const ae=[],oe=[];for(const ne of K){const Ie=Is(ne,V,"red");for(const Ne of Ie){const rt=V[Ne.row][Ne.col];if(rt&&en(rt)==="blue"){const Pn={p:100,n:320,b:330,r:500,q:900,k:2e4}[rt.toLowerCase()]||0;ae.push({from:ne,to:Ne,value:Pn})}else oe.push({from:ne,to:Ne})}}if(ae.length>0&&Math.random()<.3){ae.sort((ne,Ie)=>ne.value-Ie.value);for(const ne of ae){const Ie=V.map(rt=>[...rt]),Ne=Ie[ne.from.row][ne.from.col];if(Ie[ne.to.row][ne.to.col]=Ne,Ie[ne.from.row][ne.from.col]=null,!an(Ie,"red"))return{from:ne.from,to:ne.to}}}for(const ne of oe){const Ie=V.map(rt=>[...rt]),Ne=Ie[ne.from.row][ne.from.col];if(Ie[ne.to.row][ne.to.col]=Ne,Ie[ne.from.row][ne.from.col]=null,!an(Ie,"red"))return ne}ae.sort((ne,Ie)=>ne.value-Ie.value);for(const ne of ae){const Ie=V.map(rt=>[...rt]),Ne=Ie[ne.from.row][ne.from.col];if(Ie[ne.to.row][ne.to.col]=Ne,Ie[ne.from.row][ne.from.col]=null,!an(Ie,"red"))return{from:ne.from,to:ne.to}}return null},q1=()=>{u(JSON.parse(JSON.stringify(CW))),h("blue"),p(null),w("active"),N([]),D([]),$(null),W(!1),A("Select game mode"),Y({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),fe.current&&(fe.current=!1)},tp=()=>{if(cc(),console.log("[DEBUG] startGame called, difficulty:",y,"gameMode:",a),a==="online"){W(!1),X(!1);return}W(!0),X(!1),A("Game started! Your turn");const V=Md();pr(V),console.log("[DEBUG] Game started with chessboard:",V)},Gm=V=>`${V.slice(0,6)}...${V.slice(-4)}`,np=(V,K)=>{const ae=l[V][K],oe=(f==null?void 0:f.row)===V&&(f==null?void 0:f.col)===K,ne=S.some(Ne=>Ne.row===V&&Ne.col===K),Ie=O&&(O.from.row===V&&O.from.col===K||O.to.row===V&&O.to.col===K);return m.jsxs("div",{className:`square ${oe?"selected":""} ${ne?"legal-move":""} ${Ie?"last-move":""}`,onClick:()=>ep(V,K),onTouchStart:Ne=>qm(V,K,Ne),onTouchMove:K1,children:[ae&&m.jsx("div",{className:"piece",style:{backgroundImage:cS[ae]?`url(${cS[ae]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),ne&&m.jsx("div",{className:"legal-move-indicator"})]},`${V}-${K}`)},rp=()=>{if(!I||!B)return null;const V=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",children:V.map(K=>m.jsx("div",{className:"promotion-piece",onClick:()=>{Bd(B.from,B.to,K),R(!1),k(null)},style:{backgroundImage:cS[K]?`url(${cS[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[rl,sp]=P.useState(null),pt=(V=!1,K="Click a piece to learn more about it.")=>m.jsxs("div",{className:`piece-gallery${V?" piece-gallery-sm":""}`,children:[m.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:Wze.map(ae=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{sp(rl===ae.key?null:ae.key)},children:[m.jsx("img",{src:ae.img,alt:ae.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:ae.name}),rl===ae.key&&m.jsx("div",{className:"piece-gallery-desc",children:ae.desc})]},ae.key))}),m.jsx("div",{className:"piece-gallery-tip",children:K})]}),Ct=()=>m.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:m.jsx("div",{className:"difficulty-controls-col",children:m.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[m.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),m.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[m.jsx("button",{className:`difficulty-btn${y==="easy"?" selected":""}`,style:{background:y==="easy"?"#00ff00":"transparent",color:y==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),m.jsx("button",{className:`difficulty-btn${y==="hard"?" selected":""}`,style:{background:y==="hard"?"#00ff00":"transparent",color:y==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:y==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),m.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{tp()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[m.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),Js=(V,K,ae,oe)=>{if(oe.toLowerCase()==="p"&&(en(oe)==="blue"&&ae.row===0||en(oe)==="red"&&ae.row===7)){const ne=en(oe)==="blue"?"q":"Q";V[ae.row][ae.col]=ne}if(oe.toLowerCase()==="k"&&Math.abs(K.col-ae.col)===2){if(ae.col===6)V[K.row][7]=null,V[K.row][5]=en(oe)==="blue"?"r":"R";else if(ae.col===2){const ne=V[K.row][3];V[K.row][0]=null,V[K.row][3]=en(oe)==="blue"?"r":"R",ne&&ne.toLowerCase()==="q"&&(V[K.row][4]=ne)}}},zi=(V,K,ae,oe)=>{const ne=nl(V.row,V.col),Ie=nl(K.row,K.col);return`${ne}-${Ie}`},Hi=(V,K,ae)=>{const oe={...ie};ae.toLowerCase()==="k"?en(ae)==="blue"?oe.blueKingMoved=!0:oe.redKingMoved=!0:ae.toLowerCase()==="r"&&(en(ae)==="blue"?(V.col===0&&(oe.blueRooksMove.left=!0),V.col===7&&(oe.blueRooksMove.right=!0)):(V.col===0&&(oe.redRooksMove.left=!0),V.col===7&&(oe.redRooksMove.right=!0))),ae.toLowerCase()==="p"&&Math.abs(V.row-K.row)===2?oe.lastPawnDoubleMove={row:K.row,col:K.col}:oe.lastPawnDoubleMove=null,Y(oe)},Bd=(V,K,ae="q",oe=!1)=>{l[V.row][V.col];const Ie=l[K.row][K.col]!==null;if(gi(Ie?"capture":"move"),Ie){j({row:K.row,col:K.col,show:!0}),setTimeout(()=>{Hm(V,K,oe),j(null)},500);return}Hm(V,K,oe)},gi=V=>{if(!oc)return;let K="";switch(V){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;case"loser":K="/images/loser.mp3";break;case"upgrade":K="/images/upgrade.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},ip=()=>{gi("victory");for(let V=0;V<50;V++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},V*100);for(let V=0;V<15;V++)setTimeout(()=>{const K=document.createElement("div"),ae=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],oe=ae[Math.floor(Math.random()*ae.length)];K.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${oe};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),6e3)},V*200);setTimeout(()=>zm(!1),5e3)},[uR,Zs]=P.useState(!1),[dR,Yb]=P.useState(!1),V1=()=>{Zs(!1),Yb(!1)},hu=()=>{V1(),q1()},hR=()=>{V1(),W(!1)},cc=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},wa=a==="online",[lc,op]=P.useState("leaderboard"),qm=(V,K,ae)=>{ae.preventDefault(),ep(V,K)},K1=V=>{V.preventDefault()};return m.jsxs("div",{className:`chess-game${n?" fullscreen":""}${at?" chess-dark-mode":""}${G?" game-active":""}`,children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:"LAWB CHESS MAINNET BETA 3000"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,children:"_"}),m.jsx("button",{onClick:t,children:""})]})]}),m.jsx("div",{className:"game-stable-layout",children:m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"left-sidebar",children:[lc==="leaderboard"&&m.jsxs("div",{className:"leaderboard-compact",children:[m.jsx("h3",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table-compact",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"Rank"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((V,K)=>{if(typeof V=="object"&&V!==null&&"username"in V&&"wins"in V&&"losses"in V&&"draws"in V&&"points"in V){const ae=V;return m.jsxs("tr",{children:[m.jsx("td",{children:K+1}),m.jsx("td",{children:Gm(ae.username)}),m.jsx("td",{children:ae.points})]},ae.username)}return null})})]})})]}),lc==="moves"&&G&&m.jsxs("div",{className:"move-history-compact",children:[m.jsx("div",{className:"move-history-title",children:"Moves"}),m.jsx("ul",{className:"move-history-list-compact",children:C.slice().reverse().map((V,K)=>m.jsx("li",{children:V},C.length-1-K))})]}),lc==="gallery"&&m.jsx("div",{className:"piece-gallery-compact",children:pt(!0,"Click pieces to learn more")})]}),m.jsxs("div",{className:"center-area",children:[G&&m.jsxs("div",{className:"game-info-compact",children:[m.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===f2.AI&&m.jsxs("span",{className:"mode-play",children:[y==="easy"?"Easy":"Hard"," AI"]}),wa&&m.jsxs("span",{className:"wager-display",children:["Wager: ",se," tDMT"]})]}),G?m.jsxs("div",{className:"chess-main-area",children:[m.jsx("div",{className:"chessboard-container",children:m.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${ko})`},children:[Array.from({length:8},(V,K)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(ae,oe)=>np(K,oe))},K)),M&&M.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:m.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),m.jsxs("div",{className:"game-controls-compact",children:[m.jsxs("div",{className:"sidebar-toggle-group",children:[m.jsx("button",{className:lc==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>op("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:lc==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>op("moves"),children:"Moves"}),m.jsx("button",{className:lc==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>op("gallery"),children:"Gallery"})]}),m.jsx("button",{onClick:hu,children:"New Game"}),m.jsx("button",{onClick:hR,children:"Menu"})]})]}):ln?Ct():wa?m.jsx(Fze,{onClose:t,onMinimize:e,fullscreen:n}):m.jsxs("div",{className:"game-mode-panel-streamlined",children:[m.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:m.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"mode-selection-compact",children:[m.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),m.jsx("button",{className:`mode-btn-compact ${wa?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===f2.AI&&m.jsx("button",{className:"start-btn-compact",onClick:()=>X(!0),children:"Start Game"}),wa&&m.jsxs("div",{className:"pvp-info",children:[m.jsx("p",{children:"Challenge other players with tDMT wagers"}),m.jsx("p",{children:"Create or join games instantly"})]}),m.jsxs("div",{className:"help-section-compact",children:[m.jsx("h4",{children:"How to Play"}),m.jsxs("div",{className:"help-content",children:[m.jsxs("p",{children:[m.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),m.jsx("p",{children:m.jsx("strong",{children:"Piece Movements:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Special Rules:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Game Modes:"})}),m.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),m.jsxs("li",{children:[m.jsx("strong",{children:"Multiplayer:"})," wage DMT and challenge other players on Sanko mainnet. Winner takes the pot minus 5% house fee."]})]}),m.jsx("p",{children:m.jsx("strong",{children:"Multiplayer Flow:"})}),m.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[m.jsx("li",{children:"Connect your wallet to Sanko mainnet"}),m.jsx("li",{children:"Create a game and set your wager amount in DMT"}),m.jsx("li",{children:"Share your invite code with an opponent"}),m.jsx("li",{children:"Opponent joins and matches your wager"}),m.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),m.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),m.jsxs("p",{children:[m.jsx("strong",{children:"Lawb Chess Mainnet Contract:"})," ",m.jsx("a",{href:"https://explorer.sanko.xyz/address/0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"})]}),m.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Network Name:"})," Sanko Mainnet"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"RPC URL:"})," https://mainnet.sanko.xyz"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Chain ID:"})," 1996"]}),m.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[m.jsx("strong",{children:"Currency Symbol:"})," DMT"]})]})]})]}),m.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:m.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),m.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[m.jsx("button",{className:lc==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>op("leaderboard"),children:"Leaderboard"}),m.jsx("button",{className:lc==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>op("gallery"),children:"Gallery"})]})]})]})]})}),ce&&pt(!0),I&&rp(),ge&&m.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),uR&&m.jsxs("div",{className:"victory-overlay",children:[m.jsx("div",{className:"balloons-container"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Victory!"}),m.jsx("button",{onClick:hu,children:"New Game"})]})})]}),dR&&m.jsxs("div",{className:"defeat-overlay",children:[m.jsx("div",{className:"blood-overlay"}),m.jsx("div",{className:"victory-modal",children:m.jsxs("div",{className:"victory-content",children:[m.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),m.jsx("div",{children:"Defeat!"}),m.jsx("button",{onClick:hu,children:"Try Again"})]})})]})]})};function _W(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const qze=t=>t===Gl.testnet.chainId?YI.testnet.chess:YI.mainnet.chess,xn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},p2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},Au=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],Vze=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function Kze(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function Yze(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new LM(window.ethereum);return await new A0(e,uo,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const Qze=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=Gb(),o=qze(i||Gl.mainnet.chainId),[a,c]=P.useState(""),[l,u]=P.useState(""),[d,h]=P.useState(!1),[f,p]=P.useState(!1),[g,w]=P.useState(!1),[y,b]=P.useState(!1),{writeContract:v,isPending:A,data:C}=sd(),{writeContract:N,isPending:x,data:T,error:S}=sd(),{writeContract:D,isPending:O,data:$}=sd(),{writeContract:G,isPending:W,data:I}=sd(),{approve:R}=vne(),B=Aee(),{isLoading:k}=rd({hash:C}),{isLoading:M,data:j}=rd({hash:T}),{isLoading:q}=rd({hash:$}),{isLoading:se}=rd({hash:I});P.useEffect(()=>{I&&!se&&(console.log("[REFUND] Transaction completed successfully"),Ue("Game refunded successfully! Your wager has been returned."),Lt(xn.LOBBY),fe(""),fn(null),Le(0,"refund completed"),pr(null),K())},[I,se]);const{data:ie}=ib({address:o,abi:uo,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Y}=ib({address:o,abi:uo,functionName:"games",args:ie?[ie]:void 0,query:{enabled:!!ie&&ie!=="0x000000000000"}}),[te,fe]=P.useState(""),Xe=(U,z)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${U}" from ${z}`),te&&!U&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${te}" to "${U}" from ${z}`),fe(U)},Le=(U,z)=>{console.log(`[WAGER_DEBUG] Setting wager to ${U} TDMT from ${z}`),oc!==U&&console.log(`[WAGER_DEBUG] Wager changed from ${oc} to ${U} TDMT`),G1(U)},[De,wt]=P.useState("moves"),Mt=async()=>{if(!te||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",te);const U=await Ir.getGame(te);if(!U||U.blue_player!==r){alert("Only the game creator can refund the game");return}if(U.red_player&&U.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await G({address:o,abi:uo,functionName:"cancelGame",args:[te]}),console.log("[REFUND] Cancel game transaction submitted")}catch(U){console.error("[REFUND] Error refunding game:",U),alert("Failed to refund game. Please try again.")}},ln=async()=>{if(!r||!We){console.error("[CLAIM] Missing required data for claiming winnings");return}let U=te;if(!U&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const z=await Yze(r,o);z&&z!=="0x000000000000"&&(U=z,console.log("[CLAIM] Retrieved invite code from contract:",U))}catch(z){console.error("[CLAIM] Error getting invite code from contract:",z)}}if(!U){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",U,"Player:",We,"Address:",r);const z=await Ir.getGame(U);if(!z){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",z);let F=null;if(z.winner&&(z.blue_player||z.red_player)&&(F=z.winner==="blue"?z.blue_player:z.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:z.winner,winnerAddress:F})),!F&&Y)if(z.winner&&(z.winner==="blue"||z.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let le,Te,Se,ke,gt,qt;if(Array.isArray(Y))[le,Te,Se,ke,gt,qt]=Y;else{console.error("[CLAIM] Unexpected contract data format:",Y),alert("Failed to verify winner. Please try again.");return}F=z.winner==="blue"?le:Te,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:z.winner,winnerAddress:F,player1:le,player2:Te})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",Y);let le,Te,Se,ke,gt,qt;if(Array.isArray(Y))[le,Te,Se,ke,gt,qt]=Y;else{console.error("[CLAIM] Unexpected contract data format:",Y),alert("Failed to verify winner. Please try again.");return}const Nt=String(ke);if(Nt.startsWith("0x"))F=Nt;else if(Nt==="blue"||Nt==="red")F=Nt==="blue"?le:Te;else if(Nt==="1"||Nt==="2")F=Nt==="1"?le:Te;else{console.error("[CLAIM] Unknown winner format:",ke,"as string:",Nt),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:ke,winnerAddress:F,player1:le,player2:Te,winnerType:typeof ke,winnerValue:ke,address:r,addressType:typeof r})}if(!F){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:F,address:r,playerColor:We,winnerAddressType:typeof F,addressType:typeof r,addressesMatch:F===r,winnerAddressLength:F==null?void 0:F.length,addressLength:r==null?void 0:r.length}),F!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:F,address:r,playerColor:We}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let ee=U;if(!ee&&Y){console.log("[CLAIM] Using invite code from contract data as fallback");let le,Te,Se,ke,gt,qt;if(Array.isArray(Y))[le,Te,Se,ke,gt,qt]=Y,ee=gt;else{console.error("[CLAIM] Unexpected contract data format for invite code:",Y),alert("Failed to get invite code. Please try again.");return}}if(!ee||typeof ee!="string"||!ee.startsWith("0x")||ee.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",ee),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:ee,winner:F,functionName:"endGame",inviteCodeSource:z.invite_code?"Firebase":"Contract"}),D({address:o,abi:uo,functionName:"endGame",args:[ee,F]}),console.log("[CLAIM] Contract call initiated successfully"),O?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:O,endGameHash:$})}catch(z){console.error("[CLAIM] Error claiming winnings:",z),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[X,ce]=P.useState(Au),[de,ge]=P.useState("blue"),[we,at]=P.useState(null),[tt,lt]=P.useState([]),[ut,Hn]=P.useState([]),[Yn,Ue]=P.useState("Waiting for opponent..."),[It,Lt]=P.useState(xn.LOBBY),[We,fn]=P.useState(null),[ko,pr]=P.useState(null),[oc,G1]=P.useState(0),[Wm,zm]=P.useState([]),[Md,ji]=P.useState(!1),[Wr,en]=P.useState(!1),[gr,nl]=P.useState(null),[an,ya]=P.useState(null),[cR,lR]=P.useState(""),[Wi,Ld]=P.useState(0),[Mr,Qs]=P.useState("DMT");EB(Mr,r);const Jf=BigInt(Math.floor(Wi*Math.pow(10,vs[Mr].decimals))),{allowance:Zf}=UM(Mr,r,o),[Do]=P.useState(!0),[Is,Xf]=P.useState(null),[ac,ep]=P.useState(0),[Mo,Hm]=P.useState(Date.now()),Ud=36e5;P.useEffect(()=>(document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode"),()=>{document.documentElement.classList.remove("chess-dark-mode"),document.body.classList.remove("chess-dark-mode")}),[]);const[du,q1]=P.useState(!1),[tp,Gm]=P.useState(null),[np,rp]=P.useState(!1),[rl,sp]=P.useState(null),[pt,Ct]=P.useState(!1),[Js,zi]=P.useState(!0),[Hi,Bd]=P.useState(null),gi=P.useCallback(()=>{Is&&clearTimeout(Is);const U=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),uR()},Ud);Xf(U),Hm(Date.now())},[Is]),ip=P.useCallback(()=>{Is&&(clearTimeout(Is),Xf(null))},[Is]),uR=async()=>{if(!te||!We)return;console.log("[TIMEOUT] Handling timeout for game:",te);const U=de==="blue"?"red":"blue",z=U==="blue"?Y==null?void 0:Y[0]:Y==null?void 0:Y[1];z&&(console.log("[TIMEOUT] Ending game with winner:",z),D({address:o,abi:uo,functionName:"endGame",args:[te,z]}),Ue(`Game ended due to timeout. ${U==="red"?"Red":"Blue"} wins!`),Lt(xn.FINISHED))},[Zs,dR]=P.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[Yb,V1]=P.useState([]),[hu,hR]=P.useState(null),cc=P.useRef(null),wa=P.useRef(null),lc=P.useRef(r);P.useEffect(()=>{lc.current=r},[r]),P.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",T),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",M),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",an),console.log("[JOIN RECEIPT DEBUG] - condition:",T&&!M&&an),T&&!M&&an&&(console.log("[CONTRACT] Join transaction confirmed:",T),r===an.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),fn("red"),pr(an.gameData.blue_player)),Ir.updateGame(an.inviteCode,{...an.gameData,red_player:an.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),Lt(xn.ACTIVE),Ue("Game started!"),Vm(an.inviteCode),console.log("[CONTRACT] Clearing pending join data"),ya(null)}).catch(U=>{console.error("Error updating game in database:",U),Ue("Joined game on contract but failed to update database"),ya(null)}))},[T,M,an,r]),P.useEffect(()=>{$&&!q&&(console.log("[CLAIM] End game transaction confirmed:",$),Ue("Winnings claimed successfully! Transaction hash: "+$.slice(0,10)+"..."),w(!1))},[$,q]),P.useEffect(()=>{O===!1&&g&&!$&&(console.log("[CLAIM] End game transaction rejected or failed"),Ue("Claim transaction was rejected. Please try again."),w(!1))},[O,g,$]),P.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",C),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",k),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",gr),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",te),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",C&&!k&&gr&&!te),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!C),console.log("[CREATE DEBUG] - not waiting for receipt:",!k),console.log("[CREATE DEBUG] - pendingGameData exists:",!!gr),console.log("[CREATE DEBUG] - no inviteCode set:",!te),C&&!k&&gr&&!te?(console.log("[CONTRACT] Create game transaction confirmed:",C),Ir.createGame(gr).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),fe(gr.invite_code),fn("blue"),Le(Wi,"create game success"),Lt(xn.WAITING),Ue("Waiting for opponent to join..."),Vm(gr.invite_code),setTimeout(()=>{K()},1e3),nl(null),ji(!1),en(!1)}).catch(U=>{console.error("[FIREBASE] Error creating game after transaction:",U),Ue("Transaction confirmed but failed to create game in database"),nl(null),ji(!1),en(!1)})):C&&!k&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!gr),console.log("[CREATE DEBUG] - inviteCode already set:",!!te))},[C,k,gr,Wi]),P.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",gr)},[gr]),P.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",an),an){const U=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),ya(null)},3e4);return()=>clearTimeout(U)}},[an]),P.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",gr),console.log("[CREATE REJECTION DEBUG] - createGameHash:",C),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&gr&&!C),A===!1&&gr&&!C&&(console.log("[CONTRACT] Create game transaction rejected or failed"),Ue("Transaction was rejected. Please try again."),nl(null),ji(!1),en(!1))},[A,gr,C]),P.useEffect(()=>{x===!1&&an&&!T&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",an),console.log("[CONTRACT] Rejection details - joinGameHash:",T),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",ie),Ue("Transaction was rejected. Please try again."),Xe("","join transaction rejection"),fn(null),Le(0,"join transaction rejection"),pr(null),Lt(xn.LOBBY),Ue(""),ya(null))},[x,an,T,r,ie]),P.useEffect(()=>{r&&ie!==void 0&&(y||(ie!=="0x000000000000"&&Y||ie==="0x000000000000")&&op())},[r,ie,Y,y]),P.useEffect(()=>{b(!1)},[r]),P.useEffect(()=>{It===xn.ACTIVE&&We?(console.log("[TIMEOUT] Starting timeout timer for active game"),gi()):ip()},[It,We,gi,ip]),P.useEffect(()=>{It===xn.ACTIVE&&ut.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),gi())},[ut,It,gi]),P.useEffect(()=>{if(It===xn.ACTIVE&&Is){const U=setInterval(()=>{const z=Date.now()-Mo,F=Math.max(0,Ud-z);ep(Math.ceil(F/1e3))},1e3);return()=>clearInterval(U)}},[It,Is,Mo]),P.useEffect(()=>()=>{Qb(),ip(),cc.current&&cc.current(),wa.current&&clearTimeout(wa.current)},[ip]);const op=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),ie&&ie!=="0x000000000000"&&!Y){console.log("[GAME_STATE] Waiting for contract data...");return}if(ie&&ie!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",ie),Y)){let F,ee,le,Te,Se,ke;if(Array.isArray(Y))[F,ee,le,Te,Se,ke]=Y;else{console.error("[GAME_STATE] Unexpected contract data format:",Y);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:F,player2:ee,isActive:le,winner:Te,inviteCode:Se,wagerAmount:ke}),!Se){console.error("[GAME_STATE] Invalid invite code:",Se);return}const gt=F===r?"blue":"red",qt=F===r?ee:F;console.log("[GAME_STATE] Player is",gt,"opponent is",qt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",F),console.log("[DEBUG] - player2 (red):",ee),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",F===r),console.log("[DEBUG] - player2 === address:",ee===r);const Nt=await Ir.getGame(Se);if(Nt){if(console.log("[GAME_STATE] Found game in Firebase:",Nt),fe(Se),fn(gt),Le(parseFloat(Nt.bet_amount)/1e18,"checkPlayerGameState Firebase"),pr(qt),Nt.game_state==="waiting")Lt(xn.WAITING),Ue("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(Nt.game_state==="active"||Nt.game_state==="test_update"){if(Lt(xn.ACTIVE),Ue("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",Nt.game_state,")"),Nt.board){const Vr=Nt.board;ce(Km(Vr)),ge(Nt.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",Nt.game_state,"- treating as active"),Lt(xn.ACTIVE),Ue("Game in progress"),Nt.board){const Vr=Nt.board;ce(Km(Vr)),ge(Nt.current_player||"blue")}Vm(Se),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",It),console.log("[GAME_STATE] Game state from Firebase:",Nt.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const Vr={invite_code:Se,game_title:`Game ${Se.slice(-6)}`,bet_amount:ke?ke.toString():"0",blue_player:F,red_player:ee,game_state:le?"active":"waiting",board:{positions:Jb(Au),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0};if(await Ir.createGame(Vr),console.log("[GAME_STATE] Successfully synced game to Firebase:",Vr),fe(Se),fn(gt),Le(parseFloat(Vr.bet_amount)/1e18,"checkPlayerGameState sync"),pr(qt),le?(Lt(xn.ACTIVE),Ue("Game in progress")):(Lt(xn.WAITING),Ue("Waiting for opponent to join...")),Vr.board){const Xne=Vr.board;ce(Km(Xne)),ge(Vr.current_player||"blue")}Vm(Se),b(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const z=(await Ir.getActiveGames()).filter(F=>F.chain==="sanko"&&(F.blue_player===r||F.red_player===r)&&["waiting","active"].includes(F.game_state));if(z&&z.length>0){const F=z[0];if(console.log("[GAME_STATE] Found active game in Firebase:",F),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",F.blue_player),console.log("[DEBUG] - red_player:",F.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",F.blue_player===r),console.log("[DEBUG] - red_player === address:",F.red_player===r),fe(F.invite_code),fn(F.blue_player===r?"blue":"red"),Le(parseFloat(F.bet_amount)/1e18,"checkPlayerGameState fallback"),pr(F.blue_player===r?F.red_player:F.blue_player),F.game_state==="waiting")Lt(xn.WAITING),Ue("Waiting for opponent to join...");else if(F.game_state==="active"||F.game_state==="test_update"){if(Lt(xn.ACTIVE),Ue("Game in progress"),F.board){const ee=F.board;ce(Km(ee)),ge(F.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",F.game_state,"- treating as active"),Lt(xn.ACTIVE),Ue("Game in progress"),F.board){const ee=F.board;ce(Km(ee)),ge(F.current_player||"blue")}Vm(F.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),Lt(xn.LOBBY),ji(!1),b(!0)}catch(U){console.error("[GAME_STATE] Error in checkPlayerGameState:",U)}},qm=async()=>{try{await xee();const U=await See(20);V1(U)}catch(U){console.error("Error loading leaderboard:",U)}},K1=async U=>{if(console.log("[SCORE] updateScore called with:",U,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",pm(r)),await LI(r,U)?console.log("[SCORE] Successfully updated score for:",pm(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(z){console.error("[SCORE] Error updating score:",z)}},V=async(U,z,F)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:U,bluePlayer:z,redPlayer:F}),!z||!F){console.error("[SCORE] Missing player addresses from contract");return}await sje(U,z,F)?(console.log("[SCORE] Successfully updated both players scores"),await qm()):console.error("[SCORE] Failed to update both players scores")}catch(ee){console.error("[SCORE] Error updating both players scores:",ee)}},K=async()=>{try{const U=await Ir.getOpenGames();console.log("[FIREBASE] Loaded open games:",U),await ae(U),zm(U)}catch(U){console.error("Error loading open games:",U)}},ae=async U=>{if(console.log("[CLEANUP] Checking for ghost games..."),!B){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const z of U)try{const F=z.invite_code;if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",z.invite_code,F);continue}const ee=await B.readContract({address:o,abi:uo,functionName:"games",args:[F]});(!ee||Array.isArray(ee)&&ee[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",z.invite_code,"- removing from Firebase"),await Ir.deleteGame(z.invite_code),console.log("[CLEANUP] Ghost game removed:",z.invite_code))}catch(F){console.error("[CLEANUP] Error checking game:",z.invite_code,F)}},oe=async()=>{if(!r)return!1;try{return Zf<Jf?(console.log("[APPROVAL] Insufficient allowance, requesting approval"),R(Mr,o,Jf),!1):!0}catch(U){return console.error("[APPROVAL] Error checking approval:",U),Ue("Failed to check token approval. Please try again."),!1}},ne=async()=>{if(console.log("[CREATE DEBUG] createGame called with:",{address:r,gameWager:Wi,selectedToken:Mr}),!r||Wi<=0){console.log("[CREATE DEBUG] Early return - address:",!!r,"gameWager:",Wi);return}console.log("[CREATE] Starting game creation - address:",r,"wager:",Wi),en(!0);try{if(!await oe()){Ue("Please approve token spending first"),en(!1);return}const z=Kze();console.log("[CREATE] Generated invite code:",z);const F=vs[Mr].address,ee=BigInt(Math.floor(Wi*Math.pow(10,vs[Mr].decimals))),le={invite_code:z,game_title:`Chess Game ${z.slice(-6)}`,bet_amount:ee.toString(),bet_token:Mr,blue_player:r,game_state:"waiting",board:{positions:Jb(Au),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",le),console.log("[CREATE] Calling contract with args:",[z,F,ee]);const Te=v({address:o,abi:uo,functionName:"createGame",args:[z,F,ee]});console.log("[CREATE] Contract call initiated, result:",Te),console.log("[CREATE] createGameHash after writeCreateGame:",C),console.log("[CREATE] Pending game data being set:",le),nl(le),Ue("Creating game... Please confirm transaction in your wallet.")}catch(U){console.error("[CREATE] Error creating game:",U),Ue("Failed to create game. Please try again.")}finally{en(!1)}},Ie=async U=>{if(r)try{const z=await Ir.getGame(U);if(!z||z.game_state!=="waiting"){Ue("Game not found or already full");return}const ee=parseFloat(z.bet_amount)/1e18;if(fe(U),fn("red"),Le(ee,"joinGame"),pr(z.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:U,playerColor:"red",wagerAmountTDMT:ee,opponent:z.blue_player,address:r}),r===z.blue_player){console.error("[JOIN] Player cannot join their own game"),Ue("You cannot join your own game");return}if(ie&&ie!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",ie),Ue("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const le=await window.ethereum.request({method:"eth_chainId"}),Te=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",le),console.log("[JOIN] Wallet state check - connectedAccounts:",Te),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(le){console.error("[JOIN] Error checking wallet state:",le)}console.log("[JOIN] Contract call parameters - contractAddress:",o),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[U]),Ue("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",o),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[U]),N({address:o,abi:uo,functionName:"joinGame",args:[U]}),console.log("[JOIN] writeJoinGame called, setting pending data..."),ya({inviteCode:U,gameData:z,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(z){console.error("[JOIN] Error joining game:",z),Ue("Failed to join game. Please try again."),Xe("","join game error"),fn(null),Le(0,"join game error"),pr(null)}},[Ne,rt]=P.useState(null),[pn,Pn]=P.useState(""),[mr,Sn]=P.useState(!0),Qb=()=>{console.log("[FIREBASE] No fallback to stop")},Vm=U=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",U),cc.current&&(console.log("[FIREBASE] Removing existing subscription"),cc.current());const z=Ir.subscribeToGame(U,F=>{const ee=lc.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",ee),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",F),console.log("[DEBUG] Blue player from Firebase:",F==null?void 0:F.blue_player),console.log("[DEBUG] Red player from Firebase:",F==null?void 0:F.red_player),console.log("[DEBUG] Blue player type:",typeof(F==null?void 0:F.blue_player)),console.log("[DEBUG] Red player type:",typeof(F==null?void 0:F.red_player)),console.log("[DEBUG] Current address type:",typeof ee),console.log("[DEBUG] Current playerColor state:",We),console.log("[DEBUG] Pending join game data:",!!an),!F){console.log("[DEBUG] No game data received");return}if(an&&ee===an.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",We),F.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),ya(null)),F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&pr(F.blue_player===ee?F.red_player:F.blue_player);else if(ee&&F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Te=ee.toLowerCase()===F.blue_player.toLowerCase(),Se=ee.toLowerCase()===F.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Te),console.log("[DEBUG] Red player match:",Se),console.log("[DEBUG] Blue comparison:",`${ee.toLowerCase()} === ${F.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${ee.toLowerCase()} === ${F.red_player.toLowerCase()}`),Te&&We!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),fn("blue"),pr(F.red_player)):Se&&We!=="red"?(console.log("[DEBUG] Setting player color to RED"),fn("red"),pr(F.blue_player)):!Te&&!Se&&We!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),fn(null),pr(null)):console.log("[DEBUG] Player color already correctly set to:",We)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!ee),console.log("[DEBUG] - blue_player:",!!F.blue_player),console.log("[DEBUG] - red_player:",F==null?void 0:F.red_player),console.log("[DEBUG] - Current playerColor state:",We),console.log("[DEBUG] - Contract game data available:",!!Y),We&&(We==="blue"||We==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",We);return}else if(Y&&Array.isArray(Y)&&ee){const[Te,Se]=Y;if(Te&&Se){const ke=Te.toLowerCase()===ee.toLowerCase()?"blue":"red",gt=Te.toLowerCase()===ee.toLowerCase()?Se:Te;console.log("[DEBUG] Setting playerColor from contract fallback:",ke),fn(ke),pr(gt)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!We||We!=="blue"&&We!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),fn(null));F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&pr(F.blue_player===ee?F.red_player:F.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",F.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof F.bet_amount),console.log("[WAGER DEBUG] Full gameData:",F),console.log("[WAGER DEBUG] parsed value:",F.bet_amount?parseFloat(F.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",F.bet_amount?parseFloat(F.bet_amount)/1e18:"null");let le=0;F.bet_amount&&!isNaN(parseFloat(F.bet_amount))?(le=parseFloat(F.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",le)):Y&&Array.isArray(Y)&&Y[5]?(le=parseFloat(Y[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",le)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),Le(le,"Firebase subscription"),F.board&&ce(Km(F.board)),F.current_player&&ge(F.current_player),F.game_state==="active"?(Lt(xn.ACTIVE),Ue("Game in progress")):F.game_state==="finished"?(Lt(xn.FINISHED),Ue("Game finished")):F.game_state==="waiting"&&(Lt(xn.WAITING),Ue("Waiting for opponent to join..."))});cc.current=z,console.log("[FIREBASE] Firebase subscription setup complete for game:",U)};P.useEffect(()=>(te&&Vm(te),()=>{cc.current&&cc.current()}),[te,r]),P.useEffect(()=>{if(Y&&!We&&r){console.log("[FALLBACK] Setting playerColor from contract data");let U,z,F,ee,le,Te;if(Array.isArray(Y))[U,z,F,ee,le,Te]=Y;else{console.error("[FALLBACK] Unexpected contract data format:",Y);return}const Se=U===r?"blue":"red",ke=U===r?z:U;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",U),console.log("[FALLBACK] - player2 (red):",z),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Se),console.log("[FALLBACK] - opponent:",ke),console.log("[FALLBACK] - inviteCode from contract:",le),fn(Se),pr(ke),!te&&le&&(console.log("[FALLBACK] Setting missing inviteCode:",le),fe(le)),te&&Ir.getGame(te).then(gt=>{gt&&(!gt.blue_player||!gt.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),zne()),gt&&gt.game_state==="active"&&an&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),ya(null))}).catch(gt=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",gt)})}},[Y,We,r,te]),P.useEffect(()=>{if(j&&an){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",j.transactionHash),console.log("[RECEIPT] Pending data:",an);const{inviteCode:U,gameData:z,address:F}=an;Ir.updateGame(U,{red_player:F,blue_player:z.blue_player,bet_amount:z.bet_amount,game_state:"active",last_move:null,board:{positions:Jb(Au),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),Ue("Game started! You are the red player."),Lt(xn.ACTIVE),ya(null)}).catch(ee=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",ee),Ue("Game joined but failed to update game state. Please refresh.")})}},[j,an]),P.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),Ue(`Failed to join game: ${S.message||"Transaction rejected"}`),Xe("","join game error effect"),fn(null),Le(0,"join game error effect"),pr(null),ya(null))},[S]);const Jb=U=>{const z={};return U.forEach((F,ee)=>{F.forEach((le,Te)=>{z[`${ee}_${Te}`]=le})}),z},Km=U=>{if(!U||!U.positions)return console.warn("[BOARD] No board data available, using initial board"),Au;if(console.log("[BOARD] Attempting to reconstruct board from:",U),console.log("[BOARD] Positions type:",typeof U.positions),console.log("[BOARD] Positions is array:",Array.isArray(U.positions)),console.log("[BOARD] Positions value:",U.positions),typeof U.positions=="object"&&!Array.isArray(U.positions)){const z=U.positions,F=U.rows||8,ee=U.cols||8,le=Array(F).fill(null).map(()=>Array(ee).fill(null));for(let Te=0;Te<F;Te++)for(let Se=0;Se<ee;Se++){const ke=`${Te}_${Se}`;le[Te][Se]=z[ke]||null}return console.log("[BOARD] Reconstructed from flat structure:",le),le}return Array.isArray(U.positions)?(console.log("[BOARD] Found array structure, length:",U.positions.length),U.positions.length===8?U.positions.every((F,ee)=>{const le=Array.isArray(F)&&F.length===8;return le||console.warn(`[BOARD] Row ${ee} is invalid:`,F,"Type:",typeof F,"Length:",F==null?void 0:F.length),le})?(console.log("[BOARD] Using legacy array structure"),U.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),Au):(console.warn("[BOARD] Array has wrong length:",U.positions.length,"expected 8"),Au)):(console.warn("[BOARD] Unknown board structure, using initial board:",U),Au)},fR=U=>`${U.slice(0,6)}...${U.slice(-4)}`,Gi=U=>U&&U===U.toUpperCase()?"red":"blue",NB=(U,z)=>U>=0&&U<8&&z>=0&&z<8,Zb=(U,z)=>{const F=z==="red"?"K":"k";let ee=-1,le=-1;for(let Se=0;Se<8;Se++){for(let ke=0;ke<8;ke++)if(U[Se][ke]===F){ee=Se,le=ke;break}if(ee!==-1)break}return ee===-1?!1:Tne(ee,le,z==="red"?"blue":"red",U)},Tne=(U,z,F,ee)=>{if(!ee||!Array.isArray(ee)||ee.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",ee),!1;for(let le=0;le<8;le++){if(!ee[le]||!Array.isArray(ee[le])||ee[le].length!==8)return console.warn("[SAFETY] Invalid board row structure:",ee[le]),!1;for(let Te=0;Te<8;Te++){const Se=ee[le][Te];if(Se&&Gi(Se)===F&&Ym(Se,le,Te,U,z,!1,F,ee,!0))return!0}}return!1},Rne=(U,z,F,ee,le,Te=X)=>{const Se=Te[U][z];if(!Se)return!1;const ke=Te.map(gt=>[...gt]);return ke[F][ee]=Se,ke[U][z]=null,Zb(ke,le)},Pne=(U,z,F,ee,le,Te)=>{const Se=U==="blue"?-1:1,ke=U==="blue"?6:1;if(!NB(ee,le)||U==="blue"&&ee>=z||U==="red"&&ee<=z)return!1;if(F===le&&ee===z+Se)return Te[ee][le]===null;if(F===le&&z===ke&&ee===z+2*Se)return Te[z+Se][F]===null&&Te[ee][le]===null;if(Math.abs(F-le)===1&&ee===z+Se){const gt=Te[ee][le];if(gt!==null&&Gi(gt)!==U)return!0;if(gt===null&&Zs.lastPawnDoubleMove){const{row:qt,col:Nt}=Zs.lastPawnDoubleMove;if(qt===z&&Nt===le){const Vr=Te[z][le];if(Vr&&Vr.toLowerCase()==="p"&&Gi(Vr)!==U)return!0}}}return!1},TB=(U,z,F,ee,le)=>U===F||z===ee,One=(U,z,F,ee)=>{const le=Math.abs(U-F),Te=Math.abs(z-ee);return le===2&&Te===1||le===1&&Te===2},RB=(U,z,F,ee,le)=>Math.abs(U-F)===Math.abs(z-ee),kne=(U,z,F,ee,le)=>TB(U,z,F,ee)||RB(U,z,F,ee),Dne=(U,z,F,ee,le)=>{const Te=Math.abs(z-ee),Se=Math.abs(F-le);if(Te<=1&&Se<=1)return!0;if(Te===0&&Se===2){if(U==="blue"&&!Zs.blueKingMoved){if(le===6&&!Zs.blueRooksMove.right||le===2&&!Zs.blueRooksMove.left)return!0}else if(U==="red"&&!Zs.redKingMoved&&(le===6&&!Zs.redRooksMove.right||le===2&&!Zs.redRooksMove.left))return!0}return!1},pR=(U,z,F,ee,le)=>{const Te=U===F?0:(F-U)/Math.abs(F-U),Se=z===ee?0:(ee-z)/Math.abs(ee-z);let ke=U+Te,gt=z+Se;for(;ke!==F||gt!==ee;){if(le[ke][gt]!==null)return!1;ke+=Te,gt+=Se}return!0},Ym=(U,z,F,ee,le,Te=!0,Se=Gi(U),ke=X,gt=!1)=>{if(!U||!NB(ee,le))return!1;const qt=ke[ee][le];if(qt&&Gi(qt)===Se)return!1;let Nt=!1;switch(U.toUpperCase()){case"P":Nt=Pne(Se,z,F,ee,le,ke);break;case"R":Nt=TB(z,F,ee,le)&&pR(z,F,ee,le,ke);break;case"N":Nt=One(z,F,ee,le);break;case"B":Nt=RB(z,F,ee,le)&&pR(z,F,ee,le,ke);break;case"Q":Nt=kne(z,F,ee,le)&&pR(z,F,ee,le,ke);break;case"K":Nt=Dne(Se,z,F,ee,le);break}return!(!Nt||Te&&Rne(z,F,ee,le,Se,ke))},gR=(U,z=X,F=de)=>{const ee=[],le=z[U.row][U.col];if(!le||Gi(le)!==F)return ee;const Te=le.toLowerCase();if(Te==="p"){const Se=F==="blue"?-1:1,ke=F==="blue"?6:1,gt=U.row+Se;if(gt>=0&&gt<8&&Ym(le,U.row,U.col,gt,U.col,!0,F,z,!0)&&ee.push({row:gt,col:U.col}),U.row===ke){const qt=U.row+2*Se;qt>=0&&qt<8&&Ym(le,U.row,U.col,qt,U.col,!0,F,z,!0)&&ee.push({row:qt,col:U.col})}for(const qt of[-1,1]){const Nt=U.col+qt,Vr=U.row+Se;Nt>=0&&Nt<8&&Vr>=0&&Vr<8&&Ym(le,U.row,U.col,Vr,Nt,!0,F,z,!0)&&ee.push({row:Vr,col:Nt})}}else if(Te==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[ke,gt]of Se){const qt=U.row+ke,Nt=U.col+gt;qt>=0&&qt<8&&Nt>=0&&Nt<8&&Ym(le,U.row,U.col,qt,Nt,!0,F,z,!0)&&ee.push({row:qt,col:Nt})}}else for(let Se=0;Se<8;Se++)for(let ke=0;ke<8;ke++)Ym(le,U.row,U.col,Se,ke,!0,F,z,!0)&&ee.push({row:Se,col:ke});return ee},Mne=(U,z=X)=>{if(!Zb(z,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=z[F][ee];if(le&&Gi(le)===U&&gR({row:F,col:ee},z,U).length>0)return!1}return!0},Lne=(U,z=X)=>{if(Zb(z,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=z[F][ee];if(le&&Gi(le)===U&&gR({row:F,col:ee},z,U).length>0)return!1}return!0},PB=(U,z)=>{if(console.log("[CLICK] Square clicked:",{row:U,col:z}),console.log("[CLICK] Game mode:",It,"Player color:",We),console.log("[CLICK] Current player:",de,"Player color:",We),It!==xn.ACTIVE||!We){console.log("[CLICK] Game not active or no player color");return}const F=X[U][z],ee=F?Gi(F):null;if(console.log("[CLICK] Piece at square:",F,"Piece color:",ee),de!==We){console.log("[CLICK] Not player's turn. Current:",de,"Player:",We);return}if(F&&ee===We){at({row:U,col:z});const le=gR({row:U,col:z});lt(le);return}if(we&&tt.some(le=>le.row===U&&le.col===z)){Une(we,{row:U,col:z}),at(null),lt([]);return}at(null),lt([])},Une=async(U,z)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:U,to:z,playerColor:We,currentPlayer:de}),!We||de!==We){console.log("[PROMOTION DEBUG] Early return - playerColor:",We,"currentPlayer:",de);return}const F=X[U.row][U.col];if(!F){console.log("[PROMOTION DEBUG] No piece at position:",U);return}if(console.log("[PROMOTION DEBUG] Piece:",F,"isPawn:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",de,"to.row:",z.row),console.log("[PROMOTION DEBUG] Player color:",We),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",de==="red"&&z.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",de==="blue"&&z.row===0),console.log("[PROMOTION DEBUG] - Full condition:",F.toUpperCase()==="P"&&(de==="red"&&z.row===7||de==="blue"&&z.row===0)),F.toUpperCase()==="P"&&(de==="red"&&z.row===7||de==="blue"&&z.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",F,"at position:",z),sp({from:U,to:z}),rp(!0);return}await OB(U,z)},OB=async(U,z,F="q")=>{if(!We||de!==We||!X[U.row][U.col])return;const Te=X[z.row][z.col]!==null;if(ap(Te?"capture":"move"),Te){Bd({row:z.row,col:z.col,show:!0}),setTimeout(()=>{kB(U,z,F),Bd(null)},500);return}kB(U,z,F)},kB=async(U,z,F="q")=>{if(!We||de!==We)return;const ee=X[U.row][U.col];if(!ee)return;const le=X.map(qt=>[...qt]);let Te=ee;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",ee,"isPawn:",ee.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",We,"to.row:",z.row),console.log("[PROMOTION DEBUG] - promotion condition:",ee.toUpperCase()==="P"&&(We==="red"&&z.row===7||We==="blue"&&z.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",F),ee.toUpperCase()==="P"&&(We==="red"&&z.row===7||We==="blue"&&z.row===0)&&(Te=We==="red"?F.toUpperCase():F.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Te)),$ne(le,U,z,ee),le[z.row][z.col]=Te,le[U.row][U.col]=null,Fne(U,z,ee);const Se=de==="blue"?"red":"blue";Zb(le,Se)&&ap("check");let ke="active",gt=null;if(Mne(Se,le))ke="finished",gt=de,Ue(`${de==="red"?"Red":"Blue"} wins by checkmate!`),ap(de===We?"victory":"loser"),Bne(),console.log("[SCORE] Updating scores - Winner:",de,"Loser:",Se),console.log("[SCORE] Contract game data:",Y),console.log("[SCORE] Player game invite code:",ie),Y&&Y.length>=2?(console.log("[SCORE] Using contract data for both players update"),await V(de,Y[0],Y[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await K1(de===We?"win":"loss"),await qm()),gt===We&&(console.log("[CONTRACT] Triggering automatic payout for winner:",gt),setTimeout(()=>{ln()},2e3));else if(Lne(Se,le)){const qt=de;ke="finished",Ue(`${qt==="red"?"Red":"Blue"} wins by stalemate!`),ap(qt===We?"victory":"loser"),console.log("[SCORE] Updating scores - Stalemate winner:",qt,"Loser:",Se),console.log("[SCORE] Contract game data:",Y),console.log("[SCORE] Player game invite code:",ie),Y&&Y.length>=2?(console.log("[SCORE] Using contract data for both players update"),await V(qt,Y[0],Y[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await K1(qt===We?"win":"loss"),await qm()),qt===We&&(console.log("[CONTRACT] Triggering automatic payout for stalemate winner:",qt),setTimeout(()=>{ln()},2e3))}try{if(!te){console.error("[BUG] inviteCode is missing when trying to update game!"),Ue("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",te,"gameData:",{board:{positions:le},current_player:Se,game_state:ke,winner:gt,last_move:{from:U,to:z}});const Nt={...await Ir.getGame(te),board:{positions:Jb(le),rows:8,cols:8},current_player:Se,game_state:ke,winner:gt,last_move:{from:U,to:z}};console.log("[FIREBASE] Storing data in Firebase:",Nt),await Ir.updateGame(te,Nt),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(qt){console.error("[DATABASE] Error updating game:",qt)}ce(le),ge(Se),hR({from:U,to:z}),rp(!1),sp(null)},Bne=()=>{Ct(!0);for(let U=0;U<50;U++)setTimeout(()=>{const z=document.createElement("div");z.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(z),setTimeout(()=>z.remove(),300)},U*100);wa.current&&clearTimeout(wa.current),wa.current=setTimeout(()=>{Ct(!1)},5e3)},$ne=(U,z,F,ee)=>{if(ee.toLowerCase()==="k"&&Math.abs(z.col-F.col)===2){if(F.col===6)U[z.row][7]=null,U[z.row][5]=Gi(ee)==="blue"?"r":"R";else if(F.col===2){const le=U[z.row][3];U[z.row][0]=null,U[z.row][3]=Gi(ee)==="blue"?"r":"R",le&&le.toLowerCase()==="q"&&(U[z.row][4]=le)}}ee.toLowerCase()==="p"&&Math.abs(z.col-F.col)===1&&U[F.row][F.col]===null&&Zs.lastPawnDoubleMove&&Zs.lastPawnDoubleMove.row===z.row&&Zs.lastPawnDoubleMove.col===F.col&&(U[z.row][F.col]=null)},Fne=(U,z,F)=>{const ee={...Zs};F.toLowerCase()==="k"?Gi(F)==="blue"?ee.blueKingMoved=!0:ee.redKingMoved=!0:F.toLowerCase()==="r"&&(Gi(F)==="blue"?(U.col===0&&(ee.blueRooksMove.left=!0),U.col===7&&(ee.blueRooksMove.right=!0)):(U.col===0&&(ee.redRooksMove.left=!0),U.col===7&&(ee.redRooksMove.right=!0))),F.toLowerCase()==="p"&&Math.abs(U.row-z.row)===2?ee.lastPawnDoubleMove={row:z.row,col:z.col}:ee.lastPawnDoubleMove=null,dR(ee)},ap=U=>{if(!Js)return;let z="";switch(U){case"move":z="/images/move.mp3";break;case"capture":z="/images/capture.mp3";break;case"check":z="/images/play.mp3";break;case"checkmate":z="/images/victory.mp3";break;case"victory":z="/images/victory.mp3";break;case"loser":z="/images/loser.mp3";break;case"upgrade":z="/images/upgrade.mp3";break;default:z="/images/move.mp3"}try{const F=new Audio(z);F.volume=.3,F.play().catch(ee=>console.warn("Audio play failed:",ee))}catch(F){console.warn("Sound play failed:",F)}},jne=async()=>{if(te)try{console.log("[RESET] Resetting corrupted game data for:",te);const U={board:{positions:Jb(Au),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await Ir.updateGame(te,U),console.log("[RESET] Successfully reset game data"),Ue("Game reset successfully. You can now make moves.")}catch(U){console.error("[RESET] Error resetting game data:",U),Ue("Failed to reset game. Please try again.")}},Wne=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(U){console.error("Error checking stuck games:",U)}},zne=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!te||!r){console.log("[FIX] Missing inviteCode or address");return}try{const U=await Ir.getGame(te);if(!U){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",U),Y&&Array.isArray(Y)){const[z,F,ee,le,Te,Se]=Y;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",z),console.log("[FIX] - Contract player2 (red):",F),console.log("[FIX] - Contract isActive:",ee),console.log("[FIX] - Firebase blue_player:",U.blue_player),console.log("[FIX] - Firebase red_player:",U.red_player),console.log("[FIX] - Firebase game_state:",U.game_state);let ke=!1;const gt={};F&&F!=="0x0000000000000000000000000000000000000000"&&(!U.red_player||U.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),gt.red_player=F,ke=!0),z&&z!=="0x0000000000000000000000000000000000000000"&&(!U.blue_player||U.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),gt.blue_player=z,ke=!0),z&&F&&z!=="0x0000000000000000000000000000000000000000"&&F!=="0x0000000000000000000000000000000000000000"&&(U.game_state==="waiting"||!U.game_state)&&(console.log("[FIX] Activating game in Firebase"),gt.game_state="active",gt.current_player="blue",ke=!0),ee&&U.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),gt.game_state="active",ke=!0),ke?(console.log("[FIX] Updating Firebase with:",gt),await Ir.updateGame(te,gt),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch(U){console.error("[FIX] Error fixing missing player data:",U)}},Hne=(U,z)=>{if(!X||!Array.isArray(X)||X.length!==8||!X[U]||!Array.isArray(X[U])||X[U].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:U,col:z,board:X}),m.jsx("div",{className:"square error",children:m.jsx("div",{className:"error-indicator",children:"!"})},`${U}-${z}`);const F=X[U][z],ee=(we==null?void 0:we.row)===U&&(we==null?void 0:we.col)===z,le=tt.some(ke=>ke.row===U&&ke.col===z),Te=hu&&(hu.from.row===U&&hu.from.col===z||hu.to.row===U&&hu.to.col===z),Se=F&&F.toUpperCase()==="K"&&Zb(X,Gi(F));return m.jsxs("div",{className:`square ${ee?"selected":""} ${le?"legal-move":""} ${Te?"last-move":""} ${Se?"square-in-check":""}`,onClick:()=>PB(U,z),onTouchStart:ke=>Jne(U,z,ke),onTouchMove:Zne,children:[F&&m.jsx("div",{className:"piece",style:{backgroundImage:p2[F]?`url(${p2[F]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),le&&m.jsx("div",{className:"legal-move-indicator"})]},`${U}-${z}`)},Gne=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",np,"promotionMove:",rl),!np||!rl)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",np,"promotionMove:",rl),null;const U=de==="blue"?["q","r","b","n"]:["Q","R","B","N"];return m.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:m.jsxs("div",{className:"promotion-content",children:[m.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),m.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:U.map(z=>m.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",z),OB(rl.from,rl.to,z),rp(!1),sp(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:m.jsx("img",{src:p2[z],alt:z,style:{width:"40px",height:"40px"}})},z))})]})})},qne=()=>m.jsxs("div",{className:"piece-gallery",children:[m.jsx("h3",{children:"Chess Pieces"}),m.jsx("div",{className:"piece-gallery-grid",children:Vze.map(U=>m.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Gm(tp===U.key?null:U.key)},children:[m.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),m.jsx("div",{className:"piece-gallery-name",children:U.name}),tp===U.key&&m.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))})]}),DB=()=>m.jsxs("div",{className:"chess-multiplayer-lobby",children:[m.jsx("h2",{children:"PvP Chess Lawby"}),s?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"status-bar",children:["Connected: ",fR(r)]}),m.jsxs("div",{className:"lobby-content",children:[m.jsxs("div",{className:"open-games",children:[m.jsx("h3",{children:"Open Games"}),m.jsxs("div",{className:"games-list",children:[Wm.map(U=>m.jsxs("div",{className:"game-item",children:[m.jsxs("div",{className:"game-info",children:[m.jsx("div",{className:"game-id",children:U.game_title||"Untitled Game"}),m.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(U.bet_amount)/Math.pow(10,vs[U.bet_token||"DMT"].decimals)).toFixed(2)," ",U.bet_token||"DMT"]}),m.jsxs("div",{className:"title",children:["Created by: ",fR(U.blue_player)]})]}),m.jsx("button",{className:"join-btn",onClick:()=>Ie(U.invite_code),children:"Join Game"})]},U.invite_code)),Wm.length===0&&m.jsx("div",{className:"no-games",children:"No open games available"})]})]}),m.jsxs("div",{className:"actions",children:[m.jsx("button",{className:"create-btn",onClick:()=>ji(!0),disabled:Md||Wr,children:"Create New Game"}),m.jsx("button",{onClick:K,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"}),m.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Back to Chess Home"})]}),Md&&m.jsxs("div",{className:"create-form",children:[m.jsx("h3",{children:"Create New Game"}),m.jsx(Ene,{selectedToken:Mr,onTokenSelect:Qs,wagerAmount:Wi,onWagerChange:Ld,disabled:Wr}),m.jsxs("div",{className:"form-actions",children:[m.jsx("button",{className:"create-confirm-btn",onClick:ne,disabled:Wi<=0||Wr,children:Wr?"Creating...":"Create Game"}),m.jsx("button",{className:"cancel-btn",onClick:()=>{ji(!1),en(!1)},children:"Cancel"})]})]})]})]}):m.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),Vne=()=>m.jsxs("div",{className:"chess-multiplayer-waiting",children:[m.jsx("h2",{children:"Waiting for Opponent"}),m.jsxs("div",{className:"game-code",children:["Invite Code: ",m.jsx("strong",{children:te})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("p",{children:["Wager: ",oc," ",Mr]}),m.jsx("p",{children:"Share this invite code with your opponent"})]}),m.jsxs("div",{className:"waiting-actions",children:[m.jsx("button",{onClick:Mt,disabled:W||se,className:"refund-game-btn",children:W||se?" Refunding...":" Refund Game"}),m.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),Kne=()=>m.jsxs("div",{className:"chess-game",children:[m.jsxs("div",{className:"chess-header",children:[m.jsx("h2",{children:" Multiplayer Chess"}),m.jsxs("div",{className:"chess-controls",children:[e&&m.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),m.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),m.jsxs("div",{className:"game-info",children:[m.jsxs("div",{className:"game-status-section",children:[m.jsx("span",{className:`status ${Yn.includes("Check")?"check-status":""}`,children:Yn}),m.jsxs("span",{className:`current-player ${de==="red"?"red-turn":"blue-turn"}`,children:["Current: ",de==="red"?" Red":" Blue"]})]}),m.jsxs("div",{className:"game-details-section",children:[m.jsxs("span",{className:"wager-display",children:[" ",oc," ",Mr]}),ko&&m.jsxs("span",{className:"opponent-info",children:["vs ",fR(ko)]}),It===xn.ACTIVE&&ac>0&&m.jsxs("span",{className:"timeout-countdown",style:{color:ac<300?"#ff0000":"#00ff00",fontWeight:"bold",textShadow:"0 0 6px currentColor"},children:[" ",Math.floor(ac/60),":",(ac%60).toString().padStart(2,"0")]})]}),It===xn.FINISHED&&m.jsxs("div",{className:"game-finished-actions",children:[m.jsx("button",{onClick:ln,disabled:g,className:"claim-winnings-btn",children:g?" Claiming...":" Claim Winnings"}),m.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:" Back to Chess Home"})]})]}),m.jsxs("div",{className:"game-stable-layout",children:[m.jsxs("div",{className:"left-sidebar",children:[m.jsxs("div",{className:"sidebar-tabs",children:[m.jsx("button",{className:`tab-button ${De==="moves"?"active":""}`,onClick:()=>wt("moves"),children:" Moves"}),m.jsx("button",{className:`tab-button ${De==="leaderboard"?"active":""}`,onClick:()=>wt("leaderboard"),children:" Leaderboard"})]}),De==="moves"&&m.jsxs("div",{className:"move-history",children:[m.jsx("h4",{children:"Move History"}),m.jsx("div",{className:"moves",children:ut.slice().reverse().map((U,z)=>m.jsx("div",{className:"move",children:U},ut.length-1-z))})]}),De==="leaderboard"&&m.jsxs("div",{className:"leaderboard",children:[m.jsx("h4",{children:"Leaderboard"}),m.jsx("div",{className:"leaderboard-table",children:m.jsxs("table",{children:[m.jsx("thead",{children:m.jsxs("tr",{children:[m.jsx("th",{children:"#"}),m.jsx("th",{children:"Player"}),m.jsx("th",{children:"W"}),m.jsx("th",{children:"L"}),m.jsx("th",{children:"D"}),m.jsx("th",{children:"Pts"})]})}),m.jsx("tbody",{children:Yb.map((U,z)=>m.jsxs("tr",{children:[m.jsx("td",{children:z+1}),m.jsx("td",{children:U.username}),m.jsx("td",{children:U.wins}),m.jsx("td",{children:U.losses}),m.jsx("td",{children:U.draws}),m.jsx("td",{children:U.points})]},U.username))})]})})]})]}),m.jsxs("div",{className:"center-area",children:[m.jsxs("div",{className:"chessboard-container",children:[m.jsx("div",{className:"chessboard",children:Array.from({length:8},(U,z)=>m.jsx("div",{className:"board-row",children:Array.from({length:8},(F,ee)=>Hne(z,ee))},z))}),Hi&&Hi.show&&m.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${Hi.row*12.5}%`,left:`${Hi.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:m.jsx("div",{className:"explosion-effect",children:""})})]}),m.jsxs("div",{className:"game-controls",children:[m.jsx("div",{className:"control-section",children:Yn.includes("corrupted")&&m.jsx("button",{className:"reset-game-btn",onClick:jne,children:" Reset Game"})}),m.jsx("div",{className:"settings-section",children:m.jsxs("div",{className:"sound-controls",children:[m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"sound-toggle",checked:Js,onChange:U=>zi(U.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Sound Effects"})]}),m.jsxs("label",{className:"control-label",children:[m.jsx("input",{type:"checkbox",id:"victory-toggle",checked:pt,onChange:U=>Ct(U.target.checked),className:"control-checkbox"}),m.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),f&&m.jsx("button",{className:"claim-winnings-btn",onClick:ln,disabled:g||O||q,children:g||O||q?" Claiming...":" Claim Winnings"})]})]}),m.jsx("div",{className:"right-sidebar"})]}),du&&m.jsx("div",{className:"piece-gallery-panel",children:qne()}),Gne(),pt&&m.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[m.jsx("div",{className:"balloons-container"}),m.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),m.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[m.jsx("button",{onClick:()=>Lt(xn.LOBBY),children:"Back to Lobby"}),m.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),Yne=()=>null;P.useEffect(()=>{qm(),K(),Wne();const U=setInterval(K,3e4);return()=>{clearInterval(U),cc.current&&cc.current(),wa.current&&clearTimeout(wa.current)}},[]),console.log("[RENDER] Current game mode:",It,"Game ID:",te);const Qne=(()=>{switch(It){case xn.LOBBY:return DB();case xn.WAITING:return Vne();case xn.ACTIVE:case xn.FINISHED:return Kne();default:return DB()}})(),Jne=(U,z,F)=>{F.preventDefault(),PB(U,z)},Zne=U=>{U.preventDefault()};return m.jsxs(m.Fragment,{children:[Qne,Yne()]})},AW=()=>{const[t,e]=P.useState("singleplayer"),n=()=>{window.location.href="/"};return m.jsx("div",{className:"chess-page",children:m.jsx("div",{className:"chess-content",children:t==="singleplayer"?m.jsx(Gze,{onClose:n}):m.jsx(Qze,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},Jze=Symbol(),SW=Object.getPrototypeOf,BM=new WeakMap,Zze=t=>t&&(BM.has(t)?BM.get(t):SW(t)===Object.prototype||SW(t)===Array.prototype),Xze=t=>Zze(t)&&t[Jze]||null,xW=(t,e=!0)=>{BM.set(t,e)},QI={},CB=t=>typeof t=="object"&&t!==null,eHe=t=>CB(t)&&!W1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),Cne=(t,e)=>{const n=$M.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return xW(r,!0),$M.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(W1.has(i))xW(i,!1);else if(Wf.has(i)){const[c,l]=Wf.get(i);a.value=Cne(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},tHe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(IW(l,o)||x_.has(o)&&IW(l,x_.get(o))))return!0;n(i),CB(o)&&(o=Xze(o)||o);const u=!Wf.has(o)&&rHe(o)?ur(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Wf=new WeakMap,W1=new WeakSet,$M=new WeakMap,rE=[1,1],x_=new WeakMap;let IW=Object.is,nHe=(t,e)=>new Proxy(t,e),rHe=eHe,sHe=Cne,iHe=tHe;function ur(t={}){if(!CB(t))throw new Error("object required");const e=x_.get(t);if(e)return e;let n=rE[0];const r=new Set,s=(w,y=++rE[0])=>{n!==y&&(n=y,r.forEach(b=>b(w,y)))};let i=rE[1];const o=(w=++rE[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([y])=>{const b=y[1](w);b>n&&(n=b)})),n),a=w=>(y,b)=>{const v=[...y];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,y)=>{const b=!W1.has(y)&&Wf.get(y);if(b){if((QI?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var y;const b=c.get(w);b&&(c.delete(w),(y=b[1])==null||y.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((QI?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=b[2](a(A));c.set(A,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=iHe(()=>h,l,u,s),p=nHe(t,f);x_.set(t,p);const g=[t,o,d];return Wf.set(p,g),Reflect.ownKeys(t).forEach(w=>{const y=Object.getOwnPropertyDescriptor(t,w);"value"in y&&y.writable&&(p[w]=t[w])}),h=!1,p}function Ro(t,e,n){const r=Wf.get(t);(QI?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function I_(t){const e=Wf.get(t);(QI?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return sHe(n,r())}function pb(t){return W1.add(t),t}function oHe(){return{proxyStateMap:Wf,refSet:W1,snapCache:$M,versionHolder:rE,proxyCache:x_}}function Fi(t,e,n,r){let s=t[e];return Ro(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:aHe,snapCache:cHe}=oHe(),lS=t=>aHe.has(t);function lHe(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=cHe.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return lS(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!lS(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!lS(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!lS(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=ur(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var NW={};const pe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof NW<"u"?NW.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},JI={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=pe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},uHe={bigNumber(t){return t?new $l(t):new $l(0)},multiply(t,e){if(t===void 0||e===void 0)return new $l(0);const n=new $l(t),r=new $l(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},dHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],hHe=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],fHe=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],pHe={getERC20Abi:t=>pe.USDT_CONTRACT_ADDRESSES.includes(t)?fHe:dHe,getSwapAbi:()=>hHe},ef={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Rt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function g2(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const _t={setItem(t,e){sE()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(sE())return localStorage.getItem(t)||void 0},removeItem(t){sE()&&localStorage.removeItem(t)},clear(){sE()&&localStorage.clear()}};function sE(){return typeof window<"u"&&typeof localStorage<"u"}function ZI(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const Oi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[pe.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},et={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=et.getActiveNamespace(),e=et.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{_t.setItem(Rt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=_t.getItem(Rt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{_t.removeItem(Rt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{_t.setItem(Rt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{_t.setItem(Rt.ACTIVE_CAIP_NETWORK_ID,t),et.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return _t.getItem(Rt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{_t.removeItem(Rt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=g2(t);_t.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=et.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),_t.setItem(Rt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=_t.getItem(Rt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=g2(t);_t.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return _t.getItem(Rt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=g2(t);return _t.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{_t.setItem(Rt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return _t.getItem(Rt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{_t.removeItem(Rt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return _t.getItem(Rt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=_t.getItem(Rt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{_t.setItem(Rt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return _t.getItem(Rt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=_t.getItem(Rt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));_t.setItem(Rt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=et.getConnectedNamespaces();e.includes(t)||(e.push(t),et.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=et.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),et.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return _t.getItem(Rt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{_t.setItem(Rt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{_t.removeItem(Rt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=_t.getItem(Rt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=et.getBalanceCache();_t.setItem(Rt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=et.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=et.getBalanceCache();e[t.caipAddress]=t,_t.setItem(Rt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=_t.getItem(Rt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=et.getBalanceCache();_t.setItem(Rt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=et.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),et.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=et.getNativeBalanceCache();e[t.caipAddress]=t,_t.setItem(Rt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=_t.getItem(Rt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=et.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;et.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=et.getEnsCache();e[t.address]=t,_t.setItem(Rt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=et.getEnsCache();_t.setItem(Rt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=_t.getItem(Rt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=et.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;et.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=et.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},_t.setItem(Rt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=et.getIdentityCache();_t.setItem(Rt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{_t.removeItem(Rt.PORTFOLIO_CACHE),_t.removeItem(Rt.NATIVE_BALANCE_CACHE),_t.removeItem(Rt.ENS_CACHE),_t.removeItem(Rt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{_t.setItem(Rt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=_t.getItem(Rt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=et.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===pe.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};_t.setItem(Rt.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=_t.getItem(Rt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=et.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),_t.setItem(Rt.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=_t.getItem(Rt.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),_t.setItem(Rt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=et.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),_t.setItem(Rt.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(et.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},ft={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ft.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Oi.TEN_SEC_MS:!0},isAllowedRetry(t,e=Oi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ft.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Oi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ft.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ft.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?et.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ft.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return pe.W3M_API_URL},getBlockchainApiUrl(){return pe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return pe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Oi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in pe.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Dv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class z1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Dv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Dv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Dv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Dv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Dv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const gHe={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Oi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ft.isTelegram()){if(ft.isIos())return t.filter(e=>e!=="google");if(ft.isMac())return t.filter(e=>e!=="x");if(ft.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},yt=ur({features:Oi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Oi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),kt={state:yt,subscribeKey(t,e){return Fi(yt,t,e)},setOptions(t){Object.assign(yt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...yt.remoteFeatures,...t};yt.remoteFeatures=e,(n=yt.remoteFeatures)!=null&&n.socials&&(yt.remoteFeatures.socials=gHe.filterSocialsByPlatform(yt.remoteFeatures.socials))},setFeatures(t){if(!t)return;yt.features||(yt.features=Oi.DEFAULT_FEATURES);const e={...yt.features,...t};yt.features=e},setProjectId(t){yt.projectId=t},setCustomRpcUrls(t){yt.customRpcUrls=t},setAllWallets(t){yt.allWallets=t},setIncludeWalletIds(t){yt.includeWalletIds=t},setExcludeWalletIds(t){yt.excludeWalletIds=t},setFeaturedWalletIds(t){yt.featuredWalletIds=t},setTokens(t){yt.tokens=t},setTermsConditionsUrl(t){yt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){yt.privacyPolicyUrl=t},setCustomWallets(t){yt.customWallets=t},setIsSiweEnabled(t){yt.isSiweEnabled=t},setIsUniversalProvider(t){yt.isUniversalProvider=t},setSdkVersion(t){yt.sdkVersion=t},setMetadata(t){yt.metadata=t},setDisableAppend(t){yt.disableAppend=t},setEIP6963Enabled(t){yt.enableEIP6963=t},setDebug(t){yt.debug=t},setEnableWalletConnect(t){yt.enableWalletConnect=t},setEnableWalletGuide(t){yt.enableWalletGuide=t},setEnableAuthLogger(t){yt.enableAuthLogger=t},setEnableWallets(t){yt.enableWallets=t},setPreferUniversalLinks(t){yt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(Oi.SIWX_DEFAULTS))t[e]??(t[e]=n);yt.siwx=t},setConnectMethodsOrder(t){yt.features={...yt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){yt.features={...yt.features,walletFeaturesOrder:t}},setSocialsOrder(t){yt.remoteFeatures={...yt.remoteFeatures,socials:t}},setCollapseWallets(t){yt.features={...yt.features,collapseWallets:t}},setEnableEmbedded(t){yt.enableEmbedded=t},setAllowUnsupportedChain(t){yt.allowUnsupportedChain=t},setManualWCControl(t){yt.manualWCControl=t},setEnableNetworkSwitch(t){yt.enableNetworkSwitch=t},setEnableReconnect(t){yt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(yt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){yt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return yt.universalProviderConfigOverride},getSnapshot(){return I_(yt)}},mHe=Object.freeze({enabled:!0,events:[]}),yHe=new z1({baseUrl:ft.getAnalyticsUrl(),clientId:null}),wHe=5,bHe=60*1e3,rh=ur({...mHe}),vHe={state:rh,subscribeKey(t,e){return Fi(rh,t,e)},async sendError(t,e){if(!rh.enabled)return;const n=Date.now();if(rh.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<bHe}).length>=wHe)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};rh.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=kt.state;await yHe.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ft.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){rh.enabled=!0},disable(){rh.enabled=!1},clearEvents(){rh.events=[]}};class gb extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,gb.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,gb):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function TW(t,e){const n=t instanceof gb?t:new gb(t instanceof Error?t.message:String(t),e,t);throw vHe.sendError(n,n.category),n}function ic(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return TW(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return TW(a,e)}},n[r]=i}else n[r]=s}),n}var mb={};const EHe="https://secure.walletconnect.org/sdk",CHe=(typeof process<"u"&&typeof mb<"u"?mb.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||EHe,_He=(typeof process<"u"&&typeof mb<"u"?mb.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",AHe=(typeof process<"u"&&typeof mb<"u"?mb.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Je={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Hs={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},Ml={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},SHe={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===Ml.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${Ml.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===Ml.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${Ml.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===pe.CHAIN.SOLANA&&t===Ml.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${Ml.COINBASE.url}/dapp?cb_url=${r}`)}},$o=ur({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),xHe={state:$o,subscribeNetworkImages(t){return Ro($o.networkImages,()=>t($o.networkImages))},subscribeKey(t,e){return Fi($o,t,e)},subscribe(t){return Ro($o,()=>t($o))},setWalletImage(t,e){$o.walletImages[t]=e},setNetworkImage(t,e){$o.networkImages[t]=e},setChainImage(t,e){$o.chainImages[t]=e},setConnectorImage(t,e){$o.connectorImages={...$o.connectorImages,[t]:e}},setTokenImage(t,e){$o.tokenImages[t]=e},setCurrencyImage(t,e){$o.currencyImages[t]=e}},kc=ic(xHe),IHe={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},m2=ur({networkImagePromises:{}}),NHe={async fetchWalletImage(t){if(t)return await At._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(m2.networkImagePromises[t]||(m2.networkImagePromises[t]=At._fetchNetworkImage(t)),await m2.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return kc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return kc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return kc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return kc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return kc.state.connectorImages[t.imageId]},getChainImage(t){return kc.state.networkImages[IHe[t]]}},sh=ur({message:"",variant:"info",open:!1}),THe={state:sh,subscribeKey(t,e){return Fi(sh,t,e)},open(t,e){const{debug:n}=kt.state,{shortMessage:r,longMessage:s}=t;n&&(sh.message=r,sh.variant=e,sh.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){sh.open=!1,sh.message="",sh.variant="info"}},Sp=ic(THe),RHe=ft.getAnalyticsUrl(),PHe=new z1({baseUrl:RHe,clientId:null}),OHe=["MODAL_CREATED"],Su=ur({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),vr={state:Su,subscribe(t){return Ro(Su,()=>t(Su))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=kt.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=An.state.address;if(OHe.includes(t.data.event)||typeof window>"u")return;await PHe.post({path:"/e",params:vr.getSdkProperties(),body:{eventId:ft.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Su.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===pe.HTTP_STATUS_CODES.FORBIDDEN&&!Su.reportedErrors.FORBIDDEN&&(Sp.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${sE()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Su.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Su.timestamp=Date.now(),Su.data=t,(e=kt.state.features)!=null&&e.analytics&&vr._sendAnalyticsEvent(Su)}},kHe=ft.getApiUrl(),Xi=new z1({baseUrl:kHe,clientId:null}),DHe=40,RW=4,MHe=20,$t=ur({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),At={state:$t,subscribeKey(t,e){return Fi($t,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=kt.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return kt.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${Xi.baseUrl}/getWalletImage/${t}`,n=await Xi.getBlob({path:e,params:At._getSdkProperties()});kc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${Xi.baseUrl}/public/getAssetImage/${t}`,n=await Xi.getBlob({path:e,params:At._getSdkProperties()});kc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${Xi.baseUrl}/public/getAssetImage/${t}`,n=await Xi.getBlob({path:e,params:At._getSdkProperties()});kc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${Xi.baseUrl}/public/getCurrencyImage/${t}`,n=await Xi.getBlob({path:e,params:At._getSdkProperties()});kc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${Xi.baseUrl}/public/getTokenImage/${t}`,n=await Xi.getBlob({path:e,params:At._getSdkProperties()});kc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ft.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===Ml.COINBASE.id?!0:J.state.activeChain==="solana"&&(n.id===Ml.SOLFLARE.id||n.id===Ml.PHANTOM.id)):t},async fetchProjectConfig(){return(await Xi.get({path:"/appkit/v1/config",params:At._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await Xi.get({path:"/projects/v1/origins",params:At._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===pe.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=pe.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=J.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!NHe.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>At._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=it.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>At._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>At._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>At._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];At._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(Ml).map(o=>o.id));const r=await Xi.get({path:"/getWallets",params:{...At._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:At._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=kt.state;if(t!=null&&t.length){const e={...At._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??RW,include:t},{data:n}=await At.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>At._fetchWalletImage(i))),$t.featured=r,$t.allFeatured=r}},async fetchRecommendedWallets(){try{$t.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=kt.state,r=[...e??[],...n??[]].filter(Boolean),s=J.getRequestedCaipNetworkIds().join(","),i={page:1,entries:RW,include:t,exclude:r,chains:s},{data:o,count:a}=await At.fetchWallets(i),c=et.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>At._fetchWalletImage(d))),$t.recommended=o,$t.allRecommended=o,$t.count=a??0}catch{}finally{$t.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=kt.state,s=J.getRequestedCaipNetworkIds().join(","),i=[...$t.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:DHe,include:e,exclude:i,chains:s},{data:a,count:c}=await At.fetchWallets(o),l=a.slice(0,MHe).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>At._fetchWalletImage(u))),$t.wallets=ft.uniqueBy([...$t.wallets,...At._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),$t.count=c>$t.count?c:$t.count,$t.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await At.fetchWallets(e);n&&n.forEach(r=>{$t.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=kt.state,s=J.getRequestedCaipNetworkIds().join(",");$t.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await At.fetchWallets(i);vr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>At._fetchWalletImage(c)),ft.wait(300)]),$t.search=At._filterOutExtensions(o)},initPromise(t,e){const n=$t.promises[t];return n||($t.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&At.initPromise("connectorImages",At.fetchConnectorImages),e&&At.initPromise("featuredWallets",At.fetchFeaturedWallets),n&&At.initPromise("recommendedWallets",At.fetchRecommendedWallets),r&&At.initPromise("networkImages",At.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=kt.state.features)!=null&&t.analytics&&At.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await Xi.get({path:"/getAnalyticsConfig",params:At._getSdkProperties()});kt.setFeatures({analytics:t})}catch{kt.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){$t.featured=$t.allFeatured,$t.recommended=$t.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");$t.featured=$t.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.recommended=$t.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.filteredWallets=$t.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){$t.filteredWallets=[]},setFilterByNamespace(t){if(!t){$t.featured=$t.allFeatured,$t.recommended=$t.allRecommended;return}const e=J.getRequestedCaipNetworkIds().join(",");$t.featured=$t.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.recommended=$t.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),$t.filteredWallets=$t.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Bn=ur({view:"Connect",history:["Connect"],transactionStack:[]}),LHe={state:Bn,subscribeKey(t,e){return Fi(Bn,t,e)},pushTransactionStack(t){Bn.transactionStack.push(t)},popTransactionStack(t){const e=Bn.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Ot.goBack();break;case"cancel":s==null||s(),Ot.goBack();break}},push(t,e){t!==Bn.view&&(Bn.view=t,Bn.history.push(t),Bn.data=e)},reset(t,e){Bn.view=t,Bn.history=[t],Bn.data=e},replace(t,e){Bn.history.at(-1)===t||(Bn.view=t,Bn.history[Bn.history.length-1]=t,Bn.data=e)},goBack(){var r;const t=J.state.activeCaipAddress,e=Ot.state.view==="ConnectingFarcaster",n=!t&&e;if(Bn.history.length>1){Bn.history.pop();const[s]=Bn.history.slice(-1);s&&(t&&s==="Connect"?Bn.view="Account":Bn.view=s)}else tr.close();(r=Bn.data)!=null&&r.wallet&&(Bn.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){An.setFarcasterUrl(void 0,J.state.activeChain);const a=it.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=I_(kt.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Bn.history.length>1){Bn.history=Bn.history.slice(0,t+1);const[e]=Bn.history.slice(-1);e&&(Bn.view=e)}},goBackOrCloseModal(){Ot.state.history.length>1?Ot.goBack():tr.close()}},Ot=ic(LHe),xu=ur({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),FM={state:xu,subscribe(t){return Ro(xu,()=>t(xu))},setThemeMode(t){xu.themeMode=t;try{const e=it.getAuthConnector();if(e){const n=FM.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:ZI(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){xu.themeVariables={...xu.themeVariables,...t};try{const e=it.getAuthConnector();if(e){const n=FM.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:ZI(xu.themeVariables,xu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return I_(xu)}},uS=ic(FM),_ne={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},bn=ur({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{..._ne},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),UHe={state:bn,subscribe(t){return Ro(bn,()=>{t(bn)})},subscribeKey(t,e){return Fi(bn,t,e)},initialize(t){t.forEach(e=>{const n=et.getConnectedConnectorId(e);n&&it.setConnectorId(n,e)})},setActiveConnector(t){t&&(bn.activeConnector=pb(t))},setConnectors(t){t.filter(s=>!bn.allConnectors.some(i=>i.id===s.id&&it.getConnectorName(i.name)===it.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&bn.allConnectors.push(pb(s))});const n=it.getEnabledNamespaces(),r=it.getEnabledConnectors(n);bn.connectors=it.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(bn.filterByNamespaceMap).forEach(e=>{bn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{bn.filterByNamespaceMap[e]=!0}),it.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){bn.filterByNamespaceMap[t]=e,it.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=it.getEnabledNamespaces(),e=it.getEnabledConnectors(t),n=it.areAllNamespacesEnabled();bn.connectors=it.mergeMultiChainConnectors(e),n?At.clearFilterByNamespaces():At.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(bn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return bn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(bn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=it.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===pe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=it.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===pe.CONNECTOR_ID.AUTH){const s=t,i=I_(kt.state),o=uS.getSnapshot().themeMode,a=uS.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ZI(a,o)}),it.setConnectors([t])}else it.setConnectors([t])},getAuthConnector(t){var r;const e=t||J.state.activeChain,n=bn.connectors.find(s=>s.id===pe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return bn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return bn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return bn.allConnectors.filter(r=>r.chain===J.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=I_(kt.state),r=uS.getSnapshot().themeMode,s=uS.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ZI(s,r)})},getConnectorsByNamespace(t){const e=bn.allConnectors.filter(n=>n.chain===t);return it.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&cu(t)===Hs.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=it.getConnector(t.id,t.rdns);SHe.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,J.state.activeChain),e?Ot.push("ConnectingExternal",{connector:e}):Ot.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?it.getConnectorsByNamespace(t):it.mergeMultiChainConnectors(bn.allConnectors)},setFilterByNamespace(t){bn.filterByNamespace=t,bn.connectors=it.getConnectors(t),At.setFilterByNamespace(t)},setConnectorId(t,e){t&&(bn.activeConnectorIds={...bn.activeConnectorIds,[e]:t},et.setConnectedConnectorId(e,t))},removeConnectorId(t){bn.activeConnectorIds={...bn.activeConnectorIds,[t]:void 0},et.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return bn.activeConnectorIds[t]},isConnected(t){return t?!!bn.activeConnectorIds[t]:Object.values(bn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){bn.activeConnectorIds={..._ne}}},it=ic(UHe),BHe=1e3,Mv={checkNamespaceConnectorId(t,e){return it.getConnectorId(t)===e},isSocialProvider(t){return Oi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&it.setActiveConnector(e),s==null||s(ft.isMobile()&&t),r){const l=tr.subscribeKey("open",u=>{u||(Ot.state.view!==r&&Ot.replace(r),l(),a(new Error("Modal closed")))})}const c=J.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&tr.close(),c(),o(ef.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=J.subscribeKey("activeCaipAddress",s=>{s&&(tr.close(),r(),e(ef.parseCaipAddress(s)))});st.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=An.state.socialWindow,i=An.state.socialProvider,o=!1,a=null;const c=J.subscribeKey("activeCaipAddress",l=>{l&&(e&&tr.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===pe.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=it.getAuthConnector();if(g&&!o){s&&(s.close(),An.setSocialWindow(void 0,J.state.activeChain),s=An.state.socialWindow),o=!0;const w=f.data.resultUri;i&&vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const y=J.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:y==null?void 0:y.caipNetworkId}),i){et.setConnectedSocialProvider(i),await st.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=J.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(ef.parseCaipAddress(b)),vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(An.setSocialProvider(t,J.state.activeChain),i=An.state.socialProvider,vr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=tr.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=it.getAuthConnector();if(p&&!An.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();An.setFarcasterUrl(g,J.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=it.getAuthConnector();a=ft.returnOpenHref(`${pe.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){An.setSocialWindow(a,J.state.activeChain),s=An.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=tr.subscribeKey("open",c=>{c||(Ot.state.view!==e&&Ot.replace(e),a(),i(new Error("Modal closed")))})}const o=J.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&tr.close(),o(),s(ef.parseCaipAddress(a)))})})},async updateEmail(){const t=et.getConnectedConnectorId(J.state.activeChain),e=it.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==pe.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Ot.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(tr.close(),clearInterval(i),o(),r({email:a}))},BHe),o=tr.subscribeKey("open",a=>{a||(Ot.state.view!=="Connect"&&Ot.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return J.checkIfSmartAccountEnabled()&&cu(t)===Hs.ACCOUNT_TYPES.EOA}};function Ane(){var r,s;const t=((r=J.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=J.state.activeCaipNetwork)==null?void 0:s.id)||1,n=Oi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function cu(t){var n;return(n=J.getAccountData(t))==null?void 0:n.preferredAccountType}const Sne={getConnectionStatus(t,e){const n=it.state.activeConnectorIds[e],r=st.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=kt.state.remoteFeatures)!=null&&a.multiWallet),n=it.state.activeConnectorIds[t],r=st.getConnections(t),i=(st.state.recentConnections.get(t)??[]).filter(c=>it.getConnectorById(c.connectorId)),o=Sne.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},xp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Yr=ur({...xp}),$He={state:Yr,subscribeKey(t,e){return Fi(Yr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ft.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Yr.message=xp.message,Yr.variant=xp.variant,Yr.svg=xp.svg,Yr.open=xp.open,Yr.autoClose=xp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=xp.autoClose}){Yr.open?(Yr.open=!1,setTimeout(()=>{Yr.message=t,Yr.variant=n,Yr.svg=e,Yr.open=!0,Yr.autoClose=r},150)):(Yr.message=t,Yr.variant=n,Yr.svg=e,Yr.open=!0,Yr.autoClose=r)}},tf=$He,Zn=ur({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),FHe={state:Zn,subscribe(t){return Ro(Zn,()=>t(Zn))},setLastNetworkInView(t){Zn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Zn.loading=!0;try{const r=await Tt.fetchTransactions({account:t,cursor:Zn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=iE.filterSpamTransactions(r.data),i=iE.filterByConnectedChain(s),o=[...Zn.transactions,...i];Zn.loading=!1,e==="coinbase"?Zn.coinbaseTransactions=iE.groupTransactionsByYearAndMonth(Zn.coinbaseTransactions,r.data):(Zn.transactions=o,Zn.transactionsByYear=iE.groupTransactionsByYearAndMonth(Zn.transactionsByYear,i)),Zn.empty=o.length===0,Zn.next=r.next?r.next:void 0}catch{const s=J.state.activeChain;vr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:kt.state.projectId,cursor:Zn.next,isSmartAccount:cu(s)===Hs.ACCOUNT_TYPES.SMART_ACCOUNT}}),tf.showError("Failed to fetch transactions"),Zn.loading=!1,Zn.empty=!0,Zn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Zn.next=void 0},resetTransactions(){Zn.transactions=[],Zn.transactionsByYear={},Zn.lastNetworkInView=void 0,Zn.loading=!1,Zn.empty=!1,Zn.next=void 0}},iE=ic(FHe,"API_ERROR"),cn=ur({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let mp;const jHe={state:cn,subscribe(t){return Ro(cn,()=>t(cn))},subscribeKey(t,e){return Fi(cn,t,e)},_getClient(){return cn._client},setClient(t){cn._client=pb(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);st.syncStorageConnections(e)},syncStorageConnections(t){const e=et.getConnections(),n=t??Array.from(J.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(cn.recentConnections);i.set(r,s),cn.recentConnections=i}},getConnections(t){return t?cn.connections.get(t)??[]:[]},hasAnyConnection(t){const e=st.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(ft.isTelegram()||ft.isSafari()&&ft.isIos()){if(mp){await mp,mp=void 0;return}if(!ft.isPairingExpired(cn==null?void 0:cn.wcPairingExpiry)){const s=cn.wcUri;cn.wcUri=s;return}mp=(e=(t=st._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),st.state.status="connecting",await mp,mp=void 0,cn.wcPairingExpiry=void 0,st.state.status="connected"}else await((r=(n=st._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=st._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&J.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=st._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||J.state.activeChain;e&&it.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;tr.setLoading(!0,J.state.activeChain);const n=it.getAuthConnector();n&&(An.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),et.setPreferredAccountTypes(Object.entries(J.state.chains).reduce((s,[i,o])=>{const a=i,c=cu(a);return c!==void 0&&(s[a]=c),s},{})),await st.reconnectExternal(n),tr.setLoading(!1,J.state.activeChain),vr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=st._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=st._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=st._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=st._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=st._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=st._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=st._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=st._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=st._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=st._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=st._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=st._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){cn.wcUri=void 0,cn.wcPairingExpiry=void 0,cn.wcLinking=void 0,cn.recentWallet=void 0,cn.status="disconnected",iE.resetTransactions(),et.deleteWalletConnectDeepLink()},resetUri(){cn.wcUri=void 0,cn.wcPairingExpiry=void 0,mp=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=st.state;t&&et.setWalletConnectDeepLink(t),e&&et.setAppKitRecent(e),vr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Ot.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){cn.wcBasic=t},setUri(t){cn.wcUri=t,cn.wcPairingExpiry=ft.getPairingExpiry()},setWcLinking(t){cn.wcLinking=t},setWcError(t){cn.wcError=t,cn.buffering=!1},setRecentWallet(t){cn.recentWallet=t},setBuffering(t){cn.buffering=t},setStatus(t){cn.status=t},setIsSwitchingConnection(t){cn.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=st._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new gb("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(cn.connections);n.set(e,t),cn.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=An.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&Mv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await st.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=it.getConnectorById(t.connectorId),s=t.connectorId===pe.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await st.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await st.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=it.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===pe.CONNECTOR_ID.AUTH,a=t.connectorId===pe.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&Mv.isSocialProvider(i)){const{address:d}=await Mv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){tr.open({view:"ConnectingFarcaster"})},onConnect(){Ot.replace("ProfileWallets")}});c=d}else{const{address:d}=await Mv.connectEmail({closeModalOnConnect:r,onOpen(){tr.open({view:"EmailLogin"})},onConnect(){Ot.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await Mv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){tr.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Ot.replace("ProfileWallets")}});c=d}else{const d=await st.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await st.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=An.getCaipAddress(n);if(o){const{address:c}=ef.parseCaipAddress(o);i=c}const a=Sne.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await st.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await st.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},st=ic(jHe),xy=ur({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),S0={state:xy,subscribe(t){return Ro(xy,()=>t(xy))},subscribeOpen(t){return Fi(xy,"open",t)},set(t){Object.assign(xy,{...xy,...t})}},WHe={async getTokenList(){var r;const t=J.state.activeCaipNetwork,e=await Tt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=J.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(st==null?void 0:st.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await Tt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await Tt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=st.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await _B.getMyTokensWithBalance(t);return An.setTokenBalance(e,J.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:Ane(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},kn=ur({tokenBalances:[],loading:!1}),zHe={state:kn,subscribe(t){return Ro(kn,()=>t(kn))},subscribeKey(t,e){return Fi(kn,t,e)},setToken(t){t&&(kn.token=pb(t))},setTokenAmount(t){kn.sendTokenAmount=t},setReceiverAddress(t){kn.receiverAddress=t},setReceiverProfileImageUrl(t){kn.receiverProfileImageUrl=t},setReceiverProfileName(t){kn.receiverProfileName=t},setNetworkBalanceInUsd(t){kn.networkBalanceInUSD=t},setLoading(t){kn.loading=t},async sendToken(){var t;try{switch(In.setLoading(!0),(t=J.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await In.sendEvmToken();return;case"solana":await In.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{In.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=J.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=cu(t);if(!In.state.sendTokenAmount||!In.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!In.state.token)throw new Error("A token is required");(n=In.state.token)!=null&&n.address?(vr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:In.state.token.address,amount:In.state.sendTokenAmount,network:((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await In.sendERC20Token({receiverAddress:In.state.receiverAddress,tokenAddress:In.state.token.address,sendTokenAmount:In.state.sendTokenAmount,decimals:In.state.token.quantity.decimals})):(vr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:In.state.token.symbol||"",amount:In.state.sendTokenAmount,network:((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await In.sendNativeToken({receiverAddress:In.state.receiverAddress,sendTokenAmount:In.state.sendTokenAmount,decimals:In.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;kn.loading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?ft.getPlainAddress(r):void 0;if(kn.lastRetry&&!ft.isAllowedRetry(kn.lastRetry,30*Oi.ONE_SEC_MS))return kn.loading=!1,[];try{if(s&&e&&n){const a=await _B.getMyTokensWithBalance();return kn.tokenBalances=a,kn.lastRetry=void 0,a}}catch(a){kn.lastRetry=Date.now(),t==null||t(a),tf.showError("Token Balance Unavailable")}finally{kn.loading=!1}return[]},fetchNetworkBalance(){if(kn.tokenBalances.length===0)return;const t=WHe.mapBalancesToSwapTokens(kn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===Ane());e&&(kn.networkBalanceInUSD=e?uHe.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Ot.pushTransactionStack({});const e=t.receiverAddress,n=An.state.address,r=st.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await st.sendTransaction({chainNamespace:pe.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),vr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:cu("eip155")===Hs.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=In.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=st._getClient())==null||a.updateBalance("eip155"),In.resetSend()},async sendERC20Token(t){Ot.pushTransactionStack({onSuccess(){Ot.replace("Account")}});const e=st.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(An.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ft.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await st.writeContract({fromAddress:An.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:pHe.getERC20Abi(n),chainNamespace:pe.CHAIN.EVM}),In.resetSend()}},async sendSolanaToken(){var t;if(!In.state.sendTokenAmount||!In.state.receiverAddress)throw new Error("An amount and receiver address are required");Ot.pushTransactionStack({onSuccess(){Ot.replace("Account")}}),await st.sendTransaction({chainNamespace:"solana",to:In.state.receiverAddress,value:In.state.sendTokenAmount}),(t=st._getClient())==null||t.updateBalance("solana"),In.resetSend()},resetSend(){kn.token=void 0,kn.sendTokenAmount=void 0,kn.receiverAddress=void 0,kn.receiverProfileImageUrl=void 0,kn.receiverProfileName=void 0,kn.loading=!1,kn.tokenBalances=[]}},In=ic(zHe),y2={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},dS={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Re=ur({chains:lHe(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),HHe={state:Re,subscribe(t){return Ro(Re,()=>{t(Re)})},subscribeKey(t,e){return Fi(Re,t,e)},subscribeChainProp(t,e,n){let r;return Ro(Re.chains,()=>{var i;const s=n||Re.activeChain;if(s){const o=(i=Re.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=et.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=kt.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Re.noAdapters=!0),Re.noAdapters||(Re.activeChain=a==null?void 0:a.namespace,Re.activeCaipNetwork=i,J.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Re.activeChain&&S0.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=et.getPreferredAccountTypes()||{},f={...kt.state.defaultAccountTypes,...h};J.state.chains.set(u,{namespace:u,networkState:ur({...dS,caipNetwork:d==null?void 0:d[0]}),accountState:ur({...y2,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),J.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Re.activeChain===t){const r=Array.from(Re.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&J.setActiveCaipNetwork(s)}}Re.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Re.chains.set(t.namespace,{namespace:t.namespace,networkState:{...dS,caipNetwork:r[0]},accountState:y2,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),J.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Re.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Re.chains.set(t.chainNamespace,{...e,caipNetworks:r}),J.setRequestedCaipNetworks(r,t.chainNamespace),it.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Re.chains.get(t);if(n){const o=((r=Re.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&J.setActiveCaipNetwork(n.caipNetworks[0]),Re.chains.set(t,{...n,caipNetworks:a}),J.setRequestedCaipNetworks(a||[],t),a.length===0&&it.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Re.chains.get(t);n&&(n.networkState={...n.networkState||dS,...e},Re.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Re.chains.get(t);if(r){const s={...r.accountState||y2,...e};Re.chains.set(t,{...r,accountState:s}),(Re.chains.size===1||Re.activeChain===t)&&(e.caipAddress&&(Re.activeCaipAddress=e.caipAddress),An.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Re.chains.get(t);if(n){const r={...n.networkState||dS,...e};Re.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){J.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Re.activeChain=t;const e=t?Re.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Re.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Re.activeCaipNetwork=n,J.setChainNetworkData(t,{caipNetwork:n}),et.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),S0.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Re.activeChain!==t.chainNamespace&&J.setIsSwitchingNamespace(!0);const e=Re.chains.get(t.chainNamespace);Re.activeChain=t.chainNamespace,Re.activeCaipNetwork=t,J.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Re.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Re.activeCaipAddress=void 0,J.setAccountProp("caipAddress",Re.activeCaipAddress,t.chainNamespace),e&&An.replaceState(e.accountState),In.resetSend(),S0.set({activeChain:Re.activeChain,selectedNetworkId:(i=Re.activeCaipNetwork)==null?void 0:i.caipNetworkId}),et.setActiveCaipNetworkId(t.caipNetworkId),!J.checkIfSupportedNetwork(t.chainNamespace)&&kt.state.enableNetworkSwitch&&!kt.state.allowUnsupportedChain&&!st.state.wcBasic&&J.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Re.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==J.state.activeChain,n=(s=J.getNetworkData(t))==null?void 0:s.caipNetwork,r=J.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await J.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=J.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=J.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Re.activeCaipNetwork)==null?void 0:a.id)})),s=J.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&tr.close()}catch{Ot.goBack()}vr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Re.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Re.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Re.activeChain;if(e&&(n=e),!n)return;const r=(s=Re.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Re.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Re.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ft.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=J.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){J.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=J.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));it.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=J.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Re.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Re.activeCaipNetwork},getActiveCaipAddress(){return Re.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Re.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=J.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());J.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Re.activeCaipNetwork,r=J.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Re.activeChain)return!0;const e=J.getRequestedCaipNetworks(Re.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){J.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=JI.caipNetworkIdToNumber((r=Re.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Re.activeChain;if(!e||!t)return!1;const n=J.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){tr.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Re.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Oi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){J.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=J.getAccountProp("preferredAccountType",e);Re.activeCaipAddress=void 0,J.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),it.removeConnectorId(e)},setIsSwitchingNamespace(t){Re.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Re.chains.forEach(s=>{pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Re.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=J.state.chains.get(t))==null?void 0:e.accountState:An.state},getNetworkData(t){var n;const e=t||Re.activeChain;if(e)return(n=J.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=J.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=it.state.filterByNamespace;return(t?[Re.chains.get(t)]:Array.from(Re.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?J.getRequestedCaipNetworks(t):J.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Re.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Re.lastConnectedSIWECaipNetwork}},J=ic(HHe),GHe={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},xne=ft.getBlockchainApiUrl(),eo=ur({clientId:null,api:new z1({baseUrl:xne,clientId:null}),supportedChains:{http:[],ws:[]}}),Tt={state:eo,async get(t){const{st:e,sv:n}=Tt.getSdkProperties(),r=kt.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return eo.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=kt.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{eo.supportedChains.http.length||await Tt.getSupportedNetworks()}catch{return!1}return eo.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await Tt.get({path:"v1/supported-chains"});return eo.supportedChains=t,t}catch{return eo.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await Tt.isNetworkSupported(e))return{avatar:"",name:""};const r=et.getIdentityFromCacheForAddress(t);if(r)return r;const s=await Tt.get({path:`/v1/identity/${t}`,params:{sender:J.state.activeCaipAddress?ft.getPlainAddress(J.state.activeCaipAddress):void 0}});return et.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await Tt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?Tt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await Tt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?Tt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await Tt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Tt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await Tt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?eo.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:kt.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await Tt.isNetworkSupported((r=J.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?Tt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=Tt.getSdkProperties();if(!await Tt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return Tt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await Tt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return eo.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Oi.CONVERT_SLIPPAGE_TOLERANCE},projectId:kt.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=Tt.getSdkProperties();if(!await Tt.isNetworkSupported((o=J.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Tt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=Tt.getSdkProperties();if(!await Tt.isNetworkSupported((l=J.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return tf.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=et.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await Tt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return et.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await Tt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Tt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await Tt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Tt.get({path:`/v1/profile/reverse/${t}`,params:{sender:An.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await Tt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Tt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await Tt.isNetworkSupported((i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?eo.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await Tt.isNetworkSupported((a=J.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await eo.api.post({path:"/v1/generators/onrampurl",params:{projectId:kt.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await Tt.isNetworkSupported((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await Tt.get({path:"/v1/onramp/options"})}catch{return GHe}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await Tt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await eo.api.post({path:"/v1/onramp/quote",params:{projectId:kt.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await Tt.isNetworkSupported((n=J.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Tt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await Tt.isNetworkSupported((s=J.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?eo.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:kt.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){eo.clientId=t,eo.api=new z1({baseUrl:xne,clientId:t})}},w2={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return Tm(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},_B={async getMyTokensWithBalance(t){const e=An.state.address,n=J.state.activeCaipNetwork,r=it.getConnectorId("eip155")===pe.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=et.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===pe.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await Tt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=w2.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await st.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await st.walletGetAssets({account:t,chainFilter:[s]});if(!w2.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>w2.createBalance(l,e.caipNetworkId));return et.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},fl=ur({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),qHe={state:fl,replaceState(t){t&&Object.assign(fl,pb(t))},subscribe(t){return J.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return J.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){J.setAccountProp("status",t,e)},getCaipAddress(t){return J.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ft.getPlainAddress(t):void 0;e===J.state.activeChain&&(J.state.activeCaipAddress=t),J.setAccountProp("caipAddress",t,e),J.setAccountProp("address",n,e)},setBalance(t,e,n){J.setAccountProp("balance",t,n),J.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){J.setAccountProp("profileName",t,e)},setProfileImage(t,e){J.setAccountProp("profileImage",t,e)},setUser(t,e){J.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){J.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){J.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){J.setAccountProp("currentTab",t,J.state.activeChain)},setTokenBalance(t,e){t&&J.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){J.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=J.getAccountProp("addressLabels",n)||new Map;r.set(t,e),J.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=J.getAccountProp("addressLabels",e)||new Map;n.delete(t),J.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){J.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){J.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&J.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){J.setAccountProp("socialWindow",t?pb(t):void 0,e)},setFarcasterUrl(t,e){J.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;fl.balanceLoading=!0;const e=(i=J.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=J.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=J.state.activeCaipAddress,s=r?ft.getPlainAddress(r):void 0;if(fl.lastRetry&&!ft.isAllowedRetry(fl.lastRetry,30*Oi.ONE_SEC_MS))return fl.balanceLoading=!1,[];try{if(s&&e&&n){const a=await _B.getMyTokensWithBalance();return An.setTokenBalance(a,n),fl.lastRetry=void 0,fl.balanceLoading=!1,a}}catch(a){fl.lastRetry=Date.now(),t==null||t(a),tf.showError("Token Balance Unavailable")}finally{fl.balanceLoading=!1}return[]},resetAccount(t){J.resetAccount(t)}},An=ic(qHe),VHe={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=J.state.activeCaipNetwork,r=Ot.state.data;if(t.id===(n==null?void 0:n.id))return;const i=An.getCaipAddress(J.state.activeChain),o=t.chainNamespace!==J.state.activeChain,a=An.getCaipAddress(t.chainNamespace),l=it.getConnectorId(J.state.activeChain)===pe.CONNECTOR_ID.AUTH,u=pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Ot.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Ot.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Ot.push("SwitchNetwork",{...r,network:t})}},to=ur({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),KHe={state:to,subscribe(t){return Ro(to,()=>t(to))},subscribeKey(t,e){return Fi(to,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=J.state.activeChain,r=e&&e!==n,s=(i=J.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(st.state.wcBasic?At.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await At.prefetch(),it.setFilterByNamespace(t==null?void 0:t.namespace),tr.setLoading(!0,e),e&&r){const a=((o=J.getNetworkData(e))==null?void 0:o.caipNetwork)||J.getRequestedCaipNetworks(e)[0];a&&VHe.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=J.state.noAdapters;kt.state.manualWCControl||a&&!s?ft.isMobile()?Ot.reset("AllWallets"):Ot.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Ot.reset(t.view,t.data):s?Ot.reset("Account"):Ot.reset("Connect")}to.open=!0,S0.set({open:!0}),vr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=kt.state.enableEmbedded,e=!!J.state.activeCaipAddress;to.open&&vr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),to.open=!1,Ot.reset("Connect"),tr.clearLoading(),t?e?Ot.replace("Account"):Ot.push("Connect"):S0.set({open:!1}),st.resetUri()},setLoading(t,e){e&&to.loadingNamespaceMap.set(e,t),to.loading=t,S0.set({loading:t})},clearLoading(){to.loadingNamespaceMap.clear(),to.loading=!1},shake(){to.shake||(to.shake=!0,setTimeout(()=>{to.shake=!1},500))}},tr=ic(KHe),PW=2147483648,YHe={convertEVMChainIdToCoinType(t){if(t>=PW)throw new Error("Invalid chainId");return(PW|t)>>>0}},Sa=ur({suggestions:[],loading:!1}),QHe={state:Sa,subscribe(t){return Ro(Sa,()=>t(Sa))},subscribeKey(t,e){return Fi(Sa,t,e)},async resolveName(t){var e,n;try{return await Tt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await Tt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{Sa.loading=!0,Sa.suggestions=[];const e=await Tt.getEnsNameSuggestions(t);return Sa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],Sa.suggestions}catch(e){const n=sx.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{Sa.loading=!1}},async getNamesForAddress(t){try{if(!J.state.activeCaipNetwork)return[];const n=et.getEnsFromCacheForAddress(t);if(n)return n;const r=await Tt.reverseLookupEnsName({address:t});return et.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=sx.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=J.state.activeCaipNetwork,n=An.state.address,r=it.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");Sa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Ot.pushTransactionStack({onCancel(){Ot.replace("RegisterAccountName")}});const i=await st.signMessage(s);Sa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=YHe.convertEVMChainIdToCoinType(Number(o));await Tt.registerEnsName({coinType:a,address:n,signature:i,message:s}),An.setProfileName(t,e.chainNamespace),Ot.replace("RegisterAccountNameSuccess")}catch(s){const i=sx.parseEnsApiError(s,`Error registering name ${t}`);throw Ot.replace("RegisterAccountName"),new Error(i)}finally{Sa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},sx=ic(QHe);let yp=null;const gh={getSIWX(){return kt.state.siwx},async initializeIfEnabled(){var i;const t=kt.state.siwx,e=J.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(J.checkIfSupportedNetwork(n))try{if(yp&&await yp,(await t.getSessions(`${n}:${r}`,s)).length)return;await tr.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),vr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=st._getClient())==null?void 0:i.disconnect().catch(console.error)),Ot.reset("Connect"),tf.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=kt.state.siwx,e=ft.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork(),r=st._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();it.getConnectorId(n.chainNamespace)===pe.CONNECTOR_ID.AUTH&&Ot.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),J.setLastConnectedSIWECaipNetwork(n),tr.close(),vr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!tr.state.open||Ot.state.view==="ApproveTransaction")&&await tr.open({view:"SIWXSignMessage"}),tf.showError("Error signing message"),vr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=J.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,ft.getPlainAddress(J.getActiveCaipAddress())||""));s&&s.length>0?await J.switchActiveNetwork(r):await st.disconnect()}else await st.disconnect()}else tr.close();tr.close(),vr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=J.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,ft.getPlainAddress(J.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=kt.state.siwx,e=ft.getPlainAddress(J.getActiveCaipAddress()),n=J.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Ot.state.view==="ApproveTransaction",r=Ot.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=gh.getSIWX();if(!i||!s.includes(pe.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=J.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await gh.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(yp)return yp;const r=gh.getSIWX();return r?(yp=r.addSession({data:t,message:e,signature:n}).finally(()=>{yp=null}),yp):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=gh.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(tf.showLoading("Authenticating...",{autoClose:!1}),An.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),vr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:gh.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),vr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:gh.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{tf.hide()}}return!0},getSIWXEventProperties(){var e;const t=J.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=J.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:cu(t)===Hs.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},zo={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:pe.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Xo={ConnectorExplorerIds:{[pe.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[pe.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[pe.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[pe.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[zo.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[zo.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[zo.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[zo.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[zo.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[zo.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[zo.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[zo.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[zo.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[zo.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[zo.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[pe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[pe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[pe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[pe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[pe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[pe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[pe.CONNECTOR_ID.COINBASE]:"Coinbase",[pe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[pe.CONNECTOR_ID.LEDGER]:"Ledger",[pe.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[pe.CONNECTOR_ID.INJECTED]:"INJECTED",[pe.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[pe.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[pe.CONNECTOR_ID.AUTH]:"AUTH",[zo.CONNECTOR_TYPE_AUTH]:"AUTH"}},yo={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${zo.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=J.state.activeChain;return pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>it.getConnectorId(e)===pe.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},JHe=new AbortController,ih={EmbeddedWalletAbortController:JHe,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},ZHe="rpc.walletconnect.org";function OW(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const b2=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],oE={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===ZHe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:pe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${pe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return b2.includes(e)?OW(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(y=>y.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Xo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>oE.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ha(a.url,a.config))}),b2.includes(t.caipNetworkId)&&r.push(Ha(OW(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ha(a))}),sI(r)},extendWagmiTransports(t,e,n){if(b2.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return sI([n,Ha(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:pe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=et.getActiveCaipNetworkId(),n=J.getAllRequestedCaipNetworks(),r=Array.from(((c=J.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},kW={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Ds={set(t,e){Ll.isClient&&localStorage.setItem(`${Je.STORAGE_KEY}${t}`,e)},get(t){return Ll.isClient?localStorage.getItem(`${Je.STORAGE_KEY}${t}`):null},delete(t,e){Ll.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Je.STORAGE_KEY}${t}`))}},hS=30*1e3,Ll={checkIfAllowedToTriggerEmail(){const t=Ds.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<hS){const n=Math.ceil((hS-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Ds.get(Je.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<hS)return Math.ceil((hS-e)/1e3)}return 0},checkIfRequestExists(t){return Hs.NOT_SAFE_RPC_METHODS.includes(t.method)||Hs.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(kW.transactionHash))||(t==null?void 0:t.match(kW.signedMessage)))?Je.RPC_RESPONSE_TYPE_TX:Je.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Hs.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Sr=E.object({message:E.string()});function Be(t){return E.literal(Je[t])}const aR=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const XHe=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),eGe=E.object({email:E.string().email()}),tGe=E.object({otp:E.string()}),nGe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(aR),rpcUrl:E.optional(E.string())}),rGe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(aR),rpcUrl:E.optional(E.string())}),sGe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),iGe=E.object({email:E.string().email()}),oGe=E.object({otp:E.string()}),aGe=E.object({otp:E.string()}),cGe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),lGe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),uGe=E.object({type:E.string()}),dGe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),hGe=E.object({url:E.string()}),fGe=E.object({userName:E.string()}),pGe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Hs.ACCOUNT_TYPES.EOA,Hs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(aR)}),gGe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),mGe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Hs.ACCOUNT_TYPES.EOA,Hs.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(aR)}),yGe=E.object({uri:E.string()}),wGe=E.object({isConnected:E.boolean()}),bGe=E.object({chainId:E.string().or(E.number())}),vGe=E.object({chainId:E.string().or(E.number())}),EGe=E.object({newEmail:E.string().email()}),CGe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const _Ge=E.object({version:E.string().optional()}),AGe=E.object({type:E.string(),address:E.string()}),SGe=E.any(),xGe=E.object({method:E.literal("eth_accounts")}),IGe=E.object({method:E.literal("eth_blockNumber")}),NGe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),TGe=E.object({method:E.literal("eth_chainId")}),RGe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),PGe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),OGe=E.object({method:E.literal("eth_gasPrice")}),kGe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),DGe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),MGe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),LGe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),UGe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),BGe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),$Ge=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),FGe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),jGe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),WGe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),zGe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),HGe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),GGe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),qGe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),VGe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),KGe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),YGe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),QGe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),JGe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),ZGe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),XGe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),eqe=E.object({method:E.literal("eth_newBlockFilter")}),tqe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),nqe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),rqe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),sqe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),iqe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),DW=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),oqe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),aqe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),cqe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),lqe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),uqe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),dqe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),hqe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),fqe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),pqe=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),gqe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),mqe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),yqe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),MW=E.object({token:E.string()}),$e=E.object({id:E.string().optional()}),Lv={appEvent:$e.extend({type:Be("APP_SWITCH_NETWORK"),payload:XHe}).or($e.extend({type:Be("APP_CONNECT_EMAIL"),payload:eGe})).or($e.extend({type:Be("APP_CONNECT_DEVICE")})).or($e.extend({type:Be("APP_CONNECT_OTP"),payload:tGe})).or($e.extend({type:Be("APP_CONNECT_SOCIAL"),payload:nGe})).or($e.extend({type:Be("APP_GET_FARCASTER_URI")})).or($e.extend({type:Be("APP_CONNECT_FARCASTER")})).or($e.extend({type:Be("APP_GET_USER"),payload:E.optional(rGe)})).or($e.extend({type:Be("APP_GET_SOCIAL_REDIRECT_URI"),payload:sGe})).or($e.extend({type:Be("APP_SIGN_OUT")})).or($e.extend({type:Be("APP_IS_CONNECTED"),payload:E.optional(MW)})).or($e.extend({type:Be("APP_GET_CHAIN_ID")})).or($e.extend({type:Be("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or($e.extend({type:Be("APP_INIT_SMART_ACCOUNT")})).or($e.extend({type:Be("APP_SET_PREFERRED_ACCOUNT"),payload:uGe})).or($e.extend({type:Be("APP_RPC_REQUEST"),payload:DW.or(yqe).or(xGe).or(IGe).or(NGe).or(TGe).or(RGe).or(PGe).or(OGe).or(kGe).or(DGe).or(MGe).or(LGe).or(UGe).or(BGe).or($Ge).or(FGe).or(jGe).or(WGe).or(zGe).or(HGe).or(GGe).or(qGe).or(VGe).or(KGe).or(YGe).or(QGe).or(JGe).or(ZGe).or(XGe).or(eqe).or(tqe).or(nqe).or(rqe).or(sqe).or(iqe).or(DW).or(oqe).or(aqe).or(cqe).or(lqe).or(uqe).or(dqe).or(fqe).or(hqe).or(pqe).or(gqe).or(mqe).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or($e.extend({type:Be("APP_UPDATE_EMAIL"),payload:iGe})).or($e.extend({type:Be("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:oGe})).or($e.extend({type:Be("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:aGe})).or($e.extend({type:Be("APP_SYNC_THEME"),payload:cGe})).or($e.extend({type:Be("APP_SYNC_DAPP_DATA"),payload:lGe})).or($e.extend({type:Be("APP_RELOAD")})).or($e.extend({type:Be("APP_RPC_ABORT")})),frameEvent:$e.extend({type:Be("FRAME_SWITCH_NETWORK_ERROR"),payload:Sr}).or($e.extend({type:Be("FRAME_SWITCH_NETWORK_SUCCESS"),payload:vGe})).or($e.extend({type:Be("FRAME_CONNECT_EMAIL_SUCCESS"),payload:dGe})).or($e.extend({type:Be("FRAME_CONNECT_EMAIL_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:hGe})).or($e.extend({type:Be("FRAME_GET_FARCASTER_URI_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:fGe})).or($e.extend({type:Be("FRAME_CONNECT_FARCASTER_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_CONNECT_OTP_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_CONNECT_OTP_SUCCESS")})).or($e.extend({type:Be("FRAME_CONNECT_DEVICE_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_CONNECT_DEVICE_SUCCESS")})).or($e.extend({type:Be("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:pGe})).or($e.extend({type:Be("FRAME_CONNECT_SOCIAL_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_GET_USER_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_GET_USER_SUCCESS"),payload:mGe})).or($e.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:yGe})).or($e.extend({type:Be("FRAME_SIGN_OUT_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_SIGN_OUT_SUCCESS")})).or($e.extend({type:Be("FRAME_IS_CONNECTED_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_IS_CONNECTED_SUCCESS"),payload:wGe})).or($e.extend({type:Be("FRAME_GET_CHAIN_ID_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_GET_CHAIN_ID_SUCCESS"),payload:bGe})).or($e.extend({type:Be("FRAME_RPC_REQUEST_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_RPC_REQUEST_SUCCESS"),payload:SGe})).or($e.extend({type:Be("FRAME_SESSION_UPDATE"),payload:MW})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_SUCCESS"),payload:gGe})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:EGe})).or($e.extend({type:Be("FRAME_SYNC_THEME_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_SYNC_THEME_SUCCESS")})).or($e.extend({type:Be("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or($e.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:CGe})).or($e.extend({type:Be("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:AGe})).or($e.extend({type:Be("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_READY"),payload:_Ge})).or($e.extend({type:Be("FRAME_RELOAD_ERROR"),payload:Sr})).or($e.extend({type:Be("FRAME_RELOAD_SUCCESS")}))};function v2(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function wqe({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=pe.BLOCKCHAIN_API_RPC_URL}){const i=new URL(CHe);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class bqe{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=pe.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!v2(Je.FRAME_EVENT_KEY,u))return;const d=Lv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}Ll.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{Ll.isClient&&window.addEventListener("message",({data:a})=>{if(!v2(Je.FRAME_EVENT_KEY,a))return;const c=Lv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{Ll.isClient&&window.addEventListener("message",({data:a})=>{if(!v2(Je.APP_EVENT_KEY,a))return;const c=Lv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(Ll.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");Lv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(Ll.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");Lv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),Ll.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=wqe({projectId:e,chainId:r,version:AHe,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class vqe{constructor(e){var i;const n=Lm({level:_He}),{logger:r,chunkLoggerController:s}=bT({opts:n});this.logger=qs(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class Eqe{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new vqe(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new bqe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Ds.get(Je.EMAIL_LOGIN_USED_KEY)}getEmail(){return Ds.get(Je.EMAIL)}getUsername(){return Ds.get(Je.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Je.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Ll.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Je.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Je.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Je.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Je.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Je.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Je.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Je.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Je.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Je.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Je.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Je.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Je.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Je.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Je.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Je.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Je.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Je.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Je.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Hs.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Je.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Je.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Je.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Hs.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Hs.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Je.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Je.APP_SYNC_DAPP_DATA,Je.APP_SYNC_THEME,Je.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Je.APP_CONNECT_EMAIL,Je.APP_CONNECT_DEVICE,Je.APP_CONNECT_OTP,Je.APP_CONNECT_SOCIAL,Je.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,y){var b,v,A;w.id===u&&((v=y==null?void 0:(b=y.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Ds.set(Je.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Ds.set(Je.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Ds.set(Je.EMAIL,e),Ds.set(Je.EMAIL_LOGIN_USED_KEY,"true"),Ds.delete(Je.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Ds.delete(Je.EMAIL_LOGIN_USED_KEY),Ds.delete(Je.EMAIL),Ds.delete(Je.LAST_USED_CHAIN_KEY),Ds.delete(Je.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Ds.set(Je.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Ds.get(Je.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Ds.set(Je.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=ef.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class x0{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return x0.instance||(x0.instance=new Eqe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),x0.instance}}const Cqe={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},LW={filterOutDuplicatesByRDNS(t){const e=kt.state.enableEIP6963?it.state.connectors:[],n=et.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ft.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=it.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=et.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=it.state,{featuredWalletIds:n}=kt.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=kt.state.features)==null?void 0:c.connectMethodsOrder),r=e||it.state.connectors;if(n)return n;const{injected:s,announced:i}=ix.getConnectorsByType(r,At.state.recommended,At.state.featured),o=s.filter(ix.showConnector),a=i.filter(ix.showConnector);return o.length||a.length?["wallet","email","social"]:Cqe.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&At.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&At.state.excludedWallets.some(r=>yo.isLowerCaseMatch(r.name,t.name));return e||n}},ix={getConnectorsByType(t,e,n){const{customWallets:r}=kt.state,s=et.getRecentWallets(),i=LW.filterOutDuplicateWallets(e),o=LW.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&At.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&At.state.excludedWallets.some(i=>yo.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ft.isMobile()||ft.isMobile()&&!e&&!st.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(J.state.chains.values()).some(n=>it.getConnectorId(n.namespace)===pe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=kt.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:kt.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!ft.isMobile())return{accounts:[],chainId:void 0};if(t.id===pe.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};hd`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;hd`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;hd`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const ox={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([ox.getAddresses(t),ox.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:ox.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Xo.NetworkImageIds[e.id]]}]})}},Iy={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function H1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const UW=H1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),BW=H1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});H1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});H1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});H1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const _qe={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},Fg={getMethodsByChainNamespace(t){return _qe[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case UW.caipNetworkId:u.chains.push(UW.deprecatedCaipNetworkId);break;case BW.caipNetworkId:u.chains.push(BW.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await sx.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=Fg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(Fg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>ft.isCaipAddress(d)).map(d=>ef.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>ef.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class Aqe{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case pe.CHAIN.EVM:await this.syncEVMConnections(e);break;case pe.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case pe.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=Fg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await ix.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==pe.CONNECTOR_ID.AUTH&&a.id!==pe.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const c=Fg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,y;if(a.id===pe.CONNECTOR_ID.WALLET_CONNECT){const b=Fg.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>ft.createAccount(pe.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:pe.CHAIN.BITCOIN,publicKey:((h=u[Iy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[Iy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[Iy.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:pe.CHAIN.BITCOIN,publicKey:((g=u[Iy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[Iy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((y=u[Iy.ACCOUNT_INDEXES.ORDINAL])==null?void 0:y.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>yo.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>yo.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>yo.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>yo.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>yo.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class Ine{constructor({provider:e,namespace:n}){this.id=pe.CONNECTOR_ID.WALLET_CONNECT,this.name=Xo.ConnectorNamesMap[pe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Xo.ConnectorImageIds[pe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=J.getCaipNetworks.bind(J),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=kt.state.universalProviderConfigOverride,s=Fg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return gh.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:Sqe})}}const Sqe=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],xqe=[pe.CONNECTOR_ID.AUTH,pe.CONNECTOR_ID.WALLET_CONNECT];class Iqe{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>J.getCaipNetworks(n),this.getConnectorId=n=>it.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new Aqe({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:pe.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Xo.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!yo.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){An.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=cu(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof Ine);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=ft.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=ft.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=ft.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&yo.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=ft.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),yo.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?ox.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),yo.isLowerCaseMatch(this.getConnectorId(pe.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(xqe.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function Nqe(t){let e=[],n,r;function s(a){return JI.parseEvmChainId(a)||1}function i(){var a;return n||(n=x0.getInstance({projectId:t.options.projectId,chainId:(a=J.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?Sp.open(ih.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?Sp.open(ih.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&Sp.open(ih.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:ih.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>J.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=JI.parseEvmChainId(c.getLastUsedChainId()||""),y=(g=t.chains)==null?void 0:g[0].id;if(l=w||y,!l)throw new Error("ChainId not found in provider")}const u=cu("eip155"),{address:d,chainId:h,accounts:f}=await gh.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:pe.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:pe.CONNECTOR_ID.AUTH,name:pe.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:pe.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=x0.getInstance({projectId:t.options.projectId,chainId:(c=J.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:ih.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?Sp.open(ih.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?Sp.open(ih.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&Sp.open(ih.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>J.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=J.state.activeChain===pe.CHAIN.EVM;if(pe.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>it.getConnectorId(h)===pe.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new nu(new Error("chain not found on connector."));const d=await this.getProvider(),h=cu("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new nu(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(nd)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}AB.type="walletConnect";function AB(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:AB.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=J.getCaipNetworks(),w=await this.getProvider();if(!w)throw new ph;a||(a=this.onDisplayUri,w.on("display_uri",a));const y=await this.isChainsStale();w.session&&y&&await w.disconnect();const b=kt.state.universalProviderConfigOverride;if(!w.session||y){const S=Fg.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(D=>Number(D.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,N=C==null?void 0:C.some(S=>Number(S.split(":")[1])===A);let x=1;N?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const T=b==null?void 0:b.defaultChain;return w.setDefaultChain(T??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Jr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,y,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(y=d==null?void 0:d.session)==null?void 0:y.namespaces[pe.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=et.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=et.getStoredActiveCaipNetworkId(),y=h?e.getCaipNetworks(h):[],b=y==null?void 0:y.find(v=>v.id===w);b&&b.chainNamespace===pe.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,y,b;const d=(g=e.getCaipNetwork(pe.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(y=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[pe.CHAIN.EVM])==null?void 0:y.chains)==null?void 0:b[0],p=J.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,y,b;const f=await this.getProvider();if(!f)throw new ph;const p=J.getCaipNetworks().find(v=>v.id===h);if(!p)throw new nu(new f_);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:nt(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Jr(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const N=((b=(y=p.rpcUrls)==null?void 0:y.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:C,chainId:nt(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:N};await f.request({method:"wallet_addEthereumChain",params:[x]});const T=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...T,h]),{...p,id:p.id}}catch(C){throw new Jr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>nd(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(J.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[pe.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const Uv=ur({pendingTransactions:0}),$W={state:Uv,subscribeKey(t,e){return Fi(Uv,t,e)},increase(t){Uv[t]+=1},decrease(t){Uv[t]-=1},reset(t){Uv[t]=0}};function Tqe(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function Rqe(t){if(ft.isSafeApp()){const{safe:e}=await ai(async()=>{const{safe:n}=await import("./index-DZbnsb9t.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function Pqe(t){try{const{coinbaseWallet:e}=await ai(async()=>{const{coinbaseWallet:n}=await import("./index-DZbnsb9t.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const Oqe={enable:!1,pollingInterval:3e4};class kqe extends Iqe{constructor(e){const n=oE.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=pe.CHAIN.EVM,this.adapterType=pe.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...Oqe,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===pe.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>ft.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=v0(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>ft.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=v0(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===pe.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=oE.getCaipNetworkId(s);i?n[s.id]=oE.extendWagmiTransports(s,e.projectId,i):n[s.id]=oE.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=aee({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=o4e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),$W.increase("pendingTransactions")}});const e=$W.subscribeKey("pendingTransactions",n=>{var r;n>=pe.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){eee(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),tee(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===pe.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:et.getConnectedSocialProvider(),username:et.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await Pqe(this.wagmiConfig.connectors);s&&n.push(s)}const r=await Rqe(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(AB(e,n)),e.enableEIP6963!==!1&&r.push(zT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(Nqe({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Xo.ConnectorNamesMap[r.id]??r.name,imageId:Xo.ConnectorImageIds[r.id],type:Xo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await r4e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=v0(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await t4e(this.wagmiConfig,s);const i=await n4e(this.wagmiConfig,s);return await ree(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(JI.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await see(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await Y8e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return iCe(e.value,e.decimals)}formatUnits(e){return Tm(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===pe.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===pe.CONNECTOR_ID.AUTH||e.id===pe.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Xo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Xo.ConnectorNamesMap[e.id]??e.name,imageId:Xo.ConnectorImageIds[e.id],type:Xo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===pe.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){nee(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=vc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(ft.isSafeApp()&&n===pe.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await GS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await GS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await W3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===pe.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const y=[...u.accounts].sort((b,v)=>yo.isLowerCaseMatch(b,r)?-1:yo.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:y,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:y[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await GS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await j3(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=et.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await XX(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});et.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=vc(this.wagmiConfig).find(i=>yo.isLowerCaseMatch(i.connector.id,e.id));return await $3(this.wagmiConfig,{connector:n}),kt.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=vc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await $3(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await W3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=vc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=Tqe(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=vc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=vc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=vc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:pe.CONNECTOR_ID.AUTH,type:"AUTH",name:pe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Xo.ConnectorImageIds[pe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=vc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(J.state.activeChain==="eip155")return;j3(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new Ine({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const Nne="7c65f27254d6ddd24cf7eedf2685c4fb",Dqe={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},Mqe=new kqe({projectId:Nne,networks:[NI,II,TI,DX,RI,DI,MI],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}});k6e({projectId:Nne,metadata:Dqe,adapters:[Mqe],networks:[NI,II,TI,DX,RI,DI,MI],features:{analytics:!0}});const Lqe=new sFe,Uqe=typeof window<"u"&&window.location.hostname.startsWith("chess."),Bqe=()=>nje("(max-width: 768px)")?m.jsx(tje,{}):m.jsx(W8e,{});F2.createRoot(document.getElementById("root")).render(m.jsx(sa.StrictMode,{children:m.jsx(N4e,{config:rje,children:m.jsx(xFe,{client:Lqe,children:m.jsx(F8e,{children:m.jsx(U8e,{children:Uqe?m.jsx(zS,{path:"/*",element:m.jsx(AW,{})}):m.jsxs(m.Fragment,{children:[m.jsx(zS,{path:"/",element:m.jsx(Bqe,{})}),m.jsx(zS,{path:"/chess",element:m.jsx(AW,{})})]})})})})})}));export{cKe as $,Ye as A,bt as B,Fe as C,ct as D,TE as E,BD as F,qv as G,Pc as H,Eye as I,$n as J,dKe as K,D3 as L,Es as M,yye as N,ve as O,Hd as P,$S as Q,Ht as R,Mc as S,lo as T,q_e as U,OE as V,Ws as W,oKe as X,bs as Y,vm as Z,Pl as _,jS as a,IX as a0,M3 as a1,rb as a2,ai as a3,pKe as a4,nd as a5,nu as a6,f_ as a7,nt as a8,Jr as a9,ZW as aA,Qqe as aB,_C as aC,Zbe as aD,y4e as aE,nc as aF,tc as aG,oQ as aH,KEe as aI,ph as aa,HY as ab,zT as ac,me as ad,GL as ae,is as af,ube as ag,oT as ah,hU as ai,yEe as aj,g1 as ak,Za as al,Kf as am,AE as an,tu as ao,g2e as ap,KVe as aq,UF as ar,sZ as as,i2e as at,m2e as au,YVe as av,VVe as aw,RT as ax,ZVe as ay,QVe as az,jn as b,je as c,ot as d,H as e,fr as f,td as g,uKe as h,hd as i,ta as j,vt as k,ho as l,XPe as m,Fl as n,s6e as o,Qe as p,kl as q,lKe as r,_n as s,iK as t,lr as u,v4 as v,pa as w,iKe as x,pi as y,hi as z};
