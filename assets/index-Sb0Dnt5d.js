const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/embedded-wallet-Bx6qIY2g.js","assets/if-defined-BLYqRcPC.js","assets/index-CD6a5Z6x.js","assets/index-DbHC49JJ.js","assets/ref-DyKrM6lx.js","assets/index-CrVxirCY.js","assets/index-fS7A_QkE.js","assets/index-B5Xl9u2t.js","assets/index-D4Js6xKm.js","assets/index-BOkQzybZ.js","assets/index-DHYs_4AO.js","assets/index-BJxFid8S.js","assets/email-DDbrekw3.js","assets/index-D_XU50YG.js","assets/socials-C_BSZuD_.js","assets/index-DQiDOmnk.js","assets/ConstantsUtil-Dmg8YACJ.js","assets/index-B-kh9rKU.js","assets/index-d2rnQ7XF.js","assets/index-35YfBDeT.js","assets/index-DW2lqwmI.js","assets/swaps-BN8673wi.js","assets/index-sAfAmC3E.js","assets/index-6pLCC7vC.js","assets/index-0iO5KQWu.js","assets/send-DRrh_EBG.js","assets/index-621vhEQy.js","assets/index-MTU_TwXV.js","assets/receive-C-gjTPZa.js","assets/index-BpnGJqNG.js","assets/onramp-DvNkORRh.js","assets/index-AWmeSqDi.js","assets/index-z0C7d4-x.js","assets/index-GMQlsl1A.js","assets/transactions-DQuWRUC4.js","assets/index-BJ1YQg9b.js","assets/index-CO-xmMeq.js","assets/index-BkKYAHFz.js","assets/index-CHoctKRl.js","assets/index-Ctl2RVDz.js","assets/w3m-modal-BY5_bQIa.js"])))=>i.map(i=>d[i]);
var zne=Object.defineProperty;var IB=t=>{throw TypeError(t)};var Hne=(t,e,n)=>e in t?zne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var se=(t,e,n)=>Hne(t,typeof e!="symbol"?e+"":e,n),oR=(t,e,n)=>e.has(t)||IB("Cannot "+n);var _=(t,e,n)=>(oR(t,e,"read from private field"),n?n.call(t):e.get(t)),Y=(t,e,n)=>e.has(t)?IB("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),L=(t,e,n,r)=>(oR(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),de=(t,e,n)=>(oR(t,e,"access private method"),n);var Cd=(t,e,n,r)=>({set _(s){L(t,e,s,n)},get _(){return _(t,e,r)}});function Gne(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zW(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var HW={exports:{}},VI={},GW={exports:{}},Zt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __=Symbol.for("react.element"),qne=Symbol.for("react.portal"),Vne=Symbol.for("react.fragment"),Kne=Symbol.for("react.strict_mode"),Yne=Symbol.for("react.profiler"),Qne=Symbol.for("react.provider"),Jne=Symbol.for("react.context"),Zne=Symbol.for("react.forward_ref"),Xne=Symbol.for("react.suspense"),ere=Symbol.for("react.memo"),tre=Symbol.for("react.lazy"),NB=Symbol.iterator;function nre(t){return t===null||typeof t!="object"?null:(t=NB&&t[NB]||t["@@iterator"],typeof t=="function"?t:null)}var qW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VW=Object.assign,KW={};function Vw(t,e,n){this.props=t,this.context=e,this.refs=KW,this.updater=n||qW}Vw.prototype.isReactComponent={};Vw.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vw.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function YW(){}YW.prototype=Vw.prototype;function P5(t,e,n){this.props=t,this.context=e,this.refs=KW,this.updater=n||qW}var O5=P5.prototype=new YW;O5.constructor=P5;VW(O5,Vw.prototype);O5.isPureReactComponent=!0;var TB=Array.isArray,QW=Object.prototype.hasOwnProperty,k5={current:null},JW={key:!0,ref:!0,__self:!0,__source:!0};function ZW(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)QW.call(e,r)&&!JW.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:__,type:t,key:i,ref:o,props:s,_owner:k5.current}}function rre(t,e){return{$$typeof:__,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function D5(t){return typeof t=="object"&&t!==null&&t.$$typeof===__}function sre(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var RB=/\/+/g;function aR(t,e){return typeof t=="object"&&t!==null&&t.key!=null?sre(""+t.key):e.toString(36)}function eS(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case __:case qne:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+aR(o,0):r,TB(s)?(n="",t!=null&&(n=t.replace(RB,"$&/")+"/"),eS(s,e,n,"",function(l){return l})):s!=null&&(D5(s)&&(s=rre(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(RB,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",TB(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+aR(i,a);o+=eS(i,e,n,c,s)}else if(c=nre(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+aR(i,a++),o+=eS(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function D1(t,e,n){if(t==null)return t;var r=[],s=0;return eS(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ire(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ii={current:null},tS={transition:null},ore={ReactCurrentDispatcher:Ii,ReactCurrentBatchConfig:tS,ReactCurrentOwner:k5};function XW(){throw Error("act(...) is not supported in production builds of React.")}Zt.Children={map:D1,forEach:function(t,e,n){D1(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return D1(t,function(){e++}),e},toArray:function(t){return D1(t,function(e){return e})||[]},only:function(t){if(!D5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Zt.Component=Vw;Zt.Fragment=Vne;Zt.Profiler=Yne;Zt.PureComponent=P5;Zt.StrictMode=Kne;Zt.Suspense=Xne;Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ore;Zt.act=XW;Zt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=VW({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=k5.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)QW.call(e,c)&&!JW.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:__,type:t.type,key:s,ref:i,props:r,_owner:o}};Zt.createContext=function(t){return t={$$typeof:Jne,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Qne,_context:t},t.Consumer=t};Zt.createElement=ZW;Zt.createFactory=function(t){var e=ZW.bind(null,t);return e.type=t,e};Zt.createRef=function(){return{current:null}};Zt.forwardRef=function(t){return{$$typeof:Zne,render:t}};Zt.isValidElement=D5;Zt.lazy=function(t){return{$$typeof:tre,_payload:{_status:-1,_result:t},_init:ire}};Zt.memo=function(t,e){return{$$typeof:ere,type:t,compare:e===void 0?null:e}};Zt.startTransition=function(t){var e=tS.transition;tS.transition={};try{t()}finally{tS.transition=e}};Zt.unstable_act=XW;Zt.useCallback=function(t,e){return Ii.current.useCallback(t,e)};Zt.useContext=function(t){return Ii.current.useContext(t)};Zt.useDebugValue=function(){};Zt.useDeferredValue=function(t){return Ii.current.useDeferredValue(t)};Zt.useEffect=function(t,e){return Ii.current.useEffect(t,e)};Zt.useId=function(){return Ii.current.useId()};Zt.useImperativeHandle=function(t,e,n){return Ii.current.useImperativeHandle(t,e,n)};Zt.useInsertionEffect=function(t,e){return Ii.current.useInsertionEffect(t,e)};Zt.useLayoutEffect=function(t,e){return Ii.current.useLayoutEffect(t,e)};Zt.useMemo=function(t,e){return Ii.current.useMemo(t,e)};Zt.useReducer=function(t,e,n){return Ii.current.useReducer(t,e,n)};Zt.useRef=function(t){return Ii.current.useRef(t)};Zt.useState=function(t){return Ii.current.useState(t)};Zt.useSyncExternalStore=function(t,e,n){return Ii.current.useSyncExternalStore(t,e,n)};Zt.useTransition=function(){return Ii.current.useTransition()};Zt.version="18.3.1";GW.exports=Zt;var k=GW.exports;const Go=Zg(k),are=Gne({__proto__:null,default:Go},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cre=k,lre=Symbol.for("react.element"),ure=Symbol.for("react.fragment"),dre=Object.prototype.hasOwnProperty,hre=cre.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fre={key:!0,ref:!0,__self:!0,__source:!0};function ez(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dre.call(e,r)&&!fre.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:lre,type:t,key:i,ref:o,props:s,_owner:hre.current}}VI.Fragment=ure;VI.jsx=ez;VI.jsxs=ez;HW.exports=VI;var y=HW.exports,PB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ae=function(t,e){if(!t)throw Kw(e)},Kw=function(t){return new Error("Firebase Database ("+tz.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},pre=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},M5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,l=c?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;c||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nz(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pre(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const l=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||l==null||d==null)throw new gre;const h=i<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const p=l<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rz=function(t){const e=nz(t);return M5.encodeByteArray(e,!0)},KS=function(t){return rz(t).replace(/\./g,"")},d2=function(t){try{return M5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mre(t){return sz(void 0,t)}function sz(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!yre(n)||(t[n]=sz(t[n],e[n]));return t}function yre(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wre(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bre=()=>wre().__FIREBASE_DEFAULTS__,vre=()=>{if(typeof process>"u"||typeof PB>"u")return;const t=PB.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ere=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&d2(t[1]);return e&&JSON.parse(e)},iz=()=>{try{return bre()||vre()||Ere()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Cre=t=>{var e,n;return(n=(e=iz())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},_re=t=>{const e=Cre(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},oz=()=>{var t;return(t=iz())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Are(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[KS(JSON.stringify(n)),KS(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sre(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function az(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sre())}function xre(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ire(){return tz.NODE_ADMIN===!0}function Nre(){try{return typeof indexedDB=="object"}catch{return!1}}function Tre(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rre="FirebaseError";class A_ extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Rre,Object.setPrototypeOf(this,A_.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cz.prototype.create)}}class cz{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Pre(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new A_(s,a,r)}}function Pre(t,e){return t.replace(Ore,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ore=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t){return JSON.parse(t)}function Kr(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lz=function(t){let e={},n={},r={},s="";try{const i=t.split(".");e=vE(d2(i[0])||""),n=vE(d2(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:s}},kre=function(t){const e=lz(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Dre=function(t){const e=lz(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function nw(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function OB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function YS(t,e,n){const r={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=e.call(n,t[s],s,t));return r}function h2(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(kB(i)&&kB(o)){if(!h2(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kB(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mre(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lre{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,u;for(let d=0;d<80;d++){d<40?d<20?(l=a^i&(o^a),u=1518500249):(l=i^o^a,u=1859775393):d<60?(l=i&o|a&(i|o),u=2400959708):(l=i^o^a,u=3395469782);const h=(s<<5|s>>>27)+l+c+u+r[d]&4294967295;c=a,a=o,o=(i<<30|i>>>2)&4294967295,i=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<n;){if(o===0)for(;s<=r;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<n;)if(i[o]=e.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<n;)if(i[o]=e[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)e[r]=this.chain_[s]>>i&255,++r;return e}}function L5(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ure=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);if(s>=55296&&s<=56319){const i=s-55296;r++,Ae(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;s=65536+(i<<10)+o}s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):s<65536?(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},YI=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t){return t&&t._delegate?t._delegate:t}class EE{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fre(e))try{this.getOrInitializeService({instanceIdentifier:Qf})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qf){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qf){return this.instances.has(e)}getOptions(e=Qf){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:$re(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qf){return this.component?this.component.multipleInstances?e:Qf:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $re(t){return t===Qf?void 0:t}function Fre(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jre{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Bre(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Zn||(Zn={}));const Wre={debug:Zn.DEBUG,verbose:Zn.VERBOSE,info:Zn.INFO,warn:Zn.WARN,error:Zn.ERROR,silent:Zn.SILENT},zre=Zn.INFO,Hre={[Zn.DEBUG]:"log",[Zn.VERBOSE]:"log",[Zn.INFO]:"info",[Zn.WARN]:"warn",[Zn.ERROR]:"error"},Gre=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Hre[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uz{constructor(e){this.name=e,this._logLevel=zre,this._logHandler=Gre,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Wre[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zn.DEBUG,...e),this._logHandler(this,Zn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zn.VERBOSE,...e),this._logHandler(this,Zn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zn.INFO,...e),this._logHandler(this,Zn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zn.WARN,...e),this._logHandler(this,Zn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zn.ERROR,...e),this._logHandler(this,Zn.ERROR,...e)}}const qre=(t,e)=>e.some(n=>t instanceof n);let DB,MB;function Vre(){return DB||(DB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kre(){return MB||(MB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dz=new WeakMap,f2=new WeakMap,hz=new WeakMap,cR=new WeakMap,U5=new WeakMap;function Yre(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n($h(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dz.set(n,t)}).catch(()=>{}),U5.set(e,t),e}function Qre(t){if(f2.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});f2.set(t,e)}let p2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return f2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hz.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $h(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jre(t){p2=t(p2)}function Zre(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lR(this),e,...n);return hz.set(r,e.sort?e.sort():[e]),$h(r)}:Kre().includes(t)?function(...e){return t.apply(lR(this),e),$h(dz.get(this))}:function(...e){return $h(t.apply(lR(this),e))}}function Xre(t){return typeof t=="function"?Zre(t):(t instanceof IDBTransaction&&Qre(t),qre(t,Vre())?new Proxy(t,p2):t)}function $h(t){if(t instanceof IDBRequest)return Yre(t);if(cR.has(t))return cR.get(t);const e=Xre(t);return e!==t&&(cR.set(t,e),U5.set(e,t)),e}const lR=t=>U5.get(t);function ese(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=$h(o);return r&&o.addEventListener("upgradeneeded",c=>{r($h(o.result),c.oldVersion,c.newVersion,$h(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",l=>s(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const tse=["get","getKey","getAll","getAllKeys","count"],nse=["put","add","delete","clear"],uR=new Map;function LB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uR.get(e))return uR.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=nse.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tse.includes(n)))return;const i=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let l=c.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),s&&c.done]))[0]};return uR.set(e,i),i}Jre(t=>({...t,get:(e,n,r)=>LB(e,n)||t.get(e,n,r),has:(e,n)=>!!LB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sse(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sse(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const g2="@firebase/app",UB="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new uz("@firebase/app"),ise="@firebase/app-compat",ose="@firebase/analytics-compat",ase="@firebase/analytics",cse="@firebase/app-check-compat",lse="@firebase/app-check",use="@firebase/auth",dse="@firebase/auth-compat",hse="@firebase/database",fse="@firebase/data-connect",pse="@firebase/database-compat",gse="@firebase/functions",mse="@firebase/functions-compat",yse="@firebase/installations",wse="@firebase/installations-compat",bse="@firebase/messaging",vse="@firebase/messaging-compat",Ese="@firebase/performance",Cse="@firebase/performance-compat",_se="@firebase/remote-config",Ase="@firebase/remote-config-compat",Sse="@firebase/storage",xse="@firebase/storage-compat",Ise="@firebase/firestore",Nse="@firebase/vertexai-preview",Tse="@firebase/firestore-compat",Rse="firebase",Pse="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2="[DEFAULT]",Ose={[g2]:"fire-core",[ise]:"fire-core-compat",[ase]:"fire-analytics",[ose]:"fire-analytics-compat",[lse]:"fire-app-check",[cse]:"fire-app-check-compat",[use]:"fire-auth",[dse]:"fire-auth-compat",[hse]:"fire-rtdb",[fse]:"fire-data-connect",[pse]:"fire-rtdb-compat",[gse]:"fire-fn",[mse]:"fire-fn-compat",[yse]:"fire-iid",[wse]:"fire-iid-compat",[bse]:"fire-fcm",[vse]:"fire-fcm-compat",[Ese]:"fire-perf",[Cse]:"fire-perf-compat",[_se]:"fire-rc",[Ase]:"fire-rc-compat",[Sse]:"fire-gcs",[xse]:"fire-gcs-compat",[Ise]:"fire-fst",[Tse]:"fire-fst-compat",[Nse]:"fire-vertex","fire-js":"fire-js",[Rse]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map,kse=new Map,y2=new Map;function BB(t,e){try{t.container.addComponent(e)}catch(n){ed.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function QS(t){const e=t.name;if(y2.has(e))return ed.debug(`There were multiple attempts to register component ${e}.`),!1;y2.set(e,t);for(const n of CE.values())BB(n,t);for(const n of kse.values())BB(n,t);return!0}function Dse(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mse={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fh=new cz("app","Firebase",Mse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lse{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new EE("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fh.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Use=Pse;function fz(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:m2,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Fh.create("bad-app-name",{appName:String(s)});if(n||(n=oz()),!n)throw Fh.create("no-options");const i=CE.get(s);if(i){if(h2(n,i.options)&&h2(r,i.config))return i;throw Fh.create("duplicate-app",{appName:s})}const o=new jre(s);for(const c of y2.values())o.addComponent(c);const a=new Lse(n,r,o);return CE.set(s,a),a}function pz(t=m2){const e=CE.get(t);if(!e&&t===m2&&oz())return fz();if(!e)throw Fh.create("no-app",{appName:t});return e}function Bse(){return Array.from(CE.values())}function Uy(t,e,n){var r;let s=(r=Ose[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ed.warn(a.join(" "));return}QS(new EE(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $se="firebase-heartbeat-database",Fse=1,_E="firebase-heartbeat-store";let dR=null;function gz(){return dR||(dR=ese($se,Fse,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_E)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fh.create("idb-open",{originalErrorMessage:t.message})})),dR}async function jse(t){try{const n=(await gz()).transaction(_E),r=await n.objectStore(_E).get(mz(t));return await n.done,r}catch(e){if(e instanceof A_)ed.warn(e.message);else{const n=Fh.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ed.warn(n.message)}}}async function $B(t,e){try{const r=(await gz()).transaction(_E,"readwrite");await r.objectStore(_E).put(e,mz(t)),await r.done}catch(n){if(n instanceof A_)ed.warn(n.message);else{const r=Fh.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ed.warn(r.message)}}}function mz(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wse=1024,zse=30*24*60*60*1e3;class Hse{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qse(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=FB();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zse}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ed.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=FB(),{heartbeatsToSend:r,unsentEntries:s}=Gse(this._heartbeatsCache.heartbeats),i=KS(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ed.warn(n),""}}}function FB(){return new Date().toISOString().substring(0,10)}function Gse(t,e=Wse){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),jB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),jB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qse{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nre()?Tre().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jse(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $B(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return $B(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jB(t){return KS(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vse(t){QS(new EE("platform-logger",e=>new rse(e),"PRIVATE")),QS(new EE("heartbeat",e=>new Hse(e),"PRIVATE")),Uy(g2,UB,t),Uy(g2,UB,"esm2017"),Uy("fire-js","")}Vse("");var Kse="firebase",Yse="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Uy(Kse,Yse,"app");var WB={};const zB="@firebase/database",HB="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yz="";function Qse(t){yz=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jse{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Kr(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:vE(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zse{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return hd(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wz=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Jse(e)}}catch{}return new Zse},mp=wz("localStorage"),Xse=wz("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new uz("@firebase/database"),eie=function(){let t=1;return function(){return t++}}(),bz=function(t){const e=Ure(t),n=new Lre;n.update(e);const r=n.digest();return M5.encodeByteArray(r)},S_=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=S_.apply(null,r):typeof r=="object"?e+=Kr(r):e+=r,e+=" "}return e};let Fv=null,GB=!0;const tie=function(t,e){Ae(!0,"Can't turn on custom loggers persistently."),By.logLevel=Zn.VERBOSE,Fv=By.log.bind(By)},Zs=function(...t){if(GB===!0&&(GB=!1,Fv===null&&Xse.get("logging_enabled")===!0&&tie()),Fv){const e=S_.apply(null,t);Fv(e)}},x_=function(t){return function(...e){Zs(t,...e)}},w2=function(...t){const e="FIREBASE INTERNAL ERROR: "+S_(...t);By.error(e)},td=function(...t){const e=`FIREBASE FATAL ERROR: ${S_(...t)}`;throw By.error(e),new Error(e)},io=function(...t){const e="FIREBASE WARNING: "+S_(...t);By.warn(e)},nie=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&io("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vz=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},rie=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},rw="[MIN_NAME]",bg="[MAX_NAME]",Qw=function(t,e){if(t===e)return 0;if(t===rw||e===bg)return-1;if(e===rw||t===bg)return 1;{const n=qB(t),r=qB(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},sie=function(t,e){return t===e?0:t<e?-1:1},Ob=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Kr(e))},B5=function(t){if(typeof t!="object"||t===null)return Kr(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Kr(e[r]),n+=":",n+=B5(t[e[r]]);return n+="}",n},Ez=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let s=0;s<n;s+=e)s+e>n?r.push(t.substring(s,n)):r.push(t.substring(s,s+e));return r};function fo(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Cz=function(t){Ae(!vz(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let s,i,o,a,c;t===0?(i=0,o=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),i=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(i=0,o=Math.round(t/Math.pow(2,1-r-n))));const l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(i%2?1:0),i=Math.floor(i/2);l.push(s?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},iie=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oie=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function aie(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const cie=new RegExp("^-?(0*)\\d{1,10}$"),lie=-2147483648,uie=2147483647,qB=function(t){if(cie.test(t)){const e=Number(t);if(e>=lie&&e<=uie)return e}return null},Jw=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw io("Exception was thrown by user callback.",n),e},Math.floor(0))}},die=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},jv=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){io(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fie{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Zs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',io(e)}}class nS{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}nS.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $5="5",_z="v",Az="s",Sz="r",xz="f",Iz=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Nz="ls",Tz="p",b2="ac",Rz="websocket",Pz="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,n,r,s,i=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mp.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function pie(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function kz(t,e,n){Ae(typeof e=="string","typeof type must == string"),Ae(typeof n=="object","typeof params must == object");let r;if(e===Rz)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Pz)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);pie(t)&&(n.ns=t.namespace);const s=[];return fo(n,(i,o)=>{s.push(i+"="+o)}),r+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gie{constructor(){this.counters_={}}incrementCounter(e,n=1){hd(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return mre(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={},fR={};function F5(t){const e=t.toString();return hR[e]||(hR[e]=new gie),hR[e]}function mie(t,e){const n=t.toString();return fR[n]||(fR[n]=e()),fR[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yie{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<r.length;++s)r[s]&&Jw(()=>{this.onMessage_(r[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB="start",wie="close",bie="pLPCommand",vie="pRTLPCB",Dz="id",Mz="pw",Lz="ser",Eie="cb",Cie="seg",_ie="ts",Aie="d",Sie="dframe",Uz=1870,Bz=30,xie=Uz-Bz,Iie=25e3,Nie=3e4;class py{constructor(e,n,r,s,i,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=x_(e),this.stats_=F5(n),this.urlFn=c=>(this.appCheckToken&&(c[b2]=this.appCheckToken),kz(n,Pz,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new yie(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Nie)),rie(()=>{if(this.isClosed_)return;this.scriptTagHolder=new j5((...i)=>{const[o,a,c,l,u]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===VB)this.id=a,this.password=c;else if(o===wie)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,a]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={};r[VB]="t",r[Lz]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Eie]=this.scriptTagHolder.uniqueCallbackIdentifier),r[_z]=$5,this.transportSessionId&&(r[Az]=this.transportSessionId),this.lastSessionId&&(r[Nz]=this.lastSessionId),this.applicationId&&(r[Tz]=this.applicationId),this.appCheckToken&&(r[b2]=this.appCheckToken),typeof location<"u"&&location.hostname&&Iz.test(location.hostname)&&(r[Sz]=xz);const s=this.urlFn(r);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){py.forceAllow_=!0}static forceDisallow(){py.forceDisallow_=!0}static isAvailable(){return py.forceAllow_?!0:!py.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!iie()&&!oie()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Kr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=rz(n),s=Ez(r,xie);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[Sie]="t",r[Dz]=e,r[Mz]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Kr(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class j5{constructor(e,n,r,s){this.onDisconnect=r,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=eie(),window[bie+this.uniqueCallbackIdentifier]=e,window[vie+this.uniqueCallbackIdentifier]=n,this.myIFrame=j5.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Zs("frame writing exception"),a.stack&&Zs(a.stack),Zs(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Zs("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Dz]=this.myID,e[Mz]=this.myPW,e[Lz]=this.currentSerial;let n=this.urlFn(e),r="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Bz+r.length<=Uz;){const o=this.pendingSegs.shift();r=r+"&"+Cie+s+"="+o.seg+"&"+_ie+s+"="+o.ts+"&"+Aie+s+"="+o.d,s++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(r,Math.floor(Iie)),i=()=>{clearTimeout(s),r()};this.addTag(e,i)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const s=r.readyState;(!s||s==="loaded"||s==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Zs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tie=16384,Rie=45e3;let JS=null;typeof MozWebSocket<"u"?JS=MozWebSocket:typeof WebSocket<"u"&&(JS=WebSocket);class wc{constructor(e,n,r,s,i,o,a){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=x_(this.connId),this.stats_=F5(n),this.connURL=wc.connectionURL_(n,o,a,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,i){const o={};return o[_z]=$5,typeof location<"u"&&location.hostname&&Iz.test(location.hostname)&&(o[Sz]=xz),n&&(o[Az]=n),r&&(o[Nz]=r),s&&(o[b2]=s),i&&(o[Tz]=i),kz(e,Rz,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mp.set("previous_websocket_failure",!0);try{let r;Ire(),this.mySock=new JS(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){wc.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&JS!==null&&!wc.forceDisallow_}static previouslyFailed(){return mp.isInMemoryStorage||mp.get("previous_websocket_failure")===!0}markConnectionHealthy(){mp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=vE(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Ae(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=Kr(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Ez(n,Tie);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Rie))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}wc.responsesRequiredToBeHealthy=2;wc.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[py,wc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=wc&&wc.isAvailable();let r=n&&!wc.previouslyFailed();if(e.webSocketOnly&&(n||io("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[wc];else{const s=this.transports_=[];for(const i of AE.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);AE.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}AE.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pie=6e4,Oie=5e3,kie=10*1024,Die=100*1024,pR="t",KB="d",Mie="s",YB="r",Lie="e",QB="o",JB="a",ZB="n",XB="p",Uie="h";class Bie{constructor(e,n,r,s,i,o,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=x_("c:"+this.id+":"),this.transportManager_=new AE(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=jv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Die?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kie?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(pR in e){const n=e[pR];n===JB?this.upgradeIfSecondaryHealthy_():n===YB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===QB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Ob("t",e),r=Ob("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:XB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:JB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ZB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Ob("t",e),r=Ob("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Ob(pR,e);if(KB in e){const r=e[KB];if(n===Uie){const s=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===ZB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Mie?this.onConnectionShutdown_(r):n===YB?this.onReset_(r):n===Lie?w2("Server Error: "+r):n===QB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):w2("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),$5!==r&&io("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),jv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Pie))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Oie))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:XB,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{put(e,n,r,s){}merge(e,n,r,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fz=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Ae(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let s=0;s<r.length;s++)r[s].callback.apply(r[s].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const s=this.getInitialEvent(e);s&&n.apply(r,s)}off(e,n,r){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let i=0;i<s.length;i++)if(s[i].callback===n&&(!r||r===s[i].context)){s.splice(i,1);return}}validateEventType_(e){Ae(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends Fz{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!az()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ZS}getInitialEvent(e){return Ae(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$=32,t$=768;class Vn{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[r]=this.pieces_[s],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function yn(){return new Vn("")}function Vt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function uf(t){return t.pieces_.length-t.pieceNum_}function er(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Vn(t.pieces_,e)}function jz(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function $ie(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Wz(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function zz(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Vn(e,0)}function Yr(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Vn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let s=0;s<r.length;s++)r[s].length>0&&n.push(r[s])}return new Vn(n,0)}function Jt(t){return t.pieceNum_>=t.pieces_.length}function wi(t,e){const n=Vt(t),r=Vt(e);if(n===null)return e;if(n===r)return wi(er(t),er(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function W5(t,e){if(uf(t)!==uf(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Cc(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(uf(t)>uf(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class Fie{constructor(e,n){this.errorPrefix_=n,this.parts_=Wz(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=YI(this.parts_[r]);Hz(this)}}function jie(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=YI(e),Hz(t)}function Wie(t){const e=t.parts_.pop();t.byteLength_-=YI(e),t.parts_.length>0&&(t.byteLength_-=1)}function Hz(t){if(t.byteLength_>t$)throw new Error(t.errorPrefix_+"has a key path longer than "+t$+" bytes ("+t.byteLength_+").");if(t.parts_.length>e$)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e$+") or object contains a cycle "+Jf(t))}function Jf(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5 extends Fz{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new z5}getInitialEvent(e){return Ae(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=1e3,zie=60*5*1e3,n$=30*1e3,Hie=1.3,Gie=3e4,qie="server_kill",r$=3;class Hu extends $z{constructor(e,n,r,s,i,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Hu.nextPersistentConnectionId_++,this.log_=x_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=kb,this.maxReconnectDelay_=zie,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");z5.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&ZS.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const s=++this.requestNumber_,i={r:s,a:e,b:n};this.log_(Kr(i)),Ae(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const n=new KI,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),n.promise}listen(e,n,r,s){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ae(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);const i={p:r},o="q";e.tag&&(i.q=n._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest(o,i,a=>{const c=a.d,l=a.s;Hu.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",a),l!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(l,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&hd(e,"w")){const r=nw(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',i=n._path.toString();io(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Dre(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=n$)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=kre(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{const i=s.s,o=s.d||"error";this.authToken_===e&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),Ae(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);const i={p:e},o="n";s&&(i.q=r,i.t=s),this.sendRequest(o,i)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){const i={p:n,d:r};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,i){this.initConnection_();const o={p:n,d:r};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:s}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,i=>{this.log_(n+" response",i),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const i=r.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Kr(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):w2("Unrecognized action received from server: "+Kr(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Ae(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Gie&&(this.reconnectDelay_=kb),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Hie)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Hu.nextConnectionId_++,i=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,r())},l=function(d){Ae(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(d)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,h]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?Zs("getToken() completed but was canceled"):(Zs("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=h&&h.token,a=new Bie(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,f=>{io(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(qie)},i))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&io(d),c())}}}interrupt(e){Zs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Zs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],OB(this.interruptReasons_)&&(this.reconnectDelay_=kb,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(i=>B5(i)).join("$"):r="default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){const r=new Vn(e).toString();let s;if(this.listens.has(r)){const i=this.listens.get(r);s=i.get(n),i.delete(n),i.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){Zs("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=r$&&(this.reconnectDelay_=n$,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Zs("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=r$&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yz.replace(/\./g,"-")]=1,az()?e["framework.cordova"]=1:xre()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ZS.getInstance().currentlyOnline();return OB(this.interruptReasons_)&&e}}Hu.nextPersistentConnectionId_=0;Hu.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Kt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new Kt(rw,e),s=new Kt(rw,n);return this.compare(r,s)!==0}minPost(){return Kt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M1;class Gz extends QI{static get __EMPTY_NODE(){return M1}static set __EMPTY_NODE(e){M1=e}compare(e,n){return Qw(e.name,n.name)}isDefinedOn(e){throw Kw("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(bg,M1)}makePost(e,n){return Ae(typeof e=="string","KeyIndex indexValue must always be a string."),new Kt(e,M1)}toString(){return".key"}}const $y=new Gz;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n,r,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,s&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ls{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ls.RED,this.left=s??no.EMPTY_NODE,this.right=i??no.EMPTY_NODE}copy(e,n,r,s,i){return new ls(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return no.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return no.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ls.RED=!0;ls.BLACK=!1;class Vie{copy(e,n,r,s,i){return this}insert(e,n,r){return new ls(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class no{constructor(e,n=no.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new no(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ls.BLACK,null,null))}remove(e){return new no(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ls.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,s=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return s?s.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(s=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new L1(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new L1(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new L1(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new L1(this.root_,null,this.comparator_,!0,e)}}no.EMPTY_NODE=new Vie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kie(t,e){return Qw(t.name,e.name)}function H5(t,e){return Qw(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v2;function Yie(t){v2=t}const qz=function(t){return typeof t=="number"?"number:"+Cz(t):"string:"+t},Vz=function(t){if(t.isLeafNode()){const e=t.val();Ae(typeof e=="string"||typeof e=="number"||typeof e=="object"&&hd(e,".sv"),"Priority must be a string or number.")}else Ae(t===v2||t.isEmpty(),"priority of unexpected type.");Ae(t===v2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s$;class cs{constructor(e,n=cs.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Ae(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Vz(this.priorityNode_)}static set __childrenNodeConstructor(e){s$=e}static get __childrenNodeConstructor(){return s$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new cs(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:cs.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Jt(e)?this:Vt(e)===".priority"?this.priorityNode_:cs.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:cs.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=Vt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(Ae(r!==".priority"||uf(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,cs.__childrenNodeConstructor.EMPTY_NODE.updateChild(er(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+qz(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Cz(this.value_):e+=this.value_,this.lazyHash_=bz(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===cs.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof cs.__childrenNodeConstructor?-1:(Ae(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,s=cs.VALUE_TYPE_ORDER.indexOf(n),i=cs.VALUE_TYPE_ORDER.indexOf(r);return Ae(s>=0,"Unknown leaf type: "+n),Ae(i>=0,"Unknown leaf type: "+r),s===i?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}cs.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kz,Yz;function Qie(t){Kz=t}function Jie(t){Yz=t}class Zie extends QI{compare(e,n){const r=e.node.getPriority(),s=n.node.getPriority(),i=r.compareTo(s);return i===0?Qw(e.name,n.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(bg,new cs("[PRIORITY-POST]",Yz))}makePost(e,n){const r=Kz(e);return new Kt(n,new cs("[PRIORITY-POST]",r))}toString(){return".priority"}}const Sr=new Zie;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xie=Math.log(2);class eoe{constructor(e){const n=i=>parseInt(Math.log(i)/Xie,10),r=i=>parseInt(Array(i+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const s=r(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XS=function(t,e,n,r){t.sort(e);const s=function(c,l){const u=l-c;let d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new ls(h,d.node,ls.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=s(c,f),g=s(f+1,l);return d=t[f],h=n?n(d):d,new ls(h,d.node,ls.BLACK,p,g)}},i=function(c){let l=null,u=null,d=t.length;const h=function(p,g){const w=d-p,m=d;d-=p;const b=s(w+1,m),v=t[w],A=n?n(v):v;f(new ls(A,v.node,g,null,b))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),w=Math.pow(2,c.count-(p+1));g?h(w,ls.BLACK):(h(w,ls.BLACK),h(w,ls.RED))}return u},o=new eoe(t.length),a=i(o);return new no(r||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gR;const Im={};class Bu{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Ae(Im&&Sr,"ChildrenNode.ts has not been loaded"),gR=gR||new Bu({".priority":Im},{".priority":Sr}),gR}get(e){const n=nw(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof no?n:null}hasIndex(e){return hd(this.indexSet_,e.toString())}addIndex(e,n){Ae(e!==$y,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let s=!1;const i=n.getIterator(Kt.Wrap);let o=i.getNext();for(;o;)s=s||e.isDefinedOn(o.node),r.push(o),o=i.getNext();let a;s?a=XS(r,e.getCompare()):a=Im;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=a,new Bu(u,l)}addToIndexes(e,n){const r=YS(this.indexes_,(s,i)=>{const o=nw(this.indexSet_,i);if(Ae(o,"Missing index implementation for "+i),s===Im)if(o.isDefinedOn(e.node)){const a=[],c=n.getIterator(Kt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),XS(a,o.getCompare())}else return Im;else{const a=n.get(e.name);let c=s;return a&&(c=c.remove(new Kt(e.name,a))),c.insert(e,e.node)}});return new Bu(r,this.indexSet_)}removeFromIndexes(e,n){const r=YS(this.indexes_,s=>{if(s===Im)return s;{const i=n.get(e.name);return i?s.remove(new Kt(e.name,i)):s}});return new Bu(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Db;class Ct{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Vz(this.priorityNode_),this.children_.isEmpty()&&Ae(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Db||(Db=new Ct(new no(H5),null,Bu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Db}updatePriority(e){return this.children_.isEmpty()?this:new Ct(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Db:n}}getChild(e){const n=Vt(e);return n===null?this:this.getImmediateChild(n).getChild(er(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(Ae(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new Kt(e,n);let s,i;n.isEmpty()?(s=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),i=this.indexMap_.addToIndexes(r,this.children_));const o=s.isEmpty()?Db:this.priorityNode_;return new Ct(s,o,i)}}updateChild(e,n){const r=Vt(e);if(r===null)return n;{Ae(Vt(e)!==".priority"||uf(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(er(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,s=0,i=!0;if(this.forEachChild(Sr,(o,a)=>{n[o]=a.val(e),r++,i&&Ct.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!e&&i&&s<2*r){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+qz(this.getPriority().val())+":"),this.forEachChild(Sr,(n,r)=>{const s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":bz(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const s=this.resolveIndex_(r);if(s){const i=s.getPredecessorKey(new Kt(e,n));return i?i.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Kt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Kt(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Kt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Kt.Wrap);let i=s.peek();for(;i!=null&&n.compare(i,e)>0;)s.getNext(),i=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===I_?-1:0}withIndex(e){if(e===$y||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new Ct(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===$y||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Sr),s=n.getIterator(Sr);let i=r.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=r.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===$y?null:this.indexMap_.get(e.toString())}}Ct.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class toe extends Ct{constructor(){super(new no(H5),Ct.EMPTY_NODE,Bu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ct.EMPTY_NODE}isEmpty(){return!1}}const I_=new toe;Object.defineProperties(Kt,{MIN:{value:new Kt(rw,Ct.EMPTY_NODE)},MAX:{value:new Kt(bg,I_)}});Gz.__EMPTY_NODE=Ct.EMPTY_NODE;cs.__childrenNodeConstructor=Ct;Yie(I_);Jie(I_);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const noe=!0;function hs(t,e=null){if(t===null)return Ct.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Ae(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new cs(n,hs(e))}if(!(t instanceof Array)&&noe){const n=[];let r=!1;if(fo(t,(o,a)=>{if(o.substring(0,1)!=="."){const c=hs(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Kt(o,c)))}}),n.length===0)return Ct.EMPTY_NODE;const i=XS(n,Kie,o=>o.name,H5);if(r){const o=XS(n,Sr.getCompare());return new Ct(i,hs(e),new Bu({".priority":o},{".priority":Sr}))}else return new Ct(i,hs(e),Bu.Default)}else{let n=Ct.EMPTY_NODE;return fo(t,(r,s)=>{if(hd(t,r)&&r.substring(0,1)!=="."){const i=hs(s);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(r,i))}}),n.updatePriority(hs(e))}}Qie(hs);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class roe extends QI{constructor(e){super(),this.indexPath_=e,Ae(!Jt(e)&&Vt(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),s=this.extractChild(n.node),i=r.compareTo(s);return i===0?Qw(e.name,n.name):i}makePost(e,n){const r=hs(e),s=Ct.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(n,s)}maxPost(){const e=Ct.EMPTY_NODE.updateChild(this.indexPath_,I_);return new Kt(bg,e)}toString(){return Wz(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class soe extends QI{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Qw(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,n){const r=hs(e);return new Kt(n,r)}toString(){return".value"}}const ioe=new soe;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(t){return{type:"value",snapshotNode:t}}function sw(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function SE(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function xE(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function ooe(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.index_=e}updateChild(e,n,r,s,i,o){Ae(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(s).equals(r.getChild(s))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(SE(n,a)):Ae(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(sw(n,r)):o.trackChildChange(xE(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(Sr,(s,i)=>{n.hasChild(s)||r.trackChildChange(SE(s,i))}),n.isLeafNode()||n.forEachChild(Sr,(s,i)=>{if(e.hasChild(s)){const o=e.getImmediateChild(s);o.equals(i)||r.trackChildChange(xE(s,i,o))}else r.trackChildChange(sw(s,i))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Ct.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.indexedFilter_=new G5(e.getIndex()),this.index_=e.getIndex(),this.startPost_=IE.getStartPost_(e),this.endPost_=IE.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,s,i,o){return this.matches(new Kt(n,r))||(r=Ct.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,s,i,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Ct.EMPTY_NODE);let s=n.withIndex(this.index_);s=s.updatePriority(Ct.EMPTY_NODE);const i=this;return n.forEachChild(Sr,(o,a)=>{i.matches(new Kt(o,a))||(s=s.updateImmediateChild(o,Ct.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aoe{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new IE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,s,i,o){return this.rangedFilter_.matches(new Kt(n,r))||(r=Ct.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,s,i,o):this.fullLimitUpdateChild_(e,n,r,i,o)}updateFullNode(e,n,r){let s;if(n.isLeafNode()||n.isEmpty())s=Ct.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){s=Ct.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const a=i.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))s=s.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{s=n.withIndex(this.index_),s=s.updatePriority(Ct.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const a=i.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:s=s.updateImmediateChild(a.name,Ct.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,s,i){let o;if(this.reverse_){const d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();const a=e;Ae(a.numChildren()===this.limit_,"");const c=new Kt(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=s.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=s.getChildAfterChild(this.index_,h,this.reverse_);const f=h==null?1:o(h,c);if(u&&!r.isEmpty()&&f>=0)return i!=null&&i.trackChildChange(xE(n,r,d)),a.updateImmediateChild(n,r);{i!=null&&i.trackChildChange(SE(n,d));const g=a.updateImmediateChild(n,Ct.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(i!=null&&i.trackChildChange(sw(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}else return r.isEmpty()?e:u&&o(l,c)>=0?(i!=null&&(i.trackChildChange(SE(l.name,l.node)),i.trackChildChange(sw(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,Ct.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Sr}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ae(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ae(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rw}hasEnd(){return this.endSet_}getIndexEndValue(){return Ae(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ae(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:bg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ae(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Sr}copy(){const e=new q5;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function coe(t){return t.loadsAllData()?new G5(t.getIndex()):t.hasLimit()?new aoe(t):new IE(t)}function i$(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Sr?n="$priority":t.index_===ioe?n="$value":t.index_===$y?n="$key":(Ae(t.index_ instanceof roe,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Kr(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=Kr(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Kr(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Kr(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Kr(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function o$(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Sr&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex extends $z{constructor(e,n,r,s){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=s,this.log_=x_("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Ae(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,s){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=ex.getListenId_(e,r),a={};this.listens_[o]=a;const c=i$(e._queryParams);this.restRequest_(i+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(i,d,!1,r),nw(this.listens_,o)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",s(h,null)}})}unlisten(e,n){const r=ex.getListenId_(e,n);delete this.listens_[r]}get(e){const n=i$(e._queryParams),r=e._path.toString(),s=new KI;return this.restRequest_(r+".json",n,(i,o)=>{let a=o;i===404&&(a=null,i=null),i===null?(this.onDataUpdate_(r,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(n.auth=s.accessToken),i&&i.token&&(n.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Mre(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=vE(a.responseText)}catch{io("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&io("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class loe{constructor(){this.rootNode_=Ct.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(){return{value:null,children:new Map}}function Jz(t,e,n){if(Jt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=Vt(e);t.children.has(r)||t.children.set(r,tx());const s=t.children.get(r);e=er(e),Jz(s,e,n)}}function E2(t,e,n){t.value!==null?n(e,t.value):uoe(t,(r,s)=>{const i=new Vn(e.toString()+"/"+r);E2(s,i,n)})}function uoe(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class doe{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&fo(this.last_,(r,s)=>{n[r]=n[r]-s}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=10*1e3,hoe=30*1e3,foe=5*60*1e3;class poe{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new doe(e);const r=a$+(hoe-a$)*Math.random();jv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;fo(e,(s,i)=>{i>0&&hd(this.statsToReport_,s)&&(n[s]=i,r=!0)}),r&&this.server_.reportStats(n),jv(this.reportStats_.bind(this),Math.floor(Math.random()*2*foe))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _c;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(_c||(_c={}));function Zz(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function V5(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function K5(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=_c.ACK_USER_WRITE,this.source=Zz()}operationForChild(e){if(Jt(this.path)){if(this.affectedTree.value!=null)return Ae(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Vn(e));return new nx(yn(),n,this.revert)}}else return Ae(Vt(this.path)===e,"operationForChild called for unrelated child."),new nx(er(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.source=e,this.path=n,this.type=_c.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new NE(this.source,yn()):new NE(this.source,er(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=_c.OVERWRITE}operationForChild(e){return Jt(this.path)?new vg(this.source,yn(),this.snap.getImmediateChild(e)):new vg(this.source,er(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=_c.MERGE}operationForChild(e){if(Jt(this.path)){const n=this.children.subtree(new Vn(e));return n.isEmpty()?null:n.value?new vg(this.source,yn(),n.value):new TE(this.source,yn(),n)}else return Ae(Vt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new TE(this.source,er(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Vt(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class goe{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function moe(t,e,n,r){const s=[],i=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(ooe(o.childName,o.snapshotNode))}),Mb(t,s,"child_removed",e,r,n),Mb(t,s,"child_added",e,r,n),Mb(t,s,"child_moved",i,r,n),Mb(t,s,"child_changed",e,r,n),Mb(t,s,"value",e,r,n),s}function Mb(t,e,n,r,s,i){const o=r.filter(a=>a.type===n);o.sort((a,c)=>woe(t,a,c)),o.forEach(a=>{const c=yoe(t,a,i);s.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function yoe(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function woe(t,e,n){if(e.childName==null||n.childName==null)throw Kw("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),s=new Kt(n.childName,n.snapshotNode);return t.index_.compare(r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t,e){return{eventCache:t,serverCache:e}}function Wv(t,e,n,r){return JI(new df(e,n,r),t.serverCache)}function Xz(t,e,n,r){return JI(t.eventCache,new df(e,n,r))}function rx(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Eg(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mR;const boe=()=>(mR||(mR=new no(sie)),mR);class ir{constructor(e,n=boe()){this.value=e,this.children=n}static fromObject(e){let n=new ir(null);return fo(e,(r,s)=>{n=n.set(new Vn(r),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:yn(),value:this.value};if(Jt(e))return null;{const r=Vt(e),s=this.children.get(r);if(s!==null){const i=s.findRootMostMatchingPathAndValue(er(e),n);return i!=null?{path:Yr(new Vn(r),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const n=Vt(e),r=this.children.get(n);return r!==null?r.subtree(er(e)):new ir(null)}}set(e,n){if(Jt(e))return new ir(n,this.children);{const r=Vt(e),i=(this.children.get(r)||new ir(null)).set(er(e),n),o=this.children.insert(r,i);return new ir(this.value,o)}}remove(e){if(Jt(e))return this.children.isEmpty()?new ir(null):new ir(null,this.children);{const n=Vt(e),r=this.children.get(n);if(r){const s=r.remove(er(e));let i;return s.isEmpty()?i=this.children.remove(n):i=this.children.insert(n,s),this.value===null&&i.isEmpty()?new ir(null):new ir(this.value,i)}else return this}}get(e){if(Jt(e))return this.value;{const n=Vt(e),r=this.children.get(n);return r?r.get(er(e)):null}}setTree(e,n){if(Jt(e))return n;{const r=Vt(e),i=(this.children.get(r)||new ir(null)).setTree(er(e),n);let o;return i.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,i),new ir(this.value,o)}}fold(e){return this.fold_(yn(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((s,i)=>{r[s]=i.fold_(Yr(e,s),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,yn(),n)}findOnPath_(e,n,r){const s=this.value?r(n,this.value):!1;if(s)return s;if(Jt(e))return null;{const i=Vt(e),o=this.children.get(i);return o?o.findOnPath_(er(e),Yr(n,i),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,yn(),n)}foreachOnPath_(e,n,r){if(Jt(e))return this;{this.value&&r(n,this.value);const s=Vt(e),i=this.children.get(s);return i?i.foreachOnPath_(er(e),Yr(n,s),r):new ir(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,n){this.children.inorderTraversal((r,s)=>{s.foreach_(Yr(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e){this.writeTree_=e}static empty(){return new xc(new ir(null))}}function zv(t,e,n){if(Jt(e))return new xc(new ir(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const s=r.path;let i=r.value;const o=wi(s,e);return i=i.updateChild(o,n),new xc(t.writeTree_.set(s,i))}else{const s=new ir(n),i=t.writeTree_.setTree(e,s);return new xc(i)}}}function c$(t,e,n){let r=t;return fo(n,(s,i)=>{r=zv(r,Yr(e,s),i)}),r}function l$(t,e){if(Jt(e))return xc.empty();{const n=t.writeTree_.setTree(e,new ir(null));return new xc(n)}}function C2(t,e){return Xg(t,e)!=null}function Xg(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(wi(n.path,e)):null}function u$(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Sr,(r,s)=>{e.push(new Kt(r,s))}):t.writeTree_.children.inorderTraversal((r,s)=>{s.value!=null&&e.push(new Kt(r,s.value))}),e}function jh(t,e){if(Jt(e))return t;{const n=Xg(t,e);return n!=null?new xc(new ir(n)):new xc(t.writeTree_.subtree(e))}}function _2(t){return t.writeTree_.isEmpty()}function iw(t,e){return eH(yn(),t.writeTree_,e)}function eH(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((s,i)=>{s===".priority"?(Ae(i.value!==null,"Priority writes must always be leaf nodes"),r=i.value):n=eH(Yr(t,s),i,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Yr(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t,e){return sH(e,t)}function voe(t,e,n,r,s){Ae(r>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:s}),s&&(t.visibleWrites=zv(t.visibleWrites,e,n)),t.lastWriteId=r}function Eoe(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function Coe(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);Ae(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let s=r.visible,i=!1,o=t.allWrites.length-1;for(;s&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&_oe(a,r.path)?s=!1:Cc(r.path,a.path)&&(i=!0)),o--}if(s){if(i)return Aoe(t),!0;if(r.snap)t.visibleWrites=l$(t.visibleWrites,r.path);else{const a=r.children;fo(a,c=>{t.visibleWrites=l$(t.visibleWrites,Yr(r.path,c))})}return!0}else return!1}function _oe(t,e){if(t.snap)return Cc(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Cc(Yr(t.path,n),e))return!0;return!1}function Aoe(t){t.visibleWrites=tH(t.allWrites,Soe,yn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Soe(t){return t.visible}function tH(t,e,n){let r=xc.empty();for(let s=0;s<t.length;++s){const i=t[s];if(e(i)){const o=i.path;let a;if(i.snap)Cc(n,o)?(a=wi(n,o),r=zv(r,a,i.snap)):Cc(o,n)&&(a=wi(o,n),r=zv(r,yn(),i.snap.getChild(a)));else if(i.children){if(Cc(n,o))a=wi(n,o),r=c$(r,a,i.children);else if(Cc(o,n))if(a=wi(o,n),Jt(a))r=c$(r,yn(),i.children);else{const c=nw(i.children,Vt(a));if(c){const l=c.getChild(er(a));r=zv(r,yn(),l)}}}else throw Kw("WriteRecord should have .snap or .children")}}return r}function nH(t,e,n,r,s){if(!r&&!s){const i=Xg(t.visibleWrites,e);if(i!=null)return i;{const o=jh(t.visibleWrites,e);if(_2(o))return n;if(n==null&&!C2(o,yn()))return null;{const a=n||Ct.EMPTY_NODE;return iw(o,a)}}}else{const i=jh(t.visibleWrites,e);if(!s&&_2(i))return n;if(!s&&n==null&&!C2(i,yn()))return null;{const o=function(l){return(l.visible||s)&&(!r||!~r.indexOf(l.writeId))&&(Cc(l.path,e)||Cc(e,l.path))},a=tH(t.allWrites,o,e),c=n||Ct.EMPTY_NODE;return iw(a,c)}}}function xoe(t,e,n){let r=Ct.EMPTY_NODE;const s=Xg(t.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(Sr,(i,o)=>{r=r.updateImmediateChild(i,o)}),r;if(n){const i=jh(t.visibleWrites,e);return n.forEachChild(Sr,(o,a)=>{const c=iw(jh(i,new Vn(o)),a);r=r.updateImmediateChild(o,c)}),u$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const i=jh(t.visibleWrites,e);return u$(i).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Ioe(t,e,n,r,s){Ae(r||s,"Either existingEventSnap or existingServerSnap must exist");const i=Yr(e,n);if(C2(t.visibleWrites,i))return null;{const o=jh(t.visibleWrites,i);return _2(o)?s.getChild(n):iw(o,s.getChild(n))}}function Noe(t,e,n,r){const s=Yr(e,n),i=Xg(t.visibleWrites,s);if(i!=null)return i;if(r.isCompleteForChild(n)){const o=jh(t.visibleWrites,s);return iw(o,r.getNode().getImmediateChild(n))}else return null}function Toe(t,e){return Xg(t.visibleWrites,e)}function Roe(t,e,n,r,s,i,o){let a;const c=jh(t.visibleWrites,e),l=Xg(c,yn());if(l!=null)a=l;else if(n!=null)a=iw(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],d=o.getCompare(),h=i?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let f=h.getNext();for(;f&&u.length<s;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Poe(){return{visibleWrites:xc.empty(),allWrites:[],lastWriteId:-1}}function sx(t,e,n,r){return nH(t.writeTree,t.treePath,e,n,r)}function Y5(t,e){return xoe(t.writeTree,t.treePath,e)}function d$(t,e,n,r){return Ioe(t.writeTree,t.treePath,e,n,r)}function ix(t,e){return Toe(t.writeTree,Yr(t.treePath,e))}function Ooe(t,e,n,r,s,i){return Roe(t.writeTree,t.treePath,e,n,r,s,i)}function Q5(t,e,n){return Noe(t.writeTree,t.treePath,e,n)}function rH(t,e){return sH(Yr(t.treePath,e),t.writeTree)}function sH(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class koe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;Ae(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ae(r!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(r);if(s){const i=s.type;if(n==="child_added"&&i==="child_removed")this.changeMap.set(r,xE(r,e.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&i==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&i==="child_changed")this.changeMap.set(r,SE(r,s.oldSnap));else if(n==="child_changed"&&i==="child_added")this.changeMap.set(r,sw(r,e.snapshotNode));else if(n==="child_changed"&&i==="child_changed")this.changeMap.set(r,xE(r,e.snapshotNode,s.oldSnap));else throw Kw("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Doe{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const iH=new Doe;class J5{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new df(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Q5(this.writes_,e,r)}}getChildAfterChild(e,n,r){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Eg(this.viewCache_),i=Ooe(this.writes_,s,n,1,r,e);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Moe(t){return{filter:t}}function Loe(t,e){Ae(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Ae(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Uoe(t,e,n,r,s){const i=new koe;let o,a;if(n.type===_c.OVERWRITE){const l=n;l.source.fromUser?o=A2(t,e,l.path,l.snap,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Jt(l.path),o=ox(t,e,l.path,l.snap,r,s,a,i))}else if(n.type===_c.MERGE){const l=n;l.source.fromUser?o=$oe(t,e,l.path,l.children,r,s,i):(Ae(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=S2(t,e,l.path,l.children,r,s,a,i))}else if(n.type===_c.ACK_USER_WRITE){const l=n;l.revert?o=Woe(t,e,l.path,r,s,i):o=Foe(t,e,l.path,l.affectedTree,r,s,i)}else if(n.type===_c.LISTEN_COMPLETE)o=joe(t,e,n.path,r,i);else throw Kw("Unknown operation type: "+n.type);const c=i.getChanges();return Boe(e,o,c),{viewCache:o,changes:c}}function Boe(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const s=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=rx(t);(n.length>0||!t.eventCache.isFullyInitialized()||s&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(Qz(rx(e)))}}function oH(t,e,n,r,s,i){const o=e.eventCache;if(ix(r,n)!=null)return e;{let a,c;if(Jt(n))if(Ae(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Eg(e),u=l instanceof Ct?l:Ct.EMPTY_NODE,d=Y5(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,i)}else{const l=sx(r,Eg(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,i)}else{const l=Vt(n);if(l===".priority"){Ae(uf(n)===1,"Can't have a priority with additional path components");const u=o.getNode();c=e.serverCache.getNode();const d=d$(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{const u=er(n);let d;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();const h=d$(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(l).updateChild(u,h):d=o.getNode().getImmediateChild(l)}else d=Q5(r,l,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),l,d,u,s,i):a=o.getNode()}}return Wv(e,a,o.isFullyInitialized()||Jt(n),t.filter.filtersNodes())}}function ox(t,e,n,r,s,i,o,a){const c=e.serverCache;let l;const u=o?t.filter:t.filter.getIndexedFilter();if(Jt(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Vt(n);if(!c.isCompleteForPath(n)&&uf(n)>1)return e;const p=er(n),w=c.getNode().getImmediateChild(f).updateChild(p,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,p,iH,null)}const d=Xz(e,l,c.isFullyInitialized()||Jt(n),u.filtersNodes()),h=new J5(s,d,i);return oH(t,d,n,s,h,a)}function A2(t,e,n,r,s,i,o){const a=e.eventCache;let c,l;const u=new J5(s,e,i);if(Jt(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Wv(e,l,!0,t.filter.filtersNodes());else{const d=Vt(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Wv(e,l,a.isFullyInitialized(),a.isFiltered());else{const h=er(n),f=a.getNode().getImmediateChild(d);let p;if(Jt(h))p=r;else{const g=u.getCompleteChild(d);g!=null?jz(h)===".priority"&&g.getChild(zz(h)).isEmpty()?p=g:p=g.updateChild(h,r):p=Ct.EMPTY_NODE}if(f.equals(p))c=e;else{const g=t.filter.updateChild(a.getNode(),d,p,h,u,o);c=Wv(e,g,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function h$(t,e){return t.eventCache.isCompleteForChild(e)}function $oe(t,e,n,r,s,i,o){let a=e;return r.foreach((c,l)=>{const u=Yr(n,c);h$(e,Vt(u))&&(a=A2(t,a,u,l,s,i,o))}),r.foreach((c,l)=>{const u=Yr(n,c);h$(e,Vt(u))||(a=A2(t,a,u,l,s,i,o))}),a}function f$(t,e,n){return n.foreach((r,s)=>{e=e.updateChild(r,s)}),e}function S2(t,e,n,r,s,i,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Jt(n)?l=r:l=new ir(null).setTree(n,r);const u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const f=e.serverCache.getNode().getImmediateChild(d),p=f$(t,f,h);c=ox(t,c,new Vn(d),p,s,i,o,a)}}),l.children.inorderTraversal((d,h)=>{const f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){const p=e.serverCache.getNode().getImmediateChild(d),g=f$(t,p,h);c=ox(t,c,new Vn(d),g,s,i,o,a)}}),c}function Foe(t,e,n,r,s,i,o){if(ix(s,n)!=null)return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Jt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ox(t,e,n,c.getNode().getChild(n),s,i,a,o);if(Jt(n)){let l=new ir(null);return c.getNode().forEachChild($y,(u,d)=>{l=l.set(new Vn(u),d)}),S2(t,e,n,l,s,i,a,o)}else return e}else{let l=new ir(null);return r.foreach((u,d)=>{const h=Yr(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),S2(t,e,n,l,s,i,a,o)}}function joe(t,e,n,r,s){const i=e.serverCache,o=Xz(e,i.getNode(),i.isFullyInitialized()||Jt(n),i.isFiltered());return oH(t,o,n,r,iH,s)}function Woe(t,e,n,r,s,i){let o;if(ix(r,n)!=null)return e;{const a=new J5(r,e,s),c=e.eventCache.getNode();let l;if(Jt(n)||Vt(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=sx(r,Eg(e));else{const d=e.serverCache.getNode();Ae(d instanceof Ct,"serverChildren would be complete if leaf node"),u=Y5(r,d)}u=u,l=t.filter.updateFullNode(c,u,i)}else{const u=Vt(n);let d=Q5(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,er(n),a,i):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Ct.EMPTY_NODE,er(n),a,i):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=sx(r,Eg(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,i)))}return o=e.serverCache.isFullyInitialized()||ix(r,yn())!=null,Wv(e,l,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zoe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,s=new G5(r.getIndex()),i=coe(r);this.processor_=Moe(i);const o=n.serverCache,a=n.eventCache,c=s.updateFullNode(Ct.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(Ct.EMPTY_NODE,a.getNode(),null),u=new df(c,o.isFullyInitialized(),s.filtersNodes()),d=new df(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=JI(d,u),this.eventGenerator_=new goe(this.query_)}get query(){return this.query_}}function Hoe(t){return t.viewCache_.serverCache.getNode()}function Goe(t){return rx(t.viewCache_)}function qoe(t,e){const n=Eg(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Jt(e)&&!n.getImmediateChild(Vt(e)).isEmpty())?n.getChild(e):null}function p$(t){return t.eventRegistrations_.length===0}function Voe(t,e){t.eventRegistrations_.push(e)}function g$(t,e,n){const r=[];if(n){Ae(e==null,"A cancel should cancel all event registrations.");const s=t.query._path;t.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(n,s);o&&r.push(o)})}if(e){let s=[];for(let i=0;i<t.eventRegistrations_.length;++i){const o=t.eventRegistrations_[i];if(!o.matches(e))s.push(o);else if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(i+1));break}}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function m$(t,e,n,r){e.type===_c.MERGE&&e.source.queryId!==null&&(Ae(Eg(t.viewCache_),"We should always have a full cache before handling merges"),Ae(rx(t.viewCache_),"Missing event cache, even though we have a server cache"));const s=t.viewCache_,i=Uoe(t.processor_,s,e,n,r);return Loe(t.processor_,i.viewCache),Ae(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=i.viewCache,aH(t,i.changes,i.viewCache.eventCache.getNode(),null)}function Koe(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Sr,(i,o)=>{r.push(sw(i,o))}),n.isFullyInitialized()&&r.push(Qz(n.getNode())),aH(t,r,n.getNode(),e)}function aH(t,e,n,r){const s=r?[r]:t.eventRegistrations_;return moe(t.eventGenerator_,e,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ax;class cH{constructor(){this.views=new Map}}function Yoe(t){Ae(!ax,"__referenceConstructor has already been defined"),ax=t}function Qoe(){return Ae(ax,"Reference.ts has not been loaded"),ax}function Joe(t){return t.views.size===0}function Z5(t,e,n,r){const s=e.source.queryId;if(s!==null){const i=t.views.get(s);return Ae(i!=null,"SyncTree gave us an op for an invalid query."),m$(i,e,n,r)}else{let i=[];for(const o of t.views.values())i=i.concat(m$(o,e,n,r));return i}}function lH(t,e,n,r,s){const i=e._queryIdentifier,o=t.views.get(i);if(!o){let a=sx(n,s?r:null),c=!1;a?c=!0:r instanceof Ct?(a=Y5(n,r),c=!1):(a=Ct.EMPTY_NODE,c=!1);const l=JI(new df(a,c,!1),new df(r,s,!1));return new zoe(e,l)}return o}function Zoe(t,e,n,r,s,i){const o=lH(t,e,r,s,i);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Voe(o,n),Koe(o,n)}function Xoe(t,e,n,r){const s=e._queryIdentifier,i=[];let o=[];const a=hf(t);if(s==="default")for(const[c,l]of t.views.entries())o=o.concat(g$(l,n,r)),p$(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||i.push(l.query));else{const c=t.views.get(s);c&&(o=o.concat(g$(c,n,r)),p$(c)&&(t.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return a&&!hf(t)&&i.push(new(Qoe())(e._repo,e._path)),{removed:i,events:o}}function uH(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Wh(t,e){let n=null;for(const r of t.views.values())n=n||qoe(r,e);return n}function dH(t,e){if(e._queryParams.loadsAllData())return XI(t);{const r=e._queryIdentifier;return t.views.get(r)}}function hH(t,e){return dH(t,e)!=null}function hf(t){return XI(t)!=null}function XI(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx;function eae(t){Ae(!cx,"__referenceConstructor has already been defined"),cx=t}function tae(){return Ae(cx,"Reference.ts has not been loaded"),cx}let nae=1;class y${constructor(e){this.listenProvider_=e,this.syncPointTree_=new ir(null),this.pendingWriteTree_=Poe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fH(t,e,n,r,s){return voe(t.pendingWriteTree_,e,n,r,s),s?T_(t,new vg(Zz(),e,n)):[]}function yp(t,e,n=!1){const r=Eoe(t.pendingWriteTree_,e);if(Coe(t.pendingWriteTree_,e)){let i=new ir(null);return r.snap!=null?i=i.set(yn(),!0):fo(r.children,o=>{i=i.set(new Vn(o),!0)}),T_(t,new nx(r.path,i,n))}else return[]}function N_(t,e,n){return T_(t,new vg(V5(),e,n))}function rae(t,e,n){const r=ir.fromObject(n);return T_(t,new TE(V5(),e,r))}function sae(t,e){return T_(t,new NE(V5(),e))}function iae(t,e,n){const r=eM(t,n);if(r){const s=tM(r),i=s.path,o=s.queryId,a=wi(i,e),c=new NE(K5(o),a);return nM(t,i,c)}else return[]}function lx(t,e,n,r,s=!1){const i=e._path,o=t.syncPointTree_.get(i);let a=[];if(o&&(e._queryIdentifier==="default"||hH(o,e))){const c=Xoe(o,e,n,r);Joe(o)&&(t.syncPointTree_=t.syncPointTree_.remove(i));const l=c.removed;if(a=c.events,!s){const u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(i,(h,f)=>hf(f));if(u&&!d){const h=t.syncPointTree_.subtree(i);if(!h.isEmpty()){const f=cae(h);for(let p=0;p<f.length;++p){const g=f[p],w=g.query,m=yH(t,g);t.listenProvider_.startListening(Hv(w),RE(t,w),m.hashFn,m.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(Hv(e),null):l.forEach(h=>{const f=t.queryToTagMap.get(eN(h));t.listenProvider_.stopListening(Hv(h),f)}))}lae(t,l)}return a}function pH(t,e,n,r){const s=eM(t,r);if(s!=null){const i=tM(s),o=i.path,a=i.queryId,c=wi(o,e),l=new vg(K5(a),c,n);return nM(t,o,l)}else return[]}function oae(t,e,n,r){const s=eM(t,r);if(s){const i=tM(s),o=i.path,a=i.queryId,c=wi(o,e),l=ir.fromObject(n),u=new TE(K5(a),c,l);return nM(t,o,u)}else return[]}function x2(t,e,n,r=!1){const s=e._path;let i=null,o=!1;t.syncPointTree_.foreachOnPath(s,(h,f)=>{const p=wi(h,s);i=i||Wh(f,p),o=o||hf(f)});let a=t.syncPointTree_.get(s);a?(o=o||hf(a),i=i||Wh(a,yn())):(a=new cH,t.syncPointTree_=t.syncPointTree_.set(s,a));let c;i!=null?c=!0:(c=!1,i=Ct.EMPTY_NODE,t.syncPointTree_.subtree(s).foreachChild((f,p)=>{const g=Wh(p,yn());g&&(i=i.updateImmediateChild(f,g))}));const l=hH(a,e);if(!l&&!e._queryParams.loadsAllData()){const h=eN(e);Ae(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const f=uae();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}const u=ZI(t.pendingWriteTree_,s);let d=Zoe(a,e,n,u,i,c);if(!l&&!o&&!r){const h=dH(a,e);d=d.concat(dae(t,e,h))}return d}function X5(t,e,n){const s=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(o,a)=>{const c=wi(o,e),l=Wh(a,c);if(l)return l});return nH(s,e,i,n,!0)}function aae(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=wi(l,n);r=r||Wh(u,d)});let s=t.syncPointTree_.get(n);s?r=r||Wh(s,yn()):(s=new cH,t.syncPointTree_=t.syncPointTree_.set(n,s));const i=r!=null,o=i?new df(r,!0,!1):null,a=ZI(t.pendingWriteTree_,e._path),c=lH(s,e,a,i?o.getNode():Ct.EMPTY_NODE,i);return Goe(c)}function T_(t,e){return gH(e,t.syncPointTree_,null,ZI(t.pendingWriteTree_,yn()))}function gH(t,e,n,r){if(Jt(t.path))return mH(t,e,n,r);{const s=e.get(yn());n==null&&s!=null&&(n=Wh(s,yn()));let i=[];const o=Vt(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){const l=n?n.getImmediateChild(o):null,u=rH(r,o);i=i.concat(gH(a,c,l,u))}return s&&(i=i.concat(Z5(s,t,r,n))),i}}function mH(t,e,n,r){const s=e.get(yn());n==null&&s!=null&&(n=Wh(s,yn()));let i=[];return e.children.inorderTraversal((o,a)=>{const c=n?n.getImmediateChild(o):null,l=rH(r,o),u=t.operationForChild(o);u&&(i=i.concat(mH(u,a,c,l)))}),s&&(i=i.concat(Z5(s,t,r,n))),i}function yH(t,e){const n=e.query,r=RE(t,n);return{hashFn:()=>(Hoe(e)||Ct.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return r?iae(t,n._path,r):sae(t,n._path);{const i=aie(s,n);return lx(t,n,null,i)}}}}function RE(t,e){const n=eN(e);return t.queryToTagMap.get(n)}function eN(t){return t._path.toString()+"$"+t._queryIdentifier}function eM(t,e){return t.tagToQueryMap.get(e)}function tM(t){const e=t.indexOf("$");return Ae(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Vn(t.substr(0,e))}}function nM(t,e,n){const r=t.syncPointTree_.get(e);Ae(r,"Missing sync point for query tag that we're tracking");const s=ZI(t.pendingWriteTree_,e);return Z5(r,n,s,null)}function cae(t){return t.fold((e,n,r)=>{if(n&&hf(n))return[XI(n)];{let s=[];return n&&(s=uH(n)),fo(r,(i,o)=>{s=s.concat(o)}),s}})}function Hv(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(tae())(t._repo,t._path):t}function lae(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const s=eN(r),i=t.queryToTagMap.get(s);t.queryToTagMap.delete(s),t.tagToQueryMap.delete(i)}}}function uae(){return nae++}function dae(t,e,n){const r=e._path,s=RE(t,e),i=yH(t,n),o=t.listenProvider_.startListening(Hv(e),s,i.hashFn,i.onComplete),a=t.syncPointTree_.subtree(r);if(s)Ae(!hf(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!Jt(l)&&u&&hf(u))return[XI(u).query];{let h=[];return u&&(h=h.concat(uH(u).map(f=>f.query))),fo(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];t.listenProvider_.stopListening(Hv(u),RE(t,u))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new rM(n)}node(){return this.node_}}class sM{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Yr(this.path_,e);return new sM(this.syncTree_,n)}node(){return X5(this.syncTree_,this.path_)}}const hae=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},w$=function(t,e,n){if(!t||typeof t!="object")return t;if(Ae(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return fae(t[".sv"],e,n);if(typeof t[".sv"]=="object")return pae(t[".sv"],e);Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},fae=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Ae(!1,"Unexpected server value: "+t)}},pae=function(t,e,n){t.hasOwnProperty("increment")||Ae(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&Ae(!1,"Unexpected increment value: "+r);const s=e.node();if(Ae(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return r;const o=s.getValue();return typeof o!="number"?r:o+r},gae=function(t,e,n,r){return iM(e,new sM(n,t),r)},wH=function(t,e,n){return iM(t,new rM(e),n)};function iM(t,e,n){const r=t.getPriority().val(),s=w$(r,e.getImmediateChild(".priority"),n);let i;if(t.isLeafNode()){const o=t,a=w$(o.getValue(),e,n);return a!==o.getValue()||s!==o.getPriority().val()?new cs(a,hs(s)):t}else{const o=t;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new cs(s))),o.forEachChild(Sr,(a,c)=>{const l=iM(c,e.getImmediateChild(a),n);l!==c&&(i=i.updateImmediateChild(a,l))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function aM(t,e){let n=e instanceof Vn?e:new Vn(e),r=t,s=Vt(n);for(;s!==null;){const i=nw(r.node.children,s)||{children:{},childCount:0};r=new oM(s,r,i),n=er(n),s=Vt(n)}return r}function Zw(t){return t.node.value}function bH(t,e){t.node.value=e,I2(t)}function vH(t){return t.node.childCount>0}function mae(t){return Zw(t)===void 0&&!vH(t)}function tN(t,e){fo(t.node.children,(n,r)=>{e(new oM(n,t,r))})}function EH(t,e,n,r){n&&e(t),tN(t,s=>{EH(s,e,!0)})}function yae(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function R_(t){return new Vn(t.parent===null?t.name:R_(t.parent)+"/"+t.name)}function I2(t){t.parent!==null&&wae(t.parent,t.name,t)}function wae(t,e,n){const r=mae(n),s=hd(t.node.children,e);r&&s?(delete t.node.children[e],t.node.childCount--,I2(t)):!r&&!s&&(t.node.children[e]=n.node,t.node.childCount++,I2(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bae=/[\[\].#$\/\u0000-\u001F\u007F]/,vae=/[\[\].#$\u0000-\u001F\u007F]/,yR=10*1024*1024,CH=function(t){return typeof t=="string"&&t.length!==0&&!bae.test(t)},_H=function(t){return typeof t=="string"&&t.length!==0&&!vae.test(t)},Eae=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_H(t)},Cae=function(t,e,n,r){cM(L5(t,"value"),e,n)},cM=function(t,e,n){const r=n instanceof Vn?new Fie(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Jf(r));if(typeof e=="function")throw new Error(t+"contains a function "+Jf(r)+" with contents = "+e.toString());if(vz(e))throw new Error(t+"contains "+e.toString()+" "+Jf(r));if(typeof e=="string"&&e.length>yR/3&&YI(e)>yR)throw new Error(t+"contains a string greater than "+yR+" utf8 bytes "+Jf(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,i=!1;if(fo(e,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!CH(o)))throw new Error(t+" contains an invalid key ("+o+") "+Jf(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jie(r,o),cM(t,a,r),Wie(r)}),s&&i)throw new Error(t+' contains ".value" child '+Jf(r)+" in addition to actual children.")}},AH=function(t,e,n,r){if(!_H(n))throw new Error(L5(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},_ae=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),AH(t,e,n)},SH=function(t,e){if(Vt(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},Aae=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!CH(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Eae(n))throw new Error(L5(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sae{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lM(t,e){let n=null;for(let r=0;r<e.length;r++){const s=e[r],i=s.getPath();n!==null&&!W5(i,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:i}),n.events.push(s)}n&&t.eventLists_.push(n)}function xH(t,e,n){lM(t,n),IH(t,r=>W5(r,e))}function Ul(t,e,n){lM(t,n),IH(t,r=>Cc(r,e)||Cc(e,r))}function IH(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const s=t.eventLists_[r];if(s){const i=s.path;e(i)?(xae(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function xae(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();Fv&&Zs("event: "+n.toString()),Jw(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iae="repo_interrupt",Nae=25;class Tae{constructor(e,n,r,s){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Sae,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tx(),this.transactionQueueTree_=new oM,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Rae(t,e,n){if(t.stats_=F5(t.repoInfo_),t.forceRestClient_||die())t.server_=new ex(t.repoInfo_,(r,s,i,o)=>{b$(t,r,s,i,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>v$(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Kr(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Hu(t.repoInfo_,e,(r,s,i,o)=>{b$(t,r,s,i,o)},r=>{v$(t,r)},r=>{Oae(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=mie(t.repoInfo_,()=>new poe(t.stats_,t.server_)),t.infoData_=new loe,t.infoSyncTree_=new y$({startListening:(r,s,i,o)=>{let a=[];const c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=N_(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),dM(t,"connected",!1),t.serverSyncTree_=new y$({startListening:(r,s,i,o)=>(t.server_.listen(r,i,s,(a,c)=>{const l=o(a,c);Ul(t.eventQueue_,r._path,l)}),[]),stopListening:(r,s)=>{t.server_.unlisten(r,s)}})}function Pae(t){const n=t.infoData_.getNode(new Vn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function uM(t){return hae({timestamp:Pae(t)})}function b$(t,e,n,r,s){t.dataUpdateCount++;const i=new Vn(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(s)if(r){const c=YS(n,l=>hs(l));o=oae(t.serverSyncTree_,i,c,s)}else{const c=hs(n);o=pH(t.serverSyncTree_,i,c,s)}else if(r){const c=YS(n,l=>hs(l));o=rae(t.serverSyncTree_,i,c)}else{const c=hs(n);o=N_(t.serverSyncTree_,i,c)}let a=i;o.length>0&&(a=rN(t,i)),Ul(t.eventQueue_,a,o)}function v$(t,e){dM(t,"connected",e),e===!1&&Mae(t)}function Oae(t,e){fo(e,(n,r)=>{dM(t,n,r)})}function dM(t,e,n){const r=new Vn("/.info/"+e),s=hs(n);t.infoData_.updateSnapshot(r,s);const i=N_(t.infoSyncTree_,r,s);Ul(t.eventQueue_,r,i)}function NH(t){return t.nextWriteId_++}function kae(t,e,n){const r=aae(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(s=>{const i=hs(s).withIndex(e._queryParams.getIndex());x2(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=N_(t.serverSyncTree_,e._path,i);else{const a=RE(t.serverSyncTree_,e);o=pH(t.serverSyncTree_,e._path,i,a)}return Ul(t.eventQueue_,e._path,o),lx(t.serverSyncTree_,e,n,null,!0),i},s=>(nN(t,"get for query "+Kr(e)+" failed: "+s),Promise.reject(new Error(s))))}function Dae(t,e,n,r,s){nN(t,"set",{path:e.toString(),value:n,priority:r});const i=uM(t),o=hs(n,r),a=X5(t.serverSyncTree_,e),c=wH(o,a,i),l=NH(t),u=fH(t.serverSyncTree_,e,c,l,!0);lM(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{const p=h==="ok";p||io("set at "+e+" failed: "+h);const g=yp(t.serverSyncTree_,l,!p);Ul(t.eventQueue_,e,g),$ae(t,s,h,f)});const d=kH(t,e);rN(t,d),Ul(t.eventQueue_,d,[])}function Mae(t){nN(t,"onDisconnectEvents");const e=uM(t),n=tx();E2(t.onDisconnect_,yn(),(s,i)=>{const o=gae(s,i,t.serverSyncTree_,e);Jz(n,s,o)});let r=[];E2(n,yn(),(s,i)=>{r=r.concat(N_(t.serverSyncTree_,s,i));const o=kH(t,s);rN(t,o)}),t.onDisconnect_=tx(),Ul(t.eventQueue_,yn(),r)}function Lae(t,e,n){let r;Vt(e._path)===".info"?r=x2(t.infoSyncTree_,e,n):r=x2(t.serverSyncTree_,e,n),xH(t.eventQueue_,e._path,r)}function Uae(t,e,n){let r;Vt(e._path)===".info"?r=lx(t.infoSyncTree_,e,n):r=lx(t.serverSyncTree_,e,n),xH(t.eventQueue_,e._path,r)}function Bae(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Iae)}function nN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Zs(n,...e)}function $ae(t,e,n,r){e&&Jw(()=>{if(n==="ok")e(null);else{const s=(n||"error").toUpperCase();let i=s;r&&(i+=": "+r);const o=new Error(i);o.code=s,e(o)}})}function TH(t,e,n){return X5(t.serverSyncTree_,e,n)||Ct.EMPTY_NODE}function hM(t,e=t.transactionQueueTree_){if(e||sN(t,e),Zw(e)){const n=PH(t,e);Ae(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&Fae(t,R_(e),n)}else vH(e)&&tN(e,n=>{hM(t,n)})}function Fae(t,e,n){const r=n.map(l=>l.currentWriteId),s=TH(t,e,r);let i=s;const o=s.hash();for(let l=0;l<n.length;l++){const u=n[l];Ae(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=wi(e,u.path);i=i.updateChild(d,u.currentOutputSnapshotRaw)}const a=i.val(!0),c=e;t.server_.put(c.toString(),a,l=>{nN(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(yp(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();sN(t,aM(t.transactionQueueTree_,e)),hM(t,t.transactionQueueTree_),Ul(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Jw(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{io("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}rN(t,e)}},o)}function rN(t,e){const n=RH(t,e),r=R_(n),s=PH(t,n);return jae(t,s,r),r}function jae(t,e,n){if(e.length===0)return;const r=[];let s=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=wi(n,c.path);let u=!1,d;if(Ae(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,s=s.concat(yp(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Nae)u=!0,d="maxretry",s=s.concat(yp(t.serverSyncTree_,c.currentWriteId,!0));else{const h=TH(t,c.path,o);c.currentInputSnapshot=h;const f=e[a].update(h.val());if(f!==void 0){cM("transaction failed: Data returned ",f,c.path);let p=hs(f);typeof f=="object"&&f!=null&&hd(f,".priority")||(p=p.updatePriority(h.getPriority()));const w=c.currentWriteId,m=uM(t),b=wH(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=NH(t),o.splice(o.indexOf(w),1),s=s.concat(fH(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(yp(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",s=s.concat(yp(t.serverSyncTree_,c.currentWriteId,!0))}Ul(t.eventQueue_,n,s),s=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}sN(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Jw(r[a]);hM(t,t.transactionQueueTree_)}function RH(t,e){let n,r=t.transactionQueueTree_;for(n=Vt(e);n!==null&&Zw(r)===void 0;)r=aM(r,n),e=er(e),n=Vt(e);return r}function PH(t,e){const n=[];return OH(t,e,n),n.sort((r,s)=>r.order-s.order),n}function OH(t,e,n){const r=Zw(e);if(r)for(let s=0;s<r.length;s++)n.push(r[s]);tN(e,s=>{OH(t,s,n)})}function sN(t,e){const n=Zw(e);if(n){let r=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[r]=n[s],r++);n.length=r,bH(e,n.length>0?n:void 0)}tN(e,r=>{sN(t,r)})}function kH(t,e){const n=R_(RH(t,e)),r=aM(t.transactionQueueTree_,e);return yae(r,s=>{wR(t,s)}),wR(t,r),EH(r,s=>{wR(t,s)}),n}function wR(t,e){const n=Zw(e);if(n){const r=[];let s=[],i=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(Ae(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(Ae(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(yp(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?bH(e,void 0):n.length=i+1,Ul(t.eventQueue_,R_(e),s);for(let o=0;o<r.length;o++)Jw(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wae(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let s=n[r];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function zae(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):io(`Invalid query segment '${n}' in query '${t}'`)}return e}const E$=function(t,e){const n=Hae(t),r=n.namespace;n.domain==="firebase.com"&&td(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&td("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||nie();const s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Oz(n.host,n.secure,r,s,e,"",r!==n.subdomain),path:new Vn(n.pathString)}},Hae=function(t){let e="",n="",r="",s="",i="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(s=Wae(t.substring(u,d)));const h=zae(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;const f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{const p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),i=r}"ns"in h&&(i=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gae{constructor(e,n,r,s){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Kr(this.snapshot.exportVal())}}class qae{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DH{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Ae(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,n,r,s){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=s}get key(){return Jt(this._path)?null:jz(this._path)}get ref(){return new fd(this._repo,this._path)}get _queryIdentifier(){const e=o$(this._queryParams),n=B5(e);return n==="{}"?"default":n}get _queryObject(){return o$(this._queryParams)}isEqual(e){if(e=Yw(e),!(e instanceof fM))return!1;const n=this._repo===e._repo,r=W5(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return n&&r&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+$ie(this._path)}}class fd extends fM{constructor(e,n){super(e,n,new q5,!1)}get parent(){const e=zz(this._path);return e===null?null:new fd(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class PE{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Vn(e),r=N2(this.ref,e);return new PE(this._node.getChild(n),r,Sr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,s)=>e(new PE(s,N2(this.ref,r),Sr)))}hasChild(e){const n=new Vn(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Oo(t,e){return t=Yw(t),t._checkNotDeleted("ref"),e!==void 0?N2(t._root,e):t._root}function N2(t,e){return t=Yw(t),Vt(t._path)===null?_ae("child","path",e):AH("child","path",e),new fd(t._repo,Yr(t._path,e))}function MH(t){return SH("remove",t._path),Gv(t,null)}function Gv(t,e){t=Yw(t),SH("set",t._path),Cae("set",e,t._path);const n=new KI;return Dae(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function ip(t){t=Yw(t);const e=new DH(()=>{}),n=new iN(e);return kae(t._repo,t,n).then(r=>new PE(r,new fd(t._repo,t._path),t._queryParams.getIndex()))}class iN{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new Gae("value",this,new PE(e.snapshotNode,new fd(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new qae(this,e,n):null}matches(e){return e instanceof iN?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function Vae(t,e,n,r,s){const i=new DH(n,void 0),o=new iN(i);return Lae(t._repo,t,o),()=>Uae(t._repo,t,o)}function C$(t,e,n,r){return Vae(t,"value",e)}Yoe(fd);eae(fd);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kae="FIREBASE_DATABASE_EMULATOR_HOST",T2={};let Yae=!1;function Qae(t,e,n,r){t.repoInfo_=new Oz(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Jae(t,e,n,r,s){let i=r||t.options.databaseURL;i===void 0&&(t.options.projectId||td("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Zs("Using default host for project ",t.options.projectId),i=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=E$(i,s),a=o.repoInfo,c;typeof process<"u"&&WB&&(c=WB[Kae]),c?(i=`http://${c}?ns=${a.namespace}`,o=E$(i,s),a=o.repoInfo):o.repoInfo.secure;const l=new fie(t.name,t.options,e);Aae("Invalid Firebase Database URL",o),Jt(o.path)||td("Database URL must point to the root of a Firebase Database (not including a child path).");const u=Xae(a,t,l,new hie(t.name,n));return new ece(u,t)}function Zae(t,e){const n=T2[e];(!n||n[t.key]!==t)&&td(`Database ${e}(${t.repoInfo_}) has already been deleted.`),Bae(t),delete n[t.key]}function Xae(t,e,n,r){let s=T2[e.name];s||(s={},T2[e.name]=s);let i=s[t.toURLString()];return i&&td("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Tae(t,Yae,n,r),s[t.toURLString()]=i,i}class ece{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Rae(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new fd(this._repo,yn())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Zae(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&td("Cannot call "+e+" on a deleted database.")}}function tce(t=pz(),e){const n=Dse(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=_re("database");r&&nce(n,...r)}return n}function nce(t,e,n,r={}){t=Yw(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&td("Cannot call useEmulator() after instance has already been initialized.");const s=t._repoInternal;let i;if(s.repoInfo_.nodeAdmin)r.mockUserToken&&td('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new nS(nS.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:Are(r.mockUserToken,t.app.options.projectId);i=new nS(o)}Qae(s,e,n,i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rce(t){Qse(Use),QS(new EE("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return Jae(r,s,i,n)},"PUBLIC").setMultipleInstances(!0)),Uy(zB,HB,t),Uy(zB,HB,"esm2017")}Hu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Hu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};rce();const sce={apiKey:"AIzaSyAed5bn78c6Mb5Y3ezULH9CEg7IAKYFAps",authDomain:"chess-220ee.firebaseapp.com",databaseURL:"https://chess-220ee-default-rtdb.firebaseio.com",projectId:"chess-220ee",storageBucket:"chess-220ee.firebasestorage.app",messagingSenderId:"724477138097",appId:"1:724477138097:web:7dc15f79db3bda5c763e90"},ice=Bse().length?pz():fz(sce),ux=tce(ice);var R2={},LH={exports:{}},Zo={},UH={exports:{}},BH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,M){var j=O.length;O.push(M);e:for(;0<j;){var V=j-1>>>1,te=O[V];if(0<s(te,M))O[V]=M,O[j]=te,j=V;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var M=O[0],j=O.pop();if(j!==M){O[0]=j;e:for(var V=0,te=O.length,Z=te>>>1;V<Z;){var X=2*(V+1)-1,ce=O[X],ge=X+1,Me=O[ge];if(0>s(ce,j))ge<te&&0>s(Me,ce)?(O[V]=Me,O[ge]=j,V=ge):(O[V]=ce,O[X]=j,V=X);else if(ge<te&&0>s(Me,j))O[V]=Me,O[ge]=j,V=ge;else break e}}return M}function s(O,M){var j=O.sortIndex-M.sortIndex;return j!==0?j:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var M=n(l);M!==null;){if(M.callback===null)r(l);else if(M.startTime<=O)r(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(l)}}function A(O){if(g=!1,v(O),!p)if(n(c)!==null)p=!0,R(C);else{var M=n(l);M!==null&&B(A,M.startTime-O)}}function C(O,M){p=!1,g&&(g=!1,m(N),N=-1),f=!0;var j=h;try{for(v(M),d=n(c);d!==null&&(!(d.expirationTime>M)||O&&!P());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var te=V(d.expirationTime<=M);M=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(c)&&r(c),v(M)}else r(c);d=n(c)}if(d!==null)var Z=!0;else{var X=n(l);X!==null&&B(A,X.startTime-M),Z=!1}return Z}finally{d=null,h=j,f=!1}}var T=!1,x=null,N=-1,S=5,D=-1;function P(){return!(t.unstable_now()-D<S)}function $(){if(x!==null){var O=t.unstable_now();D=O;var M=!0;try{M=x(!0,O)}finally{M?G():(T=!1,x=null)}}else T=!1}var G;if(typeof b=="function")G=function(){b($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,I=W.port2;W.port1.onmessage=$,G=function(){I.postMessage(null)}}else G=function(){w($,0)};function R(O){x=O,T||(T=!0,G())}function B(O,M){N=w(function(){O(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,R(C))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var j=h;h=M;try{return O()}finally{h=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var j=h;h=O;try{return M()}finally{h=j}},t.unstable_scheduleCallback=function(O,M,j){var V=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?V+j:V):j=V,O){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=j+te,O={id:u++,callback:M,priorityLevel:O,startTime:j,expirationTime:te,sortIndex:-1},j>V?(O.sortIndex=j,e(l,O),n(c)===null&&O===n(l)&&(g?(m(N),N=-1):g=!0,B(A,j-V))):(O.sortIndex=te,e(c,O),p||f||(p=!0,R(C))),O},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(O){var M=h;return function(){var j=h;h=M;try{return O.apply(this,arguments)}finally{h=j}}}})(BH);UH.exports=BH;var oce=UH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ace=k,Yo=oce;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $H=new Set,OE={};function em(t,e){ow(t,e),ow(t+"Capture",e)}function ow(t,e){for(OE[t]=e,t=0;t<e.length;t++)$H.add(e[t])}var nd=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P2=Object.prototype.hasOwnProperty,cce=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_$={},A$={};function lce(t){return P2.call(A$,t)?!0:P2.call(_$,t)?!1:cce.test(t)?A$[t]=!0:(_$[t]=!0,!1)}function uce(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dce(t,e,n,r){if(e===null||typeof e>"u"||uce(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ni(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Bs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bs[t]=new Ni(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bs[e]=new Ni(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bs[t]=new Ni(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bs[t]=new Ni(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bs[t]=new Ni(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bs[t]=new Ni(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bs[t]=new Ni(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bs[t]=new Ni(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bs[t]=new Ni(t,5,!1,t.toLowerCase(),null,!1,!1)});var pM=/[\-:]([a-z])/g;function gM(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(pM,gM);Bs[e]=new Ni(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(pM,gM);Bs[e]=new Ni(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(pM,gM);Bs[e]=new Ni(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bs[t]=new Ni(t,1,!1,t.toLowerCase(),null,!1,!1)});Bs.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bs[t]=new Ni(t,1,!1,t.toLowerCase(),null,!0,!0)});function mM(t,e,n,r){var s=Bs.hasOwnProperty(e)?Bs[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dce(e,n,s,r)&&(n=null),r||s===null?lce(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pd=ace.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,U1=Symbol.for("react.element"),gy=Symbol.for("react.portal"),my=Symbol.for("react.fragment"),yM=Symbol.for("react.strict_mode"),O2=Symbol.for("react.profiler"),FH=Symbol.for("react.provider"),jH=Symbol.for("react.context"),wM=Symbol.for("react.forward_ref"),k2=Symbol.for("react.suspense"),D2=Symbol.for("react.suspense_list"),bM=Symbol.for("react.memo"),Vd=Symbol.for("react.lazy"),WH=Symbol.for("react.offscreen"),S$=Symbol.iterator;function Lb(t){return t===null||typeof t!="object"?null:(t=S$&&t[S$]||t["@@iterator"],typeof t=="function"?t:null)}var br=Object.assign,bR;function yv(t){if(bR===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bR=e&&e[1]||""}return`
`+bR+t}var vR=!1;function ER(t,e){if(!t||vR)return"";vR=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var s=l.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{vR=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yv(t):""}function hce(t){switch(t.tag){case 5:return yv(t.type);case 16:return yv("Lazy");case 13:return yv("Suspense");case 19:return yv("SuspenseList");case 0:case 2:case 15:return t=ER(t.type,!1),t;case 11:return t=ER(t.type.render,!1),t;case 1:return t=ER(t.type,!0),t;default:return""}}function M2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case my:return"Fragment";case gy:return"Portal";case O2:return"Profiler";case yM:return"StrictMode";case k2:return"Suspense";case D2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jH:return(t.displayName||"Context")+".Consumer";case FH:return(t._context.displayName||"Context")+".Provider";case wM:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bM:return e=t.displayName||null,e!==null?e:M2(t.type)||"Memo";case Vd:e=t._payload,t=t._init;try{return M2(t(e))}catch{}}return null}function fce(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M2(e);case 8:return e===yM?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ff(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pce(t){var e=zH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function B1(t){t._valueTracker||(t._valueTracker=pce(t))}function HH(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dx(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function L2(t,e){var n=e.checked;return br({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function x$(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ff(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GH(t,e){e=e.checked,e!=null&&mM(t,"checked",e,!1)}function U2(t,e){GH(t,e);var n=ff(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?B2(t,e.type,n):e.hasOwnProperty("defaultValue")&&B2(t,e.type,ff(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function I$(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function B2(t,e,n){(e!=="number"||dx(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wv=Array.isArray;function Fy(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ff(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function $2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return br({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function N$(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(wv(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ff(n)}}function qH(t,e){var n=ff(e.value),r=ff(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function T$(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function VH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?VH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $1,KH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($1=$1||document.createElement("div"),$1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$1.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kE(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gce=["Webkit","ms","Moz","O"];Object.keys(qv).forEach(function(t){gce.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qv[e]=qv[t]})});function YH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qv.hasOwnProperty(t)&&qv[t]?(""+e).trim():e+"px"}function QH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=YH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var mce=br({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function j2(t,e){if(e){if(mce[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function W2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z2=null;function vM(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var H2=null,jy=null,Wy=null;function R$(t){if(t=k_(t)){if(typeof H2!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=uN(e),H2(t.stateNode,t.type,e))}}function JH(t){jy?Wy?Wy.push(t):Wy=[t]:jy=t}function ZH(){if(jy){var t=jy,e=Wy;if(Wy=jy=null,R$(t),e)for(t=0;t<e.length;t++)R$(e[t])}}function XH(t,e){return t(e)}function eG(){}var CR=!1;function tG(t,e,n){if(CR)return t(e,n);CR=!0;try{return XH(t,e,n)}finally{CR=!1,(jy!==null||Wy!==null)&&(eG(),ZH())}}function DE(t,e){var n=t.stateNode;if(n===null)return null;var r=uN(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var G2=!1;if(nd)try{var Ub={};Object.defineProperty(Ub,"passive",{get:function(){G2=!0}}),window.addEventListener("test",Ub,Ub),window.removeEventListener("test",Ub,Ub)}catch{G2=!1}function yce(t,e,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Vv=!1,hx=null,fx=!1,q2=null,wce={onError:function(t){Vv=!0,hx=t}};function bce(t,e,n,r,s,i,o,a,c){Vv=!1,hx=null,yce.apply(wce,arguments)}function vce(t,e,n,r,s,i,o,a,c){if(bce.apply(this,arguments),Vv){if(Vv){var l=hx;Vv=!1,hx=null}else throw Error(Ee(198));fx||(fx=!0,q2=l)}}function tm(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nG(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P$(t){if(tm(t)!==t)throw Error(Ee(188))}function Ece(t){var e=t.alternate;if(!e){if(e=tm(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return P$(s),t;if(i===r)return P$(s),e;i=i.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function rG(t){return t=Ece(t),t!==null?sG(t):null}function sG(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sG(t);if(e!==null)return e;t=t.sibling}return null}var iG=Yo.unstable_scheduleCallback,O$=Yo.unstable_cancelCallback,Cce=Yo.unstable_shouldYield,_ce=Yo.unstable_requestPaint,Pr=Yo.unstable_now,Ace=Yo.unstable_getCurrentPriorityLevel,EM=Yo.unstable_ImmediatePriority,oG=Yo.unstable_UserBlockingPriority,px=Yo.unstable_NormalPriority,Sce=Yo.unstable_LowPriority,aG=Yo.unstable_IdlePriority,oN=null,Tl=null;function xce(t){if(Tl&&typeof Tl.onCommitFiberRoot=="function")try{Tl.onCommitFiberRoot(oN,t,void 0,(t.current.flags&128)===128)}catch{}}var Ic=Math.clz32?Math.clz32:Tce,Ice=Math.log,Nce=Math.LN2;function Tce(t){return t>>>=0,t===0?32:31-(Ice(t)/Nce|0)|0}var F1=64,j1=4194304;function bv(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gx(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=bv(a):(i&=o,i!==0&&(r=bv(i)))}else o=n&~s,o!==0?r=bv(o):i!==0&&(r=bv(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ic(e),s=1<<n,r|=t[n],e&=~s;return r}function Rce(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pce(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Ic(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Rce(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function V2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cG(){var t=F1;return F1<<=1,!(F1&4194240)&&(F1=64),t}function _R(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function P_(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ic(e),t[e]=n}function Oce(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ic(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function CM(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ic(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var On=0;function lG(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uG,_M,dG,hG,fG,K2=!1,W1=[],zh=null,Hh=null,Gh=null,ME=new Map,LE=new Map,Xd=[],kce="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function k$(t,e){switch(t){case"focusin":case"focusout":zh=null;break;case"dragenter":case"dragleave":Hh=null;break;case"mouseover":case"mouseout":Gh=null;break;case"pointerover":case"pointerout":ME.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":LE.delete(e.pointerId)}}function Bb(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=k_(e),e!==null&&_M(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Dce(t,e,n,r,s){switch(e){case"focusin":return zh=Bb(zh,t,e,n,r,s),!0;case"dragenter":return Hh=Bb(Hh,t,e,n,r,s),!0;case"mouseover":return Gh=Bb(Gh,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ME.set(i,Bb(ME.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,LE.set(i,Bb(LE.get(i)||null,t,e,n,r,s)),!0}return!1}function pG(t){var e=wp(t.target);if(e!==null){var n=tm(e);if(n!==null){if(e=n.tag,e===13){if(e=nG(n),e!==null){t.blockedOn=e,fG(t.priority,function(){dG(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rS(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Y2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);z2=r,n.target.dispatchEvent(r),z2=null}else return e=k_(n),e!==null&&_M(e),t.blockedOn=n,!1;e.shift()}return!0}function D$(t,e,n){rS(t)&&n.delete(e)}function Mce(){K2=!1,zh!==null&&rS(zh)&&(zh=null),Hh!==null&&rS(Hh)&&(Hh=null),Gh!==null&&rS(Gh)&&(Gh=null),ME.forEach(D$),LE.forEach(D$)}function $b(t,e){t.blockedOn===e&&(t.blockedOn=null,K2||(K2=!0,Yo.unstable_scheduleCallback(Yo.unstable_NormalPriority,Mce)))}function UE(t){function e(s){return $b(s,t)}if(0<W1.length){$b(W1[0],t);for(var n=1;n<W1.length;n++){var r=W1[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zh!==null&&$b(zh,t),Hh!==null&&$b(Hh,t),Gh!==null&&$b(Gh,t),ME.forEach(e),LE.forEach(e),n=0;n<Xd.length;n++)r=Xd[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xd.length&&(n=Xd[0],n.blockedOn===null);)pG(n),n.blockedOn===null&&Xd.shift()}var zy=pd.ReactCurrentBatchConfig,mx=!0;function Lce(t,e,n,r){var s=On,i=zy.transition;zy.transition=null;try{On=1,AM(t,e,n,r)}finally{On=s,zy.transition=i}}function Uce(t,e,n,r){var s=On,i=zy.transition;zy.transition=null;try{On=4,AM(t,e,n,r)}finally{On=s,zy.transition=i}}function AM(t,e,n,r){if(mx){var s=Y2(t,e,n,r);if(s===null)kR(t,e,r,yx,n),k$(t,r);else if(Dce(s,t,e,n,r))r.stopPropagation();else if(k$(t,r),e&4&&-1<kce.indexOf(t)){for(;s!==null;){var i=k_(s);if(i!==null&&uG(i),i=Y2(t,e,n,r),i===null&&kR(t,e,r,yx,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else kR(t,e,r,null,n)}}var yx=null;function Y2(t,e,n,r){if(yx=null,t=vM(r),t=wp(t),t!==null)if(e=tm(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nG(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yx=t,null}function gG(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ace()){case EM:return 1;case oG:return 4;case px:case Sce:return 16;case aG:return 536870912;default:return 16}default:return 16}}var Ph=null,SM=null,sS=null;function mG(){if(sS)return sS;var t,e=SM,n=e.length,r,s="value"in Ph?Ph.value:Ph.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return sS=s.slice(t,1<r?1-r:void 0)}function iS(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function z1(){return!0}function M$(){return!1}function Xo(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?z1:M$,this.isPropagationStopped=M$,this}return br(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=z1)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=z1)},persist:function(){},isPersistent:z1}),e}var Xw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xM=Xo(Xw),O_=br({},Xw,{view:0,detail:0}),Bce=Xo(O_),AR,SR,Fb,aN=br({},O_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IM,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fb&&(Fb&&t.type==="mousemove"?(AR=t.screenX-Fb.screenX,SR=t.screenY-Fb.screenY):SR=AR=0,Fb=t),AR)},movementY:function(t){return"movementY"in t?t.movementY:SR}}),L$=Xo(aN),$ce=br({},aN,{dataTransfer:0}),Fce=Xo($ce),jce=br({},O_,{relatedTarget:0}),xR=Xo(jce),Wce=br({},Xw,{animationName:0,elapsedTime:0,pseudoElement:0}),zce=Xo(Wce),Hce=br({},Xw,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gce=Xo(Hce),qce=br({},Xw,{data:0}),U$=Xo(qce),Vce={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kce={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yce={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qce(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yce[t])?!!e[t]:!1}function IM(){return Qce}var Jce=br({},O_,{key:function(t){if(t.key){var e=Vce[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=iS(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kce[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IM,charCode:function(t){return t.type==="keypress"?iS(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?iS(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zce=Xo(Jce),Xce=br({},aN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B$=Xo(Xce),ele=br({},O_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IM}),tle=Xo(ele),nle=br({},Xw,{propertyName:0,elapsedTime:0,pseudoElement:0}),rle=Xo(nle),sle=br({},aN,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ile=Xo(sle),ole=[9,13,27,32],NM=nd&&"CompositionEvent"in window,Kv=null;nd&&"documentMode"in document&&(Kv=document.documentMode);var ale=nd&&"TextEvent"in window&&!Kv,yG=nd&&(!NM||Kv&&8<Kv&&11>=Kv),$$=" ",F$=!1;function wG(t,e){switch(t){case"keyup":return ole.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bG(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yy=!1;function cle(t,e){switch(t){case"compositionend":return bG(e);case"keypress":return e.which!==32?null:(F$=!0,$$);case"textInput":return t=e.data,t===$$&&F$?null:t;default:return null}}function lle(t,e){if(yy)return t==="compositionend"||!NM&&wG(t,e)?(t=mG(),sS=SM=Ph=null,yy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yG&&e.locale!=="ko"?null:e.data;default:return null}}var ule={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ule[t.type]:e==="textarea"}function vG(t,e,n,r){JH(r),e=wx(e,"onChange"),0<e.length&&(n=new xM("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yv=null,BE=null;function dle(t){PG(t,0)}function cN(t){var e=vy(t);if(HH(e))return t}function hle(t,e){if(t==="change")return e}var EG=!1;if(nd){var IR;if(nd){var NR="oninput"in document;if(!NR){var W$=document.createElement("div");W$.setAttribute("oninput","return;"),NR=typeof W$.oninput=="function"}IR=NR}else IR=!1;EG=IR&&(!document.documentMode||9<document.documentMode)}function z$(){Yv&&(Yv.detachEvent("onpropertychange",CG),BE=Yv=null)}function CG(t){if(t.propertyName==="value"&&cN(BE)){var e=[];vG(e,BE,t,vM(t)),tG(dle,e)}}function fle(t,e,n){t==="focusin"?(z$(),Yv=e,BE=n,Yv.attachEvent("onpropertychange",CG)):t==="focusout"&&z$()}function ple(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cN(BE)}function gle(t,e){if(t==="click")return cN(e)}function mle(t,e){if(t==="input"||t==="change")return cN(e)}function yle(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pc=typeof Object.is=="function"?Object.is:yle;function $E(t,e){if(Pc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!P2.call(e,s)||!Pc(t[s],e[s]))return!1}return!0}function H$(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G$(t,e){var n=H$(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=H$(n)}}function _G(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?_G(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function AG(){for(var t=window,e=dx();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dx(t.document)}return e}function TM(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wle(t){var e=AG(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&_G(n.ownerDocument.documentElement,n)){if(r!==null&&TM(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=G$(n,i);var o=G$(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ble=nd&&"documentMode"in document&&11>=document.documentMode,wy=null,Q2=null,Qv=null,J2=!1;function q$(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;J2||wy==null||wy!==dx(r)||(r=wy,"selectionStart"in r&&TM(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qv&&$E(Qv,r)||(Qv=r,r=wx(Q2,"onSelect"),0<r.length&&(e=new xM("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wy)))}function H1(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var by={animationend:H1("Animation","AnimationEnd"),animationiteration:H1("Animation","AnimationIteration"),animationstart:H1("Animation","AnimationStart"),transitionend:H1("Transition","TransitionEnd")},TR={},SG={};nd&&(SG=document.createElement("div").style,"AnimationEvent"in window||(delete by.animationend.animation,delete by.animationiteration.animation,delete by.animationstart.animation),"TransitionEvent"in window||delete by.transitionend.transition);function lN(t){if(TR[t])return TR[t];if(!by[t])return t;var e=by[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in SG)return TR[t]=e[n];return t}var xG=lN("animationend"),IG=lN("animationiteration"),NG=lN("animationstart"),TG=lN("transitionend"),RG=new Map,V$="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function If(t,e){RG.set(t,e),em(e,[t])}for(var RR=0;RR<V$.length;RR++){var PR=V$[RR],vle=PR.toLowerCase(),Ele=PR[0].toUpperCase()+PR.slice(1);If(vle,"on"+Ele)}If(xG,"onAnimationEnd");If(IG,"onAnimationIteration");If(NG,"onAnimationStart");If("dblclick","onDoubleClick");If("focusin","onFocus");If("focusout","onBlur");If(TG,"onTransitionEnd");ow("onMouseEnter",["mouseout","mouseover"]);ow("onMouseLeave",["mouseout","mouseover"]);ow("onPointerEnter",["pointerout","pointerover"]);ow("onPointerLeave",["pointerout","pointerover"]);em("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));em("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));em("onBeforeInput",["compositionend","keypress","textInput","paste"]);em("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));em("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));em("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cle=new Set("cancel close invalid load scroll toggle".split(" ").concat(vv));function K$(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vce(r,e,void 0,t),t.currentTarget=null}function PG(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;K$(s,a,l),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;K$(s,a,l),i=c}}}if(fx)throw t=q2,fx=!1,q2=null,t}function rr(t,e){var n=e[nk];n===void 0&&(n=e[nk]=new Set);var r=t+"__bubble";n.has(r)||(OG(e,t,2,!1),n.add(r))}function OR(t,e,n){var r=0;e&&(r|=4),OG(n,t,r,e)}var G1="_reactListening"+Math.random().toString(36).slice(2);function FE(t){if(!t[G1]){t[G1]=!0,$H.forEach(function(n){n!=="selectionchange"&&(Cle.has(n)||OR(n,!1,t),OR(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[G1]||(e[G1]=!0,OR("selectionchange",!1,e))}}function OG(t,e,n,r){switch(gG(e)){case 1:var s=Lce;break;case 4:s=Uce;break;default:s=AM}n=s.bind(null,e,n,t),s=void 0,!G2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function kR(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=wp(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}tG(function(){var l=i,u=vM(n),d=[];e:{var h=RG.get(t);if(h!==void 0){var f=xM,p=t;switch(t){case"keypress":if(iS(n)===0)break e;case"keydown":case"keyup":f=Zce;break;case"focusin":p="focus",f=xR;break;case"focusout":p="blur",f=xR;break;case"beforeblur":case"afterblur":f=xR;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=L$;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Fce;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=tle;break;case xG:case IG:case NG:f=zce;break;case TG:f=rle;break;case"scroll":f=Bce;break;case"wheel":f=ile;break;case"copy":case"cut":case"paste":f=Gce;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=B$}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var b=l,v;b!==null;){v=b;var A=v.stateNode;if(v.tag===5&&A!==null&&(v=A,m!==null&&(A=DE(b,m),A!=null&&g.push(jE(b,A,v)))),w)break;b=b.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==z2&&(p=n.relatedTarget||n.fromElement)&&(wp(p)||p[rd]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?wp(p):null,p!==null&&(w=tm(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=L$,A="onMouseLeave",m="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=B$,A="onPointerLeave",m="onPointerEnter",b="pointer"),w=f==null?h:vy(f),v=p==null?h:vy(p),h=new g(A,b+"leave",f,n,u),h.target=w,h.relatedTarget=v,A=null,wp(u)===l&&(g=new g(m,b+"enter",p,n,u),g.target=v,g.relatedTarget=w,A=g),w=A,f&&p)t:{for(g=f,m=p,b=0,v=g;v;v=Nm(v))b++;for(v=0,A=m;A;A=Nm(A))v++;for(;0<b-v;)g=Nm(g),b--;for(;0<v-b;)m=Nm(m),v--;for(;b--;){if(g===m||m!==null&&g===m.alternate)break t;g=Nm(g),m=Nm(m)}g=null}else g=null;f!==null&&Y$(d,h,f,g,!1),p!==null&&w!==null&&Y$(d,w,p,g,!0)}}e:{if(h=l?vy(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=hle;else if(j$(h))if(EG)C=mle;else{C=ple;var T=fle}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=gle);if(C&&(C=C(t,l))){vG(d,C,n,u);break e}T&&T(t,h,l),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&B2(h,"number",h.value)}switch(T=l?vy(l):window,t){case"focusin":(j$(T)||T.contentEditable==="true")&&(wy=T,Q2=l,Qv=null);break;case"focusout":Qv=Q2=wy=null;break;case"mousedown":J2=!0;break;case"contextmenu":case"mouseup":case"dragend":J2=!1,q$(d,n,u);break;case"selectionchange":if(ble)break;case"keydown":case"keyup":q$(d,n,u)}var x;if(NM)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else yy?wG(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(yG&&n.locale!=="ko"&&(yy||N!=="onCompositionStart"?N==="onCompositionEnd"&&yy&&(x=mG()):(Ph=u,SM="value"in Ph?Ph.value:Ph.textContent,yy=!0)),T=wx(l,N),0<T.length&&(N=new U$(N,t,null,n,u),d.push({event:N,listeners:T}),x?N.data=x:(x=bG(n),x!==null&&(N.data=x)))),(x=ale?cle(t,n):lle(t,n))&&(l=wx(l,"onBeforeInput"),0<l.length&&(u=new U$("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}PG(d,e)})}function jE(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wx(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=DE(t,n),i!=null&&r.unshift(jE(t,i,s)),i=DE(t,e),i!=null&&r.push(jE(t,i,s))),t=t.return}return r}function Nm(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Y$(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,s?(c=DE(n,i),c!=null&&o.unshift(jE(n,c,a))):s||(c=DE(n,i),c!=null&&o.push(jE(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var _le=/\r\n?/g,Ale=/\u0000|\uFFFD/g;function Q$(t){return(typeof t=="string"?t:""+t).replace(_le,`
`).replace(Ale,"")}function q1(t,e,n){if(e=Q$(e),Q$(t)!==e&&n)throw Error(Ee(425))}function bx(){}var Z2=null,X2=null;function ek(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tk=typeof setTimeout=="function"?setTimeout:void 0,Sle=typeof clearTimeout=="function"?clearTimeout:void 0,J$=typeof Promise=="function"?Promise:void 0,xle=typeof queueMicrotask=="function"?queueMicrotask:typeof J$<"u"?function(t){return J$.resolve(null).then(t).catch(Ile)}:tk;function Ile(t){setTimeout(function(){throw t})}function DR(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),UE(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);UE(e)}function qh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Z$(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eb=Math.random().toString(36).slice(2),El="__reactFiber$"+eb,WE="__reactProps$"+eb,rd="__reactContainer$"+eb,nk="__reactEvents$"+eb,Nle="__reactListeners$"+eb,Tle="__reactHandles$"+eb;function wp(t){var e=t[El];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rd]||n[El]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z$(t);t!==null;){if(n=t[El])return n;t=Z$(t)}return e}t=n,n=t.parentNode}return null}function k_(t){return t=t[El]||t[rd],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function uN(t){return t[WE]||null}var rk=[],Ey=-1;function Nf(t){return{current:t}}function or(t){0>Ey||(t.current=rk[Ey],rk[Ey]=null,Ey--)}function tr(t,e){Ey++,rk[Ey]=t.current,t.current=e}var pf={},ti=Nf(pf),oo=Nf(!1),Cg=pf;function aw(t,e){var n=t.type.contextTypes;if(!n)return pf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ao(t){return t=t.childContextTypes,t!=null}function vx(){or(oo),or(ti)}function X$(t,e,n){if(ti.current!==pf)throw Error(Ee(168));tr(ti,e),tr(oo,n)}function kG(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Ee(108,fce(t)||"Unknown",s));return br({},n,r)}function Ex(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pf,Cg=ti.current,tr(ti,t),tr(oo,oo.current),!0}function e6(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=kG(t,e,Cg),r.__reactInternalMemoizedMergedChildContext=t,or(oo),or(ti),tr(ti,t)):or(oo),tr(oo,n)}var yu=null,dN=!1,MR=!1;function DG(t){yu===null?yu=[t]:yu.push(t)}function Rle(t){dN=!0,DG(t)}function Tf(){if(!MR&&yu!==null){MR=!0;var t=0,e=On;try{var n=yu;for(On=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}yu=null,dN=!1}catch(s){throw yu!==null&&(yu=yu.slice(t+1)),iG(EM,Tf),s}finally{On=e,MR=!1}}return null}var Cy=[],_y=0,Cx=null,_x=0,xa=[],Ia=0,_g=null,$u=1,Fu="";function Zf(t,e){Cy[_y++]=_x,Cy[_y++]=Cx,Cx=t,_x=e}function MG(t,e,n){xa[Ia++]=$u,xa[Ia++]=Fu,xa[Ia++]=_g,_g=t;var r=$u;t=Fu;var s=32-Ic(r)-1;r&=~(1<<s),n+=1;var i=32-Ic(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$u=1<<32-Ic(e)+s|n<<s|r,Fu=i+t}else $u=1<<i|n<<s|r,Fu=t}function RM(t){t.return!==null&&(Zf(t,1),MG(t,1,0))}function PM(t){for(;t===Cx;)Cx=Cy[--_y],Cy[_y]=null,_x=Cy[--_y],Cy[_y]=null;for(;t===_g;)_g=xa[--Ia],xa[Ia]=null,Fu=xa[--Ia],xa[Ia]=null,$u=xa[--Ia],xa[Ia]=null}var qo=null,zo=null,dr=!1,pc=null;function LG(t,e){var n=Na(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function t6(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qo=t,zo=qh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qo=t,zo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_g!==null?{id:$u,overflow:Fu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Na(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qo=t,zo=null,!0):!1;default:return!1}}function sk(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ik(t){if(dr){var e=zo;if(e){var n=e;if(!t6(t,e)){if(sk(t))throw Error(Ee(418));e=qh(n.nextSibling);var r=qo;e&&t6(t,e)?LG(r,n):(t.flags=t.flags&-4097|2,dr=!1,qo=t)}}else{if(sk(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,dr=!1,qo=t}}}function n6(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qo=t}function V1(t){if(t!==qo)return!1;if(!dr)return n6(t),dr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ek(t.type,t.memoizedProps)),e&&(e=zo)){if(sk(t))throw UG(),Error(Ee(418));for(;e;)LG(t,e),e=qh(e.nextSibling)}if(n6(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zo=qh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zo=null}}else zo=qo?qh(t.stateNode.nextSibling):null;return!0}function UG(){for(var t=zo;t;)t=qh(t.nextSibling)}function cw(){zo=qo=null,dr=!1}function OM(t){pc===null?pc=[t]:pc.push(t)}var Ple=pd.ReactCurrentBatchConfig;function jb(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function K1(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function r6(t){var e=t._init;return e(t._payload)}function BG(t){function e(m,b){if(t){var v=m.deletions;v===null?(m.deletions=[b],m.flags|=16):v.push(b)}}function n(m,b){if(!t)return null;for(;b!==null;)e(m,b),b=b.sibling;return null}function r(m,b){for(m=new Map;b!==null;)b.key!==null?m.set(b.key,b):m.set(b.index,b),b=b.sibling;return m}function s(m,b){return m=Qh(m,b),m.index=0,m.sibling=null,m}function i(m,b,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<b?(m.flags|=2,b):v):(m.flags|=2,b)):(m.flags|=1048576,b)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,b,v,A){return b===null||b.tag!==6?(b=WR(v,m.mode,A),b.return=m,b):(b=s(b,v),b.return=m,b)}function c(m,b,v,A){var C=v.type;return C===my?u(m,b,v.props.children,A,v.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vd&&r6(C)===b.type)?(A=s(b,v.props),A.ref=jb(m,b,v),A.return=m,A):(A=hS(v.type,v.key,v.props,null,m.mode,A),A.ref=jb(m,b,v),A.return=m,A)}function l(m,b,v,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=zR(v,m.mode,A),b.return=m,b):(b=s(b,v.children||[]),b.return=m,b)}function u(m,b,v,A,C){return b===null||b.tag!==7?(b=lg(v,m.mode,A,C),b.return=m,b):(b=s(b,v),b.return=m,b)}function d(m,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=WR(""+b,m.mode,v),b.return=m,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case U1:return v=hS(b.type,b.key,b.props,null,m.mode,v),v.ref=jb(m,null,b),v.return=m,v;case gy:return b=zR(b,m.mode,v),b.return=m,b;case Vd:var A=b._init;return d(m,A(b._payload),v)}if(wv(b)||Lb(b))return b=lg(b,m.mode,v,null),b.return=m,b;K1(m,b)}return null}function h(m,b,v,A){var C=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(m,b,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case U1:return v.key===C?c(m,b,v,A):null;case gy:return v.key===C?l(m,b,v,A):null;case Vd:return C=v._init,h(m,b,C(v._payload),A)}if(wv(v)||Lb(v))return C!==null?null:u(m,b,v,A,null);K1(m,v)}return null}function f(m,b,v,A,C){if(typeof A=="string"&&A!==""||typeof A=="number")return m=m.get(v)||null,a(b,m,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case U1:return m=m.get(A.key===null?v:A.key)||null,c(b,m,A,C);case gy:return m=m.get(A.key===null?v:A.key)||null,l(b,m,A,C);case Vd:var T=A._init;return f(m,b,v,T(A._payload),C)}if(wv(A)||Lb(A))return m=m.get(v)||null,u(b,m,A,C,null);K1(b,A)}return null}function p(m,b,v,A){for(var C=null,T=null,x=b,N=b=0,S=null;x!==null&&N<v.length;N++){x.index>N?(S=x,x=null):S=x.sibling;var D=h(m,x,v[N],A);if(D===null){x===null&&(x=S);break}t&&x&&D.alternate===null&&e(m,x),b=i(D,b,N),T===null?C=D:T.sibling=D,T=D,x=S}if(N===v.length)return n(m,x),dr&&Zf(m,N),C;if(x===null){for(;N<v.length;N++)x=d(m,v[N],A),x!==null&&(b=i(x,b,N),T===null?C=x:T.sibling=x,T=x);return dr&&Zf(m,N),C}for(x=r(m,x);N<v.length;N++)S=f(x,m,N,v[N],A),S!==null&&(t&&S.alternate!==null&&x.delete(S.key===null?N:S.key),b=i(S,b,N),T===null?C=S:T.sibling=S,T=S);return t&&x.forEach(function(P){return e(m,P)}),dr&&Zf(m,N),C}function g(m,b,v,A){var C=Lb(v);if(typeof C!="function")throw Error(Ee(150));if(v=C.call(v),v==null)throw Error(Ee(151));for(var T=C=null,x=b,N=b=0,S=null,D=v.next();x!==null&&!D.done;N++,D=v.next()){x.index>N?(S=x,x=null):S=x.sibling;var P=h(m,x,D.value,A);if(P===null){x===null&&(x=S);break}t&&x&&P.alternate===null&&e(m,x),b=i(P,b,N),T===null?C=P:T.sibling=P,T=P,x=S}if(D.done)return n(m,x),dr&&Zf(m,N),C;if(x===null){for(;!D.done;N++,D=v.next())D=d(m,D.value,A),D!==null&&(b=i(D,b,N),T===null?C=D:T.sibling=D,T=D);return dr&&Zf(m,N),C}for(x=r(m,x);!D.done;N++,D=v.next())D=f(x,m,N,D.value,A),D!==null&&(t&&D.alternate!==null&&x.delete(D.key===null?N:D.key),b=i(D,b,N),T===null?C=D:T.sibling=D,T=D);return t&&x.forEach(function($){return e(m,$)}),dr&&Zf(m,N),C}function w(m,b,v,A){if(typeof v=="object"&&v!==null&&v.type===my&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case U1:e:{for(var C=v.key,T=b;T!==null;){if(T.key===C){if(C=v.type,C===my){if(T.tag===7){n(m,T.sibling),b=s(T,v.props.children),b.return=m,m=b;break e}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Vd&&r6(C)===T.type){n(m,T.sibling),b=s(T,v.props),b.ref=jb(m,T,v),b.return=m,m=b;break e}n(m,T);break}else e(m,T);T=T.sibling}v.type===my?(b=lg(v.props.children,m.mode,A,v.key),b.return=m,m=b):(A=hS(v.type,v.key,v.props,null,m.mode,A),A.ref=jb(m,b,v),A.return=m,m=A)}return o(m);case gy:e:{for(T=v.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(m,b.sibling),b=s(b,v.children||[]),b.return=m,m=b;break e}else{n(m,b);break}else e(m,b);b=b.sibling}b=zR(v,m.mode,A),b.return=m,m=b}return o(m);case Vd:return T=v._init,w(m,b,T(v._payload),A)}if(wv(v))return p(m,b,v,A);if(Lb(v))return g(m,b,v,A);K1(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(m,b.sibling),b=s(b,v),b.return=m,m=b):(n(m,b),b=WR(v,m.mode,A),b.return=m,m=b),o(m)):n(m,b)}return w}var lw=BG(!0),$G=BG(!1),Ax=Nf(null),Sx=null,Ay=null,kM=null;function DM(){kM=Ay=Sx=null}function MM(t){var e=Ax.current;or(Ax),t._currentValue=e}function ok(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Hy(t,e){Sx=t,kM=Ay=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ro=!0),t.firstContext=null)}function Oa(t){var e=t._currentValue;if(kM!==t)if(t={context:t,memoizedValue:e,next:null},Ay===null){if(Sx===null)throw Error(Ee(308));Ay=t,Sx.dependencies={lanes:0,firstContext:t}}else Ay=Ay.next=t;return e}var bp=null;function LM(t){bp===null?bp=[t]:bp.push(t)}function FG(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,LM(e)):(n.next=s.next,s.next=n),e.interleaved=n,sd(t,r)}function sd(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kd=!1;function UM(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jG(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Gu(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ln&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,sd(t,n)}return s=r.interleaved,s===null?(e.next=e,LM(r)):(e.next=s.next,s.next=e),r.interleaved=e,sd(t,n)}function oS(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CM(t,n)}}function s6(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xx(t,e,n,r){var s=t.updateQueue;Kd=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?i=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,u=l=c=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=br({},d,h);break e;case 2:Kd=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Sg|=o,t.lanes=o,t.memoizedState=d}}function i6(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Ee(191,s));s.call(r)}}}var D_={},Rl=Nf(D_),zE=Nf(D_),HE=Nf(D_);function vp(t){if(t===D_)throw Error(Ee(174));return t}function BM(t,e){switch(tr(HE,e),tr(zE,t),tr(Rl,D_),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:F2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=F2(e,t)}or(Rl),tr(Rl,e)}function uw(){or(Rl),or(zE),or(HE)}function WG(t){vp(HE.current);var e=vp(Rl.current),n=F2(e,t.type);e!==n&&(tr(zE,t),tr(Rl,n))}function $M(t){zE.current===t&&(or(Rl),or(zE))}var pr=Nf(0);function Ix(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var LR=[];function FM(){for(var t=0;t<LR.length;t++)LR[t]._workInProgressVersionPrimary=null;LR.length=0}var aS=pd.ReactCurrentDispatcher,UR=pd.ReactCurrentBatchConfig,Ag=0,wr=null,Gr=null,us=null,Nx=!1,Jv=!1,GE=0,Ole=0;function zs(){throw Error(Ee(321))}function jM(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pc(t[n],e[n]))return!1;return!0}function WM(t,e,n,r,s,i){if(Ag=i,wr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,aS.current=t===null||t.memoizedState===null?Lle:Ule,t=n(r,s),Jv){i=0;do{if(Jv=!1,GE=0,25<=i)throw Error(Ee(301));i+=1,us=Gr=null,e.updateQueue=null,aS.current=Ble,t=n(r,s)}while(Jv)}if(aS.current=Tx,e=Gr!==null&&Gr.next!==null,Ag=0,us=Gr=wr=null,Nx=!1,e)throw Error(Ee(300));return t}function zM(){var t=GE!==0;return GE=0,t}function Xc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?wr.memoizedState=us=t:us=us.next=t,us}function ka(){if(Gr===null){var t=wr.alternate;t=t!==null?t.memoizedState:null}else t=Gr.next;var e=us===null?wr.memoizedState:us.next;if(e!==null)us=e,Gr=t;else{if(t===null)throw Error(Ee(310));Gr=t,t={memoizedState:Gr.memoizedState,baseState:Gr.baseState,baseQueue:Gr.baseQueue,queue:Gr.queue,next:null},us===null?wr.memoizedState=us=t:us=us.next=t}return us}function qE(t,e){return typeof e=="function"?e(t):e}function BR(t){var e=ka(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=Gr,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,l=i;do{var u=l.lane;if((Ag&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,wr.lanes|=u,Sg|=u}l=l.next}while(l!==null&&l!==i);c===null?o=r:c.next=a,Pc(r,e.memoizedState)||(ro=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,wr.lanes|=i,Sg|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function $R(t){var e=ka(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Pc(i,e.memoizedState)||(ro=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function zG(){}function HG(t,e){var n=wr,r=ka(),s=e(),i=!Pc(r.memoizedState,s);if(i&&(r.memoizedState=s,ro=!0),r=r.queue,HM(VG.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||us!==null&&us.memoizedState.tag&1){if(n.flags|=2048,VE(9,qG.bind(null,n,r,s,e),void 0,null),bs===null)throw Error(Ee(349));Ag&30||GG(n,e,s)}return s}function GG(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qG(t,e,n,r){e.value=n,e.getSnapshot=r,KG(e)&&YG(t)}function VG(t,e,n){return n(function(){KG(e)&&YG(t)})}function KG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pc(t,n)}catch{return!0}}function YG(t){var e=sd(t,1);e!==null&&Nc(e,t,1,-1)}function o6(t){var e=Xc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qE,lastRenderedState:t},e.queue=t,t=t.dispatch=Mle.bind(null,wr,t),[e.memoizedState,t]}function VE(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=wr.updateQueue,e===null?(e={lastEffect:null,stores:null},wr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function QG(){return ka().memoizedState}function cS(t,e,n,r){var s=Xc();wr.flags|=t,s.memoizedState=VE(1|e,n,void 0,r===void 0?null:r)}function hN(t,e,n,r){var s=ka();r=r===void 0?null:r;var i=void 0;if(Gr!==null){var o=Gr.memoizedState;if(i=o.destroy,r!==null&&jM(r,o.deps)){s.memoizedState=VE(e,n,i,r);return}}wr.flags|=t,s.memoizedState=VE(1|e,n,i,r)}function a6(t,e){return cS(8390656,8,t,e)}function HM(t,e){return hN(2048,8,t,e)}function JG(t,e){return hN(4,2,t,e)}function ZG(t,e){return hN(4,4,t,e)}function XG(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function eq(t,e,n){return n=n!=null?n.concat([t]):null,hN(4,4,XG.bind(null,e,t),n)}function GM(){}function tq(t,e){var n=ka();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jM(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function nq(t,e){var n=ka();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jM(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function rq(t,e,n){return Ag&21?(Pc(n,e)||(n=cG(),wr.lanes|=n,Sg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ro=!0),t.memoizedState=n)}function kle(t,e){var n=On;On=n!==0&&4>n?n:4,t(!0);var r=UR.transition;UR.transition={};try{t(!1),e()}finally{On=n,UR.transition=r}}function sq(){return ka().memoizedState}function Dle(t,e,n){var r=Yh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iq(t))oq(e,n);else if(n=FG(t,e,n,r),n!==null){var s=_i();Nc(n,t,r,s),aq(n,e,r)}}function Mle(t,e,n){var r=Yh(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iq(t))oq(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Pc(a,o)){var c=e.interleaved;c===null?(s.next=s,LM(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=FG(t,e,s,r),n!==null&&(s=_i(),Nc(n,t,r,s),aq(n,e,r))}}function iq(t){var e=t.alternate;return t===wr||e!==null&&e===wr}function oq(t,e){Jv=Nx=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function aq(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,CM(t,n)}}var Tx={readContext:Oa,useCallback:zs,useContext:zs,useEffect:zs,useImperativeHandle:zs,useInsertionEffect:zs,useLayoutEffect:zs,useMemo:zs,useReducer:zs,useRef:zs,useState:zs,useDebugValue:zs,useDeferredValue:zs,useTransition:zs,useMutableSource:zs,useSyncExternalStore:zs,useId:zs,unstable_isNewReconciler:!1},Lle={readContext:Oa,useCallback:function(t,e){return Xc().memoizedState=[t,e===void 0?null:e],t},useContext:Oa,useEffect:a6,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cS(4194308,4,XG.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cS(4194308,4,t,e)},useInsertionEffect:function(t,e){return cS(4,2,t,e)},useMemo:function(t,e){var n=Xc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Dle.bind(null,wr,t),[r.memoizedState,t]},useRef:function(t){var e=Xc();return t={current:t},e.memoizedState=t},useState:o6,useDebugValue:GM,useDeferredValue:function(t){return Xc().memoizedState=t},useTransition:function(){var t=o6(!1),e=t[0];return t=kle.bind(null,t[1]),Xc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=wr,s=Xc();if(dr){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),bs===null)throw Error(Ee(349));Ag&30||GG(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,a6(VG.bind(null,r,i,t),[t]),r.flags|=2048,VE(9,qG.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Xc(),e=bs.identifierPrefix;if(dr){var n=Fu,r=$u;n=(r&~(1<<32-Ic(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=GE++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ole++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ule={readContext:Oa,useCallback:tq,useContext:Oa,useEffect:HM,useImperativeHandle:eq,useInsertionEffect:JG,useLayoutEffect:ZG,useMemo:nq,useReducer:BR,useRef:QG,useState:function(){return BR(qE)},useDebugValue:GM,useDeferredValue:function(t){var e=ka();return rq(e,Gr.memoizedState,t)},useTransition:function(){var t=BR(qE)[0],e=ka().memoizedState;return[t,e]},useMutableSource:zG,useSyncExternalStore:HG,useId:sq,unstable_isNewReconciler:!1},Ble={readContext:Oa,useCallback:tq,useContext:Oa,useEffect:HM,useImperativeHandle:eq,useInsertionEffect:JG,useLayoutEffect:ZG,useMemo:nq,useReducer:$R,useRef:QG,useState:function(){return $R(qE)},useDebugValue:GM,useDeferredValue:function(t){var e=ka();return Gr===null?e.memoizedState=t:rq(e,Gr.memoizedState,t)},useTransition:function(){var t=$R(qE)[0],e=ka().memoizedState;return[t,e]},useMutableSource:zG,useSyncExternalStore:HG,useId:sq,unstable_isNewReconciler:!1};function rc(t,e){if(t&&t.defaultProps){e=br({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ak(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:br({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fN={isMounted:function(t){return(t=t._reactInternals)?tm(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_i(),s=Yh(t),i=Gu(r,s);i.payload=e,n!=null&&(i.callback=n),e=Vh(t,i,s),e!==null&&(Nc(e,t,s,r),oS(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_i(),s=Yh(t),i=Gu(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vh(t,i,s),e!==null&&(Nc(e,t,s,r),oS(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_i(),r=Yh(t),s=Gu(n,r);s.tag=2,e!=null&&(s.callback=e),e=Vh(t,s,r),e!==null&&(Nc(e,t,r,n),oS(e,t,r))}};function c6(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!$E(n,r)||!$E(s,i):!0}function cq(t,e,n){var r=!1,s=pf,i=e.contextType;return typeof i=="object"&&i!==null?i=Oa(i):(s=ao(e)?Cg:ti.current,r=e.contextTypes,i=(r=r!=null)?aw(t,s):pf),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fN,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function l6(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fN.enqueueReplaceState(e,e.state,null)}function ck(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},UM(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Oa(i):(i=ao(e)?Cg:ti.current,s.context=aw(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ak(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fN.enqueueReplaceState(s,s.state,null),xx(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function dw(t,e){try{var n="",r=e;do n+=hce(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function FR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lk(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var $le=typeof WeakMap=="function"?WeakMap:Map;function lq(t,e,n){n=Gu(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Px||(Px=!0,bk=r),lk(t,e)},n}function uq(t,e,n){n=Gu(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){lk(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){lk(t,e),typeof r!="function"&&(Kh===null?Kh=new Set([this]):Kh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function u6(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new $le;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Xle.bind(null,t,e,n),e.then(t,t))}function d6(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function h6(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Gu(-1,1),e.tag=2,Vh(n,e,1))),n.lanes|=1),t)}var Fle=pd.ReactCurrentOwner,ro=!1;function hi(t,e,n,r){e.child=t===null?$G(e,null,n,r):lw(e,t.child,n,r)}function f6(t,e,n,r,s){n=n.render;var i=e.ref;return Hy(e,s),r=WM(t,e,n,r,i,s),n=zM(),t!==null&&!ro?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,id(t,e,s)):(dr&&n&&RM(e),e.flags|=1,hi(t,e,r,s),e.child)}function p6(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!XM(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,dq(t,e,i,r,s)):(t=hS(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:$E,n(o,r)&&t.ref===e.ref)return id(t,e,s)}return e.flags|=1,t=Qh(i,r),t.ref=e.ref,t.return=e,e.child=t}function dq(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if($E(i,r)&&t.ref===e.ref)if(ro=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ro=!0);else return e.lanes=t.lanes,id(t,e,s)}return uk(t,e,n,r,s)}function hq(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(xy,Bo),Bo|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,tr(xy,Bo),Bo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,tr(xy,Bo),Bo|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,tr(xy,Bo),Bo|=r;return hi(t,e,s,n),e.child}function fq(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uk(t,e,n,r,s){var i=ao(n)?Cg:ti.current;return i=aw(e,i),Hy(e,s),n=WM(t,e,n,r,i,s),r=zM(),t!==null&&!ro?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,id(t,e,s)):(dr&&r&&RM(e),e.flags|=1,hi(t,e,n,s),e.child)}function g6(t,e,n,r,s){if(ao(n)){var i=!0;Ex(e)}else i=!1;if(Hy(e,s),e.stateNode===null)lS(t,e),cq(e,n,r),ck(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Oa(l):(l=ao(n)?Cg:ti.current,l=aw(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&l6(e,o,r,l),Kd=!1;var h=e.memoizedState;o.state=h,xx(e,r,o,s),c=e.memoizedState,a!==r||h!==c||oo.current||Kd?(typeof u=="function"&&(ak(e,n,u,r),c=e.memoizedState),(a=Kd||c6(e,n,a,r,h,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jG(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:rc(e.type,a),o.props=l,d=e.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Oa(c):(c=ao(n)?Cg:ti.current,c=aw(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==c)&&l6(e,o,r,c),Kd=!1,h=e.memoizedState,o.state=h,xx(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||oo.current||Kd?(typeof f=="function"&&(ak(e,n,f,r),p=e.memoizedState),(l=Kd||c6(e,n,l,r,h,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return dk(t,e,n,r,i,s)}function dk(t,e,n,r,s,i){fq(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&e6(e,n,!1),id(t,e,i);r=e.stateNode,Fle.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=lw(e,t.child,null,i),e.child=lw(e,null,a,i)):hi(t,e,a,i),e.memoizedState=r.state,s&&e6(e,n,!0),e.child}function pq(t){var e=t.stateNode;e.pendingContext?X$(t,e.pendingContext,e.pendingContext!==e.context):e.context&&X$(t,e.context,!1),BM(t,e.containerInfo)}function m6(t,e,n,r,s){return cw(),OM(s),e.flags|=256,hi(t,e,n,r),e.child}var hk={dehydrated:null,treeContext:null,retryLane:0};function fk(t){return{baseLanes:t,cachePool:null,transitions:null}}function gq(t,e,n){var r=e.pendingProps,s=pr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),tr(pr,s&1),t===null)return ik(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mN(o,r,0,null),t=lg(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fk(n),e.memoizedState=hk,t):qM(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return jle(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Qh(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Qh(a,i):(i=lg(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?fk(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hk,r}return i=t.child,t=i.sibling,r=Qh(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qM(t,e){return e=mN({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Y1(t,e,n,r){return r!==null&&OM(r),lw(e,t.child,null,n),t=qM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function jle(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=FR(Error(Ee(422))),Y1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=mN({mode:"visible",children:r.children},s,0,null),i=lg(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&lw(e,t.child,null,o),e.child.memoizedState=fk(o),e.memoizedState=hk,i);if(!(e.mode&1))return Y1(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(Ee(419)),r=FR(i,r,void 0),Y1(t,e,o,r)}if(a=(o&t.childLanes)!==0,ro||a){if(r=bs,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,sd(t,s),Nc(r,t,s,-1))}return ZM(),r=FR(Error(Ee(421))),Y1(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=eue.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zo=qh(s.nextSibling),qo=e,dr=!0,pc=null,t!==null&&(xa[Ia++]=$u,xa[Ia++]=Fu,xa[Ia++]=_g,$u=t.id,Fu=t.overflow,_g=e),e=qM(e,r.children),e.flags|=4096,e)}function y6(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ok(t.return,e,n)}function jR(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mq(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(hi(t,e,r.children,n),r=pr.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&y6(t,n,e);else if(t.tag===19)y6(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(tr(pr,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ix(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jR(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ix(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jR(e,!0,n,null,i);break;case"together":jR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lS(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function id(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Sg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=Qh(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qh(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Wle(t,e,n){switch(e.tag){case 3:pq(e),cw();break;case 5:WG(e);break;case 1:ao(e.type)&&Ex(e);break;case 4:BM(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;tr(Ax,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(tr(pr,pr.current&1),e.flags|=128,null):n&e.child.childLanes?gq(t,e,n):(tr(pr,pr.current&1),t=id(t,e,n),t!==null?t.sibling:null);tr(pr,pr.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mq(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),tr(pr,pr.current),r)break;return null;case 22:case 23:return e.lanes=0,hq(t,e,n)}return id(t,e,n)}var yq,pk,wq,bq;yq=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pk=function(){};wq=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,vp(Rl.current);var i=null;switch(n){case"input":s=L2(t,s),r=L2(t,r),i=[];break;case"select":s=br({},s,{value:void 0}),r=br({},r,{value:void 0}),i=[];break;case"textarea":s=$2(t,s),r=$2(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bx)}j2(n,r);var o;n=null;for(l in s)if(!r.hasOwnProperty(l)&&s.hasOwnProperty(l)&&s[l]!=null)if(l==="style"){var a=s[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(OE.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var c=r[l];if(a=s!=null?s[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(OE.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&rr("scroll",t),i||a===c||(i=[])):(i=i||[]).push(l,c))}n&&(i=i||[]).push("style",n);var l=i;(e.updateQueue=l)&&(e.flags|=4)}};bq=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wb(t,e){if(!dr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Hs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zle(t,e,n){var r=e.pendingProps;switch(PM(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(e),null;case 1:return ao(e.type)&&vx(),Hs(e),null;case 3:return r=e.stateNode,uw(),or(oo),or(ti),FM(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(V1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pc!==null&&(Ck(pc),pc=null))),pk(t,e),Hs(e),null;case 5:$M(e);var s=vp(HE.current);if(n=e.type,t!==null&&e.stateNode!=null)wq(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return Hs(e),null}if(t=vp(Rl.current),V1(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[El]=e,r[WE]=i,t=(e.mode&1)!==0,n){case"dialog":rr("cancel",r),rr("close",r);break;case"iframe":case"object":case"embed":rr("load",r);break;case"video":case"audio":for(s=0;s<vv.length;s++)rr(vv[s],r);break;case"source":rr("error",r);break;case"img":case"image":case"link":rr("error",r),rr("load",r);break;case"details":rr("toggle",r);break;case"input":x$(r,i),rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},rr("invalid",r);break;case"textarea":N$(r,i),rr("invalid",r)}j2(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&q1(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&q1(r.textContent,a,t),s=["children",""+a]):OE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rr("scroll",r)}switch(n){case"input":B1(r),I$(r,i,!0);break;case"textarea":B1(r),T$(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bx)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=VH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[El]=e,t[WE]=r,yq(t,e,!1,!1),e.stateNode=t;e:{switch(o=W2(n,r),n){case"dialog":rr("cancel",t),rr("close",t),s=r;break;case"iframe":case"object":case"embed":rr("load",t),s=r;break;case"video":case"audio":for(s=0;s<vv.length;s++)rr(vv[s],t);s=r;break;case"source":rr("error",t),s=r;break;case"img":case"image":case"link":rr("error",t),rr("load",t),s=r;break;case"details":rr("toggle",t),s=r;break;case"input":x$(t,r),s=L2(t,r),rr("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=br({},r,{value:void 0}),rr("invalid",t);break;case"textarea":N$(t,r),s=$2(t,r),rr("invalid",t);break;default:s=r}j2(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?QH(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&KH(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&kE(t,c):typeof c=="number"&&kE(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(OE.hasOwnProperty(i)?c!=null&&i==="onScroll"&&rr("scroll",t):c!=null&&mM(t,i,c,o))}switch(n){case"input":B1(t),I$(t,r,!1);break;case"textarea":B1(t),T$(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ff(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Fy(t,!!r.multiple,i,!1):r.defaultValue!=null&&Fy(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hs(e),null;case 6:if(t&&e.stateNode!=null)bq(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=vp(HE.current),vp(Rl.current),V1(e)){if(r=e.stateNode,n=e.memoizedProps,r[El]=e,(i=r.nodeValue!==n)&&(t=qo,t!==null))switch(t.tag){case 3:q1(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&q1(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[El]=e,e.stateNode=r}return Hs(e),null;case 13:if(or(pr),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(dr&&zo!==null&&e.mode&1&&!(e.flags&128))UG(),cw(),e.flags|=98560,i=!1;else if(i=V1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Ee(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ee(317));i[El]=e}else cw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hs(e),i=!1}else pc!==null&&(Ck(pc),pc=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pr.current&1?Qr===0&&(Qr=3):ZM())),e.updateQueue!==null&&(e.flags|=4),Hs(e),null);case 4:return uw(),pk(t,e),t===null&&FE(e.stateNode.containerInfo),Hs(e),null;case 10:return MM(e.type._context),Hs(e),null;case 17:return ao(e.type)&&vx(),Hs(e),null;case 19:if(or(pr),i=e.memoizedState,i===null)return Hs(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Wb(i,!1);else{if(Qr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ix(t),o!==null){for(e.flags|=128,Wb(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return tr(pr,pr.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pr()>hw&&(e.flags|=128,r=!0,Wb(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ix(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wb(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!dr)return Hs(e),null}else 2*Pr()-i.renderingStartTime>hw&&n!==1073741824&&(e.flags|=128,r=!0,Wb(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pr(),e.sibling=null,n=pr.current,tr(pr,r?n&1|2:n&1),e):(Hs(e),null);case 22:case 23:return JM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bo&1073741824&&(Hs(e),e.subtreeFlags&6&&(e.flags|=8192)):Hs(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function Hle(t,e){switch(PM(e),e.tag){case 1:return ao(e.type)&&vx(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return uw(),or(oo),or(ti),FM(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $M(e),null;case 13:if(or(pr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));cw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return or(pr),null;case 4:return uw(),null;case 10:return MM(e.type._context),null;case 22:case 23:return JM(),null;case 24:return null;default:return null}}var Q1=!1,Xs=!1,Gle=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Sy(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ar(t,e,r)}else n.current=null}function gk(t,e,n){try{n()}catch(r){Ar(t,e,r)}}var w6=!1;function qle(t,e){if(Z2=mx,t=AG(),TM(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===s&&(a=o),h===i&&++u===r&&(c=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(X2={focusedElem:t,selectionRange:n},mx=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,m=e.stateNode,b=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:rc(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(A){Ar(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return p=w6,w6=!1,p}function Zv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&gk(e,n,i)}s=s.next}while(s!==r)}}function pN(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mk(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function vq(t){var e=t.alternate;e!==null&&(t.alternate=null,vq(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[El],delete e[WE],delete e[nk],delete e[Nle],delete e[Tle])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Eq(t){return t.tag===5||t.tag===3||t.tag===4}function b6(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Eq(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bx));else if(r!==4&&(t=t.child,t!==null))for(yk(t,e,n),t=t.sibling;t!==null;)yk(t,e,n),t=t.sibling}function wk(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wk(t,e,n),t=t.sibling;t!==null;)wk(t,e,n),t=t.sibling}var Ts=null,fc=!1;function _d(t,e,n){for(n=n.child;n!==null;)Cq(t,e,n),n=n.sibling}function Cq(t,e,n){if(Tl&&typeof Tl.onCommitFiberUnmount=="function")try{Tl.onCommitFiberUnmount(oN,n)}catch{}switch(n.tag){case 5:Xs||Sy(n,e);case 6:var r=Ts,s=fc;Ts=null,_d(t,e,n),Ts=r,fc=s,Ts!==null&&(fc?(t=Ts,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ts.removeChild(n.stateNode));break;case 18:Ts!==null&&(fc?(t=Ts,n=n.stateNode,t.nodeType===8?DR(t.parentNode,n):t.nodeType===1&&DR(t,n),UE(t)):DR(Ts,n.stateNode));break;case 4:r=Ts,s=fc,Ts=n.stateNode.containerInfo,fc=!0,_d(t,e,n),Ts=r,fc=s;break;case 0:case 11:case 14:case 15:if(!Xs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&gk(n,e,o),s=s.next}while(s!==r)}_d(t,e,n);break;case 1:if(!Xs&&(Sy(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ar(n,e,a)}_d(t,e,n);break;case 21:_d(t,e,n);break;case 22:n.mode&1?(Xs=(r=Xs)||n.memoizedState!==null,_d(t,e,n),Xs=r):_d(t,e,n);break;default:_d(t,e,n)}}function v6(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Gle),e.forEach(function(r){var s=tue.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ka(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ts=a.stateNode,fc=!1;break e;case 3:Ts=a.stateNode.containerInfo,fc=!0;break e;case 4:Ts=a.stateNode.containerInfo,fc=!0;break e}a=a.return}if(Ts===null)throw Error(Ee(160));Cq(i,o,s),Ts=null,fc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(l){Ar(s,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)_q(e,t),e=e.sibling}function _q(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ka(e,t),Wc(t),r&4){try{Zv(3,t,t.return),pN(3,t)}catch(g){Ar(t,t.return,g)}try{Zv(5,t,t.return)}catch(g){Ar(t,t.return,g)}}break;case 1:Ka(e,t),Wc(t),r&512&&n!==null&&Sy(n,n.return);break;case 5:if(Ka(e,t),Wc(t),r&512&&n!==null&&Sy(n,n.return),t.flags&32){var s=t.stateNode;try{kE(s,"")}catch(g){Ar(t,t.return,g)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&GH(s,i),W2(a,o);var l=W2(a,i);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?QH(s,d):u==="dangerouslySetInnerHTML"?KH(s,d):u==="children"?kE(s,d):mM(s,u,d,l)}switch(a){case"input":U2(s,i);break;case"textarea":qH(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Fy(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Fy(s,!!i.multiple,i.defaultValue,!0):Fy(s,!!i.multiple,i.multiple?[]:"",!1))}s[WE]=i}catch(g){Ar(t,t.return,g)}}break;case 6:if(Ka(e,t),Wc(t),r&4){if(t.stateNode===null)throw Error(Ee(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(g){Ar(t,t.return,g)}}break;case 3:if(Ka(e,t),Wc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{UE(e.containerInfo)}catch(g){Ar(t,t.return,g)}break;case 4:Ka(e,t),Wc(t);break;case 13:Ka(e,t),Wc(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(YM=Pr())),r&4&&v6(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Xs=(l=Xs)||u,Ka(e,t),Xs=l):Ka(e,t),Wc(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(qe=t,u=t.child;u!==null;){for(d=qe=u;qe!==null;){switch(h=qe,f=h.child,h.tag){case 0:case 11:case 14:case 15:Zv(4,h,h.return);break;case 1:Sy(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Ar(r,n,g)}}break;case 5:Sy(h,h.return);break;case 22:if(h.memoizedState!==null){C6(d);continue}}f!==null?(f.return=h,qe=f):C6(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,l?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=YH("display",o))}catch(g){Ar(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Ar(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ka(e,t),Wc(t),r&4&&v6(t);break;case 21:break;default:Ka(e,t),Wc(t)}}function Wc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Eq(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kE(s,""),r.flags&=-33);var i=b6(t);wk(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=b6(t);yk(t,a,o);break;default:throw Error(Ee(161))}}catch(c){Ar(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Vle(t,e,n){qe=t,Aq(t)}function Aq(t,e,n){for(var r=(t.mode&1)!==0;qe!==null;){var s=qe,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Q1;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Xs;a=Q1;var l=Xs;if(Q1=o,(Xs=c)&&!l)for(qe=s;qe!==null;)o=qe,c=o.child,o.tag===22&&o.memoizedState!==null?_6(s):c!==null?(c.return=o,qe=c):_6(s);for(;i!==null;)qe=i,Aq(i),i=i.sibling;qe=s,Q1=a,Xs=l}E6(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,qe=i):E6(t)}}function E6(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xs||pN(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xs)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rc(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&i6(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}i6(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&UE(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}Xs||e.flags&512&&mk(e)}catch(h){Ar(e,e.return,h)}}if(e===t){qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,qe=n;break}qe=e.return}}function C6(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qe=n;break}qe=e.return}}function _6(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pN(4,e)}catch(c){Ar(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ar(e,s,c)}}var i=e.return;try{mk(e)}catch(c){Ar(e,i,c)}break;case 5:var o=e.return;try{mk(e)}catch(c){Ar(e,o,c)}}}catch(c){Ar(e,e.return,c)}if(e===t){qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qe=a;break}qe=e.return}}var Kle=Math.ceil,Rx=pd.ReactCurrentDispatcher,VM=pd.ReactCurrentOwner,Pa=pd.ReactCurrentBatchConfig,ln=0,bs=null,Br=null,Ds=0,Bo=0,xy=Nf(0),Qr=0,KE=null,Sg=0,gN=0,KM=0,Xv=null,Xi=null,YM=0,hw=1/0,pu=null,Px=!1,bk=null,Kh=null,J1=!1,Oh=null,Ox=0,eE=0,vk=null,uS=-1,dS=0;function _i(){return ln&6?Pr():uS!==-1?uS:uS=Pr()}function Yh(t){return t.mode&1?ln&2&&Ds!==0?Ds&-Ds:Ple.transition!==null?(dS===0&&(dS=cG()),dS):(t=On,t!==0||(t=window.event,t=t===void 0?16:gG(t.type)),t):1}function Nc(t,e,n,r){if(50<eE)throw eE=0,vk=null,Error(Ee(185));P_(t,n,r),(!(ln&2)||t!==bs)&&(t===bs&&(!(ln&2)&&(gN|=n),Qr===4&&eh(t,Ds)),co(t,r),n===1&&ln===0&&!(e.mode&1)&&(hw=Pr()+500,dN&&Tf()))}function co(t,e){var n=t.callbackNode;Pce(t,e);var r=gx(t,t===bs?Ds:0);if(r===0)n!==null&&O$(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&O$(n),e===1)t.tag===0?Rle(A6.bind(null,t)):DG(A6.bind(null,t)),xle(function(){!(ln&6)&&Tf()}),n=null;else{switch(lG(r)){case 1:n=EM;break;case 4:n=oG;break;case 16:n=px;break;case 536870912:n=aG;break;default:n=px}n=Oq(n,Sq.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sq(t,e){if(uS=-1,dS=0,ln&6)throw Error(Ee(327));var n=t.callbackNode;if(Gy()&&t.callbackNode!==n)return null;var r=gx(t,t===bs?Ds:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kx(t,r);else{e=r;var s=ln;ln|=2;var i=Iq();(bs!==t||Ds!==e)&&(pu=null,hw=Pr()+500,cg(t,e));do try{Jle();break}catch(a){xq(t,a)}while(!0);DM(),Rx.current=i,ln=s,Br!==null?e=0:(bs=null,Ds=0,e=Qr)}if(e!==0){if(e===2&&(s=V2(t),s!==0&&(r=s,e=Ek(t,s))),e===1)throw n=KE,cg(t,0),eh(t,r),co(t,Pr()),n;if(e===6)eh(t,r);else{if(s=t.current.alternate,!(r&30)&&!Yle(s)&&(e=kx(t,r),e===2&&(i=V2(t),i!==0&&(r=i,e=Ek(t,i))),e===1))throw n=KE,cg(t,0),eh(t,r),co(t,Pr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Xf(t,Xi,pu);break;case 3:if(eh(t,r),(r&130023424)===r&&(e=YM+500-Pr(),10<e)){if(gx(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_i(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tk(Xf.bind(null,t,Xi,pu),e);break}Xf(t,Xi,pu);break;case 4:if(eh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Ic(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Kle(r/1960))-r,10<r){t.timeoutHandle=tk(Xf.bind(null,t,Xi,pu),r);break}Xf(t,Xi,pu);break;case 5:Xf(t,Xi,pu);break;default:throw Error(Ee(329))}}}return co(t,Pr()),t.callbackNode===n?Sq.bind(null,t):null}function Ek(t,e){var n=Xv;return t.current.memoizedState.isDehydrated&&(cg(t,e).flags|=256),t=kx(t,e),t!==2&&(e=Xi,Xi=n,e!==null&&Ck(e)),t}function Ck(t){Xi===null?Xi=t:Xi.push.apply(Xi,t)}function Yle(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Pc(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function eh(t,e){for(e&=~KM,e&=~gN,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ic(e),r=1<<n;t[n]=-1,e&=~r}}function A6(t){if(ln&6)throw Error(Ee(327));Gy();var e=gx(t,0);if(!(e&1))return co(t,Pr()),null;var n=kx(t,e);if(t.tag!==0&&n===2){var r=V2(t);r!==0&&(e=r,n=Ek(t,r))}if(n===1)throw n=KE,cg(t,0),eh(t,e),co(t,Pr()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xf(t,Xi,pu),co(t,Pr()),null}function QM(t,e){var n=ln;ln|=1;try{return t(e)}finally{ln=n,ln===0&&(hw=Pr()+500,dN&&Tf())}}function xg(t){Oh!==null&&Oh.tag===0&&!(ln&6)&&Gy();var e=ln;ln|=1;var n=Pa.transition,r=On;try{if(Pa.transition=null,On=1,t)return t()}finally{On=r,Pa.transition=n,ln=e,!(ln&6)&&Tf()}}function JM(){Bo=xy.current,or(xy)}function cg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sle(n)),Br!==null)for(n=Br.return;n!==null;){var r=n;switch(PM(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vx();break;case 3:uw(),or(oo),or(ti),FM();break;case 5:$M(r);break;case 4:uw();break;case 13:or(pr);break;case 19:or(pr);break;case 10:MM(r.type._context);break;case 22:case 23:JM()}n=n.return}if(bs=t,Br=t=Qh(t.current,null),Ds=Bo=e,Qr=0,KE=null,KM=gN=Sg=0,Xi=Xv=null,bp!==null){for(e=0;e<bp.length;e++)if(n=bp[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}bp=null}return t}function xq(t,e){do{var n=Br;try{if(DM(),aS.current=Tx,Nx){for(var r=wr.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nx=!1}if(Ag=0,us=Gr=wr=null,Jv=!1,GE=0,VM.current=null,n===null||n.return===null){Qr=1,KE=e,Br=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Ds,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=d6(o);if(f!==null){f.flags&=-257,h6(f,o,a,i,e),f.mode&1&&u6(i,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){u6(i,l,e),ZM();break e}c=Error(Ee(426))}}else if(dr&&a.mode&1){var w=d6(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),h6(w,o,a,i,e),OM(dw(c,a));break e}}i=c=dw(c,a),Qr!==4&&(Qr=2),Xv===null?Xv=[i]:Xv.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=lq(i,c,e);s6(i,m);break e;case 1:a=c;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Kh===null||!Kh.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=uq(i,a,e);s6(i,A);break e}}i=i.return}while(i!==null)}Tq(n)}catch(C){e=C,Br===n&&n!==null&&(Br=n=n.return);continue}break}while(!0)}function Iq(){var t=Rx.current;return Rx.current=Tx,t===null?Tx:t}function ZM(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),bs===null||!(Sg&268435455)&&!(gN&268435455)||eh(bs,Ds)}function kx(t,e){var n=ln;ln|=2;var r=Iq();(bs!==t||Ds!==e)&&(pu=null,cg(t,e));do try{Qle();break}catch(s){xq(t,s)}while(!0);if(DM(),ln=n,Rx.current=r,Br!==null)throw Error(Ee(261));return bs=null,Ds=0,Qr}function Qle(){for(;Br!==null;)Nq(Br)}function Jle(){for(;Br!==null&&!Cce();)Nq(Br)}function Nq(t){var e=Pq(t.alternate,t,Bo);t.memoizedProps=t.pendingProps,e===null?Tq(t):Br=e,VM.current=null}function Tq(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Hle(n,e),n!==null){n.flags&=32767,Br=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qr=6,Br=null;return}}else if(n=zle(n,e,Bo),n!==null){Br=n;return}if(e=e.sibling,e!==null){Br=e;return}Br=e=t}while(e!==null);Qr===0&&(Qr=5)}function Xf(t,e,n){var r=On,s=Pa.transition;try{Pa.transition=null,On=1,Zle(t,e,n,r)}finally{Pa.transition=s,On=r}return null}function Zle(t,e,n,r){do Gy();while(Oh!==null);if(ln&6)throw Error(Ee(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Oce(t,i),t===bs&&(Br=bs=null,Ds=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||J1||(J1=!0,Oq(px,function(){return Gy(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Pa.transition,Pa.transition=null;var o=On;On=1;var a=ln;ln|=4,VM.current=null,qle(t,n),_q(n,t),wle(X2),mx=!!Z2,X2=Z2=null,t.current=n,Vle(n),_ce(),ln=a,On=o,Pa.transition=i}else t.current=n;if(J1&&(J1=!1,Oh=t,Ox=s),i=t.pendingLanes,i===0&&(Kh=null),xce(n.stateNode),co(t,Pr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Px)throw Px=!1,t=bk,bk=null,t;return Ox&1&&t.tag!==0&&Gy(),i=t.pendingLanes,i&1?t===vk?eE++:(eE=0,vk=t):eE=0,Tf(),null}function Gy(){if(Oh!==null){var t=lG(Ox),e=Pa.transition,n=On;try{if(Pa.transition=null,On=16>t?16:t,Oh===null)var r=!1;else{if(t=Oh,Oh=null,Ox=0,ln&6)throw Error(Ee(331));var s=ln;for(ln|=4,qe=t.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(qe=l;qe!==null;){var u=qe;switch(u.tag){case 0:case 11:case 15:Zv(8,u,i)}var d=u.child;if(d!==null)d.return=u,qe=d;else for(;qe!==null;){u=qe;var h=u.sibling,f=u.return;if(vq(u),u===l){qe=null;break}if(h!==null){h.return=f,qe=h;break}qe=f}}}var p=i.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zv(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,qe=m;break e}qe=i.return}}var b=t.current;for(qe=b;qe!==null;){o=qe;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,qe=v;else e:for(o=b;qe!==null;){if(a=qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pN(9,a)}}catch(C){Ar(a,a.return,C)}if(a===o){qe=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,qe=A;break e}qe=a.return}}if(ln=s,Tf(),Tl&&typeof Tl.onPostCommitFiberRoot=="function")try{Tl.onPostCommitFiberRoot(oN,t)}catch{}r=!0}return r}finally{On=n,Pa.transition=e}}return!1}function S6(t,e,n){e=dw(n,e),e=lq(t,e,1),t=Vh(t,e,1),e=_i(),t!==null&&(P_(t,1,e),co(t,e))}function Ar(t,e,n){if(t.tag===3)S6(t,t,n);else for(;e!==null;){if(e.tag===3){S6(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Kh===null||!Kh.has(r))){t=dw(n,t),t=uq(e,t,1),e=Vh(e,t,1),t=_i(),e!==null&&(P_(e,1,t),co(e,t));break}}e=e.return}}function Xle(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_i(),t.pingedLanes|=t.suspendedLanes&n,bs===t&&(Ds&n)===n&&(Qr===4||Qr===3&&(Ds&130023424)===Ds&&500>Pr()-YM?cg(t,0):KM|=n),co(t,e)}function Rq(t,e){e===0&&(t.mode&1?(e=j1,j1<<=1,!(j1&130023424)&&(j1=4194304)):e=1);var n=_i();t=sd(t,e),t!==null&&(P_(t,e,n),co(t,n))}function eue(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Rq(t,n)}function tue(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),Rq(t,n)}var Pq;Pq=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||oo.current)ro=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ro=!1,Wle(t,e,n);ro=!!(t.flags&131072)}else ro=!1,dr&&e.flags&1048576&&MG(e,_x,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lS(t,e),t=e.pendingProps;var s=aw(e,ti.current);Hy(e,n),s=WM(null,e,r,t,s,n);var i=zM();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ao(r)?(i=!0,Ex(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,UM(e),s.updater=fN,e.stateNode=s,s._reactInternals=e,ck(e,r,t,n),e=dk(null,e,r,!0,i,n)):(e.tag=0,dr&&i&&RM(e),hi(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(lS(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=rue(r),t=rc(r,t),s){case 0:e=uk(null,e,r,t,n);break e;case 1:e=g6(null,e,r,t,n);break e;case 11:e=f6(null,e,r,t,n);break e;case 14:e=p6(null,e,r,rc(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),uk(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),g6(t,e,r,s,n);case 3:e:{if(pq(e),t===null)throw Error(Ee(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jG(t,e),xx(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=dw(Error(Ee(423)),e),e=m6(t,e,r,n,s);break e}else if(r!==s){s=dw(Error(Ee(424)),e),e=m6(t,e,r,n,s);break e}else for(zo=qh(e.stateNode.containerInfo.firstChild),qo=e,dr=!0,pc=null,n=$G(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cw(),r===s){e=id(t,e,n);break e}hi(t,e,r,n)}e=e.child}return e;case 5:return WG(e),t===null&&ik(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ek(r,s)?o=null:i!==null&&ek(r,i)&&(e.flags|=32),fq(t,e),hi(t,e,o,n),e.child;case 6:return t===null&&ik(e),null;case 13:return gq(t,e,n);case 4:return BM(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=lw(e,null,r,n):hi(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),f6(t,e,r,s,n);case 7:return hi(t,e,e.pendingProps,n),e.child;case 8:return hi(t,e,e.pendingProps.children,n),e.child;case 12:return hi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,tr(Ax,r._currentValue),r._currentValue=o,i!==null)if(Pc(i.value,o)){if(i.children===s.children&&!oo.current){e=id(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Gu(-1,n&-n),c.tag=2;var l=i.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),ok(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ok(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}hi(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Hy(e,n),s=Oa(s),r=r(s),e.flags|=1,hi(t,e,r,n),e.child;case 14:return r=e.type,s=rc(r,e.pendingProps),s=rc(r.type,s),p6(t,e,r,s,n);case 15:return dq(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rc(r,s),lS(t,e),e.tag=1,ao(r)?(t=!0,Ex(e)):t=!1,Hy(e,n),cq(e,r,s),ck(e,r,s,n),dk(null,e,r,!0,t,n);case 19:return mq(t,e,n);case 22:return hq(t,e,n)}throw Error(Ee(156,e.tag))};function Oq(t,e){return iG(t,e)}function nue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(t,e,n,r){return new nue(t,e,n,r)}function XM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rue(t){if(typeof t=="function")return XM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wM)return 11;if(t===bM)return 14}return 2}function Qh(t,e){var n=t.alternate;return n===null?(n=Na(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hS(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")XM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case my:return lg(n.children,s,i,e);case yM:o=8,s|=8;break;case O2:return t=Na(12,n,e,s|2),t.elementType=O2,t.lanes=i,t;case k2:return t=Na(13,n,e,s),t.elementType=k2,t.lanes=i,t;case D2:return t=Na(19,n,e,s),t.elementType=D2,t.lanes=i,t;case WH:return mN(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FH:o=10;break e;case jH:o=9;break e;case wM:o=11;break e;case bM:o=14;break e;case Vd:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=Na(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function lg(t,e,n,r){return t=Na(7,t,r,e),t.lanes=n,t}function mN(t,e,n,r){return t=Na(22,t,r,e),t.elementType=WH,t.lanes=n,t.stateNode={isHidden:!1},t}function WR(t,e,n){return t=Na(6,t,null,e),t.lanes=n,t}function zR(t,e,n){return e=Na(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sue(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_R(0),this.expirationTimes=_R(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_R(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function eL(t,e,n,r,s,i,o,a,c){return t=new sue(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Na(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},UM(i),t}function iue(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gy,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function kq(t){if(!t)return pf;t=t._reactInternals;e:{if(tm(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ao(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(ao(n))return kG(t,n,e)}return e}function Dq(t,e,n,r,s,i,o,a,c){return t=eL(n,r,!0,t,s,i,o,a,c),t.context=kq(null),n=t.current,r=_i(),s=Yh(n),i=Gu(r,s),i.callback=e??null,Vh(n,i,s),t.current.lanes=s,P_(t,s,r),co(t,r),t}function yN(t,e,n,r){var s=e.current,i=_i(),o=Yh(s);return n=kq(n),e.context===null?e.context=n:e.pendingContext=n,e=Gu(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vh(s,e,o),t!==null&&(Nc(t,s,o,i),oS(t,s,o)),o}function Dx(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x6(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tL(t,e){x6(t,e),(t=t.alternate)&&x6(t,e)}function oue(){return null}var Mq=typeof reportError=="function"?reportError:function(t){console.error(t)};function nL(t){this._internalRoot=t}wN.prototype.render=nL.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));yN(t,e,null,null)};wN.prototype.unmount=nL.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xg(function(){yN(null,t,null,null)}),e[rd]=null}};function wN(t){this._internalRoot=t}wN.prototype.unstable_scheduleHydration=function(t){if(t){var e=hG();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xd.length&&e!==0&&e<Xd[n].priority;n++);Xd.splice(n,0,t),n===0&&pG(t)}};function rL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bN(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function I6(){}function aue(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var l=Dx(o);i.call(l)}}var o=Dq(e,r,t,0,null,!1,!1,"",I6);return t._reactRootContainer=o,t[rd]=o.current,FE(t.nodeType===8?t.parentNode:t),xg(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var l=Dx(c);a.call(l)}}var c=eL(t,0,!1,null,null,!1,!1,"",I6);return t._reactRootContainer=c,t[rd]=c.current,FE(t.nodeType===8?t.parentNode:t),xg(function(){yN(e,c,n,r)}),c}function vN(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Dx(o);a.call(c)}}yN(e,o,t,s)}else o=aue(n,e,t,s,r);return Dx(o)}uG=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bv(e.pendingLanes);n!==0&&(CM(e,n|1),co(e,Pr()),!(ln&6)&&(hw=Pr()+500,Tf()))}break;case 13:xg(function(){var r=sd(t,1);if(r!==null){var s=_i();Nc(r,t,1,s)}}),tL(t,1)}};_M=function(t){if(t.tag===13){var e=sd(t,134217728);if(e!==null){var n=_i();Nc(e,t,134217728,n)}tL(t,134217728)}};dG=function(t){if(t.tag===13){var e=Yh(t),n=sd(t,e);if(n!==null){var r=_i();Nc(n,t,e,r)}tL(t,e)}};hG=function(){return On};fG=function(t,e){var n=On;try{return On=t,e()}finally{On=n}};H2=function(t,e,n){switch(e){case"input":if(U2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=uN(r);if(!s)throw Error(Ee(90));HH(r),U2(r,s)}}}break;case"textarea":qH(t,n);break;case"select":e=n.value,e!=null&&Fy(t,!!n.multiple,e,!1)}};XH=QM;eG=xg;var cue={usingClientEntryPoint:!1,Events:[k_,vy,uN,JH,ZH,QM]},zb={findFiberByHostInstance:wp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lue={bundleType:zb.bundleType,version:zb.version,rendererPackageName:zb.rendererPackageName,rendererConfig:zb.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pd.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rG(t),t===null?null:t.stateNode},findFiberByHostInstance:zb.findFiberByHostInstance||oue,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Z1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Z1.isDisabled&&Z1.supportsFiber)try{oN=Z1.inject(lue),Tl=Z1}catch{}}Zo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cue;Zo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rL(e))throw Error(Ee(200));return iue(t,e,null,n)};Zo.createRoot=function(t,e){if(!rL(t))throw Error(Ee(299));var n=!1,r="",s=Mq;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=eL(t,1,!1,null,null,n,!1,r,s),t[rd]=e.current,FE(t.nodeType===8?t.parentNode:t),new nL(e)};Zo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=rG(e),t=t===null?null:t.stateNode,t};Zo.flushSync=function(t){return xg(t)};Zo.hydrate=function(t,e,n){if(!bN(e))throw Error(Ee(200));return vN(null,t,e,!0,n)};Zo.hydrateRoot=function(t,e,n){if(!rL(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Mq;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Dq(e,null,t,1,n??null,s,!1,i,o),t[rd]=e.current,FE(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new wN(e)};Zo.render=function(t,e,n){if(!bN(e))throw Error(Ee(200));return vN(null,t,e,!1,n)};Zo.unmountComponentAtNode=function(t){if(!bN(t))throw Error(Ee(40));return t._reactRootContainer?(xg(function(){vN(null,null,t,!1,function(){t._reactRootContainer=null,t[rd]=null})}),!0):!1};Zo.unstable_batchedUpdates=QM;Zo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bN(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return vN(t,e,n,!1,r)};Zo.version="18.3.1-next-f1338f8080-20240426";function Lq(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lq)}catch(t){console.error(t)}}Lq(),LH.exports=Zo;var sL=LH.exports,N6=sL;R2.createRoot=N6.createRoot,R2.hydrateRoot=N6.hydrateRoot;const uue="_verified_lvyh0_1",iL={verified:uue},due=()=>y.jsx("svg",{viewBox:"0 0 24 24","aria-label":"Verified account",role:"img",className:iL.verified,children:y.jsx("g",{children:y.jsx("path",{d:"M22.25 12c0-1.43-.88-2.67-2.19-3.34.46-1.39.2-2.9-.81-3.91s-2.52-1.27-3.91-.81c-.66-1.31-1.91-2.19-3.34-2.19s-2.67.88-3.33 2.19c-1.4-.46-2.91-.2-3.92.81s-1.26 2.52-.8 3.91c-1.31.67-2.2 1.91-2.2 3.34s.89 2.67 2.2 3.34c-.46 1.39-.21 2.9.8 3.91s2.52 1.26 3.91.81c.67 1.31 1.91 2.19 3.34 2.19s2.68-.88 3.34-2.19c1.39.45 2.9.2 3.91-.81s1.27-2.52.81-3.91c1.31-.67 2.19-1.91 2.19-3.34zm-11.71 4.2L6.8 12.46l1.41-1.42 2.26 2.26 4.8-5.23 1.47 1.36-6.2 6.77z"})})}),hue=()=>y.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:iL.verified,children:y.jsxs("g",{children:[y.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-a",x1:"4.411",x2:"18.083",y1:"2.495",y2:"21.508",children:[y.jsx("stop",{offset:"0",stopColor:"#f4e72a"}),y.jsx("stop",{offset:".539",stopColor:"#cd8105"}),y.jsx("stop",{offset:".68",stopColor:"#cb7b00"}),y.jsx("stop",{offset:"1",stopColor:"#f4ec26"}),y.jsx("stop",{offset:"1",stopColor:"#f4e72a"})]}),y.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:"0-b",x1:"5.355",x2:"16.361",y1:"3.395",y2:"19.133",children:[y.jsx("stop",{offset:"0",stopColor:"#f9e87f"}),y.jsx("stop",{offset:".406",stopColor:"#e2b719"}),y.jsx("stop",{offset:".989",stopColor:"#e2b719"})]}),y.jsxs("g",{clipRule:"evenodd",fillRule:"evenodd",children:[y.jsx("path",{d:"M13.324 3.848L11 1.6 8.676 3.848l-3.201-.453-.559 3.184L2.06 8.095 3.48 11l-1.42 2.904 2.856 1.516.559 3.184 3.201-.452L11 20.4l2.324-2.248 3.201.452.559-3.184 2.856-1.516L18.52 11l1.42-2.905-2.856-1.516-.559-3.184zm-7.09 7.575l3.428 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-a)"}),y.jsx("path",{d:"M13.101 4.533L11 2.5 8.899 4.533l-2.895-.41-.505 2.88-2.583 1.37L4.2 11l-1.284 2.627 2.583 1.37.505 2.88 2.895-.41L11 19.5l2.101-2.033 2.895.41.505-2.88 2.583-1.37L17.8 11l1.284-2.627-2.583-1.37-.505-2.88zm-6.868 6.89l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fill:"url(#0-b)"}),y.jsx("path",{d:"M6.233 11.423l3.429 3.428 5.65-6.17.038-.033-.005 1.398-5.683 6.206-3.429-3.429-.003-1.405.005.003z",fill:"#d18800"})]})]})}),fue=()=>y.jsx("svg",{viewBox:"0 0 22 22","aria-label":"Verified account",role:"img",className:iL.verified,children:y.jsx("g",{children:y.jsx("path",{clipRule:"evenodd",d:"M12.05 2.056c-.568-.608-1.532-.608-2.1 0l-1.393 1.49c-.284.303-.685.47-1.1.455L5.42 3.932c-.832-.028-1.514.654-1.486 1.486l.069 2.039c.014.415-.152.816-.456 1.1l-1.49 1.392c-.608.568-.608 1.533 0 2.101l1.49 1.393c.304.284.47.684.456 1.1l-.07 2.038c-.027.832.655 1.514 1.487 1.486l2.038-.069c.415-.014.816.152 1.1.455l1.392 1.49c.569.609 1.533.609 2.102 0l1.393-1.49c.283-.303.684-.47 1.099-.455l2.038.069c.832.028 1.515-.654 1.486-1.486L18 14.542c-.015-.415.152-.815.455-1.099l1.49-1.393c.608-.568.608-1.533 0-2.101l-1.49-1.393c-.303-.283-.47-.684-.455-1.1l.068-2.038c.029-.832-.654-1.514-1.486-1.486l-2.038.07c-.415.013-.816-.153-1.1-.456zm-5.817 9.367l3.429 3.428 5.683-6.206-1.347-1.247-4.4 4.795-2.072-2.072z",fillRule:"evenodd"})})});function Uq(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Uq(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Jh(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Uq(t))&&(r&&(r+=" "),r+=e);return r}const pue="_root_98iqw_1",gue="_article_98iqw_21",T6={root:pue,article:gue},oL=({className:t,children:e})=>y.jsx("div",{className:Jh("react-tweet-theme",T6.root,t),children:y.jsx("article",{className:T6.article,children:e})}),Bq=t=>y.jsx("img",{...t}),mue="_header_nqq4j_1",yue="_avatar_nqq4j_11",wue="_avatarOverflow_nqq4j_16",bue="_avatarSquare_nqq4j_23",vue="_avatarShadow_nqq4j_26",Eue="_author_nqq4j_37",Cue="_authorLink_nqq4j_44",_ue="_authorVerified_nqq4j_53",Aue="_authorLinkText_nqq4j_56",Sue="_authorMeta_nqq4j_63",xue="_authorFollow_nqq4j_66",Iue="_username_nqq4j_69",Nue="_follow_nqq4j_74",Tue="_separator_nqq4j_82",Rue="_brand_nqq4j_86",Pue="_twitterIcon_nqq4j_90",Es={header:mue,avatar:yue,avatarOverflow:wue,avatarSquare:bue,avatarShadow:vue,author:Eue,authorLink:Cue,authorVerified:_ue,authorLinkText:Aue,authorMeta:Sue,authorFollow:xue,username:Iue,follow:Nue,separator:Tue,brand:Rue,twitterIcon:Pue},Oue="_verifiedOld_lcna5_1",kue="_verifiedBlue_lcna5_4",Due="_verifiedGovernment_lcna5_7",HR={verifiedOld:Oue,verifiedBlue:kue,verifiedGovernment:Due},$q=({user:t,className:e})=>{const n=t.verified||t.is_blue_verified||t.verified_type;let r=y.jsx(due,{}),s=HR.verifiedBlue;if(n)switch(t.is_blue_verified||(s=HR.verifiedOld),t.verified_type){case"Government":r=y.jsx(fue,{}),s=HR.verifiedGovernment;break;case"Business":r=y.jsx(hue,{}),s=null;break}return n?y.jsx("div",{className:Jh(e,s),children:r}):null},Mue=({tweet:t,components:e})=>{var n;const r=(n=e==null?void 0:e.AvatarImg)!=null?n:Bq,{user:s}=t;return y.jsxs("div",{className:Es.header,children:[y.jsxs("a",{href:t.url,className:Es.avatar,target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Jh(Es.avatarOverflow,s.profile_image_shape==="Square"&&Es.avatarSquare),children:y.jsx(r,{src:s.profile_image_url_https,alt:s.name,width:48,height:48})}),y.jsx("div",{className:Es.avatarOverflow,children:y.jsx("div",{className:Es.avatarShadow})})]}),y.jsxs("div",{className:Es.author,children:[y.jsxs("a",{href:t.url,className:Es.authorLink,target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Es.authorLinkText,children:y.jsx("span",{title:s.name,children:s.name})}),y.jsx($q,{user:s,className:Es.authorVerified})]}),y.jsxs("div",{className:Es.authorMeta,children:[y.jsx("a",{href:t.url,className:Es.username,target:"_blank",rel:"noopener noreferrer",children:y.jsxs("span",{title:`@${s.screen_name}`,children:["@",s.screen_name]})}),y.jsxs("div",{className:Es.authorFollow,children:[y.jsx("span",{className:Es.separator,children:""}),y.jsx("a",{href:s.follow_url,className:Es.follow,target:"_blank",rel:"noopener noreferrer",children:"Follow"})]})]})]}),y.jsx("a",{href:t.url,className:Es.brand,target:"_blank",rel:"noopener noreferrer","aria-label":"View on Twitter",children:y.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:Es.twitterIcon,children:y.jsx("g",{children:y.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})})})]})},Lue="_root_1ec15_1",Uue={root:Lue},Bue=({tweet:t})=>y.jsxs("a",{href:t.in_reply_to_url,className:Uue.root,target:"_blank",rel:"noopener noreferrer",children:["Replying to @",t.in_reply_to_screen_name]}),$ue="_root_eihfa_1",Fue={root:$ue},jue=({href:t,children:e})=>y.jsx("a",{href:t,className:Fue.root,target:"_blank",rel:"noopener noreferrer nofollow",children:e}),Wue="_root_1xq52_1",zue={root:Wue},Hue=({tweet:t})=>y.jsx("p",{className:zue.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>{switch(e.type){case"hashtag":case"mention":case"url":case"symbol":return y.jsx(jue,{href:e.href,children:e.text},n);case"media":return;default:return y.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n)}})}),R6=t=>`https://x.com/${t.user.screen_name}/status/${t.id_str}`,Fq=t=>`https://x.com/${typeof t=="string"?t:t.user.screen_name}`,Gue=t=>`https://x.com/intent/like?tweet_id=${t.id_str}`,que=t=>`https://x.com/intent/tweet?in_reply_to=${t.id_str}`,Vue=t=>`https://x.com/intent/follow?screen_name=${t.user.screen_name}`,Kue=t=>`https://x.com/hashtag/${t.text}`,Yue=t=>`https://x.com/search?q=%24${t.text}`,Que=t=>`https://x.com/${t.in_reply_to_screen_name}/status/${t.in_reply_to_status_id_str}`,jq=(t,e)=>{const n=new URL(t.media_url_https),r=n.pathname.split(".").pop();return r?(n.pathname=n.pathname.replace(`.${r}`,""),n.searchParams.set("format",r),n.searchParams.set("name",e),n.toString()):t.media_url_https},Jue=t=>{const{variants:e}=t.video_info;return e.filter(r=>r.content_type==="video/mp4").sort((r,s)=>{var i,o;return((i=s.bitrate)!=null?i:0)-((o=r.bitrate)!=null?o:0)})},Zue=t=>{const e=Jue(t);return e.length>1?e[1]:e[0]},_k=t=>t>999999?`${(t/1e6).toFixed(1)}M`:t>999?`${(t/1e3).toFixed(1)}K`:t.toString();function P6(t){const e=Array.from(t.text),n=[{indices:t.display_text_range,type:"text"}];return Hb(n,"hashtag",t.entities.hashtags),Hb(n,"mention",t.entities.user_mentions),Hb(n,"url",t.entities.urls),Hb(n,"symbol",t.entities.symbols),t.entities.media&&Hb(n,"media",t.entities.media),Xue(t,n),n.map(r=>{const s=e.slice(r.indices[0],r.indices[1]).join("");switch(r.type){case"hashtag":return Object.assign(r,{href:Kue(r),text:s});case"mention":return Object.assign(r,{href:Fq(r.screen_name),text:s});case"url":case"media":return Object.assign(r,{href:r.expanded_url,text:r.display_url});case"symbol":return Object.assign(r,{href:Yue(r),text:s});default:return Object.assign(r,{text:s})}})}function Hb(t,e,n){for(const r of n)for(const[s,i]of t.entries()){if(i.indices[0]>r.indices[0]||i.indices[1]<r.indices[1])continue;const o=[{...r,type:e}];i.indices[0]<r.indices[0]&&o.unshift({indices:[i.indices[0],r.indices[0]],type:"text"}),i.indices[1]>r.indices[1]&&o.push({indices:[r.indices[1],i.indices[1]],type:"text"}),t.splice(s,1,...o);break}}function Xue(t,e){t.entities.media&&t.entities.media[0].indices[0]<t.display_text_range[1]&&(t.display_text_range[1]=t.entities.media[0].indices[0]);const n=e.at(-1);n&&n.indices[1]>t.display_text_range[1]&&(n.indices[1]=t.display_text_range[1])}const ede=t=>({...t,url:R6(t),user:{...t.user,url:Fq(t),follow_url:Vue(t)},like_url:Gue(t),reply_url:que(t),in_reply_to_url:t.in_reply_to_screen_name?Que(t):void 0,entities:P6(t),quoted_tweet:t.quoted_tweet?{...t.quoted_tweet,url:R6(t.quoted_tweet),entities:P6(t.quoted_tweet)}:void 0}),tde="_root_g9tkv_1",nde="_rounded_g9tkv_6",rde="_mediaWrapper_g9tkv_10",sde="_grid2Columns_g9tkv_17",ide="_grid3_g9tkv_20",ode="_grid2x2_g9tkv_23",ade="_mediaContainer_g9tkv_26",cde="_mediaLink_g9tkv_34",lde="_skeleton_g9tkv_38",ude="_image_g9tkv_43",Io={root:tde,rounded:nde,mediaWrapper:rde,grid2Columns:sde,grid3:ide,grid2x2:ode,mediaContainer:ade,mediaLink:cde,skeleton:lde,image:ude},dde="_anchor_fp31d_1",hde="_videoButton_fp31d_17",fde="_videoButtonIcon_fp31d_35",pde="_watchOnTwitter_fp31d_44",gde="_viewReplies_fp31d_60",Tm={anchor:dde,videoButton:hde,videoButtonIcon:fde,watchOnTwitter:pde,viewReplies:gde},mde=({tweet:t,media:e})=>{const[n,r]=k.useState(!0),[s,i]=k.useState(!1),[o,a]=k.useState(!1),c=Zue(e);let l=0;return y.jsxs(y.Fragment,{children:[y.jsx("video",{className:Io.image,poster:jq(e,"small"),controls:!n,playsInline:!0,preload:"none",tabIndex:n?-1:0,onPlay:()=>{l&&window.clearTimeout(l),s||i(!0),o&&a(!1)},onPause:()=>{l&&window.clearTimeout(l),l=window.setTimeout(()=>{s&&i(!1),l=0},100)},onEnded:()=>{a(!0)},children:y.jsx("source",{src:c.url,type:c.content_type})}),n&&y.jsx("button",{type:"button",className:Tm.videoButton,"aria-label":"View video on X",onClick:u=>{const d=u.currentTarget.previousSibling;u.preventDefault(),r(!1),d.load(),d.play().then(()=>{i(!0),d.focus()}).catch(h=>{console.error("Error playing video:",h),r(!0),i(!1)})},children:y.jsx("svg",{viewBox:"0 0 24 24",className:Tm.videoButtonIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M21 12L4 2v20l17-10z"})})})}),!s&&!o&&y.jsx("div",{className:Tm.watchOnTwitter,children:y.jsx("a",{href:t.url,className:Tm.anchor,target:"_blank",rel:"noopener noreferrer",children:n?"Watch on X":"Continue watching on X"})}),o&&y.jsx("a",{href:t.url,className:Jh(Tm.anchor,Tm.viewReplies),target:"_blank",rel:"noopener noreferrer",children:"View replies"})]})},yde=t=>y.jsx("img",{...t}),O6=(t,e)=>{let n=56.25;return e===1&&(n=100/t.original_info.width*t.original_info.height),e===2&&(n=n*2),{width:t.type==="photo"?void 0:"unset",paddingBottom:`${n}%`}},Wq=({tweet:t,components:e,quoted:n})=>{var r,s,i;const o=(i=(r=t.mediaDetails)==null?void 0:r.length)!=null?i:0;var a;const c=(a=e==null?void 0:e.MediaImg)!=null?a:yde;return y.jsx("div",{className:Jh(Io.root,!n&&Io.rounded),children:y.jsx("div",{className:Jh(Io.mediaWrapper,o>1&&Io.grid2Columns,o===3&&Io.grid3,o>4&&Io.grid2x2),children:(s=t.mediaDetails)==null?void 0:s.map(l=>y.jsx(k.Fragment,{children:l.type==="photo"?y.jsxs("a",{href:t.url,className:Jh(Io.mediaContainer,Io.mediaLink),target:"_blank",rel:"noopener noreferrer",children:[y.jsx("div",{className:Io.skeleton,style:O6(l,o)}),y.jsx(c,{src:jq(l,"small"),alt:l.ext_alt_text||"Image",className:Io.image,draggable:!0})]},l.media_url_https):y.jsxs("div",{className:Io.mediaContainer,children:[y.jsx("div",{className:Io.skeleton,style:O6(l,o)}),y.jsx(mde,{tweet:t,media:l})]},l.media_url_https)},l.media_url_https))})})},wde={hour:"numeric",minute:"2-digit",hour12:!0,weekday:"short",month:"short",day:"numeric",year:"numeric"},bde=new Intl.DateTimeFormat("en-US",wde),vde=t=>{const e={};for(const n of t)e[n.type]=n.value;return e},Ede=t=>{const e=vde(bde.formatToParts(t)),n=`${e.hour}:${e.minute} ${e.dayPeriod}`,r=`${e.month} ${e.day}, ${e.year}`;return`${n}  ${r}`},Cde="_root_i24yn_1",_de={root:Cde},Ade=({tweet:t})=>{const e=new Date(t.created_at),n=Ede(e);return y.jsx("a",{className:_de.root,href:t.url,target:"_blank",rel:"noopener noreferrer","aria-label":n,children:y.jsx("time",{dateTime:e.toISOString(),children:n})})},Sde="_info_19qcj_1",xde="_infoLink_19qcj_10",Ide="_infoIcon_19qcj_30",GR={info:Sde,infoLink:xde,infoIcon:Ide},Nde=({tweet:t})=>y.jsxs("div",{className:GR.info,children:[y.jsx(Ade,{tweet:t}),y.jsx("a",{className:GR.infoLink,href:"https://help.x.com/en/x-for-websites-ads-info-and-privacy",target:"_blank",rel:"noopener noreferrer","aria-label":"Twitter for Websites, Ads Information and Privacy",children:y.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:GR.infoIcon,children:y.jsx("g",{children:y.jsx("path",{d:"M13.5 8.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S11.17 7 12 7s1.5.67 1.5 1.5zM13 17v-5h-2v5h2zm-1 5.25c5.66 0 10.25-4.59 10.25-10.25S17.66 1.75 12 1.75 1.75 6.34 1.75 12 6.34 22.25 12 22.25zM20.25 12c0 4.56-3.69 8.25-8.25 8.25S3.75 16.56 3.75 12 7.44 3.75 12 3.75s8.25 3.69 8.25 8.25z"})})})})]}),Tde="_actions_n2anf_1",Rde="_like_n2anf_13",Pde="_reply_n2anf_14",Ode="_copy_n2anf_15",kde="_likeIconWrapper_n2anf_27",Dde="_likeCount_n2anf_30",Mde="_replyIconWrapper_n2anf_35",Lde="_copyIconWrapper_n2anf_36",Ude="_likeIcon_n2anf_27",Bde="_replyIcon_n2anf_35",$de="_copyIcon_n2anf_36",Fde="_replyText_n2anf_56",jde="_copyText_n2anf_57",Ki={actions:Tde,like:Rde,reply:Pde,copy:Ode,likeIconWrapper:kde,likeCount:Dde,replyIconWrapper:Mde,copyIconWrapper:Lde,likeIcon:Ude,replyIcon:Bde,copyIcon:$de,replyText:Fde,copyText:jde},Wde=({tweet:t})=>{const[e,n]=k.useState(!1),r=()=>{navigator.clipboard.writeText(t.url),n(!0)};return k.useEffect(()=>{if(e){const s=setTimeout(()=>{n(!1)},6e3);return()=>clearTimeout(s)}},[e]),y.jsxs("button",{type:"button",className:Ki.copy,"aria-label":"Copy link",onClick:r,children:[y.jsx("div",{className:Ki.copyIconWrapper,children:e?y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.copyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M9.64 18.952l-5.55-4.861 1.317-1.504 3.951 3.459 8.459-10.948L19.4 6.32 9.64 18.952z"})})}):y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.copyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M18.36 5.64c-1.95-1.96-5.11-1.96-7.07 0L9.88 7.05 8.46 5.64l1.42-1.42c2.73-2.73 7.16-2.73 9.9 0 2.73 2.74 2.73 7.17 0 9.9l-1.42 1.42-1.41-1.42 1.41-1.41c1.96-1.96 1.96-5.12 0-7.07zm-2.12 3.53l-7.07 7.07-1.41-1.41 7.07-7.07 1.41 1.41zm-12.02.71l1.42-1.42 1.41 1.42-1.41 1.41c-1.96 1.96-1.96 5.12 0 7.07 1.95 1.96 5.11 1.96 7.07 0l1.41-1.41 1.42 1.41-1.42 1.42c-2.73 2.73-7.16 2.73-9.9 0-2.73-2.74-2.73-7.17 0-9.9z"})})})}),y.jsx("span",{className:Ki.copyText,children:e?"Copied!":"Copy link"})]})},zde=({tweet:t})=>{const e=_k(t.favorite_count);return y.jsxs("div",{className:Ki.actions,children:[y.jsxs("a",{className:Ki.like,href:t.like_url,target:"_blank",rel:"noopener noreferrer","aria-label":`Like. This Tweet has ${e} likes`,children:[y.jsx("div",{className:Ki.likeIconWrapper,children:y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.likeIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M20.884 13.19c-1.351 2.48-4.001 5.12-8.379 7.67l-.503.3-.504-.3c-4.379-2.55-7.029-5.19-8.382-7.67-1.36-2.5-1.41-4.86-.514-6.67.887-1.79 2.647-2.91 4.601-3.01 1.651-.09 3.368.56 4.798 2.01 1.429-1.45 3.146-2.1 4.796-2.01 1.954.1 3.714 1.22 4.601 3.01.896 1.81.846 4.17-.514 6.67z"})})})}),y.jsx("span",{className:Ki.likeCount,children:e})]}),y.jsxs("a",{className:Ki.reply,href:t.reply_url,target:"_blank",rel:"noopener noreferrer","aria-label":"Reply to this Tweet on Twitter",children:[y.jsx("div",{className:Ki.replyIconWrapper,children:y.jsx("svg",{viewBox:"0 0 24 24",className:Ki.replyIcon,"aria-hidden":"true",children:y.jsx("g",{children:y.jsx("path",{d:"M1.751 10c0-4.42 3.584-8 8.005-8h4.366c4.49 0 8.129 3.64 8.129 8.13 0 2.96-1.607 5.68-4.196 7.11l-8.054 4.46v-3.69h-.067c-4.49.1-8.183-3.51-8.183-8.01z"})})})}),y.jsx("span",{className:Ki.replyText,children:"Reply"})]}),y.jsx(Wde,{tweet:t})]})},Hde="_replies_1cutb_1",Gde="_link_1cutb_4",qde="_text_1cutb_23",qR={replies:Hde,link:Gde,text:qde},Vde=({tweet:t})=>y.jsx("div",{className:qR.replies,children:y.jsx("a",{className:qR.link,href:t.url,target:"_blank",rel:"noopener noreferrer",children:y.jsx("span",{className:qR.text,children:t.conversation_count===0?"Read more on X":t.conversation_count===1?`Read ${_k(t.conversation_count)} reply`:`Read ${_k(t.conversation_count)} replies`})})}),Kde="_root_q5799_1",Yde="_article_q5799_16",k6={root:Kde,article:Yde},Qde=({tweet:t,children:e})=>y.jsx("div",{className:k6.root,onClick:n=>{n.preventDefault(),window.open(t.url,"_blank")},children:y.jsx("article",{className:k6.article,children:e})}),Jde="_header_r31i5_1",Zde="_avatar_r31i5_11",Xde="_avatarSquare_r31i5_17",ehe="_author_r31i5_21",the="_authorText_r31i5_26",nhe="_username_r31i5_33",Ff={header:Jde,avatar:Zde,avatarSquare:Xde,author:ehe,authorText:the,username:nhe},rhe=({tweet:t})=>{const{user:e}=t;return y.jsxs("div",{className:Ff.header,children:[y.jsx("a",{href:t.url,className:Ff.avatar,target:"_blank",rel:"noopener noreferrer",children:y.jsx("div",{className:Jh(Ff.avatarOverflow,e.profile_image_shape==="Square"&&Ff.avatarSquare),children:y.jsx(Bq,{src:e.profile_image_url_https,alt:e.name,width:20,height:20})})}),y.jsxs("div",{className:Ff.author,children:[y.jsx("div",{className:Ff.authorText,children:y.jsx("span",{title:e.name,children:e.name})}),y.jsx($q,{user:e}),y.jsx("div",{className:Ff.username,children:y.jsxs("span",{title:`@${e.screen_name}`,children:["@",e.screen_name]})})]})]})},she="_root_175ot_1",ihe={root:she},ohe=({tweet:t})=>y.jsx("p",{className:ihe.root,lang:t.lang,dir:"auto",children:t.entities.map((e,n)=>y.jsx("span",{dangerouslySetInnerHTML:{__html:e.text}},n))}),ahe=({tweet:t})=>{var e;return y.jsxs(Qde,{tweet:t,children:[y.jsx(rhe,{tweet:t}),y.jsx(ohe,{tweet:t}),(e=t.mediaDetails)!=null&&e.length?y.jsx(Wq,{quoted:!0,tweet:t}):null]})},che=({tweet:t,components:e})=>{var n;const r=k.useMemo(()=>ede(t),[t]);return y.jsxs(oL,{children:[y.jsx(Mue,{tweet:r,components:e}),r.in_reply_to_status_id_str&&y.jsx(Bue,{tweet:r}),y.jsx(Hue,{tweet:r}),(n=r.mediaDetails)!=null&&n.length?y.jsx(Wq,{tweet:r,components:e}):null,r.quoted_tweet&&y.jsx(ahe,{tweet:r.quoted_tweet}),y.jsx(Nde,{tweet:r}),y.jsx(zde,{tweet:r}),y.jsx(Vde,{tweet:r})]})},lhe="_root_16yxa_1",uhe={root:lhe},dhe=t=>y.jsx(oL,{children:y.jsxs("div",{className:uhe.root,children:[y.jsx("h3",{children:"Tweet not found"}),y.jsx("p",{children:"The embedded tweet could not be found"})]})}),hhe="_skeleton_oi7hr_1",fhe={skeleton:hhe},X1=({style:t})=>y.jsx("span",{className:fhe.skeleton,style:t}),phe="_root_17qqv_1",ghe={root:phe},mhe=()=>y.jsxs(oL,{className:ghe.root,children:[y.jsx(X1,{style:{height:"3rem",marginBottom:"0.75rem"}}),y.jsx(X1,{style:{height:"6rem",margin:"0.5rem 0"}}),y.jsx("div",{style:{borderTop:"var(--tweet-border)",margin:"0.5rem 0"}}),y.jsx(X1,{style:{height:"2rem"}}),y.jsx(X1,{style:{height:"2rem",borderRadius:"9999px",marginTop:"0.5rem"}})]});var zq={exports:{}},Hq={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fw=k;function yhe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var whe=typeof Object.is=="function"?Object.is:yhe,bhe=fw.useState,vhe=fw.useEffect,Ehe=fw.useLayoutEffect,Che=fw.useDebugValue;function _he(t,e){var n=e(),r=bhe({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return Ehe(function(){s.value=n,s.getSnapshot=e,VR(s)&&i({inst:s})},[t,n,e]),vhe(function(){return VR(s)&&i({inst:s}),t(function(){VR(s)&&i({inst:s})})},[t]),Che(n),n}function VR(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!whe(t,n)}catch{return!0}}function Ahe(t,e){return e()}var She=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ahe:_he;Hq.useSyncExternalStore=fw.useSyncExternalStore!==void 0?fw.useSyncExternalStore:She;zq.exports=Hq;var Gq=zq.exports;const qq=0,Vq=1,Kq=2,D6=3;var M6=Object.prototype.hasOwnProperty;function Ak(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Ak(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(M6.call(t,n)&&++r&&!M6.call(e,n)||!(n in e)||!Ak(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}const Du=new WeakMap,kh=()=>{},gi=kh(),Sk=Object,cn=t=>t===gi,Cl=t=>typeof t=="function",gf=(t,e)=>({...t,...e}),Yq=t=>Cl(t.then),KR={},eA={},aL="undefined",M_=typeof window!=aL,xk=typeof document!=aL,xhe=M_&&"Deno"in window,Ihe=()=>M_&&typeof window.requestAnimationFrame!=aL,Qq=(t,e)=>{const n=Du.get(t);return[()=>!cn(e)&&t.get(e)||KR,r=>{if(!cn(e)){const s=t.get(e);e in eA||(eA[e]=s),n[5](e,gf(s,r),s||KR)}},n[6],()=>!cn(e)&&e in eA?eA[e]:!cn(e)&&t.get(e)||KR]};let Ik=!0;const Nhe=()=>Ik,[Nk,Tk]=M_&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[kh,kh],The=()=>{const t=xk&&document.visibilityState;return cn(t)||t!=="hidden"},Rhe=t=>(xk&&document.addEventListener("visibilitychange",t),Nk("focus",t),()=>{xk&&document.removeEventListener("visibilitychange",t),Tk("focus",t)}),Phe=t=>{const e=()=>{Ik=!0,t()},n=()=>{Ik=!1};return Nk("online",e),Nk("offline",n),()=>{Tk("online",e),Tk("offline",n)}},Ohe={isOnline:Nhe,isVisible:The},khe={initFocus:Rhe,initReconnect:Phe},L6=!Go.useId,YE=!M_||xhe,Dhe=t=>Ihe()?window.requestAnimationFrame(t):setTimeout(t,1),YR=YE?k.useEffect:k.useLayoutEffect,QR=typeof navigator<"u"&&navigator.connection,U6=!YE&&QR&&(["slow-2g","2g"].includes(QR.effectiveType)||QR.saveData),tA=new WeakMap,Mhe=t=>Sk.prototype.toString.call(t),JR=(t,e)=>t===`[object ${e}]`;let Lhe=0;const Rk=t=>{const e=typeof t,n=Mhe(t),r=JR(n,"Date"),s=JR(n,"RegExp"),i=JR(n,"Object");let o,a;if(Sk(t)===t&&!r&&!s){if(o=tA.get(t),o)return o;if(o=++Lhe+"~",tA.set(t,o),Array.isArray(t)){for(o="@",a=0;a<t.length;a++)o+=Rk(t[a])+",";tA.set(t,o)}if(i){o="#";const c=Sk.keys(t).sort();for(;!cn(a=c.pop());)cn(t[a])||(o+=a+":"+Rk(t[a])+",");tA.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},cL=t=>{if(Cl(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Rk(t):"",[t,e]};let Uhe=0;const Pk=()=>++Uhe;async function Jq(...t){const[e,n,r,s]=t,i=gf({populateCache:!0,throwOnError:!0},typeof s=="boolean"?{revalidate:s}:s||{});let o=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const l=h=>typeof a=="function"?a(h):a!==!1,u=i.throwOnError;if(Cl(n)){const h=n,f=[],p=e.keys();for(const g of p)!/^\$(inf|sub)\$/.test(g)&&h(e.get(g)._k)&&f.push(g);return Promise.all(f.map(d))}return d(n);async function d(h){const[f]=cL(h);if(!f)return;const[p,g]=Qq(e,f),[w,m,b,v]=Du.get(e),A=()=>{const W=w[f];return(Cl(i.revalidate)?i.revalidate(p().data,h):i.revalidate!==!1)&&(delete b[f],delete v[f],W&&W[0])?W[0](Kq).then(()=>p().data):p().data};if(t.length<3)return A();let C=r,T,x=!1;const N=Pk();m[f]=[N,0];const S=!cn(c),D=p(),P=D.data,$=D._c,G=cn($)?P:$;if(S&&(c=Cl(c)?c(G,P):c,g({data:c,_c:G})),Cl(C))try{C=C(G)}catch(W){T=W,x=!0}if(C&&Yq(C))if(C=await C.catch(W=>{T=W,x=!0}),N!==m[f][0]){if(x)throw T;return C}else x&&S&&l(T)&&(o=!0,g({data:G,_c:gi}));if(o&&!x)if(Cl(o)){const W=o(C,G);g({data:W,error:gi,_c:gi})}else g({data:C,error:gi,_c:gi});if(m[f][1]=Pk(),Promise.resolve(A()).then(()=>{g({_c:gi})}),x){if(u)throw T;return}return C}}const B6=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},Bhe=(t,e)=>{if(!Du.has(t)){const n=gf(khe,e),r=Object.create(null),s=Jq.bind(gi,t);let i=kh;const o=Object.create(null),a=(u,d)=>{const h=o[u]||[];return o[u]=h,h.push(d),()=>h.splice(h.indexOf(d),1)},c=(u,d,h)=>{t.set(u,d);const f=o[u];if(f)for(const p of f)p(d,h)},l=()=>{if(!Du.has(t)&&(Du.set(t,[r,Object.create(null),Object.create(null),Object.create(null),s,c,a]),!YE)){const u=n.initFocus(setTimeout.bind(gi,B6.bind(gi,r,qq))),d=n.initReconnect(setTimeout.bind(gi,B6.bind(gi,r,Vq)));i=()=>{u&&u(),d&&d(),Du.delete(t)}}};return l(),[t,s,l,i]}return[t,Du.get(t)[4]]},$he=(t,e,n,r,s)=>{const i=n.errorRetryCount,o=s.retryCount,a=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!cn(i)&&o>i||setTimeout(r,a,s)},Fhe=Ak,[Zq,jhe]=Bhe(new Map),Whe=gf({onLoadingSlow:kh,onSuccess:kh,onError:kh,onErrorRetry:$he,onDiscarded:kh,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:U6?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:U6?5e3:3e3,compare:Fhe,isPaused:()=>!1,cache:Zq,mutate:jhe,fallback:{}},Ohe),zhe=(t,e)=>{const n=gf(t,e);if(e){const{use:r,fallback:s}=t,{use:i,fallback:o}=e;r&&i&&(n.use=r.concat(i)),s&&o&&(n.fallback=gf(s,o))}return n},Hhe=k.createContext({}),Ghe="$inf$",Xq=M_&&window.__SWR_DEVTOOLS_USE__,qhe=Xq?window.__SWR_DEVTOOLS_USE__:[],Vhe=()=>{Xq&&(window.__SWR_DEVTOOLS_REACT__=Go)},Khe=t=>Cl(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],Yhe=()=>gf(Whe,k.useContext(Hhe)),Qhe=t=>(e,n,r)=>t(e,n&&((...i)=>{const[o]=cL(e),[,,,a]=Du.get(Zq);if(o.startsWith(Ghe))return n(...i);const c=a[o];return cn(c)?n(...i):(delete a[o],c)}),r),Jhe=qhe.concat(Qhe),Zhe=t=>function(...n){const r=Yhe(),[s,i,o]=Khe(n),a=zhe(r,o);let c=t;const{use:l}=a,u=(l||[]).concat(Jhe);for(let d=u.length;d--;)c=u[d](c);return c(s,i||a.fetcher||null,a)},Xhe=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s>=0&&(r[s]=r[r.length-1],r.pop())}};Vhe();const ZR=Go.use||(t=>{switch(t.status){case"pending":throw t;case"fulfilled":return t.value;case"rejected":throw t.reason;default:throw t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t}}),XR={dedupe:!0},efe=(t,e,n)=>{const{cache:r,compare:s,suspense:i,fallbackData:o,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:u,refreshWhenOffline:d,keepPreviousData:h}=n,[f,p,g,w]=Du.get(r),[m,b]=cL(t),v=k.useRef(!1),A=k.useRef(!1),C=k.useRef(m),T=k.useRef(e),x=k.useRef(n),N=()=>x.current,S=()=>N().isVisible()&&N().isOnline(),[D,P,$,G]=Qq(r,m),W=k.useRef({}).current,I=cn(o)?cn(n.fallback)?gi:n.fallback[m]:o,R=(ne,ie)=>{for(const be in W){const fe=be;if(fe==="data"){if(!s(ne[fe],ie[fe])&&(!cn(ne[fe])||!s(ce,ie[fe])))return!1}else if(ie[fe]!==ne[fe])return!1}return!0},B=k.useMemo(()=>{const ne=!m||!e?!1:cn(a)?N().isPaused()||i?!1:c!==!1:a,ie=ct=>{const Tt=gf(ct);return delete Tt._k,ne?{isValidating:!0,isLoading:!0,...Tt}:Tt},be=D(),fe=G(),ve=ie(be),ht=be===fe?ve:ie(fe);let Xe=ve;return[()=>{const ct=ie(D());return R(ct,Xe)?(Xe.data=ct.data,Xe.isLoading=ct.isLoading,Xe.isValidating=ct.isValidating,Xe.error=ct.error,Xe):(Xe=ct,ct)},()=>ht]},[r,m]),O=Gq.useSyncExternalStore(k.useCallback(ne=>$(m,(ie,be)=>{R(be,ie)||ne()}),[r,m]),B[0],B[1]),M=!v.current,j=f[m]&&f[m].length>0,V=O.data,te=cn(V)?I&&Yq(I)?ZR(I):I:V,Z=O.error,X=k.useRef(te),ce=h?cn(V)?cn(X.current)?te:X.current:V:te,ge=j&&!cn(Z)?!1:M&&!cn(a)?a:N().isPaused()?!1:i?cn(te)?!1:c:cn(te)||c,Me=!!(m&&e&&M&&ge),it=cn(O.isValidating)?Me:O.isValidating,Je=cn(O.isLoading)?Me:O.isLoading,bt=k.useCallback(async ne=>{const ie=T.current;if(!m||!ie||A.current||N().isPaused())return!1;let be,fe,ve=!0;const ht=ne||{},Xe=!g[m]||!ht.dedupe,ct=()=>L6?!A.current&&m===C.current&&v.current:m===C.current,Tt={isValidating:!1,isLoading:!1},In=()=>{P(Tt)},tt=()=>{const zt=g[m];zt&&zt[1]===fe&&delete g[m]},Mn={isValidating:!0};cn(D().data)&&(Mn.isLoading=!0);try{if(Xe&&(P(Mn),n.loadingTimeout&&cn(D().data)&&setTimeout(()=>{ve&&ct()&&N().onLoadingSlow(m,n)},n.loadingTimeout),g[m]=[ie(b),Pk()]),[be,fe]=g[m],be=await be,Xe&&setTimeout(tt,n.dedupingInterval),!g[m]||g[m][1]!==fe)return Xe&&ct()&&N().onDiscarded(m),!1;Tt.error=gi;const zt=p[m];if(!cn(zt)&&(fe<=zt[0]||fe<=zt[1]||zt[1]===0))return In(),Xe&&ct()&&N().onDiscarded(m),!1;const ke=D().data;Tt.data=s(ke,be)?ke:be,Xe&&ct()&&N().onSuccess(be,m,n)}catch(zt){tt();const ke=N(),{shouldRetryOnError:Nn}=ke;ke.isPaused()||(Tt.error=zt,Xe&&ct()&&(ke.onError(zt,m,ke),(Nn===!0||Cl(Nn)&&Nn(zt))&&(!N().revalidateOnFocus||!N().revalidateOnReconnect||S())&&ke.onErrorRetry(zt,m,ke,Pi=>{const lr=f[m];lr&&lr[0]&&lr[0](D6,Pi)},{retryCount:(ht.retryCount||0)+1,dedupe:!0})))}return ve=!1,In(),!0},[m,r]),Nt=k.useCallback((...ne)=>Jq(r,C.current,...ne),[]);if(YR(()=>{T.current=e,x.current=n,cn(V)||(X.current=V)}),YR(()=>{if(!m)return;const ne=bt.bind(gi,XR);let ie=0;N().revalidateOnFocus&&(ie=Date.now()+N().focusThrottleInterval);const fe=Xhe(m,f,(ve,ht={})=>{if(ve==qq){const Xe=Date.now();N().revalidateOnFocus&&Xe>ie&&S()&&(ie=Xe+N().focusThrottleInterval,ne())}else if(ve==Vq)N().revalidateOnReconnect&&S()&&ne();else{if(ve==Kq)return bt();if(ve==D6)return bt(ht)}});return A.current=!1,C.current=m,v.current=!0,P({_k:b}),ge&&(g[m]||(cn(te)||YE?ne():Dhe(ne))),()=>{A.current=!0,fe()}},[m]),YR(()=>{let ne;function ie(){const fe=Cl(l)?l(D().data):l;fe&&ne!==-1&&(ne=setTimeout(be,fe))}function be(){!D().error&&(u||N().isVisible())&&(d||N().isOnline())?bt(XR).then(ie):ie()}return ie(),()=>{ne&&(clearTimeout(ne),ne=-1)}},[l,u,d,m]),k.useDebugValue(ce),i&&cn(te)&&m){if(!L6&&YE)throw new Error("Fallback data is required when using Suspense in SSR.");T.current=e,x.current=n,A.current=!1;const ne=w[m];if(!cn(ne)){const ie=Nt(ne);ZR(ie)}if(cn(Z)){const ie=bt(XR);cn(ce)||(ie.status="fulfilled",ie.value=!0),ZR(ie)}else throw Z}return{mutate:Nt,get data(){return W.data=!0,ce},get error(){return W.error=!0,Z},get isValidating(){return W.isValidating=!0,it},get isLoading(){return W.isLoading=!0,Je}}},$6=Zhe(efe);class tfe extends Error{constructor({message:e,status:n,data:r}){super(e),this.name="TwitterApiError",this.status=n,this.data=r}}const nfe=$6.default||$6,rfe="https://react-tweet.vercel.app";async function sfe([t,e]){const n=await fetch(t,e),r=await n.json();if(n.ok)return r.data||null;throw new tfe({message:`Failed to fetch tweet at "${t}" with "${n.status}".`,data:r,status:n.status})}const ife=(t,e,n)=>{const{isLoading:r,data:s,error:i}=nfe(()=>e||t?[e||t&&`${rfe}/api/tweet/${t}`,n]:null,sfe,{revalidateIfStale:!1,revalidateOnFocus:!1,shouldRetryOnError:!1});return{isLoading:!!(r||s===void 0&&!i),data:s,error:i}},ofe=({id:t,apiUrl:e,fallback:n=y.jsx(mhe,{}),components:r,fetchOptions:s,onError:i})=>{const{data:o,error:a,isLoading:c}=ife(t,e,s);if(c)return n;if(a||!o){const l=(r==null?void 0:r.TweetNotFound)||dhe;return y.jsx(l,{error:i?i(a):a})}return y.jsx(che,{tweet:o,components:r})};var EN={exports:{}},eV={},tV={exports:{}},afe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cfe=afe,lfe=cfe;function nV(){}function rV(){}rV.resetWarningCache=nV;var ufe=function(){function t(r,s,i,o,a,c){if(c!==lfe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:rV,resetWarningCache:nV};return n.PropTypes=n,n};tV.exports=ufe();var sV=tV.exports,Ok={exports:{}};function iV(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=iV(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function F6(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=iV(t))&&(r&&(r+=" "),r+=e);return r}Ok.exports=F6,Ok.exports.clsx=F6;var dfe=Ok.exports,Tr={},ql={};Object.defineProperty(ql,"__esModule",{value:!0});ql.dontSetMe=mfe;ql.findInArray=hfe;ql.int=gfe;ql.isFunction=ffe;ql.isNum=pfe;function hfe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function ffe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function pfe(t){return typeof t=="number"&&!isNaN(t)}function gfe(t){return parseInt(t,10)}function mfe(t,e,n){if(t[e])return new Error(`Invalid prop ${e} passed to ${n} - do not set this, set it on the child.`)}var nm={};Object.defineProperty(nm,"__esModule",{value:!0});nm.browserPrefixToKey=aV;nm.browserPrefixToStyle=yfe;nm.default=void 0;nm.getPrefix=oV;const eP=["Moz","Webkit","O","ms"];function oV(){var n,r;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(r=(n=window.document)==null?void 0:n.documentElement)==null?void 0:r.style;if(!e||t in e)return"";for(let s=0;s<eP.length;s++)if(aV(t,eP[s])in e)return eP[s];return""}function aV(t,e){return e?`${e}${wfe(t)}`:t}function yfe(t,e){return e?`-${e.toLowerCase()}-${t}`:t}function wfe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}nm.default=oV();Object.defineProperty(Tr,"__esModule",{value:!0});Tr.addClassName=uV;Tr.addEvent=vfe;Tr.addUserSelectStyles=Pfe;Tr.createCSSTransform=Ife;Tr.createSVGTransform=Nfe;Tr.getTouch=Tfe;Tr.getTouchIdentifier=Rfe;Tr.getTranslation=lL;Tr.innerHeight=Afe;Tr.innerWidth=Sfe;Tr.matchesSelector=lV;Tr.matchesSelectorAndParentsTo=bfe;Tr.offsetXYFromParent=xfe;Tr.outerHeight=Cfe;Tr.outerWidth=_fe;Tr.removeClassName=dV;Tr.removeEvent=Efe;Tr.scheduleRemoveUserSelectStyles=Ofe;var Vo=ql,j6=cV(nm);function cV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(cV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}let nA="";function lV(t,e){return nA||(nA=(0,Vo.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Vo.isFunction)(t[n])})),(0,Vo.isFunction)(t[nA])?t[nA](e):!1}function bfe(t,e,n){let r=t;do{if(lV(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function vfe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Efe(t,e,n,r){if(!t)return;const s={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Cfe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Vo.int)(n.borderTopWidth),e+=(0,Vo.int)(n.borderBottomWidth),e}function _fe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,Vo.int)(n.borderLeftWidth),e+=(0,Vo.int)(n.borderRightWidth),e}function Afe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Vo.int)(n.paddingTop),e-=(0,Vo.int)(n.paddingBottom),e}function Sfe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,Vo.int)(n.paddingLeft),e-=(0,Vo.int)(n.paddingRight),e}function xfe(t,e,n){const s=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function Ife(t,e){const n=lL(t,e,"px");return{[(0,j6.browserPrefixToKey)("transform",j6.default)]:n}}function Nfe(t,e){return lL(t,e,"")}function lL(t,e,n){let{x:r,y:s}=t,i=`translate(${r}${n},${s}${n})`;if(e){const o=`${typeof e.x=="string"?e.x:e.x+n}`,a=`${typeof e.y=="string"?e.y:e.y+n}`;i=`translate(${o}, ${a})`+i}return i}function Tfe(t,e){return t.targetTouches&&(0,Vo.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,Vo.findInArray)(t.changedTouches,n=>e===n.identifier)}function Rfe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function Pfe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&uV(t.body,"react-draggable-transparent-selection")}function Ofe(t){window.requestAnimationFrame?window.requestAnimationFrame(()=>{W6(t)}):W6(t)}function W6(t){if(t)try{if(t.body&&dV(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function uV(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp(`(?:^|\\s)${e}(?!\\S)`))||(t.className+=` ${e}`)}function dV(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp(`(?:^|\\s)${e}(?!\\S)`,"g"),"")}var Vl={};Object.defineProperty(Vl,"__esModule",{value:!0});Vl.canDragX=Mfe;Vl.canDragY=Lfe;Vl.createCoreData=Bfe;Vl.createDraggableData=$fe;Vl.getBoundPosition=kfe;Vl.getControlPosition=Ufe;Vl.snapToGrid=Dfe;var No=ql,Iy=Tr;function kfe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Ffe(r);const s=uL(t);if(typeof r=="string"){const{ownerDocument:i}=s,o=i.defaultView;let a;if(r==="parent"?a=s.parentNode:a=s.getRootNode().querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const c=a,l=o.getComputedStyle(s),u=o.getComputedStyle(c);r={left:-s.offsetLeft+(0,No.int)(u.paddingLeft)+(0,No.int)(l.marginLeft),top:-s.offsetTop+(0,No.int)(u.paddingTop)+(0,No.int)(l.marginTop),right:(0,Iy.innerWidth)(c)-(0,Iy.outerWidth)(s)-s.offsetLeft+(0,No.int)(u.paddingRight)-(0,No.int)(l.marginRight),bottom:(0,Iy.innerHeight)(c)-(0,Iy.outerHeight)(s)-s.offsetTop+(0,No.int)(u.paddingBottom)-(0,No.int)(l.marginBottom)}}return(0,No.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,No.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,No.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,No.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Dfe(t,e,n){const r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function Mfe(t){return t.props.axis==="both"||t.props.axis==="x"}function Lfe(t){return t.props.axis==="both"||t.props.axis==="y"}function Ufe(t,e,n){const r=typeof e=="number"?(0,Iy.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const s=uL(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Iy.offsetXYFromParent)(r||t,i,n.props.scale)}function Bfe(t,e,n){const r=!(0,No.isNum)(t.lastX),s=uL(t);return r?{node:s,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:s,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function $fe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Ffe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function uL(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var CN={},_N={};Object.defineProperty(_N,"__esModule",{value:!0});_N.default=jfe;function jfe(){}Object.defineProperty(CN,"__esModule",{value:!0});CN.default=void 0;var tP=hV(k),oi=dL(sV),Wfe=dL(sL),Gs=Tr,Ad=Vl,nP=ql,Gb=dL(_N);function dL(t){return t&&t.__esModule?t:{default:t}}function hV(t,e){if(typeof WeakMap=="function")var n=new WeakMap,r=new WeakMap;return(hV=function(s,i){if(!i&&s&&s.__esModule)return s;var o,a,c={__proto__:null,default:s};if(s===null||typeof s!="object"&&typeof s!="function")return c;if(o=i?r:n){if(o.has(s))return o.get(s);o.set(s,c)}for(const l in s)l!=="default"&&{}.hasOwnProperty.call(s,l)&&((a=(o=Object.defineProperty)&&Object.getOwnPropertyDescriptor(s,l))&&(a.get||a.set)?o(c,l,a):c[l]=s[l]);return c})(t,e)}function ci(t,e,n){return(e=zfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zfe(t){var e=Hfe(t,"string");return typeof e=="symbol"?e:e+""}function Hfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Xa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let Sd=Xa.mouse,AN=class extends tP.Component{constructor(){super(...arguments),ci(this,"dragging",!1),ci(this,"lastX",NaN),ci(this,"lastY",NaN),ci(this,"touchIdentifier",null),ci(this,"mounted",!1),ci(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,Gs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,Gs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&!this.props.allowMobileScroll&&e.preventDefault();const s=(0,Gs.getTouchIdentifier)(e);this.touchIdentifier=s;const i=(0,Ad.getControlPosition)(e,s,this);if(i==null)return;const{x:o,y:a}=i,c=(0,Ad.createCoreData)(this,o,a);(0,Gb.default)("DraggableCore: handleDragStart: %j",c),(0,Gb.default)("calling",this.props.onStart),!(this.props.onStart(e,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Gs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,Gs.addEvent)(r,Sd.move,this.handleDrag),(0,Gs.addEvent)(r,Sd.stop,this.handleDragStop))}),ci(this,"handleDrag",e=>{const n=(0,Ad.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,c=s-this.lastY;if([a,c]=(0,Ad.snapToGrid)(this.props.grid,a,c),!a&&!c)return;r=this.lastX+a,s=this.lastY+c}const i=(0,Ad.createCoreData)(this,r,s);if((0,Gb.default)("DraggableCore: handleDrag: %j",i),this.props.onDrag(e,i)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=r,this.lastY=s}),ci(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,Ad.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:s}=n;if(Array.isArray(this.props.grid)){let c=r-this.lastX||0,l=s-this.lastY||0;[c,l]=(0,Ad.snapToGrid)(this.props.grid,c,l),r=this.lastX+c,s=this.lastY+l}const i=(0,Ad.createCoreData)(this,r,s);if(this.props.onStop(e,i)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,Gs.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,Gb.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,Gb.default)("DraggableCore: Removing handlers"),(0,Gs.removeEvent)(a.ownerDocument,Sd.move,this.handleDrag),(0,Gs.removeEvent)(a.ownerDocument,Sd.stop,this.handleDragStop))}),ci(this,"onMouseDown",e=>(Sd=Xa.mouse,this.handleDragStart(e))),ci(this,"onMouseUp",e=>(Sd=Xa.mouse,this.handleDragStop(e))),ci(this,"onTouchStart",e=>(Sd=Xa.touch,this.handleDragStart(e))),ci(this,"onTouchEnd",e=>(Sd=Xa.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,Gs.addEvent)(e,Xa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,Gs.removeEvent)(n,Xa.mouse.move,this.handleDrag),(0,Gs.removeEvent)(n,Xa.touch.move,this.handleDrag),(0,Gs.removeEvent)(n,Xa.mouse.stop,this.handleDragStop),(0,Gs.removeEvent)(n,Xa.touch.stop,this.handleDragStop),(0,Gs.removeEvent)(e,Xa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Gs.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var e,n,r;return(e=this.props)!=null&&e.nodeRef?(r=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:r.current:Wfe.default.findDOMNode(this)}render(){return tP.cloneElement(tP.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};CN.default=AN;ci(AN,"displayName","DraggableCore");ci(AN,"propTypes",{allowAnyClick:oi.default.bool,allowMobileScroll:oi.default.bool,children:oi.default.node.isRequired,disabled:oi.default.bool,enableUserSelectHack:oi.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:oi.default.arrayOf(oi.default.number),handle:oi.default.string,cancel:oi.default.string,nodeRef:oi.default.object,onStart:oi.default.func,onDrag:oi.default.func,onStop:oi.default.func,onMouseDown:oi.default.func,scale:oi.default.number,className:nP.dontSetMe,style:nP.dontSetMe,transform:nP.dontSetMe});ci(AN,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),t.default=void 0;var e=d(k),n=u(sV),r=u(sL),s=dfe,i=Tr,o=Vl,a=ql,c=u(CN),l=u(_N);function u(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(typeof WeakMap=="function")var v=new WeakMap,A=new WeakMap;return(d=function(C,T){if(!T&&C&&C.__esModule)return C;var x,N,S={__proto__:null,default:C};if(C===null||typeof C!="object"&&typeof C!="function")return S;if(x=T?A:v){if(x.has(C))return x.get(C);x.set(C,S)}for(const D in C)D!=="default"&&{}.hasOwnProperty.call(C,D)&&((N=(x=Object.defineProperty)&&Object.getOwnPropertyDescriptor(C,D))&&(N.get||N.set)?x(S,D,N):S[D]=C[D]);return S})(m,b)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var b=1;b<arguments.length;b++){var v=arguments[b];for(var A in v)({}).hasOwnProperty.call(v,A)&&(m[A]=v[A])}return m},h.apply(null,arguments)}function f(m,b,v){return(b=p(b))in m?Object.defineProperty(m,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):m[b]=v,m}function p(m){var b=g(m,"string");return typeof b=="symbol"?b:b+""}function g(m,b){if(typeof m!="object"||!m)return m;var v=m[Symbol.toPrimitive];if(v!==void 0){var A=v.call(m,b);if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(m)}class w extends e.Component{static getDerivedStateFromProps(b,v){let{position:A}=b,{prevPropsPosition:C}=v;return A&&(!C||A.x!==C.x||A.y!==C.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:A,prevPropsPosition:C}),{x:A.x,y:A.y,prevPropsPosition:{...A}}):null}constructor(b){super(b),f(this,"onDragStart",(v,A)=>{if((0,l.default)("Draggable: onDragStart: %j",A),this.props.onStart(v,(0,o.createDraggableData)(this,A))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),f(this,"onDrag",(v,A)=>{if(!this.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",A);const C=(0,o.createDraggableData)(this,A),T={x:C.x,y:C.y,slackX:0,slackY:0};if(this.props.bounds){const{x:N,y:S}=T;T.x+=this.state.slackX,T.y+=this.state.slackY;const[D,P]=(0,o.getBoundPosition)(this,T.x,T.y);T.x=D,T.y=P,T.slackX=this.state.slackX+(N-T.x),T.slackY=this.state.slackY+(S-T.y),C.x=T.x,C.y=T.y,C.deltaX=T.x-this.state.x,C.deltaY=T.y-this.state.y}if(this.props.onDrag(v,C)===!1)return!1;this.setState(T)}),f(this,"onDragStop",(v,A)=>{if(!this.state.dragging||this.props.onStop(v,(0,o.createDraggableData)(this,A))===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",A);const T={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:N,y:S}=this.props.position;T.x=N,T.y=S}this.setState(T)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var b,v;return((v=(b=this.props)==null?void 0:b.nodeRef)==null?void 0:v.current)??r.default.findDOMNode(this)}render(){const{axis:b,bounds:v,children:A,defaultPosition:C,defaultClassName:T,defaultClassNameDragging:x,defaultClassNameDragged:N,position:S,positionOffset:D,scale:P,...$}=this.props;let G={},W=null;const R=!!!S||this.state.dragging,B=S||C,O={x:(0,o.canDragX)(this)&&R?this.state.x:B.x,y:(0,o.canDragY)(this)&&R?this.state.y:B.y};this.state.isElementSVG?W=(0,i.createSVGTransform)(O,D):G=(0,i.createCSSTransform)(O,D);const M=(0,s.clsx)(A.props.className||"",T,{[x]:this.state.dragging,[N]:this.state.dragged});return e.createElement(c.default,h({},$,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(A),{className:M,style:{...A.props.style,...G},transform:W}))}}t.default=w,f(w,"displayName","Draggable"),f(w,"propTypes",{...c.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),f(w,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(eV);const{default:fV,DraggableCore:Gfe}=eV;EN.exports=fV;EN.exports.default=fV;EN.exports.DraggableCore=Gfe;var qfe=EN.exports;const L_=Zg(qfe);function yr(){return yr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yr.apply(null,arguments)}function pV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var gV={exports:{}},Dn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vs=typeof Symbol=="function"&&Symbol.for,hL=vs?Symbol.for("react.element"):60103,fL=vs?Symbol.for("react.portal"):60106,SN=vs?Symbol.for("react.fragment"):60107,xN=vs?Symbol.for("react.strict_mode"):60108,IN=vs?Symbol.for("react.profiler"):60114,NN=vs?Symbol.for("react.provider"):60109,TN=vs?Symbol.for("react.context"):60110,pL=vs?Symbol.for("react.async_mode"):60111,RN=vs?Symbol.for("react.concurrent_mode"):60111,PN=vs?Symbol.for("react.forward_ref"):60112,ON=vs?Symbol.for("react.suspense"):60113,Vfe=vs?Symbol.for("react.suspense_list"):60120,kN=vs?Symbol.for("react.memo"):60115,DN=vs?Symbol.for("react.lazy"):60116,Kfe=vs?Symbol.for("react.block"):60121,Yfe=vs?Symbol.for("react.fundamental"):60117,Qfe=vs?Symbol.for("react.responder"):60118,Jfe=vs?Symbol.for("react.scope"):60119;function ea(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hL:switch(t=t.type,t){case pL:case RN:case SN:case IN:case xN:case ON:return t;default:switch(t=t&&t.$$typeof,t){case TN:case PN:case DN:case kN:case NN:return t;default:return e}}case fL:return e}}}function mV(t){return ea(t)===RN}Dn.AsyncMode=pL;Dn.ConcurrentMode=RN;Dn.ContextConsumer=TN;Dn.ContextProvider=NN;Dn.Element=hL;Dn.ForwardRef=PN;Dn.Fragment=SN;Dn.Lazy=DN;Dn.Memo=kN;Dn.Portal=fL;Dn.Profiler=IN;Dn.StrictMode=xN;Dn.Suspense=ON;Dn.isAsyncMode=function(t){return mV(t)||ea(t)===pL};Dn.isConcurrentMode=mV;Dn.isContextConsumer=function(t){return ea(t)===TN};Dn.isContextProvider=function(t){return ea(t)===NN};Dn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hL};Dn.isForwardRef=function(t){return ea(t)===PN};Dn.isFragment=function(t){return ea(t)===SN};Dn.isLazy=function(t){return ea(t)===DN};Dn.isMemo=function(t){return ea(t)===kN};Dn.isPortal=function(t){return ea(t)===fL};Dn.isProfiler=function(t){return ea(t)===IN};Dn.isStrictMode=function(t){return ea(t)===xN};Dn.isSuspense=function(t){return ea(t)===ON};Dn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===SN||t===RN||t===IN||t===xN||t===ON||t===Vfe||typeof t=="object"&&t!==null&&(t.$$typeof===DN||t.$$typeof===kN||t.$$typeof===NN||t.$$typeof===TN||t.$$typeof===PN||t.$$typeof===Yfe||t.$$typeof===Qfe||t.$$typeof===Jfe||t.$$typeof===Kfe)};Dn.typeOf=ea;gV.exports=Dn;var Zfe=gV.exports,gL=Zfe,Xfe={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},epe={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},tpe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mL={};mL[gL.ForwardRef]=tpe;mL[gL.Memo]=yV;function z6(t){return gL.isMemo(t)?yV:mL[t.$$typeof]||Xfe}var npe=Object.defineProperty,rpe=Object.getOwnPropertyNames,H6=Object.getOwnPropertySymbols,spe=Object.getOwnPropertyDescriptor,ipe=Object.getPrototypeOf,G6=Object.prototype;function wV(t,e,n){if(typeof e!="string"){if(G6){var r=ipe(e);r&&r!==G6&&wV(t,r,n)}var s=rpe(e);H6&&(s=s.concat(H6(e)));for(var i=z6(t),o=z6(e),a=0;a<s.length;++a){var c=s[a];if(!epe[c]&&!(n&&n[c])&&!(o&&o[c])&&!(i&&i[c])){var l=spe(e,c);try{npe(t,c,l)}catch{}}}}return t}var ope=wV;const ape=Zg(ope);var bV={};Object.defineProperty(bV,"__esModule",{value:!0});bV.default=cpe;function cpe(t){return t.displayName||t.name||(typeof t=="string"&&t.length>0?t:"Unknown")}function rA(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mx(){return Mx=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mx.apply(this,arguments)}function lpe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function xd(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function upe(t){var e=function(n){lpe(r,n);function r(){for(var i,o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return i=n.call.apply(n,[this].concat(a))||this,rA(xd(xd(i)),"cachedTheme",void 0),rA(xd(xd(i)),"lastOuterTheme",void 0),rA(xd(xd(i)),"lastTheme",void 0),rA(xd(xd(i)),"renderProvider",function(l){var u=i.props.children;return Go.createElement(t.Provider,{value:i.getTheme(l)},u)}),i}var s=r.prototype;return s.getTheme=function(o){if(this.props.theme!==this.lastTheme||o!==this.lastOuterTheme||!this.cachedTheme)if(this.lastOuterTheme=o,this.lastTheme=this.props.theme,typeof this.lastTheme=="function"){var a=this.props.theme;this.cachedTheme=a(o)}else{var c=this.props.theme;this.cachedTheme=o?Mx({},o,c):c}return this.cachedTheme},s.render=function(){var o=this.props.children;return o?Go.createElement(t.Consumer,null,this.renderProvider):null},r}(Go.Component);return e}function dpe(t){return function(n){var r=Go.forwardRef(function(s,i){return Go.createElement(t.Consumer,null,function(o){return Go.createElement(n,Mx({theme:o,ref:i},s))})});return ape(r,n),r}}function hpe(t){var e=function(){var r=Go.useContext(t);return r};return e}function fpe(t){return{context:t,withTheme:dpe(t),useTheme:hpe(t),ThemeProvider:upe(t)}}var vV=k.createContext();fpe(vV);var q6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tb=(typeof window>"u"?"undefined":q6(window))==="object"&&(typeof document>"u"?"undefined":q6(document))==="object"&&document.nodeType===9;function QE(t){"@babel/helpers - typeof";return QE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QE(t)}function ppe(t,e){if(QE(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(QE(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gpe(t){var e=ppe(t,"string");return QE(e)=="symbol"?e:e+""}function mpe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gpe(r.key),r)}}function yL(t,e,n){return e&&mpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function kk(t,e){return kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},kk(t,e)}function EV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,kk(t,e)}function V6(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ype={}.constructor;function Dk(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(Dk);if(t.constructor!==ype)return t;var e={};for(var n in t)e[n]=Dk(t[n]);return e}function MN(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,s=Dk(e),i=r.plugins.onCreateRule(t,s,n);return i||(t[0],null)}var K6=function(e,n){for(var r="",s=0;s<e.length&&e[s]!=="!important";s++)r&&(r+=n),r+=e[s];return r},ug=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=K6(e[r]," ");else n=K6(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function nb(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function qb(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function JE(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var s=n,i=s.indent,o=i===void 0?0:i,a=e.fallbacks;n.format===!1&&(o=-1/0);var c=nb(n),l=c.linebreak,u=c.space;if(t&&o++,a)if(Array.isArray(a))for(var d=0;d<a.length;d++){var h=a[d];for(var f in h){var p=h[f];p!=null&&(r&&(r+=l),r+=qb(f+":"+u+ug(p)+";",o))}}else for(var g in a){var w=a[g];w!=null&&(r&&(r+=l),r+=qb(g+":"+u+ug(w)+";",o))}for(var m in e){var b=e[m];b!=null&&m!=="fallbacks"&&(r&&(r+=l),r+=qb(m+":"+u+ug(b)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+l+r+l),qb(""+t+u+"{"+r,o)+qb("}",o))}var wpe=/([[\].#*$><+~=|^:(),"'`\s])/g,Y6=typeof CSS<"u"&&CSS.escape,wL=function(t){return Y6?Y6(t):t.replace(wpe,"\\$1")},CV=function(){function t(n,r,s){this.type="style",this.isProcessed=!1;var i=s.sheet,o=s.Renderer;this.key=n,this.options=s,this.style=r,i?this.renderer=i.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,s,i){if(s===void 0)return this.style[r];var o=i?i.force:!1;if(!o&&this.style[r]===s)return this;var a=s;(!i||i.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(s,r,this));var c=a==null||a===!1,l=r in this.style;if(c&&!l&&!o)return this;var u=c&&l;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var d=this.options.sheet;return d&&d.attached,this},t}(),Mk=function(t){EV(e,t);function e(r,s,i){var o;o=t.call(this,r,s,i)||this;var a=i.selector,c=i.scoped,l=i.sheet,u=i.generateId;return a?o.selectorText=a:c!==!1&&(o.id=u(V6(V6(o)),l),o.selectorText="."+wL(o.id)),o}var n=e.prototype;return n.applyTo=function(s){var i=this.renderer;if(i){var o=this.toJSON();for(var a in o)i.setProperty(s,a,o[a])}return this},n.toJSON=function(){var s={};for(var i in this.style){var o=this.style[i];typeof o!="object"?s[i]=o:Array.isArray(o)&&(s[i]=ug(o))}return s},n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?yr({},s,{allowEmpty:!0}):s;return JE(this.selectorText,this.style,a)},yL(e,[{key:"selector",set:function(s){if(s!==this.selectorText){this.selectorText=s;var i=this.renderer,o=this.renderable;if(!(!o||!i)){var a=i.setSelector(o,s);a||i.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(CV),bpe={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new Mk(e,n,r)}},rP={indent:1,children:!0},vpe=/@([\w-]+)/,Epe=function(){function t(n,r,s){this.type="conditional",this.isProcessed=!1,this.key=n;var i=n.match(vpe);this.at=i?i[1]:"unknown",this.query=s.name||"@"+this.at,this.options=s,this.rules=new LN(yr({},s,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=rP);var s=nb(r),i=s.linebreak;if(r.indent==null&&(r.indent=rP.indent),r.children==null&&(r.children=rP.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+i+o+i+"}":""},t}(),Cpe=/@container|@media|@supports\s+/,_pe={onCreateRule:function(e,n,r){return Cpe.test(e)?new Epe(e,n,r):null}},sP={indent:1,children:!0},Ape=/@keyframes\s+([\w-]+)/,Lk=function(){function t(n,r,s){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var i=n.match(Ape);i&&i[1]?this.name=i[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=s;var o=s.scoped,a=s.sheet,c=s.generateId;this.id=o===!1?this.name:wL(c(this,a)),this.rules=new LN(yr({},s,{parent:this}));for(var l in r)this.rules.add(l,r[l],yr({},s,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=sP);var s=nb(r),i=s.linebreak;if(r.indent==null&&(r.indent=sP.indent),r.children==null&&(r.children=sP.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+i+o+i),this.at+" "+this.id+" {"+o+"}"},t}(),Spe=/@keyframes\s+/,xpe=/\$([\w-]+)/g,Uk=function(e,n){return typeof e=="string"?e.replace(xpe,function(r,s){return s in n?n[s]:r}):e},Q6=function(e,n,r){var s=e[n],i=Uk(s,r);i!==s&&(e[n]=i)},Ipe={onCreateRule:function(e,n,r){return typeof e=="string"&&Spe.test(e)?new Lk(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&Q6(e,"animation-name",r.keyframes),"animation"in e&&Q6(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var s=r.options.sheet;if(!s)return e;switch(n){case"animation":return Uk(e,s.keyframes);case"animation-name":return Uk(e,s.keyframes);default:return e}}},Npe=function(t){EV(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(s){var i=this.options.sheet,o=i?i.options.link:!1,a=o?yr({},s,{allowEmpty:!0}):s;return JE(this.key,this.style,a)},e}(CV),Tpe={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new Npe(e,n,r):null}},Rpe=function(){function t(n,r,s){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){var s=nb(r),i=s.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=JE(this.at,this.style[a]),this.style[a+1]&&(o+=i);return o}return JE(this.at,this.style,r)},t}(),Ppe=/@font-face/,Ope={onCreateRule:function(e,n,r){return Ppe.test(e)?new Rpe(e,n,r):null}},kpe=function(){function t(n,r,s){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=s}var e=t.prototype;return e.toString=function(r){return JE(this.key,this.style,r)},t}(),Dpe={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new kpe(e,n,r):null}},Mpe=function(){function t(n,r,s){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=s}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var s="",i=0;i<this.value.length;i++)s+=this.key+" "+this.value[i]+";",this.value[i+1]&&(s+=`
`);return s}return this.key+" "+this.value+";"},t}(),Lpe={"@charset":!0,"@import":!0,"@namespace":!0},Upe={onCreateRule:function(e,n,r){return e in Lpe?new Mpe(e,n,r):null}},J6=[bpe,_pe,Ipe,Tpe,Ope,Dpe,Upe],Bpe={process:!0},Z6={force:!0,process:!0},LN=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,s,i){var o=this.options,a=o.parent,c=o.sheet,l=o.jss,u=o.Renderer,d=o.generateId,h=o.scoped,f=yr({classes:this.classes,parent:a,sheet:c,jss:l,Renderer:u,generateId:d,scoped:h,name:r,keyframes:this.keyframes,selector:void 0},i),p=r;r in this.raw&&(p=r+"-d"+this.counter++),this.raw[p]=s,p in this.classes&&(f.selector="."+wL(this.classes[p]));var g=MN(p,s,f);if(!g)return null;this.register(g);var w=f.index===void 0?this.index.length:f.index;return this.index.splice(w,0,g),g},e.replace=function(r,s,i){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var c=i;return a!==-1&&(c=yr({},i,{index:a})),this.add(r,s,c)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof Mk?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof Lk&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof Mk?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof Lk&&delete this.keyframes[r.name]},e.update=function(){var r,s,i;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],i=arguments.length<=2?void 0:arguments[2]):(s=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),s,i);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],s,i)},e.updateOne=function(r,s,i){i===void 0&&(i=Bpe);var o=this.options,a=o.jss.plugins,c=o.sheet;if(r.rules instanceof t){r.rules.update(s,i);return}var l=r.style;if(a.onUpdate(s,r,c,i),i.process&&l&&l!==r.style){a.onProcessStyle(r.style,r,c);for(var u in r.style){var d=r.style[u],h=l[u];d!==h&&r.prop(u,d,Z6)}for(var f in l){var p=r.style[f],g=l[f];p==null&&p!==g&&r.prop(f,null,Z6)}}},e.toString=function(r){for(var s="",i=this.options.sheet,o=i?i.options.link:!1,a=nb(r),c=a.linebreak,l=0;l<this.index.length;l++){var u=this.index[l],d=u.toString(r);!d&&!o||(s&&(s+=c),s+=d)}return s},t}(),_V=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=yr({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new LN(this.options);for(var s in n)this.rules.add(s,n[s]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,s,i){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,s,i);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,s,i){var o=this.rules.get(r);if(!o)return this.addRule(r,s,i);var a=this.rules.replace(r,s,i);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,s){var i=[];for(var o in r){var a=this.addRule(o,r[o],s);a&&i.push(a)}return i},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var s=typeof r=="object"?r:this.rules.get(r);return!s||this.attached&&!s.renderable?!1:(this.rules.remove(s),this.attached&&s.renderable&&this.renderer?this.renderer.deleteRule(s.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,s,i){return this.rules.updateOne(r,s,i),this},e.toString=function(r){return this.rules.toString(r)},t}(),$pe=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,s,i){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,s,i);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var s=r.options.sheet,i=0;i<this.registry.onProcessRule.length;i++)this.registry.onProcessRule[i](r,s);r.style&&this.onProcessStyle(r.style,r,s),r.isProcessed=!0}},e.onProcessStyle=function(r,s,i){for(var o=0;o<this.registry.onProcessStyle.length;o++)s.style=this.registry.onProcessStyle[o](s.style,s,i)},e.onProcessSheet=function(r){for(var s=0;s<this.registry.onProcessSheet.length;s++)this.registry.onProcessSheet[s](r)},e.onUpdate=function(r,s,i,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,s,i,o)},e.onChangeValue=function(r,s,i){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,s,i);return o},e.use=function(r,s){s===void 0&&(s={queue:"external"});var i=this.plugins[s.queue];i.indexOf(r)===-1&&(i.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var c in a)c in o&&o[c].push(a[c]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),Fpe=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var s=this.registry,i=r.options.index;if(s.indexOf(r)===-1){if(s.length===0||i>=this.index){s.push(r);return}for(var o=0;o<s.length;o++)if(s[o].options.index>i){s.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var s=this.registry.indexOf(r);this.registry.splice(s,1)},e.toString=function(r){for(var s=r===void 0?{}:r,i=s.attached,o=pV(s,["attached"]),a=nb(o),c=a.linebreak,l="",u=0;u<this.registry.length;u++){var d=this.registry[u];i!=null&&d.attached!==i||(l&&(l+=c),l+=d.toString(o))}return l},yL(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),tE=new Fpe,Bk=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),$k="2f1acc6c3a606b082e5eef5e54414ffb";Bk[$k]==null&&(Bk[$k]=0);var X6=Bk[$k]++,e8=function(e){e===void 0&&(e={});var n=0,r=function(i,o){n+=1;var a="",c="";return o&&(o.options.classNamePrefix&&(c=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(c||"c")+X6+a+n:c+i.key+"-"+X6+(a?"-"+a:"")+"-"+n};return r},AV=function(e){var n;return function(){return n||(n=e()),n}},jpe=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},Wpe=function(e,n,r){try{var s=r;if(Array.isArray(r)&&(s=ug(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,s);else{var i=s?s.indexOf("!important"):-1,o=i>-1?s.substr(0,i-1):s;e.style.setProperty(n,o,i>-1?"important":"")}}catch{return!1}return!0},zpe=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},Hpe=function(e,n){return e.selectorText=n,e.selectorText===n},SV=AV(function(){return document.querySelector("head")});function Gpe(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function qpe(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function Vpe(t){for(var e=SV(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function Kpe(t){var e=tE.registry;if(e.length>0){var n=Gpe(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=qpe(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var s=Vpe(r);if(s)return{parent:s.parentNode,node:s.nextSibling}}return!1}function Ype(t,e){var n=e.insertionPoint,r=Kpe(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var s=n,i=s.parentNode;i&&i.insertBefore(t,s.nextSibling);return}SV().appendChild(t)}var Qpe=AV(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),t8=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},n8=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},Jpe=function(){var e=document.createElement("style");return e.textContent=`
`,e},Zpe=function(){function t(n){this.getPropertyValue=jpe,this.setProperty=Wpe,this.removeProperty=zpe,this.setSelector=Hpe,this.hasInsertedRules=!1,this.cssRules=[],n&&tE.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},s=r.media,i=r.meta,o=r.element;this.element=o||Jpe(),this.element.setAttribute("data-jss",""),s&&this.element.setAttribute("media",s),i&&this.element.setAttribute("data-meta",i);var a=Qpe();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){Ype(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,s){for(var i=0;i<r.index.length;i++)this.insertRule(r.index[i],i,s)},e.insertRule=function(r,s,i){if(i===void 0&&(i=this.element.sheet),r.rules){var o=r,a=i;if(r.type==="conditional"||r.type==="keyframes"){var c=n8(i,s);if(a=t8(i,o.toString({children:!1}),c),a===!1)return!1;this.refCssRule(r,c,a)}return this.insertRules(o.rules,a),a}var l=r.toString();if(!l)return!1;var u=n8(i,s),d=t8(i,l,u);return d===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,d),d)},e.refCssRule=function(r,s,i){r.renderable=i,r.options.parent instanceof _V&&this.cssRules.splice(s,0,i)},e.deleteRule=function(r){var s=this.element.sheet,i=this.indexOf(r);return i===-1?!1:(s.deleteRule(i),this.cssRules.splice(i,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,s){var i=this.indexOf(r);return i===-1?!1:(this.element.sheet.deleteRule(i),this.cssRules.splice(i,1),this.insertRule(s,i))},e.getRules=function(){return this.element.sheet.cssRules},t}(),Xpe=0,ege=function(){function t(n){this.id=Xpe++,this.version="10.10.0",this.plugins=new $pe,this.options={id:{minify:!1},createGenerateId:e8,Renderer:tb?Zpe:null,plugins:[]},this.generateId=e8({minify:!1});for(var r=0;r<J6.length;r++)this.plugins.use(J6[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=yr({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,s){s===void 0&&(s={});var i=s,o=i.index;typeof o!="number"&&(o=tE.index===0?0:tE.index+1);var a=new _V(r,yr({},s,{jss:this,generateId:s.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),tE.remove(r),this},e.createRule=function(r,s,i){if(s===void 0&&(s={}),i===void 0&&(i={}),typeof r=="object")return this.createRule(void 0,r,s);var o=yr({},i,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=MN(r,s,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return i.forEach(function(a){r.plugins.use(a)}),this},t}(),xV=function(e){return new ege(e)},r8=function(){function t(){this.length=0,this.sheets=new WeakMap}var e=t.prototype;return e.get=function(r){var s=this.sheets.get(r);return s&&s.sheet},e.add=function(r,s){this.sheets.has(r)||(this.length++,this.sheets.set(r,{sheet:s,refs:0}))},e.manage=function(r){var s=this.sheets.get(r);if(s)return s.refs===0&&s.sheet.attach(),s.refs++,s.sheet},e.unmanage=function(r){var s=this.sheets.get(r);s&&s.refs>0&&(s.refs--,s.refs===0&&s.sheet.detach())},yL(t,[{key:"size",get:function(){return this.length}}]),t}(),bL=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function IV(t){var e=null;for(var n in t){var r=t[n],s=typeof r;if(s==="function")e||(e={}),e[n]=r;else if(s==="object"&&r!==null&&!Array.isArray(r)){var i=IV(r);i&&(e||(e={}),e[n]=i)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */xV();var NV=Date.now(),iP="fnValues"+NV,oP="fnStyle"+ ++NV,tge=function(){return{onCreateRule:function(n,r,s){if(typeof r!="function")return null;var i=MN(n,{},s);return i[oP]=r,i},onProcessStyle:function(n,r){if(iP in r||oP in r)return n;var s={};for(var i in n){var o=n[i];typeof o=="function"&&(delete n[i],s[i]=o)}return r[iP]=s,n},onUpdate:function(n,r,s,i){var o=r,a=o[oP];a&&(o.style=a(n)||{});var c=o[iP];if(c)for(var l in c)o.prop(l,c[l](n),i)}}};function nge(t){var e,n=t.Symbol;return typeof n=="function"?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}var iy;typeof self<"u"?iy=self:typeof window<"u"?iy=window:typeof global<"u"?iy=global:typeof module<"u"?iy=module:iy=Function("return this")();var s8=nge(iy),i8=function(e){return e&&e[s8]&&e===e[s8]()},rge=function(e){return{onCreateRule:function(r,s,i){if(!i8(s))return null;var o=s,a=MN(r,{},i);return o.subscribe(function(c){for(var l in c)a.prop(l,c[l],e)}),a},onProcessRule:function(r){if(!(r&&r.type!=="style")){var s=r,i=s.style,o=function(u){var d=i[u];if(!i8(d))return"continue";delete i[u],d.subscribe({next:function(f){s.prop(u,f,e)}})};for(var a in i)var c=o(a)}}}},sge=/;\n/,ige=function(e){for(var n={},r=e.split(sge),s=0;s<r.length;s++){var i=(r[s]||"").trim();if(i){var o=i.indexOf(":");if(o!==-1){var a=i.substr(0,o).trim(),c=i.substr(o+1).trim();n[a]=c}}}return n},oge=function(e){typeof e.style=="string"&&(e.style=ige(e.style))};function age(){return{onProcessRule:oge}}var Zh="@global",Fk="@global ",cge=function(){function t(n,r,s){this.type="global",this.at=Zh,this.isProcessed=!1,this.key=n,this.options=s,this.rules=new LN(yr({},s,{parent:this}));for(var i in r)this.rules.add(i,r[i]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,s,i){var o=this.rules.add(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,s,i){var o=this.rules.replace(r,s,i);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),lge=function(){function t(n,r,s){this.type="global",this.at=Zh,this.isProcessed=!1,this.key=n,this.options=s;var i=n.substr(Fk.length);this.rule=s.jss.createRule(i,r,yr({},s,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),uge=/\s*,\s*/g;function TV(t,e){for(var n=t.split(uge),r="",s=0;s<n.length;s++)r+=e+" "+n[s].trim(),n[s+1]&&(r+=", ");return r}function dge(t,e){var n=t.options,r=t.style,s=r?r[Zh]:null;if(s){for(var i in s)e.addRule(i,s[i],yr({},n,{selector:TV(i,t.selector)}));delete r[Zh]}}function hge(t,e){var n=t.options,r=t.style;for(var s in r)if(!(s[0]!=="@"||s.substr(0,Zh.length)!==Zh)){var i=TV(s.substr(Zh.length),t.selector);e.addRule(i,r[s],yr({},n,{selector:i})),delete r[s]}}function fge(){function t(n,r,s){if(!n)return null;if(n===Zh)return new cge(n,r,s);if(n[0]==="@"&&n.substr(0,Fk.length)===Fk)return new lge(n,r,s);var i=s.parent;return i&&(i.type==="global"||i.options.parent&&i.options.parent.type==="global")&&(s.scoped=!1),!s.selector&&s.scoped===!1&&(s.selector=n),null}function e(n,r){n.type!=="style"||!r||(dge(n,r),hge(n,r))}return{onCreateRule:t,onProcessRule:e}}var fS=function(e){return e&&typeof e=="object"&&!Array.isArray(e)},aP="extendCurrValue"+Date.now();function pge(t,e,n,r){var s=typeof t.extend;if(s==="string"){if(!n)return;var i=n.getRule(t.extend);if(!i||i===e)return;var o=i.options.parent;if(o){var a=o.rules.raw[t.extend];Ep(a,e,n,r)}return}if(Array.isArray(t.extend)){for(var c=0;c<t.extend.length;c++){var l=t.extend[c],u=typeof l=="string"?yr({},t,{extend:l}):t.extend[c];Ep(u,e,n,r)}return}for(var d in t.extend){if(d==="extend"){Ep(t.extend.extend,e,n,r);continue}if(fS(t.extend[d])){d in r||(r[d]={}),Ep(t.extend[d],e,n,r[d]);continue}r[d]=t.extend[d]}}function gge(t,e,n,r){for(var s in t)if(s!=="extend"){if(fS(r[s])&&fS(t[s])){Ep(t[s],e,n,r[s]);continue}if(fS(t[s])){r[s]=Ep(t[s],e,n);continue}r[s]=t[s]}}function Ep(t,e,n,r){return r===void 0&&(r={}),pge(t,e,n,r),gge(t,e,n,r),r}function mge(){function t(n,r,s){return"extend"in n?Ep(n,r,s):n}function e(n,r,s){if(r!=="extend")return n;if(n==null||n===!1){for(var i in s[aP])s.prop(i,null);return s[aP]=null,null}if(typeof n=="object"){for(var o in n)s.prop(o,n[o]);s[aP]=n}return null}return{onProcessStyle:t,onChangeValue:e}}var o8=/\s*,\s*/g,yge=/&/g,wge=/\$([\w-]+)/g;function bge(){function t(s,i){return function(o,a){var c=s.getRule(a)||i&&i.getRule(a);return c?c.selector:a}}function e(s,i){for(var o=i.split(o8),a=s.split(o8),c="",l=0;l<o.length;l++)for(var u=o[l],d=0;d<a.length;d++){var h=a[d];c&&(c+=", "),c+=h.indexOf("&")!==-1?h.replace(yge,u):u+" "+h}return c}function n(s,i,o){if(o)return yr({},o,{index:o.index+1});var a=s.options.nestingLevel;a=a===void 0?1:a+1;var c=yr({},s.options,{nestingLevel:a,index:i.indexOf(s)+1});return delete c.name,c}function r(s,i,o){if(i.type!=="style")return s;var a=i,c=a.options.parent,l,u;for(var d in s){var h=d.indexOf("&")!==-1,f=d[0]==="@";if(!(!h&&!f)){if(l=n(a,c,l),h){var p=e(d,a.selector);u||(u=t(c,o)),p=p.replace(wge,u);var g=a.key+"-"+d;"replaceRule"in c?c.replaceRule(g,s[d],yr({},l,{selector:p})):c.addRule(g,s[d],yr({},l,{selector:p}))}else f&&c.addRule(d,{},l).addRule(a.key,s[d],{selector:a.selector});delete s[d]}}return s}return{onProcessStyle:r}}function jk(t,e){if(!e)return!0;if(Array.isArray(e)){for(var n=0;n<e.length;n++){var r=jk(t,e[n]);if(!r)return!1}return!0}if(e.indexOf(" ")>-1)return jk(t,e.split(" "));var s=t.options.parent;if(e[0]==="$"){var i=s.getRule(e.substr(1));return!i||i===t?!1:(s.classes[t.key]+=" "+s.classes[i.key],!0)}return s.classes[t.key]+=" "+e,!0}function vge(){function t(e,n){return"composes"in e&&(jk(n,e.composes),delete e.composes),e}return{onProcessStyle:t}}var Ege=/[A-Z]/g,Cge=/^ms-/,cP={};function _ge(t){return"-"+t.toLowerCase()}function RV(t){if(cP.hasOwnProperty(t))return cP[t];var e=t.replace(Ege,_ge);return cP[t]=Cge.test(e)?"-"+e:e}function Lx(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:RV(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Lx):e.fallbacks=Lx(t.fallbacks)),e}function Age(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Lx(n[r]);return n}return Lx(n)}function e(n,r,s){if(r.indexOf("--")===0)return n;var i=RV(r);return r===i?n:(s.prop(i,n),null)}return{onProcessStyle:t,onChangeValue:e}}var ue=bL&&CSS?CSS.px:"px",sA=bL&&CSS?CSS.ms:"ms",Rm=bL&&CSS?CSS.percent:"%",Sge={"animation-delay":sA,"animation-duration":sA,"background-position":ue,"background-position-x":ue,"background-position-y":ue,"background-size":ue,border:ue,"border-bottom":ue,"border-bottom-left-radius":ue,"border-bottom-right-radius":ue,"border-bottom-width":ue,"border-left":ue,"border-left-width":ue,"border-radius":ue,"border-right":ue,"border-right-width":ue,"border-top":ue,"border-top-left-radius":ue,"border-top-right-radius":ue,"border-top-width":ue,"border-width":ue,"border-block":ue,"border-block-end":ue,"border-block-end-width":ue,"border-block-start":ue,"border-block-start-width":ue,"border-block-width":ue,"border-inline":ue,"border-inline-end":ue,"border-inline-end-width":ue,"border-inline-start":ue,"border-inline-start-width":ue,"border-inline-width":ue,"border-start-start-radius":ue,"border-start-end-radius":ue,"border-end-start-radius":ue,"border-end-end-radius":ue,margin:ue,"margin-bottom":ue,"margin-left":ue,"margin-right":ue,"margin-top":ue,"margin-block":ue,"margin-block-end":ue,"margin-block-start":ue,"margin-inline":ue,"margin-inline-end":ue,"margin-inline-start":ue,padding:ue,"padding-bottom":ue,"padding-left":ue,"padding-right":ue,"padding-top":ue,"padding-block":ue,"padding-block-end":ue,"padding-block-start":ue,"padding-inline":ue,"padding-inline-end":ue,"padding-inline-start":ue,"mask-position-x":ue,"mask-position-y":ue,"mask-size":ue,height:ue,width:ue,"min-height":ue,"max-height":ue,"min-width":ue,"max-width":ue,bottom:ue,left:ue,top:ue,right:ue,inset:ue,"inset-block":ue,"inset-block-end":ue,"inset-block-start":ue,"inset-inline":ue,"inset-inline-end":ue,"inset-inline-start":ue,"box-shadow":ue,"text-shadow":ue,"column-gap":ue,"column-rule":ue,"column-rule-width":ue,"column-width":ue,"font-size":ue,"font-size-delta":ue,"letter-spacing":ue,"text-decoration-thickness":ue,"text-indent":ue,"text-stroke":ue,"text-stroke-width":ue,"word-spacing":ue,motion:ue,"motion-offset":ue,outline:ue,"outline-offset":ue,"outline-width":ue,perspective:ue,"perspective-origin-x":Rm,"perspective-origin-y":Rm,"transform-origin":Rm,"transform-origin-x":Rm,"transform-origin-y":Rm,"transform-origin-z":Rm,"transition-delay":sA,"transition-duration":sA,"vertical-align":ue,"flex-basis":ue,"shape-margin":ue,size:ue,gap:ue,grid:ue,"grid-gap":ue,"row-gap":ue,"grid-row-gap":ue,"grid-column-gap":ue,"grid-template-rows":ue,"grid-template-columns":ue,"grid-auto-rows":ue,"grid-auto-columns":ue,"box-shadow-x":ue,"box-shadow-y":ue,"box-shadow-blur":ue,"box-shadow-spread":ue,"font-line-height":ue,"text-shadow-x":ue,"text-shadow-y":ue,"text-shadow-blur":ue};function PV(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var s in t)r[s]=t[s],r[s.replace(e,n)]=t[s];return r}var xge=PV(Sge);function nE(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=nE(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var s in e)e[s]=nE(s,e[s],n);else for(var i in e)e[i]=nE(t+"-"+i,e[i],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||xge[t];return o&&!(e===0&&o===ue)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function Ige(t){t===void 0&&(t={});var e=PV(t);function n(s,i){if(i.type!=="style")return s;for(var o in s)s[o]=nE(o,s[o],e);return s}function r(s,i){return nE(i,s,e)}return{onProcessStyle:n,onChangeValue:r}}var Nge={"background-size":!0,"background-position":!0,border:!0,"border-bottom":!0,"border-left":!0,"border-top":!0,"border-right":!0,"border-radius":!0,"border-image":!0,"border-width":!0,"border-style":!0,"border-color":!0,"box-shadow":!0,flex:!0,margin:!0,padding:!0,outline:!0,"transform-origin":!0,transform:!0,transition:!0},Tge={position:!0,size:!0},iA={padding:{top:0,right:0,bottom:0,left:0},margin:{top:0,right:0,bottom:0,left:0},background:{attachment:null,color:null,image:null,position:null,repeat:null},border:{width:null,style:null,color:null},"border-top":{width:null,style:null,color:null},"border-right":{width:null,style:null,color:null},"border-bottom":{width:null,style:null,color:null},"border-left":{width:null,style:null,color:null},outline:{width:null,style:null,color:null},"list-style":{type:null,position:null,image:null},transition:{property:null,duration:null,"timing-function":null,timingFunction:null,delay:null},animation:{name:null,duration:null,"timing-function":null,timingFunction:null,delay:null,"iteration-count":null,iterationCount:null,direction:null,"fill-mode":null,fillMode:null,"play-state":null,playState:null},"box-shadow":{x:0,y:0,blur:0,spread:0,color:null,inset:null},"text-shadow":{x:0,y:0,blur:null,color:null}},lP={border:{radius:"border-radius",image:"border-image",width:"border-width",style:"border-style",color:"border-color"},"border-bottom":{width:"border-bottom-width",style:"border-bottom-style",color:"border-bottom-color"},"border-top":{width:"border-top-width",style:"border-top-style",color:"border-top-color"},"border-left":{width:"border-left-width",style:"border-left-style",color:"border-left-color"},"border-right":{width:"border-right-width",style:"border-right-style",color:"border-right-color"},background:{size:"background-size",image:"background-image"},font:{style:"font-style",variant:"font-variant",weight:"font-weight",stretch:"font-stretch",size:"font-size",family:"font-family",lineHeight:"line-height","line-height":"line-height"},flex:{grow:"flex-grow",basis:"flex-basis",direction:"flex-direction",wrap:"flex-wrap",flow:"flex-flow",shrink:"flex-shrink"},align:{self:"align-self",items:"align-items",content:"align-content"},grid:{"template-columns":"grid-template-columns",templateColumns:"grid-template-columns","template-rows":"grid-template-rows",templateRows:"grid-template-rows","template-areas":"grid-template-areas",templateAreas:"grid-template-areas",template:"grid-template","auto-columns":"grid-auto-columns",autoColumns:"grid-auto-columns","auto-rows":"grid-auto-rows",autoRows:"grid-auto-rows","auto-flow":"grid-auto-flow",autoFlow:"grid-auto-flow",row:"grid-row",column:"grid-column","row-start":"grid-row-start",rowStart:"grid-row-start","row-end":"grid-row-end",rowEnd:"grid-row-end","column-start":"grid-column-start",columnStart:"grid-column-start","column-end":"grid-column-end",columnEnd:"grid-column-end",area:"grid-area",gap:"grid-gap","row-gap":"grid-row-gap",rowGap:"grid-row-gap","column-gap":"grid-column-gap",columnGap:"grid-column-gap"}};function Rge(t,e,n){return t.map(function(r){return kV(r,e,n,!1,!0)})}function OV(t,e,n,r){return n[e]==null?t:t.length===0?[]:Array.isArray(t[0])?OV(t[0],e,n,r):typeof t[0]=="object"?Rge(t,e,r):[t]}function kV(t,e,n,r,s){if(!(iA[e]||lP[e]))return[];var i=[];if(lP[e]&&(t=Pge(t,n,lP[e],r)),Object.keys(t).length)for(var o in iA[e]){if(t[o]){Array.isArray(t[o])?i.push(Tge[o]===null?t[o]:t[o].join(" ")):i.push(t[o]);continue}iA[e][o]!=null&&i.push(iA[e][o])}return!i.length||s?i:[i]}function Pge(t,e,n,r){for(var s in n){var i=n[s];if(typeof t[s]<"u"&&(r||!e.prop(i))){var o,a=ZE((o={},o[i]=t[s],o),e)[i];r?e.style.fallbacks[i]=a:e.style[i]=a}delete t[s]}return t}function ZE(t,e,n){for(var r in t){var s=t[r];if(Array.isArray(s)){if(!Array.isArray(s[0])){if(r==="fallbacks"){for(var i=0;i<t.fallbacks.length;i++)t.fallbacks[i]=ZE(t.fallbacks[i],e,!0);continue}t[r]=OV(s,r,Nge,e),t[r].length||delete t[r]}}else if(typeof s=="object"){if(r==="fallbacks"){t.fallbacks=ZE(t.fallbacks,e,!0);continue}t[r]=kV(s,r,e,n),t[r].length||delete t[r]}else t[r]===""&&delete t[r]}return t}function Oge(){function t(e,n){if(!e||n.type!=="style")return e;if(Array.isArray(e)){for(var r=0;r<e.length;r++)e[r]=ZE(e[r],n);return e}return ZE(e,n)}return{onProcessStyle:t}}function Wk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function kge(t){if(Array.isArray(t))return Wk(t)}function Dge(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mge(t,e){if(t){if(typeof t=="string")return Wk(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wk(t,e):void 0}}function Lge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uge(t){return kge(t)||Dge(t)||Mge(t)||Lge()}var Ev="",zk="",DV="",MV="",Bge=tb&&"ontouchstart"in document.documentElement;if(tb){var uP={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},$ge=document.createElement("p"),dP=$ge.style,Fge="Transform";for(var hP in uP)if(hP+Fge in dP){Ev=hP,zk=uP[hP];break}Ev==="Webkit"&&"msHyphens"in dP&&(Ev="ms",zk=uP.ms,MV="edge"),Ev==="Webkit"&&"-apple-trailing-word"in dP&&(DV="apple")}var Ut={js:Ev,css:zk,vendor:DV,browser:MV,isTouch:Bge};function jge(t){return t[1]==="-"||Ut.js==="ms"?t:"@"+Ut.css+"keyframes"+t.substr(10)}var Wge={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:Ut.js==="ms"?"-webkit-"+e:Ut.css+e}},zge={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:Ut.js==="Webkit"?Ut.css+"print-"+e:e}},Hge=/[-\s]+(.)?/g;function Gge(t,e){return e?e.toUpperCase():""}function vL(t){return t.replace(Hge,Gge)}function mf(t){return vL("-"+t)}var qge={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(Ut.js==="Webkit"){var r="mask-image";if(vL(r)in n)return e;if(Ut.js+mf(r)in n)return Ut.css+e}return e}},Vge={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:Ut.vendor==="apple"&&!Ut.isTouch?Ut.css+e:e}},Kge={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:Ut.css+e}},Yge={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:Ut.css+e}},Qge={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:Ut.js==="Webkit"||Ut.js==="ms"&&Ut.browser!=="edge"?Ut.css+e:e}},Jge={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:Ut.js==="Moz"||Ut.js==="ms"||Ut.vendor==="apple"?Ut.css+e:e}},Zge={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(Ut.js==="Webkit"){var r="WebkitColumn"+mf(e);return r in n?Ut.css+"column-"+e:!1}if(Ut.js==="Moz"){var s="page"+mf(e);return s in n?"page-"+e:!1}return!1}},Xge={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(Ut.js==="Moz")return e;var r=e.replace("-inline","");return Ut.js+mf(r)in n?Ut.css+r:!1}},eme={supportedProperty:function(e,n){return vL(e)in n?e:!1}},tme={supportedProperty:function(e,n){var r=mf(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:Ut.js+r in n?Ut.css+e:Ut.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},nme={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:Ut.js==="ms"?""+Ut.css+e:e}},rme={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:Ut.js==="ms"?Ut.css+"scroll-chaining":e}},sme={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},ime={supportedProperty:function(e,n){var r=sme[e];return r&&Ut.js+mf(r)in n?Ut.css+r:!1}},LV={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},ome=Object.keys(LV),ame=function(e){return Ut.css+e},cme={supportedProperty:function(e,n,r){var s=r.multiple;if(ome.indexOf(e)>-1){var i=LV[e];if(!Array.isArray(i))return Ut.js+mf(i)in n?Ut.css+i:!1;if(!s)return!1;for(var o=0;o<i.length;o++)if(!(Ut.js+mf(i[0])in n))return!1;return i.map(ame)}return!1}},UV=[Wge,zge,qge,Vge,Kge,Yge,Qge,Jge,Zge,Xge,eme,tme,nme,rme,ime,cme],a8=UV.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),lme=UV.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Uge(e.noPrefill)),t},[]),Cv,op={};if(tb){Cv=document.createElement("p");var fP=window.getComputedStyle(document.documentElement,"");for(var pP in fP)isNaN(pP)||(op[fP[pP]]=fP[pP]);lme.forEach(function(t){return delete op[t]})}function Hk(t,e){if(e===void 0&&(e={}),!Cv)return t;if(op[t]!=null)return op[t];(t==="transition"||t==="transform")&&(e[t]=t in Cv.style);for(var n=0;n<a8.length&&(op[t]=a8[n](t,Cv.style,e),!op[t]);n++);try{Cv.style[t]=""}catch{return!1}return op[t]}var Pm={},ume={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},dme=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,zd;function hme(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?Hk(e):", "+Hk(n);return r||e||n}tb&&(zd=document.createElement("p"));function c8(t,e){var n=e;if(!zd||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Pm[r]!=null)return Pm[r];try{zd.style[t]=n}catch{return Pm[r]=!1,!1}if(ume[t])n=n.replace(dme,hme);else if(zd.style[t]===""&&(n=Ut.css+n,n==="-ms-flex"&&(zd.style[t]="-ms-flexbox"),zd.style[t]=n,zd.style[t]===""))return Pm[r]=!1,!1;return zd.style[t]="",Pm[r]=n,Pm[r]}function fme(){function t(s){if(s.type==="keyframes"){var i=s;i.at=jge(i.at)}}function e(s){for(var i in s){var o=s[i];if(i==="fallbacks"&&Array.isArray(o)){s[i]=o.map(e);continue}var a=!1,c=Hk(i);c&&c!==i&&(a=!0);var l=!1,u=c8(c,ug(o));u&&u!==o&&(l=!0),(a||l)&&(a&&delete s[i],s[c||i]=u||o)}return s}function n(s,i){return i.type!=="style"?s:e(s)}function r(s,i){return c8(i,ug(s))||s}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function pme(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var s={},i=Object.keys(n).sort(t),o=0;o<i.length;o++)s[i[o]]=n[i[o]];return s}}}var gme=function(e){return e===void 0&&(e={}),{plugins:[tge(),rge(e.observable),age(),fge(),mge(),bge(),vge(),Age(),Ige(e.defaultUnit),Oge(),fme(),pme()]}},mme=Number.MIN_SAFE_INTEGER||-1e9,yme=function(){return mme++},wme=k.createContext({classNamePrefix:"",disableStylesGeneration:!1,isSSR:!tb}),l8=new Map,EL=function(e,n){var r=e.managers;if(r)return r[n]||(r[n]=new r8),r[n];var s=l8.get(n);return s||(s=new r8,l8.set(n,s)),s},u8=function(e){var n=e.sheet,r=e.context,s=e.index,i=e.theme;if(n){var o=EL(r,s);o.manage(i),r.registry&&r.registry.add(n)}},bme=function(e){if(e.sheet){var n=EL(e.context,e.index);n.unmanage(e.theme)}},vme=xV(gme()),BV=new WeakMap,$V=function(e){return BV.get(e)},Eme=function(e,n){BV.set(e,n)},Cme=function(e){var n=e.styles;return typeof n!="function"?n:n(e.theme)};function _me(t,e){var n;t.context.id&&t.context.id.minify!=null&&(n=t.context.id.minify);var r=t.context.classNamePrefix||"";t.name&&!n&&(r+=t.name.replace(/\s/g,"-")+"-");var s="";return t.name&&(s=t.name+", "),s+=typeof t.styles=="function"?"Themed":"Unthemed",yr({},t.sheetOptions,{index:t.index,meta:s,classNamePrefix:r,link:e,generateId:t.sheetOptions&&t.sheetOptions.generateId?t.sheetOptions.generateId:t.context.generateId})}var Ame=function(e){if(!e.context.disableStylesGeneration){var n=EL(e.context,e.index),r=n.get(e.theme);if(r)return r;var s=e.context.jss||vme,i=Cme(e),o=IV(i),a=s.createStyleSheet(i,_me(e,o!==null));return Eme(a,{dynamicStyles:o,styles:i}),n.add(e.theme,a),a}},Sme=function(e,n){for(var r in n)e.deleteRule(n[r])},xme=function(e,n,r){for(var s in r)n.updateOne(r[s],e)},Ime=function(e,n){var r=$V(e);if(r){var s={};for(var i in r.dynamicStyles)for(var o=e.rules.index.length,a=e.addRule(i,r.dynamicStyles[i]),c=o;c<e.rules.index.length;c++){var l=e.rules.index[c];e.updateOne(l,n),s[a===l?i:l.key]=l}return s}},Nme=function(e,n){if(!n)return e.classes;var r=$V(e);if(!r)return e.classes;var s={};for(var i in r.styles)s[i]=e.classes[i],i in n&&(s[i]+=" "+e.classes[n[i].key]);return s};function d8(t){return t?k.useEffect:Go.useInsertionEffect||k.useLayoutEffect}var gP={},Uc=function(e,n){n===void 0&&(n={});var r=n,s=r.index,i=s===void 0?yme():s,o=r.theming,a=r.name,c=pV(r,["index","theming","name"]),l=o&&o.context||vV,u=function(f){return typeof e=="function"&&(f||k.useContext(l))||gP},d={};return function(f){var p=k.useRef(!0),g=k.useContext(wme),w=u(f&&f.theme),m=k.useMemo(function(){var C=Ame({context:g,styles:e,name:a,theme:w,index:i,sheetOptions:c});return C&&g.isSSR&&u8({index:i,context:g,sheet:C,theme:w}),[C,C?Ime(C,f):null]},[g,w]),b=m[0],v=m[1];d8(g.isSSR)(function(){b&&v&&!p.current&&xme(f,b,v)},[f]),d8(g.isSSR)(function(){return b&&u8({index:i,context:g,sheet:b,theme:w}),function(){b&&(bme({index:i,context:g,sheet:b,theme:w}),v&&Sme(b,v))}},[b]);var A=k.useMemo(function(){return b&&v?Nme(b,v):d},[b,v]);return k.useDebugValue(A),k.useDebugValue(w===gP?"No theme":w),k.useEffect(function(){p.current=!1}),A}};const Tme=Uc({icon:{position:"absolute",width:"80px",textAlign:"center",cursor:"pointer",zIndex:3e3,userSelect:"none",pointerEvents:"auto"},iconImage:{width:"48px",height:"48px",display:"block",margin:"0 auto"},iconLabel:{display:"block",background:"#c0c0c0",color:"#000",fontSize:"12px",padding:"2px 4px",marginTop:"2px",border:"1px outset #fff"}});function mP({image:t,label:e,action:n,url:r,popupId:s,folderId:i,isInFolder:o=!1,position:a,onDrag:c,onClick:l}){const u=Tme(),d=k.useRef(null),h=p=>{p.stopPropagation(),p.preventDefault(),l(n,s,r,i)},f=y.jsxs("div",{ref:d,className:u.icon,onClick:h,style:{position:o?"relative":"absolute",zIndex:3e3,left:!o&&a?a.x:void 0,top:!o&&a?a.y:void 0},children:[y.jsx("img",{src:t,alt:e,className:u.iconImage}),y.jsx("span",{className:u.iconLabel,children:e})]});return o?f:y.jsx(L_,{nodeRef:d,position:a,onDrag:c,bounds:"parent",children:f})}const Rme=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"15px",height:"calc(100% - 30px)",overflow:"auto"}});function ha({id:t,isOpen:e,onClose:n,onMinimize:r,children:s,title:i,initialPosition:o,initialSize:a,zIndex:c}){const l=Rme({isOpen:e}),u=k.useRef(null),d=()=>{r&&r(t)};return y.jsx(L_,{nodeRef:u,handle:`.${l.header}`,defaultPosition:o,children:y.jsxs("div",{ref:u,className:l.popup,style:{width:a==null?void 0:a.width,height:a==null?void 0:a.height,zIndex:c||100},children:[y.jsxs("div",{className:l.header,children:[y.jsx("span",{children:i||t.replace("-popup","")}),y.jsxs("div",{className:l.titleBarButtons,children:[y.jsx("button",{className:l.titleBarButton,onClick:d,title:"Minimize",children:"_"}),y.jsx("button",{className:l.titleBarButton,onClick:n,title:"Close",children:""})]})]}),y.jsx("div",{className:l.content,children:s})]})})}const yP=[{id:"evm-folder",image:"/assets/evmfolder.png",label:"EVM NFTs",action:"folder",folderId:"evm-folder",row:0,col:3},{id:"sol-folder",image:"/assets/solfolder.png",label:"SOL NFTs",action:"folder",folderId:"sol-folder",row:1,col:3},{id:"wallet",image:"/assets/wallet.png",label:"Wallet",action:"wallet",row:0,col:0},{id:"mint",image:"/assets/mint.gif",label:"Mint",action:"mint",row:0,col:1},{id:"gallery",image:"/assets/lawbstarz.gif",label:"NFT Gallery",action:"nft-gallery",row:0,col:2},{id:"meme-generator",image:"/assets/meme.gif",label:"Meme Generator",action:"meme-generator",row:0,col:4},{id:"chess",image:"/assets/chess.svg",label:"Chess",action:"chess",row:0,col:5},{id:"purity",image:"/assets/purityfinance.png",label:"Purity",action:"popup",popupId:"purity-popup",row:1,col:0},{id:"lawbshop",image:"/assets/lawbshop.png",label:"Lawb.Shop",action:"url",url:"https://store.fun/lawbshop",row:1,col:1},{id:"lawbstarz",image:"/assets/lawbstarz.gif",label:"Lawbstarz",action:"popup",popupId:"lawbstarz-popup",row:-1,col:-1},{id:"lawbsters",image:"/assets/lawbsters.gif",label:"Lawbsters",action:"popup",popupId:"lawbsters-popup",row:-1,col:-1},{id:"halloween",image:"/assets/lawbsterhalloween.gif",label:"Halloween",action:"popup",popupId:"halloween-popup",row:-1,col:-1},{id:"pixelawbs",image:"/assets/pixelawb.png",label:"Pixelawbs",action:"popup",popupId:"pixelawbs-popup",row:-1,col:-1},{id:"lawbstation",image:"/assets/lawbstation.GIF",label:"Lawbstation",action:"popup",popupId:"lawbstation-popup",row:-1,col:-1},{id:"nexus",image:"/assets/nexus.gif",label:"Nexus",action:"popup",popupId:"nexus-popup",row:-1,col:-1},{id:"chat",image:"/assets/miladychan.png",label:"Chat",action:"popup",popupId:"chat-popup",row:3,col:0},{id:"lawb",image:"/assets/lawbticker.gif",label:"$LAWB",action:"popup",popupId:"lawb-popup",row:3,col:2}],Pme=80,Ome=80,kme=10,Dme=10,Mme=10,Lme=10,Ume=({onIconClick:t})=>{const e=yP.filter(l=>l.row>=0&&l.col>=0),n=()=>{const l={};let u=0,d=0;return e.forEach(h=>{l[h.id]={x:Mme+d*(Pme+kme),y:Lme+u*(Ome+Dme)},u++,u>=4&&(u=0,d++)}),l},[r,s]=k.useState(n()),[i,o]=k.useState({}),a=(l,u)=>{s(d=>({...d,[l]:{x:u.x,y:u.y}}))},c=(l,u,d,h)=>{if(l==="folder"&&h){o(f=>({...f,[h]:!0}));return}t(l,u,d)};return y.jsx("div",{style:{position:"relative",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",overflow:"hidden"},children:y.jsxs("div",{style:{position:"relative",width:"100%",height:"calc(100vh - 60px)",padding:"10px",zIndex:10,overflow:"visible"},children:[e.map(l=>y.jsx(mP,{image:l.image,label:l.label,action:l.action,url:l.url,popupId:l.popupId,folderId:l.folderId,position:r[l.id],onDrag:(u,d)=>a(l.id,d),onClick:c},l.id)),i["evm-folder"]&&y.jsx(ha,{id:"evm-folder",isOpen:!0,onClose:()=>o(l=>({...l,"evm-folder":!1})),onMinimize:()=>o(l=>({...l,"evm-folder":!1})),zIndex:3001,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:yP.filter(l=>["lawbsters","lawbstarz","halloween","pixelawbs"].includes(l.id)).map(l=>y.jsx(mP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})}),i["sol-folder"]&&y.jsx(ha,{id:"sol-folder",isOpen:!0,onClose:()=>o(l=>({...l,"sol-folder":!1})),onMinimize:()=>o(l=>({...l,"sol-folder":!1})),zIndex:3001,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(96px, 1fr))",gap:24,padding:32,justifyItems:"center",alignItems:"center",minHeight:"100%"},children:yP.filter(l=>["lawbstation","nexus"].includes(l.id)).map(l=>y.jsx(mP,{image:l.image,label:l.label,action:l.action,popupId:l.popupId,folderId:l.folderId,onClick:c,isInFolder:!0},l.id))})})]})})},Bme=Uc({taskbar:{position:"fixed",left:0,bottom:0,width:"100vw",height:40,background:"#c0c0c0",borderTop:"2px outset #fff",display:"flex",alignItems:"center",justifyContent:"space-between",zIndex:200},leftSection:{display:"flex",alignItems:"center"},rightSection:{display:"flex",alignItems:"center",marginRight:"5px",height:"100%"},statusSection:{display:"flex",alignItems:"center",padding:"0 8px",marginRight:"4px",border:"2px inset #fff",height:"calc(100% - 8px)"},menuBtn:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"},menu:{position:"absolute",bottom:"45px",left:"5px",background:"#c0c0c0",border:"2px outset #fff",padding:"5px",display:({isOpen:t})=>t?"block":"none",zIndex:9999,maxHeight:"300px",overflowY:"auto"},menuLink:{display:"block",padding:"4px 12px",color:"#000",textDecoration:"none",background:"#c0c0c0",border:"2px outset #fff",marginBottom:"1px",cursor:"pointer",fontSize:"12px","&:hover":{background:"#d0d0d0",border:"2px inset #fff"},"&:active":{border:"2px inset #c0c0c0"}},minimizedWindow:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:"12px"},clock:{padding:"5px 10px",background:"#c0c0c0",border:"2px inset #fff",fontSize:"12px",fontFamily:"monospace",height:"calc(100% - 8px)",display:"flex",alignItems:"center"},windows:{display:"flex",alignItems:"center"},windowButton:{marginLeft:"5px",padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer"}}),$me=({minimizedWindows:t,onRestoreWindow:e,walletButton:n,connectionStatus:r})=>{const[s,i]=k.useState(!1),[o,a]=k.useState(new Date),c=Bme({isOpen:s});k.useEffect(()=>{const h=window.setInterval(()=>{a(new Date)},1e3);return()=>window.clearInterval(h)},[]);const l=h=>h.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),u=()=>{i(!s)},d=()=>{i(!1)};return y.jsxs("div",{className:c.taskbar,children:[y.jsxs("div",{className:c.leftSection,children:[y.jsx("button",{className:c.menuBtn,onClick:u,children:"Menu"}),y.jsx("div",{className:c.windows,children:t.map(h=>y.jsx("button",{className:c.windowButton,onClick:()=>e(h),children:h.replace("-popup","").replace("-"," ").toUpperCase()},h))})]}),y.jsxs("div",{className:c.rightSection,children:[y.jsxs("div",{className:c.statusSection,children:[y.jsx("div",{style:{display:"flex",alignItems:"center",gap:4,fontSize:12},children:y.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:r.connected?"limegreen":"red",marginRight:4,border:"1px solid #222"}})}),n]}),y.jsx("div",{className:c.clock,children:l(o)})]}),s&&y.jsxs("div",{className:c.menu,children:[y.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"GeckoTerminal"}),y.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbStation Twitter"}),y.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"LawbNexus Twitter"}),y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"NFTX - Lawbsters"}),y.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"UwU LAWB"}),y.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Telegram"}),y.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Discord"}),y.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:c.menuLink,onClick:d,children:"Lawb.Shop"})]})]})};async function FV(t){const e="https://api.scatter.art/v1",n="pixelawbs";try{console.log(`Getting eligible invite lists for collection: ${n}`);const r=await fetch(`${e}/collection/${n}/eligible-invite-lists?minterAddress=${t}`);if(console.log("Response status:",r.status),r.ok){const s=await r.json();return console.log("Lists found:",s),s}else return console.log("Failed to get lists:",r.status,r.statusText),[]}catch(r){return console.log("Error getting lists:",r),[]}}async function CL(t,e=1,n=50,r){let i=`https://api.scatter.art/v1/collection/${t}/nfts?page=${e}&pageSize=${n}&sortBy=recent&sortOrder=desc`;r&&(i+=`&ownerAddress=${r}`);try{const o=await fetch(i);if(o.ok)return await o.json();throw new Error(`Failed to get NFTs: ${o.statusText}`)}catch(o){throw console.error("Error getting collection NFTs:",o),o}}async function jV(t,e){const i=await fetch("https://api.scatter.art/v1/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionAddress:"0x2d278e95b2fC67D4b27a276807e24E479D9707F6",chainId:1,minterAddress:t,lists:e})}),o=await i.json();if(!i.ok)throw console.error("Scatter API Error:",JSON.stringify(o,null,2)),new Error(o.message||"Minting failed");return{success:!0,mintTransaction:o.mintTransaction,erc20s:o.erc20s}}async function _L(t,e=50,n){const r="030a5ee582f64b8ab3a598ab2b97d85f";let s=`https://api.opensea.io/api/v2/collection/${t}/nfts?limit=${e}`;n&&console.warn("Owner filtering is not supported for OpenSea collections in this view.");try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get OpenSea NFTs: ${i.statusText}`);const a=(await i.json()).nfts.map(c=>{var l,u,d;return{id:c.identifier,address:c.contract,token_id:parseInt(c.identifier,10),attributes:JSON.stringify(c.traits||[]),name:c.name||`#${c.identifier}`,image_url:c.image_url,owner_of:((u=(l=c.owners)==null?void 0:l[0])==null?void 0:u.address)||"",block_minted:0,contract_type:"ERC721",description:c.description||"",image:c.image_url,image_url_shrunk:c.image_url,animation_url:c.animation_url,metadata:"",chain_id:1,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:c.updated_at||new Date().toISOString(),updated_at:c.updated_at||new Date().toISOString(),owners:((d=c.owners)==null?void 0:d.map(h=>({owner_of:h.address,quantity:h.quantity})))||[]}});return{page:1,pageSize:e,totalCount:a.length,totalPages:1,data:a}}catch(i){throw console.error("Error getting OpenSea NFTs:",i),i}}async function WV(t,e,n){const r="030a5ee582f64b8ab3a598ab2b97d85f",s=`https://api.opensea.io/api/v2/chain/${t}/contract/${e}/nfts/${n}`;try{const i=await fetch(s,{headers:{"X-API-KEY":r}});if(!i.ok)throw new Error(`Failed to get single OpenSea NFT: ${i.statusText}`);return(await i.json()).nft}catch(i){throw console.error("Error getting single OpenSea NFT:",i),i}}async function zV(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana collection:",t);const i={lawbstation:"9CU9LUX7UWkBEG4oP8YrgDUkNJKNHLt2wGdVfX6NY4EY",lawbnexus:"AfXkPjcfTWHz9WDjvXxZBkHSWQ1H7xsg7jT2fFLkAAi"}[t];if(!i)return console.log("No collection mint found for collection:",t),{page:1,pageSize:e,totalCount:0,totalPages:1,data:[]};const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByGroup",params:{groupKey:"collection",groupValue:i,page:1,limit:e}})});if(!o.ok)throw console.log("Helius DAS API response status:",o.status),console.log("Helius DAS API response text:",await o.text()),new Error(`Helius DAS API error: ${o.statusText}`);const a=await o.json();if(console.log("Helius DAS API response:",a),a.error)throw new Error(`Helius DAS API error: ${a.error.message}`);const l=(((r=a.result)==null?void 0:r.items)||[]).map(u=>{var d,h,f,p,g,w,m,b,v,A,C,T,x,N,S,D,P,$,G,W,I,R,B,O,M,j,V,te,Z,X;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((m=(w=u.content)==null?void 0:w.metadata)==null?void 0:m.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((N=(x=(T=u.content)==null?void 0:T.files)==null?void 0:x[0])==null?void 0:N.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:"",block_minted:0,contract_type:"SOL",description:(($=(P=u.content)==null?void 0:P.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(O=u.content)==null?void 0:O.files)==null?void 0:M[0])==null?void 0:j.uri)||((te=(V=u.content)==null?void 0:V.metadata)==null?void 0:te.image)||"",animation_url:((X=(Z=u.content)==null?void 0:Z.metadata)==null?void 0:X.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:t,num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs from Helius:",s),s}}async function Fme(t,e=50){var r;const n="https://mainnet.helius-rpc.com/?api-key=f2330fce-2a97-416b-ada9-ce0ba94ddadc";try{console.log("Using Helius DAS API for Solana owner:",t);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"my-id",method:"getAssetsByOwner",params:{ownerAddress:t,page:1,limit:e}})});if(!s.ok)throw console.log("Helius DAS API response status:",s.status),console.log("Helius DAS API response text:",await s.text()),new Error(`Helius DAS API error: ${s.statusText}`);const i=await s.json();if(console.log("Helius DAS API owner response:",i),i.error)throw new Error(`Helius DAS API error: ${i.error.message}`);const o=((r=i.result)==null?void 0:r.items)||[],a={lawbstation:"6cz67ciatfhDaxyWw3rdC9rZHXAxQvYnq5qkqmnG3G1Q",lawbnexus:"35pjVXpTg2PCdBZ1zdUckNfnAxULJQBRSjWLXREo6692"},l=o.filter(u=>{const d=u.mintAuthority||u.authority;return d&&Object.values(a).includes(d)}).slice(0,e).map(u=>{var d,h,f,p,g,w,m,b,v,A,C,T,x,N,S,D,P,$,G,W,I,R,B,O,M,j,V,te,Z,X,ce,ge;return{id:u.id||u.mint||"unknown",address:u.mint||"",token_id:parseInt(((f=(h=(d=u.content)==null?void 0:d.metadata)==null?void 0:h.name)==null?void 0:f.replace(/\D/g,""))||"0",10),attributes:JSON.stringify(((g=(p=u.content)==null?void 0:p.metadata)==null?void 0:g.attributes)||[]),name:((m=(w=u.content)==null?void 0:w.metadata)==null?void 0:m.name)||((A=(v=(b=u.content)==null?void 0:b.files)==null?void 0:v[0])==null?void 0:A.name)||`#${(C=u.mint)==null?void 0:C.slice(0,8)}`,image_url:((N=(x=(T=u.content)==null?void 0:T.files)==null?void 0:x[0])==null?void 0:N.uri)||((D=(S=u.content)==null?void 0:S.metadata)==null?void 0:D.image)||"",owner_of:t,block_minted:0,contract_type:"SOL",description:(($=(P=u.content)==null?void 0:P.metadata)==null?void 0:$.description)||"",image:((I=(W=(G=u.content)==null?void 0:G.files)==null?void 0:W[0])==null?void 0:I.uri)||((B=(R=u.content)==null?void 0:R.metadata)==null?void 0:B.image)||"",image_url_shrunk:((j=(M=(O=u.content)==null?void 0:O.files)==null?void 0:M[0])==null?void 0:j.uri)||((te=(V=u.content)==null?void 0:V.metadata)==null?void 0:te.image)||"",animation_url:((X=(Z=u.content)==null?void 0:Z.metadata)==null?void 0:X.animation_url)||"",metadata:"",chain_id:1399811149,old_image_url:"",old_token_uri:"",token_uri:"",log_index:0,transaction_index:0,collection_id:((ge=(ce=u.grouping)==null?void 0:ce.find(Me=>Me.group_key==="collection"))==null?void 0:ge.group_value)||"",num_items:1,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),owners:[{owner_of:t,quantity:1}]}});return{page:1,pageSize:e,totalCount:l.length,totalPages:1,data:l}}catch(s){throw console.error("Error getting Solana NFTs by owner from Helius:",s),s}}const jme=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"600px",height:"480px",minWidth:"360px",minHeight:"240px",top:"calc(50vh - 240px)",left:"calc(50vw - 300px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:5e3},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"}}),Wme=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=jme({isOpen:t}),i=k.useRef(null),[o,a]=k.useState([]),[c,l]=k.useState(!1),[u,d]=k.useState(!1),[h,f]=k.useState({}),[p,g]=k.useState(null),[w,m]=k.useState(null);k.useEffect(()=>{t&&r&&b()},[t,r]);const b=async()=>{l(!0),g(null);try{const x=await FV(r);a(x);const N={};x.forEach(S=>{N[S.id]=0}),f(N)}catch(x){g(x.message)}finally{l(!1)}},v=(x,N)=>{f(S=>({...S,[x]:Math.max(0,N)}))},A=async()=>{const x=Object.entries(h).filter(([,N])=>N>0).map(([N,S])=>({id:N,quantity:S}));if(x.length===0){g("Please select at least one item to mint");return}if(!w){g("Wallet not connected");return}d(!0),g(null);try{console.log("Starting mint process for address:",r);const N=await jV(r,x);if(console.log("Mint API result:",N),N.success&&N.mintTransaction){console.log("Got mint transaction:",N.mintTransaction),alert("Please confirm the transaction in your wallet.");try{console.log("Sending transaction to wallet...");const S=await w.sendTransaction({to:N.mintTransaction.to,value:BigInt(N.mintTransaction.value),data:N.mintTransaction.data});console.log("Transaction sent successfully:",S),alert(`NFT Minted Successfully: Transaction Hash - ${S}`),e()}catch(S){console.error("Transaction sending failed:",S),g("Transaction failed: "+S.message)}}else throw new Error(N.message||"Could not retrieve minting transaction.")}catch(N){console.error("Minting failed:",N),g("Minting failed: "+N.message)}finally{d(!1)}},C=(x,N)=>`${parseFloat(x)} ${N}`,T=()=>{n&&n()};return t?y.jsx(L_,{nodeRef:i,handle:`.${s.header}`,children:y.jsxs("div",{ref:i,className:s.popup,children:[y.jsxs("div",{className:s.header,children:[y.jsx("span",{children:"Mint Pixelawbster"}),y.jsxs("div",{className:s.titleBarButtons,children:[y.jsx("button",{className:s.titleBarButton,onClick:T,title:"Minimize",children:"_"}),y.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),y.jsxs("div",{className:s.content,children:[p&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:p}),c?y.jsx("div",{children:"Loading eligible invite lists..."}):o.length===0?y.jsx("div",{children:"No eligible invite lists found for your wallet."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("h3",{children:"Available Lists:"}),o.map(x=>y.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#ffffff"},children:[y.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:x.name}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",C(x.token_price,x.currency_symbol)]}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",x.wallet_limit===4294967295?"Unlimited":x.wallet_limit," per wallet"]}),y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[y.jsx("label",{style:{fontSize:"12px"},children:"Quantity:"}),y.jsx("input",{type:"number",min:"0",max:x.wallet_limit===4294967295?999:x.wallet_limit,value:h[x.id]||0,onChange:N=>v(x.id,parseInt(N.target.value)||0),style:{width:"60px",padding:"2px 5px",border:"1px solid #808080"}})]})]},x.id))]}),y.jsx("button",{onClick:()=>void A(),disabled:u,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"10px 20px",cursor:u?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:u?"Minting...":"Mint Selected NFTs"})]})]})]})}):null},HV=t=>[t.image_url,t.image,t.image_url_shrunk,t.old_image_url].filter(Boolean)[0]||"",GV=({src:t,alt:e,style:n})=>{const[r,s]=k.useState(t),[i,o]=k.useState(!1),[a,c]=k.useState(0);k.useEffect(()=>{s(t),o(!1),c(0)},[t]);const l=()=>{a===0?(s(t),c(1)):a===1?(s(`https://images.weserv.nl/?url=${encodeURIComponent(t)}`),c(2)):o(!0)};return i?y.jsx("div",{style:{...n,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"#666",backgroundColor:"#f0f0f0",width:(n==null?void 0:n.width)||"100%",height:(n==null?void 0:n.height)||"150px"},children:"Image not available"}):y.jsx("img",{src:r,alt:e,style:n,crossOrigin:a===0?"anonymous":void 0,onError:l})},zme=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"400px",height:"auto",top:"20vh",left:"30vw",zIndex:102,display:"flex",flexDirection:"column"},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",background:"white",color:"black"},detailImage:{width:"100%",height:"auto",marginBottom:"10px"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}}}),Hme=t=>{try{const e=JSON.parse(t);return Array.isArray(e)&&e.every(n=>"trait_type"in n&&"value"in n)?e:[]}catch{return[]}},Gme=({nft:t,onClose:e})=>{const n=zme(),r=k.useRef(null),s=Hme(t.attributes);return y.jsx(L_,{nodeRef:r,handle:`.${n.header}`,children:y.jsxs("div",{className:n.popup,ref:r,children:[y.jsxs("div",{className:n.header,children:[y.jsxs("span",{children:[t.name," - Details"]}),y.jsx("button",{className:n.titleBarButton,onClick:e,children:"X"})]}),y.jsxs("div",{className:n.content,children:[y.jsx(GV,{src:HV(t),alt:t.name,style:{width:"100%",height:"auto",marginBottom:"10px"}}),y.jsx("h3",{children:"Traits"}),y.jsx("ul",{className:n.detailTraits,children:s.length>0?s.map((i,o)=>y.jsxs("li",{children:[y.jsxs("strong",{children:[i.trait_type,":"]})," ",i.value]},o)):y.jsx("li",{children:"No traits found."})})]})]})})},qme=Symbol(),h8=Object.getPrototypeOf,Gk=new WeakMap,Vme=t=>t&&(Gk.has(t)?Gk.get(t):h8(t)===Object.prototype||h8(t)===Array.prototype),Kme=t=>Vme(t)&&t[qme]||null,f8=(t,e=!0)=>{Gk.set(t,e)},Ux={},wP=t=>typeof t=="object"&&t!==null,Yd=new WeakMap,_v=new WeakSet,Yme=(t=Object.is,e=(l,u)=>new Proxy(l,u),n=l=>wP(l)&&!_v.has(l)&&(Array.isArray(l)||!(Symbol.iterator in l))&&!(l instanceof WeakMap)&&!(l instanceof WeakSet)&&!(l instanceof Error)&&!(l instanceof Number)&&!(l instanceof Date)&&!(l instanceof String)&&!(l instanceof RegExp)&&!(l instanceof ArrayBuffer),r=l=>{switch(l.status){case"fulfilled":return l.value;case"rejected":throw l.reason;default:throw l}},s=new WeakMap,i=(l,u,d=r)=>{const h=s.get(l);if((h==null?void 0:h[0])===u)return h[1];const f=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l));return f8(f,!0),s.set(l,[u,f]),Reflect.ownKeys(l).forEach(p=>{if(Object.getOwnPropertyDescriptor(f,p))return;const g=Reflect.get(l,p),{enumerable:w}=Reflect.getOwnPropertyDescriptor(l,p),m={value:g,enumerable:w,configurable:!0};if(_v.has(g))f8(g,!1);else if(g instanceof Promise)delete m.value,m.get=()=>d(g);else if(Yd.has(g)){const[b,v]=Yd.get(g);m.value=i(b,v(),d)}Object.defineProperty(f,p,m)}),Object.preventExtensions(f)},o=new WeakMap,a=[1,1],c=l=>{if(!wP(l))throw new Error("object required");const u=o.get(l);if(u)return u;let d=a[0];const h=new Set,f=(S,D=++a[0])=>{d!==D&&(d=D,h.forEach(P=>P(S,D)))};let p=a[1];const g=(S=++a[1])=>(p!==S&&!h.size&&(p=S,m.forEach(([D])=>{const P=D[1](S);P>d&&(d=P)})),d),w=S=>(D,P)=>{const $=[...D];$[1]=[S,...$[1]],f($,P)},m=new Map,b=(S,D)=>{if((Ux?"production":void 0)!=="production"&&m.has(S))throw new Error("prop listener already exists");if(h.size){const P=D[3](w(S));m.set(S,[D,P])}else m.set(S,[D])},v=S=>{var D;const P=m.get(S);P&&(m.delete(S),(D=P[1])==null||D.call(P))},A=S=>(h.add(S),h.size===1&&m.forEach(([P,$],G)=>{if((Ux?"production":void 0)!=="production"&&$)throw new Error("remove already exists");const W=P[3](w(G));m.set(G,[P,W])}),()=>{h.delete(S),h.size===0&&m.forEach(([P,$],G)=>{$&&($(),m.set(G,[P]))})}),C=Array.isArray(l)?[]:Object.create(Object.getPrototypeOf(l)),x=e(C,{deleteProperty(S,D){const P=Reflect.get(S,D);v(D);const $=Reflect.deleteProperty(S,D);return $&&f(["delete",[D],P]),$},set(S,D,P,$){const G=Reflect.has(S,D),W=Reflect.get(S,D,$);if(G&&(t(W,P)||o.has(P)&&t(W,o.get(P))))return!0;v(D),wP(P)&&(P=Kme(P)||P);let I=P;if(P instanceof Promise)P.then(R=>{P.status="fulfilled",P.value=R,f(["resolve",[D],R])}).catch(R=>{P.status="rejected",P.reason=R,f(["reject",[D],R])});else{!Yd.has(P)&&n(P)&&(I=c(P));const R=!_v.has(I)&&Yd.get(I);R&&b(D,R)}return Reflect.set(S,D,I,$),f(["set",[D],P,W]),!0}});o.set(l,x);const N=[C,g,i,A];return Yd.set(x,N),Reflect.ownKeys(l).forEach(S=>{const D=Object.getOwnPropertyDescriptor(l,S);"value"in D&&(x[S]=l[S],delete D.value,delete D.writable),Object.defineProperty(C,S,D)}),x})=>[c,Yd,_v,t,e,n,r,s,i,o,a],[Qme]=Yme();function ar(t={}){return Qme(t)}function ni(t,e,n){const r=Yd.get(t);(Ux?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[3];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function XE(t,e){const n=Yd.get(t);(Ux?"production":void 0)!=="production"&&!n&&console.warn("Please use proxy object");const[r,s,i]=n;return i(r,s(),e)}function Ig(t){return _v.add(t),t}function si(t,e,n,r){let s=t[e];return ni(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}function Jme(t){const e=ar({data:Array.from([]),has(n){return this.data.some(r=>r[0]===n)},set(n,r){const s=this.data.find(i=>i[0]===n);return s?s[1]=r:this.data.push([n,r]),this},get(n){var r;return(r=this.data.find(s=>s[0]===n))==null?void 0:r[1]},delete(n){const r=this.data.findIndex(s=>s[0]===n);return r===-1?!1:(this.data.splice(r,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(n){this.data.forEach(r=>{n(r[1],r[0],this)})},keys(){return this.data.map(n=>n[0]).values()},values(){return this.data.map(n=>n[1]).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(e,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(e),e}var p8={};const Fe={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof p8<"u"?p8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org"},qV={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=Fe.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}};var Zme=20,Xme=1,Ng=1e6,g8=1e6,eye=-7,tye=21,nye=!1,U_="[big.js] ",rm=U_+"Invalid ",UN=rm+"decimal places",rye=rm+"rounding mode",VV=U_+"Division by zero",kn={},Pl=void 0,sye=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function KV(){function t(e){var n=this;if(!(n instanceof t))return e===Pl?KV():new t(e);if(e instanceof t)n.s=e.s,n.e=e.e,n.c=e.c.slice();else{if(typeof e!="string"){if(t.strict===!0&&typeof e!="bigint")throw TypeError(rm+"value");e=e===0&&1/e<0?"-0":String(e)}iye(n,e)}n.constructor=t}return t.prototype=kn,t.DP=Zme,t.RM=Xme,t.NE=eye,t.PE=tye,t.strict=nye,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}function iye(t,e){var n,r,s;if(!sye.test(e))throw Error(rm+"number");for(t.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),s=e.length,r=0;r<s&&e.charAt(r)=="0";)++r;if(r==s)t.c=[t.e=0];else{for(;s>0&&e.charAt(--s)=="0";);for(t.e=n-r-1,t.c=[],n=0;r<=s;)t.c[n++]=+e.charAt(r++)}return t}function sm(t,e,n,r){var s=t.c;if(n===Pl&&(n=t.constructor.RM),n!==0&&n!==1&&n!==2&&n!==3)throw Error(rye);if(e<1)r=n===3&&(r||!!s[0])||e===0&&(n===1&&s[0]>=5||n===2&&(s[0]>5||s[0]===5&&(r||s[1]!==Pl))),s.length=1,r?(t.e=t.e-e+1,s[0]=1):s[0]=t.e=0;else if(e<s.length){if(r=n===1&&s[e]>=5||n===2&&(s[e]>5||s[e]===5&&(r||s[e+1]!==Pl||s[e-1]&1))||n===3&&(r||!!s[0]),s.length=e,r){for(;++s[--e]>9;)if(s[e]=0,e===0){++t.e,s.unshift(1);break}}for(e=s.length;!s[--e];)s.pop()}return t}function im(t,e,n){var r=t.e,s=t.c.join(""),i=s.length;if(e)s=s.charAt(0)+(i>1?"."+s.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)s="0"+s;s="0."+s}else if(r>0)if(++r>i)for(r-=i;r--;)s+="0";else r<i&&(s=s.slice(0,r)+"."+s.slice(r));else i>1&&(s=s.charAt(0)+"."+s.slice(1));return t.s<0&&n?"-"+s:s}kn.abs=function(){var t=new this.constructor(this);return t.s=1,t};kn.cmp=function(t){var e,n=this,r=n.c,s=(t=new n.constructor(t)).c,i=n.s,o=t.s,a=n.e,c=t.e;if(!r[0]||!s[0])return r[0]?i:s[0]?-o:0;if(i!=o)return i;if(e=i<0,a!=c)return a>c^e?1:-1;for(o=(a=r.length)<(c=s.length)?a:c,i=-1;++i<o;)if(r[i]!=s[i])return r[i]>s[i]^e?1:-1;return a==c?0:a>c^e?1:-1};kn.div=function(t){var e=this,n=e.constructor,r=e.c,s=(t=new n(t)).c,i=e.s==t.s?1:-1,o=n.DP;if(o!==~~o||o<0||o>Ng)throw Error(UN);if(!s[0])throw Error(VV);if(!r[0])return t.s=i,t.c=[t.e=0],t;var a,c,l,u,d,h=s.slice(),f=a=s.length,p=r.length,g=r.slice(0,a),w=g.length,m=t,b=m.c=[],v=0,A=o+(m.e=e.e-t.e)+1;for(m.s=i,i=A<0?0:A,h.unshift(0);w++<a;)g.push(0);do{for(l=0;l<10;l++){if(a!=(w=g.length))u=a>w?1:-1;else for(d=-1,u=0;++d<a;)if(s[d]!=g[d]){u=s[d]>g[d]?1:-1;break}if(u<0){for(c=w==a?s:h;w;){if(g[--w]<c[w]){for(d=w;d&&!g[--d];)g[d]=9;--g[d],g[w]+=10}g[w]-=c[w]}for(;!g[0];)g.shift()}else break}b[v++]=u?l:++l,g[0]&&u?g[w]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==Pl)&&i--);return!b[0]&&v!=1&&(b.shift(),m.e--,A--),v>A&&sm(m,A,n.RM,g[0]!==Pl),m};kn.eq=function(t){return this.cmp(t)===0};kn.gt=function(t){return this.cmp(t)>0};kn.gte=function(t){return this.cmp(t)>-1};kn.lt=function(t){return this.cmp(t)<0};kn.lte=function(t){return this.cmp(t)<1};kn.minus=kn.sub=function(t){var e,n,r,s,i=this,o=i.constructor,a=i.s,c=(t=new o(t)).s;if(a!=c)return t.s=-c,i.plus(t);var l=i.c.slice(),u=i.e,d=t.c,h=t.e;if(!l[0]||!d[0])return d[0]?t.s=-c:l[0]?t=new o(i):t.s=1,t;if(a=u-h){for((s=a<0)?(a=-a,r=l):(h=u,r=d),r.reverse(),c=a;c--;)r.push(0);r.reverse()}else for(n=((s=l.length<d.length)?l:d).length,a=c=0;c<n;c++)if(l[c]!=d[c]){s=l[c]<d[c];break}if(s&&(r=l,l=d,d=r,t.s=-t.s),(c=(n=d.length)-(e=l.length))>0)for(;c--;)l[e++]=0;for(c=e;n>a;){if(l[--n]<d[n]){for(e=n;e&&!l[--e];)l[e]=9;--l[e],l[n]+=10}l[n]-=d[n]}for(;l[--c]===0;)l.pop();for(;l[0]===0;)l.shift(),--h;return l[0]||(t.s=1,l=[h=0]),t.c=l,t.e=h,t};kn.mod=function(t){var e,n=this,r=n.constructor,s=n.s,i=(t=new r(t)).s;if(!t.c[0])throw Error(VV);return n.s=t.s=1,e=t.cmp(n)==1,n.s=s,t.s=i,e?new r(n):(s=r.DP,i=r.RM,r.DP=r.RM=0,n=n.div(t),r.DP=s,r.RM=i,this.minus(n.times(t)))};kn.neg=function(){var t=new this.constructor(this);return t.s=-t.s,t};kn.plus=kn.add=function(t){var e,n,r,s=this,i=s.constructor;if(t=new i(t),s.s!=t.s)return t.s=-t.s,s.minus(t);var o=s.e,a=s.c,c=t.e,l=t.c;if(!a[0]||!l[0])return l[0]||(a[0]?t=new i(s):t.s=s.s),t;if(a=a.slice(),e=o-c){for(e>0?(c=o,r=l):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-l.length<0&&(r=l,l=a,a=r),e=l.length,n=0;e;a[e]%=10)n=(a[--e]=a[e]+l[e]+n)/10|0;for(n&&(a.unshift(n),++c),e=a.length;a[--e]===0;)a.pop();return t.c=a,t.e=c,t};kn.pow=function(t){var e=this,n=new e.constructor("1"),r=n,s=t<0;if(t!==~~t||t<-g8||t>g8)throw Error(rm+"exponent");for(s&&(t=-t);t&1&&(r=r.times(e)),t>>=1,!!t;)e=e.times(e);return s?n.div(r):r};kn.prec=function(t,e){if(t!==~~t||t<1||t>Ng)throw Error(rm+"precision");return sm(new this.constructor(this),t,e)};kn.round=function(t,e){if(t===Pl)t=0;else if(t!==~~t||t<-Ng||t>Ng)throw Error(UN);return sm(new this.constructor(this),t+this.e+1,e)};kn.sqrt=function(){var t,e,n,r=this,s=r.constructor,i=r.s,o=r.e,a=new s("0.5");if(!r.c[0])return new s(r);if(i<0)throw Error(U_+"No square root");i=Math.sqrt(+im(r,!0,!0)),i===0||i===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),i=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),t=new s((i==1/0?"5e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):t=new s(i+""),o=t.e+(s.DP+=4);do n=t,t=a.times(n.plus(r.div(n)));while(n.c.slice(0,o).join("")!==t.c.slice(0,o).join(""));return sm(t,(s.DP-=4)+t.e+1,s.RM)};kn.times=kn.mul=function(t){var e,n=this,r=n.constructor,s=n.c,i=(t=new r(t)).c,o=s.length,a=i.length,c=n.e,l=t.e;if(t.s=n.s==t.s?1:-1,!s[0]||!i[0])return t.c=[t.e=0],t;for(t.e=c+l,o<a&&(e=s,s=i,i=e,l=o,o=a,a=l),e=new Array(l=o+a);l--;)e[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=e[l]+i[c]*s[l-c-1]+a,e[l--]=a%10,a=a/10|0;e[l]=a}for(a?++t.e:e.shift(),c=e.length;!e[--c];)e.pop();return t.c=e,t};kn.toExponential=function(t,e){var n=this,r=n.c[0];if(t!==Pl){if(t!==~~t||t<0||t>Ng)throw Error(UN);for(n=sm(new n.constructor(n),++t,e);n.c.length<t;)n.c.push(0)}return im(n,!0,!!r)};kn.toFixed=function(t,e){var n=this,r=n.c[0];if(t!==Pl){if(t!==~~t||t<0||t>Ng)throw Error(UN);for(n=sm(new n.constructor(n),t+n.e+1,e),t=t+n.e+1;n.c.length<t;)n.c.push(0)}return im(n,!1,!!r)};kn[Symbol.for("nodejs.util.inspect.custom")]=kn.toJSON=kn.toString=function(){var t=this,e=t.constructor;return im(t,t.e<=e.NE||t.e>=e.PE,!!t.c[0])};kn.toNumber=function(){var t=+im(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(t.toString()))throw Error(U_+"Imprecise conversion");return t};kn.toPrecision=function(t,e){var n=this,r=n.constructor,s=n.c[0];if(t!==Pl){if(t!==~~t||t<1||t>Ng)throw Error(rm+"precision");for(n=sm(new r(n),t,e);n.c.length<t;)n.c.push(0)}return im(n,t<=n.e||n.e<=r.NE||n.e>=r.PE,!!s)};kn.valueOf=function(){var t=this,e=t.constructor;if(e.strict===!0)throw Error(U_+"valueOf disallowed");return im(t,t.e<=e.NE||t.e>=e.PE,!0)};var _l=KV();const oye={bigNumber(t){return t?new _l(t):new _l(0)},multiply(t,e){if(t===void 0||e===void 0)return new _l(0);const n=new _l(t),r=new _l(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},aye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],cye=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],lye=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],uye={getERC20Abi:t=>Fe.USDT_CONTRACT_ADDRESSES.includes(t)?lye:aye,getSwapAbi:()=>cye},Id={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},Dt={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections"};function bP(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const Rt={setItem(t,e){Av()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Av())return localStorage.getItem(t)||void 0},removeItem(t){Av()&&localStorage.removeItem(t)},clear(){Av()&&localStorage.clear()}};function Av(){return typeof window<"u"&&typeof localStorage<"u"}function ju(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}var m8={};const vP=(typeof process<"u"&&typeof m8<"u"?m8.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",YV=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],dye="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",Fn={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:vP,SECURE_SITE_DASHBOARD:`${vP}/dashboard`,SECURE_SITE_FAVICON:`${vP}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in the wallet app",WEB:"Open and continue in the wallet app"},SEND_SUPPORTED_NAMESPACES:["eip155","solana"],DEFAULT_REMOTE_FEATURES:{swaps:["1inch"],onramp:["coinbase","meld"],email:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],activity:!0,reownBranding:!0},DEFAULT_REMOTE_FEATURES_DISABLED:{email:!1,socials:!1,swaps:!1,onramp:!1,activity:!1,reownBranding:!1},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_SOCIALS:["google","x","farcaster","discord","apple","github","facebook"],DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}},Ke={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ke.getActiveNamespace(),e=Ke.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{Rt.setItem(Dt.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=Rt.getItem(Dt.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{Rt.removeItem(Dt.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{Rt.setItem(Dt.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{Rt.setItem(Dt.ACTIVE_CAIP_NETWORK_ID,t),Ke.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return Rt.getItem(Dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{Rt.removeItem(Dt.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=bP(t);Rt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ke.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),Rt.setItem(Dt.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=Rt.getItem(Dt.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=bP(t);Rt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return Rt.getItem(Dt.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=bP(t);return Rt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace ",t)}},setConnectedSocialProvider(t){try{Rt.setItem(Dt.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return Rt.getItem(Dt.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{Rt.removeItem(Dt.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return Rt.getItem(Dt.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=Rt.getItem(Dt.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{Rt.setItem(Dt.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return Rt.getItem(Dt.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=Rt.getItem(Dt.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));Rt.setItem(Dt.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ke.getConnectedNamespaces();e.includes(t)||(e.push(t),Ke.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ke.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ke.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return Rt.getItem(Dt.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{Rt.setItem(Dt.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{Rt.removeItem(Dt.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=Rt.getItem(Dt.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ke.getBalanceCache();Rt.setItem(Dt.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ke.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ke.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ke.getBalanceCache();e[t.caipAddress]=t,Rt.setItem(Dt.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=Rt.getItem(Dt.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ke.getBalanceCache();Rt.setItem(Dt.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ke.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ke.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ke.getNativeBalanceCache();e[t.caipAddress]=t,Rt.setItem(Dt.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=Rt.getItem(Dt.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ke.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ke.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ke.getEnsCache();e[t.address]=t,Rt.setItem(Dt.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ke.getEnsCache();Rt.setItem(Dt.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=Rt.getItem(Dt.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ke.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ke.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ke.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},Rt.setItem(Dt.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ke.getIdentityCache();Rt.setItem(Dt.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{Rt.removeItem(Dt.PORTFOLIO_CACHE),Rt.removeItem(Dt.NATIVE_BALANCE_CACHE),Rt.removeItem(Dt.ENS_CACHE),Rt.removeItem(Dt.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{Rt.setItem(Dt.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=Rt.getItem(Dt.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n={...Ke.getConnections(),[e]:t};Rt.setItem(Dt.CONNECTIONS,JSON.stringify(n))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=Rt.getItem(Dt.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}}},ot={isMobile(){var t;return this.isClient()?!!(typeof(window==null?void 0:window.matchMedia)=="function"&&((t=window==null?void 0:window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return ot.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=Fn.TEN_SEC_MS:!0},isAllowedRetry(t,e=Fn.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(ot.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+Fn.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(ot.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!ot.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ke.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r,s;if(typeof window>"u")return!1;const t=(r=(n=window.matchMedia)==null?void 0:n.call(window,"(display-mode: standalone)"))==null?void 0:r.matches,e=(s=window==null?void 0:window.navigator)==null?void 0:s.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,ot.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return Fe.W3M_API_URL},getBlockchainApiUrl(){return Fe.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return Fe.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?Fn.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in Fe.CHAIN_NAME_MAP},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function Vb(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}let B_=class{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await Vb(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await Vb(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Vb(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Vb(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await Vb(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}};const hye={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?Fn.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(ot.isTelegram()){if(ot.isIos())return t.filter(e=>e!=="google");if(ot.isMac())return t.filter(e=>e!=="x");if(ot.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},pt=ar({features:Fn.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:Fn.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),we={state:pt,subscribeKey(t,e){return si(pt,t,e)},setOptions(t){Object.assign(pt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...pt.remoteFeatures,...t};pt.remoteFeatures=e,(n=pt.remoteFeatures)!=null&&n.socials&&(pt.remoteFeatures.socials=hye.filterSocialsByPlatform(pt.remoteFeatures.socials))},setFeatures(t){if(!t)return;pt.features||(pt.features=Fn.DEFAULT_FEATURES);const e={...pt.features,...t};pt.features=e},setProjectId(t){pt.projectId=t},setCustomRpcUrls(t){pt.customRpcUrls=t},setAllWallets(t){pt.allWallets=t},setIncludeWalletIds(t){pt.includeWalletIds=t},setExcludeWalletIds(t){pt.excludeWalletIds=t},setFeaturedWalletIds(t){pt.featuredWalletIds=t},setTokens(t){pt.tokens=t},setTermsConditionsUrl(t){pt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){pt.privacyPolicyUrl=t},setCustomWallets(t){pt.customWallets=t},setIsSiweEnabled(t){pt.isSiweEnabled=t},setIsUniversalProvider(t){pt.isUniversalProvider=t},setSdkVersion(t){pt.sdkVersion=t},setMetadata(t){pt.metadata=t},setDisableAppend(t){pt.disableAppend=t},setEIP6963Enabled(t){pt.enableEIP6963=t},setDebug(t){pt.debug=t},setEnableWalletConnect(t){pt.enableWalletConnect=t},setEnableWalletGuide(t){pt.enableWalletGuide=t},setEnableAuthLogger(t){pt.enableAuthLogger=t},setEnableWallets(t){pt.enableWallets=t},setPreferUniversalLinks(t){pt.experimental_preferUniversalLinks=t},setHasMultipleAddresses(t){pt.hasMultipleAddresses=t},setSIWX(t){pt.siwx=t},setConnectMethodsOrder(t){pt.features={...pt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){pt.features={...pt.features,walletFeaturesOrder:t}},setSocialsOrder(t){pt.remoteFeatures={...pt.remoteFeatures,socials:t}},setCollapseWallets(t){pt.features={...pt.features,collapseWallets:t}},setEnableEmbedded(t){pt.enableEmbedded=t},setAllowUnsupportedChain(t){pt.allowUnsupportedChain=t},setManualWCControl(t){pt.manualWCControl=t},setEnableNetworkSwitch(t){pt.enableNetworkSwitch=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(pt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){pt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return pt.universalProviderConfigOverride},getSnapshot(){return XE(pt)}},fye=Object.freeze({enabled:!0,events:[]}),pye=new B_({baseUrl:ot.getAnalyticsUrl(),clientId:null}),gye=5,mye=60*1e3,Nd=ar({...fye}),yye={state:Nd,subscribeKey(t,e){return si(Nd,t,e)},async sendError(t,e){if(!Nd.enabled)return;const n=Date.now();if(Nd.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<mye}).length>=gye)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Nd.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=we.state;await pye.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Nd.enabled=!0},disable(){Nd.enabled=!1},clearEvents(){Nd.events=[]}};let qk=class Vk extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Vk.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Vk):this.stack||(this.stack=`${this.name}: ${this.message}`))}};function y8(t,e){const n=t instanceof qk?t:new qk(t instanceof Error?t.message:String(t),e,t);throw yye.sendError(n,n.category),n}function ta(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return y8(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return y8(a,e)}},n[r]=i}else n[r]=s}),n}const ml={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},wye={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===ml.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${ml.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===ml.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${ml.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===Fe.CHAIN.SOLANA&&t===ml.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${ml.COINBASE.url}/dapp?cb_url=${r}`)}},_o=ar({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),bye={state:_o,subscribeNetworkImages(t){return ni(_o.networkImages,()=>t(_o.networkImages))},subscribeKey(t,e){return si(_o,t,e)},subscribe(t){return ni(_o,()=>t(_o))},setWalletImage(t,e){_o.walletImages[t]=e},setNetworkImage(t,e){_o.networkImages[t]=e},setChainImage(t,e){_o.chainImages[t]=e},setConnectorImage(t,e){_o.connectorImages={..._o.connectorImages,[t]:e}},setTokenImage(t,e){_o.tokenImages[t]=e},setCurrencyImage(t,e){_o.currencyImages[t]=e}},gc=ta(bye),vye={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},EP=ar({networkImagePromises:{}}),QV={async fetchWalletImage(t){if(t)return await at._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(EP.networkImagePromises[t]||(EP.networkImagePromises[t]=at._fetchNetworkImage(t)),await EP.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return gc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return gc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return gc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return gc.state.networkImages[t]},getConnectorImage(t){if(t!=null&&t.imageUrl)return t.imageUrl;if(t!=null&&t.imageId)return gc.state.connectorImages[t.imageId]},getChainImage(t){return gc.state.networkImages[vye[t]]}},Td=ar({message:"",variant:"info",open:!1}),Eye={state:Td,subscribeKey(t,e){return si(Td,t,e)},open(t,e){const{debug:n}=we.state,{shortMessage:r,longMessage:s}=t;n&&(Td.message=r,Td.variant=e,Td.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Td.open=!1,Td.message="",Td.variant="info"}},Al=ta(Eye),Cye=ot.getAnalyticsUrl(),_ye=new B_({baseUrl:Cye,clientId:null}),Aye=["MODAL_CREATED"],Jl=ar({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),hr={state:Jl,subscribe(t){return ni(Jl,()=>t(Jl))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=we.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=Ve.state.address;if(Aye.includes(t.data.event)||typeof window>"u")return;await _ye.post({path:"/e",params:hr.getSdkProperties(),body:{eventId:ot.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),Jl.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===Fe.HTTP_STATUS_CODES.FORBIDDEN&&!Jl.reportedErrors.FORBIDDEN&&(Al.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Av()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),Jl.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;Jl.timestamp=Date.now(),Jl.data=t,(e=we.state.features)!=null&&e.analytics&&hr._sendAnalyticsEvent(Jl)}},Sye=ot.getApiUrl(),ki=new B_({baseUrl:Sye,clientId:null}),xye=40,w8=4,Iye=20,Mt=ar({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),at={state:Mt,subscribeKey(t,e){return si(Mt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=we.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return we.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${ki.baseUrl}/getWalletImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});gc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${ki.baseUrl}/public/getAssetImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});gc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${ki.baseUrl}/public/getAssetImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});gc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${ki.baseUrl}/public/getCurrencyImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});gc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${ki.baseUrl}/public/getTokenImage/${t}`,n=await ki.getBlob({path:e,params:at._getSdkProperties()});gc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return ot.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===ml.COINBASE.id?!0:z.state.activeChain==="solana"&&(n.id===ml.SOLFLARE.id||n.id===ml.PHANTOM.id)):t},async fetchProjectConfig(){return(await ki.get({path:"/appkit/v1/config",params:at._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await ki.get({path:"/projects/v1/origins",params:at._getSdkProperties()});return t}catch{return[]}},async fetchNetworkImages(){const t=z.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!QV.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>at._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=$e.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>at._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>at._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];at._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(ml).map(o=>o.id));const r=await ki.get({path:"/getWallets",params:{...at._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:at._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=we.state;if(t!=null&&t.length){const e={...at._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??w8,include:t},{data:n}=await at.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>at._fetchWalletImage(i))),Mt.featured=r,Mt.allFeatured=r}},async fetchRecommendedWallets(){try{Mt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=we.state,r=[...e??[],...n??[]].filter(Boolean),s=z.getRequestedCaipNetworkIds().join(","),i={page:1,entries:w8,include:t,exclude:r,chains:s},{data:o,count:a}=await at.fetchWallets(i),c=Ke.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>at._fetchWalletImage(d))),Mt.recommended=o,Mt.allRecommended=o,Mt.count=a??0}catch{}finally{Mt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=we.state,s=z.getRequestedCaipNetworkIds().join(","),i=[...Mt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:xye,include:e,exclude:i,chains:s},{data:a,count:c}=await at.fetchWallets(o),l=a.slice(0,Iye).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>at._fetchWalletImage(u))),Mt.wallets=ot.uniqueBy([...Mt.wallets,...at._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Mt.count=c>Mt.count?c:Mt.count,Mt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await at.fetchWallets(e);n&&n.forEach(r=>{Mt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=we.state,s=z.getRequestedCaipNetworkIds().join(",");Mt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await at.fetchWallets(i);hr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>at._fetchWalletImage(c)),ot.wait(300)]),Mt.search=at._filterOutExtensions(o)},initPromise(t,e){const n=Mt.promises[t];return n||(Mt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&at.initPromise("connectorImages",at.fetchConnectorImages),e&&at.initPromise("featuredWallets",at.fetchFeaturedWallets),n&&at.initPromise("recommendedWallets",at.fetchRecommendedWallets),r&&at.initPromise("networkImages",at.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=we.state.features)!=null&&t.analytics&&at.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await ki.get({path:"/getAnalyticsConfig",params:at._getSdkProperties()});we.setFeatures({analytics:t})}catch{we.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Mt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Mt.featured=Mt.allFeatured,Mt.recommended=Mt.allRecommended;return}const e=z.getRequestedCaipNetworkIds().join(",");Mt.featured=Mt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.recommended=Mt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Mt.filteredWallets=Mt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Ln=ar({view:"Connect",history:["Connect"],transactionStack:[]}),Nye={state:Ln,subscribeKey(t,e){return si(Ln,t,e)},pushTransactionStack(t){Ln.transactionStack.push(t)},popTransactionStack(t){const e=Ln.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),jt.goBack();break;case"cancel":s==null||s(),jt.goBack();break}},push(t,e){t!==Ln.view&&(Ln.view=t,Ln.history.push(t),Ln.data=e)},reset(t,e){Ln.view=t,Ln.history=[t],Ln.data=e},replace(t,e){Ln.history.at(-1)===t||(Ln.view=t,Ln.history[Ln.history.length-1]=t,Ln.data=e)},goBack(){var r;const t=z.state.activeCaipAddress,e=jt.state.view==="ConnectingFarcaster",n=!t&&e;if(Ln.history.length>1){Ln.history.pop();const[s]=Ln.history.slice(-1);s&&(t&&s==="Connect"?Ln.view="Account":Ln.view=s)}else gs.close();(r=Ln.data)!=null&&r.wallet&&(Ln.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){Ve.setFarcasterUrl(void 0,z.state.activeChain);const a=$e.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=XE(we.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Ln.history.length>1){Ln.history=Ln.history.slice(0,t+1);const[e]=Ln.history.slice(-1);e&&(Ln.view=e)}},goBackOrCloseModal(){jt.state.history.length>1?jt.goBack():gs.close()}},jt=ta(Nye),Zl=ar({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),Kk={state:Zl,subscribe(t){return ni(Zl,()=>t(Zl))},setThemeMode(t){Zl.themeMode=t;try{const e=$e.getAuthConnector();if(e){const n=Kk.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:ju(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){Zl.themeVariables={...Zl.themeVariables,...t};try{const e=$e.getAuthConnector();if(e){const n=Kk.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:ju(Zl.themeVariables,Zl.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return XE(Zl)}},Yi=ta(Kk),JV={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},dn=ar({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...JV},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Tye={state:dn,subscribe(t){return ni(dn,()=>{t(dn)})},subscribeKey(t,e){return si(dn,t,e)},initialize(t){t.forEach(e=>{const n=Ke.getConnectedConnectorId(e);n&&$e.setConnectorId(n,e)})},setActiveConnector(t){t&&(dn.activeConnector=Ig(t))},setConnectors(t){t.filter(s=>!dn.allConnectors.some(i=>i.id===s.id&&$e.getConnectorName(i.name)===$e.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&dn.allConnectors.push(Ig(s))});const n=$e.getEnabledNamespaces(),r=$e.getEnabledConnectors(n);dn.connectors=$e.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(dn.filterByNamespaceMap).forEach(e=>{dn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{dn.filterByNamespaceMap[e]=!0}),$e.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){dn.filterByNamespaceMap[t]=e,$e.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=$e.getEnabledNamespaces(),e=$e.getEnabledConnectors(t),n=$e.areAllNamespacesEnabled();dn.connectors=$e.mergeMultiChainConnectors(e),n?at.clearFilterByNamespaces():at.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(dn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return dn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(dn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=$e.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===Fe.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=$e.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===Fe.CONNECTOR_ID.AUTH){const s=t,i=XE(we.state),o=Yi.getSnapshot().themeMode,a=Yi.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:ju(a,o)}),$e.setConnectors([t])}else $e.setConnectors([t])},getAuthConnector(t){var r;const e=t||z.state.activeChain,n=dn.connectors.find(s=>s.id===Fe.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return dn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return dn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return dn.allConnectors.filter(r=>r.chain===z.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=XE(we.state),r=Yi.getSnapshot().themeMode,s=Yi.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:ju(s,r)})},getConnectorsByNamespace(t){const e=dn.allConnectors.filter(n=>n.chain===t);return $e.mergeMultiChainConnectors(e)},selectWalletConnector(t){const e=$e.getConnector(t.id,t.rdns),n=z.state.activeChain;wye.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,n),e?jt.push("ConnectingExternal",{connector:e}):jt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?$e.getConnectorsByNamespace(t):$e.mergeMultiChainConnectors(dn.allConnectors)},setFilterByNamespace(t){dn.filterByNamespace=t,dn.connectors=$e.getConnectors(t),at.setFilterByNamespace(t)},setConnectorId(t,e){t&&(dn.activeConnectorIds={...dn.activeConnectorIds,[e]:t},Ke.setConnectedConnectorId(e,t))},removeConnectorId(t){dn.activeConnectorIds={...dn.activeConnectorIds,[t]:void 0},Ke.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return dn.activeConnectorIds[t]},isConnected(t){return t?!!dn.activeConnectorIds[t]:Object.values(dn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){dn.activeConnectorIds={...JV}}},$e=ta(Tye);var pw={};const Rye="https://secure.walletconnect.org/sdk",Pye=(typeof process<"u"&&typeof pw<"u"?pw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||Rye,Oye=(typeof process<"u"&&typeof pw<"u"?pw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",kye=(typeof process<"u"&&typeof pw<"u"?pw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ge={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ms={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},ep=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),jr=ar({...ep}),Dye={state:jr,subscribeKey(t,e){return si(jr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=ot.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){jr.message=ep.message,jr.variant=ep.variant,jr.svg=ep.svg,jr.open=ep.open,jr.autoClose=ep.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=ep.autoClose}){jr.open?(jr.open=!1,setTimeout(()=>{jr.message=t,jr.variant=n,jr.svg=e,jr.open=!0,jr.autoClose=r},150)):(jr.message=t,jr.variant=n,jr.svg=e,jr.open=!0,jr.autoClose=r)}},bc=Dye,Kn=ar({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Mye={state:Kn,subscribe(t){return ni(Kn,()=>t(Kn))},setLastNetworkInView(t){Kn.lastNetworkInView=t},async fetchTransactions(t,e){var n,r;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Kn.loading=!0;try{const s=await mt.fetchTransactions({account:t,cursor:Kn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),i=Sv.filterSpamTransactions(s.data),o=Sv.filterByConnectedChain(i),a=[...Kn.transactions,...o];Kn.loading=!1,e==="coinbase"?Kn.coinbaseTransactions=Sv.groupTransactionsByYearAndMonth(Kn.coinbaseTransactions,s.data):(Kn.transactions=a,Kn.transactionsByYear=Sv.groupTransactionsByYearAndMonth(Kn.transactionsByYear,o)),Kn.empty=a.length===0,Kn.next=s.next?s.next:void 0}catch{const i=z.state.activeChain;hr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:we.state.projectId,cursor:Kn.next,isSmartAccount:((r=Ve.state.preferredAccountTypes)==null?void 0:r[i])===Ms.ACCOUNT_TYPES.SMART_ACCOUNT}}),bc.showError("Failed to fetch transactions"),Kn.loading=!1,Kn.empty=!0,Kn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Kn.next=void 0},resetTransactions(){Kn.transactions=[],Kn.transactionsByYear={},Kn.lastNetworkInView=void 0,Kn.loading=!1,Kn.empty=!1,Kn.next=void 0}},Sv=ta(Mye,"API_ERROR"),Hn=ar({connections:new Map,wcError:!1,buffering:!1,status:"disconnected"});let jf;const Lye={state:Hn,subscribeKey(t,e){return si(Hn,t,e)},_getClient(){return Hn._client},setClient(t){Hn._client=Ig(t)},async connectWalletConnect(){var t,e,n,r;if(ot.isTelegram()||ot.isSafari()&&ot.isIos()){if(jf){await jf,jf=void 0;return}if(!ot.isPairingExpired(Hn==null?void 0:Hn.wcPairingExpiry)){const s=Hn.wcUri;Hn.wcUri=s;return}jf=(e=(t=yt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),yt.state.status="connecting",await jf,jf=void 0,Hn.wcPairingExpiry=void 0,yt.state.status="connected"}else await((r=(n=yt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var r,s;await((s=(r=yt._getClient())==null?void 0:r.connectExternal)==null?void 0:s.call(r,t)),n&&z.setActiveNamespace(e)},async reconnectExternal(t){var n,r;await((r=(n=yt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||z.state.activeChain;e&&$e.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;gs.setLoading(!0,z.state.activeChain);const n=$e.getAuthConnector();n&&(Ve.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ke.setPreferredAccountTypes(Ve.state.preferredAccountTypes??{[e]:t}),await yt.reconnectExternal(n),gs.setLoading(!1,z.state.activeChain),hr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=yt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=yt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=yt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=yt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=yt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=yt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=yt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=yt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=yt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=yt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=yt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=yt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){Hn.wcUri=void 0,Hn.wcPairingExpiry=void 0,Hn.wcLinking=void 0,Hn.recentWallet=void 0,Hn.status="disconnected",Sv.resetTransactions(),Ke.deleteWalletConnectDeepLink()},resetUri(){Hn.wcUri=void 0,Hn.wcPairingExpiry=void 0,jf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=yt.state;t&&Ke.setWalletConnectDeepLink(t),e&&Ke.setAppKitRecent(e),hr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=jt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){Hn.wcBasic=t},setUri(t){Hn.wcUri=t,Hn.wcPairingExpiry=ot.getPairingExpiry()},setWcLinking(t){Hn.wcLinking=t},setWcError(t){Hn.wcError=t,Hn.buffering=!1},setRecentWallet(t){Hn.recentWallet=t},setBuffering(t){Hn.buffering=t},setStatus(t){Hn.status=t},async disconnect(t){var e;try{await((e=yt._getClient())==null?void 0:e.disconnect(t))}catch(n){throw new qk("Failed to disconnect","INTERNAL_SDK_ERROR",n)}},setConnections(t,e){Hn.connections.set(e,t)},switchAccount({connection:t,address:e,namespace:n}){if($e.state.activeConnectorIds[n]===t.connectorId){const i=z.state.activeCaipNetwork;if(i){const o=`${n}:${i.id}:${e}`;Ve.setCaipAddress(o,n)}else console.warn(`No current network found for namespace "${n}"`)}else{const i=$e.getConnector(t.connectorId);i?yt.connectExternal(i,n):console.warn(`No connector found for namespace "${n}"`)}}},yt=ta(Lye),Om=ar({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Ol={state:Om,subscribe(t){return ni(Om,()=>t(Om))},subscribeOpen(t){return si(Om,"open",t)},set(t){Object.assign(Om,{...Om,...t})}},Uye="1.0.8";let na=class Yk extends Error{constructor(e,n={}){var o;const r=n.cause instanceof Yk?n.cause.details:(o=n.cause)!=null&&o.message?n.cause.message:n.details,s=n.cause instanceof Yk&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${Uye}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}};function gd(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const ZV=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,XV=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,eK=/^\(.+?\).*?$/,b8=/^tuple(?<array>(\[(\d*)\])*)$/;function Qk(t){let e=t.type;if(b8.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let s=0;s<n;s++){const i=t.components[s];e+=Qk(i),s<n-1&&(e+=", ")}const r=gd(b8,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,Qk({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Kb(t){let e="";const n=t.length;for(let r=0;r<n;r++){const s=t[r];e+=Qk(s),r!==n-1&&(e+=", ")}return e}function Bx(t){var e;return t.type==="function"?`function ${t.name}(${Kb(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Kb(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Kb(t.inputs)})`:t.type==="error"?`error ${t.name}(${Kb(t.inputs)})`:t.type==="constructor"?`constructor(${Kb(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const tK=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Bye(t){return tK.test(t)}function $ye(t){return gd(tK,t)}const nK=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Fye(t){return nK.test(t)}function jye(t){return gd(nK,t)}const rK=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Wye(t){return rK.test(t)}function zye(t){return gd(rK,t)}const sK=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function AL(t){return sK.test(t)}function Hye(t){return gd(sK,t)}const iK=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Gye(t){return iK.test(t)}function qye(t){return gd(iK,t)}const oK=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Vye(t){return oK.test(t)}function Kye(t){return gd(oK,t)}const Yye=/^receive\(\) external payable$/;function Qye(t){return Yye.test(t)}const Jye=new Set(["indexed"]),Jk=new Set(["calldata","memory","storage"]);class Zye extends na{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Xye extends na{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class e0e extends na{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class t0e extends na{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class n0e extends na{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class r0e extends na{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class s0e extends na{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class i0e extends na{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class rb extends na{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class o0e extends na{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class a0e extends na{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class c0e extends na{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class l0e extends na{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function u0e(t,e,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let i="";for(const o of s[1])i+=`[${o.type}${o.name?`:${o.name}`:""}]`;r+=`(${s[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const CP=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Zk(t,e={}){if(Wye(t))return d0e(t,e);if(Fye(t))return h0e(t,e);if(Bye(t))return f0e(t,e);if(Gye(t))return p0e(t,e);if(Vye(t))return g0e(t);if(Qye(t))return{type:"receive",stateMutability:"payable"};throw new o0e({signature:t})}function d0e(t,e={}){const n=zye(t);if(!n)throw new rb({signature:t,type:"function"});const r=vc(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(Tg(r[a],{modifiers:Jk,structs:e,type:"function"}));const o=[];if(n.returns){const a=vc(n.returns),c=a.length;for(let l=0;l<c;l++)o.push(Tg(a[l],{modifiers:Jk,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}function h0e(t,e={}){const n=jye(t);if(!n)throw new rb({signature:t,type:"event"});const r=vc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Tg(r[o],{modifiers:Jye,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:s}}function f0e(t,e={}){const n=$ye(t);if(!n)throw new rb({signature:t,type:"error"});const r=vc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Tg(r[o],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:s}}function p0e(t,e={}){const n=qye(t);if(!n)throw new rb({signature:t,type:"constructor"});const r=vc(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(Tg(r[o],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function g0e(t){const e=Kye(t);if(!e)throw new rb({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const m0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,y0e=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,w0e=/^u?int$/;function Tg(t,e){var d,h;const n=u0e(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(CP.has(n))return CP.get(n);const r=eK.test(t),s=gd(r?y0e:m0e,t);if(!s)throw new t0e({param:t});if(s.name&&v0e(s.name))throw new n0e({param:t,name:s.name});const i=s.name?{name:s.name}:{},o=s.modifier==="indexed"?{indexed:!0}:{},a=(e==null?void 0:e.structs)??{};let c,l={};if(r){c="tuple";const f=vc(s.type),p=[],g=f.length;for(let w=0;w<g;w++)p.push(Tg(f[w],{structs:a}));l={components:p}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(w0e.test(s.type))c=`${s.type}256`;else if(c=s.type,(e==null?void 0:e.type)!=="struct"&&!aK(c))throw new e0e({type:c});if(s.modifier){if(!((h=(d=e==null?void 0:e.modifiers)==null?void 0:d.has)!=null&&h.call(d,s.modifier)))throw new r0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier});if(Jk.has(s.modifier)&&!E0e(c,!!s.array))throw new s0e({param:t,type:e==null?void 0:e.type,modifier:s.modifier})}const u={type:`${c}${s.array??""}`,...i,...o,...l};return CP.set(n,u),u}function vc(t,e=[],n="",r=0){const s=t.trim().length;for(let i=0;i<s;i++){const o=t[i],a=t.slice(i+1);switch(o){case",":return r===0?vc(a,[...e,n.trim()]):vc(a,e,`${n}${o}`,r);case"(":return vc(a,e,`${n}${o}`,r+1);case")":return vc(a,e,`${n}${o}`,r-1);default:return vc(a,e,`${n}${o}`,r)}}if(n==="")return e;if(r!==0)throw new l0e({current:n,depth:r});return e.push(n.trim()),e}function aK(t){return t==="address"||t==="bool"||t==="function"||t==="string"||ZV.test(t)||XV.test(t)}const b0e=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function v0e(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||ZV.test(t)||XV.test(t)||b0e.test(t)}function E0e(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function cK(t){const e={},n=t.length;for(let o=0;o<n;o++){const a=t[o];if(!AL(a))continue;const c=Hye(a);if(!c)throw new rb({signature:a,type:"struct"});const l=c.properties.split(";"),u=[],d=l.length;for(let h=0;h<d;h++){const p=l[h].trim();if(!p)continue;const g=Tg(p,{type:"struct"});u.push(g)}if(!u.length)throw new a0e({signature:a});e[c.name]=u}const r={},s=Object.entries(e),i=s.length;for(let o=0;o<i;o++){const[a,c]=s[o];r[a]=lK(c,e)}return r}const C0e=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function lK(t,e,n=new Set){const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(eK.test(o.type))r.push(o);else{const c=gd(C0e,o.type);if(!(c!=null&&c.type))throw new i0e({abiParameter:o});const{array:l,type:u}=c;if(u in e){if(n.has(u))throw new c0e({type:u});r.push({...o,type:`tuple${l??""}`,components:lK(e[u]??[],e,new Set([...n,u]))})}else if(aK(u))r.push(o);else throw new Xye({type:u})}}return r}function uK(t){const e=cK(t),n=[],r=t.length;for(let s=0;s<r;s++){const i=t[s];AL(i)||n.push(Zk(i,e))}return n}function v8(t){let e;if(typeof t=="string")e=Zk(t);else{const n=cK(t),r=t.length;for(let s=0;s<r;s++){const i=t[s];if(!AL(i)){e=Zk(i,n);break}}}if(!e)throw new Zye({signature:t});return e}function ut(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}function Oc(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new M0e(t.type);return`${t.name}(${BN(t.inputs,{includeName:e})})`}function BN(t,{includeName:e=!1}={}){return t?t.map(n=>_0e(n,{includeName:e})).join(e?", ":","):""}function _0e(t,{includeName:e}){return t.type.startsWith("tuple")?`(${BN(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function Bl(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function xr(t){return Bl(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const dK="2.32.0";let Yb={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${dK}`},pe=class Xk extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof Xk?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Xk&&n.cause.docsPath||n.docsPath,i=(a=Yb.getDocsUrl)==null?void 0:a.call(Yb,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Yb.version?[`Version: ${Yb.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=dK}walk(e){return hK(this,e)}};function hK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?hK(t.cause,e):e?null:t}class A0e extends pe{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class E8 extends pe{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class fK extends pe{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${BN(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class $_ extends pe{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class S0e extends pe{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class x0e extends pe{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${xr(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class I0e extends pe{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class N0e extends pe{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class C8 extends pe{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class pK extends pe{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class T0e extends pe{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class gK extends pe{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class _8 extends pe{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class gw extends pe{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class mK extends pe{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class R0e extends pe{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class P0e extends pe{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Oc(e.abiItem)}\`, and`,`\`${n.type}\` in \`${Oc(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let O0e=class extends pe{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class eC extends pe{constructor({abiItem:e,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${BN(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=s}}class $N extends pe{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Oc(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class k0e extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class D0e extends pe{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let yK=class extends pe{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class M0e extends pe{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class L0e extends pe{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let wK=class extends pe{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},bK=class extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class A8 extends pe{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function sb(t,{dir:e,size:n=32}={}){return typeof t=="string"?Xh(t,{dir:e,size:n}):U0e(t,{dir:e,size:n})}function Xh(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new bK({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function U0e(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new bK({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}let vK=class extends pe{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class B0e extends pe{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class $0e extends pe{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let F0e=class extends pe{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function kl(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let s=0;s<n.length-1&&n[e==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function $a(t,{size:e}){if(xr(t)>e)throw new F0e({givenSize:xr(t),maxSize:e})}function Qo(t,e={}){const{signed:n}=e;e.size&&$a(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function j0e(t,e={}){let n=t;if(e.size&&($a(n,{size:e.size}),n=kl(n)),kl(n)==="0x00")return!1;if(kl(n)==="0x01")return!0;throw new $0e(n)}function kc(t,e={}){return Number(Qo(t,e))}function EK(t,e={}){let n=Ma(t);return e.size&&($a(n,{size:e.size}),n=kl(n,{dir:"right"})),new TextDecoder().decode(n)}const W0e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Da(t,e={}){return typeof t=="number"||typeof t=="bigint"?et(t,e):typeof t=="string"?mw(t,e):typeof t=="boolean"?CK(t,e):es(t,e)}function CK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?($a(n,{size:e.size}),sb(n,{size:e.size})):n}function es(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=W0e[t[s]];const r=`0x${n}`;return typeof e.size=="number"?($a(r,{size:e.size}),sb(r,{dir:"right",size:e.size})):r}function et(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new vK({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?sb(a,{size:r}):a}const z0e=new TextEncoder;function mw(t,e={}){const n=z0e.encode(t);return es(n,e)}const H0e=new TextEncoder;function ib(t,e={}){return typeof t=="number"||typeof t=="bigint"?q0e(t,e):typeof t=="boolean"?G0e(t,e):Bl(t)?Ma(t,e):dg(t,e)}function G0e(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?($a(n,{size:e.size}),sb(n,{size:e.size})):n}const Xl={zero:48,nine:57,A:65,F:70,a:97,f:102};function S8(t){if(t>=Xl.zero&&t<=Xl.nine)return t-Xl.zero;if(t>=Xl.A&&t<=Xl.F)return t-(Xl.A-10);if(t>=Xl.a&&t<=Xl.f)return t-(Xl.a-10)}function Ma(t,e={}){let n=t;e.size&&($a(n,{size:e.size}),n=sb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=S8(r.charCodeAt(a++)),l=S8(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new pe(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function q0e(t,e){const n=et(t,e);return Ma(n)}function dg(t,e={}){const n=H0e.encode(t);return typeof e.size=="number"?($a(n,{size:e.size}),sb(n,{dir:"right",size:e.size})):n}const oA=BigInt(2**32-1),x8=BigInt(32);function V0e(t,e=!1){return e?{h:Number(t&oA),l:Number(t>>x8&oA)}:{h:Number(t>>x8&oA)|0,l:Number(t&oA)|0}}function K0e(t,e=!1){const n=t.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:o,l:a}=V0e(t[i],e);[r[i],s[i]]=[o,a]}return[r,s]}const Y0e=(t,e,n)=>t<<n|e>>>32-n,Q0e=(t,e,n)=>e<<n|t>>>32-n,J0e=(t,e,n)=>e<<n-32|t>>>64-n,Z0e=(t,e,n)=>t<<n-32|e>>>64-n,km=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function SL(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Dc(t,...e){if(!SL(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function X0e(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");tC(t.outputLen),tC(t.blockLen)}function yw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function _K(t,e){Dc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function ewe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ww(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function _P(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function zc(t,e){return t<<32-e|t>>>e}const twe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function nwe(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function rwe(t){for(let e=0;e<t.length;e++)t[e]=nwe(t[e]);return t}const I8=twe?t=>t:rwe,AK=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",swe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function nC(t){if(Dc(t),AK)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=swe[t[n]];return e}const eu={_0:48,_9:57,A:65,F:70,a:97,f:102};function N8(t){if(t>=eu._0&&t<=eu._9)return t-eu._0;if(t>=eu.A&&t<=eu.F)return t-(eu.A-10);if(t>=eu.a&&t<=eu.f)return t-(eu.a-10)}function xL(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(AK)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=N8(t.charCodeAt(i)),a=N8(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function iwe(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function F_(t){return typeof t=="string"&&(t=iwe(t)),Dc(t),t}function Cp(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];Dc(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let IL=class{};function SK(t){const e=r=>t().update(F_(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function owe(t){const e=(r,s)=>t(s).update(F_(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}function awe(t=32){if(km&&typeof km.getRandomValues=="function")return km.getRandomValues(new Uint8Array(t));if(km&&typeof km.randomBytes=="function")return Uint8Array.from(km.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const cwe=BigInt(0),Qb=BigInt(1),lwe=BigInt(2),uwe=BigInt(7),dwe=BigInt(256),hwe=BigInt(113),xK=[],IK=[],NK=[];for(let t=0,e=Qb,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],xK.push(2*(5*r+n)),IK.push((t+1)*(t+2)/2%64);let s=cwe;for(let i=0;i<7;i++)e=(e<<Qb^(e>>uwe)*hwe)%dwe,e&lwe&&(s^=Qb<<(Qb<<BigInt(i))-Qb);NK.push(s)}const TK=K0e(NK,!0),fwe=TK[0],pwe=TK[1],T8=(t,e,n)=>n>32?J0e(t,e,n):Y0e(t,e,n),R8=(t,e,n)=>n>32?Z0e(t,e,n):Q0e(t,e,n);function RK(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=T8(l,u,1)^n[a],h=R8(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=IK[o],c=T8(s,i,a),l=R8(s,i,a),u=xK[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=fwe[r],t[1]^=pwe[r]}ww(n)}let NL=class PK extends IL{constructor(e,n,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,tC(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ewe(this.state)}clone(){return this._cloneInto()}keccak(){I8(this.state32),RK(this.state32,this.rounds),I8(this.state32),this.posOut=0,this.pos=0}update(e){yw(this),e=F_(e),Dc(e);const{blockLen:n,state:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){yw(this,!1),Dc(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return tC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(_K(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,ww(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new PK(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Rf=(t,e,n)=>SK(()=>new NL(e,t,n)),gwe=Rf(6,144,224/8),mwe=Rf(6,136,256/8),ywe=Rf(6,104,384/8),wwe=Rf(6,72,512/8),bwe=Rf(1,144,224/8),TL=Rf(1,136,256/8),vwe=Rf(1,104,384/8),Ewe=Rf(1,72,512/8),OK=(t,e,n)=>owe((r={})=>new NL(e,t,r.dkLen===void 0?n:r.dkLen,!0)),Cwe=OK(31,168,128/8),_we=OK(31,136,256/8),Bqe=Object.freeze(Object.defineProperty({__proto__:null,Keccak:NL,keccakP:RK,keccak_224:bwe,keccak_256:TL,keccak_384:vwe,keccak_512:Ewe,sha3_224:gwe,sha3_256:mwe,sha3_384:ywe,sha3_512:wwe,shake128:Cwe,shake256:_we},Symbol.toStringTag,{value:"Module"}));function ks(t,e){const n=e||"hex",r=TL(Bl(t,{strict:!1})?ib(t):t);return n==="bytes"?r:Da(r)}const Awe=t=>ks(ib(t));function Swe(t){return Awe(t)}function xwe(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new pe("Unable to normalize signature.");return s}const Iwe=t=>{const e=typeof t=="string"?t:Bx(t);return xwe(e)};function kK(t){return Swe(Iwe(t))}const FN=kK;let yf=class extends pe{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},jN=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const AP=new jN(8192);function j_(t,e){if(AP.has(`${t}.${e}`))return AP.get(`${t}.${e}`);const n=e?`${e}${t.toLowerCase()}`:t.substring(2).toLowerCase(),r=ks(dg(n),"bytes"),s=(e?n.substring(`${e}0x`.length):n).split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return AP.set(`${t}.${e}`,i),i}function Wu(t,e){if(!La(t,{strict:!1}))throw new yf({address:t});return j_(t,e)}const Nwe=/^0x[a-fA-F0-9]{40}$/,SP=new jN(8192);function La(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(SP.has(r))return SP.get(r);const s=Nwe.test(t)?t.toLowerCase()===t?!0:n?j_(t)===t:!0:!1;return SP.set(r,s),s}function Ua(t){return typeof t[0]=="string"?ob(t):Twe(t)}function Twe(t){let e=0;for(const s of t)e+=s.length;const n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function ob(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function bw(t,e,n,{strict:r}={}){return Bl(t,{strict:!1})?$x(t,e,n,{strict:r}):LK(t,e,n,{strict:r})}function DK(t,e){if(typeof e=="number"&&e>0&&e>xr(t)-1)throw new wK({offset:e,position:"start",size:xr(t)})}function MK(t,e,n){if(typeof e=="number"&&typeof n=="number"&&xr(t)!==n-e)throw new wK({offset:n,position:"end",size:xr(t)})}function LK(t,e,n,{strict:r}={}){DK(t,e);const s=t.slice(e,n);return r&&MK(s,e,n),s}function $x(t,e,n,{strict:r}={}){DK(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&MK(s,e,n),s}const Rwe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,UK=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Pf(t,e){if(t.length!==e.length)throw new I0e({expectedLength:t.length,givenLength:e.length});const n=Pwe({params:t,values:e}),r=PL(n);return r.length===0?"0x":r}function Pwe({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(RL({param:t[r],value:e[r]}));return n}function RL({param:t,value:e}){const n=OL(t.type);if(n){const[r,s]=n;return kwe(e,{length:r,param:{...t,type:s}})}if(t.type==="tuple")return Bwe(e,{param:t});if(t.type==="address")return Owe(e);if(t.type==="bool")return Mwe(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,s="256"]=UK.exec(t.type)??[];return Lwe(e,{signed:r,size:Number(s)})}if(t.type.startsWith("bytes"))return Dwe(e,{param:t});if(t.type==="string")return Uwe(e);throw new k0e(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function PL(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=xr(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(et(e+s,{size:32})),r.push(a),s+=xr(a)):n.push(a)}return Ua([...n,...r])}function Owe(t){if(!La(t))throw new yf({address:t});return{dynamic:!1,encoded:Xh(t.toLowerCase())}}function kwe(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new yK(t);if(!r&&t.length!==e)throw new S0e({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let s=!1;const i=[];for(let o=0;o<t.length;o++){const a=RL({param:n,value:t[o]});a.dynamic&&(s=!0),i.push(a)}if(r||s){const o=PL(i);if(r){const a=et(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?Ua([a,o]):a}}if(s)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:Ua(i.map(({encoded:o})=>o))}}function Dwe(t,{param:e}){const[,n]=e.type.split("bytes"),r=xr(t);if(!n){let s=t;return r%32!==0&&(s=Xh(s,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:Ua([Xh(et(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new x0e({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Xh(t,{dir:"right"})}}function Mwe(t){if(typeof t!="boolean")throw new pe(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Xh(CK(t))}}function Lwe(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new vK({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:et(t,{size:32,signed:e})}}function Uwe(t){const e=mw(t),n=Math.ceil(xr(e)/32),r=[];for(let s=0;s<n;s++)r.push(Xh(bw(e,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ua([Xh(et(xr(e),{size:32})),...r])}}function Bwe(t,{param:e}){let n=!1;const r=[];for(let s=0;s<e.components.length;s++){const i=e.components[s],o=Array.isArray(t)?s:i.name,a=RL({param:i,value:t[o]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?PL(r):Ua(r.map(({encoded:s})=>s))}}function OL(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const W_=t=>bw(kK(t),0,4);function om(t){const{abi:e,args:n=[],name:r}=t,s=Bl(r,{strict:!1}),i=e.filter(a=>s?a.type==="function"?W_(a)===r:a.type==="event"?FN(a)===r:!1:"name"in a&&a.name===r);if(i.length===0)return;if(i.length===1)return i[0];let o;for(const a of i){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,u)=>{const d="inputs"in a&&a.inputs[u];return d?eD(l,d):!1})){if(o&&"inputs"in o&&o.inputs){const l=BK(a.inputs,o.inputs,n);if(l)throw new P0e({abiItem:a,type:l[0]},{abiItem:o,type:l[1]})}o=a}}return o||i[0]}function eD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return La(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>eD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>eD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function BK(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return BK(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?La(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?La(n[r],{strict:!1}):!1)return o}}const P8="/docs/contract/encodeEventTopics";function z_(t){var c;const{abi:e,eventName:n,args:r}=t;let s=e[0];if(n){const l=om({abi:e,name:n});if(!l)throw new _8(n,{docsPath:P8});s=l}if(s.type!=="event")throw new _8(void 0,{docsPath:P8});const i=Oc(s),o=FN(i);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(d=>r[d.name]))??[]:[];u.length>0&&(a=(l==null?void 0:l.map((d,h)=>Array.isArray(u[h])?u[h].map((f,p)=>O8({param:d,value:u[h][p]})):typeof u[h]<"u"&&u[h]!==null?O8({param:d,value:u[h]}):null))??[])}return[o,...a]}function O8({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ks(ib(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new L0e(t.type);return Pf([t],[e])}function WN(t,{method:e}){var r,s;const n={};return t.transport.type==="fallback"&&((s=(r=t.transport).onResponse)==null||s.call(r,({method:i,response:o,status:a,transport:c})=>{a==="success"&&e===i&&(n[o]=c.request)})),i=>n[i]||t.request}async function $K(t,e){const{address:n,abi:r,args:s,eventName:i,fromBlock:o,strict:a,toBlock:c}=e,l=WN(t,{method:"eth_newFilter"}),u=i?z_({abi:r,args:s,eventName:i}):void 0,d=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof o=="bigint"?et(o):o,toBlock:typeof c=="bigint"?et(c):c,topics:u}]});return{abi:r,args:s,eventName:i,id:d,request:l(d),strict:!!a,type:"event"}}function Nr(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const k8="/docs/contract/encodeFunctionData";function $we(t){const{abi:e,args:n,functionName:r}=t;let s=e[0];if(r){const i=om({abi:e,args:n,name:r});if(!i)throw new gw(r,{docsPath:k8});s=i}if(s.type!=="function")throw new gw(void 0,{docsPath:k8});return{abi:[s],functionName:W_(Oc(s))}}function Fa(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var a;return t.abi.length===1&&((a=t.functionName)!=null&&a.startsWith("0x"))?t:$we(t)})(),s=n[0],i=r,o="inputs"in s&&s.inputs?Pf(s.inputs,e??[]):void 0;return ob([i,o??"0x"])}const FK={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},jK={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Fwe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class D8 extends pe{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class WK extends pe{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class jwe extends pe{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Wwe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new jwe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new WK({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new D8({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new D8({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function kL(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(Wwe);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function zwe(t,e={}){typeof e.size<"u"&&$a(t,{size:e.size});const n=es(t,e);return Qo(n,e)}function Hwe(t,e={}){let n=t;if(typeof e.size<"u"&&($a(n,{size:e.size}),n=kl(n)),n.length>1||n[0]>1)throw new B0e(n);return!!n[0]}function qu(t,e={}){typeof e.size<"u"&&$a(t,{size:e.size});const n=es(t,e);return kc(n,e)}function Gwe(t,e={}){let n=t;return typeof e.size<"u"&&($a(n,{size:e.size}),n=kl(n,{dir:"right"})),new TextDecoder().decode(n)}function H_(t,e){const n=typeof e=="string"?Ma(e):e,r=kL(n);if(xr(n)===0&&t.length>0)throw new $_;if(xr(e)&&xr(e)<32)throw new fK({data:typeof e=="string"?e:es(e),params:t,size:xr(e)});let s=0;const i=[];for(let o=0;o<t.length;++o){const a=t[o];r.setPosition(s);const[c,l]=qy(r,a,{staticPosition:0});s+=l,i.push(c)}return i}function qy(t,e,{staticPosition:n}){const r=OL(e.type);if(r){const[s,i]=r;return Vwe(t,{...e,type:i},{length:s,staticPosition:n})}if(e.type==="tuple")return Jwe(t,e,{staticPosition:n});if(e.type==="address")return qwe(t);if(e.type==="bool")return Kwe(t);if(e.type.startsWith("bytes"))return Ywe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return Qwe(t,e);if(e.type==="string")return Zwe(t,{staticPosition:n});throw new D0e(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const M8=32,tD=32;function qwe(t){const e=t.readBytes(32);return[j_(es(LK(e,-20))),32]}function Vwe(t,e,{length:n,staticPosition:r}){if(!n){const o=qu(t.readBytes(tD)),a=r+o,c=a+M8;t.setPosition(a);const l=qu(t.readBytes(M8)),u=rC(e);let d=0;const h=[];for(let f=0;f<l;++f){t.setPosition(c+(u?f*32:d));const[p,g]=qy(t,e,{staticPosition:c});d+=g,h.push(p)}return t.setPosition(r+32),[h,32]}if(rC(e)){const o=qu(t.readBytes(tD)),a=r+o,c=[];for(let l=0;l<n;++l){t.setPosition(a+l*32);const[u]=qy(t,e,{staticPosition:a});c.push(u)}return t.setPosition(r+32),[c,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[a,c]=qy(t,e,{staticPosition:r+s});s+=c,i.push(a)}return[i,s]}function Kwe(t){return[Hwe(t.readBytes(32),{size:32}),32]}function Ywe(t,e,{staticPosition:n}){const[r,s]=e.type.split("bytes");if(!s){const o=qu(t.readBytes(32));t.setPosition(n+o);const a=qu(t.readBytes(32));if(a===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(a);return t.setPosition(n+32),[es(c),32]}return[es(t.readBytes(Number.parseInt(s),32)),32]}function Qwe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),s=t.readBytes(32);return[r>48?zwe(s,{signed:n}):qu(s,{signed:n}),32]}function Jwe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:o})=>!o),s=r?[]:{};let i=0;if(rC(e)){const o=qu(t.readBytes(tD)),a=n+o;for(let c=0;c<e.components.length;++c){const l=e.components[c];t.setPosition(a+i);const[u,d]=qy(t,l,{staticPosition:a});i+=d,s[r?c:l==null?void 0:l.name]=u}return t.setPosition(n+32),[s,32]}for(let o=0;o<e.components.length;++o){const a=e.components[o],[c,l]=qy(t,a,{staticPosition:n});s[r?o:a==null?void 0:a.name]=c,i+=l}return[s,i]}function Zwe(t,{staticPosition:e}){const n=qu(t.readBytes(32)),r=e+n;t.setPosition(r);const s=qu(t.readBytes(32));if(s===0)return t.setPosition(e+32),["",32];const i=t.readBytes(s,32),o=Gwe(kl(i));return t.setPosition(e+32),[o,32]}function rC(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(rC);const n=OL(t.type);return!!(n&&rC({...t,type:n[1]}))}function Xwe(t){const{abi:e,data:n}=t,r=bw(n,0,4);if(r==="0x")throw new $_;const i=[...e||[],jK,Fwe].find(o=>o.type==="error"&&r===W_(Oc(o)));if(!i)throw new pK(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?H_(i.inputs,bw(n,4)):void 0,errorName:i.name}}const Zr=(t,e,n)=>JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString():s,n);function zK({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((s,i)=>`${r&&s.name?`${s.name}: `:""}${typeof e[i]=="object"?Zr(e[i]):e[i]}`).join(", ")})`}const ebe={gwei:9,wei:18},tbe={ether:-9,wei:9},nbe={ether:-18,gwei:-9};function am(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[s,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function DL(t,e="wei"){return am(t,ebe[e])}function lo(t,e="wei"){return am(t,tbe[e])}class rbe extends pe{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class sbe extends pe{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function L8(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function ibe(t){return t.reduce((e,{address:n,...r})=>{let s=`${e}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=L8(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=L8(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function G_(t){const e=Object.entries(t).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=e.reduce((r,[s])=>Math.max(r,s.length),0);return e.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class obe extends pe{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class abe extends pe{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",G_(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class cbe extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=G_({chain:s&&`${s==null?void 0:s.name} (id: ${s==null?void 0:s.id})`,from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${DL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lo(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lo(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lo(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",f].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class HK extends pe{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){let o="Transaction";r&&i!==void 0&&(o=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(o=`Transaction at block number "${n}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class GK extends pe{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class lbe extends pe{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const ube=t=>t,ML=t=>t;class qK extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h,stateOverride:f}){var w;const p=n?Nr(n):void 0;let g=G_({from:p==null?void 0:p.address,to:d,value:typeof h<"u"&&`${DL(h)} ${((w=s==null?void 0:s.nativeCurrency)==null?void 0:w.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lo(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lo(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lo(l)} gwei`,nonce:u});f&&(g+=`
${ibe(f)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",g].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class VK extends pe{constructor(e,{abi:n,args:r,contractAddress:s,docsPath:i,functionName:o,sender:a}){const c=om({abi:n,args:r,name:o}),l=c?zK({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,u=c?Oc(c,{includeName:!0}):void 0,d=G_({address:s&&ube(s),function:u,args:l&&l!=="()"&&`${[...Array((o==null?void 0:o.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(e.shortMessage||`An unknown error occurred while executing the contract function "${o}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],d&&"Contract Call:",d].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=s,this.functionName=o,this.sender=a}}class nD extends pe{constructor({abi:e,data:n,functionName:r,message:s}){let i,o,a,c;if(n&&n!=="0x")try{o=Xwe({abi:e,data:n});const{abiItem:u,errorName:d,args:h}=o;if(d==="Error")c=h[0];else if(d==="Panic"){const[f]=h;c=FK[f]}else{const f=u?Oc(u,{includeName:!0}):void 0,p=u&&h?zK({abiItem:u,args:h,includeFunctionName:!1,includeName:!1}):void 0;a=[f?`Error: ${f}`:"",p&&p!=="()"?`       ${[...Array((d==null?void 0:d.length)??0).keys()].map(()=>" ").join("")}${p}`:""]}}catch(u){i=u}else s&&(c=s);let l;i instanceof pK&&(l=i.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=o,this.raw=n,this.reason=c,this.signature=l}}class dbe extends pe{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class hbe extends pe{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class zN extends pe{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class rE extends pe{constructor({body:e,cause:n,details:r,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${ML(o)}`,e&&`Request body: ${Zr(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class LL extends pe{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${ML(r)}`,`Request body: ${Zr(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class U8 extends pe{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${ML(n)}`,`Request body: ${Zr(e)}`],name:"TimeoutError"})}}const fbe=-1;class mo extends pe{constructor(e,{code:n,docsPath:r,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:r,metaMessages:s||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof LL?e.code:n??fbe}}class ra extends mo{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class sC extends mo{constructor(e){super(e,{code:sC.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(sC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class iC extends mo{constructor(e){super(e,{code:iC.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(iC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class oC extends mo{constructor(e,{method:n}={}){super(e,{code:oC.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(oC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class aC extends mo{constructor(e){super(e,{code:aC.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(aC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Rg extends mo{constructor(e){super(e,{code:Rg.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Rg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Pg extends mo{constructor(e){super(e,{code:Pg.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Pg,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class cC extends mo{constructor(e){super(e,{code:cC.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(cC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ef extends mo{constructor(e){super(e,{code:ef.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ef,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class vw extends mo{constructor(e){super(e,{code:vw.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(vw,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class _p extends mo{constructor(e,{method:n}={}){super(e,{code:_p.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(_p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Ew extends mo{constructor(e){super(e,{code:Ew.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(Ew,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class lC extends mo{constructor(e){super(e,{code:lC.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(lC,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Hr extends ra{constructor(e){super(e,{code:Hr.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Hr,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class uC extends ra{constructor(e){super(e,{code:uC.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(uC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class dC extends ra{constructor(e,{method:n}={}){super(e,{code:dC.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(dC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class hC extends ra{constructor(e){super(e,{code:hC.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(hC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class fC extends ra{constructor(e){super(e,{code:fC.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(fC,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class $l extends ra{constructor(e){super(e,{code:$l.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty($l,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Cw extends ra{constructor(e){super(e,{code:Cw.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Cw,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class pC extends ra{constructor(e){super(e,{code:pC.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(pC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class gC extends ra{constructor(e){super(e,{code:gC.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(gC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class mC extends ra{constructor(e){super(e,{code:mC.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(mC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class yC extends ra{constructor(e){super(e,{code:yC.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(yC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class wC extends ra{constructor(e){super(e,{code:wC.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(wC,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class _w extends ra{constructor(e){super(e,{code:_w.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(_w,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class pbe extends mo{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const gbe=3;function Og(t,{abi:e,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=t instanceof zN?t:t instanceof pe?t.walk(p=>"data"in p)||t.walk():{},{code:c,data:l,details:u,message:d,shortMessage:h}=a,f=t instanceof $_?new dbe({functionName:i}):[gbe,Rg.code].includes(c)&&(l||u||d||h)?new nD({abi:e,data:typeof l=="object"?l.data:l,functionName:i,message:a instanceof LL?u:h??d}):t;return new VK(f,{abi:e,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}function mbe(t){const e=ks(`0x${t.substring(4)}`).substring(26);return j_(`0x${e}`)}const ybe="modulepreload",wbe=function(t){return"/"+t},B8={},Js=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=wbe(c),c in B8)return;B8[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":ybe,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};async function bbe({hash:t,signature:e}){const n=Bl(t)?t:Da(t),{secp256k1:r}=await Js(async()=>{const{secp256k1:o}=await Promise.resolve().then(()=>i_e);return{secp256k1:o}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=$8(f);return new r.Signature(Qo(l),Qo(u)).addRecoveryBit(p)}const o=Bl(e)?e:Da(e);if(xr(o)!==65)throw new Error("invalid signature length");const a=kc(`0x${o.slice(130)}`),c=$8(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function $8(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function KK({hash:t,signature:e}){return mbe(await bbe({hash:t,signature:e}))}function vbe(t,e="hex"){const n=YK(t),r=kL(new Uint8Array(n.length));return n.encode(r),e==="hex"?es(r.bytes):r.bytes}function YK(t){return Array.isArray(t)?Ebe(t.map(e=>YK(e))):Cbe(t)}function Ebe(t){const e=t.reduce((s,i)=>s+i.length,0),n=QK(e);return{length:e<=55?1+e:1+n+e,encode(s){e<=55?s.pushByte(192+e):(s.pushByte(247+n),n===1?s.pushUint8(e):n===2?s.pushUint16(e):n===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of t)i(s)}}}function Cbe(t){const e=typeof t=="string"?Ma(t):t,n=QK(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(183+n),n===1?s.pushUint8(e.length):n===2?s.pushUint16(e.length):n===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function QK(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new pe("Length is too large.")}function _be(t){const{chainId:e,nonce:n,to:r}=t,s=t.contractAddress??t.address,i=ks(ob(["0x05",vbe([e?et(e):"0x",s,n?et(n):"0x"])]));return r==="bytes"?Ma(i):i}async function JK(t){const{authorization:e,signature:n}=t;return KK({hash:_be(e),signature:n??e})}class Abe extends pe{constructor(e,{account:n,docsPath:r,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:d,value:h}){var p;const f=G_({from:n==null?void 0:n.address,to:d,value:typeof h<"u"&&`${DL(h)} ${((p=s==null?void 0:s.nativeCurrency)==null?void 0:p.symbol)||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${lo(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${lo(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${lo(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",f].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Ap extends pe{constructor({cause:e,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(Ap,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Ap,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Fx extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${lo(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Fx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class rD extends pe{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${lo(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(rD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class sD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(sD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class iD extends pe{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(iD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class oD extends pe{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(oD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class aD extends pe{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(aD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class cD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(cD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class lD extends pe{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(lD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class uD extends pe{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(uD,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class jx extends pe{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${lo(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${lo(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(jx,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class q_ extends pe{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function HN(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof pe?t.walk(s=>(s==null?void 0:s.code)===Ap.code):t;return r instanceof pe?new Ap({cause:t,message:r.details}):Ap.nodeMessage.test(n)?new Ap({cause:t,message:t.details}):Fx.nodeMessage.test(n)?new Fx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):rD.nodeMessage.test(n)?new rD({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):sD.nodeMessage.test(n)?new sD({cause:t,nonce:e==null?void 0:e.nonce}):iD.nodeMessage.test(n)?new iD({cause:t,nonce:e==null?void 0:e.nonce}):oD.nodeMessage.test(n)?new oD({cause:t,nonce:e==null?void 0:e.nonce}):aD.nodeMessage.test(n)?new aD({cause:t}):cD.nodeMessage.test(n)?new cD({cause:t,gas:e==null?void 0:e.gas}):lD.nodeMessage.test(n)?new lD({cause:t,gas:e==null?void 0:e.gas}):uD.nodeMessage.test(n)?new uD({cause:t}):jx.nodeMessage.test(n)?new jx({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new q_({cause:t})}function Sbe(t,{docsPath:e,...n}){const r=(()=>{const s=HN(t,n);return s instanceof q_?t:s})();return new Abe(r,{docsPath:e,...n})}function GN(t,{format:e}){if(!e)return{};const n={};function r(i){const o=Object.keys(i);for(const a of o)a in t&&(n[a]=t[a]),i[a]&&typeof i[a]=="object"&&!Array.isArray(i[a])&&r(i[a])}const s=e(t||{});return r(s),n}const xbe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function ab(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Ibe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>es(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=et(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=et(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=et(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=et(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=et(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=et(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=xbe[t.type]),typeof t.value<"u"&&(e.value=et(t.value)),e}function Ibe(t){return t.map(e=>({address:e.address,r:e.r?et(BigInt(e.r)):e.r,s:e.s?et(BigInt(e.s)):e.s,chainId:et(e.chainId),nonce:et(e.nonce),...typeof e.yParity<"u"?{yParity:et(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:et(e.v)}:{}}))}function F8(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new A8({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new A8({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Nbe(t){const{balance:e,nonce:n,state:r,stateDiff:s,code:i}=t,o={};if(i!==void 0&&(o.code=i),e!==void 0&&(o.balance=et(e)),n!==void 0&&(o.nonce=et(n)),r!==void 0&&(o.state=F8(r)),s!==void 0){if(o.state)throw new sbe;o.stateDiff=F8(s)}return o}function UL(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!La(n,{strict:!1}))throw new yf({address:n});if(e[n])throw new rbe({address:n});e[n]=Nbe(r)}return e}const Tbe=2n**256n-1n;function cm(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=t,o=e?Nr(e):void 0;if(o&&!La(o.address))throw new yf({address:o.address});if(i&&!La(i))throw new yf({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new obe;if(r&&r>Tbe)throw new Fx({maxFeePerGas:r});if(s&&r&&s>r)throw new jx({maxFeePerGas:r,maxPriorityFeePerGas:s})}class Rbe extends pe{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class BL extends pe{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Pbe extends pe{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${lo(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class ZK extends pe{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const XK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function eY(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?kc(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?kc(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?XK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=Obe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function Obe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function tY(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:eY(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Il(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:s}={}){var u,d,h;const i=r??"latest",o=s??!1,a=n!==void 0?et(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,o]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[a||i,o]},{dedupe:!!a}),!c)throw new ZK({blockHash:e,blockNumber:n});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.block)==null?void 0:h.format)||tY)(c)}async function $L(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function kbe(t,e){return nY(t,e)}async function nY(t,e){var i,o;const{block:n,chain:r=t.chain,request:s}=e||{};try{const a=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((o=r==null?void 0:r.fees)==null?void 0:o.defaultPriorityFee);if(typeof a=="function"){const l=n||await ut(t,Il,"getBlock")({}),u=await a({block:l,client:t,request:s});if(u===null)throw new Error;return u}if(typeof a<"u")return a;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return Qo(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):ut(t,Il,"getBlock")({}),ut(t,$L,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new BL;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Dbe(t,e){return dD(t,e)}async function dD(t,e){var h,f;const{block:n,chain:r=t.chain,request:s,type:i="eip1559"}=e||{},o=await(async()=>{var p,g;return typeof((p=r==null?void 0:r.fees)==null?void 0:p.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:s}):((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)??1.2})();if(o<1)throw new Rbe;const c=10**(((h=o.toString().split(".")[1])==null?void 0:h.length)??0),l=p=>p*BigInt(Math.ceil(o*c))/BigInt(c),u=n||await ut(t,Il,"getBlock")({});if(typeof((f=r==null?void 0:r.fees)==null?void 0:f.estimateFeesPerGas)=="function"){const p=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:l,request:s,type:i});if(p!==null)return p}if(i==="eip1559"){if(typeof u.baseFeePerGas!="bigint")throw new BL;const p=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await nY(t,{block:u,chain:r,request:s}),g=l(u.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??g+p,maxPriorityFeePerGas:p}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await ut(t,$L,"getGasPrice")({}))}}async function FL(t,{address:e,blockTag:n="latest",blockNumber:r}){const s=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?et(r):n]},{dedupe:!!r});return kc(s)}function rY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ma(i)):t.blobs,s=[];for(const i of r)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?s:s.map(i=>es(i))}function sY(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(o=>Ma(o)):t.blobs,s=typeof t.commitments[0]=="string"?t.commitments.map(o=>Ma(o)):t.commitments,i=[];for(let o=0;o<r.length;o++){const a=r[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return n==="bytes"?i:i.map(o=>es(o))}function Mbe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function Lbe(t,e,n){return t&e^~t&n}function Ube(t,e,n){return t&e^t&n^e&n}class Bbe extends IL{constructor(e,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(e),this.view=_P(this.buffer)}update(e){yw(this),e=F_(e),Dc(e);const{view:n,buffer:r,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=_P(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){yw(this),_K(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,ww(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;Mbe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=_P(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%n&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const Rd=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),$be=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Pd=new Uint32Array(64);let Fbe=class extends Bbe{constructor(e=32){super(64,e,8,!1),this.A=Rd[0]|0,this.B=Rd[1]|0,this.C=Rd[2]|0,this.D=Rd[3]|0,this.E=Rd[4]|0,this.F=Rd[5]|0,this.G=Rd[6]|0,this.H=Rd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Pd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Pd[d-15],f=Pd[d-2],p=zc(h,7)^zc(h,18)^h>>>3,g=zc(f,17)^zc(f,19)^f>>>10;Pd[d]=g+Pd[d-7]+p+Pd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=zc(a,6)^zc(a,11)^zc(a,25),f=u+h+Lbe(a,c,l)+$be[d]+Pd[d]|0,g=(zc(r,2)^zc(r,13)^zc(r,22))+Ube(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){ww(Pd)}destroy(){this.set(0,0,0,0,0,0,0,0),ww(this.buffer)}};const iY=SK(()=>new Fbe),jbe=iY;function Wbe(t,e){return jbe(Bl(t,{strict:!1})?ib(t):t)}function zbe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),s=Wbe(e);return s.set([n],0),r==="bytes"?s:es(s)}function Hbe(t){const{commitments:e,version:n}=t,r=t.to,s=[];for(const i of e)s.push(zbe({commitment:i,to:r,version:n}));return s}const j8=6,oY=32,jL=4096,aY=oY*jL,W8=aY*j8-1-1*jL*j8;class Gbe extends pe{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class qbe extends pe{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Vbe(t){const e=typeof t.data=="string"?Ma(t.data):t.data,n=xr(e);if(!n)throw new qbe;if(n>W8)throw new Gbe({maxSize:W8,size:n});const r=[];let s=!0,i=0;for(;s;){const o=kL(new Uint8Array(aY));let a=0;for(;a<jL;){const c=e.slice(i,i+(oY-1));if(o.pushByte(0),o.pushBytes(c),c.length<31){o.pushByte(128),s=!1;break}a++,i+=31}r.push(o)}return r.map(o=>es(o.bytes))}function Kbe(t){const{data:e,kzg:n,to:r}=t,s=t.blobs??Vbe({data:e}),i=t.commitments??rY({blobs:s,kzg:n,to:r}),o=t.proofs??sY({blobs:s,commitments:i,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Ybe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new abe({transaction:t})}async function cb(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return kc(e)}const cY=["blobVersionedHashes","chainId","fees","gas","nonce","type"],z8=new Map;async function V_(t,e){const{account:n=t.account,blobs:r,chain:s,gas:i,kzg:o,nonce:a,nonceManager:c,parameters:l=cY,type:u}=e,d=n&&Nr(n),h={...e,...d?{from:d==null?void 0:d.address}:{}};let f;async function p(){return f||(f=await ut(t,Il,"getBlock")({blockTag:"latest"}),f)}let g;async function w(){return g||(s?s.id:typeof e.chainId<"u"?e.chainId:(g=await ut(t,cb,"getChainId")({}),g))}if(l.includes("nonce")&&typeof a>"u"&&d)if(c){const m=await w();h.nonce=await c.consume({address:d.address,chainId:m,client:t})}else h.nonce=await ut(t,FL,"getTransactionCount")({address:d.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&o){const m=rY({blobs:r,kzg:o});if(l.includes("blobVersionedHashes")){const b=Hbe({commitments:m,to:"hex"});h.blobVersionedHashes=b}if(l.includes("sidecars")){const b=sY({blobs:r,commitments:m,kzg:o}),v=Kbe({blobs:r,commitments:m,proofs:b,to:"hex"});h.sidecars=v}}if(l.includes("chainId")&&(h.chainId=await w()),(l.includes("fees")||l.includes("type"))&&typeof u>"u")try{h.type=Ybe(h)}catch{let m=z8.get(t.uid);if(typeof m>"u"){const b=await p();m=typeof(b==null?void 0:b.baseFeePerGas)=="bigint",z8.set(t.uid,m)}h.type=m?"eip1559":"legacy"}if(l.includes("fees"))if(h.type!=="legacy"&&h.type!=="eip2930"){if(typeof h.maxFeePerGas>"u"||typeof h.maxPriorityFeePerGas>"u"){const m=await p(),{maxFeePerGas:b,maxPriorityFeePerGas:v}=await dD(t,{block:m,chain:s,request:h});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<v)throw new Pbe({maxPriorityFeePerGas:v});h.maxPriorityFeePerGas=v,h.maxFeePerGas=b}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new BL;if(typeof e.gasPrice>"u"){const m=await p(),{gasPrice:b}=await dD(t,{block:m,chain:s,request:h,type:"legacy"});h.gasPrice=b}}return l.includes("gas")&&typeof i>"u"&&(h.gas=await ut(t,qN,"estimateGas")({...h,account:d&&{address:d.address,type:"json-rpc"}})),cm(h),delete h.parameters,h}async function WL(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=typeof n=="bigint"?et(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,s||r]});return BigInt(i)}async function qN(t,e){var s,i,o;const{account:n=t.account}=e,r=n?Nr(n):void 0;try{let W=function(R){const{block:B,request:O,rpcStateOverride:M}=R;return t.request({method:"eth_estimateGas",params:M?[O,B??"latest",M]:B?[O,B]:[O]})};const{accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,blockNumber:d,blockTag:h,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,value:A,stateOverride:C,...T}=await V_(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),N=(typeof d=="bigint"?et(d):void 0)||h,S=UL(C),D=await(async()=>{if(T.to)return T.to;if(c&&c.length>0)return await JK({authorization:c[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`")})})();cm(e);const P=(o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionRequest)==null?void 0:o.format,G=(P||ab)({...GN(T,{format:P}),from:r==null?void 0:r.address,accessList:a,authorizationList:c,blobs:l,blobVersionedHashes:u,data:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:D,value:A});let I=BigInt(await W({block:N,request:G,rpcStateOverride:S}));if(c){const R=await WL(t,{address:G.from}),B=await Promise.all(c.map(async O=>{const{address:M}=O,j=await W({block:N,request:{authorizationList:void 0,data:f,from:r==null?void 0:r.address,to:M,value:et(R)},rpcStateOverride:S}).catch(()=>100000n);return 2n*BigInt(j)}));I+=B.reduce((O,M)=>O+M,0n)}return I}catch(a){throw Sbe(a,{...e,account:r,chain:t.chain})}}async function Qbe(t,e){const{abi:n,address:r,args:s,functionName:i,dataSuffix:o,...a}=e,c=Fa({abi:n,args:s,functionName:i});try{return await ut(t,qN,"estimateGas")({data:`${c}${o?o.replace("0x",""):""}`,to:r,...a})}catch(l){const u=a.account?Nr(a.account):void 0;throw Og(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:u==null?void 0:u.address})}}function VN(t,e){if(!La(t,{strict:!1}))throw new yf({address:t});if(!La(e,{strict:!1}))throw new yf({address:e});return t.toLowerCase()===e.toLowerCase()}const H8="/docs/contract/decodeEventLog";function zL(t){const{abi:e,data:n,strict:r,topics:s}=t,i=r??!0,[o,...a]=s;if(!o)throw new T0e({docsPath:H8});const c=e.find(g=>g.type==="event"&&o===FN(Oc(g)));if(!(c&&"name"in c)||c.type!=="event")throw new gK(o,{docsPath:H8});const{name:l,inputs:u}=c,d=u==null?void 0:u.some(g=>!("name"in g&&g.name)),h=d?[]:{},f=u.map((g,w)=>[g,w]).filter(([g])=>"indexed"in g&&g.indexed);for(let g=0;g<f.length;g++){const[w,m]=f[g],b=a[g];if(!b)throw new $N({abiItem:c,param:w});h[d?m:w.name||m]=Jbe({param:w,value:b})}const p=u.filter(g=>!("indexed"in g&&g.indexed));if(p.length>0){if(n&&n!=="0x")try{const g=H_(p,n);if(g)if(d)for(let w=0;w<u.length;w++)h[w]=h[w]??g.shift();else for(let w=0;w<p.length;w++)h[p[w].name]=g[w]}catch(g){if(i)throw g instanceof fK||g instanceof WK?new eC({abiItem:c,data:n,params:p,size:xr(n)}):g}else if(i)throw new eC({abiItem:c,data:"0x",params:p,size:0})}return{eventName:l,args:Object.values(h).length>0?h:void 0}}function Jbe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(H_([t],e)||[])[0]}function HL(t){const{abi:e,args:n,logs:r,strict:s=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(o=>{var a;try{const c=e.find(u=>u.type==="event"&&o.topics[0]===FN(u));if(!c)return null;const l=zL({...o,abi:[c],strict:s});return i&&!i.includes(l.eventName)||!Zbe({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...o}}catch(c){let l,u;if(c instanceof gK)return null;if(c instanceof eC||c instanceof $N){if(s)return null;l=c.abiItem.name,u=(a=c.abiItem.inputs)==null?void 0:a.some(d=>!("name"in d&&d.name))}return{...o,args:u?[]:{},eventName:l}}}).filter(Boolean)}function Zbe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function s(i,o,a){try{return i.type==="address"?VN(o,a):i.type==="string"||i.type==="bytes"?ks(ib(o))===a:o===a}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,o)=>{if(i==null)return!0;const a=n[o];return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,e[o])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,o])=>{if(o==null)return!0;const a=n.find(l=>l.name===i);return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,e[i])):!1}):!1}function od(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function GL(t,{address:e,blockHash:n,fromBlock:r,toBlock:s,event:i,events:o,args:a,strict:c}={}){const l=c??!1,u=o??(i?[i]:void 0);let d=[];u&&(d=[u.flatMap(g=>z_({abi:[g],eventName:g.name,args:o?void 0:a}))],i&&(d=d[0]));let h;n?h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,blockHash:n}]}):h=await t.request({method:"eth_getLogs",params:[{address:e,topics:d,fromBlock:typeof r=="bigint"?et(r):r,toBlock:typeof s=="bigint"?et(s):s}]});const f=h.map(p=>od(p));return u?HL({abi:u,args:a,logs:f,strict:l}):f}async function lY(t,e){const{abi:n,address:r,args:s,blockHash:i,eventName:o,fromBlock:a,toBlock:c,strict:l}=e,u=o?om({abi:n,name:o}):void 0,d=u?void 0:n.filter(h=>h.type==="event");return ut(t,GL,"getLogs")({address:r,args:s,blockHash:i,event:u,events:d,fromBlock:a,toBlock:c,strict:l})}const xP="/docs/contract/decodeFunctionResult";function lm(t){const{abi:e,args:n,functionName:r,data:s}=t;let i=e[0];if(r){const a=om({abi:e,args:n,name:r});if(!a)throw new gw(r,{docsPath:xP});i=a}if(i.type!=="function")throw new gw(void 0,{docsPath:xP});if(!i.outputs)throw new mK(i.name,{docsPath:xP});const o=H_(i.outputs,s);if(o&&o.length>1)return o;if(o&&o.length===1)return o[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qL=BigInt(0),hD=BigInt(1);function Wx(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function aA(t){const e=t.toString(16);return e.length&1?"0"+e:e}function uY(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?qL:BigInt("0x"+t)}function KN(t){return uY(nC(t))}function dY(t){return Dc(t),uY(nC(Uint8Array.from(t).reverse()))}function VL(t,e){return xL(t.toString(16).padStart(e*2,"0"))}function hY(t,e){return VL(t,e).reverse()}function ma(t,e,n){let r;if(typeof e=="string")try{r=xL(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(SL(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const IP=t=>typeof t=="bigint"&&qL<=t;function Xbe(t,e,n){return IP(t)&&IP(e)&&IP(n)&&e<=t&&t<n}function eve(t,e,n,r){if(!Xbe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function tve(t){let e;for(e=0;t>qL;t>>=hD,e+=1);return e}const YN=t=>(hD<<BigInt(t))-hD;function nve(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=f=>new Uint8Array(f),s=f=>Uint8Array.of(f);let i=r(t),o=r(t),a=0;const c=()=>{i.fill(1),o.fill(0),a=0},l=(...f)=>n(o,i,...f),u=(f=r(0))=>{o=l(s(0),f),i=l(),f.length!==0&&(o=l(s(1),f),i=l())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const p=[];for(;f<e;){i=l();const g=i.slice();p.push(g),f+=i.length}return Cp(...p)};return(f,p)=>{c(),u(f);let g;for(;!(g=p(d()));)u();return c(),g}}function KL(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function r(s,i,o){const a=t[s];if(o&&a===void 0)return;const c=typeof a;if(c!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${c}`)}Object.entries(e).forEach(([s,i])=>r(s,i,!1)),Object.entries(n).forEach(([s,i])=>r(s,i,!0))}function G8(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const rve="0.1.1";function sve(){return rve}let Mr=class fD extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof fD){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof fD&&n.cause.docsPath||n.docsPath,o=`https://oxlib.sh${s??""}`,a=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${o}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${sve()}`}),this.cause=n.cause,this.details=r,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return fY(this,e)}};function fY(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?fY(t.cause,e):e?null:t}const ive="#__bigint";function ove(t,e,n){return JSON.stringify(t,(r,s)=>typeof s=="bigint"?s.toString()+ive:s,n)}function ave(t,e){if(V8(t)>e)throw new yve({givenSize:V8(t),maxSize:e})}const tu={zero:48,nine:57,A:65,F:70,a:97,f:102};function q8(t){if(t>=tu.zero&&t<=tu.nine)return t-tu.zero;if(t>=tu.A&&t<=tu.F)return t-(tu.A-10);if(t>=tu.a&&t<=tu.f)return t-(tu.a-10)}function cve(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new wve({size:t.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let i=0;i<r;i++){const o=n==="right";s[o?i:r-i-1]=t[o?i:t.length-i-1]}return s}function YL(t,e){if(Ba(t)>e)throw new _ve({givenSize:Ba(t),maxSize:e})}function lve(t,e){if(typeof e=="number"&&e>0&&e>Ba(t)-1)throw new wY({offset:e,position:"start",size:Ba(t)})}function uve(t,e,n){if(typeof e=="number"&&typeof n=="number"&&Ba(t)!==n-e)throw new wY({offset:n,position:"end",size:Ba(t)})}function pY(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const s=t.replace("0x","");if(s.length>r*2)throw new Ave({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const dve=new TextEncoder;function hve(t){return t instanceof Uint8Array?t:typeof t=="string"?pve(t):fve(t)}function fve(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function pve(t,e={}){const{size:n}=e;let r=t;n&&(YL(t,n),r=Dg(t,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let a=0,c=0;a<i;a++){const l=q8(s.charCodeAt(c++)),u=q8(s.charCodeAt(c++));if(l===void 0||u===void 0)throw new Mr(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);o[a]=l*16+u}return o}function gve(t,e={}){const{size:n}=e,r=dve.encode(t);return typeof n=="number"?(ave(r,n),mve(r,n)):r}function mve(t,e){return cve(t,{dir:"right",size:e})}function V8(t){return t.length}let yve=class extends Mr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},wve=class extends Mr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const bve=new TextEncoder,vve=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Eve(t,e={}){const{strict:n=!1}=e;if(!t)throw new K8(t);if(typeof t!="string")throw new K8(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new Y8(t);if(!t.startsWith("0x"))throw new Y8(t)}function Fl(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function gY(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(YL(n,e.size),kg(n,e.size)):n}function mY(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=vve[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(YL(r,e.size),Dg(r,e.size)):r}function mi(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const l=typeof t=="bigint"?"n":"";throw new yY({max:i?`${i}${l}`:void 0,min:`${o}${l}`,signed:n,size:r,value:`${t}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?kg(c,r):c}function QL(t,e={}){return mY(bve.encode(t),e)}function kg(t,e){return pY(t,{dir:"left",size:e})}function Dg(t,e){return pY(t,{dir:"right",size:e})}function JL(t,e,n,r={}){const{strict:s}=r;lve(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return s&&uve(i,e,n),i}function Ba(t){return Math.ceil((t.length-2)/2)}function Cve(t,e={}){const{strict:n=!1}=e;try{return Eve(t,{strict:n}),!0}catch{return!1}}let yY=class extends Mr{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number \`${i}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}};class K8 extends Mr{constructor(e){super(`Value \`${typeof e=="object"?ove(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Y8 extends Mr{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let _ve=class extends Mr{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class wY extends Mr{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Ave=class extends Mr{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};function Sve(t){return{address:t.address,amount:mi(t.amount),index:mi(t.index),validatorIndex:mi(t.validatorIndex)}}function bY(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:mi(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:mi(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:mi(t.gasLimit)},...typeof t.number=="bigint"&&{number:mi(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:mi(t.prevRandao)},...typeof t.time=="bigint"&&{time:mi(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(Sve)}}}const pD=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],gD=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],vY=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],EY=[...vY,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],xve=[...vY,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],Q8=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],J8=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Z8=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Ive="0x82ad56cb",CY="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Nve="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Tve="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class mD extends pe{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Rve extends pe{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class Pve extends pe{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class _Y extends pe{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const NP="/docs/contract/encodeDeployData";function QN(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const s=e.find(o=>"type"in o&&o.type==="constructor");if(!s)throw new A0e({docsPath:NP});if(!("inputs"in s))throw new E8({docsPath:NP});if(!s.inputs||s.inputs.length===0)throw new E8({docsPath:NP});const i=Pf(s.inputs,n);return ob([r,i])}function lb({blockNumber:t,chain:e,contract:n}){var s;const r=(s=e==null?void 0:e.contracts)==null?void 0:s[n];if(!r)throw new mD({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new mD({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function AY(t,{docsPath:e,...n}){const r=(()=>{const s=HN(t,n);return s instanceof q_?t:s})();return new qK(r,{docsPath:e,...n})}function ZL(){let t=()=>{},e=()=>{};return{promise:new Promise((r,s)=>{t=r,e=s}),resolve:t,reject:e}}const TP=new Map;function SY({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const u=c();o();const d=u.map(({args:h})=>h);d.length!==0&&t(d).then(h=>{s&&Array.isArray(h)&&h.sort(s);for(let f=0;f<u.length;f++){const{resolve:p}=u[f];p==null||p([h[f],h])}}).catch(h=>{for(let f=0;f<u.length;f++){const{reject:p}=u[f];p==null||p(h)}})},o=()=>TP.delete(e),a=()=>c().map(({args:u})=>u),c=()=>TP.get(e)||[],l=u=>TP.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:d,resolve:h,reject:f}=ZL();return(n==null?void 0:n([...a(),u]))&&i(),c().length>0?(l({args:u,resolve:h,reject:f}),d):(l({args:u,resolve:h,reject:f}),setTimeout(i,r),d)}}}async function K_(t,e){var G,W,I,R;const{account:n=t.account,authorizationList:r,batch:s=!!((G=t.batch)!=null&&G.multicall),blockNumber:i,blockTag:o="latest",accessList:a,blobs:c,blockOverrides:l,code:u,data:d,factory:h,factoryData:f,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:A,value:C,stateOverride:T,...x}=e,N=n?Nr(n):void 0;if(u&&(h||f))throw new pe("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(u&&A)throw new pe("Cannot provide both `code` & `to` as parameters.");const S=u&&d,D=h&&f&&A&&d,P=S||D,$=S?Dve({code:u,data:d}):D?Mve({data:d,factory:h,factoryData:f,to:A}):d;try{cm(e);const O=(typeof i=="bigint"?et(i):void 0)||o,M=l?bY(l):void 0,j=UL(T),V=(R=(I=(W=t.chain)==null?void 0:W.formatters)==null?void 0:I.transactionRequest)==null?void 0:R.format,Z=(V||ab)({...GN(x,{format:V}),from:N==null?void 0:N.address,accessList:a,authorizationList:r,blobs:c,data:$,gas:p,gasPrice:g,maxFeePerBlobGas:w,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:v,to:P?void 0:A,value:C});if(s&&Ove({request:Z})&&!j&&!M)try{return await kve(t,{...Z,blockNumber:i,blockTag:o})}catch(ge){if(!(ge instanceof _Y)&&!(ge instanceof mD))throw ge}const X=(()=>{const ge=[Z,O];return j&&M?[...ge,j,M]:j?[...ge,j]:M?[...ge,{},M]:ge})(),ce=await t.request({method:"eth_call",params:X});return ce==="0x"?{data:void 0}:{data:ce}}catch(B){const O=Lve(B),{offchainLookup:M,offchainLookupSignature:j}=await Js(async()=>{const{offchainLookup:V,offchainLookupSignature:te}=await import("./ccip-DVUNgEAG.js");return{offchainLookup:V,offchainLookupSignature:te}},[]);if(t.ccipRead!==!1&&(O==null?void 0:O.slice(0,10))===j&&A)return{data:await M(t,{data:O,to:A})};throw P&&(O==null?void 0:O.slice(0,10))==="0x101bb98d"?new hbe({factory:h}):AY(B,{...e,account:N,chain:t.chain})}}function Ove({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(Ive)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function kve(t,e){var g;const{batchSize:n=1024,wait:r=0}=typeof((g=t.batch)==null?void 0:g.multicall)=="object"?t.batch.multicall:{},{blockNumber:s,blockTag:i="latest",data:o,multicallAddress:a,to:c}=e;let l=a;if(!l){if(!t.chain)throw new _Y;l=lb({blockNumber:s,chain:t.chain,contract:"multicall3"})}const d=(typeof s=="bigint"?et(s):void 0)||i,{schedule:h}=SY({id:`${t.uid}.${d}`,wait:r,shouldSplitBatch(w){return w.reduce((b,{data:v})=>b+(v.length-2),0)>n*2},fn:async w=>{const m=w.map(A=>({allowFailure:!0,callData:A.data,target:A.to})),b=Fa({abi:pD,args:[m],functionName:"aggregate3"}),v=await t.request({method:"eth_call",params:[{data:b,to:l},d]});return lm({abi:pD,args:[m],functionName:"aggregate3",data:v||"0x"})}}),[{returnData:f,success:p}]=await h({data:o,to:c});if(!p)throw new zN({data:f});return f==="0x"?{data:void 0}:{data:f}}function Dve(t){const{code:e,data:n}=t;return QN({abi:uK(["constructor(bytes, bytes)"]),bytecode:CY,args:[e,n]})}function Mve(t){const{data:e,factory:n,factoryData:r,to:s}=t;return QN({abi:uK(["constructor(address, bytes, address, bytes)"]),bytecode:Nve,args:[s,e,n,r]})}function Lve(t){var n;if(!(t instanceof pe))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function jl(t,e){const{abi:n,address:r,args:s,functionName:i,...o}=e,a=Fa({abi:n,args:s,functionName:i});try{const{data:c}=await ut(t,K_,"call")({...o,data:a,to:r});return lm({abi:n,args:s,functionName:i,data:c||"0x"})}catch(c){throw Og(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Uve(t,e){const{abi:n,address:r,args:s,dataSuffix:i,functionName:o,...a}=e,c=a.account?Nr(a.account):t.account,l=Fa({abi:n,args:s,functionName:o});try{const{data:u}=await ut(t,K_,"call")({batch:!1,data:`${l}${i?i.replace("0x",""):""}`,to:r,...a,account:c}),d=lm({abi:n,args:s,functionName:o,data:u||"0x"}),h=n.filter(f=>"name"in f&&f.name===e.functionName);return{result:d,request:{abi:h,address:r,args:s,dataSuffix:i,functionName:o,...a,account:c}}}catch(u){throw Og(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:o,sender:c==null?void 0:c.address})}}const RP=new Map,X8=new Map;let Bve=0;function ad(t,e,n){const r=++Bve,s=()=>RP.get(t)||[],i=()=>{const u=s();RP.set(t,u.filter(d=>d.id!==r))},o=()=>{const u=s();if(!u.some(h=>h.id===r))return;const d=X8.get(t);if(u.length===1&&d){const h=d();h instanceof Promise&&h.catch(()=>{})}i()},a=s();if(RP.set(t,[...a,{id:r,fns:e}]),a&&a.length>0)return o;const c={};for(const u in e)c[u]=(...d)=>{var f,p;const h=s();if(h.length!==0)for(const g of h)(p=(f=g.fns)[u])==null||p.call(f,...d)};const l=n(c);return typeof l=="function"&&X8.set(t,l),o}async function zx(t){return new Promise(e=>setTimeout(e,t))}function ub(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let s=!0;const i=()=>s=!1;return(async()=>{let a;e&&(a=await t({unpoll:i}));const c=await(n==null?void 0:n(a))??r;await zx(c);const l=async()=>{s&&(await t({unpoll:i}),await zx(r),l())};l()})(),i}const $ve=new Map,Fve=new Map;function jve(t){const e=(s,i)=>({clear:()=>i.delete(s),get:()=>i.get(s),set:o=>i.set(s,o)}),n=e(t,$ve),r=e(t,Fve);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function Wve(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=jve(e),s=r.response.get();if(s&&n>0&&new Date().getTime()-s.created.getTime()<n)return s.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const o=await i;return r.response.set({created:new Date,data:o}),o}finally{r.promise.clear()}}const zve=t=>`blockNumber.${t}`;async function Y_(t,{cacheTime:e=t.cacheTime}={}){const n=await Wve(()=>t.request({method:"eth_blockNumber"}),{cacheKey:zve(t.uid),cacheTime:e});return BigInt(n)}async function JN(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const s=r.map(i=>od(i));return!("abi"in e)||!e.abi?s:HL({abi:e.abi,logs:s,strict:n})}async function ZN(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function Hve(t,e){const{abi:n,address:r,args:s,batch:i=!0,eventName:o,fromBlock:a,onError:c,onLogs:l,poll:u,pollingInterval:d=t.pollingInterval,strict:h}=e;return(typeof u<"u"?u:typeof a=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")))?(()=>{const w=h??!1,m=Zr(["watchContractEvent",r,s,i,t.uid,o,d,w,a]);return ad(m,{onLogs:l,onError:c},b=>{let v;a!==void 0&&(v=a-1n);let A,C=!1;const T=ub(async()=>{var x;if(!C){try{A=await ut(t,$K,"createContractEventFilter")({abi:n,address:r,args:s,eventName:o,strict:w,fromBlock:a})}catch{}C=!0;return}try{let N;if(A)N=await ut(t,JN,"getFilterChanges")({filter:A});else{const S=await ut(t,Y_,"getBlockNumber")({});v&&v<S?N=await ut(t,lY,"getContractEvents")({abi:n,address:r,args:s,eventName:o,fromBlock:v+1n,toBlock:S,strict:w}):N=[],v=S}if(N.length===0)return;if(i)b.onLogs(N);else for(const S of N)b.onLogs([S])}catch(N){A&&N instanceof Pg&&(C=!1),(x=b.onError)==null||x.call(b,N)}},{emitOnBegin:!0,interval:d});return async()=>{A&&await ut(t,ZN,"uninstallFilter")({filter:A}),T()}})})():(()=>{const w=h??!1,m=Zr(["watchContractEvent",r,s,i,t.uid,o,d,w]);let b=!0,v=()=>b=!1;return ad(m,{onLogs:l,onError:c},A=>((async()=>{try{const C=(()=>{if(t.transport.type==="fallback"){const N=t.transport.transports.find(S=>S.config.type==="webSocket"||S.config.type==="ipc");return N?N.value:t.transport}return t.transport})(),T=o?z_({abi:n,eventName:o,args:s}):[],{unsubscribe:x}=await C.subscribe({params:["logs",{address:r,topics:T}],onData(N){var D;if(!b)return;const S=N.result;try{const{eventName:P,args:$}=zL({abi:n,data:S.data,topics:S.topics,strict:h}),G=od(S,{args:$,eventName:P});A.onLogs([G])}catch(P){let $,G;if(P instanceof eC||P instanceof $N){if(h)return;$=P.abiItem.name,G=(D=P.abiItem.inputs)==null?void 0:D.some(I=>!("name"in I&&I.name))}const W=od(S,{args:G?[]:{},eventName:$});A.onLogs([W])}},onError(N){var S;(S=A.onError)==null||S.call(A,N)}});v=x,b||v()}catch(C){c==null||c(C)}})(),()=>v()))})()}class um extends pe{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class pS extends pe{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function xY({chain:t,currentChainId:e}){if(!t)throw new Pve;if(e!==t.id)throw new Rve({chain:t,currentChainId:e})}function IY(t,{docsPath:e,...n}){const r=(()=>{const s=HN(t,n);return s instanceof q_?t:s})();return new cbe(r,{docsPath:e,...n})}async function XL(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const PP=new jN(128);async function Q_(t,e){var b,v,A,C;const{account:n=t.account,chain:r=t.chain,accessList:s,authorizationList:i,blobs:o,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,type:p,value:g,...w}=e;if(typeof n>"u")throw new um({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?Nr(n):null;try{cm(e);const T=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await JK({authorization:i[0]}).catch(()=>{throw new pe("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let x;r!==null&&(x=await ut(t,cb,"getChainId")({}),xY({currentChainId:x,chain:r}));const N=(A=(v=(b=t.chain)==null?void 0:b.formatters)==null?void 0:v.transactionRequest)==null?void 0:A.format,D=(N||ab)({...GN(w,{format:N}),accessList:s,authorizationList:i,blobs:o,chainId:x,data:a,from:m==null?void 0:m.address,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,to:T,type:p,value:g}),P=PP.get(t.uid),$=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:$,params:[D]},{retryCount:0})}catch(G){if(P===!1)throw G;const W=G;if(W.name==="InvalidInputRpcError"||W.name==="InvalidParamsRpcError"||W.name==="MethodNotFoundRpcError"||W.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[D]},{retryCount:0}).then(I=>(PP.set(t.uid,!0),I)).catch(I=>{const R=I;throw R.name==="MethodNotFoundRpcError"||R.name==="MethodNotSupportedRpcError"?(PP.set(t.uid,!1),W):R});throw W}}if((m==null?void 0:m.type)==="local"){const x=await ut(t,V_,"prepareTransactionRequest")({account:m,accessList:s,authorizationList:i,blobs:o,chain:r,data:a,gas:c,gasPrice:l,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:f,nonceManager:m.nonceManager,parameters:[...cY,"sidecars"],type:p,value:g,...w,to:T}),N=(C=r==null?void 0:r.serializers)==null?void 0:C.transaction,S=await m.signTransaction(x,{serializer:N});return await ut(t,XL,"sendRawTransaction")({serializedTransaction:S})}throw(m==null?void 0:m.type)==="smart"?new pS({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new pS({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(T){throw T instanceof pS?T:IY(T,{...e,account:m,chain:e.chain||void 0})}}async function NY(t,e){const{abi:n,account:r=t.account,address:s,args:i,dataSuffix:o,functionName:a,...c}=e;if(typeof r>"u")throw new um({docsPath:"/docs/contract/writeContract"});const l=r?Nr(r):null,u=Fa({abi:n,args:i,functionName:a});try{return await ut(t,Q_,"sendTransaction")({data:`${u}${o?o.replace("0x",""):""}`,to:s,account:l,...c})}catch(d){throw Og(d,{abi:n,address:s,args:i,docsPath:"/docs/contract/writeContract",functionName:a,sender:l==null?void 0:l.address})}}const TY={"0x0":"reverted","0x1":"success"};function Gve(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>od(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?kc(t.transactionIndex):null,status:t.status?TY[t.status]:null,type:t.type?XK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const RY="0x5792579257925792579257925792579257925792579257925792579257925792",PY=et(0,{size:32});async function qve(t,e){const{account:n=t.account,capabilities:r,chain:s=t.chain,experimental_fallback:i,experimental_fallbackDelay:o=32,forceAtomic:a=!1,id:c,version:l="2.0.0"}=e,u=n?Nr(n):null,d=e.calls.map(h=>{const f=h,p=f.abi?Fa({abi:f.abi,functionName:f.functionName,args:f.args}):f.data;return{data:f.dataSuffix&&p?Ua([p,f.dataSuffix]):p,to:f.to,value:f.value?et(f.value):void 0}});try{const h=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:a,calls:d,capabilities:r,chainId:et(s.id),from:u==null?void 0:u.address,id:c,version:l}]},{retryCount:0});return typeof h=="string"?{id:h}:h}catch(h){const f=h;if(i&&(f.name==="MethodNotFoundRpcError"||f.name==="MethodNotSupportedRpcError"||f.name==="UnknownRpcError"||f.details.toLowerCase().includes("does not exist / is not available")||f.details.toLowerCase().includes("missing or invalid. request()")||f.details.toLowerCase().includes("did not match any variant of untagged enum")||f.details.toLowerCase().includes("account upgraded to unsupported contract")||f.details.toLowerCase().includes("eip-7702 not supported")||f.details.toLowerCase().includes("unsupported wc_ method"))){if(r&&Object.values(r).some(b=>!b.optional)){const b="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new Cw(new pe(b,{details:b}))}if(a&&d.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new _w(new pe(m,{details:m}))}const p=[];for(const m of d){const b=Q_(t,{account:u,chain:s,data:m.data,to:m.to,value:m.value?Qo(m.value):void 0});p.push(b),o>0&&await new Promise(v=>setTimeout(v,o))}const g=await Promise.allSettled(p);if(g.every(m=>m.status==="rejected"))throw g[0].reason;const w=g.map(m=>m.status==="fulfilled"?m.value:PY);return{id:Ua([...w,et(s.id,{size:32}),RY])}}throw IY(h,{...e,account:u,chain:e.chain})}}async function OY(t,e){async function n(u){if(u.endsWith(RY.slice(2))){const h=kl($x(u,-64,-32)),f=$x(u,0,-64).slice(2).match(/.{1,64}/g),p=await Promise.all(f.map(w=>PY.slice(2)!==w?t.request({method:"eth_getTransactionReceipt",params:[`0x${w}`]},{dedupe:!0}):void 0)),g=p.some(w=>w===null)?100:p.every(w=>(w==null?void 0:w.status)==="0x1")?200:p.every(w=>(w==null?void 0:w.status)==="0x0")?500:600;return{atomic:!1,chainId:kc(h),receipts:p.filter(Boolean),status:g,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[u]})}const{atomic:r=!1,chainId:s,receipts:i,version:o="2.0.0",...a}=await n(e.id),[c,l]=(()=>{const u=a.status;return u>=100&&u<200?["pending",u]:u>=200&&u<300?["success",u]:u>=300&&u<700?["failure",u]:u==="CONFIRMED"?["success",200]:u==="PENDING"?["pending",100]:[void 0,u]})();return{...a,atomic:r,chainId:s?kc(s):void 0,receipts:(i==null?void 0:i.map(u=>({...u,blockNumber:Qo(u.blockNumber),gasUsed:Qo(u.gasUsed),status:TY[u.status]})))??[],statusCode:l,status:c,version:o}}async function Vve(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:s=({statusCode:h})=>h>=200,timeout:i=6e4}=e,o=Zr(["waitForCallsStatus",t.uid,n]),{promise:a,resolve:c,reject:l}=ZL();let u;const d=ad(o,{resolve:c,reject:l},h=>{const f=ub(async()=>{const p=g=>{clearTimeout(u),f(),g(),d()};try{const g=await OY(t,{id:n});if(!s(g))return;p(()=>h.resolve(g))}catch(g){p(()=>h.reject(g))}},{interval:r,emitOnBegin:!0});return f});return u=i?setTimeout(()=>{d(),clearTimeout(u),l(new Kve({id:n}))},i):void 0,await a}class Kve extends pe{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const yD=256;let cA=yD,lA;function kY(t=11){if(!lA||cA+t>yD*2){lA="",cA=0;for(let e=0;e<yD;e++)lA+=(256+Math.random()*256|0).toString(16).substring(1)}return lA.substring(cA,cA+++t)}function DY(t){const{batch:e,chain:n,ccipRead:r,key:s="base",name:i="Base Client",type:o="base"}=t,a=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(a/2),500),4e3),l=t.pollingInterval??c,u=t.cacheTime??l,d=t.account?Nr(t.account):void 0,{config:h,request:f,value:p}=t.transport({chain:n,pollingInterval:l}),g={...h,...p},w={account:d,batch:e,cacheTime:u,ccipRead:r,chain:n,key:s,name:i,pollingInterval:l,request:f,transport:g,type:o,uid:kY()};function m(b){return v=>{const A=v(b);for(const T in w)delete A[T];const C={...b,...A};return Object.assign(C,{extend:m(C)})}}return Object.assign(w,{extend:m(w)})}const uA=new jN(8192);function Yve(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(uA.get(n))return uA.get(n);const r=t().finally(()=>uA.delete(n));return uA.set(n,r),r}function Hx(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await zx(u),o({count:a+1})};try{const l=await t();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});i(l)}};o()})}function Qve(t,e={}){return async(n,r={})=>{var d;const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...r},{method:l}=n;if((d=i==null?void 0:i.exclude)!=null&&d.includes(l))throw new _p(new Error("method not supported"),{method:l});if(i!=null&&i.include&&!i.include.includes(l))throw new _p(new Error("method not supported"),{method:l});const u=s?mw(`${c}.${Zr(n)}`):void 0;return Yve(()=>Hx(async()=>{try{return await t(n)}catch(h){const f=h;switch(f.code){case sC.code:throw new sC(f);case iC.code:throw new iC(f);case oC.code:throw new oC(f,{method:n.method});case aC.code:throw new aC(f);case Rg.code:throw new Rg(f);case Pg.code:throw new Pg(f);case cC.code:throw new cC(f);case ef.code:throw new ef(f);case vw.code:throw new vw(f);case _p.code:throw new _p(f,{method:n.method});case Ew.code:throw new Ew(f);case lC.code:throw new lC(f);case Hr.code:throw new Hr(f);case uC.code:throw new uC(f);case dC.code:throw new dC(f);case hC.code:throw new hC(f);case fC.code:throw new fC(f);case $l.code:throw new $l(f);case Cw.code:throw new Cw(f);case pC.code:throw new pC(f);case gC.code:throw new gC(f);case mC.code:throw new mC(f);case yC.code:throw new yC(f);case wC.code:throw new wC(f);case _w.code:throw new _w(f);case 5e3:throw new Hr(f);default:throw h instanceof pe?h:new pbe(f)}}},{delay:({count:h,error:f})=>{var p;if(f&&f instanceof rE){const g=(p=f==null?void 0:f.headers)==null?void 0:p.get("Retry-After");if(g!=null&&g.match(/\d/))return Number.parseInt(g)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>Jve(h)}),{enabled:s,id:u})}}function Jve(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===Ew.code||t.code===Rg.code:t instanceof rE&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function eU({key:t,methods:e,name:n,request:r,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=kY();return{config:{key:t,methods:e,name:n,request:r,retryCount:s,retryDelay:i,timeout:o,type:a},request:Qve(r,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}function Zve(t,e={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:i}=e;return({retryCount:o})=>eU({key:n,methods:r,name:s,request:t.request.bind(t),retryCount:e.retryCount??o,retryDelay:i,type:"custom"})}function Gx(t,e={}){const{key:n="fallback",name:r="Fallback",rank:s=!1,shouldThrow:i=Xve,retryCount:o,retryDelay:a}=e;return({chain:c,pollingInterval:l=4e3,timeout:u,...d})=>{let h=t,f=()=>{};const p=eU({key:n,name:r,async request({method:g,params:w}){let m;const b=async(v=0)=>{const A=h[v]({...d,chain:c,retryCount:0,timeout:u});try{const C=await A.request({method:g,params:w});return f({method:g,params:w,response:C,transport:A,status:"success"}),C}catch(C){if(f({error:C,method:g,params:w,transport:A,status:"error"}),i(C)||v===h.length-1||(m??(m=h.slice(v+1).some(T=>{const{include:x,exclude:N}=T({chain:c}).config.methods||{};return x?x.includes(g):N?!N.includes(g):!0})),!m))throw C;return b(v+1)}};return b()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:g=>f=g,transports:h.map(g=>g({chain:c,retryCount:0}))});if(s){const g=typeof s=="object"?s:{};eEe({chain:c,interval:g.interval??l,onTransports:w=>h=w,ping:g.ping,sampleCount:g.sampleCount,timeout:g.timeout,transports:h,weights:g.weights})}return p}}function Xve(t){return!!("code"in t&&typeof t.code=="number"&&(t.code===vw.code||t.code===Hr.code||Ap.nodeMessage.test(t.message)||t.code===5e3))}function eEe({chain:t,interval:e=4e3,onTransports:n,ping:r,sampleCount:s=10,timeout:i=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],d=async()=>{const h=await Promise.all(o.map(async g=>{const w=g({chain:t,retryCount:0,timeout:i}),m=Date.now();let b,v;try{await(r?r({transport:w}):w.request({method:"net_listening"})),v=1}catch{v=0}finally{b=Date.now()}return{latency:b-m,success:v}}));u.push(h),u.length>s&&u.shift();const f=Math.max(...u.map(g=>Math.max(...g.map(({latency:w})=>w)))),p=o.map((g,w)=>{const m=u.map(T=>T[w].latency),v=1-m.reduce((T,x)=>T+x,0)/m.length/f,A=u.map(T=>T[w].success),C=A.reduce((T,x)=>T+x,0)/A.length;return C===0?[0,w]:[l*v+c*C,w]}).sort((g,w)=>w[0]-g[0]);n(p.map(([,g])=>o[g])),await zx(e),d()};d()}class tEe extends pe{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function MY(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;n>0&&(o=setTimeout(()=>{r?a.abort():i(e)},n)),s(await t({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function nEe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const e4=nEe();function rEe(t,e={}){return{async request(n){var d;const{body:r,onRequest:s=e.onRequest,onResponse:i=e.onResponse,timeout:o=e.timeout??1e4}=n,a={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const h=await MY(async({signal:p})=>{const g={...a,body:Array.isArray(r)?Zr(r.map(v=>({jsonrpc:"2.0",id:v.id??e4.take(),...v}))):Zr({jsonrpc:"2.0",id:r.id??e4.take(),...r}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?p:null)},w=new Request(t,g),m=await(s==null?void 0:s(w,g))??{...g,url:t};return await fetch(m.url??t,m)},{errorInstance:new U8({body:r,url:t}),timeout:o,signal:!0});i&&await i(h);let f;if((d=h.headers.get("Content-Type"))!=null&&d.startsWith("application/json"))f=await h.json();else{f=await h.text();try{f=JSON.parse(f||"{}")}catch(p){if(h.ok)throw p;f={error:f}}}if(!h.ok)throw new rE({body:r,details:Zr(f.error)||h.statusText,headers:h.headers,status:h.status,url:t});return f}catch(h){throw h instanceof rE||h instanceof U8?h:new rE({body:r,cause:h,url:t})}}}}function Ta(t,e={}){const{batch:n,fetchOptions:r,key:s="http",methods:i,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=e;return({chain:d,retryCount:h,timeout:f})=>{const{batchSize:p=1e3,wait:g=0}=typeof n=="object"?n:{},w=e.retryCount??h,m=f??e.timeout??1e4,b=t||(d==null?void 0:d.rpcUrls.default.http[0]);if(!b)throw new tEe;const v=rEe(b,{fetchOptions:r,onRequest:a,onResponse:c,timeout:m});return eU({key:s,methods:i,name:o,async request({method:A,params:C}){const T={method:A,params:C},{schedule:x}=SY({id:b,wait:g,shouldSplitBatch(P){return P.length>p},fn:P=>v.request({body:P}),sort:(P,$)=>P.id-$.id}),N=async P=>n?x(P):[await v.request({body:P})],[{error:S,result:D}]=await N(T);if(u)return{error:S,result:D};if(S)throw new LL({body:T,error:S,url:b});return D},retryCount:w,retryDelay:l,timeout:m,type:"http"},{fetchOptions:r,url:b})}}function tU(t,e){var r,s,i,o,a,c;if(!(t instanceof pe))return!1;const n=t.walk(l=>l instanceof nD);return n instanceof nD?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((s=n.data)==null?void 0:s.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((o=n.data)==null?void 0:o.errorName)==="ResolverError"||((a=n.data)==null?void 0:a.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===FK[50]):!1}function sEe(t){const{abi:e,data:n}=t,r=bw(n,0,4),s=e.find(i=>i.type==="function"&&r===W_(Oc(i)));if(!s)throw new R0e(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?H_(s.inputs,bw(n,4)):void 0}}const OP="/docs/contract/encodeErrorResult";function t4(t){const{abi:e,errorName:n,args:r}=t;let s=e[0];if(n){const c=om({abi:e,args:r,name:n});if(!c)throw new C8(n,{docsPath:OP});s=c}if(s.type!=="error")throw new C8(void 0,{docsPath:OP});const i=Oc(s),o=W_(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new N0e(s.name,{docsPath:OP});a=Pf(s.inputs,r)}return ob([o,a])}const kP="/docs/contract/encodeFunctionResult";function iEe(t){const{abi:e,functionName:n,result:r}=t;let s=e[0];if(n){const o=om({abi:e,name:n});if(!o)throw new gw(n,{docsPath:kP});s=o}if(s.type!=="function")throw new gw(void 0,{docsPath:kP});if(!s.outputs)throw new mK(s.name,{docsPath:kP});const i=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new yK(r)})();return Pf(s.outputs,i)}const nU="x-batch-gateway:true";async function oEe(t){const{data:e,ccipRequest:n}=t,{args:[r]}=sEe({abi:gD,data:e}),s=[],i=[];return await Promise.all(r.map(async(o,a)=>{try{i[a]=o.urls.includes(nU)?await oEe({data:o.data,ccipRequest:n}):await n(o),s[a]=!1}catch(c){s[a]=!0,i[a]=aEe(c)}})),iEe({abi:gD,functionName:"query",result:[s,i]})}function aEe(t){return t.name==="HttpRequestError"&&t.status?t4({abi:gD,errorName:"HttpError",args:[t.status,t.shortMessage]}):t4({abi:[jK],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function LY(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return Bl(e)?e:null}function gS(t){let e=new Uint8Array(32).fill(0);if(!t)return es(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const s=LY(n[r]),i=s?ib(s):ks(dg(n[r]),"bytes");e=ks(Ua([e,i]),"bytes")}return es(e)}function cEe(t){return`[${t.slice(2)}]`}function lEe(t){const e=new Uint8Array(32).fill(0);return t?LY(t)||ks(dg(t)):es(e)}function XN(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(dg(e).byteLength+2);let r=0;const s=e.split(".");for(let i=0;i<s.length;i++){let o=dg(s[i]);o.byteLength>255&&(o=dg(cEe(lEe(s[i])))),n[r]=o.length,n.set(o,r+1),r+=o.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function uEe(t,e){const{blockNumber:n,blockTag:r,coinType:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return lb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d=Fa({abi:J8,functionName:"addr",...s!=null?{args:[gS(i),BigInt(s)]}:{args:[gS(i)]}}),h={address:l,abi:EY,functionName:"resolve",args:[Da(XN(i)),d,o??[nU]],blockNumber:n,blockTag:r},p=await ut(t,jl,"readContract")(h);if(p[0]==="0x")return null;const g=lm({abi:J8,args:s!=null?[gS(i),BigInt(s)]:void 0,functionName:"addr",data:p[0]});return g==="0x"||kl(g)==="0x00"?null:g}catch(d){if(a)throw d;if(tU(d,"resolve"))return null;throw d}}class dEe extends pe{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Jb extends pe{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class rU extends pe{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class hEe extends pe{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const fEe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,pEe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,gEe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,mEe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function yEe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function n4(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function UY({uri:t,gatewayUrls:e}){const n=gEe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=n4(e==null?void 0:e.ipfs,"https://ipfs.io"),s=n4(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(fEe),{protocol:o,subpath:a,target:c,subtarget:l=""}=(i==null?void 0:i.groups)||{},u=o==="ipns:/"||a==="ipns/",d=o==="ipfs:/"||a==="ipfs/"||pEe.test(t);if(t.startsWith("http")&&!u&&!d){let f=t;return e!=null&&e.arweave&&(f=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:f,isOnChain:!1,isEncoded:!1}}if((u||d)&&c)return{uri:`${r}/${u?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(o==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let h=t.replace(mEe,"");if(h.startsWith("<svg")&&(h=`data:image/svg+xml;base64,${btoa(h)}`),h.startsWith("data:")||h.startsWith("{"))return{uri:h,isOnChain:!0,isEncoded:!1};throw new rU({uri:t})}function BY(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new dEe({data:t});return t.image||t.image_url||t.image_data}async function wEe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(s=>s.json());return await sU({gatewayUrls:t,uri:BY(n)})}catch{throw new rU({uri:e})}}async function sU({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=UY({uri:e,gatewayUrls:t});if(r||await yEe(n))return n;throw new rU({uri:e})}function bEe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=e.split("/"),[i,o]=n.split(":"),[a,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Jb({reason:"Only EIP-155 supported"});if(!o)throw new Jb({reason:"Chain ID not found"});if(!c)throw new Jb({reason:"Contract address not found"});if(!s)throw new Jb({reason:"Token ID not found"});if(!a)throw new Jb({reason:"ERC namespace not found"});return{chainID:Number.parseInt(o),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function vEe(t,{nft:e}){if(e.namespace==="erc721")return jl(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return jl(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new hEe({namespace:e.namespace})}async function EEe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?CEe(t,{gatewayUrls:e,record:n}):sU({uri:n,gatewayUrls:e})}async function CEe(t,{gatewayUrls:e,record:n}){const r=bEe(n),s=await vEe(t,{nft:r}),{uri:i,isOnChain:o,isEncoded:a}=UY({uri:s,gatewayUrls:e});if(o&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const l=a?atob(i.replace("data:application/json;base64,","")):i,u=JSON.parse(l);return sU({uri:BY(u),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),wEe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function $Y(t,e){const{blockNumber:n,blockTag:r,key:s,name:i,gatewayUrls:o,strict:a}=e,{chain:c}=t,l=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return lb({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),u=c==null?void 0:c.ensTlds;if(u&&!u.some(d=>i.endsWith(d)))return null;try{const d={address:l,abi:EY,functionName:"resolve",args:[Da(XN(i)),Fa({abi:Q8,functionName:"text",args:[gS(i),s]}),o??[nU]],blockNumber:n,blockTag:r},f=await ut(t,jl,"readContract")(d);if(f[0]==="0x")return null;const p=lm({abi:Q8,functionName:"text",data:f[0]});return p===""?null:p}catch(d){if(a)throw d;if(tU(d,"resolve"))return null;throw d}}async function _Ee(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:i,strict:o,universalResolverAddress:a}){const c=await ut(t,$Y,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:i,strict:o});if(!c)return null;try{return await EEe(t,{record:c,gatewayUrls:r})}catch{return null}}async function FY(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:s,strict:i,universalResolverAddress:o}){let a=o;if(!a){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");a=lb({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const l={address:a,abi:xve,functionName:"reverse",args:[Da(XN(c))],blockNumber:n,blockTag:r},u=ut(t,jl,"readContract"),[d,h]=s?await u({...l,args:[...l.args,s]}):await u(l);return e.toLowerCase()!==h.toLowerCase()?null:d}catch(l){if(i)throw l;if(tU(l,"reverse"))return null;throw l}}async function AEe(t,e){const{blockNumber:n,blockTag:r,name:s}=e,{chain:i}=t,o=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return lb({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),a=i==null?void 0:i.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ut(t,jl,"readContract")({address:o,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Da(XN(s))],blockNumber:n,blockTag:r});return c}async function jY(t,e){var w,m,b;const{account:n=t.account,blockNumber:r,blockTag:s="latest",blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f,...p}=e,g=n?Nr(n):void 0;try{cm(e);const A=(typeof r=="bigint"?et(r):void 0)||s,C=(b=(m=(w=t.chain)==null?void 0:w.formatters)==null?void 0:m.transactionRequest)==null?void 0:b.format,x=(C||ab)({...GN(p,{format:C}),from:g==null?void 0:g.address,blobs:i,data:o,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,to:h,value:f}),N=await t.request({method:"eth_createAccessList",params:[x,A]});return{accessList:N.accessList,gasUsed:BigInt(N.gasUsed)}}catch(v){throw AY(v,{...e,account:g,chain:t.chain})}}async function SEe(t){const e=WN(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function WY(t,{address:e,args:n,event:r,events:s,fromBlock:i,strict:o,toBlock:a}={}){const c=s??(r?[r]:void 0),l=WN(t,{method:"eth_newFilter"});let u=[];c&&(u=[c.flatMap(f=>z_({abi:[f],eventName:f.name,args:n}))],r&&(u=u[0]));const d=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?et(i):i,toBlock:typeof a=="bigint"?et(a):a,...u.length?{topics:u}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:d,request:l(d),strict:!!o,toBlock:a,type:"event"}}async function zY(t){const e=WN(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function xEe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function IEe(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?et(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),kc(i)}async function r4(t,{address:e,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?et(n):void 0,i=await t.request({method:"eth_getCode",params:[e,s||r]},{dedupe:!!s});if(i!=="0x")return i}class NEe extends pe{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function TEe(t,e){const{address:n,factory:r,factoryData:s}=e;try{const[i,o,a,c,l,u,d]=await ut(t,jl,"readContract")({abi:REe,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:o,version:a,chainId:Number(c),verifyingContract:l,salt:u},extensions:d,fields:i}}catch(i){const o=i;throw o.name==="ContractFunctionExecutionError"&&o.cause.name==="ContractFunctionZeroDataError"?new NEe({address:n}):o}}const REe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function PEe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function OEe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const i=typeof n=="bigint"?et(n):void 0,o=await t.request({method:"eth_feeHistory",params:[et(e),i||r,s]},{dedupe:!!i});return PEe(o)}async function kEe(t,{filter:e}){const n=e.strict??!1,s=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>od(i));return e.abi?HL({abi:e.abi,logs:s,strict:n}):s}function HY(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class DEe extends pe{constructor({domain:e}){super(`Invalid domain "${Zr(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class MEe extends pe{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class LEe extends pe{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function UEe(t){const{domain:e={},message:n,primaryType:r}=t,s={EIP712Domain:QY({domain:e}),...t.types};YY({domain:e,message:n,primaryType:r,types:s});const i=["0x1901"];return e&&i.push(BEe({domain:e,types:s})),r!=="EIP712Domain"&&i.push(GY({data:n,primaryType:r,types:s})),ks(Ua(i))}function BEe({domain:t,types:e}){return GY({data:t,primaryType:"EIP712Domain",types:e})}function GY({data:t,primaryType:e,types:n}){const r=qY({data:t,primaryType:e,types:n});return ks(r)}function qY({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],s=[$Ee({primaryType:e,types:n})];for(const i of n[e]){const[o,a]=KY({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(o),s.push(a)}return Pf(r,s)}function $Ee({primaryType:t,types:e}){const n=Da(FEe({primaryType:t,types:e}));return ks(n)}function FEe({primaryType:t,types:e}){let n="";const r=VY({primaryType:t,types:e});r.delete(t);const s=[t,...Array.from(r).sort()];for(const i of s)n+=`${i}(${e[i].map(({name:o,type:a})=>`${a} ${o}`).join(",")})`;return n}function VY({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||e[s]===void 0)return n;n.add(s);for(const i of e[s])VY({primaryType:i.type,types:e},n);return n}function KY({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},ks(qY({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ks(r)];if(n==="string")return[{type:"bytes32"},ks(Da(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(o=>KY({name:e,type:s,types:t,value:o}));return[{type:"bytes32"},ks(Pf(i.map(([o])=>o),i.map(([,o])=>o)))]}return[{type:n},r]}function jEe(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(c,l)=>{const u={...l};for(const d of c){const{name:h,type:f}=d;f==="address"&&(u[h]=u[h].toLowerCase())}return u},o=s.EIP712Domain?e?i(s.EIP712Domain,e):{}:{},a=(()=>{if(r!=="EIP712Domain")return i(s[r],n)})();return Zr({domain:o,message:a,primaryType:r,types:s})}function YY(t){const{domain:e,message:n,primaryType:r,types:s}=t,i=(o,a)=>{for(const c of o){const{name:l,type:u}=c,d=a[l],h=u.match(UK);if(h&&(typeof d=="number"||typeof d=="bigint")){const[g,w,m]=h;et(d,{signed:w==="int",size:Number.parseInt(m)/8})}if(u==="address"&&typeof d=="string"&&!La(d))throw new yf({address:d});const f=u.match(Rwe);if(f){const[g,w]=f;if(w&&xr(d)!==Number.parseInt(w))throw new O0e({expectedSize:Number.parseInt(w),givenSize:xr(d)})}const p=s[u];p&&(WEe(u),i(p,d))}};if(s.EIP712Domain&&e){if(typeof e!="object")throw new DEe({domain:e});i(s.EIP712Domain,e)}if(r!=="EIP712Domain")if(s[r])i(s[r],n);else throw new MEe({primaryType:r,types:s})}function QY({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function WEe(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new LEe({type:t})}const zEe=`Ethereum Signed Message:
`;function HEe(t){const e=typeof t=="string"?mw(t):typeof t.raw=="string"?t.raw:es(t.raw),n=mw(`${zEe}${xr(e)}`);return Ua([n,e])}function JY(t,e){return ks(HEe(t),e)}const ZY="0x6492649264926492649264926492649264926492649264926492649264926492";function GEe(t){return $x(t,-32)===ZY}function qEe(t){const{address:e,data:n,signature:r,to:s="hex"}=t,i=ob([Pf([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),ZY]);return s==="hex"?i:Ma(i)}class VEe extends pe{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function KEe(t,e){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new VEe({value:t});let[n,r="0"]=t.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),e===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>e){const[i,o,a]=[r.slice(0,e-1),r.slice(e-1,e),r.slice(e)],c=Math.round(+`${o}.${a}`);c>9?r=`${BigInt(i)+BigInt(1)}0`.padStart(i.length+1,"0"):r=`${i}${c}`,r.length>e&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,e)}else r=r.padEnd(e,"0");return BigInt(`${s?"-":""}${n}${r}`)}function YEe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function QEe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?kc(t.nonce):void 0,storageProof:t.storageProof?YEe(t.storageProof):void 0}}async function JEe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:s}){const i=r??"latest",o=n!==void 0?et(n):void 0,a=await t.request({method:"eth_getProof",params:[e,s,o||i]});return QEe(a)}async function ZEe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:s}){const i=n!==void 0?et(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,s,i||r]})}async function eT(t,{blockHash:e,blockNumber:n,blockTag:r,hash:s,index:i}){var u,d,h;const o=r||"latest",a=n!==void 0?et(n):void 0;let c=null;if(s?c=await t.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,et(i)]},{dedupe:!0}):c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[a||o,et(i)]},{dedupe:!!a}),!c)throw new HK({blockHash:e,blockNumber:n,blockTag:o,hash:s,index:i});return(((h=(d=(u=t.chain)==null?void 0:u.formatters)==null?void 0:d.transaction)==null?void 0:h.format)||eY)(c)}async function XEe(t,{hash:e,transactionReceipt:n}){const[r,s]=await Promise.all([ut(t,Y_,"getBlockNumber")({}),e?ut(t,eT,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return i?r-i+1n:0n}async function wD(t,{hash:e}){var s,i,o;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new GK({hash:e});return(((o=(i=(s=t.chain)==null?void 0:s.formatters)==null?void 0:i.transactionReceipt)==null?void 0:o.format)||Gve)(n)}async function XY(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:s,blockNumber:i,blockTag:o,multicallAddress:a,stateOverride:c}=e,l=e.contracts,u=s??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let d=a;if(!d){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");d=lb({blockNumber:i,chain:t.chain,contract:"multicall3"})}const h=[[]];let f=0,p=0;for(let b=0;b<l.length;b++){const{abi:v,address:A,args:C,functionName:T}=l[b];try{const x=Fa({abi:v,args:C,functionName:T});p+=(x.length-2)/2,u>0&&p>u&&h[f].length>0&&(f++,p=(x.length-2)/2,h[f]=[]),h[f]=[...h[f],{allowFailure:!0,callData:x,target:A}]}catch(x){const N=Og(x,{abi:v,address:A,args:C,docsPath:"/docs/contract/multicall",functionName:T,sender:n});if(!r)throw N;h[f]=[...h[f],{allowFailure:!0,callData:"0x",target:A}]}}const g=await Promise.allSettled(h.map(b=>ut(t,jl,"readContract")({abi:pD,account:n,address:d,args:[b],blockNumber:i,blockTag:o,functionName:"aggregate3",stateOverride:c}))),w=[];for(let b=0;b<g.length;b++){const v=g[b];if(v.status==="rejected"){if(!r)throw v.reason;for(let C=0;C<h[b].length;C++)w.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let C=0;C<A.length;C++){const{returnData:T,success:x}=A[C],{callData:N}=h[b][C],{abi:S,address:D,functionName:P,args:$}=l[w.length];try{if(N==="0x")throw new $_;if(!x)throw new zN({data:T});const G=lm({abi:S,args:$,data:T,functionName:P});w.push(r?{result:G,status:"success"}:G)}catch(G){const W=Og(G,{abi:S,address:D,args:$,docsPath:"/docs/contract/multicall",functionName:P});if(!r)throw W;w.push({error:W,result:void 0,status:"failure"})}}}if(w.length!==l.length)throw new pe("multicall results mismatch");return w}async function bD(t,e){const{blockNumber:n,blockTag:r="latest",blocks:s,returnFullTransactions:i,traceTransfers:o,validation:a}=e;try{const c=[];for(const h of s){const f=h.blockOverrides?bY(h.blockOverrides):void 0,p=h.calls.map(w=>{const m=w,b=m.account?Nr(m.account):void 0,v=m.abi?Fa(m):m.data,A={...m,data:m.dataSuffix?Ua([v||"0x",m.dataSuffix]):v,from:m.from??(b==null?void 0:b.address)};return cm(A),ab(A)}),g=h.stateOverrides?UL(h.stateOverrides):void 0;c.push({blockOverrides:f,calls:p,stateOverrides:g})}const u=(typeof n=="bigint"?et(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:o,validation:a},u]})).map((h,f)=>({...tY(h),calls:h.calls.map((p,g)=>{var D,P;const{abi:w,args:m,functionName:b,to:v}=s[f].calls[g],A=((D=p.error)==null?void 0:D.data)??p.returnData,C=BigInt(p.gasUsed),T=(P=p.logs)==null?void 0:P.map($=>od($)),x=p.status==="0x1"?"success":"failure",N=w&&x==="success"&&A!=="0x"?lm({abi:w,data:A,functionName:b}):null,S=(()=>{var G;if(x==="success")return;let $;if(((G=p.error)==null?void 0:G.data)==="0x"?$=new $_:p.error&&($=new zN(p.error)),!!$)return Og($,{abi:w??[],address:v??"0x",args:m,functionName:b??"<unknown>"})})();return{data:A,gasUsed:C,logs:T,status:x,...x==="success"?{result:N}:{error:S}}})}))}catch(c){const l=c,u=HN(l,{});throw u instanceof q_?l:u}}function eQ(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=TL(hve(t));return n==="Bytes"?r:mY(r)}let eCe=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const tCe={checksum:new eCe(8192)},DP=tCe.checksum,nCe=/^0x[a-fA-F0-9]{40}$/;function tT(t,e={}){const{strict:n=!0}=e;if(!nCe.test(t))throw new s4({address:t,cause:new sCe});if(n){if(t.toLowerCase()===t)return;if(rCe(t)!==t)throw new s4({address:t,cause:new iCe})}}function rCe(t){if(DP.has(t))return DP.get(t);tT(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=eQ(gve(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const s=`0x${r.join("")}`;return DP.set(t,s),s}function vD(t,e={}){const{strict:n=!0}=e??{};try{return tT(t,{strict:n}),!0}catch{return!1}}class s4 extends Mr{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class sCe extends Mr{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class iCe extends Mr{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function ED(t){let e=!0,n="",r=0,s="",i=!1;for(let o=0;o<t.length;o++){const a=t[o];if(["(",")",","].includes(a)&&(e=!0),a==="("&&r++,a===")"&&r--,!!e){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){i=!0;break}continue}if(a===" "){t[o-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}s+=a,n+=a}}if(!i)throw new Mr("Unable to normalize signature.");return s}function CD(t,e){const n=typeof t,r=e.type;switch(r){case"address":return vD(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((s,i)=>CD(Object.values(t)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(s=>CD(s,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function tQ(t,e,n){for(const r in t){const s=t[r],i=e[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return tQ(s.components,i.components,n[r]);const o=[s.type,i.type];if(o.includes("address")&&o.includes("bytes20")?!0:o.includes("address")&&o.includes("string")?vD(n[r],{strict:!1}):o.includes("address")&&o.includes("bytes")?vD(n[r],{strict:!1}):!1)return o}}function nQ(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?v8(t):t;return{...r,...n?{hash:Ny(r)}:{}}}function oCe(t,e,n){const{args:r=[],prepare:s=!0}=n??{},i=Cve(e,{strict:!1}),o=t.filter(l=>i?l.type==="function"||l.type==="error"?rQ(l)===JL(e,0,4):l.type==="event"?Ny(l)===e:!1:"name"in l&&l.name===e);if(o.length===0)throw new _D({name:e});if(o.length===1)return{...o[0],...s?{hash:Ny(o[0])}:{}};let a;for(const l of o){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Ny(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((d,h)=>{const f="inputs"in l&&l.inputs[h];return f?CD(d,f):!1})){if(a&&"inputs"in a&&a.inputs){const d=tQ(l.inputs,a.inputs,r);if(d)throw new cCe({abiItem:l,type:d[0]},{abiItem:a,type:d[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...u]=o;return{...l,overloads:u}})();if(!c)throw new _D({name:e});return{...c,...s?{hash:Ny(c)}:{}}}function rQ(t){return JL(Ny(t),0,4)}function aCe(t){const e=typeof t=="string"?t:Bx(t);return ED(e)}function Ny(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:eQ(QL(aCe(t)))}class cCe extends Mr{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${ED(Bx(e.abiItem))}\`, and`,`\`${n.type}\` in \`${ED(Bx(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class _D extends Mr{constructor({name:e,data:n,type:r="item"}){const s=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const lCe=/^(.*)\[([0-9]*)\]$/,uCe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,sQ=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function dCe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let s=0;s<e.length;s++)r.push(iU({checksumAddress:t,parameter:e[s],value:n[s]}));return r}function iU({checksumAddress:t=!1,parameter:e,value:n}){const r=e,s=bCe(r.type);if(s){const[i,o]=s;return fCe(n,{checksumAddress:t,length:i,parameter:{...r,type:o}})}if(r.type==="tuple")return wCe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return hCe(n,{checksum:t});if(r.type==="bool")return gCe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,o="256"]=sQ.exec(r.type)??[];return mCe(n,{signed:i,size:Number(o)})}if(r.type.startsWith("bytes"))return pCe(n,{type:r.type});if(r.type==="string")return yCe(n);throw new cQ(r.type)}function oU(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?e+=32:e+=Ba(a)}const n=[],r=[];let s=0;for(let i=0;i<t.length;i++){const{dynamic:o,encoded:a}=t[i];o?(n.push(mi(e+s,{size:32})),r.push(a),s+=Ba(a)):n.push(a)}return Fl(...n,...r)}function hCe(t,e){const{checksum:n=!1}=e;return tT(t,{strict:n}),{dynamic:!1,encoded:kg(t.toLowerCase())}}function fCe(t,e){const{checksumAddress:n,length:r,parameter:s}=e,i=r===null;if(!Array.isArray(t))throw new ECe(t);if(!i&&t.length!==r)throw new vCe({expectedLength:r,givenLength:t.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let c=0;c<t.length;c++){const l=iU({checksumAddress:n,parameter:s,value:t[c]});l.dynamic&&(o=!0),a.push(l)}if(i||o){const c=oU(a);if(i){const l=mi(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Fl(l,c):l}}if(o)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Fl(...a.map(({encoded:c})=>c))}}function pCe(t,{type:e}){const[,n]=e.split("bytes"),r=Ba(t);if(!n){let s=t;return r%32!==0&&(s=Dg(s,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Fl(kg(mi(r,{size:32})),s)}}if(r!==Number.parseInt(n))throw new oQ({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:Dg(t)}}function gCe(t){if(typeof t!="boolean")throw new Mr(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:kg(gY(t))}}function mCe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,s=e?-r-1n:0n;if(t>r||t<s)throw new yY({max:r.toString(),min:s.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:mi(t,{size:32,signed:e})}}function yCe(t){const e=QL(t),n=Math.ceil(Ba(e)/32),r=[];for(let s=0;s<n;s++)r.push(Dg(JL(e,s*32,(s+1)*32)));return{dynamic:!0,encoded:Fl(Dg(mi(Ba(e),{size:32})),...r)}}function wCe(t,e){const{checksumAddress:n,parameter:r}=e;let s=!1;const i=[];for(let o=0;o<r.components.length;o++){const a=r.components[o],c=Array.isArray(t)?o:a.name,l=iU({checksumAddress:n,parameter:a,value:t[c]});i.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?oU(i):Fl(...i.map(({encoded:o})=>o))}}function bCe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function iQ(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new aQ({expectedLength:t.length,givenLength:e.length});const s=dCe({checksumAddress:r,parameters:t,values:e}),i=oU(s);return i.length===0?"0x":i}function AD(t,e){if(t.length!==e.length)throw new aQ({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[r];n.push(AD.encode(s,i))}return Fl(...n)}(function(t){function e(n,r,s=!1){if(n==="address"){const c=r;return tT(c),kg(c.toLowerCase(),s?32:0)}if(n==="string")return QL(r);if(n==="bytes")return r;if(n==="bool")return kg(gY(r),s?32:1);const i=n.match(sQ);if(i){const[c,l,u="256"]=i,d=Number.parseInt(u)/8;return mi(r,{size:s?32:d,signed:l==="int"})}const o=n.match(uCe);if(o){const[c,l]=o;if(Number.parseInt(l)!==(r.length-2)/2)throw new oQ({expectedSize:Number.parseInt(l),value:r});return Dg(r,s?32:0)}const a=n.match(lCe);if(a&&Array.isArray(r)){const[c,l]=a,u=[];for(let d=0;d<r.length;d++)u.push(e(l,r[d],!0));return u.length===0?"0x":Fl(...u)}throw new cQ(n)}t.encode=e})(AD||(AD={}));class vCe extends Mr{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class oQ extends Mr{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${Ba(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class aQ extends Mr{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class ECe extends Mr{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class cQ extends Mr{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function CCe(t,e){var s;const{bytecode:n,args:r}=e;return Fl(n,(s=t.inputs)!=null&&s.length&&(r!=null&&r.length)?iQ(t.inputs,r):"0x")}function _Ce(t){return nQ(t)}function ACe(t,...e){const{overloads:n}=t,r=n?SCe([t,...n],t.name,{args:e[0]}):t,s=xCe(r),i=e.length>0?iQ(r.inputs,e[0]):void 0;return i?Fl(s,i):s}function Dm(t,e={}){return nQ(t,e)}function SCe(t,e,n){const r=oCe(t,e,n);if(r.type!=="function")throw new _D({name:e,type:"function"});return r}function xCe(t){return rQ(t)}const ICe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Hc="0x0000000000000000000000000000000000000000",NCe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function TCe(t,e){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:i,traceAssetChanges:o,traceTransfers:a,validation:c}=e,l=e.account?Nr(e.account):void 0;if(o&&!l)throw new pe("`account` is required when `traceAssetChanges` is true");const u=l?CCe(_Ce("constructor(bytes, bytes)"),{bytecode:CY,args:[NCe,ACe(Dm("function getBalance(address)"),[l.address])]}):void 0,d=o?await Promise.all(e.calls.map(async O=>{if(!O.data&&!O.abi)return;const{accessList:M}=await jY(t,{account:l.address,...O,data:O.abi?Fa(O):O.data});return M.map(({address:j,storageKeys:V})=>V.length>0?j:null)})).then(O=>O.flat().filter(Boolean)):[],h=await bD(t,{blockNumber:n,blockTag:r,blocks:[...o?[{calls:[{data:u}],stateOverrides:i},{calls:d.map((O,M)=>({abi:[Dm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:O,from:Hc,nonce:M})),stateOverrides:[{address:Hc,nonce:0}]}]:[],{calls:[...s,{}].map(O=>({...O,from:l==null?void 0:l.address})),stateOverrides:i},...o?[{calls:[{data:u}]},{calls:d.map((O,M)=>({abi:[Dm("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:O,from:Hc,nonce:M})),stateOverrides:[{address:Hc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Dm("function decimals() returns (uint256)")],functionName:"decimals",from:Hc,nonce:M})),stateOverrides:[{address:Hc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Dm("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Hc,nonce:M})),stateOverrides:[{address:Hc,nonce:0}]},{calls:d.map((O,M)=>({to:O,abi:[Dm("function symbol() returns (string)")],functionName:"symbol",from:Hc,nonce:M})),stateOverrides:[{address:Hc,nonce:0}]}]:[]],traceTransfers:a,validation:c}),f=o?h[2]:h[0],[p,g,,w,m,b,v,A]=o?h:[],{calls:C,...T}=f,x=C.slice(0,-1)??[],N=(p==null?void 0:p.calls)??[],S=(g==null?void 0:g.calls)??[],D=[...N,...S].map(O=>O.status==="success"?Qo(O.data):null),P=(w==null?void 0:w.calls)??[],$=(m==null?void 0:m.calls)??[],G=[...P,...$].map(O=>O.status==="success"?Qo(O.data):null),W=((b==null?void 0:b.calls)??[]).map(O=>O.status==="success"?O.result:null),I=((A==null?void 0:A.calls)??[]).map(O=>O.status==="success"?O.result:null),R=((v==null?void 0:v.calls)??[]).map(O=>O.status==="success"?O.result:null),B=[];for(const[O,M]of G.entries()){const j=D[O];if(typeof M!="bigint"||typeof j!="bigint")continue;const V=W[O-1],te=I[O-1],Z=R[O-1],X=O===0?{address:ICe,decimals:18,symbol:"ETH"}:{address:d[O-1],decimals:Z||V?Number(V??1):void 0,symbol:te??void 0};B.some(ce=>ce.token.address===X.address)||B.push({token:X,value:{pre:j,post:M,diff:M-j}})}return{assetChanges:B,block:T,results:x}}let lQ=class extends IL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,X0e(e);const r=F_(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),ww(i)}update(e){return yw(this),this.iHash.update(e),this}digestInto(e){yw(this),Dc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const uQ=(t,e,n)=>new lQ(t,e).update(n).digest();uQ.create=(t,e)=>new lQ(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const so=BigInt(0),Ai=BigInt(1),Sp=BigInt(2),RCe=BigInt(3),dQ=BigInt(4),hQ=BigInt(5),fQ=BigInt(8);function Aa(t,e){const n=t%e;return n>=so?n:e+n}function sa(t,e,n){let r=t;for(;e-- >so;)r*=r,r%=n;return r}function i4(t,e){if(t===so)throw new Error("invert: expected non-zero number");if(e<=so)throw new Error("invert: expected positive modulus, got "+e);let n=Aa(t,e),r=e,s=so,i=Ai;for(;n!==so;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Ai)throw new Error("invert: does not exist");return Aa(s,e)}function pQ(t,e){const n=(t.ORDER+Ai)/dQ,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function PCe(t,e){const n=(t.ORDER-hQ)/fQ,r=t.mul(e,Sp),s=t.pow(r,n),i=t.mul(e,s),o=t.mul(t.mul(i,Sp),s),a=t.mul(i,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function OCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Ai,n=0;for(;e%Sp===so;)e/=Sp,n++;let r=Sp;const s=nT(t);for(;o4(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return pQ;let i=s.pow(r,e);const o=(e+Ai)/Sp;return function(c,l){if(c.is0(l))return l;if(o4(c,l)!==1)throw new Error("Cannot find square root");let u=n,d=c.mul(c.ONE,i),h=c.pow(l,e),f=c.pow(l,o);for(;!c.eql(h,c.ONE);){if(c.is0(h))return c.ZERO;let p=1,g=c.sqr(h);for(;!c.eql(g,c.ONE);)if(p++,g=c.sqr(g),p===u)throw new Error("Cannot find square root");const w=Ai<<BigInt(u-p-1),m=c.pow(d,w);u=p,d=c.sqr(m),h=c.mul(h,d),f=c.mul(f,m)}return f}}function kCe(t){return t%dQ===RCe?pQ:t%fQ===hQ?PCe:OCe(t)}const DCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function MCe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=DCe.reduce((r,s)=>(r[s]="function",r),e);return KL(t,n),t}function LCe(t,e,n){if(n<so)throw new Error("invalid exponent, negatives unsupported");if(n===so)return t.ONE;if(n===Ai)return e;let r=t.ONE,s=e;for(;n>so;)n&Ai&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Ai;return r}function gQ(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),s=e.reduce((o,a,c)=>t.is0(a)?o:(r[c]=o,t.mul(o,a)),t.ONE),i=t.inv(s);return e.reduceRight((o,a,c)=>t.is0(a)?o:(r[c]=t.mul(o,r[c]),t.mul(o,a)),i),r}function o4(t,e){const n=(t.ORDER-Ai)/Sp,r=t.pow(e,n),s=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),o=t.eql(r,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function UCe(t,e){e!==void 0&&tC(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function nT(t,e,n=!1,r={}){if(t<=so)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i;if(typeof e=="object"&&e!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const u=e;u.BITS&&(s=u.BITS),u.sqrt&&(i=u.sqrt),typeof u.isLE=="boolean"&&(n=u.isLE)}else typeof e=="number"&&(s=e),r.sqrt&&(i=r.sqrt);const{nBitLength:o,nByteLength:a}=UCe(t,s);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const l=Object.freeze({ORDER:t,isLE:n,BITS:o,BYTES:a,MASK:YN(o),ZERO:so,ONE:Ai,create:u=>Aa(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return so<=u&&u<t},is0:u=>u===so,isValidNot0:u=>!l.is0(u)&&l.isValid(u),isOdd:u=>(u&Ai)===Ai,neg:u=>Aa(-u,t),eql:(u,d)=>u===d,sqr:u=>Aa(u*u,t),add:(u,d)=>Aa(u+d,t),sub:(u,d)=>Aa(u-d,t),mul:(u,d)=>Aa(u*d,t),pow:(u,d)=>LCe(l,u,d),div:(u,d)=>Aa(u*i4(d,t),t),sqrN:u=>u*u,addN:(u,d)=>u+d,subN:(u,d)=>u-d,mulN:(u,d)=>u*d,inv:u=>i4(u,t),sqrt:i||(u=>(c||(c=kCe(t)),c(l,u))),toBytes:u=>n?hY(u,a):VL(u,a),fromBytes:u=>{if(u.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+u.length);return n?dY(u):KN(u)},invertBatch:u=>gQ(l,u),cmov:(u,d,h)=>h?d:u});return Object.freeze(l)}function mQ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function yQ(t){const e=mQ(t);return e+Math.ceil(e/2)}function BCe(t,e,n=!1){const r=t.length,s=mQ(e),i=yQ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?dY(t):KN(t),a=Aa(o,e-Ai)+Ai;return n?hY(a,s):VL(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Aw=BigInt(0),xp=BigInt(1);function sE(t,e){const n=e.negate();return t?n:e}function $Ce(t,e,n){const r=o=>o.pz,s=gQ(t.Fp,n.map(r));return n.map((o,a)=>o.toAffine(s[a])).map(t.fromAffine)}function wQ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function MP(t,e){wQ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),s=2**t,i=YN(t),o=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function a4(t,e,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(t&s),c=t>>o;a>r&&(a-=i,c+=xp);const l=e*r,u=l+Math.abs(a)-1,d=a===0,h=a<0,f=e%2!==0;return{nextN:c,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:l}}function FCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function jCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const LP=new WeakMap,bQ=new WeakMap;function UP(t){return bQ.get(t)||1}function c4(t){if(t!==Aw)throw new Error("invalid wNAF")}function WCe(t,e){return{constTimeNegate:sE,hasPrecomputes(n){return UP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>Aw;)r&xp&&(s=s.add(i)),i=i.double(),r>>=xp;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=MP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){let i=t.ZERO,o=t.BASE;const a=MP(n,e);for(let c=0;c<a.windows;c++){const{nextN:l,offset:u,isZero:d,isNeg:h,isNegF:f,offsetF:p}=a4(s,c,a);s=l,d?o=o.add(sE(f,r[p])):i=i.add(sE(h,r[u]))}return c4(s),{p:i,f:o}},wNAFUnsafe(n,r,s,i=t.ZERO){const o=MP(n,e);for(let a=0;a<o.windows&&s!==Aw;a++){const{nextN:c,offset:l,isZero:u,isNeg:d}=a4(s,a,o);if(s=c,!u){const h=r[l];i=i.add(d?h.negate():h)}}return c4(s),i},getPrecomputes(n,r,s){let i=LP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&(typeof s=="function"&&(i=s(i)),LP.set(r,i))),i},wNAFCached(n,r,s){const i=UP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=UP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){wQ(r,e),bQ.set(n,r),LP.delete(n)}}}function zCe(t,e,n,r){let s=e,i=t.ZERO,o=t.ZERO;for(;n>Aw||r>Aw;)n&xp&&(i=i.add(s)),r&xp&&(o=o.add(s)),s=s.double(),n>>=xp,r>>=xp;return{p1:i,p2:o}}function HCe(t,e,n,r){FCe(n,t),jCe(r,e);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=tve(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=YN(c),u=new Array(Number(l)+1).fill(o),d=Math.floor((e.BITS-1)/c)*c;let h=o;for(let f=d;f>=0;f-=c){u.fill(o);for(let g=0;g<i;g++){const w=r[g],m=Number(w>>BigInt(f)&l);u[m]=u[m].add(n[g])}let p=o;for(let g=u.length-1,w=o;g>0;g--)w=w.add(u[g]),p=p.add(w);if(h=h.add(p),f!==0)for(let g=0;g<c;g++)h=h.double()}return h}function l4(t,e){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return MCe(e),e}else return nT(t)}function GCe(t,e,n={}){if(!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const c=e[a];if(!(typeof c=="bigint"&&c>Aw))throw new Error(`CURVE.${a} must be positive bigint`)}const r=l4(e.p,n.Fp),s=l4(e.n,n.Fn),o=["Gx","Gy","a","b"];for(const a of o)if(!r.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return{Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function u4(t){t.lowS!==void 0&&Wx("lowS",t.lowS),t.prehash!==void 0&&Wx("prehash",t.prehash)}class qCe extends Error{constructor(e=""){super(e)}}const wu={Err:qCe,_tlv:{encode:(t,e)=>{const{Err:n}=wu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=aA(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?aA(s.length/2|128):"";return aA(t)+i+s+e},decode(t,e){const{Err:n}=wu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=wu;if(t<iE)throw new e("integer: negative integers are not allowed");let n=aA(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=wu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return KN(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=wu,s=ma("signature",t),{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=wu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},iE=BigInt(0),oE=BigInt(1),VCe=BigInt(2),dA=BigInt(3),KCe=BigInt(4);function YCe(t,e,n){function r(s){const i=t.sqr(s),o=t.mul(i,s);return t.add(t.add(o,t.mul(s,e)),n)}return r}function vQ(t,e,n){const{BYTES:r}=t;function s(i){let o;if(typeof i=="bigint")o=i;else{let a=ma("private key",i);if(e){if(!e.includes(a.length*2))throw new Error("invalid private key");const c=new Uint8Array(r);c.set(a,c.length-a.length),a=c}try{o=t.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof i}`)}}if(n&&(o=t.create(o)),!t.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}return s}function QCe(t,e={}){const{Fp:n,Fn:r}=GCe("weierstrass",t,e),{h:s,n:i}=t;KL(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:o}=e;if(o&&(!n.is0(t.a)||typeof o.beta!="bigint"||typeof o.splitScalar!="function"))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function c(N,S,D){const{x:P,y:$}=S.toAffine(),G=n.toBytes(P);if(Wx("isCompressed",D),D){a();const W=!n.isOdd($);return Cp(EQ(W),G)}else return Cp(Uint8Array.of(4),G,n.toBytes($))}function l(N){Dc(N);const S=n.BYTES,D=S+1,P=2*S+1,$=N.length,G=N[0],W=N.subarray(1);if($===D&&(G===2||G===3)){const I=n.fromBytes(W);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const R=h(I);let B;try{B=n.sqrt(R)}catch(j){const V=j instanceof Error?": "+j.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}a();const O=n.isOdd(B);return(G&1)===1!==O&&(B=n.neg(B)),{x:I,y:B}}else if($===P&&G===4){const I=n.fromBytes(W.subarray(S*0,S*1)),R=n.fromBytes(W.subarray(S*1,S*2));if(!f(I,R))throw new Error("bad point: is not on curve");return{x:I,y:R}}else throw new Error(`bad point: got length ${$}, expected compressed=${D} or uncompressed=${P}`)}const u=e.toBytes||c,d=e.fromBytes||l,h=YCe(n,t.a,t.b);function f(N,S){const D=n.sqr(S),P=h(N);return n.eql(D,P)}if(!f(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const p=n.mul(n.pow(t.a,dA),KCe),g=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(p,g)))throw new Error("bad curve params: a or b");function w(N,S,D=!1){if(!n.isValid(S)||D&&n.is0(S))throw new Error(`bad point coordinate ${N}`);return S}function m(N){if(!(N instanceof C))throw new Error("ProjectivePoint expected")}const b=G8((N,S)=>{const{px:D,py:P,pz:$}=N;if(n.eql($,n.ONE))return{x:D,y:P};const G=N.is0();S==null&&(S=G?n.ONE:n.inv($));const W=n.mul(D,S),I=n.mul(P,S),R=n.mul($,S);if(G)return{x:n.ZERO,y:n.ZERO};if(!n.eql(R,n.ONE))throw new Error("invZ was invalid");return{x:W,y:I}}),v=G8(N=>{if(N.is0()){if(e.allowInfinityPoint&&!n.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:S,y:D}=N.toAffine();if(!n.isValid(S)||!n.isValid(D))throw new Error("bad point: x or y not field elements");if(!f(S,D))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function A(N,S,D,P,$){return D=new C(n.mul(D.px,N),D.py,D.pz),S=sE(P,S),D=sE($,D),S.add(D)}class C{constructor(S,D,P){this.px=w("x",S),this.py=w("y",D,!0),this.pz=w("z",P),Object.freeze(this)}static fromAffine(S){const{x:D,y:P}=S||{};if(!S||!n.isValid(D)||!n.isValid(P))throw new Error("invalid affine point");if(S instanceof C)throw new Error("projective point not allowed");return n.is0(D)&&n.is0(P)?C.ZERO:new C(D,P,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(S){return $Ce(C,"pz",S)}static fromBytes(S){return Dc(S),C.fromHex(S)}static fromHex(S){const D=C.fromAffine(d(ma("pointHex",S)));return D.assertValidity(),D}static fromPrivateKey(S){const D=vQ(r,e.allowedPrivateKeyLengths,e.wrapPrivateKey);return C.BASE.multiply(D(S))}static msm(S,D){return HCe(C,r,S,D)}precompute(S=8,D=!0){return x.setWindowSize(this,S),D||this.multiply(dA),this}_setWindowSize(S){this.precompute(S)}assertValidity(){v(this)}hasEvenY(){const{y:S}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(S)}equals(S){m(S);const{px:D,py:P,pz:$}=this,{px:G,py:W,pz:I}=S,R=n.eql(n.mul(D,I),n.mul(G,$)),B=n.eql(n.mul(P,I),n.mul(W,$));return R&&B}negate(){return new C(this.px,n.neg(this.py),this.pz)}double(){const{a:S,b:D}=t,P=n.mul(D,dA),{px:$,py:G,pz:W}=this;let I=n.ZERO,R=n.ZERO,B=n.ZERO,O=n.mul($,$),M=n.mul(G,G),j=n.mul(W,W),V=n.mul($,G);return V=n.add(V,V),B=n.mul($,W),B=n.add(B,B),I=n.mul(S,B),R=n.mul(P,j),R=n.add(I,R),I=n.sub(M,R),R=n.add(M,R),R=n.mul(I,R),I=n.mul(V,I),B=n.mul(P,B),j=n.mul(S,j),V=n.sub(O,j),V=n.mul(S,V),V=n.add(V,B),B=n.add(O,O),O=n.add(B,O),O=n.add(O,j),O=n.mul(O,V),R=n.add(R,O),j=n.mul(G,W),j=n.add(j,j),O=n.mul(j,V),I=n.sub(I,O),B=n.mul(j,M),B=n.add(B,B),B=n.add(B,B),new C(I,R,B)}add(S){m(S);const{px:D,py:P,pz:$}=this,{px:G,py:W,pz:I}=S;let R=n.ZERO,B=n.ZERO,O=n.ZERO;const M=t.a,j=n.mul(t.b,dA);let V=n.mul(D,G),te=n.mul(P,W),Z=n.mul($,I),X=n.add(D,P),ce=n.add(G,W);X=n.mul(X,ce),ce=n.add(V,te),X=n.sub(X,ce),ce=n.add(D,$);let ge=n.add(G,I);return ce=n.mul(ce,ge),ge=n.add(V,Z),ce=n.sub(ce,ge),ge=n.add(P,$),R=n.add(W,I),ge=n.mul(ge,R),R=n.add(te,Z),ge=n.sub(ge,R),O=n.mul(M,ce),R=n.mul(j,Z),O=n.add(R,O),R=n.sub(te,O),O=n.add(te,O),B=n.mul(R,O),te=n.add(V,V),te=n.add(te,V),Z=n.mul(M,Z),ce=n.mul(j,ce),te=n.add(te,Z),Z=n.sub(V,Z),Z=n.mul(M,Z),ce=n.add(ce,Z),V=n.mul(te,ce),B=n.add(B,V),V=n.mul(ge,ce),R=n.mul(X,R),R=n.sub(R,V),V=n.mul(X,te),O=n.mul(ge,O),O=n.add(O,V),new C(R,B,O)}subtract(S){return this.add(S.negate())}is0(){return this.equals(C.ZERO)}multiply(S){const{endo:D}=e;if(!r.isValidNot0(S))throw new Error("invalid scalar: out of range");let P,$;const G=W=>x.wNAFCached(this,W,C.normalizeZ);if(D){const{k1neg:W,k1:I,k2neg:R,k2:B}=D.splitScalar(S),{p:O,f:M}=G(I),{p:j,f:V}=G(B);$=M.add(V),P=A(D.beta,O,j,W,R)}else{const{p:W,f:I}=G(S);P=W,$=I}return C.normalizeZ([P,$])[0]}multiplyUnsafe(S){const{endo:D}=e,P=this;if(!r.isValid(S))throw new Error("invalid scalar: out of range");if(S===iE||P.is0())return C.ZERO;if(S===oE)return P;if(x.hasPrecomputes(this))return this.multiply(S);if(D){const{k1neg:$,k1:G,k2neg:W,k2:I}=D.splitScalar(S),{p1:R,p2:B}=zCe(C,P,G,I);return A(D.beta,R,B,$,W)}else return x.wNAFCachedUnsafe(P,S)}multiplyAndAddUnsafe(S,D,P){const $=this.multiplyUnsafe(D).add(S.multiplyUnsafe(P));return $.is0()?void 0:$}toAffine(S){return b(this,S)}isTorsionFree(){const{isTorsionFree:S}=e;return s===oE?!0:S?S(C,this):x.wNAFCachedUnsafe(this,i).is0()}clearCofactor(){const{clearCofactor:S}=e;return s===oE?this:S?S(C,this):this.multiplyUnsafe(s)}toBytes(S=!0){return Wx("isCompressed",S),this.assertValidity(),u(C,this,S)}toRawBytes(S=!0){return this.toBytes(S)}toHex(S=!0){return nC(this.toBytes(S))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}C.BASE=new C(t.Gx,t.Gy,n.ONE),C.ZERO=new C(n.ZERO,n.ONE,n.ZERO),C.Fp=n,C.Fn=r;const T=r.BITS,x=WCe(C,e.endo?Math.ceil(T/2):T);return C}function EQ(t){return Uint8Array.of(t?2:3)}function JCe(t,e,n={}){KL(e,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||awe,s=e.hmac||((P,...$)=>uQ(e.hash,P,Cp(...$))),{Fp:i,Fn:o}=t,{ORDER:a,BITS:c}=o;function l(P){const $=a>>oE;return P>$}function u(P){return l(P)?o.neg(P):P}function d(P,$){if(!o.isValidNot0($))throw new Error(`invalid signature ${P}: out of range 1..CURVE.n`)}class h{constructor($,G,W){d("r",$),d("s",G),this.r=$,this.s=G,W!=null&&(this.recovery=W),Object.freeze(this)}static fromCompact($){const G=o.BYTES,W=ma("compactSignature",$,G*2);return new h(o.fromBytes(W.subarray(0,G)),o.fromBytes(W.subarray(G,G*2)))}static fromDER($){const{r:G,s:W}=wu.toSig(ma("DER",$));return new h(G,W)}assertValidity(){}addRecoveryBit($){return new h(this.r,this.s,$)}recoverPublicKey($){const G=i.ORDER,{r:W,s:I,recovery:R}=this;if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");if(a*VCe<G&&R>1)throw new Error("recovery id is ambiguous for h>1 curve");const O=R===2||R===3?W+a:W;if(!i.isValid(O))throw new Error("recovery id 2 or 3 invalid");const M=i.toBytes(O),j=t.fromHex(Cp(EQ((R&1)===0),M)),V=o.inv(O),te=v(ma("msgHash",$)),Z=o.create(-te*V),X=o.create(I*V),ce=t.BASE.multiplyUnsafe(Z).add(j.multiplyUnsafe(X));if(ce.is0())throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return l(this.s)}normalizeS(){return this.hasHighS()?new h(this.r,o.neg(this.s),this.recovery):this}toBytes($){if($==="compact")return Cp(o.toBytes(this.r),o.toBytes(this.s));if($==="der")return xL(wu.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return nC(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return nC(this.toBytes("compact"))}}const f=vQ(o,n.allowedPrivateKeyLengths,n.wrapPrivateKey),p={isValidPrivateKey(P){try{return f(P),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const P=a;return BCe(r(yQ(P)),P)},precompute(P=8,$=t.BASE){return $.precompute(P,!1)}};function g(P,$=!0){return t.fromPrivateKey(P).toBytes($)}function w(P){if(typeof P=="bigint")return!1;if(P instanceof t)return!0;const G=ma("key",P).length,W=i.BYTES,I=W+1,R=2*W+1;if(!(n.allowedPrivateKeyLengths||o.BYTES===I))return G===I||G===R}function m(P,$,G=!0){if(w(P)===!0)throw new Error("first arg must be private key");if(w($)===!1)throw new Error("second arg must be public key");return t.fromHex($).multiply(f(P)).toBytes(G)}const b=e.bits2int||function(P){if(P.length>8192)throw new Error("input is too large");const $=KN(P),G=P.length*8-c;return G>0?$>>BigInt(G):$},v=e.bits2int_modN||function(P){return o.create(b(P))},A=YN(c);function C(P){return eve("num < 2^"+c,P,iE,A),o.toBytes(P)}function T(P,$,G=x){if(["recovered","canonical"].some(X=>X in G))throw new Error("sign() legacy options not supported");const{hash:W}=e;let{lowS:I,prehash:R,extraEntropy:B}=G;I==null&&(I=!0),P=ma("msgHash",P),u4(G),R&&(P=ma("prehashed msgHash",W(P)));const O=v(P),M=f($),j=[C(M),C(O)];if(B!=null&&B!==!1){const X=B===!0?r(i.BYTES):B;j.push(ma("extraEntropy",X))}const V=Cp(...j),te=O;function Z(X){const ce=b(X);if(!o.isValidNot0(ce))return;const ge=o.inv(ce),Me=t.BASE.multiply(ce).toAffine(),it=o.create(Me.x);if(it===iE)return;const Je=o.create(ge*o.create(te+it*M));if(Je===iE)return;let bt=(Me.x===it?0:2)|Number(Me.y&oE),Nt=Je;return I&&l(Je)&&(Nt=u(Je),bt^=1),new h(it,Nt,bt)}return{seed:V,k2sig:Z}}const x={lowS:e.lowS,prehash:!1},N={lowS:e.lowS,prehash:!1};function S(P,$,G=x){const{seed:W,k2sig:I}=T(P,$,G);return nve(e.hash.outputLen,o.BYTES,s)(W,I)}t.BASE.precompute(8);function D(P,$,G,W=N){const I=P;$=ma("msgHash",$),G=ma("publicKey",G),u4(W);const{lowS:R,prehash:B,format:O}=W;if("strict"in W)throw new Error("options.strict was renamed to lowS");if(O!==void 0&&!["compact","der","js"].includes(O))throw new Error('format must be "compact", "der" or "js"');const M=typeof I=="string"||SL(I),j=!M&&!O&&typeof I=="object"&&I!==null&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!M&&!j)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let V,te;try{if(j)if(O===void 0||O==="js")V=new h(I.r,I.s);else throw new Error("invalid format");if(M){try{O!=="compact"&&(V=h.fromDER(I))}catch(Nt){if(!(Nt instanceof wu.Err))throw Nt}!V&&O!=="der"&&(V=h.fromCompact(I))}te=t.fromHex(G)}catch{return!1}if(!V||R&&V.hasHighS())return!1;B&&($=e.hash($));const{r:Z,s:X}=V,ce=v($),ge=o.inv(X),Me=o.create(ce*ge),it=o.create(Z*ge),Je=t.BASE.multiplyUnsafe(Me).add(te.multiplyUnsafe(it));return Je.is0()?!1:o.create(Je.x)===Z}return Object.freeze({getPublicKey:g,getSharedSecret:m,sign:S,verify:D,utils:p,Point:t,Signature:h})}function ZCe(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,r=nT(e.n,t.nBitLength),s={Fp:n,Fn:r,allowedPrivateKeyLengths:t.allowedPrivateKeyLengths,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,wrapPrivateKey:t.wrapPrivateKey,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function XCe(t){const{CURVE:e,curveOpts:n}=ZCe(t),r={hash:t.hash,hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,ecdsaOpts:r}}function e_e(t,e){return Object.assign({},e,{ProjectivePoint:e.Point,CURVE:t})}function t_e(t){const{CURVE:e,curveOpts:n,ecdsaOpts:r}=XCe(t),s=QCe(e,n),i=JCe(s,r,n);return e_e(t,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function n_e(t,e){const n=r=>t_e({...t,hash:r});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qx={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const r_e=BigInt(1),SD=BigInt(2),d4=(t,e)=>(t+e/SD)/e;function s_e(t){const e=qx.p,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=sa(u,n,e)*u%e,h=sa(d,n,e)*u%e,f=sa(h,SD,e)*l%e,p=sa(f,s,e)*f%e,g=sa(p,i,e)*p%e,w=sa(g,a,e)*g%e,m=sa(w,c,e)*w%e,b=sa(m,a,e)*g%e,v=sa(b,n,e)*u%e,A=sa(v,o,e)*p%e,C=sa(A,r,e)*l%e,T=sa(C,SD,e);if(!xD.eql(xD.sqr(T),t))throw new Error("Cannot find square root");return T}const xD=nT(qx.p,void 0,void 0,{sqrt:s_e}),CQ=n_e({...qx,Fp:xD,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=qx.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-r_e*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=d4(i*t,e),c=d4(-r*t,e);let l=Aa(t-a*n-c*s,e),u=Aa(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},iY),i_e=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:CQ},Symbol.toStringTag,{value:"Module"}));function o_e({r:t,s:e,to:n="hex",v:r,yParity:s}){const i=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new CQ.Signature(Qo(t),Qo(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?o:Ma(o)}async function aU(t,e){var d,h,f;const{address:n,factory:r,factoryData:s,hash:i,signature:o,universalSignatureVerifierAddress:a=(f=(h=(d=t.chain)==null?void 0:d.contracts)==null?void 0:h.universalSignatureVerifier)==null?void 0:f.address,...c}=e,l=Bl(o)?o:typeof o=="object"&&"r"in o&&"s"in o?o_e(o):es(o),u=await(async()=>!r&&!s||GEe(l)?l:qEe({address:r,data:s,signature:l}))();try{const p=a?{to:a,data:Fa({abi:Z8,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:QN({abi:Z8,args:[n,i,u],bytecode:Tve}),...c},{data:g}=await ut(t,K_,"call")(p);return j0e(g??"0x0")}catch(p){try{if(VN(Wu(n),await KK({hash:i,signature:o})))return!0}catch{}if(p instanceof qK)return!1;throw p}}async function a_e(t,{address:e,message:n,factory:r,factoryData:s,signature:i,...o}){const a=JY(n);return aU(t,{address:e,factory:r,factoryData:s,hash:a,signature:i,...o})}async function c_e(t,e){const{address:n,factory:r,factoryData:s,signature:i,message:o,primaryType:a,types:c,domain:l,...u}=e,d=UEe({message:o,primaryType:a,types:c,domain:l});return aU(t,{address:n,factory:r,factoryData:s,hash:d,signature:i,...u})}function _Q(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:i,pollingInterval:o=t.pollingInterval}){const a=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const d=Zr(["watchBlockNumber",t.uid,e,n,o]);return ad(d,{onBlockNumber:r,onError:s},h=>ub(async()=>{var f;try{const p=await ut(t,Y_,"getBlockNumber")({cacheTime:0});if(c){if(p===c)return;if(p-c>1&&n)for(let g=c+1n;g<p;g++)h.onBlockNumber(g,c),c=g}(!c||p>c)&&(h.onBlockNumber(p,c),c=p)}catch(p){(f=h.onError)==null||f.call(h,p)}},{emitOnBegin:e,interval:o}))})():(()=>{const d=Zr(["watchBlockNumber",t.uid,e,n]);return ad(d,{onBlockNumber:r,onError:s},h=>{let f=!0,p=()=>f=!1;return(async()=>{try{const g=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return m?m.value:t.transport}return t.transport})(),{unsubscribe:w}=await g.subscribe({params:["newHeads"],onData(m){var v;if(!f)return;const b=Qo((v=m.result)==null?void 0:v.number);h.onBlockNumber(b,c),c=b},onError(m){var b;(b=h.onError)==null||b.call(h,m)}});p=w,f||p()}catch(g){s==null||s(g)}})(),()=>p()})})()}async function AQ(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:s=t.pollingInterval,retryCount:i=6,retryDelay:o=({count:c})=>~~(1<<c)*200,timeout:a=18e4}){const c=Zr(["waitForTransactionReceipt",t.uid,n]);let l,u,d,h=!1,f,p;const{promise:g,resolve:w,reject:m}=ZL(),b=a?setTimeout(()=>{p(),f(),m(new lbe({hash:n}))},a):void 0;return f=ad(c,{onReplaced:r,resolve:w,reject:m},v=>{p=ut(t,_Q,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:s,async onBlockNumber(A){const C=x=>{clearTimeout(b),p(),x(),f()};let T=A;if(!h)try{if(d){if(e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;C(()=>v.resolve(d));return}if(l||(h=!0,await Hx(async()=>{l=await ut(t,eT,"getTransaction")({hash:n}),l.blockNumber&&(T=l.blockNumber)},{delay:o,retryCount:i}),h=!1),d=await ut(t,wD,"getTransactionReceipt")({hash:n}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e))return;C(()=>v.resolve(d))}catch(x){if(x instanceof HK||x instanceof GK){if(!l){h=!1;return}try{u=l,h=!0;const N=await Hx(()=>ut(t,Il,"getBlock")({blockNumber:T,includeTransactions:!0}),{delay:o,retryCount:i,shouldRetry:({error:P})=>P instanceof ZK});h=!1;const S=N.transactions.find(({from:P,nonce:$})=>P===u.from&&$===u.nonce);if(!S||(d=await ut(t,wD,"getTransactionReceipt")({hash:S.hash}),e>1&&(!d.blockNumber||T-d.blockNumber+1n<e)))return;let D="replaced";S.to===u.to&&S.value===u.value&&S.input===u.input?D="repriced":S.from===S.to&&S.value===0n&&(D="cancelled"),C(()=>{var P;(P=v.onReplaced)==null||P.call(v,{reason:D,replacedTransaction:u,transaction:S,transactionReceipt:d}),v.resolve(d)})}catch(N){C(()=>v.reject(N))}}else C(()=>v.reject(x))}}})}),g}function l_e(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:i,includeTransactions:o,poll:a,pollingInterval:c=t.pollingInterval}){const l=typeof a<"u"?a:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),u=o??!1;let d;return l?(()=>{const p=Zr(["watchBlocks",t.uid,e,n,r,u,c]);return ad(p,{onBlock:s,onError:i},g=>ub(async()=>{var w;try{const m=await ut(t,Il,"getBlock")({blockTag:e,includeTransactions:u});if(m.number!==null&&(d==null?void 0:d.number)!=null){if(m.number===d.number)return;if(m.number-d.number>1&&n)for(let b=(d==null?void 0:d.number)+1n;b<m.number;b++){const v=await ut(t,Il,"getBlock")({blockNumber:b,includeTransactions:u});g.onBlock(v,d),d=v}}((d==null?void 0:d.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>d.number)&&(g.onBlock(m,d),d=m)}catch(m){(w=g.onError)==null||w.call(g,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let p=!0,g=!0,w=()=>p=!1;return(async()=>{try{r&&ut(t,Il,"getBlock")({blockTag:e,includeTransactions:u}).then(v=>{p&&g&&(s(v,void 0),g=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const v=t.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return v?v.value:t.transport}return t.transport})(),{unsubscribe:b}=await m.subscribe({params:["newHeads"],async onData(v){var C;if(!p)return;const A=await ut(t,Il,"getBlock")({blockNumber:(C=v.result)==null?void 0:C.number,includeTransactions:u}).catch(()=>{});p&&(s(A,d),g=!1,d=A)},onError(v){i==null||i(v)}});w=b,p||w()}catch(m){i==null||i(m)}})(),()=>w()})()}function u_e(t,{address:e,args:n,batch:r=!0,event:s,events:i,fromBlock:o,onError:a,onLogs:c,poll:l,pollingInterval:u=t.pollingInterval,strict:d}){const h=typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="ipc"||t.transport.type==="fallback"&&(t.transport.transports[0].config.type==="webSocket"||t.transport.transports[0].config.type==="ipc")),f=d??!1;return h?(()=>{const w=Zr(["watchEvent",e,n,r,t.uid,s,u,o]);return ad(w,{onLogs:c,onError:a},m=>{let b;o!==void 0&&(b=o-1n);let v,A=!1;const C=ub(async()=>{var T;if(!A){try{v=await ut(t,WY,"createEventFilter")({address:e,args:n,event:s,events:i,strict:f,fromBlock:o})}catch{}A=!0;return}try{let x;if(v)x=await ut(t,JN,"getFilterChanges")({filter:v});else{const N=await ut(t,Y_,"getBlockNumber")({});b&&b!==N?x=await ut(t,GL,"getLogs")({address:e,args:n,event:s,events:i,fromBlock:b+1n,toBlock:N}):x=[],b=N}if(x.length===0)return;if(r)m.onLogs(x);else for(const N of x)m.onLogs([N])}catch(x){v&&x instanceof Pg&&(A=!1),(T=m.onError)==null||T.call(m,x)}},{emitOnBegin:!0,interval:u});return async()=>{v&&await ut(t,ZN,"uninstallFilter")({filter:v}),C()}})})():(()=>{let w=!0,m=()=>w=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const T=t.transport.transports.find(x=>x.config.type==="webSocket"||x.config.type==="ipc");return T?T.value:t.transport}return t.transport})(),v=i??(s?[s]:void 0);let A=[];v&&(A=[v.flatMap(x=>z_({abi:[x],eventName:x.name,args:n}))],s&&(A=A[0]));const{unsubscribe:C}=await b.subscribe({params:["logs",{address:e,topics:A}],onData(T){var N;if(!w)return;const x=T.result;try{const{eventName:S,args:D}=zL({abi:v??[],data:x.data,topics:x.topics,strict:f}),P=od(x,{args:D,eventName:S});c([P])}catch(S){let D,P;if(S instanceof eC||S instanceof $N){if(d)return;D=S.abiItem.name,P=(N=S.abiItem.inputs)==null?void 0:N.some(G=>!("name"in G&&G.name))}const $=od(x,{args:P?[]:{},eventName:D});c([$])}},onError(T){a==null||a(T)}});m=C,w||m()}catch(b){a==null||a(b)}})(),()=>m()})()}function SQ(t,{batch:e=!0,onError:n,onTransactions:r,poll:s,pollingInterval:i=t.pollingInterval}){return(typeof s<"u"?s:t.transport.type!=="webSocket"&&t.transport.type!=="ipc")?(()=>{const l=Zr(["watchPendingTransactions",t.uid,e,i]);return ad(l,{onTransactions:r,onError:n},u=>{let d;const h=ub(async()=>{var f;try{if(!d)try{d=await ut(t,zY,"createPendingTransactionFilter")({});return}catch(g){throw h(),g}const p=await ut(t,JN,"getFilterChanges")({filter:d});if(p.length===0)return;if(e)u.onTransactions(p);else for(const g of p)u.onTransactions([g])}catch(p){(f=u.onError)==null||f.call(u,p)}},{emitOnBegin:!0,interval:i});return async()=>{d&&await ut(t,ZN,"uninstallFilter")({filter:d}),h()}})})():(()=>{let l=!0,u=()=>l=!1;return(async()=>{try{const{unsubscribe:d}=await t.transport.subscribe({params:["newPendingTransactions"],onData(h){if(!l)return;const f=h.result;r([f])},onError(h){n==null||n(h)}});u=d,l||u()}catch(d){n==null||n(d)}})(),()=>u()})()}function d_e(t){var d,h,f;const{scheme:e,statement:n,...r}=((d=t.match(h_e))==null?void 0:d.groups)??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...l}=((h=t.match(f_e))==null?void 0:h.groups)??{},u=(f=t.split("Resources:")[1])==null?void 0:f.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...u?{resources:u}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const h_e=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,f_e=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function p_e(t){const{address:e,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=t;if(n&&r.domain!==n||s&&r.nonce!==s||i&&r.scheme!==i||r.expirationTime&&o>=r.expirationTime||r.notBefore&&o<r.notBefore)return!1;try{if(!r.address||!La(r.address,{strict:!1})||e&&!VN(r.address,e))return!1}catch{return!1}return!0}async function g_e(t,e){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...l}=e,u=d_e(s);if(!u.address||!p_e({address:n,domain:r,message:u,nonce:i,scheme:o,time:c}))return!1;const h=JY(s);return aU(t,{address:u.address,hash:h,signature:a,...l})}function m_e(t){return{call:e=>K_(t,e),createAccessList:e=>jY(t,e),createBlockFilter:()=>SEe(t),createContractEventFilter:e=>$K(t,e),createEventFilter:e=>WY(t,e),createPendingTransactionFilter:()=>zY(t),estimateContractGas:e=>Qbe(t,e),estimateGas:e=>qN(t,e),getBalance:e=>WL(t,e),getBlobBaseFee:()=>xEe(t),getBlock:e=>Il(t,e),getBlockNumber:e=>Y_(t,e),getBlockTransactionCount:e=>IEe(t,e),getBytecode:e=>r4(t,e),getChainId:()=>cb(t),getCode:e=>r4(t,e),getContractEvents:e=>lY(t,e),getEip712Domain:e=>TEe(t,e),getEnsAddress:e=>uEe(t,e),getEnsAvatar:e=>_Ee(t,e),getEnsName:e=>FY(t,e),getEnsResolver:e=>AEe(t,e),getEnsText:e=>$Y(t,e),getFeeHistory:e=>OEe(t,e),estimateFeesPerGas:e=>Dbe(t,e),getFilterChanges:e=>JN(t,e),getFilterLogs:e=>kEe(t,e),getGasPrice:()=>$L(t),getLogs:e=>GL(t,e),getProof:e=>JEe(t,e),estimateMaxPriorityFeePerGas:e=>kbe(t,e),getStorageAt:e=>ZEe(t,e),getTransaction:e=>eT(t,e),getTransactionConfirmations:e=>XEe(t,e),getTransactionCount:e=>FL(t,e),getTransactionReceipt:e=>wD(t,e),multicall:e=>XY(t,e),prepareTransactionRequest:e=>V_(t,e),readContract:e=>jl(t,e),sendRawTransaction:e=>XL(t,e),simulate:e=>bD(t,e),simulateBlocks:e=>bD(t,e),simulateCalls:e=>TCe(t,e),simulateContract:e=>Uve(t,e),verifyMessage:e=>a_e(t,e),verifySiweMessage:e=>g_e(t,e),verifyTypedData:e=>c_e(t,e),uninstallFilter:e=>ZN(t,e),waitForTransactionReceipt:e=>AQ(t,e),watchBlocks:e=>l_e(t,e),watchBlockNumber:e=>_Q(t,e),watchContractEvent:e=>Hve(t,e),watchEvent:e=>u_e(t,e),watchPendingTransactions:e=>SQ(t,e)}}async function y_e(t,{chain:e}){const{id:n,name:r,nativeCurrency:s,rpcUrls:i,blockExplorers:o}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:et(n),chainName:r,nativeCurrency:s,rpcUrls:i.default.http,blockExplorerUrls:o?Object.values(o).map(({url:a})=>a):void 0}]},{dedupe:!0,retryCount:0})}function w_e(t,e){const{abi:n,args:r,bytecode:s,...i}=e,o=QN({abi:n,args:r,bytecode:s});return Q_(t,{...i,...i.authorizationList?{to:null}:{},data:o})}async function b_e(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>j_(r))}async function v_e(t,e={}){const{account:n=t.account,chainId:r}=e,s=n?Nr(n):void 0,i=r?[s==null?void 0:s.address,[et(r)]]:[s==null?void 0:s.address],o=await t.request({method:"wallet_getCapabilities",params:i}),a={};for(const[c,l]of Object.entries(o)){a[Number(c)]={};for(let[u,d]of Object.entries(l))u==="addSubAccount"&&(u="unstable_addSubAccount"),a[Number(c)][u]=d}return typeof r=="number"?a[r]:a}async function E_e(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function xQ(t,e){var c;const{account:n=t.account,chainId:r,nonce:s}=e;if(!n)throw new um({docsPath:"/docs/eip7702/prepareAuthorization"});const i=Nr(n),o=(()=>{if(e.executor)return e.executor==="self"?e.executor:Nr(e.executor)})(),a={address:e.contractAddress??e.address,chainId:r,nonce:s};return typeof a.chainId>"u"&&(a.chainId=((c=t.chain)==null?void 0:c.id)??await ut(t,cb,"getChainId")({})),typeof a.nonce>"u"&&(a.nonce=await ut(t,FL,"getTransactionCount")({address:i.address,blockTag:"pending"}),(o==="self"||o!=null&&o.address&&VN(o.address,i.address))&&(a.nonce+=1)),a}async function C_e(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Wu(n))}async function __e(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function A_e(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function S_e(t,e){const{account:n=t.account}=e;if(!n)throw new um({docsPath:"/docs/eip7702/signAuthorization"});const r=Nr(n);if(!r.signAuthorization)throw new pS({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await xQ(t,e);return r.signAuthorization(s)}async function IQ(t,{account:e=t.account,message:n}){if(!e)throw new um({docsPath:"/docs/actions/wallet/signMessage"});const r=Nr(e);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?mw(n):n.raw instanceof Uint8Array?Da(n.raw):n.raw;return t.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function x_e(t,e){var l,u,d,h;const{account:n=t.account,chain:r=t.chain,...s}=e;if(!n)throw new um({docsPath:"/docs/actions/wallet/signTransaction"});const i=Nr(n);cm({account:i,...e});const o=await ut(t,cb,"getChainId")({});r!==null&&xY({currentChainId:o,chain:r});const a=(r==null?void 0:r.formatters)||((l=t.chain)==null?void 0:l.formatters),c=((u=a==null?void 0:a.transactionRequest)==null?void 0:u.format)||ab;return i.signTransaction?i.signTransaction({...s,chainId:o},{serializer:(h=(d=t.chain)==null?void 0:d.serializers)==null?void 0:h.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(s),chainId:et(o),from:i.address}]},{retryCount:0})}async function I_e(t,e){const{account:n=t.account,domain:r,message:s,primaryType:i}=e;if(!n)throw new um({docsPath:"/docs/actions/wallet/signTypedData"});const o=Nr(n),a={EIP712Domain:QY({domain:r}),...e.types};if(YY({domain:r,message:s,primaryType:i,types:a}),o.signTypedData)return o.signTypedData({domain:r,message:s,primaryType:i,types:a});const c=jEe({domain:r,message:s,primaryType:i,types:a});return t.request({method:"eth_signTypedData_v4",params:[o.address,c]},{retryCount:0})}async function N_e(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:et(e)}]},{retryCount:0})}async function T_e(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function R_e(t){return{addChain:e=>y_e(t,e),deployContract:e=>w_e(t,e),getAddresses:()=>b_e(t),getCallsStatus:e=>OY(t,e),getCapabilities:e=>v_e(t,e),getChainId:()=>cb(t),getPermissions:()=>E_e(t),prepareAuthorization:e=>xQ(t,e),prepareTransactionRequest:e=>V_(t,e),requestAddresses:()=>C_e(t),requestPermissions:e=>__e(t,e),sendCalls:e=>qve(t,e),sendRawTransaction:e=>XL(t,e),sendTransaction:e=>Q_(t,e),showCallsStatus:e=>A_e(t,e),signAuthorization:e=>S_e(t,e),signMessage:e=>IQ(t,e),signTransaction:e=>x_e(t,e),signTypedData:e=>I_e(t,e),switchChain:e=>N_e(t,e),waitForCallsStatus:e=>Vve(t,e),watchAsset:e=>T_e(t,e),writeContract:e=>NY(t,e)}}const BP={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return am(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},h4={async getMyTokensWithBalance(t){const e=Ve.state.address,n=z.state.activeCaipNetwork;if(!e||!n)return[];if(n.chainNamespace==="eip155"){const s=await this.getEIP155Balances(e,n);if(s)return this.filterLowQualityTokens(s)}const r=await mt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(r.balances)},async getEIP155Balances(t,e){var n,r;try{const s=BP.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await yt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await yt.walletGetAssets({account:t,chainFilter:[s]});return BP.isWalletGetAssetsResponse(o)?(o[s]||[]).map(c=>BP.createBalance(c,e.caipNetworkId)):null}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:z.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Rn=ar({tokenBalances:[],loading:!1}),P_e={state:Rn,subscribe(t){return ni(Rn,()=>t(Rn))},subscribeKey(t,e){return si(Rn,t,e)},setToken(t){t&&(Rn.token=Ig(t))},setTokenAmount(t){Rn.sendTokenAmount=t},setReceiverAddress(t){Rn.receiverAddress=t},setReceiverProfileImageUrl(t){Rn.receiverProfileImageUrl=t},setReceiverProfileName(t){Rn.receiverProfileName=t},setNetworkBalanceInUsd(t){Rn.networkBalanceInUSD=t},setLoading(t){Rn.loading=t},async sendToken(){var t;try{switch(bn.setLoading(!0),(t=z.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await bn.sendEvmToken();return;case"solana":await bn.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{bn.setLoading(!1)}},async sendEvmToken(){var n,r,s,i;const t=z.state.activeChain,e=(n=Ve.state.preferredAccountTypes)==null?void 0:n[t];if(!bn.state.sendTokenAmount||!bn.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!bn.state.token)throw new Error("A token is required");(r=bn.state.token)!=null&&r.address?(hr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ms.ACCOUNT_TYPES.SMART_ACCOUNT,token:bn.state.token.address,amount:bn.state.sendTokenAmount,network:((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await bn.sendERC20Token({receiverAddress:bn.state.receiverAddress,tokenAddress:bn.state.token.address,sendTokenAmount:bn.state.sendTokenAmount,decimals:bn.state.token.quantity.decimals})):(hr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ms.ACCOUNT_TYPES.SMART_ACCOUNT,token:bn.state.token.symbol||"",amount:bn.state.sendTokenAmount,network:((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)||""}}),await bn.sendNativeToken({receiverAddress:bn.state.receiverAddress,sendTokenAmount:bn.state.sendTokenAmount,decimals:bn.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Rn.loading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(Rn.lastRetry&&!ot.isAllowedRetry(Rn.lastRetry,30*Fn.ONE_SEC_MS))return Rn.loading=!1,[];try{if(s&&e&&n){const a=await h4.getMyTokensWithBalance();return Rn.tokenBalances=a,Rn.lastRetry=void 0,a}}catch(a){Rn.lastRetry=Date.now(),t==null||t(a),bc.showError("Token Balance Unavailable")}finally{Rn.loading=!1}return[]},fetchNetworkBalance(){if(Rn.tokenBalances.length===0)return;const t=h4.mapBalancesToSwapTokens(Rn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===z.getActiveNetworkTokenAddress());e&&(Rn.networkBalanceInUSD=e?oye.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a,c;jt.pushTransactionStack({});const e=t.receiverAddress,n=Ve.state.address,r=yt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await yt.sendTransaction({chainNamespace:"eip155",to:e,address:n,data:"0x",value:r??BigInt(0)}),hr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:((i=Ve.state.preferredAccountTypes)==null?void 0:i.eip155)===Ms.ACCOUNT_TYPES.SMART_ACCOUNT,token:((o=bn.state.token)==null?void 0:o.symbol)||"",amount:t.sendTokenAmount,network:((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)||""}}),(c=yt._getClient())==null||c.updateBalance("eip155"),bn.resetSend()},async sendERC20Token(t){jt.pushTransactionStack({onSuccess(){jt.replace("Account")}});const e=yt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(Ve.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=ot.getPlainAddress(t.tokenAddress);await yt.writeContract({fromAddress:Ve.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:uye.getERC20Abi(n),chainNamespace:"eip155"}),bn.resetSend()}},async sendSolanaToken(){var t;if(!bn.state.sendTokenAmount||!bn.state.receiverAddress)throw new Error("An amount and receiver address are required");jt.pushTransactionStack({onSuccess(){jt.replace("Account")}}),await yt.sendTransaction({chainNamespace:"solana",to:bn.state.receiverAddress,value:bn.state.sendTokenAmount}),(t=yt._getClient())==null||t.updateBalance("solana"),bn.resetSend()},resetSend(){Rn.token=void 0,Rn.sendTokenAmount=void 0,Rn.receiverAddress=void 0,Rn.receiverProfileImageUrl=void 0,Rn.receiverProfileName=void 0,Rn.loading=!1,Rn.tokenBalances=[]}},bn=ta(P_e),$P={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},hA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Pe=ar({chains:Jme(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),O_e={state:Pe,subscribe(t){return ni(Pe,()=>{t(Pe)})},subscribeKey(t,e){return si(Pe,t,e)},subscribeChainProp(t,e,n){let r;return ni(Pe.chains,()=>{var i;const s=n||Pe.activeChain;if(s){const o=(i=Pe.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ke.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=we.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Pe.noAdapters=!0),Pe.noAdapters||(Pe.activeChain=a==null?void 0:a.namespace,Pe.activeCaipNetwork=i,z.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Pe.activeChain&&Ol.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(h=>h.chainNamespace===u);z.state.chains.set(u,{namespace:u,networkState:ar({...hA,caipNetwork:d==null?void 0:d[0]}),accountState:ar($P),caipNetworks:d??[],...n}),z.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Pe.activeChain===t){const r=Array.from(Pe.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&z.setActiveCaipNetwork(s)}}Pe.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){Pe.chains.set(t.namespace,{namespace:t.namespace,networkState:{...hA,caipNetwork:r[0]},accountState:$P,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),z.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Pe.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Pe.chains.set(t.chainNamespace,{...e,caipNetworks:r}),z.setRequestedCaipNetworks(r,t.chainNamespace),$e.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Pe.chains.get(t);if(n){const o=((r=Pe.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&z.setActiveCaipNetwork(n.caipNetworks[0]),Pe.chains.set(t,{...n,caipNetworks:a}),z.setRequestedCaipNetworks(a||[],t),a.length===0&&$e.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Pe.chains.get(t);n&&(n.networkState={...n.networkState||hA,...e},Pe.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Pe.chains.get(t);if(r){const s={...r.accountState||$P,...e};Pe.chains.set(t,{...r,accountState:s}),(Pe.chains.size===1||Pe.activeChain===t)&&(e.caipAddress&&(Pe.activeCaipAddress=e.caipAddress),Ve.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Pe.chains.get(t);if(n){const r={...n.networkState||hA,...e};Pe.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){z.setChainAccountData(n,{[t]:e},r),t==="status"&&e==="disconnected"&&n&&$e.removeConnectorId(n)},setActiveNamespace(t){var r,s;Pe.activeChain=t;const e=t?Pe.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Pe.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Pe.activeCaipNetwork=n,z.setChainNetworkData(t,{caipNetwork:n}),Ke.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Ol.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Pe.activeChain!==t.chainNamespace&&z.setIsSwitchingNamespace(!0);const e=Pe.chains.get(t.chainNamespace);Pe.activeChain=t.chainNamespace,Pe.activeCaipNetwork=t,z.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Pe.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Pe.activeCaipAddress=void 0,z.setAccountProp("caipAddress",Pe.activeCaipAddress,t.chainNamespace),e&&Ve.replaceState(e.accountState),bn.resetSend(),Ol.set({activeChain:Pe.activeChain,selectedNetworkId:(i=Pe.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ke.setActiveCaipNetworkId(t.caipNetworkId),!z.checkIfSupportedNetwork(t.chainNamespace)&&we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&!yt.state.wcBasic&&z.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Pe.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==z.state.activeChain,n=(s=z.getNetworkData(t))==null?void 0:s.caipNetwork,r=z.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await z.switchActiveNetwork(r)},async switchActiveNetwork(t){var s;const e=z.state.chains.get(z.state.activeChain),n=!((s=e==null?void 0:e.caipNetworks)!=null&&s.some(i=>{var o;return i.id===((o=Pe.activeCaipNetwork)==null?void 0:o.id)})),r=z.getNetworkControllerClient(t.chainNamespace);if(r){try{await r.switchCaipNetwork(t),n&&gs.close()}catch{jt.goBack()}hr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Pe.activeChain,n=Pe.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Pe.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Pe.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Pe.activeChain;if(e&&(n=e),!n)return;const r=(s=Pe.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Pe.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Pe.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return ot.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Pe.chains.forEach(e=>{const n=z.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){z.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=z.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));$e.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Pe.chains.forEach(e=>{const n=z.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(){return Pe.activeCaipNetwork},getActiveCaipAddress(){return Pe.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Pe.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=z.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());z.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Pe.activeCaipNetwork,r=z.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Pe.activeChain)return!0;const e=z.getRequestedCaipNetworks(Pe.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){z.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=qV.caipNetworkIdToNumber((r=Pe.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Pe.activeChain;if(!e||!t)return!1;const n=z.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},getActiveNetworkTokenAddress(){var r,s;const t=((r=Pe.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Pe.activeCaipNetwork)==null?void 0:s.id)||1,n=Fn.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`},showUnsupportedChainUI(){gs.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Pe.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&Fn.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){z.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");Pe.activeCaipAddress=void 0,z.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),$e.removeConnectorId(e)},setIsSwitchingNamespace(t){Pe.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Pe.chains.forEach(s=>{Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Pe.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=z.state.chains.get(t))==null?void 0:e.accountState:Ve.state},getNetworkData(t){var n;const e=t||Pe.activeChain;if(e)return(n=z.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=z.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=$e.state.filterByNamespace;return(t?[Pe.chains.get(t)]:Array.from(Pe.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?z.getRequestedCaipNetworks(t):z.getAllRequestedCaipNetworks()}},z=ta(O_e),k_e={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},NQ=ot.getBlockchainApiUrl(),Di=ar({clientId:null,api:new B_({baseUrl:NQ,clientId:null}),supportedChains:{http:[],ws:[]}}),mt={state:Di,async get(t){const{st:e,sv:n}=mt.getSdkProperties(),r=we.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Di.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=we.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Di.supportedChains.http.length||await mt.getSupportedNetworks()}catch{return!1}return Di.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await mt.get({path:"v1/supported-chains"});return Di.supportedChains=t,t}catch{return Di.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await mt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ke.getIdentityFromCacheForAddress(t);if(r)return r;const s=await mt.get({path:`/v1/identity/${t}`,params:{sender:z.state.activeCaipAddress?ot.getPlainAddress(z.state.activeCaipAddress):void 0}});return Ke.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await mt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?mt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await mt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?mt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Di.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:we.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await mt.isNetworkSupported((r=z.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?mt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=mt.getSdkProperties();if(!await mt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return mt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await mt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Di.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:Fn.CONVERT_SLIPPAGE_TOLERANCE},projectId:we.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=mt.getSdkProperties();if(!await mt.isNetworkSupported((o=z.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return mt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=mt.getSdkProperties();if(!await mt.isNetworkSupported((l=z.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return bc.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ke.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await mt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ke.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/profile/reverse/${t}`,params:{sender:Ve.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await mt.isNetworkSupported((i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Di.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await mt.isNetworkSupported((a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Di.api.post({path:"/v1/generators/onrampurl",params:{projectId:we.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await mt.isNetworkSupported((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await mt.get({path:"/v1/onramp/options"})}catch{return k_e}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await mt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Di.api.post({path:"/v1/onramp/quote",params:{projectId:we.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await mt.isNetworkSupported((n=z.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?mt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await mt.isNetworkSupported((s=z.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Di.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:we.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Di.clientId=t,Di.api=new B_({baseUrl:NQ,clientId:t})}},ia=ar({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),D_e={state:ia,replaceState(t){t&&Object.assign(ia,Ig(t))},subscribe(t){return z.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return z.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){z.setAccountProp("status",t,e)},getCaipAddress(t){return z.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?ot.getPlainAddress(t):void 0;e===z.state.activeChain&&(z.state.activeCaipAddress=t),z.setAccountProp("caipAddress",t,e),z.setAccountProp("address",n,e)},setBalance(t,e,n){z.setAccountProp("balance",t,n),z.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){z.setAccountProp("profileName",t,e)},setProfileImage(t,e){z.setAccountProp("profileImage",t,e)},setUser(t,e){z.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){z.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){z.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){z.setAccountProp("currentTab",t,z.state.activeChain)},setTokenBalance(t,e){t&&z.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){z.setAccountProp("shouldUpdateToAddress",t,e)},setAllAccounts(t,e){z.setAccountProp("allAccounts",t,e)},addAddressLabel(t,e,n){const r=z.getAccountProp("addressLabels",n)||new Map;r.set(t,e),z.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=z.getAccountProp("addressLabels",e)||new Map;n.delete(t),z.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){z.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){z.setAccountProp("preferredAccountTypes",{...ia.preferredAccountTypes,[e]:t},e)},setPreferredAccountTypes(t){ia.preferredAccountTypes=t},setSocialProvider(t,e){t&&z.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){z.setAccountProp("socialWindow",t?Ig(t):void 0,e)},setFarcasterUrl(t,e){z.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;ia.balanceLoading=!0;const e=(i=z.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=z.state.activeCaipAddress,s=r?ot.getPlainAddress(r):void 0;if(ia.lastRetry&&!ot.isAllowedRetry(ia.lastRetry,30*Fn.ONE_SEC_MS))return ia.balanceLoading=!1,[];try{if(s&&e&&n){const c=(await mt.getBalance(s,e)).balances.filter(l=>l.quantity.decimals!=="0");return Ve.setTokenBalance(c,n),ia.lastRetry=void 0,ia.balanceLoading=!1,c}}catch(a){ia.lastRetry=Date.now(),t==null||t(a),bc.showError("Token Balance Unavailable")}finally{ia.balanceLoading=!1}return[]},resetAccount(t){z.resetAccount(t)}},Ve=ta(D_e),M_e={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=z.state.activeCaipNetwork,r=jt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=Ve.getCaipAddress(z.state.activeChain),o=t.chainNamespace!==z.state.activeChain,a=Ve.getCaipAddress(t.chainNamespace),l=$e.getConnectorId(z.state.activeChain)===Fe.CONNECTOR_ID.AUTH,u=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?jt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?jt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):jt.push("SwitchNetwork",{...r,network:t})}},Mi=ar({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),L_e={state:Mi,subscribe(t){return ni(Mi,()=>t(Mi))},subscribeKey(t,e){return si(Mi,t,e)},async open(t){var o,a;const e=Ve.state.status==="connected",n=t==null?void 0:t.namespace,r=z.state.activeChain,s=n&&n!==r,i=(o=z.getAccountData(t==null?void 0:t.namespace))==null?void 0:o.caipAddress;if(yt.state.wcBasic?at.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await at.prefetch({fetchConnectorImages:!e,fetchFeaturedWallets:!e,fetchRecommendedWallets:!e}),$e.setFilterByNamespace(t==null?void 0:t.namespace),gs.setLoading(!0,n),n&&s){const c=((a=z.getNetworkData(n))==null?void 0:a.caipNetwork)||z.getRequestedCaipNetworks(n)[0];c&&M_e.onSwitchNetwork({network:c,ignoreSwitchConfirmation:!0})}else{const c=z.state.noAdapters;we.state.manualWCControl||c&&!i?ot.isMobile()?jt.reset("AllWallets"):jt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?jt.reset(t.view,t.data):i?jt.reset("Account"):jt.reset("Connect")}Mi.open=!0,Ol.set({open:!0}),hr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!i}})},close(){const t=we.state.enableEmbedded,e=!!z.state.activeCaipAddress;Mi.open&&hr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),Mi.open=!1,jt.reset("Connect"),gs.clearLoading(),t?e?jt.replace("Account"):jt.push("Connect"):Ol.set({open:!1}),yt.resetUri()},setLoading(t,e){e&&Mi.loadingNamespaceMap.set(e,t),Mi.loading=t,Ol.set({loading:t})},clearLoading(){Mi.loadingNamespaceMap.clear(),Mi.loading=!1},shake(){Mi.shake||(Mi.shake=!0,setTimeout(()=>{Mi.shake=!1},500))}},gs=ta(L_e),aE={id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},ID={id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},U_e={providers:YV,selectedProvider:null,error:null,purchaseCurrency:aE,paymentCurrency:ID,purchaseCurrencies:[aE],paymentCurrencies:[],quotesLoading:!1},an=ar(U_e),B_e={state:an,subscribe(t){return ni(an,()=>t(an))},subscribeKey(t,e){return si(an,t,e)},setSelectedProvider(t){if(t&&t.name==="meld"){const e=z.state.activeChain===Fe.CHAIN.SOLANA?"SOL":"USDC",n=Ve.state.address??"",r=new URL(t.url);r.searchParams.append("publicKey",dye),r.searchParams.append("destinationCurrencyCode",e),r.searchParams.append("walletAddress",n),r.searchParams.append("externalCustomerId",we.state.projectId),an.selectedProvider={...t,url:r.toString()}}else an.selectedProvider=t},setOnrampProviders(t){if(Array.isArray(t)&&t.every(e=>typeof e=="string")){const e=t,n=YV.filter(r=>e.includes(r.name));an.providers=n}else an.providers=[]},setPurchaseCurrency(t){an.purchaseCurrency=t},setPaymentCurrency(t){an.paymentCurrency=t},setPurchaseAmount(t){ND.state.purchaseAmount=t},setPaymentAmount(t){ND.state.paymentAmount=t},async getAvailableCurrencies(){const t=await mt.getOnrampOptions();an.purchaseCurrencies=t.purchaseCurrencies,an.paymentCurrencies=t.paymentCurrencies,an.paymentCurrency=t.paymentCurrencies[0]||ID,an.purchaseCurrency=t.purchaseCurrencies[0]||aE,await at.fetchCurrencyImages(t.paymentCurrencies.map(e=>e.id)),await at.fetchTokenImages(t.purchaseCurrencies.map(e=>e.symbol))},async getQuote(){var t,e;an.quotesLoading=!0;try{const n=await mt.getOnrampQuote({purchaseCurrency:an.purchaseCurrency,paymentCurrency:an.paymentCurrency,amount:((t=an.paymentAmount)==null?void 0:t.toString())||"0",network:(e=an.purchaseCurrency)==null?void 0:e.symbol});return an.quotesLoading=!1,an.purchaseAmount=Number(n==null?void 0:n.purchaseAmount.amount),n}catch(n){return an.error=n.message,an.quotesLoading=!1,null}finally{an.quotesLoading=!1}},resetState(){an.selectedProvider=null,an.error=null,an.purchaseCurrency=aE,an.paymentCurrency=ID,an.purchaseCurrencies=[aE],an.paymentCurrencies=[],an.paymentAmount=void 0,an.purchaseAmount=void 0,an.quotesLoading=!1}},ND=ta(B_e),f4=2147483648,$_e={convertEVMChainIdToCoinType(t){if(t>=f4)throw new Error("Invalid chainId");return(f4|t)>>>0}},oa=ar({suggestions:[],loading:!1}),F_e={state:oa,subscribe(t){return ni(oa,()=>t(oa))},subscribeKey(t,e){return si(oa,t,e)},async resolveName(t){var e,n;try{return await mt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await mt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{oa.loading=!0,oa.suggestions=[];const e=await mt.getEnsNameSuggestions(t);return oa.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],oa.suggestions}catch(e){const n=cE.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{oa.loading=!1}},async getNamesForAddress(t){try{if(!z.state.activeCaipNetwork)return[];const n=Ke.getEnsFromCacheForAddress(t);if(n)return n;const r=await mt.reverseLookupEnsName({address:t});return Ke.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=cE.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=z.state.activeCaipNetwork;if(!e)throw new Error("Network not found");const n=Ve.state.address,r=$e.getAuthConnector();if(!n||!r)throw new Error("Address or auth connector not found");oa.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});jt.pushTransactionStack({onCancel(){jt.replace("RegisterAccountName")}});const i=await yt.signMessage(s);oa.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=$_e.convertEVMChainIdToCoinType(Number(o));await mt.registerEnsName({coinType:a,address:n,signature:i,message:s}),Ve.setProfileName(t,e.chainNamespace),jt.replace("RegisterAccountNameSuccess")}catch(s){const i=cE.parseEnsApiError(s,`Error registering name ${t}`);throw jt.replace("RegisterAccountName"),new Error(i)}finally{oa.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},cE=ta(F_e);var cU={exports:{}},Vy=typeof Reflect=="object"?Reflect:null,p4=Vy&&typeof Vy.apply=="function"?Vy.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},mS;Vy&&typeof Vy.ownKeys=="function"?mS=Vy.ownKeys:Object.getOwnPropertySymbols?mS=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:mS=function(e){return Object.getOwnPropertyNames(e)};function j_e(t){console&&console.warn&&console.warn(t)}var TQ=Number.isNaN||function(e){return e!==e};function Wn(){Wn.init.call(this)}cU.exports=Wn;cU.exports.once=G_e;Wn.EventEmitter=Wn;Wn.prototype._events=void 0;Wn.prototype._eventsCount=0;Wn.prototype._maxListeners=void 0;var g4=10;function rT(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Wn,"defaultMaxListeners",{enumerable:!0,get:function(){return g4},set:function(t){if(typeof t!="number"||t<0||TQ(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");g4=t}});Wn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Wn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||TQ(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function RQ(t){return t._maxListeners===void 0?Wn.defaultMaxListeners:t._maxListeners}Wn.prototype.getMaxListeners=function(){return RQ(this)};Wn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var s=e==="error",i=this._events;if(i!==void 0)s=s&&i.error===void 0;else if(!s)return!1;if(s){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")p4(c,this,n);else for(var l=c.length,u=MQ(c,l),r=0;r<l;++r)p4(u[r],this,n);return!0};function PQ(t,e,n,r){var s,i,o;if(rT(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),o=i[e]),o===void 0)o=i[e]=n,++t._eventsCount;else if(typeof o=="function"?o=i[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),s=RQ(t),s>0&&o.length>s&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,j_e(a)}return t}Wn.prototype.addListener=function(e,n){return PQ(this,e,n,!1)};Wn.prototype.on=Wn.prototype.addListener;Wn.prototype.prependListener=function(e,n){return PQ(this,e,n,!0)};function W_e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function OQ(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=W_e.bind(r);return s.listener=n,r.wrapFn=s,s}Wn.prototype.once=function(e,n){return rT(n),this.on(e,OQ(this,e,n)),this};Wn.prototype.prependOnceListener=function(e,n){return rT(n),this.prependListener(e,OQ(this,e,n)),this};Wn.prototype.removeListener=function(e,n){var r,s,i,o,a;if(rT(n),s=this._events,s===void 0)return this;if(r=s[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete s[e],s.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,i=o;break}if(i<0)return this;i===0?r.shift():z_e(r,i),r.length===1&&(s[e]=r[0]),s.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};Wn.prototype.off=Wn.prototype.removeListener;Wn.prototype.removeAllListeners=function(e){var n,r,s;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),o;for(s=0;s<i.length;++s)o=i[s],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(s=n.length-1;s>=0;s--)this.removeListener(e,n[s]);return this};function kQ(t,e,n){var r=t._events;if(r===void 0)return[];var s=r[e];return s===void 0?[]:typeof s=="function"?n?[s.listener||s]:[s]:n?H_e(s):MQ(s,s.length)}Wn.prototype.listeners=function(e){return kQ(this,e,!0)};Wn.prototype.rawListeners=function(e){return kQ(this,e,!1)};Wn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):DQ.call(t,e)};Wn.prototype.listenerCount=DQ;function DQ(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Wn.prototype.eventNames=function(){return this._eventsCount>0?mS(this._events):[]};function MQ(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function z_e(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function H_e(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function G_e(t,e){return new Promise(function(n,r){function s(o){t.removeListener(e,i),r(o)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",s),n([].slice.call(arguments))}LQ(t,e,i,{once:!0}),e!=="error"&&q_e(t,s,{once:!0})})}function q_e(t,e,n){typeof t.on=="function"&&LQ(t,"error",e,n)}function LQ(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function s(i){r.once&&t.removeEventListener(e,s),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ja=cU.exports;const lU=Zg(ja);var _e={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var TD=function(t,e){return TD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},TD(t,e)};function V_e(t,e){TD(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var RD=function(){return RD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},RD.apply(this,arguments)};function K_e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Y_e(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function Q_e(t,e){return function(n,r){e(n,r,t)}}function J_e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Z_e(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function X_e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function e1e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function t1e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function PD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function UQ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function n1e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(UQ(arguments[e]));return t}function r1e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function bC(t){return this instanceof bC?(this.v=t,this):new bC(t)}function s1e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof bC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function i1e(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:bC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function o1e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof PD=="function"?PD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function a1e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function c1e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function l1e(t){return t&&t.__esModule?t:{default:t}}function u1e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function d1e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const h1e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return RD},__asyncDelegator:i1e,__asyncGenerator:s1e,__asyncValues:o1e,__await:bC,__awaiter:Z_e,__classPrivateFieldGet:u1e,__classPrivateFieldSet:d1e,__createBinding:e1e,__decorate:Y_e,__exportStar:t1e,__extends:V_e,__generator:X_e,__importDefault:l1e,__importStar:c1e,__makeTemplateObject:a1e,__metadata:J_e,__param:Q_e,__read:UQ,__rest:K_e,__spread:n1e,__spreadArrays:r1e,__values:PD},Symbol.toStringTag,{value:"Module"})),sT=zW(h1e);var FP={},Zb={},m4;function f1e(){if(m4)return Zb;m4=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return Zb.delay=t,Zb}var Wf={},jP={},zf={},y4;function p1e(){return y4||(y4=1,Object.defineProperty(zf,"__esModule",{value:!0}),zf.ONE_THOUSAND=zf.ONE_HUNDRED=void 0,zf.ONE_HUNDRED=100,zf.ONE_THOUSAND=1e3),zf}var WP={},w4;function g1e(){return w4||(w4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(WP)),WP}var b4;function BQ(){return b4||(b4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sT;e.__exportStar(p1e(),t),e.__exportStar(g1e(),t)}(jP)),jP}var v4;function m1e(){if(v4)return Wf;v4=1,Object.defineProperty(Wf,"__esModule",{value:!0}),Wf.fromMiliseconds=Wf.toMiliseconds=void 0;const t=BQ();function e(r){return r*t.ONE_THOUSAND}Wf.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return Wf.fromMiliseconds=n,Wf}var E4;function y1e(){return E4||(E4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sT;e.__exportStar(f1e(),t),e.__exportStar(m1e(),t)}(FP)),FP}var Mm={},C4;function w1e(){if(C4)return Mm;C4=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const s=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:s})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Mm.Watch=t,Mm.default=t,Mm}var zP={},Xb={},_4;function b1e(){if(_4)return Xb;_4=1,Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.IWatch=void 0;class t{}return Xb.IWatch=t,Xb}var A4;function v1e(){return A4||(A4=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),sT.__exportStar(b1e(),t)}(zP)),zP}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=sT;e.__exportStar(y1e(),t),e.__exportStar(w1e(),t),e.__exportStar(v1e(),t),e.__exportStar(BQ(),t)})(_e);class dm{}let E1e=class extends dm{constructor(e){super()}};const S4=_e.FIVE_SECONDS,hm={pulse:"heartbeat_pulse"};let C1e=class $Q extends E1e{constructor(e){super(e),this.events=new ja.EventEmitter,this.interval=S4,this.interval=(e==null?void 0:e.interval)||S4}static async init(e){const n=new $Q(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),_e.toMiliseconds(this.interval))}pulse(){this.events.emit(hm.pulse)}};const _1e=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,A1e=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,S1e=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function x1e(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){I1e(t);return}return e}function I1e(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function fA(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!S1e.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(_1e.test(t)||A1e.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,x1e)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function fm(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function FQ(t,e){let n;const r=()=>{if(n)return n;const s=indexedDB.open(t);return s.onupgradeneeded=()=>s.result.createObjectStore(e),n=fm(s),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(s,i)=>r().then(o=>i(o.transaction(e,s).objectStore(e)))}let HP;function J_(){return HP||(HP=FQ("keyval-store","keyval")),HP}function x4(t,e=J_()){return e("readonly",n=>fm(n.get(t)))}function N1e(t,e,n=J_()){return n("readwrite",r=>(r.put(e,t),fm(r.transaction)))}function T1e(t,e=J_()){return e("readwrite",n=>(n.delete(t),fm(n.transaction)))}function R1e(t=J_()){return t("readwrite",e=>(e.clear(),fm(e.transaction)))}function P1e(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},fm(t.transaction)}function O1e(t=J_()){return t("readonly",e=>{if(e.getAllKeys)return fm(e.getAllKeys());const n=[];return P1e(e,r=>n.push(r.key)).then(()=>n)})}const k1e=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),D1e=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,s)=>typeof s=="string"&&s.match(/^\d+n$/)?BigInt(s.substring(0,s.length-1)):s)};function Mg(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return D1e(t)}catch{return t}}function cd(t){return typeof t=="string"?t:k1e(t)||""}function M1e(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var L1e=U1e;function U1e(t,e,n){var r=n&&n.stringify||M1e,s=1;if(typeof t=="object"&&t!==null){var i=e.length+s;if(i===1)return t;var o=new Array(i);o[0]=r(t);for(var a=1;a<i;a++)o[a]=r(e[a]);return o.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var l="",u=1-s,d=-1,h=t&&t.length||0,f=0;f<h;){if(t.charCodeAt(f)===37&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Number(e[u]),d=f+2,f++;break;case 105:if(u>=c||e[u]==null)break;d<f&&(l+=t.slice(d,f)),l+=Math.floor(Number(e[u])),d=f+2,f++;break;case 79:case 111:case 106:if(u>=c||e[u]===void 0)break;d<f&&(l+=t.slice(d,f));var p=typeof e[u];if(p==="string"){l+="'"+e[u]+"'",d=f+2,f++;break}if(p==="function"){l+=e[u].name||"<anonymous>",d=f+2,f++;break}l+=r(e[u]),d=f+2,f++;break;case 115:if(u>=c)break;d<f&&(l+=t.slice(d,f)),l+=String(e[u]),d=f+2,f++;break;case 37:d<f&&(l+=t.slice(d,f)),l+="%",d=f+2,f++,u--;break}++u}++f}return d===-1?t:(d<h&&(l+=t.slice(d)),l)}const I4=L1e;var oy=Dl;const vC=V1e().console||{},B1e={mapHttpRequest:pA,mapHttpResponse:pA,wrapRequestSerializer:GP,wrapResponseSerializer:GP,wrapErrorSerializer:GP,req:pA,res:pA,err:z1e};function $1e(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Dl(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||vC;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},s=$1e(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const o=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const a=t.level||"info",c=Object.create(n);c.log||(c.log=EC),Object.defineProperty(c,"levelVal",{get:u}),Object.defineProperty(c,"level",{get:d,set:h});const l={transmit:e,serialize:s,asObject:t.browser.asObject,levels:o,timestamp:H1e(t)};c.levels=Dl.levels,c.level=a,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=EC,c.serializers=r,c._serialize=s,c._stdErrSerialize=i,c.child=f,e&&(c._logEvent=OD());function u(){return this.level==="silent"?1/0:this.levels.values[this.level]}function d(){return this._level}function h(p){if(p!=="silent"&&!this.levels.values[p])throw Error("unknown level "+p);this._level=p,Lm(l,c,"error","log"),Lm(l,c,"fatal","error"),Lm(l,c,"warn","error"),Lm(l,c,"info","log"),Lm(l,c,"debug","log"),Lm(l,c,"trace","log")}function f(p,g){if(!p)throw new Error("missing bindings for child Pino");g=g||{},s&&p.serializers&&(g.serializers=p.serializers);const w=g.serializers;if(s&&w){var m=Object.assign({},r,w),b=t.browser.serialize===!0?Object.keys(m):s;delete p.serializers,iT([p],b,m,this._stdErrSerialize)}function v(A){this._childLevel=(A._childLevel|0)+1,this.error=Um(A,p,"error"),this.fatal=Um(A,p,"fatal"),this.warn=Um(A,p,"warn"),this.info=Um(A,p,"info"),this.debug=Um(A,p,"debug"),this.trace=Um(A,p,"trace"),m&&(this.serializers=m,this._serialize=b),e&&(this._logEvent=OD([].concat(A._logEvent.bindings,p)))}return v.prototype=this,new v(this)}return c}Dl.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Dl.stdSerializers=B1e;Dl.stdTimeFunctions=Object.assign({},{nullTime:jQ,epochTime:WQ,unixTime:G1e,isoTime:q1e});function Lm(t,e,n,r){const s=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?EC:s[n]?s[n]:vC[n]||vC[r]||EC,F1e(t,e,n)}function F1e(t,e,n){!t.transmit&&e[n]===EC||(e[n]=function(r){return function(){const i=t.timestamp(),o=new Array(arguments.length),a=Object.getPrototypeOf&&Object.getPrototypeOf(this)===vC?vC:this;for(var c=0;c<o.length;c++)o[c]=arguments[c];if(t.serialize&&!t.asObject&&iT(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(a,j1e(this,n,o,i)):r.apply(a,o),t.transmit){const l=t.transmit.level||e.level,u=Dl.levels.values[l],d=Dl.levels.values[n];if(d<u)return;W1e(this,{ts:i,methodLevel:n,methodValue:d,transmitValue:Dl.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},o)}}}(e[n]))}function j1e(t,e,n,r){t._serialize&&iT(n,t._serialize,t.serializers,t._stdErrSerialize);const s=n.slice();let i=s[0];const o={};r&&(o.time=r),o.level=Dl.levels.values[e];let a=(t._childLevel|0)+1;if(a<1&&(a=1),i!==null&&typeof i=="object"){for(;a--&&typeof s[0]=="object";)Object.assign(o,s.shift());i=s.length?I4(s.shift(),s):void 0}else typeof i=="string"&&(i=I4(s.shift(),s));return i!==void 0&&(o.msg=i),o}function iT(t,e,n,r){for(const s in t)if(r&&t[s]instanceof Error)t[s]=Dl.stdSerializers.err(t[s]);else if(typeof t[s]=="object"&&!Array.isArray(t[s]))for(const i in t[s])e&&e.indexOf(i)>-1&&i in n&&(t[s][i]=n[i](t[s][i]))}function Um(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var s=1;s<r.length;s++)r[s]=arguments[s-1];return t[n].apply(this,r)}}function W1e(t,e,n){const r=e.send,s=e.ts,i=e.methodLevel,o=e.methodValue,a=e.val,c=t._logEvent.bindings;iT(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=n.filter(function(l){return c.indexOf(l)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=o,r(i,t._logEvent,a),t._logEvent=OD(c)}function OD(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function z1e(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function H1e(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?jQ:WQ}function pA(){return{}}function GP(t){return t}function EC(){}function jQ(){return!1}function WQ(){return Date.now()}function G1e(){return Math.round(Date.now()/1e3)}function q1e(){return new Date(Date.now()).toISOString()}function V1e(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const Z_=Zg(oy),K1e={level:"info"},X_="custom_context",uU=1e3*1024;let Y1e=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},N4=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new Y1e(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},zQ=class{constructor(e,n=uU){this.level=e??"error",this.levelValue=oy.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new N4(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===oy.levels.values.error?console.error(e):n===oy.levels.values.warn?console.warn(e):n===oy.levels.values.debug?console.debug(e):n===oy.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(cd({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new N4(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(cd({extraMetadata:e})),new Blob(n,{type:"application/json"})}},Q1e=class{constructor(e,n=uU){this.baseChunkLogger=new zQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},J1e=class{constructor(e,n=uU){this.baseChunkLogger=new zQ(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var Z1e=Object.defineProperty,X1e=Object.defineProperties,eAe=Object.getOwnPropertyDescriptors,T4=Object.getOwnPropertySymbols,tAe=Object.prototype.hasOwnProperty,nAe=Object.prototype.propertyIsEnumerable,R4=(t,e,n)=>e in t?Z1e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vx=(t,e)=>{for(var n in e||(e={}))tAe.call(e,n)&&R4(t,n,e[n]);if(T4)for(var n of T4(e))nAe.call(e,n)&&R4(t,n,e[n]);return t},Kx=(t,e)=>X1e(t,eAe(e));function pm(t){return Kx(Vx({},t),{level:(t==null?void 0:t.level)||K1e.level})}function rAe(t,e=X_){return t[e]||""}function sAe(t,e,n=X_){return t[n]=e,t}function yo(t,e=X_){let n="";return typeof t.bindings>"u"?n=rAe(t,e):n=t.bindings().context||"",n}function iAe(t,e,n=X_){const r=yo(t,n);return r.trim()?`${r}/${e}`:e}function $s(t,e,n=X_){const r=iAe(t,e,n),s=t.child({context:r});return sAe(s,r,n)}function oAe(t){var e,n;const r=new Q1e((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Z_(Kx(Vx({},t.opts),{level:"trace",browser:Kx(Vx({},(n=t.opts)==null?void 0:n.browser),{write:s=>r.write(s)})})),chunkLoggerController:r}}function aAe(t){var e;const n=new J1e((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:Z_(Kx(Vx({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function oT(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?oAe(t):aAe(t)}function cAe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function HQ(t,...e){if(!cAe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function P4(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lAe(t,e){HQ(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Bm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qP=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function uAe(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function GQ(t){return typeof t=="string"&&(t=uAe(t)),HQ(t),t}let dAe=class{clone(){return this._cloneInto()}};function hAe(t){const e=r=>t().update(GQ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function qQ(t=32){if(Bm&&typeof Bm.getRandomValues=="function")return Bm.getRandomValues(new Uint8Array(t));if(Bm&&typeof Bm.randomBytes=="function")return Bm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function fAe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}let pAe=class extends dAe{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=qP(this.buffer)}update(e){P4(this);const{view:n,buffer:r,blockLen:s}=this;e=GQ(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=qP(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){P4(this),lAe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;fAe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=qP(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const gA=BigInt(2**32-1),kD=BigInt(32);function VQ(t,e=!1){return e?{h:Number(t&gA),l:Number(t>>kD&gA)}:{h:Number(t>>kD&gA)|0,l:Number(t&gA)|0}}function gAe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=VQ(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const mAe=(t,e)=>BigInt(t>>>0)<<kD|BigInt(e>>>0),yAe=(t,e,n)=>t>>>n,wAe=(t,e,n)=>t<<32-n|e>>>n,bAe=(t,e,n)=>t>>>n|e<<32-n,vAe=(t,e,n)=>t<<32-n|e>>>n,EAe=(t,e,n)=>t<<64-n|e>>>n-32,CAe=(t,e,n)=>t>>>n-32|e<<64-n,_Ae=(t,e)=>e,AAe=(t,e)=>t,SAe=(t,e,n)=>t<<n|e>>>32-n,xAe=(t,e,n)=>e<<n|t>>>32-n,IAe=(t,e,n)=>e<<n-32|t>>>64-n,NAe=(t,e,n)=>t<<n-32|e>>>64-n;function TAe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const RAe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),PAe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,OAe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),kAe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,DAe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),MAe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,$t={fromBig:VQ,split:gAe,toBig:mAe,shrSH:yAe,shrSL:wAe,rotrSH:bAe,rotrSL:vAe,rotrBH:EAe,rotrBL:CAe,rotr32H:_Ae,rotr32L:AAe,rotlSH:SAe,rotlSL:xAe,rotlBH:IAe,rotlBL:NAe,add:TAe,add3L:RAe,add3H:PAe,add4L:OAe,add4H:kAe,add5H:MAe,add5L:DAe},[LAe,UAe]=$t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Od=new Uint32Array(80),kd=new Uint32Array(80);let BAe=class extends pAe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)Od[v]=e.getUint32(n),kd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=Od[v-15]|0,C=kd[v-15]|0,T=$t.rotrSH(A,C,1)^$t.rotrSH(A,C,8)^$t.shrSH(A,C,7),x=$t.rotrSL(A,C,1)^$t.rotrSL(A,C,8)^$t.shrSL(A,C,7),N=Od[v-2]|0,S=kd[v-2]|0,D=$t.rotrSH(N,S,19)^$t.rotrBH(N,S,61)^$t.shrSH(N,S,6),P=$t.rotrSL(N,S,19)^$t.rotrBL(N,S,61)^$t.shrSL(N,S,6),$=$t.add4L(x,P,kd[v-7],kd[v-16]),G=$t.add4H($,T,D,Od[v-7],Od[v-16]);Od[v]=G|0,kd[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=$t.rotrSH(d,h,14)^$t.rotrSH(d,h,18)^$t.rotrBH(d,h,41),C=$t.rotrSL(d,h,14)^$t.rotrSL(d,h,18)^$t.rotrBL(d,h,41),T=d&f^~d&g,x=h&p^~h&w,N=$t.add5L(b,C,x,UAe[v],kd[v]),S=$t.add5H(N,m,A,T,LAe[v],Od[v]),D=N|0,P=$t.rotrSH(r,s,28)^$t.rotrBH(r,s,34)^$t.rotrBH(r,s,39),$=$t.rotrSL(r,s,28)^$t.rotrBL(r,s,34)^$t.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=$t.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=$t.add3L(D,$,W);r=$t.add3H(I,S,P,G),s=I|0}({h:r,l:s}=$t.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=$t.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=$t.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=$t.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=$t.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=$t.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=$t.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:m,l:b}=$t.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,m,b)}roundClean(){Od.fill(0),kd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const $Ae=hAe(()=>new BAe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dU=BigInt(0),KQ=BigInt(1),FAe=BigInt(2);function hU(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function fU(t){if(!hU(t))throw new Error("Uint8Array expected")}function VP(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const jAe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function pU(t){fU(t);let e="";for(let n=0;n<t.length;n++)e+=jAe[t[n]];return e}function YQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?dU:BigInt("0x"+t)}const nu={_0:48,_9:57,A:65,F:70,a:97,f:102};function O4(t){if(t>=nu._0&&t<=nu._9)return t-nu._0;if(t>=nu.A&&t<=nu.F)return t-(nu.A-10);if(t>=nu.a&&t<=nu.f)return t-(nu.a-10)}function QQ(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=O4(t.charCodeAt(i)),a=O4(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function WAe(t){return YQ(pU(t))}function yS(t){return fU(t),YQ(pU(Uint8Array.from(t).reverse()))}function JQ(t,e){return QQ(t.toString(16).padStart(e*2,"0"))}function DD(t,e){return JQ(t,e).reverse()}function ru(t,e,n){let r;if(typeof e=="string")try{r=QQ(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(hU(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function k4(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];fU(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const KP=t=>typeof t=="bigint"&&dU<=t;function zAe(t,e,n){return KP(t)&&KP(e)&&KP(n)&&e<=t&&t<n}function ev(t,e,n,r){if(!zAe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function HAe(t){let e;for(e=0;t>dU;t>>=KQ,e+=1);return e}const GAe=t=>(FAe<<BigInt(t-1))-KQ,qAe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||hU(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function gU(t,e,n={}){const r=(s,i,o)=>{const a=qAe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}function D4(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}const ms=BigInt(0),Or=BigInt(1),ap=BigInt(2),VAe=BigInt(3),MD=BigInt(4),M4=BigInt(5),L4=BigInt(8);function qr(t,e){const n=t%e;return n>=ms?n:e+n}function KAe(t,e,n){if(e<ms)throw new Error("invalid exponent, negatives unsupported");if(n<=ms)throw new Error("invalid modulus");if(n===Or)return ms;let r=Or;for(;e>ms;)e&Or&&(r=r*t%n),t=t*t%n,e>>=Or;return r}function Gc(t,e,n){let r=t;for(;e-- >ms;)r*=r,r%=n;return r}function U4(t,e){if(t===ms)throw new Error("invert: expected non-zero number");if(e<=ms)throw new Error("invert: expected positive modulus, got "+e);let n=qr(t,e),r=e,s=ms,i=Or;for(;n!==ms;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==Or)throw new Error("invert: does not exist");return qr(s,e)}function YAe(t){const e=(t-Or)/ap;let n,r,s;for(n=t-Or,r=0;n%ap===ms;n/=ap,r++);for(s=ap;s<t&&KAe(s,e,t)!==t-Or;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+Or)/MD;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+Or)/ap;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,Or<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function QAe(t){if(t%MD===VAe){const e=(t+Or)/MD;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%L4===M4){const e=(t-M4)/L4;return function(n,r){const s=n.mul(r,ap),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,ap),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return YAe(t)}const JAe=(t,e)=>(qr(t,e)&Or)===Or,ZAe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function XAe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ZAe.reduce((r,s)=>(r[s]="function",r),e);return gU(t,n)}function eSe(t,e,n){if(n<ms)throw new Error("invalid exponent, negatives unsupported");if(n===ms)return t.ONE;if(n===Or)return e;let r=t.ONE,s=e;for(;n>ms;)n&Or&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Or;return r}function tSe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function ZQ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function XQ(t,e,n=!1,r={}){if(t<=ms)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=ZQ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:GAe(s),ZERO:ms,ONE:Or,create:c=>qr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ms<=c&&c<t},is0:c=>c===ms,isOdd:c=>(c&Or)===Or,neg:c=>qr(-c,t),eql:(c,l)=>c===l,sqr:c=>qr(c*c,t),add:(c,l)=>qr(c+l,t),sub:(c,l)=>qr(c-l,t),mul:(c,l)=>qr(c*l,t),pow:(c,l)=>eSe(a,c,l),div:(c,l)=>qr(c*U4(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>U4(c,t),sqrt:r.sqrt||(c=>(o||(o=QAe(t)),o(a,c))),invertBatch:c=>tSe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?DD(c,i):JQ(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?yS(c):WAe(c)}});return Object.freeze(a)}const B4=BigInt(0),mA=BigInt(1);function YP(t,e){const n=e.negate();return t?n:e}function eJ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function QP(t,e){eJ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function nSe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function rSe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const JP=new WeakMap,tJ=new WeakMap;function ZP(t){return tJ.get(t)||1}function sSe(t,e){return{constTimeNegate:YP,hasPrecomputes(n){return ZP(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>B4;)r&mA&&(s=s.add(i)),i=i.double(),r>>=mA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=QP(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=QP(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=mA);const g=f,w=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(YP(m,r[g])):a=a.add(YP(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=QP(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===B4)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=mA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=JP.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&JP.set(r,s(i))),i},wNAFCached(n,r,s){const i=ZP(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=ZP(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){eJ(r,e),tJ.set(n,r),JP.delete(n)}}}function iSe(t,e,n,r){if(nSe(n,t),rSe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=HAe(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function oSe(t){return XAe(t.Fp),gU(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ZQ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Ya=BigInt(0),Li=BigInt(1),yA=BigInt(2),aSe=BigInt(8),cSe={zip215:!0};function lSe(t){const e=oSe(t);return gU(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function uSe(t){const e=lSe(t),{Fp:n,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:a,h:c}=e,l=yA<<BigInt(a*8)-Li,u=n.create,d=XQ(e.n,e.nBitLength),h=e.uvRatio||((I,R)=>{try{return{isValid:!0,value:n.sqrt(I*n.inv(R))}}catch{return{isValid:!1,value:Ya}}}),f=e.adjustScalarBytes||(I=>I),p=e.domain||((I,R,B)=>{if(VP("phflag",B),R.length||B)throw new Error("Contexts/pre-hash are not supported");return I});function g(I,R){ev("coordinate "+I,R,Ya,l)}function w(I){if(!(I instanceof v))throw new Error("ExtendedPoint expected")}const m=D4((I,R)=>{const{ex:B,ey:O,ez:M}=I,j=I.is0();R==null&&(R=j?aSe:n.inv(M));const V=u(B*R),te=u(O*R),Z=u(M*R);if(j)return{x:Ya,y:Li};if(Z!==Li)throw new Error("invZ was invalid");return{x:V,y:te}}),b=D4(I=>{const{a:R,d:B}=e;if(I.is0())throw new Error("bad point: ZERO");const{ex:O,ey:M,ez:j,et:V}=I,te=u(O*O),Z=u(M*M),X=u(j*j),ce=u(X*X),ge=u(te*R),Me=u(X*u(ge+Z)),it=u(ce+u(B*u(te*Z)));if(Me!==it)throw new Error("bad point: equation left != right (1)");const Je=u(O*M),bt=u(j*V);if(Je!==bt)throw new Error("bad point: equation left != right (2)");return!0});class v{constructor(R,B,O,M){this.ex=R,this.ey=B,this.ez=O,this.et=M,g("x",R),g("y",B),g("z",O),g("t",M),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(R){if(R instanceof v)throw new Error("extended point not allowed");const{x:B,y:O}=R||{};return g("x",B),g("y",O),new v(B,O,Li,u(B*O))}static normalizeZ(R){const B=n.invertBatch(R.map(O=>O.ez));return R.map((O,M)=>O.toAffine(B[M])).map(v.fromAffine)}static msm(R,B){return iSe(v,d,R,B)}_setWindowSize(R){T.setWindowSize(this,R)}assertValidity(){b(this)}equals(R){w(R);const{ex:B,ey:O,ez:M}=this,{ex:j,ey:V,ez:te}=R,Z=u(B*te),X=u(j*M),ce=u(O*te),ge=u(V*M);return Z===X&&ce===ge}is0(){return this.equals(v.ZERO)}negate(){return new v(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:R}=e,{ex:B,ey:O,ez:M}=this,j=u(B*B),V=u(O*O),te=u(yA*u(M*M)),Z=u(R*j),X=B+O,ce=u(u(X*X)-j-V),ge=Z+V,Me=ge-te,it=Z-V,Je=u(ce*Me),bt=u(ge*it),Nt=u(ce*it),At=u(Me*ge);return new v(Je,bt,At,Nt)}add(R){w(R);const{a:B,d:O}=e,{ex:M,ey:j,ez:V,et:te}=this,{ex:Z,ey:X,ez:ce,et:ge}=R;if(B===BigInt(-1)){const Xe=u((j-M)*(X+Z)),ct=u((j+M)*(X-Z)),Tt=u(ct-Xe);if(Tt===Ya)return this.double();const In=u(V*yA*ge),tt=u(te*yA*ce),Mn=tt+In,zt=ct+Xe,ke=tt-In,Nn=u(Mn*Tt),Pi=u(zt*ke),lr=u(Mn*ke),wd=u(Tt*zt);return new v(Nn,Pi,wd,lr)}const Me=u(M*Z),it=u(j*X),Je=u(te*O*ge),bt=u(V*ce),Nt=u((M+j)*(Z+X)-Me-it),At=bt-Je,ne=bt+Je,ie=u(it-B*Me),be=u(Nt*At),fe=u(ne*ie),ve=u(Nt*ie),ht=u(At*ne);return new v(be,fe,ht,ve)}subtract(R){return this.add(R.negate())}wNAF(R){return T.wNAFCached(this,R,v.normalizeZ)}multiply(R){const B=R;ev("scalar",B,Li,r);const{p:O,f:M}=this.wNAF(B);return v.normalizeZ([O,M])[0]}multiplyUnsafe(R,B=v.ZERO){const O=R;return ev("scalar",O,Ya,r),O===Ya?C:this.is0()||O===Li?this:T.wNAFCachedUnsafe(this,O,v.normalizeZ,B)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return T.unsafeLadder(this,r).is0()}toAffine(R){return m(this,R)}clearCofactor(){const{h:R}=e;return R===Li?this:this.multiplyUnsafe(R)}static fromHex(R,B=!1){const{d:O,a:M}=e,j=n.BYTES;R=ru("pointHex",R,j),VP("zip215",B);const V=R.slice(),te=R[j-1];V[j-1]=te&-129;const Z=yS(V),X=B?l:n.ORDER;ev("pointHex.y",Z,Ya,X);const ce=u(Z*Z),ge=u(ce-Li),Me=u(O*ce-M);let{isValid:it,value:Je}=h(ge,Me);if(!it)throw new Error("Point.fromHex: invalid y coordinate");const bt=(Je&Li)===Li,Nt=(te&128)!==0;if(!B&&Je===Ya&&Nt)throw new Error("Point.fromHex: x=0 and x_0=1");return Nt!==bt&&(Je=u(-Je)),v.fromAffine({x:Je,y:Z})}static fromPrivateKey(R){return S(R).point}toRawBytes(){const{x:R,y:B}=this.toAffine(),O=DD(B,n.BYTES);return O[O.length-1]|=R&Li?128:0,O}toHex(){return pU(this.toRawBytes())}}v.BASE=new v(e.Gx,e.Gy,Li,u(e.Gx*e.Gy)),v.ZERO=new v(Ya,Li,Li,Ya);const{BASE:A,ZERO:C}=v,T=sSe(v,a*8);function x(I){return qr(I,r)}function N(I){return x(yS(I))}function S(I){const R=n.BYTES;I=ru("private key",I,R);const B=ru("hashed private key",i(I),2*R),O=f(B.slice(0,R)),M=B.slice(R,2*R),j=N(O),V=A.multiply(j),te=V.toRawBytes();return{head:O,prefix:M,scalar:j,point:V,pointBytes:te}}function D(I){return S(I).pointBytes}function P(I=new Uint8Array,...R){const B=k4(...R);return N(i(p(B,ru("context",I),!!s)))}function $(I,R,B={}){I=ru("message",I),s&&(I=s(I));const{prefix:O,scalar:M,pointBytes:j}=S(R),V=P(B.context,O,I),te=A.multiply(V).toRawBytes(),Z=P(B.context,te,j,I),X=x(V+Z*M);ev("signature.s",X,Ya,r);const ce=k4(te,DD(X,n.BYTES));return ru("result",ce,n.BYTES*2)}const G=cSe;function W(I,R,B,O=G){const{context:M,zip215:j}=O,V=n.BYTES;I=ru("signature",I,2*V),R=ru("message",R),B=ru("publicKey",B,V),j!==void 0&&VP("zip215",j),s&&(R=s(R));const te=yS(I.slice(V,2*V));let Z,X,ce;try{Z=v.fromHex(B,j),X=v.fromHex(I.slice(0,V),j),ce=A.multiplyUnsafe(te)}catch{return!1}if(!j&&Z.isSmallOrder())return!1;const ge=P(M,X.toRawBytes(),Z.toRawBytes(),R);return X.add(Z.multiplyUnsafe(ge)).subtract(ce).clearCofactor().equals(v.ZERO)}return A._setWindowSize(8),{CURVE:e,getPublicKey:D,sign:$,verify:W,ExtendedPoint:v,utils:{getExtendedPublicKey:S,randomPrivateKey:()=>o(n.BYTES),precompute(I=8,R=v.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}}}}BigInt(0),BigInt(1);const mU=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),$4=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const dSe=BigInt(1),F4=BigInt(2);BigInt(3);const hSe=BigInt(5),fSe=BigInt(8);function pSe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=mU,o=t*t%i*t%i,a=Gc(o,F4,i)*o%i,c=Gc(a,dSe,i)*t%i,l=Gc(c,hSe,i)*c%i,u=Gc(l,e,i)*l%i,d=Gc(u,n,i)*u%i,h=Gc(d,r,i)*d%i,f=Gc(h,s,i)*h%i,p=Gc(f,s,i)*h%i,g=Gc(p,e,i)*l%i;return{pow_p_5_8:Gc(g,F4,i)*t%i,b2:o}}function gSe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function mSe(t,e){const n=mU,r=qr(e*e*e,n),s=qr(r*r*e,n),i=pSe(t*s).pow_p_5_8;let o=qr(t*r*i,n);const a=qr(e*o*o,n),c=o,l=qr(o*$4,n),u=a===t,d=a===qr(-t,n),h=a===qr(-t*$4,n);return u&&(o=c),(d||h)&&(o=l),JAe(o,n)&&(o=qr(-o,n)),{isValid:u||d,value:o}}const ySe=XQ(mU,void 0,!0),wSe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:ySe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:fSe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:$Ae,randomBytes:qQ,adjustScalarBytes:gSe,uvRatio:mSe},nJ=uSe(wSe),bSe="EdDSA",vSe="JWT",Yx=".",aT="base64url",rJ="utf8",sJ="utf8",ESe=":",CSe="did",_Se="key",j4="base58btc",ASe="z",SSe="K36",xSe=32;function yU(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function iJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?yU(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function oJ(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=iJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return yU(n)}function ISe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var NSe=ISe,TSe=NSe;const aJ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},RSe=t=>new TextEncoder().encode(t),PSe=t=>new TextDecoder().decode(t);let OSe=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},kSe=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cJ(this,e)}},DSe=class{constructor(e){this.decoders=e}or(e){return cJ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const cJ=(t,e)=>new DSe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let MSe=class{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new OSe(e,n,r),this.decoder=new kSe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const cT=({name:t,prefix:e,encode:n,decode:r})=>new MSe(t,e,n,r),e1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=TSe(n,e);return cT({prefix:t,name:e,encode:r,decode:i=>aJ(s(i))})},LSe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},USe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Fs=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>cT({prefix:e,name:t,encode(s){return USe(s,r,n)},decode(s){return LSe(s,r,n,t)}}),BSe=cT({prefix:"\0",name:"identity",encode:t=>PSe(t),decode:t=>RSe(t)});var $Se=Object.freeze({__proto__:null,identity:BSe});const FSe=Fs({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var jSe=Object.freeze({__proto__:null,base2:FSe});const WSe=Fs({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var zSe=Object.freeze({__proto__:null,base8:WSe});const HSe=e1({prefix:"9",name:"base10",alphabet:"0123456789"});var GSe=Object.freeze({__proto__:null,base10:HSe});const qSe=Fs({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),VSe=Fs({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var KSe=Object.freeze({__proto__:null,base16:qSe,base16upper:VSe});const YSe=Fs({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),QSe=Fs({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),JSe=Fs({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ZSe=Fs({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),XSe=Fs({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),exe=Fs({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),txe=Fs({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nxe=Fs({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),rxe=Fs({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var sxe=Object.freeze({__proto__:null,base32:YSe,base32upper:QSe,base32pad:JSe,base32padupper:ZSe,base32hex:XSe,base32hexupper:exe,base32hexpad:txe,base32hexpadupper:nxe,base32z:rxe});const ixe=e1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),oxe=e1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var axe=Object.freeze({__proto__:null,base36:ixe,base36upper:oxe});const cxe=e1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lxe=e1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var uxe=Object.freeze({__proto__:null,base58btc:cxe,base58flickr:lxe});const dxe=Fs({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),hxe=Fs({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),fxe=Fs({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),pxe=Fs({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var gxe=Object.freeze({__proto__:null,base64:dxe,base64pad:hxe,base64url:fxe,base64urlpad:pxe});const lJ=Array.from(""),mxe=lJ.reduce((t,e,n)=>(t[n]=e,t),[]),yxe=lJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function wxe(t){return t.reduce((e,n)=>(e+=mxe[n],e),"")}function bxe(t){const e=[];for(const n of t){const r=yxe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const vxe=cT({prefix:"",name:"base256emoji",encode:wxe,decode:bxe});var Exe=Object.freeze({__proto__:null,base256emoji:vxe}),Cxe=uJ,W4=128,_xe=-128,Axe=Math.pow(2,31);function uJ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Axe;)e[n++]=t&255|W4,t/=128;for(;t&_xe;)e[n++]=t&255|W4,t>>>=7;return e[n]=t|0,uJ.bytes=n-r+1,e}var Sxe=LD,xxe=128,z4=127;function LD(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw LD.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&z4)<<s:(o&z4)*Math.pow(2,s),s+=7}while(o>=xxe);return LD.bytes=i-r,n}var Ixe=Math.pow(2,7),Nxe=Math.pow(2,14),Txe=Math.pow(2,21),Rxe=Math.pow(2,28),Pxe=Math.pow(2,35),Oxe=Math.pow(2,42),kxe=Math.pow(2,49),Dxe=Math.pow(2,56),Mxe=Math.pow(2,63),Lxe=function(t){return t<Ixe?1:t<Nxe?2:t<Txe?3:t<Rxe?4:t<Pxe?5:t<Oxe?6:t<kxe?7:t<Dxe?8:t<Mxe?9:10},Uxe={encode:Cxe,decode:Sxe,encodingLength:Lxe},dJ=Uxe;const H4=(t,e,n=0)=>(dJ.encode(t,e,n),e),G4=t=>dJ.encodingLength(t),UD=(t,e)=>{const n=e.byteLength,r=G4(t),s=r+G4(n),i=new Uint8Array(s+n);return H4(t,i,0),H4(n,i,r),i.set(e,s),new Bxe(t,n,e,i)};let Bxe=class{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}};const hJ=({name:t,code:e,encode:n})=>new $xe(t,e,n);let $xe=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?UD(this.code,n):n.then(r=>UD(this.code,r))}else throw Error("Unknown type, must be binary type")}};const fJ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),Fxe=hJ({name:"sha2-256",code:18,encode:fJ("SHA-256")}),jxe=hJ({name:"sha2-512",code:19,encode:fJ("SHA-512")});var Wxe=Object.freeze({__proto__:null,sha256:Fxe,sha512:jxe});const pJ=0,zxe="identity",gJ=aJ,Hxe=t=>UD(pJ,gJ(t)),Gxe={code:pJ,name:zxe,encode:gJ,digest:Hxe};var qxe=Object.freeze({__proto__:null,identity:Gxe});new TextEncoder,new TextDecoder;const q4={...$Se,...jSe,...zSe,...GSe,...KSe,...sxe,...axe,...uxe,...gxe,...Exe};({...Wxe,...qxe});function mJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const V4=mJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),XP=mJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=iJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),yJ={utf8:V4,"utf-8":V4,hex:q4.base16,latin1:XP,ascii:XP,binary:XP,...q4};function lT(t,e="utf8"){const n=yJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function db(t,e="utf8"){const n=yJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?yU(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function K4(t){return Mg(lT(db(t,aT),rJ))}function Qx(t){return lT(db(cd(t),rJ),aT)}function wJ(t){const e=db(SSe,j4),n=ASe+lT(oJ([e,t]),j4);return[CSe,_Se,n].join(ESe)}function Vxe(t){return lT(t,aT)}function Kxe(t){return db(t,aT)}function Yxe(t){return db([Qx(t.header),Qx(t.payload)].join(Yx),sJ)}function Qxe(t){return[Qx(t.header),Qx(t.payload),Vxe(t.signature)].join(Yx)}function BD(t){const e=t.split(Yx),n=K4(e[0]),r=K4(e[1]),s=Kxe(e[2]),i=db(e.slice(0,2).join(Yx),sJ);return{header:n,payload:r,signature:s,data:i}}function Y4(t=qQ(xSe)){const e=nJ.getPublicKey(t);return{secretKey:oJ([t,e]),publicKey:e}}async function Jxe(t,e,n,r,s=_e.fromMiliseconds(Date.now())){const i={alg:bSe,typ:vSe},o=wJ(r.publicKey),a=s+n,c={iss:o,sub:t,aud:e,iat:s,exp:a},l=Yxe({header:i,payload:c}),u=nJ.sign(l,r.secretKey.slice(0,32));return Qxe({header:i,payload:c,signature:u})}var Q4=function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Zxe=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),Xxe=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),eIe=function(){function t(e,n,r,s){this.name=e,this.version=n,this.os=r,this.bot=s,this.type="bot-device"}return t}(),tIe=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),nIe=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),rIe=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,sIe=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,J4=3,iIe=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",rIe]],Z4=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function oIe(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new nIe:typeof navigator<"u"?cIe(navigator.userAgent):uIe()}function aIe(t){return t!==""&&iIe.reduce(function(e,n){var r=n[0],s=n[1];if(e)return e;var i=s.exec(t);return!!i&&[r,i]},!1)}function cIe(t){var e=aIe(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new tIe;var s=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);s?s.length<J4&&(s=Q4(Q4([],s,!0),dIe(J4-s.length),!0)):s=[];var i=s.join("."),o=lIe(t),a=sIe.exec(t);return a&&a[1]?new eIe(n,i,o,a[1]):new Zxe(n,i,o)}function lIe(t){for(var e=0,n=Z4.length;e<n;e++){var r=Z4[e],s=r[0],i=r[1],o=i.exec(t);if(o)return s}return null}function uIe(){var t=typeof process<"u"&&process.version;return t?new Xxe(process.version.slice(1)):null}function dIe(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.getLocalStorage=Jn.getLocalStorageOrThrow=Jn.getCrypto=Jn.getCryptoOrThrow=bJ=Jn.getLocation=Jn.getLocationOrThrow=wU=Jn.getNavigator=Jn.getNavigatorOrThrow=Lg=Jn.getDocument=Jn.getDocumentOrThrow=Jn.getFromWindowOrThrow=Jn.getFromWindow=void 0;function gm(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Jn.getFromWindow=gm;function hb(t){const e=gm(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Jn.getFromWindowOrThrow=hb;function hIe(){return hb("document")}Jn.getDocumentOrThrow=hIe;function fIe(){return gm("document")}var Lg=Jn.getDocument=fIe;function pIe(){return hb("navigator")}Jn.getNavigatorOrThrow=pIe;function gIe(){return gm("navigator")}var wU=Jn.getNavigator=gIe;function mIe(){return hb("location")}Jn.getLocationOrThrow=mIe;function yIe(){return gm("location")}var bJ=Jn.getLocation=yIe;function wIe(){return hb("crypto")}Jn.getCryptoOrThrow=wIe;function bIe(){return gm("crypto")}Jn.getCrypto=bIe;function vIe(){return hb("localStorage")}Jn.getLocalStorageOrThrow=vIe;function EIe(){return gm("localStorage")}Jn.getLocalStorage=EIe;var bU={};Object.defineProperty(bU,"__esModule",{value:!0});var vJ=bU.getWindowMetadata=void 0;const X4=Jn;function CIe(){let t,e;try{t=X4.getDocumentOrThrow(),e=X4.getLocationOrThrow()}catch{return null}function n(){const d=t.getElementsByTagName("link"),h=[];for(let f=0;f<d.length;f++){const p=d[f],g=p.getAttribute("rel");if(g&&g.toLowerCase().indexOf("icon")>-1){const w=p.getAttribute("href");if(w)if(w.toLowerCase().indexOf("https:")===-1&&w.toLowerCase().indexOf("http:")===-1&&w.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(w.indexOf("/")===0)m+=w;else{const b=e.pathname.split("/");b.pop();const v=b.join("/");m+=v+"/"+w}h.push(m)}else if(w.indexOf("//")===0){const m=e.protocol+w;h.push(m)}else h.push(w)}}return h}function r(...d){const h=t.getElementsByTagName("meta");for(let f=0;f<h.length;f++){const p=h[f],g=["itemprop","property","name"].map(w=>p.getAttribute(w)).filter(w=>w?d.includes(w):!1);if(g.length&&g){const w=p.getAttribute("content");if(w)return w}}return""}function s(){let d=r("name","og:site_name","og:title","twitter:title");return d||(d=t.title),d}function i(){return r("description","og:description","twitter:description","keywords")}const o=s(),a=i(),c=e.origin,l=n();return{description:a,url:c,icons:l,name:o}}vJ=bU.getWindowMetadata=CIe;function _Ie(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let l=0;l<e.length;l++)e[l]=255;for(let l=0;l<t.length;l++){const u=t.charAt(l),d=u.charCodeAt(0);if(e[d]!==255)throw new TypeError(u+" is ambiguous");e[d]=l}const n=t.length,r=t.charAt(0),s=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function o(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";let u=0,d=0,h=0;const f=l.length;for(;h!==f&&l[h]===0;)h++,u++;const p=(f-h)*i+1>>>0,g=new Uint8Array(p);for(;h!==f;){let b=l[h],v=0;for(let A=p-1;(b!==0||v<d)&&A!==-1;A--,v++)b+=256*g[A]>>>0,g[A]=b%n>>>0,b=b/n>>>0;if(b!==0)throw new Error("Non-zero carry");d=v,h++}let w=p-d;for(;w!==p&&g[w]===0;)w++;let m=r.repeat(u);for(;w<p;++w)m+=t.charAt(g[w]);return m}function a(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;let u=0,d=0,h=0;for(;l[u]===r;)d++,u++;const f=(l.length-u)*s+1>>>0,p=new Uint8Array(f);for(;u<l.length;){const b=l.charCodeAt(u);if(b>255)return;let v=e[b];if(v===255)return;let A=0;for(let C=f-1;(v!==0||A<h)&&C!==-1;C--,A++)v+=n*p[C]>>>0,p[C]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");h=A,u++}let g=f-h;for(;g!==f&&p[g]===0;)g++;const w=new Uint8Array(d+(f-g));let m=d;for(;g!==f;)w[m++]=p[g++];return w}function c(l){const u=a(l);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:c}}var AIe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const EJ=_Ie(AIe);function CJ(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function lE(t,e){e||(e=t.reduce((s,i)=>s+i.length,0));const n=CJ(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function SIe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var xIe=SIe,IIe=xIe;const NIe=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},TIe=t=>new TextEncoder().encode(t),RIe=t=>new TextDecoder().decode(t);class PIe{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class OIe{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return _J(this,e)}}class kIe{constructor(e){this.decoders=e}or(e){return _J(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const _J=(t,e)=>new kIe({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class DIe{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new PIe(e,n,r),this.decoder=new OIe(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const uT=({name:t,prefix:e,encode:n,decode:r})=>new DIe(t,e,n,r),t1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=IIe(n,e);return uT({prefix:t,name:e,encode:r,decode:i=>NIe(s(i))})},MIe=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},LIe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},js=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>uT({prefix:e,name:t,encode(s){return LIe(s,r,n)},decode(s){return MIe(s,r,n,t)}}),UIe=uT({prefix:"\0",name:"identity",encode:t=>RIe(t),decode:t=>TIe(t)}),BIe=Object.freeze(Object.defineProperty({__proto__:null,identity:UIe},Symbol.toStringTag,{value:"Module"})),$Ie=js({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),FIe=Object.freeze(Object.defineProperty({__proto__:null,base2:$Ie},Symbol.toStringTag,{value:"Module"})),jIe=js({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),WIe=Object.freeze(Object.defineProperty({__proto__:null,base8:jIe},Symbol.toStringTag,{value:"Module"})),zIe=t1({prefix:"9",name:"base10",alphabet:"0123456789"}),HIe=Object.freeze(Object.defineProperty({__proto__:null,base10:zIe},Symbol.toStringTag,{value:"Module"})),GIe=js({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qIe=js({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),VIe=Object.freeze(Object.defineProperty({__proto__:null,base16:GIe,base16upper:qIe},Symbol.toStringTag,{value:"Module"})),KIe=js({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),YIe=js({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),QIe=js({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),JIe=js({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ZIe=js({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XIe=js({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eNe=js({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tNe=js({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nNe=js({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),rNe=Object.freeze(Object.defineProperty({__proto__:null,base32:KIe,base32hex:ZIe,base32hexpad:eNe,base32hexpadupper:tNe,base32hexupper:XIe,base32pad:QIe,base32padupper:JIe,base32upper:YIe,base32z:nNe},Symbol.toStringTag,{value:"Module"})),sNe=t1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),iNe=t1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),oNe=Object.freeze(Object.defineProperty({__proto__:null,base36:sNe,base36upper:iNe},Symbol.toStringTag,{value:"Module"})),aNe=t1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),cNe=t1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),lNe=Object.freeze(Object.defineProperty({__proto__:null,base58btc:aNe,base58flickr:cNe},Symbol.toStringTag,{value:"Module"})),uNe=js({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dNe=js({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hNe=js({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),fNe=js({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),pNe=Object.freeze(Object.defineProperty({__proto__:null,base64:uNe,base64pad:dNe,base64url:hNe,base64urlpad:fNe},Symbol.toStringTag,{value:"Module"})),AJ=Array.from(""),gNe=AJ.reduce((t,e,n)=>(t[n]=e,t),[]),mNe=AJ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function yNe(t){return t.reduce((e,n)=>(e+=gNe[n],e),"")}function wNe(t){const e=[];for(const n of t){const r=mNe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const bNe=uT({prefix:"",name:"base256emoji",encode:yNe,decode:wNe}),vNe=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:bNe},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const eF={...BIe,...FIe,...WIe,...HIe,...VIe,...rNe,...oNe,...lNe,...pNe,...vNe};function SJ(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const tF=SJ("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),eO=SJ("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=CJ(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),xJ={utf8:tF,"utf-8":tF,hex:eF.base16,latin1:eO,ascii:eO,binary:eO,...eF};function Ra(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function uo(t,e="utf8"){const n=xJ[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const ENe={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},CNe="PARSE_ERROR",_Ne="INVALID_REQUEST",ANe="METHOD_NOT_FOUND",SNe="INVALID_PARAMS",IJ="INTERNAL_ERROR",vU="SERVER_ERROR",xNe=[-32700,-32600,-32601,-32602,-32603],uE={[CNe]:{code:-32700,message:"Parse error"},[_Ne]:{code:-32600,message:"Invalid Request"},[ANe]:{code:-32601,message:"Method not found"},[SNe]:{code:-32602,message:"Invalid params"},[IJ]:{code:-32603,message:"Internal error"},[vU]:{code:-32e3,message:"Server error"}},NJ=vU;function INe(t){return xNe.includes(t)}function nF(t){return Object.keys(uE).includes(t)?uE[t]:uE[NJ]}function NNe(t){const e=Object.values(uE).find(n=>n.code===t);return e||uE[NJ]}function TJ(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var RJ={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $D=function(t,e){return $D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},$D(t,e)};function TNe(t,e){$D(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var FD=function(){return FD=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},FD.apply(this,arguments)};function RNe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function PNe(t,e,n,r){var s=arguments.length,i=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(i=(s<3?o(i):s>3?o(e,n,i):o(e,n))||i);return s>3&&i&&Object.defineProperty(e,n,i),i}function ONe(t,e){return function(n,r){e(n,r,t)}}function kNe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function DNe(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function MNe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=l[0]&2?s.return:l[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,l[1])).done)return i;switch(s=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function LNe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function UNe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function PJ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function BNe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(PJ(arguments[e]));return t}function $Ne(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var i=arguments[e],o=0,a=i.length;o<a;o++,s++)r[s]=i[o];return r}function CC(t){return this instanceof CC?(this.v=t,this):new CC(t)}function FNe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(h){r[h]&&(s[h]=function(f){return new Promise(function(p,g){i.push([h,f,p,g])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(p){d(i[0][3],p)}}function c(h){h.value instanceof CC?Promise.resolve(h.value.v).then(l,u):d(i[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function jNe(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,i){e[s]=t[s]?function(o){return(n=!n)?{value:CC(t[s](o)),done:s==="return"}:i?i(o):o}:i}}function WNe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jD=="function"?jD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},o)}}function zNe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function HNe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function GNe(t){return t&&t.__esModule?t:{default:t}}function qNe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function VNe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const KNe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return FD},__asyncDelegator:jNe,__asyncGenerator:FNe,__asyncValues:WNe,__await:CC,__awaiter:DNe,__classPrivateFieldGet:qNe,__classPrivateFieldSet:VNe,__createBinding:LNe,__decorate:PNe,__exportStar:UNe,__extends:TNe,__generator:MNe,__importDefault:GNe,__importStar:HNe,__makeTemplateObject:zNe,__metadata:kNe,__param:ONe,__read:PJ,__rest:RNe,__spread:BNe,__spreadArrays:$Ne,__values:jD},Symbol.toStringTag,{value:"Module"})),YNe=zW(KNe);var su={},rF;function QNe(){if(rF)return su;rF=1,Object.defineProperty(su,"__esModule",{value:!0}),su.isBrowserCryptoAvailable=su.getSubtleCrypto=su.getBrowerCrypto=void 0;function t(){return(gl==null?void 0:gl.crypto)||(gl==null?void 0:gl.msCrypto)||{}}su.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}su.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return su.isBrowserCryptoAvailable=n,su}var iu={},sF;function JNe(){if(sF)return iu;sF=1,Object.defineProperty(iu,"__esModule",{value:!0}),iu.isBrowser=iu.isNode=iu.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}iu.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}iu.isNode=e;function n(){return!t()&&!e()}return iu.isBrowser=n,iu}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=YNe;e.__exportStar(QNe(),t),e.__exportStar(JNe(),t)})(RJ);function el(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function Ip(t=6){return BigInt(el(t))}function Dh(t,e,n){return{id:n||el(),jsonrpc:"2.0",method:t,params:e}}function dT(t,e){return{id:t,jsonrpc:"2.0",result:e}}function hT(t,e,n){return{id:t,jsonrpc:"2.0",error:ZNe(e)}}function ZNe(t,e){return typeof t>"u"?nF(IJ):(typeof t=="string"&&(t=Object.assign(Object.assign({},nF(vU)),{message:t})),INe(t.code)&&(t=NNe(t.code)),t)}let XNe=class{},eTe=class extends XNe{constructor(){super()}},tTe=class extends eTe{constructor(e){super()}};const nTe="^https?:",rTe="^wss?:";function sTe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function OJ(t,e){const n=sTe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function iF(t){return OJ(t,nTe)}function oF(t){return OJ(t,rTe)}function iTe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function kJ(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function EU(t){return kJ(t)&&"method"in t}function fT(t){return kJ(t)&&(tl(t)||Ca(t))}function tl(t){return"result"in t}function Ca(t){return"error"in t}let Wa=class extends tTe{constructor(e){super(e),this.events=new ja.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(Dh(e.method,e.params||[],e.id||Ip().toString()),n)}async requestStrict(e,n){return new Promise(async(r,s)=>{if(!this.connection.connected)try{await this.open()}catch(i){s(i)}this.events.on(`${e.id}`,i=>{Ca(i)?s(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){s(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),fT(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const oTe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),aTe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",aF=t=>t.split("?")[0],cF=10,cTe=oTe();let lTe=class{constructor(e){if(this.url=e,this.events=new ja.EventEmitter,this.registering=!1,!oF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(cd(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!oF(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return s(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const s=RJ.isReactNative()?void 0:{rejectUnauthorized:!iTe(e)},i=new cTe(e,[],s);aTe()?i.onerror=o=>{const a=o;r(this.emitError(a.error))}:i.on("error",o=>{r(this.emitError(o))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Mg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=hT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return TJ(e,aF(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>cF&&this.events.setMaxListeners(cF)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${aF(this.url)}`));return this.events.emit("register_error",n),n}};var WD={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof gl<"u"&&gl,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof gl<"u"&&gl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function l(I){return I&&DataView.prototype.isPrototypeOf(I)}if(c.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(I){return I&&u.indexOf(Object.prototype.toString.call(I))>-1};function h(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function f(I){return typeof I!="string"&&(I=String(I)),I}function p(I){var R={next:function(){var B=I.shift();return{done:B===void 0,value:B}}};return c.iterable&&(R[Symbol.iterator]=function(){return R}),R}function g(I){this.map={},I instanceof g?I.forEach(function(R,B){this.append(B,R)},this):Array.isArray(I)?I.forEach(function(R){if(R.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+R.length);this.append(R[0],R[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(R){this.append(R,I[R])},this)}g.prototype.append=function(I,R){I=h(I),R=f(R);var B=this.map[I];this.map[I]=B?B+", "+R:R},g.prototype.delete=function(I){delete this.map[h(I)]},g.prototype.get=function(I){return I=h(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(h(I))},g.prototype.set=function(I,R){this.map[h(I)]=f(R)},g.prototype.forEach=function(I,R){for(var B in this.map)this.map.hasOwnProperty(B)&&I.call(R,this.map[B],B,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(R,B){I.push(B)}),p(I)},g.prototype.values=function(){var I=[];return this.forEach(function(R){I.push(R)}),p(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(R,B){I.push([B,R])}),p(I)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function m(I){return new Promise(function(R,B){I.onload=function(){R(I.result)},I.onerror=function(){B(I.error)}})}function b(I){var R=new FileReader,B=m(R);return R.readAsArrayBuffer(I),B}function v(I){var R=new FileReader,B=m(R),O=/charset=([A-Za-z0-9_-]+)/.exec(I.type),M=O?O[1]:"utf-8";return R.readAsText(I,M),B}function A(I){for(var R=new Uint8Array(I),B=new Array(R.length),O=0;O<R.length;O++)B[O]=String.fromCharCode(R[O]);return B.join("")}function C(I){if(I.slice)return I.slice(0);var R=new Uint8Array(I.byteLength);return R.set(new Uint8Array(I)),R.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:c.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:c.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():c.arrayBuffer&&c.blob&&l(I)?(this._bodyArrayBuffer=C(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||d(I))?this._bodyArrayBuffer=C(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return v(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(D)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(I){var R=I.toUpperCase();return x.indexOf(R)>-1?R:I}function S(I,R){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');R=R||{};var B=R.body;if(I instanceof S){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,R.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!B&&I._bodyInit!=null&&(B=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=R.credentials||this.credentials||"same-origin",(R.headers||!this.headers)&&(this.headers=new g(R.headers)),this.method=N(R.method||this.method||"GET"),this.mode=R.mode||this.mode||null,this.signal=R.signal||this.signal||function(){if("AbortController"in a){var j=new AbortController;return j.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(R.cache==="no-store"||R.cache==="no-cache")){var O=/([?&])_=[^&]*/;if(O.test(this.url))this.url=this.url.replace(O,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})};function D(I){var R=new FormData;return I.trim().split("&").forEach(function(B){if(B){var O=B.split("="),M=O.shift().replace(/\+/g," "),j=O.join("=").replace(/\+/g," ");R.append(decodeURIComponent(M),decodeURIComponent(j))}}),R}function P(I){var R=new g,B=I.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(O){return O.indexOf(`
`)===0?O.substr(1,O.length):O}).forEach(function(O){var M=O.split(":"),j=M.shift().trim();if(j){var V=M.join(":").trim();try{R.append(j,V)}catch(te){console.warn("Response "+te.message)}}}),R}T.call(S.prototype);function $(I,R){if(!(this instanceof $))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(R||(R={}),this.type="default",this.status=R.status===void 0?200:R.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=R.statusText===void 0?"":""+R.statusText,this.headers=new g(R.headers),this.url=R.url||"",this._initBody(I)}T.call($.prototype),$.prototype.clone=function(){return new $(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},$.error=function(){var I=new $(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var G=[301,302,303,307,308];$.redirect=function(I,R){if(G.indexOf(R)===-1)throw new RangeError("Invalid status code");return new $(null,{status:R,headers:{location:I}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(R,B){this.message=R,this.name=B;var O=Error(R);this.stack=O.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function W(I,R){return new Promise(function(B,O){var M=new S(I,R);if(M.signal&&M.signal.aborted)return O(new o.DOMException("Aborted","AbortError"));var j=new XMLHttpRequest;function V(){j.abort()}j.onload=function(){var X={statusText:j.statusText,headers:P(j.getAllResponseHeaders()||"")};M.url.indexOf("file://")===0&&(j.status<200||j.status>599)?X.status=200:X.status=j.status,X.url="responseURL"in j?j.responseURL:X.headers.get("X-Request-URL");var ce="response"in j?j.response:j.responseText;setTimeout(function(){B(new $(ce,X))},0)},j.onerror=function(){setTimeout(function(){O(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){O(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){O(new o.DOMException("Aborted","AbortError"))},0)};function te(X){try{return X===""&&a.location.href?a.location.href:X}catch{return X}}if(j.open(M.method,te(M.url),!0),M.credentials==="include"?j.withCredentials=!0:M.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(c.blob?j.responseType="blob":c.arrayBuffer&&(j.responseType="arraybuffer")),R&&typeof R.headers=="object"&&!(R.headers instanceof g||a.Headers&&R.headers instanceof a.Headers)){var Z=[];Object.getOwnPropertyNames(R.headers).forEach(function(X){Z.push(h(X)),j.setRequestHeader(X,f(R.headers[X]))}),M.headers.forEach(function(X,ce){Z.indexOf(ce)===-1&&j.setRequestHeader(ce,X)})}else M.headers.forEach(function(X,ce){j.setRequestHeader(ce,X)});M.signal&&(M.signal.addEventListener("abort",V),j.onreadystatechange=function(){j.readyState===4&&M.signal.removeEventListener("abort",V)}),j.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=g,a.Request=S,a.Response=$),o.Headers=g,o.Request=S,o.Response=$,o.fetch=W,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=n.fetch?n:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(WD,WD.exports);var uTe=WD.exports;const lF=Zg(uTe);var dTe=Object.defineProperty,hTe=Object.defineProperties,fTe=Object.getOwnPropertyDescriptors,uF=Object.getOwnPropertySymbols,pTe=Object.prototype.hasOwnProperty,gTe=Object.prototype.propertyIsEnumerable,dF=(t,e,n)=>e in t?dTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,hF=(t,e)=>{for(var n in e||(e={}))pTe.call(e,n)&&dF(t,n,e[n]);if(uF)for(var n of uF(e))gTe.call(e,n)&&dF(t,n,e[n]);return t},fF=(t,e)=>hTe(t,fTe(e));const mTe={Accept:"application/json","Content-Type":"application/json"},yTe="POST",pF={headers:mTe,method:yTe},gF=10;let Bc=class{constructor(e,n=!1){if(this.url=e,this.disableProviderPing=n,this.events=new ja.EventEmitter,this.isAvailable=!1,this.registering=!1,!iF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=n}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const n=cd(e),r=await(await lF(this.url,fF(hF({},pF),{body:n}))).json();this.onPayload({data:r})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!iF(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,s)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),s(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const n=cd({id:1,jsonrpc:"2.0",method:"test",params:[]});await lF(e,fF(hF({},pF),{body:n}))}this.onOpen()}catch(n){const r=this.parseError(n);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?Mg(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),s=r.message||r.toString(),i=hT(e,s);this.events.emit("payload",i)}parseError(e,n=this.url){return TJ(e,n,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>gF&&this.events.setMaxListeners(gF)}};const dE={getSIWX(){return we.state.siwx},async initializeIfEnabled(){var i;const t=we.state.siwx,e=z.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(z.checkIfSupportedNetwork(n))try{if((await t.getSessions(`${n}:${r}`,s)).length)return;await gs.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),hr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=yt._getClient())==null?void 0:i.disconnect().catch(console.error)),jt.reset("Connect"),bc.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=we.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork(),r=yt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();$e.getConnectorId(n.chainNamespace)===Fe.CONNECTOR_ID.AUTH&&jt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),gs.close(),hr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!gs.state.open||jt.state.view==="ApproveTransaction")&&await gs.open({view:"SIWXSignMessage"}),i.isSmartAccount?bc.showError("This application might not support Smart Accounts"):bc.showError("Signature declined"),hr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e))?await yt.disconnect():gs.close(),jt.reset("Connect"),hr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const t=we.state.siwx,e=ot.getPlainAddress(z.getActiveCaipAddress()),n=z.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=jt.state.view==="ApproveTransaction",r=jt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=dE.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=z.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(bc.showLoading("Authenticating...",{autoClose:!1}),Ve.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),hr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:dE.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),hr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:dE.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{bc.hide()}}return!0},getSIWXEventProperties(){var e,n;const t=z.state.activeChain;return{network:((e=z.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:((n=Ve.state.preferredAccountTypes)==null?void 0:n[t])===Ms.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}};function wA(t,e){return $e.getConnectorId(t)===e}function wTe(t){const e=Array.from(z.state.chains.keys());let n=[];return t?(n.push([t,z.state.chains.get(t)]),wA(t,Fe.CONNECTOR_ID.WALLET_CONNECT)?e.forEach(r=>{r!==t&&wA(r,Fe.CONNECTOR_ID.WALLET_CONNECT)&&n.push([r,z.state.chains.get(r)])}):wA(t,Fe.CONNECTOR_ID.AUTH)&&e.forEach(r=>{r!==t&&wA(r,Fe.CONNECTOR_ID.AUTH)&&n.push([r,z.state.chains.get(r)])})):n=Array.from(z.state.chains.entries()),n}const Qi={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"},Jx={NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[Fe.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Fe.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[Fe.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[Fe.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[Fe.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[Fe.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[Fe.CONNECTOR_ID.INJECTED]:"Browser Wallet",[Fe.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[Fe.CONNECTOR_ID.COINBASE]:"Coinbase",[Fe.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[Fe.CONNECTOR_ID.LEDGER]:"Ledger",[Fe.CONNECTOR_ID.SAFE]:"Safe"}},pT={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${Qi.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())}},bTe=new AbortController,yl={EmbeddedWalletAbortController:bTe,UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${vTe()?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};function vTe(){return typeof window<"u"}const ETe={createLogger(t,e="error"){const n=pm({level:e}),{logger:r}=oT({opts:n});return r.error=(...s)=>{for(const i of s)if(i instanceof Error){t(i,...s);return}t(void 0,...s)},r}},CTe="rpc.walletconnect.org";function mF(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const tO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],ay={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===CTe}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:Fe.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${Fe.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return tO.includes(e)?mF(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Jx.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>ay.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ta(a.url,a.config))}),tO.includes(t.caipNetworkId)&&r.push(Ta(mF(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ta(a))}),Gx(r)},extendWagmiTransports(t,e,n){if(tO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Gx([n,Ta(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:Fe.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ke.getActiveCaipNetworkId(),n=z.getAllRequestedCaipNetworks(),r=Array.from(((c=z.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},Zx={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},Ui=ar({providers:{...Zx},providerIds:{...Zx}}),Bn={state:Ui,subscribeKey(t,e){return si(Ui,t,e)},subscribe(t){return ni(Ui,()=>{t(Ui)})},subscribeProviders(t){return ni(Ui.providers,()=>t(Ui.providers))},setProvider(t,e){e&&(Ui.providers[t]=Ig(e))},getProvider(t){return Ui.providers[t]},setProviderId(t,e){e&&(Ui.providerIds[t]=e)},getProviderId(t){if(t)return Ui.providerIds[t]},reset(){Ui.providers={...Zx},Ui.providerIds={...Zx}},resetChain(t){Ui.providers[t]=void 0,Ui.providerIds[t]=void 0}},yF={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},xs={set(t,e){Wo.isClient&&localStorage.setItem(`${Ge.STORAGE_KEY}${t}`,e)},get(t){return Wo.isClient?localStorage.getItem(`${Ge.STORAGE_KEY}${t}`):null},delete(t,e){Wo.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ge.STORAGE_KEY}${t}`))}},bA=30*1e3,Wo={checkIfAllowedToTriggerEmail(){const t=xs.get(Ge.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<bA){const n=Math.ceil((bA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=xs.get(Ge.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<bA)return Math.ceil((bA-e)/1e3)}return 0},checkIfRequestExists(t){return Ms.NOT_SAFE_RPC_METHODS.includes(t.method)||Ms.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(yF.transactionHash))||(t==null?void 0:t.match(yF.signedMessage)))?Ge.RPC_RESPONSE_TYPE_TX:Ge.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ms.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"};var mn;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(mn||(mn={}));var zD;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(zD||(zD={}));const Le=mn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),th=t=>{switch(typeof t){case"undefined":return Le.undefined;case"string":return Le.string;case"number":return isNaN(t)?Le.nan:Le.number;case"boolean":return Le.boolean;case"function":return Le.function;case"bigint":return Le.bigint;case"symbol":return Le.symbol;case"object":return Array.isArray(t)?Le.array:t===null?Le.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Le.promise:typeof Map<"u"&&t instanceof Map?Le.map:typeof Set<"u"&&t instanceof Set?Le.set:typeof Date<"u"&&t instanceof Date?Le.date:Le.object;default:return Le.unknown}},Ce=mn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_Te=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Tc extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(n(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,mn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Tc.create=t=>new Tc(t);const _C=(t,e)=>{let n;switch(t.code){case Ce.invalid_type:t.received===Le.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case Ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,mn.jsonStringifyReplacer)}`;break;case Ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${mn.joinValues(t.keys,", ")}`;break;case Ce.invalid_union:n="Invalid input";break;case Ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${mn.joinValues(t.options)}`;break;case Ce.invalid_enum_value:n=`Invalid enum value. Expected ${mn.joinValues(t.options)}, received '${t.received}'`;break;case Ce.invalid_arguments:n="Invalid function arguments";break;case Ce.invalid_return_type:n="Invalid function return type";break;case Ce.invalid_date:n="Invalid date";break;case Ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:mn.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case Ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case Ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case Ce.custom:n="Invalid input";break;case Ce.invalid_intersection_types:n="Intersection results could not be merged";break;case Ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case Ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,mn.assertNever(t)}return{message:n}};let DJ=_C;function ATe(t){DJ=t}function Xx(){return DJ}const eI=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}},STe=[];function ze(t,e){const n=eI({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Xx(),_C].filter(r=>!!r)});t.common.issues.push(n)}class ri{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return kt;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return ri.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return kt;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const kt=Object.freeze({status:"aborted"}),MJ=t=>({status:"dirty",value:t}),xi=t=>({status:"valid",value:t}),HD=t=>t.status==="aborted",GD=t=>t.status==="dirty",AC=t=>t.status==="valid",tI=t=>typeof Promise<"u"&&t instanceof Promise;var lt;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(lt||(lt={}));class Wl{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const wF=(t,e)=>{if(AC(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Tc(t.common.issues);return this._error=n,this._error}}};function Bt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class Wt{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return th(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:th(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ri,ctx:{common:e.parent.common,data:e.data,parsedType:th(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(tI(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:th(e)},i=this._parseSync({data:e,path:s.path,parent:s});return wF(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:th(e)},s=this._parse({data:e,path:r.path,parent:r}),i=await(tI(s)?s:Promise.resolve(s));return wF(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:Ce.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Mc({schema:this,typeName:_t.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Vu.create(this,this._def)}nullable(){return $g.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rc.create(this,this._def)}promise(){return xw.create(this,this._def)}or(e){return NC.create([this,e],this._def)}and(e){return TC.create(this,e,this._def)}transform(e){return new Mc({...Bt(this._def),schema:this,typeName:_t.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new DC({...Bt(this._def),innerType:this,defaultValue:n,typeName:_t.ZodDefault})}brand(){return new UJ({typeName:_t.ZodBranded,type:this,...Bt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new iI({...Bt(this._def),innerType:this,catchValue:n,typeName:_t.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return n1.create(this,e)}readonly(){return aI.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const xTe=/^c[^\s-]{8,}$/i,ITe=/^[a-z][a-z0-9]*$/,NTe=/^[0-9A-HJKMNP-TV-Z]{26}$/,TTe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,RTe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,PTe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nO;const OTe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,kTe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,DTe=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function MTe(t,e){return!!((e==="v4"||!e)&&OTe.test(t)||(e==="v6"||!e)&&kTe.test(t))}class Ac extends Wt{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Le.string){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.string,received:i.parsedType}),kt}const r=new ri;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?ze(s,{code:Ce.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&ze(s,{code:Ce.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")RTe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"email",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")nO||(nO=new RegExp(PTe,"u")),nO.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"emoji",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")TTe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"uuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")xTe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"cuid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")ITe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"cuid2",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")NTe.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"ulid",code:Ce.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),ze(s,{validation:"url",code:Ce.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"regex",code:Ce.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?DTe(i).test(e.data)||(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="ip"?MTe(e.data,i.version)||(s=this._getOrReturnCtx(e,s),ze(s,{validation:"ip",code:Ce.invalid_string,message:i.message}),r.dirty()):mn.assertNever(i);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:Ce.invalid_string,...lt.errToObj(r)})}_addCheck(e){return new Ac({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...lt.errToObj(e)})}url(e){return this._addCheck({kind:"url",...lt.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...lt.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...lt.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...lt.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...lt.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...lt.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...lt.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...lt.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...lt.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...lt.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...lt.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...lt.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...lt.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...lt.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...lt.errToObj(n)})}nonempty(e){return this.min(1,lt.errToObj(e))}trim(){return new Ac({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ac({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ac({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Ac.create=t=>{var e;return new Ac({checks:[],typeName:_t.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};function LTe(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class wf extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Le.number){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.number,received:i.parsedType}),kt}let r;const s=new ri;for(const i of this._def.checks)i.kind==="int"?mn.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?LTe(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.not_finite,message:i.message}),s.dirty()):mn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new wf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new wf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:lt.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:lt.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:lt.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:lt.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&mn.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}wf.create=t=>new wf({checks:[],typeName:_t.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class bf extends Wt{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Le.bigint){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.bigint,received:i.parsedType}),kt}let r;const s=new ri;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),ze(r,{code:Ce.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):mn.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,lt.toString(n))}gt(e,n){return this.setLimit("min",e,!1,lt.toString(n))}lte(e,n){return this.setLimit("max",e,!0,lt.toString(n))}lt(e,n){return this.setLimit("max",e,!1,lt.toString(n))}setLimit(e,n,r,s){return new bf({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:lt.toString(s)}]})}_addCheck(e){return new bf({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:lt.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:lt.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:lt.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}bf.create=t=>{var e;return new bf({checks:[],typeName:_t.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Bt(t)})};class SC extends Wt{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Le.boolean){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.boolean,received:r.parsedType}),kt}return xi(e.data)}}SC.create=t=>new SC({typeName:_t.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Bt(t)});class Ug extends Wt{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Le.date){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_type,expected:Le.date,received:i.parsedType}),kt}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return ze(i,{code:Ce.invalid_date}),kt}const r=new ri;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),ze(s,{code:Ce.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):mn.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ug({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:lt.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:lt.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ug.create=t=>new Ug({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:_t.ZodDate,...Bt(t)});class nI extends Wt{_parse(e){if(this._getType(e)!==Le.symbol){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.symbol,received:r.parsedType}),kt}return xi(e.data)}}nI.create=t=>new nI({typeName:_t.ZodSymbol,...Bt(t)});class xC extends Wt{_parse(e){if(this._getType(e)!==Le.undefined){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.undefined,received:r.parsedType}),kt}return xi(e.data)}}xC.create=t=>new xC({typeName:_t.ZodUndefined,...Bt(t)});class IC extends Wt{_parse(e){if(this._getType(e)!==Le.null){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.null,received:r.parsedType}),kt}return xi(e.data)}}IC.create=t=>new IC({typeName:_t.ZodNull,...Bt(t)});class Sw extends Wt{constructor(){super(...arguments),this._any=!0}_parse(e){return xi(e.data)}}Sw.create=t=>new Sw({typeName:_t.ZodAny,...Bt(t)});class hg extends Wt{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xi(e.data)}}hg.create=t=>new hg({typeName:_t.ZodUnknown,...Bt(t)});class ld extends Wt{_parse(e){const n=this._getOrReturnCtx(e);return ze(n,{code:Ce.invalid_type,expected:Le.never,received:n.parsedType}),kt}}ld.create=t=>new ld({typeName:_t.ZodNever,...Bt(t)});class rI extends Wt{_parse(e){if(this._getType(e)!==Le.undefined){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.void,received:r.parsedType}),kt}return xi(e.data)}}rI.create=t=>new rI({typeName:_t.ZodVoid,...Bt(t)});class Rc extends Wt{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Le.array)return ze(n,{code:Ce.invalid_type,expected:Le.array,received:n.parsedType}),kt;if(s.exactLength!==null){const o=n.data.length>s.exactLength.value,a=n.data.length<s.exactLength.value;(o||a)&&(ze(n,{code:o?Ce.too_big:Ce.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(ze(n,{code:Ce.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(ze(n,{code:Ce.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>s.type._parseAsync(new Wl(n,o,n.path,a)))).then(o=>ri.mergeArray(r,o));const i=[...n.data].map((o,a)=>s.type._parseSync(new Wl(n,o,n.path,a)));return ri.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new Rc({...this._def,minLength:{value:e,message:lt.toString(n)}})}max(e,n){return new Rc({...this._def,maxLength:{value:e,message:lt.toString(n)}})}length(e,n){return new Rc({...this._def,exactLength:{value:e,message:lt.toString(n)}})}nonempty(e){return this.min(1,e)}}Rc.create=(t,e)=>new Rc({type:t,minLength:null,maxLength:null,exactLength:null,typeName:_t.ZodArray,...Bt(e)});function cy(t){if(t instanceof fr){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Vu.create(cy(r))}return new fr({...t._def,shape:()=>e})}else return t instanceof Rc?new Rc({...t._def,type:cy(t.element)}):t instanceof Vu?Vu.create(cy(t.unwrap())):t instanceof $g?$g.create(cy(t.unwrap())):t instanceof zl?zl.create(t.items.map(e=>cy(e))):t}class fr extends Wt{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=mn.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Le.object){const l=this._getOrReturnCtx(e);return ze(l,{code:Ce.invalid_type,expected:Le.object,received:l.parsedType}),kt}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ld&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],d=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Wl(s,d,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof ld){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(ze(s,{code:Ce.unrecognized_keys,keys:a}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const d=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Wl(s,d,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const d=await u.key;l.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return l}).then(l=>ri.mergeObjectSync(r,l)):ri.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return lt.errToObj,new fr({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=lt.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new fr({...this._def,unknownKeys:"strip"})}passthrough(){return new fr({...this._def,unknownKeys:"passthrough"})}extend(e){return new fr({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new fr({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:_t.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new fr({...this._def,catchall:e})}pick(e){const n={};return mn.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new fr({...this._def,shape:()=>n})}omit(e){const n={};return mn.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new fr({...this._def,shape:()=>n})}deepPartial(){return cy(this)}partial(e){const n={};return mn.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new fr({...this._def,shape:()=>n})}required(e){const n={};return mn.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Vu;)i=i._def.innerType;n[r]=i}}),new fr({...this._def,shape:()=>n})}keyof(){return LJ(mn.objectKeys(this.shape))}}fr.create=(t,e)=>new fr({shape:()=>t,unknownKeys:"strip",catchall:ld.create(),typeName:_t.ZodObject,...Bt(e)});fr.strictCreate=(t,e)=>new fr({shape:()=>t,unknownKeys:"strict",catchall:ld.create(),typeName:_t.ZodObject,...Bt(e)});fr.lazycreate=(t,e)=>new fr({shape:t,unknownKeys:"strip",catchall:ld.create(),typeName:_t.ZodObject,...Bt(e)});class NC extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Tc(a.ctx.common.issues));return ze(n,{code:Ce.invalid_union,unionErrors:o}),kt}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Tc(c));return ze(n,{code:Ce.invalid_union,unionErrors:a}),kt}}get options(){return this._def.options}}NC.create=(t,e)=>new NC({options:t,typeName:_t.ZodUnion,...Bt(e)});const wS=t=>t instanceof PC?wS(t.schema):t instanceof Mc?wS(t.innerType()):t instanceof OC?[t.value]:t instanceof vf?t.options:t instanceof kC?Object.keys(t.enum):t instanceof DC?wS(t._def.innerType):t instanceof xC?[void 0]:t instanceof IC?[null]:null;class gT extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.object)return ze(n,{code:Ce.invalid_type,expected:Le.object,received:n.parsedType}),kt;const r=this.discriminator,s=n.data[r],i=this.optionsMap.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(ze(n,{code:Ce.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),kt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const i of n){const o=wS(i.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(s.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);s.set(a,i)}}return new gT({typeName:_t.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...Bt(r)})}}function qD(t,e){const n=th(t),r=th(e);if(t===e)return{valid:!0,data:t};if(n===Le.object&&r===Le.object){const s=mn.objectKeys(e),i=mn.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=qD(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===Le.array&&r===Le.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=qD(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Le.date&&r===Le.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class TC extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(HD(i)||HD(o))return kt;const a=qD(i.value,o.value);return a.valid?((GD(i)||GD(o))&&n.dirty(),{status:n.value,value:a.data}):(ze(r,{code:Ce.invalid_intersection_types}),kt)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}TC.create=(t,e,n)=>new TC({left:t,right:e,typeName:_t.ZodIntersection,...Bt(n)});class zl extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.array)return ze(r,{code:Ce.invalid_type,expected:Le.array,received:r.parsedType}),kt;if(r.data.length<this._def.items.length)return ze(r,{code:Ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),kt;!this._def.rest&&r.data.length>this._def.items.length&&(ze(r,{code:Ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Wl(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ri.mergeArray(n,o)):ri.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new zl({...this._def,rest:e})}}zl.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new zl({items:t,typeName:_t.ZodTuple,rest:null,...Bt(e)})};class RC extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.object)return ze(r,{code:Ce.invalid_type,expected:Le.object,received:r.parsedType}),kt;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new Wl(r,a,r.path,a)),value:o._parse(new Wl(r,r.data[a],r.path,a))});return r.common.async?ri.mergeObjectAsync(n,s):ri.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Wt?new RC({keyType:e,valueType:n,typeName:_t.ZodRecord,...Bt(r)}):new RC({keyType:Ac.create(),valueType:e,typeName:_t.ZodRecord,...Bt(n)})}}class sI extends Wt{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.map)return ze(r,{code:Ce.invalid_type,expected:Le.map,received:r.parsedType}),kt;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],l)=>({key:s._parse(new Wl(r,a,r.path,[l,"key"])),value:i._parse(new Wl(r,c,r.path,[l,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return kt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return kt;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(l.value,u.value)}return{status:n.value,value:a}}}}sI.create=(t,e,n)=>new sI({valueType:e,keyType:t,typeName:_t.ZodMap,...Bt(n)});class Bg extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Le.set)return ze(r,{code:Ce.invalid_type,expected:Le.set,received:r.parsedType}),kt;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(ze(r,{code:Ce.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(ze(r,{code:Ce.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return kt;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const a=[...r.data.values()].map((c,l)=>i._parse(new Wl(r,c,r.path,l)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Bg({...this._def,minSize:{value:e,message:lt.toString(n)}})}max(e,n){return new Bg({...this._def,maxSize:{value:e,message:lt.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Bg.create=(t,e)=>new Bg({valueType:t,minSize:null,maxSize:null,typeName:_t.ZodSet,...Bt(e)});class Ky extends Wt{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.function)return ze(n,{code:Ce.invalid_type,expected:Le.function,received:n.parsedType}),kt;function r(a,c){return eI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Xx(),_C].filter(l=>!!l),issueData:{code:Ce.invalid_arguments,argumentsError:c}})}function s(a,c){return eI({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Xx(),_C].filter(l=>!!l),issueData:{code:Ce.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof xw){const a=this;return xi(async function(...c){const l=new Tc([]),u=await a._def.args.parseAsync(c,i).catch(f=>{throw l.addIssue(r(c,f)),l}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,i).catch(f=>{throw l.addIssue(s(d,f)),l})})}else{const a=this;return xi(function(...c){const l=a._def.args.safeParse(c,i);if(!l.success)throw new Tc([r(c,l.error)]);const u=Reflect.apply(o,this,l.data),d=a._def.returns.safeParse(u,i);if(!d.success)throw new Tc([s(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ky({...this._def,args:zl.create(e).rest(hg.create())})}returns(e){return new Ky({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Ky({args:e||zl.create([]).rest(hg.create()),returns:n||hg.create(),typeName:_t.ZodFunction,...Bt(r)})}}class PC extends Wt{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}PC.create=(t,e)=>new PC({getter:t,typeName:_t.ZodLazy,...Bt(e)});class OC extends Wt{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return ze(n,{received:n.data,code:Ce.invalid_literal,expected:this._def.value}),kt}return{status:"valid",value:e.data}}get value(){return this._def.value}}OC.create=(t,e)=>new OC({value:t,typeName:_t.ZodLiteral,...Bt(e)});function LJ(t,e){return new vf({values:t,typeName:_t.ZodEnum,...Bt(e)})}class vf extends Wt{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return ze(n,{expected:mn.joinValues(r),received:n.parsedType,code:Ce.invalid_type}),kt}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return ze(n,{received:n.data,code:Ce.invalid_enum_value,options:r}),kt}return xi(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return vf.create(e)}exclude(e){return vf.create(this.options.filter(n=>!e.includes(n)))}}vf.create=LJ;class kC extends Wt{_parse(e){const n=mn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Le.string&&r.parsedType!==Le.number){const s=mn.objectValues(n);return ze(r,{expected:mn.joinValues(s),received:r.parsedType,code:Ce.invalid_type}),kt}if(n.indexOf(e.data)===-1){const s=mn.objectValues(n);return ze(r,{received:r.data,code:Ce.invalid_enum_value,options:s}),kt}return xi(e.data)}get enum(){return this._def.values}}kC.create=(t,e)=>new kC({values:t,typeName:_t.ZodNativeEnum,...Bt(e)});class xw extends Wt{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Le.promise&&n.common.async===!1)return ze(n,{code:Ce.invalid_type,expected:Le.promise,received:n.parsedType}),kt;const r=n.parsedType===Le.promise?n.data:Promise.resolve(n.data);return xi(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}xw.create=(t,e)=>new xw({type:t,typeName:_t.ZodPromise,...Bt(e)});class Mc extends Wt{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===_t.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{ze(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?kt:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?kt:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!AC(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>AC(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);mn.assertNever(s)}}Mc.create=(t,e,n)=>new Mc({schema:t,typeName:_t.ZodEffects,effect:e,...Bt(n)});Mc.createWithPreprocess=(t,e,n)=>new Mc({schema:e,effect:{type:"preprocess",transform:t},typeName:_t.ZodEffects,...Bt(n)});class Vu extends Wt{_parse(e){return this._getType(e)===Le.undefined?xi(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Vu.create=(t,e)=>new Vu({innerType:t,typeName:_t.ZodOptional,...Bt(e)});class $g extends Wt{_parse(e){return this._getType(e)===Le.null?xi(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$g.create=(t,e)=>new $g({innerType:t,typeName:_t.ZodNullable,...Bt(e)});class DC extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Le.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}DC.create=(t,e)=>new DC({innerType:t,typeName:_t.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Bt(e)});class iI extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return tI(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Tc(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Tc(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}iI.create=(t,e)=>new iI({innerType:t,typeName:_t.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Bt(e)});class oI extends Wt{_parse(e){if(this._getType(e)!==Le.nan){const r=this._getOrReturnCtx(e);return ze(r,{code:Ce.invalid_type,expected:Le.nan,received:r.parsedType}),kt}return{status:"valid",value:e.data}}}oI.create=t=>new oI({typeName:_t.ZodNaN,...Bt(t)});const UTe=Symbol("zod_brand");class UJ extends Wt{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class n1 extends Wt{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?kt:i.status==="dirty"?(n.dirty(),MJ(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?kt:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new n1({in:e,out:n,typeName:_t.ZodPipeline})}}class aI extends Wt{_parse(e){const n=this._def.innerType._parse(e);return AC(n)&&(n.value=Object.freeze(n.value)),n}}aI.create=(t,e)=>new aI({innerType:t,typeName:_t.ZodReadonly,...Bt(e)});const BJ=(t,e={},n)=>t?Sw.create().superRefine((r,s)=>{var i,o;if(!t(r)){const a=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(o=(i=a.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0,l=typeof a=="string"?{message:a}:a;s.addIssue({code:"custom",...l,fatal:c})}}):Sw.create(),BTe={object:fr.lazycreate};var _t;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(_t||(_t={}));const $Te=(t,e={message:`Input not instance of ${t.name}`})=>BJ(n=>n instanceof t,e),$J=Ac.create,FJ=wf.create,FTe=oI.create,jTe=bf.create,jJ=SC.create,WTe=Ug.create,zTe=nI.create,HTe=xC.create,GTe=IC.create,qTe=Sw.create,VTe=hg.create,KTe=ld.create,YTe=rI.create,QTe=Rc.create,JTe=fr.create,ZTe=fr.strictCreate,XTe=NC.create,eRe=gT.create,tRe=TC.create,nRe=zl.create,rRe=RC.create,sRe=sI.create,iRe=Bg.create,oRe=Ky.create,aRe=PC.create,cRe=OC.create,lRe=vf.create,uRe=kC.create,dRe=xw.create,bF=Mc.create,hRe=Vu.create,fRe=$g.create,pRe=Mc.createWithPreprocess,gRe=n1.create,mRe=()=>$J().optional(),yRe=()=>FJ().optional(),wRe=()=>jJ().optional(),bRe={string:t=>Ac.create({...t,coerce:!0}),number:t=>wf.create({...t,coerce:!0}),boolean:t=>SC.create({...t,coerce:!0}),bigint:t=>bf.create({...t,coerce:!0}),date:t=>Ug.create({...t,coerce:!0})},vRe=kt;var E=Object.freeze({__proto__:null,defaultErrorMap:_C,setErrorMap:ATe,getErrorMap:Xx,makeIssue:eI,EMPTY_PATH:STe,addIssueToContext:ze,ParseStatus:ri,INVALID:kt,DIRTY:MJ,OK:xi,isAborted:HD,isDirty:GD,isValid:AC,isAsync:tI,get util(){return mn},get objectUtil(){return zD},ZodParsedType:Le,getParsedType:th,ZodType:Wt,ZodString:Ac,ZodNumber:wf,ZodBigInt:bf,ZodBoolean:SC,ZodDate:Ug,ZodSymbol:nI,ZodUndefined:xC,ZodNull:IC,ZodAny:Sw,ZodUnknown:hg,ZodNever:ld,ZodVoid:rI,ZodArray:Rc,ZodObject:fr,ZodUnion:NC,ZodDiscriminatedUnion:gT,ZodIntersection:TC,ZodTuple:zl,ZodRecord:RC,ZodMap:sI,ZodSet:Bg,ZodFunction:Ky,ZodLazy:PC,ZodLiteral:OC,ZodEnum:vf,ZodNativeEnum:kC,ZodPromise:xw,ZodEffects:Mc,ZodTransformer:Mc,ZodOptional:Vu,ZodNullable:$g,ZodDefault:DC,ZodCatch:iI,ZodNaN:oI,BRAND:UTe,ZodBranded:UJ,ZodPipeline:n1,ZodReadonly:aI,custom:BJ,Schema:Wt,ZodSchema:Wt,late:BTe,get ZodFirstPartyTypeKind(){return _t},coerce:bRe,any:qTe,array:QTe,bigint:jTe,boolean:jJ,date:WTe,discriminatedUnion:eRe,effect:bF,enum:lRe,function:oRe,instanceof:$Te,intersection:tRe,lazy:aRe,literal:cRe,map:sRe,nan:FTe,nativeEnum:uRe,never:KTe,null:GTe,nullable:fRe,number:FJ,object:JTe,oboolean:wRe,onumber:yRe,optional:hRe,ostring:mRe,pipeline:gRe,preprocess:pRe,promise:dRe,record:rRe,set:iRe,strictObject:ZTe,string:$J,symbol:zTe,transformer:bF,tuple:nRe,undefined:HTe,union:XTe,unknown:VTe,void:YTe,NEVER:vRe,ZodIssueCode:Ce,quotelessJson:_Te,ZodError:Tc});const vr=E.object({message:E.string()});function je(t){return E.literal(Ge[t])}E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const ERe=E.object({chainId:E.string().or(E.number())}),CRe=E.object({email:E.string().email()}),_Re=E.object({otp:E.string()}),ARe=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number()))}),SRe=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string())}),xRe=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),IRe=E.object({email:E.string().email()}),NRe=E.object({otp:E.string()}),TRe=E.object({otp:E.string()}),RRe=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),PRe=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),ORe=E.object({type:E.string()}),kRe=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),DRe=E.object({url:E.string()}),MRe=E.object({userName:E.string()}),LRe=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ms.ACCOUNT_TYPES.EOA,Ms.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string())}),URe=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),BRe=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ms.ACCOUNT_TYPES.EOA,Ms.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string())}),$Re=E.object({uri:E.string()}),FRe=E.object({isConnected:E.boolean()}),jRe=E.object({chainId:E.string().or(E.number())}),WRe=E.object({chainId:E.string().or(E.number())}),zRe=E.object({newEmail:E.string().email()}),HRe=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const GRe=E.object({version:E.string().optional()}),qRe=E.object({type:E.string(),address:E.string()}),VRe=E.any(),KRe=E.object({method:E.literal("eth_accounts")}),YRe=E.object({method:E.literal("eth_blockNumber")}),QRe=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),JRe=E.object({method:E.literal("eth_chainId")}),ZRe=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),XRe=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),ePe=E.object({method:E.literal("eth_gasPrice")}),tPe=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),nPe=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),rPe=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),sPe=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),iPe=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),oPe=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),aPe=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),cPe=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),lPe=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),uPe=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),dPe=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),hPe=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),fPe=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),pPe=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),gPe=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),mPe=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),yPe=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),wPe=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),bPe=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),vPe=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),EPe=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),CPe=E.object({method:E.literal("eth_newBlockFilter")}),_Pe=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),APe=E.object({method:E.literal("eth_newPendingTransactionFilter")}),SPe=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),xPe=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),IPe=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),vF=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),NPe=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),TPe=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),RPe=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),PPe=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),OPe=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),kPe=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),DPe=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),MPe=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),LPe=E.object({method:E.literal("wallet_getCapabilities")}),UPe=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),BPe=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),$Pe=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),EF=E.object({token:E.string()}),We=E.object({id:E.string().optional()}),tv={appEvent:We.extend({type:je("APP_SWITCH_NETWORK"),payload:ERe}).or(We.extend({type:je("APP_CONNECT_EMAIL"),payload:CRe})).or(We.extend({type:je("APP_CONNECT_DEVICE")})).or(We.extend({type:je("APP_CONNECT_OTP"),payload:_Re})).or(We.extend({type:je("APP_CONNECT_SOCIAL"),payload:ARe})).or(We.extend({type:je("APP_GET_FARCASTER_URI")})).or(We.extend({type:je("APP_CONNECT_FARCASTER")})).or(We.extend({type:je("APP_GET_USER"),payload:E.optional(SRe)})).or(We.extend({type:je("APP_GET_SOCIAL_REDIRECT_URI"),payload:xRe})).or(We.extend({type:je("APP_SIGN_OUT")})).or(We.extend({type:je("APP_IS_CONNECTED"),payload:E.optional(EF)})).or(We.extend({type:je("APP_GET_CHAIN_ID")})).or(We.extend({type:je("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(We.extend({type:je("APP_INIT_SMART_ACCOUNT")})).or(We.extend({type:je("APP_SET_PREFERRED_ACCOUNT"),payload:ORe})).or(We.extend({type:je("APP_RPC_REQUEST"),payload:vF.or($Pe).or(KRe).or(YRe).or(QRe).or(JRe).or(ZRe).or(XRe).or(ePe).or(tPe).or(nPe).or(rPe).or(sPe).or(iPe).or(oPe).or(aPe).or(cPe).or(lPe).or(uPe).or(dPe).or(hPe).or(fPe).or(pPe).or(gPe).or(mPe).or(yPe).or(wPe).or(bPe).or(vPe).or(EPe).or(CPe).or(_Pe).or(APe).or(SPe).or(xPe).or(IPe).or(vF).or(NPe).or(TPe).or(RPe).or(PPe).or(OPe).or(kPe).or(MPe).or(DPe).or(LPe).or(UPe).or(BPe)})).or(We.extend({type:je("APP_UPDATE_EMAIL"),payload:IRe})).or(We.extend({type:je("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:NRe})).or(We.extend({type:je("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:TRe})).or(We.extend({type:je("APP_SYNC_THEME"),payload:RRe})).or(We.extend({type:je("APP_SYNC_DAPP_DATA"),payload:PRe})).or(We.extend({type:je("APP_RELOAD")})),frameEvent:We.extend({type:je("FRAME_SWITCH_NETWORK_ERROR"),payload:vr}).or(We.extend({type:je("FRAME_SWITCH_NETWORK_SUCCESS"),payload:WRe})).or(We.extend({type:je("FRAME_CONNECT_EMAIL_SUCCESS"),payload:kRe})).or(We.extend({type:je("FRAME_CONNECT_EMAIL_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:DRe})).or(We.extend({type:je("FRAME_GET_FARCASTER_URI_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:MRe})).or(We.extend({type:je("FRAME_CONNECT_FARCASTER_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_OTP_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_OTP_SUCCESS")})).or(We.extend({type:je("FRAME_CONNECT_DEVICE_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_CONNECT_DEVICE_SUCCESS")})).or(We.extend({type:je("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:LRe})).or(We.extend({type:je("FRAME_CONNECT_SOCIAL_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_USER_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_USER_SUCCESS"),payload:BRe})).or(We.extend({type:je("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:$Re})).or(We.extend({type:je("FRAME_SIGN_OUT_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SIGN_OUT_SUCCESS")})).or(We.extend({type:je("FRAME_IS_CONNECTED_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_IS_CONNECTED_SUCCESS"),payload:FRe})).or(We.extend({type:je("FRAME_GET_CHAIN_ID_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_GET_CHAIN_ID_SUCCESS"),payload:jRe})).or(We.extend({type:je("FRAME_RPC_REQUEST_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_RPC_REQUEST_SUCCESS"),payload:VRe})).or(We.extend({type:je("FRAME_SESSION_UPDATE"),payload:EF})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_SUCCESS"),payload:URe})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:zRe})).or(We.extend({type:je("FRAME_SYNC_THEME_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SYNC_THEME_SUCCESS")})).or(We.extend({type:je("FRAME_SYNC_DAPP_DATA_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(We.extend({type:je("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:HRe})).or(We.extend({type:je("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:qRe})).or(We.extend({type:je("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_READY"),payload:GRe})).or(We.extend({type:je("FRAME_RELOAD_ERROR"),payload:vr})).or(We.extend({type:je("FRAME_RELOAD_SUCCESS")}))};function rO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}let FPe=class{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0}){if(this.iframe=null,this.iframeIsReady=!1,this.rpcUrl=Fe.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const i=document.getElementById("w3m-iframe");this.iframe&&!i&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(i,o,a)=>{function c({data:l}){if(!rO(Ge.FRAME_EVENT_KEY,l))return;const u=tv.frameEvent.parse(l);u.id===i&&(o(u),window.removeEventListener("message",c))}Wo.isClient&&(window.addEventListener("message",c),a.addEventListener("abort",()=>{window.removeEventListener("message",c)}))},onFrameEvent:i=>{Wo.isClient&&window.addEventListener("message",({data:o})=>{if(!rO(Ge.FRAME_EVENT_KEY,o))return;const a=tv.frameEvent.parse(o);i(a)})},onAppEvent:i=>{Wo.isClient&&window.addEventListener("message",({data:o})=>{if(!rO(Ge.APP_EVENT_KEY,o))return;const a=tv.appEvent.parse(o);i(a)})},postAppEvent:i=>{var o;if(Wo.isClient){if(!((o=this.iframe)!=null&&o.contentWindow))throw new Error("W3mFrame: iframe is not set");tv.appEvent.parse(i),this.iframe.contentWindow.postMessage(i,"*")}},postFrameEvent:i=>{if(Wo.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");tv.frameEvent.parse(i),parent.postMessage(i,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),n&&(this.frameLoadPromise=new Promise((i,o)=>{this.frameLoadPromiseResolver={resolve:i,reject:o}}),Wo.isClient)){const i=document.createElement("iframe");i.id="w3m-iframe",i.src=`${Pye}?projectId=${e}&chainId=${r}&version=${kye}&enableLogger=${s}`,i.name="w3m-secure-iframe",i.style.position="fixed",i.style.zIndex="999999",i.style.display="none",i.style.border="none",i.style.animationDelay="0s, 50ms",i.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",i.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=i,this.iframe.onerror=()=>{var o;(o=this.frameLoadPromiseResolver)==null||o.reject("Unable to load email login dependency")},this.events.onFrameEvent(o=>{var a;o.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(a=this.frameLoadPromiseResolver)==null||a.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}},jPe=class{constructor(e){var i;const n=pm({level:Oye}),{logger:r,chunkLoggerController:s}=oT({opts:n});this.logger=$s(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}},WPe=class{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new jPe(e)),this.abortController=i,this.w3mFrame=new FPe({projectId:e,isAppClient:!0,chainId:n,enableLogger:r}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!xs.get(Ge.EMAIL_LOGIN_USED_KEY)}getEmail(){return xs.get(Ge.EMAIL)}getUsername(){return xs.get(Ge.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ge.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{Wo.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ge.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ge.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ge.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ge.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ge.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ge.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ge.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ge.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ge.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ge.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ge.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ge.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ge.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=await this.appEvent({type:Ge.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId}});return s.userName&&this.setSocialLoginSuccess(s.userName),this.setLoginSuccess(s.email),this.setLastUsedChainId(s.chainId),this.user=s,s}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ge.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial(e){var n;try{await this.init();const r=await this.appEvent({type:Ge.APP_CONNECT_SOCIAL,payload:{uri:e}});return r.userName&&this.setSocialLoginSuccess(r.userName),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting social"),r}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ge.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ge.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork(e){var n;try{const r=await this.appEvent({type:Ge.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(r.chainId),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ge.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var n,r,s,i;try{if(Ms.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();(n=this.rpcRequestHandler)==null||n.call(this,e);const o=await this.appEvent({type:Ge.APP_RPC_REQUEST,payload:e});return(r=this.rpcSuccessHandler)==null||r.call(this,o,e),o}catch(o){throw(s=this.rpcErrorHandler)==null||s.call(this,o,e),(i=this.w3mLogger)==null||i.logger.error({error:o},"Error requesting"),o}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ge.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ge.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ms.ACCOUNT_TYPES.EOA})})}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ge.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(n.payload.smartAccountEnabledNetworks):n.type===Ge.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){var e;try{this.openRpcRequests.forEach(({abortController:n,method:r})=>{Ms.SAFE_RPC_METHODS.includes(r)||n.abort()}),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ge.APP_SYNC_DAPP_DATA,Ge.APP_SYNC_THEME,Ge.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ge.APP_CONNECT_EMAIL,Ge.APP_CONNECT_DEVICE,Ge.APP_CONNECT_OTP,Ge.APP_CONNECT_SOCIAL,Ge.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},3e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,m){var b,v,A;w.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){xs.set(Ge.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){xs.set(Ge.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&xs.set(Ge.EMAIL,e),xs.set(Ge.EMAIL_LOGIN_USED_KEY,"true"),xs.delete(Ge.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){xs.delete(Ge.EMAIL_LOGIN_USED_KEY),xs.delete(Ge.EMAIL),xs.delete(Ge.LAST_USED_CHAIN_KEY),xs.delete(Ge.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&xs.set(Ge.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=xs.get(Ge.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){xs.set(Ge.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}},zPe=class bS{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i}){return bS.instance||(bS.instance=new WPe({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i})),bS.instance}};function HPe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function is(t,...e){try{return HPe(t(...e))}catch(n){return Promise.reject(n)}}function GPe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function qPe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function vS(t){if(GPe(t))return String(t);if(qPe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return vS(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const VD="base64:";function VPe(t){return typeof t=="string"?t:VD+QPe(t)}function KPe(t){return typeof t!="string"||!t.startsWith(VD)?t:YPe(t.slice(VD.length))}function YPe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function QPe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Wi(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function JPe(...t){return Wi(t.join(":"))}function vA(t){return t=Wi(t),t?t+":":""}function ZPe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function XPe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const eOe="memory",tOe=()=>{const t=new Map;return{name:eOe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function nOe(t={}){const e={mounts:{"":t.driver||tOe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=l=>{for(const u of e.mountpoints)if(l.startsWith(u))return{base:u,relativeKey:l.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:l,driver:e.mounts[""]}},r=(l,u)=>e.mountpoints.filter(d=>d.startsWith(l)||u&&l.startsWith(d)).map(d=>({relativeBase:l.length>d.length?l.slice(d.length):void 0,mountpoint:d,driver:e.mounts[d]})),s=(l,u)=>{if(e.watching){u=Wi(u);for(const d of e.watchListeners)d(l,u)}},i=async()=>{if(!e.watching){e.watching=!0;for(const l in e.mounts)e.unwatch[l]=await CF(e.mounts[l],s,l)}},o=async()=>{if(e.watching){for(const l in e.unwatch)await e.unwatch[l]();e.unwatch={},e.watching=!1}},a=(l,u,d)=>{const h=new Map,f=p=>{let g=h.get(p.base);return g||(g={driver:p.driver,base:p.base,items:[]},h.set(p.base,g)),g};for(const p of l){const g=typeof p=="string",w=Wi(g?p:p.key),m=g?void 0:p.value,b=g||!p.options?u:{...u,...p.options},v=n(w);f(v).items.push({key:w,value:m,relativeKey:v.relativeKey,options:b})}return Promise.all([...h.values()].map(p=>d(p))).then(p=>p.flat())},c={hasItem(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return is(h.hasItem,d,u)},getItem(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return is(h.getItem,d,u).then(f=>fA(f))},getItems(l,u={}){return a(l,u,d=>d.driver.getItems?is(d.driver.getItems,d.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(f=>({key:JPe(d.base,f.key),value:fA(f.value)}))):Promise.all(d.items.map(h=>is(d.driver.getItem,h.relativeKey,h.options).then(f=>({key:h.key,value:fA(f)})))))},getItemRaw(l,u={}){l=Wi(l);const{relativeKey:d,driver:h}=n(l);return h.getItemRaw?is(h.getItemRaw,d,u):is(h.getItem,d,u).then(f=>KPe(f))},async setItem(l,u,d={}){if(u===void 0)return c.removeItem(l);l=Wi(l);const{relativeKey:h,driver:f}=n(l);f.setItem&&(await is(f.setItem,h,vS(u),d),f.watch||s("update",l))},async setItems(l,u){await a(l,u,async d=>{if(d.driver.setItems)return is(d.driver.setItems,d.items.map(h=>({key:h.relativeKey,value:vS(h.value),options:h.options})),u);d.driver.setItem&&await Promise.all(d.items.map(h=>is(d.driver.setItem,h.relativeKey,vS(h.value),h.options)))})},async setItemRaw(l,u,d={}){if(u===void 0)return c.removeItem(l,d);l=Wi(l);const{relativeKey:h,driver:f}=n(l);if(f.setItemRaw)await is(f.setItemRaw,h,u,d);else if(f.setItem)await is(f.setItem,h,VPe(u),d);else return;f.watch||s("update",l)},async removeItem(l,u={}){typeof u=="boolean"&&(u={removeMeta:u}),l=Wi(l);const{relativeKey:d,driver:h}=n(l);h.removeItem&&(await is(h.removeItem,d,u),(u.removeMeta||u.removeMata)&&await is(h.removeItem,d+"$",u),h.watch||s("remove",l))},async getMeta(l,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),l=Wi(l);const{relativeKey:d,driver:h}=n(l),f=Object.create(null);if(h.getMeta&&Object.assign(f,await is(h.getMeta,d,u)),!u.nativeOnly){const p=await is(h.getItem,d+"$",u).then(g=>fA(g));p&&typeof p=="object"&&(typeof p.atime=="string"&&(p.atime=new Date(p.atime)),typeof p.mtime=="string"&&(p.mtime=new Date(p.mtime)),Object.assign(f,p))}return f},setMeta(l,u,d={}){return this.setItem(l+"$",u,d)},removeMeta(l,u={}){return this.removeItem(l+"$",u)},async getKeys(l,u={}){var w;l=vA(l);const d=r(l,!0);let h=[];const f=[];let p=!0;for(const m of d){(w=m.driver.flags)!=null&&w.maxDepth||(p=!1);const b=await is(m.driver.getKeys,m.relativeBase,u);for(const v of b){const A=m.mountpoint+Wi(v);h.some(C=>A.startsWith(C))||f.push(A)}h=[m.mountpoint,...h.filter(v=>!v.startsWith(m.mountpoint))]}const g=u.maxDepth!==void 0&&!p;return f.filter(m=>(!g||ZPe(m,u.maxDepth))&&XPe(m,l))},async clear(l,u={}){l=vA(l),await Promise.all(r(l,!1).map(async d=>{if(d.driver.clear)return is(d.driver.clear,d.relativeBase,u);if(d.driver.removeItem){const h=await d.driver.getKeys(d.relativeBase||"",u);return Promise.all(h.map(f=>d.driver.removeItem(f,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(l=>_F(l)))},async watch(l){return await i(),e.watchListeners.push(l),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==l),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(l,u){if(l=vA(l),l&&e.mounts[l])throw new Error(`already mounted at ${l}`);return l&&(e.mountpoints.push(l),e.mountpoints.sort((d,h)=>h.length-d.length)),e.mounts[l]=u,e.watching&&Promise.resolve(CF(u,s,l)).then(d=>{e.unwatch[l]=d}).catch(console.error),c},async unmount(l,u=!0){var d,h;l=vA(l),!(!l||!e.mounts[l])&&(e.watching&&l in e.unwatch&&((h=(d=e.unwatch)[l])==null||h.call(d),delete e.unwatch[l]),u&&await _F(e.mounts[l]),e.mountpoints=e.mountpoints.filter(f=>f!==l),delete e.mounts[l])},getMount(l=""){l=Wi(l)+":";const u=n(l);return{driver:u.driver,base:u.base}},getMounts(l="",u={}){return l=Wi(l),r(l,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(l,u={})=>c.getKeys(l,u),get:(l,u={})=>c.getItem(l,u),set:(l,u,d={})=>c.setItem(l,u,d),has:(l,u={})=>c.hasItem(l,u),del:(l,u={})=>c.removeItem(l,u),remove:(l,u={})=>c.removeItem(l,u)};return c}function CF(t,e,n){return t.watch?t.watch((r,s)=>e(r,n+s)):()=>{}}async function _F(t){typeof t.dispose=="function"&&await is(t.dispose)}const rOe="idb-keyval";var sOe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=s=>e+s;let r;return t.dbName&&t.storeName&&(r=FQ(t.dbName,t.storeName)),{name:rOe,options:t,async hasItem(s){return!(typeof await x4(n(s),r)>"u")},async getItem(s){return await x4(n(s),r)??null},setItem(s,i){return N1e(n(s),i,r)},removeItem(s){return T1e(n(s),r)},getKeys(){return O1e(r)},clear(){return R1e(r)}}};const iOe="WALLET_CONNECT_V2_INDEXED_DB",oOe="keyvaluestorage";let aOe=class{constructor(){this.indexedDb=nOe({driver:sOe({dbName:iOe,storeName:oOe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,cd(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var sO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ES={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof sO<"u"&&sO.localStorage?ES.exports=sO.localStorage:typeof window<"u"&&window.localStorage?ES.exports=window.localStorage:ES.exports=new e})();function cOe(t){var e;return[t[0],Mg((e=t[1])!=null?e:"")]}let lOe=class{constructor(){this.localStorage=ES.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(cOe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return Mg(n)}async setItem(e,n){this.localStorage.setItem(e,cd(n))}async removeItem(e){this.localStorage.removeItem(e)}};const uOe="wc_storage_version",AF=1,dOe=async(t,e,n)=>{const r=uOe,s=await e.getItem(r);if(s&&s>=AF){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const o=[];for(;i.length;){const a=i.shift();if(!a)continue;const c=a.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const l=await t.getItem(a);await e.setItem(a,l),o.push(a)}}await e.setItem(r,AF),n(e),hOe(t,o)},hOe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let fOe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new lOe;this.storage=e;try{const n=new aOe;dOe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};var pOe=Object.defineProperty,gOe=(t,e,n)=>e in t?pOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SF=(t,e,n)=>gOe(t,typeof e!="symbol"?e+"":e,n);let mOe=class extends dm{constructor(e){super(),this.opts=e,SF(this,"protocol","wc"),SF(this,"version",2)}};var yOe=Object.defineProperty,wOe=(t,e,n)=>e in t?yOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bOe=(t,e,n)=>wOe(t,e+"",n);let vOe=class extends dm{constructor(e,n){super(),this.core=e,this.logger=n,bOe(this,"records",new Map)}},EOe=class{constructor(e,n){this.logger=e,this.core=n}},COe=class extends dm{constructor(e,n){super(),this.relayer=e,this.logger=n}},_Oe=class extends dm{constructor(e){super()}},AOe=class{constructor(e,n,r,s){this.core=e,this.logger=n,this.name=r}},SOe=class extends dm{constructor(e,n){super(),this.relayer=e,this.logger=n}},xOe=class extends dm{constructor(e,n){super(),this.core=e,this.logger=n}},IOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},NOe=class{constructor(e,n){this.projectId=e,this.logger=n}},TOe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var ROe=Object.defineProperty,POe=(t,e,n)=>e in t?ROe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xF=(t,e,n)=>POe(t,typeof e!="symbol"?e+"":e,n);let OOe=class{constructor(e){this.opts=e,xF(this,"protocol","wc"),xF(this,"version",2)}},kOe=class{constructor(e){this.client=e}};function MC(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function IF(t){return MC(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const WJ="2.23.2";let nv={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${WJ}`},mT=class KD extends Error{constructor(e,n={}){var a;const r=(()=>{var c;return n.cause instanceof KD?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof KD&&n.cause.docsPath||n.docsPath,i=(a=nv.getDocsUrl)==null?void 0:a.call(nv,{...n,docsPath:s}),o=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...nv.version?[`Version: ${nv.version}`]:[]].join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=WJ}walk(e){return zJ(this,e)}};function zJ(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?zJ(t.cause,e):e?null:t}class HJ extends mT{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}}function fb(t,{dir:e,size:n=32}={}){return typeof t=="string"?DOe(t,{dir:e,size:n}):MOe(t,{dir:e,size:n})}function DOe(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new HJ({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function MOe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new HJ({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i=e==="right";r[i?s:n-s-1]=t[i?s:t.length-s-1]}return r}class LOe extends mT{constructor({max:e,min:n,signed:r,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}}class UOe extends mT{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function pb(t,{size:e}){if(IF(t)>e)throw new UOe({givenSize:IF(t),maxSize:e})}function YD(t,e={}){const{signed:n}=e;e.size&&pb(t,{size:e.size});const r=BigInt(t);if(!n)return r;const s=(t.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function BOe(t,e={}){return Number(YD(t,e))}const $Oe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function QD(t,e={}){return typeof t=="number"||typeof t=="bigint"?qJ(t,e):typeof t=="string"?WOe(t,e):typeof t=="boolean"?FOe(t,e):GJ(t,e)}function FOe(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(pb(n,{size:e.size}),fb(n,{size:e.size})):n}function GJ(t,e={}){let n="";for(let s=0;s<t.length;s++)n+=$Oe[t[s]];const r=`0x${n}`;return typeof e.size=="number"?(pb(r,{size:e.size}),fb(r,{dir:"right",size:e.size})):r}function qJ(t,e={}){const{signed:n,size:r}=e,s=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&n?-i-1n:0;if(i&&s>i||s<o){const c=typeof t=="bigint"?"n":"";throw new LOe({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:n,size:r,value:`${t}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?fb(a,{size:r}):a}const jOe=new TextEncoder;function WOe(t,e={}){const n=jOe.encode(t);return GJ(n,e)}const zOe=new TextEncoder;function HOe(t,e={}){return typeof t=="number"||typeof t=="bigint"?qOe(t,e):typeof t=="boolean"?GOe(t,e):MC(t)?VJ(t,e):KJ(t,e)}function GOe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(pb(n,{size:e.size}),fb(n,{size:e.size})):n}const ou={zero:48,nine:57,A:65,F:70,a:97,f:102};function NF(t){if(t>=ou.zero&&t<=ou.nine)return t-ou.zero;if(t>=ou.A&&t<=ou.F)return t-(ou.A-10);if(t>=ou.a&&t<=ou.f)return t-(ou.a-10)}function VJ(t,e={}){let n=t;e.size&&(pb(n,{size:e.size}),n=fb(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=NF(r.charCodeAt(a++)),l=NF(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new mT(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);i[o]=c*16+l}return i}function qOe(t,e){const n=qJ(t,e);return VJ(n)}function KJ(t,e={}){const n=zOe.encode(t);return typeof e.size=="number"?(pb(n,{size:e.size}),fb(n,{dir:"right",size:e.size})):n}function cI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function VOe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function yT(t,...e){if(!VOe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function MVe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cI(t.outputLen),cI(t.blockLen)}function TF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function KOe(t,e){yT(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const EA=BigInt(2**32-1),RF=BigInt(32);function YOe(t,e=!1){return e?{h:Number(t&EA),l:Number(t>>RF&EA)}:{h:Number(t>>RF&EA)|0,l:Number(t&EA)|0}}function QOe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=YOe(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const JOe=(t,e,n)=>t<<n|e>>>32-n,ZOe=(t,e,n)=>e<<n|t>>>32-n,XOe=(t,e,n)=>e<<n-32|t>>>64-n,e2e=(t,e,n)=>t<<n-32|e>>>64-n,$m=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function t2e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function LVe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function UVe(t,e){return t<<32-e|t>>>e}const PF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function n2e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function OF(t){for(let e=0;e<t.length;e++)t[e]=n2e(t[e])}function r2e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function YJ(t){return typeof t=="string"&&(t=r2e(t)),yT(t),t}function BVe(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];yT(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let s2e=class{clone(){return this._cloneInto()}};function i2e(t){const e=r=>t().update(YJ(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function FVe(t=32){if($m&&typeof $m.getRandomValues=="function")return $m.getRandomValues(new Uint8Array(t));if($m&&typeof $m.randomBytes=="function")return $m.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const QJ=[],JJ=[],ZJ=[],o2e=BigInt(0),rv=BigInt(1),a2e=BigInt(2),c2e=BigInt(7),l2e=BigInt(256),u2e=BigInt(113);for(let t=0,e=rv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],QJ.push(2*(5*r+n)),JJ.push((t+1)*(t+2)/2%64);let s=o2e;for(let i=0;i<7;i++)e=(e<<rv^(e>>c2e)*u2e)%l2e,e&a2e&&(s^=rv<<(rv<<BigInt(i))-rv);ZJ.push(s)}const[d2e,h2e]=QOe(ZJ,!0),kF=(t,e,n)=>n>32?XOe(t,e,n):JOe(t,e,n),DF=(t,e,n)=>n>32?e2e(t,e,n):ZOe(t,e,n);function f2e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=kF(l,u,1)^n[a],h=DF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=JJ[o],c=kF(s,i,a),l=DF(s,i,a),u=QJ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=d2e[r],t[1]^=h2e[r]}n.fill(0)}let p2e=class XJ extends s2e{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,cI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=t2e(this.state)}keccak(){PF||OF(this.state32),f2e(this.state32,this.rounds),PF||OF(this.state32),this.posOut=0,this.pos=0}update(e){TF(this);const{blockLen:n,state:r}=this;e=YJ(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){TF(this,!1),yT(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return cI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(KOe(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new XJ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const g2e=(t,e,n)=>i2e(()=>new p2e(e,t,n)),m2e=g2e(1,136,256/8);function eZ(t,e){const n=e||"hex",r=m2e(MC(t,{strict:!1})?HOe(t):t);return n==="bytes"?r:QD(r)}class y2e extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const iO=new y2e(8192);function w2e(t,e){if(iO.has(`${t}.${e}`))return iO.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=eZ(KJ(n),"bytes"),s=n.split("");for(let o=0;o<40;o+=2)r[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(r[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return iO.set(`${t}.${e}`,i),i}function b2e(t){const e=eZ(`0x${t.substring(4)}`).substring(26);return w2e(`0x${e}`)}async function v2e({hash:t,signature:e}){const n=MC(t)?t:QD(t),{secp256k1:r}=await Js(async()=>{const{secp256k1:o}=await import("./secp256k1-BzFjTMfB.js");return{secp256k1:o}},[]);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:l,s:u,v:d,yParity:h}=e,f=Number(h??d),p=MF(f);return new r.Signature(YD(l),YD(u)).addRecoveryBit(p)}const o=MC(e)?e:QD(e),a=BOe(`0x${o.slice(130)}`),c=MF(a);return r.Signature.fromCompact(o.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function MF(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function E2e({hash:t,signature:e}){return b2e(await v2e({hash:t,signature:e}))}var C2e={};const _2e=":";function Yy(t){const[e,n]=t.split(_2e);return{namespace:e,reference:n}}function tZ(t,e){return t.includes(":")?[t]:e.chains||[]}var A2e=Object.defineProperty,S2e=Object.defineProperties,x2e=Object.getOwnPropertyDescriptors,LF=Object.getOwnPropertySymbols,I2e=Object.prototype.hasOwnProperty,N2e=Object.prototype.propertyIsEnumerable,UF=(t,e,n)=>e in t?A2e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,BF=(t,e)=>{for(var n in e||(e={}))I2e.call(e,n)&&UF(t,n,e[n]);if(LF)for(var n of LF(e))N2e.call(e,n)&&UF(t,n,e[n]);return t},T2e=(t,e)=>S2e(t,x2e(e));const R2e="ReactNative",Ho={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},P2e="js";function lI(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Of(){return!Lg()&&!!wU()&&navigator.product===R2e}function O2e(){return Of()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function k2e(){return Of()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function gb(){return!lI()&&!!wU()&&!!Lg()}function r1(){return Of()?Ho.reactNative:lI()?Ho.node:gb()?Ho.browser:Ho.unknown}function $F(){var t;try{return Of()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function D2e(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const s=e[r];s!==void 0&&n.set(r,s)}return n.toString()}function M2e(t){var e,n;const r=nZ();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(s=>s!=="")),T2e(BF(BF({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(s){return console.warn("Error populating app metadata",s),t||r}}function nZ(){return vJ()||{name:"",description:"",url:"",icons:[""]}}function L2e(){if(r1()===Ho.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=oIe();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function U2e(){var t;const e=r1();return e===Ho.browser?[e,((t=bJ())==null?void 0:t.host)||"unknown"].join(":"):e}function rZ(t,e,n){const r=L2e(),s=U2e();return[[t,e].join("-"),[P2e,n].join("-"),r,s].join("/")}function B2e({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:s,projectId:i,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=n.split("?"),u=rZ(t,e,r),d={auth:s,ua:u,projectId:i,useOnCloseEvent:o,packageName:c||void 0,bundleId:a||void 0},h=D2e(l[1]||"",d);return l[0]+"?"+h}function Np(t,e){return t.filter(n=>e.includes(n)).length===t.length}function JD(t){return Object.fromEntries(t.entries())}function ZD(t){return new Map(Object.entries(t))}function tp(t=_e.FIVE_MINUTES,e){const n=_e.toMiliseconds(t||_e.FIVE_MINUTES);let r,s,i,o;return{resolve:a=>{i&&r&&(clearTimeout(i),r(a),o=Promise.resolve(a))},reject:a=>{i&&s&&(clearTimeout(i),s(a))},done:()=>new Promise((a,c)=>{if(o)return a(o);i=setTimeout(()=>{const l=new Error(e);o=Promise.reject(l),c(l)},n),r=a,s=c})}}function Mh(t,e,n){return new Promise(async(r,s)=>{const i=setTimeout(()=>s(new Error(n)),e);try{const o=await t;r(o)}catch(o){s(o)}clearTimeout(i)})}function sZ(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function $2e(t){return sZ("topic",t)}function F2e(t){return sZ("id",t)}function iZ(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function zr(t,e){return _e.fromMiliseconds(Date.now()+_e.toMiliseconds(t))}function Qd(t){return Date.now()>=_e.toMiliseconds(t)}function An(t,e){return`${t}${e?`:${e}`:""}`}function Ml(t=[],e=[]){return[...new Set([...t,...e])]}async function j2e({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const s=typeof n=="string"?JSON.parse(n):n,i=s==null?void 0:s.href;if(typeof i!="string")return;const o=W2e(i,t,e),a=r1();if(a===Ho.browser){if(!((r=Lg())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}z2e(o)}else a===Ho.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(s){console.error(s)}}function W2e(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let s=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";s=`${s}${i}${V2e(r,!0)}`}else s=`${s}/wc?${r}`;return s}function z2e(t){let e="_self";q2e()?e="_top":(G2e()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function H2e(t,e){let n="";try{if(gb()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function FF(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function jF(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function CU(){return typeof process<"u"&&C2e.IS_VITEST==="true"}function G2e(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function q2e(){try{return window.self!==window.top}catch{return!1}}function V2e(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function oZ(t){return Buffer.from(t,"base64").toString("utf-8")}function K2e(t){return new Promise(e=>setTimeout(e,t))}function LC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Y2e(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function s1(t,...e){if(!Y2e(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function _U(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");LC(t.outputLen),LC(t.blockLen)}function Iw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function aZ(t,e){s1(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const CA=BigInt(2**32-1),WF=BigInt(32);function Q2e(t,e=!1){return e?{h:Number(t&CA),l:Number(t>>WF&CA)}:{h:Number(t>>WF&CA)|0,l:Number(t&CA)|0}}function J2e(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Q2e(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const Z2e=(t,e,n)=>t<<n|e>>>32-n,X2e=(t,e,n)=>e<<n|t>>>32-n,eke=(t,e,n)=>e<<n-32|t>>>64-n,tke=(t,e,n)=>t<<n-32|e>>>64-n,Fm=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function nke(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function oO(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function qc(t,e){return t<<32-e|t>>>e}const zF=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function rke(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function HF(t){for(let e=0;e<t.length;e++)t[e]=rke(t[e])}function ske(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Nw(t){return typeof t=="string"&&(t=ske(t)),s1(t),t}function ike(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];s1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}let AU=class{clone(){return this._cloneInto()}};function cZ(t){const e=r=>t().update(Nw(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function mb(t=32){if(Fm&&typeof Fm.getRandomValues=="function")return Fm.getRandomValues(new Uint8Array(t));if(Fm&&typeof Fm.randomBytes=="function")return Fm.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const lZ=[],uZ=[],dZ=[],oke=BigInt(0),sv=BigInt(1),ake=BigInt(2),cke=BigInt(7),lke=BigInt(256),uke=BigInt(113);for(let t=0,e=sv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],lZ.push(2*(5*r+n)),uZ.push((t+1)*(t+2)/2%64);let s=oke;for(let i=0;i<7;i++)e=(e<<sv^(e>>cke)*uke)%lke,e&ake&&(s^=sv<<(sv<<BigInt(i))-sv);dZ.push(s)}const[dke,hke]=J2e(dZ,!0),GF=(t,e,n)=>n>32?eke(t,e,n):Z2e(t,e,n),qF=(t,e,n)=>n>32?tke(t,e,n):X2e(t,e,n);function fke(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=GF(l,u,1)^n[a],h=qF(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=uZ[o],c=GF(s,i,a),l=qF(s,i,a),u=lZ[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=dke[r],t[1]^=hke[r]}n.fill(0)}let pke=class hZ extends AU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,LC(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=nke(this.state)}keccak(){zF||HF(this.state32),fke(this.state32,this.rounds),zF||HF(this.state32),this.posOut=0,this.pos=0}update(e){Iw(this);const{blockLen:n,state:r}=this;e=Nw(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Iw(this,!1),s1(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return LC(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(aZ(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new hZ(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}};const gke=(t,e,n)=>cZ(()=>new pke(e,t,n)),mke=gke(1,136,256/8),yke="https://rpc.walletconnect.org/v1";function fZ(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(mke(n)).toString("hex")}async function wke(t,e,n,r,s,i){switch(n.t){case"eip191":return await bke(t,e,n.s);case"eip1271":return await vke(t,e,n.s,r,s,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function bke(t,e,n){return(await E2e({hash:fZ(e),signature:n})).toLowerCase()===t.toLowerCase()}async function vke(t,e,n,r,s,i){const o=Yy(r);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const a="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",l="0000000000000000000000000000000000000000000000000000000000000041",u=n.substring(2),d=fZ(e).substring(2),h=a+d+c+l+u,f=await fetch(`${i||yke}/?chainId=${r}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:Eke(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:p}=await f.json();return p?p.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Eke(){return Date.now()+Math.floor(Math.random()*1e3)}function Cke(t){const e=atob(t),n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);const r=n[0];if(r===0)throw new Error("No signatures found");const s=1+r*64;if(n.length<s)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return EJ.encode(i)}var _ke=Object.defineProperty,Ake=Object.defineProperties,Ske=Object.getOwnPropertyDescriptors,VF=Object.getOwnPropertySymbols,xke=Object.prototype.hasOwnProperty,Ike=Object.prototype.propertyIsEnumerable,KF=(t,e,n)=>e in t?_ke(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nke=(t,e)=>{for(var n in e||(e={}))xke.call(e,n)&&KF(t,n,e[n]);if(VF)for(var n of VF(e))Ike.call(e,n)&&KF(t,n,e[n]);return t},Tke=(t,e)=>Ake(t,Ske(e));const Rke="did:pkh:",SU=t=>t==null?void 0:t.split(":"),Pke=t=>{const e=t&&SU(t);if(e)return t.includes(Rke)?e[3]:e[1]},XD=t=>{const e=t&&SU(t);if(e)return e[2]+":"+e[3]},uI=t=>{const e=t&&SU(t);if(e)return e.pop()};async function YF(t){const{cacao:e,projectId:n}=t,{s:r,p:s}=e,i=pZ(s,s.iss),o=uI(s.iss);return await wke(o,i,r,XD(s.iss),n)}const pZ=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=uI(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,o=`Version: ${t.version}`,a=`Chain ID: ${Pke(e)}`,c=`Nonce: ${t.nonce}`,l=`Issued At: ${t.iat}`,u=t.exp?`Expiration Time: ${t.exp}`:void 0,d=t.nbf?`Not Before: ${t.nbf}`:void 0,h=t.requestId?`Request ID: ${t.requestId}`:void 0,f=t.resources?`Resources:${t.resources.map(g=>`
- ${g}`).join("")}`:void 0,p=CS(t.resources);if(p){const g=UC(p);s=Fke(s,g)}return[n,r,"",s,"",i,o,a,c,l,u,d,h,f].filter(g=>g!=null).join(`
`)};function Oke(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function kke(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Fg(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(s=>{const i=r[s];if(!Array.isArray(i))throw new Error(`Ability limits ${s} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);i.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${o}`)})})})}function Dke(t,e,n,r={}){return n==null||n.sort((s,i)=>s.localeCompare(i)),{att:{[t]:Mke(e,n,r)}}}function Mke(t,e,n={}){e=e==null?void 0:e.sort((s,i)=>s.localeCompare(i));const r=e.map(s=>({[`${t}/${s}`]:[n]}));return Object.assign({},...r)}function gZ(t){return Fg(t),`urn:recap:${Oke(t).replace(/=/g,"")}`}function UC(t){const e=kke(t.replace("urn:recap:",""));return Fg(e),e}function Lke(t,e,n){const r=Dke(t,e,n);return gZ(r)}function Uke(t){return t&&t.includes("urn:recap:")}function Bke(t,e){const n=UC(t),r=UC(e),s=$ke(n,r);return gZ(s)}function $ke(t,e){Fg(t),Fg(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((s,i)=>s.localeCompare(i)),r={att:{}};return n.forEach(s=>{var i,o;Object.keys(((i=t.att)==null?void 0:i[s])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[s])||{})).sort((a,c)=>a.localeCompare(c)).forEach(a=>{var c,l;r.att[s]=Tke(Nke({},r.att[s]),{[a]:((c=t.att[s])==null?void 0:c[a])||((l=e.att[s])==null?void 0:l[a])})})}),r}function Fke(t="",e){Fg(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let s=0;Object.keys(e.att).forEach(a=>{const c=Object.keys(e.att[a]).map(d=>({ability:d.split("/")[0],action:d.split("/")[1]}));c.sort((d,h)=>d.action.localeCompare(h.action));const l={};c.forEach(d=>{l[d.ability]||(l[d.ability]=[]),l[d.ability].push(d.action)});const u=Object.keys(l).map(d=>(s++,`(${s}) '${d}': '${l[d].join("', '")}' for '${a}'.`));r.push(u.join(", ").replace(".,","."))});const i=r.join(" "),o=`${n}${i}`;return`${t?t+" ":""}${o}`}function QF(t){var e;const n=UC(t);Fg(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(s=>s.split("/")[1]):[]}function JF(t){const e=UC(t);Fg(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(s=>{var i;(i=s==null?void 0:s[0])!=null&&i.chains&&n.push(s[0].chains)})}),[...new Set(n.flat())]}function CS(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Uke(e)?e:void 0}function aO(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function mZ(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function jo(t,...e){if(!mZ(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ZF(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function jke(t,e){jo(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function XF(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const tf=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Wke=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),zke=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!zke)throw new Error("Non little-endian hardware is not supported");function Hke(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function e3(t){if(typeof t=="string")t=Hke(t);else if(mZ(t))t=t3(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Gke(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function qke(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Vke=(t,e)=>{function n(r,...s){if(jo(r),t.nonceLength!==void 0){const l=s[0];if(!l)throw new Error("nonce / iv required");t.varSizeNonce?jo(l):jo(l,t.nonceLength)}const i=t.tagLength;i&&s[1]!==void 0&&jo(s[1]);const o=e(r,...s),a=(l,u)=>{if(u!==void 0){if(l!==2)throw new Error("cipher output not supported");jo(u)}};let c=!1;return{encrypt(l,u){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,jo(l),a(o.encrypt.length,u),o.encrypt(l,u)},decrypt(l,u){if(jo(l),i&&l.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return a(o.decrypt.length,u),o.decrypt(l,u)}}}return Object.assign(n,t),n};function ej(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Kke(e))throw new Error("invalid output, must be aligned");return e}function tj(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i);t.setUint32(e+4,o,r),t.setUint32(e+0,a,r)}function Kke(t){return t.byteOffset%4===0}function t3(t){return Uint8Array.from(t)}function Tw(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const yZ=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Yke=yZ("expand 16-byte k"),Qke=yZ("expand 32-byte k"),Jke=tf(Yke),Zke=tf(Qke);function hn(t,e){return t<<e|t>>>32-e}function n3(t){return t.byteOffset%4===0}const _A=64,Xke=16,wZ=2**32-1,nj=new Uint32Array;function eDe(t,e,n,r,s,i,o,a){const c=s.length,l=new Uint8Array(_A),u=tf(l),d=n3(s)&&n3(i),h=d?tf(s):nj,f=d?tf(i):nj;for(let p=0;p<c;o++){if(t(e,n,r,u,o,a),o>=wZ)throw new Error("arx: counter overflow");const g=Math.min(_A,c-p);if(d&&g===_A){const w=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let m=0,b;m<Xke;m++)b=w+m,f[b]=h[b]^u[m];p+=_A;continue}for(let w=0,m;w<g;w++)m=p+w,i[m]=s[m]^l[w];p+=g}}function tDe(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:i,rounds:o}=Gke({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return aO(s),aO(o),XF(i),XF(n),(a,c,l,u,d=0)=>{jo(a),jo(c),jo(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),jo(u),aO(d),d<0||d>=wZ)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const f=[];let p=a.length,g,w;if(p===32)f.push(g=t3(a)),w=Zke;else if(p===16&&n)g=new Uint8Array(32),g.set(a),g.set(a,16),w=Jke,f.push(g);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);n3(c)||f.push(c=t3(c));const m=tf(g);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(w,m,tf(c.subarray(0,16)),m),c=c.subarray(16)}const b=16-s;if(b!==c.length)throw new Error(`arx: nonce must be ${b} or 16 bytes`);if(b!==12){const A=new Uint8Array(12);A.set(c,i?0:12-c.length),c=A,f.push(c)}const v=tf(c);return eDe(t,w,m,v,l,u,d,o),Tw(...f),u}}const Cs=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class nDe{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=e3(e),jo(e,32);const n=Cs(e,0),r=Cs(e,2),s=Cs(e,4),i=Cs(e,6),o=Cs(e,8),a=Cs(e,10),c=Cs(e,12),l=Cs(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|i<<9)&8191,this.r[4]=(i>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|c<<5)&8065,this.r[8]=(c>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=Cs(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:i,r:o}=this,a=o[0],c=o[1],l=o[2],u=o[3],d=o[4],h=o[5],f=o[6],p=o[7],g=o[8],w=o[9],m=Cs(e,n+0),b=Cs(e,n+2),v=Cs(e,n+4),A=Cs(e,n+6),C=Cs(e,n+8),T=Cs(e,n+10),x=Cs(e,n+12),N=Cs(e,n+14);let S=i[0]+(m&8191),D=i[1]+((m>>>13|b<<3)&8191),P=i[2]+((b>>>10|v<<6)&8191),$=i[3]+((v>>>7|A<<9)&8191),G=i[4]+((A>>>4|C<<12)&8191),W=i[5]+(C>>>1&8191),I=i[6]+((C>>>14|T<<2)&8191),R=i[7]+((T>>>11|x<<5)&8191),B=i[8]+((x>>>8|N<<8)&8191),O=i[9]+(N>>>5|s),M=0,j=M+S*a+D*(5*w)+P*(5*g)+$*(5*p)+G*(5*f);M=j>>>13,j&=8191,j+=W*(5*h)+I*(5*d)+R*(5*u)+B*(5*l)+O*(5*c),M+=j>>>13,j&=8191;let V=M+S*c+D*a+P*(5*w)+$*(5*g)+G*(5*p);M=V>>>13,V&=8191,V+=W*(5*f)+I*(5*h)+R*(5*d)+B*(5*u)+O*(5*l),M+=V>>>13,V&=8191;let te=M+S*l+D*c+P*a+$*(5*w)+G*(5*g);M=te>>>13,te&=8191,te+=W*(5*p)+I*(5*f)+R*(5*h)+B*(5*d)+O*(5*u),M+=te>>>13,te&=8191;let Z=M+S*u+D*l+P*c+$*a+G*(5*w);M=Z>>>13,Z&=8191,Z+=W*(5*g)+I*(5*p)+R*(5*f)+B*(5*h)+O*(5*d),M+=Z>>>13,Z&=8191;let X=M+S*d+D*u+P*l+$*c+G*a;M=X>>>13,X&=8191,X+=W*(5*w)+I*(5*g)+R*(5*p)+B*(5*f)+O*(5*h),M+=X>>>13,X&=8191;let ce=M+S*h+D*d+P*u+$*l+G*c;M=ce>>>13,ce&=8191,ce+=W*a+I*(5*w)+R*(5*g)+B*(5*p)+O*(5*f),M+=ce>>>13,ce&=8191;let ge=M+S*f+D*h+P*d+$*u+G*l;M=ge>>>13,ge&=8191,ge+=W*c+I*a+R*(5*w)+B*(5*g)+O*(5*p),M+=ge>>>13,ge&=8191;let Me=M+S*p+D*f+P*h+$*d+G*u;M=Me>>>13,Me&=8191,Me+=W*l+I*c+R*a+B*(5*w)+O*(5*g),M+=Me>>>13,Me&=8191;let it=M+S*g+D*p+P*f+$*h+G*d;M=it>>>13,it&=8191,it+=W*u+I*l+R*c+B*a+O*(5*w),M+=it>>>13,it&=8191;let Je=M+S*w+D*g+P*p+$*f+G*h;M=Je>>>13,Je&=8191,Je+=W*d+I*u+R*l+B*c+O*a,M+=Je>>>13,Je&=8191,M=(M<<2)+M|0,M=M+j|0,j=M&8191,M=M>>>13,V+=M,i[0]=j,i[1]=V,i[2]=te,i[3]=Z,i[4]=X,i[5]=ce,i[6]=ge,i[7]=Me,i[8]=it,i[9]=Je}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=s,s=e[a]>>>13,e[a]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let a=1;a<10;a++)r[a]=e[a]+s,s=r[a]>>>13,r[a]&=8191;r[9]-=8192;let i=(s^1)-1;for(let a=0;a<10;a++)r[a]&=i;i=~i;for(let a=0;a<10;a++)e[a]=e[a]&i|r[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+n[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+n[a]|0)+(o>>>16)|0,e[a]=o&65535;Tw(r)}update(e){ZF(this);const{buffer:n,blockLen:r}=this;e=e3(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){for(;r<=s-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){Tw(this.h,this.r,this.buffer,this.pad)}digestInto(e){ZF(this),jke(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let o=0;o<8;o++)e[i++]=r[o]>>>0,e[i++]=r[o]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function rDe(t){const e=(r,s)=>t(s).update(e3(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const sDe=rDe(t=>new nDe(t));function iDe(t,e,n,r,s,i=20){let o=t[0],a=t[1],c=t[2],l=t[3],u=e[0],d=e[1],h=e[2],f=e[3],p=e[4],g=e[5],w=e[6],m=e[7],b=s,v=n[0],A=n[1],C=n[2],T=o,x=a,N=c,S=l,D=u,P=d,$=h,G=f,W=p,I=g,R=w,B=m,O=b,M=v,j=A,V=C;for(let Z=0;Z<i;Z+=2)T=T+D|0,O=hn(O^T,16),W=W+O|0,D=hn(D^W,12),T=T+D|0,O=hn(O^T,8),W=W+O|0,D=hn(D^W,7),x=x+P|0,M=hn(M^x,16),I=I+M|0,P=hn(P^I,12),x=x+P|0,M=hn(M^x,8),I=I+M|0,P=hn(P^I,7),N=N+$|0,j=hn(j^N,16),R=R+j|0,$=hn($^R,12),N=N+$|0,j=hn(j^N,8),R=R+j|0,$=hn($^R,7),S=S+G|0,V=hn(V^S,16),B=B+V|0,G=hn(G^B,12),S=S+G|0,V=hn(V^S,8),B=B+V|0,G=hn(G^B,7),T=T+P|0,V=hn(V^T,16),R=R+V|0,P=hn(P^R,12),T=T+P|0,V=hn(V^T,8),R=R+V|0,P=hn(P^R,7),x=x+$|0,O=hn(O^x,16),B=B+O|0,$=hn($^B,12),x=x+$|0,O=hn(O^x,8),B=B+O|0,$=hn($^B,7),N=N+G|0,M=hn(M^N,16),W=W+M|0,G=hn(G^W,12),N=N+G|0,M=hn(M^N,8),W=W+M|0,G=hn(G^W,7),S=S+D|0,j=hn(j^S,16),I=I+j|0,D=hn(D^I,12),S=S+D|0,j=hn(j^S,8),I=I+j|0,D=hn(D^I,7);let te=0;r[te++]=o+T|0,r[te++]=a+x|0,r[te++]=c+N|0,r[te++]=l+S|0,r[te++]=u+D|0,r[te++]=d+P|0,r[te++]=h+$|0,r[te++]=f+G|0,r[te++]=p+W|0,r[te++]=g+I|0,r[te++]=w+R|0,r[te++]=m+B|0,r[te++]=b+O|0,r[te++]=v+M|0,r[te++]=A+j|0,r[te++]=C+V|0}const oDe=tDe(iDe,{counterRight:!1,counterLength:4,allowShortKeys:!1}),aDe=new Uint8Array(16),rj=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(aDe.subarray(n))},cDe=new Uint8Array(32);function sj(t,e,n,r,s){const i=t(e,n,cDe),o=sDe.create(i);s&&rj(o,s),rj(o,r);const a=new Uint8Array(16),c=Wke(a);tj(c,0,BigInt(s?s.length:0),!0),tj(c,8,BigInt(r.length),!0),o.update(a);const l=o.digest();return Tw(i,a),l}const lDe=t=>(e,n,r)=>({encrypt(s,i){const o=s.length;i=ej(o+16,i,!1),i.set(s);const a=i.subarray(0,-16);t(e,n,a,a,1);const c=sj(t,e,n,a,r);return i.set(c,o),Tw(c),i},decrypt(s,i){i=ej(s.length-16,i,!1);const o=s.subarray(0,-16),a=s.subarray(-16),c=sj(t,e,n,o,r);if(!qke(a,c))throw new Error("invalid tag");return i.set(s.subarray(0,-16)),t(e,n,i,i,1),Tw(c),i}}),bZ=Vke({blockSize:64,nonceLength:12,tagLength:16},lDe(oDe));let vZ=class extends AU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,_U(e);const r=Nw(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Iw(this),this.iHash.update(e),this}digestInto(e){Iw(this),s1(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const wT=(t,e,n)=>new vZ(t,e).update(n).digest();wT.create=(t,e)=>new vZ(t,e);function uDe(t,e,n){return _U(t),n===void 0&&(n=new Uint8Array(t.outputLen)),wT(t,Nw(n),Nw(e))}const cO=new Uint8Array([0]),ij=new Uint8Array;function dDe(t,e,n,r=32){if(_U(t),LC(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=ij);const i=new Uint8Array(s*t.outputLen),o=wT.create(t,e),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let l=0;l<s;l++)cO[0]=l+1,a.update(l===0?ij:c).update(n).update(cO).digestInto(c),i.set(c,t.outputLen*l),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),cO.fill(0),i.slice(0,r)}const hDe=(t,e,n,r,s)=>dDe(t,uDe(t,e,n),r,s);function fDe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}function pDe(t,e,n){return t&e^~t&n}function gDe(t,e,n){return t&e^t&n^e&n}let mDe=class extends AU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=oO(this.buffer)}update(e){Iw(this);const{view:n,buffer:r,blockLen:s}=this;e=Nw(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=oO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Iw(this),aZ(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;fDe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=oO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}};const yDe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dd=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Md=new Uint32Array(64);class wDe extends mDe{constructor(){super(64,32,8,!1),this.A=Dd[0]|0,this.B=Dd[1]|0,this.C=Dd[2]|0,this.D=Dd[3]|0,this.E=Dd[4]|0,this.F=Dd[5]|0,this.G=Dd[6]|0,this.H=Dd[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Md[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Md[d-15],f=Md[d-2],p=qc(h,7)^qc(h,18)^h>>>3,g=qc(f,17)^qc(f,19)^f>>>10;Md[d]=g+Md[d-7]+p+Md[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=qc(a,6)^qc(a,11)^qc(a,25),f=u+h+pDe(a,c,l)+yDe[d]+Md[d]|0,p=(qc(r,2)^qc(r,13)^qc(r,22))+gDe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+p|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Md.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const i1=cZ(()=>new wDe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bT=BigInt(0),vT=BigInt(1),bDe=BigInt(2);function jg(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function o1(t){if(!jg(t))throw new Error("Uint8Array expected")}function Rw(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const vDe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Pw(t){o1(t);let e="";for(let n=0;n<t.length;n++)e+=vDe[t[n]];return e}function Ty(t){const e=t.toString(16);return e.length&1?"0"+e:e}function xU(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?bT:BigInt("0x"+t)}const au={_0:48,_9:57,A:65,F:70,a:97,f:102};function oj(t){if(t>=au._0&&t<=au._9)return t-au._0;if(t>=au.A&&t<=au.F)return t-(au.A-10);if(t>=au.a&&t<=au.f)return t-(au.a-10)}function Ow(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,i=0;s<n;s++,i+=2){const o=oj(t.charCodeAt(i)),a=oj(t.charCodeAt(i+1));if(o===void 0||a===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[s]=o*16+a}return r}function fg(t){return xU(Pw(t))}function BC(t){return o1(t),xU(Pw(Uint8Array.from(t).reverse()))}function kw(t,e){return Ow(t.toString(16).padStart(e*2,"0"))}function ET(t,e){return kw(t,e).reverse()}function EDe(t){return Ow(Ty(t))}function $o(t,e,n){let r;if(typeof e=="string")try{r=Ow(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(jg(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}function $C(...t){let e=0;for(let r=0;r<t.length;r++){const s=t[r];o1(s),e+=s.length}const n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}function CDe(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function _De(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const lO=t=>typeof t=="bigint"&&bT<=t;function CT(t,e,n){return lO(t)&&lO(e)&&lO(n)&&e<=t&&t<n}function Ku(t,e,n,r){if(!CT(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function EZ(t){let e;for(e=0;t>bT;t>>=vT,e+=1);return e}function ADe(t,e){return t>>BigInt(e)&vT}function SDe(t,e,n){return t|(n?vT:bT)<<BigInt(e)}const IU=t=>(bDe<<BigInt(t-1))-vT,uO=t=>new Uint8Array(t),aj=t=>Uint8Array.from(t);function CZ(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=uO(t),s=uO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...u)=>n(s,r,...u),c=(u=uO())=>{s=a(aj([0]),u),r=a(),u.length!==0&&(s=a(aj([1]),u),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const d=[];for(;u<e;){r=a();const h=r.slice();d.push(h),u+=r.length}return $C(...d)};return(u,d)=>{o(),c(u);let h;for(;!(h=d(l()));)c();return o(),h}}const xDe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||jg(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function yb(t,e,n={}){const r=(s,i,o)=>{const a=xDe[i];if(typeof a!="function")throw new Error("invalid validator function");const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+c)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const IDe=()=>{throw new Error("not implemented")};function r3(t){const e=new WeakMap;return(n,...r)=>{const s=e.get(n);if(s!==void 0)return s;const i=t(n,...r);return e.set(n,i),i}}var NDe=Object.freeze({__proto__:null,isBytes:jg,abytes:o1,abool:Rw,bytesToHex:Pw,numberToHexUnpadded:Ty,hexToNumber:xU,hexToBytes:Ow,bytesToNumberBE:fg,bytesToNumberLE:BC,numberToBytesBE:kw,numberToBytesLE:ET,numberToVarBytesBE:EDe,ensureBytes:$o,concatBytes:$C,equalBytes:CDe,utf8ToBytes:_De,inRange:CT,aInRange:Ku,bitLen:EZ,bitGet:ADe,bitSet:SDe,bitMask:IU,createHmacDrbg:CZ,validateObject:yb,notImplemented:IDe,memoized:r3});const ys=BigInt(0),kr=BigInt(1),cp=BigInt(2),TDe=BigInt(3),s3=BigInt(4),cj=BigInt(5),lj=BigInt(8);function Ji(t,e){const n=t%e;return n>=ys?n:e+n}function _Z(t,e,n){if(e<ys)throw new Error("invalid exponent, negatives unsupported");if(n<=ys)throw new Error("invalid modulus");if(n===kr)return ys;let r=kr;for(;e>ys;)e&kr&&(r=r*t%n),t=t*t%n,e>>=kr;return r}function ec(t,e,n){let r=t;for(;e-- >ys;)r*=r,r%=n;return r}function i3(t,e){if(t===ys)throw new Error("invert: expected non-zero number");if(e<=ys)throw new Error("invert: expected positive modulus, got "+e);let n=Ji(t,e),r=e,s=ys,i=kr;for(;n!==ys;){const o=r/n,a=r%n,c=s-i*o;r=n,n=a,s=i,i=c}if(r!==kr)throw new Error("invert: does not exist");return Ji(s,e)}function RDe(t){const e=(t-kr)/cp;let n,r,s;for(n=t-kr,r=0;n%cp===ys;n/=cp,r++);for(s=cp;s<t&&_Z(s,e,t)!==t-kr;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(t+kr)/s3;return function(a,c){const l=a.pow(c,o);if(!a.eql(a.sqr(l),c))throw new Error("Cannot find square root");return l}}const i=(n+kr)/cp;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let c=r,l=o.pow(o.mul(o.ONE,s),n),u=o.pow(a,i),d=o.pow(a,n);for(;!o.eql(d,o.ONE);){if(o.eql(d,o.ZERO))return o.ZERO;let h=1;for(let p=o.sqr(d);h<c&&!o.eql(p,o.ONE);h++)p=o.sqr(p);const f=o.pow(l,kr<<BigInt(c-h-1));l=o.sqr(f),u=o.mul(u,f),d=o.mul(d,l),c=h}return u}}function PDe(t){if(t%s3===TDe){const e=(t+kr)/s3;return function(n,r){const s=n.pow(r,e);if(!n.eql(n.sqr(s),r))throw new Error("Cannot find square root");return s}}if(t%lj===cj){const e=(t-cj)/lj;return function(n,r){const s=n.mul(r,cp),i=n.pow(s,e),o=n.mul(r,i),a=n.mul(n.mul(o,cp),i),c=n.mul(o,n.sub(a,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return RDe(t)}const ODe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kDe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ODe.reduce((r,s)=>(r[s]="function",r),e);return yb(t,n)}function DDe(t,e,n){if(n<ys)throw new Error("invalid exponent, negatives unsupported");if(n===ys)return t.ONE;if(n===kr)return e;let r=t.ONE,s=e;for(;n>ys;)n&kr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=kr;return r}function MDe(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function AZ(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function SZ(t,e,n=!1,r={}){if(t<=ys)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:s,nByteLength:i}=AZ(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:n,BITS:s,BYTES:i,MASK:IU(s),ZERO:ys,ONE:kr,create:c=>Ji(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ys<=c&&c<t},is0:c=>c===ys,isOdd:c=>(c&kr)===kr,neg:c=>Ji(-c,t),eql:(c,l)=>c===l,sqr:c=>Ji(c*c,t),add:(c,l)=>Ji(c+l,t),sub:(c,l)=>Ji(c-l,t),mul:(c,l)=>Ji(c*l,t),pow:(c,l)=>DDe(a,c,l),div:(c,l)=>Ji(c*i3(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>i3(c,t),sqrt:r.sqrt||(c=>(o||(o=PDe(t)),o(a,c))),invertBatch:c=>MDe(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?ET(c,i):kw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?BC(c):fg(c)}});return Object.freeze(a)}function xZ(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function IZ(t){const e=xZ(t);return e+Math.ceil(e/2)}function LDe(t,e,n=!1){const r=t.length,s=xZ(e),i=IZ(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=n?BC(t):fg(t),a=Ji(o,e-kr)+kr;return n?ET(a,s):kw(a,s)}const uj=BigInt(0),AA=BigInt(1);function dO(t,e){const n=e.negate();return t?n:e}function NZ(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function hO(t,e){NZ(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function UDe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function BDe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const fO=new WeakMap,TZ=new WeakMap;function pO(t){return TZ.get(t)||1}function $De(t,e){return{constTimeNegate:dO,hasPrecomputes(n){return pO(n)!==1},unsafeLadder(n,r,s=t.ZERO){let i=n;for(;r>uj;)r&AA&&(s=s.add(i)),i=i.double(),r>>=AA;return s},precomputeWindow(n,r){const{windows:s,windowSize:i}=hO(r,e),o=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,o.push(c);for(let u=1;u<i;u++)c=c.add(a),o.push(c);a=c.double()}return o},wNAF(n,r,s){const{windows:i,windowSize:o}=hO(n,e);let a=t.ZERO,c=t.BASE;const l=BigInt(2**n-1),u=2**n,d=BigInt(n);for(let h=0;h<i;h++){const f=h*o;let p=Number(s&l);s>>=d,p>o&&(p-=u,s+=AA);const g=f,w=f+Math.abs(p)-1,m=h%2!==0,b=p<0;p===0?c=c.add(dO(m,r[g])):a=a.add(dO(b,r[w]))}return{p:a,f:c}},wNAFUnsafe(n,r,s,i=t.ZERO){const{windows:o,windowSize:a}=hO(n,e),c=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let d=0;d<o;d++){const h=d*a;if(s===uj)break;let f=Number(s&c);if(s>>=u,f>a&&(f-=l,s+=AA),f===0)continue;let p=r[h+Math.abs(f)-1];f<0&&(p=p.negate()),i=i.add(p)}return i},getPrecomputes(n,r,s){let i=fO.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&fO.set(r,s(i))),i},wNAFCached(n,r,s){const i=pO(n);return this.wNAF(i,this.getPrecomputes(i,n,s),r)},wNAFCachedUnsafe(n,r,s,i){const o=pO(n);return o===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,n,s),r,i)},setWindowSize(n,r){NZ(r,e),TZ.set(n,r),fO.delete(n)}}}function FDe(t,e,n,r){if(UDe(n,t),BDe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,i=EZ(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,c=new Array(a+1).fill(s),l=Math.floor((e.BITS-1)/o)*o;let u=s;for(let d=l;d>=0;d-=o){c.fill(s);for(let f=0;f<r.length;f++){const p=r[f],g=Number(p>>BigInt(d)&BigInt(a));c[g]=c[g].add(n[f])}let h=s;for(let f=c.length-1,p=s;f>0;f--)p=p.add(c[f]),h=h.add(p);if(u=u.add(h),d!==0)for(let f=0;f<o;f++)u=u.double()}return u}function RZ(t){return kDe(t.Fp),yb(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...AZ(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const jm=BigInt(0),gO=BigInt(1);function jDe(t){return yb(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function WDe(t){const e=jDe(t),{P:n}=e,r=b=>Ji(b,n),s=e.montgomeryBits,i=Math.ceil(s/8),o=e.nByteLength,a=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>_Z(b,n-BigInt(2),n));function l(b,v,A){const C=r(b*(v-A));return v=r(v-C),A=r(A+C),[v,A]}const u=(e.a-BigInt(2))/BigInt(4);function d(b,v){Ku("u",b,jm,n),Ku("scalar",v,jm,n);const A=v,C=b;let T=gO,x=jm,N=b,S=gO,D=jm,P;for(let G=BigInt(s-1);G>=jm;G--){const W=A>>G&gO;D^=W,P=l(D,T,N),T=P[0],N=P[1],P=l(D,x,S),x=P[0],S=P[1],D=W;const I=T+x,R=r(I*I),B=T-x,O=r(B*B),M=R-O,j=N+S,V=N-S,te=r(V*I),Z=r(j*B),X=te+Z,ce=te-Z;N=r(X*X),S=r(C*r(ce*ce)),T=r(R*O),x=r(M*(R+r(u*M)))}P=l(D,T,N),T=P[0],N=P[1],P=l(D,x,S),x=P[0],S=P[1];const $=c(x);return r(T*$)}function h(b){return ET(r(b),i)}function f(b){const v=$o("u coordinate",b,i);return o===32&&(v[31]&=127),BC(v)}function p(b){const v=$o("scalar",b),A=v.length;if(A!==i&&A!==o){let C=""+i+" or "+o;throw new Error("invalid scalar, expected "+C+" bytes, got "+A)}return BC(a(v))}function g(b,v){const A=f(v),C=p(b),T=d(A,C);if(T===jm)throw new Error("invalid private or public key received");return h(T)}const w=h(e.Gu);function m(b){return g(b,w)}return{scalarMult:g,scalarMultBase:m,getSharedSecret:(b,v)=>g(b,v),getPublicKey:b=>m(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:w}}const o3=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const zDe=BigInt(1),dj=BigInt(2),HDe=BigInt(3),GDe=BigInt(5);BigInt(8);function qDe(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=o3,o=t*t%i*t%i,a=ec(o,dj,i)*o%i,c=ec(a,zDe,i)*t%i,l=ec(c,GDe,i)*c%i,u=ec(l,e,i)*l%i,d=ec(u,n,i)*u%i,h=ec(d,r,i)*d%i,f=ec(h,s,i)*h%i,p=ec(f,s,i)*h%i,g=ec(p,e,i)*l%i;return{pow_p_5_8:ec(g,dj,i)*t%i,b2:o}}function VDe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const a3=WDe({P:o3,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=o3,{pow_p_5_8:n,b2:r}=qDe(t);return Ji(ec(n,HDe,e)*r,e)},adjustScalarBytes:VDe,randomBytes:mb});function hj(t){t.lowS!==void 0&&Rw("lowS",t.lowS),t.prehash!==void 0&&Rw("prehash",t.prehash)}function KDe(t){const e=RZ(t);yb(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:YDe,hexToBytes:QDe}=NDe;class JDe extends Error{constructor(e=""){super(e)}}const bu={Err:JDe,_tlv:{encode:(t,e)=>{const{Err:n}=bu;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,s=Ty(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ty(s.length/2|128):"";return Ty(t)+i+s+e},decode(t,e){const{Err:n}=bu;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const s=e[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=e.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of l)o=o<<8|u;if(r+=c,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(r,r+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(r+o)}}},_int:{encode(t){const{Err:e}=bu;if(t<Mu)throw new e("integer: negative integers are not allowed");let n=Ty(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=bu;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return YDe(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=bu,s=typeof t=="string"?QDe(t):t;o1(s);const{v:i,l:o}=r.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:l,l:u}=r.decode(2,c);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(t){const{_tlv:e,_int:n}=bu,r=e.encode(2,n.encode(t.r)),s=e.encode(2,n.encode(t.s)),i=r+s;return e.encode(48,i)}},Mu=BigInt(0),as=BigInt(1);BigInt(2);const fj=BigInt(3);BigInt(4);function ZDe(t){const e=KDe(t),{Fp:n}=e,r=SZ(e.n,e.nBitLength),s=e.toBytes||((g,w,m)=>{const b=w.toAffine();return $C(Uint8Array.from([4]),n.toBytes(b.x),n.toBytes(b.y))}),i=e.fromBytes||(g=>{const w=g.subarray(1),m=n.fromBytes(w.subarray(0,n.BYTES)),b=n.fromBytes(w.subarray(n.BYTES,2*n.BYTES));return{x:m,y:b}});function o(g){const{a:w,b:m}=e,b=n.sqr(g),v=n.mul(b,g);return n.add(n.add(v,n.mul(g,w)),m)}if(!n.eql(n.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(g){return CT(g,as,e.n)}function c(g){const{allowedPrivateKeyLengths:w,nByteLength:m,wrapPrivateKey:b,n:v}=e;if(w&&typeof g!="bigint"){if(jg(g)&&(g=Pw(g)),typeof g!="string"||!w.includes(g.length))throw new Error("invalid private key");g=g.padStart(m*2,"0")}let A;try{A=typeof g=="bigint"?g:fg($o("private key",g,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof g)}return b&&(A=Ji(A,v)),Ku("private key",A,as,v),A}function l(g){if(!(g instanceof h))throw new Error("ProjectivePoint expected")}const u=r3((g,w)=>{const{px:m,py:b,pz:v}=g;if(n.eql(v,n.ONE))return{x:m,y:b};const A=g.is0();w==null&&(w=A?n.ONE:n.inv(v));const C=n.mul(m,w),T=n.mul(b,w),x=n.mul(v,w);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(x,n.ONE))throw new Error("invZ was invalid");return{x:C,y:T}}),d=r3(g=>{if(g.is0()){if(e.allowInfinityPoint&&!n.is0(g.py))return;throw new Error("bad point: ZERO")}const{x:w,y:m}=g.toAffine();if(!n.isValid(w)||!n.isValid(m))throw new Error("bad point: x or y not FE");const b=n.sqr(m),v=o(w);if(!n.eql(b,v))throw new Error("bad point: equation left != right");if(!g.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class h{constructor(w,m,b){if(this.px=w,this.py=m,this.pz=b,w==null||!n.isValid(w))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(b==null||!n.isValid(b))throw new Error("z required");Object.freeze(this)}static fromAffine(w){const{x:m,y:b}=w||{};if(!w||!n.isValid(m)||!n.isValid(b))throw new Error("invalid affine point");if(w instanceof h)throw new Error("projective point not allowed");const v=A=>n.eql(A,n.ZERO);return v(m)&&v(b)?h.ZERO:new h(m,b,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(w){const m=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(m[v])).map(h.fromAffine)}static fromHex(w){const m=h.fromAffine(i($o("pointHex",w)));return m.assertValidity(),m}static fromPrivateKey(w){return h.BASE.multiply(c(w))}static msm(w,m){return FDe(h,r,w,m)}_setWindowSize(w){p.setWindowSize(this,w)}assertValidity(){d(this)}hasEvenY(){const{y:w}=this.toAffine();if(n.isOdd)return!n.isOdd(w);throw new Error("Field doesn't support isOdd")}equals(w){l(w);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:T}=w,x=n.eql(n.mul(m,T),n.mul(A,v)),N=n.eql(n.mul(b,T),n.mul(C,v));return x&&N}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:w,b:m}=e,b=n.mul(m,fj),{px:v,py:A,pz:C}=this;let T=n.ZERO,x=n.ZERO,N=n.ZERO,S=n.mul(v,v),D=n.mul(A,A),P=n.mul(C,C),$=n.mul(v,A);return $=n.add($,$),N=n.mul(v,C),N=n.add(N,N),T=n.mul(w,N),x=n.mul(b,P),x=n.add(T,x),T=n.sub(D,x),x=n.add(D,x),x=n.mul(T,x),T=n.mul($,T),N=n.mul(b,N),P=n.mul(w,P),$=n.sub(S,P),$=n.mul(w,$),$=n.add($,N),N=n.add(S,S),S=n.add(N,S),S=n.add(S,P),S=n.mul(S,$),x=n.add(x,S),P=n.mul(A,C),P=n.add(P,P),S=n.mul(P,$),T=n.sub(T,S),N=n.mul(P,D),N=n.add(N,N),N=n.add(N,N),new h(T,x,N)}add(w){l(w);const{px:m,py:b,pz:v}=this,{px:A,py:C,pz:T}=w;let x=n.ZERO,N=n.ZERO,S=n.ZERO;const D=e.a,P=n.mul(e.b,fj);let $=n.mul(m,A),G=n.mul(b,C),W=n.mul(v,T),I=n.add(m,b),R=n.add(A,C);I=n.mul(I,R),R=n.add($,G),I=n.sub(I,R),R=n.add(m,v);let B=n.add(A,T);return R=n.mul(R,B),B=n.add($,W),R=n.sub(R,B),B=n.add(b,v),x=n.add(C,T),B=n.mul(B,x),x=n.add(G,W),B=n.sub(B,x),S=n.mul(D,R),x=n.mul(P,W),S=n.add(x,S),x=n.sub(G,S),S=n.add(G,S),N=n.mul(x,S),G=n.add($,$),G=n.add(G,$),W=n.mul(D,W),R=n.mul(P,R),G=n.add(G,W),W=n.sub($,W),W=n.mul(D,W),R=n.add(R,W),$=n.mul(G,R),N=n.add(N,$),$=n.mul(B,R),x=n.mul(I,x),x=n.sub(x,$),$=n.mul(I,G),S=n.mul(B,S),S=n.add(S,$),new h(x,N,S)}subtract(w){return this.add(w.negate())}is0(){return this.equals(h.ZERO)}wNAF(w){return p.wNAFCached(this,w,h.normalizeZ)}multiplyUnsafe(w){const{endo:m,n:b}=e;Ku("scalar",w,Mu,b);const v=h.ZERO;if(w===Mu)return v;if(this.is0()||w===as)return this;if(!m||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,w,h.normalizeZ);let{k1neg:A,k1:C,k2neg:T,k2:x}=m.splitScalar(w),N=v,S=v,D=this;for(;C>Mu||x>Mu;)C&as&&(N=N.add(D)),x&as&&(S=S.add(D)),D=D.double(),C>>=as,x>>=as;return A&&(N=N.negate()),T&&(S=S.negate()),S=new h(n.mul(S.px,m.beta),S.py,S.pz),N.add(S)}multiply(w){const{endo:m,n:b}=e;Ku("scalar",w,as,b);let v,A;if(m){const{k1neg:C,k1:T,k2neg:x,k2:N}=m.splitScalar(w);let{p:S,f:D}=this.wNAF(T),{p:P,f:$}=this.wNAF(N);S=p.constTimeNegate(C,S),P=p.constTimeNegate(x,P),P=new h(n.mul(P.px,m.beta),P.py,P.pz),v=S.add(P),A=D.add($)}else{const{p:C,f:T}=this.wNAF(w);v=C,A=T}return h.normalizeZ([v,A])[0]}multiplyAndAddUnsafe(w,m,b){const v=h.BASE,A=(T,x)=>x===Mu||x===as||!T.equals(v)?T.multiplyUnsafe(x):T.multiply(x),C=A(this,m).add(A(w,b));return C.is0()?void 0:C}toAffine(w){return u(this,w)}isTorsionFree(){const{h:w,isTorsionFree:m}=e;if(w===as)return!0;if(m)return m(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:w,clearCofactor:m}=e;return w===as?this:m?m(h,this):this.multiplyUnsafe(e.h)}toRawBytes(w=!0){return Rw("isCompressed",w),this.assertValidity(),s(h,this,w)}toHex(w=!0){return Rw("isCompressed",w),Pw(this.toRawBytes(w))}}h.BASE=new h(e.Gx,e.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=$De(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:a}}function XDe(t){const e=RZ(t);return yb(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function e3e(t){const e=XDe(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(W){return Ji(W,r)}function a(W){return i3(W,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:d}=ZDe({...e,toBytes(W,I,R){const B=I.toAffine(),O=n.toBytes(B.x),M=$C;return Rw("isCompressed",R),R?M(Uint8Array.from([I.hasEvenY()?2:3]),O):M(Uint8Array.from([4]),O,n.toBytes(B.y))},fromBytes(W){const I=W.length,R=W[0],B=W.subarray(1);if(I===s&&(R===2||R===3)){const O=fg(B);if(!CT(O,as,n.ORDER))throw new Error("Point is not on curve");const M=u(O);let j;try{j=n.sqrt(M)}catch(te){const Z=te instanceof Error?": "+te.message:"";throw new Error("Point is not on curve"+Z)}const V=(j&as)===as;return(R&1)===1!==V&&(j=n.neg(j)),{x:O,y:j}}else if(I===i&&R===4){const O=n.fromBytes(B.subarray(0,n.BYTES)),M=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:O,y:M}}else{const O=s,M=i;throw new Error("invalid Point, expected length of "+O+", or uncompressed "+M+", got "+I)}}}),h=W=>Pw(kw(W,e.nByteLength));function f(W){const I=r>>as;return W>I}function p(W){return f(W)?o(-W):W}const g=(W,I,R)=>fg(W.slice(I,R));class w{constructor(I,R,B){this.r=I,this.s=R,this.recovery=B,this.assertValidity()}static fromCompact(I){const R=e.nByteLength;return I=$o("compactSignature",I,R*2),new w(g(I,0,R),g(I,R,2*R))}static fromDER(I){const{r:R,s:B}=bu.toSig($o("DER",I));return new w(R,B)}assertValidity(){Ku("r",this.r,as,r),Ku("s",this.s,as,r)}addRecoveryBit(I){return new w(this.r,this.s,I)}recoverPublicKey(I){const{r:R,s:B,recovery:O}=this,M=T($o("msgHash",I));if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");const j=O===2||O===3?R+e.n:R;if(j>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const V=O&1?"03":"02",te=c.fromHex(V+h(j)),Z=a(j),X=o(-M*Z),ce=o(B*Z),ge=c.BASE.multiplyAndAddUnsafe(te,X,ce);if(!ge)throw new Error("point at infinify");return ge.assertValidity(),ge}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ow(this.toDERHex())}toDERHex(){return bu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ow(this.toCompactHex())}toCompactHex(){return h(this.r)+h(this.s)}}const m={isValidPrivateKey(W){try{return l(W),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const W=IZ(e.n);return LDe(e.randomBytes(W),e.n)},precompute(W=8,I=c.BASE){return I._setWindowSize(W),I.multiply(BigInt(3)),I}};function b(W,I=!0){return c.fromPrivateKey(W).toRawBytes(I)}function v(W){const I=jg(W),R=typeof W=="string",B=(I||R)&&W.length;return I?B===s||B===i:R?B===2*s||B===2*i:W instanceof c}function A(W,I,R=!0){if(v(W))throw new Error("first arg must be private key");if(!v(I))throw new Error("second arg must be public key");return c.fromHex(I).multiply(l(W)).toRawBytes(R)}const C=e.bits2int||function(W){if(W.length>8192)throw new Error("input is too large");const I=fg(W),R=W.length*8-e.nBitLength;return R>0?I>>BigInt(R):I},T=e.bits2int_modN||function(W){return o(C(W))},x=IU(e.nBitLength);function N(W){return Ku("num < 2^"+e.nBitLength,W,Mu,x),kw(W,e.nByteLength)}function S(W,I,R=D){if(["recovered","canonical"].some(it=>it in R))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:O}=e;let{lowS:M,prehash:j,extraEntropy:V}=R;M==null&&(M=!0),W=$o("msgHash",W),hj(R),j&&(W=$o("prehashed msgHash",B(W)));const te=T(W),Z=l(I),X=[N(Z),N(te)];if(V!=null&&V!==!1){const it=V===!0?O(n.BYTES):V;X.push($o("extraEntropy",it))}const ce=$C(...X),ge=te;function Me(it){const Je=C(it);if(!d(Je))return;const bt=a(Je),Nt=c.BASE.multiply(Je).toAffine(),At=o(Nt.x);if(At===Mu)return;const ne=o(bt*o(ge+At*Z));if(ne===Mu)return;let ie=(Nt.x===At?0:2)|Number(Nt.y&as),be=ne;return M&&f(ne)&&(be=p(ne),ie^=1),new w(At,be,ie)}return{seed:ce,k2sig:Me}}const D={lowS:e.lowS,prehash:!1},P={lowS:e.lowS,prehash:!1};function $(W,I,R=D){const{seed:B,k2sig:O}=S(W,I,R),M=e;return CZ(M.hash.outputLen,M.nByteLength,M.hmac)(B,O)}c.BASE._setWindowSize(8);function G(W,I,R,B=P){var ne;const O=W;I=$o("msgHash",I),R=$o("publicKey",R);const{lowS:M,prehash:j,format:V}=B;if(hj(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(V!==void 0&&V!=="compact"&&V!=="der")throw new Error("format must be compact or der");const te=typeof O=="string"||jg(O),Z=!te&&!V&&typeof O=="object"&&O!==null&&typeof O.r=="bigint"&&typeof O.s=="bigint";if(!te&&!Z)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let X,ce;try{if(Z&&(X=new w(O.r,O.s)),te){try{V!=="compact"&&(X=w.fromDER(O))}catch(ie){if(!(ie instanceof bu.Err))throw ie}!X&&V!=="der"&&(X=w.fromCompact(O))}ce=c.fromHex(R)}catch{return!1}if(!X||M&&X.hasHighS())return!1;j&&(I=e.hash(I));const{r:ge,s:Me}=X,it=T(I),Je=a(Me),bt=o(it*Je),Nt=o(ge*Je),At=(ne=c.BASE.multiplyAndAddUnsafe(ce,bt,Nt))==null?void 0:ne.toAffine();return At?o(At.x)===ge:!1}return{CURVE:e,getPublicKey:b,getSharedSecret:A,sign:$,verify:G,ProjectivePoint:c,Signature:w,utils:m}}function t3e(t){return{hash:t,hmac:(e,...n)=>wT(t,e,ike(...n)),randomBytes:mb}}function n3e(t,e){const n=r=>e3e({...t,...t3e(r)});return{...n(e),create:n}}const PZ=SZ(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),r3e=PZ.create(BigInt("-3")),s3e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),i3e=n3e({a:r3e,b:s3e,Fp:PZ,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},i1),OZ="base10",Si="base16",Sc="base64pad",nh="base64url",a1="utf8",kZ=0,Yu=1,c1=2,o3e=0,pj=1,hE=12,NU=32;function a3e(){const t=a3.utils.randomPrivateKey(),e=a3.getPublicKey(t);return{privateKey:uo(t,Si),publicKey:uo(e,Si)}}function c3(){const t=mb(NU);return uo(t,Si)}function c3e(t,e){const n=a3.getSharedSecret(Ra(t,Si),Ra(e,Si)),r=hDe(i1,n,void 0,void 0,NU);return uo(r,Si)}function _S(t){const e=i1(Ra(t,Si));return uo(e,Si)}function wl(t){const e=i1(Ra(t,a1));return uo(e,Si)}function DZ(t){return Ra(`${t}`,OZ)}function Wg(t){return Number(uo(t,OZ))}function MZ(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function LZ(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function l3e(t){const e=DZ(typeof t.type<"u"?t.type:kZ);if(Wg(e)===Yu&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?Ra(t.senderPublicKey,Si):void 0,r=typeof t.iv<"u"?Ra(t.iv,Si):mb(hE),s=Ra(t.symKey,Si),i=bZ(s,r).encrypt(Ra(t.message,a1)),o=UZ({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===nh?MZ(o):o}function u3e(t){const e=Ra(t.symKey,Si),{sealed:n,iv:r}=FC({encoded:t.encoded,encoding:t.encoding}),s=bZ(e,r).decrypt(n);if(s===null)throw new Error("Failed to decrypt");return uo(s,a1)}function d3e(t,e){const n=DZ(c1),r=mb(hE),s=Ra(t,a1),i=UZ({type:n,sealed:s,iv:r});return e===nh?MZ(i):i}function h3e(t,e){const{sealed:n}=FC({encoded:t,encoding:e});return uo(n,a1)}function UZ(t){if(Wg(t.type)===c1)return uo(lE([t.type,t.sealed]),Sc);if(Wg(t.type)===Yu){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return uo(lE([t.type,t.senderPublicKey,t.iv,t.sealed]),Sc)}return uo(lE([t.type,t.iv,t.sealed]),Sc)}function FC(t){const e=(t.encoding||Sc)===nh?LZ(t.encoded):t.encoded,n=Ra(e,Sc),r=n.slice(o3e,pj),s=pj;if(Wg(r)===Yu){const c=s+NU,l=c+hE,u=n.slice(s,c),d=n.slice(c,l),h=n.slice(l);return{type:r,sealed:h,iv:d,senderPublicKey:u}}if(Wg(r)===c1){const c=n.slice(s),l=mb(hE);return{type:r,sealed:c,iv:l}}const i=s+hE,o=n.slice(s,i),a=n.slice(i);return{type:r,sealed:a,iv:o}}function f3e(t,e){const n=FC({encoded:t,encoding:e==null?void 0:e.encoding});return BZ({type:Wg(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?uo(n.senderPublicKey,Si):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function BZ(t){const e=(t==null?void 0:t.type)||kZ;if(e===Yu){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function gj(t){return t.type===Yu&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function mj(t){return t.type===c1}function p3e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return lE([new Uint8Array([4]),e,n])}function g3e(t,e){const[n,r,s]=t.split("."),i=Buffer.from(LZ(s),"base64");if(i.length!==64)throw new Error("Invalid signature length");const o=i.slice(0,32),a=i.slice(32,64),c=`${n}.${r}`,l=i1(c),u=p3e(e);if(!i3e.verify(lE([o,a]),l,u))throw new Error("Invalid signature");return BD(t).payload}const m3e="irn";function dI(t){return(t==null?void 0:t.relay)||{protocol:m3e}}function xv(t){const e=ENe[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function y3e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(s=>{if(s.startsWith(r)){const i=s.replace(r,""),o=t[s];n[i]=o}}),n}function yj(t){if(!t.includes("wc:")){const l=oZ(t);l!=null&&l.includes("wc:")&&(t=l)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),s=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",o=new URLSearchParams(i),a={};o.forEach((l,u)=>{a[u]=l});const c=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:r,topic:w3e(s[0]),version:parseInt(s[1],10),symKey:a.symKey,relay:y3e(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function w3e(t){return t.startsWith("//")?t.substring(2):t}function b3e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(s=>{const i=s,o=n+e+i;t[i]&&(r[o]=t[i])}),r}function wj(t){const e=new URLSearchParams,n=b3e(t.relay);Object.keys(n).sort().forEach(s=>{e.set(s,n[s])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function SA(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var v3e=Object.defineProperty,E3e=Object.defineProperties,C3e=Object.getOwnPropertyDescriptors,bj=Object.getOwnPropertySymbols,_3e=Object.prototype.hasOwnProperty,A3e=Object.prototype.propertyIsEnumerable,vj=(t,e,n)=>e in t?v3e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S3e=(t,e)=>{for(var n in e||(e={}))_3e.call(e,n)&&vj(t,n,e[n]);if(bj)for(var n of bj(e))A3e.call(e,n)&&vj(t,n,e[n]);return t},x3e=(t,e)=>E3e(t,C3e(e));function wb(t){const e=[];return t.forEach(n=>{const[r,s]=n.split(":");e.push(`${r}:${s}`)}),e}function I3e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...wb(n.accounts))}),e}function N3e(t,e){const n=[];return Object.values(t).forEach(r=>{wb(r.accounts).includes(e)&&n.push(...r.methods)}),n}function T3e(t,e){const n=[];return Object.values(t).forEach(r=>{wb(r.accounts).includes(e)&&n.push(...r.events)}),n}function _T(t){return t.includes(":")}function Ry(t){return _T(t)?t.split(":")[0]:t}function Ej(t){var e,n,r;const s={};if(!rf(t))return s;for(const[i,o]of Object.entries(t)){const a=_T(i)?[i]:o.chains,c=o.methods||[],l=o.events||[],u=Ry(i);s[u]=x3e(S3e({},s[u]),{chains:Ml(a,(e=s[u])==null?void 0:e.chains),methods:Ml(c,(n=s[u])==null?void 0:n.methods),events:Ml(l,(r=s[u])==null?void 0:r.events)})}return s}function R3e(t){const e={};return t==null||t.forEach(n=>{var r;const[s,i]=n.split(":");e[s]||(e[s]={accounts:[],chains:[],events:[],methods:[]}),e[s].accounts.push(n),(r=e[s].chains)==null||r.push(`${s}:${i}`)}),e}function Cj(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=R3e(e);for(const[r,s]of Object.entries(n))s.methods?s.methods=Ml(s.methods,t):s.methods=t,s.events=["chainChanged","accountsChanged"];return n}function P3e(t,e){var n,r,s,i,o,a;const c=Ej(t),l=Ej(e),u={},d=Object.keys(c).concat(Object.keys(l));for(const h of d)u[h]={chains:Ml((n=c[h])==null?void 0:n.chains,(r=l[h])==null?void 0:r.chains),methods:Ml((s=c[h])==null?void 0:s.methods,(i=l[h])==null?void 0:i.methods),events:Ml((o=c[h])==null?void 0:o.events,(a=l[h])==null?void 0:a.events)};return u}const O3e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},k3e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function xe(t,e){const{message:n,code:r}=k3e[t];return{message:e?`${n} ${e}`:n,code:r}}function $n(t,e){const{message:n,code:r}=O3e[t];return{message:e?`${n} ${e}`:n,code:r}}function nf(t,e){return!!Array.isArray(t)}function rf(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Rs(t){return typeof t>"u"}function Ur(t,e){return e&&Rs(t)?!0:typeof t=="string"&&!!t.trim().length}function TU(t,e){return e&&Rs(t)?!0:typeof t=="number"&&!isNaN(t)}function D3e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),s=Object.keys(n);let i=!0;return Np(s,r)?(r.forEach(o=>{const{accounts:a,methods:c,events:l}=t.namespaces[o],u=wb(a),d=n[o];(!Np(tZ(o,d),u)||!Np(d.methods,c)||!Np(d.events,l))&&(i=!1)}),i):!1}function hI(t){return Ur(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function M3e(t){if(Ur(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&hI(n)}}return!1}function L3e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Ur(t,!1)){if(e(t))return!0;const n=oZ(t);return e(n)}}catch{}return!1}function U3e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function B3e(t){return t==null?void 0:t.topic}function $3e(t,e){let n=null;return Ur(t==null?void 0:t.publicKey,!1)||(n=xe("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function _j(t){let e=!0;return nf(t)?t.length&&(e=t.every(n=>Ur(n,!1))):e=!1,e}function F3e(t,e,n){let r=null;return nf(e)&&e.length?e.forEach(s=>{r||hI(s)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):hI(t)||(r=$n("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function j3e(t,e,n){let r=null;return Object.entries(t).forEach(([s,i])=>{if(r)return;const o=F3e(s,tZ(s,i),`${e} ${n}`);o&&(r=o)}),r}function W3e(t,e){let n=null;return nf(t)?t.forEach(r=>{n||M3e(r)||(n=$n("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=$n("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function z3e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=W3e(r==null?void 0:r.accounts,`${e} namespace`);s&&(n=s)}),n}function H3e(t,e){let n=null;return _j(t==null?void 0:t.methods)?_j(t==null?void 0:t.events)||(n=$n("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=$n("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function $Z(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const s=H3e(r,`${e}, namespace`);s&&(n=s)}),n}function G3e(t,e,n){let r=null;if(t&&rf(t)){const s=$Z(t,e);s&&(r=s);const i=j3e(t,e,n);i&&(r=i)}else r=xe("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function mO(t,e){let n=null;if(t&&rf(t)){const r=$Z(t,e);r&&(n=r);const s=z3e(t,e);s&&(n=s)}else n=xe("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function FZ(t){return Ur(t.protocol,!0)}function q3e(t,e){let n=!1;return t?t&&nf(t)&&t.length&&t.forEach(r=>{n=FZ(r)}):n=!0,n}function V3e(t){return typeof t=="number"}function zi(t){return typeof t<"u"&&typeof t!==null}function K3e(t){return!(!t||typeof t!="object"||!t.code||!TU(t.code,!1)||!t.message||!Ur(t.message,!1))}function Y3e(t){return!(Rs(t)||!Ur(t.method,!1))}function Q3e(t){return!(Rs(t)||Rs(t.result)&&Rs(t.error)||!TU(t.id,!1)||!Ur(t.jsonrpc,!1))}function J3e(t){return!(Rs(t)||!Ur(t.name,!1))}function Aj(t,e){return!(!hI(e)||!I3e(t).includes(e))}function Z3e(t,e,n){return Ur(n,!1)?N3e(t,e).includes(n):!1}function X3e(t,e,n){return Ur(n,!1)?T3e(t,e).includes(n):!1}function Sj(t,e,n){let r=null;const s=e5e(t),i=t5e(e),o=Object.keys(s),a=Object.keys(i),c=xj(Object.keys(t)),l=xj(Object.keys(e)),u=c.filter(d=>!l.includes(d));return u.length&&(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),Np(o,a)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(d=>{if(!d.includes(":")||r)return;const h=wb(e[d].accounts);h.includes(d)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${d}
        Required: ${d}
        Approved: ${h.toString()}`))}),o.forEach(d=>{r||(Np(s[d].methods,i[d].methods)?Np(s[d].events,i[d].events)||(r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${d}`)):r=xe("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${d}`))}),r}function e5e(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(s=>{e[s]={methods:t[n].methods,events:t[n].events}})}),e}function xj(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function t5e(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=wb(t[n].accounts);r==null||r.forEach(s=>{e[s]={accounts:t[n].accounts.filter(i=>i.includes(`${s}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function n5e(t,e){return TU(t,!1)&&t<=e.max&&t>=e.min}function Ij(){const t=r1();return new Promise(e=>{switch(t){case Ho.browser:e(r5e());break;case Ho.reactNative:e(s5e());break;case Ho.node:e(i5e());break;default:e(!0)}})}function r5e(){return gb()&&(navigator==null?void 0:navigator.onLine)}async function s5e(){if(Of()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function i5e(){return!0}function o5e(t){switch(r1()){case Ho.browser:a5e(t);break;case Ho.reactNative:c5e(t);break}}function a5e(t){!Of()&&gb()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function c5e(t){Of()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function l5e(){var t;return gb()&&Lg()?((t=Lg())==null?void 0:t.visibilityState)==="visible":!0}const yO={};class iv{static get(e){return yO[e]}static set(e,n){yO[e]=n}static delete(e){delete yO[e]}}var u5e={};const jZ="wc",WZ=2,l3="core",Hl=`${jZ}@2:${l3}:`,d5e={logger:"error"},h5e={database:":memory:"},f5e="crypto",Nj="client_ed25519_seed",p5e=_e.ONE_DAY,g5e="keychain",m5e="0.3",y5e="messages",w5e="0.3",Tj=_e.SIX_HOURS,b5e="publisher",zZ="irn",v5e="error",HZ="wss://relay.walletconnect.org",E5e="relayer",fs={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},C5e="_subscription",aa={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},_5e=.1,u3="2.21.0",sr={link_mode:"link_mode",relay:"relay"},AS={inbound:"inbound",outbound:"outbound"},A5e="0.3",S5e="WALLETCONNECT_CLIENT_ID",Rj="WALLETCONNECT_LINK_MODE_APPS",Po={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},x5e="subscription",I5e="0.3",N5e="pairing",T5e="0.3",ov={wc_pairingDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:_e.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:0},res:{ttl:_e.ONE_DAY,prompt:!1,tag:0}}},lp={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Qa={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},R5e="history",P5e="0.3",O5e="expirer",fa={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},k5e="0.3",D5e="verify-api",M5e="https://verify.walletconnect.com",GZ="https://verify.walletconnect.org",fE=GZ,L5e=`${fE}/v3`,U5e=[M5e,GZ],B5e="echo",$5e="https://echo.walletconnect.com",Zc={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},du={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ja={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},Hf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Gf={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},av={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},F5e=.1,j5e="event-client",W5e=86400,z5e="https://pulse.walletconnect.org/batch";function H5e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var s=0;s<t.length;s++){var i=t.charAt(s),o=i.charCodeAt(0);if(n[o]!==255)throw new TypeError(i+" is ambiguous");n[o]=s}var a=t.length,c=t.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function d(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,w=0,m=0,b=p.length;m!==b&&p[m]===0;)m++,g++;for(var v=(b-m)*u+1>>>0,A=new Uint8Array(v);m!==b;){for(var C=p[m],T=0,x=v-1;(C!==0||T<w)&&x!==-1;x--,T++)C+=256*A[x]>>>0,A[x]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");w=T,m++}for(var N=v-w;N!==v&&A[N]===0;)N++;for(var S=c.repeat(g);N<v;++N)S+=t.charAt(A[N]);return S}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var w=0,m=0;p[g]===c;)w++,g++;for(var b=(p.length-g)*l+1>>>0,v=new Uint8Array(b);p[g];){var A=n[p.charCodeAt(g)];if(A===255)return;for(var C=0,T=b-1;(A!==0||C<m)&&T!==-1;T--,C++)A+=a*v[T]>>>0,v[T]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");m=C,g++}if(p[g]!==" "){for(var x=b-m;x!==b&&v[x]===0;)x++;for(var N=new Uint8Array(w+(b-x)),S=w;x!==b;)N[S++]=v[x++];return N}}}function f(p){var g=h(p);if(g)return g;throw new Error(`Non-${e} character`)}return{encode:d,decodeUnsafe:h,decode:f}}var G5e=H5e,q5e=G5e;const qZ=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},V5e=t=>new TextEncoder().encode(t),K5e=t=>new TextDecoder().decode(t);class Y5e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Q5e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return VZ(this,e)}}class J5e{constructor(e){this.decoders=e}or(e){return VZ(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const VZ=(t,e)=>new J5e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Z5e{constructor(e,n,r,s){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=s,this.encoder=new Y5e(e,n,r),this.decoder=new Q5e(e,n,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const AT=({name:t,prefix:e,encode:n,decode:r})=>new Z5e(t,e,n,r),l1=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:s}=q5e(n,e);return AT({prefix:t,name:e,encode:r,decode:i=>qZ(s(i))})},X5e=(t,e,n,r)=>{const s={};for(let u=0;u<e.length;++u)s[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;const o=new Uint8Array(i*n/8|0);let a=0,c=0,l=0;for(let u=0;u<i;++u){const d=s[t[u]];if(d===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|d,a+=n,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=n||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o},eMe=(t,e,n)=>{const r=e[e.length-1]==="=",s=(1<<n)-1;let i="",o=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>n;)o-=n,i+=e[s&a>>o];if(o&&(i+=e[s&a<<n-o]),r)for(;i.length*n&7;)i+="=";return i},Ws=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>AT({prefix:e,name:t,encode(s){return eMe(s,r,n)},decode(s){return X5e(s,r,n,t)}}),tMe=AT({prefix:"\0",name:"identity",encode:t=>K5e(t),decode:t=>V5e(t)});var nMe=Object.freeze({__proto__:null,identity:tMe});const rMe=Ws({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var sMe=Object.freeze({__proto__:null,base2:rMe});const iMe=Ws({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var oMe=Object.freeze({__proto__:null,base8:iMe});const aMe=l1({prefix:"9",name:"base10",alphabet:"0123456789"});var cMe=Object.freeze({__proto__:null,base10:aMe});const lMe=Ws({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),uMe=Ws({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var dMe=Object.freeze({__proto__:null,base16:lMe,base16upper:uMe});const hMe=Ws({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fMe=Ws({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),pMe=Ws({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),gMe=Ws({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),mMe=Ws({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),yMe=Ws({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),wMe=Ws({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),bMe=Ws({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),vMe=Ws({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var EMe=Object.freeze({__proto__:null,base32:hMe,base32upper:fMe,base32pad:pMe,base32padupper:gMe,base32hex:mMe,base32hexupper:yMe,base32hexpad:wMe,base32hexpadupper:bMe,base32z:vMe});const CMe=l1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),_Me=l1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var AMe=Object.freeze({__proto__:null,base36:CMe,base36upper:_Me});const SMe=l1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),xMe=l1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var IMe=Object.freeze({__proto__:null,base58btc:SMe,base58flickr:xMe});const NMe=Ws({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),TMe=Ws({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),RMe=Ws({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),PMe=Ws({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var OMe=Object.freeze({__proto__:null,base64:NMe,base64pad:TMe,base64url:RMe,base64urlpad:PMe});const KZ=Array.from(""),kMe=KZ.reduce((t,e,n)=>(t[n]=e,t),[]),DMe=KZ.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function MMe(t){return t.reduce((e,n)=>(e+=kMe[n],e),"")}function LMe(t){const e=[];for(const n of t){const r=DMe[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const UMe=AT({prefix:"",name:"base256emoji",encode:MMe,decode:LMe});var BMe=Object.freeze({__proto__:null,base256emoji:UMe}),$Me=YZ,Pj=128,FMe=-128,jMe=Math.pow(2,31);function YZ(t,e,n){e=e||[],n=n||0;for(var r=n;t>=jMe;)e[n++]=t&255|Pj,t/=128;for(;t&FMe;)e[n++]=t&255|Pj,t>>>=7;return e[n]=t|0,YZ.bytes=n-r+1,e}var WMe=d3,zMe=128,Oj=127;function d3(t,r){var n=0,r=r||0,s=0,i=r,o,a=t.length;do{if(i>=a)throw d3.bytes=0,new RangeError("Could not decode varint");o=t[i++],n+=s<28?(o&Oj)<<s:(o&Oj)*Math.pow(2,s),s+=7}while(o>=zMe);return d3.bytes=i-r,n}var HMe=Math.pow(2,7),GMe=Math.pow(2,14),qMe=Math.pow(2,21),VMe=Math.pow(2,28),KMe=Math.pow(2,35),YMe=Math.pow(2,42),QMe=Math.pow(2,49),JMe=Math.pow(2,56),ZMe=Math.pow(2,63),XMe=function(t){return t<HMe?1:t<GMe?2:t<qMe?3:t<VMe?4:t<KMe?5:t<YMe?6:t<QMe?7:t<JMe?8:t<ZMe?9:10},eLe={encode:$Me,decode:WMe,encodingLength:XMe},QZ=eLe;const kj=(t,e,n=0)=>(QZ.encode(t,e,n),e),Dj=t=>QZ.encodingLength(t),h3=(t,e)=>{const n=e.byteLength,r=Dj(t),s=r+Dj(n),i=new Uint8Array(s+n);return kj(t,i,0),kj(n,i,r),i.set(e,s),new tLe(t,n,e,i)};class tLe{constructor(e,n,r,s){this.code=e,this.size=n,this.digest=r,this.bytes=s}}const JZ=({name:t,code:e,encode:n})=>new nLe(t,e,n);class nLe{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?h3(this.code,n):n.then(r=>h3(this.code,r))}else throw Error("Unknown type, must be binary type")}}const ZZ=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),rLe=JZ({name:"sha2-256",code:18,encode:ZZ("SHA-256")}),sLe=JZ({name:"sha2-512",code:19,encode:ZZ("SHA-512")});var iLe=Object.freeze({__proto__:null,sha256:rLe,sha512:sLe});const XZ=0,oLe="identity",eX=qZ,aLe=t=>h3(XZ,eX(t)),cLe={code:XZ,name:oLe,encode:eX,digest:aLe};var lLe=Object.freeze({__proto__:null,identity:cLe});new TextEncoder,new TextDecoder;const Mj={...nMe,...sMe,...oMe,...cMe,...dMe,...EMe,...AMe,...IMe,...OMe,...BMe};({...iLe,...lLe});function uLe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function tX(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const Lj=tX("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),wO=tX("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=uLe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),dLe={utf8:Lj,"utf-8":Lj,hex:Mj.base16,latin1:wO,ascii:wO,binary:wO,...Mj};function hLe(t,e="utf8"){const n=dLe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var fLe=Object.defineProperty,pLe=(t,e,n)=>e in t?fLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vc=(t,e,n)=>pLe(t,typeof e!="symbol"?e+"":e,n);class gLe{constructor(e,n){this.core=e,this.logger=n,Vc(this,"keychain",new Map),Vc(this,"name",g5e),Vc(this,"version",m5e),Vc(this,"initialized",!1),Vc(this,"storagePrefix",Hl),Vc(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),Vc(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),Vc(this,"set",async(r,s)=>{this.isInitialized(),this.keychain.set(r,s),await this.persist()}),Vc(this,"get",r=>{this.isInitialized();const s=this.keychain.get(r);if(typeof s>"u"){const{message:i}=xe("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return s}),Vc(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=$s(n,this.name)}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,JD(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZD(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var mLe=Object.defineProperty,yLe=(t,e,n)=>e in t?mLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_s=(t,e,n)=>yLe(t,typeof e!="symbol"?e+"":e,n);class wLe{constructor(e,n,r){this.core=e,this.logger=n,_s(this,"name",f5e),_s(this,"keychain"),_s(this,"randomSessionIdentifier",c3()),_s(this,"initialized",!1),_s(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),_s(this,"hasKeys",s=>(this.isInitialized(),this.keychain.has(s))),_s(this,"getClientId",async()=>{this.isInitialized();const s=await this.getClientSeed(),i=Y4(s);return wJ(i.publicKey)}),_s(this,"generateKeyPair",()=>{this.isInitialized();const s=a3e();return this.setPrivateKey(s.publicKey,s.privateKey)}),_s(this,"signJWT",async s=>{this.isInitialized();const i=await this.getClientSeed(),o=Y4(i),a=this.randomSessionIdentifier;return await Jxe(a,s,p5e,o)}),_s(this,"generateSharedKey",(s,i,o)=>{this.isInitialized();const a=this.getPrivateKey(s),c=c3e(a,i);return this.setSymKey(c,o)}),_s(this,"setSymKey",async(s,i)=>{this.isInitialized();const o=i||_S(s);return await this.keychain.set(o,s),o}),_s(this,"deleteKeyPair",async s=>{this.isInitialized(),await this.keychain.del(s)}),_s(this,"deleteSymKey",async s=>{this.isInitialized(),await this.keychain.del(s)}),_s(this,"encode",async(s,i,o)=>{this.isInitialized();const a=BZ(o),c=cd(i);if(mj(a))return d3e(c,o==null?void 0:o.encoding);if(gj(a)){const h=a.senderPublicKey,f=a.receiverPublicKey;s=await this.generateSharedKey(h,f)}const l=this.getSymKey(s),{type:u,senderPublicKey:d}=a;return l3e({type:u,symKey:l,message:c,senderPublicKey:d,encoding:o==null?void 0:o.encoding})}),_s(this,"decode",async(s,i,o)=>{this.isInitialized();const a=f3e(i,o);if(mj(a)){const c=h3e(i,o==null?void 0:o.encoding);return Mg(c)}if(gj(a)){const c=a.receiverPublicKey,l=a.senderPublicKey;s=await this.generateSharedKey(c,l)}try{const c=this.getSymKey(s),l=u3e({symKey:c,encoded:i,encoding:o==null?void 0:o.encoding});return Mg(l)}catch(c){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),_s(this,"getPayloadType",(s,i=Sc)=>{const o=FC({encoded:s,encoding:i});return Wg(o.type)}),_s(this,"getPayloadSenderPublicKey",(s,i=Sc)=>{const o=FC({encoded:s,encoding:i});return o.senderPublicKey?uo(o.senderPublicKey,Si):void 0}),this.core=e,this.logger=$s(n,this.name),this.keychain=r||new gLe(this.core,this.logger)}get context(){return yo(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Nj)}catch{e=c3(),await this.keychain.set(Nj,e)}return hLe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var bLe=Object.defineProperty,vLe=Object.defineProperties,ELe=Object.getOwnPropertyDescriptors,Uj=Object.getOwnPropertySymbols,CLe=Object.prototype.hasOwnProperty,_Le=Object.prototype.propertyIsEnumerable,f3=(t,e,n)=>e in t?bLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ALe=(t,e)=>{for(var n in e||(e={}))CLe.call(e,n)&&f3(t,n,e[n]);if(Uj)for(var n of Uj(e))_Le.call(e,n)&&f3(t,n,e[n]);return t},SLe=(t,e)=>vLe(t,ELe(e)),Ao=(t,e,n)=>f3(t,typeof e!="symbol"?e+"":e,n);class xLe extends EOe{constructor(e,n){super(e,n),this.logger=e,this.core=n,Ao(this,"messages",new Map),Ao(this,"messagesWithoutClientAck",new Map),Ao(this,"name",y5e),Ao(this,"version",w5e),Ao(this,"initialized",!1),Ao(this,"storagePrefix",Hl),Ao(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const s=await this.getRelayerMessagesWithoutClientAck();typeof s<"u"&&(this.messagesWithoutClientAck=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),Ao(this,"set",async(r,s,i)=>{this.isInitialized();const o=wl(s);let a=this.messages.get(r);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=s,this.messages.set(r,a),i===AS.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,SLe(ALe({},c),{[o]:s}))}return await this.persist(),o}),Ao(this,"get",r=>{this.isInitialized();let s=this.messages.get(r);return typeof s>"u"&&(s={}),s}),Ao(this,"getWithoutAck",r=>{this.isInitialized();const s={};for(const i of r){const o=this.messagesWithoutClientAck.get(i)||{};s[i]=Object.values(o)}return s}),Ao(this,"has",(r,s)=>{this.isInitialized();const i=this.get(r),o=wl(s);return typeof i[o]<"u"}),Ao(this,"ack",async(r,s)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const o=wl(s);delete i[o],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),Ao(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=$s(e,this.name),this.core=n}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,JD(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,JD(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ZD(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?ZD(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var ILe=Object.defineProperty,NLe=Object.defineProperties,TLe=Object.getOwnPropertyDescriptors,Bj=Object.getOwnPropertySymbols,RLe=Object.prototype.hasOwnProperty,PLe=Object.prototype.propertyIsEnumerable,p3=(t,e,n)=>e in t?ILe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xA=(t,e)=>{for(var n in e||(e={}))RLe.call(e,n)&&p3(t,n,e[n]);if(Bj)for(var n of Bj(e))PLe.call(e,n)&&p3(t,n,e[n]);return t},bO=(t,e)=>NLe(t,TLe(e)),Za=(t,e,n)=>p3(t,typeof e!="symbol"?e+"":e,n);class OLe extends COe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Za(this,"events",new ja.EventEmitter),Za(this,"name",b5e),Za(this,"queue",new Map),Za(this,"publishTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),Za(this,"initialPublishTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Za(this,"needsTransportRestart",!1),Za(this,"publish",async(r,s,i)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:s,opts:i}});const a=(i==null?void 0:i.ttl)||Tj,c=dI(i),l=(i==null?void 0:i.prompt)||!1,u=(i==null?void 0:i.tag)||0,d=(i==null?void 0:i.id)||Ip().toString(),h={topic:r,message:s,opts:{ttl:a,relay:c,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},f=`Failed to publish payload, please try again. id:${d} tag:${u}`;try{const p=new Promise(async g=>{const w=({id:b})=>{h.opts.id===b&&(this.removeRequestFromQueue(b),this.relayer.events.removeListener(fs.publish,w),g(h))};this.relayer.events.on(fs.publish,w);const m=Mh(new Promise((b,v)=>{this.rpcPublish({topic:r,message:s,ttl:a,prompt:l,tag:u,id:d,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(b).catch(A=>{this.logger.warn(A,A==null?void 0:A.message),v(A)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${d} tag:${u}`);try{await m,this.events.removeListener(fs.publish,w)}catch(b){this.queue.set(d,bO(xA({},h),{attempt:1})),this.logger.warn(b,b==null?void 0:b.message)}});this.logger.trace({type:"method",method:"publish",params:{id:d,topic:r,message:s,opts:i}}),await Mh(p,this.publishTimeout,f)}catch(p){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(p),(o=i==null?void 0:i.internal)!=null&&o.throwOnFailedPublish)throw p}finally{this.queue.delete(d)}}),Za(this,"on",(r,s)=>{this.events.on(r,s)}),Za(this,"once",(r,s)=>{this.events.once(r,s)}),Za(this,"off",(r,s)=>{this.events.off(r,s)}),Za(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.relayer=e,this.logger=$s(n,this.name),this.registerEventListeners()}get context(){return yo(this.logger)}async rpcPublish(e){var n,r,s,i;const{topic:o,message:a,ttl:c=Tj,prompt:l,tag:u,id:d,attestation:h,tvf:f}=e,p={method:xv(dI().protocol).publish,params:xA({topic:o,message:a,ttl:c,prompt:l,tag:u,attestation:h},f),id:d};Rs((n=p.params)==null?void 0:n.prompt)&&((r=p.params)==null||delete r.prompt),Rs((s=p.params)==null?void 0:s.tag)&&((i=p.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const g=await this.relayer.request(p);return this.relayer.events.emit(fs.publish,e),this.logger.debug("Successfully Published Payload"),g}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,bO(xA({},e),{attempt:r}));const{topic:s,message:i,opts:o,attestation:a}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(bO(xA({},e),{topic:s,message:i,ttl:o.ttl,prompt:o.prompt,tag:o.tag,id:o.id,attestation:a,tvf:o.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(hm.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(fs.connection_stalled);return}this.checkQueue()}),this.relayer.on(fs.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var kLe=Object.defineProperty,DLe=(t,e,n)=>e in t?kLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wm=(t,e,n)=>DLe(t,typeof e!="symbol"?e+"":e,n);class MLe{constructor(){Wm(this,"map",new Map),Wm(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Wm(this,"get",e=>this.map.get(e)||[]),Wm(this,"exists",(e,n)=>this.get(e).includes(n)),Wm(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const s=r.filter(i=>i!==n);if(!s.length){this.map.delete(e);return}this.map.set(e,s)}),Wm(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var LLe=Object.defineProperty,ULe=Object.defineProperties,BLe=Object.getOwnPropertyDescriptors,$j=Object.getOwnPropertySymbols,$Le=Object.prototype.hasOwnProperty,FLe=Object.prototype.propertyIsEnumerable,g3=(t,e,n)=>e in t?LLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cv=(t,e)=>{for(var n in e||(e={}))$Le.call(e,n)&&g3(t,n,e[n]);if($j)for(var n of $j(e))FLe.call(e,n)&&g3(t,n,e[n]);return t},vO=(t,e)=>ULe(t,BLe(e)),Gn=(t,e,n)=>g3(t,typeof e!="symbol"?e+"":e,n);class jLe extends SOe{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Gn(this,"subscriptions",new Map),Gn(this,"topicMap",new MLe),Gn(this,"events",new ja.EventEmitter),Gn(this,"name",x5e),Gn(this,"version",I5e),Gn(this,"pending",new Map),Gn(this,"cached",[]),Gn(this,"initialized",!1),Gn(this,"storagePrefix",Hl),Gn(this,"subscribeTimeout",_e.toMiliseconds(_e.ONE_MINUTE)),Gn(this,"initialSubscribeTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),Gn(this,"clientId"),Gn(this,"batchSubscribeTopicsLimit",500),Gn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),Gn(this,"subscribe",async(r,s)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}});try{const i=dI(s),o={topic:r,relay:i,transportType:s==null?void 0:s.transportType};this.pending.set(r,o);const a=await this.rpcSubscribe(r,i,s);return typeof a=="string"&&(this.onSubscribe(a,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:s}})),a}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),Gn(this,"unsubscribe",async(r,s)=>{this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(r,s.id,s):await this.unsubscribeByTopic(r,s)}),Gn(this,"isSubscribed",r=>new Promise(s=>{s(this.topicMap.topics.includes(r))})),Gn(this,"isKnownTopic",r=>new Promise(s=>{s(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),Gn(this,"on",(r,s)=>{this.events.on(r,s)}),Gn(this,"once",(r,s)=>{this.events.once(r,s)}),Gn(this,"off",(r,s)=>{this.events.off(r,s)}),Gn(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),Gn(this,"start",async()=>{await this.onConnect()}),Gn(this,"stop",async()=>{await this.onDisconnect()}),Gn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),Gn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(s=>{r.push(s)}),await this.batchSubscribe(r)}),Gn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(hm.pulse,async()=>{await this.checkPending()}),this.events.on(Po.created,async r=>{const s=Po.created;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()}),this.events.on(Po.deleted,async r=>{const s=Po.deleted;this.logger.info(`Emitting ${s}`),this.logger.debug({type:"event",event:s,data:r}),await this.persist()})}),this.relayer=e,this.logger=$s(n,this.name),this.clientId=""}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async s=>await this.unsubscribeById(e,s,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const s=dI(r);await this.restartToComplete({topic:e,id:n,relay:s}),await this.rpcUnsubscribe(e,n,s);const i=$n("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(e,n,r){var s;(!r||(r==null?void 0:r.transportType)===sr.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:xv(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const o=(s=r==null?void 0:r.internal)==null?void 0:s.throwOnFailedPublish;try{const a=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===sr.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(u=>this.logger.warn(u))},_e.toMiliseconds(_e.ONE_SECOND)),a;const c=new Promise(async u=>{const d=h=>{h.topic===e&&(this.events.removeListener(Po.created,d),u(h.id))};this.events.on(Po.created,d);try{const h=await Mh(new Promise((f,p)=>{this.relayer.request(i).catch(g=>{this.logger.warn(g,g==null?void 0:g.message),p(g)}).then(f)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Po.created,d),u(h)}catch{}}),l=await Mh(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!l&&o)throw new Error(`Subscribing to ${e} failed, please try again`);return l?a:null}catch(a){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(fs.connection_stalled),o)throw a}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:xv(n.protocol).batchSubscribe,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Mh(new Promise(s=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(s)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(fs.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:xv(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let s;try{s=await await Mh(new Promise((i,o)=>{this.relayer.request(r).catch(a=>{this.logger.warn(a),o(a)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(fs.connection_stalled)}return s}rpcUnsubscribe(e,n,r){const s={method:xv(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(e,n){this.setSubscription(e,vO(cv({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,cv({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,cv({},n)),this.topicMap.set(n.topic,e),this.events.emit(Po.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Po.deleted,vO(cv({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Po.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const s=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Po.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>vO(cv({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await K2e(_e.toMiliseconds(_e.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return wl(e+await this.getClientId())}}var WLe=Object.defineProperty,Fj=Object.getOwnPropertySymbols,zLe=Object.prototype.hasOwnProperty,HLe=Object.prototype.propertyIsEnumerable,m3=(t,e,n)=>e in t?WLe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,jj=(t,e)=>{for(var n in e||(e={}))zLe.call(e,n)&&m3(t,n,e[n]);if(Fj)for(var n of Fj(e))HLe.call(e,n)&&m3(t,n,e[n]);return t},fn=(t,e,n)=>m3(t,typeof e!="symbol"?e+"":e,n);class GLe extends _Oe{constructor(e){super(e),fn(this,"protocol","wc"),fn(this,"version",2),fn(this,"core"),fn(this,"logger"),fn(this,"events",new ja.EventEmitter),fn(this,"provider"),fn(this,"messages"),fn(this,"subscriber"),fn(this,"publisher"),fn(this,"name",E5e),fn(this,"transportExplicitlyClosed",!1),fn(this,"initialized",!1),fn(this,"connectionAttemptInProgress",!1),fn(this,"relayUrl"),fn(this,"projectId"),fn(this,"packageName"),fn(this,"bundleId"),fn(this,"hasExperiencedNetworkDisruption",!1),fn(this,"pingTimeout"),fn(this,"heartBeatTimeout",_e.toMiliseconds(_e.THIRTY_SECONDS+_e.FIVE_SECONDS)),fn(this,"reconnectTimeout"),fn(this,"connectPromise"),fn(this,"reconnectInProgress",!1),fn(this,"requestsInFlight",[]),fn(this,"connectTimeout",_e.toMiliseconds(_e.ONE_SECOND*15)),fn(this,"request",async n=>{var r,s;this.logger.debug("Publishing Request Payload");const i=n.id||Ip().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const o=`${i}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(o);const a=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==o),a}catch(o){throw this.logger.debug(`Failed to Publish Request: ${i}`),o}}),fn(this,"resetPingTimeout",()=>{lI()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,s,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:s.terminate)==null||i.call(s)}catch(o){this.logger.warn(o,o==null?void 0:o.message)}},this.heartBeatTimeout))}),fn(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),fn(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(fs.connect)}),fn(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),fn(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(fs.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),fn(this,"registerProviderListeners",()=>{this.provider.on(aa.payload,this.onPayloadHandler),this.provider.on(aa.connect,this.onConnectHandler),this.provider.on(aa.disconnect,this.onDisconnectHandler),this.provider.on(aa.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?$s(e.logger,this.name):Z_(pm({level:e.logger||v5e})),this.messages=new xLe(this.logger,e.core),this.subscriber=new jLe(this,this.logger),this.publisher=new OLe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||HZ,this.projectId=e.projectId,O2e()?this.packageName=$F():k2e()&&(this.bundleId=$F()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return yo(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:sr.relay},AS.outbound)}async subscribe(e,n){var r,s,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;let a=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const l=u=>{u.topic===e&&(this.subscriber.off(Po.created,l),c())};return await Promise.all([new Promise(u=>{c=u,this.subscriber.on(Po.created,l)}),new Promise(async(u,d)=>{a=await this.subscriber.subscribe(e,jj({internal:{throwOnFailedPublish:o}},n)).catch(h=>{o&&d(h)})||a,u()})]),a}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await Mh(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ij())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,s)=>r.publishedAt-s.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(s){this.logger.warn(s,"Error while processing batch message event: "+(s==null?void 0:s.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const s=zr(_e.FIVE_MINUTES),i={topic:r,expiry:s,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(fs.message,e),await this.recordMessageEvent(e,AS.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,s)=>{const i=()=>{s(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(aa.disconnect,i),await Mh(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{s(o)}).finally(()=>{this.provider.off(aa.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const c=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(aa.disconnect,c),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(aa.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const s=r;this.logger.warn({},s.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,_e.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,s,i;if(lI())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(s=(r=this.provider)==null?void 0:r.connection)==null?void 0:s.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Wa(new lTe(B2e({sdkVersion:u3,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:s}=e;await this.messages.set(r,s,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const s=this.messages.has(n,r);return s&&this.logger.warn(`Ignoring duplicate message: ${r}`),s}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),EU(e)){if(!e.method.endsWith(C5e))return;const n=e.params,{topic:r,message:s,publishedAt:i,attestation:o}=n.data,a={topic:r,message:s,publishedAt:i,transportType:sr.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(jj({type:"event",event:n.id},a)),this.events.emit(n.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else fT(e)&&this.events.emit(fs.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,AS.inbound),this.events.emit(fs.message,e))}async acknowledgePayload(e){const n=dT(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(aa.payload,this.onPayloadHandler),this.provider.off(aa.connect,this.onConnectHandler),this.provider.off(aa.disconnect,this.onDisconnectHandler),this.provider.off(aa.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Ij();o5e(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(hm.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&l5e())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(fs.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},_e.toMiliseconds(_5e)))))}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function qLe(){}function Wj(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function zj(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function Hj(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const VLe="[object RegExp]",KLe="[object String]",YLe="[object Number]",QLe="[object Boolean]",Gj="[object Arguments]",JLe="[object Symbol]",ZLe="[object Date]",XLe="[object Map]",eUe="[object Set]",tUe="[object Array]",nUe="[object Function]",rUe="[object ArrayBuffer]",EO="[object Object]",sUe="[object Error]",iUe="[object DataView]",oUe="[object Uint8Array]",aUe="[object Uint8ClampedArray]",cUe="[object Uint16Array]",lUe="[object Uint32Array]",uUe="[object BigUint64Array]",dUe="[object Int8Array]",hUe="[object Int16Array]",fUe="[object Int32Array]",pUe="[object BigInt64Array]",gUe="[object Float32Array]",mUe="[object Float64Array]";function yUe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function wUe(t,e,n){return Iv(t,e,void 0,void 0,void 0,void 0,n)}function Iv(t,e,n,r,s,i,o){const a=o(t,e,n,r,s,i);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return pE(t,e,i,o)}return pE(t,e,i,o)}function pE(t,e,n,r){if(Object.is(t,e))return!0;let s=Hj(t),i=Hj(e);if(s===Gj&&(s=EO),i===Gj&&(i=EO),s!==i)return!1;switch(s){case KLe:return t.toString()===e.toString();case YLe:{const c=t.valueOf(),l=e.valueOf();return yUe(c,l)}case QLe:case ZLe:case JLe:return Object.is(t.valueOf(),e.valueOf());case VLe:return t.source===e.source&&t.flags===e.flags;case nUe:return t===e}n=n??new Map;const o=n.get(t),a=n.get(e);if(o!=null&&a!=null)return o===e;n.set(t,e),n.set(e,t);try{switch(s){case XLe:{if(t.size!==e.size)return!1;for(const[c,l]of t.entries())if(!e.has(c)||!Iv(l,e.get(c),c,t,e,n,r))return!1;return!0}case eUe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),l=Array.from(e.values());for(let u=0;u<c.length;u++){const d=c[u],h=l.findIndex(f=>Iv(d,f,void 0,t,e,n,r));if(h===-1)return!1;l.splice(h,1)}return!0}case tUe:case oUe:case aUe:case cUe:case lUe:case uUe:case dUe:case hUe:case fUe:case pUe:case gUe:case mUe:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Iv(t[c],e[c],c,t,e,n,r))return!1;return!0}case rUe:return t.byteLength!==e.byteLength?!1:pE(new Uint8Array(t),new Uint8Array(e),n,r);case iUe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:pE(new Uint8Array(t),new Uint8Array(e),n,r);case sUe:return t.name===e.name&&t.message===e.message;case EO:{if(!(pE(t.constructor,e.constructor,n,r)||Wj(t)&&Wj(e)))return!1;const c=[...Object.keys(t),...zj(t)],l=[...Object.keys(e),...zj(e)];if(c.length!==l.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const f=e[d];if(!Iv(h,f,d,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function bUe(t,e){return wUe(t,e,qLe)}var vUe=Object.defineProperty,qj=Object.getOwnPropertySymbols,EUe=Object.prototype.hasOwnProperty,CUe=Object.prototype.propertyIsEnumerable,y3=(t,e,n)=>e in t?vUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vj=(t,e)=>{for(var n in e||(e={}))EUe.call(e,n)&&y3(t,n,e[n]);if(qj)for(var n of qj(e))CUe.call(e,n)&&y3(t,n,e[n]);return t},Bi=(t,e,n)=>y3(t,typeof e!="symbol"?e+"":e,n);class mm extends AOe{constructor(e,n,r,s=Hl,i=void 0){super(e,n,r,s),this.core=e,this.logger=n,this.name=r,Bi(this,"map",new Map),Bi(this,"version",A5e),Bi(this,"cached",[]),Bi(this,"initialized",!1),Bi(this,"getKey"),Bi(this,"storagePrefix",Hl),Bi(this,"recentlyDeleted",[]),Bi(this,"recentlyDeletedLimit",200),Bi(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Rs(o)?this.map.set(this.getKey(o),o):U3e(o)?this.map.set(o.id,o):B3e(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),Bi(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),Bi(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),Bi(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(c=>bUe(a[c],o[c]))):this.values)),Bi(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const c=Vj(Vj({},this.getData(o)),a);this.map.set(o,c),await this.persist()}),Bi(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=$s(n,this.name),this.storagePrefix=s,this.getKey=i}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(s),new Error(s)}const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var _Ue=Object.defineProperty,AUe=(t,e,n)=>e in t?_Ue(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,en=(t,e,n)=>AUe(t,typeof e!="symbol"?e+"":e,n);class SUe{constructor(e,n){this.core=e,this.logger=n,en(this,"name",N5e),en(this,"version",T5e),en(this,"events",new lU),en(this,"pairings"),en(this,"initialized",!1),en(this,"storagePrefix",Hl),en(this,"ignoredPayloadTypes",[Yu]),en(this,"registeredMethods",[]),en(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),en(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),en(this,"create",async r=>{this.isInitialized();const s=c3(),i=await this.core.crypto.setSymKey(s),o=zr(_e.FIVE_MINUTES),a={protocol:zZ},c={topic:i,expiry:o,relay:a,active:!1,methods:r==null?void 0:r.methods},l=wj({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:s,relay:a,expiryTimestamp:o,methods:r==null?void 0:r.methods});return this.events.emit(lp.create,c),this.core.expirer.set(i,o),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:l}}),en(this,"pair",async r=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[Zc.pairing_started]}});this.isValidPair(r,s);const{topic:i,symKey:o,relay:a,expiryTimestamp:c,methods:l}=yj(r.uri);s.props.properties.topic=i,s.addTrace(Zc.pairing_uri_validation_success),s.addTrace(Zc.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(i)){if(u=this.pairings.get(i),s.addTrace(Zc.existing_pairing),u.active)throw s.setError(du.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);s.addTrace(Zc.pairing_not_expired)}const d=c||zr(_e.FIVE_MINUTES),h={topic:i,relay:a,expiry:d,active:!1,methods:l};this.core.expirer.set(i,d),await this.pairings.set(i,h),s.addTrace(Zc.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(lp.create,h),s.addTrace(Zc.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(o,i),s.addTrace(Zc.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(du.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:a})}catch(f){throw s.setError(du.subscribe_pairing_topic_failure),f}return s.addTrace(Zc.subscribe_pairing_topic_success),h}),en(this,"activate",async({topic:r})=>{this.isInitialized();const s=zr(_e.FIVE_MINUTES);this.core.expirer.set(r,s),await this.pairings.update(r,{active:!0,expiry:s})}),en(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:s}=r;if(this.pairings.keys.includes(s)){const i=await this.sendRequest(s,"wc_pairingPing",{}),{done:o,resolve:a,reject:c}=tp();this.events.once(An("pairing_ping",i),({error:l})=>{l?c(l):a()}),await o()}}),en(this,"updateExpiry",async({topic:r,expiry:s})=>{this.isInitialized(),await this.pairings.update(r,{expiry:s})}),en(this,"updateMetadata",async({topic:r,metadata:s})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:s})}),en(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),en(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",$n("USER_DISCONNECTED")),await this.deletePairing(s))}),en(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:s,relay:i,expiry:o,methods:a}=r,c=this.core.crypto.keychain.get(s);return wj({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:c,relay:i,expiryTimestamp:o,methods:a})}),en(this,"sendRequest",async(r,s,i)=>{const o=Dh(s,i),a=await this.core.crypto.encode(r,o),c=ov[s].req;return this.core.history.set(r,o),this.core.relayer.publish(r,a,c),o.id}),en(this,"sendResult",async(r,s,i)=>{const o=dT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=ov[c].res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),en(this,"sendError",async(r,s,i)=>{const o=hT(r,i),a=await this.core.crypto.encode(s,o),c=(await this.core.history.get(s,r)).request.method,l=ov[c]?ov[c].res:ov.unregistered_method.res;await this.core.relayer.publish(s,a,l),await this.core.history.resolve(o)}),en(this,"deletePairing",async(r,s)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,$n("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),s?Promise.resolve():this.core.expirer.del(r)])}),en(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(s=>Qd(s.expiry));await Promise.all(r.map(s=>this.deletePairing(s.topic)))}),en(this,"onRelayEventRequest",async r=>{const{topic:s,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(s,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(s,i);default:return await this.onUnknownRpcMethodRequest(s,i)}}),en(this,"onRelayEventResponse",async r=>{const{topic:s,payload:i}=r,o=(await this.core.history.get(s,i.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(s,i);default:return this.onUnknownRpcMethodResponse(o)}}),en(this,"onPairingPingRequest",async(r,s)=>{const{id:i}=s;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(lp.ping,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),en(this,"onPairingPingResponse",(r,s)=>{const{id:i}=s;setTimeout(()=>{tl(s)?this.events.emit(An("pairing_ping",i),{}):Ca(s)&&this.events.emit(An("pairing_ping",i),{error:s.error})},500)}),en(this,"onPairingDeleteRequest",async(r,s)=>{const{id:i}=s;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(lp.delete,{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),en(this,"onUnknownRpcMethodRequest",async(r,s)=>{const{id:i,method:o}=s;try{if(this.registeredMethods.includes(o))return;const a=$n("WC_METHOD_UNSUPPORTED",o);await this.sendError(i,r,a),this.logger.error(a)}catch(a){await this.sendError(i,r,a),this.logger.error(a)}}),en(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error($n("WC_METHOD_UNSUPPORTED",r))}),en(this,"isValidPair",(r,s)=>{var i;if(!zi(r)){const{message:a}=xe("MISSING_OR_INVALID",`pair() params: ${r}`);throw s.setError(du.malformed_pairing_uri),new Error(a)}if(!L3e(r.uri)){const{message:a}=xe("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw s.setError(du.malformed_pairing_uri),new Error(a)}const o=yj(r==null?void 0:r.uri);if(!((i=o==null?void 0:o.relay)!=null&&i.protocol)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(du.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=xe("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(du.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&_e.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){s.setError(du.pairing_expired);const{message:a}=xe("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),en(this,"isValidPing",async r=>{if(!zi(r)){const{message:i}=xe("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),en(this,"isValidDisconnect",async r=>{if(!zi(r)){const{message:i}=xe("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:s}=r;await this.isValidPairingTopic(s)}),en(this,"isValidPairingTopic",async r=>{if(!Ur(r,!1)){const{message:s}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(s)}if(!this.pairings.keys.includes(r)){const{message:s}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(s)}if(Qd(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:s}=xe("EXPIRED",`pairing topic: ${r}`);throw new Error(s)}}),this.core=e,this.logger=$s(n,this.name),this.pairings=new mm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return yo(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(fs.message,async e=>{const{topic:n,message:r,transportType:s}=e;if(this.pairings.keys.includes(n)&&s!==sr.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);EU(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):fT(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(fa.expired,async e=>{const{topic:n}=iZ(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(lp.expire,{topic:n}))})}}var xUe=Object.defineProperty,IUe=(t,e,n)=>e in t?xUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,As=(t,e,n)=>IUe(t,typeof e!="symbol"?e+"":e,n);class NUe extends vOe{constructor(e,n){super(e,n),this.core=e,this.logger=n,As(this,"records",new Map),As(this,"events",new ja.EventEmitter),As(this,"name",R5e),As(this,"version",P5e),As(this,"cached",[]),As(this,"initialized",!1),As(this,"storagePrefix",Hl),As(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),As(this,"set",(r,s,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:s,chainId:i}),this.records.has(s.id))return;const o={id:s.id,topic:r,request:{method:s.method,params:s.params||null},chainId:i,expiry:zr(_e.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Qa.created,o)}),As(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const s=await this.getRecord(r.id);typeof s.response>"u"&&(s.response=Ca(r)?{error:r.error}:{result:r.result},this.records.set(s.id,s),this.persist(),this.events.emit(Qa.updated,s))}),As(this,"get",async(r,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:s}),await this.getRecord(s))),As(this,"delete",(r,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(i=>{if(i.topic===r){if(typeof s<"u"&&i.id!==s)return;this.records.delete(i.id),this.events.emit(Qa.deleted,i)}}),this.persist()}),As(this,"exists",async(r,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===r:!1)),As(this,"on",(r,s)=>{this.events.on(r,s)}),As(this,"once",(r,s)=>{this.events.once(r,s)}),As(this,"off",(r,s)=>{this.events.off(r,s)}),As(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=$s(n,this.name)}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:Dh(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Qa.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Qa.created,e=>{const n=Qa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Qa.updated,e=>{const n=Qa.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Qa.deleted,e=>{const n=Qa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(hm.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{_e.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Qa.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var TUe=Object.defineProperty,RUe=(t,e,n)=>e in t?TUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qs=(t,e,n)=>RUe(t,typeof e!="symbol"?e+"":e,n);class PUe extends xOe{constructor(e,n){super(e,n),this.core=e,this.logger=n,qs(this,"expirations",new Map),qs(this,"events",new ja.EventEmitter),qs(this,"name",O5e),qs(this,"version",k5e),qs(this,"cached",[]),qs(this,"initialized",!1),qs(this,"storagePrefix",Hl),qs(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),qs(this,"has",r=>{try{const s=this.formatTarget(r);return typeof this.getExpiration(s)<"u"}catch{return!1}}),qs(this,"set",(r,s)=>{this.isInitialized();const i=this.formatTarget(r),o={target:i,expiry:s};this.expirations.set(i,o),this.checkExpiry(i,o),this.events.emit(fa.created,{target:i,expiration:o})}),qs(this,"get",r=>{this.isInitialized();const s=this.formatTarget(r);return this.getExpiration(s)}),qs(this,"del",r=>{if(this.isInitialized(),this.has(r)){const s=this.formatTarget(r),i=this.getExpiration(s);this.expirations.delete(s),this.events.emit(fa.deleted,{target:s,expiration:i})}}),qs(this,"on",(r,s)=>{this.events.on(r,s)}),qs(this,"once",(r,s)=>{this.events.once(r,s)}),qs(this,"off",(r,s)=>{this.events.off(r,s)}),qs(this,"removeListener",(r,s)=>{this.events.removeListener(r,s)}),this.logger=$s(n,this.name)}get context(){return yo(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return $2e(e);if(typeof e=="number")return F2e(e);const{message:n}=xe("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(fa.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=xe("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=xe("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;_e.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(fa.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(hm.pulse,()=>this.checkExpirations()),this.events.on(fa.created,e=>{const n=fa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(fa.expired,e=>{const n=fa.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(fa.deleted,e=>{const n=fa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}}var OUe=Object.defineProperty,kUe=(t,e,n)=>e in t?OUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Lr=(t,e,n)=>kUe(t,typeof e!="symbol"?e+"":e,n);class DUe extends IOe{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Lr(this,"name",D5e),Lr(this,"abortController"),Lr(this,"isDevEnv"),Lr(this,"verifyUrlV3",L5e),Lr(this,"storagePrefix",Hl),Lr(this,"version",WZ),Lr(this,"publicKey"),Lr(this,"fetchPromise"),Lr(this,"init",async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&_e.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Lr(this,"register",async s=>{if(!gb()||this.isDevEnv)return;const i=window.location.origin,{id:o,decryptedId:a}=s,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${o}&decryptedId=${a}`;try{const l=Lg(),u=this.startAbortTimer(_e.ONE_SECOND*5),d=await new Promise((h,f)=>{const p=()=>{window.removeEventListener("message",w),l.body.removeChild(g),f("attestation aborted")};this.abortController.signal.addEventListener("abort",p);const g=l.createElement("iframe");g.src=c,g.style.display="none",g.addEventListener("error",p,{signal:this.abortController.signal});const w=m=>{if(m.data&&typeof m.data=="string")try{const b=JSON.parse(m.data);if(b.type==="verify_attestation"){if(BD(b.attestation).payload.id!==o)return;clearInterval(u),l.body.removeChild(g),this.abortController.signal.removeEventListener("abort",p),window.removeEventListener("message",w),h(b.attestation===null?"":b.attestation)}}catch(b){this.logger.warn(b)}};l.body.appendChild(g),window.addEventListener("message",w,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",d),d}catch(l){this.logger.warn(l)}return""}),Lr(this,"resolve",async s=>{if(this.isDevEnv)return"";const{attestationId:i,hash:o,encryptedId:a}=s;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(BD(i).payload.id!==a)return;const l=await this.isValidJwtAttestation(i);if(l){if(!l.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return l}}if(!o)return;const c=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(o,c)}),Lr(this,"fetchAttestation",async(s,i)=>{this.logger.debug(`resolving attestation: ${s} from url: ${i}`);const o=this.startAbortTimer(_e.ONE_SECOND*5),a=await fetch(`${i}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),Lr(this,"getVerifyUrl",s=>{let i=s||fE;return U5e.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${fE}`),i=fE),i}),Lr(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(_e.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await i.json()}catch(s){this.logger.warn(s)}}),Lr(this,"persistPublicKey",async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s}),Lr(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Lr(this,"isValidJwtAttestation",async s=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(s,i)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),Lr(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Lr(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),i(o))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s}),Lr(this,"validateAttestation",(s,i)=>{const o=g3e(s,i.publicKey),a={hasExpired:_e.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=$s(n,this.name),this.abortController=new AbortController,this.isDevEnv=CU(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return yo(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),_e.toMiliseconds(e))}}var MUe=Object.defineProperty,LUe=(t,e,n)=>e in t?MUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Kj=(t,e,n)=>LUe(t,typeof e!="symbol"?e+"":e,n);class UUe extends NOe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Kj(this,"context",B5e),Kj(this,"registerDeviceToken",async r=>{const{clientId:s,token:i,notificationType:o,enableEncrypted:a=!1}=r,c=`${$5e}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:o,token:i,always_raw:a})})}),this.logger=$s(n,this.context)}}var BUe=Object.defineProperty,Yj=Object.getOwnPropertySymbols,$Ue=Object.prototype.hasOwnProperty,FUe=Object.prototype.propertyIsEnumerable,w3=(t,e,n)=>e in t?BUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,lv=(t,e)=>{for(var n in e||(e={}))$Ue.call(e,n)&&w3(t,n,e[n]);if(Yj)for(var n of Yj(e))FUe.call(e,n)&&w3(t,n,e[n]);return t},ns=(t,e,n)=>w3(t,typeof e!="symbol"?e+"":e,n);class jUe extends TOe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,ns(this,"context",j5e),ns(this,"storagePrefix",Hl),ns(this,"storageVersion",F5e),ns(this,"events",new Map),ns(this,"shouldPersist",!1),ns(this,"init",async()=>{if(!CU())try{const s={eventId:jF(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:rZ(this.core.relayer.protocol,this.core.relayer.version,u3)}}};await this.sendEvent([s])}catch(s){this.logger.warn(s)}}),ns(this,"createEvent",s=>{const{event:i="ERROR",type:o="",properties:{topic:a,trace:c}}=s,l=jF(),u=this.core.projectId||"",d=Date.now(),h=lv({eventId:l,timestamp:d,props:{event:i,type:o,properties:{topic:a,trace:c}},bundleId:u,domain:this.getAppDomain()},this.setMethods(l));return this.telemetryEnabled&&(this.events.set(l,h),this.shouldPersist=!0),h}),ns(this,"getEvent",s=>{const{eventId:i,topic:o}=s;if(i)return this.events.get(i);const a=Array.from(this.events.values()).find(c=>c.props.properties.topic===o);if(a)return lv(lv({},a),this.setMethods(a.eventId))}),ns(this,"deleteEvent",s=>{const{eventId:i}=s;this.events.delete(i),this.shouldPersist=!0}),ns(this,"setEventListeners",()=>{this.core.heartbeat.on(hm.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{_e.fromMiliseconds(Date.now())-_e.fromMiliseconds(s.timestamp)>W5e&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})}),ns(this,"setMethods",s=>({addTrace:i=>this.addTrace(s,i),setError:i=>this.setError(s,i)})),ns(this,"addTrace",(s,i)=>{const o=this.events.get(s);o&&(o.props.properties.trace.push(i),this.events.set(s,o),this.shouldPersist=!0)}),ns(this,"setError",(s,i)=>{const o=this.events.get(s);o&&(o.props.type=i,o.timestamp=Date.now(),this.events.set(s,o),this.shouldPersist=!0)}),ns(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),ns(this,"restore",async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(i=>{this.events.set(i.eventId,lv(lv({},i),this.setMethods(i.eventId)))})}catch(s){this.logger.warn(s)}}),ns(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[i,o]of this.events)o.props.type&&s.push(o);if(s.length!==0)try{if((await this.sendEvent(s)).ok)for(const i of s)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),ns(this,"sendEvent",async s=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${z5e}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${u3}${i}`,{method:"POST",body:JSON.stringify(s)})}),ns(this,"getAppDomain",()=>nZ().url),this.logger=$s(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var WUe=Object.defineProperty,Qj=Object.getOwnPropertySymbols,zUe=Object.prototype.hasOwnProperty,HUe=Object.prototype.propertyIsEnumerable,b3=(t,e,n)=>e in t?WUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jj=(t,e)=>{for(var n in e||(e={}))zUe.call(e,n)&&b3(t,n,e[n]);if(Qj)for(var n of Qj(e))HUe.call(e,n)&&b3(t,n,e[n]);return t},Yn=(t,e,n)=>b3(t,typeof e!="symbol"?e+"":e,n);let GUe=class nX extends mOe{constructor(e){var n;super(e),Yn(this,"protocol",jZ),Yn(this,"version",WZ),Yn(this,"name",l3),Yn(this,"relayUrl"),Yn(this,"projectId"),Yn(this,"customStoragePrefix"),Yn(this,"events",new ja.EventEmitter),Yn(this,"logger"),Yn(this,"heartbeat"),Yn(this,"relayer"),Yn(this,"crypto"),Yn(this,"storage"),Yn(this,"history"),Yn(this,"expirer"),Yn(this,"pairing"),Yn(this,"verify"),Yn(this,"echoClient"),Yn(this,"linkModeSupportedApps"),Yn(this,"eventClient"),Yn(this,"initialized",!1),Yn(this,"logChunkController"),Yn(this,"on",(a,c)=>this.events.on(a,c)),Yn(this,"once",(a,c)=>this.events.once(a,c)),Yn(this,"off",(a,c)=>this.events.off(a,c)),Yn(this,"removeListener",(a,c)=>this.events.removeListener(a,c)),Yn(this,"dispatchEnvelope",({topic:a,message:c,sessionExists:l})=>{if(!a||!c)return;const u={topic:a,message:c,publishedAt:Date.now(),transportType:sr.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:l})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||HZ,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const s=pm({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:d5e.logger,name:l3}),{logger:i,chunkLoggerController:o}=oT({opts:s,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,c;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=$s(i,this.name),this.heartbeat=new C1e,this.crypto=new wLe(this,this.logger,e==null?void 0:e.keychain),this.history=new NUe(this,this.logger),this.expirer=new PUe(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new fOe(Jj(Jj({},h5e),e==null?void 0:e.storageOptions)),this.relayer=new GLe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new SUe(this,this.logger),this.verify=new DUe(this,this.logger,this.storage),this.echoClient=new UUe(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new jUe(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new nX(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(S5e,r),n}get context(){return yo(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Rj,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Rj)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&u5e.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const qUe=GUe,rX="wc",sX=2,iX="client",RU=`${rX}@${sX}:${iX}:`,CO={name:iX,logger:"error"},Zj="WALLETCONNECT_DEEPLINK_CHOICE",VUe="proposal",Xj="Proposal expired",KUe="session",zm=_e.SEVEN_DAYS,YUe="engine",rs={wc_sessionPropose:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1104},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1106},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:_e.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1112},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:_e.ONE_DAY,prompt:!1,tag:1114},res:{ttl:_e.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:_e.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:_e.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:_e.FIVE_MINUTES,prompt:!1,tag:1119}}},_O={min:_e.FIVE_MINUTES,max:_e.SEVEN_DAYS},Kc={idle:"IDLE",active:"ACTIVE"},e9={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},QUe="request",JUe=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],ZUe="wc",XUe="auth",eBe="authKeys",tBe="pairingTopics",nBe="requests",ST=`${ZUe}@${1.5}:${XUe}:`,SS=`${ST}:PUB_KEY`;var rBe=Object.defineProperty,sBe=Object.defineProperties,iBe=Object.getOwnPropertyDescriptors,t9=Object.getOwnPropertySymbols,oBe=Object.prototype.hasOwnProperty,aBe=Object.prototype.propertyIsEnumerable,v3=(t,e,n)=>e in t?rBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qn=(t,e)=>{for(var n in e||(e={}))oBe.call(e,n)&&v3(t,n,e[n]);if(t9)for(var n of t9(e))aBe.call(e,n)&&v3(t,n,e[n]);return t},ai=(t,e)=>sBe(t,iBe(e)),ye=(t,e,n)=>v3(t,typeof e!="symbol"?e+"":e,n);class cBe extends kOe{constructor(e){super(e),ye(this,"name",YUe),ye(this,"events",new lU),ye(this,"initialized",!1),ye(this,"requestQueue",{state:Kc.idle,queue:[]}),ye(this,"sessionRequestQueue",{state:Kc.idle,queue:[]}),ye(this,"requestQueueDelay",_e.ONE_SECOND),ye(this,"expectedPairingMethodMap",new Map),ye(this,"recentlyDeletedMap",new Map),ye(this,"recentlyDeletedLimit",200),ye(this,"relayMessageCache",[]),ye(this,"pendingSessions",new Map),ye(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(rs)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay)))}),ye(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=ai(qn({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=P3e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:a,scopedProperties:c,relays:l}=r;let u=s,d,h=!1;try{if(u){const T=this.client.core.pairing.pairings.get(u);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),h=T.active}}catch(T){throw this.client.logger.error(`connect() -> pairing.get(${u}) failed`),T}if(!u||!h){const{topic:T,uri:x}=await this.client.core.pairing.create();u=T,d=x}if(!u){const{message:T}=xe("NO_MATCHING_KEY",`connect() pairing topic: ${u}`);throw new Error(T)}const f=await this.client.core.crypto.generateKeyPair(),p=rs.wc_sessionPropose.req.ttl||_e.FIVE_MINUTES,g=zr(p),w=ai(qn(qn({requiredNamespaces:i,optionalNamespaces:o,relays:l??[{protocol:zZ}],proposer:{publicKey:f,metadata:this.client.metadata},expiryTimestamp:g,pairingTopic:u},a&&{sessionProperties:a}),c&&{scopedProperties:c}),{id:el()}),m=An("session_connect",w.id),{reject:b,resolve:v,done:A}=tp(p,Xj),C=({id:T})=>{T===w.id&&(this.client.events.off("proposal_expire",C),this.pendingSessions.delete(w.id),this.events.emit(m,{error:{message:Xj,code:0}}))};return this.client.events.on("proposal_expire",C),this.events.once(m,({error:T,session:x})=>{this.client.events.off("proposal_expire",C),T?b(T):x&&v(x)}),await this.sendRequest({topic:u,method:"wc_sessionPropose",params:w,throwOnFailedPublish:!0,clientRpcId:w.id}),await this.setProposal(w.id,w),{uri:d,approval:A}}),ye(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),ye(this,"approve",async n=>{var r,s,i;const o=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Ja.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(S){throw o.setError(Hf.no_internet_connection),S}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(S){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),o.setError(Hf.proposal_not_found),S}try{await this.isValidApprove(n)}catch(S){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(Hf.session_approve_namespace_validation_failure),S}const{id:a,relayProtocol:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=n,f=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:p,proposer:g,requiredNamespaces:w,optionalNamespaces:m}=f;let b=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:p});b||(b=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ja.session_approve_started,properties:{topic:p,trace:[Ja.session_approve_started,Ja.session_namespaces_validation_success]}}));const v=await this.client.core.crypto.generateKeyPair(),A=g.publicKey,C=await this.client.core.crypto.generateSharedKey(v,A),T=qn(qn(qn({relay:{protocol:c??"irn"},namespaces:l,controller:{publicKey:v,metadata:this.client.metadata},expiry:zr(zm)},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),x=sr.relay;b.addTrace(Ja.subscribing_session_topic);try{await this.client.core.relayer.subscribe(C,{transportType:x})}catch(S){throw b.setError(Hf.subscribe_session_topic_failure),S}b.addTrace(Ja.subscribe_session_topic_success);const N=ai(qn({},T),{topic:C,requiredNamespaces:w,optionalNamespaces:m,pairingTopic:p,acknowledged:!1,self:T.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:v,transportType:sr.relay});await this.client.session.set(C,N),b.addTrace(Ja.store_session);try{b.addTrace(Ja.publishing_session_settle),await this.sendRequest({topic:C,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Hf.session_settle_publish_failure),S}),b.addTrace(Ja.session_settle_publish_success),b.addTrace(Ja.publishing_session_approve),await this.sendResult({id:a,topic:p,result:{relay:{protocol:c??"irn"},responderPublicKey:v},throwOnFailedPublish:!0}).catch(S=>{throw b==null||b.setError(Hf.session_approve_publish_failure),S}),b.addTrace(Ja.session_approve_publish_success)}catch(S){throw this.client.logger.error(S),this.client.session.delete(C,$n("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(C),S}return this.client.core.eventClient.deleteEvent({eventId:b.eventId}),await this.client.core.pairing.updateMetadata({topic:p,metadata:g.metadata}),await this.client.proposal.delete(a,$n("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:p}),await this.setExpiry(C,zr(zm)),{topic:C,acknowledged:()=>Promise.resolve(this.client.session.get(C))}}),ye(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:r,reason:s}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),o}i&&(await this.sendError({id:r,topic:i,error:s,rpcOpts:rs.wc_sessionPropose.reject}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED")))}),ye(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(d){throw this.client.logger.error("update() -> isValidUpdate() failed"),d}const{topic:r,namespaces:s}=n,{done:i,resolve:o,reject:a}=tp(),c=el(),l=Ip().toString(),u=this.client.session.get(r).namespaces;return this.events.once(An("session_update",c),({error:d})=>{d?a(d):o()}),await this.client.session.update(r,{namespaces:s}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:l}).catch(d=>{this.client.logger.error(d),this.client.session.update(r,{namespaces:u}),a(d)}),{acknowledged:i}}),ye(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,s=el(),{done:i,resolve:o,reject:a}=tp();return this.events.once(An("session_extend",s),({error:c})=>{c?a(c):o()}),await this.setExpiry(r,zr(zm)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(c=>{a(c)}),{acknowledged:i}}),ye(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:s,topic:i,expiry:o=rs.wc_sessionRequest.req.ttl}=n,a=this.client.session.get(i);(a==null?void 0:a.transportType)===sr.relay&&await this.confirmOnlineStateOrThrow();const c=el(),l=Ip().toString(),{done:u,resolve:d,reject:h}=tp(o,"Request expired. Please try again.");this.events.once(An("session_request",c),({error:m,result:b})=>{m?h(m):d(b)});const f="wc_sessionRequest",p=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(p)return await this.sendRequest({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:{request:ai(qn({},s),{expiryTimestamp:zr(o)}),chainId:r},expiry:o,throwOnFailedPublish:!0,appLink:p}).catch(m=>h(m)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),await u();const g={request:ai(qn({},s),{expiryTimestamp:zr(o)}),chainId:r},w=this.shouldSetTVF(f,g);return await Promise.all([new Promise(async m=>{await this.sendRequest(qn({clientRpcId:c,relayRpcId:l,topic:i,method:f,params:g,expiry:o,throwOnFailedPublish:!0},w&&{tvf:this.getTVFParams(c,g)})).catch(b=>h(b)),this.client.events.emit("session_request_sent",{topic:i,request:s,chainId:r,id:c}),m()}),new Promise(async m=>{var b;if(!((b=a.sessionConfig)!=null&&b.disableDeepLink)){const v=await H2e(this.client.core.storage,Zj);await j2e({id:c,topic:i,wcDeepLink:v})}m()}),u()]).then(m=>m[2])}),ye(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:s}=n,{id:i}=s,o=this.client.session.get(r);o.transportType===sr.relay&&await this.confirmOnlineStateOrThrow();const a=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);tl(s)?await this.sendResult({id:i,topic:r,result:s.result,throwOnFailedPublish:!0,appLink:a}):Ca(s)&&await this.sendError({id:i,topic:r,error:s.error,appLink:a}),this.cleanupAfterResponse(n)}),ye(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:r}=n;if(this.client.session.keys.includes(r)){const s=el(),i=Ip().toString(),{done:o,resolve:a,reject:c}=tp();this.events.once(An("session_ping",s),({error:l})=>{l?c(l):a()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),o()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),ye(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:s,chainId:i}=n,o=Ip().toString(),a=el();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),ye(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:$n("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:s}=xe("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(s)}}),ye(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>D3e(r,n)))),ye(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),ye(this,"authenticate",async(n,r)=>{var s;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((s=this.client.metadata.redirect)==null?void 0:s.linkMode),o=i?sr.link_mode:sr.relay;o===sr.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:c="",uri:l,domain:u,nonce:d,type:h,exp:f,nbf:p,methods:g=[],expiry:w}=n,m=[...n.resources||[]],{topic:b,uri:v}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:b,uri:v}});const A=await this.client.core.crypto.generateKeyPair(),C=_S(A);if(await Promise.all([this.client.auth.authKeys.set(SS,{responseTopic:C,publicKey:A}),this.client.auth.pairingTopics.set(C,{topic:C,pairingTopic:b})]),await this.client.core.relayer.subscribe(C,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${b}`),g.length>0){const{namespace:M}=Yy(a[0]);let j=Lke(M,"request",g);CS(m)&&(j=Bke(j,m.pop())),m.push(j)}const T=w&&w>rs.wc_sessionAuthenticate.req.ttl?w:rs.wc_sessionAuthenticate.req.ttl,x={authPayload:{type:h??"caip122",chains:a,statement:c,aud:l,domain:u,version:"1",nonce:d,iat:new Date().toISOString(),exp:f,nbf:p,resources:m},requester:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:zr(T)},N={eip155:{chains:a,methods:[...new Set(["personal_sign",...g])],events:["chainChanged","accountsChanged"]}},S={requiredNamespaces:{},optionalNamespaces:N,relays:[{protocol:"irn"}],pairingTopic:b,proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:zr(rs.wc_sessionPropose.req.ttl),id:el()},{done:D,resolve:P,reject:$}=tp(T,"Request expired"),G=el(),W=An("session_connect",S.id),I=An("session_request",G),R=async({error:M,session:j})=>{this.events.off(I,B),M?$(M):j&&P({session:j})},B=async M=>{var j,V,te;if(await this.deletePendingAuthRequest(G,{message:"fulfilled",code:0}),M.error){const Je=$n("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return M.error.code===Je.code?void 0:(this.events.off(W,R),$(M.error.message))}await this.deleteProposal(S.id),this.events.off(W,R);const{cacaos:Z,responder:X}=M.result,ce=[],ge=[];for(const Je of Z){await YF({cacao:Je,projectId:this.client.core.projectId})||(this.client.logger.error(Je,"Signature verification failed"),$($n("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:bt}=Je,Nt=CS(bt.resources),At=[XD(bt.iss)],ne=uI(bt.iss);if(Nt){const ie=QF(Nt),be=JF(Nt);ce.push(...ie),At.push(...be)}for(const ie of At)ge.push(`${ie}:${ne}`)}const Me=await this.client.core.crypto.generateSharedKey(A,X.publicKey);let it;ce.length>0&&(it={topic:Me,acknowledged:!0,self:{publicKey:A,metadata:this.client.metadata},peer:X,controller:X.publicKey,expiry:zr(zm),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:b,namespaces:Cj([...new Set(ce)],[...new Set(ge)]),transportType:o},await this.client.core.relayer.subscribe(Me,{transportType:o}),await this.client.session.set(Me,it),b&&await this.client.core.pairing.updateMetadata({topic:b,metadata:X.metadata}),it=this.client.session.get(Me)),(j=this.client.metadata.redirect)!=null&&j.linkMode&&(V=X.metadata.redirect)!=null&&V.linkMode&&(te=X.metadata.redirect)!=null&&te.universal&&r&&(this.client.core.addLinkModeSupportedApp(X.metadata.redirect.universal),this.client.session.update(Me,{transportType:sr.link_mode})),P({auths:Z,session:it})};this.events.once(W,R),this.events.once(I,B);let O;try{if(i){const M=Dh("wc_sessionAuthenticate",x,G);this.client.core.history.set(b,M);const j=await this.client.core.crypto.encode("",M,{type:c1,encoding:nh});O=SA(r,b,j)}else await Promise.all([this.sendRequest({topic:b,method:"wc_sessionAuthenticate",params:x,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:G}),this.sendRequest({topic:b,method:"wc_sessionPropose",params:S,expiry:rs.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:S.id})])}catch(M){throw this.events.off(W,R),this.events.off(I,B),M}return await this.setProposal(S.id,S),await this.setAuthRequest(G,{request:ai(qn({},x),{verifyContext:{}}),pairingTopic:b,transportType:o}),{uri:O??v,response:D}}),ye(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:s}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[Gf.authenticated_session_approve_started]}});try{this.isInitialized()}catch(w){throw i.setError(av.no_internet_connection),w}const o=this.getPendingAuthRequest(r);if(!o)throw i.setError(av.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const a=o.transportType||sr.relay;a===sr.relay&&await this.confirmOnlineStateOrThrow();const c=o.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),u=_S(c),d={type:Yu,receiverPublicKey:c,senderPublicKey:l},h=[],f=[];for(const w of s){if(!await YF({cacao:w,projectId:this.client.core.projectId})){i.setError(av.invalid_cacao);const C=$n("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:u,error:C,encodeOpts:d}),new Error(C.message)}i.addTrace(Gf.cacaos_verified);const{p:m}=w,b=CS(m.resources),v=[XD(m.iss)],A=uI(m.iss);if(b){const C=QF(b),T=JF(b);h.push(...C),v.push(...T)}for(const C of v)f.push(`${C}:${A}`)}const p=await this.client.core.crypto.generateSharedKey(l,c);i.addTrace(Gf.create_authenticated_session_topic);let g;if((h==null?void 0:h.length)>0){g={topic:p,acknowledged:!0,self:{publicKey:l,metadata:this.client.metadata},peer:{publicKey:c,metadata:o.requester.metadata},controller:c,expiry:zr(zm),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Cj([...new Set(h)],[...new Set(f)]),transportType:a},i.addTrace(Gf.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(p,{transportType:a})}catch(w){throw i.setError(av.subscribe_authenticated_session_topic_failure),w}i.addTrace(Gf.subscribe_authenticated_session_topic_success),await this.client.session.set(p,g),i.addTrace(Gf.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}i.addTrace(Gf.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:r,result:{cacaos:s,responder:{publicKey:l,metadata:this.client.metadata}},encodeOpts:d,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(w){throw i.setError(av.authenticated_session_approve_publish_failure),w}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:g}}),ye(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:s}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===sr.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=_S(o),l={type:Yu,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:r,topic:c,error:s,encodeOpts:l,rpcOpts:rs.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,$n("USER_DISCONNECTED"))}),ye(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:s}=n;return pZ(r,s)}),ye(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),ye(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(i=>{var o,a;return((o=i.peerMetadata)==null?void 0:o.url)&&((a=i.peerMetadata)==null?void 0:a.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),ye(this,"deleteSession",async n=>{var r;const{topic:s,expirerHasDeleted:i=!1,emitEvent:o=!0,id:a=0}=n,{self:c}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,$n("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),i||this.client.core.expirer.del(s),this.client.core.storage.removeItem(Zj).catch(l=>this.client.logger.warn(l)),this.getPendingSessionRequests().forEach(l=>{l.topic===s&&this.deletePendingSessionRequest(l.id,$n("USER_DISCONNECTED"))}),s===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=Kc.idle),o&&this.client.events.emit("session_delete",{id:a,topic:s})}),ye(this,"deleteProposal",async(n,r)=>{if(r)try{const s=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:s.pairingTopic});i==null||i.setError(Hf.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,$n("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),ye(this,"deletePendingSessionRequest",async(n,r,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),s&&(this.sessionRequestQueue.state=Kc.idle,this.client.events.emit("session_request_expire",{id:n}))}),ye(this,"deletePendingAuthRequest",async(n,r,s=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),s?Promise.resolve():this.client.core.expirer.del(n)])}),ye(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),ye(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,zr(rs.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),ye(this,"setAuthRequest",async(n,r)=>{const{request:s,pairingTopic:i,transportType:o=sr.relay}=r;this.client.core.expirer.set(n,s.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:n,pairingTopic:i,verifyContext:s.verifyContext,transportType:o})}),ye(this,"setPendingSessionRequest",async n=>{const{id:r,topic:s,params:i,verifyContext:o}=n,a=i.request.expiryTimestamp||zr(rs.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,a),await this.client.pendingRequest.set(r,{id:r,topic:s,params:i,verifyContext:o})}),ye(this,"sendRequest",async n=>{const{topic:r,method:s,params:i,expiry:o,relayRpcId:a,clientRpcId:c,throwOnFailedPublish:l,appLink:u,tvf:d}=n,h=Dh(s,i,c);let f;const p=!!u;try{const m=p?nh:Sc;f=await this.client.core.crypto.encode(r,h,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let g;if(JUe.includes(s)){const m=wl(JSON.stringify(h)),b=wl(f);g=await this.client.core.verify.register({id:b,decryptedId:m})}const w=rs[s].req;if(w.attestation=g,o&&(w.ttl=o),a&&(w.id=a),this.client.core.history.set(r,h),p){const m=SA(u,r,f);await global.Linking.openURL(m,this.client.name)}else{const m=rs[s].req;o&&(m.ttl=o),a&&(m.id=a),m.tvf=ai(qn({},d),{correlationId:h.id}),l?(m.internal=ai(qn({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,f,m)):this.client.core.relayer.publish(r,f,m).catch(b=>this.client.logger.error(b))}return h.id}),ye(this,"sendResult",async n=>{const{id:r,topic:s,result:i,throwOnFailedPublish:o,encodeOpts:a,appLink:c}=n,l=dT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=d?nh:Sc;u=await this.client.core.crypto.encode(s,l,ai(qn({},a||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),p}let h,f;try{h=await this.client.core.history.get(s,r);const p=h.request;try{this.shouldSetTVF(p.method,p.params)&&(f=this.getTVFParams(r,p.params,i))}catch(g){this.client.logger.warn("sendResult() -> getTVFParams() failed",g)}}catch(p){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${r}) failed`),p}if(d){const p=SA(c,s,u);await global.Linking.openURL(p,this.client.name)}else{const p=h.request.method,g=rs[p].res;g.tvf=ai(qn({},f),{correlationId:r}),o?(g.internal=ai(qn({},g.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,u,g)):this.client.core.relayer.publish(s,u,g).catch(w=>this.client.logger.error(w))}await this.client.core.history.resolve(l)}),ye(this,"sendError",async n=>{const{id:r,topic:s,error:i,encodeOpts:o,rpcOpts:a,appLink:c}=n,l=hT(r,i);let u;const d=c&&typeof(global==null?void 0:global.Linking)<"u";try{const f=d?nh:Sc;u=await this.client.core.crypto.encode(s,l,ai(qn({},o||{}),{encoding:f}))}catch(f){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),f}let h;try{h=await this.client.core.history.get(s,r)}catch(f){throw this.client.logger.error(`sendError() -> history.get(${s}, ${r}) failed`),f}if(d){const f=SA(c,s,u);await global.Linking.openURL(f,this.client.name)}else{const f=h.request.method,p=a||rs[f].res;this.client.core.relayer.publish(s,u,p)}await this.client.core.history.resolve(l)}),ye(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(s=>{let i=!1;Qd(s.expiry)&&(i=!0),this.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&n.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{Qd(s.expiryTimestamp)&&r.push(s.id)}),await Promise.all([...n.map(s=>this.deleteSession({topic:s})),...r.map(s=>this.deleteProposal(s))])}),ye(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),ye(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),ye(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Kc.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Kc.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=Kc.idle}),ye(this,"processRequest",async n=>{const{topic:r,payload:s,attestation:i,transportType:o,encryptedId:a}=n,c=s.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:s,attestation:i,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,s);case"wc_sessionPing":return await this.onSessionPingRequest(r,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(r,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:s,attestation:i,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),ye(this,"onRelayEventResponse",async n=>{const{topic:r,payload:s,transportType:i}=n,o=(await this.client.core.history.get(r,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(r,s,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,s);case"wc_sessionExtend":return this.onSessionExtendResponse(r,s);case"wc_sessionPing":return this.onSessionPingResponse(r,s);case"wc_sessionRequest":return this.onSessionRequestResponse(r,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),ye(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:s}=xe("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)}),ye(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:s}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(s)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),ye(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:s,attestation:i,encryptedId:o}=n,{params:a,id:c}=s;try{const l=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),l==null||l.setError(du.proposal_listener_not_found)),this.isValidConnect(qn({},s.params));const u=a.expiryTimestamp||zr(rs.wc_sessionPropose.req.ttl),d=qn({id:c,pairingTopic:r,expiryTimestamp:u},a);await this.setProposal(c,d);const h=await this.getVerifyContext({attestationId:i,hash:wl(JSON.stringify(s)),encryptedId:o,metadata:d.proposer.metadata});l==null||l.addTrace(Zc.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:h})}catch(l){await this.sendError({id:c,topic:r,error:l,rpcOpts:rs.wc_sessionPropose.autoReject}),this.client.logger.error(l)}}),ye(this,"onSessionProposeResponse",async(n,r,s)=>{const{id:i}=r;if(tl(r)){const{result:o}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const c=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const u=await this.client.core.crypto.generateSharedKey(c,l);this.pendingSessions.set(i,{sessionTopic:u,pairingTopic:n,proposalId:i,publicKey:c});const d=await this.client.core.relayer.subscribe(u,{transportType:s});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:d}),await this.client.core.pairing.activate({topic:n})}else if(Ca(r)){await this.client.proposal.delete(i,$n("USER_DISCONNECTED"));const o=An("session_connect",i);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:r.error})}}),ye(this,"onSessionSettleRequest",async(n,r)=>{const{id:s,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:o,controller:a,expiry:c,namespaces:l,sessionProperties:u,scopedProperties:d,sessionConfig:h}=r.params,f=[...this.pendingSessions.values()].find(w=>w.sessionTopic===n);if(!f)return this.client.logger.error(`Pending session not found for topic ${n}`);const p=this.client.proposal.get(f.proposalId),g=ai(qn(qn(qn({topic:n,relay:o,expiry:c,namespaces:l,acknowledged:!0,pairingTopic:f.pairingTopic,requiredNamespaces:p.requiredNamespaces,optionalNamespaces:p.optionalNamespaces,controller:a.publicKey,self:{publicKey:f.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),d&&{scopedProperties:d}),h&&{sessionConfig:h}),{transportType:sr.relay});await this.client.session.set(g.topic,g),await this.setExpiry(g.topic,g.expiry),await this.client.core.pairing.updateMetadata({topic:f.pairingTopic,metadata:g.peer.metadata}),this.client.events.emit("session_connect",{session:g}),this.events.emit(An("session_connect",f.proposalId),{session:g}),this.pendingSessions.delete(f.proposalId),this.deleteProposal(f.proposalId,!1),this.cleanupDuplicatePairings(g),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionSettleResponse",async(n,r)=>{const{id:s}=r;tl(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(An("session_approve",s),{})):Ca(r)&&(await this.client.session.delete(n,$n("USER_DISCONNECTED")),this.events.emit(An("session_approve",s),{error:r.error}))}),ye(this,"onSessionUpdateRequest",async(n,r)=>{const{params:s,id:i}=r;try{const o=`${n}_session_update`,a=iv.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:$n("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(qn({topic:n},s));try{iv.set(o,i),await this.client.session.update(n,{namespaces:s.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw iv.delete(o),c}this.client.events.emit("session_update",{id:i,topic:n,params:s})}catch(o){await this.sendError({id:i,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),ye(this,"onSessionUpdateResponse",(n,r)=>{const{id:s}=r,i=An("session_update",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);tl(r)?this.events.emit(An("session_update",s),{}):Ca(r)&&this.events.emit(An("session_update",s),{error:r.error})}),ye(this,"onSessionExtendRequest",async(n,r)=>{const{id:s}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,zr(zm)),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionExtendResponse",(n,r)=>{const{id:s}=r,i=An("session_extend",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);tl(r)?this.events.emit(An("session_extend",s),{}):Ca(r)&&this.events.emit(An("session_extend",s),{error:r.error})}),ye(this,"onSessionPingRequest",async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:n})}catch(i){await this.sendError({id:s,topic:n,error:i}),this.client.logger.error(i)}}),ye(this,"onSessionPingResponse",(n,r)=>{const{id:s}=r,i=An("session_ping",s);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);tl(r)?this.events.emit(An("session_ping",s),{}):Ca(r)&&this.events.emit(An("session_ping",s),{error:r.error})},500)}),ye(this,"onSessionDeleteRequest",async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(fs.publish,async()=>{i(await this.deleteSession({topic:n,id:s}))})}),this.sendResult({id:s,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:$n("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),ye(this,"onSessionRequest",async n=>{var r,s,i;const{topic:o,payload:a,attestation:c,encryptedId:l,transportType:u}=n,{id:d,params:h}=a;try{await this.isValidRequest(qn({topic:o},h));const f=this.client.session.get(o),p=await this.getVerifyContext({attestationId:c,hash:wl(JSON.stringify(Dh("wc_sessionRequest",h,d))),encryptedId:l,metadata:f.peer.metadata,transportType:u}),g={id:d,topic:o,params:h,verifyContext:p};await this.setPendingSessionRequest(g),u===sr.link_mode&&(r=f.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((s=f.peer.metadata.redirect)==null?void 0:s.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(g):(this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue())}catch(f){await this.sendError({id:d,topic:o,error:f}),this.client.logger.error(f)}}),ye(this,"onSessionRequestResponse",(n,r)=>{const{id:s}=r,i=An("session_request",s);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);tl(r)?this.events.emit(An("session_request",s),{result:r.result}):Ca(r)&&this.events.emit(An("session_request",s),{error:r.error})}),ye(this,"onSessionEventRequest",async(n,r)=>{const{id:s,params:i}=r;try{const o=`${n}_session_event_${i.event.name}`,a=iv.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(qn({topic:n},i)),this.client.events.emit("session_event",{id:s,topic:n,params:i}),iv.set(o,s)}catch(o){await this.sendError({id:s,topic:n,error:o}),this.client.logger.error(o)}}),ye(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:s}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),tl(r)?this.events.emit(An("session_request",s),{result:r.result}):Ca(r)&&this.events.emit(An("session_request",s),{error:r.error})}),ye(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:s,payload:i,attestation:o,encryptedId:a,transportType:c}=n;try{const{requester:l,authPayload:u,expiryTimestamp:d}=i.params,h=await this.getVerifyContext({attestationId:o,hash:wl(JSON.stringify(i)),encryptedId:a,metadata:l.metadata,transportType:c}),f={requester:l,pairingTopic:s,id:i.id,authPayload:u,verifyContext:h,expiryTimestamp:d};await this.setAuthRequest(i.id,{request:f,pairingTopic:s,transportType:c}),c===sr.link_mode&&(r=l.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(l.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:s,params:i.params,id:i.id,verifyContext:h})}catch(l){this.client.logger.error(l);const u=i.params.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(i.params.requester.metadata,c),f={type:Yu,receiverPublicKey:u,senderPublicKey:d};await this.sendError({id:i.id,topic:s,error:l,encodeOpts:f,rpcOpts:rs.wc_sessionAuthenticate.autoReject,appLink:h})}}),ye(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),ye(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Kc.idle,this.processSessionRequestQueue()},_e.toMiliseconds(this.requestQueueDelay))}),ye(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const o=i.request.id,a=An("session_request",o);if(this.events.listenerCount(a)===0)throw new Error(`emitting ${a} without any listeners`);this.events.emit(An("session_request",i.request.id),{error:r})})}),ye(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Kc.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Kc.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),ye(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),ye(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(s=>s.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:Dh("wc_sessionPropose",ai(qn({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),ye(this,"isValidConnect",async n=>{if(!zi(n)){const{message:l}=xe("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:i,sessionProperties:o,scopedProperties:a,relays:c}=n;if(Rs(r)||await this.isValidPairingTopic(r),!q3e(c)){const{message:l}=xe("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}if(!Rs(s)&&rf(s)!==0){const l="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(l):this.client.logger.warn(l),this.validateNamespaces(s,"requiredNamespaces")}if(!Rs(i)&&rf(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),Rs(o)||this.validateSessionProps(o,"sessionProperties"),!Rs(a)){this.validateSessionProps(a,"scopedProperties");const l=Object.keys(s||{}).concat(Object.keys(i||{}));if(!Object.keys(a).every(u=>l.includes(u)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(l)}`)}}),ye(this,"validateNamespaces",(n,r)=>{const s=G3e(n,"connect()",r);if(s)throw new Error(s.message)}),ye(this,"isValidApprove",async n=>{if(!zi(n))throw new Error(xe("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:s,relayProtocol:i,sessionProperties:o,scopedProperties:a}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=mO(s,"approve()");if(l)throw new Error(l.message);const u=Sj(c.requiredNamespaces,s,"approve()");if(u)throw new Error(u.message);if(!Ur(i,!0)){const{message:d}=xe("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(d)}if(Rs(o)||this.validateSessionProps(o,"sessionProperties"),!Rs(a)){this.validateSessionProps(a,"scopedProperties");const d=new Set(Object.keys(s));if(!Object.keys(a).every(h=>d.has(h)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(d).join(", ")}`)}}),ye(this,"isValidReject",async n=>{if(!zi(n)){const{message:i}=xe("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:s}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!K3e(s)){const{message:i}=xe("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(i)}}),ye(this,"isValidSessionSettleRequest",n=>{if(!zi(n)){const{message:l}=xe("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(l)}const{relay:r,controller:s,namespaces:i,expiry:o}=n;if(!FZ(r)){const{message:l}=xe("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(l)}const a=$3e(s,"onSessionSettleRequest()");if(a)throw new Error(a.message);const c=mO(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Qd(o)){const{message:l}=xe("EXPIRED","onSessionSettleRequest()");throw new Error(l)}}),ye(this,"isValidUpdate",async n=>{if(!zi(n)){const{message:c}=xe("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),o=mO(s,"update()");if(o)throw new Error(o.message);const a=Sj(i.requiredNamespaces,s,"update()");if(a)throw new Error(a.message)}),ye(this,"isValidExtend",async n=>{if(!zi(n)){const{message:s}=xe("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(s)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),ye(this,"isValidRequest",async n=>{if(!zi(n)){const{message:c}=xe("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:s,chainId:i,expiry:o}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:a}=this.client.session.get(r);if(!Aj(a,i)){const{message:c}=xe("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Y3e(s)){const{message:c}=xe("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(c)}if(!Z3e(a,i,s.method)){const{message:c}=xe("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(c)}if(o&&!n5e(o,_O)){const{message:c}=xe("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${_O.min} and ${_O.max}`);throw new Error(c)}}),ye(this,"isValidRespond",async n=>{var r;if(!zi(n)){const{message:o}=xe("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(o)}const{topic:s,response:i}=n;try{await this.isValidSessionTopic(s)}catch(o){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),o}if(!Q3e(i)){const{message:o}=xe("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}}),ye(this,"isValidPing",async n=>{if(!zi(n)){const{message:s}=xe("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidEmit",async n=>{if(!zi(n)){const{message:a}=xe("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(a)}const{topic:r,event:s,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!Aj(o,i)){const{message:a}=xe("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(a)}if(!J3e(s)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}if(!X3e(o,i,s.name)){const{message:a}=xe("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(a)}}),ye(this,"isValidDisconnect",async n=>{if(!zi(n)){const{message:s}=xe("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),ye(this,"isValidAuthenticate",n=>{const{chains:r,uri:s,domain:i,nonce:o}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Ur(s,!1))throw new Error("uri is required parameter");if(!Ur(i,!1))throw new Error("domain is required parameter");if(!Ur(o,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>Yy(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=Yy(r[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),ye(this,"getVerifyContext",async n=>{const{attestationId:r,hash:s,encryptedId:i,metadata:o,transportType:a}=n,c={verified:{verifyUrl:o.verifyUrl||fE,validation:"UNKNOWN",origin:o.url||""}};try{if(a===sr.link_mode){const u=this.getAppLinkIfEnabled(o,a);return c.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",c}const l=await this.client.core.verify.resolve({attestationId:r,hash:s,encryptedId:i,verifyUrl:o.verifyUrl});l&&(c.verified.origin=l.origin,c.verified.isScam=l.isScam,c.verified.validation=l.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.warn(l)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),ye(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((s,i)=>{if(s==null){const{message:o}=xe("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${s} for key ${Object.keys(n)[i]}`);throw new Error(o)}})}),ye(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),ye(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const i=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(s++>=i)break;this.recentlyDeletedMap.delete(o)}}}),ye(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:s}=xe("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(s)}}),ye(this,"isLinkModeEnabled",(n,r)=>{var s,i,o,a,c,l,u,d,h;return!n||r!==sr.link_mode?!1:((i=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:i.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((l=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:l.universal)!==""&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==void 0&&((d=n==null?void 0:n.redirect)==null?void 0:d.universal)!==""&&((h=n==null?void 0:n.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),ye(this,"getAppLinkIfEnabled",(n,r)=>{var s;return this.isLinkModeEnabled(n,r)?(s=n==null?void 0:n.redirect)==null?void 0:s.universal:void 0}),ye(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=FF(n,"topic")||"",s=decodeURIComponent(FF(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:sr.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:s,sessionExists:i})}),ye(this,"registerLinkModeListeners",async()=>{var n;if(CU()||Of()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const s=await r.getInitialURL();s&&setTimeout(()=>{this.handleLinkModeMessage({url:s})},50)}}}),ye(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:s}=r;return Object.keys(e9).includes(s.method)}),ye(this,"getTVFParams",(n,r,s)=>{var i,o;try{const a=r.request.method,c=this.extractTxHashesFromResult(a,s);return ai(qn({correlationId:n,rpcMethods:[a],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(o=(i=r.request.params)==null?void 0:i[0])==null?void 0:o.to]}),{txHashes:c})}catch(a){this.client.logger.warn("Error getting TVF params",a)}return{}}),ye(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const s=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!s.startsWith("0x"))return!1;const i=s.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),ye(this,"extractTxHashesFromResult",(n,r)=>{try{const s=e9[n];if(typeof r=="string")return[r];const i=r[s.key];if(nf(i))return n==="solana_signAllTransactions"?i.map(o=>Cke(o)):i;if(typeof i=="string")return[i]}catch(s){this.client.logger.warn("Error extracting tx hashes from result",s)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,s]of Object.entries(n))for(const i of s)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=xe("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(fs.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:s,transportType:i}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(SS)?this.client.auth.authKeys.get(SS):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(n,r,{receiverPublicKey:o,encoding:i===sr.link_mode?nh:Sc});EU(a)?(this.client.core.history.set(n,a),await this.onRelayEventRequest({topic:n,payload:a,attestation:s,transportType:i,encryptedId:wl(r)})):fT(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:n,payload:a,transportType:i}),this.client.core.history.delete(n,a.id)):await this.onRelayEventUnknownPayload({topic:n,payload:a,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(a){this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(fa.expired,async e=>{const{topic:n,id:r}=iZ(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,xe("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,xe("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(lp.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(lp.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Ur(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Qd(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=xe("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Ur(e,!1)){const{message:n}=xe("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Qd(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=xe("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=xe("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Ur(e,!1)){const{message:n}=xe("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=xe("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!V3e(e)){const{message:n}=xe("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=xe("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Qd(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=xe("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class lBe extends mm{constructor(e,n){super(e,n,VUe,RU),this.core=e,this.logger=n}}let uBe=class extends mm{constructor(e,n){super(e,n,KUe,RU),this.core=e,this.logger=n}};class dBe extends mm{constructor(e,n){super(e,n,QUe,RU,r=>r.id),this.core=e,this.logger=n}}class hBe extends mm{constructor(e,n){super(e,n,eBe,ST,()=>SS),this.core=e,this.logger=n}}class fBe extends mm{constructor(e,n){super(e,n,tBe,ST),this.core=e,this.logger=n}}class pBe extends mm{constructor(e,n){super(e,n,nBe,ST,r=>r.id),this.core=e,this.logger=n}}var gBe=Object.defineProperty,mBe=(t,e,n)=>e in t?gBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AO=(t,e,n)=>mBe(t,typeof e!="symbol"?e+"":e,n);class yBe{constructor(e,n){this.core=e,this.logger=n,AO(this,"authKeys"),AO(this,"pairingTopics"),AO(this,"requests"),this.authKeys=new hBe(this.core,this.logger),this.pairingTopics=new fBe(this.core,this.logger),this.requests=new pBe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var wBe=Object.defineProperty,bBe=(t,e,n)=>e in t?wBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,tn=(t,e,n)=>bBe(t,typeof e!="symbol"?e+"":e,n);let vBe=class oX extends OOe{constructor(e){super(e),tn(this,"protocol",rX),tn(this,"version",sX),tn(this,"name",CO.name),tn(this,"metadata"),tn(this,"core"),tn(this,"logger"),tn(this,"events",new ja.EventEmitter),tn(this,"engine"),tn(this,"session"),tn(this,"proposal"),tn(this,"pendingRequest"),tn(this,"auth"),tn(this,"signConfig"),tn(this,"on",(r,s)=>this.events.on(r,s)),tn(this,"once",(r,s)=>this.events.once(r,s)),tn(this,"off",(r,s)=>this.events.off(r,s)),tn(this,"removeListener",(r,s)=>this.events.removeListener(r,s)),tn(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),tn(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"update",async r=>{try{return await this.engine.update(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"request",async r=>{try{return await this.engine.request(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"find",r=>{try{return this.engine.find(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),tn(this,"authenticate",async(r,s)=>{try{return await this.engine.authenticate(r,s)}catch(i){throw this.logger.error(i.message),i}}),tn(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),tn(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(s){throw this.logger.error(s.message),s}}),this.name=(e==null?void 0:e.name)||CO.name,this.metadata=M2e(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Z_(pm({level:(e==null?void 0:e.logger)||CO.logger}));this.core=(e==null?void 0:e.core)||new qUe(e),this.logger=$s(n,this.name),this.session=new uBe(this.core,this.logger),this.proposal=new lBe(this.core,this.logger),this.pendingRequest=new dBe(this.core,this.logger),this.engine=new cBe(this),this.auth=new yBe(this.core,this.logger)}static async init(e){const n=new oX(e);return await n.initialize(),n}get context(){return yo(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},_e.toMiliseconds(_e.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};const n9="error",EBe="wss://relay.walletconnect.org",CBe="wc",_Be="universal_provider",IA=`${CBe}@2:${_Be}:`,aX="https://rpc.walletconnect.org/v1/",ly="generic",ABe=`${aX}bundler`,za={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};function SBe(){}function PU(t){return t==null||typeof t!="object"&&typeof t!="function"}function OU(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function xBe(t){if(PU(t))return t;if(Array.isArray(t)||OU(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),n=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new n(t);if(t instanceof RegExp){const r=new n(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new n(t.buffer.slice(0));if(t instanceof Error){const r=new n(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new n([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function r9(t){return typeof t=="object"&&t!==null}function cX(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function lX(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const IBe="[object RegExp]",uX="[object String]",dX="[object Number]",hX="[object Boolean]",fX="[object Arguments]",NBe="[object Symbol]",TBe="[object Date]",RBe="[object Map]",PBe="[object Set]",OBe="[object Array]",kBe="[object ArrayBuffer]",DBe="[object Object]",MBe="[object DataView]",LBe="[object Uint8Array]",UBe="[object Uint8ClampedArray]",BBe="[object Uint16Array]",$Be="[object Uint32Array]",FBe="[object Int8Array]",jBe="[object Int16Array]",WBe="[object Int32Array]",zBe="[object Float32Array]",HBe="[object Float64Array]";function GBe(t,e){return Py(t,void 0,t,new Map,e)}function Py(t,e,n,r=new Map,s=void 0){const i=s==null?void 0:s(t,e,n,r);if(i!=null)return i;if(PU(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const o=new Array(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Py(t[a],a,n,r,s);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;r.set(t,o);for(const[a,c]of t)o.set(a,Py(c,a,n,r,s));return o}if(t instanceof Set){const o=new Set;r.set(t,o);for(const a of t)o.add(Py(a,void 0,n,r,s));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(OU(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,o);for(let a=0;a<t.length;a++)o[a]=Py(t[a],a,n,r,s);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,o),up(o,t,n,r,s),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return r.set(t,o),up(o,t,n,r,s),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return r.set(t,o),up(o,t,n,r,s),o}if(t instanceof Error){const o=new t.constructor;return r.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,up(o,t,n,r,s),o}if(typeof t=="object"&&qBe(t)){const o=Object.create(Object.getPrototypeOf(t));return r.set(t,o),up(o,t,n,r,s),o}return t}function up(t,e,n=t,r,s){const i=[...Object.keys(e),...cX(e)];for(let o=0;o<i.length;o++){const a=i[o],c=Object.getOwnPropertyDescriptor(t,a);(c==null||c.writable)&&(t[a]=Py(e[a],a,n,r,s))}}function qBe(t){switch(lX(t)){case fX:case OBe:case kBe:case MBe:case hX:case TBe:case zBe:case HBe:case FBe:case jBe:case WBe:case RBe:case dX:case DBe:case IBe:case PBe:case uX:case NBe:case LBe:case UBe:case BBe:case $Be:return!0;default:return!1}}function VBe(t,e){return GBe(t,(n,r,s,i)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case dX:case uX:case hX:{const o=new t.constructor(t==null?void 0:t.valueOf());return up(o,t),o}case fX:{const o={};return up(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function s9(t){return VBe(t)}function i9(t){return t!==null&&typeof t=="object"&&lX(t)==="[object Arguments]"}function KBe(t){return OU(t)}function YBe(t){var n;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const r=t[Symbol.toStringTag];return r==null||!((n=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&n.writable)?!1:t.toString()===`[object ${r}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function QBe(t,...e){const n=e.slice(0,-1),r=e[e.length-1];let s=t;for(let i=0;i<n.length;i++){const o=n[i];s=E3(s,o,r,new Map)}return s}function E3(t,e,n,r){if(PU(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return xBe(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let i=0;i<e.length;i++)e[i]=e[i]??void 0}const s=[...Object.keys(e),...cX(e)];for(let i=0;i<s.length;i++){const o=s[i];let a=e[o],c=t[o];if(i9(a)&&(a={...a}),i9(c)&&(c={...c}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=s9(a)),Array.isArray(a))if(typeof c=="object"&&c!=null){const u=[],d=Reflect.ownKeys(c);for(let h=0;h<d.length;h++){const f=d[h];u[f]=c[f]}c=u}else c=[];const l=n(c,a,o,t,e,r);l!=null?t[o]=l:Array.isArray(a)||r9(c)&&r9(a)?t[o]=E3(c,a,n,r):c==null&&YBe(a)?t[o]=E3({},a,n,r):c==null&&KBe(a)?t[o]=s9(a):(c===void 0||a!==void 0)&&(t[o]=a)}return t}function JBe(t,...e){return QBe(t,...e,SBe)}var ZBe=Object.defineProperty,XBe=Object.defineProperties,e$e=Object.getOwnPropertyDescriptors,o9=Object.getOwnPropertySymbols,t$e=Object.prototype.hasOwnProperty,n$e=Object.prototype.propertyIsEnumerable,a9=(t,e,n)=>e in t?ZBe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,NA=(t,e)=>{for(var n in e||(e={}))t$e.call(e,n)&&a9(t,n,e[n]);if(o9)for(var n of o9(e))n$e.call(e,n)&&a9(t,n,e[n]);return t},r$e=(t,e)=>XBe(t,e$e(e));function Jo(t,e,n){var r;const s=Yy(t);return((r=e.rpcMap)==null?void 0:r[s.reference])||`${aX}?chainId=${s.namespace}:${s.reference}&projectId=${n}`}function ym(t){return t.includes(":")?t.split(":")[1]:t}function pX(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function s$e(t,e){const n=Object.keys(e.namespaces).filter(s=>s.includes(t));if(!n.length)return[];const r=[];return n.forEach(s=>{const i=e.namespaces[s].accounts;r.push(...i)}),r}function TA(t={},e={}){const n=c9(t),r=c9(e);return JBe(n,r)}function c9(t){var e,n,r,s,i;const o={};if(!rf(t))return o;for(const[a,c]of Object.entries(t)){const l=_T(a)?[a]:c.chains,u=c.methods||[],d=c.events||[],h=c.rpcMap||{},f=Ry(a);o[f]=r$e(NA(NA({},o[f]),c),{chains:Ml(l,(e=o[f])==null?void 0:e.chains),methods:Ml(u,(n=o[f])==null?void 0:n.methods),events:Ml(d,(r=o[f])==null?void 0:r.events)}),(rf(h)||rf(((s=o[f])==null?void 0:s.rpcMap)||{}))&&(o[f].rpcMap=NA(NA({},h),(i=o[f])==null?void 0:i.rpcMap))}return o}function l9(t){return t.includes(":")?t.split(":")[2]:t}function u9(t){const e={};for(const[n,r]of Object.entries(t)){const s=r.methods||[],i=r.events||[],o=r.accounts||[],a=_T(n)?[n]:r.chains?r.chains:pX(r.accounts);e[n]={chains:a,methods:s,events:i,accounts:o}}return e}function SO(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}const gX={},wn=t=>gX[t],xO=(t,e)=>{gX[t]=e};var i$e=Object.defineProperty,o$e=(t,e,n)=>e in t?i$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Hm=(t,e,n)=>o$e(t,typeof e!="symbol"?e+"":e,n);class a$e{constructor(e){Hm(this,"name","polkadot"),Hm(this,"client"),Hm(this,"httpProviders"),Hm(this,"events"),Hm(this,"namespace"),Hm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ym(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}}var c$e=Object.defineProperty,l$e=Object.defineProperties,u$e=Object.getOwnPropertyDescriptors,d9=Object.getOwnPropertySymbols,d$e=Object.prototype.hasOwnProperty,h$e=Object.prototype.propertyIsEnumerable,C3=(t,e,n)=>e in t?c$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,h9=(t,e)=>{for(var n in e||(e={}))d$e.call(e,n)&&C3(t,n,e[n]);if(d9)for(var n of d9(e))h$e.call(e,n)&&C3(t,n,e[n]);return t},f9=(t,e)=>l$e(t,u$e(e)),Gm=(t,e,n)=>C3(t,typeof e!="symbol"?e+"":e,n);class f$e{constructor(e){Gm(this,"name","eip155"),Gm(this,"client"),Gm(this,"chainId"),Gm(this,"namespace"),Gm(this,"httpProviders"),Gm(this,"events"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(parseInt(e),n),this.chainId=parseInt(e),this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,n){const r=n||Jo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=parseInt(ym(n));e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}async handleSwitchChain(e){var n,r;let s=e.request.params?(n=e.request.params[0])==null?void 0:n.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const i=parseInt(s,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:s}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var n,r,s,i,o;const a=(r=(n=e.request)==null?void 0:n.params)==null?void 0:r[0],c=((i=(s=e.request)==null?void 0:s.params)==null?void 0:i[1])||[],l=`${a}${c.join(",")}`;if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(e.topic),d=((o=u==null?void 0:u.sessionProperties)==null?void 0:o.capabilities)||{};if(d!=null&&d[l])return d==null?void 0:d[l];const h=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:f9(h9({},u.sessionProperties||{}),{capabilities:f9(h9({},d||{}),{[l]:h})})})}catch(f){console.warn("Failed to update session with capabilities",f)}return h}async getCallStatus(e){var n,r;const s=this.client.session.get(e.topic),i=(n=s.sessionProperties)==null?void 0:n.bundler_name;if(i){const a=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from bundler",c,a)}}const o=(r=s.sessionProperties)==null?void 0:r.bundler_url;if(o)try{return await this.getUserOperationReceipt(o,e)}catch(a){console.warn("Failed to fetch call status from custom bundler",a,o)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,n){var r;const s=new URL(e),i=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Dh("eth_getUserOperationReceipt",[(r=n.request.params)==null?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,n){return`${ABe}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${n}`}}var p$e=Object.defineProperty,g$e=(t,e,n)=>e in t?p$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,qm=(t,e,n)=>g$e(t,typeof e!="symbol"?e+"":e,n);class m$e{constructor(e){qm(this,"name","solana"),qm(this,"client"),qm(this,"httpProviders"),qm(this,"events"),qm(this,"namespace"),qm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ym(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}}var y$e=Object.defineProperty,w$e=(t,e,n)=>e in t?y$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Vm=(t,e,n)=>w$e(t,typeof e!="symbol"?e+"":e,n);class b$e{constructor(e){Vm(this,"name","cosmos"),Vm(this,"client"),Vm(this,"httpProviders"),Vm(this,"events"),Vm(this,"namespace"),Vm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ym(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}}var v$e=Object.defineProperty,E$e=(t,e,n)=>e in t?v$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Km=(t,e,n)=>E$e(t,typeof e!="symbol"?e+"":e,n);class C$e{constructor(e){Km(this,"name","algorand"),Km(this,"client"),Km(this,"httpProviders"),Km(this,"events"),Km(this,"namespace"),Km(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(!this.httpProviders[e]){const r=n||Jo(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new Wa(new Bc(r,wn("disableProviderPing")))}}var _$e=Object.defineProperty,A$e=(t,e,n)=>e in t?_$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ym=(t,e,n)=>A$e(t,typeof e!="symbol"?e+"":e,n);class S$e{constructor(e){Ym(this,"name","cip34"),Ym(this,"client"),Ym(this,"httpProviders"),Ym(this,"events"),Ym(this,"namespace"),Ym(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{const r=this.getCardanoRPCUrl(n),s=ym(n);e[s]=this.createHttpProvider(s,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}getCardanoRPCUrl(e){const n=this.namespace.rpcMap;if(n)return n[e]}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}}var x$e=Object.defineProperty,I$e=(t,e,n)=>e in t?x$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Qm=(t,e,n)=>I$e(t,typeof e!="symbol"?e+"":e,n);class N$e{constructor(e){Qm(this,"name","elrond"),Qm(this,"client"),Qm(this,"httpProviders"),Qm(this,"events"),Qm(this,"namespace"),Qm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ym(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}}var T$e=Object.defineProperty,R$e=(t,e,n)=>e in t?T$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jm=(t,e,n)=>R$e(t,typeof e!="symbol"?e+"":e,n);class P$e{constructor(e){Jm(this,"name","multiversx"),Jm(this,"client"),Jm(this,"httpProviders"),Jm(this,"events"),Jm(this,"namespace"),Jm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;const s=ym(n);e[s]=this.createHttpProvider(s,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}}var O$e=Object.defineProperty,k$e=(t,e,n)=>e in t?O$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Zm=(t,e,n)=>k$e(t,typeof e!="symbol"?e+"":e,n);class D$e{constructor(e){Zm(this,"name","near"),Zm(this,"client"),Zm(this,"httpProviders"),Zm(this,"events"),Zm(this,"namespace"),Zm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Jo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{var r;e[n]=this.createHttpProvider(n,(r=this.namespace.rpcMap)==null?void 0:r[n])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace);return typeof r>"u"?void 0:new Wa(new Bc(r,wn("disableProviderPing")))}}var M$e=Object.defineProperty,L$e=(t,e,n)=>e in t?M$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Xm=(t,e,n)=>L$e(t,typeof e!="symbol"?e+"":e,n);class U$e{constructor(e){Xm(this,"name","tezos"),Xm(this,"client"),Xm(this,"httpProviders"),Xm(this,"events"),Xm(this,"namespace"),Xm(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,n){if(this.chainId=e,!this.httpProviders[e]){const r=n||Jo(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(n=>{e[n]=this.createHttpProvider(n)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace);return typeof r>"u"?void 0:new Wa(new Bc(r))}}var B$e=Object.defineProperty,$$e=(t,e,n)=>e in t?B$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ey=(t,e,n)=>$$e(t,typeof e!="symbol"?e+"":e,n);class F$e{constructor(e){ey(this,"name",ly),ey(this,"client"),ey(this,"httpProviders"),ey(this,"events"),ey(this,"namespace"),ey(this,"chainId"),this.namespace=e.namespace,this.events=wn("events"),this.client=wn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,n){this.httpProviders[e]||this.setHttpProvider(e,n),this.chainId=e,this.events.emit(za.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(n=>n.split(":")[1]===this.chainId.toString()).map(n=>n.split(":")[2]))]:[]}createHttpProviders(){var e,n;const r={};return(n=(e=this.namespace)==null?void 0:e.accounts)==null||n.forEach(s=>{const i=Yy(s);r[`${i.namespace}:${i.reference}`]=this.createHttpProvider(s)}),r}getHttpProvider(e){const n=this.httpProviders[e];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,n){const r=this.createHttpProvider(e,n);r&&(this.httpProviders[e]=r)}createHttpProvider(e,n){const r=n||Jo(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new Wa(new Bc(r,wn("disableProviderPing")))}}var j$e=Object.defineProperty,W$e=Object.defineProperties,z$e=Object.getOwnPropertyDescriptors,p9=Object.getOwnPropertySymbols,H$e=Object.prototype.hasOwnProperty,G$e=Object.prototype.propertyIsEnumerable,_3=(t,e,n)=>e in t?j$e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RA=(t,e)=>{for(var n in e||(e={}))H$e.call(e,n)&&_3(t,n,e[n]);if(p9)for(var n of p9(e))G$e.call(e,n)&&_3(t,n,e[n]);return t},IO=(t,e)=>W$e(t,z$e(e)),ca=(t,e,n)=>_3(t,typeof e!="symbol"?e+"":e,n);let q$e=class mX{constructor(e){ca(this,"client"),ca(this,"namespaces"),ca(this,"optionalNamespaces"),ca(this,"sessionProperties"),ca(this,"scopedProperties"),ca(this,"events",new lU),ca(this,"rpcProviders",{}),ca(this,"session"),ca(this,"providerOpts"),ca(this,"logger"),ca(this,"uri"),ca(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Z_(pm({level:(e==null?void 0:e.logger)||n9})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const n=new mX(e);return await n.initialize(),n}async request(e,n,r){const[s,i]=this.validateChain(n);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:RA({},e),chainId:`${s}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,n,r,s){const i=new Date().getTime();this.request(e,r,s).then(o=>n(null,dT(i,o))).catch(o=>n(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$n("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,n){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:s}=await this.client.authenticate(e,n);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await s();if(this.session=i.session,this.session){const o=u9(this.session.namespaces);this.namespaces=TA(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}removeListener(e,n){this.events.removeListener(e,n)}off(e,n){this.events.off(e,n)}get isWalletConnect(){return!0}async pair(e){const{uri:n,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});n&&(this.uri=n,this.events.emit("display_uri",n));const s=await r();this.session=s;const i=u9(s.namespaces);return this.namespaces=TA(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,n){try{if(!this.session)return;const[r,s]=this.validateChain(e),i=this.getProvider(r);i.name===ly?i.setDefaultChain(`${r}:${s}`,n):i.setDefaultChain(s,n)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const n=this.client.pairing.getAll();if(nf(n)){for(const r of n)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${n.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,n;if(this.client=this.providerOpts.client||await vBe.init({core:this.providerOpts.core,logger:this.providerOpts.logger||n9,relayUrl:this.providerOpts.relayUrl||EBe,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${(n=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:n.topic} doesn't exist in the Sign client`)}else{const r=this.client.session.getAll();this.session=r[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(n=>Ry(n)))];xO("client",this.client),xO("events",this.events),xO("disableProviderPing",this.disableProviderPing),e.forEach(n=>{if(!this.session)return;const r=s$e(n,this.session),s=pX(r),i=TA(this.namespaces,this.optionalNamespaces),o=IO(RA({},i[n]),{accounts:r,chains:s});switch(n){case"eip155":this.rpcProviders[n]=new f$e({namespace:o});break;case"algorand":this.rpcProviders[n]=new C$e({namespace:o});break;case"solana":this.rpcProviders[n]=new m$e({namespace:o});break;case"cosmos":this.rpcProviders[n]=new b$e({namespace:o});break;case"polkadot":this.rpcProviders[n]=new a$e({namespace:o});break;case"cip34":this.rpcProviders[n]=new S$e({namespace:o});break;case"elrond":this.rpcProviders[n]=new N$e({namespace:o});break;case"multiversx":this.rpcProviders[n]=new P$e({namespace:o});break;case"near":this.rpcProviders[n]=new D$e({namespace:o});break;case"tezos":this.rpcProviders[n]=new U$e({namespace:o});break;default:this.rpcProviders[ly]?this.rpcProviders[ly].updateNamespace(o):this.rpcProviders[ly]=new F$e({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var n;const{topic:r}=e;r===((n=this.session)==null?void 0:n.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var n;const{params:r,topic:s}=e;if(s!==((n=this.session)==null?void 0:n.topic))return;const{event:i}=r;if(i.name==="accountsChanged"){const o=i.data;o&&nf(o)&&this.events.emit("accountsChanged",o.map(l9))}else if(i.name==="chainChanged"){const o=r.chainId,a=r.event.data,c=Ry(o),l=SO(o)!==SO(a)?`${c}:${SO(a)}`:o;this.onChainChanged(l)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:n})=>{var r,s;if(e!==((r=this.session)==null?void 0:r.topic))return;const{namespaces:i}=n,o=(s=this.client)==null?void 0:s.session.get(e);this.session=IO(RA({},o),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:n})}),this.client.on("session_delete",async e=>{var n;e.topic===((n=this.session)==null?void 0:n.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",IO(RA({},$n("USER_DISCONNECTED")),{data:e.topic})))}),this.on(za.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[ly]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var n;this.getProvider(e).updateNamespace((n=this.session)==null?void 0:n.namespaces[e])})}setNamespaces(e){const{namespaces:n={},optionalNamespaces:r={},sessionProperties:s,scopedProperties:i}=e;this.optionalNamespaces=TA(n,r),this.sessionProperties=s,this.scopedProperties=i}validateChain(e){const[n,r]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[n,r];if(n&&!Object.keys(this.namespaces||{}).map(o=>Ry(o)).includes(n))throw new Error(`Namespace '${n}' is not configured. Please call connect() first with namespace config.`);if(n&&r)return[n,r];const s=Ry(Object.keys(this.namespaces)[0]),i=this.rpcProviders[s].getDefaultChain();return[s,i]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,n=!1){if(!this.namespaces)return;const[r,s]=this.validateChain(e);if(!s)return;this.updateNamespaceChain(r,s),this.events.emit("chainChanged",s);const i=this.getProvider(r).getDefaultChain();n||this.getProvider(r).setDefaultChain(s),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:n,newChainId:r}){var s,i;try{if(n===r)return;const o=(i=(s=this.session)==null?void 0:s.namespaces[e])==null?void 0:i.accounts;if(!o)return;const a=o.filter(c=>c.includes(`${r}:`)).map(l9);if(!nf(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn("Failed to emit accountsChanged on chain change",o)}}updateNamespaceChain(e,n){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${n}`,s={chains:[],methods:[],events:[],defaultChain:n};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=n):this.namespaces[r]=s}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,n){var r;const s=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.setItem(`${IA}/${e}${s}`,n)}async getFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";return await this.client.core.storage.getItem(`${IA}/${e}${r}`)}async deleteFromStore(e){var n;const r=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.removeItem(`${IA}/${e}${r}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const n=await this.client.core.storage.getKeys();for(const r of n)r.startsWith(IA)&&await this.client.core.storage.removeItem(r)}catch(n){this.logger.warn("Failed to cleanup storage",n)}}};var g9={};const V$e={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:(typeof process<"u"&&typeof g9<"u"?g9.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}},A3={filterOutDuplicatesByRDNS(t){const e=we.state.enableEIP6963?$e.state.connectors:[],n=Ke.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&ot.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!i.includes(String(a==null?void 0:a.rdns)))},filterOutDuplicatesByIds(t){const e=$e.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ke.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=$e.state,{featuredWalletIds:n}=we.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=we.state.features)==null?void 0:c.connectMethodsOrder),r=e||$e.state.connectors;if(n)return n;const{injected:s,announced:i}=xS.getConnectorsByType(r,at.state.recommended,at.state.featured),o=s.filter(xS.showConnector),a=i.filter(xS.showConnector);return o.length||a.length?["wallet","email","social"]:V$e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&at.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&at.state.excludedWallets.some(r=>pT.isLowerCaseMatch(r.name,t.name));return e||n}},xS={getConnectorsByType(t,e,n){const{customWallets:r}=we.state,s=Ke.getRecentWallets(),i=A3.filterOutDuplicateWallets(e),o=A3.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&at.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&at.state.excludedWallets.some(i=>pT.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!ot.isMobile()||ot.isMobile()&&!e&&!yt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(z.state.chains.values()).some(n=>$e.getConnectorId(n.namespace)===Fe.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=we.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const u=xS.getIsConnectedWithWC(),f=[{type:"walletConnect",isEnabled:we.state.enableWalletConnect&&!u},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(m=>m.isEnabled),p=new Set(f.map(m=>m.type)),g=c.filter(m=>p.has(m)).map(m=>({type:m,isEnabled:!0})),w=f.filter(({type:m})=>!g.some(({type:v})=>v===m));return Array.from(new Set([...g,...w].map(({type:m})=>m)))}};/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const IS=globalThis,kU=IS.ShadowRoot&&(IS.ShadyCSS===void 0||IS.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,DU=Symbol(),m9=new WeakMap;let yX=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==DU)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(kU&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=m9.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&m9.set(n,e))}return e}toString(){return this.cssText}};const da=t=>new yX(typeof t=="string"?t:t+"",void 0,DU),Qu=(t,...e)=>{const n=t.length===1?t[0]:e.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+t[i+1],t[0]);return new yX(n,t,DU)},K$e=(t,e)=>{if(kU)t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet);else for(const n of e){const r=document.createElement("style"),s=IS.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,t.appendChild(r)}},y9=kU?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return da(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Y$e,defineProperty:Q$e,getOwnPropertyDescriptor:J$e,getOwnPropertyNames:Z$e,getOwnPropertySymbols:X$e,getPrototypeOf:e6e}=Object,sf=globalThis,w9=sf.trustedTypes,t6e=w9?w9.emptyScript:"",NO=sf.reactiveElementPolyfillSupport,gE=(t,e)=>t,S3={toAttribute(t,e){switch(e){case Boolean:t=t?t6e:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},wX=(t,e)=>!Y$e(t,e),b9={attribute:!0,type:String,converter:S3,reflect:!1,useDefault:!1,hasChanged:wX};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),sf.litPropertyMetadata??(sf.litPropertyMetadata=new WeakMap);let uy=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??(this.l=[])).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,n=b9){if(n.state&&(n.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((n=Object.create(n)).wrapped=!0),this.elementProperties.set(e,n),!n.noAccessor){const r=Symbol(),s=this.getPropertyDescriptor(e,r,n);s!==void 0&&Q$e(this.prototype,e,s)}}static getPropertyDescriptor(e,n,r){const{get:s,set:i}=J$e(this.prototype,e)??{get(){return this[n]},set(o){this[n]=o}};return{get:s,set(o){const a=s==null?void 0:s.call(this);i==null||i.call(this,o),this.requestUpdate(e,a,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??b9}static _$Ei(){if(this.hasOwnProperty(gE("elementProperties")))return;const e=e6e(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(gE("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(gE("properties"))){const n=this.properties,r=[...Z$e(n),...X$e(n)];for(const s of r)this.createProperty(s,n[s])}const e=this[Symbol.metadata];if(e!==null){const n=litPropertyMetadata.get(e);if(n!==void 0)for(const[r,s]of n)this.elementProperties.set(r,s)}this._$Eh=new Map;for(const[n,r]of this.elementProperties){const s=this._$Eu(n,r);s!==void 0&&this._$Eh.set(s,n)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const s of r)n.unshift(y9(s))}else e!==void 0&&n.push(y9(e));return n}static _$Eu(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){var e;this._$ES=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$E_(),this.requestUpdate(),(e=this.constructor.l)==null||e.forEach(n=>n(this))}addController(e){var n;(this._$EO??(this._$EO=new Set)).add(e),this.renderRoot!==void 0&&this.isConnected&&((n=e.hostConnected)==null||n.call(e))}removeController(e){var n;(n=this._$EO)==null||n.delete(e)}_$E_(){const e=new Map,n=this.constructor.elementProperties;for(const r of n.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return K$e(e,this.constructor.elementStyles),e}connectedCallback(){var e;this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostConnected)==null?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$EO)==null||e.forEach(n=>{var r;return(r=n.hostDisconnected)==null?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$ET(e,n){var i;const r=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,r);if(s!==void 0&&r.reflect===!0){const o=(((i=r.converter)==null?void 0:i.toAttribute)!==void 0?r.converter:S3).toAttribute(n,r.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,n){var i,o;const r=this.constructor,s=r._$Eh.get(e);if(s!==void 0&&this._$Em!==s){const a=r.getPropertyOptions(s),c=typeof a.converter=="function"?{fromAttribute:a.converter}:((i=a.converter)==null?void 0:i.fromAttribute)!==void 0?a.converter:S3;this._$Em=s;const l=c.fromAttribute(n,a.type);this[s]=l??((o=this._$Ej)==null?void 0:o.get(s))??l,this._$Em=null}}requestUpdate(e,n,r){var s;if(e!==void 0){const i=this.constructor,o=this[e];if(r??(r=i.getPropertyOptions(e)),!((r.hasChanged??wX)(o,n)||r.useDefault&&r.reflect&&o===((s=this._$Ej)==null?void 0:s.get(e))&&!this.hasAttribute(i._$Eu(e,r))))return;this.C(e,n,r)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,n,{useDefault:r,reflect:s,wrapped:i},o){r&&!(this._$Ej??(this._$Ej=new Map)).has(e)&&(this._$Ej.set(e,o??n??this[e]),i!==!0||o!==void 0)||(this._$AL.has(e)||(this.hasUpdated||r||(n=void 0),this._$AL.set(e,n)),s===!0&&this._$Em!==e&&(this._$Eq??(this._$Eq=new Set)).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var r;if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??(this.renderRoot=this.createRenderRoot()),this._$Ep){for(const[i,o]of this._$Ep)this[i]=o;this._$Ep=void 0}const s=this.constructor.elementProperties;if(s.size>0)for(const[i,o]of s){const{wrapped:a}=o,c=this[i];a!==!0||this._$AL.has(i)||c===void 0||this.C(i,void 0,o,c)}}let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),(r=this._$EO)==null||r.forEach(s=>{var i;return(i=s.hostUpdate)==null?void 0:i.call(s)}),this.update(n)):this._$EM()}catch(s){throw e=!1,this._$EM(),s}e&&this._$AE(n)}willUpdate(e){}_$AE(e){var n;(n=this._$EO)==null||n.forEach(r=>{var s;return(s=r.hostUpdated)==null?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&(this._$Eq=this._$Eq.forEach(n=>this._$ET(n,this[n]))),this._$EM()}updated(e){}firstUpdated(e){}};uy.elementStyles=[],uy.shadowRootOptions={mode:"open"},uy[gE("elementProperties")]=new Map,uy[gE("finalized")]=new Map,NO==null||NO({ReactiveElement:uy}),(sf.reactiveElementVersions??(sf.reactiveElementVersions=[])).push("2.1.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mE=globalThis,fI=mE.trustedTypes,v9=fI?fI.createPolicy("lit-html",{createHTML:t=>t}):void 0,bX="$lit$",rh=`lit$${Math.random().toFixed(9).slice(2)}$`,vX="?"+rh,n6e=`<${vX}>`,zg=document,jC=()=>zg.createComment(""),WC=t=>t===null||typeof t!="object"&&typeof t!="function",MU=Array.isArray,r6e=t=>MU(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",TO=`[ 	
\f\r]`,uv=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,E9=/-->/g,C9=/>/g,qf=RegExp(`>|${TO}(?:([^\\s"'>=/]+)(${TO}*=${TO}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),_9=/'/g,A9=/"/g,EX=/^(?:script|style|textarea|title)$/i,CX=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),VVe=CX(1),KVe=CX(2),Dw=Symbol.for("lit-noChange"),ps=Symbol.for("lit-nothing"),S9=new WeakMap,Tp=zg.createTreeWalker(zg,129);function _X(t,e){if(!MU(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return v9!==void 0?v9.createHTML(e):e}const s6e=(t,e)=>{const n=t.length-1,r=[];let s,i=e===2?"<svg>":e===3?"<math>":"",o=uv;for(let a=0;a<n;a++){const c=t[a];let l,u,d=-1,h=0;for(;h<c.length&&(o.lastIndex=h,u=o.exec(c),u!==null);)h=o.lastIndex,o===uv?u[1]==="!--"?o=E9:u[1]!==void 0?o=C9:u[2]!==void 0?(EX.test(u[2])&&(s=RegExp("</"+u[2],"g")),o=qf):u[3]!==void 0&&(o=qf):o===qf?u[0]===">"?(o=s??uv,d=-1):u[1]===void 0?d=-2:(d=o.lastIndex-u[2].length,l=u[1],o=u[3]===void 0?qf:u[3]==='"'?A9:_9):o===A9||o===_9?o=qf:o===E9||o===C9?o=uv:(o=qf,s=void 0);const f=o===qf&&t[a+1].startsWith("/>")?" ":"";i+=o===uv?c+n6e:d>=0?(r.push(l),c.slice(0,d)+bX+c.slice(d)+rh+f):c+rh+(d===-2?a:f)}return[_X(t,i+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),r]};class zC{constructor({strings:e,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=e.length-1,c=this.parts,[l,u]=s6e(e,n);if(this.el=zC.createElement(l,r),Tp.currentNode=this.el.content,n===2||n===3){const d=this.el.content.firstChild;d.replaceWith(...d.childNodes)}for(;(s=Tp.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes())for(const d of s.getAttributeNames())if(d.endsWith(bX)){const h=u[o++],f=s.getAttribute(d).split(rh),p=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:p[2],strings:f,ctor:p[1]==="."?o6e:p[1]==="?"?a6e:p[1]==="@"?c6e:xT}),s.removeAttribute(d)}else d.startsWith(rh)&&(c.push({type:6,index:i}),s.removeAttribute(d));if(EX.test(s.tagName)){const d=s.textContent.split(rh),h=d.length-1;if(h>0){s.textContent=fI?fI.emptyScript:"";for(let f=0;f<h;f++)s.append(d[f],jC()),Tp.nextNode(),c.push({type:2,index:++i});s.append(d[h],jC())}}}else if(s.nodeType===8)if(s.data===vX)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(rh,d+1))!==-1;)c.push({type:7,index:i}),d+=rh.length-1}i++}}static createElement(e,n){const r=zg.createElement("template");return r.innerHTML=e,r}}function Mw(t,e,n=t,r){var o,a;if(e===Dw)return e;let s=r!==void 0?(o=n._$Co)==null?void 0:o[r]:n._$Cl;const i=WC(e)?void 0:e._$litDirective$;return(s==null?void 0:s.constructor)!==i&&((a=s==null?void 0:s._$AO)==null||a.call(s,!1),i===void 0?s=void 0:(s=new i(t),s._$AT(t,n,r)),r!==void 0?(n._$Co??(n._$Co=[]))[r]=s:n._$Cl=s),s!==void 0&&(e=Mw(t,s._$AS(t,e.values),s,r)),e}class i6e{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:r}=this._$AD,s=((e==null?void 0:e.creationScope)??zg).importNode(n,!0);Tp.currentNode=s;let i=Tp.nextNode(),o=0,a=0,c=r[0];for(;c!==void 0;){if(o===c.index){let l;c.type===2?l=new u1(i,i.nextSibling,this,e):c.type===1?l=new c.ctor(i,c.name,c.strings,this,e):c.type===6&&(l=new l6e(i,this,e)),this._$AV.push(l),c=r[++a]}o!==(c==null?void 0:c.index)&&(i=Tp.nextNode(),o++)}return Tp.currentNode=zg,s}p(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class u1{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,r,s){this.type=2,this._$AH=ps,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=s,this._$Cv=(s==null?void 0:s.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=Mw(this,e,n),WC(e)?e===ps||e==null||e===""?(this._$AH!==ps&&this._$AR(),this._$AH=ps):e!==this._$AH&&e!==Dw&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):r6e(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ps&&WC(this._$AH)?this._$AA.nextSibling.data=e:this.T(zg.createTextNode(e)),this._$AH=e}$(e){var i;const{values:n,_$litType$:r}=e,s=typeof r=="number"?this._$AC(e):(r.el===void 0&&(r.el=zC.createElement(_X(r.h,r.h[0]),this.options)),r);if(((i=this._$AH)==null?void 0:i._$AD)===s)this._$AH.p(n);else{const o=new i6e(s,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=S9.get(e.strings);return n===void 0&&S9.set(e.strings,n=new zC(e)),n}k(e){MU(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of e)s===n.length?n.push(r=new u1(this.O(jC()),this.O(jC()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)==null?void 0:r.call(this,!1,!0,n);e!==this._$AB;){const s=e.nextSibling;e.remove(),e=s}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}}class xT{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,r,s,i){this.type=1,this._$AH=ps,this._$AN=void 0,this.element=e,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=ps}_$AI(e,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)e=Mw(this,e,n,0),o=!WC(e)||e!==this._$AH&&e!==Dw,o&&(this._$AH=e);else{const a=e;let c,l;for(e=i[0],c=0;c<i.length-1;c++)l=Mw(this,a[r+c],n,c),l===Dw&&(l=this._$AH[c]),o||(o=!WC(l)||l!==this._$AH[c]),l===ps?e=ps:e!==ps&&(e+=(l??"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.j(e)}j(e){e===ps?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class o6e extends xT{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ps?void 0:e}}class a6e extends xT{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ps)}}class c6e extends xT{constructor(e,n,r,s,i){super(e,n,r,s,i),this.type=5}_$AI(e,n=this){if((e=Mw(this,e,n,0)??ps)===Dw)return;const r=this._$AH,s=e===ps&&r!==ps||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==ps&&(r===ps||s);s&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}}class l6e{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){Mw(this,e)}}const RO=mE.litHtmlPolyfillSupport;RO==null||RO(zC,u1),(mE.litHtmlVersions??(mE.litHtmlVersions=[])).push("3.3.1");const u6e=(t,e,n)=>{const r=(n==null?void 0:n.renderBefore)??e;let s=r._$litPart$;if(s===void 0){const i=(n==null?void 0:n.renderBefore)??null;r._$litPart$=s=new u1(e.insertBefore(jC(),i),i,void 0,n??{})}return s._$AI(t),s};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const pg=globalThis;let NS=class extends uy{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var n;const e=super.createRenderRoot();return(n=this.renderOptions).renderBefore??(n.renderBefore=e.firstChild),e}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=u6e(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)==null||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)==null||e.setConnected(!1)}render(){return Dw}};var PW;NS._$litElement$=!0,NS.finalized=!0,(PW=pg.litElementHydrateSupport)==null||PW.call(pg,{LitElement:NS});const PO=pg.litElementPolyfillSupport;PO==null||PO({LitElement:NS});(pg.litElementVersions??(pg.litElementVersions=[])).push("4.2.1");let yE,of,af;function QVe(t,e){yE=document.createElement("style"),of=document.createElement("style"),af=document.createElement("style"),yE.textContent=Qy(t).core.cssText,of.textContent=Qy(t).dark.cssText,af.textContent=Qy(t).light.cssText,document.head.appendChild(yE),document.head.appendChild(of),document.head.appendChild(af),AX(e)}function AX(t){of&&af&&(t==="light"?(of.removeAttribute("media"),af.media="enabled"):(af.removeAttribute("media"),of.media="enabled"))}function d6e(t){yE&&of&&af&&(yE.textContent=Qy(t).core.cssText,of.textContent=Qy(t).dark.cssText,af.textContent=Qy(t).light.cssText)}function Qy(t){return{core:Qu`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${da(t!=null&&t["--w3m-color-mix-strength"]?`${t["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${da((t==null?void 0:t["--w3m-font-family"])||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${da((t==null?void 0:t["--w3m-font-size-master"])||"10px")};
        --w3m-border-radius-master: ${da((t==null?void 0:t["--w3m-border-radius-master"])||"4px")};
        --w3m-z-index: ${da((t==null?void 0:t["--w3m-z-index"])||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:Qu`
      :root {
        --w3m-color-mix: ${da((t==null?void 0:t["--w3m-color-mix"])||"#fff")};
        --w3m-accent: ${da(ju(t,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${da(ju(t,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:Qu`
      :root {
        --w3m-color-mix: ${da((t==null?void 0:t["--w3m-color-mix"])||"#000")};
        --w3m-accent: ${da(ju(t,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${da(ju(t,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const JVe=Qu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,ZVe=Qu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,XVe=Qu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`,Nv={ERROR_CODE_UNRECOGNIZED_CHAIN_ID:4902,ERROR_CODE_DEFAULT:5e3,ERROR_INVALID_CHAIN_ID:32603,DEFAULT_ALLOWED_ANCESTORS:["http://localhost:*","https://*.pages.dev","https://*.vercel.app","https://*.ngrok-free.app","https://secure-mobile.walletconnect.com","https://secure-mobile.walletconnect.org"]},pI=HY({id:42161,name:"Arbitrum One",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://arb1.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://arbiscan.io",apiUrl:"https://api.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:7654707}}}),gI=HY({id:1,name:"Ethereum",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://eth.merkle.io"]}},blockExplorers:{default:{name:"Etherscan",url:"https://etherscan.io",apiUrl:"https://api.etherscan.io/api"}},contracts:{ensRegistry:{address:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},ensUniversalResolver:{address:"0xce01f8eee7E479C928F8919abD53E553a36CeF67",blockCreated:19258213},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:14353601}}});function d1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const mI=d1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),yI=d1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),SX=d1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});d1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});d1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const h6e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},TS={getMethodsByChainNamespace(t){return h6e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case mI.caipNetworkId:u.chains.push(mI.deprecatedCaipNetworkId);break;case yI.caipNetworkId:u.chains.push(yI.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await cE.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1}};let xX=class{constructor({provider:e,namespace:n}){this.id=Fe.CONNECTOR_ID.WALLET_CONNECT,this.name=Jx.ConnectorNamesMap[Fe.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Jx.ConnectorImageIds[Fe.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=z.getCaipNetworks.bind(z),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=we.state.universalProviderConfigOverride,s=TS.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return dE.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:f6e})}};const f6e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];let p6e=class{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=n=>z.getCaipNetworks(n),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:Fe.CONNECTOR_ID.AUTH,type:"AUTH",name:Fe.CONNECTOR_NAMES.AUTH,provider:e,imageId:Jx.ConnectorImageIds[Fe.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}setStatus(e,n){Ve.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){var i;const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const o=s,a=(i=Ve.state.preferredAccountTypes)==null?void 0:i[n.chainNamespace];await o.switchNetwork(n.caipNetworkId);const c=await o.getUser({chainId:n.caipNetworkId,preferredAccountType:a});this.emit("switchNetwork",c)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof xX);if(!e)throw new Error("WalletConnectConnector not found");return e}};class g6e extends p6e{setUniversalProvider(e){this.addConnector(new xX({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{await this.getWalletConnectConnector().disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){var s,i,o,a;const n=this.provider,r=((a=(o=(i=(s=n==null?void 0:n.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const[,,l]=c.split(":");return l}).filter((c,l,u)=>u.indexOf(c)===l))||[];return Promise.resolve({accounts:r.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa"))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){var i,o,a,c,l;if(!(e.caipNetwork&&Fn.BALANCE_SUPPORTED_CHAINS.includes((i=e.caipNetwork)==null?void 0:i.chainNamespace))||(o=e.caipNetwork)!=null&&o.testnet)return{balance:"0.00",symbol:((a=e.caipNetwork)==null?void 0:a.nativeCurrency.symbol)||""};if(Ve.state.balanceLoading&&e.chainId===((c=z.state.activeCaipNetwork)==null?void 0:c.id))return{balance:Ve.state.balance||"0.00",symbol:Ve.state.balanceSymbol||""};const s=(await Ve.fetchTokenBalance()).find(u=>{var d,h;return u.chainId===`${(d=e.caipNetwork)==null?void 0:d.chainNamespace}:${e.chainId}`&&u.symbol===((h=e.caipNetwork)==null?void 0:h.nativeCurrency.symbol)});return{balance:(s==null?void 0:s.quantity.numeric)||"0.00",symbol:(s==null?void 0:s.symbol)||((l=e.caipNetwork)==null?void 0:l.nativeCurrency.symbol)||""}}async signMessage(e){var o,a,c;const{provider:n,message:r,address:s}=e;if(!n)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return((o=z.state.activeCaipNetwork)==null?void 0:o.chainNamespace)===Fe.CHAIN.SOLANA?i=(await n.request({method:"solana_signMessage",params:{message:EJ.encode(new TextEncoder().encode(r)),pubkey:s}},(a=z.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)).signature:i=await n.request({method:"personal_sign",params:[r,s]},(c=z.state.activeCaipNetwork)==null?void 0:c.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){var s,i,o,a,c,l;const{caipNetwork:n}=e,r=this.getWalletConnectConnector();if(n.chainNamespace===Fe.CHAIN.EVM)try{await((s=r.provider)==null?void 0:s.request({method:"wallet_switchEthereumChain",params:[{chainId:Da(n.id)}]}))}catch(u){if(u.code===Nv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID||u.code===Nv.ERROR_INVALID_CHAIN_ID||u.code===Nv.ERROR_CODE_DEFAULT||((o=(i=u==null?void 0:u.data)==null?void 0:i.originalError)==null?void 0:o.code)===Nv.ERROR_CODE_UNRECOGNIZED_CHAIN_ID)try{await((l=r.provider)==null?void 0:l.request({method:"wallet_addEthereumChain",params:[{chainId:Da(n.id),rpcUrls:[(a=n==null?void 0:n.rpcUrls.chainDefault)==null?void 0:a.http],chainName:n.name,nativeCurrency:n.nativeCurrency,blockExplorerUrls:[(c=n.blockExplorers)==null?void 0:c.default.url]}]}))}catch{throw new Error("Chain is not supported")}}r.provider.setDefaultChain(n.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find(r=>r.type==="WALLET_CONNECT");return e==null?void 0:e.provider}}const m6e=["email","socials","swaps","onramp","activity","reownBranding"],PA={email:{apiFeatureName:"social_login",localFeatureName:"email",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return!!t.isEnabled&&e.includes("email")},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.email:!!t},socials:{apiFeatureName:"social_login",localFeatureName:"socials",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e.filter(n=>n!=="email"):!1},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.socials:typeof t=="boolean"?t?Fn.DEFAULT_REMOTE_FEATURES.socials:!1:t},swaps:{apiFeatureName:"swap",localFeatureName:"swaps",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.swaps:typeof t=="boolean"?t?Fn.DEFAULT_REMOTE_FEATURES.swaps:!1:t},onramp:{apiFeatureName:"onramp",localFeatureName:"onramp",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>{if(!(t!=null&&t.config))return!1;const e=t.config;return t.isEnabled&&e.length>0?e:!1},processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.onramp:typeof t=="boolean"?t?Fn.DEFAULT_REMOTE_FEATURES.onramp:!1:t},activity:{apiFeatureName:"activity",localFeatureName:"history",returnType:!1,isLegacy:!0,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.activity:!!t},reownBranding:{apiFeatureName:"reown_branding",localFeatureName:"reownBranding",returnType:!1,isLegacy:!1,isAvailableOnBasic:!1,processApi:t=>!!t.isEnabled,processFallback:t=>t===void 0?Fn.DEFAULT_REMOTE_FEATURES.reownBranding:!!t}},y6e={localSettingsOverridden:new Set,getApiConfig(t,e){return e==null?void 0:e.find(n=>n.id===t)},addWarning(t,e){if(t!==void 0){const n=PA[e],r=n.isLegacy?`"features.${n.localFeatureName}" (now "${e}")`:`"features.${e}"`;this.localSettingsOverridden.add(r)}},processFeature(t,e,n,r,s){const i=PA[t],o=e[i.localFeatureName];if(s&&!i.isAvailableOnBasic)return!1;if(r){const a=this.getApiConfig(i.apiFeatureName,n);return(a==null?void 0:a.config)===null?this.processFallbackFeature(t,o):a!=null&&a.config?(o!==void 0&&this.addWarning(o,t),this.processApiFeature(t,a)):!1}return this.processFallbackFeature(t,o)},processApiFeature(t,e){return PA[t].processApi(e)},processFallbackFeature(t,e){return PA[t].processFallback(e)},async fetchRemoteFeatures(t){const e=t.basic??!1,n=t.features||{};this.localSettingsOverridden.clear();let r=null,s=!1;try{r=await at.fetchProjectConfig(),s=r!=null}catch(o){console.warn("[Reown Config] Failed to fetch remote project configuration. Using local/default values.",o)}const i=s&&!e?Fn.DEFAULT_REMOTE_FEATURES:Fn.DEFAULT_REMOTE_FEATURES_DISABLED;try{for(const o of m6e){const a=this.processFeature(o,n,r,s,e);Object.assign(i,{[o]:a})}}catch(o){return console.warn("[Reown Config] Failed to process the configuration from Cloud. Using default values.",o),Fn.DEFAULT_REMOTE_FEATURES}if(s&&this.localSettingsOverridden.size>0){const o=`Your local configuration for ${Array.from(this.localSettingsOverridden).join(", ")} was ignored because a remote configuration was successfully fetched. Please manage these features via your project dashboard on dashboard.reown.com.`;Al.open({shortMessage:"Local configuration ignored",longMessage:`[Reown Config Notice] ${o}`},"warning")}return i}};class w6e{constructor(e){this.chainNamespaces=[],this.remoteFeatures={},this.reportedAlertErrors={},this.getCaipNetwork=(n,r)=>{var s,i,o,a;if(n){const c=(i=(s=z.getNetworkData(n))==null?void 0:s.requestedCaipNetworks)==null?void 0:i.find(d=>d.id===r);if(c)return c;const l=(o=z.getNetworkData(n))==null?void 0:o.caipNetwork;return l||((a=z.getRequestedCaipNetworks(n).filter(d=>d.chainNamespace===n))==null?void 0:a[0])}return z.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const n=this.getCaipNetwork();if(n)return n.id},this.getCaipNetworks=n=>z.getCaipNetworks(n),this.getActiveChainNamespace=()=>z.state.activeChain,this.setRequestedCaipNetworks=(n,r)=>{z.setRequestedCaipNetworks(n,r)},this.getApprovedCaipNetworkIds=()=>z.getAllApprovedCaipNetworkIds(),this.getCaipAddress=n=>z.state.activeChain===n||!n?z.state.activeCaipAddress:z.getAccountProp("caipAddress",n),this.setClientId=n=>{mt.setClientId(n)},this.getProvider=n=>Bn.getProvider(n),this.getProviderType=n=>Bn.getProviderId(n),this.getPreferredAccountType=n=>{var r;return(r=Ve.state.preferredAccountTypes)==null?void 0:r[n]},this.setCaipAddress=(n,r)=>{Ve.setCaipAddress(n,r),n&&we.state.enableEmbedded&&this.close()},this.setBalance=(n,r,s)=>{Ve.setBalance(n,r,s)},this.setProfileName=(n,r)=>{Ve.setProfileName(n,r)},this.setProfileImage=(n,r)=>{Ve.setProfileImage(n,r)},this.setUser=(n,r)=>{Ve.setUser(n,r)},this.resetAccount=n=>{Ve.resetAccount(n)},this.setCaipNetwork=n=>{z.setActiveCaipNetwork(n)},this.setCaipNetworkOfNamespace=(n,r)=>{z.setChainNetworkData(r,{caipNetwork:n})},this.setAllAccounts=(n,r)=>{Ve.setAllAccounts(n,r),we.setHasMultipleAddresses((n==null?void 0:n.length)>1)},this.setStatus=(n,r)=>{Ve.setStatus(n,r),$e.isConnected()?Ke.setConnectionStatus("connected"):Ke.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=n=>z.getAccountProp("address",n),this.setConnectors=n=>{const r=[...$e.state.allConnectors,...n];$e.setConnectors(r)},this.setConnections=(n,r)=>{yt.setConnections(n,r)},this.fetchIdentity=n=>mt.fetchIdentity(n),this.getReownName=n=>cE.getNamesForAddress(n),this.getConnectors=()=>$e.getConnectors(),this.getConnectorImage=n=>QV.getConnectorImage(n),this.setConnectedWalletInfo=(n,r)=>{const s=Bn.getProviderId(r),i=n?{...n,type:s}:void 0;Ve.setConnectedWalletInfo(i,r)},this.getIsConnectedState=()=>!!z.state.activeCaipAddress,this.addAddressLabel=(n,r,s)=>{Ve.addAddressLabel(n,r,s)},this.removeAddressLabel=(n,r)=>{Ve.removeAddressLabel(n,r)},this.getAddress=n=>z.state.activeChain===n||!n?Ve.state.address:z.getAccountProp("address",n),this.setApprovedCaipNetworksData=n=>z.setApprovedCaipNetworksData(n),this.resetNetwork=n=>{z.resetNetwork(n)},this.addConnector=n=>{$e.addConnector(n)},this.resetWcConnection=()=>{yt.resetWcConnection()},this.setAddressExplorerUrl=(n,r)=>{Ve.setAddressExplorerUrl(n,r)},this.setSmartAccountDeployed=(n,r)=>{Ve.setSmartAccountDeployed(n,r)},this.setSmartAccountEnabledNetworks=(n,r)=>{z.setSmartAccountEnabledNetworks(n,r)},this.setPreferredAccountType=(n,r)=>{Ve.setPreferredAccountType(n,r)},this.setEIP6963Enabled=n=>{we.setEIP6963Enabled(n)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.readyPromise=this.initialize(e)}getChainNamespacesSet(e,n){const r=e==null?void 0:e.map(i=>i.namespace).filter(i=>!!i);if(r!=null&&r.length)return[...new Set(r)];const s=n==null?void 0:n.map(i=>i.chainNamespace);return[...new Set(s)]}async initialize(e){var n,r,s;this.initializeProjectSettings(e),this.initControllers(e),await this.initChainAdapters(),this.sendInitializeEvent(e),await this.syncExistingConnection(),this.remoteFeatures=await y6e.fetchRemoteFeatures(e),we.setRemoteFeatures(this.remoteFeatures),this.remoteFeatures.onramp&&ND.setOnrampProviders(this.remoteFeatures.onramp),((n=we.state.remoteFeatures)!=null&&n.email||Array.isArray((r=we.state.remoteFeatures)==null?void 0:r.socials)&&((s=we.state.remoteFeatures)==null?void 0:s.socials.length)>0)&&await this.checkAllowedOrigins()}async checkAllowedOrigins(){const e=await at.fetchAllowedOrigins();if(e&&ot.isClient()){const n=window.location.origin;TS.isOriginAllowed(n,e,Nv.DEFAULT_ALLOWED_ANCESTORS)||Al.open(yl.ALERT_ERRORS.INVALID_APP_CONFIGURATION,"error")}else Al.open(yl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error")}sendInitializeEvent(e){var r;const{...n}=e;delete n.adapters,delete n.universalProvider,hr.sendEvent({type:"track",event:"INITIALIZE",properties:{...n,networks:e.networks.map(s=>s.id),siweConfig:{options:((r=e.siweConfig)==null?void 0:r.options)||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&Yi.setThemeMode(e.themeMode),e.themeVariables&&Yi.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");z.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const n=this.getDefaultNetwork();n&&z.setActiveCaipNetwork(n)}initializeConnectionController(e){yt.setWcBasic(e.basic??!1)}initializeConnectorController(){$e.initialize(this.chainNamespaces)}initializeProjectSettings(e){we.setProjectId(e.projectId),we.setSdkVersion(e.sdkVersion)}initializeOptionsController(e){var o;we.setDebug(e.debug!==!1),we.setEnableWalletConnect(e.enableWalletConnect!==!1),we.setEnableWalletGuide(e.enableWalletGuide!==!1),we.setEnableWallets(e.enableWallets!==!1),we.setEIP6963Enabled(e.enableEIP6963!==!1),we.setEnableNetworkSwitch(e.enableNetworkSwitch!==!1),we.setEnableAuthLogger(e.enableAuthLogger!==!1),we.setCustomRpcUrls(e.customRpcUrls),we.setEnableEmbedded(e.enableEmbedded),we.setAllWallets(e.allWallets),we.setIncludeWalletIds(e.includeWalletIds),we.setExcludeWalletIds(e.excludeWalletIds),we.setFeaturedWalletIds(e.featuredWalletIds),we.setTokens(e.tokens),we.setTermsConditionsUrl(e.termsConditionsUrl),we.setPrivacyPolicyUrl(e.privacyPolicyUrl),we.setCustomWallets(e.customWallets),we.setFeatures(e.features),we.setAllowUnsupportedChain(e.allowUnsupportedChain),we.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),we.setPreferUniversalLinks(e.experimental_preferUniversalLinks),we.setDefaultAccountTypes(e.defaultAccountTypes);const n=Ke.getPreferredAccountTypes()||{},r={...we.state.defaultAccountTypes,...n};Ve.setPreferredAccountTypes(r);const s=this.getDefaultMetaData();if(!e.metadata&&s&&(e.metadata=s),we.setMetadata(e.metadata),we.setDisableAppend(e.disableAppend),we.setEnableEmbedded(e.enableEmbedded),we.setSIWX(e.siwx),!e.projectId){Al.open(yl.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");return}if(((o=e.adapters)==null?void 0:o.find(a=>a.namespace===Fe.CHAIN.EVM))&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");we.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){var e,n,r,s;return ot.isClient()?{name:((n=(e=document.getElementsByTagName("title"))==null?void 0:e[0])==null?void 0:n.textContent)||"",description:((r=document.querySelector('meta[property="og:description"]'))==null?void 0:r.content)||"",url:window.location.origin,icons:[((s=document.querySelector('link[rel~="icon"]'))==null?void 0:s.href)||""]}:null}setUnsupportedNetwork(e){const n=this.getActiveChainNamespace();if(n){const r=ay.getUnsupportedNetwork(`${n}:${e}`);z.setActiveCaipNetwork(r)}}getDefaultNetwork(){return ay.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,n){return ay.extendCaipNetwork(e,{customNetworkImageUrls:n.chainImages,projectId:n.projectId})}extendCaipNetworks(e){return ay.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const n=e.networks.find(s=>{var i;return s.id===((i=e.defaultNetwork)==null?void 0:i.id)});return n?ay.extendCaipNetwork(n,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}async disconnectNamespace(e){try{const n=this.getAdapter(e),r=Bn.getProvider(e),s=Bn.getProviderId(e),{caipAddress:i}=z.getAccountData(e)||{};this.setLoading(!0,e),i&&(n!=null&&n.disconnect)&&await n.disconnect({provider:r,providerType:s}),Ke.removeConnectedNamespace(e),Bn.resetChain(e),this.setUser(void 0,e),this.setStatus("disconnected",e),this.setConnectedWalletInfo(void 0,e),$e.removeConnectorId(e),z.resetAccount(e),z.resetNetwork(e),this.setLoading(!1,e)}catch(n){throw this.setLoading(!1,e),new Error(`Failed to disconnect chain ${e}: ${n.message}`)}}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{var i;const e=z.state.activeChain,n=this.getAdapter(e),r=(i=this.getCaipNetwork(e))==null?void 0:i.id;if(!n)throw new Error("Adapter not found");const s=await n.connectWalletConnect(r);this.close(),this.setClientId((s==null?void 0:s.clientId)||null),Ke.setConnectedNamespaces([...z.state.chains.keys()]),this.chainNamespaces.forEach(o=>{$e.setConnectorId(Qi.CONNECTOR_TYPE_WALLET_CONNECT,o)}),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:n,type:r,provider:s,chain:i,caipNetwork:o,socialUri:a})=>{var g,w,m,b,v,A;const c=z.state.activeChain,l=i||c,u=this.getAdapter(l);if(i&&i!==c&&!o){const C=this.getCaipNetworks().find(T=>T.chainNamespace===i);C&&this.setCaipNetwork(C)}if(!u)throw new Error("Adapter not found");const d=this.getCaipNetwork(l),h=await u.connect({id:e,info:n,type:r,provider:s,socialUri:a,chainId:(o==null?void 0:o.id)||(d==null?void 0:d.id),rpcUrl:((m=(w=(g=o==null?void 0:o.rpcUrls)==null?void 0:g.default)==null?void 0:w.http)==null?void 0:m[0])||((A=(v=(b=d==null?void 0:d.rpcUrls)==null?void 0:b.default)==null?void 0:v.http)==null?void 0:A[0])});if(!h)return;Ke.addConnectedNamespace(l),this.syncProvider({...h,chainNamespace:l});const f=Ve.state.allAccounts,{accounts:p}=(f==null?void 0:f.length)>0?{accounts:[...f]}:await u.getAccounts({namespace:l,id:e});this.setAllAccounts(p,l),this.setStatus("connected",l),this.syncConnectedWalletInfo(l)},reconnectExternal:async({id:e,info:n,type:r,provider:s})=>{var a;const i=z.state.activeChain,o=this.getAdapter(i);o!=null&&o.reconnect&&(await(o==null?void 0:o.reconnect({id:e,info:n,type:r,provider:s,chainId:(a=this.getCaipNetwork())==null?void 0:a.id})),Ke.addConnectedNamespace(i),this.syncConnectedWalletInfo(i))},disconnect:async e=>{const n=wTe(e);try{const r=await Promise.allSettled(n.map(async([i])=>this.disconnectNamespace(i)));bn.resetSend(),yt.resetWcConnection(),await dE.clearSessions(),$e.setFilterByNamespace(void 0);const s=r.filter(i=>i.status==="rejected");if(s.length>0)throw new Error(s.map(i=>i.reason.message).join(", "));Ke.deleteConnectedSocialProvider(),hr.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(r){throw new Error(`Failed to disconnect chains: ${r.message}`)}},checkInstalled:e=>e?e.some(n=>{var r;return!!((r=window.ethereum)!=null&&r[String(n)])}):!!window.ethereum,signMessage:async e=>{const n=this.getAdapter(z.state.activeChain),r=await(n==null?void 0:n.signMessage({message:e,address:Ve.state.address,provider:Bn.getProvider(z.state.activeChain)}));return(r==null?void 0:r.signature)||""},sendTransaction:async e=>{const n=e.chainNamespace;if(Fn.SEND_SUPPORTED_NAMESPACES.includes(n)){const r=this.getAdapter(z.state.activeChain),s=Bn.getProvider(n),i=await(r==null?void 0:r.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:s}));return(i==null?void 0:i.hash)||""}return""},estimateGas:async e=>{if(e.chainNamespace===Fe.CHAIN.EVM){const n=this.getAdapter(z.state.activeChain),r=Bn.getProvider(z.state.activeChain),s=this.getCaipNetwork();if(!s)throw new Error("CaipNetwork is undefined");const i=await(n==null?void 0:n.estimateGas({...e,provider:r,caipNetwork:s}));return(i==null?void 0:i.gas)||0n}return 0n},getEnsAvatar:async()=>{var e;return await this.syncIdentity({address:Ve.state.address,chainId:Number((e=this.getCaipNetwork())==null?void 0:e.id),chainNamespace:z.state.activeChain}),Ve.state.profileImage||!1},getEnsAddress:async e=>await TS.resolveReownName(e),writeContract:async e=>{const n=this.getAdapter(z.state.activeChain),r=this.getCaipNetwork(),s=this.getCaipAddress(),i=Bn.getProvider(z.state.activeChain);if(!r||!s)throw new Error("CaipNetwork or CaipAddress is undefined");const o=await(n==null?void 0:n.writeContract({...e,caipNetwork:r,provider:i,caipAddress:s}));return o==null?void 0:o.hash},parseUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.parseUnits({value:e,decimals:n}))??0n},formatUnits:(e,n)=>{const r=this.getAdapter(z.state.activeChain);return(r==null?void 0:r.formatUnits({value:e,decimals:n}))??"0"},getCapabilities:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.getCapabilities(e))},grantPermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.grantPermissions(e))},revokePermissions:async e=>{const n=this.getAdapter(z.state.activeChain);return n!=null&&n.revokePermissions?await n.revokePermissions(e):"0x"},walletGetAssets:async e=>{const n=this.getAdapter(z.state.activeChain);return await(n==null?void 0:n.walletGetAssets(e))??{}},updateBalance:e=>{const n=this.getCaipNetwork(e);!n||!Ve.state.address||this.updateNativeBalance(Ve.state.address,n==null?void 0:n.id,e)}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},yt.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){var n,r,s,i,o;if(Bn.getProviderId(z.state.activeChain)===Qi.CONNECTOR_TYPE_WALLET_CONNECT){const a=(r=(n=this.universalProvider)==null?void 0:n.session)==null?void 0:r.namespaces;return{supportsAllNetworks:((o=(i=(s=this.universalProvider)==null?void 0:s.session)==null?void 0:i.peer)==null?void 0:o.metadata.name)==="MetaMask Wallet",approvedCaipNetworkIds:this.getChainsFromNamespaces(a)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const n=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const s=Bn.getProvider(n),i=Bn.getProviderId(n);if(e.chainNamespace===z.state.activeChain){const o=this.getAdapter(n);await(o==null?void 0:o.switchNetwork({caipNetwork:e,provider:s,providerType:i}))}else if(this.setCaipNetwork(e),i===Qi.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const o=this.getAddressByChainNamespace(n);o&&this.syncAccount({address:o,chainId:e.id,chainNamespace:n})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap(n=>{const r=n.chains||[],s=n.accounts.map(i=>{const{chainId:o,chainNamespace:a}=Id.parseCaipAddress(i);return`${a}:${o}`});return Array.from(new Set([...r,...s]))})}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce((n,r)=>{var i;const s=e==null?void 0:e.find(o=>o.namespace===r);return s?(s.construct({namespace:r,projectId:(i=this.options)==null?void 0:i.projectId,networks:this.getCaipNetworks()}),n[r]=s):n[r]=new g6e({namespace:r,networks:this.getCaipNetworks()}),n},{})}async initChainAdapter(e){var n;this.onConnectors(e),this.listenAdapter(e),await((n=this.chainAdapters)==null?void 0:n[e].syncConnectors(this.options,this)),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map(async e=>{await this.initChainAdapter(e)}))}onConnectors(e){const n=this.getAdapter(e);n==null||n.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const n=this.getAdapter(e);if(!n)return;const r=Ke.getConnectionStatus();r==="connected"?this.setStatus("connecting",e):r==="disconnected"?(Ke.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),n.on("switchNetwork",({address:s,chainId:i})=>{const o=this.getCaipNetworks().find(l=>l.id===i||l.caipNetworkId===i),a=z.state.activeChain===e,c=z.getAccountProp("address",e);if(o){const l=a&&s?s:c;l&&this.syncAccount({address:l,chainId:o.id,chainNamespace:e})}else this.setUnsupportedNetwork(i)}),n.on("disconnect",this.disconnect.bind(this,e)),n.on("connections",s=>{this.setConnections(s,e)}),n.on("pendingTransactions",()=>{const s=Ve.state.address,i=z.state.activeCaipNetwork;!s||!(i!=null&&i.id)||this.updateNativeBalance(s,i.id,i.chainNamespace)}),n.on("accountChanged",({address:s,chainId:i})=>{var a,c;const o=z.state.activeChain===e;o&&i?this.syncAccount({address:s,chainId:i,chainNamespace:e}):o&&((a=z.state.activeCaipNetwork)!=null&&a.id)?this.syncAccount({address:s,chainId:(c=z.state.activeCaipNetwork)==null?void 0:c.id,chainNamespace:e}):this.syncAccountInfo(s,i,e),this.syncAllAccounts(e)})}async createUniversalProviderForAdapter(e){var n,r,s;await this.getUniversalProvider(),this.universalProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setUniversalProvider)==null||s.call(r,this.universalProvider))}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map(e=>this.syncNamespaceConnection(e)))}async syncNamespaceConnection(e){try{e===Fe.CHAIN.EVM&&ot.isSafeApp()&&$e.setConnectorId(Fe.CONNECTOR_ID.SAFE,e);const n=$e.getConnectorId(e);switch(this.setStatus("connecting",e),n){case Fe.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case Fe.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(n){console.warn("AppKit couldn't sync existing connection",n),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){var a,c,l;const n=this.getAdapter(e),r=$e.getConnectorId(e),s=this.getCaipNetwork(e),o=$e.getConnectors(e).find(u=>u.id===r);try{if(!n||!o)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!(s!=null&&s.id))throw new Error("CaipNetwork not found");const u=await(n==null?void 0:n.syncConnection({namespace:e,id:o.id,chainId:s.id,rpcUrl:(l=(c=(a=s==null?void 0:s.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0]}));if(u){const d=await(n==null?void 0:n.getAccounts({namespace:e,id:o.id}));d&&d.accounts.length>0?this.setAllAccounts(d.accounts,e):this.setAllAccounts([ot.createAccount(e,u.address,"eoa")],e),this.syncProvider({...u,chainNamespace:e}),await this.syncAccount({...u,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch{this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map(async n=>{var a,c,l,u,d;const r=this.getAdapter(n),s=((u=(l=(c=(a=this.universalProvider)==null?void 0:a.session)==null?void 0:c.namespaces)==null?void 0:l[n])==null?void 0:u.accounts)||[],i=(d=z.state.activeCaipNetwork)==null?void 0:d.id,o=s.find(h=>{const{chainId:f}=Id.parseCaipAddress(h);return f===(i==null?void 0:i.toString())})||s[0];if(o){const h=Id.validateCaipAddress(o),{chainId:f,address:p}=Id.parseCaipAddress(h);if(Bn.setProviderId(n,Qi.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&z.state.activeCaipNetwork&&(r==null?void 0:r.namespace)!==Fe.CHAIN.EVM){const g=r==null?void 0:r.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:z.state.activeCaipNetwork});Bn.setProvider(n,g)}else Bn.setProvider(n,this.universalProvider);$e.setConnectorId(Fe.CONNECTOR_ID.WALLET_CONNECT,n),Ke.addConnectedNamespace(n),this.syncWalletConnectAccounts(n),await this.syncAccount({address:p,chainId:f,chainNamespace:n})}else this.setStatus("disconnected",n);this.syncConnectedWalletInfo(n),await z.setApprovedCaipNetworksData(n)});await Promise.all(e)}syncWalletConnectAccounts(e){var r,s,i,o,a;const n=(a=(o=(i=(s=(r=this.universalProvider)==null?void 0:r.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>{const{address:l}=Id.parseCaipAddress(c);return l}).filter((c,l,u)=>u.indexOf(c)===l);n&&this.setAllAccounts(n.map(c=>ot.createAccount(e,c,e==="bip122"?"payment":"eoa")),e)}syncProvider({type:e,provider:n,id:r,chainNamespace:s}){Bn.setProviderId(s,e),Bn.setProvider(s,n),$e.setConnectorId(r,s)}async syncAllAccounts(e){const n=$e.getConnectorId(e);if(!n)return;const r=this.getAdapter(e),s=await(r==null?void 0:r.getAccounts({namespace:e,id:n}));s&&s.accounts.length>0&&this.setAllAccounts(s.accounts,e)}async syncAccount(e){var d,h;const n=e.chainNamespace===z.state.activeChain,r=z.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:s,chainId:i,chainNamespace:o}=e,{chainId:a}=Ke.getActiveNetworkProps(),c=i||a,l=((d=z.state.activeCaipNetwork)==null?void 0:d.name)===Fe.UNSUPPORTED_NETWORK_NAME,u=z.getNetworkProp("supportsAllNetworks",o);if(this.setStatus("connected",o),!(l&&!u)&&c){let f=this.getCaipNetworks().find(w=>w.id.toString()===c.toString()),p=this.getCaipNetworks().find(w=>w.chainNamespace===o);if(!u&&!f&&!p){const w=this.getApprovedCaipNetworkIds()||[],m=w.find(v=>{var A;return((A=Id.parseCaipNetworkId(v))==null?void 0:A.chainId)===c.toString()}),b=w.find(v=>{var A;return((A=Id.parseCaipNetworkId(v))==null?void 0:A.chainNamespace)===o});f=this.getCaipNetworks().find(v=>v.caipNetworkId===m),p=this.getCaipNetworks().find(v=>v.caipNetworkId===b||"deprecatedCaipNetworkId"in v&&v.deprecatedCaipNetworkId===b)}const g=f||p;(g==null?void 0:g.chainNamespace)===z.state.activeChain?we.state.enableNetworkSwitch&&!we.state.allowUnsupportedChain&&((h=z.state.activeCaipNetwork)==null?void 0:h.name)===Fe.UNSUPPORTED_NETWORK_NAME?z.showUnsupportedChainUI():this.setCaipNetwork(g):n||r&&this.setCaipNetworkOfNamespace(r,o),this.syncConnectedWalletInfo(o),pT.isLowerCaseMatch(s,Ve.state.address)||this.syncAccountInfo(s,g==null?void 0:g.id,o),n?await this.syncBalance({address:s,chainId:g==null?void 0:g.id,chainNamespace:o}):await this.syncBalance({address:s,chainId:r==null?void 0:r.id,chainNamespace:o})}}async syncAccountInfo(e,n,r){const s=this.getCaipAddress(r),i=n||(s==null?void 0:s.split(":")[1]);if(!i)return;const o=`${r}:${i}:${e}`;this.setCaipAddress(o,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,n){try{const r=await this.getReownName(e);if(r[0]){const s=r[0];this.setProfileName(s.name,n)}else this.setProfileName(null,n)}catch{this.setProfileName(null,n)}}syncConnectedWalletInfo(e){var s;const n=$e.getConnectorId(e),r=Bn.getProviderId(e);if(r===Qi.CONNECTOR_TYPE_ANNOUNCED||r===Qi.CONNECTOR_TYPE_INJECTED){if(n){const i=this.getConnectors().find(o=>o.id===n);if(i){const{info:o,name:a,imageUrl:c}=i,l=c||this.getConnectorImage(i);this.setConnectedWalletInfo({name:a,icon:l,...o},e)}}}else if(r===Qi.CONNECTOR_TYPE_WALLET_CONNECT){const i=Bn.getProvider(e);i!=null&&i.session&&this.setConnectedWalletInfo({...i.session.peer.metadata,name:i.session.peer.metadata.name,icon:(s=i.session.peer.metadata.icons)==null?void 0:s[0]},e)}else if(n&&n===Fe.CONNECTOR_ID.COINBASE){const i=this.getConnectors().find(o=>o.id===Fe.CONNECTOR_ID.COINBASE);this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(i)},e)}}async syncBalance(e){!qV.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find(r=>{var s;return r.id.toString()===((s=e.chainId)==null?void 0:s.toString())})||!e.chainId||await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async ready(){await this.readyPromise}async updateNativeBalance(e,n,r){const s=this.getAdapter(r),i=z.getCaipNetworkByNamespace(r,n);if(s){const o=await s.getBalance({address:e,chainId:n,caipNetwork:i,tokens:this.options.tokens});return this.setBalance(o.balance,o.symbol,r),o}}async initializeUniversalAdapter(){var r,s,i,o,a,c,l,u,d,h;const e=ETe.createLogger((f,...p)=>{f&&this.handleAlertError(f),console.error(...p)}),n={projectId:(r=this.options)==null?void 0:r.projectId,metadata:{name:(s=this.options)!=null&&s.metadata?(i=this.options)==null?void 0:i.metadata.name:"",description:(o=this.options)!=null&&o.metadata?(a=this.options)==null?void 0:a.metadata.description:"",url:(c=this.options)!=null&&c.metadata?(l=this.options)==null?void 0:l.metadata.url:"",icons:(u=this.options)!=null&&u.metadata?(d=this.options)==null?void 0:d.metadata.icons:[""]},logger:e};we.setManualWCControl(!!((h=this.options)!=null&&h.manualWCControl)),this.universalProvider=this.options.universalProvider??await q$e.init(n),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",e=>{yt.setUri(e)}),this.universalProvider.on("connect",yt.finalizeWcConnection),this.universalProvider.on("disconnect",()=>{this.chainNamespaces.forEach(e=>{this.resetAccount(e)}),yt.resetWcConnection()}),this.universalProvider.on("chainChanged",e=>{const n=this.getCaipNetworks().find(s=>s.id==e),r=this.getCaipNetwork();if(!n){this.setUnsupportedNetwork(e);return}(r==null?void 0:r.id)!==(n==null?void 0:n.id)&&this.setCaipNetwork(n)}),this.universalProvider.on("session_event",e=>{if(TS.isSessionEventData(e)){const{name:n,data:r}=e.params.event;n==="accountsChanged"&&Array.isArray(r)&&ot.isCaipAddress(r[0])&&this.syncAccount(Id.parseCaipAddress(r[0]))}}))}createUniversalProvider(){var e;return!this.universalProviderInitPromise&&ot.isClient()&&((e=this.options)!=null&&e.projectId)&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){hr.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const n=Object.entries(yl.UniversalProviderErrors).find(([,{message:a}])=>e.message.includes(a)),[r,s]=n??[],{message:i,alertErrorKey:o}=s??{};if(r&&i&&!this.reportedAlertErrors[r]){const a=yl.ALERT_ERRORS[o];a&&(Al.open(a,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){var n;if(e)return(n=this.chainAdapters)==null?void 0:n[e]}createAdapter(e){var s;if(!e)return;const n=e.namespace;if(!n)return;this.createClients();const r=e;r.namespace=n,r.construct({namespace:n,projectId:(s=this.options)==null?void 0:s.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(n)||this.chainNamespaces.push(n),this.chainAdapters&&(this.chainAdapters[n]=r)}async open(e){if(await this.injectModalUi(),e!=null&&e.uri&&yt.setUri(e.uri),e!=null&&e.arguments)switch(e==null?void 0:e.view){case"Swap":return gs.open({...e,data:{swap:e.arguments}})}return gs.open(e)}async close(){await this.injectModalUi(),gs.close()}setLoading(e,n){gs.setLoading(e,n)}async disconnect(e){await yt.disconnect(e)}getSIWX(){return we.state.siwx}getError(){return""}getChainId(){var e;return(e=z.state.activeCaipNetwork)==null?void 0:e.id}async switchNetwork(e){const n=this.getCaipNetworks().find(r=>r.id===e.id);if(!n){Al.open(yl.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error");return}await z.switchActiveNetwork(n)}getWalletProvider(){return z.state.activeChain?Bn.state.providers[z.state.activeChain]:null}getWalletProviderType(){return Bn.getProviderId(z.state.activeChain)}subscribeProviders(e){return Bn.subscribeProviders(e)}getThemeMode(){return Yi.state.themeMode}getThemeVariables(){return Yi.state.themeVariables}setThemeMode(e){Yi.setThemeMode(e),AX(Yi.state.themeMode)}setTermsConditionsUrl(e){we.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){we.setPrivacyPolicyUrl(e)}setThemeVariables(e){Yi.setThemeVariables(e),d6e(Yi.state.themeVariables)}subscribeTheme(e){return Yi.subscribe(e)}getWalletInfo(){return Ve.state.connectedWalletInfo}getAccount(e){var o;const n=$e.getAuthConnector(e),r=z.getAccountData(e),s=z.state.activeChain,i=Ke.getConnectedConnectorId(e||s);if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:ot.getPlainAddress(r.caipAddress),isConnected:!!r.caipAddress,status:r.status,embeddedWalletInfo:n&&i===Fe.CONNECTOR_ID.AUTH?{user:r.user?{...r.user,username:Ke.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:(o=r.preferredAccountTypes)==null?void 0:o[e||s],isSmartAccountDeployed:!!r.smartAccountDeployed}:void 0}}subscribeAccount(e,n){const r=()=>{const s=this.getAccount(n);s&&e(s)};n?z.subscribeChainProp("accountState",r,n):z.subscribe(r),$e.subscribe(r)}subscribeNetwork(e){return z.subscribe(({activeCaipNetwork:n})=>{e({caipNetwork:n,chainId:n==null?void 0:n.id,caipNetworkId:n==null?void 0:n.caipNetworkId})})}subscribeWalletInfo(e){return Ve.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){Ve.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){z.subscribeKey("activeCaipNetwork",e)}getState(){return Ol.state}subscribeState(e){return Ol.subscribe(e)}showErrorMessage(e){bc.showError(e)}showSuccessMessage(e){bc.showSuccess(e)}getEvent(){return{...hr.state}}subscribeEvents(e){return hr.subscribe(e)}replace(e){jt.replace(e)}redirect(e){jt.push(e)}popTransactionStack(e){jt.popTransactionStack(e)}isOpen(){return gs.state.open}isTransactionStackEmpty(){return jt.state.transactionStack.length===0}static getInstance(){return this.instance}updateFeatures(e){we.setFeatures(e)}updateRemoteFeatures(e){we.setRemoteFeatures(e)}updateOptions(e){const r={...we.state||{},...e};we.setOptions(r)}setConnectMethodsOrder(e){we.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){we.setWalletFeaturesOrder(e)}setCollapseWallets(e){we.setCollapseWallets(e)}setSocialsOrder(e){we.setSocialsOrder(e)}getConnectMethodsOrder(){return A3.getConnectOrderMethod(we.state.features,$e.getConnectors())}addNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(n,this.options);this.getCaipNetworks().find(s=>s.id===r.id)||z.addNetwork(r)}removeNetwork(e,n){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find(s=>s.id===n)&&z.removeNetwork(e,n)}}let x9=!1;class b6e extends w6e{setupAuthConnectorListeners(e){e.onRpcRequest(n=>{Wo.checkIfRequestExists(n)?Wo.checkIfRequestIsSafe(n)||this.handleUnsafeRPCRequest():(this.open(),console.error(Ms.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:n.method}),setTimeout(()=>{this.showErrorMessage(Ms.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)},300),e.rejectRpcRequests())}),e.onRpcError(()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack("error"))}),e.onRpcSuccess((n,r)=>{const s=Wo.checkIfRequestIsSafe(r),i=Ve.state.address,o=z.state.activeCaipNetwork;s||(i&&(o!=null&&o.id)&&this.updateNativeBalance(i,o.id,o.chainNamespace),this.isTransactionStackEmpty()?this.close():this.popTransactionStack("success"))}),e.onNotConnected(()=>{const n=z.state.activeChain;$e.getConnectorId(n)===Fe.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,n),this.setLoading(!1,n))}),e.onConnect(n=>{var l,u;const r=z.state.activeChain,s=r===Fe.CHAIN.EVM?`eip155:${n.chainId}:${n.address}`:`${n.chainId}:${n.address}`,i=we.state.defaultAccountTypes[r],o=(l=Ve.state.preferredAccountTypes)==null?void 0:l[r],a=n.preferredAccountType||o||i;pT.isLowerCaseMatch(n.address,Ve.state.address)||this.syncIdentity({address:n.address,chainId:n.chainId,chainNamespace:r}),this.setCaipAddress(s,r),this.setUser({...Ve.state.user||{},...n},r),this.setSmartAccountDeployed(!!n.smartAccountDeployed,r),this.setPreferredAccountType(a,r);const c=(u=n.accounts)==null?void 0:u.map(d=>ot.createAccount(r,d.address,d.type||o||i));this.setAllAccounts(c||[ot.createAccount(r,n.address,n.preferredAccountType||a)],r),this.setLoading(!1,r)}),e.onSocialConnected(({userName:n})=>{this.setUser({...Ve.state.user||{},username:n},z.state.activeChain)}),e.onGetSmartAccountEnabledNetworks(n=>{this.setSmartAccountEnabledNetworks(n,z.state.activeChain)}),e.onSetPreferredAccount(({address:n,type:r})=>{n&&this.setPreferredAccountType(r,z.state.activeChain)})}async syncAuthConnector(e,n){var u,d,h,f;const r=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(n);if(!r)return;this.setLoading(!0,n);const s=e.getLoginEmailUsed();this.setLoading(s,n),s&&this.setStatus("connecting",n);const i=e.getEmail(),o=e.getUsername();this.setUser({...((u=Ve.state)==null?void 0:u.user)||{},username:o,email:i},n),this.setupAuthConnectorListeners(e);const{isConnected:a}=await e.isConnected(),c=Yi.getSnapshot(),l=we.getSnapshot();await Promise.all([e.syncDappData({metadata:l.metadata,sdkVersion:l.sdkVersion,projectId:l.projectId,sdkType:l.sdkType}),e.syncTheme({themeMode:c.themeMode,themeVariables:c.themeVariables,w3mThemeVariables:ju(c.themeVariables,c.themeMode)})]),await e.getSmartAccountEnabledNetworks(),n&&r&&(a&&((d=this.connectionControllerClient)!=null&&d.connectExternal)?(await((f=this.connectionControllerClient)==null?void 0:f.connectExternal({id:Fe.CONNECTOR_ID.AUTH,info:{name:Fe.CONNECTOR_ID.AUTH},type:Qi.CONNECTOR_TYPE_AUTH,provider:e,chainId:(h=z.state.activeCaipNetwork)==null?void 0:h.id,chain:n})),this.setStatus("connected",n)):$e.getConnectorId(n)===Fe.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",n),Ke.removeConnectedNamespace(n))),this.setLoading(!1,n)}async checkExistingTelegramSocialConnection(e){var n;try{if(!ot.isTelegram())return;const r=Ke.getTelegramSocialProvider();if(!r||!ot.isClient())return;const i=new URL(window.location.href).searchParams.get("result_uri");if(!i)return;Ve.setSocialProvider(r,e),await((n=this.authProvider)==null?void 0:n.init());const o=$e.getAuthConnector();r&&o&&(this.setLoading(!0,e),await yt.connectExternal({id:o.id,type:o.type,socialUri:i},o.chain),Ke.setConnectedSocialProvider(r),Ke.removeTelegramSocialProvider(),hr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:r}}))}catch(r){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",r)}try{const r=new URL(window.location.href);r.searchParams.delete("result_uri"),window.history.replaceState({},document.title,r.toString())}catch(r){console.error("tma social login failed",r)}}createAuthProvider(e){var o,a,c,l;if(!Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const r=(o=this.remoteFeatures)==null?void 0:o.email,s=Array.isArray((a=this.remoteFeatures)==null?void 0:a.socials)&&this.remoteFeatures.socials.length>0,i=r||s;!this.authProvider&&((c=this.options)!=null&&c.projectId)&&i&&(this.authProvider=zPe.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:(l=this.getCaipNetwork(e))==null?void 0:l.caipNetworkId,abortController:yl.EmbeddedWalletAbortController,onTimeout:u=>{u==="iframe_load_failed"?Al.open(yl.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):u==="iframe_request_timeout"?Al.open(yl.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):u==="unverified_domain"&&Al.open(yl.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")}}),Ol.subscribeOpen(u=>{var d;!u&&this.isTransactionStackEmpty()&&((d=this.authProvider)==null||d.rejectRpcRequests())}),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){var n,r,s;this.createAuthProvider(e),this.authProvider&&((s=(r=(n=this.chainAdapters)==null?void 0:n[e])==null?void 0:r.setAuthProvider)==null||s.call(r,this.authProvider))}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&at.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){var o,a;if(!e)return;const n=z.state.activeChain,r=e.chainNamespace,s=this.getAddressByChainNamespace(r);if(r===n&&s){const c=this.getAdapter(r),l=Bn.getProvider(r),u=Bn.getProviderId(r);await(c==null?void 0:c.switchNetwork({caipNetwork:e,provider:l,providerType:u})),this.setCaipNetwork(e)}else{const l=Bn.getProviderId(n)===Qi.CONNECTOR_TYPE_AUTH,u=Bn.getProviderId(r),d=u===Qi.CONNECTOR_TYPE_AUTH,h=Fe.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((l&&u===void 0||d)&&h)try{if(z.state.activeChain=e.chainNamespace,s){const f=this.getAdapter(r);await(f==null?void 0:f.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else await((a=(o=this.connectionControllerClient)==null?void 0:o.connectExternal)==null?void 0:a.call(o,{id:Fe.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:Qi.CONNECTOR_TYPE_AUTH,caipNetwork:e}));this.setCaipNetwork(e)}catch{const p=this.getAdapter(r);await(p==null?void 0:p.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:u}))}else u===Qi.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),s&&this.syncAccount({address:s,chainId:e.id,chainNamespace:r}))}}async initialize(e){var n;await super.initialize(e),(n=this.chainNamespaces)==null||n.forEach(r=>{this.createAuthProviderForAdapter(r)}),await this.injectModalUi(),Ol.set({initialized:!0})}async syncIdentity({address:e,chainId:n,chainNamespace:r}){var o;const s=`${r}:${n}`,i=(o=this.caipNetworks)==null?void 0:o.find(a=>a.caipNetworkId===s);if(r!==Fe.CHAIN.EVM||i!=null&&i.testnet){this.setProfileName(null,r),this.setProfileImage(null,r);return}try{const{name:a,avatar:c}=await this.fetchIdentity({address:e,caipNetworkId:s});this.setProfileName(a,r),this.setProfileImage(c,r)}catch{await this.syncReownName(e,r),n!==1&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const n=Bn.getProviderId(e);if(n===Qi.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const s=Ke.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:n,identifier:i,social:s},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(ot.isClient()&&!x9)try{const e={...Fn.DEFAULT_FEATURES,...this.options.features},n=this.remoteFeatures;if(await this.loadModalComponents(e,n),ot.isClient()&&!document.querySelector("w3m-modal")){const s=document.createElement("w3m-modal");!we.state.disableAppend&&!we.state.enableEmbedded&&document.body.insertAdjacentElement("beforeend",s)}x9=!0}catch(e){console.error("Error injecting modal UI:",e)}}async loadModalComponents(e,n){if(!ot.isClient())return;const r=[];(n.email||n.socials&&n.socials.length>0)&&r.push(Js(()=>import("./embedded-wallet-Bx6qIY2g.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),n.email&&r.push(Js(()=>import("./email-DDbrekw3.js"),__vite__mapDeps([12,1,11,5,10,4,9,13,6]))),n.socials&&r.push(Js(()=>import("./socials-C_BSZuD_.js"),__vite__mapDeps([14,1,15,4,16,17,10,18,9,5,11,19,3,20]))),n.swaps&&n.swaps.length>0&&r.push(Js(()=>import("./swaps-BN8673wi.js"),__vite__mapDeps([21,1,9,5,22,23,24,3,10,20,6,4]))),e.send&&r.push(Js(()=>import("./send-DRrh_EBG.js"),__vite__mapDeps([25,1,9,5,10,4,16,11,24,3,6,26,27]))),e.receive&&r.push(Js(()=>import("./receive-C-gjTPZa.js"),__vite__mapDeps([28,1,29,3,19]))),n.onramp&&n.onramp.length>0&&r.push(Js(()=>import("./onramp-DvNkORRh.js"),__vite__mapDeps([30,1,31,20,10,3,5,32,15,4,16,33,11,9,18,6]))),n.activity&&r.push(Js(()=>import("./transactions-DQuWRUC4.js"),__vite__mapDeps([34,1,35,31,20,10,11,3]))),e.pay&&r.push(Js(()=>import("./index-CO-xmMeq.js"),__vite__mapDeps([36,1,9,5,37,3,10,7,32,27,18]))),await Promise.all([...r,Js(()=>import("./index-CHoctKRl.js"),__vite__mapDeps([38,1,3,5,26,10,39,23,7,32,9,8,37,35,31,20,11,22,4,6,27,13,15,16,17,2,18,29,19,33])),Js(()=>import("./w3m-modal-BY5_bQIa.js"),__vite__mapDeps([40,1,7,3,10,8,5,23,39]))])}}let Hd;function v6e(t){t&&(Hd=t)}function h1(){if(!Hd)throw new Error('Please call "createAppKit" before using "useAppKit" hook');async function t(n){await(Hd==null?void 0:Hd.open(n))}async function e(){await(Hd==null?void 0:Hd.close())}return{open:t,close:e}}const E6e="1.7.8";let OA;function C6e(t){return OA||(OA=new b6e({...t,sdkVersion:ot.generateSdkVersion(t.adapters??[],"react",E6e)}),v6e(OA)),OA}const _6e=Uc({popup:{position:"absolute",background:"#c0c0c0",border:"2px outset #fff",width:"720px",height:"600px",minWidth:"480px",minHeight:"360px",top:"calc(50vh - 300px)",left:"calc(50vw - 360px)",display:({isOpen:t})=>t?"block":"none",resize:"both",overflow:"auto",zIndex:100},header:{background:"navy",color:"#fff",padding:"2px 4px",display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"move",fontSize:"12px",fontWeight:"bold",userSelect:"none"},titleBarButtons:{display:"flex",gap:"1px"},titleBarButton:{width:"16px",height:"14px",border:"1px outset #c0c0c0",backgroundColor:"#c0c0c0",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"8px",color:"black","&:active":{border:"1px inset #c0c0c0"}},content:{padding:"10px",height:"calc(100% - 30px)",overflow:"auto"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},detailContent:{padding:"20px",color:"#000"},detailImage:{width:"100%",height:"auto",marginBottom:"20px",border:"1px solid #ccc"},detailTraits:{listStyleType:"none",paddingLeft:"0","& li":{marginBottom:"5px"}},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),I9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],A6e=({isOpen:t,onClose:e,onMinimize:n,walletAddress:r})=>{const s=_6e({isOpen:t}),{open:i}=h1(),o=k.useRef(null),[a,c]=k.useState([]),[l,u]=k.useState(!0),[d,h]=k.useState(null),[f,p]=k.useState("all"),[g,w]=k.useState(1),[m,b]=k.useState(1),[v,A]=k.useState(0),[C,T]=k.useState(null),[x,N]=k.useState(I9[0]),[S,D]=k.useState(!1),[P,$]=k.useState(null),G=k.useCallback(async()=>{var M,j;try{if((M=window.solana)!=null&&M.isPhantom){const V=await window.solana.connect();$(V.publicKey.toString());return}if((j=window.solflare)!=null&&j.isSolflare){const V=await window.solflare.connect();$(V.publicKey.toString());return}i()}catch(V){console.error("Failed to connect Solana wallet:",V),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}D(!1)},[i]);k.useEffect(()=>{var M,j;(M=window.solana)!=null&&M.publicKey?$(window.solana.publicKey.toString()):(j=window.solflare)!=null&&j.publicKey&&$(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{t&&(async()=>{var j;u(!0),h(null);try{let V,te=f==="owned"&&r||void 0;if(x.api==="opensea-solana"){if(f==="owned"&&!P){D(!0),u(!1);return}te=P||void 0,V=await zV(x.slug,50),console.log("Fetched Solana NFTs from collection:",V.data.length),f==="owned"&&P&&(console.log("Filtering for owner:",P),console.log("Sample NFT owner data:",(j=V.data[0])==null?void 0:j.owners),console.log("All NFTs owner data:",V.data.map(X=>({name:X.name,owners:X.owners,owner_of:X.owner_of}))),V.data.some(X=>X.owners&&X.owners.length>0)?(V.data=V.data.filter(X=>{const ce=X.owners.some(ge=>ge.owner_of&&ge.owner_of.toLowerCase()===P.toLowerCase());return ce&&console.log("Found owned NFT:",X.name),ce}),console.log("NFTs after filtering:",V.data.length)):(console.log("No owner data available from OpenSea for Solana collection"),h("Owner data not available for this Solana collection. Showing all NFTs.")))}else x.api==="opensea"?V=await _L(x.slug,50,te):V=await CL(x.slug,g,50,te);c(V.data),b(V.totalPages),A(V.totalCount)}catch(V){V instanceof Error?h(V.message):h("An unknown error occurred."),c([])}finally{u(!1)}})()},[t,g,f,r,x,P]),k.useEffect(()=>{S&&G()},[S,G]);const W=M=>new Date(M).toLocaleDateString(),I=M=>x.api==="opensea-solana"?M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"Owner data unavailable":M.owner_of&&M.owner_of.length>0?`${M.owner_of.substring(0,6)}...${M.owner_of.substring(-4)}`:M.owners&&M.owners.length>0?`${M.owners[0].owner_of.substring(0,6)}...${M.owners[0].owner_of.substring(-4)}`:"N/A",R=()=>{n&&n()},B=async M=>{if(x.api==="opensea"&&x.chain)try{const j=await WV(x.chain,M.address,M.token_id.toString()),V={...M,attributes:JSON.stringify(j.traits||[])};T(V)}catch(j){console.error("Failed to fetch full NFT details",j),T(M)}else T(M)},O=M=>{N(M),w(1)};return t?y.jsxs(y.Fragment,{children:[y.jsx(L_,{nodeRef:o,handle:`.${s.header}`,children:y.jsxs("div",{ref:o,className:s.popup,children:[y.jsxs("div",{className:s.header,children:[y.jsx("span",{children:"LAWB NFT GALLERY"}),y.jsxs("div",{className:s.titleBarButtons,children:[y.jsx("button",{className:s.titleBarButton,onClick:R,title:"Minimize",children:"_"}),y.jsx("button",{className:s.titleBarButton,onClick:e,title:"Close",children:""})]})]}),y.jsx("div",{className:s.collectionSelector,children:I9.map(M=>y.jsx("button",{className:`${s.collectionButton} ${x.slug===M.slug?"active":""}`,onClick:()=>O(M),children:M.name},M.slug))}),y.jsxs("div",{className:s.content,children:[y.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[y.jsx("button",{onClick:()=>p("all"),style:{background:f==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:f==="all"?"white":"black"},children:"All NFTs"}),y.jsx("button",{onClick:()=>p("recent"),disabled:!r,style:{background:f==="recent"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r?"pointer":"not-allowed",color:f==="recent"?"white":"black",opacity:r?1:.6},children:"Recently Minted"}),y.jsx("button",{onClick:()=>p("owned"),disabled:!r&&!P,style:{background:f==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:r||P?"pointer":"not-allowed",color:f==="owned"?"white":"black",opacity:r||P?1:.6},children:"My NFTs"}),x.api==="opensea-solana"&&y.jsx("button",{onClick:()=>{G()},style:{background:P?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:P?"white":"black",marginLeft:"auto"},children:P?`Solana: ${P.slice(0,4)}...${P.slice(-4)}`:"Connect Solana"})]}),x.api==="opensea-solana"&&!P&&y.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),d&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:d}),l?y.jsx("div",{children:"Loading NFTs..."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"10px",fontSize:"14px"},children:[f==="all"&&`Showing all NFTs (${v} total)`,f==="recent"&&`Recently minted NFTs by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`,f==="owned"&&`NFTs owned by ${x.api==="opensea-solana"?(P==null?void 0:P.slice(0,6))+"..."+(P==null?void 0:P.slice(-4)):(r==null?void 0:r.slice(0,6))+"..."+(r==null?void 0:r.slice(-4))}`]}),a.length===0?y.jsx("div",{children:"No NFTs found."}):y.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:a.map(M=>y.jsxs("div",{style:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",borderRadius:"4px",cursor:"pointer"},onClick:()=>{B(M)},children:[y.jsx(GV,{src:HV(M),alt:`NFT #${M.token_id}`,style:{width:"100%",height:"150px",objectFit:"cover",marginBottom:"10px",border:"1px solid #ccc",backgroundColor:"#f0f0f0"}}),y.jsx("div",{style:{fontSize:"12px",marginBottom:"5px",color:"#000"},children:y.jsxs("strong",{children:["#",M.token_id]})}),y.jsxs("div",{style:{fontSize:"11px",marginBottom:"5px",color:"#000"},children:["Owner: ",I(M)]}),y.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["Minted: ",W(M.created_at)]})]},M.id))}),f!=="recent"&&m>1&&y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"20px"},children:[y.jsx("button",{onClick:()=>w(M=>Math.max(1,M-1)),disabled:g===1,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===1?"not-allowed":"pointer"},children:"Previous"}),y.jsxs("span",{style:{padding:"5px 10px"},children:["Page ",g," of ",m]}),y.jsx("button",{onClick:()=>w(M=>Math.min(m,M+1)),disabled:g===m,style:{background:"#c0c0c0",border:"2px outset #c0c0c0",padding:"5px 10px",cursor:g===m?"not-allowed":"pointer"},children:"Next"})]})]})]})]})}),C&&y.jsx(Gme,{nft:C,onClose:()=>T(null)})]}):null};var kA,S6e=new Uint8Array(16);function x6e(){if(!kA&&(kA=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!kA))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kA(S6e)}const I6e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function N6e(t){return typeof t=="string"&&I6e.test(t)}var Ss=[];for(var OO=0;OO<256;++OO)Ss.push((OO+256).toString(16).substr(1));function T6e(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ss[t[e+0]]+Ss[t[e+1]]+Ss[t[e+2]]+Ss[t[e+3]]+"-"+Ss[t[e+4]]+Ss[t[e+5]]+"-"+Ss[t[e+6]]+Ss[t[e+7]]+"-"+Ss[t[e+8]]+Ss[t[e+9]]+"-"+Ss[t[e+10]]+Ss[t[e+11]]+Ss[t[e+12]]+Ss[t[e+13]]+Ss[t[e+14]]+Ss[t[e+15]]).toLowerCase();if(!N6e(n))throw TypeError("Stringified UUID is invalid");return n}function R6e(t,e,n){t=t||{};var r=t.random||(t.rng||x6e)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,T6e(r)}const P6e=Uc({container:{display:"flex",flexDirection:"column",gap:4,padding:4,background:"#c0c0c0",border:"2px outset #fff",borderRadius:8,maxWidth:500,width:"100%",fontFamily:"monospace",fontSize:11},header:{textAlign:"center",marginBottom:2},subtitle:{color:"#000",fontSize:"10px",textAlign:"center",marginBottom:2,lineHeight:1.1},content:{display:"flex",flexDirection:"column",gap:2},section:{display:"flex",flexDirection:"column",gap:1},sectionTitle:{fontWeight:"bold",color:"#000",fontSize:11,borderBottom:"1px solid #888",paddingBottom:0},row:{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap"},label:{minWidth:55,color:"#000",fontWeight:"bold",fontSize:10},input:{flex:1,minWidth:70,padding:"2px 3px",border:"2px inset #fff",background:"#fff",fontSize:10,fontFamily:"monospace",color:"#000",textTransform:"uppercase"},button:{padding:"3px 8px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:10,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},effectButton:{padding:"2px 5px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer",fontSize:9,fontWeight:"bold",color:"#000","&:hover":{background:"#d0d0d0"},"&:active":{border:"2px inset #fff"}},memeArea:{display:"flex",justifyContent:"center",position:"relative",marginTop:1},canvas:{border:"2px inset #fff",background:"#333",maxWidth:"100%",height:"auto"},dropdown:{position:"relative"},dropdownContent:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",borderRadius:4,zIndex:10,minWidth:100,maxHeight:100,overflowY:"auto"},dropdownItem:{padding:"3px 5px",cursor:"pointer",fontSize:9,borderBottom:"1px solid #eee","&:hover":{background:"#f0f0f0"}},actions:{display:"flex",gap:3,justifyContent:"center",marginTop:1}}),O6e=[{id:"lawbsters",name:"Lawbsters",api:"opensea",slug:"lawbsters",chain:"ethereum"},{id:"lawbstarz",name:"Lawbstarz",api:"opensea",slug:"lawbstarz",chain:"ethereum"},{id:"pixelawbs",name:"Pixelawbsters",api:"scatter",slug:"pixelawbs"},{id:"halloween",name:"Halloween Lawbsters",api:"opensea",slug:"a-lawbster-halloween",chain:"base"},{id:"lawbstation",name:"Lawbstation",api:"opensea-solana",slug:"lawbstation",chain:"solana"},{id:"nexus",name:"Nexus",api:"opensea-solana",slug:"lawbnexus",chain:"solana"}],k6e=["/images/sticker1.png","/images/sticker2.png","/images/sticker3.png","/images/sticker4.png","/images/sticker5.png"],So=500;function IX(){const t=P6e(),e=k.useRef(null),[n,r]=k.useState(null),[s,i]=k.useState(""),[o,a]=k.useState(""),[c,l]=k.useState(50),[u,d]=k.useState(50),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[w,m]=k.useState(!1),[b,v]=k.useState(!1),[A,C]=k.useState(!1),[T,x]=k.useState([]),[N,S]=k.useState(null),D=k.useRef(null),[P,$]=k.useState(null),G=async ne=>{const ie=ne.getContext("2d");if(!ie)return;ie.clearRect(0,0,ne.width,ne.height),n?await new Promise(fe=>{const ve=new window.Image;ve.crossOrigin="anonymous",ve.onload=()=>{const ht=Math.min(ne.width/ve.width,ne.height/ve.height),Xe=(ne.width-ve.width*ht)/2,ct=(ne.height-ve.height*ht)/2;ie.drawImage(ve,Xe,ct,ve.width*ht,ve.height*ht),fe()},ve.onerror=()=>fe(),ve.src=n}):(ie.fillStyle="#333",ie.fillRect(0,0,ne.width,ne.height)),(fe=>{fe.textAlign="center",fe.strokeStyle="black",fe.lineWidth=3,fe.fillStyle="white";const ve=(ht,Xe)=>{const ct=ht.toUpperCase().split(" "),Tt=[];let In=ct[0];for(let tt=1;tt<ct.length;tt++){const Mn=ct[tt];fe.measureText(In+" "+Mn).width<Xe?In+=" "+Mn:(Tt.push(In),In=Mn)}return Tt.push(In),Tt};if(s&&(fe.font=`${c}px Impact`,ve(s,So-20).forEach((Xe,ct)=>{const Tt=c+ct*c*1.2;fe.strokeText(Xe,So/2,Tt),fe.fillText(Xe,So/2,Tt)})),o){fe.font=`${u}px Impact`;const ht=ve(o,So-20);ht.forEach((Xe,ct)=>{const Tt=So-(ht.length-ct)*u*1.2+u;fe.strokeText(Xe,So/2,Tt),fe.fillText(Xe,So/2,Tt)})}})(ie),await Promise.all(T.map(fe=>new Promise(ve=>{const ht=new window.Image;ht.src=fe.src,ht.onload=()=>{ie.save(),ie.translate(fe.x,fe.y),ie.rotate(fe.rotation*Math.PI/180),ie.scale(fe.scale,fe.scale),ie.drawImage(ht,-40,-40,80,80),ie.restore(),ve()},ht.onerror=()=>ve()})));try{h&&W(ne),p&&I(ne),w&&R(ne)}catch(fe){console.warn("Effects could not be applied due to CORS restrictions. Try uploading your own image instead.",fe),f(!1),g(!1),m(!1)}},W=ne=>{const ie=ne.getContext("2d");if(!ie)return;const be=ie.getImageData(0,0,ne.width,ne.height),fe=be.data;for(let ve=0;ve<fe.length;ve+=4){const ht=fe[ve],Xe=fe[ve+1],ct=fe[ve+2],Tt=(ht+Xe+ct)/3,In=1.8;fe[ve]=Math.min(255,Tt+(ht-Tt)*In),fe[ve+1]=Math.min(255,Tt+(Xe-Tt)*In*.7),fe[ve+2]=Math.min(255,Tt+(ct-Tt)*In*.4);const tt=1.3;fe[ve]=Math.min(255,Math.max(0,fe[ve]*tt)),fe[ve+1]=Math.min(255,Math.max(0,fe[ve+1]*tt)),fe[ve+2]=Math.min(255,Math.max(0,fe[ve+2]*tt))}ie.putImageData(be,0,0)},I=ne=>{const ie=ne.getContext("2d");if(!ie)return;const be=4,ve=ie.getImageData(0,0,ne.width,ne.height).data,ht=new Uint8ClampedArray(ve);for(let Xe=0;Xe<ne.height;Xe+=be)for(let ct=0;ct<ne.width;ct+=be){const Tt=(Xe*ne.width+ct)*4,In=ve[Tt],tt=ve[Tt+1],Mn=ve[Tt+2],zt=ve[Tt+3];for(let ke=0;ke<be&&Xe+ke<ne.height;ke++)for(let Nn=0;Nn<be&&ct+Nn<ne.width;Nn++){const Pi=((Xe+ke)*ne.width+(ct+Nn))*4;ht[Pi]=In,ht[Pi+1]=tt,ht[Pi+2]=Mn,ht[Pi+3]=zt}}ie.putImageData(new ImageData(ht,ne.width,ne.height),0,0)},R=ne=>{const ie=ne.getContext("2d");if(!ie)return;const be=ie.getImageData(0,0,ne.width,ne.height),fe=be.data;for(let ve=0;ve<fe.length;ve+=4){const ht=(Math.random()-.5)*50;fe[ve]=Math.max(0,Math.min(255,fe[ve]+ht)),fe[ve+1]=Math.max(0,Math.min(255,fe[ve+1]+ht)),fe[ve+2]=Math.max(0,Math.min(255,fe[ve+2]+ht))}ie.putImageData(be,0,0)};k.useEffect(()=>{e.current&&G(e.current)},[G]);const B=k.useRef(null),O=500,M=ne=>{ne.preventDefault(),B.current=setTimeout(()=>{const ie=e.current;ie&&(navigator.share?ie.toBlob(be=>{if(be){const fe=new File([be],"meme.png",{type:"image/png"});navigator.share({title:"Lawb Meme",text:"Check out this meme I made!",files:[fe]}).catch(()=>{ce()})}}):ce())},O)},j=()=>{B.current&&(clearTimeout(B.current),B.current=null)},V=()=>{B.current&&(clearTimeout(B.current),B.current=null)},te=ne=>{ne.preventDefault()},Z=ne=>{var be;const ie=(be=ne.target.files)==null?void 0:be[0];ie&&r(URL.createObjectURL(ie))},X=()=>{r(null),i(""),a(""),l(50),d(50),f(!1),g(!1),m(!1)},ce=async()=>{const ne=e.current;if(!ne)return;await G(ne);const ie=document.createElement("a");ie.download="meme.png",ie.href=ne.toDataURL("image/png"),document.body.appendChild(ie),ie.click(),document.body.removeChild(ie)},ge=async ne=>{C(!0),v(!1);try{console.log("Fetching NFTs for collection:",ne);let ie;if(ne.api==="opensea"){console.log("Using OpenSea API for:",ne.slug);const be=await _L(ne.slug,50);ie=be.data,console.log("OpenSea response:",be)}else if(ne.api==="opensea-solana"){console.log("Using Helius API for Solana collection:",ne.slug);const be=await zV(ne.slug,50);if(ie=be.data,console.log("Helius Solana response:",be),!ie||ie.length===0){alert("No NFTs found in this Solana collection. Try uploading your own image or use other collections.");return}}else{console.log("Using Scatter API for:",ne.slug);const be=await CL(ne.slug,1,50);ie=be.data,console.log("Scatter response:",be)}if(ie&&ie.length>0){const be=ie[Math.floor(Math.random()*ie.length)],fe=be.image||be.image_url||be.image_url_shrunk;console.log("Selected NFT:",be),console.log("Image URL:",fe),r(fe)}else console.log("No NFTs found in collection"),alert("No NFTs found in this collection.")}catch(ie){console.error("Error fetching NFTs:",ie),alert("Failed to fetch NFT images. Check console for details.")}finally{C(!1)}},Me=ne=>{const ie={id:R6e(),src:ne,x:80,y:80,scale:1,rotation:0};x(be=>be.length>=2||be.some(fe=>fe.src===ne&&!fe.id.startsWith("upload-"))?be:[...be,ie]),$(ie.id)},it=ne=>{var be;const ie=(be=ne.target.files)==null?void 0:be[0];if(ie){const fe=URL.createObjectURL(ie);Me(fe)}},Je=(ne,ie,be)=>{x(fe=>fe.map(ve=>{if(ve.id!==ne)return ve;let ht=ve.x+ie/1.2,Xe=ve.y+be/1.2;const ct=40*ve.scale,Tt=40*ve.scale;return ht=Math.max(ct,Math.min(So-ct,ht)),Xe=Math.max(Tt,Math.min(So-Tt,Xe)),{...ve,x:ht,y:Xe}}))},bt=(ne,ie,be,fe,ve)=>{x(ht=>ht.map(Xe=>{if(Xe.id!==ne)return Xe;const ct=Xe.x,Tt=Xe.y,In=Math.atan2(ve-Tt,fe-ct)*180/Math.PI;return{...Xe,rotation:be+(In-ie)*.5}}))},Nt=ne=>{x(ie=>ie.filter(be=>be.id!==ne))},At=(ne,ie)=>{x(be=>be.map(fe=>fe.id===ne?{...fe,scale:Math.max(.2,fe.scale*(1+(ie-1)*.2))}:fe))};return y.jsxs("div",{className:t.container,children:[y.jsxs("div",{className:t.header,children:[y.jsx("h2",{style:{color:"#00ffff",textShadow:"1px 1px 0 #000",marginBottom:8,fontSize:"16px"},children:"Lawb Meme Maker"}),y.jsxs("p",{className:t.subtitle,children:["find memes or upload your own on"," ",y.jsx("a",{href:"https://memedepot.com/d/lawb",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Meme Depot"})]})]}),y.jsxs("div",{className:t.content,children:[y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Collections"}),y.jsxs("div",{className:t.row,children:[y.jsxs("div",{className:t.dropdown,children:[y.jsx("button",{className:t.button,onClick:()=>v(ne=>!ne),children:"Collections"}),b&&y.jsx("div",{className:t.dropdownContent,children:O6e.map(ne=>y.jsx("div",{className:t.dropdownItem,onClick:()=>{ge(ne)},children:ne.name},ne.id))})]}),y.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Image",y.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:Z})]}),A&&y.jsx("span",{style:{color:"#00ffff",marginLeft:8,fontSize:"12px"},children:"Loading NFT..."})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Text"}),y.jsxs("div",{className:t.row,children:[y.jsx("span",{className:t.label,children:"Top Text:"}),y.jsx("input",{className:t.input,type:"text",value:s,onChange:ne=>i(ne.target.value),placeholder:"Enter top text..."}),y.jsx("span",{className:t.label,children:"Size:"}),y.jsx("input",{className:t.input,type:"number",min:10,max:100,value:c,onChange:ne=>l(Number(ne.target.value)),style:{width:60,textAlign:"center"}})]}),y.jsxs("div",{className:t.row,children:[y.jsx("span",{className:t.label,children:"Bottom Text:"}),y.jsx("input",{className:t.input,type:"text",value:o,onChange:ne=>a(ne.target.value),placeholder:"Enter bottom text..."}),y.jsx("span",{className:t.label,children:"Size:"}),y.jsx("input",{className:t.input,type:"number",min:10,max:100,value:u,onChange:ne=>d(Number(ne.target.value)),style:{width:60,textAlign:"center"}})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Effects"}),y.jsxs("div",{className:t.row,children:[y.jsx("button",{className:t.effectButton,style:{background:h?"#00ffff":void 0},onClick:()=>f(ne=>!ne),children:"Deep Fry"}),y.jsx("button",{className:t.effectButton,style:{background:p?"#00ffff":void 0},onClick:()=>g(ne=>!ne),children:"Pixelate"}),y.jsx("button",{className:t.effectButton,style:{background:w?"#00ffff":void 0},onClick:()=>m(ne=>!ne),children:"Grain"})]})]}),y.jsxs("div",{className:t.section,children:[y.jsx("div",{className:t.sectionTitle,children:"Stickers"}),y.jsxs("div",{className:t.row,children:[k6e.map((ne,ie)=>y.jsx("img",{src:ne,alt:`sticker${ie+1}`,style:{width:32,height:32,cursor:"pointer",border:"1px solid #888",marginRight:4},onClick:()=>Me(ne)},ne)),y.jsxs("label",{className:t.button,style:{marginBottom:0},children:["Upload Sticker",y.jsx("input",{type:"file",accept:"image/*",style:{display:"none"},ref:D,onChange:it})]})]})]}),y.jsxs("div",{className:t.actions,children:[y.jsx("button",{className:t.button,onClick:ce,children:"Save Image"}),y.jsx("button",{className:t.button,onClick:X,children:"Restart"})]})]}),y.jsx("div",{className:t.memeArea,children:y.jsx("canvas",{ref:e,width:So,height:So,className:t.canvas,onTouchStart:M,onTouchEnd:j,onTouchMove:V,onContextMenu:te,style:{touchAction:"none"}})}),y.jsx("div",{style:{position:"absolute",left:0,top:0,width:So,height:So,pointerEvents:"none"},children:T.map(ne=>P===ne.id?y.jsxs("div",{style:{position:"absolute",left:ne.x,top:ne.y,width:80*ne.scale,height:80*ne.scale,transform:`rotate(${ne.rotation}deg)`,cursor:"move",pointerEvents:"auto",zIndex:10,border:"2px solid #00f",boxShadow:"0 0 8px #00f"},onMouseDown:ie=>{S(ne.id),ie.stopPropagation()},onMouseUp:()=>S(null),onMouseMove:ie=>{N===ne.id&&ie.buttons===1&&Je(ne.id,ie.movementX,ie.movementY)},children:[y.jsx("img",{src:ne.src,alt:"sticker",style:{width:"100%",height:"100%",userSelect:"none",pointerEvents:"none"},draggable:!1}),y.jsx("div",{style:{position:"absolute",right:-12,top:"40%",width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"grab",zIndex:11},onMouseDown:ie=>{var In;ie.stopPropagation();const be=(In=ie.currentTarget.parentElement)==null?void 0:In.getBoundingClientRect(),fe=be?be.left+be.width/2:0,ve=be?be.top+be.height/2:0,ht=Math.atan2(ie.clientY-ve,ie.clientX-fe)*180/Math.PI,Xe=ne.rotation,ct=tt=>{bt(ne.id,ht,Xe,tt.clientX,tt.clientY)},Tt=()=>{window.removeEventListener("mousemove",ct),window.removeEventListener("mouseup",Tt)};window.addEventListener("mousemove",ct),window.addEventListener("mouseup",Tt)}}),y.jsx("div",{style:{position:"absolute",bottom:-12,right:-12,width:16,height:16,background:"#fff",borderRadius:"50%",border:"1px solid #888",cursor:"nwse-resize",zIndex:11},onMouseDown:ie=>{ie.stopPropagation();const be=ie.clientX,fe=ht=>{const Xe=(ht.clientX-be)/80;At(ne.id,1+Xe)},ve=()=>{window.removeEventListener("mousemove",fe),window.removeEventListener("mouseup",ve)};window.addEventListener("mousemove",fe),window.addEventListener("mouseup",ve)}}),y.jsx("button",{style:{position:"absolute",top:-12,left:-12,width:16,height:16,background:"#f00",color:"#fff",border:"none",borderRadius:"50%",fontSize:10,cursor:"pointer",zIndex:12},onClick:()=>Nt(ne.id),children:""}),y.jsx("button",{style:{position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:40,height:18,background:"#0f0",color:"#000",border:"1px solid #888",borderRadius:4,fontSize:8,cursor:"pointer",zIndex:12},onClick:()=>$(null),children:"Place"})]},ne.id):null)})]})}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function HC(){return HC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},HC.apply(this,arguments)}var Lh;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Lh||(Lh={}));const N9="popstate";function D6e(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return x3("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:TX(s)}return L6e(e,n,null,t)}function Xr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function NX(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function M6e(){return Math.random().toString(36).substr(2,8)}function T9(t,e){return{usr:t.state,key:t.key,idx:e}}function x3(t,e,n,r){return n===void 0&&(n=null),HC({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?bb(e):e,{state:n,key:e&&e.key||r||M6e()})}function TX(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function bb(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function L6e(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Lh.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(HC({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Lh.Pop;let w=u(),m=w==null?null:w-l;l=w,c&&c({action:a,location:g.location,delta:m})}function h(w,m){a=Lh.Push;let b=x3(g.location,w,m);l=u()+1;let v=T9(b,l),A=g.createHref(b);try{o.pushState(v,"",A)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(A)}i&&c&&c({action:a,location:g.location,delta:1})}function f(w,m){a=Lh.Replace;let b=x3(g.location,w,m);l=u();let v=T9(b,l),A=g.createHref(b);o.replaceState(v,"",A),i&&c&&c({action:a,location:g.location,delta:0})}function p(w){let m=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof w=="string"?w:TX(w);return b=b.replace(/ $/,"%20"),Xr(m,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,m)}let g={get action(){return a},get location(){return t(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(N9,d),c=w,()=>{s.removeEventListener(N9,d),c=null}},createHref(w){return e(s,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(w){return o.go(w)}};return g}var R9;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(R9||(R9={}));function U6e(t,e,n){return n===void 0&&(n="/"),B6e(t,e,n)}function B6e(t,e,n,r){let s=typeof e=="string"?bb(e):e,i=OX(s.pathname||"/",n);if(i==null)return null;let o=RX(t);$6e(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=J6e(i);a=K6e(o[c],l)}return a}function RX(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let c={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Xr(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=gg([r,c.relativePath]),u=n.concat(c);i.children&&i.children.length>0&&(Xr(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),RX(i.children,e,u,l)),!(i.path==null&&!i.index)&&e.push({path:l,score:q6e(l,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let c of PX(i.path))s(i,o,c)}),e}function PX(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=PX(r.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function $6e(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:V6e(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const F6e=/^:[\w-]+$/,j6e=3,W6e=2,z6e=1,H6e=10,G6e=-2,P9=t=>t==="*";function q6e(t,e){let n=t.split("/"),r=n.length;return n.some(P9)&&(r+=G6e),e&&(r+=W6e),n.filter(s=>!P9(s)).reduce((s,i)=>s+(F6e.test(i)?j6e:i===""?z6e:H6e),r)}function V6e(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function K6e(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=i==="/"?e:e.slice(i.length)||"/",d=Y6e({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:gg([i,d.pathname]),pathnameBase:r8e(gg([i,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(i=gg([i,d.pathnameBase]))}return o}function Y6e(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Q6e(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:t}}function Q6e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),NX(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function J6e(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return NX(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function OX(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Z6e(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?bb(t):t;return{pathname:n?n.startsWith("/")?n:X6e(n,e):e,search:s8e(r),hash:i8e(s)}}function X6e(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kO(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e8e(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function t8e(t,e){let n=e8e(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function n8e(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=bb(t):(s=HC({},t),Xr(!s.pathname||!s.pathname.includes("?"),kO("?","pathname","search",s)),Xr(!s.pathname||!s.pathname.includes("#"),kO("#","pathname","hash",s)),Xr(!s.search||!s.search.includes("#"),kO("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=Z6e(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const gg=t=>t.join("/").replace(/\/\/+/g,"/"),r8e=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),s8e=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,i8e=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function o8e(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kX=["post","put","patch","delete"];new Set(kX);const a8e=["get",...kX];new Set(a8e);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function GC(){return GC=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},GC.apply(this,arguments)}const LU=k.createContext(null),c8e=k.createContext(null),IT=k.createContext(null),NT=k.createContext(null),vb=k.createContext({outlet:null,matches:[],isDataRoute:!1}),DX=k.createContext(null);function TT(){return k.useContext(NT)!=null}function MX(){return TT()||Xr(!1),k.useContext(NT).location}function LX(t){k.useContext(IT).static||k.useLayoutEffect(t)}function l8e(){let{isDataRoute:t}=k.useContext(vb);return t?C8e():u8e()}function u8e(){TT()||Xr(!1);let t=k.useContext(LU),{basename:e,future:n,navigator:r}=k.useContext(IT),{matches:s}=k.useContext(vb),{pathname:i}=MX(),o=JSON.stringify(t8e(s,n.v7_relativeSplatPath)),a=k.useRef(!1);return LX(()=>{a.current=!0}),k.useCallback(function(l,u){if(u===void 0&&(u={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let d=n8e(l,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:gg([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}function d8e(t,e){return h8e(t,e)}function h8e(t,e,n,r){TT()||Xr(!1);let{navigator:s}=k.useContext(IT),{matches:i}=k.useContext(vb),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=MX(),u;if(e){var d;let w=typeof e=="string"?bb(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||Xr(!1),u=w}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=U6e(t,{pathname:f}),g=y8e(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},a,w.params),pathname:gg([c,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:gg([c,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,r);return e&&g?k.createElement(NT.Provider,{value:{location:GC({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Lh.Pop}},g):g}function f8e(){let t=E8e(),e=o8e(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:s},n):null,null)}const p8e=k.createElement(f8e,null);class g8e extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?k.createElement(vb.Provider,{value:this.props.routeContext},k.createElement(DX.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function m8e(t){let{routeContext:e,match:n,children:r}=t,s=k.useContext(LU);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(vb.Provider,{value:e},r)}function y8e(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Xr(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,g=null,w=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||p8e,c&&(l<0&&h===0?(_8e("route-fallback"),p=!0,w=null):l===h&&(p=!0,w=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=g:p?v=w:d.route.Component?v=k.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,k.createElement(m8e,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?k.createElement(g8e,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:b(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):b()},null)}var UX=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UX||{}),BX=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(BX||{});function w8e(t){let e=k.useContext(LU);return e||Xr(!1),e}function b8e(t){let e=k.useContext(c8e);return e||Xr(!1),e}function v8e(t){let e=k.useContext(vb);return e||Xr(!1),e}function $X(t){let e=v8e(),n=e.matches[e.matches.length-1];return n.route.id||Xr(!1),n.route.id}function E8e(){var t;let e=k.useContext(DX),n=b8e(),r=$X();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function C8e(){let{router:t}=w8e(UX.UseNavigateStable),e=$X(BX.UseNavigateStable),n=k.useRef(!1);return LX(()=>{n.current=!0}),k.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,GC({fromRouteId:e},i)))},[t,e])}const O9={};function _8e(t,e,n){O9[t]||(O9[t]=!0)}function A8e(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function RS(t){Xr(!1)}function S8e(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Lh.Pop,navigator:i,static:o=!1,future:a}=t;TT()&&Xr(!1);let c=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:c,navigator:i,static:o,future:GC({v7_relativeSplatPath:!1},a)}),[c,a,i,o]);typeof r=="string"&&(r=bb(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=k.useMemo(()=>{let w=OX(u,c);return w==null?null:{location:{pathname:w,search:d,hash:h,state:f,key:p},navigationType:s}},[c,u,d,h,f,p,s]);return g==null?null:k.createElement(IT.Provider,{value:l},k.createElement(NT.Provider,{children:n,value:g}))}function x8e(t){let{children:e,location:n}=t;return d8e(I3(e),n)}new Promise(()=>{});function I3(t,e){e===void 0&&(e=[]);let n=[];return k.Children.forEach(t,(r,s)=>{if(!k.isValidElement(r))return;let i=[...e,s];if(r.type===k.Fragment){n.push.apply(n,I3(r.props.children,i));return}r.type!==RS&&Xr(!1),!r.props.index||!r.props.children||Xr(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=I3(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const I8e="6";try{window.__reactRouterVersion=I8e}catch{}const N8e="startTransition",k9=are[N8e];function T8e(t){let{basename:e,children:n,future:r,window:s}=t,i=k.useRef();i.current==null&&(i.current=D6e({window:s,v5Compat:!0}));let o=i.current,[a,c]=k.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},u=k.useCallback(d=>{l&&k9?k9(()=>c(d)):c(d)},[c,l]);return k.useLayoutEffect(()=>o.listen(u),[o,u]),k.useEffect(()=>A8e(r),[r]),k.createElement(S8e,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var D9;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(D9||(D9={}));var M9;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(M9||(M9={}));const R8e=Uc({body:{margin:0,height:"100vh",width:"100vw",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",cursor:'url("/assets/lawbpointer.png"), auto'}});function P8e(){const t=R8e(),{open:e}=h1(),[n,r]=k.useState(),[s,i]=k.useState(!1),[o,a]=k.useState("pixelawbs-popup"),[c,l]=k.useState(new Set),[u,d]=k.useState(!1),[h,f]=k.useState(!1),[p,g]=k.useState(!1),[w,m]=k.useState(!1),b=l8e(),v=k.useRef(null);k.useEffect(()=>{if(o==="halloween-popup"&&v.current){const I=v.current.querySelector("script[data-tiktok-embed]");I&&I.remove();const R=document.createElement("script");R.src="https://www.tiktok.com/embed.js",R.async=!0,R.setAttribute("data-tiktok-embed","true"),v.current.appendChild(R)}},[o]);const A=(I,R,B)=>{if(I==="url"&&B)window.open(B,"_blank");else if(I==="popup"&&R)a(R),l(O=>{const M=new Set(O);return M.delete(R),M}),document.body.offsetWidth;else if(I==="wallet")s?(i(!1),r(void 0)):e();else if(I==="mint"){if(!n){alert("Please connect your wallet first!");return}d(!0)}else I==="nft-gallery"?f(!0):I==="meme-generator"?g(!0):I==="chess"&&(s?m(!0):e().then(()=>{const O=()=>{window.ethereum&&window.ethereum.selectedAddress?m(!0):setTimeout(O,200)};O()}))},C=()=>a(null),T=I=>{l(R=>new Set(R).add(I)),a(null)},x=I=>{I==="mint-popup"?d(!0):I==="nft-gallery-popup"?f(!0):I==="meme-generator-popup"?g(!0):a(I),l(R=>{const B=new Set(R);return B.delete(I),B})},N=()=>d(!1),S=()=>f(!1),D=()=>g(!1),P=()=>{d(!1),l(I=>new Set(I).add("mint-popup"))},$=()=>{f(!1),l(I=>new Set(I).add("nft-gallery-popup"))},G=()=>{g(!1),l(I=>new Set(I).add("meme-generator-popup"))},W=y.jsxs("div",{onClick:()=>{s?(i(!1),r(void 0)):e()},style:{cursor:"pointer",display:"flex",alignItems:"center",color:s?"limegreen":"red",fontWeight:"bold"},children:[y.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:s?"limegreen":"red",marginRight:"8px",border:"1px solid black"}}),s?`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]});return y.jsxs("div",{className:t.body,children:[w&&y.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:9999},children:[y.jsx("video",{src:"/images/loadingchess.mp4",style:{width:120,height:120,marginBottom:32},autoPlay:!0,muted:!0,onEnded:()=>{m(!1),b("/chess")}}),y.jsx("div",{style:{color:"#fff",fontSize:28,fontFamily:"monospace",letterSpacing:2},children:"LOADING LAWB CHESS..."})]}),y.jsx(Ume,{onIconClick:A}),y.jsx($me,{minimizedWindows:Array.from(c),onRestoreWindow:x,walletButton:W,connectionStatus:{connected:s,address:n,ens:void 0}}),y.jsxs(ha,{id:"chat-popup",isOpen:o==="chat-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["join the chat, there is no meme we lawb you ",y.jsx("a",{href:"https://boards.miladychan.org/milady/33793",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"/milady/33793"})]}),y.jsx("img",{src:"/assets/miladychanfaq.png",alt:"Milady Chan FAQ",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(ha,{id:"purity-popup",isOpen:o==="purity-popup",onClose:C,onMinimize:T,children:[y.jsx("p",{style:{marginBottom:"10px"},children:"purify your wallet and cleanse your soul with Purity Finance."}),y.jsx("p",{style:{marginBottom:"10px"},children:"swap any sol token in your wallet directly for $LAWB"}),y.jsx("a",{href:"https://www.purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"},children:"click to Purify"}),y.jsx("img",{src:"/assets/puritylawb.png",alt:"Purity Lawb",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(ha,{id:"lawbstarz-popup",isOpen:o==="lawbstarz-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",y.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",y.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",y.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsxs("blockquote",{className:"twitter-tweet","data-media-max-width":"560",children:[y.jsxs("p",{lang:"en",dir:"ltr",children:["The following  has been transcripted from a live news broadcast:",y.jsx("br",{}),y.jsx("br",{}),"Anchor: Good evening, viewers. Tonight, we embark on an extraordinary journey that defies rational explanation. It all began with February's Cigawrette Packs cargo ship hijacking, little did we know that the.. ",y.jsx("a",{href:"https://t.co/BWgLOk59N4",children:"pic.twitter.com/BWgLOk59N4"})]})," wables (@wables411) ",y.jsx("a",{href:"https://twitter.com/wables411/status/1669009492007354369?ref_src=twsrc%5Etfw",children:"June 14, 2023"})]}),y.jsx("script",{async:!0,src:"https://platform.twitter.com/widgets.js"}),y.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(ha,{id:"lawbstation-popup",isOpen:o==="lawbstation-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",y.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",children:"Collect Lawbstations on Secondary"})}),y.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(ha,{id:"nexus-popup",isOpen:o==="nexus-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",y.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),y.jsxs(ha,{id:"lawbsters-popup",isOpen:o==="lawbsters-popup",onClose:C,onMinimize:T,children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})," or ",y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"NFTX"})]}),y.jsx("div",{style:{maxWidth:"400px",margin:"0 auto"},children:y.jsx(ofe,{id:"1620879129850834944"})}),y.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),y.jsx(ha,{id:"pixelawbs-popup",isOpen:o==="pixelawbs-popup",onClose:C,onMinimize:T,children:(()=>{const I=R=>{R.preventDefault(),a(null),d(!0)};return y.jsxs(y.Fragment,{children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:I,children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"PixeladyMaker"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/mint.gif",alt:"Mint",style:{maxWidth:"100%"}})]})})()}),y.jsxs(ha,{id:"halloween-popup",isOpen:o==="halloween-popup",onClose:C,onMinimize:T,children:[y.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),y.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}}),y.jsx("div",{ref:v,style:{maxWidth:"400px",margin:"0 auto"},children:y.jsx("blockquote",{className:"tiktok-embed",cite:"https://www.tiktok.com/@wables.eth/video/7295660710644682027","data-video-id":"7295660710644682027",style:{maxWidth:"605px",minWidth:"325px"},children:y.jsxs("section",{children:[y.jsx("a",{target:"_blank",rel:"noreferrer",title:"@wables.eth",href:"https://www.tiktok.com/@wables.eth?refer=embed",children:"@wables.eth"})," 420 lawbsters hijacked a spirit halloween superstore  minting rn on @ourzora via @PC69 ",y.jsx("a",{target:"_blank",rel:"noreferrer",title:" original sound - wables.eth",href:"https://www.tiktok.com/music/original-sound-7295660837769857835?refer=embed",children:" original sound - wables.eth"})]})})})]}),y.jsxs(ha,{id:"lawb-popup",isOpen:o==="lawb-popup",onClose:C,onMinimize:T,children:[y.jsx("h1",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:" $LAWB"})}),y.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",y.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"pump.fun"}),"."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),y.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",y.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),y.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"blue",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),y.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),y.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:y.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}),y.jsx(Wme,{isOpen:u,onClose:N,onMinimize:P,walletAddress:n||""}),y.jsx(A6e,{isOpen:h,onClose:S,onMinimize:$,walletAddress:n}),y.jsx(ha,{id:"meme-generator-popup",isOpen:p,onClose:D,onMinimize:G,children:y.jsx(IX,{})})]})}function Ko(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const s=t[n];return typeof s=="function"?s:i=>e(t,i)}const PS="2.17.3",O8e=()=>`@wagmi/core@${PS}`;var FX=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},wI,jX;let md=class N3 extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return O8e()}constructor(e,n={}){var i;super(),wI.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const r=n.cause instanceof N3?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof N3&&n.cause.docsPath||n.docsPath;this.message=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${n.docsSlug?`#${n.docsSlug}`:""}`]:[],...r?[`Details: ${r}`]:[],`Version: ${this.version}`].join(`
`),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=e}walk(e){return FX(this,wI,"m",jX).call(this,this,e)}};wI=new WeakSet,jX=function t(e,n){return n!=null&&n(e)?e:e.cause?FX(this,wI,"m",t).call(this,e.cause,n):e};class qC extends md{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class k8e extends md{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class D8e extends md{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class M8e extends md{constructor({address:e,connector:n}){super(`Account "${e}" not found for connector "${n.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class L8e extends md{constructor({connectionChainId:e,connectorChainId:n}){super(`The current chain of the connector (id: ${n}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class U8e extends md{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function OS(t,e){var r;let n;if(typeof e.connector=="function"?n=t._internal.connectors.setup(e.connector):n=e.connector,n.uid===t.state.current)throw new k8e;try{t.setState(c=>({...c,status:"connecting"})),n.emitter.emit("message",{type:"connecting"});const{connector:s,...i}=e,o=await n.connect(i),a=o.accounts;return n.emitter.off("connect",t._internal.events.connect),n.emitter.on("change",t._internal.events.change),n.emitter.on("disconnect",t._internal.events.disconnect),await((r=t.storage)==null?void 0:r.setItem("recentConnectorId",n.id)),t.setState(c=>({...c,connections:new Map(c.connections).set(n.uid,{accounts:a,chainId:o.chainId,connector:n}),current:n.uid,status:"connected"})),{accounts:a,chainId:o.chainId}}catch(s){throw t.setState(i=>({...i,status:i.current?"connected":"disconnected"})),s}}async function f1(t,e={}){let n;if(e.connector){const{connector:l}=e;if(t.state.status==="reconnecting"&&!l.getAccounts&&!l.getChainId)throw new U8e({connector:l});const[u,d]=await Promise.all([l.getAccounts().catch(h=>{if(e.account===null)return[];throw h}),l.getChainId()]);n={accounts:u,chainId:d,connector:l}}else n=t.state.connections.get(t.state.current);if(!n)throw new D8e;const r=e.chainId??n.chainId,s=await n.connector.getChainId();if(s!==n.chainId)throw new L8e({connectionChainId:n.chainId,connectorChainId:s});const i=n.connector;if(i.getClient)return i.getClient({chainId:r});const o=Nr(e.account??n.accounts[0]);if(o&&(o.address=Wu(o.address)),e.account&&!n.accounts.some(l=>l.toLowerCase()===o.address.toLowerCase()))throw new M8e({address:o.address,connector:i});const a=t.chains.find(l=>l.id===r),c=await n.connector.getProvider({chainId:r});return DY({account:o,chain:a,name:"Connector Client",transport:l=>Zve(c)({...l,retryCount:0})})}async function T3(t,e={}){var s,i;let n;if(e.connector)n=e.connector;else{const{connections:o,current:a}=t.state,c=o.get(a);n=c==null?void 0:c.connector}const r=t.state.connections;n&&(await n.disconnect(),n.emitter.off("change",t._internal.events.change),n.emitter.off("disconnect",t._internal.events.disconnect),n.emitter.on("connect",t._internal.events.connect),r.delete(n.uid)),t.setState(o=>{if(r.size===0)return{...o,connections:new Map,current:null,status:"disconnected"};const a=r.values().next().value;return{...o,connections:new Map(r),current:a.connector.uid}});{const o=t.state.current;if(!o)return;const a=(s=t.state.connections.get(o))==null?void 0:s.connector;if(!a)return;await((i=t.storage)==null?void 0:i.setItem("recentConnectorId",a.id))}}async function B8e(t,e){const{chainId:n,connector:r,...s}=e;let i;e.account?i=e.account:i=(await f1(t,{account:e.account,chainId:n,connector:r})).account;const o=t.getClient({chainId:n});return Ko(o,qN,"estimateGas")({...s,account:i})}function WX(t){return typeof t=="number"?t:t==="wei"?0:Math.abs(nbe[t])}function Jy(t){const e=t.state.current,n=t.state.connections.get(e),r=n==null?void 0:n.accounts,s=r==null?void 0:r[0],i=t.chains.find(a=>a.id===(n==null?void 0:n.chainId)),o=t.state.status;switch(o){case"connected":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:o};case"reconnecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!!s,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:o};case"connecting":return{address:s,addresses:r,chain:i,chainId:n==null?void 0:n.chainId,connector:n==null?void 0:n.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:o};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:o}}}async function $8e(t,e){const{allowFailure:n=!0,chainId:r,contracts:s,...i}=e,o=t.getClient({chainId:r});return Ko(o,XY,"multicall")({allowFailure:n,contracts:s,...i})}function zX(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Ko(s,jl,"readContract")(r)}async function F8e(t,e){var a;const{allowFailure:n=!0,blockNumber:r,blockTag:s,...i}=e,o=e.contracts;try{const c={};for(const[h,f]of o.entries()){const p=f.chainId??t.state.chainId;c[p]||(c[p]=[]),(a=c[p])==null||a.push({contract:f,index:h})}const l=()=>Object.entries(c).map(([h,f])=>$8e(t,{...i,allowFailure:n,blockNumber:r,blockTag:s,chainId:Number.parseInt(h),contracts:f.map(({contract:p})=>p)})),u=(await Promise.all(l())).flat(),d=Object.values(c).flatMap(h=>h.map(({index:f})=>f));return u.reduce((h,f,p)=>(h&&(h[d[p]]=f),h),[])}catch(c){if(c instanceof VK)throw c;const l=()=>o.map(u=>zX(t,{...u,blockNumber:r,blockTag:s}));return n?(await Promise.allSettled(l())).map(u=>u.status==="fulfilled"?{result:u.value,status:"success"}:{error:u.reason,result:void 0,status:"failure"}):await Promise.all(l())}}async function HX(t,e){const{address:n,blockNumber:r,blockTag:s,chainId:i,token:o,unit:a="ether"}=e;if(o)try{return await L9(t,{balanceAddress:n,chainId:i,symbolType:"string",tokenAddress:o})}catch(h){if(h.name==="ContractFunctionExecutionError"){const f=await L9(t,{balanceAddress:n,chainId:i,symbolType:"bytes32",tokenAddress:o}),p=EK(kl(f.symbol,{dir:"right"}));return{...f,symbol:p}}throw h}const c=t.getClient({chainId:i}),u=await Ko(c,WL,"getBalance")(r?{address:n,blockNumber:r}:{address:n,blockTag:s}),d=t.chains.find(h=>h.id===i)??c.chain;return{decimals:d.nativeCurrency.decimals,formatted:am(u,WX(a)),symbol:d.nativeCurrency.symbol,value:u}}async function L9(t,e){const{balanceAddress:n,chainId:r,symbolType:s,tokenAddress:i,unit:o}=e,a={abi:[{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{type:"address"}],outputs:[{type:"uint256"}]},{type:"function",name:"decimals",stateMutability:"view",inputs:[],outputs:[{type:"uint8"}]},{type:"function",name:"symbol",stateMutability:"view",inputs:[],outputs:[{type:s}]}],address:i},[c,l,u]=await F8e(t,{allowFailure:!1,contracts:[{...a,functionName:"balanceOf",args:[n],chainId:r},{...a,functionName:"decimals",chainId:r},{...a,functionName:"symbol",chainId:r}]}),d=am(c??"0",WX(o??l));return{decimals:l,formatted:d,symbol:u,value:c}}function U9(t){return t.state.chainId}function Ef(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;let n,r;if(Array.isArray(t)&&Array.isArray(e)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ef(t[r],e[r]))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();const s=Object.keys(t);if(n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(i&&!Ef(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}let DO=[];function B9(t){const e=t.chains;return Ef(DO,e)?DO:(DO=e,e)}function j8e(t,e={}){let n;try{n=t.getClient(e)}catch{}return n}let DA=[];function sc(t){const e=[...t.state.connections.values()];return t.state.status==="reconnecting"||Ef(DA,e)?DA:(DA=e,e)}let MO=[];function $9(t){const e=t.connectors;return Ef(MO,e)?MO:(MO=e,e)}function W8e(t,e){const{chainId:n,...r}=e,s=t.getClient({chainId:n});return Ko(s,FY,"getEnsName")(r)}function R3(t,e={}){const n=j8e(t,e);return n==null?void 0:n.extend(m_e)}async function z8e(t,e={}){return(await f1(t,e)).extend(R_e)}async function H8e(t,e){const{account:n,chainId:r,...s}=e,i=n??Jy(t).address,o=t.getClient({chainId:r});return Ko(o,V_,"prepareTransactionRequest")({...s,...i?{account:i}:{}})}let LO=!1;async function P3(t,e={}){var l,u;if(LO)return[];LO=!0,t.setState(d=>({...d,status:d.current?"reconnecting":"connecting"}));const n=[];if((l=e.connectors)!=null&&l.length)for(const d of e.connectors){let h;typeof d=="function"?h=t._internal.connectors.setup(d):h=d,n.push(h)}else n.push(...t.connectors);let r;try{r=await((u=t.storage)==null?void 0:u.getItem("recentConnectorId"))}catch{}const s={};for(const[,d]of t.state.connections)s[d.connector.id]=1;r&&(s[r]=0);const i=Object.keys(s).length>0?[...n].sort((d,h)=>(s[d.id]??10)-(s[h.id]??10)):n;let o=!1;const a=[],c=[];for(const d of i){const h=await d.getProvider().catch(()=>{});if(!h||c.some(g=>g===h)||!await d.isAuthorized())continue;const p=await d.connect({isReconnecting:!0}).catch(()=>null);p&&(d.emitter.off("connect",t._internal.events.connect),d.emitter.on("change",t._internal.events.change),d.emitter.on("disconnect",t._internal.events.disconnect),t.setState(g=>{const w=new Map(o?g.connections:new Map).set(d.uid,{accounts:p.accounts,chainId:p.chainId,connector:d});return{...g,current:o?g.current:d.uid,connections:w}}),a.push({accounts:p.accounts,chainId:p.chainId,connector:d}),c.push(h),o=!0)}return(t.state.status==="reconnecting"||t.state.status==="connecting")&&(o?t.setState(d=>({...d,status:"connected"})):t.setState(d=>({...d,connections:new Map,current:null,status:"disconnected"}))),LO=!1,a}async function G8e(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await f1(t,{account:n??void 0,chainId:r,connector:s}),await Ko(o,Q_,"sendTransaction")({...i,...n?{account:n}:{},chain:r?{id:r}:null,gas:i.gas??void 0})}async function q8e(t,e){const{account:n,connector:r,...s}=e;let i;return typeof n=="object"&&n.type==="local"?i=t.getClient():i=await f1(t,{account:n,connector:r}),Ko(i,IQ,"signMessage")({...s,...n?{account:n}:{}})}class Jd extends md{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class V8e extends md{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}async function O3(t,e){var o;const{addEthereumChainParameter:n,chainId:r}=e,s=t.state.connections.get(((o=e.connector)==null?void 0:o.uid)??t.state.current);if(s){const a=s.connector;if(!a.switchChain)throw new V8e({connector:a});return await a.switchChain({addEthereumChainParameter:n,chainId:r})}const i=t.chains.find(a=>a.id===r);if(!i)throw new qC;return t.setState(a=>({...a,chainId:r})),i}function GX(t,e){const{onChange:n}=e;return t.subscribe(()=>Jy(t),n,{equalityFn(r,s){const{connector:i,...o}=r,{connector:a,...c}=s;return Ef(o,c)&&(i==null?void 0:i.id)===(a==null?void 0:a.id)&&(i==null?void 0:i.uid)===(a==null?void 0:a.uid)}})}function K8e(t,e){const{onChange:n}=e;return t.subscribe(r=>r.chainId,n)}function qX(t,e){const{onChange:n}=e;return t.subscribe(()=>sc(t),n,{equalityFn:Ef})}function VX(t,e){const{onChange:n}=e;return t._internal.connectors.subscribe((r,s)=>{n(Object.values(r),s)})}function Y8e(t,e){const{syncConnectedChain:n=t._internal.syncConnectedChain,...r}=e;let s;const i=c=>{s&&s();const l=t.getClient({chainId:c});return s=Ko(l,SQ,"watchPendingTransactions")(r),s},o=i(e.chainId);let a;return n&&!e.chainId&&(a=t.subscribe(({chainId:c})=>c,async c=>i(c))),()=>{o==null||o(),a==null||a()}}function Q8e(t,e){const{onChange:n}=e;return t.subscribe(()=>R3(t),n,{equalityFn(r,s){return(r==null?void 0:r.uid)===(s==null?void 0:s.uid)}})}async function KX(t,e){const{chainId:n,timeout:r=0,...s}=e,i=t.getClient({chainId:n}),a=await Ko(i,AQ,"waitForTransactionReceipt")({...s,timeout:r});if(a.status==="reverted"){const l=await Ko(i,eT,"getTransaction")({hash:a.transactionHash}),d=await Ko(i,K_,"call")({...l,data:l.input,gasPrice:l.type!=="eip1559"?l.gasPrice:void 0,maxFeePerGas:l.type==="eip1559"?l.maxFeePerGas:void 0,maxPriorityFeePerGas:l.type==="eip1559"?l.maxPriorityFeePerGas:void 0}),h=d!=null&&d.data?EK(`0x${d.data.substring(138)}`):"unknown reason";throw new Error(h)}return{...a,chainId:i.chain.id}}async function YX(t,e){const{account:n,chainId:r,connector:s,...i}=e;let o;return typeof n=="object"&&(n==null?void 0:n.type)==="local"?o=t.getClient({chainId:r}):o=await f1(t,{account:n??void 0,chainId:r,connector:s}),await Ko(o,NY,"writeContract")({...i,...n?{account:n}:{},chain:r?{id:r}:null})}function nKe(t){return t}RT.type="injected";function RT(t={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:n}=t;function r(){const c=t.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...J8e[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l==null?void 0:l.ethereum}}}let s,i,o,a;return c=>({get icon(){return r().icon},get id(){return r().id},get name(){return r().name},get supportsSimulation(){return!0},type:RT.type,async setup(){const l=await this.getProvider();l!=null&&l.on&&t.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u}={}){var f,p,g,w,m,b;const d=await this.getProvider();if(!d)throw new Jd;let h=[];if(u)h=await this.getAccounts().catch(()=>[]);else if(e)try{h=(w=(g=(p=(f=(await d.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0])==null?void 0:f.caveats)==null?void 0:p[0])==null?void 0:g.value)==null?void 0:w.map(A=>Wu(A)),h.length>0&&(h=await this.getAccounts())}catch(v){const A=v;if(A.code===Hr.code)throw new Hr(A);if(A.code===ef.code)throw A}try{!(h!=null&&h.length)&&!u&&(h=(await d.request({method:"eth_requestAccounts"})).map(C=>Wu(C))),o&&(d.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),d.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),d.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),d.on("disconnect",a));let v=await this.getChainId();if(l&&v!==l){const A=await this.switchChain({chainId:l}).catch(C=>{if(C.code===Hr.code)throw C;return{id:v}});v=(A==null?void 0:A.id)??v}return e&&await((m=c.storage)==null?void 0:m.removeItem(`${this.id}.disconnected`)),t.target||await((b=c.storage)==null?void 0:b.setItem("injected.connected",!0)),{accounts:h,chainId:v}}catch(v){const A=v;throw A.code===Hr.code?new Hr(A):A.code===ef.code?new ef(A):A}},async disconnect(){var u,d;const l=await this.getProvider();if(!l)throw new Jd;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await MY(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await((u=c.storage)==null?void 0:u.setItem(`${this.id}.disconnected`,!0)),t.target||await((d=c.storage)==null?void 0:d.removeItem("injected.connected"))},async getAccounts(){const l=await this.getProvider();if(!l)throw new Jd;return(await l.request({method:"eth_accounts"})).map(d=>Wu(d))},async getChainId(){const l=await this.getProvider();if(!l)throw new Jd;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=r();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=kS(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){var l,u;try{if(e&&await((l=c.storage)==null?void 0:l.getItem(`${this.id}.disconnected`))||!t.target&&!await((u=c.storage)==null?void 0:u.getItem("injected.connected")))return!1;if(!await this.getProvider()){if(n!==void 0&&n!==!1){const p=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",p),!!await this.getProvider()),g=typeof n=="number"?n:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(m=>window.addEventListener("ethereum#initialized",()=>m(p()),{once:!0}))]:[],new Promise(m=>setTimeout(()=>m(p()),g))]))return!0}throw new Jd}return!!(await Hx(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){var p,g,w,m;const d=await this.getProvider();if(!d)throw new Jd;const h=c.chains.find(b=>b.id===u);if(!h)throw new $l(new qC);const f=new Promise(b=>{const v=A=>{"chainId"in A&&A.chainId===u&&(c.emitter.off("change",v),b())};c.emitter.on("change",v)});try{return await Promise.all([d.request({method:"wallet_switchEthereumChain",params:[{chainId:et(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),f]),h}catch(b){const v=b;if(v.code===4902||((g=(p=v==null?void 0:v.data)==null?void 0:p.originalError)==null?void 0:g.code)===4902)try{const{default:A,...C}=h.blockExplorers??{};let T;l!=null&&l.blockExplorerUrls?T=l.blockExplorerUrls:A&&(T=[A.url,...Object.values(C).map(S=>S.url)]);let x;(w=l==null?void 0:l.rpcUrls)!=null&&w.length?x=l.rpcUrls:x=[((m=h.rpcUrls.default)==null?void 0:m.http[0])??""];const N={blockExplorerUrls:T,chainId:et(u),chainName:(l==null?void 0:l.chainName)??h.name,iconUrls:l==null?void 0:l.iconUrls,nativeCurrency:(l==null?void 0:l.nativeCurrency)??h.nativeCurrency,rpcUrls:x};return await Promise.all([d.request({method:"wallet_addEthereumChain",params:[N]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Hr(new Error("User rejected switch after adding network."))}),f]),h}catch(A){throw new Hr(A)}throw v.code===Hr.code?new Hr(v):new $l(v)}},async onAccountsChanged(l){var u;if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const d=(await this.getChainId()).toString();this.onConnect({chainId:d}),e&&await((u=c.storage)==null?void 0:u.removeItem(`${this.id}.disconnected`))}else c.emitter.emit("change",{accounts:l.map(d=>Wu(d))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const d=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:d});const h=await this.getProvider();h&&(o&&(h.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),h.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),h.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),h.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const J8e={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(t){return t!=null&&t.coinbaseWalletExtension?t.coinbaseWalletExtension:kS(t,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(t){return kS(t,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const n=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const r of n)if(e[r])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(t){var e,n;return(e=t==null?void 0:t.phantom)!=null&&e.ethereum?(n=t.phantom)==null?void 0:n.ethereum:kS(t,"isPhantom")}}};function kS(t,e){function n(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const r=t.ethereum;if(r!=null&&r.providers)return r.providers.find(s=>n(s));if(r&&n(r))return r}function Z8e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function X8e(){const t=new Set;let e=[];const n=()=>Z8e(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],t.forEach(i=>i(e,{added:[s]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(s,{emitImmediately:i}={}){return t.add(s),i&&s(e,{added:e}),()=>t.delete(s)}}}const e4e=t=>(e,n,r)=>{const s=r.subscribe;return r.subscribe=(o,a,c)=>{let l=o;if(a){const u=(c==null?void 0:c.equalityFn)||Object.is;let d=o(r.getState());l=h=>{const f=o(h);if(!u(d,f)){const p=d;a(d=f,p)}},c!=null&&c.fireImmediately&&a(d,d)}return s(l)},t(e,n,r)},t4e=e4e;function n4e(t,e){let n;try{n=t()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),a=(i=n.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>n.setItem(s,JSON.stringify(i,void 0)),removeItem:s=>n.removeItem(s)}}const k3=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(r){return k3(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return k3(r)(n)}}}},r4e=(t,e)=>(n,r,s)=>{let i={storage:n4e(()=>localStorage),partialize:g=>g,version:0,merge:(g,w)=>({...w,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return t((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},r,s);const u=()=>{const g=i.partialize({...r()});return l.setItem(i.name,{state:g,version:i.version})},d=s.setState;s.setState=(g,w)=>{d(g,w),u()};const h=t((...g)=>{n(...g),u()},r,s);s.getInitialState=()=>h;let f;const p=()=>{var g,w;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=r())!=null?v:h)});const m=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(g=r())!=null?g:h))||void 0;return k3(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[A,C]=b;if(f=i.merge(C,(v=r())!=null?v:h),n(f,!0),A)return u()}).then(()=>{m==null||m(f,void 0),f=r(),o=!0,c.forEach(b=>b(f))}).catch(b=>{m==null||m(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l==null||l.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>p(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||p(),f||h},s4e=r4e,F9=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??(typeof d!="object"||d===null)?d:Object.assign({},e,d),n.forEach(f=>f(e,h))}},s=()=>e,a={setState:r,getState:s,getInitialState:()=>c,subscribe:l=>(n.add(l),()=>n.delete(l))},c=e=t(r,s,a);return a},UO=t=>t?F9(t):F9;var QX={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new s(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var w=this._events[g],m=arguments.length,b,v;if(w.fn){switch(w.once&&this.removeListener(l,w.fn,void 0,!0),m){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,u),!0;case 3:return w.fn.call(w.context,u,d),!0;case 4:return w.fn.call(w.context,u,d,h),!0;case 5:return w.fn.call(w.context,u,d,h,f),!0;case 6:return w.fn.call(w.context,u,d,h,f,p),!0}for(v=1,b=new Array(m-1);v<m;v++)b[v-1]=arguments[v];w.fn.apply(w.context,b)}else{var A=w.length,C;for(v=0;v<A;v++)switch(w[v].once&&this.removeListener(l,w[v].fn,void 0,!0),m){case 1:w[v].fn.call(w[v].context);break;case 2:w[v].fn.call(w[v].context,u);break;case 3:w[v].fn.call(w[v].context,u,d);break;case 4:w[v].fn.call(w[v].context,u,d,h);break;default:if(!b)for(C=1,b=new Array(m-1);C<m;C++)b[C-1]=arguments[C];w[v].fn.apply(w[v].context,b)}}return!0},a.prototype.on=function(l,u,d){return i(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return i(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var g=0,w=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&w.push(p[g]);w.length?this._events[f]=w.length===1?w[0]:w:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(QX);var i4e=QX.exports;const o4e=Zg(i4e);class a4e{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new o4e})}on(e,n){this._emitter.on(e,n)}once(e,n){this._emitter.once(e,n)}off(e,n){this._emitter.off(e,n)}emit(e,...n){const r=n[0];this._emitter.emit(e,{uid:this.uid,...r})}listenerCount(e){return this._emitter.listenerCount(e)}}function c4e(t){return new a4e(t)}function l4e(t,e){return JSON.parse(t,(n,r)=>{let s=r;return(s==null?void 0:s.__type)==="bigint"&&(s=BigInt(s.value)),(s==null?void 0:s.__type)==="Map"&&(s=new Map(s.value)),(e==null?void 0:e(n,s))??s})}function j9(t,e){return t.slice(0,e).join(".")||"."}function W9(t,e){const{length:n}=t;for(let r=0;r<n;++r)if(t[r]===e)return r+1;return 0}function u4e(t,e){const n=typeof t=="function",r=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=W9(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=W9(s,c);if(u!==0)return r?e.call(this,a,c,j9(i,u)):`[ref=${j9(i,u)}]`}else s[0]=c,i[0]=a;return n?t.call(this,a,c):c}}function d4e(t,e,n,r){return JSON.stringify(t,u4e((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),(e==null?void 0:e(s,o))??o},r),n??void 0)}function h4e(t){const{deserialize:e=l4e,key:n="wagmi",serialize:r=d4e,storage:s=JX}=t;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:n,async getItem(o,a){const c=s.getItem(`${n}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${n}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,r(a)))},async removeItem(o){await i(s.removeItem(`${n}.${o}`))}}}const JX={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function f4e(){const t=typeof window<"u"&&window.localStorage?window.localStorage:JX;return{getItem(e){return t.getItem(e)},removeItem(e){t.removeItem(e)},setItem(e,n){try{t.setItem(e,n)}catch{}}}}const D3=256;let MA=D3,LA;function p4e(t=11){if(!LA||MA+t>D3*2){LA="",MA=0;for(let e=0;e<D3;e++)LA+=(256+Math.random()*256|0).toString(16).substring(1)}return LA.substring(MA,MA+++t)}function ZX(t){const{multiInjectedProviderDiscovery:e=!0,storage:n=h4e({storage:f4e()}),syncConnectedChain:r=!0,ssr:s=!1,...i}=t,o=typeof window<"u"&&e?X8e():void 0,a=UO(()=>i.chains),c=UO(()=>{const C=[],T=new Set;for(const x of i.connectors??[]){const N=l(x);if(C.push(N),!s&&N.rdns){const S=typeof N.rdns=="string"?[N.rdns]:N.rdns;for(const D of S)T.add(D)}}if(!s&&o){const x=o.getProviders();for(const N of x)T.has(N.info.rdns)||C.push(l(u(N)))}return C});function l(C){var N;const T=c4e(p4e()),x={...C({emitter:T,chains:a.getState(),storage:n,transports:i.transports}),emitter:T,uid:T.uid};return T.on("connect",v),(N=x.setup)==null||N.call(x),x}function u(C){const{info:T}=C,x=C.provider;return RT({target:{...T,id:T.rdns,provider:x}})}const d=new Map;function h(C={}){const T=C.chainId??w.getState().chainId,x=a.getState().find(S=>S.id===T);if(C.chainId&&!x)throw new qC;{const S=d.get(w.getState().chainId);if(S&&!x)return S;if(!x)throw new qC}{const S=d.get(T);if(S)return S}let N;if(i.client)N=i.client({chain:x});else{const S=x.id,D=a.getState().map(G=>G.id),P={},$=Object.entries(i);for(const[G,W]of $)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof W=="object")if(S in W)P[G]=W[S];else{if(D.some(R=>R in W))continue;P[G]=W}else P[G]=W;N=DY({...P,chain:x,batch:P.batch??{multicall:!0},transport:G=>i.transports[S]({...G,connectors:c})})}return d.set(T,N),N}function f(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let p;const g="0.0.0-canary-";PS.startsWith(g)?p=Number.parseInt(PS.replace(g,"")):p=Number.parseInt(PS.split(".")[0]??"0");const w=UO(t4e(n?s4e(f,{migrate(C,T){if(T===p)return C;const x=f(),N=m(C,x.chainId);return{...x,chainId:N}},name:"store",partialize(C){return{connections:{__type:"Map",value:Array.from(C.connections.entries()).map(([T,x])=>{const{id:N,name:S,type:D,uid:P}=x.connector;return[T,{...x,connector:{id:N,name:S,type:D,uid:P}}]})},chainId:C.chainId,current:C.current}},merge(C,T){typeof C=="object"&&C&&"status"in C&&delete C.status;const x=m(C,T.chainId);return{...T,...C,chainId:x}},skipHydration:s,storage:n,version:p}):f));w.setState(f());function m(C,T){return C&&typeof C=="object"&&"chainId"in C&&typeof C.chainId=="number"&&a.getState().some(x=>x.id===C.chainId)?C.chainId:T}r&&w.subscribe(({connections:C,current:T})=>{var x;return T?(x=C.get(T))==null?void 0:x.chainId:void 0},C=>{if(a.getState().some(x=>x.id===C))return w.setState(x=>({...x,chainId:C??x.chainId}))}),o==null||o.subscribe(C=>{const T=new Set,x=new Set;for(const S of c.getState())if(T.add(S.id),S.rdns){const D=typeof S.rdns=="string"?[S.rdns]:S.rdns;for(const P of D)x.add(P)}const N=[];for(const S of C){if(x.has(S.info.rdns))continue;const D=l(u(S));T.has(D.id)||N.push(D)}n&&!w.persist.hasHydrated()||c.setState(S=>[...S,...N],!0)});function b(C){w.setState(T=>{const x=T.connections.get(C.uid);return x?{...T,connections:new Map(T.connections).set(C.uid,{accounts:C.accounts??x.accounts,chainId:C.chainId??x.chainId,connector:x.connector})}:T})}function v(C){w.getState().status==="connecting"||w.getState().status==="reconnecting"||w.setState(T=>{const x=c.getState().find(N=>N.uid===C.uid);return x?(x.emitter.listenerCount("connect")&&x.emitter.off("connect",b),x.emitter.listenerCount("change")||x.emitter.on("change",b),x.emitter.listenerCount("disconnect")||x.emitter.on("disconnect",A),{...T,connections:new Map(T.connections).set(C.uid,{accounts:C.accounts,chainId:C.chainId,connector:x}),current:C.uid,status:"connected"}):T})}function A(C){w.setState(T=>{const x=T.connections.get(C.uid);if(x){const S=x.connector;S.emitter.listenerCount("change")&&x.connector.emitter.off("change",b),S.emitter.listenerCount("disconnect")&&x.connector.emitter.off("disconnect",A),S.emitter.listenerCount("connect")||x.connector.emitter.on("connect",v)}if(T.connections.delete(C.uid),T.connections.size===0)return{...T,connections:new Map,current:null,status:"disconnected"};const N=T.connections.values().next().value;return{...T,connections:new Map(T.connections),current:N.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:n,getClient:h,get state(){return w.getState()},setState(C){let T;typeof C=="function"?T=C(w.getState()):T=C;const x=f();typeof T!="object"&&(T=x),Object.keys(x).some(S=>!(S in T))&&(T=x),w.setState(T,!0)},subscribe(C,T,x){return w.subscribe(C,T,x?{...x,fireImmediately:x.emitImmediately}:void 0)},_internal:{mipd:o,store:w,ssr:!!s,syncConnectedChain:r,transports:i.transports,chains:{setState(C){const T=typeof C=="function"?C(a.getState()):C;if(T.length!==0)return a.setState(T,!0)},subscribe(C){return a.subscribe(C)}},connectors:{providerDetailToConnector:u,setup:l,setState(C){return c.setState(typeof C=="function"?C(c.getState()):C,!0)},subscribe(C){return c.subscribe(C)}},events:{change:b,connect:v,disconnect:A}}}}function g4e(t,e){const{initialState:n,reconnectOnMount:r}=e;return n&&!t._internal.store.persist.hasHydrated()&&t.setState({...n,chainId:t.chains.some(s=>s.id===n.chainId)?n.chainId:t.chains[0].id,connections:r?n.connections:new Map,status:r?"reconnecting":"disconnected"}),{async onMount(){t._internal.ssr&&(await t._internal.store.persist.rehydrate(),t._internal.mipd&&t._internal.connectors.setState(s=>{var c;const i=new Set;for(const l of s??[])if(l.rdns){const u=Array.isArray(l.rdns)?l.rdns:[l.rdns];for(const d of u)i.add(d)}const o=[],a=((c=t._internal.mipd)==null?void 0:c.getProviders())??[];for(const l of a){if(i.has(l.info.rdns))continue;const u=t._internal.connectors.providerDetailToConnector(l),d=t._internal.connectors.setup(u);o.push(d)}return[...s,...o]})),r?P3(t):t.storage&&t.setState(s=>({...s,connections:new Map}))}}}function m4e(t){const{children:e,config:n,initialState:r,reconnectOnMount:s=!0}=t,{onMount:i}=g4e(n,{initialState:r,reconnectOnMount:s});n._internal.ssr||i();const o=k.useRef(!0);return k.useEffect(()=>{if(o.current&&n._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const XX=k.createContext(void 0);function y4e(t){const{children:e,config:n}=t,r={value:n};return k.createElement(m4e,t,k.createElement(XX.Provider,r,e))}const w4e="2.15.6",b4e=()=>`wagmi@${w4e}`;class v4e extends md{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return b4e()}}class E4e extends v4e{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Ti(t={}){const e=t.config??k.useContext(XX);if(!e)throw new E4e;return e}function C4e(t,e){const{onChange:n}=e;return t._internal.chains.subscribe((r,s)=>{n(r,s)})}var eee={exports:{}},tee={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PT=k,_4e=Gq;function A4e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var S4e=typeof Object.is=="function"?Object.is:A4e,x4e=_4e.useSyncExternalStore,I4e=PT.useRef,N4e=PT.useEffect,T4e=PT.useMemo,R4e=PT.useDebugValue;tee.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=I4e(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=T4e(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,S4e(u,f))return p;var g=r(f);return s!==void 0&&s(p,g)?(u=f,p):(u=f,d=g)}var l=!1,u,d,h=n===void 0?null:n;return[function(){return c(e())},h===null?void 0:function(){return c(h())}]},[e,n,r,s]);var a=x4e(t,i[0],i[1]);return N4e(function(){o.hasValue=!0,o.value=a},[a]),R4e(a),a};eee.exports=tee;var nee=eee.exports;const BO=t=>typeof t=="object"&&!Array.isArray(t);function P4e(t,e,n=e,r=Ef){const s=k.useRef([]),i=nee.useSyncExternalStoreWithSelector(t,e,n,o=>o,(o,a)=>{if(BO(o)&&BO(a)&&s.current.length){for(const c of s.current)if(!r(o[c],a[c]))return!1;return!0}return r(o,a)});return k.useMemo(()=>{if(BO(i)){const o={...i};let a={};for(const[c,l]of Object.entries(o))a={...a,[c]:{configurable:!1,enumerable:!0,get:()=>(s.current.includes(c)||s.current.push(c),l)}};return Object.defineProperties(o,a),o}return i},[i])}function p1(t={}){const e=Ti(t);return P4e(n=>GX(e,{onChange:n}),()=>Jy(e))}var Eb=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hg=typeof window>"u"||"Deno"in globalThis;function pi(){}function O4e(t,e){return typeof t=="function"?t(e):t}function M3(t){return typeof t=="number"&&t>=0&&t!==1/0}function ree(t,e){return Math.max(t+(e||0)-Date.now(),0)}function cf(t,e){return typeof t=="function"?t(e):t}function Sa(t,e){return typeof t=="function"?t(e):t}function z9(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:a}=t;if(o){if(r){if(e.queryHash!==UU(o,e.options))return!1}else if(!VC(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||s&&s!==e.state.fetchStatus||i&&!i(e))}function H9(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Gg(e.options.mutationKey)!==Gg(i))return!1}else if(!VC(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function UU(t,e){return((e==null?void 0:e.queryKeyHashFn)||Gg)(t)}function Gg(t){return JSON.stringify(t,(e,n)=>L3(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function VC(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>VC(t[n],e[n])):!1}function BU(t,e){if(t===e)return t;const n=G9(t)&&G9(e);if(n||L3(t)&&L3(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,a=n?[]:{},c=new Set(r);let l=0;for(let u=0;u<o;u++){const d=n?u:i[u];(!n&&c.has(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=BU(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return s===o&&l===s?t:a}return e}function bI(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function G9(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function L3(t){if(!q9(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!q9(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function q9(t){return Object.prototype.toString.call(t)==="[object Object]"}function k4e(t){return new Promise(e=>{setTimeout(e,t)})}function U3(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?BU(t,e):e}function D4e(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function M4e(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var $U=Symbol();function see(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===$U?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function iee(t,e){return typeof t=="function"?t(...e):!!t}var kp,sh,s0,OW,L4e=(OW=class extends Eb{constructor(){super();Y(this,kp);Y(this,sh);Y(this,s0);L(this,s0,e=>{if(!Hg&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){_(this,sh)||this.setEventListener(_(this,s0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,sh))==null||e.call(this),L(this,sh,void 0))}setEventListener(e){var n;L(this,s0,e),(n=_(this,sh))==null||n.call(this),L(this,sh,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){_(this,kp)!==e&&(L(this,kp,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof _(this,kp)=="boolean"?_(this,kp):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},kp=new WeakMap,sh=new WeakMap,s0=new WeakMap,OW),FU=new L4e,i0,ih,o0,kW,U4e=(kW=class extends Eb{constructor(){super();Y(this,i0,!0);Y(this,ih);Y(this,o0);L(this,o0,e=>{if(!Hg&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){_(this,ih)||this.setEventListener(_(this,o0))}onUnsubscribe(){var e;this.hasListeners()||((e=_(this,ih))==null||e.call(this),L(this,ih,void 0))}setEventListener(e){var n;L(this,o0,e),(n=_(this,ih))==null||n.call(this),L(this,ih,e(this.setOnline.bind(this)))}setOnline(e){_(this,i0)!==e&&(L(this,i0,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return _(this,i0)}},i0=new WeakMap,ih=new WeakMap,o0=new WeakMap,kW),vI=new U4e;function B3(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function B4e(t){return Math.min(1e3*2**t,3e4)}function oee(t){return(t??"online")==="online"?vI.isOnline():!0}var aee=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function $O(t){return t instanceof aee}function cee(t){let e=!1,n=0,r=!1,s;const i=B3(),o=g=>{var w;r||(h(new aee(g)),(w=t.abort)==null||w.call(t))},a=()=>{e=!0},c=()=>{e=!1},l=()=>FU.isFocused()&&(t.networkMode==="always"||vI.isOnline())&&t.canRun(),u=()=>oee(t.networkMode)&&t.canRun(),d=g=>{var w;r||(r=!0,(w=t.onSuccess)==null||w.call(t,g),s==null||s(),i.resolve(g))},h=g=>{var w;r||(r=!0,(w=t.onError)==null||w.call(t,g),s==null||s(),i.reject(g))},f=()=>new Promise(g=>{var w;s=m=>{(r||l())&&g(m)},(w=t.onPause)==null||w.call(t)}).then(()=>{var g;s=void 0,r||(g=t.onContinue)==null||g.call(t)}),p=()=>{if(r)return;let g;const w=n===0?t.initialPromise:void 0;try{g=w??t.fn()}catch(m){g=Promise.reject(m)}Promise.resolve(g).then(d).catch(m=>{var T;if(r)return;const b=t.retry??(Hg?0:3),v=t.retryDelay??B4e,A=typeof v=="function"?v(n,m):v,C=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,m);if(e||!C){h(m);return}n++,(T=t.onFail)==null||T.call(t,n,m),k4e(A).then(()=>l()?void 0:f()).then(()=>{e?h(m):p()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:a,continueRetry:c,canStart:u,start:()=>(u()?p():f().then(p),i)}}var $4e=t=>setTimeout(t,0);function F4e(){let t=[],e=0,n=a=>{a()},r=a=>{a()},s=$4e;const i=a=>{e?t.push(a):s(()=>{n(a)})},o=()=>{const a=t;t=[],a.length&&s(()=>{r(()=>{a.forEach(c=>{n(c)})})})};return{batch:a=>{let c;e++;try{c=a()}finally{e--,e||o()}return c},batchCalls:a=>(...c)=>{i(()=>{a(...c)})},schedule:i,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{s=a}}}var Vr=F4e(),Dp,DW,lee=(DW=class{constructor(){Y(this,Dp)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),M3(this.gcTime)&&L(this,Dp,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Hg?1/0:5*60*1e3))}clearGcTimeout(){_(this,Dp)&&(clearTimeout(_(this,Dp)),L(this,Dp,void 0))}},Dp=new WeakMap,DW),a0,Mp,ya,Lp,Vs,a_,Up,oc,hu,MW,j4e=(MW=class extends lee{constructor(e){super();Y(this,oc);Y(this,a0);Y(this,Mp);Y(this,ya);Y(this,Lp);Y(this,Vs);Y(this,a_);Y(this,Up);L(this,Up,!1),L(this,a_,e.defaultOptions),this.setOptions(e.options),this.observers=[],L(this,Lp,e.client),L(this,ya,_(this,Lp).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,L(this,a0,W4e(this.options)),this.state=e.state??_(this,a0),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=_(this,Vs))==null?void 0:e.promise}setOptions(e){this.options={..._(this,a_),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&_(this,ya).remove(this)}setData(e,n){const r=U3(this.state.data,e,this.options);return de(this,oc,hu).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(e,n){de(this,oc,hu).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var r,s;const n=(r=_(this,Vs))==null?void 0:r.promise;return(s=_(this,Vs))==null||s.cancel(e),n?n.then(pi).catch(pi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(_(this,a0))}isActive(){return this.observers.some(e=>Sa(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===$U||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>cf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ree(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(r=>r.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Vs))==null||n.continue()}onOnline(){var n;const e=this.observers.find(r=>r.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=_(this,Vs))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),_(this,ya).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(_(this,Vs)&&(_(this,Up)?_(this,Vs).cancel({revert:!0}):_(this,Vs).cancelRetry()),this.scheduleGc()),_(this,ya).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||de(this,oc,hu).call(this,{type:"invalidate"})}fetch(e,n){var l,u,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(_(this,Vs))return _(this,Vs).continueRetry(),_(this,Vs).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,s=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(L(this,Up,!0),r.signal)})},i=()=>{const h=see(this.options,n),p=(()=>{const g={client:_(this,Lp),queryKey:this.queryKey,meta:this.meta};return s(g),g})();return L(this,Up,!1),this.options.persister?this.options.persister(h,p,this):h(p)},a=(()=>{const h={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:_(this,Lp),state:this.state,fetchFn:i};return s(h),h})();(l=this.options.behavior)==null||l.onFetch(a,this),L(this,Mp,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=a.fetchOptions)==null?void 0:u.meta))&&de(this,oc,hu).call(this,{type:"fetch",meta:(d=a.fetchOptions)==null?void 0:d.meta});const c=h=>{var f,p,g,w;$O(h)&&h.silent||de(this,oc,hu).call(this,{type:"error",error:h}),$O(h)||((p=(f=_(this,ya).config).onError)==null||p.call(f,h,this),(w=(g=_(this,ya).config).onSettled)==null||w.call(g,this.state.data,h,this)),this.scheduleGc()};return L(this,Vs,cee({initialPromise:n==null?void 0:n.initialPromise,fn:a.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,g,w;if(h===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){c(m);return}(p=(f=_(this,ya).config).onSuccess)==null||p.call(f,h,this),(w=(g=_(this,ya).config).onSettled)==null||w.call(g,h,this.state.error,this),this.scheduleGc()},onError:c,onFail:(h,f)=>{de(this,oc,hu).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{de(this,oc,hu).call(this,{type:"pause"})},onContinue:()=>{de(this,oc,hu).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),_(this,Vs).start()}},a0=new WeakMap,Mp=new WeakMap,ya=new WeakMap,Lp=new WeakMap,Vs=new WeakMap,a_=new WeakMap,Up=new WeakMap,oc=new WeakSet,hu=function(e){const n=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...uee(r.data,this.options),fetchMeta:e.meta??null};case"success":return L(this,Mp,void 0),{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return $O(s)&&s.revert&&_(this,Mp)?{..._(this,Mp),fetchStatus:"idle"}:{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=n(this.state),Vr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),_(this,ya).notify({query:this,type:"updated",action:e})})},MW);function uee(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:oee(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function W4e(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var rl,LW,z4e=(LW=class extends Eb{constructor(e={}){super();Y(this,rl);this.config=e,L(this,rl,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??UU(s,n);let o=this.get(i);return o||(o=new j4e({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){_(this,rl).has(e.queryHash)||(_(this,rl).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=_(this,rl).get(e.queryHash);n&&(e.destroy(),n===e&&_(this,rl).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Vr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return _(this,rl).get(e)}getAll(){return[..._(this,rl).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>z9(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>z9(e,r)):n}notify(e){Vr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Vr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},rl=new WeakMap,LW),sl,li,Bp,il,Gd,UW,H4e=(UW=class extends lee{constructor(e){super();Y(this,il);Y(this,sl);Y(this,li);Y(this,Bp);this.mutationId=e.mutationId,L(this,li,e.mutationCache),L(this,sl,[]),this.state=e.state||dee(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){_(this,sl).includes(e)||(_(this,sl).push(e),this.clearGcTimeout(),_(this,li).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){L(this,sl,_(this,sl).filter(n=>n!==e)),this.scheduleGc(),_(this,li).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){_(this,sl).length||(this.state.status==="pending"?this.scheduleGc():_(this,li).remove(this))}continue(){var e;return((e=_(this,Bp))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,o,a,c,l,u,d,h,f,p,g,w,m,b,v,A,C,T,x,N;const n=()=>{de(this,il,Gd).call(this,{type:"continue"})};L(this,Bp,cee({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(S,D)=>{de(this,il,Gd).call(this,{type:"failed",failureCount:S,error:D})},onPause:()=>{de(this,il,Gd).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>_(this,li).canRun(this)}));const r=this.state.status==="pending",s=!_(this,Bp).canStart();try{if(r)n();else{de(this,il,Gd).call(this,{type:"pending",variables:e,isPaused:s}),await((o=(i=_(this,li).config).onMutate)==null?void 0:o.call(i,e,this));const D=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,e));D!==this.state.context&&de(this,il,Gd).call(this,{type:"pending",context:D,variables:e,isPaused:s})}const S=await _(this,Bp).start();return await((u=(l=_(this,li).config).onSuccess)==null?void 0:u.call(l,S,e,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,e,this.state.context)),await((p=(f=_(this,li).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((w=(g=this.options).onSettled)==null?void 0:w.call(g,S,null,e,this.state.context)),de(this,il,Gd).call(this,{type:"success",data:S}),S}catch(S){try{throw await((b=(m=_(this,li).config).onError)==null?void 0:b.call(m,S,e,this.state.context,this)),await((A=(v=this.options).onError)==null?void 0:A.call(v,S,e,this.state.context)),await((T=(C=_(this,li).config).onSettled)==null?void 0:T.call(C,void 0,S,this.state.variables,this.state.context,this)),await((N=(x=this.options).onSettled)==null?void 0:N.call(x,void 0,S,e,this.state.context)),S}finally{de(this,il,Gd).call(this,{type:"error",error:S})}}finally{_(this,li).runNext(this)}}},sl=new WeakMap,li=new WeakMap,Bp=new WeakMap,il=new WeakSet,Gd=function(e){const n=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Vr.batch(()=>{_(this,sl).forEach(r=>{r.onMutationUpdate(e)}),_(this,li).notify({mutation:this,type:"updated",action:e})})},UW);function dee(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Eu,ac,c_,BW,G4e=(BW=class extends Eb{constructor(e={}){super();Y(this,Eu);Y(this,ac);Y(this,c_);this.config=e,L(this,Eu,new Set),L(this,ac,new Map),L(this,c_,0)}build(e,n,r){const s=new H4e({mutationCache:this,mutationId:++Cd(this,c_)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){_(this,Eu).add(e);const n=UA(e);if(typeof n=="string"){const r=_(this,ac).get(n);r?r.push(e):_(this,ac).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(_(this,Eu).delete(e)){const n=UA(e);if(typeof n=="string"){const r=_(this,ac).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&_(this,ac).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=UA(e);if(typeof n=="string"){const r=_(this,ac).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=UA(e);if(typeof n=="string"){const s=(r=_(this,ac).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Vr.batch(()=>{_(this,Eu).forEach(e=>{this.notify({type:"removed",mutation:e})}),_(this,Eu).clear(),_(this,ac).clear()})}getAll(){return Array.from(_(this,Eu))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>H9(n,r))}findAll(e={}){return this.getAll().filter(n=>H9(e,n))}notify(e){Vr.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Vr.batch(()=>Promise.all(e.map(n=>n.continue().catch(pi))))}},Eu=new WeakMap,ac=new WeakMap,c_=new WeakMap,BW);function UA(t){var e;return(e=t.options.scope)==null?void 0:e.id}function V9(t){return{onFetch:(e,n)=>{var u,d,h,f,p;const r=e.options,s=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,i=((f=e.state.data)==null?void 0:f.pages)||[],o=((p=e.state.data)==null?void 0:p.pageParams)||[];let a={pages:[],pageParams:[]},c=0;const l=async()=>{let g=!1;const w=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?g=!0:e.signal.addEventListener("abort",()=>{g=!0}),e.signal)})},m=see(e.options,e.fetchOptions),b=async(v,A,C)=>{if(g)return Promise.reject();if(A==null&&v.pages.length)return Promise.resolve(v);const x=(()=>{const P={client:e.client,queryKey:e.queryKey,pageParam:A,direction:C?"backward":"forward",meta:e.options.meta};return w(P),P})(),N=await m(x),{maxPages:S}=e.options,D=C?M4e:D4e;return{pages:D(v.pages,N,S),pageParams:D(v.pageParams,A,S)}};if(s&&i.length){const v=s==="backward",A=v?q4e:K9,C={pages:i,pageParams:o},T=A(r,C);a=await b(C,T,v)}else{const v=t??i.length;do{const A=c===0?o[0]??r.initialPageParam:K9(r,a);if(c>0&&A==null)break;a=await b(a,A),c++}while(c<v)}return a};e.options.persister?e.fetchFn=()=>{var g,w;return(w=(g=e.options).persister)==null?void 0:w.call(g,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=l}}}function K9(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function q4e(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Cr,oh,ah,c0,l0,ch,u0,d0,$W,V4e=($W=class{constructor(t={}){Y(this,Cr);Y(this,oh);Y(this,ah);Y(this,c0);Y(this,l0);Y(this,ch);Y(this,u0);Y(this,d0);L(this,Cr,t.queryCache||new z4e),L(this,oh,t.mutationCache||new G4e),L(this,ah,t.defaultOptions||{}),L(this,c0,new Map),L(this,l0,new Map),L(this,ch,0)}mount(){Cd(this,ch)._++,_(this,ch)===1&&(L(this,u0,FU.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Cr).onFocus())})),L(this,d0,vI.subscribe(async t=>{t&&(await this.resumePausedMutations(),_(this,Cr).onOnline())})))}unmount(){var t,e;Cd(this,ch)._--,_(this,ch)===0&&((t=_(this,u0))==null||t.call(this),L(this,u0,void 0),(e=_(this,d0))==null||e.call(this),L(this,d0,void 0))}isFetching(t){return _(this,Cr).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return _(this,oh).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,Cr).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=_(this,Cr).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(cf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return _(this,Cr).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=_(this,Cr).get(r.queryHash),i=s==null?void 0:s.state.data,o=O4e(e,i);if(o!==void 0)return _(this,Cr).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Vr.batch(()=>_(this,Cr).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=_(this,Cr).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=_(this,Cr);Vr.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=_(this,Cr);return Vr.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Vr.batch(()=>_(this,Cr).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(pi).catch(pi)}invalidateQueries(t,e={}){return Vr.batch(()=>(_(this,Cr).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Vr.batch(()=>_(this,Cr).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(pi)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(pi)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=_(this,Cr).build(this,e);return n.isStaleByTime(cf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(pi).catch(pi)}fetchInfiniteQuery(t){return t.behavior=V9(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(pi).catch(pi)}ensureInfiniteQueryData(t){return t.behavior=V9(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return vI.isOnline()?_(this,oh).resumePausedMutations():Promise.resolve()}getQueryCache(){return _(this,Cr)}getMutationCache(){return _(this,oh)}getDefaultOptions(){return _(this,ah)}setDefaultOptions(t){L(this,ah,t)}setQueryDefaults(t,e){_(this,c0).set(Gg(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[..._(this,c0).values()],n={};return e.forEach(r=>{VC(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){_(this,l0).set(Gg(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[..._(this,l0).values()],n={};return e.forEach(r=>{VC(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={..._(this,ah).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=UU(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===$U&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{..._(this,ah).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){_(this,Cr).clear(),_(this,oh).clear()}},Cr=new WeakMap,oh=new WeakMap,ah=new WeakMap,c0=new WeakMap,l0=new WeakMap,ch=new WeakMap,u0=new WeakMap,d0=new WeakMap,$W),Hi,nn,l_,ui,$p,h0,lh,uh,u_,f0,p0,Fp,jp,dh,g0,xn,Tv,$3,F3,j3,W3,z3,H3,G3,hee,FW,K4e=(FW=class extends Eb{constructor(e,n){super();Y(this,xn);Y(this,Hi);Y(this,nn);Y(this,l_);Y(this,ui);Y(this,$p);Y(this,h0);Y(this,lh);Y(this,uh);Y(this,u_);Y(this,f0);Y(this,p0);Y(this,Fp);Y(this,jp);Y(this,dh);Y(this,g0,new Set);this.options=n,L(this,Hi,e),L(this,uh,null),L(this,lh,B3()),this.options.experimental_prefetchInRender||_(this,lh).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(_(this,nn).addObserver(this),Y9(_(this,nn),this.options)?de(this,xn,Tv).call(this):this.updateResult(),de(this,xn,W3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return q3(_(this,nn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return q3(_(this,nn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,de(this,xn,z3).call(this),de(this,xn,H3).call(this),_(this,nn).removeObserver(this)}setOptions(e){const n=this.options,r=_(this,nn);if(this.options=_(this,Hi).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Sa(this.options.enabled,_(this,nn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");de(this,xn,G3).call(this),_(this,nn).setOptions(this.options),n._defaulted&&!bI(this.options,n)&&_(this,Hi).getQueryCache().notify({type:"observerOptionsUpdated",query:_(this,nn),observer:this});const s=this.hasListeners();s&&Q9(_(this,nn),r,this.options,n)&&de(this,xn,Tv).call(this),this.updateResult(),s&&(_(this,nn)!==r||Sa(this.options.enabled,_(this,nn))!==Sa(n.enabled,_(this,nn))||cf(this.options.staleTime,_(this,nn))!==cf(n.staleTime,_(this,nn)))&&de(this,xn,$3).call(this);const i=de(this,xn,F3).call(this);s&&(_(this,nn)!==r||Sa(this.options.enabled,_(this,nn))!==Sa(n.enabled,_(this,nn))||i!==_(this,dh))&&de(this,xn,j3).call(this,i)}getOptimisticResult(e){const n=_(this,Hi).getQueryCache().build(_(this,Hi),e),r=this.createResult(n,e);return Q4e(this,r)&&(L(this,ui,r),L(this,h0,this.options),L(this,$p,_(this,nn).state)),r}getCurrentResult(){return _(this,ui)}trackResult(e,n){return new Proxy(e,{get:(r,s)=>(this.trackProp(s),n==null||n(s),Reflect.get(r,s))})}trackProp(e){_(this,g0).add(e)}getCurrentQuery(){return _(this,nn)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=_(this,Hi).defaultQueryOptions(e),r=_(this,Hi).getQueryCache().build(_(this,Hi),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return de(this,xn,Tv).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),_(this,ui)))}createResult(e,n){var S;const r=_(this,nn),s=this.options,i=_(this,ui),o=_(this,$p),a=_(this,h0),l=e!==r?e.state:_(this,l_),{state:u}=e;let d={...u},h=!1,f;if(n._optimisticResults){const D=this.hasListeners(),P=!D&&Y9(e,n),$=D&&Q9(e,r,n,s);(P||$)&&(d={...d,...uee(u.data,e.options)}),n._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:w}=d;f=d.data;let m=!1;if(n.placeholderData!==void 0&&f===void 0&&w==="pending"){let D;i!=null&&i.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData)?(D=i.data,m=!0):D=typeof n.placeholderData=="function"?n.placeholderData((S=_(this,p0))==null?void 0:S.state.data,_(this,p0)):n.placeholderData,D!==void 0&&(w="success",f=U3(i==null?void 0:i.data,D,n),h=!0)}if(n.select&&f!==void 0&&!m)if(i&&f===(o==null?void 0:o.data)&&n.select===_(this,u_))f=_(this,f0);else try{L(this,u_,n.select),f=n.select(f),f=U3(i==null?void 0:i.data,f,n),L(this,f0,f),L(this,uh,null)}catch(D){L(this,uh,D)}_(this,uh)&&(p=_(this,uh),f=_(this,f0),g=Date.now(),w="error");const b=d.fetchStatus==="fetching",v=w==="pending",A=w==="error",C=v&&b,T=f!==void 0,N={status:w,fetchStatus:d.fetchStatus,isPending:v,isSuccess:w==="success",isError:A,isInitialLoading:C,isLoading:C,data:f,dataUpdatedAt:d.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:b,isRefetching:b&&!v,isLoadingError:A&&!T,isPaused:d.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:A&&T,isStale:jU(e,n),refetch:this.refetch,promise:_(this,lh),isEnabled:Sa(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const D=G=>{N.status==="error"?G.reject(N.error):N.data!==void 0&&G.resolve(N.data)},P=()=>{const G=L(this,lh,N.promise=B3());D(G)},$=_(this,lh);switch($.status){case"pending":e.queryHash===r.queryHash&&D($);break;case"fulfilled":(N.status==="error"||N.data!==$.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==$.reason)&&P();break}}return N}updateResult(){const e=_(this,ui),n=this.createResult(_(this,nn),this.options);if(L(this,$p,_(this,nn).state),L(this,h0,this.options),_(this,$p).data!==void 0&&L(this,p0,_(this,nn)),bI(n,e))return;L(this,ui,n);const r=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!_(this,g0).size)return!0;const o=new Set(i??_(this,g0));return this.options.throwOnError&&o.add("error"),Object.keys(_(this,ui)).some(a=>{const c=a;return _(this,ui)[c]!==e[c]&&o.has(c)})};de(this,xn,hee).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&de(this,xn,W3).call(this)}},Hi=new WeakMap,nn=new WeakMap,l_=new WeakMap,ui=new WeakMap,$p=new WeakMap,h0=new WeakMap,lh=new WeakMap,uh=new WeakMap,u_=new WeakMap,f0=new WeakMap,p0=new WeakMap,Fp=new WeakMap,jp=new WeakMap,dh=new WeakMap,g0=new WeakMap,xn=new WeakSet,Tv=function(e){de(this,xn,G3).call(this);let n=_(this,nn).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(pi)),n},$3=function(){de(this,xn,z3).call(this);const e=cf(this.options.staleTime,_(this,nn));if(Hg||_(this,ui).isStale||!M3(e))return;const r=ree(_(this,ui).dataUpdatedAt,e)+1;L(this,Fp,setTimeout(()=>{_(this,ui).isStale||this.updateResult()},r))},F3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(_(this,nn)):this.options.refetchInterval)??!1},j3=function(e){de(this,xn,H3).call(this),L(this,dh,e),!(Hg||Sa(this.options.enabled,_(this,nn))===!1||!M3(_(this,dh))||_(this,dh)===0)&&L(this,jp,setInterval(()=>{(this.options.refetchIntervalInBackground||FU.isFocused())&&de(this,xn,Tv).call(this)},_(this,dh)))},W3=function(){de(this,xn,$3).call(this),de(this,xn,j3).call(this,de(this,xn,F3).call(this))},z3=function(){_(this,Fp)&&(clearTimeout(_(this,Fp)),L(this,Fp,void 0))},H3=function(){_(this,jp)&&(clearInterval(_(this,jp)),L(this,jp,void 0))},G3=function(){const e=_(this,Hi).getQueryCache().build(_(this,Hi),this.options);if(e===_(this,nn))return;const n=_(this,nn);L(this,nn,e),L(this,l_,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},hee=function(e){Vr.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(_(this,ui))}),_(this,Hi).getQueryCache().notify({query:_(this,nn),type:"observerResultsUpdated"})})},FW);function Y4e(t,e){return Sa(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Y9(t,e){return Y4e(t,e)||t.state.data!==void 0&&q3(t,e,e.refetchOnMount)}function q3(t,e,n){if(Sa(e.enabled,t)!==!1&&cf(e.staleTime,t)!=="static"){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&jU(t,e)}return!1}function Q9(t,e,n,r){return(t!==e||Sa(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&jU(t,n)}function jU(t,e){return Sa(e.enabled,t)!==!1&&t.isStaleByTime(cf(e.staleTime,t))}function Q4e(t,e){return!bI(t.getCurrentResult(),e)}var hh,fh,Gi,Cu,Xu,DS,V3,jW,J4e=(jW=class extends Eb{constructor(n,r){super();Y(this,Xu);Y(this,hh);Y(this,fh);Y(this,Gi);Y(this,Cu);L(this,hh,n),this.setOptions(r),this.bindMethods(),de(this,Xu,DS).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=_(this,hh).defaultMutationOptions(n),bI(this.options,r)||_(this,hh).getMutationCache().notify({type:"observerOptionsUpdated",mutation:_(this,Gi),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Gg(r.mutationKey)!==Gg(this.options.mutationKey)?this.reset():((s=_(this,Gi))==null?void 0:s.state.status)==="pending"&&_(this,Gi).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=_(this,Gi))==null||n.removeObserver(this)}onMutationUpdate(n){de(this,Xu,DS).call(this),de(this,Xu,V3).call(this,n)}getCurrentResult(){return _(this,fh)}reset(){var n;(n=_(this,Gi))==null||n.removeObserver(this),L(this,Gi,void 0),de(this,Xu,DS).call(this),de(this,Xu,V3).call(this)}mutate(n,r){var s;return L(this,Cu,r),(s=_(this,Gi))==null||s.removeObserver(this),L(this,Gi,_(this,hh).getMutationCache().build(_(this,hh),this.options)),_(this,Gi).addObserver(this),_(this,Gi).execute(n)}},hh=new WeakMap,fh=new WeakMap,Gi=new WeakMap,Cu=new WeakMap,Xu=new WeakSet,DS=function(){var r;const n=((r=_(this,Gi))==null?void 0:r.state)??dee();L(this,fh,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},V3=function(n){Vr.batch(()=>{var r,s,i,o,a,c,l,u;if(_(this,Cu)&&this.hasListeners()){const d=_(this,fh).variables,h=_(this,fh).context;(n==null?void 0:n.type)==="success"?((s=(r=_(this,Cu)).onSuccess)==null||s.call(r,n.data,d,h),(o=(i=_(this,Cu)).onSettled)==null||o.call(i,n.data,null,d,h)):(n==null?void 0:n.type)==="error"&&((c=(a=_(this,Cu)).onError)==null||c.call(a,n.error,d,h),(u=(l=_(this,Cu)).onSettled)==null||u.call(l,void 0,n.error,d,h))}this.listeners.forEach(d=>{d(_(this,fh))})})},jW);function Z4e(t,e){return BU(t,e)}function X4e(t){return JSON.stringify(t,(e,n)=>eFe(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):typeof n=="bigint"?n.toString():n)}function eFe(t){if(!J9(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const n=e.prototype;return!(!J9(n)||!n.hasOwnProperty("isPrototypeOf"))}function J9(t){return Object.prototype.toString.call(t)==="[object Object]"}function g1(t){const{_defaulted:e,behavior:n,gcTime:r,initialData:s,initialDataUpdatedAt:i,maxPages:o,meta:a,networkMode:c,queryFn:l,queryHash:u,queryKey:d,queryKeyHashFn:h,retry:f,retryDelay:p,structuralSharing:g,getPreviousPageParam:w,getNextPageParam:m,initialPageParam:b,_optimisticResults:v,enabled:A,notifyOnChangeProps:C,placeholderData:T,refetchInterval:x,refetchIntervalInBackground:N,refetchOnMount:S,refetchOnReconnect:D,refetchOnWindowFocus:P,retryOnMount:$,select:G,staleTime:W,suspense:I,throwOnError:R,config:B,connector:O,query:M,...j}=t;return j}function tFe(t){return{mutationFn(e){return OS(t,e)},mutationKey:["connect"]}}function nFe(t){return{mutationFn(e){return T3(t,e)},mutationKey:["disconnect"]}}function rFe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return await HX(t,{...i,address:r})??null},queryKey:sFe(e)}}function sFe(t={}){return["balance",g1(t)]}function iFe(t,e={}){return{async queryFn({queryKey:n}){const{address:r,scopeKey:s,...i}=n[1];if(!r)throw new Error("address is required");return W8e(t,{...i,address:r})},queryKey:oFe(e)}}function oFe(t={}){return["ensName",g1(t)]}function aFe(t,e={}){return{gcTime:0,async queryFn({queryKey:n}){const{connector:r}=e,{connectorUid:s,scopeKey:i,...o}=n[1];return z8e(t,{...o,connector:r})},queryKey:cFe(e)}}function cFe(t={}){const{connector:e,...n}=t;return["walletClient",{...g1(n),connectorUid:e==null?void 0:e.uid}]}function lFe(t,e={}){return{async queryFn({queryKey:n}){const r=e.abi;if(!r)throw new Error("abi is required");const{functionName:s,scopeKey:i,...o}=n[1],a=(()=>{const c=n[1];if(c.address)return{address:c.address};if(c.code)return{code:c.code};throw new Error("address or code is required")})();if(!s)throw new Error("functionName is required");return zX(t,{abi:r,functionName:s,args:o.args,...a,...o})},queryKey:uFe(e)}}function uFe(t={}){const{abi:e,...n}=t;return["readContract",g1(n)]}function dFe(t){return{mutationFn(e){return O3(t,e)},mutationKey:["switchChain"]}}function hFe(t,e={}){return{async queryFn({queryKey:n}){const{hash:r,...s}=n[1];if(!r)throw new Error("hash is required");return KX(t,{...s,onReplaced:e.onReplaced,hash:r})},queryKey:fFe(e)}}function fFe(t={}){const{onReplaced:e,...n}=t;return["waitForTransactionReceipt",g1(n)]}function pFe(t){return{mutationFn(e){return YX(t,e)},mutationKey:["writeContract"]}}var fee=k.createContext(void 0),WU=t=>{const e=k.useContext(fee);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},gFe=({client:t,children:e})=>(k.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),y.jsx(fee.Provider,{value:t,children:e})),pee=k.createContext(!1),mFe=()=>k.useContext(pee);pee.Provider;function yFe(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var wFe=k.createContext(yFe()),bFe=()=>k.useContext(wFe),vFe=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},EFe=t=>{k.useEffect(()=>{t.clearReset()},[t])},CFe=({result:t,errorResetBoundary:e,throwOnError:n,query:r,suspense:s})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(s&&t.data===void 0||iee(n,[t.error,r])),_Fe=t=>{if(t.suspense){const e=r=>r==="static"?r:Math.max(r??1e3,1e3),n=t.staleTime;t.staleTime=typeof n=="function"?(...r)=>e(n(...r)):e(n),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},AFe=(t,e)=>t.isLoading&&t.isFetching&&!e,SFe=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Z9=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function xFe(t,e,n){var d,h,f,p,g;const r=mFe(),s=bFe(),i=WU(),o=i.defaultQueryOptions(t);(h=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,o),o._optimisticResults=r?"isRestoring":"optimistic",_Fe(o),vFe(o,s),EFe(s);const a=!i.getQueryCache().get(o.queryHash),[c]=k.useState(()=>new e(i,o)),l=c.getOptimisticResult(o),u=!r&&t.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(w=>{const m=u?c.subscribe(Vr.batchCalls(w)):pi;return c.updateResult(),m},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),k.useEffect(()=>{c.setOptions(o)},[o,c]),SFe(o,l))throw Z9(o,c,s);if(CFe({result:l,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw l.error;if((p=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,o,l),o.experimental_prefetchInRender&&!Hg&&AFe(l,r)){const w=a?Z9(o,c,s):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;w==null||w.catch(pi).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?l:c.trackResult(l)}function IFe(t,e){return xFe(t,K4e)}function OT(t,e){const n=WU(),[r]=k.useState(()=>new J4e(n,t));k.useEffect(()=>{r.setOptions(t)},[r,t]);const s=k.useSyncExternalStore(k.useCallback(o=>r.subscribe(Vr.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=k.useCallback((o,a)=>{r.mutate(o,a).catch(pi)},[r]);if(s.error&&iee(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function m1(t){const e=IFe({...t,queryKeyHashFn:X4e});return e.queryKey=t.queryKey,e}function wm(t={}){const e=Ti(t);return k.useSyncExternalStore(n=>K8e(e,{onChange:n}),()=>U9(e),()=>U9(e))}function NFe(t={}){const{address:e,query:n={}}=t,r=Ti(t),s=wm({config:r}),i=rFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return m1({...n,...i,enabled:o})}function TFe(t={}){const e=Ti(t);return k.useSyncExternalStore(n=>C4e(e,{onChange:n}),()=>B9(e),()=>B9(e))}function RFe(t={}){const e=Ti(t);return k.useSyncExternalStore(n=>VX(e,{onChange:n}),()=>$9(e),()=>$9(e))}function PFe(t={}){const{mutation:e}=t,n=Ti(t),r=tFe(n),{mutate:s,mutateAsync:i,...o}=OT({...e,...r});return k.useEffect(()=>n.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[n,o.reset]),{...o,connect:s,connectAsync:i,connectors:RFe({config:n})}}function OFe(t={}){const e=Ti(t);return k.useSyncExternalStore(n=>qX(e,{onChange:n}),()=>sc(e),()=>sc(e))}function kFe(t={}){const{mutation:e}=t,n=Ti(t),r=nFe(n),{mutate:s,mutateAsync:i,...o}=OT({...e,...r});return{...o,connectors:OFe({config:n}).map(a=>a.connector),disconnect:s,disconnectAsync:i}}function DFe(t={}){const{address:e,query:n={}}=t,r=Ti(t),s=wm({config:r}),i=iFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return m1({...n,...i,enabled:o})}function MFe(t={}){const e=Ti(t);return nee.useSyncExternalStoreWithSelector(n=>Q8e(e,{onChange:n}),()=>R3(e,t),()=>R3(e,t),n=>n,(n,r)=>(n==null?void 0:n.uid)===(r==null?void 0:r.uid))}function K3(t={}){const{abi:e,address:n,functionName:r,query:s={}}=t,i=t.code,o=Ti(t),a=wm({config:o}),c=lFe(o,{...t,chainId:t.chainId??a}),l=!!((n||i)&&e&&r&&(s.enabled??!0));return m1({...s,...c,enabled:l,structuralSharing:s.structuralSharing??Z4e})}function LFe(t={}){const{mutation:e}=t,n=Ti(t),r=dFe(n),{mutate:s,mutateAsync:i,...o}=OT({...e,...r});return{...o,chains:TFe({config:n}),switchChain:s,switchChainAsync:i}}function UFe(t={}){const{query:e={},...n}=t,r=Ti(n),s=WU(),{address:i,connector:o,status:a}=p1({config:r}),c=wm({config:r}),l=t.connector??o,{queryKey:u,...d}=aFe(r,{...t,chainId:t.chainId??c,connector:t.connector??o}),h=!!((a==="connected"||a==="reconnecting"&&(l!=null&&l.getProvider))&&(e.enabled??!0)),f=k.useRef(i);return k.useEffect(()=>{const p=f.current;!i&&p?(s.removeQueries({queryKey:u}),f.current=void 0):i!==p&&(s.invalidateQueries({queryKey:u}),f.current=i)},[i,s]),m1({...e,...d,queryKey:u,enabled:h,staleTime:Number.POSITIVE_INFINITY})}function BA(t={}){const{hash:e,query:n={}}=t,r=Ti(t),s=wm({config:r}),i=hFe(r,{...t,chainId:t.chainId??s}),o=!!(e&&(n.enabled??!0));return m1({...n,...i,enabled:o})}function $A(t={}){const{mutation:e}=t,n=Ti(t),r=pFe(n),{mutate:s,mutateAsync:i,...o}=OT({...e,...r});return{...o,writeContract:s,writeContractAsync:i}}const BFe=Uc({galleryContainer:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"#c0c0c0",zIndex:200,display:"flex",flexDirection:"column",fontFamily:"'MS Sans Serif', Arial, sans-serif"},header:{background:"navy",color:"#fff",padding:"8px",display:"flex",alignItems:"center",gap:"10px"},backButton:{background:"#c0c0c0",border:"2px outset #fff",padding:"2px 8px",cursor:"pointer","&:active":{borderStyle:"inset"}},headerTitle:{margin:0,fontSize:"1rem",fontWeight:"bold"},content:{flex:1,overflowY:"auto",padding:"1rem"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem"},gridItem:{border:"1px solid #808080",padding:"10px",backgroundColor:"#ffffff",cursor:"pointer",textAlign:"center","& img":{width:"100%",height:"auto",marginBottom:"8px"}},detailView:{padding:"1rem","& img":{maxWidth:"100%",marginBottom:"1rem"}},loading:{textAlign:"center",padding:"2rem"},collectionSelector:{display:"flex",gap:"10px",padding:"10px",borderBottom:"2px inset #fff",flexWrap:"wrap"},collectionButton:{padding:"5px 10px",background:"#c0c0c0",border:"2px outset #fff",cursor:"pointer","&.active":{borderStyle:"inset",backgroundColor:"#e0e0e0"}}}),X9=[{slug:"pixelawbs",name:"Pixelawbs",api:"scatter"},{slug:"lawbsters",name:"Lawbsters",api:"opensea",chain:"ethereum"},{slug:"lawbstarz",name:"Lawbstarz",api:"scatter"},{slug:"a-lawbster-halloween",name:"Halloween",api:"opensea",chain:"base"},{slug:"lawbstation",name:"Lawbstation",api:"opensea-solana",chain:"solana"},{slug:"lawbnexus",name:"Nexus",api:"opensea-solana",chain:"solana"}],$Fe=({onBack:t,walletAddress:e})=>{const n=BFe(),{open:r}=h1(),[s,i]=k.useState([]),[o,a]=k.useState(!0),[c,l]=k.useState(null),[u,d]=k.useState(X9[0]),[h,f]=k.useState(!1),[p,g]=k.useState(null),[w,m]=k.useState("all"),[b,v]=k.useState(null),A=k.useCallback(async()=>{var N,S;try{if((N=window.solana)!=null&&N.isPhantom){const D=await window.solana.connect();g(D.publicKey.toString());return}if((S=window.solflare)!=null&&S.isSolflare){const D=await window.solflare.connect();g(D.publicKey.toString());return}r()}catch(D){console.error("Failed to connect Solana wallet:",D),alert("Failed to connect Solana wallet. Please make sure Phantom or Solflare is installed.")}f(!1)},[r]);k.useEffect(()=>{var N,S;(N=window.solana)!=null&&N.publicKey?g(window.solana.publicKey.toString()):(S=window.solflare)!=null&&S.publicKey&&g(window.solflare.publicKey.toString())},[]),k.useEffect(()=>{(async()=>{a(!0);try{let S,D=e||void 0;if(u.api==="opensea-solana"){if(!p){f(!0),a(!1);return}D=p,S=await Fme(p,100),console.log("Mobile: Fetched Solana NFTs by owner:",S.data.length)}else u.api==="opensea"?S=await _L(u.slug,100,D):S=await CL(u.slug,1,100,D);w==="owned"&&p&&(console.log("Filtering for owner:",p),S.data.some($=>$.owners&&$.owners.length>0)?S.data=S.data.filter($=>$.owners.some(W=>W.owner_of&&W.owner_of.toLowerCase()===p.toLowerCase())):(console.log("No owner data available from OpenSea for Solana collection"),v("Owner data not available for this Solana collection. Showing all NFTs."))),i(S.data)}catch(S){console.error(S)}finally{a(!1)}})()},[e,u,p,w]),k.useEffect(()=>{h&&A()},[h,A]);const C=async N=>{if(a(!0),u.api==="opensea"&&u.chain)try{const S=await WV(u.chain,N.address,N.token_id.toString()),D={...N,attributes:JSON.stringify(S.traits||[])};l(D)}catch(S){console.error("Failed to fetch full NFT details",S),l(N)}else l(N);a(!1)},T=()=>{if(!c)return null;let N=[];try{N=JSON.parse(c.attributes||"[]")}catch(S){console.error("Failed to parse NFT attributes:",S)}return y.jsxs("div",{className:n.detailView,children:[y.jsx("img",{src:c.image,alt:c.name}),y.jsx("h2",{children:c.name}),y.jsx("h4",{children:"Traits:"}),y.jsx("ul",{children:N.map((S,D)=>y.jsxs("li",{children:[y.jsxs("strong",{children:[S.trait_type,":"]})," ",S.value]},D))})]})},x=()=>y.jsxs(y.Fragment,{children:[y.jsx("div",{className:n.collectionSelector,children:X9.map(N=>y.jsx("button",{className:`${n.collectionButton} ${u.slug===N.slug?"active":""}`,onClick:()=>d(N),children:N.name},N.slug))}),y.jsxs("div",{className:n.content,children:[y.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",flexWrap:"wrap"},children:[y.jsx("button",{onClick:()=>m("all"),style:{background:w==="all"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:w==="all"?"white":"black"},children:"All NFTs"}),y.jsx("button",{onClick:()=>m("owned"),disabled:!e&&!p,style:{background:w==="owned"?"#808080":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:e||p?"pointer":"not-allowed",color:w==="owned"?"white":"black",opacity:e||p?1:.6},children:"My NFTs"}),u.api==="opensea-solana"&&y.jsx("button",{onClick:()=>{A()},style:{background:p?"#4CAF50":"#c0c0c0",border:"2px outset #c0c0c0",padding:"8px 16px",cursor:"pointer",color:p?"white":"black",marginLeft:"auto"},children:p?`Solana: ${p.slice(0,4)}...${p.slice(-4)}`:"Connect Solana"})]}),b&&y.jsx("div",{style:{backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000"},children:b}),u.api==="opensea-solana"&&!p&&y.jsx("div",{style:{backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",padding:"10px",marginBottom:"10px",color:"#856404"},children:"Connect your Solana wallet (Phantom or Solflare) to view your NFTs from this collection."}),o?y.jsx("div",{className:n.loading,children:"Loading NFTs..."}):y.jsx("div",{className:n.grid,children:s.map(N=>{let S=N.image||N.image_url||N.image_url_shrunk||"/assets/pixelawb.png";return y.jsxs("div",{className:n.gridItem,onClick:()=>void C(N),children:[y.jsx("img",{src:S,alt:N.name,onError:D=>{D.currentTarget.src!==N.image_url&&N.image_url?D.currentTarget.src=N.image_url:D.currentTarget.src!==N.image_url_shrunk&&N.image_url_shrunk?D.currentTarget.src=N.image_url_shrunk:D.currentTarget.src="/assets/pixelawb.png"}}),y.jsx("span",{children:N.name})]},N.id)})})]})]});return y.jsxs("div",{className:n.galleryContainer,children:[y.jsxs("header",{className:n.header,children:[y.jsx("button",{className:n.backButton,onClick:c?()=>l(null):t,children:"Back"}),y.jsx("h2",{className:n.headerTitle,children:c?c.name:"LAWB NFT GALLERY"})]}),y.jsx("div",{className:n.content,children:o?y.jsx("p",{className:n.loading,children:"Loading..."}):c?T():x()})]})},FFe=Uc({overlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.5)",zIndex:4e3,display:"flex",alignItems:"center",justifyContent:"center"},popup:{background:"#c0c0c0",border:"2px outset #fff",borderRadius:12,width:"92vw",maxWidth:420,minHeight:240,maxHeight:"90vh",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"stretch",position:"relative",overflow:"hidden"},titleBar:{background:"navy",color:"#fff",fontWeight:"bold",fontFamily:"'MS Sans Serif', Arial, sans-serif",fontSize:16,padding:"8px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"2px inset #fff",userSelect:"none"},closeButton:{width:28,height:28,background:"#c0c0c0",border:"2px outset #fff",borderRadius:4,color:"#000",fontWeight:"bold",fontSize:18,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",marginLeft:8,boxShadow:"1px 1px 0 #888","&:active":{border:"2px inset #fff",background:"#e0e0e0"}},content:{padding:16,overflowY:"auto",fontFamily:"'MS Sans Serif', Arial, sans-serif",color:"#000",fontSize:15,background:"#fff",flex:1}}),tc=({isOpen:t,onClose:e,title:n,children:r})=>{const s=FFe();return t?y.jsx("div",{className:s.overlay,children:y.jsxs("div",{className:s.popup,children:[y.jsxs("div",{className:s.titleBar,children:[y.jsx("span",{children:n}),y.jsx("button",{className:s.closeButton,onClick:e,title:"Close",children:""})]}),y.jsx("div",{className:s.content,children:r})]})}):null},jFe=({isOpen:t,onClose:e,walletAddress:n})=>{const[r,s]=k.useState([]),[i,o]=k.useState(!1),[a,c]=k.useState(!1),[l,u]=k.useState({}),[d,h]=k.useState(null),{data:f}=UFe();k.useEffect(()=>{t&&n&&p()},[t,n]);const p=async()=>{o(!0),h(null);try{const A=await FV(n);s(A);const C={};A.forEach(T=>{C[T.id]=0}),u(C)}catch(A){h(A.message)}finally{o(!1)}},g=(A,C)=>{u(T=>({...T,[A]:Math.max(0,C)}))},w=async()=>{const A=Object.entries(l).filter(([,C])=>C>0).map(([C,T])=>({id:C,quantity:T}));if(A.length===0){h("Please select at least one item to mint");return}if(!f){h("Wallet not connected");return}c(!0),h(null);try{const C=await jV(n,A);if(C.success&&C.mintTransaction){alert("Please confirm the transaction in your wallet.");try{const T=await f.sendTransaction({to:C.mintTransaction.to,value:BigInt(C.mintTransaction.value),data:C.mintTransaction.data});alert(`NFT Minted Successfully: Transaction Hash - ${T}`),e()}catch(T){h("Transaction failed: "+T.message)}}else throw new Error(C.message||"Could not retrieve minting transaction.")}catch(C){h("Minting failed: "+C.message)}finally{c(!1)}},m=(A,C)=>`${parseFloat(A)} ${C}`,b={border:"1px solid #808080",padding:"10px",marginBottom:"10px",backgroundColor:"#f8f8f8",borderRadius:"8px",textAlign:"left"},v={backgroundColor:"#ffcccc",border:"1px solid #ff0000",padding:"10px",marginBottom:"10px",color:"#cc0000",borderRadius:"8px"};return y.jsxs(tc,{isOpen:t,onClose:e,title:"Mint Pixelawbs",children:[d&&y.jsx("div",{style:v,children:d}),i?y.jsx("div",{children:"Loading eligible invite lists..."}):r.length===0?y.jsx("div",{children:"No eligible invite lists found for your wallet."}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{style:{marginBottom:"20px"},children:[y.jsx("h3",{style:{color:"#008080",fontSize:"1rem",margin:0},children:"Available Lists:"}),r.map(A=>y.jsxs("div",{style:b,children:[y.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:A.name}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"5px"},children:["Price: ",m(A.token_price,A.currency_symbol)]}),y.jsxs("div",{style:{fontSize:"12px",marginBottom:"10px"},children:["Limit: ",A.wallet_limit===4294967295?"Unlimited":A.wallet_limit," per wallet"]}),y.jsx("input",{type:"number",min:0,max:A.wallet_limit===4294967295?void 0:A.wallet_limit,value:l[A.id]||"",onChange:C=>g(A.id,parseInt(C.target.value)||0),style:{width:"60px",fontSize:"1rem",marginRight:"8px"}}),y.jsx("span",{style:{fontSize:"0.95rem"},children:"Qty"})]},A.id))]}),y.jsx("button",{style:{background:"#00ffff",color:"#000",border:"none",borderRadius:"8px",padding:"12px 32px",fontWeight:"bold",fontSize:"1.1rem",marginTop:"1.5rem",cursor:"pointer",boxShadow:"1px 1px 0 #aaa"},onClick:w,disabled:a,children:a?"Minting...":"Mint"})]})]})},WFe=Uc({mobileContainer:{minHeight:"100vh",minWidth:"100vw",width:"100vw",height:"100vh",background:"url('/assets/background.gif') no-repeat center center fixed",backgroundSize:"cover",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",position:"relative",overflow:"hidden"},header:{backgroundColor:"#c00",padding:"0.75rem 0",border:"none",textAlign:"center",marginBottom:"1.5rem"},title:{margin:0,fontSize:"1.1rem",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",color:"#fff",letterSpacing:"1px",textShadow:"1px 1px 0 #000",textTransform:"uppercase"},iconGrid:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5rem",marginBottom:"80px"},icon:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",cursor:"pointer",textAlign:"center","& img":{width:"64px",height:"64px"},"& span":{wordBreak:"break-word"}},taskbar:{position:"fixed",left:0,bottom:0,width:"100%",maxWidth:"100vw",height:"56px",background:"rgba(0,0,0,0.85)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:1e3,borderTop:"2px solid #00ffff"},menuButton:{background:"#00ffff",color:"#000",fontWeight:"bold",border:"none",borderRadius:"4px",padding:"8px 16px",fontSize:"1rem",cursor:"pointer",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",boxShadow:"2px 2px 0 #000"},walletStatus:{display:"flex",alignItems:"center",color:"#fff",fontWeight:"bold",fontSize:"0.9rem",fontFamily:"'MS Sans Serif', Arial, sans-serif"},statusDot:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:t=>t?"limegreen":"red",marginRight:"6px",border:"1px solid #000"},clock:{color:"#00ffff",fontFamily:"'Press Start 2P', 'MS Sans Serif', Arial, sans-serif",fontSize:"1rem",fontWeight:"bold",textShadow:"1px 1px 0 #000",marginRight:"24px"},pixelawbsPopupOverlay:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.7)",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center"},pixelawbsPopup:{background:"#fff",borderRadius:"12px",width:"90vw",maxWidth:"420px",height:"75vh",maxHeight:"600px",boxShadow:"0 8px 32px rgba(0,0,0,0.4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"1.5rem",position:"relative"},closeButton:{position:"absolute",top:"10px",right:"10px",background:"#00ffff",color:"#000",border:"none",borderRadius:"50%",width:"32px",height:"32px",fontSize:"1.5rem",fontWeight:"bold",cursor:"pointer",boxShadow:"1px 1px 0 #000"},menuOverlay:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.4)",zIndex:3e3,display:"flex",alignItems:"flex-end",justifyContent:"center",pointerEvents:"auto"},menuModal:{width:"100vw",background:"#c0c0c0",borderTopLeftRadius:"16px",borderTopRightRadius:"16px",boxShadow:"0 -4px 24px rgba(0,0,0,0.2)",padding:"15px 0 8px 0",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px",zIndex:3100,marginBottom:"70px",maxHeight:"calc(70vh - 56px)",overflowY:"auto",position:"absolute",left:0,bottom:"56px"},menuLink:{display:"block",width:"90%",padding:"6px",color:"#000",textDecoration:"none",background:"#e0e0e0",borderRadius:"8px",fontWeight:"bold",fontSize:"1rem",textAlign:"center",marginBottom:"3px",border:"2px outset #fff",boxShadow:"1px 1px 0 #aaa"}}),zFe=[{id:"lawbsters",name:"Lawbsters",image:"/assets/lawbsters.gif",description:"420 Lawbsters. ETH."},{id:"lawbstarz",name:"Lawbstarz",image:"/assets/lawbstarz.gif",description:"666 Lawbstarz. ETH."},{id:"halloween",name:"Halloween",image:"/assets/lawbsterhalloween.gif",description:"Halloween Lawbsters. BASE."},{id:"pixelawbs",name:"Pixelawbs",image:"/assets/pixelawb.png",description:"2222 Pixelawbs. ETH."}],HFe=[{id:"lawbstation",name:"Lawbstation",image:"/assets/lawbstation.GIF",description:"Lawbstation. SOL."},{id:"nexus",name:"Nexus",image:"/assets/nexus.gif",description:"Nexus. SOL."}],GFe=()=>{const t=WFe(),{open:e}=h1(),{address:n,isConnected:r}=p1(),{isPending:s}=PFe(),{disconnect:i}=kFe(),{data:o}=DFe({address:n}),[a,c]=k.useState("main"),[l,u]=k.useState(!1),[d,h]=k.useState(()=>new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[m,b]=k.useState(!1),[v,A]=k.useState(!1),[C,T]=k.useState(!1),[x,N]=k.useState(!1),[S,D]=k.useState(!1),[P,$]=k.useState(!1),[G,W]=k.useState(!1),[I,R]=k.useState(!1),[B,O]=k.useState(!1),[M,j]=k.useState(!1),V=[{label:"Mint",icon:"/assets/mint.gif",action:()=>w(!0)},{label:"EVM NFT'S FOLDER",icon:"/assets/evmfolder.png",action:()=>b(!0)},{label:"SOL NFTS FOLDER",icon:"/assets/solfolder.png",action:()=>A(!0)},{label:"$LAWB",icon:"/assets/lawbticker.gif",action:()=>T(!0)},{label:r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Wallet",icon:"/assets/wallet.png",action:()=>{r?i():e()},disabled:s}],te=ce=>{ce.disabled||ce.action()};if(k.useEffect(()=>{const ce=window.setInterval(()=>{h(new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},1e3);return()=>window.clearInterval(ce)},[]),k.useEffect(()=>{u(!0)},[]),a==="gallery")return y.jsx($Fe,{onBack:()=>c("main"),walletAddress:n||void 0});function Z({open:ce,onClose:ge,title:Me,nfts:it}){const Je=bt=>{switch(bt){case"lawbsters":N(!0);break;case"lawbstarz":D(!0);break;case"pixelawbs":$(!0);break;case"halloween":W(!0);break;case"lawbstation":R(!0);break;case"nexus":O(!0);break}};return y.jsx(tc,{isOpen:ce,onClose:ge,title:Me,children:y.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,width:"100%"},children:it.map(bt=>y.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",background:"#f8f8f8",borderRadius:8,padding:8,cursor:"pointer"},onClick:()=>Je(bt.id),children:[y.jsx("img",{src:bt.image,alt:bt.name,style:{width:80,height:80,objectFit:"contain",marginBottom:8}}),y.jsx("span",{style:{fontWeight:"bold",fontSize:14},children:bt.name}),y.jsx("span",{style:{fontSize:12,color:"#555",textAlign:"center"},children:bt.description})]},bt.id))})})}function X({open:ce,onClose:ge}){return ce?y.jsxs(tc,{isOpen:ce,onClose:ge,title:"$LAWB",children:[y.jsx("h1",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://dexscreener.com/solana/dtxvuypheobwo66afefp9mfgt2e14c6ufexnvxwnvep",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:" $LAWB"})}),y.jsxs("p",{style:{marginBottom:"10px"},children:["$lawb seems nice but a lawbster token on the Solana blockchain will never achieve anything without a roadmap. Token created 03.15.24 on ",y.jsx("a",{href:"https://www.pump.fun/65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"pump.fun"}),"."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"$lawb airdropped to LawbStation holders 03.19.24"}),y.jsx("p",{style:{marginBottom:"10px"},children:"THERE IS NO MEME WE $LAWB YOU"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(sol) ca: 65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(arb) ca: 0x741f8FbF42485E772D97f1955c31a5B8098aC962"}),y.jsx("p",{style:{marginBottom:"10px"},children:"(dmt) ca: 0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["if you wish to bridge your $lawb token from solana to arbitrum to sanko, visit ",y.jsx("a",{href:"https://portalbridge.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://portalbridge.com/"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 1. connect solana wallet and select $lawb token (65GVcFcSqQcaMNeBkYcen4ozeT83tr13CeDLU4sUUdV6)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 2. connect arbitrum wallet and select $lawb token (0x741f8FbF42485E772D97f1955c31a5B8098aC962)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 3. select token quantity, confirm transactions."}),y.jsxs("p",{style:{marginBottom:"10px"},children:["step 4. now that you have $lawb on arbitrum, visit ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"https://sanko.xyz/bridge"})," and connect your arb wallet."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 5. from arb wallet, select $lawb token."}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 6. connect to sanko chain. if not already selected, select $lawb token on sanko (0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F)"}),y.jsx("p",{style:{marginBottom:"10px"},children:"step 7. select quantity and confirm transactions."}),y.jsx("img",{src:"/assets/lawbticker.gif",alt:"ticker $lawb",style:{width:"100%",marginBottom:"10px",marginTop:"10px"}}),y.jsx("div",{style:{width:"100%",height:"400px",marginTop:"10px"},children:y.jsx("iframe",{height:"100%",width:"100%",id:"geckoterminal-embed",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",frameBorder:"0",allow:"clipboard-write",allowFullScreen:!0})})]}):null}return y.jsxs("div",{className:t.mobileContainer,children:[y.jsx("header",{className:t.header,children:y.jsx("h1",{className:t.title,children:"there is no meme we lawb you"})}),y.jsx("div",{className:t.iconGrid,children:V.map(ce=>y.jsxs("div",{className:t.icon,onClick:()=>te(ce),children:[y.jsx("img",{src:ce.icon,alt:ce.label}),y.jsx("span",{children:ce.label})]},ce.label))}),l&&y.jsxs(tc,{isOpen:l,onClose:()=>u(!1),title:"Pixelawbs",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{u(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x2d278e95b2fc67d4b27a276807e24e479d9707f6",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})})]}),f&&y.jsx("div",{className:t.menuOverlay,onClick:()=>p(!1),children:y.jsxs("div",{className:t.menuModal,onClick:ce=>ce.stopPropagation(),children:[y.jsx("a",{href:"https://www.geckoterminal.com/solana/pools/DTxVuYphEobWo66afEfP9MfGt2E14C6UfeXnvXWnvep?embed=1&info=1&swaps=0&grayscale=0&light_chart=0&chart_type=market_cap&resolution=15m",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"GeckoTerminal"}),y.jsx("a",{href:"https://x.com/lawbstation",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbStation Twitter"}),y.jsx("a",{href:"https://x.com/lawbnexus",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"LawbNexus Twitter"}),y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/info/",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"NFTX - Lawbsters"}),y.jsx("a",{href:"https://purity.finance/lawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Purity"}),y.jsx("a",{href:"https://uwu.pro/memoji/ulawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"UwU LAWB"}),y.jsx("a",{href:"https://t.me/lawblawblawb",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Telegram"}),y.jsx("a",{href:"https://discord.gg/JdkzUHYmMy",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Discord"}),y.jsx("a",{href:"https://store.fun/lawbshop",target:"_blank",rel:"noopener noreferrer",className:t.menuLink,onClick:()=>p(!1),children:"Lawb.Shop"}),y.jsx("button",{className:t.menuLink,onClick:()=>{p(!1),j(!0)},style:{border:"none",cursor:"pointer",width:"90%",margin:"0 auto",display:"block"},children:"Meme Generator"})]})}),y.jsx(jFe,{isOpen:g,onClose:()=>w(!1),walletAddress:n||""}),y.jsx(Z,{open:m,onClose:()=>b(!1),title:"EVM NFT'S FOLDER",nfts:zFe}),y.jsx(Z,{open:v,onClose:()=>A(!1),title:"SOL NFTS FOLDER",nfts:HFe}),y.jsx(X,{open:C,onClose:()=>T(!1)}),y.jsxs(tc,{isOpen:x,onClose:()=>N(!1),title:"Lawbsters",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["420 Lawbsters seem nice but a human controlled by a lobster would never amount to anything without a roadmap. A ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Cigawrette Packs"})," derivative."]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0x0ef7ba09c38624b8e9cc4985790a2f5dbfc1dc42",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})," or ",y.jsx("a",{href:"https://v2.nftx.io/vault/0xdb98a1ae711d8bf186a8da0e81642d81e0f86a05/buy/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"NFTX"})]}),y.jsx("img",{src:"/assets/lawbsters.gif",alt:"Lawbsters",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(tc,{isOpen:S,onClose:()=>D(!1),title:"Lawbstarz",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:[" LAWBSTARZ 666x LOBSTERS DRIPPED IN BUTTER  666x PREMIUM PFP COLLECTION  LAWBSTARZ IS A MUSIC NFT  LAWBSTARZ IS AN ",y.jsx("a",{href:"https://allstarz.world",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"ALLSTARZ"})," DERIVATIVE  LAWBSTARZ IS INSPIRED BY ",y.jsx("a",{href:"https://www.remilia.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"REMILIA CORP"}),"  LED BY NETWORK SPIRITUALITY  666 ",y.jsx("a",{href:"https://www.cigawrettepacks.shop/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"CIGAWRETTEPACKS"})," WERE CONSUMED BY ",y.jsx("a",{href:"https://x.com/portionclub69",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PORTIONCLUB69"})," AND FRIENDS DURING THE CREATION OF LAWBSTARZ v1 "]}),y.jsx("p",{children:"Chain: Ethereum"}),y.jsxs("p",{children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/ethereum/0xd7922cd333da5ab3758c95f774b092a7b13a5449",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbstarz.gif",alt:"Lawbstarz",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/lawbstarzhotelroom.png",alt:"Lawbstarz Hotel Room",style:{maxWidth:"100%",marginTop:"10px"}}),y.jsx("img",{src:"/assets/tile-06-audio-image0-lawbstarz dj set 1.0 copy.png",alt:"Lawbstarz DJ Set",style:{maxWidth:"100%",marginTop:"10px"}})]}),y.jsxs(tc,{isOpen:P,onClose:()=>$(!1),title:"Pixelawbs",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["PIXELAWBS NOW MINTING ON ETHEREUM! CONNECT WALLET AND ",y.jsx("span",{style:{color:"#ff0000",textDecoration:"underline",cursor:"pointer"},onClick:()=>{$(!1),w(!0)},children:"COLLECT HERE"})," OR VISIT ",y.jsx("a",{href:"https://www.scatter.art/collection/pixelawbs",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"SCATTER.ART"})]}),y.jsx("video",{controls:!0,src:"/assets/pixelawbs.mp4",style:{width:"100%",marginBottom:"10px"},preload:"none",poster:"/assets/pixelawbsintro.png"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["2222 Pixelated Lawbsters inspired by ",y.jsx("a",{href:"https://pixeladymaker.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"PixeladyMaker"})]})]}),y.jsxs(tc,{isOpen:G,onClose:()=>W(!1),title:"A Lawbster Halloween",children:[y.jsx("h3",{style:{marginBottom:"10px"},children:"A LAWBSTER HALLOWEEN"}),y.jsx("p",{style:{marginBottom:"10px"},children:"a Lawbster Halloween party seems nice but a a group of what seems to be humans controlled by lobsters just hijacked the Spirit Halloween Superstore."}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Base"}),y.jsxs("p",{style:{marginBottom:"10px"},children:["Collect on ",y.jsx("a",{href:"https://magiceden.us/collections/base/0x8ab6733f8f8702c233f3582ec2a2750d3fc63a97",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/lawbsterhalloween.gif",alt:"Lawbster Halloween",style:{width:"100%",marginBottom:"10px"}})]}),y.jsxs(tc,{isOpen:I,onClose:()=>R(!1),title:"Lawbstation",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["Lawbstations: low poly Lawbsters viewed through various cathode-ray tubes built on ",y.jsx("a",{href:"https://www.miladystation2.net/",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"MiladyStation"})," technology. Inspired by Milady, Allstarz, Rusty Rollers, Cigawrette Packs, SPX6900 and Radbro. Brought to you in part by PortionClub and Mony Corp Group. LawbStations seem nice but a lobster controlled by MiladyStation will never achieve anything without a roadmap."]}),y.jsx("p",{style:{marginBottom:"10px"},children:"Chain: Solana"}),y.jsx("p",{style:{marginBottom:"10px"},children:y.jsx("a",{href:"https://magiceden.us/marketplace/lawbstation",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Collect Lawbstations on Secondary"})}),y.jsx("img",{src:"/assets/lawbstation.GIF",alt:"Lawbstation",style:{width:"100%",marginTop:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/lawbstation.mp4",style:{width:"100%",marginTop:"10px"}})]}),y.jsxs(tc,{isOpen:B,onClose:()=>O(!1),title:"Nexus",children:[y.jsxs("p",{style:{marginBottom:"10px"},children:["1000 Xtra Ultra High Definition Lawbsters, packaged and distributed on Solana. Collect on ",y.jsx("a",{href:"https://magiceden.us/marketplace/lawbnexus",target:"_blank",rel:"noopener noreferrer",style:{color:"#ff0000",textDecoration:"underline"},children:"Secondary"})]}),y.jsx("img",{src:"/assets/nexus.gif",alt:"Nexus",style:{width:"100%",marginBottom:"10px"}}),y.jsx("video",{controls:!0,src:"/assets/nexusminting.mp4",style:{width:"100%"}})]}),y.jsx(tc,{isOpen:M,onClose:()=>j(!1),title:"Meme Generator",children:y.jsx(IX,{})}),y.jsxs("div",{className:t.taskbar,children:[y.jsx("button",{className:t.menuButton,onClick:()=>p(!0),children:"Menu"}),y.jsxs("div",{className:t.walletStatus,children:[y.jsx("span",{style:{height:"10px",width:"10px",borderRadius:"50%",backgroundColor:r?"limegreen":"red",marginRight:"6px",border:"1px solid #000",display:"inline-block"}}),r?o||`${n==null?void 0:n.slice(0,6)}...${n==null?void 0:n.slice(-4)}`:"Disconnected"]}),y.jsx("span",{className:t.clock,children:d})]})]})};function qFe(t){const e=i=>typeof window<"u"?window.matchMedia(i).matches:!1,[n,r]=k.useState(e(t));function s(){r(e(t))}return k.useEffect(()=>{const i=window.matchMedia(t);return s(),i.addEventListener("change",s),()=>{i.removeEventListener("change",s)}},[t]),n}const EI={id:1992,name:"Sanko Testnet",network:"sanko-testnet",nativeCurrency:{decimals:18,name:"tDMT",symbol:"tDMT"},rpcUrls:{default:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]},public:{http:["https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}},blockExplorers:{default:{name:"SankoScan",url:"https://testnet.sankoscan.io"}}},CI={id:1996,name:"Sanko",network:"sanko",nativeCurrency:{decimals:18,name:"DMT",symbol:"DMT"},rpcUrls:{default:{http:["https://mainnet.sanko.xyz"]},public:{http:["https://mainnet.sanko.xyz"]}},blockExplorers:{default:{name:"SankoScan",url:"https://explorer.sanko.xyz"}}},VFe=ZX({chains:[gI,pI,EI,CI],transports:{[gI.id]:Ta(),[pI.id]:Ta(),[EI.id]:Ta("https://sanko-arb-sepolia.rpc.caldera.xyz/http"),[CI.id]:Ta("https://mainnet.sanko.xyz")}}),KFe=Symbol(),e7=Object.getPrototypeOf,Y3=new WeakMap,YFe=t=>t&&(Y3.has(t)?Y3.get(t):e7(t)===Object.prototype||e7(t)===Array.prototype),QFe=t=>YFe(t)&&t[KFe]||null,t7=(t,e=!0)=>{Y3.set(t,e)},_I={},zU=t=>typeof t=="object"&&t!==null,JFe=t=>zU(t)&&!y1.has(t)&&(Array.isArray(t)||!(Symbol.iterator in t))&&!(t instanceof WeakMap)&&!(t instanceof WeakSet)&&!(t instanceof Error)&&!(t instanceof Number)&&!(t instanceof Date)&&!(t instanceof String)&&!(t instanceof RegExp)&&!(t instanceof ArrayBuffer)&&!(t instanceof Promise),gee=(t,e)=>{const n=Q3.get(t);if((n==null?void 0:n[0])===e)return n[1];const r=Array.isArray(t)?[]:Object.create(Object.getPrototypeOf(t));return t7(r,!0),Q3.set(t,[e,r]),Reflect.ownKeys(t).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(t,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(t,s),a={value:i,enumerable:o,configurable:!0};if(y1.has(i))t7(i,!1);else if(Cf.has(i)){const[c,l]=Cf.get(i);a.value=gee(c,l())}Object.defineProperty(r,s,a)}),Object.preventExtensions(r)},ZFe=(t,e,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const a=Reflect.deleteProperty(s,i);return a&&r(["delete",[i],o]),a},set(s,i,o,a){const c=!t()&&Reflect.has(s,i),l=Reflect.get(s,i,a);if(c&&(n7(l,o)||KC.has(o)&&n7(l,KC.get(o))))return!0;n(i),zU(o)&&(o=QFe(o)||o);const u=!Cf.has(o)&&eje(o)?cr(o):o;return e(i,u),Reflect.set(s,i,u,a),r(["set",[i],o,l]),!0}}),Cf=new WeakMap,y1=new WeakSet,Q3=new WeakMap,Rv=[1,1],KC=new WeakMap;let n7=Object.is,XFe=(t,e)=>new Proxy(t,e),eje=JFe,tje=gee,nje=ZFe;function cr(t={}){if(!zU(t))throw new Error("object required");const e=KC.get(t);if(e)return e;let n=Rv[0];const r=new Set,s=(w,m=++Rv[0])=>{n!==m&&(n=m,r.forEach(b=>b(w,m)))};let i=Rv[1];const o=(w=++Rv[1])=>(i!==w&&!r.size&&(i=w,c.forEach(([m])=>{const b=m[1](w);b>n&&(n=b)})),n),a=w=>(m,b)=>{const v=[...m];v[1]=[w,...v[1]],s(v,b)},c=new Map,l=(w,m)=>{const b=!y1.has(m)&&Cf.get(m);if(b){if((_I?"production":void 0)!=="production"&&c.has(w))throw new Error("prop listener already exists");if(r.size){const v=b[2](a(w));c.set(w,[b,v])}else c.set(w,[b])}},u=w=>{var m;const b=c.get(w);b&&(c.delete(w),(m=b[1])==null||m.call(b))},d=w=>(r.add(w),r.size===1&&c.forEach(([b,v],A)=>{if((_I?"production":void 0)!=="production"&&v)throw new Error("remove already exists");const C=b[2](a(A));c.set(A,[b,C])}),()=>{r.delete(w),r.size===0&&c.forEach(([b,v],A)=>{v&&(v(),c.set(A,[b]))})});let h=!0;const f=nje(()=>h,l,u,s),p=XFe(t,f);KC.set(t,p);const g=[t,o,d];return Cf.set(p,g),Reflect.ownKeys(t).forEach(w=>{const m=Object.getOwnPropertyDescriptor(t,w);"value"in m&&m.writable&&(p[w]=t[w])}),h=!1,p}function po(t,e,n){const r=Cf.get(t);(_I?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let a=!1;const l=o(u=>{i.push(u),s||(s=Promise.resolve().then(()=>{s=void 0,a&&e(i.splice(0))}))});return a=!0,()=>{a=!1,l()}}function YC(t){const e=Cf.get(t);(_I?"production":void 0)!=="production"&&!e&&console.warn("Please use proxy object");const[n,r]=e;return tje(n,r())}function Lw(t){return y1.add(t),t}function rje(){return{proxyStateMap:Cf,refSet:y1,snapCache:Q3,versionHolder:Rv,proxyCache:KC}}function Ri(t,e,n,r){let s=t[e];return po(t,()=>{const i=t[e];Object.is(s,i)||n(s=i)})}const{proxyStateMap:sje,snapCache:ije}=rje(),FA=t=>sje.has(t);function oje(t){const e=[];let n=0;const r=new Map,s=new WeakMap,i=()=>{const l=ije.get(a),u=l==null?void 0:l[1];if(u&&!s.has(u)){const d=new Map(r);s.set(u,d)}},o=l=>s.get(l)||r,a={data:e,index:n,epoch:0,get size(){return FA(this)||i(),o(this).size},get(l){const d=o(this).get(l);if(d===void 0){this.epoch;return}return this.data[d]},has(l){const u=o(this);return this.epoch,u.has(l)},set(l,u){if(!FA(this))throw new Error("Cannot perform mutations on a snapshot");const d=r.get(l);return d===void 0?(r.set(l,this.index),this.data[this.index++]=u):this.data[d]=u,this.epoch++,this},delete(l){if(!FA(this))throw new Error("Cannot perform mutations on a snapshot");const u=r.get(l);return u===void 0?!1:(delete this.data[u],r.delete(l),this.epoch++,!0)},clear(){if(!FA(this))throw new Error("Cannot perform mutations on a snapshot");this.data.length=0,this.index=0,this.epoch++,r.clear()},forEach(l){this.epoch,o(this).forEach((d,h)=>{l(this.data[d],h,this)})},*entries(){this.epoch;const l=o(this);for(const[u,d]of l)yield[u,this.data[d]]},*keys(){this.epoch;const l=o(this);for(const u of l.keys())yield u},*values(){this.epoch;const l=o(this);for(const u of l.values())yield this.data[u]},[Symbol.iterator](){return this.entries()},get[Symbol.toStringTag](){return"Map"},toJSON(){return new Map(this.entries())}},c=cr(a);return Object.defineProperties(c,{size:{enumerable:!1},index:{enumerable:!1},epoch:{enumerable:!1},data:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(c),c}var r7={};const he={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin",cosmos:"Cosmos"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVER_ERROR:500,TOO_MANY_REQUESTS:429,SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network",SECURE_SITE_SDK_ORIGIN:(typeof process<"u"&&typeof r7<"u"?r7.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",REMOTE_FEATURES_ALERTS:{MULTI_WALLET_NOT_ENABLED:{DEFAULT:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com."},CONNECTIONS_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnections hook."},CONNECTION_HOOK:{shortMessage:"Multi-Wallet Not Enabled",longMessage:"Multi-wallet support is not enabled. Please enable it in your AppKit configuration at cloud.reown.com to use the useAppKitConnection hook."}}}},AI={caipNetworkIdToNumber(t){return t?Number(t.split(":")[1]):void 0},parseEvmChainId(t){return typeof t=="string"?this.caipNetworkIdToNumber(t):t},getNetworksByNamespace(t,e){return(t==null?void 0:t.filter(n=>n.chainNamespace===e))||[]},getFirstNetworkByNamespace(t,e){return this.getNetworksByNamespace(t,e)[0]},getNetworkNameByCaipNetworkId(t,e){var s;if(!e)return;const n=t.find(i=>i.caipNetworkId===e);if(n)return n.name;const[r]=e.split(":");return((s=he.CHAIN_NAME_MAP)==null?void 0:s[r])||void 0}},aje={bigNumber(t){return t?new _l(t):new _l(0)},multiply(t,e){if(t===void 0||e===void 0)return new _l(0);const n=new _l(t),r=new _l(e);return n.times(r)},formatNumberToLocalString(t,e=2){return t===void 0?"0.00":typeof t=="number"?t.toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e}):parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:e,minimumFractionDigits:e})},parseLocalStringToNumber(t){return t===void 0?0:parseFloat(t.replace(/,/gu,""))}},cje=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],lje=[{type:"function",name:"approve",stateMutability:"nonpayable",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],outputs:[{type:"bool"}]}],uje=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],dje={getERC20Abi:t=>he.USDT_CONTRACT_ADDRESSES.includes(t)?uje:cje,getSwapAbi:()=>lje},Uh={validateCaipAddress(t){var e;if(((e=t.split(":"))==null?void 0:e.length)!==3)throw new Error("Invalid CAIP Address");return t},parseCaipAddress(t){const e=t.split(":");if(e.length!==3)throw new Error(`Invalid CAIP-10 address: ${t}`);const[n,r,s]=e;if(!n||!r||!s)throw new Error(`Invalid CAIP-10 address: ${t}`);return{chainNamespace:n,chainId:r,address:s}},parseCaipNetworkId(t){const e=t.split(":");if(e.length!==2)throw new Error(`Invalid CAIP-2 network id: ${t}`);const[n,r]=e;if(!n||!r)throw new Error(`Invalid CAIP-2 network id: ${t}`);return{chainNamespace:n,chainId:r}}},It={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types",CONNECTIONS:"@appkit/connections",DISCONNECTED_CONNECTOR_IDS:"@appkit/disconnected_connector_ids"};function FO(t){if(!t)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${t}:connected_connector_id`}const vt={setItem(t,e){Pv()&&e!==void 0&&localStorage.setItem(t,e)},getItem(t){if(Pv())return localStorage.getItem(t)||void 0},removeItem(t){Pv()&&localStorage.removeItem(t)},clear(){Pv()&&localStorage.clear()}};function Pv(){return typeof window<"u"&&typeof localStorage<"u"}function SI(t,e){return e==="light"?{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":(t==null?void 0:t["--w3m-accent"])||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}const bi={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,ONE_SEC_MS:1e3,NAMES_SUPPORTED_CHAIN_NAMESPACES:[he.CHAIN.EVM],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x",cosmos:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,DEFAULT_REMOTE_FEATURES:{socials:["google","x","discord","farcaster","github","apple","facebook"]},DEFAULT_FEATURES:{receive:!0,send:!0,emailShowWallets:!0,connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0,pay:!1},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal"},SIWX_DEFAULTS:{signOutOnDisconnect:!0}},Ze={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired(t,e){return Date.now()-t>e},getActiveNetworkProps(){const t=Ze.getActiveNamespace(),e=Ze.getActiveCaipNetworkId(),n=e?e.split(":")[1]:void 0,r=n?isNaN(Number(n))?n:Number(n):void 0;return{namespace:t,caipNetworkId:e,chainId:r}},setWalletConnectDeepLink({name:t,href:e}){try{vt.setItem(It.DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const t=vt.getItem(It.DEEPLINK_CHOICE);if(t)return JSON.parse(t)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{vt.removeItem(It.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(t){try{vt.setItem(It.ACTIVE_NAMESPACE,t)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(t){try{vt.setItem(It.ACTIVE_CAIP_NETWORK_ID,t),Ze.setActiveNamespace(t.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return vt.getItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to get active caip network id");return}},deleteActiveCaipNetworkId(){try{vt.removeItem(It.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(t){try{const e=FO(t);vt.removeItem(e)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(t){try{const e=Ze.getRecentWallets();e.find(r=>r.id===t.id)||(e.unshift(t),e.length>2&&e.pop(),vt.setItem(It.RECENT_WALLETS,JSON.stringify(e)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const t=vt.getItem(It.RECENT_WALLETS);return t?JSON.parse(t):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(t,e){try{const n=FO(t);vt.setItem(n,e)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return vt.getItem(It.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(t){if(t)try{const e=FO(t);return vt.getItem(e)}catch{console.info("Unable to get connected connector id in namespace",t)}},setConnectedSocialProvider(t){try{vt.setItem(It.CONNECTED_SOCIAL,t)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return vt.getItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{vt.removeItem(It.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return vt.getItem(It.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){var n;const t=vt.getItem(It.ACTIVE_CAIP_NETWORK_ID);return(n=t==null?void 0:t.split(":"))==null?void 0:n[1]},setConnectionStatus(t){try{vt.setItem(It.CONNECTION_STATUS,t)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return vt.getItem(It.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const t=vt.getItem(It.CONNECTED_NAMESPACES);return t!=null&&t.length?t.split(","):[]}catch{return[]}},setConnectedNamespaces(t){try{const e=Array.from(new Set(t));vt.setItem(It.CONNECTED_NAMESPACES,e.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(t){try{const e=Ze.getConnectedNamespaces();e.includes(t)||(e.push(t),Ze.setConnectedNamespaces(e))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(t){try{const e=Ze.getConnectedNamespaces(),n=e.indexOf(t);n>-1&&(e.splice(n,1),Ze.setConnectedNamespaces(e))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return vt.getItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(t){try{vt.setItem(It.TELEGRAM_SOCIAL_PROVIDER,t)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{vt.removeItem(It.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let t={};try{const e=vt.getItem(It.PORTFOLIO_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromBalanceCache(t){try{const e=Ze.getBalanceCache();vt.setItem(It.PORTFOLIO_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getBalanceCacheForCaipAddress(t){try{const n=Ze.getBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.portfolio))return n.balance;Ze.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateBalanceCache(t){try{const e=Ze.getBalanceCache();e[t.caipAddress]=t,vt.setItem(It.PORTFOLIO_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getNativeBalanceCache(){let t={};try{const e=vt.getItem(It.NATIVE_BALANCE_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get balance cache")}return t},removeAddressFromNativeBalanceCache(t){try{const e=Ze.getBalanceCache();vt.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove address from balance cache",t)}},getNativeBalanceCacheForCaipAddress(t){try{const n=Ze.getNativeBalanceCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.nativeBalance))return n;console.info("Discarding cache for address",t),Ze.removeAddressFromBalanceCache(t)}catch{console.info("Unable to get balance cache for address",t)}},updateNativeBalanceCache(t){try{const e=Ze.getNativeBalanceCache();e[t.caipAddress]=t,vt.setItem(It.NATIVE_BALANCE_CACHE,JSON.stringify(e))}catch{console.info("Unable to update balance cache",t)}},getEnsCache(){let t={};try{const e=vt.getItem(It.ENS_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get ens name cache")}return t},getEnsFromCacheForAddress(t){try{const n=Ze.getEnsCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.ens))return n.ens;Ze.removeEnsFromCache(t)}catch{console.info("Unable to get ens name from cache",t)}},updateEnsCache(t){try{const e=Ze.getEnsCache();e[t.address]=t,vt.setItem(It.ENS_CACHE,JSON.stringify(e))}catch{console.info("Unable to update ens name cache",t)}},removeEnsFromCache(t){try{const e=Ze.getEnsCache();vt.setItem(It.ENS_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove ens name from cache",t)}},getIdentityCache(){let t={};try{const e=vt.getItem(It.IDENTITY_CACHE);t=e?JSON.parse(e):{}}catch{console.info("Unable to get identity cache")}return t},getIdentityFromCacheForAddress(t){try{const n=Ze.getIdentityCache()[t];if(n&&!this.isCacheExpired(n.timestamp,this.cacheExpiry.identity))return n.identity;Ze.removeIdentityFromCache(t)}catch{console.info("Unable to get identity from cache",t)}},updateIdentityCache(t){try{const e=Ze.getIdentityCache();e[t.address]={identity:t.identity,timestamp:t.timestamp},vt.setItem(It.IDENTITY_CACHE,JSON.stringify(e))}catch{console.info("Unable to update identity cache",t)}},removeIdentityFromCache(t){try{const e=Ze.getIdentityCache();vt.setItem(It.IDENTITY_CACHE,JSON.stringify({...e,[t]:void 0}))}catch{console.info("Unable to remove identity from cache",t)}},clearAddressCache(){try{vt.removeItem(It.PORTFOLIO_CACHE),vt.removeItem(It.NATIVE_BALANCE_CACHE),vt.removeItem(It.ENS_CACHE),vt.removeItem(It.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(t){try{vt.setItem(It.PREFERRED_ACCOUNT_TYPES,JSON.stringify(t))}catch{console.info("Unable to set preferred account types",t)}},getPreferredAccountTypes(){try{const t=vt.getItem(It.PREFERRED_ACCOUNT_TYPES);return t?JSON.parse(t):{}}catch{console.info("Unable to get preferred account types")}return{}},setConnections(t,e){try{const n=Ze.getConnections(),r=n[e]??[],s=new Map;for(const o of r)s.set(o.connectorId,{...o});for(const o of t){const a=s.get(o.connectorId),c=o.connectorId===he.CONNECTOR_ID.AUTH;if(a&&!c){const l=new Set(a.accounts.map(d=>d.address.toLowerCase())),u=o.accounts.filter(d=>!l.has(d.address.toLowerCase()));a.accounts.push(...u)}else s.set(o.connectorId,{...o})}const i={...n,[e]:Array.from(s.values())};vt.setItem(It.CONNECTIONS,JSON.stringify(i))}catch(n){console.error("Unable to sync connections to storage",n)}},getConnections(){try{const t=vt.getItem(It.CONNECTIONS);return t?JSON.parse(t):{}}catch(t){return console.error("Unable to get connections from storage",t),{}}},deleteAddressFromConnection({connectorId:t,address:e,namespace:n}){try{const r=Ze.getConnections(),s=r[n]??[],i=new Map(s.map(a=>[a.connectorId,a])),o=i.get(t);o&&(o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase()).length===0?i.delete(t):i.set(t,{...o,accounts:o.accounts.filter(c=>c.address.toLowerCase()!==e.toLowerCase())})),vt.setItem(It.CONNECTIONS,JSON.stringify({...r,[n]:Array.from(i.values())}))}catch{console.error(`Unable to remove address "${e}" from connector "${t}" in namespace "${n}"`)}},getDisconnectedConnectorIds(){try{const t=vt.getItem(It.DISCONNECTED_CONNECTOR_IDS);return t?JSON.parse(t):{}}catch{console.info("Unable to get disconnected connector ids")}return{}},addDisconnectedConnectorId(t,e){try{const n=Ze.getDisconnectedConnectorIds(),r=n[e]??[];r.push(t),vt.setItem(It.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to set disconnected connector id "${t}" for namespace "${e}"`)}},removeDisconnectedConnectorId(t,e){try{const n=Ze.getDisconnectedConnectorIds();let r=n[e]??[];r=r.filter(s=>s.toLowerCase()!==t.toLowerCase()),vt.setItem(It.DISCONNECTED_CONNECTOR_IDS,JSON.stringify({...n,[e]:Array.from(new Set(r))}))}catch{console.error(`Unable to remove disconnected connector id "${t}" for namespace "${e}"`)}},isConnectorDisconnected(t,e){try{return(Ze.getDisconnectedConnectorIds()[e]??[]).some(s=>s.toLowerCase()===t.toLowerCase())}catch{console.info(`Unable to get disconnected connector id "${t}" for namespace "${e}"`)}return!1}},dt={isMobile(){var t;return this.isClient()?!!(window!=null&&window.matchMedia&&typeof window.matchMedia=="function"&&((t=window.matchMedia("(pointer:coarse)"))!=null&&t.matches)||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},checkCaipNetwork(t,e=""){return t==null?void 0:t.caipNetworkId.toLocaleLowerCase().includes(e.toLowerCase())},isAndroid(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return dt.isMobile()&&t.includes("android")},isIos(){if(!this.isMobile())return!1;const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("iphone")||t.includes("ipad")},isSafari(){return this.isClient()?(window==null?void 0:window.navigator.userAgent.toLowerCase()).includes("safari"):!1},isClient(){return typeof window<"u"},isPairingExpired(t){return t?t-Date.now()<=bi.TEN_SEC_MS:!0},isAllowedRetry(t,e=bi.ONE_SEC_MS){return Date.now()-t>=e},copyToClopboard(t){navigator.clipboard.writeText(t)},isIframe(){try{return(window==null?void 0:window.self)!==(window==null?void 0:window.top)}catch{return!1}},isSafeApp(){var t,e;if(dt.isClient()&&window.self!==window.top)try{const n=(e=(t=window==null?void 0:window.location)==null?void 0:t.ancestorOrigins)==null?void 0:e[0],r="https://app.safe.global";if(n){const s=new URL(n),i=new URL(r);return s.hostname===i.hostname}}catch{return!1}return!1},getPairingExpiry(){return Date.now()+bi.FOUR_MINUTES_MS},getNetworkId(t){return t==null?void 0:t.split(":")[1]},getPlainAddress(t){return t==null?void 0:t.split(":")[2]},async wait(t){return new Promise(e=>{setTimeout(e,t)})},debounce(t,e=500){let n;return(...r)=>{function s(){t(...r)}n&&clearTimeout(n),n=setTimeout(s,e)}},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},formatNativeUrl(t,e,n=null){if(dt.isHttpUrl(t))return this.formatUniversalUrl(t,e);let r=t,s=n;r.includes("://")||(r=t.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),s&&!(s!=null&&s.endsWith("/"))&&(s=`${s}/`),this.isTelegram()&&this.isAndroid()&&(e=encodeURIComponent(e));const i=encodeURIComponent(e);return{redirect:`${r}wc?uri=${i}`,redirectUniversalLink:s?`${s}wc?uri=${i}`:void 0,href:r}},formatUniversalUrl(t,e){if(!dt.isHttpUrl(t))return this.formatNativeUrl(t,e);let n=t;n.endsWith("/")||(n=`${n}/`);const r=encodeURIComponent(e);return{redirect:`${n}wc?uri=${r}`,href:n}},getOpenTargetForPlatform(t){return t==="popupWindow"?t:this.isTelegram()?Ze.getTelegramSocialProvider()?"_top":"_blank":t},openHref(t,e,n){window==null||window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},returnOpenHref(t,e,n){return window==null?void 0:window.open(t,this.getOpenTargetForPlatform(e),n||"noreferrer noopener")},isTelegram(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)},isPWA(){var n,r;if(typeof window>"u")return!1;const t=window!=null&&window.matchMedia&&typeof window.matchMedia=="function"?(n=window.matchMedia("(display-mode: standalone)"))==null?void 0:n.matches:!1,e=(r=window==null?void 0:window.navigator)==null?void 0:r.standalone;return!!(t||e)},async preloadImage(t){const e=new Promise((n,r)=>{const s=new Image;s.onload=n,s.onerror=r,s.crossOrigin="anonymous",s.src=t});return Promise.race([e,dt.wait(2e3)])},formatBalance(t,e){let n="0.000";if(typeof t=="string"){const r=Number(t);if(r){const s=Math.floor(r*1e3)/1e3;s&&(n=s.toString())}}return`${n}${e?` ${e}`:""}`},formatBalance2(t,e){var r;let n;if(t==="0")n="0";else if(typeof t=="string"){const s=Number(t);s&&(n=(r=s.toString().match(/^-?\d+(?:\.\d{0,3})?/u))==null?void 0:r[0])}return{value:n??"0",rest:n==="0"?"000":"",symbol:e}},getApiUrl(){return he.W3M_API_URL},getBlockchainApiUrl(){return he.BLOCKCHAIN_API_RPC_URL},getAnalyticsUrl(){return he.PULSE_API_URL},getUUID(){return crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})},parseError(t){var e,n;return typeof t=="string"?t:typeof((n=(e=t==null?void 0:t.issues)==null?void 0:e[0])==null?void 0:n.message)=="string"?t.issues[0].message:t instanceof Error?t.message:"Unknown error"},sortRequestedNetworks(t,e=[]){const n={};return e&&t&&(t.forEach((r,s)=>{n[r]=s}),e.sort((r,s)=>{const i=n[r.id],o=n[s.id];return i!==void 0&&o!==void 0?i-o:i!==void 0?-1:o!==void 0?1:0})),e},calculateBalance(t){let e=0;for(const n of t)e+=n.value??0;return e},formatTokenBalance(t){const e=t.toFixed(2),[n,r]=e.split(".");return{dollars:n,pennies:r}},isAddress(t,e="eip155"){switch(e){case"eip155":if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)){if(/^(?:0x)?[0-9a-f]{40}$/iu.test(t)||/^(?:0x)?[0-9A-F]{40}$/iu.test(t))return!0}else return!1;return!1;case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(t);default:return!1}},uniqueBy(t,e){const n=new Set;return t.filter(r=>{const s=r[e];return n.has(s)?!1:(n.add(s),!0)})},generateSdkVersion(t,e,n){const s=t.length===0?bi.ADAPTER_TYPES.UNIVERSAL:t.map(i=>i.adapterType).join(",");return`${e}-${s}-${n}`},createAccount(t,e,n,r,s){return{namespace:t,address:e,type:n,publicKey:r,path:s}},isCaipAddress(t){if(typeof t!="string")return!1;const e=t.split(":"),n=e[0];return e.filter(Boolean).length===3&&n in he.CHAIN_NAME_MAP},getAccount(t){return t?typeof t=="string"?{address:t,chainId:void 0}:{address:t.address,chainId:t.chainId}:{address:void 0,chainId:void 0}},isMac(){const t=window==null?void 0:window.navigator.userAgent.toLowerCase();return t.includes("macintosh")&&!t.includes("safari")},formatTelegramSocialLoginUrl(t){const e=`--${encodeURIComponent(window==null?void 0:window.location.href)}`,n="state=";if(new URL(t).host==="auth.magic.link"){const s="provider_authorization_url=",i=t.substring(t.indexOf(s)+s.length),o=this.injectIntoUrl(decodeURIComponent(i),n,e);return t.replace(i,encodeURIComponent(o))}return this.injectIntoUrl(t,n,e)},injectIntoUrl(t,e,n){const r=t.indexOf(e);if(r===-1)throw new Error(`${e} parameter not found in the URL: ${t}`);const s=t.indexOf("&",r),i=e.length,o=s!==-1?s:t.length,a=t.substring(0,r+i),c=t.substring(r+i,o),l=t.substring(s),u=c+n;return a+u+l}};async function dv(...t){const e=await fetch(...t);if(!e.ok)throw new Error(`HTTP status code: ${e.status}`,{cause:e});return e}class w1{constructor({baseUrl:e,clientId:n}){this.baseUrl=e,this.clientId=n}async get({headers:e,signal:n,cache:r,...s}){const i=this.createUrl(s);return(await dv(i,{method:"GET",headers:e,signal:n,cache:r})).json()}async getBlob({headers:e,signal:n,...r}){const s=this.createUrl(r);return(await dv(s,{method:"GET",headers:e,signal:n})).blob()}async post({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await dv(i,{method:"POST",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await dv(i,{method:"PUT",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:n,signal:r,...s}){const i=this.createUrl(s);return(await dv(i,{method:"DELETE",headers:n,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:n}){const r=new URL(e,this.baseUrl);return n&&Object.entries(n).forEach(([s,i])=>{i&&r.searchParams.append(s,i)}),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}const hje={getFeatureValue(t,e){const n=e==null?void 0:e[t];return n===void 0?bi.DEFAULT_FEATURES[t]:n},filterSocialsByPlatform(t){if(!t||!t.length)return t;if(dt.isTelegram()){if(dt.isIos())return t.filter(e=>e!=="google");if(dt.isMac())return t.filter(e=>e!=="x");if(dt.isAndroid())return t.filter(e=>!["facebook","x"].includes(e))}return t}},gt=cr({features:bi.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:bi.DEFAULT_ACCOUNT_TYPES,enableNetworkSwitch:!0,experimental_preferUniversalLinks:!1,remoteFeatures:{}}),Ot={state:gt,subscribeKey(t,e){return Ri(gt,t,e)},setOptions(t){Object.assign(gt,t)},setRemoteFeatures(t){var n;if(!t)return;const e={...gt.remoteFeatures,...t};gt.remoteFeatures=e,(n=gt.remoteFeatures)!=null&&n.socials&&(gt.remoteFeatures.socials=hje.filterSocialsByPlatform(gt.remoteFeatures.socials))},setFeatures(t){if(!t)return;gt.features||(gt.features=bi.DEFAULT_FEATURES);const e={...gt.features,...t};gt.features=e},setProjectId(t){gt.projectId=t},setCustomRpcUrls(t){gt.customRpcUrls=t},setAllWallets(t){gt.allWallets=t},setIncludeWalletIds(t){gt.includeWalletIds=t},setExcludeWalletIds(t){gt.excludeWalletIds=t},setFeaturedWalletIds(t){gt.featuredWalletIds=t},setTokens(t){gt.tokens=t},setTermsConditionsUrl(t){gt.termsConditionsUrl=t},setPrivacyPolicyUrl(t){gt.privacyPolicyUrl=t},setCustomWallets(t){gt.customWallets=t},setIsSiweEnabled(t){gt.isSiweEnabled=t},setIsUniversalProvider(t){gt.isUniversalProvider=t},setSdkVersion(t){gt.sdkVersion=t},setMetadata(t){gt.metadata=t},setDisableAppend(t){gt.disableAppend=t},setEIP6963Enabled(t){gt.enableEIP6963=t},setDebug(t){gt.debug=t},setEnableWalletConnect(t){gt.enableWalletConnect=t},setEnableWalletGuide(t){gt.enableWalletGuide=t},setEnableAuthLogger(t){gt.enableAuthLogger=t},setEnableWallets(t){gt.enableWallets=t},setPreferUniversalLinks(t){gt.experimental_preferUniversalLinks=t},setSIWX(t){if(t)for(const[e,n]of Object.entries(bi.SIWX_DEFAULTS))t[e]??(t[e]=n);gt.siwx=t},setConnectMethodsOrder(t){gt.features={...gt.features,connectMethodsOrder:t}},setWalletFeaturesOrder(t){gt.features={...gt.features,walletFeaturesOrder:t}},setSocialsOrder(t){gt.remoteFeatures={...gt.remoteFeatures,socials:t}},setCollapseWallets(t){gt.features={...gt.features,collapseWallets:t}},setEnableEmbedded(t){gt.enableEmbedded=t},setAllowUnsupportedChain(t){gt.allowUnsupportedChain=t},setManualWCControl(t){gt.manualWCControl=t},setEnableNetworkSwitch(t){gt.enableNetworkSwitch=t},setEnableReconnect(t){gt.enableReconnect=t},setDefaultAccountTypes(t={}){Object.entries(t).forEach(([e,n])=>{n&&(gt.defaultAccountTypes[e]=n)})},setUniversalProviderConfigOverride(t){gt.universalProviderConfigOverride=t},getUniversalProviderConfigOverride(){return gt.universalProviderConfigOverride},getSnapshot(){return YC(gt)}},fje=Object.freeze({enabled:!0,events:[]}),pje=new w1({baseUrl:dt.getAnalyticsUrl(),clientId:null}),gje=5,mje=60*1e3,Ld=cr({...fje}),yje={state:Ld,subscribeKey(t,e){return Ri(Ld,t,e)},async sendError(t,e){if(!Ld.enabled)return;const n=Date.now();if(Ld.events.filter(i=>{const o=new Date(i.properties.timestamp||"").getTime();return n-o<mje}).length>=gje)return;const s={type:"error",event:e,properties:{errorType:t.name,errorMessage:t.message,stackTrace:t.stack,timestamp:new Date().toISOString()}};Ld.events.push(s);try{if(typeof window>"u")return;const{projectId:i,sdkType:o,sdkVersion:a}=Ot.state;await pje.post({path:"/e",params:{projectId:i,st:o,sv:a||"html-wagmi-4.2.2"},body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:new Date().toISOString(),props:{type:"error",event:e,errorType:t.name,errorMessage:t.message,stackTrace:t.stack}}})}catch{}},enable(){Ld.enabled=!0},disable(){Ld.enabled=!1},clearEvents(){Ld.events=[]}};class Uw extends Error{constructor(e,n,r){super(e),this.name="AppKitError",this.category=n,this.originalError=r,Object.setPrototypeOf(this,Uw.prototype);let s=!1;if(r instanceof Error&&typeof r.stack=="string"&&r.stack){const i=r.stack,o=i.indexOf(`
`);if(o>-1){const a=i.substring(o+1);this.stack=`${this.name}: ${this.message}
${a}`,s=!0}}s||(Error.captureStackTrace?Error.captureStackTrace(this,Uw):this.stack||(this.stack=`${this.name}: ${this.message}`))}}function s7(t,e){const n=t instanceof Uw?t:new Uw(t instanceof Error?t.message:String(t),e,t);throw yje.sendError(n,n.category),n}function Ha(t,e="INTERNAL_SDK_ERROR"){const n={};return Object.keys(t).forEach(r=>{const s=t[r];if(typeof s=="function"){let i=s;s.constructor.name==="AsyncFunction"?i=async(...o)=>{try{return await s(...o)}catch(a){return s7(a,e)}}:i=(...o)=>{try{return s(...o)}catch(a){return s7(a,e)}},n[r]=i}else n[r]=s}),n}var Bw={};const wje="https://secure.walletconnect.org/sdk",bje=(typeof process<"u"&&typeof Bw<"u"?Bw.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||wje,vje=(typeof process<"u"&&typeof Bw<"u"?Bw.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",Eje=(typeof process<"u"&&typeof Bw<"u"?Bw.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",Ye={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",APP_RPC_ABORT:"@w3m-app/RPC_ABORT",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",FRAME_RPC_ABORT_SUCCESS:"@w3m-frame/RPC_ABORT_SUCCESS",FRAME_RPC_ABORT_ERROR:"@w3m-frame/RPC_ABORT_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},Ls={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}},bl={PHANTOM:{id:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",url:"https://phantom.app"},SOLFLARE:{id:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",url:"https://solflare.com"},COINBASE:{id:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",url:"https://go.cb-w.com"}},Cje={handleMobileDeeplinkRedirect(t,e){const n=window.location.href,r=encodeURIComponent(n);if(t===bl.PHANTOM.id&&!("phantom"in window)){const s=n.startsWith("https")?"https":"http",i=n.split("/")[2],o=encodeURIComponent(`${s}://${i}`);window.location.href=`${bl.PHANTOM.url}/ul/browse/${r}?ref=${o}`}t===bl.SOLFLARE.id&&!("solflare"in window)&&(window.location.href=`${bl.SOLFLARE.url}/ul/v1/browse/${r}?ref=${r}`),e===he.CHAIN.SOLANA&&t===bl.COINBASE.id&&!("coinbaseSolana"in window)&&(window.location.href=`${bl.COINBASE.url}/dapp?cb_url=${r}`)}},xo=cr({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),_je={state:xo,subscribeNetworkImages(t){return po(xo.networkImages,()=>t(xo.networkImages))},subscribeKey(t,e){return Ri(xo,t,e)},subscribe(t){return po(xo,()=>t(xo))},setWalletImage(t,e){xo.walletImages[t]=e},setNetworkImage(t,e){xo.networkImages[t]=e},setChainImage(t,e){xo.chainImages[t]=e},setConnectorImage(t,e){xo.connectorImages={...xo.connectorImages,[t]:e}},setTokenImage(t,e){xo.tokenImages[t]=e},setCurrencyImage(t,e){xo.currencyImages[t]=e}},mc=Ha(_je),Aje={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00",cosmos:""},jO=cr({networkImagePromises:{}}),Sje={async fetchWalletImage(t){if(t)return await Et._fetchWalletImage(t),this.getWalletImageById(t)},async fetchNetworkImage(t){if(!t)return;const e=this.getNetworkImageById(t);return e||(jO.networkImagePromises[t]||(jO.networkImagePromises[t]=Et._fetchNetworkImage(t)),await jO.networkImagePromises[t],this.getNetworkImageById(t))},getWalletImageById(t){if(t)return mc.state.walletImages[t]},getWalletImage(t){if(t!=null&&t.image_url)return t==null?void 0:t.image_url;if(t!=null&&t.image_id)return mc.state.walletImages[t.image_id]},getNetworkImage(t){var e,n,r;if((e=t==null?void 0:t.assets)!=null&&e.imageUrl)return(n=t==null?void 0:t.assets)==null?void 0:n.imageUrl;if((r=t==null?void 0:t.assets)!=null&&r.imageId)return mc.state.networkImages[t.assets.imageId]},getNetworkImageById(t){if(t)return mc.state.networkImages[t]},getConnectorImage(t){var e;if(t!=null&&t.imageUrl)return t.imageUrl;if((e=t==null?void 0:t.info)!=null&&e.icon)return t.info.icon;if(t!=null&&t.imageId)return mc.state.connectorImages[t.imageId]},getChainImage(t){return mc.state.networkImages[Aje[t]]}},Ud=cr({message:"",variant:"info",open:!1}),xje={state:Ud,subscribeKey(t,e){return Ri(Ud,t,e)},open(t,e){const{debug:n}=Ot.state,{shortMessage:r,longMessage:s}=t;n&&(Ud.message=r,Ud.variant=e,Ud.open=!0),s&&console.error(typeof s=="function"?s():s)},close(){Ud.open=!1,Ud.message="",Ud.variant="info"}},np=Ha(xje),Ije=dt.getAnalyticsUrl(),Nje=new w1({baseUrl:Ije,clientId:null}),Tje=["MODAL_CREATED"],cu=cr({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),gr={state:cu,subscribe(t){return po(cu,()=>t(cu))},getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ot.state;return{projectId:t,st:e,sv:n||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(t){try{const e=vn.state.address;if(Tje.includes(t.data.event)||typeof window>"u")return;await Nje.post({path:"/e",params:gr.getSdkProperties(),body:{eventId:dt.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:t.timestamp,props:{...t.data,address:e}}}),cu.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===he.HTTP_STATUS_CODES.FORBIDDEN&&!cu.reportedErrors.FORBIDDEN&&(np.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${Pv()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),cu.reportedErrors.FORBIDDEN=!0)}},sendEvent(t){var e;cu.timestamp=Date.now(),cu.data=t,(e=Ot.state.features)!=null&&e.analytics&&gr._sendAnalyticsEvent(cu)}},Rje=dt.getApiUrl(),$i=new w1({baseUrl:Rje,clientId:null}),Pje=40,i7=4,Oje=20,Lt=cr({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],filteredWallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),Et={state:Lt,subscribeKey(t,e){return Ri(Lt,t,e)},_getSdkProperties(){const{projectId:t,sdkType:e,sdkVersion:n}=Ot.state;return{projectId:t,st:e||"appkit",sv:n||"html-wagmi-4.2.2"}},_filterOutExtensions(t){return Ot.state.isUniversalProvider?t.filter(e=>!!(e.mobile_link||e.desktop_link||e.webapp_link)):t},async _fetchWalletImage(t){const e=`${$i.baseUrl}/getWalletImage/${t}`,n=await $i.getBlob({path:e,params:Et._getSdkProperties()});mc.setWalletImage(t,URL.createObjectURL(n))},async _fetchNetworkImage(t){const e=`${$i.baseUrl}/public/getAssetImage/${t}`,n=await $i.getBlob({path:e,params:Et._getSdkProperties()});mc.setNetworkImage(t,URL.createObjectURL(n))},async _fetchConnectorImage(t){const e=`${$i.baseUrl}/public/getAssetImage/${t}`,n=await $i.getBlob({path:e,params:Et._getSdkProperties()});mc.setConnectorImage(t,URL.createObjectURL(n))},async _fetchCurrencyImage(t){const e=`${$i.baseUrl}/public/getCurrencyImage/${t}`,n=await $i.getBlob({path:e,params:Et._getSdkProperties()});mc.setCurrencyImage(t,URL.createObjectURL(n))},async _fetchTokenImage(t){const e=`${$i.baseUrl}/public/getTokenImage/${t}`,n=await $i.getBlob({path:e,params:Et._getSdkProperties()});mc.setTokenImage(t,URL.createObjectURL(n))},_filterWalletsByPlatform(t){return dt.isMobile()?t==null?void 0:t.filter(n=>n.mobile_link||n.id===bl.COINBASE.id?!0:Q.state.activeChain==="solana"&&(n.id===bl.SOLFLARE.id||n.id===bl.PHANTOM.id)):t},async fetchProjectConfig(){return(await $i.get({path:"/appkit/v1/config",params:Et._getSdkProperties()})).features},async fetchAllowedOrigins(){try{const{allowedOrigins:t}=await $i.get({path:"/projects/v1/origins",params:Et._getSdkProperties()});return t}catch(t){if(t instanceof Error&&t.cause instanceof Response){const e=t.cause.status;if(e===he.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)throw new Error("RATE_LIMITED",{cause:t});if(e>=he.HTTP_STATUS_CODES.SERVER_ERROR&&e<600)throw new Error("SERVER_ERROR",{cause:t});return[]}return[]}},async fetchNetworkImages(){const t=Q.getAllRequestedCaipNetworks(),e=t==null?void 0:t.map(({assets:n})=>n==null?void 0:n.imageId).filter(Boolean).filter(n=>!Sje.getNetworkImageById(n));e&&await Promise.allSettled(e.map(n=>Et._fetchNetworkImage(n)))},async fetchConnectorImages(){const{connectors:t}=st.state,e=t.map(({imageId:n})=>n).filter(Boolean);await Promise.allSettled(e.map(n=>Et._fetchConnectorImage(n)))},async fetchCurrencyImages(t=[]){await Promise.allSettled(t.map(e=>Et._fetchCurrencyImage(e)))},async fetchTokenImages(t=[]){await Promise.allSettled(t.map(e=>Et._fetchTokenImage(e)))},async fetchWallets(t){var i;const e=t.exclude??[];Et._getSdkProperties().sv.startsWith("html-core-")&&e.push(...Object.values(bl).map(o=>o.id));const r=await $i.get({path:"/getWallets",params:{...Et._getSdkProperties(),...t,page:String(t.page),entries:String(t.entries),include:(i=t.include)==null?void 0:i.join(","),exclude:e.join(",")}});return{data:Et._filterWalletsByPlatform(r==null?void 0:r.data)||[],count:r==null?void 0:r.count}},async fetchFeaturedWallets(){const{featuredWalletIds:t}=Ot.state;if(t!=null&&t.length){const e={...Et._getSdkProperties(),page:1,entries:(t==null?void 0:t.length)??i7,include:t},{data:n}=await Et.fetchWallets(e),r=[...n].sort((i,o)=>t.indexOf(i.id)-t.indexOf(o.id)),s=r.map(i=>i.image_id).filter(Boolean);await Promise.allSettled(s.map(i=>Et._fetchWalletImage(i))),Lt.featured=r,Lt.allFeatured=r}},async fetchRecommendedWallets(){try{Lt.isFetchingRecommendedWallets=!0;const{includeWalletIds:t,excludeWalletIds:e,featuredWalletIds:n}=Ot.state,r=[...e??[],...n??[]].filter(Boolean),s=Q.getRequestedCaipNetworkIds().join(","),i={page:1,entries:i7,include:t,exclude:r,chains:s},{data:o,count:a}=await Et.fetchWallets(i),c=Ze.getRecentWallets(),l=o.map(d=>d.image_id).filter(Boolean),u=c.map(d=>d.image_id).filter(Boolean);await Promise.allSettled([...l,...u].map(d=>Et._fetchWalletImage(d))),Lt.recommended=o,Lt.allRecommended=o,Lt.count=a??0}catch{}finally{Lt.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:t}){const{includeWalletIds:e,excludeWalletIds:n,featuredWalletIds:r}=Ot.state,s=Q.getRequestedCaipNetworkIds().join(","),i=[...Lt.recommended.map(({id:u})=>u),...n??[],...r??[]].filter(Boolean),o={page:t,entries:Pje,include:e,exclude:i,chains:s},{data:a,count:c}=await Et.fetchWallets(o),l=a.slice(0,Oje).map(u=>u.image_id).filter(Boolean);await Promise.allSettled(l.map(u=>Et._fetchWalletImage(u))),Lt.wallets=dt.uniqueBy([...Lt.wallets,...Et._filterOutExtensions(a)],"id").filter(u=>{var d;return(d=u.chains)==null?void 0:d.some(h=>s.includes(h))}),Lt.count=c>Lt.count?c:Lt.count,Lt.page=t},async initializeExcludedWallets({ids:t}){const e={page:1,entries:t.length,include:t},{data:n}=await Et.fetchWallets(e);n&&n.forEach(r=>{Lt.excludedWallets.push({rdns:r.rdns,name:r.name})})},async searchWallet({search:t,badge:e}){const{includeWalletIds:n,excludeWalletIds:r}=Ot.state,s=Q.getRequestedCaipNetworkIds().join(",");Lt.search=[];const i={page:1,entries:100,search:t==null?void 0:t.trim(),badge_type:e,include:n,exclude:r,chains:s},{data:o}=await Et.fetchWallets(i);gr.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:e??"",search:t??""}});const a=o.map(c=>c.image_id).filter(Boolean);await Promise.allSettled([...a.map(c=>Et._fetchWalletImage(c)),dt.wait(300)]),Lt.search=Et._filterOutExtensions(o)},initPromise(t,e){const n=Lt.promises[t];return n||(Lt.promises[t]=e())},prefetch({fetchConnectorImages:t=!0,fetchFeaturedWallets:e=!0,fetchRecommendedWallets:n=!0,fetchNetworkImages:r=!0}={}){const s=[t&&Et.initPromise("connectorImages",Et.fetchConnectorImages),e&&Et.initPromise("featuredWallets",Et.fetchFeaturedWallets),n&&Et.initPromise("recommendedWallets",Et.fetchRecommendedWallets),r&&Et.initPromise("networkImages",Et.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(s)},prefetchAnalyticsConfig(){var t;(t=Ot.state.features)!=null&&t.analytics&&Et.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:t}=await $i.get({path:"/getAnalyticsConfig",params:Et._getSdkProperties()});Ot.setFeatures({analytics:t})}catch{Ot.setFeatures({analytics:!1})}},filterByNamespaces(t){if(!(t!=null&&t.length)){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=Q.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})},clearFilterByNamespaces(){Lt.filteredWallets=[]},setFilterByNamespace(t){if(!t){Lt.featured=Lt.allFeatured,Lt.recommended=Lt.allRecommended;return}const e=Q.getRequestedCaipNetworkIds().join(",");Lt.featured=Lt.allFeatured.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.recommended=Lt.allRecommended.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))}),Lt.filteredWallets=Lt.wallets.filter(n=>{var r;return(r=n.chains)==null?void 0:r.some(s=>e.includes(s))})}},Un=cr({view:"Connect",history:["Connect"],transactionStack:[]}),kje={state:Un,subscribeKey(t,e){return Ri(Un,t,e)},pushTransactionStack(t){Un.transactionStack.push(t)},popTransactionStack(t){const e=Un.transactionStack.pop();if(!e)return;const{onSuccess:n,onError:r,onCancel:s}=e;switch(t){case"success":n==null||n();break;case"error":r==null||r(),Pt.goBack();break;case"cancel":s==null||s(),Pt.goBack();break}},push(t,e){t!==Un.view&&(Un.view=t,Un.history.push(t),Un.data=e)},reset(t,e){Un.view=t,Un.history=[t],Un.data=e},replace(t,e){Un.history.at(-1)===t||(Un.view=t,Un.history[Un.history.length-1]=t,Un.data=e)},goBack(){var r;const t=Q.state.activeCaipAddress,e=Pt.state.view==="ConnectingFarcaster",n=!t&&e;if(Un.history.length>1){Un.history.pop();const[s]=Un.history.slice(-1);s&&(t&&s==="Connect"?Un.view="Account":Un.view=s)}else Xn.close();(r=Un.data)!=null&&r.wallet&&(Un.data.wallet=void 0),setTimeout(()=>{var s,i,o;if(n){vn.setFarcasterUrl(void 0,Q.state.activeChain);const a=st.getAuthConnector();(s=a==null?void 0:a.provider)==null||s.reload();const c=YC(Ot.state);(o=(i=a==null?void 0:a.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:c.metadata,sdkVersion:c.sdkVersion,projectId:c.projectId,sdkType:c.sdkType})}},100)},goBackToIndex(t){if(Un.history.length>1){Un.history=Un.history.slice(0,t+1);const[e]=Un.history.slice(-1);e&&(Un.view=e)}},goBackOrCloseModal(){Pt.state.history.length>1?Pt.goBack():Xn.close()}},Pt=Ha(kje),lu=cr({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),J3={state:lu,subscribe(t){return po(lu,()=>t(lu))},setThemeMode(t){lu.themeMode=t;try{const e=st.getAuthConnector();if(e){const n=J3.getSnapshot().themeVariables;e.provider.syncTheme({themeMode:t,themeVariables:n,w3mThemeVariables:SI(n,t)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(t){lu.themeVariables={...lu.themeVariables,...t};try{const e=st.getAuthConnector();if(e){const n=J3.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:n,w3mThemeVariables:SI(lu.themeVariables,lu.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot(){return YC(lu)}},jA=Ha(J3),mee={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0,cosmos:void 0},pn=cr({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...mee},filterByNamespaceMap:{eip155:!0,solana:!0,polkadot:!0,bip122:!0,cosmos:!0}}),Dje={state:pn,subscribe(t){return po(pn,()=>{t(pn)})},subscribeKey(t,e){return Ri(pn,t,e)},initialize(t){t.forEach(e=>{const n=Ze.getConnectedConnectorId(e);n&&st.setConnectorId(n,e)})},setActiveConnector(t){t&&(pn.activeConnector=Lw(t))},setConnectors(t){t.filter(s=>!pn.allConnectors.some(i=>i.id===s.id&&st.getConnectorName(i.name)===st.getConnectorName(s.name)&&i.chain===s.chain)).forEach(s=>{s.type!=="MULTI_CHAIN"&&pn.allConnectors.push(Lw(s))});const n=st.getEnabledNamespaces(),r=st.getEnabledConnectors(n);pn.connectors=st.mergeMultiChainConnectors(r)},filterByNamespaces(t){Object.keys(pn.filterByNamespaceMap).forEach(e=>{pn.filterByNamespaceMap[e]=!1}),t.forEach(e=>{pn.filterByNamespaceMap[e]=!0}),st.updateConnectorsForEnabledNamespaces()},filterByNamespace(t,e){pn.filterByNamespaceMap[t]=e,st.updateConnectorsForEnabledNamespaces()},updateConnectorsForEnabledNamespaces(){const t=st.getEnabledNamespaces(),e=st.getEnabledConnectors(t),n=st.areAllNamespacesEnabled();pn.connectors=st.mergeMultiChainConnectors(e),n?Et.clearFilterByNamespaces():Et.filterByNamespaces(t)},getEnabledNamespaces(){return Object.entries(pn.filterByNamespaceMap).filter(([t,e])=>e).map(([t])=>t)},getEnabledConnectors(t){return pn.allConnectors.filter(e=>t.includes(e.chain))},areAllNamespacesEnabled(){return Object.values(pn.filterByNamespaceMap).every(t=>t)},mergeMultiChainConnectors(t){const e=st.generateConnectorMapByName(t),n=[];return e.forEach(r=>{const s=r[0],i=(s==null?void 0:s.id)===he.CONNECTOR_ID.AUTH;r.length>1&&s?n.push({name:s.name,imageUrl:s.imageUrl,imageId:s.imageId,connectors:[...r],type:i?"AUTH":"MULTI_CHAIN",chain:"eip155",id:(s==null?void 0:s.id)||""}):s&&n.push(s)}),n},generateConnectorMapByName(t){const e=new Map;return t.forEach(n=>{const{name:r}=n,s=st.getConnectorName(r);if(!s)return;const i=e.get(s)||[];i.find(a=>a.chain===n.chain)||i.push(n),e.set(s,i)}),e},getConnectorName(t){return t&&({"Trust Wallet":"Trust"}[t]||t)},getUniqueConnectorsByName(t){const e=[];return t.forEach(n=>{e.find(r=>r.chain===n.chain)||e.push(n)}),e},addConnector(t){var e,n,r;if(t.id===he.CONNECTOR_ID.AUTH){const s=t,i=YC(Ot.state),o=jA.getSnapshot().themeMode,a=jA.getSnapshot().themeVariables;(n=(e=s==null?void 0:s.provider)==null?void 0:e.syncDappData)==null||n.call(e,{metadata:i.metadata,sdkVersion:i.sdkVersion,projectId:i.projectId,sdkType:i.sdkType}),(r=s==null?void 0:s.provider)==null||r.syncTheme({themeMode:o,themeVariables:a,w3mThemeVariables:SI(a,o)}),st.setConnectors([t])}else st.setConnectors([t])},getAuthConnector(t){var r;const e=t||Q.state.activeChain,n=pn.connectors.find(s=>s.id===he.CONNECTOR_ID.AUTH);if(n)return(r=n==null?void 0:n.connectors)!=null&&r.length?n.connectors.find(i=>i.chain===e):n},getAnnouncedConnectorRdns(){return pn.connectors.filter(t=>t.type==="ANNOUNCED").map(t=>{var e;return(e=t.info)==null?void 0:e.rdns})},getConnectorById(t){return pn.allConnectors.find(e=>e.id===t)},getConnector(t,e){return pn.allConnectors.filter(r=>r.chain===Q.state.activeChain).find(r=>{var s;return r.explorerId===t||((s=r.info)==null?void 0:s.rdns)===e})},syncIfAuthConnector(t){var i,o;if(t.id!=="ID_AUTH")return;const e=t,n=YC(Ot.state),r=jA.getSnapshot().themeMode,s=jA.getSnapshot().themeVariables;(o=(i=e==null?void 0:e.provider)==null?void 0:i.syncDappData)==null||o.call(i,{metadata:n.metadata,sdkVersion:n.sdkVersion,sdkType:n.sdkType,projectId:n.projectId}),e.provider.syncTheme({themeMode:r,themeVariables:s,w3mThemeVariables:SI(s,r)})},getConnectorsByNamespace(t){const e=pn.allConnectors.filter(n=>n.chain===t);return st.mergeMultiChainConnectors(e)},canSwitchToSmartAccount(t){return Q.checkIfSmartAccountEnabled()&&Gl(t)===Ls.ACCOUNT_TYPES.EOA},selectWalletConnector(t){const e=st.getConnector(t.id,t.rdns);Cje.handleMobileDeeplinkRedirect((e==null?void 0:e.explorerId)||t.id,Q.state.activeChain),e?Pt.push("ConnectingExternal",{connector:e}):Pt.push("ConnectingWalletConnect",{wallet:t})},getConnectors(t){return t?st.getConnectorsByNamespace(t):st.mergeMultiChainConnectors(pn.allConnectors)},setFilterByNamespace(t){pn.filterByNamespace=t,pn.connectors=st.getConnectors(t),Et.setFilterByNamespace(t)},setConnectorId(t,e){t&&(pn.activeConnectorIds={...pn.activeConnectorIds,[e]:t},Ze.setConnectedConnectorId(e,t))},removeConnectorId(t){pn.activeConnectorIds={...pn.activeConnectorIds,[t]:void 0},Ze.deleteConnectedConnectorId(t)},getConnectorId(t){if(t)return pn.activeConnectorIds[t]},isConnected(t){return t?!!pn.activeConnectorIds[t]:Object.values(pn.activeConnectorIds).some(e=>!!e)},resetConnectorIds(){pn.activeConnectorIds={...mee}}},st=Ha(Dje),Mje=1e3,hv={checkNamespaceConnectorId(t,e){return st.getConnectorId(t)===e},isSocialProvider(t){return bi.DEFAULT_REMOTE_FEATURES.socials.includes(t)},connectWalletConnect({walletConnect:t,connector:e,closeModalOnConnect:n=!0,redirectViewOnModalClose:r="Connect",onOpen:s,onConnect:i}){return new Promise((o,a)=>{if(t&&st.setActiveConnector(e),s==null||s(dt.isMobile()&&t),r){const l=Xn.subscribeKey("open",u=>{u||(Pt.state.view!==r&&Pt.replace(r),l(),a(new Error("Modal closed")))})}const c=Q.subscribeKey("activeCaipAddress",l=>{l&&(i==null||i(),n&&Xn.close(),c(),o(Uh.parseCaipAddress(l)))})})},connectExternal(t){return new Promise((e,n)=>{const r=Q.subscribeKey("activeCaipAddress",s=>{s&&(Xn.close(),r(),e(Uh.parseCaipAddress(s)))});rt.connectExternal(t,t.chain).catch(()=>{r(),n(new Error("Connection rejected"))})})},connectSocial({social:t,closeModalOnConnect:e=!0,onOpenFarcaster:n,onConnect:r}){let s=vn.state.socialWindow,i=vn.state.socialProvider,o=!1,a=null;const c=Q.subscribeKey("activeCaipAddress",l=>{l&&(e&&Xn.close(),c())});return new Promise((l,u)=>{async function d(f){var p;if((p=f.data)!=null&&p.resultUri)if(f.origin===he.SECURE_SITE_SDK_ORIGIN){window.removeEventListener("message",d,!1);try{const g=st.getAuthConnector();if(g&&!o){s&&(s.close(),vn.setSocialWindow(void 0,Q.state.activeChain),s=vn.state.socialWindow),o=!0;const w=f.data.resultUri;i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_REQUEST_USER_DATA",properties:{provider:i}});const m=Q.state.activeCaipNetwork;if(await g.provider.connectSocial({uri:w,chainId:m==null?void 0:m.caipNetworkId}),i){Ze.setConnectedSocialProvider(i),await rt.connectExternal({id:g.id,type:g.type,socialUri:w},g.chain);const b=Q.state.activeCaipAddress;if(!b){u(new Error("Failed to connect"));return}l(Uh.parseCaipAddress(b)),gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:i}})}}}catch{i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}}),u(new Error("Failed to connect"))}}else i&&gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_ERROR",properties:{provider:i}})}async function h(){if(t&&(vn.setSocialProvider(t,Q.state.activeChain),i=vn.state.socialProvider,gr.sendEvent({type:"track",event:"SOCIAL_LOGIN_STARTED",properties:{provider:i}})),i==="farcaster"){n==null||n();const f=Xn.subscribeKey("open",g=>{!g&&t==="farcaster"&&(u(new Error("Popup closed")),r==null||r(),f())}),p=st.getAuthConnector();if(p&&!vn.state.farcasterUrl)try{const{url:g}=await p.provider.getFarcasterUri();vn.setFarcasterUrl(g,Q.state.activeChain)}catch{u(new Error("Failed to connect to farcaster"))}}else{const f=st.getAuthConnector();a=dt.returnOpenHref(`${he.SECURE_SITE_SDK_ORIGIN}/loading`,"popupWindow","width=600,height=800,scrollbars=yes");try{if(f&&i){const{uri:p}=await f.provider.getSocialRedirectUri({provider:i});if(a&&p){vn.setSocialWindow(a,Q.state.activeChain),s=vn.state.socialWindow,a.location.href=p;const g=setInterval(()=>{s!=null&&s.closed&&!o&&(u(new Error("Popup closed")),clearInterval(g))},1e3);window.addEventListener("message",d,!1)}else a==null||a.close(),u(new Error("Failed to initiate social connection"))}}catch{u(new Error("Failed to initiate social connection")),a==null||a.close()}}}h()})},connectEmail({closeModalOnConnect:t=!0,redirectViewOnModalClose:e="Connect",onOpen:n,onConnect:r}){return new Promise((s,i)=>{if(n==null||n(),e){const a=Xn.subscribeKey("open",c=>{c||(Pt.state.view!==e&&Pt.replace(e),a(),i(new Error("Modal closed")))})}const o=Q.subscribeKey("activeCaipAddress",a=>{a&&(r==null||r(),t&&Xn.close(),o(),s(Uh.parseCaipAddress(a)))})})},async updateEmail(){const t=Ze.getConnectedConnectorId(Q.state.activeChain),e=st.getAuthConnector();if(!e)throw new Error("No auth connector found");if(t!==he.CONNECTOR_ID.AUTH)throw new Error("Not connected to email or social");const n=e.provider.getEmail()??"";return Pt.push("UpdateEmailWallet",{email:n,redirectView:void 0}),new Promise((r,s)=>{const i=setInterval(()=>{const a=e.provider.getEmail()??"";a!==n&&(Xn.close(),clearInterval(i),o(),r({email:a}))},Mje),o=Xn.subscribeKey("open",a=>{a||(Pt.state.view!=="Connect"&&Pt.push("Connect"),clearInterval(i),o(),s(new Error("Modal closed")))})})},canSwitchToSmartAccount(t){return Q.checkIfSmartAccountEnabled()&&Gl(t)===Ls.ACCOUNT_TYPES.EOA}};function yee(){var r,s;const t=((r=Q.state.activeCaipNetwork)==null?void 0:r.chainNamespace)||"eip155",e=((s=Q.state.activeCaipNetwork)==null?void 0:s.id)||1,n=bi.NATIVE_TOKEN_ADDRESS[t];return`${t}:${e}:${n}`}function Gl(t){var n;return(n=Q.getAccountData(t))==null?void 0:n.preferredAccountType}const wee={getConnectionStatus(t,e){const n=st.state.activeConnectorIds[e],r=rt.getConnections(e);return!!n&&t.connectorId===n?"connected":r.some(o=>o.connectorId.toLowerCase()===t.connectorId.toLowerCase())?"active":"disconnected"},excludeConnectorAddressFromConnections({connections:t,connectorId:e,addresses:n}){return t.map(r=>{if((e?r.connectorId.toLowerCase()===e.toLowerCase():!1)&&n){const i=r.accounts.filter(o=>!n.some(c=>c.toLowerCase()===o.address.toLowerCase()));return{...r,accounts:i}}return r})},excludeExistingConnections(t,e){const n=new Set(t);return e.filter(r=>!n.has(r.connectorId))},getConnectionsByConnectorId(t,e){return t.filter(n=>n.connectorId.toLowerCase()===e.toLowerCase())},getConnectionsData(t){var a;const e=!!((a=Ot.state.remoteFeatures)!=null&&a.multiWallet),n=st.state.activeConnectorIds[t],r=rt.getConnections(t),i=(rt.state.recentConnections.get(t)??[]).filter(c=>st.getConnectorById(c.connectorId)),o=wee.excludeExistingConnections([...r.map(c=>c.connectorId),...n?[n]:[]],i);return e?{connections:r,recentConnections:o}:{connections:r.filter(c=>c.connectorId.toLowerCase()===(n==null?void 0:n.toLowerCase())),recentConnections:[]}}},rp=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),Wr=cr({...rp}),Lje={state:Wr,subscribeKey(t,e){return Ri(Wr,t,e)},showLoading(t,e={}){this._showMessage({message:t,variant:"loading",...e})},showSuccess(t){this._showMessage({message:t,variant:"success"})},showSvg(t,e){this._showMessage({message:t,svg:e})},showError(t){const e=dt.parseError(t);this._showMessage({message:e,variant:"error"})},hide(){Wr.message=rp.message,Wr.variant=rp.variant,Wr.svg=rp.svg,Wr.open=rp.open,Wr.autoClose=rp.autoClose},_showMessage({message:t,svg:e,variant:n="success",autoClose:r=rp.autoClose}){Wr.open?(Wr.open=!1,setTimeout(()=>{Wr.message=t,Wr.variant=n,Wr.svg=e,Wr.open=!0,Wr.autoClose=r},150)):(Wr.message=t,Wr.variant=n,Wr.svg=e,Wr.open=!0,Wr.autoClose=r)}},Bh=Lje,Qn=cr({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),Uje={state:Qn,subscribe(t){return po(Qn,()=>t(Qn))},setLastNetworkInView(t){Qn.lastNetworkInView=t},async fetchTransactions(t,e){var n;if(!t)throw new Error("Transactions can't be fetched without an accountAddress");Qn.loading=!0;try{const r=await xt.fetchTransactions({account:t,cursor:Qn.next,onramp:e,cache:e==="coinbase"?"no-cache":void 0,chainId:(n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId}),s=Ov.filterSpamTransactions(r.data),i=Ov.filterByConnectedChain(s),o=[...Qn.transactions,...i];Qn.loading=!1,e==="coinbase"?Qn.coinbaseTransactions=Ov.groupTransactionsByYearAndMonth(Qn.coinbaseTransactions,r.data):(Qn.transactions=o,Qn.transactionsByYear=Ov.groupTransactionsByYearAndMonth(Qn.transactionsByYear,i)),Qn.empty=o.length===0,Qn.next=r.next?r.next:void 0}catch{const s=Q.state.activeChain;gr.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:t,projectId:Ot.state.projectId,cursor:Qn.next,isSmartAccount:Gl(s)===Ls.ACCOUNT_TYPES.SMART_ACCOUNT}}),Bh.showError("Failed to fetch transactions"),Qn.loading=!1,Qn.empty=!0,Qn.next=void 0}},groupTransactionsByYearAndMonth(t={},e=[]){const n=t;return e.forEach(r=>{const s=new Date(r.metadata.minedAt).getFullYear(),i=new Date(r.metadata.minedAt).getMonth(),o=n[s]??{},c=(o[i]??[]).filter(l=>l.id!==r.id);n[s]={...o,[i]:[...c,r].sort((l,u)=>new Date(u.metadata.minedAt).getTime()-new Date(l.metadata.minedAt).getTime())}}),n},filterSpamTransactions(t){return t.filter(e=>!e.transfers.every(r=>{var s;return((s=r.nft_info)==null?void 0:s.flags.is_spam)===!0}))},filterByConnectedChain(t){var r;const e=(r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId;return t.filter(s=>s.metadata.chain===e)},clearCursor(){Qn.next=void 0},resetTransactions(){Qn.transactions=[],Qn.transactionsByYear={},Qn.lastNetworkInView=void 0,Qn.loading=!1,Qn.empty=!1,Qn.next=void 0}},Ov=Ha(Uje,"API_ERROR"),on=cr({connections:new Map,recentConnections:new Map,isSwitchingConnection:!1,wcError:!1,buffering:!1,status:"disconnected"});let Vf;const Bje={state:on,subscribe(t){return po(on,()=>t(on))},subscribeKey(t,e){return Ri(on,t,e)},_getClient(){return on._client},setClient(t){on._client=Lw(t)},initialize(t){const e=t.filter(n=>!!n.namespace).map(n=>n.namespace);rt.syncStorageConnections(e)},syncStorageConnections(t){const e=Ze.getConnections(),n=t??Array.from(Q.state.chains.keys());for(const r of n){const s=e[r]??[],i=new Map(on.recentConnections);i.set(r,s),on.recentConnections=i}},getConnections(t){return t?on.connections.get(t)??[]:[]},hasAnyConnection(t){const e=rt.state.connections;return Array.from(e.values()).flatMap(n=>n).some(({connectorId:n})=>n===t)},async connectWalletConnect(){var t,e,n,r;if(dt.isTelegram()||dt.isSafari()&&dt.isIos()){if(Vf){await Vf,Vf=void 0;return}if(!dt.isPairingExpired(on==null?void 0:on.wcPairingExpiry)){const s=on.wcUri;on.wcUri=s;return}Vf=(e=(t=rt._getClient())==null?void 0:t.connectWalletConnect)==null?void 0:e.call(t).catch(()=>{}),rt.state.status="connecting",await Vf,Vf=void 0,on.wcPairingExpiry=void 0,rt.state.status="connected"}else await((r=(n=rt._getClient())==null?void 0:n.connectWalletConnect)==null?void 0:r.call(n))},async connectExternal(t,e,n=!0){var s,i;const r=await((i=(s=rt._getClient())==null?void 0:s.connectExternal)==null?void 0:i.call(s,t));return n&&Q.setActiveNamespace(e),r},async reconnectExternal(t){var n,r;await((r=(n=rt._getClient())==null?void 0:n.reconnectExternal)==null?void 0:r.call(n,t));const e=t.chain||Q.state.activeChain;e&&st.setConnectorId(t.id,e)},async setPreferredAccountType(t,e){var r;if(!e)return;Xn.setLoading(!0,Q.state.activeChain);const n=st.getAuthConnector();n&&(vn.setPreferredAccountType(t,e),await n.provider.setPreferredAccount(t),Ze.setPreferredAccountTypes(Object.entries(Q.state.chains).reduce((s,[i,o])=>{const a=i,c=Gl(a);return c!==void 0&&(s[a]=c),s},{})),await rt.reconnectExternal(n),Xn.setLoading(!1,Q.state.activeChain),gr.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:t,network:((r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}))},async signMessage(t){var e;return(e=rt._getClient())==null?void 0:e.signMessage(t)},parseUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.parseUnits(t,e)},formatUnits(t,e){var n;return(n=rt._getClient())==null?void 0:n.formatUnits(t,e)},async sendTransaction(t){var e;return(e=rt._getClient())==null?void 0:e.sendTransaction(t)},async getCapabilities(t){var e;return(e=rt._getClient())==null?void 0:e.getCapabilities(t)},async grantPermissions(t){var e;return(e=rt._getClient())==null?void 0:e.grantPermissions(t)},async walletGetAssets(t){var e;return((e=rt._getClient())==null?void 0:e.walletGetAssets(t))??{}},async estimateGas(t){var e;return(e=rt._getClient())==null?void 0:e.estimateGas(t)},async writeContract(t){var e;return(e=rt._getClient())==null?void 0:e.writeContract(t)},async getEnsAddress(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAddress(t)},async getEnsAvatar(t){var e;return(e=rt._getClient())==null?void 0:e.getEnsAvatar(t)},checkInstalled(t){var e,n;return((n=(e=rt._getClient())==null?void 0:e.checkInstalled)==null?void 0:n.call(e,t))||!1},resetWcConnection(){on.wcUri=void 0,on.wcPairingExpiry=void 0,on.wcLinking=void 0,on.recentWallet=void 0,on.status="disconnected",Ov.resetTransactions(),Ze.deleteWalletConnectDeepLink()},resetUri(){on.wcUri=void 0,on.wcPairingExpiry=void 0,Vf=void 0},finalizeWcConnection(){var n,r;const{wcLinking:t,recentWallet:e}=rt.state;t&&Ze.setWalletConnectDeepLink(t),e&&Ze.setAppKitRecent(e),gr.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:t?"mobile":"qrcode",name:((r=(n=Pt.state.data)==null?void 0:n.wallet)==null?void 0:r.name)||"Unknown"}})},setWcBasic(t){on.wcBasic=t},setUri(t){on.wcUri=t,on.wcPairingExpiry=dt.getPairingExpiry()},setWcLinking(t){on.wcLinking=t},setWcError(t){on.wcError=t,on.buffering=!1},setRecentWallet(t){on.recentWallet=t},setBuffering(t){on.buffering=t},setStatus(t){on.status=t},setIsSwitchingConnection(t){on.isSwitchingConnection=t},async disconnect({id:t,namespace:e,initialDisconnect:n}={}){var r;try{await((r=rt._getClient())==null?void 0:r.disconnect({id:t,chainNamespace:e,initialDisconnect:n}))}catch(s){throw new Uw("Failed to disconnect","INTERNAL_SDK_ERROR",s)}},setConnections(t,e){const n=new Map(on.connections);n.set(e,t),on.connections=n},async handleAuthAccountSwitch({address:t,namespace:e}){var s,i;const n=(i=(s=vn.state.user)==null?void 0:s.accounts)==null?void 0:i.find(o=>o.type==="smartAccount"),r=n&&n.address.toLowerCase()===t.toLowerCase()&&hv.canSwitchToSmartAccount(e)?"smartAccount":"eoa";await rt.setPreferredAccountType(r,e)},async handleActiveConnection({connection:t,namespace:e,address:n}){const r=st.getConnectorById(t.connectorId),s=t.connectorId===he.CONNECTOR_ID.AUTH;if(!r)throw new Error(`No connector found for connection: ${t.connectorId}`);if(s)s&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e});else{const i=await rt.connectExternal({id:r.id,type:r.type,provider:r.provider,address:n,chain:e},e);return i==null?void 0:i.address}return n},async handleDisconnectedConnection({connection:t,namespace:e,address:n,closeModalOnConnect:r}){var l,u;const s=st.getConnectorById(t.connectorId),i=(u=(l=t.auth)==null?void 0:l.name)==null?void 0:u.toLowerCase(),o=t.connectorId===he.CONNECTOR_ID.AUTH,a=t.connectorId===he.CONNECTOR_ID.WALLET_CONNECT;if(!s)throw new Error(`No connector found for connection: ${t.connectorId}`);let c;if(o)if(i&&hv.isSocialProvider(i)){const{address:d}=await hv.connectSocial({social:i,closeModalOnConnect:r,onOpenFarcaster(){Xn.open({view:"ConnectingFarcaster"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const{address:d}=await hv.connectEmail({closeModalOnConnect:r,onOpen(){Xn.open({view:"EmailLogin"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else if(a){const{address:d}=await hv.connectWalletConnect({walletConnect:!0,connector:s,closeModalOnConnect:r,onOpen(h){Xn.open({view:h?"AllWallets":"ConnectingWalletConnect"})},onConnect(){Pt.replace("ProfileWallets")}});c=d}else{const d=await rt.connectExternal({id:s.id,type:s.type,provider:s.provider,chain:e},e);d&&(c=d.address)}return o&&n&&await rt.handleAuthAccountSwitch({address:n,namespace:e}),c},async switchConnection({connection:t,address:e,namespace:n,closeModalOnConnect:r,onChange:s}){let i;const o=vn.getCaipAddress(n);if(o){const{address:c}=Uh.parseCaipAddress(o);i=c}const a=wee.getConnectionStatus(t,n);switch(a){case"connected":case"active":{const c=await rt.handleActiveConnection({connection:t,namespace:n,address:e});if(i&&c){const l=c.toLowerCase()!==i.toLowerCase();s==null||s({address:c,namespace:n,hasSwitchedAccount:l,hasSwitchedWallet:a==="active"})}break}case"disconnected":{const c=await rt.handleDisconnectedConnection({connection:t,namespace:n,address:e,closeModalOnConnect:r});c&&(s==null||s({address:c,namespace:n,hasSwitchedAccount:!0,hasSwitchedWallet:!0}));break}default:throw new Error(`Invalid connection status: ${a}`)}}},rt=Ha(Bje),ty=cr({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),Zy={state:ty,subscribe(t){return po(ty,()=>t(ty))},subscribeOpen(t){return Ri(ty,"open",t)},set(t){Object.assign(ty,{...ty,...t})}},$je={async getTokenList(){var r;const t=Q.state.activeCaipNetwork,e=await xt.fetchSwapTokens({chainId:t==null?void 0:t.caipNetworkId});return((r=e==null?void 0:e.tokens)==null?void 0:r.map(s=>({...s,eip2612:!1,quantity:{decimals:"0",numeric:"0"},price:0,value:0})))||[]},async fetchGasPrice(){var e;const t=Q.state.activeCaipNetwork;if(!t)return null;try{switch(t.chainNamespace){case"solana":const n=(e=await(rt==null?void 0:rt.estimateGas({chainNamespace:"solana"})))==null?void 0:e.toString();return{standard:n,fast:n,instant:n};case"eip155":default:return await xt.fetchGasPrice({chainId:t.caipNetworkId})}}catch{return null}},async fetchSwapAllowance({tokenAddress:t,userAddress:e,sourceTokenAmount:n,sourceTokenDecimals:r}){const s=await xt.fetchSwapAllowance({tokenAddress:t,userAddress:e});if(s!=null&&s.allowance&&n&&r){const i=rt.parseUnits(n,r)||0;return BigInt(s.allowance)>=i}return!1},async getMyTokensWithBalance(t){const e=await HU.getMyTokensWithBalance(t);return vn.setTokenBalance(e,Q.state.activeChain),this.mapBalancesToSwapTokens(e)},mapBalancesToSwapTokens(t){return(t==null?void 0:t.map(e=>({...e,address:e!=null&&e.address?e.address:yee(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},Pn=cr({tokenBalances:[],loading:!1}),Fje={state:Pn,subscribe(t){return po(Pn,()=>t(Pn))},subscribeKey(t,e){return Ri(Pn,t,e)},setToken(t){t&&(Pn.token=Lw(t))},setTokenAmount(t){Pn.sendTokenAmount=t},setReceiverAddress(t){Pn.receiverAddress=t},setReceiverProfileImageUrl(t){Pn.receiverProfileImageUrl=t},setReceiverProfileName(t){Pn.receiverProfileName=t},setNetworkBalanceInUsd(t){Pn.networkBalanceInUSD=t},setLoading(t){Pn.loading=t},async sendToken(){var t;try{switch(_n.setLoading(!0),(t=Q.state.activeCaipNetwork)==null?void 0:t.chainNamespace){case"eip155":await _n.sendEvmToken();return;case"solana":await _n.sendSolanaToken();return;default:throw new Error("Unsupported chain")}}finally{_n.setLoading(!1)}},async sendEvmToken(){var n,r,s;const t=Q.state.activeChain;if(!t)throw new Error("SendController:sendEvmToken - activeChainNamespace is required");const e=Gl(t);if(!_n.state.sendTokenAmount||!_n.state.receiverAddress)throw new Error("An amount and receiver address are required");if(!_n.state.token)throw new Error("A token is required");(n=_n.state.token)!=null&&n.address?(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:_n.state.token.address,amount:_n.state.sendTokenAmount,network:((r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)||""}}),await _n.sendERC20Token({receiverAddress:_n.state.receiverAddress,tokenAddress:_n.state.token.address,sendTokenAmount:_n.state.sendTokenAmount,decimals:_n.state.token.quantity.decimals})):(gr.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:e===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:_n.state.token.symbol||"",amount:_n.state.sendTokenAmount,network:((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)||""}}),await _n.sendNativeToken({receiverAddress:_n.state.receiverAddress,sendTokenAmount:_n.state.sendTokenAmount,decimals:_n.state.token.quantity.decimals}))},async fetchTokenBalance(t){var i,o;Pn.loading=!0;const e=(i=Q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Q.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(Pn.lastRetry&&!dt.isAllowedRetry(Pn.lastRetry,30*bi.ONE_SEC_MS))return Pn.loading=!1,[];try{if(s&&e&&n){const a=await HU.getMyTokensWithBalance();return Pn.tokenBalances=a,Pn.lastRetry=void 0,a}}catch(a){Pn.lastRetry=Date.now(),t==null||t(a),Bh.showError("Token Balance Unavailable")}finally{Pn.loading=!1}return[]},fetchNetworkBalance(){if(Pn.tokenBalances.length===0)return;const t=$je.mapBalancesToSwapTokens(Pn.tokenBalances);if(!t)return;const e=t.find(n=>n.address===yee());e&&(Pn.networkBalanceInUSD=e?aje.multiply(e.quantity.numeric,e.price).toString():"0")},async sendNativeToken(t){var i,o,a;Pt.pushTransactionStack({});const e=t.receiverAddress,n=vn.state.address,r=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));await rt.sendTransaction({chainNamespace:he.CHAIN.EVM,to:e,address:n,data:"0x",value:r??BigInt(0)}),gr.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:Gl("eip155")===Ls.ACCOUNT_TYPES.SMART_ACCOUNT,token:((i=_n.state.token)==null?void 0:i.symbol)||"",amount:t.sendTokenAmount,network:((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)||""}}),(a=rt._getClient())==null||a.updateBalance("eip155"),_n.resetSend()},async sendERC20Token(t){Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}});const e=rt.parseUnits(t.sendTokenAmount.toString(),Number(t.decimals));if(vn.state.address&&t.sendTokenAmount&&t.receiverAddress&&t.tokenAddress){const n=dt.getPlainAddress(t.tokenAddress);if(!n)throw new Error("SendController:sendERC20Token - tokenAddress is required");await rt.writeContract({fromAddress:vn.state.address,tokenAddress:n,args:[t.receiverAddress,e??BigInt(0)],method:"transfer",abi:dje.getERC20Abi(n),chainNamespace:he.CHAIN.EVM}),_n.resetSend()}},async sendSolanaToken(){var t;if(!_n.state.sendTokenAmount||!_n.state.receiverAddress)throw new Error("An amount and receiver address are required");Pt.pushTransactionStack({onSuccess(){Pt.replace("Account")}}),await rt.sendTransaction({chainNamespace:"solana",to:_n.state.receiverAddress,value:_n.state.sendTokenAmount}),(t=rt._getClient())==null||t.updateBalance("solana"),_n.resetSend()},resetSend(){Pn.token=void 0,Pn.sendTokenAmount=void 0,Pn.receiverAddress=void 0,Pn.receiverProfileImageUrl=void 0,Pn.receiverProfileName=void 0,Pn.loading=!1,Pn.tokenBalances=[]}},_n=Ha(Fje),WO={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,user:void 0,preferredAccountType:void 0},WA={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},Re=cr({chains:oje(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),jje={state:Re,subscribe(t){return po(Re,()=>{t(Re)})},subscribeKey(t,e){return Ri(Re,t,e)},subscribeChainProp(t,e,n){let r;return po(Re.chains,()=>{var i;const s=n||Re.activeChain;if(s){const o=(i=Re.chains.get(s))==null?void 0:i[t];r!==o&&(r=o,e(o))}})},initialize(t,e,n){const{chainId:r,namespace:s}=Ze.getActiveNetworkProps(),i=e==null?void 0:e.find(u=>u.id.toString()===(r==null?void 0:r.toString())),a=t.find(u=>(u==null?void 0:u.namespace)===s)||(t==null?void 0:t[0]),c=t.map(u=>u.namespace).filter(u=>u!==void 0),l=Ot.state.enableEmbedded?new Set([...c]):new Set([...(e==null?void 0:e.map(u=>u.chainNamespace))??[]]);((t==null?void 0:t.length)===0||!a)&&(Re.noAdapters=!0),Re.noAdapters||(Re.activeChain=a==null?void 0:a.namespace,Re.activeCaipNetwork=i,Q.setChainNetworkData(a==null?void 0:a.namespace,{caipNetwork:i}),Re.activeChain&&Zy.set({activeChain:a==null?void 0:a.namespace})),l.forEach(u=>{const d=e==null?void 0:e.filter(p=>p.chainNamespace===u),h=Ze.getPreferredAccountTypes()||{},f={...Ot.state.defaultAccountTypes,...h};Q.state.chains.set(u,{namespace:u,networkState:cr({...WA,caipNetwork:d==null?void 0:d[0]}),accountState:cr({...WO,preferredAccountType:f[u]}),caipNetworks:d??[],...n}),Q.setRequestedCaipNetworks(d??[],u)})},removeAdapter(t){var e,n;if(Re.activeChain===t){const r=Array.from(Re.chains.entries()).find(([s])=>s!==t);if(r){const s=(n=(e=r[1])==null?void 0:e.caipNetworks)==null?void 0:n[0];s&&Q.setActiveCaipNetwork(s)}}Re.chains.delete(t)},addAdapter(t,{networkControllerClient:e,connectionControllerClient:n},r){if(!t.namespace)throw new Error("ChainController:addAdapter - adapter must have a namespace");Re.chains.set(t.namespace,{namespace:t.namespace,networkState:{...WA,caipNetwork:r[0]},accountState:WO,caipNetworks:r,connectionControllerClient:n,networkControllerClient:e}),Q.setRequestedCaipNetworks((r==null?void 0:r.filter(s=>s.chainNamespace===t.namespace))??[],t.namespace)},addNetwork(t){var n;const e=Re.chains.get(t.chainNamespace);if(e){const r=[...e.caipNetworks||[]];(n=e.caipNetworks)!=null&&n.find(s=>s.id===t.id)||r.push(t),Re.chains.set(t.chainNamespace,{...e,caipNetworks:r}),Q.setRequestedCaipNetworks(r,t.chainNamespace),st.filterByNamespace(t.chainNamespace,!0)}},removeNetwork(t,e){var r,s,i;const n=Re.chains.get(t);if(n){const o=((r=Re.activeCaipNetwork)==null?void 0:r.id)===e,a=[...((s=n.caipNetworks)==null?void 0:s.filter(c=>c.id!==e))||[]];o&&((i=n==null?void 0:n.caipNetworks)!=null&&i[0])&&Q.setActiveCaipNetwork(n.caipNetworks[0]),Re.chains.set(t,{...n,caipNetworks:a}),Q.setRequestedCaipNetworks(a||[],t),a.length===0&&st.filterByNamespace(t,!1)}},setAdapterNetworkState(t,e){const n=Re.chains.get(t);n&&(n.networkState={...n.networkState||WA,...e},Re.chains.set(t,n))},setChainAccountData(t,e,n=!0){if(!t)throw new Error("Chain is required to update chain account data");const r=Re.chains.get(t);if(r){const s={...r.accountState||WO,...e};Re.chains.set(t,{...r,accountState:s}),(Re.chains.size===1||Re.activeChain===t)&&(e.caipAddress&&(Re.activeCaipAddress=e.caipAddress),vn.replaceState(s))}},setChainNetworkData(t,e){if(!t)return;const n=Re.chains.get(t);if(n){const r={...n.networkState||WA,...e};Re.chains.set(t,{...n,networkState:r})}},setAccountProp(t,e,n,r=!0){Q.setChainAccountData(n,{[t]:e},r)},setActiveNamespace(t){var r,s;Re.activeChain=t;const e=t?Re.chains.get(t):void 0,n=(r=e==null?void 0:e.networkState)==null?void 0:r.caipNetwork;n!=null&&n.id&&t&&(Re.activeCaipAddress=(s=e==null?void 0:e.accountState)==null?void 0:s.caipAddress,Re.activeCaipNetwork=n,Q.setChainNetworkData(t,{caipNetwork:n}),Ze.setActiveCaipNetworkId(n==null?void 0:n.caipNetworkId),Zy.set({activeChain:t,selectedNetworkId:n==null?void 0:n.caipNetworkId}))},setActiveCaipNetwork(t){var r,s,i;if(!t)return;Re.activeChain!==t.chainNamespace&&Q.setIsSwitchingNamespace(!0);const e=Re.chains.get(t.chainNamespace);Re.activeChain=t.chainNamespace,Re.activeCaipNetwork=t,Q.setChainNetworkData(t.chainNamespace,{caipNetwork:t}),(r=e==null?void 0:e.accountState)!=null&&r.address?Re.activeCaipAddress=`${t.chainNamespace}:${t.id}:${(s=e==null?void 0:e.accountState)==null?void 0:s.address}`:Re.activeCaipAddress=void 0,Q.setAccountProp("caipAddress",Re.activeCaipAddress,t.chainNamespace),e&&vn.replaceState(e.accountState),_n.resetSend(),Zy.set({activeChain:Re.activeChain,selectedNetworkId:(i=Re.activeCaipNetwork)==null?void 0:i.caipNetworkId}),Ze.setActiveCaipNetworkId(t.caipNetworkId),!Q.checkIfSupportedNetwork(t.chainNamespace)&&Ot.state.enableNetworkSwitch&&!Ot.state.allowUnsupportedChain&&!rt.state.wcBasic&&Q.showUnsupportedChainUI()},addCaipNetwork(t){var n;if(!t)return;const e=Re.chains.get(t.chainNamespace);e&&((n=e==null?void 0:e.caipNetworks)==null||n.push(t))},async switchActiveNamespace(t){var s;if(!t)return;const e=t!==Q.state.activeChain,n=(s=Q.getNetworkData(t))==null?void 0:s.caipNetwork,r=Q.getCaipNetworkByNamespace(t,n==null?void 0:n.id);e&&r&&await Q.switchActiveNetwork(r)},async switchActiveNetwork(t){var i;const e=Q.state.activeChain;if(!e)throw new Error("ChainController:switchActiveNetwork - namespace is required");const n=Q.state.chains.get(e),r=!((i=n==null?void 0:n.caipNetworks)!=null&&i.some(o=>{var a;return o.id===((a=Re.activeCaipNetwork)==null?void 0:a.id)})),s=Q.getNetworkControllerClient(t.chainNamespace);if(s){try{await s.switchCaipNetwork(t),r&&Xn.close()}catch{Pt.goBack()}gr.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:t.caipNetworkId}})}},getNetworkControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("ChainController:getNetworkControllerClient - chain is required");const n=Re.chains.get(e);if(!n)throw new Error("Chain adapter not found");if(!n.networkControllerClient)throw new Error("NetworkController client not set");return n.networkControllerClient},getConnectionControllerClient(t){const e=t||Re.activeChain;if(!e)throw new Error("Chain is required to get connection controller client");const n=Re.chains.get(e);if(!(n!=null&&n.connectionControllerClient))throw new Error("ConnectionController client not set");return n.connectionControllerClient},getAccountProp(t,e){var s;let n=Re.activeChain;if(e&&(n=e),!n)return;const r=(s=Re.chains.get(n))==null?void 0:s.accountState;if(r)return r[t]},getNetworkProp(t,e){var r;const n=(r=Re.chains.get(e))==null?void 0:r.networkState;if(n)return n[t]},getRequestedCaipNetworks(t){const e=Re.chains.get(t),{approvedCaipNetworkIds:n=[],requestedCaipNetworks:r=[]}=(e==null?void 0:e.networkState)||{};return dt.sortRequestedNetworks(n,r)},getAllRequestedCaipNetworks(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllRequestedCaipNetworks - chainAdapter must have a namespace");const n=Q.getRequestedCaipNetworks(e.namespace);t.push(...n)}),t},setRequestedCaipNetworks(t,e){Q.setAdapterNetworkState(e,{requestedCaipNetworks:t});const r=Q.getAllRequestedCaipNetworks().map(i=>i.chainNamespace),s=Array.from(new Set(r));st.filterByNamespaces(s)},getAllApprovedCaipNetworkIds(){const t=[];return Re.chains.forEach(e=>{if(!e.namespace)throw new Error("ChainController:getAllApprovedCaipNetworkIds - chainAdapter must have a namespace");const n=Q.getApprovedCaipNetworkIds(e.namespace);t.push(...n)}),t},getActiveCaipNetwork(t){var e,n;return t?(n=(e=Re.chains.get(t))==null?void 0:e.networkState)==null?void 0:n.caipNetwork:Re.activeCaipNetwork},getActiveCaipAddress(){return Re.activeCaipAddress},getApprovedCaipNetworkIds(t){var r;const e=Re.chains.get(t);return((r=e==null?void 0:e.networkState)==null?void 0:r.approvedCaipNetworkIds)||[]},async setApprovedCaipNetworksData(t){const e=Q.getNetworkControllerClient(),n=await(e==null?void 0:e.getApprovedCaipNetworksData());Q.setAdapterNetworkState(t,{approvedCaipNetworkIds:n==null?void 0:n.approvedCaipNetworkIds,supportsAllNetworks:n==null?void 0:n.supportsAllNetworks})},checkIfSupportedNetwork(t,e){const n=e||Re.activeCaipNetwork,r=Q.getRequestedCaipNetworks(t);return r.length?r==null?void 0:r.some(s=>s.id===(n==null?void 0:n.id)):!0},checkIfSupportedChainId(t){if(!Re.activeChain)return!0;const e=Q.getRequestedCaipNetworks(Re.activeChain);return e==null?void 0:e.some(n=>n.id===t)},setSmartAccountEnabledNetworks(t,e){Q.setAdapterNetworkState(e,{smartAccountEnabledNetworks:t})},checkIfSmartAccountEnabled(){var r;const t=AI.caipNetworkIdToNumber((r=Re.activeCaipNetwork)==null?void 0:r.caipNetworkId),e=Re.activeChain;if(!e||!t)return!1;const n=Q.getNetworkProp("smartAccountEnabledNetworks",e);return!!(n!=null&&n.includes(Number(t)))},showUnsupportedChainUI(){Xn.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const t=Re.activeCaipNetwork;return!!(t!=null&&t.chainNamespace&&bi.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(t.chainNamespace))},resetNetwork(t){Q.setAdapterNetworkState(t,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0})},resetAccount(t){const e=t;if(!e)throw new Error("Chain is required to set account prop");const n=Q.getAccountProp("preferredAccountType",e);Re.activeCaipAddress=void 0,Q.setChainAccountData(e,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountType:n,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,user:void 0,status:"disconnected"}),st.removeConnectorId(e)},setIsSwitchingNamespace(t){Re.isSwitchingNamespace=t},getFirstCaipNetworkSupportsAuthConnector(){var n,r;const t=[];let e;if(Re.chains.forEach(s=>{he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(i=>i===s.namespace)&&s.namespace&&t.push(s.namespace)}),t.length>0){const s=t[0];return e=s?(r=(n=Re.chains.get(s))==null?void 0:n.caipNetworks)==null?void 0:r[0]:void 0,e}},getAccountData(t){var e;return t?(e=Q.state.chains.get(t))==null?void 0:e.accountState:vn.state},getNetworkData(t){var n;const e=t||Re.activeChain;if(e)return(n=Q.state.chains.get(e))==null?void 0:n.networkState},getCaipNetworkByNamespace(t,e){var s,i,o;if(!t)return;const n=Q.state.chains.get(t),r=(s=n==null?void 0:n.caipNetworks)==null?void 0:s.find(a=>a.id===e);return r||((i=n==null?void 0:n.networkState)==null?void 0:i.caipNetwork)||((o=n==null?void 0:n.caipNetworks)==null?void 0:o[0])},getRequestedCaipNetworkIds(){const t=st.state.filterByNamespace;return(t?[Re.chains.get(t)]:Array.from(Re.chains.values())).flatMap(n=>(n==null?void 0:n.caipNetworks)||[]).map(n=>n.caipNetworkId)},getCaipNetworks(t){return t?Q.getRequestedCaipNetworks(t):Q.getAllRequestedCaipNetworks()},setLastConnectedSIWECaipNetwork(t){Re.lastConnectedSIWECaipNetwork=t},getLastConnectedSIWECaipNetwork(){return Re.lastConnectedSIWECaipNetwork}},Q=Ha(jje),Wje={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},bee=dt.getBlockchainApiUrl(),Fi=cr({clientId:null,api:new w1({baseUrl:bee,clientId:null}),supportedChains:{http:[],ws:[]}}),xt={state:Fi,async get(t){const{st:e,sv:n}=xt.getSdkProperties(),r=Ot.state.projectId,s={...t.params||{},st:e,sv:n,projectId:r};return Fi.api.get({...t,params:s})},getSdkProperties(){const{sdkType:t,sdkVersion:e}=Ot.state;return{st:t||"unknown",sv:e||"unknown"}},async isNetworkSupported(t){if(!t)return!1;try{Fi.supportedChains.http.length||await xt.getSupportedNetworks()}catch{return!1}return Fi.supportedChains.http.includes(t)},async getSupportedNetworks(){try{const t=await xt.get({path:"v1/supported-chains"});return Fi.supportedChains=t,t}catch{return Fi.supportedChains}},async fetchIdentity({address:t,caipNetworkId:e}){if(!await xt.isNetworkSupported(e))return{avatar:"",name:""};const r=Ze.getIdentityFromCacheForAddress(t);if(r)return r;const s=await xt.get({path:`/v1/identity/${t}`,params:{sender:Q.state.activeCaipAddress?dt.getPlainAddress(Q.state.activeCaipAddress):void 0}});return Ze.updateIdentityCache({address:t,identity:s,timestamp:Date.now()}),s},async fetchTransactions({account:t,cursor:e,onramp:n,signal:r,cache:s,chainId:i}){var a;return await xt.isNetworkSupported((a=Q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?xt.get({path:`/v1/account/${t}/history`,params:{cursor:e,onramp:n,chainId:i},signal:r,cache:s}):{data:[],next:void 0}},async fetchSwapQuote({amount:t,userAddress:e,from:n,to:r,gasPrice:s}){var o;return await xt.isNetworkSupported((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId)?xt.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:t,userAddress:e,from:n,to:r,gasPrice:s}}):{quotes:[]}},async fetchSwapTokens({chainId:t}){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:"/v1/convert/tokens",params:{chainId:t}}):{tokens:[]}},async fetchTokenPrice({addresses:t}){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?Fi.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:t,projectId:Ot.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]}},async fetchSwapAllowance({tokenAddress:t,userAddress:e}){var r;return await xt.isNetworkSupported((r=Q.state.activeCaipNetwork)==null?void 0:r.caipNetworkId)?xt.get({path:"/v1/convert/allowance",params:{tokenAddress:t,userAddress:e},headers:{"Content-Type":"application/json"}}):{allowance:"0"}},async fetchGasPrice({chainId:t}){var s;const{st:e,sv:n}=xt.getSdkProperties();if(!await xt.isNetworkSupported((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId))throw new Error("Network not supported for Gas Price");return xt.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:t,st:e,sv:n}})},async generateSwapCalldata({amount:t,from:e,to:n,userAddress:r,disableEstimate:s}){var o;if(!await xt.isNetworkSupported((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return Fi.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:t,eip155:{slippage:bi.CONVERT_SLIPPAGE_TOLERANCE},projectId:Ot.state.projectId,from:e,to:n,userAddress:r,disableEstimate:s}})},async generateApproveCalldata({from:t,to:e,userAddress:n}){var o;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((o=Q.state.activeCaipNetwork)==null?void 0:o.caipNetworkId))throw new Error("Network not supported for Swaps");return xt.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:n,from:t,to:e,st:r,sv:s}})},async getBalance(t,e,n){var l;const{st:r,sv:s}=xt.getSdkProperties();if(!await xt.isNetworkSupported((l=Q.state.activeCaipNetwork)==null?void 0:l.caipNetworkId))return Bh.showError("Token Balance Unavailable"),{balances:[]};const o=`${e}:${t}`,a=Ze.getBalanceCacheForCaipAddress(o);if(a)return a;const c=await xt.get({path:`/v1/account/${t}/balance`,params:{currency:"usd",chainId:e,forceUpdate:n,st:r,sv:s}});return Ze.updateBalanceCache({caipAddress:o,balance:c,timestamp:Date.now()}),c},async lookupEnsName(t){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/account/${t}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]}},async reverseLookupEnsName({address:t}){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/reverse/${t}`,params:{sender:vn.state.address,apiVersion:"2"}}):[]},async getEnsNameSuggestions(t){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/profile/suggestions/${t}`,params:{zone:"reown.id"}}):{suggestions:[]}},async registerEnsName({coinType:t,address:e,message:n,signature:r}){var i;return await xt.isNetworkSupported((i=Q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId)?Fi.api.post({path:"/v1/profile/account",body:{coin_type:t,address:e,message:n,signature:r},headers:{"Content-Type":"application/json"}}):{success:!1}},async generateOnRampURL({destinationWallets:t,partnerUserId:e,defaultNetwork:n,purchaseAmount:r,paymentAmount:s}){var a;return await xt.isNetworkSupported((a=Q.state.activeCaipNetwork)==null?void 0:a.caipNetworkId)?(await Fi.api.post({path:"/v1/generators/onrampurl",params:{projectId:Ot.state.projectId},body:{destinationWallets:t,defaultNetwork:n,partnerUserId:e,defaultExperience:"buy",presetCryptoAmount:r,presetFiatAmount:s}})).url:""},async getOnrampOptions(){var e;if(!await xt.isNetworkSupported((e=Q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await xt.get({path:"/v1/onramp/options"})}catch{return Wje}},async getOnrampQuote({purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}){var s;try{return await xt.isNetworkSupported((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?await Fi.api.post({path:"/v1/onramp/quote",params:{projectId:Ot.state.projectId},body:{purchaseCurrency:t,paymentCurrency:e,amount:n,network:r}}):null}catch{return{coinbaseFee:{amount:n,currency:e.id},networkFee:{amount:n,currency:e.id},paymentSubtotal:{amount:n,currency:e.id},paymentTotal:{amount:n,currency:e.id},purchaseAmount:{amount:n,currency:e.id},quoteId:"mocked-quote-id"}}},async getSmartSessions(t){var n;return await xt.isNetworkSupported((n=Q.state.activeCaipNetwork)==null?void 0:n.caipNetworkId)?xt.get({path:`/v1/sessions/${t}`}):[]},async revokeSmartSession(t,e,n){var s;return await xt.isNetworkSupported((s=Q.state.activeCaipNetwork)==null?void 0:s.caipNetworkId)?Fi.api.post({path:`/v1/sessions/${t}/revoke`,params:{projectId:Ot.state.projectId},body:{pci:e,signature:n}}):{success:!1}},setClientId(t){Fi.clientId=t,Fi.api=new w1({baseUrl:bee,clientId:t})}},zO={createBalance(t,e){const n={name:t.metadata.name||"",symbol:t.metadata.symbol||"",decimals:t.metadata.decimals||0,value:t.metadata.value||0,price:t.metadata.price||0,iconUrl:t.metadata.iconUrl||""};return{name:n.name,symbol:n.symbol,chainId:e,address:t.address==="native"?void 0:this.convertAddressToCAIP10Address(t.address,e),value:n.value,price:n.price,quantity:{decimals:n.decimals.toString(),numeric:this.convertHexToBalance({hex:t.balance,decimals:n.decimals})},iconUrl:n.iconUrl}},convertHexToBalance({hex:t,decimals:e}){return am(BigInt(t),e)},convertAddressToCAIP10Address(t,e){return`${e}:${t}`},createCAIP2ChainId(t,e){return`${e}:${parseInt(t,16)}`},getChainIdHexFromCAIP2ChainId(t){const e=t.split(":");if(e.length<2||!e[1])return"0x0";const n=e[1],r=parseInt(n,10);return isNaN(r)?"0x0":`0x${r.toString(16)}`},isWalletGetAssetsResponse(t){return typeof t!="object"||t===null?!1:Object.values(t).every(e=>Array.isArray(e)&&e.every(n=>this.isValidAsset(n)))},isValidAsset(t){return typeof t=="object"&&t!==null&&typeof t.address=="string"&&typeof t.balance=="string"&&(t.type==="ERC20"||t.type==="NATIVE")&&typeof t.metadata=="object"&&t.metadata!==null&&typeof t.metadata.name=="string"&&typeof t.metadata.symbol=="string"&&typeof t.metadata.decimals=="number"&&typeof t.metadata.price=="number"&&typeof t.metadata.iconUrl=="string"}},HU={async getMyTokensWithBalance(t){const e=vn.state.address,n=Q.state.activeCaipNetwork,r=st.getConnectorId("eip155")===he.CONNECTOR_ID.AUTH;if(!e||!n)return[];const s=`${n.caipNetworkId}:${e}`,i=Ze.getBalanceCacheForCaipAddress(s);if(i)return i.balances;if(n.chainNamespace===he.CHAIN.EVM&&r){const a=await this.getEIP155Balances(e,n);if(a)return this.filterLowQualityTokens(a)}const o=await xt.getBalance(e,n.caipNetworkId,t);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(t,e){var n,r;try{const s=zO.getChainIdHexFromCAIP2ChainId(e.caipNetworkId),i=await rt.getCapabilities(t);if(!((r=(n=i==null?void 0:i[s])==null?void 0:n.assetDiscovery)!=null&&r.supported))return null;const o=await rt.walletGetAssets({account:t,chainFilter:[s]});if(!zO.isWalletGetAssetsResponse(o))return null;const c=(o[s]||[]).map(l=>zO.createBalance(l,e.caipNetworkId));return Ze.updateBalanceCache({caipAddress:`${e.caipNetworkId}:${t}`,balance:{balances:c},timestamp:Date.now()}),c}catch{return null}},filterLowQualityTokens(t){return t.filter(e=>e.quantity.decimals!=="0")}},Yc=cr({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map}),zje={state:Yc,replaceState(t){t&&Object.assign(Yc,Lw(t))},subscribe(t){return Q.subscribeChainProp("accountState",e=>{if(e)return t(e)})},subscribeKey(t,e,n){let r;return Q.subscribeChainProp("accountState",s=>{if(s){const i=s[t];r!==i&&(r=i,e(i))}},n)},setStatus(t,e){Q.setAccountProp("status",t,e)},getCaipAddress(t){return Q.getAccountProp("caipAddress",t)},setCaipAddress(t,e){const n=t?dt.getPlainAddress(t):void 0;e===Q.state.activeChain&&(Q.state.activeCaipAddress=t),Q.setAccountProp("caipAddress",t,e),Q.setAccountProp("address",n,e)},setBalance(t,e,n){Q.setAccountProp("balance",t,n),Q.setAccountProp("balanceSymbol",e,n)},setProfileName(t,e){Q.setAccountProp("profileName",t,e)},setProfileImage(t,e){Q.setAccountProp("profileImage",t,e)},setUser(t,e){Q.setAccountProp("user",t,e)},setAddressExplorerUrl(t,e){Q.setAccountProp("addressExplorerUrl",t,e)},setSmartAccountDeployed(t,e){Q.setAccountProp("smartAccountDeployed",t,e)},setCurrentTab(t){Q.setAccountProp("currentTab",t,Q.state.activeChain)},setTokenBalance(t,e){t&&Q.setAccountProp("tokenBalance",t,e)},setShouldUpdateToAddress(t,e){Q.setAccountProp("shouldUpdateToAddress",t,e)},addAddressLabel(t,e,n){const r=Q.getAccountProp("addressLabels",n)||new Map;r.set(t,e),Q.setAccountProp("addressLabels",r,n)},removeAddressLabel(t,e){const n=Q.getAccountProp("addressLabels",e)||new Map;n.delete(t),Q.setAccountProp("addressLabels",n,e)},setConnectedWalletInfo(t,e){Q.setAccountProp("connectedWalletInfo",t,e,!1)},setPreferredAccountType(t,e){Q.setAccountProp("preferredAccountType",t,e)},setSocialProvider(t,e){t&&Q.setAccountProp("socialProvider",t,e)},setSocialWindow(t,e){Q.setAccountProp("socialWindow",t?Lw(t):void 0,e)},setFarcasterUrl(t,e){Q.setAccountProp("farcasterUrl",t,e)},async fetchTokenBalance(t){var i,o;Yc.balanceLoading=!0;const e=(i=Q.state.activeCaipNetwork)==null?void 0:i.caipNetworkId,n=(o=Q.state.activeCaipNetwork)==null?void 0:o.chainNamespace,r=Q.state.activeCaipAddress,s=r?dt.getPlainAddress(r):void 0;if(Yc.lastRetry&&!dt.isAllowedRetry(Yc.lastRetry,30*bi.ONE_SEC_MS))return Yc.balanceLoading=!1,[];try{if(s&&e&&n){const a=await HU.getMyTokensWithBalance();return vn.setTokenBalance(a,n),Yc.lastRetry=void 0,Yc.balanceLoading=!1,a}}catch(a){Yc.lastRetry=Date.now(),t==null||t(a),Bh.showError("Token Balance Unavailable")}finally{Yc.balanceLoading=!1}return[]},resetAccount(t){Q.resetAccount(t)}},vn=Ha(zje),Hje={onSwitchNetwork({network:t,ignoreSwitchConfirmation:e=!1}){const n=Q.state.activeCaipNetwork,r=Pt.state.data;if(t.id===(n==null?void 0:n.id))return;const i=vn.getCaipAddress(Q.state.activeChain),o=t.chainNamespace!==Q.state.activeChain,a=vn.getCaipAddress(t.chainNamespace),l=st.getConnectorId(Q.state.activeChain)===he.CONNECTOR_ID.AUTH,u=he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(d=>d===t.chainNamespace);e||l&&u?Pt.push("SwitchNetwork",{...r,network:t}):i&&o&&!a?Pt.push("SwitchActiveChain",{switchToChain:t.chainNamespace,navigateTo:"Connect",navigateWithReplace:!0,network:t}):Pt.push("SwitchNetwork",{...r,network:t})}},ji=cr({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),Gje={state:ji,subscribe(t){return po(ji,()=>t(ji))},subscribeKey(t,e){return Ri(ji,t,e)},async open(t){var i,o;const e=t==null?void 0:t.namespace,n=Q.state.activeChain,r=e&&e!==n,s=(i=Q.getAccountData(t==null?void 0:t.namespace))==null?void 0:i.caipAddress;if(rt.state.wcBasic?Et.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await Et.prefetch(),st.setFilterByNamespace(t==null?void 0:t.namespace),Xn.setLoading(!0,e),e&&r){const a=((o=Q.getNetworkData(e))==null?void 0:o.caipNetwork)||Q.getRequestedCaipNetworks(e)[0];a&&Hje.onSwitchNetwork({network:a,ignoreSwitchConfirmation:!0})}else{const a=Q.state.noAdapters;Ot.state.manualWCControl||a&&!s?dt.isMobile()?Pt.reset("AllWallets"):Pt.reset("ConnectingWalletConnectBasic"):t!=null&&t.view?Pt.reset(t.view,t.data):s?Pt.reset("Account"):Pt.reset("Connect")}ji.open=!0,Zy.set({open:!0}),gr.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:!!s}})},close(){const t=Ot.state.enableEmbedded,e=!!Q.state.activeCaipAddress;ji.open&&gr.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:e}}),ji.open=!1,Pt.reset("Connect"),Xn.clearLoading(),t?e?Pt.replace("Account"):Pt.push("Connect"):Zy.set({open:!1}),rt.resetUri()},setLoading(t,e){e&&ji.loadingNamespaceMap.set(e,t),ji.loading=t,Zy.set({loading:t})},clearLoading(){ji.loadingNamespaceMap.clear(),ji.loading=!1},shake(){ji.shake||(ji.shake=!0,setTimeout(()=>{ji.shake=!1},500))}},Xn=Ha(Gje),o7=2147483648,qje={convertEVMChainIdToCoinType(t){if(t>=o7)throw new Error("Invalid chainId");return(o7|t)>>>0}},la=cr({suggestions:[],loading:!1}),Vje={state:la,subscribe(t){return po(la,()=>t(la))},subscribeKey(t,e){return Ri(la,t,e)},async resolveName(t){var e,n;try{return await xt.lookupEnsName(t)}catch(r){const s=r;throw new Error(((n=(e=s==null?void 0:s.reasons)==null?void 0:e[0])==null?void 0:n.description)||"Error resolving name")}},async isNameRegistered(t){try{return await xt.lookupEnsName(t),!0}catch{return!1}},async getSuggestions(t){try{la.loading=!0,la.suggestions=[];const e=await xt.getEnsNameSuggestions(t);return la.suggestions=e.suggestions.map(n=>({...n,name:n.name}))||[],la.suggestions}catch(e){const n=MS.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(n)}finally{la.loading=!1}},async getNamesForAddress(t){try{if(!Q.state.activeCaipNetwork)return[];const n=Ze.getEnsFromCacheForAddress(t);if(n)return n;const r=await xt.reverseLookupEnsName({address:t});return Ze.updateEnsCache({address:t,ens:r,timestamp:Date.now()}),r}catch(e){const n=MS.parseEnsApiError(e,"Error fetching names for address");throw new Error(n)}},async registerName(t){const e=Q.state.activeCaipNetwork,n=vn.state.address,r=st.getAuthConnector();if(!e)throw new Error("Network not found");if(!n||!r)throw new Error("Address or auth connector not found");la.loading=!0;try{const s=JSON.stringify({name:t,attributes:{},timestamp:Math.floor(Date.now()/1e3)});Pt.pushTransactionStack({onCancel(){Pt.replace("RegisterAccountName")}});const i=await rt.signMessage(s);la.loading=!1;const o=e.id;if(!o)throw new Error("Network not found");const a=qje.convertEVMChainIdToCoinType(Number(o));await xt.registerEnsName({coinType:a,address:n,signature:i,message:s}),vn.setProfileName(t,e.chainNamespace),Pt.replace("RegisterAccountNameSuccess")}catch(s){const i=MS.parseEnsApiError(s,`Error registering name ${t}`);throw Pt.replace("RegisterAccountName"),new Error(i)}finally{la.loading=!1}},validateName(t){return/^[a-zA-Z0-9-]{4,}$/u.test(t)},parseEnsApiError(t,e){var r,s;const n=t;return((s=(r=n==null?void 0:n.reasons)==null?void 0:r[0])==null?void 0:s.description)||e}},MS=Ha(Vje);let Kf=null;const Zd={getSIWX(){return Ot.state.siwx},async initializeIfEnabled(){var i;const t=Ot.state.siwx,e=Q.getActiveCaipAddress();if(!(t&&e))return;const[n,r,s]=e.split(":");if(Q.checkIfSupportedNetwork(n))try{if(Kf&&await Kf,(await t.getSessions(`${n}:${r}`,s)).length)return;await Xn.open({view:"SIWXSignMessage"})}catch(o){console.error("SIWXUtil:initializeIfEnabled",o),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await((i=rt._getClient())==null?void 0:i.disconnect().catch(console.error)),Pt.reset("Connect"),Bh.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const t=Ot.state.siwx,e=dt.getPlainAddress(Q.getActiveCaipAddress()),n=Q.getActiveCaipNetwork(),r=rt._getClient();if(!t)throw new Error("SIWX is not enabled");if(!e)throw new Error("No ActiveCaipAddress found");if(!n)throw new Error("No ActiveCaipNetwork or client found");if(!r)throw new Error("No ConnectionController client found");try{const s=await t.createMessage({chainId:n.caipNetworkId,accountAddress:e}),i=s.toString();st.getConnectorId(n.chainNamespace)===he.CONNECTOR_ID.AUTH&&Pt.pushTransactionStack({});const a=await r.signMessage(i);await t.addSession({data:s,message:i,signature:a}),Q.setLastConnectedSIWECaipNetwork(n),Xn.close(),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(s){const i=this.getSIWXEventProperties();(!Xn.state.open||Pt.state.view==="ApproveTransaction")&&await Xn.open({view:"SIWXSignMessage"}),Bh.showError("Error signing message"),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:i}),console.error("SWIXUtil:requestSignMessage",s)}},async cancelSignMessage(){var t;try{const e=this.getSIWX();if((t=e==null?void 0:e.getRequired)==null?void 0:t.call(e)){const r=Q.getLastConnectedSIWECaipNetwork();if(r){const s=await(e==null?void 0:e.getSessions(r==null?void 0:r.caipNetworkId,dt.getPlainAddress(Q.getActiveCaipAddress())||""));s&&s.length>0?await Q.switchActiveNetwork(r):await rt.disconnect()}else await rt.disconnect()}else Xn.close();Xn.close(),gr.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getAllSessions(){const t=this.getSIWX(),e=Q.getAllRequestedCaipNetworks(),n=[];return await Promise.all(e.map(async r=>{const s=await(t==null?void 0:t.getSessions(r.caipNetworkId,dt.getPlainAddress(Q.getActiveCaipAddress())||""));s&&n.push(...s)})),n},async getSessions(){const t=Ot.state.siwx,e=dt.getPlainAddress(Q.getActiveCaipAddress()),n=Q.getActiveCaipNetwork();return t&&e&&n?t.getSessions(n.caipNetworkId,e):[]},async isSIWXCloseDisabled(){var e;const t=this.getSIWX();if(t){const n=Pt.state.view==="ApproveTransaction",r=Pt.state.view==="SIWXSignMessage";if(n||r)return((e=t.getRequired)==null?void 0:e.call(t))&&(await this.getSessions()).length===0}return!1},async authConnectorAuthenticate({authConnector:t,chainId:e,socialUri:n,preferredAccountType:r,chainNamespace:s}){var l;const i=Zd.getSIWX();if(!i||!s.includes(he.CHAIN.EVM)){const u=await t.connect({chainId:e,socialUri:n,preferredAccountType:r});return{address:u.address,chainId:u.chainId,accounts:u.accounts}}const o=await i.createMessage({chainId:((l=Q.getActiveCaipNetwork())==null?void 0:l.caipNetworkId)||"",accountAddress:"<<AccountAddress>>"}),a={accountAddress:o.accountAddress,chainId:o.chainId,domain:o.domain,uri:o.uri,version:o.version,nonce:o.nonce,notBefore:o.notBefore,statement:o.statement,resources:o.resources,requestId:o.requestId,issuedAt:o.issuedAt,expirationTime:o.expirationTime,serializedMessage:o.toString()},c=await t.connect({chainId:e,socialUri:n,siwxMessage:a,preferredAccountType:r});return a.accountAddress=c.address,a.serializedMessage=c.message||"",c.signature&&c.message&&await Zd.addEmbeddedWalletSession(a,c.message,c.signature),{address:c.address,chainId:c.chainId,accounts:c.accounts}},async addEmbeddedWalletSession(t,e,n){if(Kf)return Kf;const r=Zd.getSIWX();return r?(Kf=r.addSession({data:t,message:e,signature:n}).finally(()=>{Kf=null}),Kf):Promise.resolve()},async universalProviderAuthenticate({universalProvider:t,chains:e,methods:n}){var a,c,l;const r=Zd.getSIWX(),s=new Set(e.map(u=>u.split(":")[0]));if(!r||s.size!==1||!s.has("eip155"))return!1;const i=await r.createMessage({chainId:((a=Q.getActiveCaipNetwork())==null?void 0:a.caipNetworkId)||"",accountAddress:""}),o=await t.authenticate({nonce:i.nonce,domain:i.domain,uri:i.uri,exp:i.expirationTime,iat:i.issuedAt,nbf:i.notBefore,requestId:i.requestId,version:i.version,resources:i.resources,statement:i.statement,chainId:i.chainId,methods:n,chains:[i.chainId,...e.filter(u=>u!==i.chainId)]});if(Bh.showLoading("Authenticating...",{autoClose:!1}),vn.setConnectedWalletInfo({...o.session.peer.metadata,name:o.session.peer.metadata.name,icon:(c=o.session.peer.metadata.icons)==null?void 0:c[0],type:"WALLET_CONNECT"},Array.from(s)[0]),(l=o==null?void 0:o.auths)!=null&&l.length){const u=o.auths.map(d=>{const h=t.client.formatAuthMessage({request:d.p,iss:d.p.iss});return{data:{...d.p,accountAddress:d.p.iss.split(":").slice(-1).join(""),chainId:d.p.iss.split(":").slice(2,4).join(":"),uri:d.p.aud,version:d.p.version||i.version,expirationTime:d.p.exp,issuedAt:d.p.iat,notBefore:d.p.nbf},message:h,signature:d.s.s,cacao:d}});try{await r.setSessions(u),gr.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:Zd.getSIWXEventProperties()})}catch(d){throw console.error("SIWX:universalProviderAuth - failed to set sessions",d),gr.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:Zd.getSIWXEventProperties()}),await t.disconnect().catch(console.error),d}finally{Bh.hide()}}return!0},getSIWXEventProperties(){var e;const t=Q.state.activeChain;if(!t)throw new Error("SIWXUtil:getSIWXEventProperties - namespace is required");return{network:((e=Q.state.activeCaipNetwork)==null?void 0:e.caipNetworkId)||"",isSmartAccount:Gl(t)===Ls.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const t=this.getSIWX();t&&await t.setSessions([])}},To={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:he.CHAIN.EVM,CONNECTOR_TYPE_AUTH:"AUTH"},Fo={ConnectorExplorerIds:{[he.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[he.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[he.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[he.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[he.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[To.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[To.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[To.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[To.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[To.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[To.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[To.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[To.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[To.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[To.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[To.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[he.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[he.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[he.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[he.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[he.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[he.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[he.CONNECTOR_ID.INJECTED]:"Browser Wallet",[he.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[he.CONNECTOR_ID.COINBASE]:"Coinbase",[he.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[he.CONNECTOR_ID.LEDGER]:"Ledger",[he.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[he.CONNECTOR_ID.INJECTED]:"INJECTED",[he.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[he.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[he.CONNECTOR_ID.AUTH]:"AUTH",[To.CONNECTOR_TYPE_AUTH]:"AUTH"}},to={getCaipTokens(t){if(!t)return;const e={};return Object.entries(t).forEach(([n,r])=>{e[`${To.EIP155}:${n}`]=r}),e},isLowerCaseMatch(t,e){return(t==null?void 0:t.toLowerCase())===(e==null?void 0:e.toLowerCase())},getActiveNamespaceConnectedToAuth(){const t=Q.state.activeChain;return he.AUTH_CONNECTOR_SUPPORTED_CHAINS.find(e=>st.getConnectorId(e)===he.CONNECTOR_ID.AUTH&&e===t)},withRetry({conditionFn:t,intervalMs:e,maxRetries:n}){let r=0;return new Promise(s=>{async function i(){return r+=1,await t()?s(!0):r>=n?s(!1):(setTimeout(i,e),null)}i()})}},Kje=new AbortController,Bd={EmbeddedWalletAbortController:Kje,ALERT_ERRORS:{IFRAME_LOAD_FAILED:{shortMessage:"Network Error - Could not load embedded wallet",longMessage:()=>"There was an issue loading the embedded wallet. Please try again later."},IFRAME_REQUEST_TIMEOUT:{shortMessage:"Embedded Wallet Request Timed Out",longMessage:()=>"There was an issue doing the request to the embedded wallet. Please try again later."},UNVERIFIED_DOMAIN:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"}}},Yje="rpc.walletconnect.org";function a7(t,e){const n=new URL("https://rpc.walletconnect.org/v1/");return n.searchParams.set("chainId",t),n.searchParams.set("projectId",e),n.toString()}const HO=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],kv={extendRpcUrlWithProjectId(t,e){let n=!1;try{n=new URL(t).host===Yje}catch{n=!1}if(n){const r=new URL(t);return r.searchParams.has("projectId")||r.searchParams.set("projectId",e),r.toString()}return t},isCaipNetwork(t){return"chainNamespace"in t&&"caipNetworkId"in t},getChainNamespace(t){return this.isCaipNetwork(t)?t.chainNamespace:he.CHAIN.EVM},getCaipNetworkId(t){return this.isCaipNetwork(t)?t.caipNetworkId:`${he.CHAIN.EVM}:${t.id}`},getDefaultRpcUrl(t,e,n){var s,i,o;const r=(o=(i=(s=t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null?void 0:o[0];return HO.includes(e)?a7(e,n):r||""},extendCaipNetwork(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){var h,f,p,g,w;const s=this.getChainNamespace(t),i=this.getCaipNetworkId(t),o=(h=t.rpcUrls.default.http)==null?void 0:h[0],a=this.getDefaultRpcUrl(t,i,n),c=((g=(p=(f=t==null?void 0:t.rpcUrls)==null?void 0:f.chainDefault)==null?void 0:p.http)==null?void 0:g[0])||o,l=((w=r==null?void 0:r[i])==null?void 0:w.map(m=>m.url))||[],u=[...l,a],d=[...l];return c&&!d.includes(c)&&d.push(c),{...t,chainNamespace:s,caipNetworkId:i,assets:{imageId:Fo.NetworkImageIds[t.id],imageUrl:e==null?void 0:e[t.id]},rpcUrls:{...t.rpcUrls,default:{http:u},chainDefault:{http:d}}}},extendCaipNetworks(t,{customNetworkImageUrls:e,projectId:n,customRpcUrls:r}){return t.map(s=>kv.extendCaipNetwork(s,{customNetworkImageUrls:e,customRpcUrls:r,projectId:n}))},getViemTransport(t,e,n){var s,i,o;const r=[];return n==null||n.forEach(a=>{r.push(Ta(a.url,a.config))}),HO.includes(t.caipNetworkId)&&r.push(Ta(a7(t.caipNetworkId,e),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),(o=(i=(s=t==null?void 0:t.rpcUrls)==null?void 0:s.default)==null?void 0:i.http)==null||o.forEach(a=>{r.push(Ta(a))}),Gx(r)},extendWagmiTransports(t,e,n){if(HO.includes(t.caipNetworkId)){const r=this.getDefaultRpcUrl(t,t.caipNetworkId,e);return Gx([n,Ta(r)])}return n},getUnsupportedNetwork(t){return{id:t.split(":")[1],caipNetworkId:t,name:he.UNSUPPORTED_NETWORK_NAME,chainNamespace:t.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}},getCaipNetworkFromStorage(t){var c;const e=Ze.getActiveCaipNetworkId(),n=Q.getAllRequestedCaipNetworks(),r=Array.from(((c=Q.state.chains)==null?void 0:c.keys())||[]),s=e==null?void 0:e.split(":")[0],i=s?r.includes(s):!1,o=n==null?void 0:n.find(l=>l.caipNetworkId===e);return i&&!o&&e?this.getUnsupportedNetwork(e):o||t||(n==null?void 0:n[0])}},c7={transactionHash:/^0x(?:[A-Fa-f0-9]{64})$/u,signedMessage:/^0x(?:[a-fA-F0-9]{62,})$/u},Is={set(t,e){vl.isClient&&localStorage.setItem(`${Ye.STORAGE_KEY}${t}`,e)},get(t){return vl.isClient?localStorage.getItem(`${Ye.STORAGE_KEY}${t}`):null},delete(t,e){vl.isClient&&(e?localStorage.removeItem(t):localStorage.removeItem(`${Ye.STORAGE_KEY}${t}`))}},zA=30*1e3,vl={checkIfAllowedToTriggerEmail(){const t=Is.get(Ye.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<zA){const n=Math.ceil((zA-e)/1e3);throw new Error(`Please try again after ${n} seconds`)}}},getTimeToNextEmailLogin(){const t=Is.get(Ye.LAST_EMAIL_LOGIN_TIME);if(t){const e=Date.now()-Number(t);if(e<zA)return Math.ceil((zA-e)/1e3)}return 0},checkIfRequestExists(t){return Ls.NOT_SAFE_RPC_METHODS.includes(t.method)||Ls.SAFE_RPC_METHODS.includes(t.method)},getResponseType(t){return typeof t=="string"&&((t==null?void 0:t.match(c7.transactionHash))||(t==null?void 0:t.match(c7.signedMessage)))?Ye.RPC_RESPONSE_TYPE_TX:Ye.RPC_RESPONSE_TYPE_OBJECT},checkIfRequestIsSafe(t){return Ls.SAFE_RPC_METHODS.includes(t.method)},isClient:typeof window<"u"},Er=E.object({message:E.string()});function Ue(t){return E.literal(Ye[t])}const kT=E.object({serializedMessage:E.string().optional(),accountAddress:E.string(),chainId:E.string(),notBefore:E.string().optional(),domain:E.string(),uri:E.string(),version:E.string(),nonce:E.string(),statement:E.string().optional(),resources:E.array(E.string()).optional(),requestId:E.string().optional(),issuedAt:E.string().optional(),expirationTime:E.string().optional()});E.object({accessList:E.array(E.string()),blockHash:E.string().nullable(),blockNumber:E.string().nullable(),chainId:E.string().or(E.number()),from:E.string(),gas:E.string(),hash:E.string(),input:E.string().nullable(),maxFeePerGas:E.string(),maxPriorityFeePerGas:E.string(),nonce:E.string(),r:E.string(),s:E.string(),to:E.string(),transactionIndex:E.string().nullable(),type:E.string(),v:E.string(),value:E.string()});const Qje=E.object({chainId:E.string().or(E.number()),rpcUrl:E.optional(E.string())}),Jje=E.object({email:E.string().email()}),Zje=E.object({otp:E.string()}),Xje=E.object({uri:E.string(),preferredAccountType:E.optional(E.string()),chainId:E.optional(E.string().or(E.number())),siwxMessage:E.optional(kT),rpcUrl:E.optional(E.string())}),e9e=E.object({chainId:E.optional(E.string().or(E.number())),preferredAccountType:E.optional(E.string()),socialUri:E.optional(E.string()),siwxMessage:E.optional(kT),rpcUrl:E.optional(E.string())}),t9e=E.object({provider:E.enum(["google","github","apple","facebook","x","discord"])}),n9e=E.object({email:E.string().email()}),r9e=E.object({otp:E.string()}),s9e=E.object({otp:E.string()}),i9e=E.object({themeMode:E.optional(E.enum(["light","dark"])),themeVariables:E.optional(E.record(E.string(),E.string().or(E.number()))),w3mThemeVariables:E.optional(E.record(E.string(),E.string()))}),o9e=E.object({metadata:E.object({name:E.string(),description:E.string(),url:E.string(),icons:E.array(E.string())}).optional(),sdkVersion:E.string().optional(),sdkType:E.string().optional(),projectId:E.string()}),a9e=E.object({type:E.string()}),c9e=E.object({action:E.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),l9e=E.object({url:E.string()}),u9e=E.object({userName:E.string()}),d9e=E.object({email:E.string().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ls.ACCOUNT_TYPES.EOA,Ls.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:E.string().optional().nullable(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(kT)}),h9e=E.object({action:E.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),f9e=E.object({email:E.string().email().optional().nullable(),address:E.string(),chainId:E.string().or(E.number()),smartAccountDeployed:E.optional(E.boolean()),accounts:E.array(E.object({address:E.string(),type:E.enum([Ls.ACCOUNT_TYPES.EOA,Ls.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:E.optional(E.string()),signature:E.string().optional(),message:E.string().optional(),siwxMessage:E.optional(kT)}),p9e=E.object({uri:E.string()}),g9e=E.object({isConnected:E.boolean()}),m9e=E.object({chainId:E.string().or(E.number())}),y9e=E.object({chainId:E.string().or(E.number())}),w9e=E.object({newEmail:E.string().email()}),b9e=E.object({smartAccountEnabledNetworks:E.array(E.number())});E.object({address:E.string(),isDeployed:E.boolean()});const v9e=E.object({version:E.string().optional()}),E9e=E.object({type:E.string(),address:E.string()}),C9e=E.any(),_9e=E.object({method:E.literal("eth_accounts")}),A9e=E.object({method:E.literal("eth_blockNumber")}),S9e=E.object({method:E.literal("eth_call"),params:E.array(E.any())}),x9e=E.object({method:E.literal("eth_chainId")}),I9e=E.object({method:E.literal("eth_estimateGas"),params:E.array(E.any())}),N9e=E.object({method:E.literal("eth_feeHistory"),params:E.array(E.any())}),T9e=E.object({method:E.literal("eth_gasPrice")}),R9e=E.object({method:E.literal("eth_getAccount"),params:E.array(E.any())}),P9e=E.object({method:E.literal("eth_getBalance"),params:E.array(E.any())}),O9e=E.object({method:E.literal("eth_getBlockByHash"),params:E.array(E.any())}),k9e=E.object({method:E.literal("eth_getBlockByNumber"),params:E.array(E.any())}),D9e=E.object({method:E.literal("eth_getBlockReceipts"),params:E.array(E.any())}),M9e=E.object({method:E.literal("eth_getBlockTransactionCountByHash"),params:E.array(E.any())}),L9e=E.object({method:E.literal("eth_getBlockTransactionCountByNumber"),params:E.array(E.any())}),U9e=E.object({method:E.literal("eth_getCode"),params:E.array(E.any())}),B9e=E.object({method:E.literal("eth_getFilterChanges"),params:E.array(E.any())}),$9e=E.object({method:E.literal("eth_getFilterLogs"),params:E.array(E.any())}),F9e=E.object({method:E.literal("eth_getLogs"),params:E.array(E.any())}),j9e=E.object({method:E.literal("eth_getProof"),params:E.array(E.any())}),W9e=E.object({method:E.literal("eth_getStorageAt"),params:E.array(E.any())}),z9e=E.object({method:E.literal("eth_getTransactionByBlockHashAndIndex"),params:E.array(E.any())}),H9e=E.object({method:E.literal("eth_getTransactionByBlockNumberAndIndex"),params:E.array(E.any())}),G9e=E.object({method:E.literal("eth_getTransactionByHash"),params:E.array(E.any())}),q9e=E.object({method:E.literal("eth_getTransactionCount"),params:E.array(E.any())}),V9e=E.object({method:E.literal("eth_getTransactionReceipt"),params:E.array(E.any())}),K9e=E.object({method:E.literal("eth_getUncleCountByBlockHash"),params:E.array(E.any())}),Y9e=E.object({method:E.literal("eth_getUncleCountByBlockNumber"),params:E.array(E.any())}),Q9e=E.object({method:E.literal("eth_maxPriorityFeePerGas")}),J9e=E.object({method:E.literal("eth_newBlockFilter")}),Z9e=E.object({method:E.literal("eth_newFilter"),params:E.array(E.any())}),X9e=E.object({method:E.literal("eth_newPendingTransactionFilter")}),e7e=E.object({method:E.literal("eth_sendRawTransaction"),params:E.array(E.any())}),t7e=E.object({method:E.literal("eth_syncing"),params:E.array(E.any())}),n7e=E.object({method:E.literal("eth_uninstallFilter"),params:E.array(E.any())}),l7=E.object({method:E.literal("personal_sign"),params:E.array(E.any())}),r7e=E.object({method:E.literal("eth_signTypedData_v4"),params:E.array(E.any())}),s7e=E.object({method:E.literal("eth_sendTransaction"),params:E.array(E.any())}),i7e=E.object({method:E.literal("solana_signMessage"),params:E.object({message:E.string(),pubkey:E.string()})}),o7e=E.object({method:E.literal("solana_signTransaction"),params:E.object({transaction:E.string()})}),a7e=E.object({method:E.literal("solana_signAllTransactions"),params:E.object({transactions:E.array(E.string())})}),c7e=E.object({method:E.literal("solana_signAndSendTransaction"),params:E.object({transaction:E.string(),options:E.object({skipPreflight:E.boolean().optional(),preflightCommitment:E.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:E.number().optional(),minContextSlot:E.number().optional()}).optional()})}),l7e=E.object({method:E.literal("wallet_sendCalls"),params:E.array(E.object({chainId:E.string().or(E.number()).optional(),from:E.string().optional(),version:E.string().optional(),capabilities:E.any().optional(),calls:E.array(E.object({to:E.string().startsWith("0x"),data:E.string().startsWith("0x").optional(),value:E.string().optional()}))}))}),u7e=E.object({method:E.literal("wallet_getCallsStatus"),params:E.array(E.string())}),d7e=E.object({method:E.literal("wallet_getCapabilities"),params:E.array(E.string().or(E.number()).optional()).optional()}),h7e=E.object({method:E.literal("wallet_grantPermissions"),params:E.array(E.any())}),f7e=E.object({method:E.literal("wallet_revokePermissions"),params:E.any()}),p7e=E.object({method:E.literal("wallet_getAssets"),params:E.any()}),u7=E.object({token:E.string()}),Be=E.object({id:E.string().optional()}),fv={appEvent:Be.extend({type:Ue("APP_SWITCH_NETWORK"),payload:Qje}).or(Be.extend({type:Ue("APP_CONNECT_EMAIL"),payload:Jje})).or(Be.extend({type:Ue("APP_CONNECT_DEVICE")})).or(Be.extend({type:Ue("APP_CONNECT_OTP"),payload:Zje})).or(Be.extend({type:Ue("APP_CONNECT_SOCIAL"),payload:Xje})).or(Be.extend({type:Ue("APP_GET_FARCASTER_URI")})).or(Be.extend({type:Ue("APP_CONNECT_FARCASTER")})).or(Be.extend({type:Ue("APP_GET_USER"),payload:E.optional(e9e)})).or(Be.extend({type:Ue("APP_GET_SOCIAL_REDIRECT_URI"),payload:t9e})).or(Be.extend({type:Ue("APP_SIGN_OUT")})).or(Be.extend({type:Ue("APP_IS_CONNECTED"),payload:E.optional(u7)})).or(Be.extend({type:Ue("APP_GET_CHAIN_ID")})).or(Be.extend({type:Ue("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(Be.extend({type:Ue("APP_INIT_SMART_ACCOUNT")})).or(Be.extend({type:Ue("APP_SET_PREFERRED_ACCOUNT"),payload:a9e})).or(Be.extend({type:Ue("APP_RPC_REQUEST"),payload:l7.or(p7e).or(_9e).or(A9e).or(S9e).or(x9e).or(I9e).or(N9e).or(T9e).or(R9e).or(P9e).or(O9e).or(k9e).or(D9e).or(M9e).or(L9e).or(U9e).or(B9e).or($9e).or(F9e).or(j9e).or(W9e).or(z9e).or(H9e).or(G9e).or(q9e).or(V9e).or(K9e).or(Y9e).or(Q9e).or(J9e).or(Z9e).or(X9e).or(e7e).or(t7e).or(n7e).or(l7).or(r7e).or(s7e).or(i7e).or(o7e).or(a7e).or(c7e).or(u7e).or(l7e).or(d7e).or(h7e).or(f7e).and(E.object({chainId:E.string().or(E.number()).optional(),chainNamespace:E.enum(["eip155","solana","polkadot","bip122","cosmos"]).optional(),rpcUrl:E.string().optional()}))})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL"),payload:n9e})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:r9e})).or(Be.extend({type:Ue("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:s9e})).or(Be.extend({type:Ue("APP_SYNC_THEME"),payload:i9e})).or(Be.extend({type:Ue("APP_SYNC_DAPP_DATA"),payload:o9e})).or(Be.extend({type:Ue("APP_RELOAD")})).or(Be.extend({type:Ue("APP_RPC_ABORT")})),frameEvent:Be.extend({type:Ue("FRAME_SWITCH_NETWORK_ERROR"),payload:Er}).or(Be.extend({type:Ue("FRAME_SWITCH_NETWORK_SUCCESS"),payload:y9e})).or(Be.extend({type:Ue("FRAME_CONNECT_EMAIL_SUCCESS"),payload:c9e})).or(Be.extend({type:Ue("FRAME_CONNECT_EMAIL_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:l9e})).or(Be.extend({type:Ue("FRAME_GET_FARCASTER_URI_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:u9e})).or(Be.extend({type:Ue("FRAME_CONNECT_FARCASTER_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_OTP_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_OTP_SUCCESS")})).or(Be.extend({type:Ue("FRAME_CONNECT_DEVICE_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_CONNECT_DEVICE_SUCCESS")})).or(Be.extend({type:Ue("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:d9e})).or(Be.extend({type:Ue("FRAME_CONNECT_SOCIAL_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_USER_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_USER_SUCCESS"),payload:f9e})).or(Be.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:p9e})).or(Be.extend({type:Ue("FRAME_SIGN_OUT_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SIGN_OUT_SUCCESS")})).or(Be.extend({type:Ue("FRAME_IS_CONNECTED_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_IS_CONNECTED_SUCCESS"),payload:g9e})).or(Be.extend({type:Ue("FRAME_GET_CHAIN_ID_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_GET_CHAIN_ID_SUCCESS"),payload:m9e})).or(Be.extend({type:Ue("FRAME_RPC_REQUEST_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_RPC_REQUEST_SUCCESS"),payload:C9e})).or(Be.extend({type:Ue("FRAME_SESSION_UPDATE"),payload:u7})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SUCCESS"),payload:h9e})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:w9e})).or(Be.extend({type:Ue("FRAME_SYNC_THEME_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SYNC_THEME_SUCCESS")})).or(Be.extend({type:Ue("FRAME_SYNC_DAPP_DATA_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(Be.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:b9e})).or(Be.extend({type:Ue("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:E9e})).or(Be.extend({type:Ue("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_READY"),payload:v9e})).or(Be.extend({type:Ue("FRAME_RELOAD_ERROR"),payload:Er})).or(Be.extend({type:Ue("FRAME_RELOAD_SUCCESS")}))};function GO(t,e={}){var n;return typeof(e==null?void 0:e.type)=="string"&&((n=e==null?void 0:e.type)==null?void 0:n.includes(t))}function g7e({projectId:t,chainId:e,version:n,enableLogger:r,rpcUrl:s=he.BLOCKCHAIN_API_RPC_URL}){const i=new URL(bje);return i.searchParams.set("projectId",t),i.searchParams.set("chainId",String(e)),i.searchParams.set("version",n),i.searchParams.set("enableLogger",String(r)),i.searchParams.set("rpcUrl",s),i.toString()}class m7e{constructor({projectId:e,isAppClient:n=!1,chainId:r="eip155:1",enableLogger:s=!0,rpcUrl:i=he.BLOCKCHAIN_API_RPC_URL}){if(this.iframe=null,this.iframeIsReady=!1,this.initFrame=()=>{const o=document.getElementById("w3m-iframe");this.iframe&&!o&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(o,a,c)=>{function l({data:u}){if(!GO(Ye.FRAME_EVENT_KEY,u))return;const d=fv.frameEvent.parse(u);d.id===o&&(a(d),window.removeEventListener("message",l))}vl.isClient&&(window.addEventListener("message",l),c.addEventListener("abort",()=>{window.removeEventListener("message",l)}))},onFrameEvent:o=>{vl.isClient&&window.addEventListener("message",({data:a})=>{if(!GO(Ye.FRAME_EVENT_KEY,a))return;const c=fv.frameEvent.parse(a);o(c)})},onAppEvent:o=>{vl.isClient&&window.addEventListener("message",({data:a})=>{if(!GO(Ye.APP_EVENT_KEY,a))return;const c=fv.appEvent.parse(a);o(c)})},postAppEvent:o=>{var a;if(vl.isClient){if(!((a=this.iframe)!=null&&a.contentWindow))throw new Error("W3mFrame: iframe is not set");fv.appEvent.parse(o),this.iframe.contentWindow.postMessage(o,"*")}},postFrameEvent:o=>{if(vl.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");fv.frameEvent.parse(o),parent.postMessage(o,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),this.rpcUrl=i,n&&(this.frameLoadPromise=new Promise((o,a)=>{this.frameLoadPromiseResolver={resolve:o,reject:a}}),vl.isClient)){const o=document.createElement("iframe");o.id="w3m-iframe",o.src=g7e({projectId:e,chainId:r,version:Eje,enableLogger:s,rpcUrl:this.rpcUrl}),o.name="w3m-secure-iframe",o.style.position="fixed",o.style.zIndex="999999",o.style.display="none",o.style.border="none",o.style.animationDelay="0s, 50ms",o.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",o.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=o,this.iframe.onerror=()=>{var a;(a=this.frameLoadPromiseResolver)==null||a.reject("Unable to load email login dependency")},this.events.onFrameEvent(a=>{var c;a.type==="@w3m-frame/READY"&&(this.iframeIsReady=!0,(c=this.frameLoadPromiseResolver)==null||c.resolve(void 0))})}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map(n=>({[n]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${n}&projectId=${this.projectId}`,chainId:n}}));return Object.assign({},...e)}}class y7e{constructor(e){var i;const n=pm({level:vje}),{logger:r,chunkLoggerController:s}=oT({opts:n});this.logger=$s(r,this.constructor.name),this.chunkLoggerController=s,typeof window<"u"&&((i=this.chunkLoggerController)!=null&&i.downloadLogsBlobInBrowser)&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{var o;(o=this.chunkLoggerController)!=null&&o.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}class w7e{constructor({projectId:e,chainId:n,enableLogger:r=!0,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){this.openRpcRequests=[],this.isInitialized=!1,r&&(this.w3mLogger=new y7e(e)),this.abortController=i,this.getActiveCaipNetwork=o;const a=this.getRpcUrl(n);this.w3mFrame=new m7e({projectId:e,isAppClient:!0,chainId:n,enableLogger:r,rpcUrl:a}),this.onTimeout=s,this.getLoginEmailUsed()&&this.createFrame()}async createFrame(){this.w3mFrame.initFrame(),this.initPromise=new Promise(e=>{this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_READY&&setTimeout(()=>{e()},500)})}),await this.initPromise,this.isInitialized=!0,this.initPromise=void 0}async init(){if(!this.isInitialized){if(this.initPromise){await this.initPromise;return}await this.createFrame()}}getLoginEmailUsed(){return!!Is.get(Ye.EMAIL_LOGIN_USED_KEY)}getEmail(){return Is.get(Ye.EMAIL)}getUsername(){return Is.get(Ye.SOCIAL_USERNAME)}async reload(){var e;try{await this.appEvent({type:Ye.APP_RELOAD})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error reloading iframe"),n}}async connectEmail(e){var n;try{vl.checkIfAllowedToTriggerEmail(),await this.init();const r=await this.appEvent({type:Ye.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting email"),r}}async connectDevice(){var e;try{return this.appEvent({type:Ye.APP_CONNECT_DEVICE})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting device"),n}}async connectOtp(e){var n;try{return this.appEvent({type:Ye.APP_CONNECT_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting otp"),r}}async isConnected(){var e;try{if(!this.getLoginEmailUsed())return{isConnected:!1};const n=await this.appEvent({type:Ye.APP_IS_CONNECTED});return n!=null&&n.isConnected||this.deleteAuthLoginCache(),n}catch(n){throw this.deleteAuthLoginCache(),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error checking connection"),n}}async getChainId(){var e;try{const n=await this.appEvent({type:Ye.APP_GET_CHAIN_ID});return this.setLastUsedChainId(n.chainId),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting chain id"),n}}async getSocialRedirectUri(e){var n;try{return await this.init(),this.appEvent({type:Ye.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error getting social redirect uri"),r}}async updateEmail(e){var n;try{const r=await this.appEvent({type:Ye.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email"),r}}async updateEmailPrimaryOtp(e){var n;try{return this.appEvent({type:Ye.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email primary otp"),r}}async updateEmailSecondaryOtp(e){var n;try{const r=await this.appEvent({type:Ye.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(r.newEmail),r}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error updating email secondary otp"),r}}async syncTheme(e){var n;try{return this.appEvent({type:Ye.APP_SYNC_THEME,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing theme"),r}}async syncDappData(e){var n;try{return this.appEvent({type:Ye.APP_SYNC_DAPP_DATA,payload:e})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error syncing dapp data"),r}}async getSmartAccountEnabledNetworks(){var e;try{const n=await this.appEvent({type:Ye.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(n.smartAccountEnabledNetworks),n}catch(n){throw this.persistSmartAccountEnabledNetworks([]),(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting smart account enabled networks"),n}}async setPreferredAccount(e){var n;try{return this.appEvent({type:Ye.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error setting preferred account"),r}}async connect(e){var n,r;if(e!=null&&e.socialUri)try{await this.init();const s=this.getRpcUrl(e.chainId),i=await this.appEvent({type:Ye.APP_CONNECT_SOCIAL,payload:{uri:e.socialUri,preferredAccountType:e.preferredAccountType,chainId:e.chainId,siwxMessage:e.siwxMessage,rpcUrl:s}});return i.userName&&this.setSocialLoginSuccess(i.userName),this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(n=this.w3mLogger)==null||n.logger.error({error:s},"Error connecting social"),s}else try{const s=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,i=await this.getUser({chainId:s,preferredAccountType:e==null?void 0:e.preferredAccountType,siwxMessage:e==null?void 0:e.siwxMessage,rpcUrl:this.getRpcUrl(s)});return this.setLoginSuccess(i.email),this.setLastUsedChainId(i.chainId),this.user=i,i}catch(s){throw(r=this.w3mLogger)==null||r.logger.error({error:s},"Error connecting"),s}}async getUser(e){var n;try{await this.init();const r=(e==null?void 0:e.chainId)||this.getLastUsedChainId()||1,s=await this.appEvent({type:Ye.APP_GET_USER,payload:{...e,chainId:r}});return this.user=s,s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error connecting"),r}}async connectSocial({uri:e,chainId:n,preferredAccountType:r}){var s;try{await this.init();const i=this.getRpcUrl(n),o=await this.appEvent({type:Ye.APP_CONNECT_SOCIAL,payload:{uri:e,chainId:n,rpcUrl:i,preferredAccountType:r}});return o.userName&&this.setSocialLoginSuccess(o.userName),o}catch(i){throw(s=this.w3mLogger)==null||s.logger.error({error:i},"Error connecting social"),i}}async getFarcasterUri(){var e;try{return await this.init(),await this.appEvent({type:Ye.APP_GET_FARCASTER_URI})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error getting farcaster uri"),n}}async connectFarcaster(){var e;try{const n=await this.appEvent({type:Ye.APP_CONNECT_FARCASTER});return n.userName&&this.setSocialLoginSuccess(n.userName),n}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error connecting farcaster"),n}}async switchNetwork({chainId:e}){var n;try{const r=this.getRpcUrl(e),s=await this.appEvent({type:Ye.APP_SWITCH_NETWORK,payload:{chainId:e,rpcUrl:r}});return this.setLastUsedChainId(s.chainId),s}catch(r){throw(n=this.w3mLogger)==null||n.logger.error({error:r},"Error switching network"),r}}async disconnect(){var e;try{return this.deleteAuthLoginCache(),await new Promise(async r=>{const s=setTimeout(()=>{r()},3e3);await this.appEvent({type:Ye.APP_SIGN_OUT}),clearTimeout(s),r()})}catch(n){throw(e=this.w3mLogger)==null||e.logger.error({error:n},"Error disconnecting"),n}}async request(e){var r,s,i,o,a;const n=e;try{if(Ls.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();const c=e.chainNamespace||"eip155",l=(r=this.getActiveCaipNetwork(c))==null?void 0:r.id;n.chainNamespace=c,n.chainId=l,n.rpcUrl=this.getRpcUrl(l),(s=this.rpcRequestHandler)==null||s.call(this,e);const u=await this.appEvent({type:Ye.APP_RPC_REQUEST,payload:n});return(i=this.rpcSuccessHandler)==null||i.call(this,u,n),u}catch(c){throw(o=this.rpcErrorHandler)==null||o.call(this,c,n),(a=this.w3mLogger)==null||a.logger.error({error:c},"Error requesting"),c}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_IS_CONNECTED_SUCCESS&&n.payload.isConnected&&e()})}onNotConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_IS_CONNECTED_ERROR&&e(),n.type===Ye.FRAME_IS_CONNECTED_SUCCESS&&!n.payload.isConnected&&e()})}onConnect(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_GET_USER_SUCCESS&&e(n.payload)})}onSocialConnected(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_CONNECT_SOCIAL_SUCCESS&&e(n.payload)})}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent(n=>{n.type===Ye.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(n.payload):n.type===Ye.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:Ls.ACCOUNT_TYPES.EOA})})}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}async rejectRpcRequests(){var e;try{await Promise.all(this.openRpcRequests.map(async({abortController:n,method:r})=>{Ls.SAFE_RPC_METHODS.includes(r)||n.abort(),await this.appEvent({type:Ye.APP_RPC_ABORT})})),this.openRpcRequests=[]}catch(n){(e=this.w3mLogger)==null||e.logger.error({error:n},"Error aborting RPC request")}}async appEvent(e){let n,r;function s(c){return c.replace("@w3m-app/","")}const i=[Ye.APP_SYNC_DAPP_DATA,Ye.APP_SYNC_THEME,Ye.APP_SET_PREFERRED_ACCOUNT],o=s(e.type);return!this.w3mFrame.iframeIsReady&&!i.includes(e.type)&&(r=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_load_failed"),this.abortController.abort()},2e4)),await this.w3mFrame.frameLoadPromise,clearTimeout(r),[Ye.APP_CONNECT_EMAIL,Ye.APP_CONNECT_DEVICE,Ye.APP_CONNECT_OTP,Ye.APP_CONNECT_SOCIAL,Ye.APP_GET_SOCIAL_REDIRECT_URI].map(s).includes(o)&&(n=setTimeout(()=>{var c;(c=this.onTimeout)==null||c.call(this,"iframe_request_timeout"),this.abortController.abort()},12e4)),new Promise((c,l)=>{var f,p,g;const u=Math.random().toString(36).substring(7);(g=(f=this.w3mLogger)==null?void 0:(p=f.logger).info)==null||g.call(p,{event:e,id:u},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:u});const d=new AbortController;if(o==="RPC_REQUEST"){const w=e;this.openRpcRequests=[...this.openRpcRequests,{...w.payload,abortController:d}]}d.signal.addEventListener("abort",()=>{o==="RPC_REQUEST"?l(new Error("Request was aborted")):o!=="GET_FARCASTER_URI"&&l(new Error("Something went wrong"))});function h(w,m){var b,v,A;w.id===u&&((v=m==null?void 0:(b=m.logger).info)==null||v.call(b,{framEvent:w,id:u},"Received frame response"),w.type===`@w3m-frame/${o}_SUCCESS`?(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&c(w.payload),c(void 0)):w.type===`@w3m-frame/${o}_ERROR`&&(n&&clearTimeout(n),r&&clearTimeout(r),"payload"in w&&l(new Error(((A=w.payload)==null?void 0:A.message)||"An error occurred")),l(new Error("An error occurred"))))}this.w3mFrame.events.registerFrameEventHandler(u,w=>h(w,this.w3mLogger),this.abortController.signal)})}setNewLastEmailLoginTime(){Is.set(Ye.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){Is.set(Ye.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&Is.set(Ye.EMAIL,e),Is.set(Ye.EMAIL_LOGIN_USED_KEY,"true"),Is.delete(Ye.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){Is.delete(Ye.EMAIL_LOGIN_USED_KEY),Is.delete(Ye.EMAIL),Is.delete(Ye.LAST_USED_CHAIN_KEY),Is.delete(Ye.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&Is.set(Ye.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=Is.get(Ye.LAST_USED_CHAIN_KEY)??void 0,n=Number(e);return isNaN(n)?e:n}persistSmartAccountEnabledNetworks(e){Is.set(Ye.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}getRpcUrl(e){var s,i;let n=e===void 0?void 0:"eip155";typeof e=="string"&&(e.includes(":")?n=(s=Uh.parseCaipNetworkId(e))==null?void 0:s.chainNamespace:Number.isInteger(Number(e))?n="eip155":n="solana");const r=this.getActiveCaipNetwork(n);return(i=r==null?void 0:r.rpcUrls.default.http)==null?void 0:i[0]}}class Xy{constructor(){}static getInstance({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o}){return Xy.instance||(Xy.instance=new w7e({projectId:e,chainId:n,enableLogger:r,onTimeout:s,abortController:i,getActiveCaipNetwork:o})),Xy.instance}}const b7e={DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"]},d7={filterOutDuplicatesByRDNS(t){const e=Ot.state.enableEIP6963?st.state.connectors:[],n=Ze.getRecentWallets(),r=e.map(a=>{var c;return(c=a.info)==null?void 0:c.rdns}).filter(Boolean),s=n.map(a=>a.rdns).filter(Boolean),i=r.concat(s);if(i.includes("io.metamask.mobile")&&dt.isMobile()){const a=i.indexOf("io.metamask.mobile");i[a]="io.metamask"}return t.filter(a=>!(a!=null&&a.rdns&&i.includes(String(a.rdns))||!(a!=null&&a.rdns)&&e.some(l=>l.name===a.name)))},filterOutDuplicatesByIds(t){const e=st.state.connectors.filter(a=>a.type==="ANNOUNCED"||a.type==="INJECTED"),n=Ze.getRecentWallets(),r=e.map(a=>a.explorerId),s=n.map(a=>a.id),i=r.concat(s);return t.filter(a=>!i.includes(a==null?void 0:a.id))},filterOutDuplicateWallets(t){const e=this.filterOutDuplicatesByRDNS(t);return this.filterOutDuplicatesByIds(e)},markWalletsAsInstalled(t){const{connectors:e}=st.state,{featuredWalletIds:n}=Ot.state,r=e.filter(o=>o.type==="ANNOUNCED").reduce((o,a)=>{var c;return(c=a.info)!=null&&c.rdns&&(o[a.info.rdns]=!0),o},{});return t.map(o=>({...o,installed:!!o.rdns&&!!r[o.rdns??""]})).sort((o,a)=>{const c=Number(a.installed)-Number(o.installed);if(c!==0)return c;if(n!=null&&n.length){const l=n.indexOf(o.id),u=n.indexOf(a.id);if(l!==-1&&u!==-1)return l-u;if(l!==-1)return-1;if(u!==-1)return 1}return 0})},getConnectOrderMethod(t,e){var c;const n=(t==null?void 0:t.connectMethodsOrder)||((c=Ot.state.features)==null?void 0:c.connectMethodsOrder),r=e||st.state.connectors;if(n)return n;const{injected:s,announced:i}=LS.getConnectorsByType(r,Et.state.recommended,Et.state.featured),o=s.filter(LS.showConnector),a=i.filter(LS.showConnector);return o.length||a.length?["wallet","email","social"]:b7e.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(t){const e=!!t.rdns&&Et.state.excludedWallets.some(r=>r.rdns===t.rdns),n=!!t.name&&Et.state.excludedWallets.some(r=>to.isLowerCaseMatch(r.name,t.name));return e||n}},LS={getConnectorsByType(t,e,n){const{customWallets:r}=Ot.state,s=Ze.getRecentWallets(),i=d7.filterOutDuplicateWallets(e),o=d7.filterOutDuplicateWallets(n),a=t.filter(d=>d.type==="MULTI_CHAIN"),c=t.filter(d=>d.type==="ANNOUNCED"),l=t.filter(d=>d.type==="INJECTED"),u=t.filter(d=>d.type==="EXTERNAL");return{custom:r,recent:s,external:u,multiChain:a,announced:c,injected:l,recommended:i,featured:o}},showConnector(t){var s;const e=(s=t.info)==null?void 0:s.rdns,n=!!e&&Et.state.excludedWallets.some(i=>!!i.rdns&&i.rdns===e),r=!!t.name&&Et.state.excludedWallets.some(i=>to.isLowerCaseMatch(i.name,t.name));return!(t.type==="INJECTED"&&(t.name==="Browser Wallet"&&(!dt.isMobile()||dt.isMobile()&&!e&&!rt.checkInstalled())||n||r)||(t.type==="ANNOUNCED"||t.type==="EXTERNAL")&&(n||r))},getIsConnectedWithWC(){return Array.from(Q.state.chains.values()).some(n=>st.getConnectorId(n.namespace)===he.CONNECTOR_ID.WALLET_CONNECT)},getConnectorTypeOrder({recommended:t,featured:e,custom:n,recent:r,announced:s,injected:i,multiChain:o,external:a,overriddenConnectors:c=(l=>(l=Ot.state.features)==null?void 0:l.connectorTypeOrder)()??[]}){const h=[{type:"walletConnect",isEnabled:Ot.state.enableWalletConnect},{type:"recent",isEnabled:r.length>0},{type:"injected",isEnabled:[...i,...s,...o].length>0},{type:"featured",isEnabled:e.length>0},{type:"custom",isEnabled:n&&n.length>0},{type:"external",isEnabled:a.length>0},{type:"recommended",isEnabled:t.length>0}].filter(w=>w.isEnabled),f=new Set(h.map(w=>w.type)),p=c.filter(w=>f.has(w)).map(w=>({type:w,isEnabled:!0})),g=h.filter(({type:w})=>!p.some(({type:b})=>b===w));return Array.from(new Set([...p,...g].map(({type:w})=>w)))},getAuthName({email:t,socialUsername:e,socialProvider:n}){return e?n&&n==="discord"&&e.endsWith("0")?e.slice(0,-1):e:t.length>30?`${t.slice(0,-3)}...`:t},async fetchProviderData(t){var e,n;try{if(t.name==="Browser Wallet"&&!dt.isMobile())return{accounts:[],chainId:void 0};if(t.id===he.CONNECTOR_ID.AUTH)return{accounts:[],chainId:void 0};const[r,s]=await Promise.all([(e=t.provider)==null?void 0:e.request({method:"eth_accounts"}),(n=t.provider)==null?void 0:n.request({method:"eth_chainId"}).then(i=>Number(i))]);return{accounts:r,chainId:s}}catch(r){return console.warn(`Failed to fetch provider data for ${t.name}`,r),{accounts:[],chainId:void 0}}}};Qu`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`;Qu`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`;Qu`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`;const US={hexStringToNumber(t){const e=t.startsWith("0x")?t.slice(2):t;return parseInt(e,16)},numberToHexString(t){return`0x${t.toString(16)}`},async getUserInfo(t){const[e,n]=await Promise.all([US.getAddresses(t),US.getChainId(t)]);return{chainId:n,addresses:e}},async getChainId(t){const e=await t.request({method:"eth_chainId"});return Number(e)},async getAddress(t){const[e]=await t.request({method:"eth_accounts"});return e},async getAddresses(t){return await t.request({method:"eth_accounts"})},async addEthereumChain(t,e){var r,s;const n=((r=e.rpcUrls.chainDefault)==null?void 0:r.http)||[];await t.request({method:"wallet_addEthereumChain",params:[{chainId:US.numberToHexString(e.id),rpcUrls:[...n],chainName:e.name,nativeCurrency:{name:e.nativeCurrency.name,decimals:e.nativeCurrency.decimals,symbol:e.nativeCurrency.symbol},blockExplorerUrls:[(s=e.blockExplorers)==null?void 0:s.default.url],iconUrls:[Fo.NetworkImageIds[e.id]]}]})}},ny={ACCOUNT_INDEXES:{PAYMENT:0,ORDINAL:1}};function b1(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}const h7=b1({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),f7=b1({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"});b1({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"});b1({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}});b1({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0});const v7e={solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]},mg={getMethodsByChainNamespace(t){return v7e[t]||[]},createDefaultNamespace(t){return{methods:this.getMethodsByChainNamespace(t),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(t,e){if(!e)return{...t};const n={...t},r=new Set;if(e.methods&&Object.keys(e.methods).forEach(s=>r.add(s)),e.chains&&Object.keys(e.chains).forEach(s=>r.add(s)),e.events&&Object.keys(e.events).forEach(s=>r.add(s)),e.rpcMap&&Object.keys(e.rpcMap).forEach(s=>{const[i]=s.split(":");i&&r.add(i)}),r.forEach(s=>{n[s]||(n[s]=this.createDefaultNamespace(s))}),e.methods&&Object.entries(e.methods).forEach(([s,i])=>{n[s]&&(n[s].methods=i)}),e.chains&&Object.entries(e.chains).forEach(([s,i])=>{n[s]&&(n[s].chains=i)}),e.events&&Object.entries(e.events).forEach(([s,i])=>{n[s]&&(n[s].events=i)}),e.rpcMap){const s=new Set;Object.entries(e.rpcMap).forEach(([i,o])=>{const[a,c]=i.split(":");!a||!c||!n[a]||(n[a].rpcMap||(n[a].rpcMap={}),s.has(a)||(n[a].rpcMap={},s.add(a)),n[a].rpcMap[c]=o)})}return n},createNamespaces(t,e){const n=t.reduce((r,s)=>{const{id:i,chainNamespace:o,rpcUrls:a}=s,c=a.default.http[0];r[o]||(r[o]=this.createDefaultNamespace(o));const l=`${o}:${i}`,u=r[o];switch(u.chains.push(l),l){case h7.caipNetworkId:u.chains.push(h7.deprecatedCaipNetworkId);break;case f7.caipNetworkId:u.chains.push(f7.deprecatedCaipNetworkId);break}return u!=null&&u.rpcMap&&c&&(u.rpcMap[i]=c),r},{});return this.applyNamespaceOverrides(n,e)},resolveReownName:async t=>{var r;const e=await MS.resolveName(t);return((r=(Object.values(e==null?void 0:e.addresses)||[])[0])==null?void 0:r.address)||!1},getChainsFromNamespaces(t={}){return Object.values(t).flatMap(e=>{const n=e.chains||[],r=e.accounts.map(s=>{const[i,o]=s.split(":");return`${i}:${o}`});return Array.from(new Set([...n,...r]))})},isSessionEventData(t){return typeof t=="object"&&t!==null&&"id"in t&&"topic"in t&&"params"in t&&typeof t.params=="object"&&t.params!==null&&"chainId"in t.params&&"event"in t.params&&typeof t.params.event=="object"&&t.params.event!==null},isOriginAllowed(t,e,n){for(const r of[...e,...n])if(r.includes("*")){const i=`^${r.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*")}$`;if(new RegExp(i,"u").test(t))return!0}else try{if(new URL(r).origin===t)return!0}catch{if(r===t)return!0}return!1},listenWcProvider({universalProvider:t,namespace:e,onConnect:n,onDisconnect:r,onAccountsChanged:s,onChainChanged:i,onDisplayUri:o}){n&&t.on("connect",()=>{const a=mg.getWalletConnectAccounts(t,e);n(a)}),r&&t.on("disconnect",()=>{r()}),s&&t.on("session_event",a=>{if(mg.isSessionEventData(a)){const{name:c,data:l}=a.params.event;if(c==="accountsChanged"&&Array.isArray(l)){const u=l.filter(d=>dt.isCaipAddress(d)).map(d=>Uh.parseCaipAddress(d)).filter(d=>d.chainNamespace===e);s(u)}}}),i&&t.on("chainChanged",a=>{i(a)}),o&&t.on("display_uri",a=>{o(a)})},getWalletConnectAccounts(t,e){var s,i,o,a;const n=new Set,r=(a=(o=(i=(s=t==null?void 0:t.session)==null?void 0:s.namespaces)==null?void 0:i[e])==null?void 0:o.accounts)==null?void 0:a.map(c=>Uh.parseCaipAddress(c)).filter(({address:c})=>n.has(c.toLowerCase())?!1:(n.add(c.toLowerCase()),!0));return r&&r.length>0?r:[]}};class E7e{constructor(e){this.namespace=e.namespace}async syncConnections(e){switch(this.namespace){case he.CHAIN.EVM:await this.syncEVMConnections(e);break;case he.CHAIN.SOLANA:await this.syncSolanaConnections(e);break;case he.CHAIN.BITCOIN:await this.syncBitcoinConnections(e);break;default:throw new Error(`Unsupported chain namespace: ${this.namespace}`)}}async syncEVMConnections({connectors:e,caipNetworks:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===he.CONNECTOR_ID.WALLET_CONNECT){const c=mg.getWalletConnectAccounts(r,this.namespace),l=n.find(u=>{var d,h;return u.chainNamespace===this.namespace&&u.id.toString()===((h=(d=c[0])==null?void 0:d.chainId)==null?void 0:h.toString())});c.length>0&&i({connectorId:a.id,accounts:c.map(u=>({address:u.address})),caipNetwork:l})}else{const{accounts:c,chainId:l}=await LS.fetchProviderData(a);if(c.length>0&&l){const u=n.find(d=>d.chainNamespace===this.namespace&&d.id.toString()===l.toString());i({connectorId:a.id,accounts:c.map(d=>({address:d})),caipNetwork:u}),a.provider&&a.id!==he.CONNECTOR_ID.AUTH&&a.id!==he.CONNECTOR_ID.WALLET_CONNECT&&o(a.id,a.provider)}}}))}async syncSolanaConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{if(a.id===he.CONNECTOR_ID.WALLET_CONNECT){const c=mg.getWalletConnectAccounts(r,this.namespace);c.length>0&&i({connectorId:a.id,accounts:c.map(l=>({address:l.address})),caipNetwork:n})}else{const c=await a.connect({chainId:n==null?void 0:n.id});c&&(i({connectorId:a.id,accounts:[{address:c}],caipNetwork:n}),o(a.id,a.provider))}}))}async syncBitcoinConnections({connectors:e,caipNetwork:n,universalProvider:r,getConnectionStatusInfo:s,onConnection:i,onListenProvider:o}){await Promise.all(e.filter(a=>{const{hasDisconnected:c,hasConnected:l}=s(a.id);return!c&&l}).map(async a=>{var h,f,p,g,w,m;if(a.id===he.CONNECTOR_ID.WALLET_CONNECT){const b=mg.getWalletConnectAccounts(r,this.namespace);b.length>0&&i({connectorId:a.id,accounts:b.map(v=>({address:v.address})),caipNetwork:n});return}const c=await a.connect(),l=await a.getAccountAddresses();let u=l==null?void 0:l.map(b=>dt.createAccount(he.CHAIN.BITCOIN,b.address,b.purpose||"payment",b.publicKey,b.path));if(u&&u.length>1&&(u=[{namespace:he.CHAIN.BITCOIN,publicKey:((h=u[ny.ACCOUNT_INDEXES.PAYMENT])==null?void 0:h.publicKey)??"",path:((f=u[ny.ACCOUNT_INDEXES.PAYMENT])==null?void 0:f.path)??"",address:((p=u[ny.ACCOUNT_INDEXES.PAYMENT])==null?void 0:p.address)??"",type:"payment"},{namespace:he.CHAIN.BITCOIN,publicKey:((g=u[ny.ACCOUNT_INDEXES.ORDINAL])==null?void 0:g.publicKey)??"",path:((w=u[ny.ACCOUNT_INDEXES.ORDINAL])==null?void 0:w.path)??"",address:((m=u[ny.ACCOUNT_INDEXES.ORDINAL])==null?void 0:m.address)??"",type:"ordinal"}]),!(a.chains.find(b=>b.id===(n==null?void 0:n.id))||a.chains[0]))throw new Error("The connector does not support any of the requested chains");c&&(o(a.id,a.provider),i({connectorId:a.id,accounts:u.map(b=>({address:b.address,type:b.type})),caipNetwork:n}))}))}getConnection({address:e,connectorId:n,connections:r,connectors:s}){if(n){const o=r.find(l=>to.isLowerCaseMatch(l.connectorId,n));if(!o)return null;const a=s.find(l=>to.isLowerCaseMatch(l.id,o.connectorId)),c=e?o.accounts.find(l=>to.isLowerCaseMatch(l.address,e)):o.accounts[0];return{...o,account:c,connector:a}}const i=r.find(o=>o.accounts.length>0&&s.some(a=>to.isLowerCaseMatch(a.id,o.connectorId)));if(i){const[o]=i.accounts,a=s.find(c=>to.isLowerCaseMatch(c.id,i.connectorId));return{...i,account:o,connector:a}}return null}}class vee{constructor({provider:e,namespace:n}){this.id=he.CONNECTOR_ID.WALLET_CONNECT,this.name=Fo.ConnectorNamesMap[he.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Fo.ConnectorImageIds[he.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=Q.getCaipNetworks.bind(Q),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=n}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const n=this.getCaipNetworks(),r=Ot.state.universalProviderConfigOverride,s=mg.createNamespaces(n,r);await this.provider.connect({optionalNamespaces:s})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map(n=>n.caipNetworkId);return Zd.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:C7e})}}const C7e=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],_7e=[he.CONNECTOR_ID.AUTH,he.CONNECTOR_ID.WALLET_CONNECT];class A7e{constructor(e){this.availableConnectors=[],this.availableConnections=[],this.providerHandlers={},this.eventListeners=new Map,this.getCaipNetworks=n=>Q.getCaipNetworks(n),this.getConnectorId=n=>st.getConnectorId(n),e&&this.construct(e),e!=null&&e.namespace&&(this.connectionManager=new E7e({namespace:e.namespace}))}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get connections(){return this.availableConnections}get networks(){return this.getCaipNetworks(this.namespace)}onAuthConnected({accounts:e,chainId:n}){const r=this.getCaipNetworks().filter(s=>s.chainNamespace===this.namespace).find(s=>s.id.toString()===(n==null?void 0:n.toString()));e&&r&&this.addConnection({connectorId:he.CONNECTOR_ID.AUTH,accounts:e,caipNetwork:r})}setAuthProvider(e){e.onConnect(this.onAuthConnected.bind(this)),e.onSocialConnected(this.onAuthConnected.bind(this)),this.addConnector({id:he.CONNECTOR_ID.AUTH,type:"AUTH",name:he.CONNECTOR_NAMES.AUTH,provider:e,imageId:Fo.ConnectorImageIds[he.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const n=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter(r=>n.has(r.id)?!1:(n.add(r.id),!0)),this.emit("connectors",this.availableConnectors)}addConnection(...e){const n=new Set;this.availableConnections=[...e,...this.availableConnections].filter(r=>n.has(r.connectorId.toLowerCase())?!1:(n.add(r.connectorId.toLowerCase()),!0)),this.emit("connections",this.availableConnections)}deleteConnection(e){this.availableConnections=this.availableConnections.filter(n=>!to.isLowerCaseMatch(n.connectorId,e)),this.emit("connections",this.availableConnections)}clearConnections(e=!1){this.availableConnections=[],e&&this.emit("connections",this.availableConnections)}setStatus(e,n){vn.setStatus(e,n)}on(e,n){var r;this.eventListeners.has(e)||this.eventListeners.set(e,new Set),(r=this.eventListeners.get(e))==null||r.add(n)}off(e,n){const r=this.eventListeners.get(e);r&&r.delete(n)}removeAllEventListeners(){this.eventListeners.forEach(e=>{e.clear()})}emit(e,n){const r=this.eventListeners.get(e);r&&r.forEach(s=>s(n))}async connectWalletConnect(e){return{clientId:(await this.getWalletConnectConnector().connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:n,providerType:r}=e;if(!e.provider)return;const s="provider"in e.provider?e.provider.provider:e.provider;if(r==="WALLET_CONNECT"){s.setDefaultChain(n.caipNetworkId);return}if(s&&r==="AUTH"){const i=s,o=Gl(n.chainNamespace);await i.switchNetwork({chainId:n.caipNetworkId});const a=await i.getUser({chainId:n.caipNetworkId,preferredAccountType:o});this.emit("switchNetwork",a)}}getWalletConnectConnector(){const e=this.connectors.find(n=>n instanceof vee);if(!e)throw new Error("WalletConnectConnector not found");return e}onConnect(e,n){if(e.length>0){const{address:r,chainId:s}=dt.getAccount(e[0]),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===(s==null?void 0:s.toString())),o=this.connectors.find(a=>a.id===n);r&&(this.emit("accountChanged",{address:r,chainId:s,connector:o}),this.addConnection({connectorId:n,accounts:e.map(a=>{const{address:c}=dt.getAccount(a);return{address:c}}),caipNetwork:i}))}}onAccountsChanged(e,n,r=!0){var s,i;if(e.length>0){const{address:o}=dt.getAccount(e[0]),a=(s=this.connectionManager)==null?void 0:s.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors});o&&to.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),n)&&this.emit("accountChanged",{address:o,chainId:(i=a==null?void 0:a.caipNetwork)==null?void 0:i.id,connector:a==null?void 0:a.connector}),this.addConnection({connectorId:n,accounts:e.map(c=>{const{address:l}=dt.getAccount(c);return{address:l}}),caipNetwork:a==null?void 0:a.caipNetwork})}else r&&this.onDisconnect(n)}onDisconnect(e){this.removeProviderListeners(e),this.deleteConnection(e),to.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),e)&&this.emitFirstAvailableConnection(),this.connections.length===0&&this.emit("disconnect")}onChainChanged(e,n){var o;const r=typeof e=="string"&&e.startsWith("0x")?US.hexStringToNumber(e).toString():e.toString(),s=(o=this.connectionManager)==null?void 0:o.getConnection({connectorId:n,connections:this.connections,connectors:this.connectors}),i=this.getCaipNetworks().filter(a=>a.chainNamespace===this.namespace).find(a=>a.id.toString()===r);s&&this.addConnection({connectorId:n,accounts:s.accounts,caipNetwork:i}),to.isLowerCaseMatch(this.getConnectorId(he.CHAIN.EVM),n)&&this.emit("switchNetwork",{chainId:r})}listenProviderEvents(e,n){if(_7e.includes(e))return;const r=o=>this.onAccountsChanged(o,e),s=o=>this.onChainChanged(o,e),i=()=>this.onDisconnect(e);this.providerHandlers[e]||(n.on("disconnect",i),n.on("accountsChanged",r),n.on("chainChanged",s),this.providerHandlers[e]={provider:n,disconnect:i,accountsChanged:r,chainChanged:s})}removeProviderListeners(e){if(this.providerHandlers[e]){const{provider:n,disconnect:r,accountsChanged:s,chainChanged:i}=this.providerHandlers[e];n.removeListener("disconnect",r),n.removeListener("accountsChanged",s),n.removeListener("chainChanged",i),this.providerHandlers[e]=null}}emitFirstAvailableConnection(){var n,r;const e=(n=this.connectionManager)==null?void 0:n.getConnection({connections:this.connections,connectors:this.connectors});if(e){const[s]=e.accounts;this.emit("accountChanged",{address:s==null?void 0:s.address,chainId:(r=e.caipNetwork)==null?void 0:r.id,connector:e.connector})}}}function S7e(t){let e=[],n,r;function s(a){return AI.parseEvmChainId(a)||1}function i(){var a;return n||(n=Xy.getInstance({projectId:t.options.projectId,chainId:(a=Q.getActiveCaipNetwork())==null?void 0:a.caipNetworkId,enableLogger:t.options.enableAuthLogger,onTimeout:c=>{c==="iframe_load_failed"?np.open(Bd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):c==="iframe_request_timeout"?np.open(Bd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):c==="unverified_domain"&&np.open(Bd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},abortController:Bd.EmbeddedWalletAbortController,getActiveCaipNetwork:c=>Q.getActiveCaipNetwork(c)})),n}async function o(a={}){var g;const c=i();let l=a.chainId;if(a.isReconnecting){const w=AI.parseEvmChainId(c.getLastUsedChainId()||""),m=(g=t.chains)==null?void 0:g[0].id;if(l=w||m,!l)throw new Error("ChainId not found in provider")}const u=Gl("eip155"),{address:d,chainId:h,accounts:f}=await Zd.authConnectorAuthenticate({authConnector:c,chainId:l,preferredAccountType:u,socialUri:a.socialUri,chainNamespace:he.CHAIN.EVM});e=(f==null?void 0:f.map(w=>w.address))||[d];const p=s(h);return{accounts:e,account:d,chainId:p,chain:{id:p,unsuported:!1}}}return a=>({id:he.CONNECTOR_ID.AUTH,name:he.CONNECTOR_NAMES.AUTH,type:"AUTH",chain:he.CHAIN.EVM,async connect(c={}){if(r)return r;r||(r=new Promise(u=>{u(o(c))}));const l=await r;return r=void 0,l},async disconnect(){await(await this.getProvider()).disconnect()},getAccounts(){return e!=null&&e.length?(a.emitter.emit("change",{accounts:e}),Promise.resolve(e)):Promise.resolve([])},async getProvider(){var c;return this.provider||(this.provider=Xy.getInstance({projectId:t.options.projectId,chainId:(c=Q.getActiveCaipNetwork())==null?void 0:c.caipNetworkId,enableLogger:t.options.enableAuthLogger,abortController:Bd.EmbeddedWalletAbortController,onTimeout:l=>{l==="iframe_load_failed"?np.open(Bd.ALERT_ERRORS.IFRAME_LOAD_FAILED,"error"):l==="iframe_request_timeout"?np.open(Bd.ALERT_ERRORS.IFRAME_REQUEST_TIMEOUT,"error"):l==="unverified_domain"&&np.open(Bd.ALERT_ERRORS.UNVERIFIED_DOMAIN,"error")},getActiveCaipNetwork:l=>Q.getActiveCaipNetwork(l)})),Promise.resolve(this.provider)},async getChainId(){const c=await this.getProvider(),{chainId:l}=await c.getChainId();return s(l)},async isAuthorized(){const l=Q.state.activeChain===he.CHAIN.EVM;if(he.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(h=>st.getConnectorId(h)===he.CONNECTOR_ID.AUTH)&&!l)return!1;const d=await this.getProvider();return Promise.resolve(d.getLoginEmailUsed())},async switchChain({chainId:c}){var l;try{const u=a.chains.find(p=>p.id===c);if(!u)throw new $l(new Error("chain not found on connector."));const d=await this.getProvider(),h=Gl("eip155"),f=await d.connect({chainId:c,preferredAccountType:h});return e=((l=f==null?void 0:f.accounts)==null?void 0:l.map(p=>p.address))||[f.address],a.emitter.emit("change",{chainId:Number(c),accounts:e}),u}catch(u){throw u instanceof Error?new $l(u):u}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(Wu)})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){await(await this.getProvider()).disconnect()}})}GU.type="walletConnect";function GU(t,e){const n=t.isNewChainsStale??!0;let r,s,i,o,a,c,l;return u=>({id:"walletConnect",name:"WalletConnect",type:GU.type,async setup(){const d=await this.getProvider().catch(()=>null);d&&(o||(o=this.onConnect.bind(this),d.on("connect",o)),c||(c=this.onSessionDelete.bind(this),d.on("session_delete",c)))},async connect({...d}={}){var h,f,p;try{const g=Q.getCaipNetworks(),w=await this.getProvider();if(!w)throw new Jd;a||(a=this.onDisplayUri,w.on("display_uri",a));const m=await this.isChainsStale();w.session&&m&&await w.disconnect();const b=Ot.state.universalProviderConfigOverride;if(!w.session||m){const S=mg.createNamespaces(g,b);await w.connect({optionalNamespaces:S,..."pairingTopic"in d?{pairingTopic:d.pairingTopic}:{}}),this.setRequestedChainsIds(g.map(D=>Number(D.id)))}const v=await this.getAccounts(),A=await this.getChainId(),C=(p=(f=(h=w.session)==null?void 0:h.namespaces)==null?void 0:f.eip155)==null?void 0:p.chains,T=C==null?void 0:C.some(S=>Number(S.split(":")[1])===A);let x=1;T?x=A:C!=null&&C[0]&&(x=Number(C[0].split(":")[1])),a&&(w.removeListener("display_uri",a),a=void 0),o&&(w.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),w.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),w.on("chainChanged",i)),l||(l=this.onDisconnect.bind(this),w.on("disconnect",l)),c||(c=this.onSessionDelete.bind(this),w.on("session_delete",c));const N=b==null?void 0:b.defaultChain;return w.setDefaultChain(N??`eip155:${x}`),{accounts:v,chainId:x}}catch(g){throw/(user rejected|connection request reset)/i.test(g==null?void 0:g.message)?new Hr(g):g}},async disconnect(){const d=await this.getProvider();try{await(d==null?void 0:d.disconnect())}catch(h){if(!/No matching key/i.test(h.message))throw h}finally{i&&(d==null||d.removeListener("chainChanged",i),i=void 0),l&&(d==null||d.removeListener("disconnect",l),l=void 0),o||(o=this.onConnect.bind(this),d==null||d.on("connect",o)),s&&(d==null||d.removeListener("accountsChanged",s),s=void 0),c&&(d==null||d.removeListener("session_delete",c),c=void 0),this.setRequestedChainsIds([])}},async getAccounts(){var w,m,b;const d=await this.getProvider();if(!((w=d==null?void 0:d.session)!=null&&w.namespaces))return[];const h=(b=(m=d==null?void 0:d.session)==null?void 0:m.namespaces[he.CHAIN.EVM])==null?void 0:b.accounts,f=(h==null?void 0:h.map(v=>v.split(":")[2]))??[],p=new Set;return f.filter(v=>{const A=v==null?void 0:v.toLowerCase();return p.has(A)?!1:(p.add(A),!0)})},async getProvider({chainId:d}={}){var p,g;r||(r=await e.getUniversalProvider(),r==null||r.events.setMaxListeners(Number.POSITIVE_INFINITY));const h=Ze.getActiveNamespace(),f=(p=e.getCaipNetwork())==null?void 0:p.id;if(d&&f!==d&&h){const w=Ze.getStoredActiveCaipNetworkId(),m=h?e.getCaipNetworks(h):[],b=m==null?void 0:m.find(v=>v.id===w);b&&b.chainNamespace===he.CHAIN.EVM&&await((g=this.switchChain)==null?void 0:g.call(this,{chainId:Number(b.id)}))}return r},async getChainId(){var g,w,m,b;const d=(g=e.getCaipNetwork(he.CHAIN.EVM))==null?void 0:g.id;if(d)return d;const f=(b=(m=(w=(await this.getProvider()).session)==null?void 0:w.namespaces[he.CHAIN.EVM])==null?void 0:m.chains)==null?void 0:b[0],p=Q.getCaipNetworks().find(v=>v.id===f);return p==null?void 0:p.id},async isAuthorized(){try{const[d,h]=await Promise.all([this.getAccounts(),this.getProvider()]);return d.length?await this.isChainsStale()&&h.session?(await h.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:d,chainId:h}){var g,w,m,b;const f=await this.getProvider();if(!f)throw new Jd;const p=Q.getCaipNetworks().find(v=>v.id===h);if(!p)throw new $l(new qC);try{await f.request({method:"wallet_switchEthereumChain",params:[{chainId:et(h)}]}),p!=null&&p.caipNetworkId&&f.setDefaultChain(p==null?void 0:p.caipNetworkId),u.emitter.emit("change",{chainId:Number(h)});const v=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...v,h]),{...p,id:p.id}}catch(v){const A=v;if(/(?:user rejected)/iu.test(A.message))throw new Hr(A);try{let C;d!=null&&d.blockExplorerUrls?C=d.blockExplorerUrls:C=(g=p.blockExplorers)!=null&&g.default.url?[(w=p.blockExplorers)==null?void 0:w.default.url]:[];const T=((b=(m=p.rpcUrls)==null?void 0:m.chainDefault)==null?void 0:b.http)||[],x={blockExplorerUrls:C,chainId:et(h),chainName:p.name,iconUrls:d==null?void 0:d.iconUrls,nativeCurrency:p.nativeCurrency,rpcUrls:T};await f.request({method:"wallet_addEthereumChain",params:[x]});const N=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...N,h]),{...p,id:p.id}}catch(C){throw new Hr(C)}}},onAccountsChanged(d){d.length===0?this.onDisconnect():u.emitter.emit("change",{accounts:d.map(h=>Wu(h))})},onChainChanged(d){const h=Number(d);u.emitter.emit("change",{chainId:h})},onConnect(d){this.setRequestedChainsIds(Q.getCaipNetworks().map(h=>Number(h.id)))},async onDisconnect(d){this.setRequestedChainsIds([]),u.emitter.emit("disconnect");const h=await this.getProvider();s&&(h.removeListener("accountsChanged",s),s=void 0),i&&(h.removeListener("chainChanged",i),i=void 0),l&&(h.removeListener("disconnect",l),l=void 0),c&&(h.removeListener("session_delete",c),c=void 0),o||(o=this.onConnect.bind(this),h.on("connect",o))},onDisplayUri(d){u.emitter.emit("message",{type:"display_uri",data:d})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){var f,p,g;if(!((f=r==null?void 0:r.session)!=null&&f.namespaces))return[];const d=(g=(p=r==null?void 0:r.session)==null?void 0:p.namespaces[he.CHAIN.EVM])==null?void 0:g.accounts;return(d==null?void 0:d.map(w=>Number.parseInt(w.split(":")[1]??"")))??[]},async getRequestedChainsIds(){var h;const d=await((h=u.storage)==null?void 0:h.getItem(this.requestedChainsStorageKey))??[];return[...new Set(d)]},async isChainsStale(){if(!n)return!1;const d=u.chains.map(p=>p.id),h=this.getNamespaceChainsIds();if(h.length&&!h.some(p=>d.includes(p)))return!1;const f=await this.getRequestedChainsIds();return!d.every(p=>f.includes(Number(p)))},async setRequestedChainsIds(d){var h;await((h=u.storage)==null?void 0:h.setItem(this.requestedChainsStorageKey,d))},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const pv=cr({pendingTransactions:0}),p7={state:pv,subscribeKey(t,e){return Ri(pv,t,e)},increase(t){pv[t]+=1},decrease(t){pv[t]-=1},reset(t){pv[t]=0}};function x7e(t){try{return JSON.parse(t)}catch{throw new Error("Error parsing wallet capabilities")}}async function I7e(t){if(dt.isSafeApp()){const{safe:e}=await Js(async()=>{const{safe:n}=await import("./index-DCJXX1Bj.js");return{safe:n}},[]);if(e&&!t.some(n=>n.type==="safe"))return e()}return null}async function N7e(t){try{const{coinbaseWallet:e}=await Js(async()=>{const{coinbaseWallet:n}=await import("./index-DCJXX1Bj.js");return{coinbaseWallet:n}},[]);if(e&&!t.some(n=>n.id==="coinbaseWalletSDK"))return e()}catch(e){console.error("Failed to import Coinbase Wallet SDK:",e)}return null}const T7e={enable:!1,pollingInterval:3e4};class R7e extends A7e{constructor(e){const n=kv.extendCaipNetworks(e.networks,{projectId:e.projectId,customNetworkImageUrls:{},customRpcUrls:e.customRpcUrls});super(),this.balancePromises={},this.namespace=he.CHAIN.EVM,this.adapterType=he.ADAPTER_TYPES.WAGMI,this.projectId=e.projectId,this.pendingTransactionsFilter={...T7e,...e.pendingTransactionsFilter??{}},this.createConfig({...e,networks:n}),this.checkChainId()}construct(e){this.checkChainId(),this.setupWatchers()}async getAccounts(e){const n=this.getWagmiConnector(e.id);if(!n)return{accounts:[]};if(n.id===he.CONNECTOR_ID.AUTH){const i=await n.getProvider();if(!(i!=null&&i.user))return{accounts:[]};const{address:o,accounts:a}=i.user;return Promise.resolve({accounts:(a||[{address:o,type:"eoa"}]).map(c=>dt.createAccount("eip155",c.address,c.type))})}const{addresses:r,address:s}=Jy(this.wagmiConfig);return Promise.resolve({accounts:[...new Set(r||[s])].map(i=>dt.createAccount("eip155",i||"","eoa"))})}checkChainId(){const{chainId:e}=Jy(this.wagmiConfig);e&&this.emit("switchNetwork",{chainId:e})}getWagmiConnector(e){return this.wagmiConfig.connectors.find(n=>n.id===e)}createConfig(e){this.wagmiChains=e.networks.filter(s=>s.chainNamespace===he.CHAIN.EVM);const n={},r=[...e.connectors??[]];this.wagmiChains.forEach(s=>{var a,c;const i=(a=e.transports)==null?void 0:a[s.id],o=kv.getCaipNetworkId(s);i?n[s.id]=kv.extendWagmiTransports(s,e.projectId,i):n[s.id]=kv.getViemTransport(s,e.projectId,(c=e.customRpcUrls)==null?void 0:c[o])}),this.wagmiConfig=ZX({...e,chains:this.wagmiChains,connectors:r,transports:n})}setupWatchPendingTransactions(){if(!this.pendingTransactionsFilter.enable||this.unwatchPendingTransactions)return;this.unwatchPendingTransactions=Y8e(this.wagmiConfig,{pollingInterval:this.pendingTransactionsFilter.pollingInterval,onError:()=>{},onTransactions:()=>{this.emit("pendingTransactions"),p7.increase("pendingTransactions")}});const e=p7.subscribeKey("pendingTransactions",n=>{var r;n>=he.LIMITS.PENDING_TRANSACTIONS&&((r=this.unwatchPendingTransactions)==null||r.call(this),e())})}setupWatchers(){GX(this.wagmiConfig,{onChange:(e,n)=>{var r;if(e.status==="disconnected"&&n.address&&this.emit("disconnect"),e!=null&&e.chainId&&(e==null?void 0:e.chainId)!==(n==null?void 0:n.chainId)&&this.emit("switchNetwork",{chainId:e.chainId}),e.status==="connected"){const s=e.address!==(n==null?void 0:n.address),i=e.connector.id!==((r=n.connector)==null?void 0:r.id),o=n.status!=="connected";(s||i||o)&&(this.setupWatchPendingTransactions(),this.handleAccountChanged({address:e.address,chainId:e.chainId,connector:e.connector}))}}}),qX(this.wagmiConfig,{onChange:e=>{this.clearConnections(),this.addConnection(...e.map(n=>{const r=this.getCaipNetworks().find(i=>i.id===n.chainId),s=n.connector.id===he.CONNECTOR_ID.AUTH;return{accounts:n.accounts.map(i=>({address:i})),caipNetwork:r,connectorId:n.connector.id,auth:s?{name:Ze.getConnectedSocialProvider(),username:Ze.getConnectedSocialUsername()}:void 0}}))}})}async addThirdPartyConnectors(e){const n=[];if(e.enableCoinbase!==!1){const s=await N7e(this.wagmiConfig.connectors);s&&n.push(s)}const r=await I7e(this.wagmiConfig.connectors);r&&n.push(r),await Promise.all(n.map(s=>{const i=this.wagmiConfig._internal.connectors.setup(s);return this.wagmiConfig._internal.connectors.setState(o=>[...o,i]),this.addWagmiConnector(i,e)}))}addWagmiConnectors(e,n){var o,a,c,l;const r=[];e.enableWalletConnect!==!1&&r.push(GU(e,n)),e.enableEIP6963!==!1&&r.push(RT({shimDisconnect:!0}));const s=((o=n==null?void 0:n.remoteFeatures)==null?void 0:o.email)??!0,i=Array.isArray((a=n==null?void 0:n.remoteFeatures)==null?void 0:a.socials)&&((l=(c=n==null?void 0:n.remoteFeatures)==null?void 0:c.socials)==null?void 0:l.length)>0;(s||i)&&r.push(S7e({chains:this.wagmiChains,options:{projectId:e.projectId,enableAuthLogger:e.enableAuthLogger}})),r.forEach(u=>{const d=this.wagmiConfig._internal.connectors.setup(u);this.wagmiConfig._internal.connectors.setState(h=>[...h,d])})}async handleAccountChanged({address:e,chainId:n,connector:r}){if(!this.namespace)throw new Error("WagmiAdapter:handleAccountChanged - namespace is required");const s=await r.getProvider().catch(()=>{});this.emit("accountChanged",{address:e,chainId:n,connector:{id:r.id,name:Fo.ConnectorNamesMap[r.id]??r.name,imageId:Fo.ConnectorImageIds[r.id],type:Fo.ConnectorTypesMap[r.type]??"EXTERNAL",info:r.id===he.CONNECTOR_ID.INJECTED?void 0:{rdns:r.id},provider:s,chain:this.namespace,chains:[]}})}async signMessage(e){try{return{signature:await q8e(this.wagmiConfig,{message:e.message,account:e.address})}}catch{throw new Error("WagmiAdapter:signMessage - Sign message failed")}}async sendTransaction(e){const{chainId:n,address:r}=Jy(this.wagmiConfig),s={account:r,to:e.to,value:Number.isNaN(Number(e.value))?BigInt(0):BigInt(e.value),gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,data:e.data,chainId:n,type:"legacy",parameters:["nonce"]};await H8e(this.wagmiConfig,s);const i=await G8e(this.wagmiConfig,s);return await KX(this.wagmiConfig,{hash:i,timeout:25e3}),{hash:i}}async writeContract(e){var o;const{caipNetwork:n,...r}=e,s=Number(AI.caipNetworkIdToNumber(n.caipNetworkId));return{hash:await YX(this.wagmiConfig,{chain:(o=this.wagmiChains)==null?void 0:o[s],chainId:s,address:r.tokenAddress,account:r.fromAddress,abi:r.abi,functionName:r.method,args:r.args,__mode:"prepared"})}}async estimateGas(e){try{return{gas:await B8e(this.wagmiConfig,{account:e.address,to:e.to,data:e.data,type:"legacy"})}}catch{throw new Error("WagmiAdapter:estimateGas - error estimating gas")}}parseUnits(e){return KEe(e.value,e.decimals)}formatUnits(e){return am(e.value,e.decimals)}async addWagmiConnector(e,n){var s;if(!this.namespace)throw new Error("WagmiAdapter:addWagmiConnector - namespace is required");if(e.type===he.CONNECTOR_ID.INJECTED&&n.enableEIP6963===!1||e.id===he.CONNECTOR_ID.AUTH||e.id===he.CONNECTOR_ID.WALLET_CONNECT)return;const r=await e.getProvider().catch(()=>{});this.addConnector({id:e.id,explorerId:Fo.ConnectorExplorerIds[e.id],imageUrl:((s=n==null?void 0:n.connectorImages)==null?void 0:s[e.id])??e.icon,name:Fo.ConnectorNamesMap[e.id]??e.name,imageId:Fo.ConnectorImageIds[e.id],type:Fo.ConnectorTypesMap[e.type]??"EXTERNAL",info:e.id===he.CONNECTOR_ID.INJECTED?void 0:{rdns:e.id},provider:r,chain:this.namespace,chains:[]})}async syncConnectors(e,n){VX(this.wagmiConfig,{onChange:r=>{r.forEach(s=>this.addWagmiConnector(s,e))}}),this.addWagmiConnectors(e,n),await Promise.all(this.wagmiConfig.connectors.map(r=>this.addWagmiConnector(r,e))),this.addThirdPartyConnectors(e)}async syncConnections(){return Promise.resolve()}async syncConnection(e){var l,u;const{id:n,chainId:r}=e,i=sc(this.wagmiConfig).find(d=>d.connector.id===n),o=this.getWagmiConnector(n),a=await(o==null?void 0:o.getProvider());if(dt.isSafeApp()&&n===he.CONNECTOR_ID.SAFE&&!(i!=null&&i.accounts.length)){const d=this.getWagmiConnector("safe");if(d){const h=await OS(this.wagmiConfig,{connector:d,chainId:Number(r)}),f=await d.getProvider();return{chainId:Number(r),address:h.accounts[0],provider:f,type:(l=i==null?void 0:i.connector.type)==null?void 0:l.toUpperCase(),id:i==null?void 0:i.connector.id}}}return{chainId:Number(i==null?void 0:i.chainId),address:i==null?void 0:i.accounts[0],provider:a,type:(u=i==null?void 0:i.connector.type)==null?void 0:u.toUpperCase(),id:i==null?void 0:i.connector.id}}async connectWalletConnect(e){const n=this.getWalletConnectConnector();await n.authenticate();const r=this.getWagmiConnector("walletConnect");if(!r)throw new Error("UniversalAdapter:connectWalletConnect - connector not found");const s=await OS(this.wagmiConfig,{connector:r,chainId:e?Number(e):void 0});return s.chainId!==Number(e)&&await O3(this.wagmiConfig,{chainId:s.chainId}),{clientId:await n.provider.client.core.crypto.getClientId()}}async connect(e){var h,f,p,g,w;const{id:n,address:r,provider:s,type:i,info:o,chainId:a,socialUri:c}=e,l=this.getWagmiConnector(n);if(!l)throw new Error("connectionControllerClient:connectExternal - connector is undefined");s&&o&&l.id===he.CONNECTOR_ID.EIP6963&&((h=l.setEip6963Wallet)==null||h.call(l,{provider:s,info:o}));const u=(p=(f=this.wagmiConfig.state)==null?void 0:f.connections)==null?void 0:p.get(l.uid);if(u){await((g=this.wagmiConfig.storage)==null?void 0:g.setItem("recentConnectorId",l.id));const m=[...u.accounts].sort((b,v)=>to.isLowerCaseMatch(b,r)?-1:to.isLowerCaseMatch(v,r)?1:0);return(w=this.wagmiConfig)==null||w.setState(b=>({...b,connections:new Map(b.connections).set(l.uid,{accounts:m,chainId:u.chainId,connector:u.connector}),current:l.uid,status:"connected"})),{address:m[0],chainId:u.chainId,provider:s,type:i,id:n}}const d=await OS(this.wagmiConfig,{connector:l,chainId:a?Number(a):void 0,socialUri:c});return{address:d.accounts[0],chainId:d.chainId,provider:s,type:i,id:n}}get connections(){return Array.from(this.wagmiConfig.state.connections.values()).map(e=>({accounts:e.accounts.map(n=>({address:n})),connectorId:e.connector.id}))}async reconnect(e){const{id:n}=e,r=this.getWagmiConnector(n);if(!r)throw new Error("connectionControllerClient:connectExternal - connector is undefined");await P3(this.wagmiConfig,{connectors:[r]})}async getBalance(e){const n=e.address,r=this.getCaipNetworks().find(s=>s.id===e.chainId);if(!n)return Promise.resolve({balance:"0.00",symbol:"ETH"});if(r&&this.wagmiConfig){const s=`${r.caipNetworkId}:${e.address}`,i=this.balancePromises[s];if(i)return i;const o=Ze.getNativeBalanceCacheForCaipAddress(s);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[s]=new Promise(async a=>{var c,l;try{const u=Number(e.chainId),d=await HX(this.wagmiConfig,{address:e.address,chainId:u,token:(l=(c=e.tokens)==null?void 0:c[r.caipNetworkId])==null?void 0:l.address});Ze.updateNativeBalanceCache({caipAddress:s,balance:d.formatted,symbol:d.symbol,timestamp:Date.now()}),a({balance:d.formatted,symbol:d.symbol})}catch(u){console.warn("Appkit:WagmiAdapter:getBalance - Error getting balance",u),a({balance:"0.00",symbol:"ETH"})}}).finally(()=>{delete this.balancePromises[s]}),this.balancePromises[s]||{balance:"0.00",symbol:"ETH"})}return{balance:"",symbol:""}}getWalletConnectProvider(){var e;return(e=this.getWagmiConnector("walletConnect"))==null?void 0:e.provider}async disconnect(e){if(e.id){const n=this.getWagmiConnector(e.id),s=sc(this.wagmiConfig).find(i=>to.isLowerCaseMatch(i.connector.id,e.id));return await T3(this.wagmiConfig,{connector:n}),Ot.state.enableReconnect===!1&&this.deleteConnection(e.id),s?{connections:[{accounts:s.accounts.map(i=>({address:i})),connectorId:s.connector.id}]}:{connections:[]}}return this.disconnectAll()}async disconnectAll(){const e=sc(this.wagmiConfig),n=await Promise.allSettled(e.map(async r=>{const s=this.getWagmiConnector(r.connector.id);return s&&await T3(this.wagmiConfig,{connector:s}),r}));return this.wagmiConfig.state.connections.clear(),{connections:n.filter(r=>r.status==="fulfilled").map(({value:r})=>({accounts:r.accounts.map(s=>({address:s})),connectorId:r.connector.id}))}}async switchNetwork(e){var s,i,o,a,c,l,u,d,h,f;const{caipNetwork:n}=e,r=this.wagmiConfig.chains.find(p=>p.id.toString()===n.id.toString());await O3(this.wagmiConfig,{chainId:n.id,addEthereumChainParameter:{chainName:(r==null?void 0:r.name)??n.name,nativeCurrency:(r==null?void 0:r.nativeCurrency)??n.nativeCurrency,rpcUrls:[((o=(i=(s=n.rpcUrls)==null?void 0:s.chainDefault)==null?void 0:i.http)==null?void 0:o[0])??((l=(c=(a=r==null?void 0:r.rpcUrls)==null?void 0:a.default)==null?void 0:c.http)==null?void 0:l[0])??""],blockExplorerUrls:[((d=(u=r==null?void 0:r.blockExplorers)==null?void 0:u.default)==null?void 0:d.url)??((f=(h=n.blockExplorers)==null?void 0:h.default)==null?void 0:f.url)??""]}}),await super.switchNetwork(e)}async getCapabilities(e){var a,c;if(!this.wagmiConfig)throw new Error("connectionControllerClient:getCapabilities - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:getCapabilities - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:getCapabilities - provider is undefined");const o=(c=(a=i.session)==null?void 0:a.sessionProperties)==null?void 0:c.capabilities;if(o){const u=x7e(o)[e];if(u)return u}return await i.request({method:"wallet_getCapabilities",params:[e]})}async grantPermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:grantPermissions - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:grantPermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:grantPermissions - provider is undefined");return i.request({method:"wallet_grantPermissions",params:e})}async revokePermissions(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:revokePermissions - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:revokePermissions - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:revokePermissions - provider is undefined");return i.request({method:"wallet_revokePermissions",params:e})}async walletGetAssets(e){if(!this.wagmiConfig)throw new Error("connectionControllerClient:walletGetAssets - wagmiConfig is undefined");const r=sc(this.wagmiConfig)[0],s=r?this.getWagmiConnector(r.connector.id):null;if(!s)throw new Error("connectionControllerClient:walletGetAssets - connector is undefined");const i=await s.getProvider();if(!i)throw new Error("connectionControllerClient:walletGetAssets - provider is undefined");return i.request({method:"wallet_getAssets",params:[e]})}setAuthProvider(e){if(!this.namespace)throw new Error("WagmiAdapter:setAuthProvider - namespace is required");this.addConnector({id:he.CONNECTOR_ID.AUTH,type:"AUTH",name:he.CONNECTOR_NAMES.AUTH,provider:e,imageId:Fo.ConnectorImageIds[he.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}async setUniversalProvider(e){return e.on("connect",()=>{const n=sc(this.wagmiConfig),r=this.getWagmiConnector("walletConnect");if(r&&!n.find(s=>s.connector.id===r.id)){if(Q.state.activeChain==="eip155")return;P3(this.wagmiConfig,{connectors:[r]})}}),this.addConnector(new vee({provider:e,caipNetworks:this.getCaipNetworks(),namespace:"eip155"})),Promise.resolve()}}const Eee="7c65f27254d6ddd24cf7eedf2685c4fb",P7e={name:"Lawb.xyz",description:"Windows 98-style NFT site",url:"https://lawb.xyz",icons:["/assets/favicon.ico"]},O7e=new R7e({projectId:Eee,networks:[gI,pI,mI,SX,yI,EI,CI],pendingTransactionsFilter:{enable:!0,pollingInterval:1e3}});C6e({projectId:Eee,metadata:P7e,adapters:[O7e],networks:[gI,pI,mI,SX,yI,EI,CI],features:{analytics:!0}});const qU=()=>{if(!ux)throw new Error("[FIREBASE] Database not initialized");return ux},qg=t=>!t||t.length<10?t:`${t.slice(0,6)}...${t.slice(-4)}`,xI=async(t,e)=>{try{if(!t)return console.error("[LEADERBOARD] No wallet address provided"),!1;if(t==="0x0000000000000000000000000000000000000000")return console.warn("[LEADERBOARD] Skipping leaderboard update for zero address"),!1;const n=new Date().toISOString(),r=qU(),s=Oo(r,`leaderboard/${t}`),i=await ip(s),o=i.exists()?i.val():null,a=e==="win"?3:e==="draw"?1:0,c={username:t,chain_type:"sanko",wins:((o==null?void 0:o.wins)||0)+(e==="win"?1:0),losses:((o==null?void 0:o.losses)||0)+(e==="loss"?1:0),draws:((o==null?void 0:o.draws)||0)+(e==="draw"?1:0),total_games:((o==null?void 0:o.total_games)||0)+1,points:((o==null?void 0:o.points)||0)+a,created_at:(o==null?void 0:o.created_at)||n,updated_at:n};return await Gv(s,c),console.log("[LEADERBOARD] Successfully updated entry for:",qg(t),"Result:",e),!0}catch(n){return console.error("[LEADERBOARD] Error updating leaderboard entry:",n),!1}},k7e=async(t,e,n)=>{try{return!e||!n?(console.error("[LEADERBOARD] Missing player addresses"),!1):e==="0x0000000000000000000000000000000000000000"||n==="0x0000000000000000000000000000000000000000"?(console.warn("[LEADERBOARD] Skipping leaderboard update - one or both players have zero addresses:",{bluePlayer:e,redPlayer:n}),!1):(console.log("[LEADERBOARD] Updating both players scores:",{winner:t,bluePlayer:qg(e),redPlayer:qg(n)}),await xI(e,t==="blue"?"win":t==="red"?"loss":"draw"),await xI(n,t==="red"?"win":t==="blue"?"loss":"draw"),console.log("[LEADERBOARD] Successfully updated both players scores"),!0)}catch(r){return console.error("[LEADERBOARD] Error updating both players scores:",r),!1}},Cee=async(t=20)=>{try{const e=qU(),n=Oo(e,"leaderboard"),r=await ip(n);if(!r.exists())return[];const s=[];return r.forEach(i=>{const o=i.val();o&&s.push(o)}),s.sort((i,o)=>o.points!==i.points?o.points-i.points:o.wins!==i.wins?o.wins-i.wins:i.total_games-o.total_games),s.slice(0,t)}catch(e){return console.error("[LEADERBOARD] Error getting top entries:",e),[]}},_ee=async()=>{try{const t=qU(),e=Oo(t,"leaderboard/0x0000000000000000000000000000000000000000");return await MH(e),console.log("[LEADERBOARD] Removed zero address entry from leaderboard"),!0}catch(t){return console.error("[LEADERBOARD] Error removing zero address entry:",t),!1}},Qc=()=>{if(!ux)throw new Error("[FIREBASE] Database not initialized");return ux},ss={async getGame(t){try{const e=Qc(),n=Oo(e,`chess_games/${t}`),r=await ip(n);return r.exists()?r.val():null}catch(e){return console.error("[FIREBASE] Error getting game:",e),null}},async updateGame(t,e){if(!t)throw console.error("[FIREBASE] Tried to update game with undefined inviteCode!",e),new Error("inviteCode is required for updateGame");try{const n=Qc(),r=Oo(n,`chess_games/${t}`);await Gv(r,{...e,updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game updated successfully")}catch(n){console.error("[FIREBASE] Error updating game:",n)}},subscribeToGame(t,e){try{const n=Qc(),r=Oo(n,`chess_games/${t}`);console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",t);const s=C$(r,i=>{if(i.exists()){const o=i.val();console.log("[FIREBASE] Game update received:",o),e(o)}});return console.log("[FIREBASE] Firebase subscription setup complete for game:",t),s}catch(n){return console.error("[FIREBASE] Error subscribing to game:",n),()=>{}}},async createGame(t){const e=t.invite_code;if(!e)throw console.error("[FIREBASE] Tried to create game with undefined inviteCode!",t),new Error("inviteCode is required for createGame");try{const n=Qc(),r=Oo(n,`chess_games/${e}`);console.log("[FIREBASE] Creating game with data:",t),await Gv(r,{...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}),console.log("[FIREBASE] Game created successfully:",e);const s=await ip(r);s.exists()?console.log("[FIREBASE] Game verification successful:",s.val()):console.error("[FIREBASE] Game creation verification failed - game not found after creation")}catch(n){throw console.error("[FIREBASE] Error creating game:",n),n}},async getActiveGames(){try{const t=Qc(),e=Oo(t,"chess_games"),n=await ip(e);if(!n.exists())return[];const r=n.val();return Object.values(r).filter(s=>s.game_state==="waiting"||s.game_state==="active")}catch(t){return console.error("[FIREBASE] Error getting active games:",t),[]}},async getOpenGames(){try{const t=Qc(),e=Oo(t,"chess_games"),n=await ip(e);if(!n.exists())return console.log("[FIREBASE] No games found in database"),[];const r=n.val();console.log("[FIREBASE] All games in database:",r);const s=Object.values(r).filter(i=>{const o=i.game_state==="waiting",a=i.is_public,c=!i.red_player||i.red_player==="0x0000000000000000000000000000000000000000";return console.log("[FIREBASE] Game filter check:",{inviteCode:i.invite_code,gameState:i.game_state,isPublic:i.is_public,redPlayer:i.red_player,isWaiting:o,noRedPlayer:c,passes:o&&a&&c}),o&&a&&c});return s.sort((i,o)=>new Date(o.created_at).getTime()-new Date(i.created_at).getTime()),console.log("[FIREBASE] Open games found:",s.length,s),s}catch(t){return console.error("[FIREBASE] Error getting open games:",t),[]}},async deleteGame(t){try{const e=Qc(),n=Oo(e,`chess_games/${t}`);await MH(n),console.log("[FIREBASE] Game deleted:",t)}catch(e){console.error("[FIREBASE] Error deleting game:",e)}},async updateLeaderboard(t){try{const e=Qc(),n=Oo(e,`leaderboard/${t.username}`);await Gv(n,{...t,updated_at:new Date().toISOString()})}catch(e){console.error("[FIREBASE] Error updating leaderboard:",e)}},async getLeaderboard(){try{const t=Qc(),e=Oo(t,"leaderboard"),n=await ip(e);if(!n.exists())return[];const r=n.val();return Object.values(r).sort((s,i)=>i.points-s.points)}catch(t){return console.error("[FIREBASE] Error getting leaderboard:",t),[]}},subscribeToLeaderboard(t){try{const e=Qc(),n=Oo(e,"leaderboard");return C$(n,s=>{if(s.exists()){const i=s.val(),o=Object.values(i).sort((a,c)=>c.points-a.points);console.log("[FIREBASE] Leaderboard update received:",o),t(o)}})}catch(e){return console.error("[FIREBASE] Error subscribing to leaderboard:",e),()=>{}}}},D7e="6.15.0";function M7e(t,e,n){const r=e.split("|").map(i=>i.trim());for(let i=0;i<r.length;i++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${n}`,s.value=t,s}async function fi(t){const e=Object.keys(t);return(await Promise.all(e.map(r=>Promise.resolve(t[r])))).reduce((r,s,i)=>(r[e[i]]=s,r),{})}function wt(t,e,n){for(let r in e){let s=e[r];const i=n?n[r]:null;i&&M7e(s,i,r),Object.defineProperty(t,r,{enumerable:!0,value:s,writable:!1})}}function Oy(t,e){if(t==null)return"null";if(e==null&&(e=new Set),typeof t=="object"){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(n=>Oy(n,e)).join(", ")+" ]";if(t instanceof Uint8Array){const n="0123456789abcdef";let r="0x";for(let s=0;s<t.length;s++)r+=n[t[s]>>4],r+=n[t[s]&15];return r}if(typeof t=="object"&&typeof t.toJSON=="function")return Oy(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{const n=Object.keys(t);return n.sort(),"{ "+n.map(r=>`${Oy(r,e)}: ${Oy(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function Os(t,e){return t&&t.code===e}function VU(t){return Os(t,"CALL_EXCEPTION")}function ur(t,e,n){let r=t;{const i=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${Oy(n)}`);for(const o in n){if(o==="shortMessage")continue;const a=n[o];i.push(o+"="+Oy(a))}}i.push(`code=${e}`),i.push(`version=${D7e}`),i.length&&(t+=" ("+i.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return wt(s,{code:e}),n&&Object.assign(s,n),s.shortMessage==null&&wt(s,{shortMessage:r}),s}function me(t,e,n,r){if(!t)throw ur(e,n,r)}function J(t,e,n,r){me(t,e,"INVALID_ARGUMENT",{argument:n,value:r})}function Aee(t,e,n){n==null&&(n=""),n&&(n=": "+n),me(t>=e,"missing argument"+n,"MISSING_ARGUMENT",{count:t,expectedCount:e}),me(t<=e,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"".normalize("NFD")!=="e")throw new Error("broken");t.push(e)}catch{}return t},[]);function DT(t,e,n){if(n==null&&(n=""),t!==e){let r=n,s="new";n&&(r+=".",s+=" "+n),me(!1,`private constructor; use ${r}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function See(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const r=new Uint8Array((t.length-2)/2);let s=2;for(let i=0;i<r.length;i++)r[i]=parseInt(t.substring(s,s+2),16),s+=2;return r}J(!1,"invalid BytesLike value",e||"value",t)}function Yt(t,e){return See(t,e,!1)}function yi(t,e){return See(t,e,!0)}function nr(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&t.length!==2+2*e||e===!0&&t.length%2!==0)}function KU(t){return nr(t,!0)||t instanceof Uint8Array}const g7="0123456789abcdef";function Oe(t){const e=Yt(t);let n="0x";for(let r=0;r<e.length;r++){const s=e[r];n+=g7[(s&240)>>4]+g7[s&15]}return n}function Ir(t){return"0x"+t.map(e=>Oe(e).substring(2)).join("")}function e0(t){return nr(t,!0)?(t.length-2)/2:Yt(t).length}function _r(t,e,n){const r=Yt(t);return n!=null&&n>r.length&&me(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),Oe(r.slice(e??0,n??r.length))}function xee(t,e,n){const r=Yt(t);me(e>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:e,offset:e+1});const s=new Uint8Array(e);return s.fill(0),n?s.set(r,e-r.length):s.set(r,0),Oe(s)}function ud(t,e){return xee(t,e,!0)}function L7e(t,e){return xee(t,e,!1)}const MT=BigInt(0),Ec=BigInt(1),ky=9007199254740991;function U7e(t,e){const n=LT(t,"value"),r=BigInt(Qt(e,"width"));if(me(n>>r===MT,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>r-Ec){const s=(Ec<<r)-Ec;return-((~n&s)+Ec)}return n}function Iee(t,e){let n=Qe(t,"value");const r=BigInt(Qt(e,"width")),s=Ec<<r-Ec;if(n<MT){n=-n,me(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});const i=(Ec<<r)-Ec;return(~n&i)+Ec}else me(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t});return n}function Dv(t,e){const n=LT(t,"value"),r=BigInt(Qt(e,"bits"));return n&(Ec<<r)-Ec}function Qe(t,e){switch(typeof t){case"bigint":return t;case"number":return J(Number.isInteger(t),"underflow",e||"value",t),J(t>=-ky&&t<=ky,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){J(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}J(!1,"invalid BigNumberish value",e||"value",t)}function LT(t,e){const n=Qe(t,e);return me(n>=MT,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const m7="0123456789abcdef";function YU(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=m7[n>>4],e+=m7[n&15];return BigInt(e)}return Qe(t)}function Qt(t,e){switch(typeof t){case"bigint":return J(t>=-ky&&t<=ky,"overflow",e||"value",t),Number(t);case"number":return J(Number.isInteger(t),"underflow",e||"value",t),J(t>=-ky&&t<=ky,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return Qt(BigInt(t),e)}catch(n){J(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}J(!1,"invalid numeric value",e||"value",t)}function B7e(t){return Qt(YU(t))}function _f(t,e){let r=LT(t,"value").toString(16);if(e==null)r.length%2&&(r="0"+r);else{const s=Qt(e,"width");for(me(s*2>=r.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<s*2;)r="0"+r}return"0x"+r}function Jr(t){const e=LT(t,"value");if(e===MT)return new Uint8Array([]);let n=e.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const i=s*2;r[s]=parseInt(n.substring(i,i+2),16)}return r}function yc(t){let e=Oe(KU(t)?t:Jr(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return e===""&&(e="0"),"0x"+e}const y7="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const w7=BigInt(58);function $7e(t){const e=Yt(t);let n=YU(e),r="";for(;n;)r=y7[Number(n%w7)]+r,n/=w7;for(let s=0;s<e.length&&!e[s];s++)r=y7[0]+r;return r}function F7e(t){t=atob(t);const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return Yt(e)}function j7e(t){const e=Yt(t);let n="";for(let r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return btoa(n)}var m0;class Nee{constructor(e,n,r){se(this,"filter");se(this,"emitter");Y(this,m0);L(this,m0,n),wt(this,{emitter:e,filter:r})}async removeListener(){_(this,m0)!=null&&await this.emitter.off(this.filter,_(this,m0))}}m0=new WeakMap;function W7e(t,e,n,r,s){J(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",n)}function Tee(t,e,n,r,s){if(t==="BAD_PREFIX"||t==="UNEXPECTED_CONTINUE"){let i=0;for(let o=e+1;o<n.length&&n[o]>>6===2;o++)i++;return i}return t==="OVERRUN"?n.length-e-1:0}function z7e(t,e,n,r,s){return t==="OVERLONG"?(J(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),Tee(t,e,n))}const H7e=Object.freeze({error:W7e,ignore:Tee,replace:z7e});function G7e(t,e){e==null&&(e=H7e.error);const n=Yt(t,"bytes"),r=[];let s=0;for(;s<n.length;){const i=n[s++];if(!(i>>7)){r.push(i);continue}let o=null,a=null;if((i&224)===192)o=1,a=127;else if((i&240)===224)o=2,a=2047;else if((i&248)===240)o=3,a=65535;else{(i&192)===128?s+=e("UNEXPECTED_CONTINUE",s-1,n,r):s+=e("BAD_PREFIX",s-1,n,r);continue}if(s-1+o>=n.length){s+=e("OVERRUN",s-1,n,r);continue}let c=i&(1<<8-o-1)-1;for(let l=0;l<o;l++){let u=n[s];if((u&192)!=128){s+=e("MISSING_CONTINUE",s,n,r),c=null;break}c=c<<6|u&63,s++}if(c!==null){if(c>1114111){s+=e("OUT_OF_RANGE",s-1-o,n,r,c);continue}if(c>=55296&&c<=57343){s+=e("UTF16_SURROGATE",s-1-o,n,r,c);continue}if(c<=a){s+=e("OVERLONG",s-1-o,n,r,c);continue}r.push(c)}}return r}function Ju(t,e){J(typeof t=="string","invalid string value","str",t);let n=[];for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);if(s<128)n.push(s);else if(s<2048)n.push(s>>6|192),n.push(s&63|128);else if((s&64512)==55296){r++;const i=t.charCodeAt(r);J(r<t.length&&(i&64512)===56320,"invalid surrogate pair","str",t);const o=65536+((s&1023)<<10)+(i&1023);n.push(o>>18|240),n.push(o>>12&63|128),n.push(o>>6&63|128),n.push(o&63|128)}else n.push(s>>12|224),n.push(s>>6&63|128),n.push(s&63|128)}return new Uint8Array(n)}function q7e(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function II(t,e){return q7e(G7e(t,e))}function Ree(t){async function e(n,r){me(r==null||!r.cancelled,"request cancelled before sending","CANCELLED");const s=n.url.split(":")[0].toLowerCase();me(s==="http"||s==="https",`unsupported protocol ${s}`,"UNSUPPORTED_OPERATION",{info:{protocol:s},operation:"request"}),me(s==="https"||!n.credentials||n.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const o=new AbortController,a=setTimeout(()=>{i=ur("request timeout","TIMEOUT"),o.abort()},n.timeout);r&&r.addListener(()=>{i=ur("request cancelled","CANCELLED"),o.abort()});const c=Object.assign({},t,{method:n.method,headers:new Headers(Array.from(n)),body:n.body||void 0,signal:o.signal});let l;try{l=await fetch(n.url,c)}catch(f){throw clearTimeout(a),i||f}clearTimeout(a);const u={};l.headers.forEach((f,p)=>{u[p.toLowerCase()]=f});const d=await l.arrayBuffer(),h=d==null?null:new Uint8Array(d);return{statusCode:l.status,statusMessage:l.statusText,headers:u,body:h}}return e}const V7e=12,K7e=250;let b7=Ree();const Y7e=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Q7e=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let qO=!1;async function Pee(t,e){try{const n=t.match(Y7e);if(!n)throw new Error("invalid data");return new lf(200,"OK",{"content-type":n[1]||"text/plain"},n[2]?F7e(n[3]):Z7e(n[3]))}catch{return new lf(599,"BAD REQUEST (invalid data: URI)",{},null,new Af(t))}}function Oee(t){async function e(n,r){try{const s=n.match(Q7e);if(!s)throw new Error("invalid link");return new Af(`${t}${s[2]}`)}catch{return new lf(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Af(n))}}return e}const HA={data:Pee,ipfs:Oee("https://gateway.ipfs.io/ipfs/")},kee=new WeakMap;var Wp,ph;class J7e{constructor(e){Y(this,Wp);Y(this,ph);L(this,Wp,[]),L(this,ph,!1),kee.set(e,()=>{if(!_(this,ph)){L(this,ph,!0);for(const n of _(this,Wp))setTimeout(()=>{n()},0);L(this,Wp,[])}})}addListener(e){me(!_(this,ph),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),_(this,Wp).push(e)}get cancelled(){return _(this,ph)}checkSignal(){me(!this.cancelled,"cancelled","CANCELLED",{})}}Wp=new WeakMap,ph=new WeakMap;function GA(t){if(t==null)throw new Error("missing signal; should not happen");return t.checkSignal(),t}var y0,w0,cc,_u,b0,v0,os,Do,Au,zp,Hp,Gp,ol,lc,gh,qp,Mv;const FI=class FI{constructor(e){Y(this,qp);Y(this,y0);Y(this,w0);Y(this,cc);Y(this,_u);Y(this,b0);Y(this,v0);Y(this,os);Y(this,Do);Y(this,Au);Y(this,zp);Y(this,Hp);Y(this,Gp);Y(this,ol);Y(this,lc);Y(this,gh);L(this,v0,String(e)),L(this,y0,!1),L(this,w0,!0),L(this,cc,{}),L(this,_u,""),L(this,b0,3e5),L(this,lc,{slotInterval:K7e,maxAttempts:V7e}),L(this,gh,null)}get url(){return _(this,v0)}set url(e){L(this,v0,String(e))}get body(){return _(this,os)==null?null:new Uint8Array(_(this,os))}set body(e){if(e==null)L(this,os,void 0),L(this,Do,void 0);else if(typeof e=="string")L(this,os,Ju(e)),L(this,Do,"text/plain");else if(e instanceof Uint8Array)L(this,os,e),L(this,Do,"application/octet-stream");else if(typeof e=="object")L(this,os,Ju(JSON.stringify(e))),L(this,Do,"application/json");else throw new Error("invalid body")}hasBody(){return _(this,os)!=null}get method(){return _(this,_u)?_(this,_u):this.hasBody()?"POST":"GET"}set method(e){e==null&&(e=""),L(this,_u,String(e).toUpperCase())}get headers(){const e=Object.assign({},_(this,cc));return _(this,Au)&&(e.authorization=`Basic ${j7e(Ju(_(this,Au)))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),e["content-type"]==null&&_(this,Do)&&(e["content-type"]=_(this,Do)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,n){_(this,cc)[String(e).toLowerCase()]=String(n)}clearHeaders(){L(this,cc,{})}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return _(this,Au)||null}setCredentials(e,n){J(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),L(this,Au,`${e}:${n}`)}get allowGzip(){return _(this,w0)}set allowGzip(e){L(this,w0,!!e)}get allowInsecureAuthentication(){return!!_(this,y0)}set allowInsecureAuthentication(e){L(this,y0,!!e)}get timeout(){return _(this,b0)}set timeout(e){J(e>=0,"timeout must be non-zero","timeout",e),L(this,b0,e)}get preflightFunc(){return _(this,zp)||null}set preflightFunc(e){L(this,zp,e)}get processFunc(){return _(this,Hp)||null}set processFunc(e){L(this,Hp,e)}get retryFunc(){return _(this,Gp)||null}set retryFunc(e){L(this,Gp,e)}get getUrlFunc(){return _(this,gh)||b7}set getUrlFunc(e){L(this,gh,e)}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${_(this,os)?Oe(_(this,os)):"null"}>`}setThrottleParams(e){e.slotInterval!=null&&(_(this,lc).slotInterval=e.slotInterval),e.maxAttempts!=null&&(_(this,lc).maxAttempts=e.maxAttempts)}send(){return me(_(this,ol)==null,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),L(this,ol,new J7e(this)),de(this,qp,Mv).call(this,0,v7()+this.timeout,0,this,new lf(0,"",{},null,this))}cancel(){me(_(this,ol)!=null,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=kee.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const n=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();me(this.method==="GET"&&(n!=="https"||r!=="http")&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});const s=new FI(e);return s.method="GET",s.allowGzip=this.allowGzip,s.timeout=this.timeout,L(s,cc,Object.assign({},_(this,cc))),_(this,os)&&L(s,os,new Uint8Array(_(this,os))),L(s,Do,_(this,Do)),s}clone(){const e=new FI(this.url);return L(e,_u,_(this,_u)),_(this,os)&&L(e,os,_(this,os)),L(e,Do,_(this,Do)),L(e,cc,Object.assign({},_(this,cc))),L(e,Au,_(this,Au)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),L(e,zp,_(this,zp)),L(e,Hp,_(this,Hp)),L(e,Gp,_(this,Gp)),L(e,lc,Object.assign({},_(this,lc))),L(e,gh,_(this,gh)),e}static lockConfig(){qO=!0}static getGateway(e){return HA[e.toLowerCase()]||null}static registerGateway(e,n){if(e=e.toLowerCase(),e==="http"||e==="https")throw new Error(`cannot intercept ${e}; use registerGetUrl`);if(qO)throw new Error("gateways locked");HA[e]=n}static registerGetUrl(e){if(qO)throw new Error("gateways locked");b7=e}static createGetUrlFunc(e){return Ree(e)}static createDataGateway(){return Pee}static createIpfsGatewayFunc(e){return Oee(e)}};y0=new WeakMap,w0=new WeakMap,cc=new WeakMap,_u=new WeakMap,b0=new WeakMap,v0=new WeakMap,os=new WeakMap,Do=new WeakMap,Au=new WeakMap,zp=new WeakMap,Hp=new WeakMap,Gp=new WeakMap,ol=new WeakMap,lc=new WeakMap,gh=new WeakMap,qp=new WeakSet,Mv=async function(e,n,r,s,i){var u,d,h;if(e>=_(this,lc).maxAttempts)return i.makeServerError("exceeded maximum retry limit");me(v7()<=n,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:s}),r>0&&await X7e(r);let o=this.clone();const a=(o.url.split(":")[0]||"").toLowerCase();if(a in HA){const f=await HA[a](o.url,GA(_(s,ol)));if(f instanceof lf){let p=f;if(this.processFunc){GA(_(s,ol));try{p=await this.processFunc(o,p)}catch(g){(g.throttle==null||typeof g.stall!="number")&&p.makeServerError("error in post-processing function",g).assertOk()}}return p}o=f}this.preflightFunc&&(o=await this.preflightFunc(o));const c=await this.getUrlFunc(o,GA(_(s,ol)));let l=new lf(c.statusCode,c.statusMessage,c.headers,c.body,s);if(l.statusCode===301||l.statusCode===302){try{const f=l.headers.location||"";return de(u=o.redirect(f),qp,Mv).call(u,e+1,n,0,s,l)}catch{}return l}else if(l.statusCode===429&&(this.retryFunc==null||await this.retryFunc(o,l,e))){const f=l.headers["retry-after"];let p=_(this,lc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return typeof f=="string"&&f.match(/^[1-9][0-9]*$/)&&(p=parseInt(f)),de(d=o.clone(),qp,Mv).call(d,e+1,n,p,s,l)}if(this.processFunc){GA(_(s,ol));try{l=await this.processFunc(o,l)}catch(f){(f.throttle==null||typeof f.stall!="number")&&l.makeServerError("error in post-processing function",f).assertOk();let p=_(this,lc).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return f.stall>=0&&(p=f.stall),de(h=o.clone(),qp,Mv).call(h,e+1,n,p,s,l)}}return l};let Af=FI;var d_,h_,f_,Mo,E0,Vp;const fB=class fB{constructor(e,n,r,s,i){Y(this,d_);Y(this,h_);Y(this,f_);Y(this,Mo);Y(this,E0);Y(this,Vp);L(this,d_,e),L(this,h_,n),L(this,f_,Object.keys(r).reduce((o,a)=>(o[a.toLowerCase()]=String(r[a]),o),{})),L(this,Mo,s==null?null:new Uint8Array(s)),L(this,E0,i||null),L(this,Vp,{message:""})}toString(){return`<FetchResponse status=${this.statusCode} body=${_(this,Mo)?Oe(_(this,Mo)):"null"}>`}get statusCode(){return _(this,d_)}get statusMessage(){return _(this,h_)}get headers(){return Object.assign({},_(this,f_))}get body(){return _(this,Mo)==null?null:new Uint8Array(_(this,Mo))}get bodyText(){try{return _(this,Mo)==null?"":II(_(this,Mo))}catch{me(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch{me(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,n=Object.keys(e);let r=0;return{next:()=>{if(r<n.length){const s=n[r++];return{value:[s,e[s]],done:!1}}return{value:void 0,done:!0}}}}makeServerError(e,n){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);const s=new fB(599,r,this.headers,this.body,_(this,E0)||void 0);return L(s,Vp,{message:e,error:n}),s}throwThrottleError(e,n){n==null?n=-1:J(Number.isInteger(n)&&n>=0,"invalid stall timeout","stall",n);const r=new Error(e||"throttling requests");throw wt(r,{stall:n,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return _(this,Mo)!=null}get request(){return _(this,E0)}ok(){return _(this,Vp).message===""&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:n}=_(this,Vp);e===""&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let s=null;try{_(this,Mo)&&(s=II(_(this,Mo)))}catch{}me(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:n,info:{requestUrl:r,responseBody:s,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}};d_=new WeakMap,h_=new WeakMap,f_=new WeakMap,Mo=new WeakMap,E0=new WeakMap,Vp=new WeakMap;let lf=fB;function v7(){return new Date().getTime()}function Z7e(t){return Ju(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,n)=>String.fromCharCode(parseInt(n,16))))}function X7e(t){return new Promise(e=>setTimeout(e,t))}function eWe(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}function E7(t,e,n){let r=0;for(let s=0;s<n;s++)r=r*256+t[e+s];return r}function C7(t,e,n,r){const s=[];for(;n<e+1+r;){const i=Dee(t,n);s.push(i.result),n+=i.consumed,me(n<=e+1+r,"child data too short","BUFFER_OVERRUN",{buffer:t,length:r,offset:e})}return{consumed:1+r,result:s}}function Dee(t,e){me(t.length!==0,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});const n=r=>{me(r<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:r})};if(t[e]>=248){const r=t[e]-247;n(e+1+r);const s=E7(t,e+1,r);return n(e+1+r+s),C7(t,e,e+1+r,r+s)}else if(t[e]>=192){const r=t[e]-192;return n(e+1+r),C7(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;n(e+1+r);const s=E7(t,e+1,r);n(e+1+r+s);const i=Oe(t.slice(e+1+r,e+1+r+s));return{consumed:1+r+s,result:i}}else if(t[e]>=128){const r=t[e]-128;n(e+1+r);const s=Oe(t.slice(e+1,e+1+r));return{consumed:1+r,result:s}}return{consumed:1,result:eWe(t[e])}}function v1(t){const e=Yt(t,"data"),n=Dee(e,0);return J(n.consumed===e.length,"unexpected junk after rlp payload","data",t),n.result}function _7(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Mee(t){if(Array.isArray(t)){let r=[];if(t.forEach(function(i){r=r.concat(Mee(i))}),r.length<=55)return r.unshift(192+r.length),r;const s=_7(r.length);return s.unshift(247+s.length),s.concat(r)}const e=Array.prototype.slice.call(Yt(t,"object"));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=_7(e.length);return n.unshift(183+n.length),n.concat(e)}const A7="0123456789abcdef";function Sf(t){let e="0x";for(const n of Mee(t))e+=A7[n>>4],e+=A7[n&15];return e}const vi=32,Z3=new Uint8Array(vi),tWe=["then"],qA={},Lee=new WeakMap;function dp(t){return Lee.get(t)}function S7(t,e){Lee.set(t,e)}function gv(t,e){const n=new Error(`deferred error during ABI decoding triggered accessing ${t}`);throw n.error=e,n}function X3(t,e,n){return t.indexOf(null)>=0?e.map((r,s)=>r instanceof $w?X3(dp(r),r,n):r):t.reduce((r,s,i)=>{let o=e.getValue(s);return s in r||(n&&o instanceof $w&&(o=X3(dp(o),o,n)),r[s]=o),r},{})}var C0;const Dy=class Dy extends Array{constructor(...n){const r=n[0];let s=n[1],i=(n[2]||[]).slice(),o=!0;r!==qA&&(s=n,i=[],o=!1);super(s.length);Y(this,C0);s.forEach((l,u)=>{this[u]=l});const a=i.reduce((l,u)=>(typeof u=="string"&&l.set(u,(l.get(u)||0)+1),l),new Map);if(S7(this,Object.freeze(s.map((l,u)=>{const d=i[u];return d!=null&&a.get(d)===1?d:null}))),L(this,C0,[]),_(this,C0)==null&&_(this,C0),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(l,u,d)=>{if(typeof u=="string"){if(u.match(/^[0-9]+$/)){const f=Qt(u,"%index");if(f<0||f>=this.length)throw new RangeError("out of result range");const p=l[f];return p instanceof Error&&gv(`index ${f}`,p),p}if(tWe.indexOf(u)>=0)return Reflect.get(l,u,d);const h=l[u];if(h instanceof Function)return function(...f){return h.apply(this===d?l:this,f)};if(!(u in l))return l.getValue.apply(this===d?l:this,[u])}return Reflect.get(l,u,d)}});return S7(c,dp(this)),c}toArray(n){const r=[];return this.forEach((s,i)=>{s instanceof Error&&gv(`index ${i}`,s),n&&s instanceof Dy&&(s=s.toArray(n)),r.push(s)}),r}toObject(n){const r=dp(this);return r.reduce((s,i,o)=>(me(i!=null,`value at index ${o} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),X3(r,this,n)),{})}slice(n,r){n==null&&(n=0),n<0&&(n+=this.length,n<0&&(n=0)),r==null&&(r=this.length),r<0&&(r+=this.length,r<0&&(r=0)),r>this.length&&(r=this.length);const s=dp(this),i=[],o=[];for(let a=n;a<r;a++)i.push(this[a]),o.push(s[a]);return new Dy(qA,i,o)}filter(n,r){const s=dp(this),i=[],o=[];for(let a=0;a<this.length;a++){const c=this[a];c instanceof Error&&gv(`index ${a}`,c),n.call(r,c,a,this)&&(i.push(c),o.push(s[a]))}return new Dy(qA,i,o)}map(n,r){const s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&gv(`index ${i}`,o),s.push(n.call(r,o,i,this))}return s}getValue(n){const r=dp(this).indexOf(n);if(r===-1)return;const s=this[r];return s instanceof Error&&gv(`property ${JSON.stringify(n)}`,s.error),s}static fromItems(n,r){return new Dy(qA,n,r)}};C0=new WeakMap;let $w=Dy;function x7(t){let e=Jr(t);return me(e.length<=vi,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:vi,offset:e.length}),e.length!==vi&&(e=yi(Ir([Z3.slice(e.length%vi),e]))),e}class yd{constructor(e,n,r,s){se(this,"name");se(this,"type");se(this,"localName");se(this,"dynamic");wt(this,{name:e,type:n,localName:r,dynamic:s},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,n){J(!1,e,this.localName,n)}}var Su,Kp,_0,BS;class e5{constructor(){Y(this,_0);Y(this,Su);Y(this,Kp);L(this,Su,[]),L(this,Kp,0)}get data(){return Ir(_(this,Su))}get length(){return _(this,Kp)}appendWriter(e){return de(this,_0,BS).call(this,yi(e.data))}writeBytes(e){let n=yi(e);const r=n.length%vi;return r&&(n=yi(Ir([n,Z3.slice(r)]))),de(this,_0,BS).call(this,n)}writeValue(e){return de(this,_0,BS).call(this,x7(e))}writeUpdatableValue(){const e=_(this,Su).length;return _(this,Su).push(Z3),L(this,Kp,_(this,Kp)+vi),n=>{_(this,Su)[e]=x7(n)}}}Su=new WeakMap,Kp=new WeakMap,_0=new WeakSet,BS=function(e){return _(this,Su).push(e),L(this,Kp,_(this,Kp)+e.length),e.length};var qi,Lo,Yp,Qp,mh,Jg,n5,Uee;const pB=class pB{constructor(e,n,r){Y(this,Jg);se(this,"allowLoose");Y(this,qi);Y(this,Lo);Y(this,Yp);Y(this,Qp);Y(this,mh);wt(this,{allowLoose:!!n}),L(this,qi,yi(e)),L(this,Yp,0),L(this,Qp,null),L(this,mh,r??1024),L(this,Lo,0)}get data(){return Oe(_(this,qi))}get dataLength(){return _(this,qi).length}get consumed(){return _(this,Lo)}get bytes(){return new Uint8Array(_(this,qi))}subReader(e){const n=new pB(_(this,qi).slice(_(this,Lo)+e),this.allowLoose,_(this,mh));return L(n,Qp,this),n}readBytes(e,n){let r=de(this,Jg,Uee).call(this,0,e,!!n);return de(this,Jg,n5).call(this,e),L(this,Lo,_(this,Lo)+r.length),r.slice(0,e)}readValue(){return YU(this.readBytes(vi))}readIndex(){return B7e(this.readBytes(vi))}};qi=new WeakMap,Lo=new WeakMap,Yp=new WeakMap,Qp=new WeakMap,mh=new WeakMap,Jg=new WeakSet,n5=function(e){var n;if(_(this,Qp))return de(n=_(this,Qp),Jg,n5).call(n,e);L(this,Yp,_(this,Yp)+e),me(_(this,mh)<1||_(this,Yp)<=_(this,mh)*this.dataLength,`compressed ABI data exceeds inflation ratio of ${_(this,mh)} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:yi(_(this,qi)),offset:_(this,Lo),length:e,info:{bytesRead:_(this,Yp),dataLength:this.dataLength}})},Uee=function(e,n,r){let s=Math.ceil(n/vi)*vi;return _(this,Lo)+s>_(this,qi).length&&(this.allowLoose&&r&&_(this,Lo)+n<=_(this,qi).length?s=n:me(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:yi(_(this,qi)),length:_(this,qi).length,offset:_(this,Lo)+s})),_(this,qi).slice(_(this,Lo),_(this,Lo)+s)};let t5=pB;function NI(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function QU(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function nWe(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");NI(t.outputLen),NI(t.blockLen)}function Fw(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Bee(t,e){QU(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const VO=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $ee=t=>t instanceof Uint8Array,rWe=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),KO=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Jc=(t,e)=>t<<32-e|t>>>e,sWe=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!sWe)throw new Error("Non little-endian hardware is not supported");function iWe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function UT(t){if(typeof t=="string"&&(t=iWe(t)),!$ee(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}function oWe(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!$ee(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}class JU{clone(){return this._cloneInto()}}function ZU(t){const e=r=>t().update(UT(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function aWe(t=32){if(VO&&typeof VO.getRandomValues=="function")return VO.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}class Fee extends JU{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,nWe(e);const r=UT(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return Fw(this),this.iHash.update(e),this}digestInto(e){Fw(this),QU(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const jee=(t,e,n)=>new Fee(t,e).update(n).digest();jee.create=(t,e)=>new Fee(t,e);function cWe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+l,a,r)}class Wee extends JU{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=KO(this.buffer)}update(e){Fw(this);const{view:n,buffer:r,blockLen:s}=this;e=UT(e);const i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=KO(e);for(;s<=i-o;o+=s)this.process(c,o);continue}r.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Fw(this),Bee(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let d=o;d<s;d++)n[d]=0;cWe(r,s-8,BigInt(this.length*8),i),this.process(r,0);const a=KO(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const lWe=(t,e,n)=>t&e^~t&n,uWe=(t,e,n)=>t&e^t&n^e&n,dWe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$d=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Fd=new Uint32Array(64);class hWe extends Wee{constructor(){super(64,32,8,!1),this.A=$d[0]|0,this.B=$d[1]|0,this.C=$d[2]|0,this.D=$d[3]|0,this.E=$d[4]|0,this.F=$d[5]|0,this.G=$d[6]|0,this.H=$d[7]|0}get(){const{A:e,B:n,C:r,D:s,E:i,F:o,G:a,H:c}=this;return[e,n,r,s,i,o,a,c]}set(e,n,r,s,i,o,a,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,n){for(let d=0;d<16;d++,n+=4)Fd[d]=e.getUint32(n,!1);for(let d=16;d<64;d++){const h=Fd[d-15],f=Fd[d-2],p=Jc(h,7)^Jc(h,18)^h>>>3,g=Jc(f,17)^Jc(f,19)^f>>>10;Fd[d]=g+Fd[d-7]+p+Fd[d-16]|0}let{A:r,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const h=Jc(a,6)^Jc(a,11)^Jc(a,25),f=u+h+lWe(a,c,l)+dWe[d]+Fd[d]|0,g=(Jc(r,2)^Jc(r,13)^Jc(r,22))+uWe(r,s,i)|0;u=l,l=c,c=a,a=o+f|0,o=i,i=s,s=r,r=f+g|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,i,o,a,c,l,u)}roundClean(){Fd.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const zee=ZU(()=>new hWe),VA=BigInt(2**32-1),r5=BigInt(32);function Hee(t,e=!1){return e?{h:Number(t&VA),l:Number(t>>r5&VA)}:{h:Number(t>>r5&VA)|0,l:Number(t&VA)|0}}function Gee(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=Hee(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const fWe=(t,e)=>BigInt(t>>>0)<<r5|BigInt(e>>>0),pWe=(t,e,n)=>t>>>n,gWe=(t,e,n)=>t<<32-n|e>>>n,mWe=(t,e,n)=>t>>>n|e<<32-n,yWe=(t,e,n)=>t<<32-n|e>>>n,wWe=(t,e,n)=>t<<64-n|e>>>n-32,bWe=(t,e,n)=>t>>>n-32|e<<64-n,vWe=(t,e)=>e,EWe=(t,e)=>t,qee=(t,e,n)=>t<<n|e>>>32-n,Vee=(t,e,n)=>e<<n|t>>>32-n,Kee=(t,e,n)=>e<<n-32|t>>>64-n,Yee=(t,e,n)=>t<<n-32|e>>>64-n;function CWe(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const _We=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),AWe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,SWe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),xWe=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,IWe=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),NWe=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,Ft={fromBig:Hee,split:Gee,toBig:fWe,shrSH:pWe,shrSL:gWe,rotrSH:mWe,rotrSL:yWe,rotrBH:wWe,rotrBL:bWe,rotr32H:vWe,rotr32L:EWe,rotlSH:qee,rotlSL:Vee,rotlBH:Kee,rotlBL:Yee,add:CWe,add3L:_We,add3H:AWe,add4L:SWe,add4H:xWe,add5H:NWe,add5L:IWe},[TWe,RWe]=Ft.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),jd=new Uint32Array(80),Wd=new Uint32Array(80);class PWe extends Wee{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:d,Fl:h,Gh:f,Gl:p,Hh:g,Hl:w}=this;return[e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w]}set(e,n,r,s,i,o,a,c,l,u,d,h,f,p,g,w){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=d|0,this.Fl=h|0,this.Gh=f|0,this.Gl=p|0,this.Hh=g|0,this.Hl=w|0}process(e,n){for(let v=0;v<16;v++,n+=4)jd[v]=e.getUint32(n),Wd[v]=e.getUint32(n+=4);for(let v=16;v<80;v++){const A=jd[v-15]|0,C=Wd[v-15]|0,T=Ft.rotrSH(A,C,1)^Ft.rotrSH(A,C,8)^Ft.shrSH(A,C,7),x=Ft.rotrSL(A,C,1)^Ft.rotrSL(A,C,8)^Ft.shrSL(A,C,7),N=jd[v-2]|0,S=Wd[v-2]|0,D=Ft.rotrSH(N,S,19)^Ft.rotrBH(N,S,61)^Ft.shrSH(N,S,6),P=Ft.rotrSL(N,S,19)^Ft.rotrBL(N,S,61)^Ft.shrSL(N,S,6),$=Ft.add4L(x,P,Wd[v-7],Wd[v-16]),G=Ft.add4H($,T,D,jd[v-7],jd[v-16]);jd[v]=G|0,Wd[v]=$|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:d,El:h,Fh:f,Fl:p,Gh:g,Gl:w,Hh:m,Hl:b}=this;for(let v=0;v<80;v++){const A=Ft.rotrSH(d,h,14)^Ft.rotrSH(d,h,18)^Ft.rotrBH(d,h,41),C=Ft.rotrSL(d,h,14)^Ft.rotrSL(d,h,18)^Ft.rotrBL(d,h,41),T=d&f^~d&g,x=h&p^~h&w,N=Ft.add5L(b,C,x,RWe[v],Wd[v]),S=Ft.add5H(N,m,A,T,TWe[v],jd[v]),D=N|0,P=Ft.rotrSH(r,s,28)^Ft.rotrBH(r,s,34)^Ft.rotrBH(r,s,39),$=Ft.rotrSL(r,s,28)^Ft.rotrBL(r,s,34)^Ft.rotrBL(r,s,39),G=r&i^r&a^i&a,W=s&o^s&c^o&c;m=g|0,b=w|0,g=f|0,w=p|0,f=d|0,p=h|0,{h:d,l:h}=Ft.add(l|0,u|0,S|0,D|0),l=a|0,u=c|0,a=i|0,c=o|0,i=r|0,o=s|0;const I=Ft.add3L(D,$,W);r=Ft.add3H(I,S,P,G),s=I|0}({h:r,l:s}=Ft.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Ft.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=Ft.add(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=Ft.add(this.Dh|0,this.Dl|0,l|0,u|0),{h:d,l:h}=Ft.add(this.Eh|0,this.El|0,d|0,h|0),{h:f,l:p}=Ft.add(this.Fh|0,this.Fl|0,f|0,p|0),{h:g,l:w}=Ft.add(this.Gh|0,this.Gl|0,g|0,w|0),{h:m,l:b}=Ft.add(this.Hh|0,this.Hl|0,m|0,b|0),this.set(r,s,i,o,a,c,l,u,d,h,f,p,g,w,m,b)}roundClean(){jd.fill(0),Wd.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const OWe=ZU(()=>new PWe);function kWe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}const I7=kWe();I7.crypto||I7.msCrypto;function DWe(t){switch(t){case"sha256":return zee.create();case"sha512":return OWe.create()}J(!1,"invalid hashing algorithm name","algorithm",t)}const[Qee,Jee,Zee]=[[],[],[]],MWe=BigInt(0),mv=BigInt(1),LWe=BigInt(2),UWe=BigInt(7),BWe=BigInt(256),$We=BigInt(113);for(let t=0,e=mv,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],Qee.push(2*(5*r+n)),Jee.push((t+1)*(t+2)/2%64);let s=MWe;for(let i=0;i<7;i++)e=(e<<mv^(e>>UWe)*$We)%BWe,e&LWe&&(s^=mv<<(mv<<BigInt(i))-mv);Zee.push(s)}const[FWe,jWe]=Gee(Zee,!0),N7=(t,e,n)=>n>32?Kee(t,e,n):qee(t,e,n),T7=(t,e,n)=>n>32?Yee(t,e,n):Vee(t,e,n);function WWe(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)n[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=n[c],u=n[c+1],d=N7(l,u,1)^n[a],h=T7(l,u,1)^n[a+1];for(let f=0;f<50;f+=10)t[o+f]^=d,t[o+f+1]^=h}let s=t[2],i=t[3];for(let o=0;o<24;o++){const a=Jee[o],c=N7(s,i,a),l=T7(s,i,a),u=Qee[o];s=t[u],i=t[u+1],t[u]=c,t[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)n[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~n[(a+2)%10]&n[(a+4)%10]}t[0]^=FWe[r],t[1]^=jWe[r]}n.fill(0)}class XU extends JU{constructor(e,n,r,s=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,NI(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=rWe(this.state)}keccak(){WWe(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){Fw(this);const{blockLen:n,state:r}=this;e=UT(e);const s=e.length;for(let i=0;i<s;){const o=Math.min(n-this.pos,s-i);for(let a=0;a<o;a++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:s}=this;e[r]^=n,n&128&&r===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Fw(this,!1),QU(e),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,i=e.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);e.set(n.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return NI(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Bee(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new XU(n,r,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const zWe=(t,e,n)=>ZU(()=>new XU(e,t,n)),HWe=zWe(1,136,256/8);let Xee=!1;const ete=function(t){return HWe(t)};let tte=ete;function $r(t){const e=Yt(t,"data");return Oe(tte(e))}$r._=ete;$r.lock=function(){Xee=!0};$r.register=function(t){if(Xee)throw new TypeError("keccak256 is locked");tte=t};Object.freeze($r);const nte=function(t){return DWe("sha256").update(t).digest()};let rte=nte,ste=!1;function Cb(t){const e=Yt(t,"data");return Oe(rte(e))}Cb._=nte;Cb.lock=function(){ste=!0};Cb.register=function(t){if(ste)throw new Error("sha256 is locked");rte=t};Object.freeze(Cb);Object.freeze(Cb);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ite=BigInt(0),BT=BigInt(1),GWe=BigInt(2),$T=t=>t instanceof Uint8Array,qWe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jw(t){if(!$T(t))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=qWe[t[n]];return e}function ote(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function eB(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}function Ww(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(e/2);for(let r=0;r<n.length;r++){const s=r*2,i=t.slice(s,s+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");n[r]=o}return n}function yg(t){return eB(jw(t))}function tB(t){if(!$T(t))throw new Error("Uint8Array expected");return eB(jw(Uint8Array.from(t).reverse()))}function zw(t,e){return Ww(t.toString(16).padStart(e*2,"0"))}function nB(t,e){return zw(t,e).reverse()}function VWe(t){return Ww(ote(t))}function ic(t,e,n){let r;if(typeof e=="string")try{r=Ww(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if($T(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(`${t} expected ${n} bytes, got ${s}`);return r}function QC(...t){const e=new Uint8Array(t.reduce((r,s)=>r+s.length,0));let n=0;return t.forEach(r=>{if(!$T(r))throw new Error("Uint8Array expected");e.set(r,n),n+=r.length}),e}function KWe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function YWe(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function QWe(t){let e;for(e=0;t>ite;t>>=BT,e+=1);return e}function JWe(t,e){return t>>BigInt(e)&BT}const ZWe=(t,e,n)=>t|(n?BT:ite)<<BigInt(e),rB=t=>(GWe<<BigInt(t-1))-BT,YO=t=>new Uint8Array(t),R7=t=>Uint8Array.from(t);function ate(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=YO(t),s=YO(t),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...d)=>n(s,r,...d),c=(d=YO())=>{s=a(R7([0]),d),r=a(),d.length!==0&&(s=a(R7([1]),d),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let d=0;const h=[];for(;d<e;){r=a();const f=r.slice();h.push(f),d+=r.length}return QC(...h)};return(d,h)=>{o(),c(d);let f;for(;!(f=h(l()));)c();return o(),f}}const XWe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function E1(t,e,n={}){const r=(s,i,o)=>{const a=XWe[i];if(typeof a!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[s];if(!(o&&c===void 0)&&!a(c,t))throw new Error(`Invalid param ${String(s)}=${c} (${typeof c}), expected ${i}`)};for(const[s,i]of Object.entries(e))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return t}const eze=Object.freeze(Object.defineProperty({__proto__:null,bitGet:JWe,bitLen:QWe,bitMask:rB,bitSet:ZWe,bytesToHex:jw,bytesToNumberBE:yg,bytesToNumberLE:tB,concatBytes:QC,createHmacDrbg:ate,ensureBytes:ic,equalBytes:KWe,hexToBytes:Ww,hexToNumber:eB,numberToBytesBE:zw,numberToBytesLE:nB,numberToHexUnpadded:ote,numberToVarBytesBE:VWe,utf8ToBytes:YWe,validateObject:E1},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ws=BigInt(0),Dr=BigInt(1),hp=BigInt(2),tze=BigInt(3),s5=BigInt(4),P7=BigInt(5),O7=BigInt(8);BigInt(9);BigInt(16);function Zi(t,e){const n=t%e;return n>=ws?n:e+n}function nze(t,e,n){if(n<=ws||e<ws)throw new Error("Expected power/modulo > 0");if(n===Dr)return ws;let r=Dr;for(;e>ws;)e&Dr&&(r=r*t%n),t=t*t%n,e>>=Dr;return r}function ua(t,e,n){let r=t;for(;e-- >ws;)r*=r,r%=n;return r}function i5(t,e){if(t===ws||e<=ws)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Zi(t,e),r=e,s=ws,i=Dr;for(;n!==ws;){const a=r/n,c=r%n,l=s-i*a;r=n,n=c,s=i,i=l}if(r!==Dr)throw new Error("invert: does not exist");return Zi(s,e)}function rze(t){const e=(t-Dr)/hp;let n,r,s;for(n=t-Dr,r=0;n%hp===ws;n/=hp,r++);for(s=hp;s<t&&nze(s,e,t)!==t-Dr;s++);if(r===1){const o=(t+Dr)/s5;return function(c,l){const u=c.pow(l,o);if(!c.eql(c.sqr(u),l))throw new Error("Cannot find square root");return u}}const i=(n+Dr)/hp;return function(a,c){if(a.pow(c,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let l=r,u=a.pow(a.mul(a.ONE,s),n),d=a.pow(c,i),h=a.pow(c,n);for(;!a.eql(h,a.ONE);){if(a.eql(h,a.ZERO))return a.ZERO;let f=1;for(let g=a.sqr(h);f<l&&!a.eql(g,a.ONE);f++)g=a.sqr(g);const p=a.pow(u,Dr<<BigInt(l-f-1));u=a.sqr(p),d=a.mul(d,p),h=a.mul(h,u),l=f}return d}}function sze(t){if(t%s5===tze){const e=(t+Dr)/s5;return function(r,s){const i=r.pow(s,e);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(t%O7===P7){const e=(t-P7)/O7;return function(r,s){const i=r.mul(s,hp),o=r.pow(i,e),a=r.mul(s,o),c=r.mul(r.mul(a,hp),o),l=r.mul(a,r.sub(c,r.ONE));if(!r.eql(r.sqr(l),s))throw new Error("Cannot find square root");return l}}return rze(t)}const ize=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function oze(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ize.reduce((r,s)=>(r[s]="function",r),e);return E1(t,n)}function aze(t,e,n){if(n<ws)throw new Error("Expected power > 0");if(n===ws)return t.ONE;if(n===Dr)return e;let r=t.ONE,s=e;for(;n>ws;)n&Dr&&(r=t.mul(r,s)),s=t.sqr(s),n>>=Dr;return r}function cze(t,e){const n=new Array(e.length),r=e.reduce((i,o,a)=>t.is0(o)?i:(n[a]=i,t.mul(i,o)),t.ONE),s=t.inv(r);return e.reduceRight((i,o,a)=>t.is0(o)?i:(n[a]=t.mul(i,n[a]),t.mul(i,o)),s),n}function cte(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function lze(t,e,n=!1,r={}){if(t<=ws)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:s,nByteLength:i}=cte(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=sze(t),a=Object.freeze({ORDER:t,BITS:s,BYTES:i,MASK:rB(s),ZERO:ws,ONE:Dr,create:c=>Zi(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return ws<=c&&c<t},is0:c=>c===ws,isOdd:c=>(c&Dr)===Dr,neg:c=>Zi(-c,t),eql:(c,l)=>c===l,sqr:c=>Zi(c*c,t),add:(c,l)=>Zi(c+l,t),sub:(c,l)=>Zi(c-l,t),mul:(c,l)=>Zi(c*l,t),pow:(c,l)=>aze(a,c,l),div:(c,l)=>Zi(c*i5(l,t),t),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>i5(c,t),sqrt:r.sqrt||(c=>o(a,c)),invertBatch:c=>cze(a,c),cmov:(c,l,u)=>u?l:c,toBytes:c=>n?nB(c,i):zw(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?tB(c):yg(c)}});return Object.freeze(a)}function lte(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function ute(t){const e=lte(t);return e+Math.ceil(e/2)}function uze(t,e,n=!1){const r=t.length,s=lte(e),i=ute(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const o=n?yg(t):tB(t),a=Zi(o,e-Dr)+Dr;return n?nB(a,s):zw(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const dze=BigInt(0),QO=BigInt(1);function hze(t,e){const n=(s,i)=>{const o=i.negate();return s?o:i},r=s=>{const i=Math.ceil(e/s)+1,o=2**(s-1);return{windows:i,windowSize:o}};return{constTimeNegate:n,unsafeLadder(s,i){let o=t.ZERO,a=s;for(;i>dze;)i&QO&&(o=o.add(a)),a=a.double(),i>>=QO;return o},precomputeWindow(s,i){const{windows:o,windowSize:a}=r(i),c=[];let l=s,u=l;for(let d=0;d<o;d++){u=l,c.push(u);for(let h=1;h<a;h++)u=u.add(l),c.push(u);l=u.double()}return c},wNAF(s,i,o){const{windows:a,windowSize:c}=r(s);let l=t.ZERO,u=t.BASE;const d=BigInt(2**s-1),h=2**s,f=BigInt(s);for(let p=0;p<a;p++){const g=p*c;let w=Number(o&d);o>>=f,w>c&&(w-=h,o+=QO);const m=g,b=g+Math.abs(w)-1,v=p%2!==0,A=w<0;w===0?u=u.add(n(v,i[m])):l=l.add(n(A,i[b]))}return{p:l,f:u}},wNAFCached(s,i,o,a){const c=s._WINDOW_SIZE||1;let l=i.get(s);return l||(l=this.precomputeWindow(s,c),c!==1&&i.set(s,a(l))),this.wNAF(c,l,o)}}}function dte(t){return oze(t.Fp),E1(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...cte(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fze(t){const e=dte(t);E1(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=e;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:pze,hexToBytes:gze}=eze,Rp={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=Rp;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:pze(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=Rp,n=typeof t=="string"?gze(t):t;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:s,l:i}=Rp._parseInt(n.subarray(2)),{d:o,l:a}=Rp._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(t){const e=l=>Number.parseInt(l[0],16)&8?"00"+l:l,n=l=>{const u=l.toString(16);return u.length&1?`0${u}`:u},r=e(n(t.s)),s=e(n(t.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return`30${n(o+i+4)}02${c}${s}02${a}${r}`}},Lu=BigInt(0),_a=BigInt(1);BigInt(2);const k7=BigInt(3);BigInt(4);function mze(t){const e=fze(t),{Fp:n}=e,r=e.toBytes||((p,g,w)=>{const m=g.toAffine();return QC(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),s=e.fromBytes||(p=>{const g=p.subarray(1),w=n.fromBytes(g.subarray(0,n.BYTES)),m=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:w,y:m}});function i(p){const{a:g,b:w}=e,m=n.sqr(p),b=n.mul(m,p);return n.add(n.add(b,n.mul(p,g)),w)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function o(p){return typeof p=="bigint"&&Lu<p&&p<e.n}function a(p){if(!o(p))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(p){const{allowedPrivateKeyLengths:g,nByteLength:w,wrapPrivateKey:m,n:b}=e;if(g&&typeof p!="bigint"){if(p instanceof Uint8Array&&(p=jw(p)),typeof p!="string"||!g.includes(p.length))throw new Error("Invalid key");p=p.padStart(w*2,"0")}let v;try{v=typeof p=="bigint"?p:yg(ic("private key",p,w))}catch{throw new Error(`private key must be ${w} bytes, hex or bigint, not ${typeof p}`)}return m&&(v=Zi(v,b)),a(v),v}const l=new Map;function u(p){if(!(p instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(g,w,m){if(this.px=g,this.py=w,this.pz=m,g==null||!n.isValid(g))throw new Error("x required");if(w==null||!n.isValid(w))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(g){const{x:w,y:m}=g||{};if(!g||!n.isValid(w)||!n.isValid(m))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const b=v=>n.eql(v,n.ZERO);return b(w)&&b(m)?d.ZERO:new d(w,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const w=n.invertBatch(g.map(m=>m.pz));return g.map((m,b)=>m.toAffine(w[b])).map(d.fromAffine)}static fromHex(g){const w=d.fromAffine(s(ic("pointHex",g)));return w.assertValidity(),w}static fromPrivateKey(g){return d.BASE.multiply(c(g))}_setWindowSize(g){this._WINDOW_SIZE=g,l.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:g,y:w}=this.toAffine();if(!n.isValid(g)||!n.isValid(w))throw new Error("bad point: x or y not FE");const m=n.sqr(w),b=i(g);if(!n.eql(m,b))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){u(g);const{px:w,py:m,pz:b}=this,{px:v,py:A,pz:C}=g,T=n.eql(n.mul(w,C),n.mul(v,b)),x=n.eql(n.mul(m,C),n.mul(A,b));return T&&x}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:w}=e,m=n.mul(w,k7),{px:b,py:v,pz:A}=this;let C=n.ZERO,T=n.ZERO,x=n.ZERO,N=n.mul(b,b),S=n.mul(v,v),D=n.mul(A,A),P=n.mul(b,v);return P=n.add(P,P),x=n.mul(b,A),x=n.add(x,x),C=n.mul(g,x),T=n.mul(m,D),T=n.add(C,T),C=n.sub(S,T),T=n.add(S,T),T=n.mul(C,T),C=n.mul(P,C),x=n.mul(m,x),D=n.mul(g,D),P=n.sub(N,D),P=n.mul(g,P),P=n.add(P,x),x=n.add(N,N),N=n.add(x,N),N=n.add(N,D),N=n.mul(N,P),T=n.add(T,N),D=n.mul(v,A),D=n.add(D,D),N=n.mul(D,P),C=n.sub(C,N),x=n.mul(D,S),x=n.add(x,x),x=n.add(x,x),new d(C,T,x)}add(g){u(g);const{px:w,py:m,pz:b}=this,{px:v,py:A,pz:C}=g;let T=n.ZERO,x=n.ZERO,N=n.ZERO;const S=e.a,D=n.mul(e.b,k7);let P=n.mul(w,v),$=n.mul(m,A),G=n.mul(b,C),W=n.add(w,m),I=n.add(v,A);W=n.mul(W,I),I=n.add(P,$),W=n.sub(W,I),I=n.add(w,b);let R=n.add(v,C);return I=n.mul(I,R),R=n.add(P,G),I=n.sub(I,R),R=n.add(m,b),T=n.add(A,C),R=n.mul(R,T),T=n.add($,G),R=n.sub(R,T),N=n.mul(S,I),T=n.mul(D,G),N=n.add(T,N),T=n.sub($,N),N=n.add($,N),x=n.mul(T,N),$=n.add(P,P),$=n.add($,P),G=n.mul(S,G),I=n.mul(D,I),$=n.add($,G),G=n.sub(P,G),G=n.mul(S,G),I=n.add(I,G),P=n.mul($,I),x=n.add(x,P),P=n.mul(R,I),T=n.mul(W,T),T=n.sub(T,P),P=n.mul(W,$),N=n.mul(R,N),N=n.add(N,P),new d(T,x,N)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return f.wNAFCached(this,l,g,w=>{const m=n.invertBatch(w.map(b=>b.pz));return w.map((b,v)=>b.toAffine(m[v])).map(d.fromAffine)})}multiplyUnsafe(g){const w=d.ZERO;if(g===Lu)return w;if(a(g),g===_a)return this;const{endo:m}=e;if(!m)return f.unsafeLadder(this,g);let{k1neg:b,k1:v,k2neg:A,k2:C}=m.splitScalar(g),T=w,x=w,N=this;for(;v>Lu||C>Lu;)v&_a&&(T=T.add(N)),C&_a&&(x=x.add(N)),N=N.double(),v>>=_a,C>>=_a;return b&&(T=T.negate()),A&&(x=x.negate()),x=new d(n.mul(x.px,m.beta),x.py,x.pz),T.add(x)}multiply(g){a(g);let w=g,m,b;const{endo:v}=e;if(v){const{k1neg:A,k1:C,k2neg:T,k2:x}=v.splitScalar(w);let{p:N,f:S}=this.wNAF(C),{p:D,f:P}=this.wNAF(x);N=f.constTimeNegate(A,N),D=f.constTimeNegate(T,D),D=new d(n.mul(D.px,v.beta),D.py,D.pz),m=N.add(D),b=S.add(P)}else{const{p:A,f:C}=this.wNAF(w);m=A,b=C}return d.normalizeZ([m,b])[0]}multiplyAndAddUnsafe(g,w,m){const b=d.BASE,v=(C,T)=>T===Lu||T===_a||!C.equals(b)?C.multiplyUnsafe(T):C.multiply(T),A=v(this,w).add(v(g,m));return A.is0()?void 0:A}toAffine(g){const{px:w,py:m,pz:b}=this,v=this.is0();g==null&&(g=v?n.ONE:n.inv(b));const A=n.mul(w,g),C=n.mul(m,g),T=n.mul(b,g);if(v)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:A,y:C}}isTorsionFree(){const{h:g,isTorsionFree:w}=e;if(g===_a)return!0;if(w)return w(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:w}=e;return g===_a?this:w?w(d,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),r(d,this,g)}toHex(g=!0){return jw(this.toRawBytes(g))}}d.BASE=new d(e.Gx,e.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const h=e.nBitLength,f=hze(d,e.endo?Math.ceil(h/2):h);return{CURVE:e,ProjectivePoint:d,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function yze(t){const e=dte(t);return E1(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function wze(t){const e=yze(t),{Fp:n,n:r}=e,s=n.BYTES+1,i=2*n.BYTES+1;function o(I){return Lu<I&&I<n.ORDER}function a(I){return Zi(I,r)}function c(I){return i5(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:d,isWithinCurveOrder:h}=mze({...e,toBytes(I,R,B){const O=R.toAffine(),M=n.toBytes(O.x),j=QC;return B?j(Uint8Array.from([R.hasEvenY()?2:3]),M):j(Uint8Array.from([4]),M,n.toBytes(O.y))},fromBytes(I){const R=I.length,B=I[0],O=I.subarray(1);if(R===s&&(B===2||B===3)){const M=yg(O);if(!o(M))throw new Error("Point is not on curve");const j=d(M);let V=n.sqrt(j);const te=(V&_a)===_a;return(B&1)===1!==te&&(V=n.neg(V)),{x:M,y:V}}else if(R===i&&B===4){const M=n.fromBytes(O.subarray(0,n.BYTES)),j=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:M,y:j}}else throw new Error(`Point of length ${R} was invalid. Expected ${s} compressed bytes or ${i} uncompressed bytes`)}}),f=I=>jw(zw(I,e.nByteLength));function p(I){const R=r>>_a;return I>R}function g(I){return p(I)?a(-I):I}const w=(I,R,B)=>yg(I.slice(R,B));class m{constructor(R,B,O){this.r=R,this.s=B,this.recovery=O,this.assertValidity()}static fromCompact(R){const B=e.nByteLength;return R=ic("compactSignature",R,B*2),new m(w(R,0,B),w(R,B,2*B))}static fromDER(R){const{r:B,s:O}=Rp.toSig(ic("DER",R));return new m(B,O)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(R){return new m(this.r,this.s,R)}recoverPublicKey(R){const{r:B,s:O,recovery:M}=this,j=x(ic("msgHash",R));if(M==null||![0,1,2,3].includes(M))throw new Error("recovery id invalid");const V=M===2||M===3?B+e.n:B;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const te=M&1?"03":"02",Z=l.fromHex(te+f(V)),X=c(V),ce=a(-j*X),ge=a(O*X),Me=l.BASE.multiplyAndAddUnsafe(Z,ce,ge);if(!Me)throw new Error("point at infinify");return Me.assertValidity(),Me}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return Ww(this.toDERHex())}toDERHex(){return Rp.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ww(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(I){try{return u(I),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const I=ute(e.n);return uze(e.randomBytes(I),e.n)},precompute(I=8,R=l.BASE){return R._setWindowSize(I),R.multiply(BigInt(3)),R}};function v(I,R=!0){return l.fromPrivateKey(I).toRawBytes(R)}function A(I){const R=I instanceof Uint8Array,B=typeof I=="string",O=(R||B)&&I.length;return R?O===s||O===i:B?O===2*s||O===2*i:I instanceof l}function C(I,R,B=!0){if(A(I))throw new Error("first arg must be private key");if(!A(R))throw new Error("second arg must be public key");return l.fromHex(R).multiply(u(I)).toRawBytes(B)}const T=e.bits2int||function(I){const R=yg(I),B=I.length*8-e.nBitLength;return B>0?R>>BigInt(B):R},x=e.bits2int_modN||function(I){return a(T(I))},N=rB(e.nBitLength);function S(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(Lu<=I&&I<N))throw new Error(`bigint expected < 2^${e.nBitLength}`);return zw(I,e.nByteLength)}function D(I,R,B=P){if(["recovered","canonical"].some(Je=>Je in B))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:M}=e;let{lowS:j,prehash:V,extraEntropy:te}=B;j==null&&(j=!0),I=ic("msgHash",I),V&&(I=ic("prehashed msgHash",O(I)));const Z=x(I),X=u(R),ce=[S(X),S(Z)];if(te!=null){const Je=te===!0?M(n.BYTES):te;ce.push(ic("extraEntropy",Je))}const ge=QC(...ce),Me=Z;function it(Je){const bt=T(Je);if(!h(bt))return;const Nt=c(bt),At=l.BASE.multiply(bt).toAffine(),ne=a(At.x);if(ne===Lu)return;const ie=a(Nt*a(Me+ne*X));if(ie===Lu)return;let be=(At.x===ne?0:2)|Number(At.y&_a),fe=ie;return j&&p(ie)&&(fe=g(ie),be^=1),new m(ne,fe,be)}return{seed:ge,k2sig:it}}const P={lowS:e.lowS,prehash:!1},$={lowS:e.lowS,prehash:!1};function G(I,R,B=P){const{seed:O,k2sig:M}=D(I,R,B),j=e;return ate(j.hash.outputLen,j.nByteLength,j.hmac)(O,M)}l.BASE._setWindowSize(8);function W(I,R,B,O=$){var At;const M=I;if(R=ic("msgHash",R),B=ic("publicKey",B),"strict"in O)throw new Error("options.strict was renamed to lowS");const{lowS:j,prehash:V}=O;let te,Z;try{if(typeof M=="string"||M instanceof Uint8Array)try{te=m.fromDER(M)}catch(ne){if(!(ne instanceof Rp.Err))throw ne;te=m.fromCompact(M)}else if(typeof M=="object"&&typeof M.r=="bigint"&&typeof M.s=="bigint"){const{r:ne,s:ie}=M;te=new m(ne,ie)}else throw new Error("PARSE");Z=l.fromHex(B)}catch(ne){if(ne.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(j&&te.hasHighS())return!1;V&&(R=e.hash(R));const{r:X,s:ce}=te,ge=x(R),Me=c(ce),it=a(ge*Me),Je=a(X*Me),bt=(At=l.BASE.multiplyAndAddUnsafe(Z,it,Je))==null?void 0:At.toAffine();return bt?a(bt.x)===X:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:C,sign:G,verify:W,ProjectivePoint:l,Signature:m,utils:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function bze(t){return{hash:t,hmac:(e,...n)=>jee(t,e,oWe(...n)),randomBytes:aWe}}function vze(t,e){const n=r=>wze({...t,...bze(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const hte=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),D7=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Eze=BigInt(1),o5=BigInt(2),M7=(t,e)=>(t+e/o5)/e;function Cze(t){const e=hte,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=t*t*t%e,u=l*l*t%e,d=ua(u,n,e)*u%e,h=ua(d,n,e)*u%e,f=ua(h,o5,e)*l%e,p=ua(f,s,e)*f%e,g=ua(p,i,e)*p%e,w=ua(g,a,e)*g%e,m=ua(w,c,e)*w%e,b=ua(m,a,e)*g%e,v=ua(b,n,e)*u%e,A=ua(v,o,e)*p%e,C=ua(A,r,e)*l%e,T=ua(C,o5,e);if(!a5.eql(a5.sqr(T),t))throw new Error("Cannot find square root");return T}const a5=lze(hte,void 0,void 0,{sqrt:Cze}),qd=vze({a:BigInt(0),b:BigInt(7),Fp:a5,n:D7,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=D7,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Eze*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=M7(i*t,e),c=M7(-r*t,e);let l=Zi(t-a*n-c*s,e),u=Zi(-a*r-c*i,e);const d=l>o,h=u>o;if(d&&(l=e-l),h&&(u=e-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:d,k1:l,k2neg:h,k2:u}}}},zee);BigInt(0);qd.ProjectivePoint;const JC="0x0000000000000000000000000000000000000000",L7="0x0000000000000000000000000000000000000000000000000000000000000000",U7=BigInt(0),B7=BigInt(1),$7=BigInt(2),F7=BigInt(27),j7=BigInt(28),KA=BigInt(35),ry={};function W7(t){return ud(Jr(t),32)}var A0,al,S0,Jp;const nc=class nc{constructor(e,n,r,s){Y(this,A0);Y(this,al);Y(this,S0);Y(this,Jp);DT(e,ry,"Signature"),L(this,A0,n),L(this,al,r),L(this,S0,s),L(this,Jp,null)}get r(){return _(this,A0)}set r(e){J(e0(e)===32,"invalid r","value",e),L(this,A0,Oe(e))}get s(){return J(parseInt(_(this,al).substring(0,3))<8,"non-canonical s; use ._s","s",_(this,al)),_(this,al)}set s(e){J(e0(e)===32,"invalid s","value",e),L(this,al,Oe(e))}get _s(){return _(this,al)}isValid(){return parseInt(_(this,al).substring(0,3))<8}get v(){return _(this,S0)}set v(e){const n=Qt(e,"value");J(n===27||n===28,"invalid v","v",e),L(this,S0,n)}get networkV(){return _(this,Jp)}get legacyChainId(){const e=this.networkV;return e==null?null:nc.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){const e=Yt(this.s);return this.yParity&&(e[0]|=128),Oe(e)}get compactSerialized(){return Ir([this.r,this.yParityAndS])}get serialized(){return Ir([this.r,this.s,this.yParity?"0x1c":"0x1b"])}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){const e=new nc(ry,this.r,this._s,this.v);return this.networkV&&L(e,Jp,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const n=Qe(e,"v");return n==F7||n==j7?U7:(J(n>=KA,"invalid EIP-155 v","v",e),(n-KA)/$7)}static getChainIdV(e,n){return Qe(e)*$7+BigInt(35+n-27)}static getNormalizedV(e){const n=Qe(e);return n===U7||n===F7?27:n===B7||n===j7?28:(J(n>=KA,"invalid v","v",e),n&B7?27:28)}static from(e){function n(l,u){J(l,u,"signature",e)}if(e==null)return new nc(ry,L7,L7,27);if(typeof e=="string"){const l=Yt(e,"signature");if(l.length===64){const u=Oe(l.slice(0,32)),d=l.slice(32,64),h=d[0]&128?28:27;return d[0]&=127,new nc(ry,u,Oe(d),h)}if(l.length===65){const u=Oe(l.slice(0,32)),d=Oe(l.slice(32,64)),h=nc.getNormalizedV(l[64]);return new nc(ry,u,d,h)}n(!1,"invalid raw signature length")}if(e instanceof nc)return e.clone();const r=e.r;n(r!=null,"missing r");const s=W7(r),i=function(l,u){if(l!=null)return W7(l);if(u!=null){n(nr(u,32),"invalid yParityAndS");const d=Yt(u);return d[0]&=127,Oe(d)}n(!1,"missing s")}(e.s,e.yParityAndS),{networkV:o,v:a}=function(l,u,d){if(l!=null){const h=Qe(l);return{networkV:h>=KA?h:void 0,v:nc.getNormalizedV(h)}}if(u!=null)return n(nr(u,32),"invalid yParityAndS"),{v:Yt(u)[0]&128?28:27};if(d!=null){switch(Qt(d,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}n(!1,"invalid yParity")}n(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),c=new nc(ry,s,i,a);return o&&L(c,Jp,o),n(e.yParity==null||Qt(e.yParity,"sig.yParity")===c.yParity,"yParity mismatch"),n(e.yParityAndS==null||e.yParityAndS===c.yParityAndS,"yParityAndS mismatch"),c}};A0=new WeakMap,al=new WeakMap,S0=new WeakMap,Jp=new WeakMap;let ho=nc;var xu;const fp=class fp{constructor(e){Y(this,xu);J(e0(e)===32,"invalid private key","privateKey","[REDACTED]"),L(this,xu,Oe(e))}get privateKey(){return _(this,xu)}get publicKey(){return fp.computePublicKey(_(this,xu))}get compressedPublicKey(){return fp.computePublicKey(_(this,xu),!0)}sign(e){J(e0(e)===32,"invalid digest length","digest",e);const n=qd.sign(yi(e),yi(_(this,xu)),{lowS:!0});return ho.from({r:_f(n.r,32),s:_f(n.s,32),v:n.recovery?28:27})}computeSharedSecret(e){const n=fp.computePublicKey(e);return Oe(qd.getSharedSecret(yi(_(this,xu)),Yt(n),!1))}static computePublicKey(e,n){let r=Yt(e,"key");if(r.length===32){const i=qd.getPublicKey(r,!!n);return Oe(i)}if(r.length===64){const i=new Uint8Array(65);i[0]=4,i.set(r,1),r=i}const s=qd.ProjectivePoint.fromHex(r);return Oe(s.toRawBytes(n))}static recoverPublicKey(e,n){J(e0(e)===32,"invalid digest length","digest",e);const r=ho.from(n);let s=qd.Signature.fromCompact(yi(Ir([r.r,r.s])));s=s.addRecoveryBit(r.yParity);const i=s.recoverPublicKey(yi(e));return J(i!=null,"invalid signature for digest","signature",n),"0x"+i.toHex(!1)}static addPoints(e,n,r){const s=qd.ProjectivePoint.fromHex(fp.computePublicKey(e).substring(2)),i=qd.ProjectivePoint.fromHex(fp.computePublicKey(n).substring(2));return"0x"+s.add(i).toHex(!!r)}};xu=new WeakMap;let ZC=fp;const _ze=BigInt(0),Aze=BigInt(36);function z7(t){t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=e[s].charCodeAt(0);const r=Yt($r(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(r[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}const sB={};for(let t=0;t<10;t++)sB[String(t)]=String(t);for(let t=0;t<26;t++)sB[String.fromCharCode(65+t)]=String(10+t);const H7=15;function Sze(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(r=>sB[r]).join("");for(;e.length>=H7;){let r=e.substring(0,H7);e=parseInt(r,10)%97+e.substring(r.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}const xze=function(){const t={};for(let e=0;e<36;e++){const n="0123456789abcdefghijklmnopqrstuvwxyz"[e];t[n]=BigInt(e)}return t}();function Ize(t){t=t.toLowerCase();let e=_ze;for(let n=0;n<t.length;n++)e=e*Aze+xze[t[n]];return e}function Sn(t){if(J(typeof t=="string","invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);const e=z7(t);return J(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){J(t.substring(2,4)===Sze(t),"bad icap checksum","address",t);let e=Ize(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return z7("0x"+e)}J(!1,"invalid address","address",t)}function Nze(t){const e=Sn(t.from);let r=Qe(t.nonce,"tx.nonce").toString(16);return r==="0"?r="0x":r.length%2?r="0x0"+r:r="0x"+r,Sn(_r($r(Sf([e,r])),12))}function fte(t){return t&&typeof t.getAddress=="function"}async function JO(t,e){const n=await e;return(n==null||n==="0x0000000000000000000000000000000000000000")&&(me(typeof t!="string","unconfigured name","UNCONFIGURED_NAME",{value:t}),J(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),Sn(n)}function Ei(t,e){if(typeof t=="string")return t.match(/^0x[0-9a-f]{40}$/i)?Sn(t):(me(e!=null,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),JO(t,e.resolveName(t)));if(fte(t))return JO(t,t.getAddress());if(t&&typeof t.then=="function")return JO(t,t);J(!1,"unsupported addressable value","target",t)}const gu={};function He(t,e){let n=!1;return e<0&&(n=!0,e*=-1),new ei(gu,`${n?"":"u"}int${e}`,t,{signed:n,width:e})}function gn(t,e){return new ei(gu,`bytes${e||""}`,t,{size:e})}const G7=Symbol.for("_ethers_typed");var Zp;const mu=class mu{constructor(e,n,r,s){se(this,"type");se(this,"value");Y(this,Zp);se(this,"_typedSymbol");s==null&&(s=null),DT(gu,e,"Typed"),wt(this,{_typedSymbol:G7,type:n,value:r}),L(this,Zp,s),this.format()}format(){if(this.type==="array")throw new Error("");if(this.type==="dynamicArray")throw new Error("");return this.type==="tuple"?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return this.type==="string"}get tupleName(){if(this.type!=="tuple")throw TypeError("not a tuple");return _(this,Zp)}get arrayLength(){if(this.type!=="array")throw TypeError("not an array");return _(this,Zp)===!0?-1:_(this,Zp)===!1?this.value.length:null}static from(e,n){return new mu(gu,e,n)}static uint8(e){return He(e,8)}static uint16(e){return He(e,16)}static uint24(e){return He(e,24)}static uint32(e){return He(e,32)}static uint40(e){return He(e,40)}static uint48(e){return He(e,48)}static uint56(e){return He(e,56)}static uint64(e){return He(e,64)}static uint72(e){return He(e,72)}static uint80(e){return He(e,80)}static uint88(e){return He(e,88)}static uint96(e){return He(e,96)}static uint104(e){return He(e,104)}static uint112(e){return He(e,112)}static uint120(e){return He(e,120)}static uint128(e){return He(e,128)}static uint136(e){return He(e,136)}static uint144(e){return He(e,144)}static uint152(e){return He(e,152)}static uint160(e){return He(e,160)}static uint168(e){return He(e,168)}static uint176(e){return He(e,176)}static uint184(e){return He(e,184)}static uint192(e){return He(e,192)}static uint200(e){return He(e,200)}static uint208(e){return He(e,208)}static uint216(e){return He(e,216)}static uint224(e){return He(e,224)}static uint232(e){return He(e,232)}static uint240(e){return He(e,240)}static uint248(e){return He(e,248)}static uint256(e){return He(e,256)}static uint(e){return He(e,256)}static int8(e){return He(e,-8)}static int16(e){return He(e,-16)}static int24(e){return He(e,-24)}static int32(e){return He(e,-32)}static int40(e){return He(e,-40)}static int48(e){return He(e,-48)}static int56(e){return He(e,-56)}static int64(e){return He(e,-64)}static int72(e){return He(e,-72)}static int80(e){return He(e,-80)}static int88(e){return He(e,-88)}static int96(e){return He(e,-96)}static int104(e){return He(e,-104)}static int112(e){return He(e,-112)}static int120(e){return He(e,-120)}static int128(e){return He(e,-128)}static int136(e){return He(e,-136)}static int144(e){return He(e,-144)}static int152(e){return He(e,-152)}static int160(e){return He(e,-160)}static int168(e){return He(e,-168)}static int176(e){return He(e,-176)}static int184(e){return He(e,-184)}static int192(e){return He(e,-192)}static int200(e){return He(e,-200)}static int208(e){return He(e,-208)}static int216(e){return He(e,-216)}static int224(e){return He(e,-224)}static int232(e){return He(e,-232)}static int240(e){return He(e,-240)}static int248(e){return He(e,-248)}static int256(e){return He(e,-256)}static int(e){return He(e,-256)}static bytes1(e){return gn(e,1)}static bytes2(e){return gn(e,2)}static bytes3(e){return gn(e,3)}static bytes4(e){return gn(e,4)}static bytes5(e){return gn(e,5)}static bytes6(e){return gn(e,6)}static bytes7(e){return gn(e,7)}static bytes8(e){return gn(e,8)}static bytes9(e){return gn(e,9)}static bytes10(e){return gn(e,10)}static bytes11(e){return gn(e,11)}static bytes12(e){return gn(e,12)}static bytes13(e){return gn(e,13)}static bytes14(e){return gn(e,14)}static bytes15(e){return gn(e,15)}static bytes16(e){return gn(e,16)}static bytes17(e){return gn(e,17)}static bytes18(e){return gn(e,18)}static bytes19(e){return gn(e,19)}static bytes20(e){return gn(e,20)}static bytes21(e){return gn(e,21)}static bytes22(e){return gn(e,22)}static bytes23(e){return gn(e,23)}static bytes24(e){return gn(e,24)}static bytes25(e){return gn(e,25)}static bytes26(e){return gn(e,26)}static bytes27(e){return gn(e,27)}static bytes28(e){return gn(e,28)}static bytes29(e){return gn(e,29)}static bytes30(e){return gn(e,30)}static bytes31(e){return gn(e,31)}static bytes32(e){return gn(e,32)}static address(e){return new mu(gu,"address",e)}static bool(e){return new mu(gu,"bool",!!e)}static bytes(e){return new mu(gu,"bytes",e)}static string(e){return new mu(gu,"string",e)}static array(e,n){throw new Error("not implemented yet")}static tuple(e,n){throw new Error("not implemented yet")}static overrides(e){return new mu(gu,"overrides",Object.assign({},e))}static isTyped(e){return e&&typeof e=="object"&&"_typedSymbol"in e&&e._typedSymbol===G7}static dereference(e,n){if(mu.isTyped(e)){if(e.type!==n)throw new Error(`invalid type: expecetd ${n}, got ${e.type}`);return e.value}return e}};Zp=new WeakMap;let ei=mu;class Tze extends yd{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,n){let r=ei.dereference(n,"string");try{r=Sn(r)}catch(s){return this._throwError(s.message,n)}return e.writeValue(r)}decode(e){return Sn(_f(e.readValue(),20))}}class Rze extends yd{constructor(n){super(n.name,n.type,"_",n.dynamic);se(this,"coder");this.coder=n}defaultValue(){return this.coder.defaultValue()}encode(n,r){return this.coder.encode(n,r)}decode(n){return this.coder.decode(n)}}function pte(t,e,n){let r=[];if(Array.isArray(n))r=n;else if(n&&typeof n=="object"){let c={};r=e.map(l=>{const u=l.localName;return me(u,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),me(!c[u],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:l},value:n}),c[u]=!0,n[u]})}else J(!1,"invalid tuple value","tuple",n);J(e.length===r.length,"types/value length mismatch","tuple",n);let s=new e5,i=new e5,o=[];e.forEach((c,l)=>{let u=r[l];if(c.dynamic){let d=i.length;c.encode(i,u);let h=s.writeUpdatableValue();o.push(f=>{h(f+d)})}else c.encode(s,u)}),o.forEach(c=>{c(s.length)});let a=t.appendWriter(s);return a+=t.appendWriter(i),a}function gte(t,e){let n=[],r=[],s=t.subReader(0);return e.forEach(i=>{let o=null;if(i.dynamic){let a=t.readIndex(),c=s.subReader(a);try{o=i.decode(c)}catch(l){if(Os(l,"BUFFER_OVERRUN"))throw l;o=l,o.baseType=i.name,o.name=i.localName,o.type=i.type}}else try{o=i.decode(t)}catch(a){if(Os(a,"BUFFER_OVERRUN"))throw a;o=a,o.baseType=i.name,o.name=i.localName,o.type=i.type}if(o==null)throw new Error("investigate");n.push(o),r.push(i.localName||null)}),$w.fromItems(n,r)}class Pze extends yd{constructor(n,r,s){const i=n.type+"["+(r>=0?r:"")+"]",o=r===-1||n.dynamic;super("array",i,s,o);se(this,"coder");se(this,"length");wt(this,{coder:n,length:r})}defaultValue(){const n=this.coder.defaultValue(),r=[];for(let s=0;s<this.length;s++)r.push(n);return r}encode(n,r){const s=ei.dereference(r,"array");Array.isArray(s)||this._throwError("expected array value",s);let i=this.length;i===-1&&(i=s.length,n.writeValue(s.length)),Aee(s.length,i,"coder array"+(this.localName?" "+this.localName:""));let o=[];for(let a=0;a<s.length;a++)o.push(this.coder);return pte(n,o,s)}decode(n){let r=this.length;r===-1&&(r=n.readIndex(),me(r*vi<=n.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:n.bytes,offset:r*vi,length:n.dataLength}));let s=[];for(let i=0;i<r;i++)s.push(new Rze(this.coder));return gte(n,s)}}class Oze extends yd{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,n){const r=ei.dereference(n,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class mte extends yd{constructor(e,n){super(e,e,n,!0)}defaultValue(){return"0x"}encode(e,n){n=yi(n);let r=e.writeValue(n.length);return r+=e.writeBytes(n),r}decode(e){return e.readBytes(e.readIndex(),!0)}}class kze extends mte{constructor(e){super("bytes",e)}decode(e){return Oe(super.decode(e))}}class Dze extends yd{constructor(n,r){let s="bytes"+String(n);super(s,s,r,!1);se(this,"size");wt(this,{size:n},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(n,r){let s=yi(ei.dereference(r,this.type));return s.length!==this.size&&this._throwError("incorrect data length",r),n.writeBytes(s)}decode(n){return Oe(n.readBytes(this.size))}}const Mze=new Uint8Array([]);class Lze extends yd{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,n){return n!=null&&this._throwError("not null",n),e.writeBytes(Mze)}decode(e){return e.readBytes(0),null}}const Uze=BigInt(0),Bze=BigInt(1),$ze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Fze extends yd{constructor(n,r,s){const i=(r?"int":"uint")+n*8;super(i,i,s,!1);se(this,"size");se(this,"signed");wt(this,{size:n,signed:r},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(n,r){let s=Qe(ei.dereference(r,this.type)),i=Dv($ze,vi*8);if(this.signed){let o=Dv(i,this.size*8-1);(s>o||s<-(o+Bze))&&this._throwError("value out-of-bounds",r),s=Iee(s,8*vi)}else(s<Uze||s>Dv(i,this.size*8))&&this._throwError("value out-of-bounds",r);return n.writeValue(s)}decode(n){let r=Dv(n.readValue(),this.size*8);return this.signed&&(r=U7e(r,this.size*8)),r}}class jze extends mte{constructor(e){super("string",e)}defaultValue(){return""}encode(e,n){return super.encode(e,Ju(ei.dereference(n,"string")))}decode(e){return II(super.decode(e))}}class YA extends yd{constructor(n,r){let s=!1;const i=[];n.forEach(a=>{a.dynamic&&(s=!0),i.push(a.type)});const o="tuple("+i.join(",")+")";super("tuple",o,r,s);se(this,"coders");wt(this,{coders:Object.freeze(n.slice())})}defaultValue(){const n=[];this.coders.forEach(s=>{n.push(s.defaultValue())});const r=this.coders.reduce((s,i)=>{const o=i.localName;return o&&(s[o]||(s[o]=0),s[o]++),s},{});return this.coders.forEach((s,i)=>{let o=s.localName;!o||r[o]!==1||(o==="length"&&(o="_length"),n[o]==null&&(n[o]=n[i]))}),Object.freeze(n)}encode(n,r){const s=ei.dereference(r,"tuple");return pte(n,this.coders,s)}decode(n){return gte(n,this.coders)}}function ZO(t,e){return{address:Sn(t),storageKeys:e.map((n,r)=>(J(nr(n,32),"invalid slot",`storageKeys[${r}]`,n),n.toLowerCase()))}}function bm(t){if(Array.isArray(t))return t.map((n,r)=>Array.isArray(n)?(J(n.length===2,"invalid slot set",`value[${r}]`,n),ZO(n[0],n[1])):(J(n!=null&&typeof n=="object","invalid address-slot set","value",t),ZO(n.address,n.storageKeys)));J(t!=null&&typeof t=="object","invalid access list","value",t);const e=Object.keys(t).map(n=>{const r=t[n].reduce((s,i)=>(s[i]=!0,s),{});return ZO(n,Object.keys(r).sort())});return e.sort((n,r)=>n.address.localeCompare(r.address)),e}function yte(t){return{address:Sn(t.address),nonce:Qe(t.nonce!=null?t.nonce:0),chainId:Qe(t.chainId!=null?t.chainId:0),signature:ho.from(t.signature)}}function Wze(t){let e;return typeof t=="string"?e=ZC.computePublicKey(t,!1):e=t.publicKey,Sn($r("0x"+e.substring(4)).substring(26))}function zze(t,e){return Wze(ZC.recoverPublicKey(t,e))}const ds=BigInt(0),Hze=BigInt(2),Gze=BigInt(27),qze=BigInt(28),Vze=BigInt(35),Kze=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),XO=4096*32;function Yze(t){return{blobToKzgCommitment:r=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Yt(t.blobToKzgCommitment(Oe(r)))}else if("blobToKzgCommitment"in t&&typeof t.blobToKzgCommitment=="function")return Yt(t.blobToKzgCommitment(r));if("blobToKZGCommitment"in t&&typeof t.blobToKZGCommitment=="function")return Yt(t.blobToKZGCommitment(Oe(r)));J(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(r,s)=>{if("computeBlobProof"in t&&typeof t.computeBlobProof=="function")return Yt(t.computeBlobProof(Oe(r),Oe(s)));if("computeBlobKzgProof"in t&&typeof t.computeBlobKzgProof=="function")return t.computeBlobKzgProof(r,s);if("computeBlobKZGProof"in t&&typeof t.computeBlobKZGProof=="function")return Yt(t.computeBlobKZGProof(Oe(r),Oe(s)));J(!1,"unsupported KZG library","kzg",t)}}}function q7(t,e){let n=t.toString(16);for(;n.length<2;)n="0"+n;return n+=Cb(e).substring(4),"0x"+n}function _b(t){return t==="0x"?null:Sn(t)}function FT(t,e){try{return bm(t)}catch(n){J(!1,n.message,e,t)}}function Qze(t,e){try{if(!Array.isArray(t))throw new Error("authorizationList: invalid array");const n=[];for(let r=0;r<t.length;r++){const s=t[r];if(!Array.isArray(s))throw new Error(`authorization[${r}]: invalid array`);if(s.length!==6)throw new Error(`authorization[${r}]: wrong length`);if(!s[1])throw new Error(`authorization[${r}]: null address`);n.push({address:_b(s[1]),nonce:jn(s[2],"nonce"),chainId:jn(s[0],"chainId"),signature:ho.from({yParity:vm(s[3],"yParity"),r:ud(s[4],32),s:ud(s[5],32)})})}return n}catch(n){J(!1,n.message,e,t)}}function vm(t,e){return t==="0x"?0:Qt(t,e)}function jn(t,e){if(t==="0x")return ds;const n=Qe(t,e);return J(n<=Kze,"value exceeds uint size",e,n),n}function sn(t,e){const n=Qe(t,"value"),r=Jr(n);return J(r.length<=32,"value too large",`tx.${e}`,n),r}function jT(t){return bm(t).map(e=>[e.address,e.storageKeys])}function Jze(t){return t.map(e=>[sn(e.chainId,"chainId"),e.address,sn(e.nonce,"nonce"),sn(e.signature.yParity,"yParity"),Jr(e.signature.r),Jr(e.signature.s)])}function Zze(t,e){J(Array.isArray(t),`invalid ${e}`,"value",t);for(let n=0;n<t.length;n++)J(nr(t[n],32),"invalid ${ param } hash",`value[${n}]`,t[n]);return t}function Xze(t){const e=v1(t);J(Array.isArray(e)&&(e.length===9||e.length===6),"invalid field count for legacy transaction","data",t);const n={type:0,nonce:vm(e[0],"nonce"),gasPrice:jn(e[1],"gasPrice"),gasLimit:jn(e[2],"gasLimit"),to:_b(e[3]),value:jn(e[4],"value"),data:Oe(e[5]),chainId:ds};if(e.length===6)return n;const r=jn(e[6],"v"),s=jn(e[7],"r"),i=jn(e[8],"s");if(s===ds&&i===ds)n.chainId=r;else{let o=(r-Vze)/Hze;o<ds&&(o=ds),n.chainId=o,J(o!==ds||r===Gze||r===qze,"non-canonical legacy v","v",e[6]),n.signature=ho.from({r:ud(e[7],32),s:ud(e[8],32),v:r})}return n}function eHe(t,e){const n=[sn(t.nonce,"nonce"),sn(t.gasPrice||0,"gasPrice"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data];let r=ds;if(t.chainId!=ds)r=Qe(t.chainId,"tx.chainId"),J(!e||e.networkV==null||e.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){const i=t.signature.legacyChainId;i!=null&&(r=i)}if(!e)return r!==ds&&(n.push(Jr(r)),n.push("0x"),n.push("0x")),Sf(n);let s=BigInt(27+e.yParity);return r!==ds?s=ho.getChainIdV(r,e.v):BigInt(e.v)!==s&&J(!1,"tx.chainId/sig.v mismatch","sig",e),n.push(Jr(s)),n.push(Jr(e.r)),n.push(Jr(e.s)),Sf(n)}function WT(t,e){let n;try{if(n=vm(e[0],"yParity"),n!==0&&n!==1)throw new Error("bad yParity")}catch{J(!1,"invalid yParity","yParity",e[0])}const r=ud(e[1],32),s=ud(e[2],32),i=ho.from({r,s,yParity:n});t.signature=i}function tHe(t){const e=v1(Yt(t).slice(1));J(Array.isArray(e)&&(e.length===9||e.length===12),"invalid field count for transaction type: 2","data",Oe(t));const n={type:2,chainId:jn(e[0],"chainId"),nonce:vm(e[1],"nonce"),maxPriorityFeePerGas:jn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:jn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:jn(e[4],"gasLimit"),to:_b(e[5]),value:jn(e[6],"value"),data:Oe(e[7]),accessList:FT(e[8],"accessList")};return e.length===9||WT(n,e.slice(9)),n}function nHe(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,jT(t.accessList||[])];return e&&(n.push(sn(e.yParity,"yParity")),n.push(Jr(e.r)),n.push(Jr(e.s))),Ir(["0x02",Sf(n)])}function rHe(t){const e=v1(Yt(t).slice(1));J(Array.isArray(e)&&(e.length===8||e.length===11),"invalid field count for transaction type: 1","data",Oe(t));const n={type:1,chainId:jn(e[0],"chainId"),nonce:vm(e[1],"nonce"),gasPrice:jn(e[2],"gasPrice"),gasLimit:jn(e[3],"gasLimit"),to:_b(e[4]),value:jn(e[5],"value"),data:Oe(e[6]),accessList:FT(e[7],"accessList")};return e.length===8||WT(n,e.slice(8)),n}function sHe(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.gasPrice||0,"gasPrice"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,jT(t.accessList||[])];return e&&(n.push(sn(e.yParity,"recoveryParam")),n.push(Jr(e.r)),n.push(Jr(e.s))),Ir(["0x01",Sf(n)])}function iHe(t){let e=v1(Yt(t).slice(1)),n="3",r=null;if(e.length===4&&Array.isArray(e[0])){n="3 (network format)";const i=e[1],o=e[2],a=e[3];J(Array.isArray(i),"invalid network format: blobs not an array","fields[1]",i),J(Array.isArray(o),"invalid network format: commitments not an array","fields[2]",o),J(Array.isArray(a),"invalid network format: proofs not an array","fields[3]",a),J(i.length===o.length,"invalid network format: blobs/commitments length mismatch","fields",e),J(i.length===a.length,"invalid network format: blobs/proofs length mismatch","fields",e),r=[];for(let c=0;c<e[1].length;c++)r.push({data:i[c],commitment:o[c],proof:a[c]});e=e[0]}J(Array.isArray(e)&&(e.length===11||e.length===14),`invalid field count for transaction type: ${n}`,"data",Oe(t));const s={type:3,chainId:jn(e[0],"chainId"),nonce:vm(e[1],"nonce"),maxPriorityFeePerGas:jn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:jn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:jn(e[4],"gasLimit"),to:_b(e[5]),value:jn(e[6],"value"),data:Oe(e[7]),accessList:FT(e[8],"accessList"),maxFeePerBlobGas:jn(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};r&&(s.blobs=r),J(s.to!=null,`invalid address for transaction type: ${n}`,"data",t),J(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let i=0;i<s.blobVersionedHashes.length;i++)J(nr(s.blobVersionedHashes[i],32),`invalid blobVersionedHash at index ${i}: must be length 32`,"data",t);return e.length===11||WT(s,e.slice(11)),s}function oHe(t,e,n){const r=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||JC,sn(t.value,"value"),t.data,jT(t.accessList||[]),sn(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Zze(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(r.push(sn(e.yParity,"yParity")),r.push(Jr(e.r)),r.push(Jr(e.s)),n)?Ir(["0x03",Sf([r,n.map(s=>s.data),n.map(s=>s.commitment),n.map(s=>s.proof)])]):Ir(["0x03",Sf(r)])}function aHe(t){const e=v1(Yt(t).slice(1));J(Array.isArray(e)&&(e.length===10||e.length===13),"invalid field count for transaction type: 4","data",Oe(t));const n={type:4,chainId:jn(e[0],"chainId"),nonce:vm(e[1],"nonce"),maxPriorityFeePerGas:jn(e[2],"maxPriorityFeePerGas"),maxFeePerGas:jn(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:jn(e[4],"gasLimit"),to:_b(e[5]),value:jn(e[6],"value"),data:Oe(e[7]),accessList:FT(e[8],"accessList"),authorizationList:Qze(e[9],"authorizationList")};return e.length===10||WT(n,e.slice(10)),n}function cHe(t,e){const n=[sn(t.chainId,"chainId"),sn(t.nonce,"nonce"),sn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),sn(t.maxFeePerGas||0,"maxFeePerGas"),sn(t.gasLimit,"gasLimit"),t.to||"0x",sn(t.value,"value"),t.data,jT(t.accessList||[]),Jze(t.authorizationList||[])];return e&&(n.push(sn(e.yParity,"yParity")),n.push(Jr(e.r)),n.push(Jr(e.s))),Ir(["0x04",Sf(n)])}var uc,x0,I0,N0,T0,R0,P0,O0,k0,D0,M0,L0,Xp,yh,cl,wh,U0,B0,$S;const nl=class nl{constructor(){Y(this,B0);Y(this,uc);Y(this,x0);Y(this,I0);Y(this,N0);Y(this,T0);Y(this,R0);Y(this,P0);Y(this,O0);Y(this,k0);Y(this,D0);Y(this,M0);Y(this,L0);Y(this,Xp);Y(this,yh);Y(this,cl);Y(this,wh);Y(this,U0);L(this,uc,null),L(this,x0,null),L(this,N0,0),L(this,T0,ds),L(this,R0,null),L(this,P0,null),L(this,O0,null),L(this,I0,"0x"),L(this,k0,ds),L(this,D0,ds),L(this,M0,null),L(this,L0,null),L(this,Xp,null),L(this,yh,null),L(this,cl,null),L(this,wh,null),L(this,U0,null)}get type(){return _(this,uc)}set type(e){switch(e){case null:L(this,uc,null);break;case 0:case"legacy":L(this,uc,0);break;case 1:case"berlin":case"eip-2930":L(this,uc,1);break;case 2:case"london":case"eip-1559":L(this,uc,2);break;case 3:case"cancun":case"eip-4844":L(this,uc,3);break;case 4:case"pectra":case"eip-7702":L(this,uc,4);break;default:J(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=_(this,x0);return e==null&&this.type===3?JC:e}set to(e){L(this,x0,e==null?null:Sn(e))}get nonce(){return _(this,N0)}set nonce(e){L(this,N0,Qt(e,"value"))}get gasLimit(){return _(this,T0)}set gasLimit(e){L(this,T0,Qe(e))}get gasPrice(){const e=_(this,R0);return e==null&&(this.type===0||this.type===1)?ds:e}set gasPrice(e){L(this,R0,e==null?null:Qe(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=_(this,P0);return e??(this.type===2||this.type===3?ds:null)}set maxPriorityFeePerGas(e){L(this,P0,e==null?null:Qe(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=_(this,O0);return e??(this.type===2||this.type===3?ds:null)}set maxFeePerGas(e){L(this,O0,e==null?null:Qe(e,"maxFeePerGas"))}get data(){return _(this,I0)}set data(e){L(this,I0,Oe(e))}get value(){return _(this,k0)}set value(e){L(this,k0,Qe(e,"value"))}get chainId(){return _(this,D0)}set chainId(e){L(this,D0,Qe(e))}get signature(){return _(this,M0)||null}set signature(e){L(this,M0,e==null?null:ho.from(e))}get accessList(){const e=_(this,L0)||null;return e??(this.type===1||this.type===2||this.type===3?[]:null)}set accessList(e){L(this,L0,e==null?null:bm(e))}get authorizationList(){const e=_(this,U0)||null;return e==null&&this.type===4?[]:e}set authorizationList(e){L(this,U0,e==null?null:e.map(n=>yte(n)))}get maxFeePerBlobGas(){const e=_(this,Xp);return e==null&&this.type===3?ds:e}set maxFeePerBlobGas(e){L(this,Xp,e==null?null:Qe(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=_(this,yh);return e==null&&this.type===3?[]:e}set blobVersionedHashes(e){if(e!=null){J(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let n=0;n<e.length;n++)J(nr(e[n],32),"invalid blobVersionedHash",`value[${n}]`,e[n])}L(this,yh,e)}get blobs(){return _(this,wh)==null?null:_(this,wh).map(e=>Object.assign({},e))}set blobs(e){if(e==null){L(this,wh,null);return}const n=[],r=[];for(let s=0;s<e.length;s++){const i=e[s];if(KU(i)){me(_(this,cl),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let o=Yt(i);if(J(o.length<=XO,"blob is too large",`blobs[${s}]`,i),o.length!==XO){const l=new Uint8Array(XO);l.set(o),o=l}const a=_(this,cl).blobToKzgCommitment(o),c=Oe(_(this,cl).computeBlobKzgProof(o,a));n.push({data:Oe(o),commitment:Oe(a),proof:c}),r.push(q7(1,a))}else{const o=Oe(i.commitment);n.push({data:Oe(i.data),commitment:o,proof:Oe(i.proof)}),r.push(q7(1,o))}}L(this,wh,n),L(this,yh,r)}get kzg(){return _(this,cl)}set kzg(e){e==null?L(this,cl,null):L(this,cl,Yze(e))}get hash(){return this.signature==null?null:$r(de(this,B0,$S).call(this,!0,!1))}get unsignedHash(){return $r(this.unsignedSerialized)}get from(){return this.signature==null?null:zze(this.unsignedHash,this.signature)}get fromPublicKey(){return this.signature==null?null:ZC.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return this.signature!=null}get serialized(){return de(this,B0,$S).call(this,!0,!0)}get unsignedSerialized(){return de(this,B0,$S).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=this.gasPrice!=null,n=this.maxFeePerGas!=null||this.maxPriorityFeePerGas!=null,r=this.accessList!=null,s=_(this,Xp)!=null||_(this,yh);this.maxFeePerGas!=null&&this.maxPriorityFeePerGas!=null&&me(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),me(!n||this.type!==0&&this.type!==1,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),me(this.type!==0||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return this.type!=null?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):n?i.push(2):e?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(s&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}clone(){return nl.from(this)}toJSON(){const e=n=>n==null?null:n.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(e==null)return new nl;if(typeof e=="string"){const r=Yt(e);if(r[0]>=127)return nl.from(Xze(r));switch(r[0]){case 1:return nl.from(rHe(r));case 2:return nl.from(tHe(r));case 3:return nl.from(iHe(r));case 4:return nl.from(aHe(r))}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const n=new nl;return e.type!=null&&(n.type=e.type),e.to!=null&&(n.to=e.to),e.nonce!=null&&(n.nonce=e.nonce),e.gasLimit!=null&&(n.gasLimit=e.gasLimit),e.gasPrice!=null&&(n.gasPrice=e.gasPrice),e.maxPriorityFeePerGas!=null&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas),e.maxFeePerGas!=null&&(n.maxFeePerGas=e.maxFeePerGas),e.maxFeePerBlobGas!=null&&(n.maxFeePerBlobGas=e.maxFeePerBlobGas),e.data!=null&&(n.data=e.data),e.value!=null&&(n.value=e.value),e.chainId!=null&&(n.chainId=e.chainId),e.signature!=null&&(n.signature=ho.from(e.signature)),e.accessList!=null&&(n.accessList=e.accessList),e.authorizationList!=null&&(n.authorizationList=e.authorizationList),e.blobVersionedHashes!=null&&(n.blobVersionedHashes=e.blobVersionedHashes),e.kzg!=null&&(n.kzg=e.kzg),e.blobs!=null&&(n.blobs=e.blobs),e.hash!=null&&(J(n.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),J(n.hash===e.hash,"hash mismatch","tx",e)),e.from!=null&&(J(n.isSigned(),"unsigned transaction cannot define '.from'","tx",e),J(n.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),n}};uc=new WeakMap,x0=new WeakMap,I0=new WeakMap,N0=new WeakMap,T0=new WeakMap,R0=new WeakMap,P0=new WeakMap,O0=new WeakMap,k0=new WeakMap,D0=new WeakMap,M0=new WeakMap,L0=new WeakMap,Xp=new WeakMap,yh=new WeakMap,cl=new WeakMap,wh=new WeakMap,U0=new WeakMap,B0=new WeakSet,$S=function(e,n){me(!e||this.signature!=null,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const r=e?this.signature:null;switch(this.inferType()){case 0:return eHe(this,r);case 1:return sHe(this,r);case 2:return nHe(this,r);case 3:return oHe(this,r,n?this.blobs:null);case 4:return cHe(this,r)}me(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})};let TI=nl;function Vg(t){return $r(Ju(t))}var lHe="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const V7=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),K7=4;function uHe(t){let e=0;function n(){return t[e++]<<8|t[e++]}let r=n(),s=1,i=[0,1];for(let C=1;C<r;C++)i.push(s+=n());let o=n(),a=e;e+=o;let c=0,l=0;function u(){return c==0&&(l=l<<8|t[e++],c=8),l>>--c&1}const d=31,h=2**d,f=h>>>1,p=f>>1,g=h-1;let w=0;for(let C=0;C<d;C++)w=w<<1|u();let m=[],b=0,v=h;for(;;){let C=Math.floor(((w-b+1)*s-1)/v),T=0,x=r;for(;x-T>1;){let D=T+x>>>1;C<i[D]?x=D:T=D}if(T==0)break;m.push(T);let N=b+Math.floor(v*i[T]/s),S=b+Math.floor(v*i[T+1]/s)-1;for(;!((N^S)&f);)w=w<<1&g|u(),N=N<<1&g,S=S<<1&g|1;for(;N&~S&p;)w=w&f|w<<1&g>>>1|u(),N=N<<1^f,S=(S^f)<<1|f|1;b=N,v=1+S-N}let A=r-4;return m.map(C=>{switch(C-A){case 3:return A+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return A+256+(t[a++]<<8|t[a++]);case 1:return A+t[a++];default:return C-1}})}function dHe(t){let e=0;return()=>t[e++]}function wte(t){return dHe(uHe(hHe(t)))}function hHe(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((s,i)=>e[s.charCodeAt(0)]=i);let n=t.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|e[t.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}function fHe(t){return t&1?~t>>1:t>>1}function pHe(t,e){let n=Array(t);for(let r=0,s=0;r<t;r++)n[r]=s+=fHe(e());return n}function XC(t,e=0){let n=[];for(;;){let r=t(),s=t();if(!s)break;e+=r;for(let i=0;i<s;i++)n.push(e+i);e+=s+1}return n}function bte(t){return e_(()=>{let e=XC(t);if(e.length)return e})}function vte(t){let e=[];for(;;){let n=t();if(n==0)break;e.push(gHe(n,t))}for(;;){let n=t()-1;if(n<0)break;e.push(mHe(n,t))}return e.flat()}function e_(t){let e=[];for(;;){let n=t(e.length);if(!n)break;e.push(n)}return e}function Ete(t,e,n){let r=Array(t).fill().map(()=>[]);for(let s=0;s<e;s++)pHe(t,n).forEach((i,o)=>r[o].push(i));return r}function gHe(t,e){let n=1+e(),r=e(),s=e_(e);return Ete(s.length,1+t,e).flatMap((o,a)=>{let[c,...l]=o;return Array(s[a]).fill().map((u,d)=>{let h=d*r;return[c+d*n,l.map(f=>f+h)]})})}function mHe(t,e){let n=1+e();return Ete(n,1+t,e).map(s=>[s[0],s.slice(1)])}function yHe(t){let e=[],n=XC(t);return s(r([]),[]),e;function r(i){let o=t(),a=e_(()=>{let c=XC(t).map(l=>n[l]);if(c.length)return r(c)});return{S:o,B:a,Q:i}}function s({S:i,B:o},a,c){if(!(i&4&&c===a[a.length-1])){i&2&&(c=a[a.length-1]),i&1&&e.push(a);for(let l of o)for(let u of l.Q)s(l,[...a,u],c)}}}function wHe(t){return t.toString(16).toUpperCase().padStart(2,"0")}function Cte(t){return`{${wHe(t)}}`}function bHe(t){let e=[];for(let n=0,r=t.length;n<r;){let s=t.codePointAt(n);n+=s<65536?1:2,e.push(s)}return e}function Hw(t){let n=t.length;if(n<4096)return String.fromCodePoint(...t);let r=[];for(let s=0;s<n;)r.push(String.fromCodePoint(...t.slice(s,s+=4096)));return r.join("")}function vHe(t,e){let n=t.length,r=n-e.length;for(let s=0;r==0&&s<n;s++)r=t[s]-e[s];return r}var EHe="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const t_=44032,RI=4352,PI=4449,OI=4519,_te=19,Ate=21,Gw=28,kI=Ate*Gw,CHe=_te*kI,_He=t_+CHe,AHe=RI+_te,SHe=PI+Ate,xHe=OI+Gw;function Lv(t){return t>>24&255}function Ste(t){return t&16777215}let c5,Y7,l5,FS;function IHe(){let t=wte(EHe);c5=new Map(bte(t).flatMap((e,n)=>e.map(r=>[r,n+1<<24]))),Y7=new Set(XC(t)),l5=new Map,FS=new Map;for(let[e,n]of vte(t)){if(!Y7.has(e)&&n.length==2){let[r,s]=n,i=FS.get(r);i||(i=new Map,FS.set(r,i)),i.set(s,e)}l5.set(e,n.reverse())}}function xte(t){return t>=t_&&t<_He}function NHe(t,e){if(t>=RI&&t<AHe&&e>=PI&&e<SHe)return t_+(t-RI)*kI+(e-PI)*Gw;if(xte(t)&&e>OI&&e<xHe&&(t-t_)%Gw==0)return t+(e-OI);{let n=FS.get(t);return n&&(n=n.get(e),n)?n:-1}}function Ite(t){c5||IHe();let e=[],n=[],r=!1;function s(i){let o=c5.get(i);o&&(r=!0,i|=o),e.push(i)}for(let i of t)for(;;){if(i<128)e.push(i);else if(xte(i)){let o=i-t_,a=o/kI|0,c=o%kI/Gw|0,l=o%Gw;s(RI+a),s(PI+c),l>0&&s(OI+l)}else{let o=l5.get(i);o?n.push(...o):s(i)}if(!n.length)break;i=n.pop()}if(r&&e.length>1){let i=Lv(e[0]);for(let o=1;o<e.length;o++){let a=Lv(e[o]);if(a==0||i<=a){i=a;continue}let c=o-1;for(;;){let l=e[c+1];if(e[c+1]=e[c],e[c]=l,!c||(i=Lv(e[--c]),i<=a))break}i=Lv(e[o])}}return e}function THe(t){let e=[],n=[],r=-1,s=0;for(let i of t){let o=Lv(i),a=Ste(i);if(r==-1)o==0?r=a:e.push(a);else if(s>0&&s>=o)o==0?(e.push(r,...n),n.length=0,r=a):n.push(a),s=o;else{let c=NHe(r,a);c>=0?r=c:s==0&&o==0?(e.push(r),r=a):(n.push(a),s=o)}}return r>=0&&e.push(r,...n),e}function Nte(t){return Ite(t).map(Ste)}function RHe(t){return THe(Ite(t))}const Q7=45,Tte=".",Rte=65039,Pte=1,DI=t=>Array.from(t);function n_(t,e){return t.P.has(e)||t.Q.has(e)}class PHe extends Array{get is_emoji(){return!0}}let u5,Ote,Pp,d5,kte,t0,e2,dy,sp,J7,h5;function iB(){if(u5)return;let t=wte(lHe);const e=()=>XC(t),n=()=>new Set(e()),r=(u,d)=>d.forEach(h=>u.add(h));u5=new Map(vte(t)),Ote=n(),Pp=e(),d5=new Set(e().map(u=>Pp[u])),Pp=new Set(Pp),kte=n(),n();let s=bte(t),i=t();const o=()=>{let u=new Set;return e().forEach(d=>r(u,s[d])),r(u,e()),u};t0=e_(u=>{let d=e_(t).map(h=>h+96);if(d.length){let h=u>=i;d[0]-=32,d=Hw(d),h&&(d=`Restricted[${d}]`);let f=o(),p=o(),g=!t();return{N:d,P:f,Q:p,M:g,R:h}}}),e2=n(),dy=new Map;let a=e().concat(DI(e2)).sort((u,d)=>u-d);a.forEach((u,d)=>{let h=t(),f=a[d]=h?a[d-h]:{V:[],M:new Map};f.V.push(u),e2.has(u)||dy.set(u,f)});for(let{V:u,M:d}of new Set(dy.values())){let h=[];for(let p of u){let g=t0.filter(m=>n_(m,p)),w=h.find(({G:m})=>g.some(b=>m.has(b)));w||(w={G:new Set,V:[]},h.push(w)),w.V.push(p),r(w.G,g)}let f=h.flatMap(p=>DI(p.G));for(let{G:p,V:g}of h){let w=new Set(f.filter(m=>!p.has(m)));for(let m of g)d.set(m,w)}}sp=new Set;let c=new Set;const l=u=>sp.has(u)?c.add(u):sp.add(u);for(let u of t0){for(let d of u.P)l(d);for(let d of u.Q)l(d)}for(let u of sp)!dy.has(u)&&!c.has(u)&&dy.set(u,Pte);r(sp,Nte(sp)),J7=yHe(t).map(u=>PHe.from(u)).sort(vHe),h5=new Map;for(let u of J7){let d=[h5];for(let h of u){let f=d.map(p=>{let g=p.get(h);return g||(g=new Map,p.set(h,g)),g});h===Rte?d.push(...f):d=f}for(let h of d)h.V=u}}function oB(t){return(Dte(t)?"":`${aB(zT([t]))} `)+Cte(t)}function aB(t){return`"${t}"`}function OHe(t){if(t.length>=4&&t[2]==Q7&&t[3]==Q7)throw new Error(`invalid label extension: "${Hw(t.slice(0,4))}"`)}function kHe(t){for(let n=t.lastIndexOf(95);n>0;)if(t[--n]!==95)throw new Error("underscore allowed only at start")}function DHe(t){let e=t[0],n=V7.get(e);if(n)throw wE(`leading ${n}`);let r=t.length,s=-1;for(let i=1;i<r;i++){e=t[i];let o=V7.get(e);if(o){if(s==i)throw wE(`${n} + ${o}`);s=i+1,n=o}}if(s==r)throw wE(`trailing ${n}`)}function zT(t,e=1/0,n=Cte){let r=[];MHe(t[0])&&r.push(""),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,i=t.length;for(let o=0;o<i;o++){let a=t[o];Dte(a)&&(r.push(Hw(t.slice(s,o))),r.push(n(a)),s=o+1)}return r.push(Hw(t.slice(s,i))),r.join("")}function MHe(t){return iB(),Pp.has(t)}function Dte(t){return iB(),kte.has(t)}function LHe(t){return FHe(UHe(t,RHe,zHe))}function UHe(t,e,n){if(!t)return[];iB();let r=0;return t.split(Tte).map(s=>{let i=bHe(s),o={input:i,offset:r};r+=i.length+1;try{let a=o.tokens=WHe(i,e,n),c=a.length,l;if(!c)throw new Error("empty label");let u=o.output=a.flat();if(kHe(u),!(o.emoji=c>1||a[0].is_emoji)&&u.every(h=>h<128))OHe(u),l="ASCII";else{let h=a.flatMap(f=>f.is_emoji?[]:f);if(!h.length)l="Emoji";else{if(Pp.has(u[0]))throw wE("leading combining mark");for(let g=1;g<c;g++){let w=a[g];if(!w.is_emoji&&Pp.has(w[0]))throw wE(`emoji + combining mark: "${Hw(a[g-1])} + ${zT([w[0]])}"`)}DHe(u);let f=DI(new Set(h)),[p]=$He(f);jHe(p,h),BHe(p,f),l=p.N}}o.type=l}catch(a){o.error=a}return o})}function BHe(t,e){let n,r=[];for(let s of e){let i=dy.get(s);if(i===Pte)return;if(i){let o=i.M.get(s);if(n=n?n.filter(a=>o.has(a)):DI(o),!n.length)return}else r.push(s)}if(n){for(let s of n)if(r.every(i=>n_(s,i)))throw new Error(`whole-script confusable: ${t.N}/${s.N}`)}}function $He(t){let e=t0;for(let n of t){let r=e.filter(s=>n_(s,n));if(!r.length)throw t0.some(s=>n_(s,n))?Lte(e[0],n):Mte(n);if(e=r,r.length==1)break}return e}function FHe(t){return t.map(({input:e,error:n,output:r})=>{if(n){let s=n.message;throw new Error(t.length==1?s:`Invalid label ${aB(zT(e,63))}: ${s}`)}return Hw(r)}).join(Tte)}function Mte(t){return new Error(`disallowed character: ${oB(t)}`)}function Lte(t,e){let n=oB(e),r=t0.find(s=>s.P.has(e));return r&&(n=`${r.N} ${n}`),new Error(`illegal mixture: ${t.N} + ${n}`)}function wE(t){return new Error(`illegal placement: ${t}`)}function jHe(t,e){for(let n of e)if(!n_(t,n))throw Lte(t,n);if(t.M){let n=Nte(e);for(let r=1,s=n.length;r<s;r++)if(d5.has(n[r])){let i=r+1;for(let o;i<s&&d5.has(o=n[i]);i++)for(let a=r;a<i;a++)if(n[a]==o)throw new Error(`duplicate non-spacing marks: ${oB(o)}`);if(i-r>K7)throw new Error(`excessive non-spacing marks: ${aB(zT(n.slice(r-1,i)))} (${i-r}/${K7})`);r=i}}}function WHe(t,e,n){let r=[],s=[];for(t=t.slice().reverse();t.length;){let i=HHe(t);if(i)s.length&&(r.push(e(s)),s=[]),r.push(n(i));else{let o=t.pop();if(sp.has(o))s.push(o);else{let a=u5.get(o);if(a)s.push(...a);else if(!Ote.has(o))throw Mte(o)}}}return s.length&&r.push(e(s)),r}function zHe(t){return t.filter(e=>e!=Rte)}function HHe(t,e){let n=h5,r,s=t.length;for(;s&&(n=n.get(t[--s]),!!n);){let{V:i}=n;i&&(r=i,t.length=s)}return r}const Ute=new Uint8Array(32);Ute.fill(0);function Z7(t){return J(t.length!==0,"invalid ENS name; empty component","comp",t),t}function Bte(t){const e=Ju(GHe(t)),n=[];if(t.length===0)return n;let r=0;for(let s=0;s<e.length;s++)e[s]===46&&(n.push(Z7(e.slice(r,s))),r=s+1);return J(r<e.length,"invalid ENS name; empty component","name",t),n.push(Z7(e.slice(r))),n}function GHe(t){try{if(t.length===0)throw new Error("empty label");return LHe(t)}catch(e){J(!1,`invalid ENS name (${e.message})`,"name",t)}}function f5(t){J(typeof t=="string","invalid ENS name; not a string","name",t),J(t.length,"invalid ENS name (empty label)","name",t);let e=Ute;const n=Bte(t);for(;n.length;)e=$r(Ir([e,$r(n.pop())]));return Oe(e)}function qHe(t,e){const n=e;return J(n<=255,"DNS encoded label cannot exceed 255","length",n),Oe(Ir(Bte(t).map(r=>{J(r.length<=n,`label ${JSON.stringify(t)} exceeds ${n} bytes`,"name",t);const s=new Uint8Array(r.length+1);return s.set(r,1),s[0]=s.length-1,s})))+"00"}const $te=new Uint8Array(32);$te.fill(0);const VHe=BigInt(-1),Fte=BigInt(0),jte=BigInt(1),KHe=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function YHe(t){const e=Yt(t),n=e.length%32;return n?Ir([e,$te.slice(n)]):Oe(e)}const QHe=_f(jte,32),JHe=_f(Fte,32),X7={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},t2=["name","version","chainId","verifyingContract","salt"];function eW(t){return function(e){return J(typeof e=="string",`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const ZHe={name:eW("name"),version:eW("version"),chainId:function(t){const e=Qe(t,"domain.chainId");return J(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e)?Number(e):yc(e)},verifyingContract:function(t){try{return Sn(t).toLowerCase()}catch{}J(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){const e=Yt(t,"domain.salt");return J(e.length===32,'invalid domain value "salt"',"domain.salt",t),Oe(e)}};function n2(t){{const e=t.match(/^(u?)int(\d+)$/);if(e){const n=e[1]==="",r=parseInt(e[2]);J(r%8===0&&r!==0&&r<=256&&e[2]===String(r),"invalid numeric width","type",t);const s=Dv(KHe,n?r-1:r),i=n?(s+jte)*VHe:Fte;return function(o){const a=Qe(o,"value");return J(a>=i&&a<=s,`value out-of-bounds for ${t}`,"value",a),_f(n?Iee(a,256):a,32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return J(n!==0&&n<=32&&e[1]===String(n),"invalid bytes width","type",t),function(r){const s=Yt(r);return J(s.length===n,`invalid length for ${t}`,"value",r),YHe(r)}}}switch(t){case"address":return function(e){return ud(Sn(e),32)};case"bool":return function(e){return e?QHe:JHe};case"bytes":return function(e){return $r(e)};case"string":return function(e){return Vg(e)}}return null}function tW(t,e){return`${t}(${e.map(({name:n,type:r})=>r+" "+n).join(",")})`}function QA(t){const e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}var p_,Iu,$0,jI,Wte;const pa=class pa{constructor(e){Y(this,jI);se(this,"primaryType");Y(this,p_);Y(this,Iu);Y(this,$0);L(this,Iu,new Map),L(this,$0,new Map);const n=new Map,r=new Map,s=new Map,i={};Object.keys(e).forEach(c=>{i[c]=e[c].map(({name:l,type:u})=>{let{base:d,index:h}=QA(u);return d==="int"&&!e.int&&(d="int256"),d==="uint"&&!e.uint&&(d="uint256"),{name:l,type:d+(h||"")}}),n.set(c,new Set),r.set(c,[]),s.set(c,new Set)}),L(this,p_,JSON.stringify(i));for(const c in i){const l=new Set;for(const u of i[c]){J(!l.has(u.name),`duplicate variable name ${JSON.stringify(u.name)} in ${JSON.stringify(c)}`,"types",e),l.add(u.name);const d=QA(u.type).base;J(d!==c,`circular type reference to ${JSON.stringify(d)}`,"types",e),!n2(d)&&(J(r.has(d),`unknown type ${JSON.stringify(d)}`,"types",e),r.get(d).push(c),n.get(c).add(d))}}const o=Array.from(r.keys()).filter(c=>r.get(c).length===0);J(o.length!==0,"missing primary type","types",e),J(o.length===1,`ambiguous primary types or unused types: ${o.map(c=>JSON.stringify(c)).join(", ")}`,"types",e),wt(this,{primaryType:o[0]});function a(c,l){J(!l.has(c),`circular type reference to ${JSON.stringify(c)}`,"types",e),l.add(c);for(const u of n.get(c))if(r.has(u)){a(u,l);for(const d of l)s.get(d).add(u)}l.delete(c)}a(this.primaryType,new Set);for(const[c,l]of s){const u=Array.from(l);u.sort(),_(this,Iu).set(c,tW(c,i[c])+u.map(d=>tW(d,i[d])).join(""))}}get types(){return JSON.parse(_(this,p_))}getEncoder(e){let n=_(this,$0).get(e);return n||(n=de(this,jI,Wte).call(this,e),_(this,$0).set(e,n)),n}encodeType(e){const n=_(this,Iu).get(e);return J(n,`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return $r(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,r){if(n2(e))return r(e,n);const s=QA(e).array;if(s)return J(s.count===-1||s.count===n.length,`array length mismatch; expected length ${s.count}`,"value",n),n.map(o=>this._visit(s.prefix,o,r));const i=this.types[e];if(i)return i.reduce((o,{name:a,type:c})=>(o[a]=this._visit(c,n[a],r),o),{});J(!1,`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new pa(e)}static getPrimaryType(e){return pa.from(e).primaryType}static hashStruct(e,n,r){return pa.from(n).hashStruct(e,r)}static hashDomain(e){const n=[];for(const r in e){if(e[r]==null)continue;const s=X7[r];J(s,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),n.push({name:r,type:s})}return n.sort((r,s)=>t2.indexOf(r.name)-t2.indexOf(s.name)),pa.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,r){return Ir(["0x1901",pa.hashDomain(e),pa.from(n).hash(r)])}static hash(e,n,r){return $r(pa.encode(e,n,r))}static async resolveNames(e,n,r,s){e=Object.assign({},e);for(const a in e)e[a]==null&&delete e[a];const i={};e.verifyingContract&&!nr(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const o=pa.from(n);o.visit(r,(a,c)=>(a==="address"&&!nr(c,20)&&(i[c]="0x"),c));for(const a in i)i[a]=await s(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),r=o.visit(r,(a,c)=>a==="address"&&i[c]?i[c]:c),{domain:e,value:r}}static getPayload(e,n,r){pa.hashDomain(e);const s={},i=[];t2.forEach(c=>{const l=e[c];l!=null&&(s[c]=ZHe[c](l),i.push({name:c,type:X7[c]}))});const o=pa.from(n);n=o.types;const a=Object.assign({},n);return J(a.EIP712Domain==null,"types must not contain EIP712Domain type","types.EIP712Domain",n),a.EIP712Domain=i,o.encode(r),{types:a,domain:s,primaryType:o.primaryType,message:o.visit(r,(c,l)=>{if(c.match(/^bytes(\d*)/))return Oe(Yt(l));if(c.match(/^u?int/))return Qe(l).toString();switch(c){case"address":return l.toLowerCase();case"bool":return!!l;case"string":return J(typeof l=="string","invalid string","value",l),l}J(!1,"unsupported type","type",c)})}}};p_=new WeakMap,Iu=new WeakMap,$0=new WeakMap,jI=new WeakSet,Wte=function(e){{const s=n2(e);if(s)return s}const n=QA(e).array;if(n){const s=n.prefix,i=this.getEncoder(s);return o=>{J(n.count===-1||n.count===o.length,`array length mismatch; expected length ${n.count}`,"value",o);let a=o.map(i);return _(this,Iu).has(s)&&(a=a.map($r)),$r(Ir(a))}}const r=this.types[e];if(r){const s=Vg(_(this,Iu).get(e));return i=>{const o=r.map(({name:a,type:c})=>{const l=this.getEncoder(c)(i[a]);return _(this,Iu).has(c)?$r(l):l});return o.unshift(s),Ir(o)}}J(!1,`unknown type: ${e}`,"type",e)};let MI=pa;function Ci(t){const e=new Set;return t.forEach(n=>e.add(n)),Object.freeze(e)}const XHe="external public payable override",eGe=Ci(XHe.split(" ")),zte="constant external internal payable private public pure view override",tGe=Ci(zte.split(" ")),Hte="constructor error event fallback function receive struct",Gte=Ci(Hte.split(" ")),qte="calldata memory storage payable indexed",nGe=Ci(qte.split(" ")),rGe="tuple returns",sGe=[Hte,qte,rGe,zte].join(" "),iGe=Ci(sGe.split(" ")),oGe={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},aGe=new RegExp("^(\\s*)"),cGe=new RegExp("^([0-9]+)"),lGe=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Vte=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Kte=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Ns,dc,g_,p5;const WI=class WI{constructor(e){Y(this,g_);Y(this,Ns);Y(this,dc);L(this,Ns,0),L(this,dc,e.slice())}get offset(){return _(this,Ns)}get length(){return _(this,dc).length-_(this,Ns)}clone(){return new WI(_(this,dc))}reset(){L(this,Ns,0)}popKeyword(e){const n=this.peek();if(n.type!=="KEYWORD"||!e.has(n.text))throw new Error(`expected keyword ${n.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){const n=this.peek();throw new Error(`expected ${e}; got ${n.type} ${JSON.stringify(n.text)}`)}return this.pop().text}popParen(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=de(this,g_,p5).call(this,_(this,Ns)+1,e.match+1);return L(this,Ns,e.match+1),n}popParams(){const e=this.peek();if(e.type!=="OPEN_PAREN")throw new Error("bad start");const n=[];for(;_(this,Ns)<e.match-1;){const r=this.peek().linkNext;n.push(de(this,g_,p5).call(this,_(this,Ns)+1,r)),L(this,Ns,r)}return L(this,Ns,e.match+1),n}peek(){if(_(this,Ns)>=_(this,dc).length)throw new Error("out-of-bounds");return _(this,dc)[_(this,Ns)]}peekKeyword(e){const n=this.peekType("KEYWORD");return n!=null&&e.has(n)?n:null}peekType(e){if(this.length===0)return null;const n=this.peek();return n.type===e?n.text:null}pop(){const e=this.peek();return Cd(this,Ns)._++,e}toString(){const e=[];for(let n=_(this,Ns);n<_(this,dc).length;n++){const r=_(this,dc)[n];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}};Ns=new WeakMap,dc=new WeakMap,g_=new WeakSet,p5=function(e=0,n=0){return new WI(_(this,dc).slice(e,n).map(r=>Object.freeze(Object.assign({},r,{match:r.match-e,linkBack:r.linkBack-e,linkNext:r.linkNext-e}))))};let Lc=WI;function kf(t){const e=[],n=o=>{const a=i<t.length?JSON.stringify(t[i]):"$EOI";throw new Error(`invalid token ${a} at ${i}: ${o}`)};let r=[],s=[],i=0;for(;i<t.length;){let o=t.substring(i),a=o.match(aGe);a&&(i+=a[1].length,o=t.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};e.push(c);let l=oGe[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,l==="OPEN_PAREN")r.push(e.length-1),s.push(e.length-1);else if(l=="CLOSE_PAREN")r.length===0&&n("no matching open bracket"),c.match=r.pop(),e[c.match].match=e.length-1,c.depth--,c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1;else if(l==="COMMA")c.linkBack=s.pop(),e[c.linkBack].linkNext=e.length-1,s.push(e.length-1);else if(l==="OPEN_BRACKET")c.type="BRACKET";else if(l==="CLOSE_BRACKET"){let u=e.pop().text;if(e.length>0&&e[e.length-1].type==="NUMBER"){const d=e.pop().text;u=d+u,e[e.length-1].value=Qt(d)}if(e.length===0||e[e.length-1].type!=="BRACKET")throw new Error("missing opening bracket");e[e.length-1].text+=u}continue}if(a=o.match(lGe),a){if(c.text=a[1],i+=c.text.length,iGe.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(Kte)){c.type="TYPE";continue}c.type="ID";continue}if(a=o.match(cGe),a){c.text=a[1],c.type="NUMBER",i+=c.text.length;continue}throw new Error(`unexpected token ${JSON.stringify(o[0])} at position ${i}`)}return new Lc(e.map(o=>Object.freeze(o)))}function nW(t,e){let n=[];for(const r in e.keys())t.has(r)&&n.push(r);if(n.length>1)throw new Error(`conflicting types: ${n.join(", ")}`)}function HT(t,e){if(e.peekKeyword(Gte)){const n=e.pop().text;if(n!==t)throw new Error(`expected ${t}, got ${n}`)}return e.popType("ID")}function dd(t,e){const n=new Set;for(;;){const r=t.peekType("KEYWORD");if(r==null||e&&!e.has(r))break;if(t.pop(),n.has(r))throw new Error(`duplicate keywords: ${JSON.stringify(r)}`);n.add(r)}return Object.freeze(n)}function Yte(t){let e=dd(t,tGe);return nW(e,Ci("constant payable nonpayable".split(" "))),nW(e,Ci("pure view payable nonpayable".split(" "))),e.has("view")?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function Zu(t,e){return t.popParams().map(n=>Us.from(n,e))}function Qte(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return Qe(t.pop().text);throw new Error("invalid gas")}return null}function Kg(t){if(t.length)throw new Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const uGe=new RegExp(/^(.*)\[([0-9]*)\]$/);function rW(t){const e=t.match(Kte);if(J(e,"invalid type","type",t),t==="uint")return"uint256";if(t==="int")return"int256";if(e[2]){const n=parseInt(e[2]);J(n!==0&&n<=32,"invalid bytes length","type",t)}else if(e[3]){const n=parseInt(e[3]);J(n!==0&&n<=256&&n%8===0,"invalid numeric width","type",t)}return t}const mr={},go=Symbol.for("_ethers_internal"),sW="_ParamTypeInternal",iW="_ErrorInternal",oW="_EventInternal",aW="_ConstructorInternal",cW="_FallbackInternal",lW="_FunctionInternal",uW="_StructInternal";var F0,jS;const ga=class ga{constructor(e,n,r,s,i,o,a,c){Y(this,F0);se(this,"name");se(this,"type");se(this,"baseType");se(this,"indexed");se(this,"components");se(this,"arrayLength");se(this,"arrayChildren");if(DT(e,mr,"ParamType"),Object.defineProperty(this,go,{value:sW}),o&&(o=Object.freeze(o.slice())),s==="array"){if(a==null||c==null)throw new Error("")}else if(a!=null||c!=null)throw new Error("");if(s==="tuple"){if(o==null)throw new Error("")}else if(o!=null)throw new Error("");wt(this,{name:n,type:r,baseType:s,indexed:i,components:o,arrayLength:a,arrayChildren:c})}format(e){if(e==null&&(e="sighash"),e==="json"){const r=this.name||"";if(this.isArray()){const i=JSON.parse(this.arrayChildren.format("json"));return i.name=r,i.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(i)}const s={type:this.baseType==="tuple"?"tuple":this.type,name:r};return typeof this.indexed=="boolean"&&(s.indexed=this.indexed),this.isTuple()&&(s.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(s)}let n="";return this.isArray()?(n+=this.arrayChildren.format(e),n+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?n+="("+this.components.map(r=>r.format(e)).join(e==="full"?", ":",")+")":n+=this.type,e!=="sighash"&&(this.indexed===!0&&(n+=" indexed"),e==="full"&&this.name&&(n+=" "+this.name)),n}isArray(){return this.baseType==="array"}isTuple(){return this.baseType==="tuple"}isIndexable(){return this.indexed!=null}walk(e,n){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(this.arrayLength!==-1&&e.length!==this.arrayLength)throw new Error("array is wrong length");const r=this;return e.map(s=>r.arrayChildren.walk(s,n))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const r=this;return e.map((s,i)=>r.components[i].walk(s,n))}return n(this.type,e)}async walkAsync(e,n){const r=[],s=[e];return de(this,F0,jS).call(this,r,e,n,i=>{s[0]=i}),r.length&&await Promise.all(r),s[0]}static from(e,n){if(ga.isParamType(e))return e;if(typeof e=="string")try{return ga.from(kf(e),n)}catch{J(!1,"invalid param type","obj",e)}else if(e instanceof Lc){let a="",c="",l=null;dd(e,Ci(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(c="tuple",l=e.popParams().map(g=>ga.from(g)),a=`tuple(${l.map(g=>g.format()).join(",")})`):(a=rW(e.popType("TYPE")),c=a);let u=null,d=null;for(;e.length&&e.peekType("BRACKET");){const g=e.pop();u=new ga(mr,"",a,c,null,l,d,u),d=g.value,a+=g.text,c="array",l=null}let h=null;if(dd(e,nGe).has("indexed")){if(!n)throw new Error("");h=!0}const p=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new ga(mr,p,a,c,h,l,d,u)}const r=e.name;J(!r||typeof r=="string"&&r.match(Vte),"invalid name","obj.name",r);let s=e.indexed;s!=null&&(J(n,"parameter cannot be indexed","obj.indexed",e.indexed),s=!!s);let i=e.type,o=i.match(uGe);if(o){const a=parseInt(o[2]||"-1"),c=ga.from({type:o[1],components:e.components});return new ga(mr,r||"",i,"array",s,null,a,c)}if(i==="tuple"||i.startsWith("tuple(")||i.startsWith("(")){const a=e.components!=null?e.components.map(l=>ga.from(l)):null;return new ga(mr,r||"",i,"tuple",s,a,null,null)}return i=rW(e.type),new ga(mr,r||"",i,i,s,null,null,null)}static isParamType(e){return e&&e[go]===sW}};F0=new WeakSet,jS=function(e,n,r,s){if(this.isArray()){if(!Array.isArray(n))throw new Error("invalid array value");if(this.arrayLength!==-1&&n.length!==this.arrayLength)throw new Error("array is wrong length");const o=this.arrayChildren,a=n.slice();a.forEach((c,l)=>{var u;de(u=o,F0,jS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}if(this.isTuple()){const o=this.components;let a;if(Array.isArray(n))a=n.slice();else{if(n==null||typeof n!="object")throw new Error("invalid tuple value");a=o.map(c=>{if(!c.name)throw new Error("cannot use object value with unnamed components");if(!(c.name in n))throw new Error(`missing value for component ${c.name}`);return n[c.name]})}if(a.length!==this.components.length)throw new Error("array is wrong length");a.forEach((c,l)=>{var u;de(u=o[l],F0,jS).call(u,e,c,r,d=>{a[l]=d})}),s(a);return}const i=r(this.type,n);i.then?e.push(async function(){s(await i)}()):s(i)};let Us=ga;class Yg{constructor(e,n,r){se(this,"type");se(this,"inputs");DT(e,mr,"Fragment"),r=Object.freeze(r.slice()),wt(this,{type:n,inputs:r})}static from(e){if(typeof e=="string"){try{Yg.from(JSON.parse(e))}catch{}return Yg.from(kf(e))}if(e instanceof Lc)switch(e.peekKeyword(Gte)){case"constructor":return zu.from(e);case"error":return eo.from(e);case"event":return Sl.from(e);case"fallback":case"receive":return vu.from(e);case"function":return xl.from(e);case"struct":return wg.from(e)}else if(typeof e=="object"){switch(e.type){case"constructor":return zu.from(e);case"error":return eo.from(e);case"event":return Sl.from(e);case"fallback":case"receive":return vu.from(e);case"function":return xl.from(e);case"struct":return wg.from(e)}me(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}J(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return zu.isFragment(e)}static isError(e){return eo.isFragment(e)}static isEvent(e){return Sl.isFragment(e)}static isFunction(e){return xl.isFragment(e)}static isStruct(e){return wg.isFragment(e)}}class GT extends Yg{constructor(n,r,s,i){super(n,r,i);se(this,"name");J(typeof s=="string"&&s.match(Vte),"invalid identifier","name",s),i=Object.freeze(i.slice()),wt(this,{name:s})}}function r_(t,e){return"("+e.map(n=>n.format(t)).join(t==="full"?", ":",")+")"}class eo extends GT{constructor(e,n,r){super(e,"error",n,r),Object.defineProperty(this,go,{value:iW})}get selector(){return Vg(this.format("sighash")).substring(0,10)}format(e){if(e==null&&(e="sighash"),e==="json")return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(r=>JSON.parse(r.format(e)))});const n=[];return e!=="sighash"&&n.push("error"),n.push(this.name+r_(e,this.inputs)),n.join(" ")}static from(e){if(eo.isFragment(e))return e;if(typeof e=="string")return eo.from(kf(e));if(e instanceof Lc){const n=HT("error",e),r=Zu(e);return Kg(e),new eo(mr,n,r)}return new eo(mr,e.name,e.inputs?e.inputs.map(Us.from):[])}static isFragment(e){return e&&e[go]===iW}}class Sl extends GT{constructor(n,r,s,i){super(n,"event",r,s);se(this,"anonymous");Object.defineProperty(this,go,{value:oW}),wt(this,{anonymous:i})}get topicHash(){return Vg(this.format("sighash"))}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("event"),r.push(this.name+r_(n,this.inputs)),n!=="sighash"&&this.anonymous&&r.push("anonymous"),r.join(" ")}static getTopicHash(n,r){return r=(r||[]).map(i=>Us.from(i)),new Sl(mr,n,r,!1).topicHash}static from(n){if(Sl.isFragment(n))return n;if(typeof n=="string")try{return Sl.from(kf(n))}catch{J(!1,"invalid event fragment","obj",n)}else if(n instanceof Lc){const r=HT("event",n),s=Zu(n,!0),i=!!dd(n,Ci(["anonymous"])).has("anonymous");return Kg(n),new Sl(mr,r,s,i)}return new Sl(mr,n.name,n.inputs?n.inputs.map(r=>Us.from(r,!0)):[],!!n.anonymous)}static isFragment(n){return n&&n[go]===oW}}class zu extends Yg{constructor(n,r,s,i,o){super(n,r,s);se(this,"payable");se(this,"gas");Object.defineProperty(this,go,{value:aW}),wt(this,{payable:i,gas:o})}format(n){if(me(n!=null&&n!=="sighash","cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),n==="json")return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n)))});const r=[`constructor${r_(n,this.inputs)}`];return this.payable&&r.push("payable"),this.gas!=null&&r.push(`@${this.gas.toString()}`),r.join(" ")}static from(n){if(zu.isFragment(n))return n;if(typeof n=="string")try{return zu.from(kf(n))}catch{J(!1,"invalid constuctor fragment","obj",n)}else if(n instanceof Lc){dd(n,Ci(["constructor"]));const r=Zu(n),s=!!dd(n,eGe).has("payable"),i=Qte(n);return Kg(n),new zu(mr,"constructor",r,s,i)}return new zu(mr,"constructor",n.inputs?n.inputs.map(Us.from):[],!!n.payable,n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[go]===aW}}class vu extends Yg{constructor(n,r,s){super(n,"fallback",r);se(this,"payable");Object.defineProperty(this,go,{value:cW}),wt(this,{payable:s})}format(n){const r=this.inputs.length===0?"receive":"fallback";if(n==="json"){const s=this.payable?"payable":"nonpayable";return JSON.stringify({type:r,stateMutability:s})}return`${r}()${this.payable?" payable":""}`}static from(n){if(vu.isFragment(n))return n;if(typeof n=="string")try{return vu.from(kf(n))}catch{J(!1,"invalid fallback fragment","obj",n)}else if(n instanceof Lc){const r=n.toString(),s=n.peekKeyword(Ci(["fallback","receive"]));if(J(s,"type must be fallback or receive","obj",r),n.popKeyword(Ci(["fallback","receive"]))==="receive"){const c=Zu(n);return J(c.length===0,"receive cannot have arguments","obj.inputs",c),dd(n,Ci(["payable"])),Kg(n),new vu(mr,[],!0)}let o=Zu(n);o.length?J(o.length===1&&o[0].type==="bytes","invalid fallback inputs","obj.inputs",o.map(c=>c.format("minimal")).join(", ")):o=[Us.from("bytes")];const a=Yte(n);if(J(a==="nonpayable"||a==="payable","fallback cannot be constants","obj.stateMutability",a),dd(n,Ci(["returns"])).has("returns")){const c=Zu(n);J(c.length===1&&c[0].type==="bytes","invalid fallback outputs","obj.outputs",c.map(l=>l.format("minimal")).join(", "))}return Kg(n),new vu(mr,o,a==="payable")}if(n.type==="receive")return new vu(mr,[],!0);if(n.type==="fallback"){const r=[Us.from("bytes")],s=n.stateMutability==="payable";return new vu(mr,r,s)}J(!1,"invalid fallback description","obj",n)}static isFragment(n){return n&&n[go]===cW}}class xl extends GT{constructor(n,r,s,i,o,a){super(n,"function",r,i);se(this,"constant");se(this,"outputs");se(this,"stateMutability");se(this,"payable");se(this,"gas");Object.defineProperty(this,go,{value:lW}),o=Object.freeze(o.slice()),wt(this,{constant:s==="view"||s==="pure",gas:a,outputs:o,payable:s==="payable",stateMutability:s})}get selector(){return Vg(this.format("sighash")).substring(0,10)}format(n){if(n==null&&(n="sighash"),n==="json")return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas!=null?this.gas:void 0,inputs:this.inputs.map(s=>JSON.parse(s.format(n))),outputs:this.outputs.map(s=>JSON.parse(s.format(n)))});const r=[];return n!=="sighash"&&r.push("function"),r.push(this.name+r_(n,this.inputs)),n!=="sighash"&&(this.stateMutability!=="nonpayable"&&r.push(this.stateMutability),this.outputs&&this.outputs.length&&(r.push("returns"),r.push(r_(n,this.outputs))),this.gas!=null&&r.push(`@${this.gas.toString()}`)),r.join(" ")}static getSelector(n,r){return r=(r||[]).map(i=>Us.from(i)),new xl(mr,n,"view",r,[],null).selector}static from(n){if(xl.isFragment(n))return n;if(typeof n=="string")try{return xl.from(kf(n))}catch{J(!1,"invalid function fragment","obj",n)}else if(n instanceof Lc){const s=HT("function",n),i=Zu(n),o=Yte(n);let a=[];dd(n,Ci(["returns"])).has("returns")&&(a=Zu(n));const c=Qte(n);return Kg(n),new xl(mr,s,o,i,a,c)}let r=n.stateMutability;return r==null&&(r="payable",typeof n.constant=="boolean"?(r="view",n.constant||(r="payable",typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable"))):typeof n.payable=="boolean"&&!n.payable&&(r="nonpayable")),new xl(mr,n.name,r,n.inputs?n.inputs.map(Us.from):[],n.outputs?n.outputs.map(Us.from):[],n.gas!=null?n.gas:null)}static isFragment(n){return n&&n[go]===lW}}class wg extends GT{constructor(e,n,r){super(e,"struct",n,r),Object.defineProperty(this,go,{value:uW})}format(){throw new Error("@TODO")}static from(e){if(typeof e=="string")try{return wg.from(kf(e))}catch{J(!1,"invalid struct fragment","obj",e)}else if(e instanceof Lc){const n=HT("struct",e),r=Zu(e);return Kg(e),new wg(mr,n,r)}return new wg(mr,e.name,e.inputs?e.inputs.map(Us.from):[])}static isFragment(e){return e&&e[go]===uW}}const $c=new Map;$c.set(0,"GENERIC_PANIC");$c.set(1,"ASSERT_FALSE");$c.set(17,"OVERFLOW");$c.set(18,"DIVIDE_BY_ZERO");$c.set(33,"ENUM_RANGE_ERROR");$c.set(34,"BAD_STORAGE_DATA");$c.set(49,"STACK_UNDERFLOW");$c.set(50,"ARRAY_RANGE_ERROR");$c.set(65,"OUT_OF_MEMORY");$c.set(81,"UNINITIALIZED_FUNCTION_CALL");const dGe=new RegExp(/^bytes([0-9]*)$/),hGe=new RegExp(/^(u?int)([0-9]*)$/);let r2=null,dW=1024;function fGe(t,e,n,r){let s="missing revert data",i=null;const o=null;let a=null;if(n){s="execution reverted";const l=Yt(n);if(n=Oe(n),l.length===0)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(l.length%32!==4)s+=" (could not decode reason; invalid data length)";else if(Oe(l.slice(0,4))==="0x08c379a0")try{i=r.decode(["string"],l.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[i]},s+=`: ${JSON.stringify(i)}`}catch{s+=" (could not decode reason; invalid string data)"}else if(Oe(l.slice(0,4))==="0x4e487b71")try{const u=Number(r.decode(["uint256"],l.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[u]},i=`Panic due to ${$c.get(u)||"UNKNOWN"}(${u})`,s+=`: ${i}`}catch{s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const c={to:e.to?Sn(e.to):null,data:e.data||"0x"};return e.from&&(c.from=Sn(e.from)),ur(s,"CALL_EXCEPTION",{action:t,data:n,reason:i,transaction:c,invocation:o,revert:a})}var bh,hy;const zI=class zI{constructor(){Y(this,bh)}getDefaultValue(e){const n=e.map(s=>de(this,bh,hy).call(this,Us.from(s)));return new YA(n,"_").defaultValue()}encode(e,n){Aee(n.length,e.length,"types/values length mismatch");const r=e.map(o=>de(this,bh,hy).call(this,Us.from(o))),s=new YA(r,"_"),i=new e5;return s.encode(i,n),i.data}decode(e,n,r){const s=e.map(o=>de(this,bh,hy).call(this,Us.from(o)));return new YA(s,"_").decode(new t5(n,r,dW))}static _setDefaultMaxInflation(e){J(typeof e=="number"&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),dW=e}static defaultAbiCoder(){return r2==null&&(r2=new zI),r2}static getBuiltinCallException(e,n,r){return fGe(e,n,r,zI.defaultAbiCoder())}};bh=new WeakSet,hy=function(e){if(e.isArray())return new Pze(de(this,bh,hy).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new YA(e.components.map(r=>de(this,bh,hy).call(this,r)),e.name);switch(e.baseType){case"address":return new Tze(e.name);case"bool":return new Oze(e.name);case"string":return new jze(e.name);case"bytes":return new kze(e.name);case"":return new Lze(e.name)}let n=e.type.match(hGe);if(n){let r=parseInt(n[2]||"256");return J(r!==0&&r<=256&&r%8===0,"invalid "+n[1]+" bit length","param",e),new Fze(r/8,n[1]==="int",e.name)}if(n=e.type.match(dGe),n){let r=parseInt(n[1]);return J(r!==0&&r<=32,"invalid bytes length","param",e),new Dze(r,e.name)}J(!1,"invalid type","type",e.type)};let s_=zI;class pGe{constructor(e,n,r){se(this,"fragment");se(this,"name");se(this,"signature");se(this,"topic");se(this,"args");const s=e.name,i=e.format();wt(this,{fragment:e,name:s,signature:i,topic:n,args:r})}}class gGe{constructor(e,n,r,s){se(this,"fragment");se(this,"name");se(this,"args");se(this,"signature");se(this,"selector");se(this,"value");const i=e.name,o=e.format();wt(this,{fragment:e,name:i,args:r,signature:o,selector:n,value:s})}}class mGe{constructor(e,n,r){se(this,"fragment");se(this,"name");se(this,"args");se(this,"signature");se(this,"selector");const s=e.name,i=e.format();wt(this,{fragment:e,name:s,args:r,signature:i,selector:n})}}class hW{constructor(e){se(this,"hash");se(this,"_isIndexed");wt(this,{hash:e,_isIndexed:!0})}static isIndexed(e){return!!(e&&e._isIndexed)}}const fW={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},pW={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&fW[t.toString()]&&(e=fW[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};var ll,ul,dl,Ks,Ll,WS,zS;const pp=class pp{constructor(e){Y(this,Ll);se(this,"fragments");se(this,"deploy");se(this,"fallback");se(this,"receive");Y(this,ll);Y(this,ul);Y(this,dl);Y(this,Ks);let n=[];typeof e=="string"?n=JSON.parse(e):n=e,L(this,dl,new Map),L(this,ll,new Map),L(this,ul,new Map);const r=[];for(const o of n)try{r.push(Yg.from(o))}catch(a){console.log(`[Warning] Invalid Fragment ${JSON.stringify(o)}:`,a.message)}wt(this,{fragments:Object.freeze(r)});let s=null,i=!1;L(this,Ks,this.getAbiCoder()),this.fragments.forEach((o,a)=>{let c;switch(o.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}wt(this,{deploy:o});return;case"fallback":o.inputs.length===0?i=!0:(J(!s||o.payable!==s.payable,"conflicting fallback fragments",`fragments[${a}]`,o),s=o,i=s.payable);return;case"function":c=_(this,dl);break;case"event":c=_(this,ul);break;case"error":c=_(this,ll);break;default:return}const l=o.format();c.has(l)||c.set(l,o)}),this.deploy||wt(this,{deploy:zu.from("constructor()")}),wt(this,{fallback:s,receive:i})}format(e){const n=e?"minimal":"full";return this.fragments.map(s=>s.format(n))}formatJson(){const e=this.fragments.map(n=>n.format("json"));return JSON.stringify(e.map(n=>JSON.parse(n)))}getAbiCoder(){return s_.defaultAbiCoder()}getFunctionName(e){const n=de(this,Ll,WS).call(this,e,null,!1);return J(n,"no matching function","key",e),n.name}hasFunction(e){return!!de(this,Ll,WS).call(this,e,null,!1)}getFunction(e,n){return de(this,Ll,WS).call(this,e,n||null,!0)}forEachFunction(e){const n=Array.from(_(this,dl).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,dl).get(s),r)}}getEventName(e){const n=de(this,Ll,zS).call(this,e,null,!1);return J(n,"no matching event","key",e),n.name}hasEvent(e){return!!de(this,Ll,zS).call(this,e,null,!1)}getEvent(e,n){return de(this,Ll,zS).call(this,e,n||null,!0)}forEachEvent(e){const n=Array.from(_(this,ul).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,ul).get(s),r)}}getError(e,n){if(nr(e)){const s=e.toLowerCase();if(pW[s])return eo.from(pW[s].signature);for(const i of _(this,ll).values())if(s===i.selector)return i;return null}if(e.indexOf("(")===-1){const s=[];for(const[i,o]of _(this,ll))i.split("(")[0]===e&&s.push(o);if(s.length===0)return e==="Error"?eo.from("error Error(string)"):e==="Panic"?eo.from("error Panic(uint256)"):null;if(s.length>1){const i=s.map(o=>JSON.stringify(o.format())).join(", ");J(!1,`ambiguous error description (i.e. ${i})`,"name",e)}return s[0]}if(e=eo.from(e).format(),e==="Error(string)")return eo.from("error Error(string)");if(e==="Panic(uint256)")return eo.from("error Panic(uint256)");const r=_(this,ll).get(e);return r||null}forEachError(e){const n=Array.from(_(this,ll).keys());n.sort((r,s)=>r.localeCompare(s));for(let r=0;r<n.length;r++){const s=n[r];e(_(this,ll).get(s),r)}}_decodeParams(e,n){return _(this,Ks).decode(e,n)}_encodeParams(e,n){return _(this,Ks).encode(e,n)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);J(r,"unknown error","fragment",e),e=r}return J(_r(n,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",n),this._decodeParams(e.inputs,_r(n,4))}encodeErrorResult(e,n){if(typeof e=="string"){const r=this.getError(e);J(r,"unknown error","fragment",e),e=r}return Ir([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return J(_r(n,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",n),this._decodeParams(e.inputs,_r(n,4))}encodeFunctionData(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return Ir([e.selector,this._encodeParams(e.inputs,n||[])])}decodeFunctionResult(e,n){if(typeof e=="string"){const i=this.getFunction(e);J(i,"unknown function","fragment",e),e=i}let r="invalid length for result data";const s=yi(n);if(s.length%32===0)try{return _(this,Ks).decode(e.outputs,s)}catch{r="could not decode result data"}me(!1,r,"BAD_DATA",{value:Oe(s),info:{method:e.name,signature:e.format()}})}makeError(e,n){const r=Yt(e,"data"),s=s_.getBuiltinCallException("call",n,r);if(s.message.startsWith("execution reverted (unknown custom error)")){const a=Oe(r.slice(0,4)),c=this.getError(a);if(c)try{const l=_(this,Ks).decode(c.inputs,r.slice(4));s.revert={name:c.name,signature:c.format(),args:l},s.reason=s.revert.signature,s.message=`execution reverted: ${s.reason}`}catch{s.message="execution reverted (coult not decode custom error)"}}const o=this.parseTransaction(n);return o&&(s.invocation={method:o.name,signature:o.signature,args:o.args}),s}encodeFunctionResult(e,n){if(typeof e=="string"){const r=this.getFunction(e);J(r,"unknown function","fragment",e),e=r}return Oe(_(this,Ks).encode(e.outputs,n||[]))}encodeFilterTopics(e,n){if(typeof e=="string"){const i=this.getEvent(e);J(i,"unknown event","eventFragment",e),e=i}me(n.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:n.length,expectedCount:e.inputs.length});const r=[];e.anonymous||r.push(e.topicHash);const s=(i,o)=>i.type==="string"?Vg(o):i.type==="bytes"?$r(Oe(o)):(i.type==="bool"&&typeof o=="boolean"?o=o?"0x01":"0x00":i.type.match(/^u?int/)?o=_f(o):i.type.match(/^bytes/)?o=L7e(o,32):i.type==="address"&&_(this,Ks).encode(["address"],[o]),ud(Oe(o),32));for(n.forEach((i,o)=>{const a=e.inputs[o];if(!a.indexed){J(i==null,"cannot filter non-indexed parameters; must be null","contract."+a.name,i);return}i==null?r.push(null):a.baseType==="array"||a.baseType==="tuple"?J(!1,"filtering with tuples or arrays not supported","contract."+a.name,i):Array.isArray(i)?r.push(i.map(c=>s(a,c))):r.push(s(a,i))});r.length&&r[r.length-1]===null;)r.pop();return r}encodeEventLog(e,n){if(typeof e=="string"){const o=this.getEvent(e);J(o,"unknown event","eventFragment",e),e=o}const r=[],s=[],i=[];return e.anonymous||r.push(e.topicHash),J(n.length===e.inputs.length,"event arguments/values mismatch","values",n),e.inputs.forEach((o,a)=>{const c=n[a];if(o.indexed)if(o.type==="string")r.push(Vg(c));else if(o.type==="bytes")r.push($r(c));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");r.push(_(this,Ks).encode([o.type],[c]))}else s.push(o),i.push(c)}),{data:_(this,Ks).encode(s,i),topics:r}}decodeEventLog(e,n,r){if(typeof e=="string"){const f=this.getEvent(e);J(f,"unknown event","eventFragment",e),e=f}if(r!=null&&!e.anonymous){const f=e.topicHash;J(nr(r[0],32)&&r[0].toLowerCase()===f,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}const s=[],i=[],o=[];e.inputs.forEach((f,p)=>{f.indexed?f.type==="string"||f.type==="bytes"||f.baseType==="tuple"||f.baseType==="array"?(s.push(Us.from({type:"bytes32",name:f.name})),o.push(!0)):(s.push(f),o.push(!1)):(i.push(f),o.push(!1))});const a=r!=null?_(this,Ks).decode(s,Ir(r)):null,c=_(this,Ks).decode(i,n,!0),l=[],u=[];let d=0,h=0;return e.inputs.forEach((f,p)=>{let g=null;if(f.indexed)if(a==null)g=new hW(null);else if(o[p])g=new hW(a[h++]);else try{g=a[h++]}catch(w){g=w}else try{g=c[d++]}catch(w){g=w}l.push(g),u.push(f.name||null)}),$w.fromItems(l,u)}parseTransaction(e){const n=Yt(e.data,"tx.data"),r=Qe(e.value!=null?e.value:0,"tx.value"),s=this.getFunction(Oe(n.slice(0,4)));if(!s)return null;const i=_(this,Ks).decode(s.inputs,n.slice(4));return new gGe(s,s.selector,i,r)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const n=this.getEvent(e.topics[0]);return!n||n.anonymous?null:new pGe(n,n.topicHash,this.decodeEventLog(n,e.data,e.topics))}parseError(e){const n=Oe(e),r=this.getError(_r(n,0,4));if(!r)return null;const s=_(this,Ks).decode(r.inputs,_r(n,4));return new mGe(r,r.selector,s)}static from(e){return e instanceof pp?e:typeof e=="string"?new pp(JSON.parse(e)):typeof e.formatJson=="function"?new pp(e.formatJson()):typeof e.format=="function"?new pp(e.format("json")):new pp(e)}};ll=new WeakMap,ul=new WeakMap,dl=new WeakMap,Ks=new WeakMap,Ll=new WeakSet,WS=function(e,n,r){if(nr(e)){const i=e.toLowerCase();for(const o of _(this,dl).values())if(i===o.selector)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,dl))o.split("(")[0]===e&&i.push(a);if(n){const o=n.length>0?n[n.length-1]:null;let a=n.length,c=!0;ei.isTyped(o)&&o.type==="overrides"&&(c=!1,a--);for(let l=i.length-1;l>=0;l--){const u=i[l].inputs.length;u!==a&&(!c||u!==a-1)&&i.splice(l,1)}for(let l=i.length-1;l>=0;l--){const u=i[l].inputs;for(let d=0;d<n.length;d++)if(ei.isTyped(n[d])){if(d>=u.length){if(n[d].type==="overrides")continue;i.splice(l,1);break}if(n[d].type!==u[d].baseType){i.splice(l,1);break}}}}if(i.length===1&&n&&n.length!==i[0].inputs.length){const o=n[n.length-1];(o==null||Array.isArray(o)||typeof o!="object")&&i.splice(0,1)}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");J(!1,`ambiguous function description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,dl).get(xl.from(e).format());return s||null},zS=function(e,n,r){if(nr(e)){const i=e.toLowerCase();for(const o of _(this,ul).values())if(i===o.topicHash)return o;return null}if(e.indexOf("(")===-1){const i=[];for(const[o,a]of _(this,ul))o.split("(")[0]===e&&i.push(a);if(n){for(let o=i.length-1;o>=0;o--)i[o].inputs.length<n.length&&i.splice(o,1);for(let o=i.length-1;o>=0;o--){const a=i[o].inputs;for(let c=0;c<n.length;c++)if(ei.isTyped(n[c])&&n[c].type!==a[c].baseType){i.splice(o,1);break}}}if(i.length===0)return null;if(i.length>1&&r){const o=i.map(a=>JSON.stringify(a.format())).join(", ");J(!1,`ambiguous event description (i.e. matches ${o})`,"key",e)}return i[0]}const s=_(this,ul).get(Sl.from(e).format());return s||null};let g5=pp;const Jte=BigInt(0);function n0(t){return t??null}function Rr(t){return t==null?null:t.toString()}class gW{constructor(e,n,r){se(this,"gasPrice");se(this,"maxFeePerGas");se(this,"maxPriorityFeePerGas");wt(this,{gasPrice:n0(e),maxFeePerGas:n0(n),maxPriorityFeePerGas:n0(r)})}toJSON(){const{gasPrice:e,maxFeePerGas:n,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:Rr(e),maxFeePerGas:Rr(n),maxPriorityFeePerGas:Rr(r)}}}function LI(t){const e={};t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=Oe(t.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)!(s in t)||t[s]==null||(e[s]=Qe(t[s],`request.${s}`));const r="type,nonce".split(/,/);for(const s of r)!(s in t)||t[s]==null||(e[s]=Qt(t[s],`request.${s}`));return t.accessList&&(e.accessList=bm(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(s=>KU(s)?Oe(s):Object.assign({},s))),e}var Nu;class yGe{constructor(e,n){se(this,"provider");se(this,"number");se(this,"hash");se(this,"timestamp");se(this,"parentHash");se(this,"parentBeaconBlockRoot");se(this,"nonce");se(this,"difficulty");se(this,"gasLimit");se(this,"gasUsed");se(this,"stateRoot");se(this,"receiptsRoot");se(this,"blobGasUsed");se(this,"excessBlobGas");se(this,"miner");se(this,"prevRandao");se(this,"extraData");se(this,"baseFeePerGas");Y(this,Nu);L(this,Nu,e.transactions.map(r=>typeof r!="string"?new i_(r,n):r)),wt(this,{provider:n,hash:n0(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:n0(e.prevRandao),extraData:e.extraData,baseFeePerGas:n0(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return _(this,Nu).map(e=>typeof e=="string"?e:e.hash)}get prefetchedTransactions(){const e=_(this,Nu).slice();return e.length===0?[]:(me(typeof e[0]=="object","transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:n,extraData:r,gasLimit:s,gasUsed:i,hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,timestamp:g,transactions:w}=this;return{_type:"Block",baseFeePerGas:Rr(e),difficulty:Rr(n),extraData:r,gasLimit:Rr(s),gasUsed:Rr(i),blobGasUsed:Rr(this.blobGasUsed),excessBlobGas:Rr(this.excessBlobGas),hash:o,miner:a,prevRandao:c,nonce:l,number:u,parentHash:d,timestamp:g,parentBeaconBlockRoot:h,stateRoot:f,receiptsRoot:p,transactions:w}}[Symbol.iterator](){let e=0;const n=this.transactions;return{next:()=>e<this.length?{value:n[e++],done:!1}:{value:void 0,done:!0}}}get length(){return _(this,Nu).length}get date(){return this.timestamp==null?null:new Date(this.timestamp*1e3)}async getTransaction(e){let n;if(typeof e=="number")n=_(this,Nu)[e];else{const r=e.toLowerCase();for(const s of _(this,Nu))if(typeof s=="string"){if(s!==r)continue;n=s;break}else{if(s.hash!==r)continue;n=s;break}}if(n==null)throw new Error("no such tx");return typeof n=="string"?await this.provider.getTransaction(n):n}getPrefetchedTransaction(e){const n=this.prefetchedTransactions;if(typeof e=="number")return n[e];e=e.toLowerCase();for(const r of n)if(r.hash===e)return r;J(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return wGe(this)}}Nu=new WeakMap;class C1{constructor(e,n){se(this,"provider");se(this,"transactionHash");se(this,"blockHash");se(this,"blockNumber");se(this,"removed");se(this,"address");se(this,"data");se(this,"topics");se(this,"index");se(this,"transactionIndex");this.provider=n;const r=Object.freeze(e.topics.slice());wt(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:n,blockNumber:r,data:s,index:i,removed:o,topics:a,transactionHash:c,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return me(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return me(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return bGe(this)}}var m_;class Zte{constructor(e,n){se(this,"provider");se(this,"to");se(this,"from");se(this,"contractAddress");se(this,"hash");se(this,"index");se(this,"blockHash");se(this,"blockNumber");se(this,"logsBloom");se(this,"gasUsed");se(this,"blobGasUsed");se(this,"cumulativeGasUsed");se(this,"gasPrice");se(this,"blobGasPrice");se(this,"type");se(this,"status");se(this,"root");Y(this,m_);L(this,m_,Object.freeze(e.logs.map(s=>new C1(s,n))));let r=Jte;e.effectiveGasPrice!=null?r=e.effectiveGasPrice:e.gasPrice!=null&&(r=e.gasPrice),wt(this,{provider:n,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return _(this,m_)}toJSON(){const{to:e,from:n,contractAddress:r,hash:s,index:i,blockHash:o,blockNumber:a,logsBloom:c,logs:l,status:u,root:d}=this;return{_type:"TransactionReceipt",blockHash:o,blockNumber:a,contractAddress:r,cumulativeGasUsed:Rr(this.cumulativeGasUsed),from:n,gasPrice:Rr(this.gasPrice),blobGasUsed:Rr(this.blobGasUsed),blobGasPrice:Rr(this.blobGasPrice),gasUsed:Rr(this.gasUsed),hash:s,index:i,logs:l,logsBloom:c,root:d,status:u,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(e==null)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(e==null)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return ene(this)}reorderedEvent(e){return me(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),Xte(this,e)}}m_=new WeakMap;var vh;const gB=class gB{constructor(e,n){se(this,"provider");se(this,"blockNumber");se(this,"blockHash");se(this,"index");se(this,"hash");se(this,"type");se(this,"to");se(this,"from");se(this,"nonce");se(this,"gasLimit");se(this,"gasPrice");se(this,"maxPriorityFeePerGas");se(this,"maxFeePerGas");se(this,"maxFeePerBlobGas");se(this,"data");se(this,"value");se(this,"chainId");se(this,"signature");se(this,"accessList");se(this,"blobVersionedHashes");se(this,"authorizationList");Y(this,vh);this.provider=n,this.blockNumber=e.blockNumber!=null?e.blockNumber:null,this.blockHash=e.blockHash!=null?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=e.maxPriorityFeePerGas!=null?e.maxPriorityFeePerGas:null,this.maxFeePerGas=e.maxFeePerGas!=null?e.maxFeePerGas:null,this.maxFeePerBlobGas=e.maxFeePerBlobGas!=null?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=e.accessList!=null?e.accessList:null,this.blobVersionedHashes=e.blobVersionedHashes!=null?e.blobVersionedHashes:null,this.authorizationList=e.authorizationList!=null?e.authorizationList:null,L(this,vh,-1)}toJSON(){const{blockNumber:e,blockHash:n,index:r,hash:s,type:i,to:o,from:a,nonce:c,data:l,signature:u,accessList:d,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:d,blockNumber:e,blockHash:n,blobVersionedHashes:h,chainId:Rr(this.chainId),data:l,from:a,gasLimit:Rr(this.gasLimit),gasPrice:Rr(this.gasPrice),hash:s,maxFeePerGas:Rr(this.maxFeePerGas),maxPriorityFeePerGas:Rr(this.maxPriorityFeePerGas),maxFeePerBlobGas:Rr(this.maxFeePerBlobGas),nonce:c,signature:u,to:o,index:r,type:i,value:Rr(this.value)}}async getBlock(){let e=this.blockNumber;if(e==null){const r=await this.getTransaction();r&&(e=r.blockNumber)}if(e==null)return null;const n=this.provider.getBlock(e);if(n==null)throw new Error("TODO");return n}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(this.blockNumber==null){const{tx:n,blockNumber:r}=await fi({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return n==null||n.blockNumber==null?0:r-n.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,n){const r=e??1,s=n??0;let i=_(this,vh),o=-1,a=i===-1;const c=async()=>{if(a)return null;const{blockNumber:h,nonce:f}=await fi({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(f<this.nonce){i=h;return}if(a)return null;const p=await this.getTransaction();if(!(p&&p.blockNumber!=null))for(o===-1&&(o=i-3,o<_(this,vh)&&(o=_(this,vh)));o<=h;){if(a)return null;const g=await this.provider.getBlock(o,!0);if(g==null)return;for(const w of g)if(w===this.hash)return;for(let w=0;w<g.length;w++){const m=await g.getTransaction(w);if(m.from===this.from&&m.nonce===this.nonce){if(a)return null;const b=await this.provider.getTransactionReceipt(m.hash);if(b==null||h-b.blockNumber+1<r)return;let v="replaced";m.data===this.data&&m.to===this.to&&m.value===this.value?v="repriced":m.data==="0x"&&m.from===m.to&&m.value===Jte&&(v="cancelled"),me(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:v==="replaced"||v==="cancelled",reason:v,replacement:m.replaceableTransaction(i),hash:m.hash,receipt:b})}}o++}},l=h=>{if(h==null||h.status!==0)return h;me(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:h.to,from:h.from,data:""},receipt:h})},u=await this.provider.getTransactionReceipt(this.hash);if(r===0)return l(u);if(u){if(r===1||await u.confirmations()>=r)return l(u)}else if(await c(),r===0)return null;return await new Promise((h,f)=>{const p=[],g=()=>{p.forEach(m=>m())};if(p.push(()=>{a=!0}),s>0){const m=setTimeout(()=>{g(),f(ur("wait for transaction timeout","TIMEOUT"))},s);p.push(()=>{clearTimeout(m)})}const w=async m=>{if(await m.confirmations()>=r){g();try{h(l(m))}catch(b){f(b)}}};if(p.push(()=>{this.provider.off(this.hash,w)}),this.provider.on(this.hash,w),i>=0){const m=async()=>{try{await c()}catch(b){if(Os(b,"TRANSACTION_REPLACED")){g(),f(b);return}}a||this.provider.once("block",m)};p.push(()=>{this.provider.off("block",m)}),this.provider.once("block",m)}})}isMined(){return this.blockHash!=null}isLegacy(){return this.type===0}isBerlin(){return this.type===1}isLondon(){return this.type===2}isCancun(){return this.type===3}removedEvent(){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),ene(this)}reorderedEvent(e){return me(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),me(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Xte(this,e)}replaceableTransaction(e){J(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const n=new gB(this,this.provider);return L(n,vh,e),n}};vh=new WeakMap;let i_=gB;function wGe(t){return{orphan:"drop-block",hash:t.hash,number:t.number}}function Xte(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function ene(t){return{orphan:"drop-transaction",tx:t}}function bGe(t){return{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}class cB extends C1{constructor(n,r,s){super(n,n.provider);se(this,"interface");se(this,"fragment");se(this,"args");const i=r.decodeEventLog(s,n.data,n.topics);wt(this,{args:i,fragment:s,interface:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class tne extends C1{constructor(n,r){super(n,n.provider);se(this,"error");wt(this,{error:r})}}var j0;class vGe extends Zte{constructor(n,r,s){super(s,r);Y(this,j0);L(this,j0,n)}get logs(){return super.logs.map(n=>{const r=n.topics.length?_(this,j0).getEvent(n.topics[0]):null;if(r)try{return new cB(n,_(this,j0),r)}catch(s){return new tne(n,s)}return n})}}j0=new WeakMap;var y_;class lB extends i_{constructor(n,r,s){super(s,r);Y(this,y_);L(this,y_,n)}async wait(n,r){const s=await super.wait(n,r);return s==null?null:new vGe(_(this,y_),this.provider,s)}}y_=new WeakMap;class nne extends Nee{constructor(n,r,s,i){super(n,r,s);se(this,"log");wt(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class EGe extends nne{constructor(e,n,r,s,i){super(e,n,r,new cB(i,e.interface,s));const o=e.interface.decodeEventLog(s,this.log.data,this.log.topics);wt(this,{args:o,fragment:s})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const mW=BigInt(0);function rne(t){return t&&typeof t.call=="function"}function sne(t){return t&&typeof t.estimateGas=="function"}function qT(t){return t&&typeof t.resolveName=="function"}function ine(t){return t&&typeof t.sendTransaction=="function"}function one(t){if(t!=null){if(qT(t))return t;if(t.provider)return t.provider}}var w_;class CGe{constructor(e,n,r){Y(this,w_);se(this,"fragment");if(wt(this,{fragment:n}),n.inputs.length<r.length)throw new Error("too many arguments");const s=Qg(e.runner,"resolveName"),i=qT(s)?s:null;L(this,w_,async function(){const o=await Promise.all(n.inputs.map((a,c)=>r[c]==null?null:a.walkAsync(r[c],(u,d)=>u==="address"?Array.isArray(d)?Promise.all(d.map(h=>Ei(h,i))):Ei(d,i):d)));return e.interface.encodeFilterTopics(n,o)}())}getTopicFilter(){return _(this,w_)}}w_=new WeakMap;function Qg(t,e){return t==null?null:typeof t[e]=="function"?t:t.provider&&typeof t.provider[e]=="function"?t.provider:null}function Op(t){return t==null?null:t.provider||null}async function ane(t,e){const n=ei.dereference(t,"overrides");J(typeof n=="object","invalid overrides parameter","overrides",t);const r=LI(n);return J(r.to==null||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),J(r.data==null||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}async function _Ge(t,e,n){const r=Qg(t,"resolveName"),s=qT(r)?r:null;return await Promise.all(e.map((i,o)=>i.walkAsync(n[o],(a,c)=>(c=ei.dereference(c,a),a==="address"?Ei(c,s):c))))}function AGe(t){const e=async function(o){const a=await ane(o,["data"]);a.to=await t.getAddress(),a.from&&(a.from=await Ei(a.from,one(t.runner)));const c=t.interface,l=Qe(a.value||mW,"overrides.value")===mW,u=(a.data||"0x")==="0x";c.fallback&&!c.fallback.payable&&c.receive&&!u&&!l&&J(!1,"cannot send data to receive or send value to non-payable fallback","overrides",o),J(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data);const d=c.receive||c.fallback&&c.fallback.payable;return J(d||l,"cannot send value to non-payable fallback","overrides.value",a.value),J(c.fallback||u,"cannot send data to receive-only contract","overrides.data",a.data),a},n=async function(o){const a=Qg(t.runner,"call");me(rne(a),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const c=await e(o);try{return await a.call(c)}catch(l){throw VU(l)&&l.data?t.interface.makeError(l.data,c):l}},r=async function(o){const a=t.runner;me(ine(a),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const c=await a.sendTransaction(await e(o)),l=Op(t.runner);return new lB(t.interface,l,c)},s=async function(o){const a=Qg(t.runner,"estimateGas");return me(sne(a),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await a.estimateGas(await e(o))},i=async o=>await r(o);return wt(i,{_contract:t,estimateGas:s,populateTransaction:e,send:r,staticCall:n}),i}function SGe(t,e){const n=function(...l){const u=t.interface.getFunction(e,l);return me(u,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:l}}),u},r=async function(...l){const u=n(...l);let d={};if(u.inputs.length+1===l.length&&(d=await ane(l.pop()),d.from&&(d.from=await Ei(d.from,one(t.runner)))),u.inputs.length!==l.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const h=await _Ge(t.runner,u.inputs,l);return Object.assign({},d,await fi({to:t.getAddress(),data:t.interface.encodeFunctionData(u,h)}))},s=async function(...l){const u=await a(...l);return u.length===1?u[0]:u},i=async function(...l){const u=t.runner;me(ine(u),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const d=await u.sendTransaction(await r(...l)),h=Op(t.runner);return new lB(t.interface,h,d)},o=async function(...l){const u=Qg(t.runner,"estimateGas");return me(sne(u),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await u.estimateGas(await r(...l))},a=async function(...l){const u=Qg(t.runner,"call");me(rne(u),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const d=await r(...l);let h="0x";try{h=await u.call(d)}catch(p){throw VU(p)&&p.data?t.interface.makeError(p.data,d):p}const f=n(...l);return t.interface.decodeFunctionResult(f,h)},c=async(...l)=>n(...l).constant?await s(...l):await i(...l);return wt(c,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:n,estimateGas:o,populateTransaction:r,send:i,staticCall:s,staticCallResult:a}),Object.defineProperty(c,"fragment",{configurable:!1,enumerable:!0,get:()=>{const l=t.interface.getFunction(e);return me(l,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),l}}),c}function xGe(t,e){const n=function(...s){const i=t.interface.getEvent(e,s);return me(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:s}}),i},r=function(...s){return new CGe(t,n(...s),s)};return wt(r,{name:t.interface.getEventName(e),_contract:t,_key:e,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const s=t.interface.getEvent(e);return me(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),s}}),r}const UI=Symbol.for("_ethersInternal_contract"),cne=new WeakMap;function IGe(t,e){cne.set(t[UI],e)}function ko(t){return cne.get(t[UI])}function NGe(t){return t&&typeof t=="object"&&"getTopicFilter"in t&&typeof t.getTopicFilter=="function"&&t.fragment}async function uB(t,e){let n,r=null;if(Array.isArray(e)){const i=function(o){if(nr(o,32))return o;const a=t.interface.getEvent(o);return J(a,"unknown fragment","name",o),a.topicHash};n=e.map(o=>o==null?null:Array.isArray(o)?o.map(i):i(o))}else e==="*"?n=[null]:typeof e=="string"?nr(e,32)?n=[e]:(r=t.interface.getEvent(e),J(r,"unknown fragment","event",e),n=[r.topicHash]):NGe(e)?n=await e.getTopicFilter():"fragment"in e?(r=e.fragment,n=[r.topicHash]):J(!1,"unknown event name","event",e);n=n.map(i=>{if(i==null)return null;if(Array.isArray(i)){const o=Array.from(new Set(i.map(a=>a.toLowerCase())).values());return o.length===1?o[0]:(o.sort(),o)}return i.toLowerCase()});const s=n.map(i=>i==null?"null":Array.isArray(i)?i.join("|"):i).join("&");return{fragment:r,tag:s,topics:n}}async function Uv(t,e){const{subs:n}=ko(t);return n.get((await uB(t,e)).tag)||null}async function yW(t,e,n){const r=Op(t.runner);me(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});const{fragment:s,tag:i,topics:o}=await uB(t,n),{addr:a,subs:c}=ko(t);let l=c.get(i);if(!l){const d={address:a||t,topics:o},h=w=>{let m=s;if(m==null)try{m=t.interface.getEvent(w.topics[0])}catch{}if(m){const b=m,v=s?t.interface.decodeEventLog(s,w.data,w.topics):[];y5(t,n,v,A=>new EGe(t,A,n,b,w))}else y5(t,n,[],b=>new nne(t,b,n,w))};let f=[];l={tag:i,listeners:[],start:()=>{f.length||f.push(r.on(d,h))},stop:async()=>{if(f.length==0)return;let w=f;f=[],await Promise.all(w),r.off(d,h)}},c.set(i,l)}return l}let m5=Promise.resolve();async function TGe(t,e,n,r){await m5;const s=await Uv(t,e);if(!s)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(({listener:o,once:a})=>{const c=Array.from(n);r&&c.push(r(a?null:o));try{o.call(t,...c)}catch{}return!a}),s.listeners.length===0&&(s.stop(),ko(t).subs.delete(s.tag)),i>0}async function y5(t,e,n,r){try{await m5}catch{}const s=TGe(t,e,n,r);return m5=s,await s}const JA=["then"];var WW;WW=UI;const bE=class bE{constructor(e,n,r,s){se(this,"target");se(this,"interface");se(this,"runner");se(this,"filters");se(this,WW);se(this,"fallback");J(typeof e=="string"||fte(e),"invalid value for Contract target","target",e),r==null&&(r=null);const i=g5.from(n);wt(this,{target:e,runner:r,interface:i}),Object.defineProperty(this,UI,{value:{}});let o,a=null,c=null;if(s){const d=Op(r);c=new lB(this.interface,d,s)}let l=new Map;if(typeof e=="string")if(nr(e))a=e,o=Promise.resolve(e);else{const d=Qg(r,"resolveName");if(!qT(d))throw ur("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});o=d.resolveName(e).then(h=>{if(h==null)throw ur("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ko(this).addr=h,h})}else o=e.getAddress().then(d=>{if(d==null)throw new Error("TODO");return ko(this).addr=d,d});IGe(this,{addrPromise:o,addr:a,deployTx:c,subs:l});const u=new Proxy({},{get:(d,h,f)=>{if(typeof h=="symbol"||JA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return this.getEvent(h)}catch(p){if(!Os(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>JA.indexOf(h)>=0?Reflect.has(d,h):Reflect.has(d,h)||this.interface.hasEvent(String(h))});return wt(this,{filters:u}),wt(this,{fallback:i.receive||i.fallback?AGe(this):null}),new Proxy(this,{get:(d,h,f)=>{if(typeof h=="symbol"||h in d||JA.indexOf(h)>=0)return Reflect.get(d,h,f);try{return d.getFunction(h)}catch(p){if(!Os(p,"INVALID_ARGUMENT")||p.argument!=="key")throw p}},has:(d,h)=>typeof h=="symbol"||h in d||JA.indexOf(h)>=0?Reflect.has(d,h):d.interface.hasFunction(h)})}connect(e){return new bE(this.target,this.interface,e)}attach(e){return new bE(e,this.interface,this.runner)}async getAddress(){return await ko(this).addrPromise}async getDeployedCode(){const e=Op(this.runner);me(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const n=await e.getCode(await this.getAddress());return n==="0x"?null:n}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(await this.getDeployedCode()!=null)return this;const r=Op(this.runner);return me(r!=null,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((s,i)=>{const o=async()=>{try{if(await this.getDeployedCode()!=null)return s(this);r.once("block",o)}catch(a){i(a)}};o()})}deploymentTransaction(){return ko(this).deployTx}getFunction(e){return typeof e!="string"&&(e=e.format()),SGe(this,e)}getEvent(e){return typeof e!="string"&&(e=e.format()),xGe(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,n,r){n==null&&(n=0),r==null&&(r="latest");const{addr:s,addrPromise:i}=ko(this),o=s||await i,{fragment:a,topics:c}=await uB(this,e),l={address:o,topics:c,fromBlock:n,toBlock:r},u=Op(this.runner);return me(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(d=>{let h=a;if(h==null)try{h=this.interface.getEvent(d.topics[0])}catch{}if(h)try{return new cB(d,this.interface,h)}catch(f){return new tne(d,f)}return new C1(d,u)})}async on(e,n){const r=await yW(this,"on",e);return r.listeners.push({listener:n,once:!1}),r.start(),this}async once(e,n){const r=await yW(this,"once",e);return r.listeners.push({listener:n,once:!0}),r.start(),this}async emit(e,...n){return await y5(this,e,n,null)}async listenerCount(e){if(e){const s=await Uv(this,e);return s?s.listeners.length:0}const{subs:n}=ko(this);let r=0;for(const{listeners:s}of n.values())r+=s.length;return r}async listeners(e){if(e){const s=await Uv(this,e);return s?s.listeners.map(({listener:i})=>i):[]}const{subs:n}=ko(this);let r=[];for(const{listeners:s}of n.values())r=r.concat(s.map(({listener:i})=>i));return r}async off(e,n){const r=await Uv(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(n==null||r.listeners.length===0)&&(r.stop(),ko(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){const n=await Uv(this,e);if(!n)return this;n.stop(),ko(this).subs.delete(n.tag)}else{const{subs:n}=ko(this);for(const{tag:r,stop:s}of n.values())s(),n.delete(r)}return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return await this.off(e,n)}static buildClass(e){class n extends bE{constructor(s,i=null){super(s,e,i)}}return n}static from(e,n,r){return r==null&&(r=null),new this(e,n,r)}};let w5=bE;function RGe(){return w5}class r0 extends RGe(){}function s2(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):J(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class PGe{constructor(e){se(this,"name");wt(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,n){throw new Error("unsupported coin")}async decodeAddress(e,n){throw new Error("unsupported coin")}}const lne=new RegExp("^(ipfs)://(.*)$","i"),wW=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),lne,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var Eh,eg,Ch,fy,HI,une;const My=class My{constructor(e,n,r){Y(this,Ch);se(this,"provider");se(this,"address");se(this,"name");Y(this,Eh);Y(this,eg);wt(this,{provider:e,address:n,name:r}),L(this,Eh,null),L(this,eg,new r0(n,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return _(this,Eh)==null&&L(this,Eh,(async()=>{try{return await _(this,eg).supportsInterface("0x9061b923")}catch(e){if(Os(e,"CALL_EXCEPTION"))return!1;throw L(this,Eh,null),e}})()),await _(this,Eh)}async getAddress(e){if(e==null&&(e=60),e===60)try{const i=await de(this,Ch,fy).call(this,"addr(bytes32)");return i==null||i===JC?null:i}catch(i){if(Os(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let i=e+2147483648;const o=await de(this,Ch,fy).call(this,"addr(bytes32,uint)",[i]);if(nr(o,20))return Sn(o)}let n=null;for(const i of this.provider.plugins)if(i instanceof PGe&&i.supportsCoinType(e)){n=i;break}if(n==null)return null;const r=await de(this,Ch,fy).call(this,"addr(bytes32,uint)",[e]);if(r==null||r==="0x")return null;const s=await n.decodeAddress(e,r);if(s!=null)return s;me(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){const n=await de(this,Ch,fy).call(this,"text(bytes32,string)",[e]);return n==null||n==="0x"?null:n}async getContentHash(){const e=await de(this,Ch,fy).call(this,"contenthash(bytes32)");if(e==null||e==="0x")return null;const n=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const s=n[1]==="e3010170"?"ipfs":"ipns",i=parseInt(n[4],16);if(n[5].length===i*2)return`${s}://${$7e("0x"+n[2])}`}const r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&r[1].length===64)return`bzz://${r[1]}`;me(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(n==null)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<wW.length;r++){const s=n.match(wW[r]);if(s==null)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const o=s2(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:o}),{linkage:e,url:o}}case"erc721":case"erc1155":{const o=i==="erc721"?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const a=await this.getAddress();if(a==null)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const c=(s[2]||"").split("/");if(c.length!==2)return e.push({type:`!${i}caip`,value:s[2]||""}),{url:null,linkage:e};const l=c[1],u=new r0(c[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if(i==="erc721"){const g=await u.ownerOf(l);if(a!==g)return e.push({type:"!owner",value:g}),{url:null,linkage:e};e.push({type:"owner",value:g})}else if(i==="erc1155"){const g=await u.balanceOf(a,l);if(!g)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:g.toString()})}let d=await u[o](l);if(d==null||d==="0x")return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:d}),i==="erc1155"&&(d=d.replace("{id}",_f(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:d})),d.match(/^ipfs:/i)&&(d=s2(d)),e.push({type:"metadata-url",value:d});let h={};const f=await new Af(d).send();f.assertOk();try{h=f.bodyJson}catch{try{e.push({type:"!metadata",value:f.bodyText})}catch{const m=f.body;return m&&e.push({type:"!metadata",value:Oe(m)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let p=h.image;if(typeof p!="string")return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(!p.match(/^(https:\/\/|data:)/i)){if(p.match(lne)==null)return e.push({type:"!imageUrl-ipfs",value:p}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:p}),p=s2(p)}return e.push({type:"url",value:p}),{linkage:e,url:p}}}}}catch{}return{linkage:e,url:null}}static async getEnsAddress(e){const n=await e.getNetwork(),r=n.getPlugin("org.ethers.plugins.network.Ens");return me(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:n}}),r.address}static async fromName(e,n){var s;let r=n;for(;;){if(r===""||r==="."||n!=="eth"&&r==="eth")return null;const i=await de(s=My,HI,une).call(s,e,r);if(i!=null){const o=new My(e,i,n);return r!==n&&!await o.supportsWildcard()?null:o}r=r.split(".").slice(1).join(".")}}};Eh=new WeakMap,eg=new WeakMap,Ch=new WeakSet,fy=async function(e,n){n=(n||[]).slice();const r=_(this,eg).interface;n.unshift(f5(this.name));let s=null;await this.supportsWildcard()&&(s=r.getFunction(e),me(s,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),n=[qHe(this.name,255),r.encodeFunctionData(s,n)],e="resolve(bytes,bytes)"),n.push({enableCcipRead:!0});try{const i=await _(this,eg)[e](...n);return s?r.decodeFunctionResult(s,i)[0]:i}catch(i){if(!Os(i,"CALL_EXCEPTION"))throw i}return null},HI=new WeakSet,une=async function(e,n){const r=await My.getEnsAddress(e);try{const i=await new r0(r,["function resolver(bytes32) view returns (address)"],e).resolver(f5(n),{enableCcipRead:!0});return i===JC?null:i}catch(s){throw s}return null},Y(My,HI);let BI=My;const bW=BigInt(0);function rn(t,e){return function(n){return n==null?e:t(n)}}function o_(t,e){return n=>{if(e&&n==null)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(r=>t(r))}}function _1(t,e){return n=>{const r={};for(const s in t){let i=s;if(e&&s in e&&!(i in n)){for(const o of e[s])if(o in n){i=o;break}}try{const o=t[s](n[i]);o!==void 0&&(r[s]=o)}catch(o){const a=o instanceof Error?o.message:"not-an-error";me(!1,`invalid value for value.${s} (${a})`,"BAD_DATA",{value:n})}}return r}}function OGe(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}J(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)}function qw(t){return J(nr(t,!0),"invalid data","value",t),t}function Ps(t){return J(nr(t,32),"invalid hash","value",t),t}const kGe=_1({address:Sn,blockHash:Ps,blockNumber:Qt,data:qw,index:Qt,removed:rn(OGe,!1),topics:o_(Ps),transactionHash:Ps,transactionIndex:Qt},{index:["logIndex"]});function DGe(t){return kGe(t)}const MGe=_1({hash:rn(Ps),parentHash:Ps,parentBeaconBlockRoot:rn(Ps,null),number:Qt,timestamp:Qt,nonce:rn(qw),difficulty:Qe,gasLimit:Qe,gasUsed:Qe,stateRoot:rn(Ps,null),receiptsRoot:rn(Ps,null),blobGasUsed:rn(Qe,null),excessBlobGas:rn(Qe,null),miner:rn(Sn),prevRandao:rn(Ps,null),extraData:qw,baseFeePerGas:rn(Qe)},{prevRandao:["mixHash"]});function LGe(t){const e=MGe(t);return e.transactions=t.transactions.map(n=>typeof n=="string"?n:dne(n)),e}const UGe=_1({transactionIndex:Qt,blockNumber:Qt,transactionHash:Ps,address:Sn,topics:o_(Ps),data:qw,index:Qt,blockHash:Ps},{index:["logIndex"]});function BGe(t){return UGe(t)}const $Ge=_1({to:rn(Sn,null),from:rn(Sn,null),contractAddress:rn(Sn,null),index:Qt,root:rn(Oe),gasUsed:Qe,blobGasUsed:rn(Qe,null),logsBloom:rn(qw),blockHash:Ps,hash:Ps,logs:o_(BGe),blockNumber:Qt,cumulativeGasUsed:Qe,effectiveGasPrice:rn(Qe),blobGasPrice:rn(Qe,null),status:rn(Qt),type:rn(Qt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function FGe(t){return $Ge(t)}function dne(t){t.to&&Qe(t.to)===bW&&(t.to="0x0000000000000000000000000000000000000000");const e=_1({hash:Ps,index:rn(Qt,void 0),type:n=>n==="0x"||n==null?0:Qt(n),accessList:rn(bm,null),blobVersionedHashes:rn(o_(Ps,!0),null),authorizationList:rn(o_(n=>{let r;if(n.signature)r=n.signature;else{let s=n.yParity;s==="0x1b"?s=0:s==="0x1c"&&(s=1),r=Object.assign({},n,{yParity:s})}return{address:Sn(n.address),chainId:Qe(n.chainId),nonce:Qe(n.nonce),signature:ho.from(r)}},!1),null),blockHash:rn(Ps,null),blockNumber:rn(Qt,null),transactionIndex:rn(Qt,null),from:Sn,gasPrice:rn(Qe),maxPriorityFeePerGas:rn(Qe),maxFeePerGas:rn(Qe),maxFeePerBlobGas:rn(Qe,null),gasLimit:Qe,to:rn(Sn,null),value:Qe,nonce:Qt,data:qw,creates:rn(Sn,null),chainId:rn(Qe,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(e.to==null&&e.creates==null&&(e.creates=Nze(e)),(t.type===1||t.type===2)&&t.accessList==null&&(e.accessList=[]),t.signature?e.signature=ho.from(t.signature):e.signature=ho.from(t),e.chainId==null){const n=e.signature.legacyChainId;n!=null&&(e.chainId=n)}return e.blockHash&&Qe(e.blockHash)===bW&&(e.blockHash=null),e}const jGe="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class A1{constructor(e){se(this,"name");wt(this,{name:e})}clone(){return new A1(this.name)}}class VT extends A1{constructor(n,r){n==null&&(n=0);super(`org.ethers.network.plugins.GasCost#${n||0}`);se(this,"effectiveBlock");se(this,"txBase");se(this,"txCreate");se(this,"txDataZero");se(this,"txDataNonzero");se(this,"txAccessListStorageKey");se(this,"txAccessListAddress");const s={effectiveBlock:n};function i(o,a){let c=(r||{})[o];c==null&&(c=a),J(typeof c=="number",`invalud value for ${o}`,"costs",r),s[o]=c}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),wt(this,s)}clone(){return new VT(this.effectiveBlock,this)}}class KT extends A1{constructor(n,r){super("org.ethers.plugins.network.Ens");se(this,"address");se(this,"targetNetwork");wt(this,{address:n||jGe,targetNetwork:r??1})}clone(){return new KT(this.address,this.targetNetwork)}}var b_,v_;class WGe extends A1{constructor(n,r){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin");Y(this,b_);Y(this,v_);L(this,b_,n),L(this,v_,r)}get url(){return _(this,b_)}get processFunc(){return _(this,v_)}clone(){return this}}b_=new WeakMap,v_=new WeakMap;const i2=new Map;var W0,z0,_h;const Ly=class Ly{constructor(e,n){Y(this,W0);Y(this,z0);Y(this,_h);L(this,W0,e),L(this,z0,Qe(n)),L(this,_h,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return _(this,W0)}set name(e){L(this,W0,e)}get chainId(){return _(this,z0)}set chainId(e){L(this,z0,Qe(e,"chainId"))}matches(e){if(e==null)return!1;if(typeof e=="string"){try{return this.chainId===Qe(e)}catch{}return this.name===e}if(typeof e=="number"||typeof e=="bigint"){try{return this.chainId===Qe(e)}catch{}return!1}if(typeof e=="object"){if(e.chainId!=null){try{return this.chainId===Qe(e.chainId)}catch{}return!1}return e.name!=null?this.name===e.name:!1}return!1}get plugins(){return Array.from(_(this,_h).values())}attachPlugin(e){if(_(this,_h).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,_h).set(e.name,e.clone()),this}getPlugin(e){return _(this,_h).get(e)||null}getPlugins(e){return this.plugins.filter(n=>n.name.split("#")[0]===e)}clone(){const e=new Ly(this.name,this.chainId);return this.plugins.forEach(n=>{e.attachPlugin(n.clone())}),e}computeIntrinsicGas(e){const n=this.getPlugin("org.ethers.plugins.network.GasCost")||new VT;let r=n.txBase;if(e.to==null&&(r+=n.txCreate),e.data)for(let s=2;s<e.data.length;s+=2)e.data.substring(s,s+2)==="00"?r+=n.txDataZero:r+=n.txDataNonzero;if(e.accessList){const s=bm(e.accessList);for(const i in s)r+=n.txAccessListAddress+n.txAccessListStorageKey*s[i].storageKeys.length}return r}static from(e){if(zGe(),e==null)return Ly.from("mainnet");if(typeof e=="number"&&(e=BigInt(e)),typeof e=="string"||typeof e=="bigint"){const n=i2.get(e);if(n)return n();if(typeof e=="bigint")return new Ly("unknown",e);J(!1,"unknown network","network",e)}if(typeof e.clone=="function")return e.clone();if(typeof e=="object"){J(typeof e.name=="string"&&typeof e.chainId=="number","invalid network object name or chainId","network",e);const n=new Ly(e.name,e.chainId);return(e.ensAddress||e.ensNetwork!=null)&&n.attachPlugin(new KT(e.ensAddress,e.ensNetwork)),n}J(!1,"invalid network","network",e)}static register(e,n){typeof e=="number"&&(e=BigInt(e));const r=i2.get(e);r&&J(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),i2.set(e,n)}};W0=new WeakMap,z0=new WeakMap,_h=new WeakMap;let Nl=Ly;function vW(t,e){const n=String(t);if(!n.match(/^[0-9.]+$/))throw new Error(`invalid gwei value: ${t}`);const r=n.split(".");if(r.length===1&&r.push(""),r.length!==2)throw new Error(`invalid gwei value: ${t}`);for(;r[1].length<e;)r[1]+="0";if(r[1].length>9){let s=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||s++,r[1]=s.toString()}return BigInt(r[0]+r[1])}function EW(t){return new WGe(t,async(e,n,r)=>{r.setHeader("User-Agent","ethers");let s;try{const[i,o]=await Promise.all([r.send(),e()]);s=i;const a=s.bodyJson.standard;return{gasPrice:o.gasPrice,maxFeePerGas:vW(a.maxFee,9),maxPriorityFeePerGas:vW(a.maxPriorityFee,9)}}catch(i){me(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:s,error:i})}})}let CW=!1;function zGe(){if(CW)return;CW=!0;function t(e,n,r){const s=function(){const i=new Nl(e,n);return r.ensNetwork!=null&&i.attachPlugin(new KT(null,r.ensNetwork)),i.attachPlugin(new VT),(r.plugins||[]).forEach(o=>{i.attachPlugin(o)}),i};Nl.register(e,s),Nl.register(n,s),r.altNames&&r.altNames.forEach(i=>{Nl.register(i,s)})}t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",11155111,{ensNetwork:11155111}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[EW("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[EW("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",11155420,{}),t("xdai",100,{ensNetwork:1})}function b5(t){return JSON.parse(JSON.stringify(t))}var Tu,wa,Ah,hl,H0,HS;class HGe{constructor(e){Y(this,H0);Y(this,Tu);Y(this,wa);Y(this,Ah);Y(this,hl);L(this,Tu,e),L(this,wa,null),L(this,Ah,4e3),L(this,hl,-2)}get pollingInterval(){return _(this,Ah)}set pollingInterval(e){L(this,Ah,e)}start(){_(this,wa)||(L(this,wa,_(this,Tu)._setTimeout(de(this,H0,HS).bind(this),_(this,Ah))),de(this,H0,HS).call(this))}stop(){_(this,wa)&&(_(this,Tu)._clearTimeout(_(this,wa)),L(this,wa,null))}pause(e){this.stop(),e&&L(this,hl,-2)}resume(){this.start()}}Tu=new WeakMap,wa=new WeakMap,Ah=new WeakMap,hl=new WeakMap,H0=new WeakSet,HS=async function(){try{const e=await _(this,Tu).getBlockNumber();if(_(this,hl)===-2){L(this,hl,e);return}if(e!==_(this,hl)){for(let n=_(this,hl)+1;n<=e;n++){if(_(this,wa)==null)return;await _(this,Tu).emit("block",n)}L(this,hl,e)}}catch{}_(this,wa)!=null&&L(this,wa,_(this,Tu)._setTimeout(de(this,H0,HS).bind(this),_(this,Ah)))};var tg,ng,Sh;class dB{constructor(e){Y(this,tg);Y(this,ng);Y(this,Sh);L(this,tg,e),L(this,Sh,!1),L(this,ng,n=>{this._poll(n,_(this,tg))})}async _poll(e,n){throw new Error("sub-classes must override this")}start(){_(this,Sh)||(L(this,Sh,!0),_(this,ng).call(this,-2),_(this,tg).on("block",_(this,ng)))}stop(){_(this,Sh)&&(L(this,Sh,!1),_(this,tg).off("block",_(this,ng)))}pause(e){this.stop()}resume(){this.start()}}tg=new WeakMap,ng=new WeakMap,Sh=new WeakMap;var G0,Ru;class GGe extends dB{constructor(n,r){super(n);Y(this,G0);Y(this,Ru);L(this,G0,r),L(this,Ru,-2)}pause(n){n&&L(this,Ru,-2),super.pause(n)}async _poll(n,r){const s=await r.getBlock(_(this,G0));s!=null&&(_(this,Ru)===-2?L(this,Ru,s.number):s.number>_(this,Ru)&&(r.emit(_(this,G0),s.number),L(this,Ru,s.number)))}}G0=new WeakMap,Ru=new WeakMap;var GI;class qGe extends dB{constructor(n,r){super(n);Y(this,GI);L(this,GI,b5(r))}async _poll(n,r){throw new Error("@TODO")}}GI=new WeakMap;var q0;class VGe extends dB{constructor(n,r){super(n);Y(this,q0);L(this,q0,r)}async _poll(n,r){const s=await r.getTransactionReceipt(_(this,q0));s&&r.emit(_(this,q0),s)}}q0=new WeakMap;var Pu,V0,K0,xh,ba,qI,hne;class hB{constructor(e,n){Y(this,qI);Y(this,Pu);Y(this,V0);Y(this,K0);Y(this,xh);Y(this,ba);L(this,Pu,e),L(this,V0,b5(n)),L(this,K0,de(this,qI,hne).bind(this)),L(this,xh,!1),L(this,ba,-2)}start(){_(this,xh)||(L(this,xh,!0),_(this,ba)===-2&&_(this,Pu).getBlockNumber().then(e=>{L(this,ba,e)}),_(this,Pu).on("block",_(this,K0)))}stop(){_(this,xh)&&(L(this,xh,!1),_(this,Pu).off("block",_(this,K0)))}pause(e){this.stop(),e&&L(this,ba,-2)}resume(){this.start()}}Pu=new WeakMap,V0=new WeakMap,K0=new WeakMap,xh=new WeakMap,ba=new WeakMap,qI=new WeakSet,hne=async function(e){if(_(this,ba)===-2)return;const n=b5(_(this,V0));n.fromBlock=_(this,ba)+1,n.toBlock=e;const r=await _(this,Pu).getLogs(n);if(r.length===0){_(this,ba)<e-60&&L(this,ba,e-60);return}for(const s of r)_(this,Pu).emit(_(this,V0),s),L(this,ba,s.blockNumber)};const KGe=BigInt(2),YGe=10;function ZA(t){return t&&typeof t.then=="function"}function GS(t,e){return t+":"+JSON.stringify(e,(n,r)=>{if(r==null)return"null";if(typeof r=="bigint")return`bigint:${r.toString()}`;if(typeof r=="string")return r.toLowerCase();if(typeof r=="object"&&!Array.isArray(r)){const s=Object.keys(r);return s.sort(),s.reduce((i,o)=>(i[o]=r[o],i),{})}return r})}class fne{constructor(e){se(this,"name");wt(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function QGe(t){return JSON.parse(JSON.stringify(t))}function v5(t){return t=Array.from(new Set(t).values()),t.sort(),t}async function o2(t,e){if(t==null)throw new Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),typeof t=="string")switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(nr(t,32)){const n=t.toLowerCase();return{type:"transaction",tag:GS("tx",{hash:n}),hash:n}}if(t.orphan){const n=t;return{type:"orphan",tag:GS("orphan",n),filter:QGe(n)}}if(t.address||t.topics){const n=t,r={topics:(n.topics||[]).map(s=>s==null?null:Array.isArray(s)?v5(s.map(i=>i.toLowerCase())):s.toLowerCase())};if(n.address){const s=[],i=[],o=a=>{nr(a)?s.push(a):i.push((async()=>{s.push(await Ei(a,e))})())};Array.isArray(n.address)?n.address.forEach(o):o(n.address),i.length&&await Promise.all(i),r.address=v5(s.map(a=>a.toLowerCase()))}return{filter:r,tag:GS("event",r),type:"event"}}J(!1,"unknown ProviderEvent","event",t)}function a2(){return new Date().getTime()}const JGe={cacheTimeout:250,pollingInterval:4e3};var Ys,Ih,Qs,Y0,Uo,rg,Nh,Ou,E_,va,Q0,J0,qt,Ro,E5,C5,Bv,_5,$v,qS;class ZGe{constructor(e,n){Y(this,qt);Y(this,Ys);Y(this,Ih);Y(this,Qs);Y(this,Y0);Y(this,Uo);Y(this,rg);Y(this,Nh);Y(this,Ou);Y(this,E_);Y(this,va);Y(this,Q0);Y(this,J0);if(L(this,J0,Object.assign({},JGe,n||{})),e==="any")L(this,rg,!0),L(this,Uo,null);else if(e){const r=Nl.from(e);L(this,rg,!1),L(this,Uo,Promise.resolve(r)),setTimeout(()=>{this.emit("network",r,null)},0)}else L(this,rg,!1),L(this,Uo,null);L(this,Ou,-1),L(this,Nh,new Map),L(this,Ys,new Map),L(this,Ih,new Map),L(this,Qs,null),L(this,Y0,!1),L(this,E_,1),L(this,va,new Map),L(this,Q0,!1)}get pollingInterval(){return _(this,J0).pollingInterval}get provider(){return this}get plugins(){return Array.from(_(this,Ih).values())}attachPlugin(e){if(_(this,Ih).get(e.name))throw new Error(`cannot replace existing plugin: ${e.name} `);return _(this,Ih).set(e.name,e.connect(this)),this}getPlugin(e){return _(this,Ih).get(e)||null}get disableCcipRead(){return _(this,Q0)}set disableCcipRead(e){L(this,Q0,!!e)}async ccipReadFetch(e,n,r){if(this.disableCcipRead||r.length===0||e.to==null)return null;const s=e.to.toLowerCase(),i=n.toLowerCase(),o=[];for(let a=0;a<r.length;a++){const c=r[a],l=c.replace("{sender}",s).replace("{data}",i),u=new Af(l);c.indexOf("{data}")===-1&&(u.body={data:i,sender:s}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:u,index:a,urls:r});let d="unknown error",h;try{h=await u.send()}catch(f){o.push(f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:{error:f}});continue}try{const f=h.bodyJson;if(f.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:u,result:f}),f.data;f.message&&(d=f.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:u,result:f})}catch{}me(h.statusCode<400||h.statusCode>=500,`response not found during CCIP fetch: ${d}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:c,errorMessage:d}}),o.push(d)}me(!1,`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:o}})}_wrapBlock(e,n){return new yGe(LGe(e),this)}_wrapLog(e,n){return new C1(DGe(e),this)}_wrapTransactionReceipt(e,n){return new Zte(FGe(e),this)}_wrapTransactionResponse(e,n){return new i_(dne(e),this)}_detectNetwork(){me(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){me(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Qt(await de(this,qt,Ro).call(this,{method:"getBlockNumber"}),"%response");return _(this,Ou)>=0&&L(this,Ou,e),e}_getAddress(e){return Ei(e,this)}_getBlockTag(e){if(e==null)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}if(nr(e))return nr(e,32)?e:yc(e);if(typeof e=="bigint"&&(e=Qt(e,"blockTag")),typeof e=="number")return e>=0?yc(e):_(this,Ou)>=0?yc(_(this,Ou)+e):this.getBlockNumber().then(n=>yc(n+e));J(!1,"invalid blockTag","blockTag",e)}_getFilter(e){const n=(e.topics||[]).map(c=>c==null?null:Array.isArray(c)?v5(c.map(l=>l.toLowerCase())):c.toLowerCase()),r="blockHash"in e?e.blockHash:void 0,s=(c,l,u)=>{let d;switch(c.length){case 0:break;case 1:d=c[0];break;default:c.sort(),d=c}if(r&&(l!=null||u!=null))throw new Error("invalid filter");const h={};return d&&(h.address=d),n.length&&(h.topics=n),l&&(h.fromBlock=l),u&&(h.toBlock=u),r&&(h.blockHash=r),h};let i=[];if(e.address)if(Array.isArray(e.address))for(const c of e.address)i.push(this._getAddress(c));else i.push(this._getAddress(e.address));let o;"fromBlock"in e&&(o=this._getBlockTag(e.fromBlock));let a;return"toBlock"in e&&(a=this._getBlockTag(e.toBlock)),i.filter(c=>typeof c!="string").length||o!=null&&typeof o!="string"||a!=null&&typeof a!="string"?Promise.all([Promise.all(i),o,a]).then(c=>s(c[0],c[1],c[2])):s(i,o,a)}_getTransactionRequest(e){const n=LI(e),r=[];if(["to","from"].forEach(s=>{if(n[s]==null)return;const i=Ei(n[s],this);ZA(i)?r.push(async function(){n[s]=await i}()):n[s]=i}),n.blockTag!=null){const s=this._getBlockTag(n.blockTag);ZA(s)?r.push(async function(){n.blockTag=await s}()):n.blockTag=s}return r.length?async function(){return await Promise.all(r),n}():n}async getNetwork(){if(_(this,Uo)==null){const s=(async()=>{try{const i=await this._detectNetwork();return this.emit("network",i,null),i}catch(i){throw _(this,Uo)===s&&L(this,Uo,null),i}})();return L(this,Uo,s),(await s).clone()}const e=_(this,Uo),[n,r]=await Promise.all([e,this._detectNetwork()]);return n.chainId!==r.chainId&&(_(this,rg)?(this.emit("network",r,n),_(this,Uo)===e&&L(this,Uo,Promise.resolve(r))):me(!1,`network changed: ${n.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),n.clone()}async getFeeData(){const e=await this.getNetwork(),n=async()=>{const{_block:s,gasPrice:i,priorityFee:o}=await fi({_block:de(this,qt,_5).call(this,"latest",!1),gasPrice:(async()=>{try{const u=await de(this,qt,Ro).call(this,{method:"getGasPrice"});return Qe(u,"%response")}catch{}return null})(),priorityFee:(async()=>{try{const u=await de(this,qt,Ro).call(this,{method:"getPriorityFee"});return Qe(u,"%response")}catch{}return null})()});let a=null,c=null;const l=this._wrapBlock(s,e);return l&&l.baseFeePerGas&&(c=o??BigInt("1000000000"),a=l.baseFeePerGas*KGe+c),new gW(i,a,c)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){const s=new Af(r.url),i=await r.processFunc(n,this,s);return new gW(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await n()}async estimateGas(e){let n=this._getTransactionRequest(e);return ZA(n)&&(n=await n),Qe(await de(this,qt,Ro).call(this,{method:"estimateGas",transaction:n}),"%response")}async call(e){const{tx:n,blockTag:r}=await fi({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await de(this,qt,C5).call(this,de(this,qt,E5).call(this,n,r,e.enableCcipRead?0:-1))}async getBalance(e,n){return Qe(await de(this,qt,Bv).call(this,{method:"getBalance"},e,n),"%response")}async getTransactionCount(e,n){return Qt(await de(this,qt,Bv).call(this,{method:"getTransactionCount"},e,n),"%response")}async getCode(e,n){return Oe(await de(this,qt,Bv).call(this,{method:"getCode"},e,n))}async getStorage(e,n,r){const s=Qe(n,"position");return Oe(await de(this,qt,Bv).call(this,{method:"getStorage",position:s},e,r))}async broadcastTransaction(e){const{blockNumber:n,hash:r,network:s}=await fi({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=TI.from(e);if(i.hash!==r)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,s).replaceableTransaction(n)}async getBlock(e,n){const{network:r,params:s}=await fi({network:this.getNetwork(),params:de(this,qt,_5).call(this,e,!!n)});return s==null?null:this._wrapBlock(s,r)}async getTransaction(e){const{network:n,params:r}=await fi({network:this.getNetwork(),params:de(this,qt,Ro).call(this,{method:"getTransaction",hash:e})});return r==null?null:this._wrapTransactionResponse(r,n)}async getTransactionReceipt(e){const{network:n,params:r}=await fi({network:this.getNetwork(),params:de(this,qt,Ro).call(this,{method:"getTransactionReceipt",hash:e})});if(r==null)return null;if(r.gasPrice==null&&r.effectiveGasPrice==null){const s=await de(this,qt,Ro).call(this,{method:"getTransaction",hash:e});if(s==null)throw new Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=s.gasPrice}return this._wrapTransactionReceipt(r,n)}async getTransactionResult(e){const{result:n}=await fi({network:this.getNetwork(),result:de(this,qt,Ro).call(this,{method:"getTransactionResult",hash:e})});return n==null?null:Oe(n)}async getLogs(e){let n=this._getFilter(e);ZA(n)&&(n=await n);const{network:r,params:s}=await fi({network:this.getNetwork(),params:de(this,qt,Ro).call(this,{method:"getLogs",filter:n})});return s.map(i=>this._wrapLog(i,r))}_getProvider(e){me(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await BI.fromName(this,e)}async getAvatar(e){const n=await this.getResolver(e);return n?await n.getAvatar():null}async resolveName(e){const n=await this.getResolver(e);return n?await n.getAddress():null}async lookupAddress(e){e=Sn(e);const n=f5(e.substring(2).toLowerCase()+".addr.reverse");try{const r=await BI.getEnsAddress(this),i=await new r0(r,["function resolver(bytes32) view returns (address)"],this).resolver(n);if(i==null||i===JC)return null;const a=await new r0(i,["function name(bytes32) view returns (string)"],this).name(n);return await this.resolveName(a)!==e?null:a}catch(r){if(Os(r,"BAD_DATA")&&r.value==="0x"||Os(r,"CALL_EXCEPTION"))return null;throw r}return null}async waitForTransaction(e,n,r){const s=n??1;return s===0?this.getTransactionReceipt(e):new Promise(async(i,o)=>{let a=null;const c=async l=>{try{const u=await this.getTransactionReceipt(e);if(u!=null&&l-u.blockNumber+1>=s){i(u),a&&(clearTimeout(a),a=null);return}}catch(u){console.log("EEE",u)}this.once("block",c)};r!=null&&(a=setTimeout(()=>{a!=null&&(a=null,this.off("block",c),o(ur("timeout","TIMEOUT",{reason:"timeout"})))},r)),c(await this.getBlockNumber())})}async waitForBlock(e){me(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const n=_(this,va).get(e);n&&(n.timer&&clearTimeout(n.timer),_(this,va).delete(e))}_setTimeout(e,n){n==null&&(n=0);const r=Cd(this,E_)._++,s=()=>{_(this,va).delete(r),e()};if(this.paused)_(this,va).set(r,{timer:null,func:s,time:n});else{const i=setTimeout(s,n);_(this,va).set(r,{timer:i,func:s,time:a2()})}return r}_forEachSubscriber(e){for(const n of _(this,Ys).values())e(n.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new fne(e.type);case"block":{const n=new HGe(this);return n.pollingInterval=this.pollingInterval,n}case"safe":case"finalized":return new GGe(this,e.type);case"event":return new hB(this,e.filter);case"transaction":return new VGe(this,e.hash);case"orphan":return new qGe(this,e.filter)}throw new Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,n){for(const r of _(this,Ys).values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=n,r.started&&n.start(),_(this,Qs)!=null&&n.pause(_(this,Qs));break}}async on(e,n){const r=await de(this,qt,qS).call(this,e);return r.listeners.push({listener:n,once:!1}),r.started||(r.subscriber.start(),r.started=!0,_(this,Qs)!=null&&r.subscriber.pause(_(this,Qs))),this}async once(e,n){const r=await de(this,qt,qS).call(this,e);return r.listeners.push({listener:n,once:!0}),r.started||(r.subscriber.start(),r.started=!0,_(this,Qs)!=null&&r.subscriber.pause(_(this,Qs))),this}async emit(e,...n){const r=await de(this,qt,$v).call(this,e,n);if(!r||r.listeners.length===0)return!1;const s=r.listeners.length;return r.listeners=r.listeners.filter(({listener:i,once:o})=>{const a=new Nee(this,o?null:i,e);try{i.call(this,...n,a)}catch{}return!o}),r.listeners.length===0&&(r.started&&r.subscriber.stop(),_(this,Ys).delete(r.tag)),s>0}async listenerCount(e){if(e){const r=await de(this,qt,$v).call(this,e);return r?r.listeners.length:0}let n=0;for(const{listeners:r}of _(this,Ys).values())n+=r.length;return n}async listeners(e){if(e){const r=await de(this,qt,$v).call(this,e);return r?r.listeners.map(({listener:s})=>s):[]}let n=[];for(const{listeners:r}of _(this,Ys).values())n=n.concat(r.map(({listener:s})=>s));return n}async off(e,n){const r=await de(this,qt,$v).call(this,e);if(!r)return this;if(n){const s=r.listeners.map(({listener:i})=>i).indexOf(n);s>=0&&r.listeners.splice(s,1)}return(!n||r.listeners.length===0)&&(r.started&&r.subscriber.stop(),_(this,Ys).delete(r.tag)),this}async removeAllListeners(e){if(e){const{tag:n,started:r,subscriber:s}=await de(this,qt,qS).call(this,e);r&&s.stop(),_(this,Ys).delete(n)}else for(const[n,{started:r,subscriber:s}]of _(this,Ys))r&&s.stop(),_(this,Ys).delete(n);return this}async addListener(e,n){return await this.on(e,n)}async removeListener(e,n){return this.off(e,n)}get destroyed(){return _(this,Y0)}destroy(){this.removeAllListeners();for(const e of _(this,va).keys())this._clearTimeout(e);L(this,Y0,!0)}get paused(){return _(this,Qs)!=null}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(L(this,Ou,-1),_(this,Qs)!=null){if(_(this,Qs)==!!e)return;me(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(n=>n.pause(e)),L(this,Qs,!!e);for(const n of _(this,va).values())n.timer&&clearTimeout(n.timer),n.time=a2()-n.time}resume(){if(_(this,Qs)!=null){this._forEachSubscriber(e=>e.resume()),L(this,Qs,null);for(const e of _(this,va).values()){let n=e.time;n<0&&(n=0),e.time=a2(),setTimeout(e.func,n)}}}}Ys=new WeakMap,Ih=new WeakMap,Qs=new WeakMap,Y0=new WeakMap,Uo=new WeakMap,rg=new WeakMap,Nh=new WeakMap,Ou=new WeakMap,E_=new WeakMap,va=new WeakMap,Q0=new WeakMap,J0=new WeakMap,qt=new WeakSet,Ro=async function(e){const n=_(this,J0).cacheTimeout;if(n<0)return await this._perform(e);const r=GS(e.method,e);let s=_(this,Nh).get(r);return s||(s=this._perform(e),_(this,Nh).set(r,s),setTimeout(()=>{_(this,Nh).get(r)===s&&_(this,Nh).delete(r)},n)),await s},E5=async function(e,n,r){me(r<YGe,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:n,enableCcipRead:!0})});const s=LI(e);try{return Oe(await this._perform({method:"call",transaction:s,blockTag:n}))}catch(i){if(!this.disableCcipRead&&VU(i)&&i.data&&r>=0&&n==="latest"&&s.to!=null&&_r(i.data,0,4)==="0x556f1830"){const o=i.data,a=await Ei(s.to,this);let c;try{c=rqe(_r(i.data,4))}catch(d){me(!1,d.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:s,info:{data:o}})}me(c.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:o,reason:"OffchainLookup",transaction:s,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:c.errorArgs}});const l=await this.ccipReadFetch(s,c.calldata,c.urls);me(l!=null,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:s,info:{data:i.data,errorArgs:c.errorArgs}});const u={to:a,data:Ir([c.selector,nqe([l,c.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:u});try{const d=await de(this,qt,E5).call(this,u,n,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},u),result:d}),d}catch(d){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},u),error:d}),d}}throw i}},C5=async function(e){const{value:n}=await fi({network:this.getNetwork(),value:e});return n},Bv=async function(e,n,r){let s=this._getAddress(n),i=this._getBlockTag(r);return(typeof s!="string"||typeof i!="string")&&([s,i]=await Promise.all([s,i])),await de(this,qt,C5).call(this,de(this,qt,Ro).call(this,Object.assign(e,{address:s,blockTag:i})))},_5=async function(e,n){if(nr(e,32))return await de(this,qt,Ro).call(this,{method:"getBlock",blockHash:e,includeTransactions:n});let r=this._getBlockTag(e);return typeof r!="string"&&(r=await r),await de(this,qt,Ro).call(this,{method:"getBlock",blockTag:r,includeTransactions:n})},$v=async function(e,n){let r=await o2(e,this);return r.type==="event"&&n&&n.length>0&&n[0].removed===!0&&(r=await o2({orphan:"drop-log",log:n[0]},this)),_(this,Ys).get(r.tag)||null},qS=async function(e){const n=await o2(e,this),r=n.tag;let s=_(this,Ys).get(r);return s||(s={subscriber:this._getSubscriber(n),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},_(this,Ys).set(r,s)),s};function XGe(t,e){try{const n=A5(t,e);if(n)return II(n)}catch{}return null}function A5(t,e){if(t==="0x")return null;try{const n=Qt(_r(t,e,e+32)),r=Qt(_r(t,n,n+32));return _r(t,n+32,n+32+r)}catch{}return null}function _W(t){const e=Jr(t);if(e.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(e,32-e.length),n}function eqe(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}const tqe=new Uint8Array([]);function nqe(t){const e=[];let n=0;for(let r=0;r<t.length;r++)e.push(tqe),n+=32;for(let r=0;r<t.length;r++){const s=Yt(t[r]);e[r]=_W(n),e.push(_W(s.length)),e.push(eqe(s)),n+=32+Math.ceil(s.length/32)*32}return Ir(e)}const AW="0x0000000000000000000000000000000000000000000000000000000000000000";function rqe(t){const e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};me(e0(t)>=5*32,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=_r(t,0,32);me(_r(n,0,12)===_r(AW,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=_r(n,12);try{const r=[],s=Qt(_r(t,32,64)),i=Qt(_r(t,s,s+32)),o=_r(t,s+32);for(let a=0;a<i;a++){const c=XGe(o,a*32);if(c==null)throw new Error("abort");r.push(c)}e.urls=r}catch{me(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const r=A5(t,64);if(r==null)throw new Error("abort");e.calldata=r}catch{me(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}me(_r(t,100,128)===_r(AW,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=_r(t,96,100);try{const r=A5(t,128);if(r==null)throw new Error("abort");e.extraData=r}catch{me(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(r=>e[r]),e}function Yf(t,e){if(t.provider)return t.provider;me(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function SW(t,e){let n=LI(e);if(n.to!=null&&(n.to=Ei(n.to,t)),n.from!=null){const r=n.from;n.from=Promise.all([t.getAddress(),Ei(r,t)]).then(([s,i])=>(J(s.toLowerCase()===i.toLowerCase(),"transaction from mismatch","tx.from",i),s))}else n.from=t.getAddress();return await fi(n)}class sqe{constructor(e){se(this,"provider");wt(this,{provider:e||null})}async getNonce(e){return Yf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await SW(this,e)}async populateTransaction(e){const n=Yf(this,"populateTransaction"),r=await SW(this,e);r.nonce==null&&(r.nonce=await this.getNonce("pending")),r.gasLimit==null&&(r.gasLimit=await this.estimateGas(r));const s=await this.provider.getNetwork();if(r.chainId!=null){const o=Qe(r.chainId);J(o===s.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else r.chainId=s.chainId;const i=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||i)?J(!1,"eip-1559 transaction do not support gasPrice","tx",e):(r.type===0||r.type===1)&&i&&J(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1){const o=await n.getFeeData();me(o.gasPrice!=null,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice)}else{const o=await n.getFeeData();if(r.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,r.gasPrice!=null){const a=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=a,r.maxPriorityFeePerGas=a}else r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(me(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=o.gasPrice),r.type=0):me(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(r.type===2||r.type===3||r.type===4)&&(r.maxFeePerGas==null&&(r.maxFeePerGas=o.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return await fi(r)}async populateAuthorization(e){const n=Object.assign({},e);return n.chainId==null&&(n.chainId=(await Yf(this,"getNetwork").getNetwork()).chainId),n.nonce==null&&(n.nonce=await this.getNonce()),n}async estimateGas(e){return Yf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Yf(this,"call").call(await this.populateCall(e))}async resolveName(e){return await Yf(this,"resolveName").resolveName(e)}async sendTransaction(e){const n=Yf(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;const s=TI.from(r);return await n.broadcastTransaction(await this.signTransaction(s))}authorize(e){me(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function iqe(t){return JSON.parse(JSON.stringify(t))}var di,fl,sg,Th,ig,Z0,xf,S5,x5;class pne{constructor(e){Y(this,xf);Y(this,di);Y(this,fl);Y(this,sg);Y(this,Th);Y(this,ig);Y(this,Z0);L(this,di,e),L(this,fl,null),L(this,sg,de(this,xf,S5).bind(this)),L(this,Th,!1),L(this,ig,null),L(this,Z0,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,n){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){_(this,Th)||(L(this,Th,!0),de(this,xf,S5).call(this,-2))}stop(){_(this,Th)&&(L(this,Th,!1),L(this,Z0,!0),de(this,xf,x5).call(this),_(this,di).off("block",_(this,sg)))}pause(e){e&&de(this,xf,x5).call(this),_(this,di).off("block",_(this,sg))}resume(){this.start()}}di=new WeakMap,fl=new WeakMap,sg=new WeakMap,Th=new WeakMap,ig=new WeakMap,Z0=new WeakMap,xf=new WeakSet,S5=async function(e){try{_(this,fl)==null&&L(this,fl,this._subscribe(_(this,di)));let n=null;try{n=await _(this,fl)}catch(i){if(!Os(i,"UNSUPPORTED_OPERATION")||i.operation!=="eth_newFilter")throw i}if(n==null){L(this,fl,null),_(this,di)._recoverSubscriber(this,this._recover(_(this,di)));return}const r=await _(this,di).getNetwork();if(_(this,ig)||L(this,ig,r),_(this,ig).chainId!==r.chainId)throw new Error("chaid changed");if(_(this,Z0))return;const s=await _(this,di).send("eth_getFilterChanges",[n]);await this._emitResults(_(this,di),s)}catch(n){console.log("@TODO",n)}_(this,di).once("block",_(this,sg))},x5=function(){const e=_(this,fl);e&&(L(this,fl,null),e.then(n=>{_(this,di).destroyed||_(this,di).send("eth_uninstallFilter",[n])}))};var og;class oqe extends pne{constructor(n,r){super(n);Y(this,og);L(this,og,iqe(r))}_recover(n){return new hB(n,_(this,og))}async _subscribe(n){return await n.send("eth_newFilter",[_(this,og)])}async _emitResults(n,r){for(const s of r)n.emit(_(this,og),n._wrapLog(s,n._network))}}og=new WeakMap;class aqe extends pne{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,n){for(const r of n)e.emit("pending",r)}}const cqe="bigint,boolean,function,number,string,symbol".split(/,/g);function VS(t){if(t==null||cqe.indexOf(typeof t)>=0||typeof t.getAddress=="function")return t;if(Array.isArray(t))return t.map(VS);if(typeof t=="object")return Object.keys(t).reduce((e,n)=>(e[n]=t[n],e),{});throw new Error(`should not happen: ${t} (${typeof t})`)}function lqe(t){return new Promise(e=>{setTimeout(e,t)})}function sy(t){return t&&t.toLowerCase()}function xW(t){return t&&typeof t.pollingInterval=="number"}const gne={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class c2 extends sqe{constructor(n,r){super(n);se(this,"address");r=Sn(r),wt(this,{address:r})}connect(n){me(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(n){return await this.populateCall(n)}async sendUncheckedTransaction(n){const r=VS(n),s=[];if(r.from){const o=r.from;s.push((async()=>{const a=await Ei(o,this.provider);J(a!=null&&a.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=a})())}else r.from=this.address;if(r.gasLimit==null&&s.push((async()=>{r.gasLimit=await this.provider.estimateGas({...r,from:this.address})})()),r.to!=null){const o=r.to;s.push((async()=>{r.to=await Ei(o,this.provider)})())}s.length&&await Promise.all(s);const i=this.provider.getRpcTransaction(r);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(n){const r=await this.provider.getBlockNumber(),s=await this.sendUncheckedTransaction(n);return await new Promise((i,o)=>{const a=[1e3,100];let c=0;const l=async()=>{try{const u=await this.provider.getTransaction(s);if(u!=null){i(u.replaceableTransaction(r));return}}catch(u){if(Os(u,"CANCELLED")||Os(u,"BAD_DATA")||Os(u,"NETWORK_ERROR")||Os(u,"UNSUPPORTED_OPERATION")){u.info==null&&(u.info={}),u.info.sendTransactionHash=s,o(u);return}if(Os(u,"INVALID_ARGUMENT")&&(c++,u.info==null&&(u.info={}),u.info.sendTransactionHash=s,c>10)){o(u);return}this.provider.emit("error",ur("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:u}))}this.provider._setTimeout(()=>{l()},a.pop()||4e3)};l()})}async signTransaction(n){const r=VS(n);if(r.from){const i=await Ei(r.from,this.provider);J(i!=null&&i.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",n),r.from=i}else r.from=this.address;const s=this.provider.getRpcTransaction(r);return await this.provider.send("eth_signTransaction",[s])}async signMessage(n){const r=typeof n=="string"?Ju(n):n;return await this.provider.send("personal_sign",[Oe(r),this.address.toLowerCase()])}async signTypedData(n,r,s){const i=VS(s),o=await MI.resolveNames(n,r,i,async a=>{const c=await Ei(a);return J(c!=null,"TypedData does not support null address","value",a),c});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(MI.getPayload(o.domain,r,o.value))])}async unlock(n){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),n,null])}async _legacySignMessage(n){const r=typeof n=="string"?Ju(n):n;return await this.provider.send("eth_sign",[this.address.toLowerCase(),Oe(r)])}}var ag,X0,ku,pl,hc,Ea,Vi,C_,I5;class uqe extends ZGe{constructor(n,r){super(n,r);Y(this,C_);Y(this,ag);Y(this,X0);Y(this,ku);Y(this,pl);Y(this,hc);Y(this,Ea);Y(this,Vi);L(this,X0,1),L(this,ag,Object.assign({},gne,r||{})),L(this,ku,[]),L(this,pl,null),L(this,Ea,null),L(this,Vi,null);{let i=null;const o=new Promise(a=>{i=a});L(this,hc,{promise:o,resolve:i})}const s=this._getOption("staticNetwork");typeof s=="boolean"?(J(!s||n!=="any","staticNetwork cannot be used on special network 'any'","options",r),s&&n!=null&&L(this,Ea,Nl.from(n))):s&&(J(n==null||s.matches(n),"staticNetwork MUST match network object","options",r),L(this,Ea,s))}_getOption(n){return _(this,ag)[n]}get _network(){return me(_(this,Ea),"network is not available yet","NETWORK_ERROR"),_(this,Ea)}async _perform(n){if(n.method==="call"||n.method==="estimateGas"){let s=n.transaction;if(s&&s.type!=null&&Qe(s.type)&&s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null){const i=await this.getFeeData();i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null&&(n=Object.assign({},n,{transaction:Object.assign({},s,{type:void 0})}))}}const r=this.getRpcRequest(n);return r!=null?await this.send(r.method,r.args):super._perform(n)}async _detectNetwork(){const n=this._getOption("staticNetwork");if(n)if(n===!0){if(_(this,Ea))return _(this,Ea)}else return n;return _(this,Vi)?await _(this,Vi):this.ready?(L(this,Vi,(async()=>{try{const r=Nl.from(Qe(await this.send("eth_chainId",[])));return L(this,Vi,null),r}catch(r){throw L(this,Vi,null),r}})()),await _(this,Vi)):(L(this,Vi,(async()=>{const r={id:Cd(this,X0)._++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:r});let s;try{s=(await this._send(r))[0],L(this,Vi,null)}catch(i){throw L(this,Vi,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:s}),"result"in s)return Nl.from(Qe(s.result));throw this.getRpcError(r,s)})()),await _(this,Vi))}_start(){_(this,hc)==null||_(this,hc).resolve==null||(_(this,hc).resolve(),L(this,hc,null),(async()=>{for(;_(this,Ea)==null&&!this.destroyed;)try{L(this,Ea,await this._detectNetwork())}catch(n){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",ur("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:n}})),await lqe(1e3)}de(this,C_,I5).call(this)})())}async _waitUntilReady(){if(_(this,hc)!=null)return await _(this,hc).promise}_getSubscriber(n){return n.type==="pending"?new aqe(this):n.type==="event"?this._getOption("polling")?new hB(this,n.filter):new oqe(this,n.filter):n.type==="orphan"&&n.filter.orphan==="drop-log"?new fne("orphan"):super._getSubscriber(n)}get ready(){return _(this,hc)==null}getRpcTransaction(n){const r={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(s=>{if(n[s]==null)return;let i=s;s==="gasLimit"&&(i="gas"),r[i]=yc(Qe(n[s],`tx.${s}`))}),["from","to","data"].forEach(s=>{n[s]!=null&&(r[s]=Oe(n[s]))}),n.accessList&&(r.accessList=bm(n.accessList)),n.blobVersionedHashes&&(r.blobVersionedHashes=n.blobVersionedHashes.map(s=>s.toLowerCase())),n.authorizationList&&(r.authorizationList=n.authorizationList.map(s=>{const i=yte(s);return{address:i.address,nonce:yc(i.nonce),chainId:yc(i.chainId),yParity:yc(i.signature.yParity),r:yc(i.signature.r),s:yc(i.signature.s)}})),r}getRpcRequest(n){switch(n.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[sy(n.address),n.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[sy(n.address),n.blockTag]};case"getCode":return{method:"eth_getCode",args:[sy(n.address),n.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[sy(n.address),"0x"+n.position.toString(16),n.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[n.signedTransaction]};case"getBlock":if("blockTag"in n)return{method:"eth_getBlockByNumber",args:[n.blockTag,!!n.includeTransactions]};if("blockHash"in n)return{method:"eth_getBlockByHash",args:[n.blockHash,!!n.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[n.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[n.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(n.transaction),n.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(n.transaction)]};case"getLogs":return n.filter&&n.filter.address!=null&&(Array.isArray(n.filter.address)?n.filter.address=n.filter.address.map(sy):n.filter.address=sy(n.filter.address)),{method:"eth_getLogs",args:[n.filter]}}return null}getRpcError(n,r){const{method:s}=n,{error:i}=r;if(s==="eth_estimateGas"&&i.message){const c=i.message;if(!c.match(/revert/i)&&c.match(/insufficient funds/i))return ur("insufficient funds","INSUFFICIENT_FUNDS",{transaction:n.params[0],info:{payload:n,error:i}});if(c.match(/nonce/i)&&c.match(/too low/i))return ur("nonce has already been used","NONCE_EXPIRED",{transaction:n.params[0],info:{payload:n,error:i}})}if(s==="eth_call"||s==="eth_estimateGas"){const c=N5(i),l=s_.getBuiltinCallException(s==="eth_call"?"call":"estimateGas",n.params[0],c?c.data:null);return l.info={error:i,payload:n},l}const o=JSON.stringify(hqe(i));if(typeof i.message=="string"&&i.message.match(/user denied|ethers-user-denied/i))return ur("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[s]||"unknown",reason:"rejected",info:{payload:n,error:i}});if(s==="eth_sendRawTransaction"||s==="eth_sendTransaction"){const c=n.params[0];if(o.match(/insufficient funds|base fee exceeds gas limit/i))return ur("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:c,info:{error:i}});if(o.match(/nonce/i)&&o.match(/too low/i))return ur("nonce has already been used","NONCE_EXPIRED",{transaction:c,info:{error:i}});if(o.match(/replacement transaction/i)&&o.match(/underpriced/i))return ur("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:c,info:{error:i}});if(o.match(/only replay-protected/i))return ur("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:s,info:{transaction:c,info:{error:i}}})}let a=!!o.match(/the method .* does not exist/i);return a||i&&i.details&&i.details.startsWith("Unauthorized method:")&&(a=!0),a?ur("unsupported operation","UNSUPPORTED_OPERATION",{operation:n.method,info:{error:i,payload:n}}):ur("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:n})}send(n,r){if(this.destroyed)return Promise.reject(ur("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n}));const s=Cd(this,X0)._++,i=new Promise((o,a)=>{_(this,ku).push({resolve:o,reject:a,payload:{method:n,params:r,id:s,jsonrpc:"2.0"}})});return de(this,C_,I5).call(this),i}async getSigner(n){n==null&&(n=0);const r=this.send("eth_accounts",[]);if(typeof n=="number"){const i=await r;if(n>=i.length)throw new Error("no such account");return new c2(this,i[n])}const{accounts:s}=await fi({network:this.getNetwork(),accounts:r});n=Sn(n);for(const i of s)if(Sn(i)===n)return new c2(this,n);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(r=>new c2(this,r))}destroy(){_(this,pl)&&(clearTimeout(_(this,pl)),L(this,pl,null));for(const{payload:n,reject:r}of _(this,ku))r(ur("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));L(this,ku,[]),super.destroy()}}ag=new WeakMap,X0=new WeakMap,ku=new WeakMap,pl=new WeakMap,hc=new WeakMap,Ea=new WeakMap,Vi=new WeakMap,C_=new WeakSet,I5=function(){if(_(this,pl))return;const n=this._getOption("batchMaxCount")===1?0:this._getOption("batchStallTime");L(this,pl,setTimeout(()=>{L(this,pl,null);const r=_(this,ku);for(L(this,ku,[]);r.length;){const s=[r.shift()];for(;r.length&&s.length!==_(this,ag).batchMaxCount;)if(s.push(r.shift()),JSON.stringify(s.map(o=>o.payload)).length>_(this,ag).batchMaxSize){r.unshift(s.pop());break}(async()=>{const i=s.length===1?s[0].payload:s.map(o=>o.payload);this.emit("debug",{action:"sendRpcPayload",payload:i});try{const o=await this._send(i);this.emit("debug",{action:"receiveRpcResult",result:o});for(const{resolve:a,reject:c,payload:l}of s){if(this.destroyed){c(ur("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:l.method}));continue}const u=o.filter(d=>d.id===l.id)[0];if(u==null){const d=ur("missing response for request","BAD_DATA",{value:o,info:{payload:l}});this.emit("error",d),c(d);continue}if("error"in u){c(this.getRpcError(l,u));continue}a(u.result)}}catch(o){this.emit("debug",{action:"receiveRpcError",error:o});for(const{reject:a}of s)a(o)}})()}},n))};var Rh;class dqe extends uqe{constructor(n,r){super(n,r);Y(this,Rh);let s=this._getOption("pollingInterval");s==null&&(s=gne.pollingInterval),L(this,Rh,s)}_getSubscriber(n){const r=super._getSubscriber(n);return xW(r)&&(r.pollingInterval=_(this,Rh)),r}get pollingInterval(){return _(this,Rh)}set pollingInterval(n){if(!Number.isInteger(n)||n<0)throw new Error("invalid interval");L(this,Rh,n),this._forEachSubscriber(r=>{xW(r)&&(r.pollingInterval=_(this,Rh))})}}Rh=new WeakMap;function N5(t){if(t==null)return null;if(typeof t.message=="string"&&t.message.match(/revert/i)&&nr(t.data))return{message:t.message,data:t.data};if(typeof t=="object"){for(const e in t){const n=N5(t[e]);if(n)return n}return null}if(typeof t=="string")try{return N5(JSON.parse(t))}catch{}return null}function T5(t,e){if(t!=null){if(typeof t.message=="string"&&e.push(t.message),typeof t=="object")for(const n in t)T5(t[n],e);if(typeof t=="string")try{return T5(JSON.parse(t),e)}catch{}}}function hqe(t){const e=[];return T5(t,e),e}var ew,tw;const gp=class gp extends dqe{constructor(n,r,s){const i=Object.assign({},s??{},{batchMaxCount:1});J(n&&n.request,"invalid EIP-1193 provider","ethereum",n);super(r,i);Y(this,ew);Y(this,tw);L(this,tw,null),s&&s.providerInfo&&L(this,tw,s.providerInfo),L(this,ew,async(o,a)=>{const c={method:o,params:a};this.emit("debug",{action:"sendEip1193Request",payload:c});try{const l=await n.request(c);return this.emit("debug",{action:"receiveEip1193Result",result:l}),l}catch(l){const u=new Error(l.message);throw u.code=l.code,u.data=l.data,u.payload=c,this.emit("debug",{action:"receiveEip1193Error",error:u}),u}})}get providerInfo(){return _(this,tw)}async send(n,r){return await this._start(),await super.send(n,r)}async _send(n){J(!Array.isArray(n),"EIP-1193 does not support batch request","payload",n);try{const r=await _(this,ew).call(this,n.method,n.params||[]);return[{id:n.id,result:r}]}catch(r){return[{id:n.id,error:{code:r.code,data:r.data,message:r.message}}]}}getRpcError(n,r){switch(r=JSON.parse(JSON.stringify(r)),r.error.code||-1){case 4001:r.error.message=`ethers-user-denied: ${r.error.message}`;break;case 4200:r.error.message=`ethers-unsupported: ${r.error.message}`;break}return super.getRpcError(n,r)}async hasSigner(n){n==null&&(n=0);const r=await this.send("eth_accounts",[]);return typeof n=="number"?r.length>n:(n=n.toLowerCase(),r.filter(s=>s.toLowerCase()===n).length!==0)}async getSigner(n){if(n==null&&(n=0),!await this.hasSigner(n))try{await _(this,ew).call(this,"eth_requestAccounts",[])}catch(r){const s=r.payload;throw this.getRpcError(s,{id:s.id,error:r})}return await super.getSigner(n)}static async discover(n){if(n==null&&(n={}),n.provider)return new gp(n.provider);const r=n.window?n.window:typeof window<"u"?window:null;if(r==null)return null;const s=n.anyProvider;if(s&&r.ethereum)return new gp(r.ethereum);if(!("addEventListener"in r&&"dispatchEvent"in r&&"removeEventListener"in r))return null;const i=n.timeout?n.timeout:300;return i===0?null:await new Promise((o,a)=>{let c=[];const l=h=>{c.push(h.detail),s&&u()},u=()=>{if(clearTimeout(d),c.length)if(n&&n.filter){const h=n.filter(c.map(f=>Object.assign({},f.info)));if(h==null)o(null);else if(h instanceof gp)o(h);else{let f=null;if(h.uuid&&(f=c.filter(g=>h.uuid===g.info.uuid)[0]),f){const{provider:p,info:g}=f;o(new gp(p,void 0,{providerInfo:g}))}else a(ur("filter returned unknown info","UNSUPPORTED_OPERATION",{value:h}))}}else{const{provider:h,info:f}=c[0];o(new gp(h,void 0,{providerInfo:f}))}else o(null);r.removeEventListener("eip6963:announceProvider",l)},d=setTimeout(()=>{u()},i);r.addEventListener("eip6963:announceProvider",l),r.dispatchEvent(new Event("eip6963:requestProvider"))})}};ew=new WeakMap,tw=new WeakMap;let R5=gp;const Uu={DMT:{symbol:"DMT",name:"DMT",address:"0x0000000000000000000000000000000000000000",decimals:18,logo:"/images/dmt-logo.png",isNative:!0},GOLD:{symbol:"GOLD",name:"GOLD",address:"0x6F5e2d3b8c5C5c5F9bcB4adCF40b13308e688D4D",decimals:18,logo:"/images/gold-logo.png",isNative:!1},LAWB:{symbol:"LAWB",name:"LAWB",address:"0xA7DA528a3F4AD9441CaE97e1C33D49db91c82b9F",decimals:6,logo:"/images/lawb-logo.png",isNative:!1},MOSS:{symbol:"MOSS",name:"MOSS",address:"0xeA240b96A9621e67159c59941B9d588eb290ef09",decimals:18,logo:"/images/moss-logo.png",isNative:!1}},IW={testnet:{chess:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"},mainnet:{chess:"0x4a8A3BC091c33eCC1440b6734B0324f8d0457C56"}},$I={testnet:{chainId:1992},mainnet:{chainId:1996}},fqe=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],fu=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"target",type:"address"}],name:"AddressEmptyCode",type:"error"},{inputs:[{internalType:"address",name:"implementation",type:"address"}],name:"ERC1967InvalidImplementation",type:"error"},{inputs:[],name:"ERC1967NonPayable",type:"error"},{inputs:[],name:"FailedCall",type:"error"},{inputs:[],name:"InvalidInitialization",type:"error"},{inputs:[],name:"NotInitializing",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[],name:"UUPSUnauthorizedCallContext",type:"error"},{inputs:[{internalType:"bytes32",name:"slot",type:"bytes32"}],name:"UUPSUnsupportedProxiableUUID",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"}],name:"GameCancelled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player1",type:"address"},{indexed:!1,internalType:"uint256",name:"wagerAmount",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"houseFee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"payoutOrRefund",type:"uint256"},{indexed:!1,internalType:"address",name:"wagerToken",type:"address"}],name:"GameEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes6",name:"inviteCode",type:"bytes6"},{indexed:!1,internalType:"address",name:"player2",type:"address"}],name:"GameJoined",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint64",name:"version",type:"uint64"}],name:"Initialized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minWager",type:"uint256"},{indexed:!1,internalType:"uint256",name:"maxWager",type:"uint256"}],name:"TokenLimitsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{inputs:[],name:"DMT_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"GOLD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LAWB_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MOSS_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"UPGRADE_INTERFACE_VERSION",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"addSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"cancelGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"wagerToken",type:"address"},{internalType:"uint256",name:"wagerAmount",type:"uint256"}],name:"createGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"address",name:"winner",type:"address"}],name:"endGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"",type:"bytes6"}],name:"games",outputs:[{internalType:"address",name:"player1",type:"address"},{internalType:"address",name:"player2",type:"address"},{internalType:"bool",name:"isActive",type:"bool"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes6",name:"inviteCode",type:"bytes6"},{internalType:"uint256",name:"wagerAmount",type:"uint256"},{internalType:"address",name:"wagerToken",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"house",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_house",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes6",name:"inviteCode",type:"bytes6"}],name:"joinGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"leaderboard",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"playerToGame",outputs:[{internalType:"bytes6",name:"",type:"bytes6"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"}],name:"removeSupportedToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"player",type:"address"}],name:"resetPlayerGame",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"supportedTokens",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMaxWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenMinWager",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minWager",type:"uint256"},{internalType:"uint256",name:"maxWager",type:"uint256"}],name:"updateTokenLimits",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newImplementation",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"address payable",name:"recipient",type:"address"}],name:"withdrawTokens",outputs:[],stateMutability:"nonpayable",type:"function"}];function mne(t,e){const n=wm(),r=Uu[t],s=r.isNative||!1,i=n===$I.mainnet.chainId,o=n===$I.testnet.chainId,a=!!e&&i,{data:c,isLoading:l,error:u}=NFe({address:e,query:{enabled:a&&s}}),{data:d,isLoading:h,error:f}=K3({address:r.address,abi:fqe,functionName:"balanceOf",args:e?[e]:void 0,query:{enabled:a&&!s}}),p=s?c==null?void 0:c.value:d,g=s?l:h,w=s?u:f;return console.log(`[TOKEN BALANCE QUERY] ${t}:`,{queryEnabled:a,address:!!e,isOnSankoMainnet:i,isNative:s,contractCall:a?s?"native balance":`balanceOf(${e})`:"DISABLED"}),console.log(`[TOKEN BALANCE] ${t}:`,{tokenAddress:r.address,userAddress:e,chainId:n,isOnSankoMainnet:i,isOnSankoTestnet:o,isNative:s,balance:p==null?void 0:p.toString(),balanceFormatted:p?Number(p)/Math.pow(10,r.decimals):0,isLoading:g,error:w==null?void 0:w.message,errorDetails:w,queryEnabled:!!e&&i}),{balance:p?Number(p)/Math.pow(10,r.decimals):0,balanceWei:p||BigInt(0),isLoading:g,error:w,isOnSankoMainnet:i,isOnSankoTestnet:o}}const pqe=({selectedToken:t,onTokenSelect:e,wagerAmount:n,onWagerChange:r,disabled:s=!1})=>{const{address:i}=p1(),{balance:o,isOnSankoMainnet:a,isOnSankoTestnet:c}=mne(t,i),[l,u]=k.useState(!1),d=h=>{e(h),u(!1)};return y.jsxs("div",{style:{marginBottom:"10px"},children:[y.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[y.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Token:"}),y.jsxs("div",{style:{position:"relative"},children:[y.jsxs("button",{type:"button",onClick:()=>u(!l),disabled:s,style:{padding:"5px 10px",border:"2px outset #fff",background:"#c0c0c0",cursor:s?"not-allowed":"pointer",minWidth:"100px",textAlign:"left"},children:[Uu[t].symbol,y.jsx("span",{style:{float:"right"},children:""})]}),l&&!s&&y.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"#fff",border:"2px outset #fff",zIndex:10,minWidth:"100px"},children:Object.entries(Uu).map(([h,f])=>y.jsx("div",{onClick:()=>d(h),style:{padding:"5px 10px",cursor:"pointer",borderBottom:"1px solid #eee"},onMouseEnter:p=>p.currentTarget.style.background="#f0f0f0",onMouseLeave:p=>p.currentTarget.style.background="#fff",children:f.symbol},h))})]})]}),y.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[y.jsx("label",{style:{fontWeight:"bold",minWidth:"80px"},children:"Amount:"}),y.jsx("input",{type:"number",value:n,onChange:h=>r(Number(h.target.value)),disabled:s,min:"0.1",max:"1000",step:"0.1",style:{padding:"5px",border:"2px inset #fff",background:"#fff",width:"100px"}}),y.jsxs("span",{style:{color:"#666",fontSize:"12px"},children:["Balance: ",a?`${o.toFixed(2)} ${Uu[t].symbol}`:"Connect to Sanko Mainnet"]})]}),c&&y.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet - tokens are not available on testnet"}),!a&&!c&&y.jsx("div",{style:{color:"#ff6b35",fontSize:"12px",marginTop:"5px"},children:" Switch to Sanko Mainnet to see token balances"}),n>o&&a&&y.jsxs("div",{style:{color:"#ff0000",fontSize:"12px",marginTop:"5px"},children:["Insufficient balance. You have ",o.toFixed(2)," ",Uu[t].symbol]}),o===0&&a&&y.jsxs("div",{style:{color:"#ffa500",fontSize:"12px",marginTop:"5px"},children:[" You have 0 ",Uu[t].symbol,". Get tokens from ",y.jsx("a",{href:"https://sanko.xyz/bridge",target:"_blank",rel:"noopener noreferrer",style:{color:"#ffa500"},children:"Sanko Bridge"})]})]})},gqe=t=>t===$I.testnet.chainId?IW.testnet.chess:IW.mainnet.chess,Cn={LOBBY:"lobby",WAITING:"waiting",ACTIVE:"active",FINISHED:"finished"},l2={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},uu=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],mqe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}];function yqe(){const t=new Uint8Array(6);return window.crypto.getRandomValues(t),"0x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")}async function wqe(t,e){try{if(typeof window>"u"||!window.ethereum)throw new Error("No Ethereum provider found. Please connect your wallet.");const n=new R5(window.ethereum);return await new r0(e,fu,n).playerToGame(t)}catch(n){return console.error("Error fetching invite code from contract:",n),null}}const yne=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s,chainId:i}=p1(),o=gqe(i||$I.mainnet.chainId),[a,c]=k.useState(""),[l,u]=k.useState(""),[d,h]=k.useState(!1),[f,p]=k.useState(!1),[g,w]=k.useState(!1),[m,b]=k.useState(!1),{writeContract:v,isPending:A,data:C}=$A(),{writeContract:T,isPending:x,data:N,error:S}=$A(),{writeContract:D,isPending:P,data:$}=$A(),{writeContract:G,isPending:W,data:I}=$A(),R=MFe(),{isLoading:B}=BA({hash:C}),{isLoading:O,data:M}=BA({hash:N}),{isLoading:j}=BA({hash:$}),{isLoading:V}=BA({hash:I});k.useEffect(()=>{I&&!V&&(console.log("[REFUND] Transaction completed successfully"),tt("Game refunded successfully! Your wager has been returned."),zt(Cn.LOBBY),ce(""),Nn(null),Me(0,"refund completed"),lr(null),Bf())},[I,V]);const{data:te}=K3({address:o,abi:fu,functionName:"playerToGame",args:r?[r]:void 0,query:{enabled:!!r}}),{data:Z}=K3({address:o,abi:fu,functionName:"games",args:te?[te]:void 0,query:{enabled:!!te&&te!=="0x000000000000"}}),[X,ce]=k.useState(""),ge=(U,H)=>{console.log(`[INVITE_DEBUG] Setting inviteCode to "${U}" from ${H}`),X&&!U&&console.warn(`[INVITE_DEBUG] WARNING: Clearing inviteCode from "${X}" to "${U}" from ${H}`),ce(U)},Me=(U,H)=>{console.log(`[WAGER_DEBUG] Setting wager to ${U} TDMT from ${H}`),wd!==U&&console.log(`[WAGER_DEBUG] Wager changed from ${wd} to ${U} TDMT`),YT(U)},[it,Je]=k.useState("moves"),bt=async()=>{if(!X||!r){alert("No game to refund or wallet not connected");return}try{console.log("[REFUND] Attempting to refund game:",X);const U=await ss.getGame(X);if(!U||U.blue_player!==r){alert("Only the game creator can refund the game");return}if(U.red_player&&U.red_player!=="0x0000000000000000000000000000000000000000"){alert("Cannot refund game after opponent has joined");return}await G({address:o,abi:fu,functionName:"cancelGame",args:[X]}),console.log("[REFUND] Cancel game transaction submitted")}catch(U){console.error("[REFUND] Error refunding game:",U),alert("Failed to refund game. Please try again.")}},Nt=async()=>{if(!r||!ke){console.error("[CLAIM] Missing required data for claiming winnings");return}let U=X;if(!U&&r){console.log("[CLAIM] Invite code missing from state, trying to get from contract...");try{const H=await wqe(r,o);H&&H!=="0x000000000000"&&(U=H,console.log("[CLAIM] Retrieved invite code from contract:",U))}catch(H){console.error("[CLAIM] Error getting invite code from contract:",H)}}if(!U){console.error("[CLAIM] Could not determine invite code for claiming winnings"),alert("Could not determine game invite code. Please try refreshing the page.");return}try{w(!0),console.log("[CLAIM] Claiming winnings for game:",U,"Player:",ke,"Address:",r);const H=await ss.getGame(U);if(!H){console.error("[CLAIM] Error fetching game data:","Game data not found"),alert("Failed to fetch game data. Please try again.");return}console.log("[CLAIM] Firebase game data:",H);let F=null;if(H.winner&&(H.blue_player||H.red_player)&&(F=H.winner==="blue"?H.blue_player:H.red_player,console.log("[CLAIM] Using Firebase winner data:",{winner:H.winner,winnerAddress:F})),!F&&Z)if(H.winner&&(H.winner==="blue"||H.winner==="red")){console.log("[CLAIM] Using Firebase winner color with contract player addresses");let le,Te,Se,De,ft,Gt;if(Array.isArray(Z))[le,Te,Se,De,ft,Gt]=Z;else{console.error("[CLAIM] Unexpected contract data format:",Z),alert("Failed to verify winner. Please try again.");return}F=H.winner==="blue"?le:Te,console.log("[CLAIM] Winner from Firebase color + contract addresses:",{winnerColor:H.winner,winnerAddress:F,player1:le,player2:Te})}else{console.log("[CLAIM] Using contract data for winner verification"),console.log("[CLAIM] Full contract data:",Z);let le,Te,Se,De,ft,Gt;if(Array.isArray(Z))[le,Te,Se,De,ft,Gt]=Z;else{console.error("[CLAIM] Unexpected contract data format:",Z),alert("Failed to verify winner. Please try again.");return}const St=String(De);if(St.startsWith("0x"))F=St;else if(St==="blue"||St==="red")F=St==="blue"?le:Te;else if(St==="1"||St==="2")F=St==="1"?le:Te;else{console.error("[CLAIM] Unknown winner format:",De,"as string:",St),alert("Failed to verify winner. Please try again.");return}console.log("[CLAIM] Winner from contract:",{winner:De,winnerAddress:F,player1:le,player2:Te,winnerType:typeof De,winnerValue:De,address:r,addressType:typeof r})}if(!F){console.error("[CLAIM] Could not determine winner address"),alert("Failed to verify winner. Please try again.");return}if(console.log("[CLAIM] Winner verification details:",{winnerAddress:F,address:r,playerColor:ke,winnerAddressType:typeof F,addressType:typeof r,addressesMatch:F===r,winnerAddressLength:F==null?void 0:F.length,addressLength:r==null?void 0:r.length}),F!==r){console.error("[CLAIM] Player is not the winner",{winnerAddress:F,address:r,playerColor:ke}),alert("Only the winner can claim winnings.");return}console.log("[CLAIM]  Winner verification passed! Proceeding with contract call...");let ee=U;if(!ee&&Z){console.log("[CLAIM] Using invite code from contract data as fallback");let le,Te,Se,De,ft,Gt;if(Array.isArray(Z))[le,Te,Se,De,ft,Gt]=Z,ee=ft;else{console.error("[CLAIM] Unexpected contract data format for invite code:",Z),alert("Failed to get invite code. Please try again.");return}}if(!ee||typeof ee!="string"||!ee.startsWith("0x")||ee.length!==14){console.error("[CLAIM] Invalid invite code for contract claim:",ee),alert("Invalid invite code for contract claim.");return}console.log("[CLAIM] Calling contract with:",{inviteCode:ee,winner:F,functionName:"endGame",inviteCodeSource:H.invite_code?"Firebase":"Contract"}),D({address:o,abi:fu,functionName:"endGame",args:[ee,F]}),console.log("[CLAIM] Contract call initiated successfully"),P?console.log("[CLAIM] Contract call is pending..."):console.log("[CLAIM] Contract call status:",{isEndingGame:P,endGameHash:$})}catch(H){console.error("[CLAIM] Error claiming winnings:",H),alert("Failed to claim winnings. Please try again.")}finally{w(!1)}},[At,ne]=k.useState(uu),[ie,be]=k.useState("blue"),[fe,ve]=k.useState(null),[ht,Xe]=k.useState([]),[ct,Tt]=k.useState([]),[In,tt]=k.useState("Waiting for opponent..."),[Mn,zt]=k.useState(Cn.LOBBY),[ke,Nn]=k.useState(null),[Pi,lr]=k.useState(null),[wd,YT]=k.useState(0),[QT,mB]=k.useState([]),[Em,bd]=k.useState(!1),[Df,wo]=k.useState(!1),[Ht,Mf]=k.useState(null),[zn,ts]=k.useState(null),[yB,wB]=k.useState(""),[bo,S1]=k.useState(0),[vo,x1]=k.useState("DMT"),{balance:Cm}=mne(vo,r),[bB]=k.useState(!0),[Ga,qa]=k.useState(null),[Kl,JT]=k.useState(0),[I1,N1]=k.useState(Date.now()),Va=36e5;k.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const[T1,ZT]=k.useState(!1),[vd,XT]=k.useState(null),[Ab,Sb]=k.useState(!1),[Lf,xb]=k.useState(null),[Ib,Nb]=k.useState(!1),[Tb,eR]=k.useState(!0),[_m,R1]=k.useState(null),Am=k.useCallback(()=>{Ga&&clearTimeout(Ga);const U=setTimeout(()=>{console.log("[TIMEOUT] 60-minute timeout reached, ending game"),Fc()},Va);qa(U),N1(Date.now())},[Ga]),Uf=k.useCallback(()=>{Ga&&(clearTimeout(Ga),qa(null))},[Ga]),Fc=async()=>{if(!X||!ke)return;console.log("[TIMEOUT] Handling timeout for game:",X);const U=ie==="blue"?"red":"blue",H=U==="blue"?Z==null?void 0:Z[0]:Z==null?void 0:Z[1];H&&(console.log("[TIMEOUT] Ending game with winner:",H),D({address:o,abi:fu,functionName:"endGame",args:[X,H]}),tt(`Game ended due to timeout. ${U==="red"?"Red":"Blue"} wins!`),zt(Cn.FINISHED))},[ii,tR]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),[Rb,nR]=k.useState([]),[Yl,P1]=k.useState(null),Eo=k.useRef(null),Ql=k.useRef(null),O1=k.useRef(r);k.useEffect(()=>{O1.current=r},[r]),k.useEffect(()=>{console.log("[JOIN RECEIPT DEBUG] - joinGameHash:",N),console.log("[JOIN RECEIPT DEBUG] - isWaitingForJoinReceipt:",O),console.log("[JOIN RECEIPT DEBUG] - pendingJoinGameData:",zn),console.log("[JOIN RECEIPT DEBUG] - condition:",N&&!O&&zn),N&&!O&&zn&&(console.log("[CONTRACT] Join transaction confirmed:",N),r===zn.address&&(console.log("[CONTRACT] Setting playerColor to red for confirmed join transaction"),Nn("red"),lr(zn.gameData.blue_player)),ss.updateGame(zn.inviteCode,{...zn.gameData,red_player:zn.address,game_state:"active"}).then(()=>{console.log("[CONTRACT] Firebase updated successfully after join confirmation"),zt(Cn.ACTIVE),tt("Game started!"),Tn(zn.inviteCode),console.log("[CONTRACT] Clearing pending join data"),ts(null)}).catch(U=>{console.error("Error updating game in database:",U),tt("Joined game on contract but failed to update database"),ts(null)}))},[N,O,zn,r]),k.useEffect(()=>{$&&!j&&(console.log("[CLAIM] End game transaction confirmed:",$),tt("Winnings claimed successfully! Transaction hash: "+$.slice(0,10)+"..."),w(!1))},[$,j]),k.useEffect(()=>{P===!1&&g&&!$&&(console.log("[CLAIM] End game transaction rejected or failed"),tt("Claim transaction was rejected. Please try again."),w(!1))},[P,g,$]),k.useEffect(()=>{console.log("[CREATE DEBUG] Transaction receipt handler - createGameHash:",C),console.log("[CREATE DEBUG] Transaction receipt handler - isWaitingForCreateReceipt:",B),console.log("[CREATE DEBUG] Transaction receipt handler - pendingGameData:",Ht),console.log("[CREATE DEBUG] Transaction receipt handler - inviteCode:",X),console.log("[CREATE DEBUG] Transaction receipt handler - condition:",C&&!B&&Ht&&!X),console.log("[CREATE DEBUG] Transaction receipt handler - individual conditions:"),console.log("[CREATE DEBUG] - createGameHash exists:",!!C),console.log("[CREATE DEBUG] - not waiting for receipt:",!B),console.log("[CREATE DEBUG] - pendingGameData exists:",!!Ht),console.log("[CREATE DEBUG] - no inviteCode set:",!X),C&&!B&&Ht&&!X?(console.log("[CONTRACT] Create game transaction confirmed:",C),ss.createGame(Ht).then(()=>{console.log("[FIREBASE] Game created successfully after transaction confirmation"),ce(Ht.invite_code),Nn("blue"),Me(bo,"create game success"),zt(Cn.WAITING),tt("Waiting for opponent to join..."),Tn(Ht.invite_code),setTimeout(()=>{Bf()},1e3),Mf(null),bd(!1),wo(!1)}).catch(U=>{console.error("[FIREBASE] Error creating game after transaction:",U),tt("Transaction confirmed but failed to create game in database"),Mf(null),bd(!1),wo(!1)})):C&&!B&&(console.log("[CREATE DEBUG] Transaction confirmed but conditions not met for Firebase update:"),console.log("[CREATE DEBUG] - pendingGameData missing:",!Ht),console.log("[CREATE DEBUG] - inviteCode already set:",!!X))},[C,B,Ht,bo]),k.useEffect(()=>{console.log("[PENDING DEBUG] pendingGameData changed:",Ht)},[Ht]),k.useEffect(()=>{if(console.log("[PENDING DEBUG] pendingJoinGameData changed:",zn),zn){const U=setTimeout(()=>{console.log("[AUTO-CLEAR] Pending join data has been stuck for too long, clearing automatically"),ts(null)},3e4);return()=>clearTimeout(U)}},[zn]),k.useEffect(()=>{console.log("[CREATE REJECTION DEBUG] - isCreatingGameContract:",A),console.log("[CREATE REJECTION DEBUG] - pendingGameData:",Ht),console.log("[CREATE REJECTION DEBUG] - createGameHash:",C),console.log("[CREATE REJECTION DEBUG] - condition:",A===!1&&Ht&&!C),A===!1&&Ht&&!C&&(console.log("[CONTRACT] Create game transaction rejected or failed"),tt("Transaction was rejected. Please try again."),Mf(null),bd(!1),wo(!1))},[A,Ht,C]),k.useEffect(()=>{x===!1&&zn&&!N&&(console.log("[CONTRACT] Join game transaction rejected or failed"),console.log("[CONTRACT] Rejection details - isJoiningGameContract:",x),console.log("[CONTRACT] Rejection details - pendingJoinGameData:",zn),console.log("[CONTRACT] Rejection details - joinGameHash:",N),console.log("[CONTRACT] Rejection details - address:",r),console.log("[CONTRACT] Rejection details - playerGameInviteCode:",te),tt("Transaction was rejected. Please try again."),ge("","join transaction rejection"),Nn(null),Me(0,"join transaction rejection"),lr(null),zt(Cn.LOBBY),tt(""),ts(null))},[x,zn,N,r,te]),k.useEffect(()=>{r&&te!==void 0&&(m||(te!=="0x000000000000"&&Z||te==="0x000000000000")&&Sm())},[r,te,Z,m]),k.useEffect(()=>{b(!1)},[r]),k.useEffect(()=>{Mn===Cn.ACTIVE&&ke?(console.log("[TIMEOUT] Starting timeout timer for active game"),Am()):Uf()},[Mn,ke,Am,Uf]),k.useEffect(()=>{Mn===Cn.ACTIVE&&ct.length>0&&(console.log("[TIMEOUT] Move made, resetting timeout timer"),Am())},[ct,Mn,Am]),k.useEffect(()=>{if(Mn===Cn.ACTIVE&&Ga){const U=setInterval(()=>{const H=Date.now()-I1,F=Math.max(0,Va-H);JT(Math.ceil(F/1e3))},1e3);return()=>clearInterval(U)}},[Mn,Ga,I1]),k.useEffect(()=>()=>{En(),Uf(),Eo.current&&Eo.current(),Ql.current&&clearTimeout(Ql.current)},[Uf]);const Sm=async()=>{if(r)try{if(console.log("[GAME_STATE] Checking for active games for player:",r),te&&te!=="0x000000000000"&&!Z){console.log("[GAME_STATE] Waiting for contract data...");return}if(te&&te!=="0x000000000000"&&(console.log("[GAME_STATE] Found game in contract:",te),Z)){let F,ee,le,Te,Se,De;if(Array.isArray(Z))[F,ee,le,Te,Se,De]=Z;else{console.error("[GAME_STATE] Unexpected contract data format:",Z);return}if(console.log("[GAME_STATE] Parsed contract game data:",{player1:F,player2:ee,isActive:le,winner:Te,inviteCode:Se,wagerAmount:De}),!Se){console.error("[GAME_STATE] Invalid invite code:",Se);return}const ft=F===r?"blue":"red",Gt=F===r?ee:F;console.log("[GAME_STATE] Player is",ft,"opponent is",Gt),console.log("[DEBUG] Contract address comparison:"),console.log("[DEBUG] - player1 (blue):",F),console.log("[DEBUG] - player2 (red):",ee),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - player1 === address:",F===r),console.log("[DEBUG] - player2 === address:",ee===r);const St=await ss.getGame(Se);if(St){if(console.log("[GAME_STATE] Found game in Firebase:",St),ce(Se),Nn(ft),Me(parseFloat(St.bet_amount)/1e18,"checkPlayerGameState Firebase"),lr(Gt),St.game_state==="waiting")zt(Cn.WAITING),tt("Waiting for opponent to join..."),console.log("[GAME_STATE] Setting game mode to WAITING");else if(St.game_state==="active"||St.game_state==="test_update"){if(zt(Cn.ACTIVE),tt("Game in progress"),console.log("[GAME_STATE] Setting game mode to ACTIVE (from state:",St.game_state,")"),St.board){const Fr=St.board;ne(jc(Fr)),be(St.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state:",St.game_state,"- treating as active"),zt(Cn.ACTIVE),tt("Game in progress"),St.board){const Fr=St.board;ne(jc(Fr)),be(St.current_player||"blue")}Tn(Se),b(!0),console.log("[GAME_STATE] Game state loaded from Firebase"),console.log("[GAME_STATE] Current game mode:",Mn),console.log("[GAME_STATE] Game state from Firebase:",St.game_state);return}else{console.log("[GAME_STATE] Game exists in contract but not in Firebase, syncing...");const Fr={invite_code:Se,game_title:`Game ${Se.slice(-6)}`,bet_amount:De?De.toString():"0",blue_player:F,red_player:ee,game_state:le?"active":"waiting",board:{positions:Xt(uu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0};if(await ss.createGame(Fr),console.log("[GAME_STATE] Successfully synced game to Firebase:",Fr),ce(Se),Nn(ft),Me(parseFloat(Fr.bet_amount)/1e18,"checkPlayerGameState sync"),lr(Gt),le?(zt(Cn.ACTIVE),tt("Game in progress")):(zt(Cn.WAITING),tt("Waiting for opponent to join...")),Fr.board){const Wne=Fr.board;ne(jc(Wne)),be(Fr.current_player||"blue")}Tn(Se),b(!0),console.log("[GAME_STATE] Game state loaded after sync");return}}console.log("[GAME_STATE] No contract game found, checking Firebase...");const H=(await ss.getActiveGames()).filter(F=>F.chain==="sanko"&&(F.blue_player===r||F.red_player===r)&&["waiting","active"].includes(F.game_state));if(H&&H.length>0){const F=H[0];if(console.log("[GAME_STATE] Found active game in Firebase:",F),console.log("[DEBUG] Firebase fallback address comparison:"),console.log("[DEBUG] - blue_player:",F.blue_player),console.log("[DEBUG] - red_player:",F.red_player),console.log("[DEBUG] - current address:",r),console.log("[DEBUG] - blue_player === address:",F.blue_player===r),console.log("[DEBUG] - red_player === address:",F.red_player===r),ce(F.invite_code),Nn(F.blue_player===r?"blue":"red"),Me(parseFloat(F.bet_amount)/1e18,"checkPlayerGameState fallback"),lr(F.blue_player===r?F.red_player:F.blue_player),F.game_state==="waiting")zt(Cn.WAITING),tt("Waiting for opponent to join...");else if(F.game_state==="active"||F.game_state==="test_update"){if(zt(Cn.ACTIVE),tt("Game in progress"),F.board){const ee=F.board;ne(jc(ee)),be(F.current_player||"blue")}}else if(console.log("[GAME_STATE] Unknown game state in Firebase check:",F.game_state,"- treating as active"),zt(Cn.ACTIVE),tt("Game in progress"),F.board){const ee=F.board;ne(jc(ee)),be(F.current_player||"blue")}Tn(F.invite_code),b(!0),console.log("[GAME_STATE] Game state loaded successfully from Firebase");return}console.log("[GAME_STATE] No active games found"),zt(Cn.LOBBY),bd(!1),b(!0)}catch(U){console.error("[GAME_STATE] Error in checkPlayerGameState:",U)}},Co=async()=>{try{await _ee();const U=await Cee(20);nR(U)}catch(U){console.error("Error loading leaderboard:",U)}},Ed=async U=>{if(console.log("[SCORE] updateScore called with:",U,"for address:",r),!r){console.error("[SCORE] No address available for score update");return}try{console.log("[SCORE] Updating score for address:",qg(r)),await xI(r,U)?console.log("[SCORE] Successfully updated score for:",qg(r)):console.error("[SCORE] Failed to update score"),console.log("[SCORE] updateScore completed successfully")}catch(H){console.error("[SCORE] Error updating score:",H)}},k1=async(U,H,F)=>{try{if(console.log("[SCORE] Updating both players scores:",{winner:U,bluePlayer:H,redPlayer:F}),!H||!F){console.error("[SCORE] Missing player addresses from contract");return}await k7e(U,H,F)?(console.log("[SCORE] Successfully updated both players scores"),await Co()):console.error("[SCORE] Failed to update both players scores")}catch(ee){console.error("[SCORE] Error updating both players scores:",ee)}},Bf=async()=>{try{const U=await ss.getOpenGames();console.log("[FIREBASE] Loaded open games:",U),await q(U),mB(U)}catch(U){console.error("Error loading open games:",U)}},q=async U=>{if(console.log("[CLEANUP] Checking for ghost games..."),!R){console.log("[CLEANUP] Public client not available, skipping cleanup");return}for(const H of U)try{const F=H.invite_code;if(!F||typeof F!="string"||!F.startsWith("0x")||F.length!==14){console.warn("[CLEANUP] Invalid invite code for game:",H.invite_code,F);continue}const ee=await R.readContract({address:o,abi:fu,functionName:"games",args:[F]});(!ee||Array.isArray(ee)&&ee[0]==="0x0000000000000000000000000000000000000000")&&(console.log("[CLEANUP] Found ghost game:",H.invite_code,"- removing from Firebase"),await ss.deleteGame(H.invite_code),console.log("[CLEANUP] Ghost game removed:",H.invite_code))}catch(F){console.error("[CLEANUP] Error checking game:",H.invite_code,F)}},K=async()=>{if(!(!r||bo<=0)){if(bo>Cm){console.log("[CREATE] Insufficient balance:",{gameWager:bo,balance:Cm,selectedToken:vo}),tt(`Insufficient ${vo} balance. You have ${Cm.toFixed(2)} ${vo} but need ${bo} ${vo}.`);return}console.log("[CREATE] Starting game creation - address:",r,"wager:",bo),wo(!0);try{const U=yqe();console.log("[CREATE] Generated invite code:",U);const H=Uu[vo].address,F=BigInt(Math.floor(bo*Math.pow(10,Uu[vo].decimals))),ee={invite_code:U,game_title:`Chess Game ${U.slice(-6)}`,bet_amount:F.toString(),bet_token:vo,blue_player:r,game_state:"waiting",board:{positions:Xt(uu),rows:8,cols:8},current_player:"blue",chain:"sanko",contract_address:o,is_public:!0,created_at:new Date().toISOString()};console.log("[CREATE] Game data prepared:",ee),console.log("[CREATE] Calling contract with args:",[U,H,F]),v({address:o,abi:fu,functionName:"createGame",args:[U,H,F]}),console.log("[CREATE] Contract call initiated, setting pending data"),console.log("[CREATE] Pending game data being set:",ee),Mf(ee),tt("Creating game... Please confirm transaction in your wallet.")}catch(U){console.error("[CREATE] Error creating game:",U),tt("Failed to create game. Please try again.")}finally{wo(!1)}}},ae=async U=>{if(r)try{const H=await ss.getGame(U);if(!H||H.game_state!=="waiting"){tt("Game not found or already full");return}const ee=parseFloat(H.bet_amount)/1e18;if(ce(U),Nn("red"),Me(ee,"joinGame"),lr(H.blue_player),console.log("[JOIN] Setting up join game with data:",{inviteCode:U,playerColor:"red",wagerAmountTDMT:ee,opponent:H.blue_player,address:r}),r===H.blue_player){console.error("[JOIN] Player cannot join their own game"),tt("You cannot join your own game");return}if(te&&te!=="0x000000000000"){console.error("[JOIN] Player already has an active game:",te),tt("You already have an active game");return}if(typeof window<"u"&&window.ethereum)try{const le=await window.ethereum.request({method:"eth_chainId"}),Te=await window.ethereum.request({method:"eth_accounts"});console.log("[JOIN] Wallet state check - chainId:",le),console.log("[JOIN] Wallet state check - connectedAccounts:",Te),console.log("[JOIN] Wallet state check - currentAddress:",r),console.log("[JOIN] Wallet state check - isConnected:",s)}catch(le){console.error("[JOIN] Error checking wallet state:",le)}console.log("[JOIN] Contract call parameters - contractAddress:",o),console.log("[JOIN] Contract call parameters - functionName: joinGame"),console.log("[JOIN] Contract call parameters - args:",[U]),tt("Joining game... Please confirm transaction in your wallet."),setTimeout(()=>{console.log("[JOIN] About to call writeJoinGame..."),console.log("[JOIN] Final contract call parameters:"),console.log("[JOIN] - address:",o),console.log("[JOIN] - functionName: joinGame"),console.log("[JOIN] - args:",[U]),T({address:o,abi:fu,functionName:"joinGame",args:[U]}),console.log("[JOIN] writeJoinGame called, setting pending data..."),ts({inviteCode:U,gameData:H,address:r}),console.log("[JOIN] Pending data set"),console.log("[JOIN] Transaction initiated - waiting for user confirmation in MetaMask...")},500)}catch(H){console.error("[JOIN] Error joining game:",H),tt("Failed to join game. Please try again."),ge("","join game error"),Nn(null),Me(0,"join game error"),lr(null)}},[oe,re]=k.useState(null),[Ie,Ne]=k.useState(""),[nt,un]=k.useState(!0),En=()=>{console.log("[FIREBASE] No fallback to stop")},Tn=U=>{console.log("[FIREBASE] Setting up Firebase real-time subscription for game:",U),Eo.current&&(console.log("[FIREBASE] Removing existing subscription"),Eo.current());const H=ss.subscribeToGame(U,F=>{const ee=O1.current;if(console.log("=== [DEBUG] FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[DEBUG] Current wallet address (from addressRef):",ee),console.log("[DEBUG] Current wallet address (from useAccount):",r),console.log("[DEBUG] Game data received:",F),console.log("[DEBUG] Blue player from Firebase:",F==null?void 0:F.blue_player),console.log("[DEBUG] Red player from Firebase:",F==null?void 0:F.red_player),console.log("[DEBUG] Blue player type:",typeof(F==null?void 0:F.blue_player)),console.log("[DEBUG] Red player type:",typeof(F==null?void 0:F.red_player)),console.log("[DEBUG] Current address type:",typeof ee),console.log("[DEBUG] Current playerColor state:",ke),console.log("[DEBUG] Pending join game data:",!!zn),!F){console.log("[DEBUG] No game data received");return}if(zn&&ee===zn.address)console.log("[DEBUG] Pending join transaction detected - preserving playerColor:",ke),F.game_state==="active"&&(console.log("[AUTO-CLEAR] Game is active, clearing pending join data"),ts(null)),F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&lr(F.blue_player===ee?F.red_player:F.blue_player);else if(ee&&F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"){console.log("[DEBUG] Both players present, comparing addresses...");const Te=ee.toLowerCase()===F.blue_player.toLowerCase(),Se=ee.toLowerCase()===F.red_player.toLowerCase();console.log("[DEBUG] Blue player match:",Te),console.log("[DEBUG] Red player match:",Se),console.log("[DEBUG] Blue comparison:",`${ee.toLowerCase()} === ${F.blue_player.toLowerCase()}`),console.log("[DEBUG] Red comparison:",`${ee.toLowerCase()} === ${F.red_player.toLowerCase()}`),Te&&ke!=="blue"?(console.log("[DEBUG] Setting player color to BLUE"),Nn("blue"),lr(F.red_player)):Se&&ke!=="red"?(console.log("[DEBUG] Setting player color to RED"),Nn("red"),lr(F.blue_player)):!Te&&!Se&&ke!==null?(console.log("[DEBUG] No address match found - setting playerColor to null"),Nn(null),lr(null)):console.log("[DEBUG] Player color already correctly set to:",ke)}else{if(console.log("[DEBUG] Missing player data or red player is zero address - using contract data as fallback"),console.log("[DEBUG] - currentAddress:",!!ee),console.log("[DEBUG] - blue_player:",!!F.blue_player),console.log("[DEBUG] - red_player:",F==null?void 0:F.red_player),console.log("[DEBUG] - Current playerColor state:",ke),console.log("[DEBUG] - Contract game data available:",!!Z),ke&&(ke==="blue"||ke==="red")){console.log("[DEBUG] Preserving existing valid playerColor:",ke);return}else if(Z&&Array.isArray(Z)&&ee){const[Te,Se]=Z;if(Te&&Se){const De=Te.toLowerCase()===ee.toLowerCase()?"blue":"red",ft=Te.toLowerCase()===ee.toLowerCase()?Se:Te;console.log("[DEBUG] Setting playerColor from contract fallback:",De),Nn(De),lr(ft)}}else console.log("[DEBUG] No valid data available, but preserving existing playerColor if valid"),(!ke||ke!=="blue"&&ke!=="red")&&(console.log("[DEBUG] Setting playerColor to null"),Nn(null));F.blue_player&&F.red_player&&F.red_player!=="0x0000000000000000000000000000000000000000"&&lr(F.blue_player===ee?F.red_player:F.blue_player)}console.log("=== [DEBUG] END FIREBASE SUBSCRIPTION CALLBACK ==="),console.log("[WAGER DEBUG] bet_amount from Firebase:",F.bet_amount),console.log("[WAGER DEBUG] bet_amount type:",typeof F.bet_amount),console.log("[WAGER DEBUG] Full gameData:",F),console.log("[WAGER DEBUG] parsed value:",F.bet_amount?parseFloat(F.bet_amount):"null"),console.log("[WAGER DEBUG] converted to TDMT:",F.bet_amount?parseFloat(F.bet_amount)/1e18:"null");let le=0;F.bet_amount&&!isNaN(parseFloat(F.bet_amount))?(le=parseFloat(F.bet_amount)/1e18,console.log("[WAGER DEBUG] Setting wager from Firebase:",le)):Z&&Array.isArray(Z)&&Z[5]?(le=parseFloat(Z[5].toString())/1e18,console.log("[WAGER DEBUG] Setting wager from contract data:",le)):console.log("[WAGER DEBUG] Setting wager to 0 (no valid bet_amount found)"),Me(le,"Firebase subscription"),F.board&&ne(jc(F.board)),F.current_player&&be(F.current_player),F.game_state==="active"?(zt(Cn.ACTIVE),tt("Game in progress")):F.game_state==="finished"?(zt(Cn.FINISHED),tt("Game finished")):F.game_state==="waiting"&&(zt(Cn.WAITING),tt("Waiting for opponent to join..."))});Eo.current=H,console.log("[FIREBASE] Firebase subscription setup complete for game:",U)};k.useEffect(()=>(X&&Tn(X),()=>{Eo.current&&Eo.current()}),[X,r]),k.useEffect(()=>{if(Z&&!ke&&r){console.log("[FALLBACK] Setting playerColor from contract data");let U,H,F,ee,le,Te;if(Array.isArray(Z))[U,H,F,ee,le,Te]=Z;else{console.error("[FALLBACK] Unexpected contract data format:",Z);return}const Se=U===r?"blue":"red",De=U===r?H:U;console.log("[FALLBACK] Contract-based player assignment:"),console.log("[FALLBACK] - player1 (blue):",U),console.log("[FALLBACK] - player2 (red):",H),console.log("[FALLBACK] - current address:",r),console.log("[FALLBACK] - assigned color:",Se),console.log("[FALLBACK] - opponent:",De),console.log("[FALLBACK] - inviteCode from contract:",le),Nn(Se),lr(De),!X&&le&&(console.log("[FALLBACK] Setting missing inviteCode:",le),ce(le)),X&&ss.getGame(X).then(ft=>{ft&&(!ft.blue_player||!ft.red_player)&&(console.log("[AUTO-FIX] Detected missing player data, attempting to fix..."),One()),ft&&ft.game_state==="active"&&zn&&(console.log("[AUTO-CLEAR] Game is confirmed active, clearing pending join data"),ts(null))}).catch(ft=>{console.error("[AUTO-FIX] Error checking game data for auto-fix:",ft)})}},[Z,ke,r,X]),k.useEffect(()=>{if(M&&zn){console.log("[RECEIPT] Join transaction confirmed!"),console.log("[RECEIPT] Transaction hash:",M.transactionHash),console.log("[RECEIPT] Pending data:",zn);const{inviteCode:U,gameData:H,address:F}=zn;ss.updateGame(U,{red_player:F,blue_player:H.blue_player,bet_amount:H.bet_amount,game_state:"active",last_move:null,board:{positions:Xt(uu),rows:8,cols:8},current_player:"blue"}).then(()=>{console.log("[RECEIPT] Firebase updated successfully after join confirmation"),tt("Game started! You are the red player."),zt(Cn.ACTIVE),ts(null)}).catch(ee=>{console.error("[RECEIPT] Error updating Firebase after join confirmation:",ee),tt("Game joined but failed to update game state. Please refresh.")})}},[M,zn]),k.useEffect(()=>{S&&(console.error("[ERROR] Join transaction failed:",S),tt(`Failed to join game: ${S.message||"Transaction rejected"}`),ge("","join game error effect"),Nn(null),Me(0,"join game error effect"),lr(null),ts(null))},[S]);const Xt=U=>{const H={};return U.forEach((F,ee)=>{F.forEach((le,Te)=>{H[`${ee}_${Te}`]=le})}),H},jc=U=>{if(!U||!U.positions)return console.warn("[BOARD] No board data available, using initial board"),uu;if(console.log("[BOARD] Attempting to reconstruct board from:",U),console.log("[BOARD] Positions type:",typeof U.positions),console.log("[BOARD] Positions is array:",Array.isArray(U.positions)),console.log("[BOARD] Positions value:",U.positions),typeof U.positions=="object"&&!Array.isArray(U.positions)){const H=U.positions,F=U.rows||8,ee=U.cols||8,le=Array(F).fill(null).map(()=>Array(ee).fill(null));for(let Te=0;Te<F;Te++)for(let Se=0;Se<ee;Se++){const De=`${Te}_${Se}`;le[Te][Se]=H[De]||null}return console.log("[BOARD] Reconstructed from flat structure:",le),le}return Array.isArray(U.positions)?(console.log("[BOARD] Found array structure, length:",U.positions.length),U.positions.length===8?U.positions.every((F,ee)=>{const le=Array.isArray(F)&&F.length===8;return le||console.warn(`[BOARD] Row ${ee} is invalid:`,F,"Type:",typeof F,"Length:",F==null?void 0:F.length),le})?(console.log("[BOARD] Using legacy array structure"),U.positions):(console.warn("[BOARD] Legacy array structure is malformed, using initial board"),uu):(console.warn("[BOARD] Array has wrong length:",U.positions.length,"expected 8"),uu)):(console.warn("[BOARD] Unknown board structure, using initial board:",U),uu)},rR=U=>`${U.slice(0,6)}...${U.slice(-4)}`,Oi=U=>U&&U===U.toUpperCase()?"red":"blue",vB=(U,H)=>U>=0&&U<8&&H>=0&&H<8,Pb=(U,H)=>{const F=H==="red"?"K":"k";let ee=-1,le=-1;for(let Se=0;Se<8;Se++){for(let De=0;De<8;De++)if(U[Se][De]===F){ee=Se,le=De;break}if(ee!==-1)break}return ee===-1?!1:wne(ee,le,H==="red"?"blue":"red",U)},wne=(U,H,F,ee)=>{if(!ee||!Array.isArray(ee)||ee.length!==8)return console.warn("[SAFETY] Invalid board structure in isSquareUnderAttack:",ee),!1;for(let le=0;le<8;le++){if(!ee[le]||!Array.isArray(ee[le])||ee[le].length!==8)return console.warn("[SAFETY] Invalid board row structure:",ee[le]),!1;for(let Te=0;Te<8;Te++){const Se=ee[le][Te];if(Se&&Oi(Se)===F&&xm(Se,le,Te,U,H,!1,F,ee,!0))return!0}}return!1},bne=(U,H,F,ee,le,Te=At)=>{const Se=Te[U][H];if(!Se)return!1;const De=Te.map(ft=>[...ft]);return De[F][ee]=Se,De[U][H]=null,Pb(De,le)},vne=(U,H,F,ee,le,Te)=>{const Se=U==="blue"?-1:1,De=U==="blue"?6:1;if(!vB(ee,le)||U==="blue"&&ee>=H||U==="red"&&ee<=H)return!1;if(F===le&&ee===H+Se)return Te[ee][le]===null;if(F===le&&H===De&&ee===H+2*Se)return Te[H+Se][F]===null&&Te[ee][le]===null;if(Math.abs(F-le)===1&&ee===H+Se){const ft=Te[ee][le];if(ft!==null&&Oi(ft)!==U)return!0;if(ft===null&&ii.lastPawnDoubleMove){const{row:Gt,col:St}=ii.lastPawnDoubleMove;if(Gt===H&&St===le){const Fr=Te[H][le];if(Fr&&Fr.toLowerCase()==="p"&&Oi(Fr)!==U)return!0}}}return!1},EB=(U,H,F,ee,le)=>U===F||H===ee,Ene=(U,H,F,ee)=>{const le=Math.abs(U-F),Te=Math.abs(H-ee);return le===2&&Te===1||le===1&&Te===2},CB=(U,H,F,ee,le)=>Math.abs(U-F)===Math.abs(H-ee),Cne=(U,H,F,ee,le)=>EB(U,H,F,ee)||CB(U,H,F,ee),_ne=(U,H,F,ee,le)=>{const Te=Math.abs(H-ee),Se=Math.abs(F-le);if(Te<=1&&Se<=1)return!0;if(Te===0&&Se===2){if(U==="blue"&&!ii.blueKingMoved){if(le===6&&!ii.blueRooksMove.right||le===2&&!ii.blueRooksMove.left)return!0}else if(U==="red"&&!ii.redKingMoved&&(le===6&&!ii.redRooksMove.right||le===2&&!ii.redRooksMove.left))return!0}return!1},sR=(U,H,F,ee,le)=>{const Te=U===F?0:(F-U)/Math.abs(F-U),Se=H===ee?0:(ee-H)/Math.abs(ee-H);let De=U+Te,ft=H+Se;for(;De!==F||ft!==ee;){if(le[De][ft]!==null)return!1;De+=Te,ft+=Se}return!0},xm=(U,H,F,ee,le,Te=!0,Se=Oi(U),De=At,ft=!1)=>{if(!U||!vB(ee,le))return!1;const Gt=De[ee][le];if(Gt&&Oi(Gt)===Se)return!1;let St=!1;switch(U.toUpperCase()){case"P":St=vne(Se,H,F,ee,le,De);break;case"R":St=EB(H,F,ee,le)&&sR(H,F,ee,le,De);break;case"N":St=Ene(H,F,ee,le);break;case"B":St=CB(H,F,ee,le)&&sR(H,F,ee,le,De);break;case"Q":St=Cne(H,F,ee,le)&&sR(H,F,ee,le,De);break;case"K":St=_ne(Se,H,F,ee,le);break}return!(!St||Te&&bne(H,F,ee,le,Se,De))},iR=(U,H=At,F=ie)=>{const ee=[],le=H[U.row][U.col];if(!le||Oi(le)!==F)return ee;const Te=le.toLowerCase();if(Te==="p"){const Se=F==="blue"?-1:1,De=F==="blue"?6:1,ft=U.row+Se;if(ft>=0&&ft<8&&xm(le,U.row,U.col,ft,U.col,!0,F,H,!0)&&ee.push({row:ft,col:U.col}),U.row===De){const Gt=U.row+2*Se;Gt>=0&&Gt<8&&xm(le,U.row,U.col,Gt,U.col,!0,F,H,!0)&&ee.push({row:Gt,col:U.col})}for(const Gt of[-1,1]){const St=U.col+Gt,Fr=U.row+Se;St>=0&&St<8&&Fr>=0&&Fr<8&&xm(le,U.row,U.col,Fr,St,!0,F,H,!0)&&ee.push({row:Fr,col:St})}}else if(Te==="n"){const Se=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[De,ft]of Se){const Gt=U.row+De,St=U.col+ft;Gt>=0&&Gt<8&&St>=0&&St<8&&xm(le,U.row,U.col,Gt,St,!0,F,H,!0)&&ee.push({row:Gt,col:St})}}else for(let Se=0;Se<8;Se++)for(let De=0;De<8;De++)xm(le,U.row,U.col,Se,De,!0,F,H,!0)&&ee.push({row:Se,col:De});return ee},Ane=(U,H=At)=>{if(!Pb(H,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=H[F][ee];if(le&&Oi(le)===U&&iR({row:F,col:ee},H,U).length>0)return!1}return!0},Sne=(U,H=At)=>{if(Pb(H,U))return!1;for(let F=0;F<8;F++)for(let ee=0;ee<8;ee++){const le=H[F][ee];if(le&&Oi(le)===U&&iR({row:F,col:ee},H,U).length>0)return!1}return!0},_B=(U,H)=>{if(console.log("[CLICK] Square clicked:",{row:U,col:H}),console.log("[CLICK] Game mode:",Mn,"Player color:",ke),console.log("[CLICK] Current player:",ie,"Player color:",ke),Mn!==Cn.ACTIVE||!ke){console.log("[CLICK] Game not active or no player color");return}const F=At[U][H],ee=F?Oi(F):null;if(console.log("[CLICK] Piece at square:",F,"Piece color:",ee),ie!==ke){console.log("[CLICK] Not player's turn. Current:",ie,"Player:",ke);return}if(F&&ee===ke){ve({row:U,col:H});const le=iR({row:U,col:H});Xe(le);return}if(fe&&ht.some(le=>le.row===U&&le.col===H)){xne(fe,{row:U,col:H}),ve(null),Xe([]);return}ve(null),Xe([])},xne=async(U,H)=>{if(console.log("[PROMOTION DEBUG] makeMove called with:",{from:U,to:H,playerColor:ke,currentPlayer:ie}),!ke||ie!==ke){console.log("[PROMOTION DEBUG] Early return - playerColor:",ke,"currentPlayer:",ie);return}const F=At[U.row][U.col];if(!F){console.log("[PROMOTION DEBUG] No piece at position:",U);return}if(console.log("[PROMOTION DEBUG] Piece:",F,"isPawn:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] Current player:",ie,"to.row:",H.row),console.log("[PROMOTION DEBUG] Player color:",ke),console.log("[PROMOTION DEBUG] Promotion condition check:"),console.log("[PROMOTION DEBUG] - piece.toUpperCase() === P:",F.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - currentPlayer === red && to.row === 7:",ie==="red"&&H.row===7),console.log("[PROMOTION DEBUG] - currentPlayer === blue && to.row === 0:",ie==="blue"&&H.row===0),console.log("[PROMOTION DEBUG] - Full condition:",F.toUpperCase()==="P"&&(ie==="red"&&H.row===7||ie==="blue"&&H.row===0)),F.toUpperCase()==="P"&&(ie==="red"&&H.row===7||ie==="blue"&&H.row===0)){console.log("[PROMOTION] Showing promotion dialog for piece:",F,"at position:",H),xb({from:U,to:H}),Sb(!0);return}await AB(U,H)},AB=async(U,H,F="q")=>{if(!ke||ie!==ke||!At[U.row][U.col])return;const Te=At[H.row][H.col]!==null;if($f(Te?"capture":"move"),Te){R1({row:H.row,col:H.col,show:!0}),setTimeout(()=>{SB(U,H,F),R1(null)},500);return}SB(U,H,F)},SB=async(U,H,F="q")=>{if(!ke||ie!==ke)return;const ee=At[U.row][U.col];if(!ee)return;const le=At.map(Gt=>[...Gt]);let Te=ee;console.log("[PROMOTION DEBUG] executeMoveAfterAnimation - checking promotion:"),console.log("[PROMOTION DEBUG] - piece:",ee,"isPawn:",ee.toUpperCase()==="P"),console.log("[PROMOTION DEBUG] - playerColor:",ke,"to.row:",H.row),console.log("[PROMOTION DEBUG] - promotion condition:",ee.toUpperCase()==="P"&&(ke==="red"&&H.row===7||ke==="blue"&&H.row===0)),console.log("[PROMOTION DEBUG] - promotionPiece:",F),ee.toUpperCase()==="P"&&(ke==="red"&&H.row===7||ke==="blue"&&H.row===0)&&(Te=ke==="red"?F.toUpperCase():F.toLowerCase(),console.log("[PROMOTION DEBUG] - Promoting pawn to:",Te)),Nne(le,U,H,ee),le[H.row][H.col]=Te,le[U.row][U.col]=null,Tne(U,H,ee);const Se=ie==="blue"?"red":"blue";Pb(le,Se)&&$f("check");let De="active",ft=null;if(Ane(Se,le))De="finished",ft=ie,tt(`${ie==="red"?"Red":"Blue"} wins by checkmate!`),$f(ie===ke?"victory":"loser"),Ine(),console.log("[SCORE] Updating scores - Winner:",ie,"Loser:",Se),console.log("[SCORE] Contract game data:",Z),console.log("[SCORE] Player game invite code:",te),Z&&Z.length>=2?(console.log("[SCORE] Using contract data for both players update"),await k1(ie,Z[0],Z[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Ed(ie===ke?"win":"loss"),await Co()),ft===ke&&(console.log("[CONTRACT] Triggering automatic payout for winner:",ft),setTimeout(()=>{Nt()},2e3));else if(Sne(Se,le)){const Gt=ie;De="finished",tt(`${Gt==="red"?"Red":"Blue"} wins by stalemate!`),$f(Gt===ke?"victory":"loser"),console.log("[SCORE] Updating scores - Stalemate winner:",Gt,"Loser:",Se),console.log("[SCORE] Contract game data:",Z),console.log("[SCORE] Player game invite code:",te),Z&&Z.length>=2?(console.log("[SCORE] Using contract data for both players update"),await k1(Gt,Z[0],Z[1])):(console.log("[SCORE] Contract data not available, falling back to single player update"),await Ed(Gt===ke?"win":"loss"),await Co()),Gt===ke&&(console.log("[CONTRACT] Triggering automatic payout for stalemate winner:",Gt),setTimeout(()=>{Nt()},2e3))}try{if(!X){console.error("[BUG] inviteCode is missing when trying to update game!"),tt("Game code missing. Please reload or rejoin the game.");return}console.log("[DEBUG] About to update game. inviteCode:",X,"gameData:",{board:{positions:le},current_player:Se,game_state:De,winner:ft,last_move:{from:U,to:H}});const St={...await ss.getGame(X),board:{positions:Xt(le),rows:8,cols:8},current_player:Se,game_state:De,winner:ft,last_move:{from:U,to:H}};console.log("[FIREBASE] Storing data in Firebase:",St),await ss.updateGame(X,St),console.log("[FIREBASE] Game updated successfully"),console.log("[FIREBASE] Real-time event should be delivered immediately")}catch(Gt){console.error("[DATABASE] Error updating game:",Gt)}ne(le),be(Se),P1({from:U,to:H}),Sb(!1),xb(null)},Ine=()=>{Nb(!0);for(let U=0;U<50;U++)setTimeout(()=>{const H=document.createElement("div");H.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(H),setTimeout(()=>H.remove(),300)},U*100);Ql.current&&clearTimeout(Ql.current),Ql.current=setTimeout(()=>{Nb(!1)},5e3)},Nne=(U,H,F,ee)=>{if(ee.toLowerCase()==="k"&&Math.abs(H.col-F.col)===2){if(F.col===6)U[H.row][7]=null,U[H.row][5]=Oi(ee)==="blue"?"r":"R";else if(F.col===2){const le=U[H.row][3];U[H.row][0]=null,U[H.row][3]=Oi(ee)==="blue"?"r":"R",le&&le.toLowerCase()==="q"&&(U[H.row][4]=le)}}ee.toLowerCase()==="p"&&Math.abs(H.col-F.col)===1&&U[F.row][F.col]===null&&ii.lastPawnDoubleMove&&ii.lastPawnDoubleMove.row===H.row&&ii.lastPawnDoubleMove.col===F.col&&(U[H.row][F.col]=null)},Tne=(U,H,F)=>{const ee={...ii};F.toLowerCase()==="k"?Oi(F)==="blue"?ee.blueKingMoved=!0:ee.redKingMoved=!0:F.toLowerCase()==="r"&&(Oi(F)==="blue"?(U.col===0&&(ee.blueRooksMove.left=!0),U.col===7&&(ee.blueRooksMove.right=!0)):(U.col===0&&(ee.redRooksMove.left=!0),U.col===7&&(ee.redRooksMove.right=!0))),F.toLowerCase()==="p"&&Math.abs(U.row-H.row)===2?ee.lastPawnDoubleMove={row:H.row,col:H.col}:ee.lastPawnDoubleMove=null,tR(ee)},$f=U=>{if(!Tb)return;let H="";switch(U){case"move":H="/images/move.mp3";break;case"capture":H="/images/capture.mp3";break;case"check":H="/images/play.mp3";break;case"checkmate":H="/images/victory.mp3";break;case"victory":H="/images/victory.mp3";break;case"loser":H="/images/loser.mp3";break;case"upgrade":H="/images/upgrade.mp3";break;default:H="/images/move.mp3"}try{const F=new Audio(H);F.volume=.3,F.play().catch(ee=>console.warn("Audio play failed:",ee))}catch(F){console.warn("Sound play failed:",F)}},Rne=async()=>{if(X)try{console.log("[RESET] Resetting corrupted game data for:",X);const U={board:{positions:Xt(uu),rows:8,cols:8},current_player:"blue",game_state:"active",winner:null,last_move:null};await ss.updateGame(X,U),console.log("[RESET] Successfully reset game data"),tt("Game reset successfully. You can now make moves.")}catch(U){console.error("[RESET] Error resetting game data:",U),tt("Failed to reset game. Please try again.")}},Pne=async()=>{try{console.warn("[STUCK GAMES] checkStuckGames is not implemented.")}catch(U){console.error("Error checking stuck games:",U)}},One=async()=>{if(console.log("[FIX] Attempting to fix missing player data..."),!X||!r){console.log("[FIX] Missing inviteCode or address");return}try{const U=await ss.getGame(X);if(!U){console.log("[FIX] No game data found");return}if(console.log("[FIX] Current game data:",U),Z&&Array.isArray(Z)){const[H,F,ee,le,Te,Se]=Z;console.log("[FIX] Contract data for fixing:"),console.log("[FIX] - Contract player1 (blue):",H),console.log("[FIX] - Contract player2 (red):",F),console.log("[FIX] - Contract isActive:",ee),console.log("[FIX] - Firebase blue_player:",U.blue_player),console.log("[FIX] - Firebase red_player:",U.red_player),console.log("[FIX] - Firebase game_state:",U.game_state);let De=!1;const ft={};F&&F!=="0x0000000000000000000000000000000000000000"&&(!U.red_player||U.red_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing red player address in Firebase"),ft.red_player=F,De=!0),H&&H!=="0x0000000000000000000000000000000000000000"&&(!U.blue_player||U.blue_player==="0x0000000000000000000000000000000000000000")&&(console.log("[FIX] Fixing blue player address in Firebase"),ft.blue_player=H,De=!0),H&&F&&H!=="0x0000000000000000000000000000000000000000"&&F!=="0x0000000000000000000000000000000000000000"&&(U.game_state==="waiting"||!U.game_state)&&(console.log("[FIX] Activating game in Firebase"),ft.game_state="active",ft.current_player="blue",De=!0),ee&&U.game_state!=="active"&&(console.log("[FIX] Syncing game state to active"),ft.game_state="active",De=!0),De?(console.log("[FIX] Updating Firebase with:",ft),await ss.updateGame(X,ft),console.log("[FIX] Firebase updated successfully")):console.log("[FIX] No missing player data to fix")}else console.log("[FIX] No contract data available for fixing")}catch(U){console.error("[FIX] Error fixing missing player data:",U)}},kne=(U,H)=>{if(!At||!Array.isArray(At)||At.length!==8||!At[U]||!Array.isArray(At[U])||At[U].length!==8)return console.warn("[SAFETY] Invalid board structure in renderSquare:",{row:U,col:H,board:At}),y.jsx("div",{className:"square error",children:y.jsx("div",{className:"error-indicator",children:"!"})},`${U}-${H}`);const F=At[U][H],ee=(fe==null?void 0:fe.row)===U&&(fe==null?void 0:fe.col)===H,le=ht.some(De=>De.row===U&&De.col===H),Te=Yl&&(Yl.from.row===U&&Yl.from.col===H||Yl.to.row===U&&Yl.to.col===H),Se=F&&F.toUpperCase()==="K"&&Pb(At,Oi(F));return y.jsxs("div",{className:`square ${ee?"selected":""} ${le?"legal-move":""} ${Te?"last-move":""} ${Se?"square-in-check":""}`,onClick:()=>_B(U,H),onTouchStart:De=>Fne(U,H,De),onTouchMove:jne,children:[F&&y.jsx("div",{className:"piece",style:{backgroundImage:l2[F]?`url(${l2[F]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),le&&y.jsx("div",{className:"legal-move-indicator"})]},`${U}-${H}`)},Dne=()=>{if(console.log("[PROMOTION DEBUG] renderPromotionDialog called - showPromotion:",Ab,"promotionMove:",Lf),!Ab||!Lf)return console.log("[PROMOTION DEBUG] Not rendering dialog - showPromotion:",Ab,"promotionMove:",Lf),null;const U=ie==="blue"?["q","r","b","n"]:["Q","R","B","N"];return y.jsx("div",{className:"promotion-dialog",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"rgba(0, 0, 0, 0.9)",border:"2px solid gold",borderRadius:"8px",padding:"20px",zIndex:1e3},children:y.jsxs("div",{className:"promotion-content",children:[y.jsx("h3",{style:{color:"white",marginBottom:"15px"},children:"Choose promotion piece:"}),y.jsx("div",{className:"promotion-pieces",style:{display:"flex",gap:"10px"},children:U.map(H=>y.jsx("div",{className:"promotion-piece",onClick:()=>{console.log("[PROMOTION] Selected piece:",H),AB(Lf.from,Lf.to,H),Sb(!1),xb(null)},style:{cursor:"pointer",padding:"10px",border:"2px solid white",borderRadius:"4px",background:"rgba(255, 255, 255, 0.1)"},children:y.jsx("img",{src:l2[H],alt:H,style:{width:"40px",height:"40px"}})},H))})]})})},Mne=()=>y.jsxs("div",{className:"piece-gallery",children:[y.jsx("h3",{children:"Chess Pieces"}),y.jsx("div",{className:"piece-gallery-grid",children:mqe.map(U=>y.jsxs("div",{className:"piece-gallery-item",onClick:()=>{XT(vd===U.key?null:U.key)},children:[y.jsx("img",{src:U.img,alt:U.name,className:"piece-gallery-img"}),y.jsx("div",{className:"piece-gallery-name",children:U.name}),vd===U.key&&y.jsx("div",{className:"piece-gallery-desc",children:U.desc})]},U.key))})]}),xB=()=>y.jsxs("div",{className:"chess-multiplayer-lobby",children:[y.jsx("h2",{children:"PvP Chess Lawby"}),s?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"status-bar",children:["Connected: ",rR(r)]}),y.jsxs("div",{className:"lobby-content",children:[y.jsxs("div",{className:"open-games",children:[y.jsx("h3",{children:"Open Games"}),y.jsxs("div",{className:"games-list",children:[QT.map(U=>y.jsxs("div",{className:"game-item",children:[y.jsxs("div",{className:"game-info",children:[y.jsx("div",{className:"game-id",children:U.game_title||"Untitled Game"}),y.jsxs("div",{className:"wager",children:["Wager: ",(parseFloat(U.bet_amount)/Math.pow(10,Uu[U.bet_token||"DMT"].decimals)).toFixed(2)," ",U.bet_token||"DMT"]}),y.jsxs("div",{className:"title",children:["Created by: ",rR(U.blue_player)]})]}),y.jsx("button",{className:"join-btn",onClick:()=>ae(U.invite_code),children:"Join Game"})]},U.invite_code)),QT.length===0&&y.jsx("div",{className:"no-games",children:"No open games available"})]})]}),y.jsxs("div",{className:"actions",children:[y.jsx("button",{className:"create-btn",onClick:()=>bd(!0),disabled:Em||Df,children:"Create New Game"}),y.jsx("button",{onClick:Bf,style:{marginTop:"10px",background:"rgba(0, 123, 255, 0.1)",border:"2px solid #007bff",color:"#007bff",padding:"8px 16px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"14px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Refresh Lobby"}),y.jsx("button",{onClick:()=>window.location.href="/chess",style:{marginTop:"10px",background:"rgba(255, 193, 7, 0.1)",border:"2px solid #ffc107",color:"#ffc107",padding:"12px 24px",borderRadius:"0px",cursor:"pointer",fontFamily:"Courier New, monospace",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease"},children:" Back to Chess Home"})]}),Em&&y.jsxs("div",{className:"create-form",children:[y.jsx("h3",{children:"Create New Game"}),y.jsx(pqe,{selectedToken:vo,onTokenSelect:x1,wagerAmount:bo,onWagerChange:S1,disabled:Df}),y.jsxs("div",{className:"form-actions",children:[y.jsx("button",{className:"create-confirm-btn",onClick:K,disabled:bo<=0||Df||bo>Cm,children:Df?"Creating...":"Create Game"}),y.jsx("button",{className:"cancel-btn",onClick:()=>{bd(!1),wo(!1)},children:"Cancel"})]})]})]})]}):y.jsx("div",{className:"wallet-notice",children:"Please connect your wallet to play multiplayer chess"})]}),Lne=()=>y.jsxs("div",{className:"chess-multiplayer-waiting",children:[y.jsx("h2",{children:"Waiting for Opponent"}),y.jsxs("div",{className:"game-code",children:["Invite Code: ",y.jsx("strong",{children:X})]}),y.jsxs("div",{className:"game-info",children:[y.jsxs("p",{children:["Wager: ",wd," ",vo]}),y.jsx("p",{children:"Share this invite code with your opponent"})]}),y.jsxs("div",{className:"waiting-actions",children:[y.jsx("button",{onClick:bt,disabled:W||V,className:"refund-game-btn",children:W||V?" Refunding...":" Refund Game"}),y.jsx("p",{className:"refund-note",children:"You can refund your wager anytime before an opponent joins"})]})]}),Une=()=>y.jsxs("div",{className:"chess-game",children:[y.jsxs("div",{className:"chess-header",children:[y.jsx("h2",{children:" Multiplayer Chess"}),y.jsxs("div",{className:"chess-controls",children:[e&&y.jsx("button",{onClick:e,className:"minimize-btn",title:"Minimize",children:"_"}),y.jsx("button",{onClick:t,className:"close-btn",title:"Close",children:""})]})]}),y.jsxs("div",{className:"game-info",children:[y.jsxs("div",{className:"game-status-section",children:[y.jsx("span",{className:`status ${In.includes("Check")?"check-status":""}`,children:In}),y.jsxs("span",{className:`current-player ${ie==="red"?"red-turn":"blue-turn"}`,children:["Current: ",ie==="red"?" Red":" Blue"]})]}),y.jsxs("div",{className:"game-details-section",children:[y.jsxs("span",{className:"wager-display",children:[" ",wd," ",vo]}),Pi&&y.jsxs("span",{className:"opponent-info",children:["vs ",rR(Pi)]}),Mn===Cn.ACTIVE&&Kl>0&&y.jsxs("span",{className:"timeout-countdown",style:{color:Kl<300?"#ff0000":"#00ff00",fontWeight:"bold",textShadow:"0 0 6px currentColor"},children:[" ",Math.floor(Kl/60),":",(Kl%60).toString().padStart(2,"0")]})]}),Mn===Cn.FINISHED&&y.jsxs("div",{className:"game-finished-actions",children:[y.jsx("button",{onClick:Nt,disabled:g,className:"claim-winnings-btn",children:g?" Claiming...":" Claim Winnings"}),y.jsx("button",{onClick:()=>window.location.href="/chess",className:"back-to-chess-btn",children:" Back to Chess Home"})]})]}),y.jsxs("div",{className:"game-stable-layout",children:[y.jsxs("div",{className:"left-sidebar",children:[y.jsxs("div",{className:"sidebar-tabs",children:[y.jsx("button",{className:`tab-button ${it==="moves"?"active":""}`,onClick:()=>Je("moves"),children:" Moves"}),y.jsx("button",{className:`tab-button ${it==="leaderboard"?"active":""}`,onClick:()=>Je("leaderboard"),children:" Leaderboard"})]}),it==="moves"&&y.jsxs("div",{className:"move-history",children:[y.jsx("h4",{children:"Move History"}),y.jsx("div",{className:"moves",children:ct.slice().reverse().map((U,H)=>y.jsx("div",{className:"move",children:U},ct.length-1-H))})]}),it==="leaderboard"&&y.jsxs("div",{className:"leaderboard",children:[y.jsx("h4",{children:"Leaderboard"}),y.jsx("div",{className:"leaderboard-table",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"#"}),y.jsx("th",{children:"Player"}),y.jsx("th",{children:"W"}),y.jsx("th",{children:"L"}),y.jsx("th",{children:"D"}),y.jsx("th",{children:"Pts"})]})}),y.jsx("tbody",{children:Rb.map((U,H)=>y.jsxs("tr",{children:[y.jsx("td",{children:H+1}),y.jsx("td",{children:U.username}),y.jsx("td",{children:U.wins}),y.jsx("td",{children:U.losses}),y.jsx("td",{children:U.draws}),y.jsx("td",{children:U.points})]},U.username))})]})})]})]}),y.jsxs("div",{className:"center-area",children:[y.jsxs("div",{className:"chessboard-container",children:[y.jsx("div",{className:"chessboard",children:Array.from({length:8},(U,H)=>y.jsx("div",{className:"board-row",children:Array.from({length:8},(F,ee)=>kne(H,ee))},H))}),_m&&_m.show&&y.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${_m.row*12.5}%`,left:`${_m.col*12.5}%`,width:"12.5%",height:"12.5%",pointerEvents:"none",zIndex:1e3},children:y.jsx("div",{className:"explosion-effect",children:""})})]}),y.jsxs("div",{className:"game-controls",children:[y.jsx("div",{className:"control-section",children:In.includes("corrupted")&&y.jsx("button",{className:"reset-game-btn",onClick:Rne,children:" Reset Game"})}),y.jsx("div",{className:"settings-section",children:y.jsxs("div",{className:"sound-controls",children:[y.jsxs("label",{className:"control-label",children:[y.jsx("input",{type:"checkbox",id:"sound-toggle",checked:Tb,onChange:U=>eR(U.target.checked),className:"control-checkbox"}),y.jsx("span",{className:"control-text",children:" Sound Effects"})]}),y.jsxs("label",{className:"control-label",children:[y.jsx("input",{type:"checkbox",id:"victory-toggle",checked:Ib,onChange:U=>Nb(U.target.checked),className:"control-checkbox"}),y.jsx("span",{className:"control-text",children:" Victory Celebration"})]})]})}),f&&y.jsx("button",{className:"claim-winnings-btn",onClick:Nt,disabled:g||P||j,children:g||P||j?" Claiming...":" Claim Winnings"})]})]}),y.jsx("div",{className:"right-sidebar"})]}),T1&&y.jsx("div",{className:"piece-gallery-panel",children:Mne()}),Dne(),Ib&&y.jsxs("div",{className:"victory-overlay",style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.0)"},children:[y.jsx("div",{className:"balloons-container"}),y.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:"320px",height:"auto",zIndex:2}}),y.jsxs("div",{style:{position:"absolute",bottom:40,left:0,width:"100vw",display:"flex",justifyContent:"center",gap:24},children:[y.jsx("button",{onClick:()=>zt(Cn.LOBBY),children:"Back to Lobby"}),y.jsx("button",{onClick:()=>window.location.reload(),children:"New Game"})]})]})]}),Bne=()=>null;k.useEffect(()=>{Co(),Bf(),Pne();const U=setInterval(Bf,3e4);return()=>{clearInterval(U),Eo.current&&Eo.current(),Ql.current&&clearTimeout(Ql.current)}},[]),console.log("[RENDER] Current game mode:",Mn,"Game ID:",X);const $ne=(()=>{switch(Mn){case Cn.LOBBY:return xB();case Cn.WAITING:return Lne();case Cn.ACTIVE:case Cn.FINISHED:return Une();default:return xB()}})(),Fne=(U,H,F)=>{F.preventDefault(),_B(U,H)},jne=U=>{U.preventDefault()};return y.jsxs(y.Fragment,{children:[$ne,Bne()]})},u2={AI:"ai"},bqe=1992,XA={R:"/images/redrook.png",N:"/images/redknight.png",B:"/images/redbishop.png",Q:"/images/redqueen.png",K:"/images/redking.png",P:"/images/redpawn.png",r:"/images/bluerook.png",n:"/images/blueknight.png",b:"/images/bluebishop.png",q:"/images/bluequeen.png",k:"/images/blueking.png",p:"/images/bluepawn.png"},NW=[["R","N","B","Q","K","B","N","R"],["P","P","P","P","P","P","P","P"],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null],["p","p","p","p","p","p","p","p"],["r","n","b","q","k","b","n","r"]],vqe=[{key:"K",name:"Red King",img:"/images/redking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"Q",name:"Red Queen",img:"/images/redqueen.png",desc:"The Queen moves any number of squares in any direction."},{key:"R",name:"Red Rook",img:"/images/redrook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"B",name:"Red Bishop",img:"/images/redbishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"N",name:"Red Knight",img:"/images/redknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"P",name:"Red Pawn",img:"/images/redpawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."},{key:"k",name:"Blue King",img:"/images/blueking.png",desc:"The King moves one square in any direction. Protect your King at all costs!"},{key:"q",name:"Blue Queen",img:"/images/bluequeen.png",desc:"The Queen moves any number of squares in any direction."},{key:"r",name:"Blue Rook",img:"/images/bluerook.png",desc:"The Rook moves any number of squares horizontally or vertically."},{key:"b",name:"Blue Bishop",img:"/images/bluebishop.png",desc:"The Bishop moves any number of squares diagonally."},{key:"n",name:"Blue Knight",img:"/images/blueknight.png",desc:"The Knight moves in an L-shape: two squares in one direction, then one square perpendicular."},{key:"p",name:"Blue Pawn",img:"/images/bluepawn.png",desc:"The Pawn moves forward one square, with the option to move two squares on its first move. Captures diagonally."}],Eqe=()=>{const[t,e]=k.useState(!1),n=k.useRef(null),r=k.useRef(!1);k.useEffect(()=>r.current||n.current?void 0:(r.current=!0,console.log("[DEBUG] Initializing LawbBot..."),(()=>{try{const a=new Worker("/stockfish.worker.js");a.onmessage=c=>{console.log("[DEBUG] Stockfish worker message:",c.data)},a.onerror=c=>{console.error("[DEBUG] Stockfish worker error:",c),e(!1),r.current=!1},console.log("[DEBUG] LawbBot initialized successfully"),n.current=a,e(!0),r.current=!1,console.log("[DEBUG] Stockfish worker ready for commands")}catch(a){console.error("[DEBUG] Failed to create Stockfish worker:",a),e(!1),r.current=!1}})(),()=>{if(n.current){try{n.current.terminate()}catch(a){console.warn("[DEBUG] Error terminating LawbBot:",a)}n.current=null}r.current=!1}),[]);const s=k.useCallback((o,a=4e3)=>new Promise(c=>{if(!n.current){console.warn("[DEBUG] Stockfish not ready, using fallback"),c(null);return}console.log("[DEBUG] Starting Stockfish calculation for FEN:",o,"timeLimit:",a);let l=null,u=!1;const d=h=>{var p;const f=h.data;typeof f=="string"&&f.startsWith("bestmove ")&&(l=f.split(" ")[1]||null,console.log("[DEBUG] Stockfish bestmove found:",l),u||(u=!0,(p=n.current)==null||p.removeEventListener("message",d),c(l)))};try{n.current.addEventListener("message",d),n.current.postMessage("uci"),n.current.postMessage("isready"),n.current.postMessage(`position fen ${o}`);const h=a>5e3?a*1.5:a;n.current.postMessage(`go movetime ${h} depth 20`);const f=a>5e3?a*2:a+1e3;window.setTimeout(()=>{var p;if(!u){u=!0;try{(p=n.current)==null||p.removeEventListener("message",d)}catch(g){console.warn("[DEBUG] Error removing message listener:",g)}console.warn("[DEBUG] Stockfish timeout after",f,"ms"),c(l)}},f)}catch(h){console.error("[DEBUG] Stockfish communication error:",h),c(null)}}),[]),i=k.useCallback(async(o,a=4e3)=>{try{const c=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",l="https://chess.lawb.xyz/api/stockfish";console.log(`[DEBUG] Attempting API call to ${l}`);const u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:o,movetime:a})});if(u.ok){const d=await u.json();return console.log(`[DEBUG] API call successful to ${l}:`,d),d.move||null}else return console.warn(`[DEBUG] API failed with status ${u.status} on ${l}`),null}catch(c){return console.warn("[DEBUG] API error:",c),null}},[]);return{stockfishReady:t,getStockfishMove:s,getCloudflareStockfishMove:i}},Cqe=()=>{const[t,e]=k.useState(null),[n,r]=k.useState(!1),s=k.useCallback(async o=>{try{r(!0);const a=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}`);if(a.ok){const c=await a.json();return e(c),c}}catch(a){console.warn("[DEBUG] Lichess API error:",a)}finally{r(!1)}return null},[]),i=k.useCallback(async(o,a)=>{try{const c=await fetch(`https://explorer.lichess.ovh/lichess?fen=${encodeURIComponent(o)}&play=${a}`);if(c.ok)return await c.json()}catch(c){console.warn("[DEBUG] Lichess move analysis error:",c)}return null},[]);return{openingData:t,isAnalyzing:n,getOpeningData:s,getMoveAnalysis:i}},_qe=({onClose:t,onMinimize:e,fullscreen:n=!1})=>{const{address:r,isConnected:s}=p1(),i=wm();LFe();const{open:o}=h1(),[a,c]=k.useState(u2.AI),[l,u]=k.useState(()=>JSON.parse(JSON.stringify(NW))),[d,h]=k.useState("blue"),[f,p]=k.useState(null),[g,w]=k.useState("active"),[m,b]=k.useState("hard"),[v,A]=k.useState("Connect wallet to play"),[C,T]=k.useState([]),[x,N]=k.useState([]),[S,D]=k.useState([]),[P,$]=k.useState(null),[G,W]=k.useState(!1),[I,R]=k.useState(!1),[B,O]=k.useState(null),[M,j]=k.useState(null),[V]=k.useState(""),[te]=k.useState(.1),[Z,X]=k.useState({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ce=k.useRef(null),ge=k.useRef(!1),Me=k.useRef(l),it=k.useRef(null),Je=k.useRef(null),bt=k.useRef(!1),Nt=k.useRef(!1),[At,ne]=k.useState(!1),[ie,be]=k.useState(!1),[fe,ve]=k.useState(!1),[ht]=k.useState(!0);k.useEffect(()=>{document.documentElement.classList.add("chess-dark-mode"),document.body.classList.add("chess-dark-mode")},[]);const{stockfishReady:Xe}=Eqe(),{getOpeningData:ct}=Cqe(),[Tt,In]=k.useState("loading"),[tt,Mn]=k.useState(!1),[zt,ke]=k.useState([]),[Nn,Pi]=k.useState(!1),[lr,wd]=k.useState(()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*q.length),ae=q[K];return console.log("[DEBUG] Initial random chessboard selected:",ae,"(index:",K,")"),ae}),[YT,QT]=k.useState(!0),[mB,Em]=k.useState(!1);k.useEffect(()=>{!s||!r?(A("Connect wallet to play"),W(!1),ne(!1),o()):i!==bqe?(A("Switch to Sanko Testnet to play"),W(!1),ne(!1),o()):A("Select game mode")},[s,r,i,o]);const bd=()=>{const q=["/images/chessboard1.png","/images/chessboard2.png","/images/chessboard3.png","/images/chessboard4.png","/images/chessboard5.png","/images/chessboard6.png"],K=Math.floor(Math.random()*q.length),ae=q[K];return console.log("[DEBUG] Random chessboard selected:",ae,"(index:",K,")"),ae};k.useEffect(()=>{if(Xe)In("ready");else{const q=window.setTimeout(()=>{Xe||(In("failed"),console.warn("[DEBUG] Stockfish failed to load within timeout"))},1e4);return()=>window.clearTimeout(q)}},[Xe]),k.useEffect(()=>{Me.current=l},[l]),k.useEffect(()=>(!ce.current&&typeof Worker<"u"&&(ce.current=new Worker("/aiWorker.js"),ce.current.onmessage=q=>{console.log("[DEBUG] AI worker response received:",q.data);const{move:K,nodes:ae}=q.data;K&&ge.current&&g==="active"?(console.log("[DEBUG] AI worker move is valid, executing:",K),console.log("[DEBUG] AI searched",ae,"nodes"),ge.current=!1,Je.current&&(window.clearTimeout(Je.current),Je.current=null),it.current&&it.current(K.from,K.to,!0)):console.log("[DEBUG] AI worker response ignored - not AI turn or game not active")},ce.current.onerror=q=>{console.error("[DEBUG] AI worker error:",q),A("AI worker error - using fallback mode"),ge.current=!1}),()=>{ce.current&&(ce.current.terminate(),ce.current=null),Je.current&&(window.clearTimeout(Je.current),Je.current=null)}),[]),k.useEffect(()=>{Df()},[]);const Df=async()=>{try{await _ee();const q=await Cee(20);N(q),console.log("Leaderboard data loaded:",q)}catch(q){A("Failed to load leaderboard"),console.error("Leaderboard error:",q)}},wo=async q=>{if(console.log("[DEBUG] updateScore called with:",q),!r){console.log("[DEBUG] No wallet address, returning");return}try{console.log("[DEBUG] Updating score for address:",qg(r)),await xI(r,q)?(console.log("[DEBUG] Successfully updated score for:",qg(r)),await Df()):console.error("[DEBUG] Failed to update score")}catch(K){console.error("[DEBUG] Error in updateScore:",K)}},Ht=q=>q&&q===q.toUpperCase()?"red":"blue",Mf=(q,K)=>q>=0&&q<8&&K>=0&&K<8,zn=(q,K)=>`${String.fromCharCode(97+K)}${8-q}`,ts=(q,K)=>{const ae=K==="blue"?"k":"K";let oe=null;for(let Ne=0;Ne<8;Ne++){for(let nt=0;nt<8;nt++)if(q[Ne][nt]===ae){oe={row:Ne,col:nt};break}if(oe)break}if(!oe)return console.log(`King not found for ${K}`),!1;const re=K==="blue"?"red":"blue",Ie=yB(oe.row,oe.col,re,q);return console.log(`${K} king at ${oe.row},${oe.col} under attack: ${Ie}`),Ie},yB=(q,K,ae,oe)=>{for(let re=0;re<8;re++)for(let Ie=0;Ie<8;Ie++){const Ne=oe[re][Ie];if(Ne&&Ht(Ne)===ae&&qa(Ne,re,Ie,q,K,!1,ae,oe,!0))return!0}return!1},wB=(q,K,ae,oe,re,Ie=l)=>{const Ne=Ie.map(un=>[...un]),nt=Ne[q][K];return Ne[ae][oe]=nt,Ne[q][K]=null,ts(Ne,re)},bo=(q,K,ae,oe,re,Ie)=>{const Ne=q==="blue"?-1:1,nt=q==="blue"?6:1;if(!Mf(oe,re)||q==="blue"&&oe>=K||q==="red"&&oe<=K)return!1;const un=Math.abs(oe-K),En=Math.abs(re-ae);if((un===1&&En===0||un===2&&En===0&&K===nt||un===1&&En===1)&&un<=2&&En<=1&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.log("[DEBUG] Pawn move check:",{color:q,from:`${K},${ae}`,to:`${oe},${re}`}),ae===re&&oe===K+Ne)return Ie[oe][re]===null;if(ae===re&&K===nt&&oe===K+2*Ne)return Ie[K+Ne][ae]===null&&Ie[oe][re]===null;if(Math.abs(ae-re)===1&&oe===K+Ne){const Xt=Ie[oe][re];return Xt!==null&&Ht(Xt)!==q}if(Math.abs(ae-re)===1&&oe===K+Ne){const Xt=Ie[K][re];if(Xt&&Ht(Xt)!==q&&Xt.toLowerCase()==="p"&&Z.lastPawnDoubleMove&&Z.lastPawnDoubleMove.row===K&&Z.lastPawnDoubleMove.col===re)return console.log("[DEBUG] Pawn en passant move"),!0}return!1},S1=(q,K,ae,oe,re)=>q!==ae&&K!==oe?!1:Ga(q,K,ae,oe,re),vo=(q,K,ae,oe)=>{const re=Math.abs(q-ae),Ie=Math.abs(K-oe);return re===2&&Ie===1||re===1&&Ie===2},x1=(q,K,ae,oe,re)=>Math.abs(q-ae)!==Math.abs(K-oe)?!1:Ga(q,K,ae,oe,re),Cm=(q,K,ae,oe,re)=>S1(q,K,ae,oe,re)||x1(q,K,ae,oe,re),bB=(q,K,ae,oe,re)=>{const Ie=Math.abs(K-oe),Ne=Math.abs(ae-re);if(Ie<=1&&Ne<=1)return!0;if(Ie===0&&Ne===2){if(q==="blue"&&!Z.blueKingMoved){if(re===6&&!Z.blueRooksMove.right||re===2&&!Z.blueRooksMove.left)return!0}else if(q==="red"&&!Z.redKingMoved&&(re===6&&!Z.redRooksMove.right||re===2&&!Z.redRooksMove.left))return!0}return!1},Ga=(q,K,ae,oe,re)=>{const Ie=q===ae?0:(ae-q)/Math.abs(ae-q),Ne=K===oe?0:(oe-K)/Math.abs(oe-K);let nt=q+Ie,un=K+Ne;for(;nt!==ae||un!==oe;){if(re[nt][un]!==null)return!1;nt+=Ie,un+=Ne}return!0},qa=(q,K,ae,oe,re,Ie=!0,Ne=Ht(q),nt=l,un=!1)=>{if(!Mf(oe,re))return un||console.log("[ILLEGAL MOVE] Out of board:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re}),!1;const En=nt[oe][re];if(En&&Ht(En)===Ne)return un||console.log("[ILLEGAL MOVE] Capturing own piece:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re}),!1;const Tn=q.toLowerCase();let Xt=!1;switch(Tn){case"p":Xt=bo(Ne,K,ae,oe,re,nt);break;case"r":Xt=S1(K,ae,oe,re,nt);break;case"n":Xt=vo(K,ae,oe,re);break;case"b":Xt=x1(K,ae,oe,re,nt);break;case"q":Xt=Cm(K,ae,oe,re,nt);break;case"k":Xt=bB(Ne,K,ae,oe,re);break}return Xt?Xt&&Ie&&wB(K,ae,oe,re,Ne,nt)?(un||console.log("[ILLEGAL MOVE] Move exposes king to check:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re}),!1):Xt:(un||console.log("[ILLEGAL MOVE] Piece cannot move that way:",{piece:q,startRow:K,startCol:ae,endRow:oe,endCol:re,playerColor:Ne,pieceType:Tn,targetPiece:nt[oe][re],targetPieceColor:nt[oe][re]?Ht(nt[oe][re]):null}),!1)},Kl=(q,K=l,ae=d)=>{const oe=[],re=K[q.row][q.col];if(!re||Ht(re)!==ae)return oe;const Ie=re.toLowerCase();if(Ie==="p"){const Ne=ae==="blue"?-1:1,nt=ae==="blue"?6:1,un=q.row+Ne;if(un>=0&&un<8&&qa(re,q.row,q.col,un,q.col,!0,ae,K,!0)&&oe.push({row:un,col:q.col}),q.row===nt){const En=q.row+2*Ne;En>=0&&En<8&&qa(re,q.row,q.col,En,q.col,!0,ae,K,!0)&&oe.push({row:En,col:q.col})}for(const En of[-1,1]){const Tn=q.col+En,Xt=q.row+Ne;Tn>=0&&Tn<8&&Xt>=0&&Xt<8&&qa(re,q.row,q.col,Xt,Tn,!0,ae,K,!0)&&oe.push({row:Xt,col:Tn})}}else if(Ie==="n"){const Ne=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[nt,un]of Ne){const En=q.row+nt,Tn=q.col+un;En>=0&&En<8&&Tn>=0&&Tn<8&&qa(re,q.row,q.col,En,Tn,!0,ae,K,!0)&&oe.push({row:En,col:Tn})}}else for(let Ne=0;Ne<8;Ne++)for(let nt=0;nt<8;nt++)qa(re,q.row,q.col,Ne,nt,!0,ae,K,!0)&&oe.push({row:Ne,col:nt});return oe},JT=(q,K=l)=>{if(!ts(K,q))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const re=K[ae][oe];if(re&&Ht(re)===q&&Kl({row:ae,col:oe},K,q).length>0)return!1}return!0},I1=(q,K=l)=>{if(ts(K,q))return!1;for(let ae=0;ae<8;ae++)for(let oe=0;oe<8;oe++){const re=K[ae][oe];if(re&&Ht(re)===q&&Kl({row:ae,col:oe},K,q).length>0)return!1}return!0},N1=(q,K)=>{if(g!=="active"||ge.current)return;const ae=l[q][K],oe=ae?Ht(ae):null;if(f&&S.some(re=>re.row===q&&re.col===K)){Va(f,{row:q,col:K});return}if(ae&&oe===d){const re=Kl({row:q,col:K});p({row:q,col:K}),D(re);return}p(null),D([])},Va=(q,K,ae=!1)=>{const oe=l[q.row][q.col];if(console.log("[MOVE ATTEMPT]",{from:q,to:K,piece:oe,isAIMove:ae,board:JSON.parse(JSON.stringify(l)),moveHistory:C}),!!oe){if(oe.toLowerCase()==="p"&&(Ht(oe)==="blue"&&K.row===0||Ht(oe)==="red"&&K.row===7)){O({from:q,to:K}),R(!0);return}Uf(q,K,"q",ae)}};it.current=Va;const T1=k.useCallback((q,K,ae=!1)=>{Pi(!0);const oe=l.map(Ne=>[...Ne]),re=oe[q.row][q.col];if(!re)return;oe[K.row][K.col]=re,oe[q.row][q.col]=null,_m(oe,q,K,re);const Ie=R1(q,K);if(T(Ne=>{const nt=[...Ne,Ie];return console.log("[MOVE HISTORY UPDATED]",nt),nt}),$({from:q,to:K}),p(null),D([]),C.length<10&&!ae){const Ne=TW(oe,d==="blue"?"red":"blue");ct(Ne).then(nt=>{nt&&nt.moves&&nt.moves.length>0&&(ke(nt.moves.slice(0,3)),Mn(!0),setTimeout(()=>Mn(!1),5e3))})}Am(q,K,re),h(Ne=>{const nt=Ne==="blue"?"red":"blue";return console.log("[DEBUG] Player switched to:",nt),ZT(oe,nt),nt}),ZT(oe,d==="blue"?"red":"blue"),u(oe),ge.current=!1,bt.current=!1,Nt.current=!1,Pi(!1)},[l,d,C,ct]);k.useEffect(()=>{if(!ge.current&&a==="ai"&&d==="red"&&!bt.current&&!Nn)if(ge.current=!0,m==="easy")setTimeout(()=>{const q=vd(l);q?Va(q.from,q.to,!0):ge.current=!1},600);else{A("AI is calculating...");const q=TW(l,d);if(Nt.current)return;Nt.current=!0,fetch("https://chess.lawb.xyz/api/stockfish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fen:q,difficulty:m,movetime:3e3})}).then(ae=>{if(ae.ok)return ae.json();throw new Error("API call failed")}).then(ae=>{console.log("[DEBUG] Stockfish API response:",ae);const oe=ae.bestmove||ae.move;if(oe&&oe!=="(none)"&&oe.length===4){const re=oe.charCodeAt(0)-97,Ie=parseInt(oe[1]),Ne=oe.charCodeAt(2)-97,nt=parseInt(oe[3]),un=8-Ie,En=8-nt;if(console.log("[DEBUG] Parsed move:",{fromCol:re,fromRowStockfish:Ie,toCol:Ne,toRowStockfish:nt,fromRow:un,toRow:En}),re>=0&&re<8&&un>=0&&un<8&&Ne>=0&&Ne<8&&En>=0&&En<8){const Tn={from:{row:un,col:re},to:{row:En,col:Ne}},Xt=l[un][re];if(console.log("[DEBUG] Move validation:",{piece:Xt,moveObj:Tn,isValid:Xt&&Ht(Xt)==="red"&&qa(Xt,un,re,En,Ne,!0,"red",l)}),Xt&&Ht(Xt)==="red"&&qa(Xt,un,re,En,Ne,!0,"red",l))console.log("[DEBUG] Executing Stockfish move:",Tn),Va(Tn.from,Tn.to,!0);else{console.warn("[DEBUG] Invalid Stockfish move, falling back to random");const jc=vd(l);jc&&Va(jc.from,jc.to,!0),ge.current=!1,Nt.current=!1}}else{console.warn("[DEBUG] Invalid move coordinates, falling back to random");const Tn=vd(l);Tn&&Va(Tn.from,Tn.to,!0),ge.current=!1,Nt.current=!1}}else{console.warn("[DEBUG] Invalid move format from API, falling back to random");const re=vd(l);re&&Va(re.from,re.to,!0),ge.current=!1,Nt.current=!1}}).catch(ae=>{console.error("[DEBUG] Stockfish API error:",ae),A("AI error. Falling back to random moves.");const oe=vd(l);oe&&Va(oe.from,oe.to,!0),ge.current=!1,Nt.current=!1})}},[d,a,m,l,Z,Xe]);const ZT=(q,K)=>{console.log("Checking game end for player:",K);const ae=q.some(re=>re.some(Ie=>Ie==="k")),oe=q.some(re=>re.some(Ie=>Ie==="K"));if(!ae)return console.log("[GAME END] KING CAPTURED - Red wins!"),w("checkmate"),A("King captured! Red wins!"),wo("loss"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(!oe)return console.log("[GAME END] KING CAPTURED - Blue wins!"),w("checkmate"),A("King captured! You win!"),wo("win"),ve(!0),setTimeout(()=>ve(!1),3e3),"checkmate";if(console.log("Is king in check:",ts(q,K)),JT(K,q)){console.log("[GAME END] CHECKMATE",{winner:K==="blue"?"red":"blue",board:JSON.parse(JSON.stringify(q)),moveHistory:C}),w("checkmate");const re=K==="blue"?"red":"blue";return re==="blue"?(A("Checkmate! You win!"),Fc("victory"),Rb(!0),Em(!0),ii(),wo("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Checkmate! ${re==="red"?"AI":"Opponent"} wins!`),Fc("loser"),Yl(!0),wo("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"checkmate"}if(I1(K,q)){console.log("[GAME END] STALEMATE",{board:JSON.parse(JSON.stringify(q)),moveHistory:C}),w("stalemate");const re=K==="blue"?"red":"blue";return re==="blue"?(A("Stalemate! You win!"),Fc("victory"),Rb(!0),Em(!0),ii(),wo("win"),ve(!0),setTimeout(()=>ve(!1),3e3)):(A(`Stalemate! ${re==="red"?"AI":"Opponent"} wins!`),Fc("loser"),Yl(!0),wo("loss"),ve(!0),setTimeout(()=>ve(!1),3e3)),"stalemate"}return ts(q,K)?(console.log("CHECK detected!"),Fc("check"),A(`${K==="blue"?"Blue":"Red"} is in check!`)):A("Your turn"),null},vd=q=>{const K=[];for(let re=0;re<8;re++)for(let Ie=0;Ie<8;Ie++){const Ne=q[re][Ie];Ne&&Ht(Ne)==="red"&&K.push({row:re,col:Ie})}for(let re=K.length-1;re>0;re--){const Ie=Math.floor(Math.random()*(re+1));[K[re],K[Ie]]=[K[Ie],K[re]]}const ae=[],oe=[];for(const re of K){const Ie=Kl(re,q,"red");for(const Ne of Ie){const nt=q[Ne.row][Ne.col];if(nt&&Ht(nt)==="blue"){const En={p:100,n:320,b:330,r:500,q:900,k:2e4}[nt.toLowerCase()]||0;ae.push({from:re,to:Ne,value:En})}else oe.push({from:re,to:Ne})}}if(ae.length>0&&Math.random()<.3){ae.sort((re,Ie)=>re.value-Ie.value);for(const re of ae){const Ie=q.map(nt=>[...nt]),Ne=Ie[re.from.row][re.from.col];if(Ie[re.to.row][re.to.col]=Ne,Ie[re.from.row][re.from.col]=null,!ts(Ie,"red"))return{from:re.from,to:re.to}}}for(const re of oe){const Ie=q.map(nt=>[...nt]),Ne=Ie[re.from.row][re.from.col];if(Ie[re.to.row][re.to.col]=Ne,Ie[re.from.row][re.from.col]=null,!ts(Ie,"red"))return re}ae.sort((re,Ie)=>re.value-Ie.value);for(const re of ae){const Ie=q.map(nt=>[...nt]),Ne=Ie[re.from.row][re.from.col];if(Ie[re.to.row][re.to.col]=Ne,Ie[re.from.row][re.from.col]=null,!ts(Ie,"red"))return{from:re.from,to:re.to}}return null},XT=()=>{u(JSON.parse(JSON.stringify(NW))),h("blue"),p(null),w("active"),T([]),D([]),$(null),W(!1),A("Select game mode"),X({blueKingMoved:!1,redKingMoved:!1,blueRooksMove:{left:!1,right:!1},redRooksMove:{left:!1,right:!1},lastPawnDoubleMove:null}),ge.current&&(ge.current=!1)},Ab=()=>{if(O1(),console.log("[DEBUG] startGame called, difficulty:",m,"gameMode:",a),a==="online"){W(!1),ne(!1);return}W(!0),ne(!1),A("Game started! Your turn");const q=bd();wd(q),console.log("[DEBUG] Game started with chessboard:",q)},Sb=q=>`${q.slice(0,6)}...${q.slice(-4)}`,Lf=(q,K)=>{const ae=l[q][K],oe=(f==null?void 0:f.row)===q&&(f==null?void 0:f.col)===K,re=S.some(Ne=>Ne.row===q&&Ne.col===K),Ie=P&&(P.from.row===q&&P.from.col===K||P.to.row===q&&P.to.col===K);return y.jsxs("div",{className:`square ${oe?"selected":""} ${re?"legal-move":""} ${Ie?"last-move":""}`,onClick:()=>N1(q,K),onTouchStart:Ne=>k1(q,K,Ne),onTouchMove:Bf,children:[ae&&y.jsx("div",{className:"piece",style:{backgroundImage:XA[ae]?`url(${XA[ae]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),re&&y.jsx("div",{className:"legal-move-indicator"})]},`${q}-${K}`)},xb=()=>{if(!I||!B)return null;const q=d==="blue"?["q","r","b","n"]:["Q","R","B","N"];return y.jsx("div",{className:"promotion-dialog",children:y.jsxs("div",{className:"promotion-content",children:[y.jsx("h3",{children:"Choose promotion piece:"}),y.jsx("div",{className:"promotion-pieces",children:q.map(K=>y.jsx("div",{className:"promotion-piece",onClick:()=>{Uf(B.from,B.to,K),R(!1),O(null)},style:{backgroundImage:XA[K]?`url(${XA[K]})`:void 0,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}},K))})]})})},[Ib,Nb]=k.useState(null),Tb=(q=!1,K="Click a piece to learn more about it.")=>y.jsxs("div",{className:`piece-gallery${q?" piece-gallery-sm":""}`,children:[y.jsx("h3",{style:{color:"#32CD32"},children:"Lawbstation Chess Pieces"}),y.jsx("div",{className:"piece-gallery-grid",children:vqe.map(ae=>y.jsxs("div",{className:"piece-gallery-item",onClick:()=>{Nb(Ib===ae.key?null:ae.key)},children:[y.jsx("img",{src:ae.img,alt:ae.name,className:"piece-gallery-img"}),y.jsx("div",{className:"piece-gallery-name",children:ae.name}),Ib===ae.key&&y.jsx("div",{className:"piece-gallery-desc",children:ae.desc})]},ae.key))}),y.jsx("div",{className:"piece-gallery-tip",children:K})]}),eR=()=>y.jsx("div",{className:"difficulty-selection-row",style:{justifyContent:"center"},children:y.jsx("div",{className:"difficulty-controls-col",children:y.jsxs("div",{className:"difficulty-selection-panel",style:{background:"transparent",borderRadius:0,padding:"32px 24px",boxShadow:"none",textAlign:"center"},children:[y.jsx("h2",{style:{fontWeight:700,letterSpacing:1,fontSize:"2rem",color:"#00ff00",marginBottom:16,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Select Difficulty"}),y.jsx("p",{style:{fontSize:"1.1rem",color:"#00ff00",marginBottom:24,textShadow:"0 0 6px #00ff00, 0 0 2px #00ff00"},children:"Compete against the computer to climb the leaderboard."}),y.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:16,marginBottom:24},children:[y.jsx("button",{className:`difficulty-btn${m==="easy"?" selected":""}`,style:{background:m==="easy"?"#00ff00":"transparent",color:m==="easy"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:m==="easy"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("easy"),children:"Easy"}),y.jsx("button",{className:`difficulty-btn${m==="hard"?" selected":""}`,style:{background:m==="hard"?"#00ff00":"transparent",color:m==="hard"?"#000":"#00ff00",fontWeight:"bold",fontSize:"1.1em",padding:"12px 32px",borderRadius:0,border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,boxShadow:m==="hard"?"0 0 6px #00ff00, 0 0 2px #00ff00":"none"},onClick:()=>b("hard"),children:"Hard"})]}),y.jsxs("button",{className:"difficulty-btn start-btn",onClick:()=>{Ab()},style:{background:"transparent",color:"#00ff00",fontWeight:"bold",fontSize:"1.3em",padding:"18px 48px",borderRadius:0,boxShadow:"0 0 6px #00ff00, 0 0 2px #00ff00",border:"1px solid #00ff00",cursor:"pointer",letterSpacing:1,marginBottom:8},children:[y.jsx("span",{role:"img","aria-label":"chess",children:""})," Start Game"]})]})})}),_m=(q,K,ae,oe)=>{if(oe.toLowerCase()==="p"&&(Ht(oe)==="blue"&&ae.row===0||Ht(oe)==="red"&&ae.row===7)){const re=Ht(oe)==="blue"?"q":"Q";q[ae.row][ae.col]=re}if(oe.toLowerCase()==="k"&&Math.abs(K.col-ae.col)===2){if(ae.col===6)q[K.row][7]=null,q[K.row][5]=Ht(oe)==="blue"?"r":"R";else if(ae.col===2){const re=q[K.row][3];q[K.row][0]=null,q[K.row][3]=Ht(oe)==="blue"?"r":"R",re&&re.toLowerCase()==="q"&&(q[K.row][4]=re)}}},R1=(q,K,ae,oe)=>{const re=zn(q.row,q.col),Ie=zn(K.row,K.col);return`${re}-${Ie}`},Am=(q,K,ae)=>{const oe={...Z};ae.toLowerCase()==="k"?Ht(ae)==="blue"?oe.blueKingMoved=!0:oe.redKingMoved=!0:ae.toLowerCase()==="r"&&(Ht(ae)==="blue"?(q.col===0&&(oe.blueRooksMove.left=!0),q.col===7&&(oe.blueRooksMove.right=!0)):(q.col===0&&(oe.redRooksMove.left=!0),q.col===7&&(oe.redRooksMove.right=!0))),ae.toLowerCase()==="p"&&Math.abs(q.row-K.row)===2?oe.lastPawnDoubleMove={row:K.row,col:K.col}:oe.lastPawnDoubleMove=null,X(oe)},Uf=(q,K,ae="q",oe=!1)=>{l[q.row][q.col];const Ie=l[K.row][K.col]!==null;if(Fc(Ie?"capture":"move"),Ie){j({row:K.row,col:K.col,show:!0}),setTimeout(()=>{T1(q,K,oe),j(null)},500);return}T1(q,K,oe)},Fc=q=>{if(!YT)return;let K="";switch(q){case"move":K="/images/move.mp3";break;case"capture":K="/images/capture.mp3";break;case"check":K="/images/play.mp3";break;case"checkmate":K="/images/victory.mp3";break;case"victory":K="/images/victory.mp3";break;case"loser":K="/images/loser.mp3";break;case"upgrade":K="/images/upgrade.mp3";break;default:K="/images/move.mp3"}new Audio(K).play().catch(()=>{})},ii=()=>{Fc("victory");for(let q=0;q<50;q++)setTimeout(()=>{const K=document.createElement("div");K.style.cssText=`
          position: fixed;
          width: 10px;
          height: 10px;
          background: ${["#ff4444","#44ff44","#4444ff","#ffff44","#ff44ff"][Math.floor(Math.random()*5)]};
          left: ${Math.random()*window.innerWidth}px;
          top: -10px;
          z-index: 9999;
          animation: confetti-fall 3s linear forwards;
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),3e3)},q*100);for(let q=0;q<15;q++)setTimeout(()=>{const K=document.createElement("div"),ae=["#ff4444","#4444ff","#ffff44","#ff44ff","#ff8844"],oe=ae[Math.floor(Math.random()*ae.length)];K.style.cssText=`
          position: fixed;
          width: 60px;
          height: 80px;
          background: ${oe};
          border-radius: 50% 50% 50% 50% /60% 40% 60% 40%;
          left: ${Math.random()*window.innerWidth}px;
          bottom: -80px;
          z-index: 9998;
          animation: balloon-float 6s ease-out forwards;
          box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        `,document.body.appendChild(K),setTimeout(()=>K.remove(),6e3)},q*200);setTimeout(()=>Em(!1),5e3)},[tR,Rb]=k.useState(!1),[nR,Yl]=k.useState(!1),P1=()=>{Rb(!1),Yl(!1)},Eo=()=>{P1(),XT()},Ql=()=>{P1(),W(!1)},O1=()=>{new Audio("/images/start.mp3").play().catch(()=>{})},Sm=a==="online",[Co,Ed]=k.useState("leaderboard"),k1=(q,K,ae)=>{ae.preventDefault(),N1(q,K)},Bf=q=>{q.preventDefault()};return y.jsxs("div",{className:`chess-game${n?" fullscreen":""}${ht?" chess-dark-mode":""}${G?" game-active":""}`,children:[y.jsxs("div",{className:"chess-header",children:[y.jsx("h2",{children:"LAWB CHESS TESTNET BETA 3000"}),y.jsxs("div",{className:"chess-controls",children:[e&&y.jsx("button",{onClick:e,children:"_"}),y.jsx("button",{onClick:t,children:""})]})]}),y.jsx("div",{className:"game-stable-layout",children:y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"left-sidebar",children:[Co==="leaderboard"&&y.jsxs("div",{className:"leaderboard-compact",children:[y.jsx("h3",{children:"Leaderboard"}),y.jsx("div",{className:"leaderboard-table-compact",children:y.jsxs("table",{children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Rank"}),y.jsx("th",{children:"Player"}),y.jsx("th",{children:"Pts"})]})}),y.jsx("tbody",{children:Array.isArray(x)&&x.slice(0,8).map((q,K)=>{if(typeof q=="object"&&q!==null&&"username"in q&&"wins"in q&&"losses"in q&&"draws"in q&&"points"in q){const ae=q;return y.jsxs("tr",{children:[y.jsx("td",{children:K+1}),y.jsx("td",{children:Sb(ae.username)}),y.jsx("td",{children:ae.points})]},ae.username)}return null})})]})})]}),Co==="moves"&&G&&y.jsxs("div",{className:"move-history-compact",children:[y.jsx("div",{className:"move-history-title",children:"Moves"}),y.jsx("ul",{className:"move-history-list-compact",children:C.slice().reverse().map((q,K)=>y.jsx("li",{children:q},C.length-1-K))})]}),Co==="gallery"&&y.jsx("div",{className:"piece-gallery-compact",children:Tb(!0,"Click pieces to learn more")})]}),y.jsxs("div",{className:"center-area",children:[G&&y.jsxs("div",{className:"game-info-compact",children:[y.jsxs("span",{className:d==="blue"?"current-blue":"current-red",children:[d==="blue"?"Blue":"Red"," to move"]}),a===u2.AI&&y.jsxs("span",{className:"mode-play",children:[m==="easy"?"Easy":"Hard"," AI"]}),Sm&&y.jsxs("span",{className:"wager-display",children:["Wager: ",te," tDMT"]})]}),G?y.jsxs("div",{className:"chess-main-area",children:[y.jsx("div",{className:"chessboard-container",children:y.jsxs("div",{className:"chessboard",style:{backgroundImage:`url(${lr})`},children:[Array.from({length:8},(q,K)=>y.jsx("div",{className:"board-row",children:Array.from({length:8},(ae,oe)=>Lf(K,oe))},K)),M&&M.show&&y.jsx("div",{className:"capture-animation",style:{position:"absolute",top:`${M.row*12.5}%`,left:`${M.col*12.5}%`,width:"12.5%",height:"12.5%",zIndex:10},children:y.jsx("img",{src:"/images/capture.gif",alt:"capture",style:{width:"100%",height:"100%"}})})]})}),y.jsxs("div",{className:"game-controls-compact",children:[y.jsxs("div",{className:"sidebar-toggle-group",children:[y.jsx("button",{className:Co==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Ed("leaderboard"),children:"Leaderboard"}),y.jsx("button",{className:Co==="moves"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Ed("moves"),children:"Moves"}),y.jsx("button",{className:Co==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Ed("gallery"),children:"Gallery"})]}),y.jsx("button",{onClick:Eo,children:"New Game"}),y.jsx("button",{onClick:Ql,children:"Menu"})]})]}):At?eR():Sm?y.jsx(yne,{onClose:t,onMinimize:e,fullscreen:n}):y.jsxs("div",{className:"game-mode-panel-streamlined",children:[y.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:y.jsx("img",{src:"/assets/lawbstationgame.png",alt:"Lawbstation Chess",style:{width:"100%",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),y.jsxs("div",{className:"mode-selection-compact",children:[y.jsx("button",{className:`mode-btn-compact ${a==="ai"?"selected":""}`,onClick:()=>c("ai"),children:"VS AI"}),y.jsx("button",{className:`mode-btn-compact ${Sm?"selected":""}`,onClick:()=>c("online"),children:"PvP"})]}),a===u2.AI&&y.jsx("button",{className:"start-btn-compact",onClick:()=>ne(!0),children:"Start Game"}),Sm&&y.jsxs("div",{className:"pvp-info",children:[y.jsx("p",{children:"Challenge other players with tDMT wagers"}),y.jsx("p",{children:"Create or join games instantly"})]}),y.jsxs("div",{className:"help-section-compact",children:[y.jsx("h4",{children:"How to Play"}),y.jsxs("div",{className:"help-content",children:[y.jsxs("p",{children:[y.jsx("strong",{children:"Objective:"})," Checkmate your opponent's king by placing it under attack with no legal moves to escape."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Game Setup:"})," Blue pieces start at the bottom, Red pieces at the top. Blue always moves first."]}),y.jsx("p",{children:y.jsx("strong",{children:"Piece Movements:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Pawn:"})," Moves forward one square (or two on first move), captures diagonally"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Knight:"})," Moves in L-shape: 2 squares in one direction, then 1 square perpendicular"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Bishop:"})," Moves any number of squares diagonally"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Rook:"})," Moves any number of squares horizontally or vertically"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Queen:"})," Moves any number of squares in any one direction"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"King:"})," Moves one square in any direction"]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Special Rules:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Check:"})," When your king is under attack - you must move to escape"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Checkmate:"})," When your king is under attack with no legal moves to escape. endGame."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Stalemate:"})," When you have no legal moves but your king is not in check (draw). endGame."]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Pawn Promotion:"})," When a pawn reaches the opposite end of chess board, Player chooses which chess piece to swap pawn out for."]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Game Modes:"})}),y.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsxs("li",{children:[y.jsx("strong",{children:"Single Player:"})," Practice against the computer (Easy/Hard difficulty)"]}),y.jsxs("li",{children:[y.jsx("strong",{children:"Multiplayer:"})," wage tDMT and challenge other players on Sanko testnet. Winner takes the pot minus 5% house fee."]})]}),y.jsx("p",{children:y.jsx("strong",{children:"Multiplayer Flow:"})}),y.jsxs("ol",{style:{margin:"5px 0",paddingLeft:"20px",fontSize:"12px"},children:[y.jsx("li",{children:"Connect your wallet to Sanko testnet"}),y.jsx("li",{children:"Create a game and set your wager amount in tDMT"}),y.jsx("li",{children:"Share your invite code with an opponent"}),y.jsx("li",{children:"Opponent joins and matches your wager"}),y.jsx("li",{children:"Game begins automatically - Blue (Player 1) moves first"}),y.jsx("li",{children:"Winner claims the pot minus 5% house fee"})]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Leaderboard:"})," All games are tracked to your connected wallet. Win = 3 points, Draw = 1 point, Loss = 0 points."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Lawb Chess Testnet Contract:"})," ",y.jsx("a",{href:"https://testnet.sankoscan.io/address/0x3112AF5728520F52FD1C6710dD7bD52285a68e47?tab=contract",target:"_blank",rel:"noopener noreferrer",style:{color:"#32CD32"},children:"0x3112AF5728520F52FD1C6710dD7bD52285a68e47"})]}),y.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#000000",borderRadius:"4px",fontSize:"12px"},children:[y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Network Name:"})," Sanko Testnet"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"RPC URL:"})," https://sanko-arb-sepolia.rpc.caldera.xyz/http"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Chain ID:"})," 1992"]}),y.jsxs("p",{style:{margin:"2px 0",color:"#32CD32"},children:[y.jsx("strong",{children:"Currency Symbol:"})," tDMT"]})]})]})]}),y.jsx("div",{style:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},children:y.jsx("img",{src:"/images/chessboards.gif",alt:"Chessboards Animation",style:{maxWidth:"100%",width:"300px",height:"auto",borderRadius:"0px",boxShadow:"none"}})}),y.jsxs("div",{className:"sidebar-toggle-group",style:{marginTop:"20px",justifyContent:"center"},children:[y.jsx("button",{className:Co==="leaderboard"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Ed("leaderboard"),children:"Leaderboard"}),y.jsx("button",{className:Co==="gallery"?"sidebar-toggle-btn selected":"sidebar-toggle-btn",onClick:()=>Ed("gallery"),children:"Gallery"})]})]})]})]})}),ie&&Tb(!0),I&&xb(),fe&&y.jsx("div",{className:"leaderboard-updated-msg",children:"Leaderboard updated!"}),tR&&y.jsxs("div",{className:"victory-overlay",children:[y.jsx("div",{className:"balloons-container"}),y.jsx("div",{className:"victory-modal",children:y.jsxs("div",{className:"victory-content",children:[y.jsx("img",{src:"/images/victory.gif",alt:"Victory",style:{width:120,marginBottom:16}}),y.jsx("div",{children:"Victory!"}),y.jsx("button",{onClick:Eo,children:"New Game"})]})})]}),nR&&y.jsxs("div",{className:"defeat-overlay",children:[y.jsx("div",{className:"blood-overlay"}),y.jsx("div",{className:"victory-modal",children:y.jsxs("div",{className:"victory-content",children:[y.jsx("img",{src:"/images/loser.gif",alt:"Defeat",style:{width:120,marginBottom:16}}),y.jsx("div",{children:"Defeat!"}),y.jsx("button",{onClick:Eo,children:"Try Again"})]})})]})]})};function TW(t,e){let n="";for(let r=0;r<8;r++){let s=0;for(let i=0;i<8;i++){const o=t[r][i];o?(s>0&&(n+=s,s=0),o>="a"&&o<="z"?n+=o.toUpperCase():o>="A"&&o<="Z"?n+=o.toLowerCase():n+=o):s++}s>0&&(n+=s),r<7&&(n+="/")}return n+=" "+(e==="blue"?"w":"b"),n+=" - - 0 1",n}const RW=()=>{const[t,e]=k.useState("singleplayer"),n=()=>{window.location.href="/"};return y.jsx("div",{className:"chess-page",children:y.jsx("div",{className:"chess-content",children:t==="singleplayer"?y.jsx(_qe,{onClose:n}):y.jsx(yne,{onClose:n,onMinimize:()=>{},fullscreen:!1})})})},Aqe=new V4e,Sqe=typeof window<"u"&&window.location.hostname.startsWith("chess."),xqe=()=>qFe("(max-width: 768px)")?y.jsx(GFe,{}):y.jsx(P8e,{});R2.createRoot(document.getElementById("root")).render(y.jsx(Go.StrictMode,{children:y.jsx(y4e,{config:VFe,children:y.jsx(gFe,{client:Aqe,children:y.jsx(T8e,{children:y.jsx(x8e,{children:Sqe?y.jsx(RS,{path:"/*",element:y.jsx(RW,{})}):y.jsxs(y.Fragment,{children:[y.jsx(RS,{path:"/",element:y.jsx(xqe,{})}),y.jsx(RS,{path:"/chess",element:y.jsx(RW,{})})]})})})})})}));export{QVe as $,Ve as A,mt as B,$e as C,at as D,cE as E,ND as F,Sv as G,gc as H,uye as I,Bn as J,XVe as K,A3 as L,gs as M,oye as N,we as O,Id as P,xS as Q,jt as R,bc as S,Yi as T,M_e as U,dE as V,Ms as W,KVe as X,ps as Y,Zg as Z,gl as _,NS as a,wX as a0,S3 as a1,Dw as a2,Js as a3,nKe as a4,Wu as a5,$l as a6,qC as a7,et as a8,Hr as a9,zW as aA,Bqe as aB,nC as aC,jbe as aD,o4e as aE,ja as aF,Fa as aG,JY as aH,UEe as aI,Jd as aa,MY as ab,RT as ac,pe as ad,ML as ae,Zr as af,Xwe as ag,VN as ah,nU as ai,oEe as aj,K_ as ak,Ua as al,Pf as am,rE as an,Bl as ao,s2e as ap,LVe as aq,TF as ar,YJ as as,KOe as at,i2e as au,UVe as av,MVe as aw,yT as ax,FVe as ay,BVe as az,Fn as b,Fe as c,ot as d,z as e,hr as f,ju as g,ZVe as h,Qu as i,Wo as j,yt as k,Qi as l,WPe as m,Al as n,V$e as o,Ke as p,yl as q,JVe as r,bn as s,QV as t,ar as u,h4 as v,ta as w,VVe as x,si as y,ni as z};
